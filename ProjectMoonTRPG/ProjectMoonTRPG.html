<div id="menuContainer">

<div id="credits"> <div class="creditIcon"></div> 

<div class="creditText">
<span data-i18n="credits0">
<b>Project Moon TRPG</b><br> is a fan-made system based on the games of Project Moon.</span><br><br>

<b><span data-i18n="credits1">Sheet base:</span></b> @ChungMu35<br>
<b><span data-i18n="credits2">Game system:</span></b> @helloing0119<br>
<b><span data-i18n="credits3">Translations/Editing:</span></b> @punibird<br>
<b><span data-i18n="credits4">Supported by:</span></b> Project Moon Tabletop Discord<br><br>
<b>Discord:</b> <input type="text" class="darkInput" value="https://discord.gg/AJBnUV5tbVt"><br>
<b><span data-i18n="credits5">System:</span></b> <input type="text" class="darkInput" value="https://drive.google.com/drive/u/2/folders/15nMYLz0sB5xWUiSOG4oN6IsteRJjpdZk">
</div>

<br>
</div>

<div id="settings">
<div class="settingsIcon"><img src="https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/gear.png"></div>

<div class="settingsText">
<span data-i18n="settings">Settings</span>

<input type="text" name="attr_messageOverride" value="0" hidden="true">

<label for="MuteMessage"><input type="checkbox" id="MuteMessage" name="attr_settingMuteMessage" value="true">
<span data-i18n="settings-mute">Mute ailment messages</span></label>

<label for="AutoDetect"><input type="checkbox" id="AutoDetect" name="attr_settingAutoDetect" value="true" /checked>
<span data-i18n="settings-detect">Auto: Detect combat states</span></label>

<label for="TurnUpdate"><input type="checkbox" id="TurnUpdate" name="attr_settingTurnUpdate" value="true">
<span data-i18n="settings-turnupdate">Auto: Update Turn Order</span></label>

<label for="DistortSave"><input type="checkbox" id="DistortSave" name="attr_settingDistortSave" value="true"><span data-i18n="settings-distortsave">Auto: Save/Load on Distort</span></label>


<label for="SimpleDisplay"><input type="checkbox" id="SimpleDisplay" name="attr_settingSimpleDisplay" value="true"><span data-i18n="settings-simpledisplay">Simple roll display</label>

<label for="ExtraEquip"><input type="checkbox" id="ExtraEquip" name="attr_settingExtraEquip" value="true"><span data-i18n="settings-extraequip">Extra weapons/tools/skills</span></label>

<label for="LimbusStyle"><input type="checkbox" id="LimbusStyle" name="attr_settingLimbusStyle" value="true"><span data-i18n="settings-limbusstyle">Limbus style ailment icons</span></label>

<label for="HideSpecial"><input type="checkbox" id="HideSpecial" name="attr_settingHideSpecial" value="true"><span data-i18n="settings-hidespecial">Hide: Special items</span></label>

<label for="HelperText"><input type="checkbox" id="HelperText" name="attr_settingHelperText" value="true"><span data-i18n="settings-hidehelpertext">Hide:  Helper text</span></label>

<label for="HideShare"><input type="checkbox" id="HideShare" name="attr_settingHideShare" value="true"><span data-i18n="settings-hideshare">Hide: Share buttons</span></label>

<label for="HideUses"><input type="checkbox" id="HideUses" name="attr_settingHideUses" value="true"><span data-i18n="settings-hideuses">Hide: Uses in messages</span></label>

<label for="MultihitUses"><input type="checkbox" id="MultihitUses" name="attr_settingMultihitUses" value="true"><span data-i18n="settings-multihituses">Spend Uses per Multi-hit</span></label>

<label for="MultihitFull"><input type="checkbox" id="MultihitFull" name="attr_settingMultihitFull" value="true"><span data-i18n="settings-multihitfull">No Power debuff on Multi-hit</span></label>

<label for="BurnImmune"><input type="checkbox" id="BurnImmune" name="attr_settingBurnImmune" value="true"><span data-i18n="settings-burnimmune">No Burn damage</span></label>

<label for="BleedImmune"><input type="checkbox" id="BleedImmune" name="attr_settingBleedImmune" value="true"><span data-i18n="settings-bleedimmune">No Bleed damage</span></label>

</label>


</div>

</div>

</div>
<br>

 	<div class="player">
            <div><span data-i18n="assessed">Assessed by: </span></div>
            <input type="text" placeholder="Player name" id="playerName" name="attr_player_name" data-i18n-placeholder="playername">
        </div>

              <div id="logo">
                    <img src="https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/images/PMTRPGLogo.png" title="Project Moon TRPG"></div>

	<div class="rowContainer centerFlex">    
        <div id="sheetTitle"><span data-i18n="sheet-title">Background Investigation and Combat Ability Report</span></div>

	      </div>


<div id="sheetWrapper">

<input type="checkbox" id="messageToggle" name="attr_popup_display" value="true" hidden="true">
<div id="messagePop">
<div class="rowContainer centerFlex">

<div class="messageContent columnAlign">

<div class="messageClose">
<label for="messageToggle">x</label></div>

<input type="text" class="mHeader transpInput" name="attr_popup_messageHeader">
<textarea type="text" class="mBody transpInput" name="attr_popup_messageBody" style="overflow: hidden;">


</div>
</div>
</div>

<div id="TopContainer"> <!-- Top section container -->

<div id="TopColumnL" style="position: relative;"> <!-- Column 1 -->

<div class="profileHeader">
<input type="checkbox" name="attr_distortStateTemp" value="true" hidden="true">
<input type="checkbox" id="attr_distortState" name="attr_distortState" value="true"><label for="attr_distortState" class="distortIcon" data-i18n-title="distort-toggleText" title="Distort"></label>
</div>

<!-- Distortion Top Profile block -->

<div class="columnContent">



<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true">
        <div class="contentContainer hide-item BLACK distortProfile">
	<div class="sectionHeader rowContainer BLACK" style="position: relative;">
		<div>
<input class="outfitRank" type="text" name="attr_charaRankCalculated" value="@{charRankBase}" placeholder="0" disabled="true" title="Rank" data-i18n-title="rank">
		</div>

		<input type="text" class="transpInput contentName" id="DistortionName" name="attr_distort_name" placeholder="Distortion Name" data-i18n-placeholder="distort-name">

<div id="Counter" style="position: absolute; right: 20px; top: 5px; z-index: 50;">
                            <div class="columnAlign"> 

	<div class="rowContainer centerFlex bars" data-i18n-title="distort-counter-title">
	<input id="HPbar" class="Cstat HPtext" type="number" name="attr_distortCounter" value="4" min="0">
	<input class="Mstat HPtext" type="text" name="attr_distortCounter_max" value="4">
	</div>

                            </div>
			</div>

	</div>


<div class="columnAlign BLACK work" style="padding-left: 10px; padding-right: 105px; padding-top: 5px; position: relative; margin-bottom: 10px;">

<b data-i18n="distort-workamount-title">Required work amount</b>
	<div id="WorkAmount" class="rowContainer centerFlex workPref" style="margin-top: 5px;">
<input type="text" name="attr_distortWorkBase" value="4" hidden="true">
<input type="text" class="outfitRank whiteInput" name="attr_distortWorkBase" value="4" data-i18n-title="distort-workamount-title" title="Required work amount" style="width: 90px; !important; height: 35px !important;">

         </div>

<div class="columnAlign workPref" style="margin-top: 5px;">

<div class="rowContainer">
<input type="text" class="instinct outfitRank whiteInput" name="attr_distortWorkInstinct" min="-8" max="8" value="0" data-i18n-title="stats-instinct" title="Instinct">
<input type="text" class="wisdom outfitRank whiteInput" name="attr_distortWorkWisdom" min="-8" max="8" value="0" data-i18n-title="stats-wisdom" title="Wisdom">
<input type="text" class="justice outfitRank whiteInput" name="attr_distortWorkJustice" min="-8" max="8" value="0" data-i18n-title="stats-justice" title="Justice">
</div>
<div class="rowContainer">
<input type="text" class="charm outfitRank whiteInput" name="attr_distortWorkCharm" min="-8" max="8" value="0" data-i18n-title="stats-charm" title="Charm">
<input type="text" class="insight outfitRank whiteInput" name="attr_distortWorkInsight" min="-8" max="8" value="0" data-i18n-title="stats-insight" title="Insight">
<input type="text" class="temperance outfitRank whiteInput" name="attr_distortWorkTemperance" min="-8" max="8" value="0" data-i18n-title="stats-temperance" title="Temperance">
</div>

<b data-i18n="distort-workpreference">Work Preference</b>

</div>

<div class="columnAlign" style="position: absolute; bottom: 0px; right: 5px;">

<div class="rowContainer centerFlex" data-i18n-title="distort-loweringresults-title" title="Counter-lowering results">
<div class="toggleable">
<input type="checkbox" name="attr_distortResultGood" value="Good" id="result_good" class="expand-toggle">
<label class="status_effect_item expand-btn" for="result_good">
<img src="https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/good.png" class="statusIcon staggered">
</label>
</div>

<div class="toggleable">
<input type="checkbox" name="attr_distortResultNormal" value="Normal" id="result_normal" class="expand-toggle">
<label class="status_effect_item expand-btn" for="result_normal">
<img src="https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/normal.png" class="statusIcon staggered">
</label>
</div>

<div class="toggleable">
<input type="checkbox" name="attr_distortResultBad" value="Bad" id="result_bad" class="expand-toggle">
<label class="status_effect_item expand-btn" for="result_bad">
<img src="https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/bad.png" class="statusIcon staggered">
</label>
</div>

</div>
<b data-i18n="distort-loweringresults">Counter-lowering Results</b>

</div>
</div>


<div class="CharImage distortion" style="right: 5px;"><img name="attr_character_avatar"><div class="CharImageText"><span data-i18n="character-photo">Photo</span></div></div>

<div class="profileData">
<div class="textSection">URL</div>
<input class="CharResidence whiteInput" type="text" name="attr_distort_url" placeholder="External sheet/reference." data-i18n-placeholder="character-url-placeholder"></div>

<div class="profileData">
<div class="textSection"><span data-i18n="character-summary">Summary</span></div>
<textarea spellcheck="false"  name="attr_distort_summary"  class="CharTopNotes whiteInput" placeholder="General Distortion summary." data-i18n-placeholder="distort-summary-placeholder"></textarea></div>

<div class="profileData">
<div class="textSection"><span data-i18n="distort-behavior">Behavior</span></div>
<textarea spellcheck="false"  name="attr_distort_behavior"  class="CharTopNotes whiteInput" placeholder="Notes on Distortion behavior." data-i18n-placeholder="distort-behavior-placeholder"></textarea></div>

	<div class="profileData">
	<div class="textSection" data-i18n="distort-taboo">Taboos/Boons</div>
	<textarea spellcheck="false"  name="attr_distort_taboo" class="CharTopNotes whiteInput" data-i18n-placeholder="distort-taboo-placeholder" placeholder="Distortion taboos."></textarea>
	</div>

<div class="profileData">
<div class="textSection"><span data-i18n="character-combatnote">Combat Notes</span></div>
<textarea spellcheck="false"  name="attr_distort_combatnote"  class="CharTopNotes whiteInput" placeholder="Reminders for passive effects, extra damage, etc." data-i18n-placeholder="character-combatnote-placeholder"></textarea></div>




<!-- Distortion effects --> 
                <div class="columnContent">

<div class="rowContainer centerFlex BLACK" style="padding: 5px;">
<b data-i18n="distort-effectText">Distortion Effects</b>
</div>

<div class="columnAlign">

<div class="rowContainer">
<textarea spellcheck="false" name="attr_distortDescription" class="distortDescInput instinct" placeholder="Distortion description." data-i18n-placeholder="distort-descAtt" style="margin-bottom: 0px;"></textarea>

	<textarea spellcheck="false" class="distortEffectInput instinct" name="attr_distortEffect" placeholder="Distortion effects." data-i18n-placeholder="distort-effectAtt" style="margin-bottom: 0px;"></textarea>
</div>

<div class="rowContainer">
<textarea spellcheck="false"   name="attr_distortDescription2" class="distortDescInput SANtext" placeholder="Distortion description." data-i18n-placeholder="distort-descDef" style="margin-bottom: 0px;"></textarea>

	<textarea spellcheck="false" class="distortEffectInput SANtext"  name="attr_distortEffect2" placeholder="Distortion effects." data-i18n-placeholder="distort-effectDef" style="margin-bottom: 0px;"></textarea>
</div>

<!-- Distort Share section -->
<input type="checkbox" class="hide-toggle-rev" name="attr_settingHideShare" value="true">
<div class="hide-item-rev" style="position: absolute; bottom: 0px; right: 0px;">

<button type="action" class="darkInput shareButton" name="act_shareDistort" data-i18n-title="share" title="Share info"></button>

<button type="action" class="darkInput editButton" id="edit_outfit" name="act_editMode" data-i18n-title="edit" title="Edit"></button>

</div>
<!-- Distort Share end -->

<!-- Distort edit -->
<input type="checkbox" class="hide-toggle" name="attr_settingEditMode" value="true">
<div class="editCover hide-item">

<div class="rowContainer" style="width:60%;">
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_burnResist_ego" value="0" hidden="true">

        <div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon burn"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon burn-limbus"></div>
	</div>
	</div>

        <div class="status_effect_value"><input type="number" class="ailmentNum" name="attr_burnResist_ego" value="0"></div>
</div>

<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_bleedResist_ego" value="0" hidden="true">

        <div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon bleed"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon bleed-limbus"></div>
	</div>
	</div>

       <div class="status_effect_value"><input type="number"  class="ailmentNum" name="attr_bleedResist_ego" value="0"></div>
</div>

	</div>
</div>

<!-- Distort edit -->




</div>

<div class="sectionHeader rowContainer BLACK" style="height: 40px">

<div class="rowContainer centerFlex distortionDice">
	<div class="dicerollBlock egoDiceATK" data-i18n-title="distort-weapon-dice" title="Att modifier applied when Distorted.">
		<input type="text" class="diceNum" name="attr_distortWeaponDice1" placeholder="0" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_distortWeaponDice2" placeholder="0" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_distortWeaponDice3" placeholder="0" value="0">
	</div>

	<div class="dicerollBlock egoDiceDEF" data-i18n-title="distort-def-dice" title="Def modifier applied when Distorted." style="margin: 0px !important;">
		<input type="text" class="diceNum" name="attr_distortDefDice1" placeholder="0" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_distortDefDice2" placeholder="0" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_distortDefDice3" placeholder="0" value="0">
		</div>

		<div class="dicerollBlock egoDiceEVD" data-i18n-title="distort-evd-dice" title="Evd modifier applied when Distorted.">
		<input type="text" class="diceNum" name="attr_distortEvdDice1" placeholder="0" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_distortEvdDice2" placeholder="0" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_distortEvdDice3" placeholder="0" value="0">
		</div>


</div>

</div></div> <!-- Distortion Effects container -->



                    </div>
                </div>
<!-- Distortion profile END -->


<!-- Top Profile block -->
<div class="columnContent" style="margin-bottom: 5px;">

<input type="checkbox" class="hide-toggle-rev" name="attr_distortState" value="true">
        <div class="contentContainer hide-item-rev">
	<div class="sectionHeader rowContainer skillN" style="position: relative;">
		<input type="text" name="attr_charRankBase" value="0" hidden="true">

		<div>
		<input type="text" name="attr_charRankNum" value="0" hidden="true">
<input class="outfitRank transpInput" type="text" name="attr_charaRankCalculated" value="@{charRankBase}" placeholder="0" disabled="true" title="Rank" data-i18n-title="rank">
		</div>

<input type="text" name="attr_character_name" hidden="true">
		<input type="text" class="transpInput contentName" id="CharacterName" name="attr_character_nameBase" placeholder="Character Name" data-i18n-placeholder="character-name">

	<div class="rowContainer levelBox">
                        
                        <div id="Level">
                            <div class="columnAlign" style="position: relative;">
			<div class="blocker"></div>
<span data-i18n="character-level">Level</span><input type="text" class="outfitRank darkInput" name="attr_level" id="level_value" value="0">
                            </div>
			</div>

			<div id="EXP">
                            <div class="columnAlign"><span data-i18n="character-exp">EXP</span><input type="number" class="darkInput" name="attr_EXP" value="0"></div>
                        </div>

         </div>

	</div>

<div class="CharImage"><img name="attr_character_avatar"><div class="CharImageText"><span data-i18n="character-photo">Photo</span></div></div>

<div class="profileData">
<div class="textSection"><span data-i18n="character-job">Occupation</span></div>
<input class="CharResidence" type="text" name="attr_character_job"></div>
                        
<div class="profileData">
<div class="textSection"><span data-i18n="character-age">Age</span></div>
<input class="CharOrigin" type="text" name="attr_age"></div>

<div class="profileData">
<div class="textSection"><span data-i18n="character-height">Height</span></div>
<input class="CharOrigin" type="text" name="attr_height"></div>

<div class="profileData">
<div class="textSection"><span data-i18n="character-origin">Birthplace</span></div>
<input class="CharOrigin" type="text" name="attr_character_origin"></div>

<div class="profileData">
<div class="textSection"><span data-i18n="character-residence">Residence</span></div>
<input class="CharOrigin" type="text" name="attr_character_residence"></div>

<div class="profileData">
<div class="textSection"><span data-i18n="character-assets">Assets</span></div>
<input class="CharResidence" type="text" name="attr_character_assets" placeholder="Money, items, other assets." data-i18n-placeholder="character-assets-placeholder"></div>

<div class="profileData">
<div class="textSection"><span data-i18n="character-ahn">Ahn</span></div>
<input class="CharResidence" type="text" name="attr_character_ahn" data-i18n-placeholder="character-ahn-placeholder"></div>

<div class="profileData">
<div class="textSection">URL</div>
<input class="CharResidence" type="text" name="attr_character_url" placeholder="External sheet/reference." data-i18n-placeholder="character-url-placeholder"></div>
                            
<div class="profileData">
<div class="textSection"><span data-i18n="character-summary">Summary</span></div>
<textarea spellcheck="false"  name="attr_character_summary"  class="CharTopNotes" placeholder="General character summary." data-i18n-placeholder="character-summary-placeholder"></textarea></div>

<div class="profileData">
<div class="textSection"><span data-i18n="character-combatnote">Combat Notes</span></div>
<textarea spellcheck="false"  name="attr_character_combatnote"  class="CharTopNotes" placeholder="Reminders for passive effects, extra damage, etc." data-i18n-placeholder="character-combatnote-placeholder"></textarea></div>


                    </div>
                </div>
<!-- Top profile END -->


<!-- EGO block -->
                <div class="columnContent">

	<input type="checkbox" class="hide-toggle-rev" name="attr_distortState" value="true">
                    <div class="contentContainer hide-item-rev">

	<div class="sectionHeader rowContainer BLACK">

<input type="text" class="transpInput contentName" name="attr_egoName" placeholder="Mystery name (E.G.O)" data-i18n-placeholder="ego-name" style="margin-left: 35px; width: 100% !important">
	

<div class="iconHolder">

		<div>
		<div class="attackIcon">
		<div class="typeIcon question"></div>
		</div>


		<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Weapon">
		<div class="hide-item">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_egoWeaponType"><div class="type-image typeIcon egoSlash BLACK"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_egoWeaponType"><div class="type-image typeIcon egoPierce BLACK"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_egoWeaponType"><div class="type-image typeIcon egoBlunt BLACK"></div>
		</div>

		<div style="position: absolute; top:0; left: 0; width: 100%;">
		<input type="checkbox" class="transpInput egoCheck" name="attr_egoActiveState" value="true" style="accent-color: #cc4125" title="Activate Mystery" data-i18n-title="ego-activate">
		</div>

		</div>
		</div></div>

		<div>
		<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Outfit">
		<div class="hide-item">
<input type="checkbox" class="transpInput egoCheck" name="attr_egoActiveState" value="true" style="accent-color: #6d9eeb" title="Activate Mystery" data-i18n-title="ego-activate">

		<div class="attackIcon">
		<div class="typeIcon egoDef"></div>
		</div>

		</div></div>

		<div>
		<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Tool">
		<div class="hide-item">
<input type="checkbox" class="transpInput egoCheck" name="attr_egoActiveState" value="true" style="accent-color: #8e7cc3" data-i18n-title="ego-activate" title="Activate Mystery">

		<div class="attackIcon">
		<div class="typeIcon egoAct"></div>
		</div>

		</div></div>

		<div>
		<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Special">
		<div class="hide-item">
		<input type="checkbox" class="transpInput egoCheck" name="attr_egoActiveState" value="true" data-i18n-title="ego-activate" style="accent-color: #cf8c44" title="Activate Mystery">

		<div class="attackIcon">
		<div class="typeIcon egoSpecial"></div>
		</div>

		</div></div>

	</div>

	<div class="rowContainer toolDescription centerFlex BLACK" style="padding-bottom: 5px;">
	<input type="text" class="outfitRank whiteInput" name="attr_egoRank" value="0" placeholder="0" data-i18n-title="rank" title="Rank" style="border: none;">

<div class="rowContainer centerFlex BLACK" data-i18n-title="ego-activecondition" title="Activation condition">

	<input type="text" name="attr_egoConditionTemp" hidden="true">
                                        <select name="attr_egoCondition" class="whiteInput half" style="height: 25px; margin-right: 5px;">
                                            <option value="None" data-i18n="ego-active-None">---</option>
                                            <option value="AlwaysActive" data-i18n="ego-active-AlwaysActive">Always active</option>
                                            <option value="HalfHealth" data-i18n="ego-active-HalfHealth">50% health</option>
                                            <option value="OnStagger" data-i18n="ego-active-OnStagger">On stagger</option>
                                            <option value="EnemyDefeat" data-i18n="ego-active-EnemyDefeat">Enemy defeat</option>
                                            <option value="AllyDefeat" data-i18n="ego-active-AllyDefeat">Ally defeat</option>
                                            <option value="Other" data-i18n="ego-active-Other">Other</option>
                                        </select>

                                        <select name="attr_egoType" class="whiteInput half" style="height: 25px; margin-right: 5px;" title="Manifestation type">
                                            <option value="None" data-i18n="ego-type-None">---</option>
                                            <option value="Weapon" data-i18n="ego-type-Weapon">Weapon</option>
                                            <option value="Outfit" data-i18n="ego-type-Outfit">Outfit</option>
                                            <option value="Tool" data-i18n="ego-type-Tool">Tool</option>
                                            <option value="Special" data-i18n="ego-type-Special">Special item</option>
                                        </select>

	</div>

        </div>

<div class="columnAlign">
<input name="attr_egoIdeology" type="text" class="egoIdeologyInput" placeholder="Manifested ideology." data-i18n-placeholder="ego-ideology">

<div class="rowContainer">
<textarea spellcheck="false"   name="attr_egoDescription" class="egoDescInput" placeholder="Mystery description." data-i18n-placeholder="ego-description" style="margin-bottom: 0px;"></textarea>

	<textarea spellcheck="false"   name="attr_egoEffect" placeholder="Mystery effects." data-i18n-placeholder="ego-effect" style="margin-bottom: 0px;"></textarea>
</div>

<input type="checkbox" class="hide-toggle-rev" name="attr_settingHideShare" value="true">
<div class="hide-item-rev" style="position: absolute; bottom: 0px; right: 0px;">

<button type="action" class="darkInput shareButton" name="act_shareEgo" data-i18n-title="share" title="Share info"></button>

<button type="action" class="darkInput editButton" id="edit_outfit" name="act_editMode" data-i18n-title="edit" title="Edit"></button>


</div>

<!-- EGO edit -->
<input type="checkbox" class="hide-toggle" name="attr_settingEditMode" value="true">
<div class="editCover hide-item">


<input type="checkbox" class="hide-toggle-rev" name="attr_egoType" value="Outfit" hidden="true">
	<div class="rowContainer hide-item-rev">
	<div class="settingStyle">
	<div class="settingStyle" style="width: 40px;"><b data-i18n="message-uses">Uses</b>:</div> 

	<input type="text" class="transpInput" style="width: 23px;" name="attr_egoUses" value="5"> / 
	<input type="number" class="darkInput" name="attr_egoUses_max" value="5" min="1">
	<select name="attr_egoUseType" class="darkInput" style="width: 70px; margin-left: 5px;">
		<option data-i18n="uses-nolimit" value="Limitless" selected>No limit</option>
		<option data-i18n="uses-reload" value="Reload">Reload</option>
		<option data-i18n="uses-deplete" value="Deplete">Deplete</option>
	</select>

	</div>
	</div>


<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Outfit" hidden="true">
<div class="hide-item">
<div class="rowContainer" style="width:60%;">
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_burnResist_ego" value="0" hidden="true">

        <div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon burn"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon burn-limbus"></div>
	</div>
	</div>

        <div class="status_effect_value"><input type="number" class="ailmentNum" name="attr_burnResist_ego" value="0"></div>
</div>

<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_bleedResist_ego" value="0" hidden="true">

        <div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon bleed"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon bleed-limbus"></div>
	</div>
	</div>

       <div class="status_effect_value"><input type="number"  class="ailmentNum" name="attr_bleedResist_ego" value="0"></div>
</div>

</div>
</div>

<!-- EGO edit -->
</div>
</div>

<!-- Weapon EGO menu -->
<div class="rowContainer centerFlex">
<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Weapon" hidden="true">
<div class="hide-item BLACK centerFlex" style="width: 100%; padding-top: 5px; padding-bottom: 5px;">

<div class="rowContainer centerFlex">

	<div class="dicerollBlock egoDiceATK" data-i18n-title="ego-weapon-dice" title="Att dice applied when Mystery is active." style="margin-bottom: 5px;">
		<input type="text" class="diceNum" name="attr_egoWeaponDice1" value="1">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_egoWeaponDice2" value="6">
		<div class="plainText">+</div>
		<input type="text" name="attr_egoWeaponDice3" placeholder="0" value="0">
		</div>



	</div>

	<select name="attr_egoWeaponType" class="weapon_type whiteInput">
 	<option value="None"   data-i18n="weapon-type-None">---</option>
         <option value="Slash" data-i18n="weapon-type-Slash">Slash</option>
         <option value="Pierce" data-i18n="weapon-type-Pierce">Pierce</option>
	 <option value="Blunt" data-i18n="weapon-type-Blunt">Blunt</option>
         </select>

	<select name="attr_egoWeaponRange" class="weapon_type whiteInput">
 	<option value="None"   data-i18n="weapon-type-None">---</option>
         <option value="Melee" data-i18n="weapon-type-Melee">Melee</option>
         <option value="Ranged" data-i18n="weapon-type-Ranged">Ranged</option>
         </select>

</div>
</div>
<!-- Weapon EGO menu END -->


<!-- Outfit EGO menu -->
<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Outfit" hidden="true">
<div class="hide-item BLACK" style="padding-top: 5px; padding-bottom: 5px; width: 100%;">

	<div class="rowContainer centerFlex BLACK" style="margin-bottom: 5px;">

		<div class="dicerollBlock egoDiceDEF" data-i18n-title="ego-defend-dice" title="Def dice applied when Mystery is active.">
		<input type="text" class="diceNum" name="attr_egoDefDice1" value="1">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_egoDefDice2" value="6">
		<div class="plainText">+</div>
		<input type="text" name="attr_egoDefDice3" placeholder="0" value="0">
		</div>

		<div class="dicerollBlock egoDiceEVD" data-i18n-title="ego-evade-dice" title="Evd dice applied when Mystery is active.">
		<input type="text" class="diceNum" name="attr_egoEvdDice1" value="1">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_egoEvdDice2" value="6">
		<div class="plainText">+</div>
		<input type="text" name="attr_egoEvdDice3" placeholder="0" value="0">
		</div>

	</div>

	<div class="rowContainer centerFlex" style="width: 100%;">

	<div class="rowContainer resistanceChart BLACK" style="width: 200px;">
		<div class="rowContainer centerFlex">

	<div id="outfit_res_slash">
		<div class="resIconLeft">
		<div class="resistIcon slashNormal"></div>
		</div>
	</div>
                            <select name="attr_egoImmune1" class="outfitresistVal whiteInput dmg">
				<option data-i18n="outfit-res-none" value="" selected disabled hidden>---</option>
                                <option data-i18n="outfit-res-fatal" value="2">[x2]　　　Fatal</option>
                                <option data-i18n="outfit-res-weak" value="1.5">[x1.5]　　Weak</option>
                                <option data-i18n="outfit-res-normal" value="1">[x1]　　　Normal</option>
                                <option data-i18n="outfit-res-endured" value="0.5">[x0.5]　　Endured</option>
                                <option data-i18n="outfit-res-ineffective" value="0.25">[x0.25]　　Ineffective</option>
                                <option data-i18n="outfit-res-immune" value="0">[x0]　　　Immune</option>
                            </select>

                            <select name="attr_egoImmune2" class="outfitresistVal whiteInput stg">
				<option data-i18n="outfit-res-none" value="" selected disabled hidden>---</option>
                                <option data-i18n="outfit-res-fatal" value="2">[x2]　　　Fatal</option>
                                <option data-i18n="outfit-res-weak" value="1.5">[x1.5]　　Weak</option>
                                <option data-i18n="outfit-res-normal" value="1">[x1]　　　Normal</option>
                                <option data-i18n="outfit-res-endured" value="0.5">[x0.5]　　Endured</option>
                                <option data-i18n="outfit-res-ineffective" value="0.25">[x0.25]　　Ineffective</option>
                                <option data-i18n="outfit-res-immune" value="0">[x0]　　　Immune</option>
                            </select>

<div id="outfit_res_slashSTG">
		<div class="resIconRight">
		<div class="resistIcon slashNormalSTG"></div>
		</div>
	</div>
		</div>

		<div class="rowContainer centerFlex">
<div id="outfit_res_pierce">
		<div class="resIconLeft">
		<div class="resistIcon pierceNormal"></div>
		</div>
	</div>
                            <select name="attr_egoImmune3" class="outfitresistVal whiteInput dmg">
				<option data-i18n="outfit-res-none" value="" selected disabled hidden>---</option>
                                <option data-i18n="outfit-res-fatal" value="2">[x2]　　　Fatal</option>
                                <option data-i18n="outfit-res-weak" value="1.5">[x1.5]　　Weak</option>
                                <option data-i18n="outfit-res-normal" value="1">[x1]　　　Normal</option>
                                <option data-i18n="outfit-res-endured" value="0.5">[x0.5]　　Endured</option>
                                <option data-i18n="outfit-res-ineffective" value="0.25">[x0.25]　　Ineffective</option>
                                <option data-i18n="outfit-res-immune" value="0">[x0]　　　Immune</option>
                            </select>

                            <select name="attr_egoImmune4" class="outfitresistVal whiteInput stg">
				<option data-i18n="outfit-res-none" value="" selected disabled hidden>---</option>
                                <option data-i18n="outfit-res-fatal" value="2">[x2]　　　Fatal</option>
                                <option data-i18n="outfit-res-weak" value="1.5">[x1.5]　　Weak</option>
                                <option data-i18n="outfit-res-normal" value="1">[x1]　　　Normal</option>
                                <option data-i18n="outfit-res-endured" value="0.5">[x0.5]　　Endured</option>
                                <option data-i18n="outfit-res-ineffective" value="0.25">[x0.25]　　Ineffective</option>
                                <option data-i18n="outfit-res-immune" value="0">[x0]　　　Immune</option>
                            </select>


<div id="outfit_res_pierceSTG">
		<div class="resIconRight">
		<div class="resistIcon pierceNormalSTG"></div>
		</div>
	</div>

		</div>

		<div class="rowContainer centerFlex">
<div id="outfit_res_blunt">
		<div class="resIconLeft">
		<div class="resistIcon bluntNormal"></div>
		</div>
	</div>


                            <select name="attr_egoImmune5" class="outfitresistVal whiteInput dmg">
				<option data-i18n="outfit-res-none" value="" selected disabled hidden>---</option>
                                <option data-i18n="outfit-res-fatal" value="2">[x2]　　　Fatal</option>
                                <option data-i18n="outfit-res-weak" value="1.5">[x1.5]　　Weak</option>
                                <option data-i18n="outfit-res-normal" value="1">[x1]　　　Normal</option>
                                <option data-i18n="outfit-res-endured" value="0.5">[x0.5]　　Endured</option>
                                <option data-i18n="outfit-res-ineffective" value="0.25">[x0.25]　　Ineffective</option>
                                <option data-i18n="outfit-res-immune" value="0">[x0]　　　Immune</option>
                            </select>

                            <select name="attr_egoImmune6" class="outfitresistVal whiteInput stg">
				<option data-i18n="outfit-res-none" value="" selected disabled hidden>---</option>
                                <option data-i18n="outfit-res-fatal" value="2">[x2]　　　Fatal</option>
                                <option data-i18n="outfit-res-weak" value="1.5">[x1.5]　　Weak</option>
                                <option data-i18n="outfit-res-normal" value="1">[x1]　　　Normal</option>
                                <option data-i18n="outfit-res-endured" value="0.5">[x0.5]　　Endured</option>
                                <option data-i18n="outfit-res-ineffective" value="0.25">[x0.25]　　Ineffective</option>
                                <option data-i18n="outfit-res-immune" value="0">[x0]　　　Immune</option>
                            </select>

<div id="outfit_res_bluntSTG">
		<div class="resIconRight">
		<div class="resistIcon bluntNormalSTG"></div>
		</div>
	</div>


		</div>
</div>
</div>

</div>
<!-- Outfit EGO menu end -->

<!-- Tool EGO menu -->
<div class="rowContainer centerFlex">
<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Tool" hidden="true">
<div class="hide-item BLACK centerFlex" style="width: 100%; padding-top: 5px; padding-bottom: 5px;">

<div class="rowContainer centerFlex">



</div>
</div>

</div>
<!-- Tool EGO menu END -->

<!-- Special EGO menu -->
<div class="rowContainer centerFlex">
<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Special" hidden="true">
<div class="hide-item BLACK centerFlex" style="width: 100%; padding-top: 5px; padding-bottom: 5px;">

<div class="columnAlign">


<div class="rowContainer centerFlex egoSpecialLabel">
<span data-i18n="special-risk-text">Risk Level</span>
<select name="attr_egoRisk" class="whiteInput" style="text-align: center;">
			<option data-i18n="special-risk-none" value="none">---</option>
			<option data-i18n="special-risk-0" value="0">Canard</option>
			<option data-i18n="special-risk-1" value="1">Urban Myth</option>
			<option data-i18n="special-risk-2" value="2">Urban Legend</option>
			<option data-i18n="special-risk-3" value="3">Urban Plague</option>
			<option data-i18n="special-risk-4" value="4">Urban Nightmare</option>
			<option data-i18n="special-risk-5" value="5">Star of the City</option>
			<option data-i18n="special-risk-6" value="6">Impuritas Civitatis</option>
		</select>
</div>


<div class="rowContainer centerFlex egoSpecialLabel">
	<span data-i18n="special-range-text">Effect Range</span>
 		<select name="attr_egoRange" class="whiteInput" id="ego_range" style="text-align: center;">
                          <option data-i18n="special-range-none" value="none">---</option>
                          <option data-i18n="special-range-0" value="0">One or two people</option>
                          <option data-i18n="special-range-1" value="1">Street</option>
                          <option data-i18n="special-range-2" value="2">Neighborhood</option>
                          <option data-i18n="special-range-3" value="3">Residence Area</option>
                          <option data-i18n="special-range-4" value="4">Nest</option>
                          <option data-i18n="special-range-5" value="5">Multiple Nests</option>
                          <option data-i18n="special-range-6" value="6">City</option>
               	</select>
</div>


<div class="rowContainer centerFlex egoSpecialLabel">
	<span data-i18n="special-duration-text">Duration</span>
		<select name="attr_egoDuration" class="whiteInput" id="ego_duration" style="text-align: center;">
			<option data-i18n="special-duration-none" value="none">---</option>
			<option data-i18n="special-duration-0" value="0">A moment</option>
			<option data-i18n="special-duration-1" value="1">Seconds</option>
			<option data-i18n="special-duration-2" value="2">Minutes</option>
			<option data-i18n="special-duration-3" value="3">Hours</option>
			<option data-i18n="special-duration-4" value="4">Days</option>
			<option data-i18n="special-duration-5" value="5">Weeks</option>
			<option data-i18n="special-duration-6" value="6">Months</option>
              	</select>
</div>


</div>
</div>
</div>
<!-- Special EGO menu END -->



</div> <!-- end EGO container -->


</div>
</div>

            <div id="TopColumnM"> <!-- column 2 -->
                        <div class="rowContainer titleHeader"><button type="action" class="qolButton" name="act_resetHealth" data-i18n-title="reset-button" title="Reset"> ! </button> <h4 data-i18n="heading-derived">Derived values</h4> </div>

                <div class="contentContainer darkBG">

<!-- row 1 -->
                    <div class="rowContainer">
	<input type="text" name="attr_dummy" value="0" hidden="true">
	<input type="text" name="attr_dummy2" value="0" hidden="true">
	<input type="text" name="attr_dummyIcon" value="0" hidden="true">

<div class="banner HPtext"><span data-i18n="bar-health">Health</span>
	<div class="rowContainer centerFlex bars">
	<input id="HPbar" class="Cstat HPtext" type="number" name="attr_HP" value="30">
	<input class="Mstat HP" type="text" name="attr_HP_max" value="30">
	</div>
</div>

	<div class="banner egoSTGRtext"><span data-i18n="bar-stagres">Stagger Res</span>
	<div class="rowContainer centerFlex bars">
	<input id="STGRbar" class="Cstat egoSTGRtext" type="number" name="attr_StagRes" value="20">
	<input class="Mstat egoSTGR" type="text" name="attr_StagRes_max" value="20">

	</div>
</div>

</div>

<!-- row 2 -->
		<div class="rowContainer">
	<div class="banner SANtext"><span data-i18n="bar-sanity">Sanity</span>
	<div class="rowContainer centerFlex bars">

	<input type="checkbox" class="hide-toggle-rev" name="attr_distortState" value="true" >
	<div class="hide-item-rev">
	<input id="SANbar" class="Cstat SANtext" type="number" name="attr_SP" value="15">
	<input class="Mstat SAN" type="text" name="attr_SP_max" value="15">
	</div>

	<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true" >
	<div class="hide-item" data-i18n="message-distorted" style="text-align: center; opacity: 50%;">
	Distorted
	</div>

	</div>
</div>

	<div class="banner LIGHTtext"><span data-i18n="bar-light">Light</span>
	<div class="rowContainer centerFlex bars">
	<input id="LIGHTbar" class="Cstat LIGHTtext" type="number" name="attr_Light" value="3">
	<input class="Mstat LIGHT" type="text" name="attr_Light_max" value="3">
	</div>
</div>
</div>

                </div>




	<!-- Roll helper palette -->
	<div class="rowContainer titleHeader"><button type="action" class="qolButton" name="act_resetHelpers" data-i18n-title="reset-button" title="Reset"> ! </button> <h4 data-i18n="heading-rollhelper">Roll helpers</h4> </div>

	<input type="checkbox" class="helperText" name="attr_settingHelperText" value="true" hidden="true">
	<div class="contentContainer darkBG helperTextContainer">


	<div class="rowContainer">

<div class="columnAlign centerFlex helpers">
<b data-i18n="helper-text-speedluck">Speed/Luck</b>
<div class="rowContainer centerFlex helpers">

	<button type="action" class="speed utilitybuttons" name="act_rollChallenge" id="autoroll_speed" data-i18n-title="helper-roll-speed" title="Roll Speed"></button>

	<input type="text" name="attr_baseSpeed" value="0" hidden="true">
	<input type="text" name="attr_prevSpeed" value="0" hidden="true">
	<input type="text" name="attr_dynamicSpeed" value="0" hidden="true">
	<div style="overflow: hidden; position: relative;"><div class="blocker"></div><input type="text" class="speedbox whiteInput" name="attr_calcSpeed" value="0" data-i18n-title="helper-current-speed" title="Current Speed"></div>

</div>


<div class="rowContainer centerFlex helpers">
	<button type="action" class="speed luck utilitybuttons" id="autoroll_luck" name="act_rollChallenge" data-i18n-title="helper-roll-luck" title="Roll Luck"></button>

<input type="text" name="attr_baseLuckNum" value="0" hidden="true">
<input type="text" class="speedbox whiteInput" name="attr_luckNum" value="@{baseLuckNum}" disabled="true" data-i18n-title="helper-current-luck" title="Current Luck">

</div>

</div>

<div class="columnAlign helpers">

<b data-i18n="helper-text-update">Update</b>

<div class="sideDice columnAlign centerFlex">
<input type="text" name="attr_baseActNum" value="0" hidden="true">
<button type="action" class="speed next updateInput" name="act_updateAilments" data-i18n-title="helper-update-ailments" title="Update Ailments"></button>
	
</div>

</div>


<div class="columnAlign helpers">

<div class="rowContainer">
<div class="sideDice columnAlign centerFlex">
<b data-i18n="helper-text-difficulty">Difficulty</b>
		<input type="number" class="whiteInput difficultyInput" name="attr_difficulty" value="0" data-i18n-title="helper-text-difficulty" title="Difficulty">
		</div>	

<div class="columnAlign centerFlex helpers">
<b data-i18n="helper-text-advantages">Advantages</b>
		<div data-i18n-title="helper-text-disadv" title="Disadvantage" class="rowContainer centerFlex">
<input type="text" class="outfitRank transpInput disadvCounter" name="attr_disadvNum"  value="0"><input type="checkbox" name="attr_advState" class="disadvCheck" value="Disadvantage">
		</div>

		<div data-i18n-title="helper-text-adv" title="Advantage" class="rowContainer centerFlex">
		<input type="text" class="outfitRank transpInput advCounter" name="attr_advNum" value="0"><input type="checkbox"  name="attr_advState" class="advCheck" value="Advantage">
		</div>
	</div>

</div>

</div>
	
	</div>


<div class="rowContainer" style="margin-top: 3px;">

<div class="columnAlign centerFlex helpers" style="width: 70px; overflow: hidden;">
<b data-i18n="helper-text-whisper">Whisper</b>

<label for="WhisperRolls" style="margin: 0px; padding: 0px;">
<input type="checkbox" id="WhisperRolls" name="attr_settingWhisperRolls" value="true" class="expand-toggle" style="display: none !important;">
<div class="speed whisper" data-i18n-title="helper-toggle-whisper" title="Toggle Whisper" style="width: 65px; height: 27px; background-size: contain; background-position: center; margin: 0px !important;"></div>
</label>


</div>


<div class="columnAlign helpers">
<b data-i18n="helper-text-tracker">Tracker</b>

<input type="text" class="speedbox whiteInput helpers" name="attr_actNum" value="@{baseActNum}" disabled="true" data-i18n-title="helper-action-tracker" title="Action Tracker" style="width: 50px !important; margin-top: 1px; margin-bottom: 3px; margin-right: 2px;">



</div>

<div class="columnAlign helpers">
<b data-i18n="helper-text-power">Power</b>
<div class="rowContainer centerFlex helpers">

		<input type="text" name="attr_attPower" value="0" hidden="true">
		<input type="text" name="attr_defPower" value="0" hidden="true">
		<input type="text" name="attr_evdPower" value="0" hidden="true">

		<input type="text" class="power HPtext darkInput" name="attr_powerATT" value="@{attPower}+@{Strength}-@{Feeble}" disabled="true" data-i18n-title="helper-att-power" title="Att Power">
		<input type="text" class="power SANtext darkInput" name="attr_powerDEF" value="@{defPower}+@{Endurance}-@{Disarm}" disabled="true" data-i18n-title="helper-def-power" title="Def Power">

		<input type="text" name="attr_evdPositive" value="0" hidden="true">
		<input type="text" name="attr_evdNegative" value="0" hidden="true">
		<input type="text" class="power STGRtext darkInput" name="attr_powerEVD" value="@{evdPower}+@{evdPositive}-@{evdNegative}" data-i18n-title="helper-evd-power" title="Evd Power" disabled="true">
	</div>


</div>


</div>



<input type="checkbox" name="attr_settingWhisperRolls" class="hide-toggle" value="true">
<div class="hide-item" style="margin-top: 3px;">
<span class="half" style="color: #888; font-weight: bold;" data-i18n="settings-whisper">Whisper rolls to: </span>
<input type="text" class="whiteInput half" name="attr_settingWhisperTarget" value="GM">
</div>

</div>


	<!-- Helper END -->


               <div id="ailmentBlock">

 <div class="rowContainer titleHeader"><button type="action" class="qolButton" name="act_resetAilments" data-i18n-title="reset-button" title="Reset"> ! </button> <h4 data-i18n="heading-ailments">Status ailments</h4> </div>

                    <div class="contentContainer darkBG">

<div class="rowContainer centerFlex topRow ailmentStates">

<!-- Hostile -->
<div>
<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true">
<div class="toggleable hide-item">
<input type="checkbox" name="attr_HostileState" value="Hostile" class="expand-toggle" id="state_Hostile">
<label class="status_effect_item expand-btn rowContainer" for="state_Hostile" data-i18n-title="ailments-hostile-title" title="Hostile">

	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle">
	<div class="skillIcon statusIcon hide-item-rev hostile"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle">
	<div class="skillIcon statusIcon type-image hostile-limbus"></div>
	</div>

</label>
</div></div>
<!-- Hostile END -->


<div>
<input type="checkbox" class="hide-toggle-rev" name="attr_distortState" value="true">
<div class="toggleable hide-item-rev">
<input type="checkbox" name="attr_PanicState" value="Panic" class="expand-toggle" id="state_Panic">
<label class="status_effect_item expand-btn rowContainer" for="state_Panic" data-i18n-title="ailments-panic-title" title="Panic">

	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle" >
	<div class="skillIcon statusIcon hide-item-rev panic"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle" >
	<div class="skillIcon statusIcon type-image panic-limbus"></div>
	</div>

</label>
</div></div>

<div class="toggleable">
<input type="checkbox" name="attr_StaggerState" value="Staggered" id="state_Stagger" class="expand-toggle">
<label class="status_effect_item expand-btn rowContainer" for="state_Stagger" data-i18n-title="ailments-stagger-title" title="Stagger">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle" >
	<div class="skillIcon statusIcon hide-item-rev stagger"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle" >
	<div class="skillIcon statusIcon type-image stagger-limbus"></div>
	</div>
</label>
</div>

<div class="toggleable">
<input type="checkbox" name="attr_SealState" id="state_Seal" value="Seal" class="expand-toggle">

<label class="status_effect_item expand-btn rowContainer" for="state_Seal" data-i18n-title="ailments-seal-title" title="Seal (Incapable of reactions)">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle" >
	<div class="skillIcon statusIcon hide-item-rev seal"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle">
	<div class="skillIcon statusIcon type-image seal-limbus"></div>
	</div>
</label>
</div>

<div class="toggleable">
<input type="checkbox" name="attr_ImmobileState" id="state_Immobile" value="Immobile" class="expand-toggle">

<label class="status_effect_item expand-btn rowContainer" for="state_Immobile" data-i18n-title="ailments-immobile-title" title="Immobile (Incapable of action/reaction)">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle" >
	<div class="skillIcon statusIcon hide-item-rev immobile"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle" >
	<div class="skillIcon statusIcon type-image immobile-limbus"></div>
	</div>
</label>
</div>

<div class="toggleable">
<input type="checkbox" name="attr_DefeatState" id="state_Defeat" value="Defeated" class="expand-toggle">

<label class="status_effect_item expand-btn rowContainer" for="state_Defeat" data-i18n-title="ailments-defeat-title" title="Defeated (Incapable of combat)">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle" >
	<div class="skillIcon statusIcon hide-item-rev defeat"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle" >
	<div class="skillIcon statusIcon type-image defeat-limbus"></div>
	</div>
</label>
</div>

</div>


<div class="rowContainer">

<!-- Burn -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Burn" value="0" hidden="true" /checked>
<div class="status_effect_item rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Burn" name="act_ailmentClicker" data-i18n-title="ailments-burn" title="Burn"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon burn"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon burn-limbus"></div>
	</div>

</div>
</div>
<div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_Burn" value="0"></div>
</div>

<!-- Bleed -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Bleed" value="0" hidden="true" /checked>
<div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Bleed" name="act_ailmentClicker" data-i18n-title="ailments-bleed" title="Bleed"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon bleed"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon bleed-limbus"></div>
	</div>

</div>

</div>
                                <div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_Bleed" value="0"></div>
</div>

<!-- Paralysis -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Paralysis" value="0" hidden="true" /checked>
 <div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Paralysis" name="act_ailmentClicker"  data-i18n-title="ailments-paralysis" title="Paralysis"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon paralysis"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon paralysis-limbus"></div>
	</div>

</div>

</div>
                                

<div class="status_effect_value"><input type="number" class="ailmentNum" min="0" name="attr_Paralysis" value="0">
<input type="number" name="attr_prevParalysis" value="0" hidden="true">
</div>
</div>

                            </div> 

<!-- Row 2 -->
<div class="rowContainer">

<!-- Fragile -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Fragile" value="0" hidden="true" /checked>   
                <div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Fragile" name="act_ailmentClicker"  data-i18n-title="ailments-fragile" title="Fragile"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon fragile"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon fragile-limbus-red"></div>
	</div>

</div>	
		</div>
                <div class="status_effect_value">
		<input type="number" min="0" class="ailmentNum"name="attr_Fragile" value="0"></div>
</div>

<!-- Protection -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Protection" value="0" hidden="true" /checked>

<div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Protection" name="act_ailmentClicker"  data-i18n-title="ailments-protection" title="Protection"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon protection"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon protection-limbus"></div>
	</div>

</div>	

</div>
                                <div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_Protection" value="0"></div>
</div>

<!-- Stagger Protection -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_StaggerProtection" value="0" hidden="true" /checked>

<div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_StaggerProtection" name="act_ailmentClicker"  data-i18n-title="ailments-stgprotection" title="Stagger Protection"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon staggerprotection"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon staggerprotection-limbus"></div>
	</div>
</div>	

</div>
<div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_StaggerProtection" value="0"></div>
</div>

</div>


<!-- Row 3 -->
<div class="rowContainer">

<!-- Strength -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Strength" value="0" hidden="true" /checked>

<div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Strength" name="act_ailmentClicker"  data-i18n-title="ailments-strength" title="Strength"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon strength"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon strength-limbus"></div>
	</div>
</div>	

</div>

<div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_Strength" value="0"></div>
</div>
                                
<!-- Endurance -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Endurance" value="0" hidden="true" /checked>

<div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Endurance" name="act_ailmentClicker"  data-i18n-title="ailments-endurance" title="Endurance"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon endurance"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon endurance-limbus-blue"></div>
	</div>
</div>	

</div>                               

<div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_Endurance" value="0"></div>
</div>

<!-- Haste -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Haste" value="0" hidden="true" /checked>

<div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Haste" name="act_ailmentClicker"  data-i18n-title="ailments-haste" title="Haste"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon haste"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon haste-limbus"></div>
	</div>
</div>	

</div>

<div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_Haste" value="0"></div>
</div>

                           </div>


<!-- Row 4 -->
<div class="rowContainer">

<!-- Feeble -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Feeble" value="0" hidden="true" /checked>

<div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Feeble" name="act_ailmentClicker"  data-i18n-title="ailments-feeble" title="Feeble"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon feeble"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon feeble-limbus"></div>
	</div>
</div>	

</div>

<div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_Feeble" value="0"></div>
</div>

<!-- Disarm -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Disarm" value="0" hidden="true" /checked>

<div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Disarm" name="act_ailmentClicker"  data-i18n-title="ailments-disarm" title="Disarm"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon disarm"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon disarm-limbus-blue"></div>
	</div>
</div>	

</div>				

<div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_Disarm" value="0"></div>
</div>

<!-- Bind -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Bind" value="0" hidden="true" /checked>

<div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Bind" name="act_ailmentClicker"  data-i18n-title="ailments-bind" title="Bind"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon bind"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon bind-limbus"></div>
	</div>
</div>	

</div>                               

<div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_Bind" value="0"></div>
</div>

                            </div>

<!-- Row 5 -->
<div class="rowContainer">

<!-- Smoke -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Smoke" value="0" hidden="true" /checked>

<div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Smoke" name="act_ailmentClicker"  data-i18n-title="ailments-smoke" title="Smoke"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon smoke"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon smoke-limbus"></div>
	</div>
</div>	

</div>                            

<div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_Smoke" value="0"></div>
</div>

<!-- Charge -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Charge" value="0" hidden="true" /checked>

<div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Charge" name="act_ailmentClicker"  data-i18n-title="ailments-charge" title="Charge"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon charge"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon charge-limbus"></div>
	</div>
</div>	

</div>  

<div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_Charge" value="0"></div>
</div>

<!-- Fortune -->
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_Fortune" value="0" hidden="true" /checked>

<div class="status_effect_item  rowContainer centerFlex">
<button type="action" class="blocker ailmentButton" id="ailment_Fortune" name="act_ailmentClicker"  data-i18n-title="ailments-fortune" title="Fortune"></button>

<div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon fortune"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon fortune-limbus"></div>
	</div>
</div>	

</div> 

<div class="status_effect_value"><input type="number" class="ailmentNum" name="attr_Fortune" value="0">
<input type="number" name="attr_prevFortune" min="0" value="0" hidden="true">
</div>
</div>

</div>

<!-- repeating test - custom -->
<div class="ailmentCustomDisplay">
<fieldset class="repeating_ailments">

<input type="checkbox" class="hide-toggle-rev" class="displayButton" name="attr_ailDisplay" hidden="true" value="0">

<button type="action" class="blocker hide-item-rev ailmentButton" name="act_clickercustom"></button>
<div class="hide-item-rev">

<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_ailNum" value="0" hidden="true" /checked>
  <div class="status_effect_item rowContainer centerFlex">
	<!-- Icon selector -->
	<div class="ailmentIconSelector rowContainer centerFlex">

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Question" name="attr_ailIcon"><div class="type-image skillIcon question"></div>
	</div>

	<div class="attackIcon">
<input type="checkbox" class="expand-toggle" value="0" name="attr_ailIcon"><div class="type-image skillIcon question"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Burn" name="attr_ailIcon"><div class="type-image skillIcon burn"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Bleed" name="attr_ailIcon"><div class="type-image skillIcon bleed"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Paralysis" name="attr_ailIcon"><div class="type-image skillIcon paralysis"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Smoke" name="attr_ailIcon"><div class="type-image skillIcon smoke"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Charge" name="attr_ailIcon"><div class="type-image skillIcon charge"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Fortune" name="attr_ailIcon"><div class="type-image skillIcon fortune"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Fragile" name="attr_ailIcon"><div class="type-image skillIcon fragile"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Protection" name="attr_ailIcon"><div class="type-image skillIcon protection"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="StaggerProtection" name="attr_ailIcon"><div class="type-image skillIcon staggerprotection"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Strength" name="attr_ailIcon"><div class="type-image skillIcon strength"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Feeble" name="attr_ailIcon"><div class="type-image skillIcon feeble"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Endurance" name="attr_ailIcon"><div class="type-image skillIcon endurance"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Disarm" name="attr_ailIcon"><div class="type-image skillIcon disarm"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Haste" name="attr_ailIcon"><div class="type-image skillIcon haste"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Bind" name="attr_ailIcon"><div class="type-image skillIcon bind"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Panic" name="attr_ailIcon"><div class="type-image skillIcon panic"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Hostile" name="attr_ailIcon"><div class="type-image skillIcon hostile"></div>
	</div>

<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Burn" name="attr_ailIcon"><div class="type-image skillIcon burn-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bleed" name="attr_ailIcon"><div class="type-image skillIcon bleed-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Paralysis" name="attr_ailIcon"><div class="type-image skillIcon paralysis-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Smoke" name="attr_ailIcon"><div class="type-image skillIcon smoke-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Charge" name="attr_ailIcon"><div class="type-image skillIcon charge-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fortune" name="attr_ailIcon"><div class="type-image skillIcon fortune-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fragile" name="attr_ailIcon"><div class="type-image skillIcon fragile-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Protection" name="attr_ailIcon"><div class="type-image skillIcon protection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/StaggerProtection" name="attr_ailIcon"><div class="type-image skillIcon staggerprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Strength" name="attr_ailIcon"><div class="type-image skillIcon strength-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Feeble" name="attr_ailIcon"><div class="type-image skillIcon feeble-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Endurance" name="attr_ailIcon"><div class="type-image skillIcon endurance-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Disarm" name="attr_ailIcon"><div class="type-image skillIcon disarm-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Haste" name="attr_ailIcon"><div class="type-image skillIcon haste-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bind" name="attr_ailIcon"><div class="type-image skillIcon bind-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Hostile" name="attr_ailIcon"><div class="type-image skillIcon hostile-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Panic" name="attr_ailIcon"><div class="type-image skillIcon panic-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PanicBlue" name="attr_ailIcon"><div class="type-image skillIcon panic-limbus-blue"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Rupture" name="attr_ailIcon"><div class="type-image skillIcon rupture-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Tremor" name="attr_ailIcon"><div class="type-image skillIcon tremor-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Sinking" name="attr_ailIcon"><div class="type-image skillIcon sinking-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Poise" name="attr_ailIcon"><div class="type-image skillIcon poise-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Frostbite" name="attr_ailIcon"><div class="type-image skillIcon frostbite-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Poison" name="attr_ailIcon"><div class="type-image skillIcon poison-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Nails" name="attr_ailIcon"><div class="type-image skillIcon nails-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Ruin" name="attr_ailIcon"><div class="type-image skillIcon ruin-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Devastation" name="attr_ailIcon"><div class="type-image skillIcon devastation-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Critical" name="attr_ailIcon"><div class="type-image skillIcon critical-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Aggro" name="attr_ailIcon"><div class="type-image skillIcon aggro-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Ammo" name="attr_ailIcon"><div class="type-image skillIcon ammo-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bullseye" name="attr_ailIcon"><div class="type-image skillIcon bullseye-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Barrier" name="attr_ailIcon"><div class="type-image skillIcon barrier-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Duel" name="attr_ailIcon"><div class="type-image skillIcon duel-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fist" name="attr_ailIcon"><div class="type-image skillIcon fist-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/FistGreen" name="attr_ailIcon"><div class="type-image skillIcon fist-limbus-green"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Heal" name="attr_ailIcon"><div class="type-image skillIcon heal-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/KAmpule" name="attr_ailIcon"><div class="type-image skillIcon kampule-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/TTime" name="attr_ailIcon"><div class="type-image skillIcon ttime-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/SlashProtection" name="attr_ailIcon"><div class="type-image skillIcon slashprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PierceProtection" name="attr_ailIcon"><div class="type-image skillIcon pierceprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/BluntProtection" name="attr_ailIcon"><div class="type-image skillIcon bluntprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/SlashFragility" name="attr_ailIcon"><div class="type-image skillIcon slashfragility-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PierceFragility" name="attr_ailIcon"><div class="type-image skillIcon piercefragility-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/BluntFragility" name="attr_ailIcon"><div class="type-image skillIcon bluntfragility-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Wrath" name="attr_ailIcon"><div class="type-image skillIcon wrath-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Lust" name="attr_ailIcon"><div class="type-image skillIcon lust-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Sloth" name="attr_ailIcon"><div class="type-image skillIcon sloth-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Gluttony" name="attr_ailIcon"><div class="type-image skillIcon gluttony-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Gloom" name="attr_ailIcon"><div class="type-image skillIcon gloom-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Pride" name="attr_ailIcon"><div class="type-image skillIcon pride-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Envy" name="attr_ailIcon"><div class="type-image skillIcon envy-limbus"></div>
	</div>


	<!-- Icon selector END -->

</div>
</div>

<div class="status_effect_value"><input type="number" min="0" class="ailmentNum" name="attr_ailNum" value="0"></div>


<input type="text" name="attr_ailName" hidden="true">
<input type="text" name="attr_ailTrigger" hidden="true">
<input type="text" name="attr_ailEffect" hidden="true">
<input type="text" name="attr_ailEffectMode" hidden="true">
<input type="text" name="attr_ailEffectVal" hidden="true">
<input type="text" name="attr_ailDecayMode" hidden="true">
<input type="text" name="attr_ailDecayVal" hidden="true">
<input type="text" name="attr_ailMax" hidden="true">
<input type="text" name="attr_ailMessageCheck" hidden="true">
<input type="text" name="attr_ailMessage" hidden="true">

</div>
</div>

</fieldset>
</div>
<!-- repeating test -->
                      
                    </div>

               </div>
	<!-- status ailments end -->

	<!-- Observation section palette -->


<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true">
<div class="hide-item">
<div class="rowContainer titleHeader">
<button type="action" class="qolButton" name="act_resetObservation" data-i18n-title="reset-button" title="Reset"> ! </button> <h4 data-i18n="heading-observation">Observation levels</h4> </div>

	<input type="checkbox" name="attr_distortState" value="true" hidden="true">
	<div class="contentContainer darkBG helperTextContainer">

<div class="rowContainer observationSelect">
<div class="columnAlign">
<b data-i18n="distort-obs-details">Details</b><br>
<label for="obsDesc"><input type="checkbox" id="obsDesc" name="attr_obsDesc" value="true" /checked><span data-i18n="distort-obs-desc">Effect desc.</span></label>
<label for="obsEffect"><input type="checkbox" id="obsEffect" name="attr_obsEffect" value="true"><span data-i18n="distort-obs-effect">Effects</span></label>
<label for="obsBehavior"><input type="checkbox" id="obsBehavior" name="attr_obsBehavior" value="true"><span data-i18n="distort-behavior">Behavior</span></label>
<label for="obsTaboon"><input type="checkbox" id="obsTaboon" name="attr_obsTaboon" value="true"><span data-i18n="distort-obs-taboon">Taboos/Boons</span></label>
</div>

<div class="columnAlign">
<b data-i18n="distort-obs-work">Work</b><br>
<label for="obsCounter"><input type="checkbox" id="obsCounter" name="attr_obsCounter" value="true" /checked><span data-i18n="distort-counter">Counter</span></label>
<label for="obsWorkAmount"><input type="checkbox" id="obsWorkAmount" name="attr_obsWorkAmount" value="true" /checked><span data-i18n="distort-workamount">Work amount</span></label>
<label for="obsWorkPref"><input type="checkbox" id="obsWorkPref" name="attr_obsWorkPref" value="true"><span data-i18n="distort-obs-workpreference">Preferences</span></label>
<label for="obsWorkResults"><input type="checkbox" id="obsWorkResults" name="attr_obsWorkResults" value="true"><span data-i18n="distort-obs-workresults">Work results</span></label>
</div>

<div class="columnAlign">
<b data-i18n="distort-obs-flavor">Flavor</b><br>
<label for="obsSummary"><input type="checkbox" id="obsSummary" name="attr_obsSummary" value="true" /checked><span data-i18n="character-summary">Summary</span></label>
<label for="obsAppearance"><input type="checkbox" id="obsAppearance" name="attr_obsAppearance" value="true"><span data-i18n="distort-appearance">Appearance</span></label>
<label for="obsAtmosphere"><input type="checkbox" id="obsAtmosphere" name="attr_obsAtmosphere" value="true"><span data-i18n="distort-atmosphere">Atmosphere</span></label>
<label for="obsStory"><input type="checkbox" id="obsStory" name="attr_obsStory" value="true"><span data-i18n="distort-story">Story</span></label>
</div>

</div>


	</div>
</div>

	<!-- Observation END -->

 

            </div>


            <!-- Stats Section -->
            <div id="TopColumnR">

<div class="rowContainer titleHeader"><button type="action" class="qolButton" name="act_resetStats" data-i18n-title="reset-button" title="Reset"> ! </button> <h4 data-i18n="heading-stats">Stats</h4> <button type="action" class="reloadButton reusableIcon" name="act_resetUses" data-i18n-title="reset-button" title="Reset"></button></div>

                <div class="contentContainer darkBG" id="baseStats">

		<div class="rowContainer">

		<!-- Instinct -->
              	<div class="statBlock">
			<div class="statImage">
			<div class="statInput" id="InstinctStat" data-i18n-title="stats-instinct" title="Instinct"> 
			<input type="text" class="instinct" name="attr_instinct" value="0">
			</div>
</div>
		<div class="statHeader instinct" data-i18n-title="stats-instinct-roll" title="Roll Instinct">
<button type="action" class="challengeButton instinct" name="act_rollChallenge" id="autoroll_instinct" data-i18n="stats-instinct">Instinct</button>

		</div>
	
			
		</div>

		<!-- Wisdom -->
		<div class="statBlock">
			<div class="statImage">
			<div class="statInput" id="WisdomStat" data-i18n-title="stats-wisdom" title="Wisdom"> 
			<input type="text" class="wisdom" name="attr_wisdom" value="0">
			</div>

			</div>

			<div class="statHeader wisdom" data-i18n-title="stats-wisdom-roll" title="Roll Wisdom">

<button type="action" class="challengeButton wisdom" name="act_rollChallenge" id="autoroll_wisdom" data-i18n="stats-wisdom">Wisdom</button>

			</div>

		</div>

		<!-- Justice -->
		<div class="statBlock">
			<div class="statImage">
			<div class="statInput" id="JusticeStat" data-i18n-title="stats-justice" title="Justice"> 
			<input type="text" class="justice" name="attr_justice" value="0">
			</div>

			</div>

			<div class="statHeader justice"  data-i18n-title="stats-justice-roll" title="Roll Justice">

<button type="action" class="challengeButton justice" name="act_rollChallenge" id="autoroll_justice" data-i18n="stats-justice">Justice</button>
			
			</div>
		</div>
	</div>
	<!-- Stat first row end -->



	<div class="rowContainer">
		<!-- Charm -->
		<div class="statBlock">
			<div class="statImage">
			<div class="statInput" id="CharmStat" title="Charm" data-i18n-title="stats-charm"> 
			<input type="text" class="charm" name="attr_charm" value="0">
			</div>

			</div>

			<div class="statHeader charm" data-i18n-title="stats-charm-roll" title="Roll Charm">

<button type="action" class="challengeButton charm" name="act_rollChallenge" id="autoroll_charm" data-i18n="stats-charm">Charm</button>
			
			</div>
		</div>

		<!-- Insight -->
		<div class="statBlock">
			<div class="statImage">
			<div class="statInput" id="InsightStat" data-i18n-title="stats-insight" title="Insight"> 
			<input type="text" class="insight" name="attr_insight" value="0">
			</div>

			</div>

			<div class="statHeader insight" data-i18n-title="stats-insight-roll" title="Roll Insight">

<button type="action" class="challengeButton insight" name="act_rollChallenge" id="autoroll_insight" data-i18n="stats-insight">Insight</button>
			
			</div>
		</div>

		<!-- Temperance -->
		<div class="statBlock">
			<div class="statImage">
			<div class="statInput" id="TemperanceStat" data-i18n-title="stats-temperance" title="Temperance"> 
			<input type="text" class="temperance" name="attr_temperance" value="0">
			</div>

			</div>

			<div class="statHeader temperance" data-i18n-title="stats-temperance-roll" title="Roll Temperance">

<button type="action" class="challengeButton temperance" name="act_rollChallenge" id="autoroll_temperance" data-i18n="stats-temperance">Temperance</button>
			
			</div>
		</div>

	</div>
	<!-- Stat row2 end --> 

                </div>


<!-- Combat palette -->
              <div class="status_effect" style="margin-top: 10px;">

                    <div class="contentContainer darkBG">
                     
	<!-- Weapon 1 Palette -->
	<div class="weaponSlot">
	<div class="rowContainer weapon paletteButton"> <!-- color portion -->



	<!-- Weapon1 Uses -->
	<div class="buffer weaponPaletteUses">
	<input type="checkbox" class="hide-toggle-rev" name="attr_weapon1UseType" value="Limitless" hidden="true" /checked>
		<div class="hide-item-rev rowContainer centerFlex" style="position: relative;">

		<input type="text" class="transpInput blocker" name="attr_weapon1Uses" style="text-align: center; height: 100%;" value="5">

		<input type="checkbox" class="fade-toggle" name="attr_weapon1UseType" value="Deplete" hidden="true">
		<div class="fade-item reusableIcon" style="width: 30px; height: 30px;"></div>  
		<div class="blocker"></div>
		</div>

	</div>

	<div class="buffer">
	<input type="checkbox" class="hide-toggle" name="attr_weapon1Uses" value="0" hidden="true">
		<div class="hide-item">
		<div class="blocker weaponBlocker"></div>
		</div>
	</div>
	<!-- Weapon1 Uses END -->



	<div class="rowContainer half centerFlex">
		<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_weapon1Type"><div class="type-image typeIcon slash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_weapon1Type"><div class="type-image typeIcon pierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_weapon1Type"><div class="type-image typeIcon blunt"></div>
		</div>

		</div>

	<input type="text" class="combatPaletteName transpInput" name="attr_weapon1Name" data-i18n-placeholder="palette-weapon1-name" placeholder="Weapon (1)">

	</div>


	<div class="rowContainer half" style="position: relative;">
	
	<div class="paletteRange"></div>

	<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_weapon1Roll1" placeholder="1" value="(@{weapon1Dice1} + @{selectAtkDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_weapon1Roll2" placeholder="6" value="(@{weapon1Dice2} + @{selectAtkDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_weapon1Roll3" placeholder="0" value="(@{weapon1Dice3}+@{attPower}+@{selectAtkDice3}+@{Strength}-@{Feeble}+@{difficulty})" disabled="true">
	</div>

	<button type="action" class="NDice" id="autoroll_weapon1" name="act_rollCombat"></button>



	</div> <!-- weapon 1 (under) end -->

	<!-- EGO (Weapon 1) Palette -->
	<div class="paletteOverride" style="z-index: 30;">
	<input type="checkbox" class="hide-toggle" name="attr_distortState" value="0" /checked>
	<div class="hide-item">
	<input type="checkbox" class="hide-toggle" name="attr_egoActiveState" value="true">
	<div class="hide-item">

		<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Weapon">
		<div class="hide-item">

	<div class="buffer">
	<input type="checkbox" class="hide-toggle" name="attr_egoUses" value="0" hidden="true">
		<div class="hide-item" style="z-index: 35; position: absolute; top: 0; left:0; width: 100%; height: 30px;">
		<div class="blocker weaponBlocker"></div>
		</div>
	</div>
	
		<!-- actual content -->
		<div class="rowContainer egoAttPalette paletteButton">
		<div class="rowContainer half centerFlex">

		<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_egoWeaponType"><div class="type-image typeIcon egoSlash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_egoWeaponType"><div class="type-image typeIcon egoPierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_egoWeaponType"><div class="type-image typeIcon egoBlunt"></div>
		</div>

		</div>

	<input type="text" class="combatPaletteName transpInput" name="attr_egoName" data-i18n-placeholder="palette-egoweapon-name" placeholder="Mystery weapon">

		</div> <!-- first half -->

	<div class="rowContainer half" style="position: relative;">
	
	<div class="paletteRange">

	<!-- EGO Uses -->
	<div class="buffer weaponPaletteUses">
	<input type="checkbox" class="hide-toggle-rev" name="attr_egoUseType" value="Limitless" hidden="true" /checked>
		<div class="hide-item-rev rowContainer centerFlex" style="position: relative;">

		<input type="text" class="transpInput blocker" name="attr_egoUses" style="text-align: center; height: 100%;" value="5">

		<input type="checkbox" class="fade-toggle" name="attr_egoUseType" value="Deplete" hidden="true">
		<div class="fade-item reusableIcon" style="width: 30px; height: 30px;"></div>  
		<div class="blocker"></div>
		</div>

	</div>

	<!-- EGO Uses END -->

	</div>


	<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_egoWeaponRoll1" placeholder="1" value="(@{egoWeaponDice1} + @{selectAtkDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_egoWeaponRoll2" placeholder="6" value="(@{egoWeaponDice2} + @{selectAtkDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_egoWeaponRoll3" placeholder="0" value="(@{egoWeaponDice3}+@{attPower}+@{selectAtkDice3}+@{Strength}-@{Feeble}+@{difficulty})" disabled="true">
	</div>

<button type="action" class="NDice" id="autoroll_egoWeapon" name="act_rollCombat"></button>


		</div>			
       </div>
</div></div></div></div>
	<!-- EGO (Weapon 1) Palette END -->


<!-- Distortion (Weapon 1) Palette -->
	<div class="paletteOverride">

	<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true">
	<div class="hide-item">
	
		<!-- actual content -->
		<div class="rowContainer egoAttPalette paletteButton">
		<div class="rowContainer half centerFlex">

		<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_weapon1Type"><div class="type-image typeIcon egoSlash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_weapon1Type"><div class="type-image typeIcon egoPierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_weapon1Type"><div class="type-image typeIcon egoBlunt"></div>
		</div>

		</div>

	<input type="text" class="combatPaletteName transpInput" name="attr_weapon1Name" data-i18n-placeholder="palette-weapon1-name" placeholder="Weapon (1)">

		</div> <!-- first half -->

	<div class="rowContainer half" style="position: relative;">
	
	<div class="paletteRange"></div>


	<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_weapon1Roll1" placeholder="1" value="(@{weapon1Dice1} + @{selectAtkDice1} + @{distortWeaponDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_weapon1Roll2" placeholder="6" value="(@{weapon1Dice2} + @{selectAtkDice2} + @{distortWeaponDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_weapon2Roll3" placeholder="0" value="(@{weapon1Dice3}+@{attPower}+@{selectAtkDice3}+@{distortWeaponDice3}+@{Strength}-@{Feeble}+@{difficulty})" disabled="true">
	</div>

<button type="action" class="NDice" id="autoroll_weapon1_distort" name="act_rollCombat"></button>


		</div>			
       </div>
</div></div>
	<!-- Distortion (Weapon 1) Palette END -->


 
	<!-- Weapon 1 Palette END -->
	</div></div>

	<!-- Weapon 2 Palette -->
	<div class="weaponSlot">
			<input type="checkbox" class="hide-toggle-rev" name="attr_weapon2Name" value="" hidden="true" /checked>
	<div class="hide-item-rev" style="width: 100%;">

	<div class="rowContainer weapon paletteButton">

	<!-- Weapon2 Uses -->
	<div class="buffer weaponPaletteUses">
	<input type="checkbox" class="hide-toggle-rev" name="attr_weapon2UseType" value="Limitless" hidden="true" /checked>
		<div class="hide-item-rev rowContainer centerFlex" style="position: relative;">

		<input type="text" class="transpInput blocker" name="attr_weapon2Uses" style="text-align: center; height: 100%;" value="5">

		<input type="checkbox" class="fade-toggle" name="attr_weapon2UseType" value="Deplete" hidden="true">
		<div class="fade-item reusableIcon" style="width: 30px; height: 30px;"></div>  
		<div class="blocker"></div>
		</div>

	</div>

	<div class="buffer">
	<input type="checkbox" class="hide-toggle" name="attr_weapon2Uses" value="0" hidden="true">
		<div class="hide-item">
		<div class="blocker weaponBlocker"></div>
		</div>
	</div>
	<!-- Weapon2 Uses END -->




	<div class="rowContainer half centerFlex">
		<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_weapon2Type"><div class="type-image typeIcon slash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_weapon2Type"><div class="type-image typeIcon pierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_weapon2Type"><div class="type-image typeIcon blunt"></div>
		</div>

		</div>

	<input type="text" class="combatPaletteName transpInput" name="attr_weapon2Name" data-i18n-placeholder="palette-weapon2-name" placeholder="Weapon (2)">

	</div>

	<div class="rowContainer half" style="position: relative;">
	
	<div class="paletteRange"></div>


		<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_weapon2Roll1" placeholder="1" value="(@{weapon2Dice1} + @{selectAtkDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_weapon2Roll2" placeholder="6" value="(@{weapon2Dice2} + @{selectAtkDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_weapon2Roll3" placeholder="0" value="(@{weapon2Dice3}+@{attPower}+@{selectAtkDice3}+@{Strength}-@{Feeble}+@{difficulty})" disabled="true">
	</div>

	<button type="action" class="NDice" id="autoroll_weapon2" name="act_rollCombat"></button>
	</div>

<!-- Distortion (Weapon 2) Palette -->
	<div class="paletteOverride">

	<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true">
	<div class="hide-item">
	
		<!-- actual content -->
		<div class="rowContainer egoAttPalette paletteButton">
		<div class="rowContainer half centerFlex">

		<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_weapon2Type"><div class="type-image typeIcon egoSlash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_weapon2Type"><div class="type-image typeIcon egoPierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_weapon2Type"><div class="type-image typeIcon egoBlunt"></div>
		</div>

		</div>

	<input type="text" class="combatPaletteName transpInput" name="attr_weapon2Name" data-i18n-placeholder="palette-weapon2-name" placeholder="Weapon (2)">

		</div> <!-- first half -->

	<div class="rowContainer half" style="position: relative;">
	
	<div class="paletteRange"></div>


	<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_weapon2Roll1" placeholder="1" value="(@{weapon2Dice1} + @{selectAtkDice1} + @{distortWeaponDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_weapon2Roll2" placeholder="6" value="(@{weapon2Dice2} + @{selectAtkDice2} + @{distortWeaponDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_weapon2Roll3" placeholder="0" value="(@{weapon2Dice3}+@{attPower}+@{selectAtkDice3}+@{distortWeaponDice3}+@{Strength}-@{Feeble}+@{difficulty})" disabled="true">
	</div>

<button type="action" class="NDice" id="autoroll_weapon2_distort" name="act_rollCombat"></button>


		</div>			
       </div>
</div></div>
	<!-- Distortion (Weapon 2) Palette END -->

		</div>
        </div>
	</div>

	<!-- Weapon 2 Palette END -->


	<!-- Weapon EXTRA palette -->
		<!-- Weapon 3 Palette -->
	<div class="weaponSlot">
			<input type="checkbox" class="hide-toggle-rev" name="attr_weapon3Name" value="" hidden="true" /checked>
	<div class="hide-item-rev" style="width: 100%;">

	<div class="rowContainer weapon paletteButton">

	<!-- Weapon3 Uses -->
	<div class="buffer weaponPaletteUses">
	<input type="checkbox" class="hide-toggle-rev" name="attr_weapon3UseType" value="Limitless" hidden="true" /checked>
		<div class="hide-item-rev rowContainer centerFlex" style="position: relative;">

		<input type="text" class="transpInput blocker" name="attr_weapon3Uses" style="text-align: center; height: 100%;" value="5">

		<input type="checkbox" class="fade-toggle" name="attr_weapon3UseType" value="Deplete" hidden="true">
		<div class="fade-item reusableIcon" style="width: 30px; height: 30px;"></div>  
		<div class="blocker"></div>
		</div>

	</div>

	<div class="buffer">
	<input type="checkbox" class="hide-toggle" name="attr_weapon3Uses" value="0" hidden="true">
		<div class="hide-item">
		<div class="blocker weaponBlocker"></div>
		</div>
	</div>
	<!-- Weapon3 Uses END -->


	<div class="rowContainer half centerFlex">
		<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_weapon3Type"><div class="type-image typeIcon slash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_weapon3Type"><div class="type-image typeIcon pierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_weapon3Type"><div class="type-image typeIcon blunt"></div>
		</div>

		</div>

	<input type="text" class="combatPaletteName transpInput" name="attr_weapon3Name" data-i18n-placeholder="palette-weapon3-name" placeholder="Weapon (3)">

	</div>

	<div class="rowContainer half" style="position: relative;">
	
	<div class="paletteRange"></div>


		<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_weapon3Roll1" placeholder="1" value="(@{weapon3Dice1} + @{selectAtkDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_weapon3Roll2" placeholder="6" value="(@{weapon3Dice2} + @{selectAtkDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_weapon3Roll3" placeholder="0" value="(@{weapon3Dice3}+@{attPower}+@{selectAtkDice3}+@{Strength}-@{Feeble}+@{difficulty})" disabled="true">
	</div>

	<button type="action" class="NDice" id="autoroll_weapon3" name="act_rollCombat"></button>
	</div>

<!-- Distortion (Weapon 3) Palette -->
	<div class="paletteOverride">

	<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true">
	<div class="hide-item">
	
		<!-- actual content -->
		<div class="rowContainer egoAttPalette paletteButton">
		<div class="rowContainer half centerFlex">

		<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_weapon3Type"><div class="type-image typeIcon egoSlash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_weapon3Type"><div class="type-image typeIcon egoPierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_weapon3Type"><div class="type-image typeIcon egoBlunt"></div>
		</div>

		</div>

	<input type="text" class="combatPaletteName transpInput" name="attr_weapon3Name" data-i18n-placeholder="palette-weapon3-name" placeholder="Weapon (3)">

		</div> <!-- first half -->

	<div class="rowContainer half" style="position: relative;">
	
	<div class="paletteRange"></div>


	<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_weapon3Roll1" placeholder="1" value="(@{weapon3Dice1} + @{selectAtkDice1} + @{distortWeaponDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_weapon3Roll2" placeholder="6" value="(@{weapon3Dice2} + @{selectAtkDice2} + @{distortWeaponDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_weapon3Roll3" placeholder="0" value="(@{weapon3Dice3}+@{attPower}+@{selectAtkDice3}+@{distortWeaponDice3}+@{Strength}-@{Feeble}+@{difficulty})" disabled="true">
	</div>

<button type="action" class="NDice" id="autoroll_weapon3_distort" name="act_rollCombat"></button>


		</div>			
       </div>
</div></div>
	<!-- Distortion (Weapon 3) Palette END -->


		</div>
        </div>
	</div>

	<!-- Weapon 3 Palette END -->

	<!-- Weapon 4 Palette -->
	<div class="weaponSlot">
			<input type="checkbox" class="hide-toggle-rev" name="attr_weapon4Name" value="" hidden="true" /checked>
	<div class="hide-item-rev" style="width: 100%;">

	<div class="rowContainer weapon paletteButton">

	<!-- Weapon4 Uses -->
	<div class="buffer weaponPaletteUses">
	<input type="checkbox" class="hide-toggle-rev" name="attr_weapon4UseType" value="Limitless" hidden="true" /checked>
		<div class="hide-item-rev rowContainer centerFlex" style="position: relative;">

		<input type="text" class="transpInput blocker" name="attr_weapon4Uses" style="text-align: center; height: 100%;" value="5">

		<input type="checkbox" class="fade-toggle" name="attr_weapon4UseType" value="Deplete" hidden="true">
		<div class="fade-item reusableIcon" style="width: 30px; height: 30px;"></div>  
		<div class="blocker"></div>
		</div>

	</div>

	<div class="buffer">
	<input type="checkbox" class="hide-toggle" name="attr_weapon4Uses" value="0" hidden="true">
		<div class="hide-item">
		<div class="blocker weaponBlocker"></div>
		</div>
	</div>
	<!-- Weapon4 Uses END -->

	<div class="rowContainer half centerFlex">
		<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_weapon4Type"><div class="type-image typeIcon slash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_weapon4Type"><div class="type-image typeIcon pierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_weapon4Type"><div class="type-image typeIcon blunt"></div>
		</div>

		</div>

	<input type="text" class="combatPaletteName transpInput" name="attr_weapon4Name" data-i18n-placeholder="palette-weapon4-name" placeholder="Weapon (4)">

	</div>

	<div class="rowContainer half" style="position: relative;">
	
	<div class="paletteRange"></div>


	<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_weapon4Roll1" placeholder="1" value="(@{weapon4Dice1} + @{selectAtkDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_weapon4Roll2" placeholder="6" value="(@{weapon4Dice2} + @{selectAtkDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_weapon4Roll3" placeholder="0" value="(@{weapon4Dice3}+@{attPower}+@{selectAtkDice3}+@{Strength}-@{Feeble}+@{difficulty})" disabled="true">
	</div>

	<button type="action" class="NDice" id="autoroll_weapon4" name="act_rollCombat"></button>
	</div>

<!-- Distortion (Weapon 4) Palette -->
	<div class="paletteOverride">

	<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true">
	<div class="hide-item">
	
		<!-- actual content -->
		<div class="rowContainer egoAttPalette paletteButton">
		<div class="rowContainer half centerFlex">

		<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_weapon4Type"><div class="type-image typeIcon egoSlash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_weapon4Type"><div class="type-image typeIcon egoPierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_weapon4Type"><div class="type-image typeIcon egoBlunt"></div>
		</div>

		</div>

	<input type="text" class="combatPaletteName transpInput" name="attr_weapon4Name" data-i18n-placeholder="palette-weapon4-name" placeholder="Weapon (4)">

		</div> <!-- first half -->

	<div class="rowContainer half" style="position: relative;">
	
	<div class="paletteRange"></div>


	<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_weapon4Roll1" placeholder="1" value="(@{weapon4Dice1} + @{selectAtkDice1} + @{distortWeaponDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_weapon4Roll2" placeholder="6" value="(@{weapon4Dice2} + @{selectAtkDice2} + @{distortWeaponDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_weapon4Roll3" placeholder="0" value="(@{weapon4Dice3}+@{attPower}+@{selectAtkDice3}+@{distortWeaponDice3}+@{Strength}-@{Feeble}+@{difficulty})" disabled="true">
	</div>

<button type="action" class="NDice" id="autoroll_weapon4_distort" name="act_rollCombat"></button>


		</div>			
       </div>
</div></div>
	<!-- Distortion (Weapon 4) Palette END -->


		</div>
        </div>
	</div>

	<!-- Weapon 4 Palette END -->

	<!-- Weapon EXTRA palette END -->

	

	<!-- Def/Evd palette -->
	<div class="rowContainer">

	<!-- Action Palette -->
	<div class="rowContainer half" style="margin-right: 5px;">


	<!-- Distortion (Action) Palette -->
	<div class="paletteOverride">

	<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true">
	<div class="hide-item">
	
	<div class="columnAlign BLACK paletteButton" style="height: 63px; overflow: hidden; align-items: start; justify-content: start;">
	<div class="rowContainer" style="height: 50%;">
	<select name="attr_actionType" class="darkInput toolText" style="height: 100%; margin-bottom: 0px;">
         <option data-i18n="palette-action-tool" value="tool">Use Tool</option>
         <option data-i18n="palette-action-move" value="move">Move</option>
         <option data-i18n="palette-action-protect" value="protect">Protect</option>
	 <option data-i18n="palette-action-other" value="other">Other</option>
         </select>

	<button type="action" class="declare toolText" data-i18n="palette-action-text" name="act_declareAction">Action</button>
	</div>
		
       </div>
	</div>
	</div>

	<!-- Distortion (Action) Palette END -->

	<div class="columnAlign tool paletteButton" style="height: 63px; overflow: hidden;  justify-content: start;">
	<div class="rowContainer" style="height: 50%;">
	<select name="attr_actionType" class="darkInput" style="height: 100%; margin-bottom: 0px;">
         <option data-i18n="palette-action-tool" value="tool">Use Tool</option>
         <option data-i18n="palette-action-move" value="move">Move</option>
         <option data-i18n="palette-action-protect" value="protect">Protect</option>
	 <option data-i18n="palette-action-other" value="other">Other</option>
         </select>

	<button type="action" class="declare" data-i18n="palette-action-text" name="act_declareAction">Action</button>
	</div>
	
<!-- Tool Selector Box -->
	<div class="rowContainer centerFlex toolSelect">


	<!-- EGO Tool selector -->

	<div>


	<input type="checkbox" class="hide-toggle" name="attr_egoActiveState" value="true" hidden="true"><div class="hide-item">

	<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Tool" hidden="true"><div class="hide-item">

	<div class="toolSelectHolder">

	<input id="select-egoTool" class="toolSelector" type="checkbox" name="attr_toolSelect" value="egoTool">
	<label for="select-egoTool" class="skillSelectionLabel">

	<div class="blocker toolBlocker"></div>	

<input type="checkbox" class="hide-toggle-rev" name="attr_egoUseType" value="Limitless" hidden="true" /checked>
	<input type="text" name="attr_egoUses" class="hide-item-rev toolSelectBox" value="5">

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Tool" name="attr_egoType"><div class="type-image skillIcon egoAct"></div>
	</div>

	</label>


	<input type="checkbox" class="hide-toggle" name="attr_egoUses" value="0" hidden="true"><div class="hide-item blocker" style="z-index: 100;"></div>

	</div>

	</div> 
	</div>
	</div>
	<!-- EGO tool selector end -->

	<!-- EGO special selector -->
	<div>


	<input type="checkbox" class="hide-toggle" name="attr_egoActiveState" value="true" hidden="true"><div class="hide-item">

	<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Special" hidden="true"><div class="hide-item">

	<div class="toolSelectHolder">

	<input id="select-egoSpecial" class="toolSelector" type="checkbox" name="attr_toolSelect" value="egoSpecial">
	<label for="select-egoSpecial" class="skillSelectionLabel">

	<div class="blocker toolBlocker"></div>

<input type="checkbox" class="hide-toggle-rev" name="attr_egoUseType" value="Limitless" hidden="true" /checked>
	<input type="text" name="attr_egoUses" class="hide-item-rev toolSelectBox" value="5">

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Special" name="attr_egoType"><div class="type-image skillIcon egoSpecial"></div>
	</div>

	</label>

	<input type="checkbox" class="hide-toggle" name="attr_egoUses" value="0" hidden="true"><div class="hide-item blocker" style="z-index: 100;"></div>

	</div>

	</div> 
	</div>
	</div>
	<!-- EGO special end -->



	<!-- Tool1 selector -->

	<div>
	<input type="checkbox" class="hide-toggle-rev" name="attr_tool1Uses" value="0" hidden="true">
	<div class="hide-item-rev">
	<input type="checkbox" class="hide-toggle-rev" name="attr_tool1Name" value="" hidden="true" /checked>
	<div class="toolSelectHolder hide-item-rev">

	<input id="select-tool1" class="toolSelector" type="checkbox" name="attr_toolSelect" value="tool1">
	<label for="select-tool1" class="skillSelectionLabel">

	<div class="blocker toolBlocker"></div>
	
	<input type="text" name="attr_tool1Uses" class="toolSelectBox" value="1">

	<!-- Tool1 Icon Selection -->
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Question" name="attr_tool1Icon"><div class="type-image skillIcon question"></div>
	</div>

	<div class="attackIcon">
<input type="checkbox" class="expand-toggle" value="0" name="attr_tool1Icon"><div class="type-image skillIcon portableIcon"></div>
	</div>

	<div class="attackIcon">
<input type="checkbox" class="expand-toggle" value="Hand" name="attr_tool1Icon" /checked><div class="type-image skillIcon portableIcon"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Burn" name="attr_tool1Icon"><div class="type-image skillIcon burn"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Bleed" name="attr_tool1Icon"><div class="type-image skillIcon bleed"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Paralysis" name="attr_tool1Icon"><div class="type-image skillIcon paralysis"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Smoke" name="attr_tool1Icon"><div class="type-image skillIcon smoke"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Charge" name="attr_tool1Icon"><div class="type-image skillIcon charge"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Fortune" name="attr_tool1Icon"><div class="type-image skillIcon fortune"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Fragile" name="attr_tool1Icon"><div class="type-image skillIcon fragile"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Protection" name="attr_tool1Icon"><div class="type-image skillIcon protection"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="StaggerProtection" name="attr_tool1Icon"><div class="type-image skillIcon staggerprotection"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Strength" name="attr_tool1Icon"><div class="type-image skillIcon strength"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Feeble" name="attr_tool1Icon"><div class="type-image skillIcon feeble"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Endurance" name="attr_tool1Icon"><div class="type-image skillIcon endurance"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Disarm" name="attr_tool1Icon"><div class="type-image skillIcon disarm"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Haste" name="attr_tool1Icon"><div class="type-image skillIcon haste"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Bind" name="attr_tool1Icon"><div class="type-image skillIcon bind"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Panic" name="attr_tool1Icon"><div class="type-image skillIcon panic"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Hostile" name="attr_tool1Icon"><div class="type-image skillIcon hostile"></div>
	</div>

<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Burn" name="attr_tool1Icon"><div class="type-image skillIcon burn-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bleed" name="attr_tool1Icon"><div class="type-image skillIcon bleed-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Paralysis" name="attr_tool1Icon"><div class="type-image skillIcon paralysis-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Smoke" name="attr_tool1Icon"><div class="type-image skillIcon smoke-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Charge" name="attr_tool1Icon"><div class="type-image skillIcon charge-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fortune" name="attr_tool1Icon"><div class="type-image skillIcon fortune-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fragile" name="attr_tool1Icon"><div class="type-image skillIcon fragile-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Protection" name="attr_tool1Icon"><div class="type-image skillIcon protection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/StaggerProtection" name="attr_tool1Icon"><div class="type-image skillIcon staggerprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Strength" name="attr_tool1Icon"><div class="type-image skillIcon strength-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Feeble" name="attr_tool1Icon"><div class="type-image skillIcon feeble-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Endurance" name="attr_tool1Icon"><div class="type-image skillIcon endurance-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Disarm" name="attr_tool1Icon"><div class="type-image skillIcon disarm-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Haste" name="attr_tool1Icon"><div class="type-image skillIcon haste-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bind" name="attr_tool1Icon"><div class="type-image skillIcon bind-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Hostile" name="attr_tool1Icon"><div class="type-image skillIcon hostile-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Panic" name="attr_tool1Icon"><div class="type-image skillIcon panic-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PanicBlue" name="attr_tool1Icon"><div class="type-image skillIcon panic-limbus-blue"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Rupture" name="attr_tool1Icon"><div class="type-image skillIcon rupture-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Tremor" name="attr_tool1Icon"><div class="type-image skillIcon tremor-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Sinking" name="attr_tool1Icon"><div class="type-image skillIcon sinking-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Poise" name="attr_tool1Icon"><div class="type-image skillIcon poise-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Frostbite" name="attr_tool1Icon"><div class="type-image skillIcon frostbite-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Poison" name="attr_tool1Icon"><div class="type-image skillIcon poison-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Nails" name="attr_tool1Icon"><div class="type-image skillIcon nails-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Ruin" name="attr_tool1Icon"><div class="type-image skillIcon ruin-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Devastation" name="attr_tool1Icon"><div class="type-image skillIcon devastation-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Critical" name="attr_tool1Icon"><div class="type-image skillIcon critical-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Aggro" name="attr_tool1Icon"><div class="type-image skillIcon aggro-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Ammo" name="attr_tool1Icon"><div class="type-image skillIcon ammo-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bullseye" name="attr_tool1Icon"><div class="type-image skillIcon bullseye-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Barrier" name="attr_tool1Icon"><div class="type-image skillIcon barrier-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Duel" name="attr_tool1Icon"><div class="type-image skillIcon duel-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fist" name="attr_tool1Icon"><div class="type-image skillIcon fist-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/FistGreen" name="attr_tool1Icon"><div class="type-image skillIcon fist-limbus-green"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Heal" name="attr_tool1Icon"><div class="type-image skillIcon heal-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/KAmpule" name="attr_tool1Icon"><div class="type-image skillIcon kampule-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/TTime" name="attr_tool1Icon"><div class="type-image skillIcon ttime-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/SlashProtection" name="attr_tool1Icon"><div class="type-image skillIcon slashprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PierceProtection" name="attr_tool1Icon"><div class="type-image skillIcon pierceprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/BluntProtection" name="attr_tool1Icon"><div class="type-image skillIcon bluntprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/SlashFragility" name="attr_tool1Icon"><div class="type-image skillIcon slashfragility-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PierceFragility" name="attr_tool1Icon"><div class="type-image skillIcon piercefragility-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/BluntFragility" name="attr_tool1Icon"><div class="type-image skillIcon bluntfragility-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Wrath" name="attr_tool1Icon"><div class="type-image skillIcon wrath-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Lust" name="attr_tool1Icon"><div class="type-image skillIcon lust-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Sloth" name="attr_tool1Icon"><div class="type-image skillIcon sloth-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Gluttony" name="attr_tool1Icon"><div class="type-image skillIcon gluttony-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Gloom" name="attr_tool1Icon"><div class="type-image skillIcon gloom-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Pride" name="attr_tool1Icon"><div class="type-image skillIcon pride-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Envy" name="attr_tool1Icon"><div class="type-image skillIcon envy-limbus"></div>
	</div>

	<!-- Tool1 Icon selection end -->


	</label>

	</div> 
	</div>
	</div>
	<!-- Tool1 selector end -->

	<!-- Tool2 selector -->

	<div>
	<input type="checkbox" class="hide-toggle-rev" name="attr_tool2Uses" value="0" hidden="true">
	<div class="hide-item-rev">
	<input type="checkbox" class="hide-toggle-rev" name="attr_tool2Name" value="" hidden="true" /checked>
	<div class="toolSelectHolder hide-item-rev">

	<input id="select-tool2" class="toolSelector" type="checkbox" name="attr_toolSelect" value="tool2">
	<label for="select-tool2" class="skillSelectionLabel">

	<div class="blocker toolBlocker"></div>
	

	<input type="text" name="attr_tool2Uses" class="toolSelectBox" value="1">

	<!-- Tool2 Icon Selection -->
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Question" name="attr_tool2Icon"><div class="type-image skillIcon question"></div>
	</div>

	<div class="attackIcon">
<input type="checkbox" class="expand-toggle" value="0" name="attr_tool2Icon"><div class="type-image skillIcon portableIcon"></div>
	</div>

	<div class="attackIcon">
<input type="checkbox" class="expand-toggle" value="Hand" name="attr_tool2Icon" /checked><div class="type-image skillIcon portableIcon"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Burn" name="attr_tool2Icon"><div class="type-image skillIcon burn"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Bleed" name="attr_tool2Icon"><div class="type-image skillIcon bleed"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Paralysis" name="attr_tool2Icon"><div class="type-image skillIcon paralysis"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Smoke" name="attr_tool2Icon"><div class="type-image skillIcon smoke"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Charge" name="attr_tool2Icon"><div class="type-image skillIcon charge"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Fortune" name="attr_tool2Icon"><div class="type-image skillIcon fortune"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Fragile" name="attr_tool2Icon"><div class="type-image skillIcon fragile"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Protection" name="attr_tool2Icon"><div class="type-image skillIcon protection"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="StaggerProtection" name="attr_tool2Icon"><div class="type-image skillIcon staggerprotection"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Strength" name="attr_tool2Icon"><div class="type-image skillIcon strength"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Feeble" name="attr_tool2Icon"><div class="type-image skillIcon feeble"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Endurance" name="attr_tool2Icon"><div class="type-image skillIcon endurance"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Disarm" name="attr_tool2Icon"><div class="type-image skillIcon disarm"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Haste" name="attr_tool2Icon"><div class="type-image skillIcon haste"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Bind" name="attr_tool2Icon"><div class="type-image skillIcon bind"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Panic" name="attr_tool2Icon"><div class="type-image skillIcon panic"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Hostile" name="attr_tool2Icon"><div class="type-image skillIcon hostile"></div>
	</div>

<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Burn" name="attr_tool2Icon"><div class="type-image skillIcon burn-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bleed" name="attr_tool2Icon"><div class="type-image skillIcon bleed-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Paralysis" name="attr_tool2Icon"><div class="type-image skillIcon paralysis-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Smoke" name="attr_tool2Icon"><div class="type-image skillIcon smoke-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Charge" name="attr_tool2Icon"><div class="type-image skillIcon charge-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fortune" name="attr_tool2Icon"><div class="type-image skillIcon fortune-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fragile" name="attr_tool2Icon"><div class="type-image skillIcon fragile-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Protection" name="attr_tool2Icon"><div class="type-image skillIcon protection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/StaggerProtection" name="attr_tool2Icon"><div class="type-image skillIcon staggerprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Strength" name="attr_tool2Icon"><div class="type-image skillIcon strength-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Feeble" name="attr_tool2Icon"><div class="type-image skillIcon feeble-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Endurance" name="attr_tool2Icon"><div class="type-image skillIcon endurance-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Disarm" name="attr_tool2Icon"><div class="type-image skillIcon disarm-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Haste" name="attr_tool2Icon"><div class="type-image skillIcon haste-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bind" name="attr_tool2Icon"><div class="type-image skillIcon bind-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Hostile" name="attr_tool2Icon"><div class="type-image skillIcon hostile-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Panic" name="attr_tool2Icon"><div class="type-image skillIcon panic-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PanicBlue" name="attr_tool2Icon"><div class="type-image skillIcon panic-limbus-blue"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Rupture" name="attr_tool2Icon"><div class="type-image skillIcon rupture-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Tremor" name="attr_tool2Icon"><div class="type-image skillIcon tremor-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Sinking" name="attr_tool2Icon"><div class="type-image skillIcon sinking-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Poise" name="attr_tool2Icon"><div class="type-image skillIcon poise-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Frostbite" name="attr_tool2Icon"><div class="type-image skillIcon frostbite-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Poison" name="attr_tool2Icon"><div class="type-image skillIcon poison-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Nails" name="attr_tool2Icon"><div class="type-image skillIcon nails-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Ruin" name="attr_tool2Icon"><div class="type-image skillIcon ruin-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Devastation" name="attr_tool2Icon"><div class="type-image skillIcon devastation-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Critical" name="attr_tool2Icon"><div class="type-image skillIcon critical-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Aggro" name="attr_tool2Icon"><div class="type-image skillIcon aggro-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Ammo" name="attr_tool2Icon"><div class="type-image skillIcon ammo-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bullseye" name="attr_tool2Icon"><div class="type-image skillIcon bullseye-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Barrier" name="attr_tool2Icon"><div class="type-image skillIcon barrier-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Duel" name="attr_tool2Icon"><div class="type-image skillIcon duel-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fist" name="attr_tool2Icon"><div class="type-image skillIcon fist-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/FistGreen" name="attr_tool2Icon"><div class="type-image skillIcon fist-limbus-green"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Heal" name="attr_tool2Icon"><div class="type-image skillIcon heal-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/KAmpule" name="attr_tool2Icon"><div class="type-image skillIcon kampule-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/TTime" name="attr_tool2Icon"><div class="type-image skillIcon ttime-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/SlashProtection" name="attr_tool2Icon"><div class="type-image skillIcon slashprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PierceProtection" name="attr_tool2Icon"><div class="type-image skillIcon pierceprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/BluntProtection" name="attr_tool2Icon"><div class="type-image skillIcon bluntprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/SlashFragility" name="attr_tool2Icon"><div class="type-image skillIcon slashfragility-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PierceFragility" name="attr_tool2Icon"><div class="type-image skillIcon piercefragility-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/BluntFragility" name="attr_tool2Icon"><div class="type-image skillIcon bluntfragility-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Wrath" name="attr_tool2Icon"><div class="type-image skillIcon wrath-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Lust" name="attr_tool2Icon"><div class="type-image skillIcon lust-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Sloth" name="attr_tool2Icon"><div class="type-image skillIcon sloth-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Gluttony" name="attr_tool2Icon"><div class="type-image skillIcon gluttony-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Gloom" name="attr_tool2Icon"><div class="type-image skillIcon gloom-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Pride" name="attr_tool2Icon"><div class="type-image skillIcon pride-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Envy" name="attr_tool2Icon"><div class="type-image skillIcon envy-limbus"></div>
	</div>

	<!-- Tool2 Icon selection end -->


	</label>

	</div> 
	</div>
	</div>
	<!-- Tool2 selector end -->

	<!-- Tool3 selector -->

	<div>
	<input type="checkbox" class="hide-toggle-rev" name="attr_tool3Uses" value="0" hidden="true">
	<div class="hide-item-rev">
	<input type="checkbox" class="hide-toggle-rev" name="attr_tool3Name" value="" hidden="true" /checked>
	<div class="toolSelectHolder hide-item-rev">

	<input id="select-tool3" class="toolSelector" type="checkbox" name="attr_toolSelect" value="tool3">
	<label for="select-tool3" class="skillSelectionLabel">

	<div class="blocker toolBlocker"></div>
	

	<input type="text" name="attr_tool3Uses" class="toolSelectBox" value="1">

	<!-- Tool3 Icon Selection -->
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Question" name="attr_tool3Icon"><div class="type-image skillIcon question"></div>
	</div>

	<div class="attackIcon">
<input type="checkbox" class="expand-toggle" value="0" name="attr_tool3Icon"><div class="type-image skillIcon portableIcon"></div>
	</div>

	<div class="attackIcon">
<input type="checkbox" class="expand-toggle" value="Hand" name="attr_tool3Icon" /checked><div class="type-image skillIcon portableIcon"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Burn" name="attr_tool3Icon"><div class="type-image skillIcon burn"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Bleed" name="attr_tool3Icon"><div class="type-image skillIcon bleed"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Paralysis" name="attr_tool3Icon"><div class="type-image skillIcon paralysis"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Smoke" name="attr_tool3Icon"><div class="type-image skillIcon smoke"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Charge" name="attr_tool3Icon"><div class="type-image skillIcon charge"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Fortune" name="attr_tool3Icon"><div class="type-image skillIcon fortune"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Fragile" name="attr_tool3Icon"><div class="type-image skillIcon fragile"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Protection" name="attr_tool3Icon"><div class="type-image skillIcon protection"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="StaggerProtection" name="attr_tool3Icon"><div class="type-image skillIcon staggerprotection"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Strength" name="attr_tool3Icon"><div class="type-image skillIcon strength"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Feeble" name="attr_tool3Icon"><div class="type-image skillIcon feeble"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Endurance" name="attr_tool3Icon"><div class="type-image skillIcon endurance"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Disarm" name="attr_tool3Icon"><div class="type-image skillIcon disarm"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Haste" name="attr_tool3Icon"><div class="type-image skillIcon haste"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Bind" name="attr_tool3Icon"><div class="type-image skillIcon bind"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Panic" name="attr_tool3Icon"><div class="type-image skillIcon panic"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Hostile" name="attr_tool3Icon"><div class="type-image skillIcon hostile"></div>
	</div>

<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Burn" name="attr_tool3Icon"><div class="type-image skillIcon burn-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bleed" name="attr_tool3Icon"><div class="type-image skillIcon bleed-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Paralysis" name="attr_tool3Icon"><div class="type-image skillIcon paralysis-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Smoke" name="attr_tool3Icon"><div class="type-image skillIcon smoke-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Charge" name="attr_tool3Icon"><div class="type-image skillIcon charge-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fortune" name="attr_tool3Icon"><div class="type-image skillIcon fortune-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fragile" name="attr_tool3Icon"><div class="type-image skillIcon fragile-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Protection" name="attr_tool3Icon"><div class="type-image skillIcon protection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/StaggerProtection" name="attr_tool3Icon"><div class="type-image skillIcon staggerprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Strength" name="attr_tool3Icon"><div class="type-image skillIcon strength-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Feeble" name="attr_tool3Icon"><div class="type-image skillIcon feeble-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Endurance" name="attr_tool3Icon"><div class="type-image skillIcon endurance-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Disarm" name="attr_tool3Icon"><div class="type-image skillIcon disarm-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Haste" name="attr_tool3Icon"><div class="type-image skillIcon haste-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bind" name="attr_tool3Icon"><div class="type-image skillIcon bind-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Hostile" name="attr_tool3Icon"><div class="type-image skillIcon hostile-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Panic" name="attr_tool3Icon"><div class="type-image skillIcon panic-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PanicBlue" name="attr_tool3Icon"><div class="type-image skillIcon panic-limbus-blue"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Rupture" name="attr_tool3Icon"><div class="type-image skillIcon rupture-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Tremor" name="attr_tool3Icon"><div class="type-image skillIcon tremor-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Sinking" name="attr_tool3Icon"><div class="type-image skillIcon sinking-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Poise" name="attr_tool3Icon"><div class="type-image skillIcon poise-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Frostbite" name="attr_tool3Icon"><div class="type-image skillIcon frostbite-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Poison" name="attr_tool3Icon"><div class="type-image skillIcon poison-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Nails" name="attr_tool3Icon"><div class="type-image skillIcon nails-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Ruin" name="attr_tool3Icon"><div class="type-image skillIcon ruin-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Devastation" name="attr_tool3Icon"><div class="type-image skillIcon devastation-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Critical" name="attr_tool3Icon"><div class="type-image skillIcon critical-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Aggro" name="attr_tool3Icon"><div class="type-image skillIcon aggro-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Ammo" name="attr_tool3Icon"><div class="type-image skillIcon ammo-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bullseye" name="attr_tool3Icon"><div class="type-image skillIcon bullseye-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Barrier" name="attr_tool3Icon"><div class="type-image skillIcon barrier-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Duel" name="attr_tool3Icon"><div class="type-image skillIcon duel-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fist" name="attr_tool3Icon"><div class="type-image skillIcon fist-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/FistGreen" name="attr_tool3Icon"><div class="type-image skillIcon fist-limbus-green"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Heal" name="attr_tool3Icon"><div class="type-image skillIcon heal-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/KAmpule" name="attr_tool3Icon"><div class="type-image skillIcon kampule-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/TTime" name="attr_tool3Icon"><div class="type-image skillIcon ttime-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/SlashProtection" name="attr_tool3Icon"><div class="type-image skillIcon slashprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PierceProtection" name="attr_tool3Icon"><div class="type-image skillIcon pierceprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/BluntProtection" name="attr_tool3Icon"><div class="type-image skillIcon bluntprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/SlashFragility" name="attr_tool3Icon"><div class="type-image skillIcon slashfragility-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PierceFragility" name="attr_tool3Icon"><div class="type-image skillIcon piercefragility-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/BluntFragility" name="attr_tool3Icon"><div class="type-image skillIcon bluntfragility-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Wrath" name="attr_tool3Icon"><div class="type-image skillIcon wrath-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Lust" name="attr_tool3Icon"><div class="type-image skillIcon lust-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Sloth" name="attr_tool3Icon"><div class="type-image skillIcon sloth-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Gluttony" name="attr_tool3Icon"><div class="type-image skillIcon gluttony-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Gloom" name="attr_tool3Icon"><div class="type-image skillIcon gloom-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Pride" name="attr_tool3Icon"><div class="type-image skillIcon pride-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Envy" name="attr_tool3Icon"><div class="type-image skillIcon envy-limbus"></div>
	</div>

	<!-- Tool3 Icon selection end -->


	</label>

	</div> 
	</div>
	</div>
	<!-- Tool3 selector end -->

	<!-- Tool4 selector -->

	<div>
	<input type="checkbox" class="hide-toggle-rev" name="attr_tool4Uses" value="0" hidden="true">
	<div class="hide-item-rev">
	<input type="checkbox" class="hide-toggle-rev" name="attr_tool4Name" value="" hidden="true" /checked>
	<div class="toolSelectHolder hide-item-rev">

	<input id="select-tool4" class="toolSelector" type="checkbox" name="attr_toolSelect" value="tool4">
	<label for="select-tool4" class="skillSelectionLabel">

	<div class="blocker toolBlocker"></div>
	

	<input type="text" name="attr_tool4Uses" class="toolSelectBox" value="1">

	<!-- Tool4 Icon Selection -->
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Question" name="attr_tool4Icon"><div class="type-image skillIcon question"></div>
	</div>

	<div class="attackIcon">
<input type="checkbox" class="expand-toggle" value="0" name="attr_tool4Icon"><div class="type-image skillIcon portableIcon"></div>
	</div>

	<div class="attackIcon">
<input type="checkbox" class="expand-toggle" value="Hand" name="attr_tool4Icon" /checked><div class="type-image skillIcon portableIcon"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Burn" name="attr_tool4Icon"><div class="type-image skillIcon burn"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Bleed" name="attr_tool4Icon"><div class="type-image skillIcon bleed"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Paralysis" name="attr_tool4Icon"><div class="type-image skillIcon paralysis"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Smoke" name="attr_tool4Icon"><div class="type-image skillIcon smoke"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Charge" name="attr_tool4Icon"><div class="type-image skillIcon charge"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Fortune" name="attr_tool4Icon"><div class="type-image skillIcon fortune"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Fragile" name="attr_tool4Icon"><div class="type-image skillIcon fragile"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Protection" name="attr_tool4Icon"><div class="type-image skillIcon protection"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="StaggerProtection" name="attr_tool4Icon"><div class="type-image skillIcon staggerprotection"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Strength" name="attr_tool4Icon"><div class="type-image skillIcon strength"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Feeble" name="attr_tool4Icon"><div class="type-image skillIcon feeble"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Endurance" name="attr_tool4Icon"><div class="type-image skillIcon endurance"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Disarm" name="attr_tool4Icon"><div class="type-image skillIcon disarm"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Haste" name="attr_tool4Icon"><div class="type-image skillIcon haste"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Bind" name="attr_tool4Icon"><div class="type-image skillIcon bind"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Panic" name="attr_tool4Icon"><div class="type-image skillIcon panic"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Hostile" name="attr_tool4Icon"><div class="type-image skillIcon hostile"></div>
	</div>

<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Burn" name="attr_tool4Icon"><div class="type-image skillIcon burn-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bleed" name="attr_tool4Icon"><div class="type-image skillIcon bleed-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Paralysis" name="attr_tool4Icon"><div class="type-image skillIcon paralysis-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Smoke" name="attr_tool4Icon"><div class="type-image skillIcon smoke-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Charge" name="attr_tool4Icon"><div class="type-image skillIcon charge-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fortune" name="attr_tool4Icon"><div class="type-image skillIcon fortune-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fragile" name="attr_tool4Icon"><div class="type-image skillIcon fragile-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Protection" name="attr_tool4Icon"><div class="type-image skillIcon protection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/StaggerProtection" name="attr_tool4Icon"><div class="type-image skillIcon staggerprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Strength" name="attr_tool4Icon"><div class="type-image skillIcon strength-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Feeble" name="attr_tool4Icon"><div class="type-image skillIcon feeble-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Endurance" name="attr_tool4Icon"><div class="type-image skillIcon endurance-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Disarm" name="attr_tool4Icon"><div class="type-image skillIcon disarm-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Haste" name="attr_tool4Icon"><div class="type-image skillIcon haste-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bind" name="attr_tool4Icon"><div class="type-image skillIcon bind-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Hostile" name="attr_tool4Icon"><div class="type-image skillIcon hostile-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Panic" name="attr_tool4Icon"><div class="type-image skillIcon panic-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PanicBlue" name="attr_tool4Icon"><div class="type-image skillIcon panic-limbus-blue"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Rupture" name="attr_tool4Icon"><div class="type-image skillIcon rupture-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Tremor" name="attr_tool4Icon"><div class="type-image skillIcon tremor-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Sinking" name="attr_tool4Icon"><div class="type-image skillIcon sinking-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Poise" name="attr_tool4Icon"><div class="type-image skillIcon poise-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Frostbite" name="attr_tool4Icon"><div class="type-image skillIcon frostbite-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Poison" name="attr_tool4Icon"><div class="type-image skillIcon poison-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Nails" name="attr_tool4Icon"><div class="type-image skillIcon nails-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Ruin" name="attr_tool4Icon"><div class="type-image skillIcon ruin-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Devastation" name="attr_tool4Icon"><div class="type-image skillIcon devastation-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Critical" name="attr_tool4Icon"><div class="type-image skillIcon critical-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Aggro" name="attr_tool4Icon"><div class="type-image skillIcon aggro-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Ammo" name="attr_tool4Icon"><div class="type-image skillIcon ammo-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bullseye" name="attr_tool4Icon"><div class="type-image skillIcon bullseye-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Barrier" name="attr_tool4Icon"><div class="type-image skillIcon barrier-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Duel" name="attr_tool4Icon"><div class="type-image skillIcon duel-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fist" name="attr_tool4Icon"><div class="type-image skillIcon fist-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/FistGreen" name="attr_tool4Icon"><div class="type-image skillIcon fist-limbus-green"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Heal" name="attr_tool4Icon"><div class="type-image skillIcon heal-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/KAmpule" name="attr_tool4Icon"><div class="type-image skillIcon kampule-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/TTime" name="attr_tool4Icon"><div class="type-image skillIcon ttime-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/SlashProtection" name="attr_tool4Icon"><div class="type-image skillIcon slashprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PierceProtection" name="attr_tool4Icon"><div class="type-image skillIcon pierceprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/BluntProtection" name="attr_tool4Icon"><div class="type-image skillIcon bluntprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/SlashFragility" name="attr_tool4Icon"><div class="type-image skillIcon slashfragility-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PierceFragility" name="attr_tool4Icon"><div class="type-image skillIcon piercefragility-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/BluntFragility" name="attr_tool4Icon"><div class="type-image skillIcon bluntfragility-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Wrath" name="attr_tool4Icon"><div class="type-image skillIcon wrath-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Lust" name="attr_tool4Icon"><div class="type-image skillIcon lust-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Sloth" name="attr_tool4Icon"><div class="type-image skillIcon sloth-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Gluttony" name="attr_tool4Icon"><div class="type-image skillIcon gluttony-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Gloom" name="attr_tool4Icon"><div class="type-image skillIcon gloom-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Pride" name="attr_tool4Icon"><div class="type-image skillIcon pride-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Envy" name="attr_tool4Icon"><div class="type-image skillIcon envy-limbus"></div>
	</div>

	<!-- Tool4 Icon selection end -->


	</label>

	</div> 
	</div>
	</div>
	<!-- Tool4 selector end -->


	<!-- Special1 selector -->
	<div>
	<input type="checkbox" class="hide-toggle-rev" name="attr_special1Name" value="" hidden="true" /checked>
	<div class="toolSelectHolder hide-item-rev">
	<input id="select-special1" class="toolSelector" type="checkbox" name="attr_toolSelect" value="special1">
	<label for="select-special1" class="skillSelectionLabel">

	<div class="type-image skillIcon skillSpecial"></div>

	</label>

	</div> 
	</div>
	<!-- Special1 selector end -->

	<!-- Special2 selector -->
	<div>
	<input type="checkbox" class="hide-toggle-rev" name="attr_special2Name" value="" hidden="true" /checked>
	<div class="toolSelectHolder hide-item-rev">
	<input id="select-special2" class="toolSelector" type="checkbox" name="attr_toolSelect" value="special2">
	<label for="select-special2" class="skillSelectionLabel">

	<div class="type-image skillIcon skillSpecial"></div>

	</label>

	</div> 
	</div>
	<!-- Special2 selector end -->



	</div>
	<!-- Tool selector Box end -->

	</div>

	</div>
	<!-- Action Palette END -->

	<!-- Def Palette -->
	<div class="rowContainer columnAlign half">
	<div class="rowContainer outfit paletteButton" style="justify-content: flex-start;">

		<div class="iconHolder">
		<div class="type-image typeIcon defend"></div>
		</div>

		<div class="rowContainer" style="width: 100%; position: absolute; top: 0; left: -2px;">

			<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_defRoll1" placeholder="1" value="(@{defDice1} + @{selectDefDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_defRoll2" placeholder="6" value="(@{defDice2} + @{selectDefDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_defRoll3" placeholder="0" value="(@{defDice3}+@{defPower}+@{selectDefDice3}+@{Endurance}-@{Disarm}+@{difficulty})" disabled="true">
	</div>



	<button type="action" class="NDice" id="autoroll_def" name="act_rollCombat"></button>		
		</div>

	<!-- EGO (Def) Palette -->
	<div class="paletteOverride">

	<input type="checkbox" class="hide-toggle" name="attr_egoActiveState" value="true">
	<div class="hide-item">

		<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Outfit">
		<div class="hide-item">
	
		<div class="rowContainer egoDefPalette paletteButton" style="justify-content: flex-start;">
		<div class="iconHolder">
		<div class="type-image typeIcon egoDef"></div>
		</div>

		<div class="rowContainer" style="width: 100%; position: absolute; top: 0; left: -2px;">
	<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_egoDefRoll1" placeholder="1" value="(@{egoDefDice1} + @{selectDefDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_egoDefRoll2" placeholder="6" value="(@{egoDefDice2} + @{selectDefDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_egoDefRoll3" placeholder="0" value="(@{egoDefDice3}+@{defPower}+@{selectDefDice3}+@{Endurance}-@{Disarm}+@{difficulty})" disabled="true">
	</div>

<button type="action" class="NDice" id="autoroll_egoDef" name="act_rollCombat"></button>			
		</div>

	</div></div></div></div>
	<!-- EGO (Def) Palette END -->

	<!-- Distort (Def) Palette -->
	<div class="paletteOverride">

	<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true">
	<div class="hide-item">
	
		<div class="rowContainer egoDefPalette paletteButton" style="justify-content: flex-start;">
		<div class="iconHolder">
		<div class="type-image typeIcon egoDef"></div>
		</div>

		<div class="rowContainer" style="width: 100%; position: absolute; top: 0; left: -2px;">
	<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_distortDefRoll1" placeholder="1" value="(@{defDice1} + @{distortDefDice1} + @{selectDefDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_distortDefRoll2" placeholder="6" value="(@{defDice2} + @{distortDefDice2} + @{selectDefDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_distortDefRoll3" placeholder="0" value="(@{defDice3}+@{distortDefDice3}+@{defPower}+@{selectDefDice3}+@{Endurance}-@{Disarm}+@{difficulty})" disabled="true">
	</div>

<button type="action" class="NDice" id="autoroll_def_distort" name="act_rollCombat"></button>			
		</div>

	</div>

	</div></div>
	<!-- Distort (Def) Palette END -->




	</div>
              

	<!-- Defend Palette END -->

	<!-- Evade Palette -->
	<div class="rowContainer STGR paletteButton" style="justify-content: flex-start;">

		<div class="iconHolder">
		<div class="type-image typeIcon evade"></div>
		</div>

		<div class="rowContainer" style="width: 100%; position: absolute; top: 0; left: -2px;">
		<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_evdRoll1" placeholder="1" value="(@{evdDice1} + @{selectEvdDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_evdRoll2" placeholder="6" value="(@{evdDice2} + @{selectEvdDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_evdRoll3" placeholder="0" value="(@{evdDice3}+@{evdPower}+@{evdPositive}-@{evdNegative}+@{selectEvdDice3}+@{difficulty})" disabled="true">
	</div>

<button type="action" class="NDice" id="autoroll_evd" name="act_rollCombat"></button>			
		</div>

	<!-- EGO (Evd) Palette -->
	<div class="paletteOverride">

	<input type="checkbox" class="hide-toggle" name="attr_egoActiveState" value="true">
	<div class="hide-item">

		<input type="checkbox" class="hide-toggle" name="attr_egoType" value="Outfit">
		<div class="hide-item">
	

<div class="rowContainer egoEvdPalette paletteButton" style="justify-content: flex-start;">

		<div class="iconHolder">
		<div class="type-image typeIcon egoEvd"></div>
		</div>

		<div class="rowContainer" style="width: 100%; position: absolute; top: 0; left: -2px;">
		<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_egoEvdRoll1" placeholder="1" value="(@{egoEvdDice1} + @{selectEvdDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_egoEvdRoll2" placeholder="6" value="(@{egoEvdDice2} + @{selectEvdDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_egoEvdRoll3" placeholder="0" value="(@{egoEvdDice3}+@{evdPower}+@{evdPositive}-@{evdNegative}+@{selectEvdDice3}+@{difficulty})" disabled="true">
	</div>

<button type="action" class="NDice" id="autoroll_egoEvd" name="act_rollCombat"></button>			
		</div>

	</div>

		</div></div></div>

	<!-- EGO (Evd) Palette END -->

	<!-- Distort (Evd) Palette -->
	<div class="paletteOverride">

	<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true">
	<div class="hide-item">

<div class="rowContainer egoEvdPalette paletteButton" style="justify-content: flex-start;">

		<div class="iconHolder">
		<div class="type-image typeIcon egoEvd"></div>
		</div>

		<div class="rowContainer" style="width: 100%; position: absolute; top: 0; left: -2px;">
		<div class="rowContainer darkInput paletteDice">
			<input type="text" name="attr_distortEvdRoll1" placeholder="1" value="(@{evdDice1} + @{distortEvdDice1} + @{selectEvdDice1})" disabled="true">
			<div class="plainText">D</div>
			<input type="text" name="attr_distortEvdRoll2" placeholder="6" value="(@{evdDice2} + @{distortEvdDice2} + @{selectEvdDice2})" disabled="true">
			<div class="plainText">+</div>
			<input type="text" name="attr_distortEvdRoll3" placeholder="0" value="(@{evdDice3}+@{distortEvdDice3}+@{evdPower}+@{evdPositive}-@{evdNegative}+@{selectEvdDice3}+@{difficulty})" disabled="true">
	</div>

<button type="action" class="NDice" id="autoroll_evd_distort" name="act_rollCombat"></button>			
		</div>

	</div>

		</div></div></div>
	<!-- Distort (Evd) Palette END -->




		</div>
	<!-- Evade Palette END -->
              
	</div>
<!-- Def/Evd section END -->


	<div class="skillSelect">

<!-- Skill palette selection area (normal) -->

<input type="checkbox" class="hide-toggle-rev" name="attr_distortState" value="true" hidden="true" /checked>
<div class="hide-item-rev" style="width: 100%;">

<div class="rowContainer centerFlex" style="width: 100%; flex-wrap: wrap; margin-top: 5px;">

<!-- EGO Skill 1 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_egoActiveState" value="0" hidden="true" /checked>
<input type="checkbox" class="hide-toggle-rev" name="attr_egoSkill1Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-egoSkill1" class="skillSelector" type="checkbox" name="attr_skillSelect" value="egoSkill1">
	<label for="select-egoSkill1" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_egoSkill1Name" data-i18n-placeholder="palette-egoskill1-name" placeholder="MYS Skill (1)">
	</div>

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill1Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill1Type"><div class="skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill1Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill1Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill1Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill1Type"><div class="type-image skillIcon skillMass"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- EGO Skill 1 block END -->

<!-- Skill 1 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_skill1Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-skill1" class="skillSelector" type="checkbox" name="attr_skillSelect" value="skill1">
	<label for="select-skill1" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_skill1Name" data-i18n-placeholder="palette-skill1-name" placeholder="Skill (1)">
	</div>


<div class="iconHolder">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill1Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill1Type"><div class="skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill1Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill1Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill1Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill1Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- Skill 1 block END -->

<!-- EGO Skill 2 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_egoActiveState" value="0" hidden="true" /checked>
<input type="checkbox" class="hide-toggle-rev" name="attr_egoSkill2Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-egoSkill2" class="skillSelector" type="checkbox" name="attr_skillSelect" value="egoSkill2">
	<label for="select-egoSkill2" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_egoSkill2Name" data-i18n-placeholder="palette-egoskill2-name" placeholder="MYS Skill (2)">
	</div>

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill2Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill2Type"><div class="skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill2Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill2Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill2Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill2Type"><div class="type-image skillIcon skillMass"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- EGO Skill 2 block END -->

<!-- Skill 2 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_skill2Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-skill2" class="skillSelector" type="checkbox" name="attr_skillSelect" value="skill2">
	<label for="select-skill2" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_skill2Name" data-i18n-placeholder="palette-skill2-name" placeholder="Skill (2)">
	</div>

<div class="iconHolder">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill2Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill2Type"><div class="skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill2Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill2Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill2Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill2Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- Skill 2 block END -->

<!-- EGO Skill 3 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_egoActiveState" value="0" hidden="true" /checked>
<input type="checkbox" class="hide-toggle-rev" name="attr_egoSkill3Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-egoSkill3" class="skillSelector" type="checkbox" name="attr_skillSelect" value="egoSkill3">
	<label for="select-egoSkill3" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_egoSkill3Name" data-i18n-placeholder="palette-egoskill3-name" placeholder="MYS Skill (3)">
	</div>

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill3Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill3Type"><div class="skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill3Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill3Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill3Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill3Type"><div class="type-image skillIcon skillMass"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- EGO Skill 3 block END -->


<!-- Skill 3 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_skill3Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-skill3" class="skillSelector" type="checkbox" name="attr_skillSelect" value="skill3">
	<label for="select-skill3" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_skill3Name" data-i18n-placeholder="palette-skill3-name" placeholder="Skill (3)">
	</div>

<div class="iconHolder">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill3Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill3Type"><div class="skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill3Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill3Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill3Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill3Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- Skill 3 block END -->

<!-- EGO Skill 4 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_egoActiveState" value="0" hidden="true" /checked>
<input type="checkbox" class="hide-toggle-rev" name="attr_egoSkill4Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-egoSkill4" class="skillSelector" type="checkbox" name="attr_skillSelect" value="egoSkill4">
	<label for="select-egoSkill4" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_egoSkill4Name" data-i18n-placeholder="palette-egoskill4-name" placeholder="MYS Skill (4)">
	</div>

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill4Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill4Type"><div class="skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill4Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill4Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill4Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill4Type"><div class="type-image skillIcon skillMass"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- EGO Skill 4 block END -->

<!-- Skill 4 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_skill4Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-skill4" class="skillSelector" type="checkbox" name="attr_skillSelect" value="skill4">
	<label for="select-skill4" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_skill4Name" data-i18n-placeholder="palette-skill4-name" placeholder="Skill (4)">
	</div>

<div class="iconHolder">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill4Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill4Type"><div class="skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill4Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill4Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill4Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill4Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- Skill 4 block END -->

<!-- EGO Skill 5 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_egoActiveState" value="0" hidden="true" /checked>
<input type="checkbox" class="hide-toggle-rev" name="attr_egoSkill5Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-egoSkill5" class="skillSelector" type="checkbox" name="attr_skillSelect" value="egoSkill5">
	<label for="select-egoSkill5" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_egoSkill5Name" data-i18n-placeholder="palette-egoskill5-name" placeholder="MYS Skill (5)">
	</div>

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill5Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill5Type"><div class="skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill5Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill5Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill5Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill5Type"><div class="type-image skillIcon skillMass"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- EGO Skill 5 block END -->

<!-- Skill 5 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_skill5Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-skill5" class="skillSelector" type="checkbox" name="attr_skillSelect" value="skill5">
	<label for="select-skill5" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_skill5Name" data-i18n-placeholder="palette-skill5-name" placeholder="Skill (5)">
	</div>

<div class="iconHolder">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill5Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill5Type"><div class="skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill5Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill5Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill5Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill5Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- Skill 5 block END -->

<!-- EGO Skill 6 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_egoActiveState" value="0" hidden="true" /checked>
<input type="checkbox" class="hide-toggle-rev" name="attr_egoSkill6Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-egoSkill6" class="skillSelector" type="checkbox" name="attr_skillSelect" value="egoSkill6">
	<label for="select-egoSkill6" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_egoSkill6Name" data-i18n-placeholder="palette-egoskill6-name" placeholder="MYS Skill (6)">
	</div>

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill6Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill6Type"><div class="skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill6Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill6Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill6Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill6Type"><div class="type-image skillIcon skillMass"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- EGO Skill 6 block END -->

<!-- Skill 6 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_skill6Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-skill6" class="skillSelector" type="checkbox" name="attr_skillSelect" value="skill6">
	<label for="select-skill6" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_skill6Name" data-i18n-placeholder="palette-skill6-name" placeholder="Skill (6)">
	</div>

<div class="iconHolder">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill6Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill6Type"><div class="skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill6Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill6Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill6Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill6Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- Skill 6 block END -->

    
</div>	</div> <!-- Skill palette END -->


<!-- Skill palette selection area (Distortion) -->

<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true" hidden="true" /checked>
<div class="hide-item" style="width: 100%;">

<div class="rowContainer centerFlex" style="width: 100%; flex-wrap: wrap; margin-top: 5px;">

<!-- EGO Skill 1 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_egoSkill1Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-egoSkill1" class="skillSelector" type="checkbox" name="attr_skillSelect" value="egoSkill1">
	<label for="select-egoSkill1" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_egoSkill1Name" data-i18n-placeholder="palette-egoskill1-name" placeholder="MYS Skill (1)">
	</div>

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill1Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill1Type"><div class="skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill1Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill1Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill1Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill1Type"><div class="type-image skillIcon skillMass"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- EGO Skill 1 block END -->

<!-- Skill 1 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_skill1Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-skill1" class="skillSelector" type="checkbox" name="attr_skillSelect" value="skill1">
	<label for="select-skill1" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_skill1Name" data-i18n-placeholder="palette-skill1-name" placeholder="Skill (1)">
	</div>


<div class="iconHolder">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill1Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill1Type"><div class="skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill1Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill1Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill1Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill1Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- Skill 1 block END -->

<!-- EGO Skill 2 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_egoSkill2Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-egoSkill2" class="skillSelector" type="checkbox" name="attr_skillSelect" value="egoSkill2">
	<label for="select-egoSkill2" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_egoSkill2Name" data-i18n-placeholder="palette-egoskill2-name" placeholder="MYS Skill (2)">
	</div>

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill2Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill2Type"><div class="skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill2Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill2Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill2Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill2Type"><div class="type-image skillIcon skillMass"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- EGO Skill 2 block END -->

<!-- Skill 2 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_skill2Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-skill2" class="skillSelector" type="checkbox" name="attr_skillSelect" value="skill2">
	<label for="select-skill2" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_skill2Name" data-i18n-placeholder="palette-skill2-name" placeholder="Skill (2)">
	</div>

<div class="iconHolder">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill2Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill2Type"><div class="skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill2Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill2Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill2Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill2Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- Skill 2 block END -->

<!-- EGO Skill 3 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_egoSkill3Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-egoSkill3" class="skillSelector" type="checkbox" name="attr_skillSelect" value="egoSkill3">
	<label for="select-egoSkill3" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_egoSkill3Name" data-i18n-placeholder="palette-egoskill3-name" placeholder="MYS Skill (3)">
	</div>

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill3Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill3Type"><div class="skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill3Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill3Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill3Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill3Type"><div class="type-image skillIcon skillMass"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- EGO Skill 3 block END -->


<!-- Skill 3 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_skill3Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-skill3" class="skillSelector" type="checkbox" name="attr_skillSelect" value="skill3">
	<label for="select-skill3" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_skill3Name" data-i18n-placeholder="palette-skill3-name" placeholder="Skill (3)">
	</div>

<div class="iconHolder">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill3Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill3Type"><div class="skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill3Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill3Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill3Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill3Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- Skill 3 block END -->

<!-- EGO Skill 4 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_egoSkill4Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-egoSkill4" class="skillSelector" type="checkbox" name="attr_skillSelect" value="egoSkill4">
	<label for="select-egoSkill4" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_egoSkill4Name" data-i18n-placeholder="palette-egoskill4-name" placeholder="MYS Skill (4)">
	</div>

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill4Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill4Type"><div class="skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill4Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill4Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill4Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill4Type"><div class="type-image skillIcon skillMass"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- EGO Skill 4 block END -->

<!-- Skill 4 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_skill4Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-skill4" class="skillSelector" type="checkbox" name="attr_skillSelect" value="skill4">
	<label for="select-skill4" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_skill4Name" data-i18n-placeholder="palette-skill4-name" placeholder="Skill (4)">
	</div>

<div class="iconHolder">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill4Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill4Type"><div class="skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill4Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill4Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill4Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill4Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- Skill 4 block END -->

<!-- EGO Skill 5 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_egoSkill5Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-egoSkill5" class="skillSelector" type="checkbox" name="attr_skillSelect" value="egoSkill5">
	<label for="select-egoSkill5" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_egoSkill5Name" data-i18n-placeholder="palette-egoskill5-name" placeholder="MYS Skill (5)">
	</div>

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill5Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill5Type"><div class="skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill5Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill5Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill5Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill5Type"><div class="type-image skillIcon skillMass"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- EGO Skill 5 block END -->

<!-- Skill 5 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_skill5Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-skill5" class="skillSelector" type="checkbox" name="attr_skillSelect" value="skill5">
	<label for="select-skill5" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_skill5Name" data-i18n-placeholder="palette-skill5-name" placeholder="Skill (5)">
	</div>

<div class="iconHolder">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill5Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill5Type"><div class="skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill5Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill5Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill5Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill5Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- Skill 5 block END -->

<!-- EGO Skill 6 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_egoSkill6Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-egoSkill6" class="skillSelector" type="checkbox" name="attr_skillSelect" value="egoSkill6">
	<label for="select-egoSkill6" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_egoSkill6Name" data-i18n-placeholder="palette-egoskill6-name" placeholder="MYS Skill (6)">
	</div>

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill6Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill6Type"><div class="skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill6Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill6Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill6Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill6Type"><div class="type-image skillIcon skillMass"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- EGO Skill 6 block END -->

<!-- Skill 6 Palette -->
<div class="skillBuffer">
<input type="checkbox" class="hide-toggle-rev" name="attr_skill6Type" value="None" hidden="true" /checked>
	<div class="hide-item-rev skillhide">
	<div class="rowContainer paletteButton skillSelectionElement" style="width: 100%;">

	<input id="select-skill6" class="skillSelector" type="checkbox" name="attr_skillSelect" value="skill6">
	<label for="select-skill6" class="skillSelectionLabel" style="width: 100%;">
	<div class="skillWrap">

	<div style="position: relative;">
	<div class="blocker"></div>
	<input type="text" class="combatPaletteName skillSelectionName" name="attr_skill6Name" data-i18n-placeholder="palette-skill6-name" placeholder="Skill (6)">
	</div>

<div class="iconHolder">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill6Type"><div class="skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill6Type"><div class="skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill6Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill6Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill6Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill6Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

	</div>

	</div>

	</label>
	</div>
	</div>
</div>
<!-- Skill 6 block END -->

    
</div>	</div> <!-- Skill palette END -->



	</div> <!-- Skill section end -->






<!-- Skill data viewer -->
<div class="rowContainer contentContainer centerFlex" style="width: 100%;">
<input class="text" name="attr_selectName" value="" hidden="true">
<input class="text" name="attr_selectType" value="" hidden="true">
<input class="text" name="attr_selectRank" value="0" hidden="true">
<input class="text" name="attr_selectLight" value="0" hidden="true">
<input class="text" name="attr_selectDescription" value="" hidden="true">
<input class="text" name="attr_selectEffect" value="" hidden="true">

<input class="text" name="attr_selectAtkDice1" value="0" hidden="true">
<input class="text" name="attr_selectAtkDice2" value="0" hidden="true">
<input class="text" name="attr_selectAtkDice3" value="0" hidden="true">

<input type="text" name="attr_selectDefDice1" value="0" hidden="true">
<input type="text" name="attr_selectDefDice2" value="0" hidden="true">
<input type="text" name="attr_selectDefDice3" value="0" hidden="true">

<input type="text" name="attr_selectEvdDice1" value="0" hidden="true">
<input type="text" name="attr_selectEvdDice2" value="0" hidden="true">
<input type="text" name="attr_selectEvdDice3" value="0" hidden="true">

<input type="text" name="attr_selectDice1" value="0" hidden="true">
<input type="text" name="attr_selectDice2" value="0" hidden="true">
<input type="text" name="attr_selectDice3" value="0" hidden="true">

<input type="checkbox" class="hide-toggle-rev" name="attr_skillSelect" value="0" /checked>
<div class="hide-item-rev contentContainer darkBG" style="width: 100%;">

<div class="rowContainer titleHeader">

<div style="position: absolute; left: 0px;" class="half">
<div class="blocker"></div>
<input type="text" class="transpInput viewerName" name="attr_selectName" data-i18n-placeholder="skill-name" placeholder="Skill name" value="" style="width: 100%;">
</div>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill" style="position: absolute; right: 30px;">
<div class="blocker"></div>
		<input type="text" class="diceNum" name="attr_selectDice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_selectDice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_selectDice3" placeholder="0" value="0">
		</div>

<div class="lightCost" style="position: absolute; top: 2px; right: 0px;" data-i18n-title="skill-light-cost" title="Light Cost">
<div class="blocker"></div>
<input type="text" class="outfitRank" style="margin: 0px !important; padding: 0px !important;" name="attr_selectLight">

</div>

	</div>


	<div class="rowContainer weaponInfo" style="overflow: hidden; border-radius: 3px;">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_selectDescription" class="augmentDescriptionInput noHover" data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_selectEffect" class="weaponEffectInput noHover" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div> 

<div>
<input type="checkbox" class="hide-toggle" name="attr_selectCancel" value="true">
<div class="hide-item LIGHTtext" style="position: absolute; top: 0px; left: 0px; background-color: rgba(0,0,0,0.65); height: 100%; width: 100%; padding-top: 45px;">
<b data-i18n="viewer-light-warning">NOT ENOUGH LIGHT</b>
	</div>
	</div>

	</div>

	</div>
</div>
<!-- Skill data viewer END -->

</div> <!-- skill section REALLY end -->


            </div>
        </div>

</div>
</div>

<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab"  value="equipment">
<div class="toggleButtons">


<button type="action" id="exportButton" name="act_export" data-i18n="tabs-export">Export/Import</button>
<button type="action" id="detailsButton" name="act_details" data-i18n="tabs-character">Character Details</button>
<button type="action" id="equipmentButton" name="act_equipment" data-i18n="tabs-equipment">Equipment</button>
<button type="action" id="skillsButton" name="act_skills" data-i18n="tabs-skills">Skills</button>

<input type="checkbox" class="hide-toggle" name="attr_global_editMode" value="0" hidden="true" /checked>
<button type="action" class="hide-item-rev" id="editButton" name="act_edit" style="position:relative;">
<span data-i18n="tabs-edit">Editor</span> 
</button>


</div>


<!-- Equipment section -->
	<div class="sheet-body sheet-equipment darkBG">

	<!-- EGO uses dummy -->
	<input type="text" name="attr_egoUses" value="5" hidden="true">

        <div class="contentBlock" id="equipmentSection">
            <div class="weaponContainer">
               
<!-- Weapon1 block -->
<div class="contentContainer">

<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
<button type="action" class="darkInput shareButton" id="share_weapon1" name="act_shareWeapon" data-i18n-title="share" title="Share info"></button>
<button type="action" class="darkInput editButton" id="edit_outfit" name="act_editMode" data-i18n-title="edit" title="Edit"></button>

	<!-- Weapon 1 header -->
	<div class="sectionHeader weapon">


	<input type="text" class="outfitRank" name="attr_weapon1Rank" placeholder="0" data-i18n-title="rank" title="Rank">
	<input type="text" class="transpInput contentName" name="attr_weapon1Name" data-i18n-placeholder="equip-weapon1-name" placeholder="Weapon Name (1)">

	<!-- Weapon dice roll block -->
	<div class="rowContainer combatDice">

	<!-- Weapon1 Uses indicator -->
	<div class="buffer" style="width: 30px; height: 30px;">
	<input type="checkbox" class="hide-toggle-rev" name="attr_weapon1UseType" value="Limitless" hidden="true" /checked>
		<div class="hide-item-rev rowContainer centerFlex" style="position: relative;">

		<input type="text" class="transpInput blocker" name="attr_weapon1Uses" style="text-align: center; height: 100%;" value="5">

		<input type="checkbox" class="fade-toggle" name="attr_weapon1UseType" value="Deplete" hidden="true">
		<div class="fade-item reusableIcon" style="width: 30px; height: 30px;"></div>  

		</div>

	</div>
	<!-- Weapon1 Uses indicator END -->

<div class="weaponIcons">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_weapon1Type"><div class="type-image typeIcon slash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_weapon1Type"><div class="type-image typeIcon pierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_weapon1Type"><div class="type-image typeIcon blunt"></div>
		</div>
	</div>


		<div class="dicerollBlock">
		<input type="text" class="diceNum" name="attr_weapon1Dice1" value="1">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_weapon1Dice2" value="6">
		<div class="plainText">+</div>
		<input type="text" name="attr_weapon1Dice3" placeholder="0" value="0">
		</div>

	<div>
             
	<button type="action" class="NDice" id="autoroll_weapon1_raw" name="act_rollCombat"></button>

	</div>
	<!-- dice roll end -->

	</div></div>
	<!-- header end -->

	<!-- Weapon1 Edit-->
<div>
<input type="checkbox" class="hide-toggle" name="attr_settingEditMode" value="true">
<div class="hide-item editCover">

	<div class="settingStyle">
	<div class="settingStyle" style="width: 60px;"><b data-i18n="message-uses">Uses</b>:	</div> 

	<input type="text" class="transpInput" style="width: 23px;" name="attr_weapon1Uses" value="5"> / 
	<input type="number" class="darkInput" name="attr_weapon1Uses_max" value="5" min="1">
	<select name="attr_weapon1UseType" class="darkInput" style="width: 70px; margin-left: 5px;">
		<option data-i18n="uses-nolimit" value="Limitless" selected>No limit</option>
		<option data-i18n="uses-reload" value="Reload">Reload</option>
		<option data-i18n="uses-deplete" value="Deplete">Deplete</option>
	</select>

	</div>

</div>
</div>
	<!-- Weapon1 Edit end -->

	<div class="weaponRankBox weapon"> 

	<select name="attr_weapon1Type" class="weapon_type">
 	<option value="None" data-i18n="weapon-type-None">---</option>
         <option data-i18n="weapon-type-Slash" value="Slash">Slash</option>
         <option data-i18n="weapon-type-Pierce" value="Pierce">Pierce</option>
	 <option data-i18n="weapon-type-Blunt" value="Blunt">Blunt</option>
         </select>


	<select name="attr_weapon1Range" class="weapon_distance">
 	<option value="None" data-i18n="weapon-type-None">---</option>
         <option data-i18n="weapon-type-Melee" value="Melee">Melee</option>
         <option data-i18n="weapon-type-Ranged" value="Ranged">Ranged</option>
         </select>

	</div>

	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
	<div class="descHead"></div>
       <textarea spellcheck="false"  name="attr_weapon1Description" class="weaponDescriptionInput" data-i18n-placeholder="weapon-desc" placeholder="Weapon description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_weapon1Effect" class="weaponEffectInput" data-i18n-placeholder="weapon-effect" placeholder="Weapon effects."></textarea>
        </div>

	</div>
	<!-- desc end -->	

	</div>
<!-- Weapon 1 Block END -->

<!-- Weapon2 block -->
<div class="contentContainer">

<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
<button type="action" class="darkInput shareButton" id="share_weapon2" name="act_shareWeapon" data-i18n-title="share" title="Share info"></button>
<button type="action" class="darkInput editButton" id="edit_outfit" name="act_editMode" data-i18n-title="edit" title="Edit"></button>

	<!-- Weapon2 header -->
	<div class="sectionHeader weapon">


	<input type="text" class="outfitRank" name="attr_weapon2Rank" placeholder="0" data-i18n-title="rank" title="Rank">
	<input type="text" class="transpInput contentName" name="attr_weapon2Name" data-i18n-placeholder="equip-weapon2-name" placeholder="Weapon Name (2)">

	<!-- Weapon dice roll block -->
	<div class="rowContainer combatDice">

	<!-- Weapon2 Uses indicator -->
	<div class="buffer" style="width: 30px; height: 30px;">
	<input type="checkbox" class="hide-toggle-rev" name="attr_weapon2UseType" value="Limitless" hidden="true" /checked>
		<div class="hide-item-rev rowContainer centerFlex" style="position: relative;">

		<input type="text" class="transpInput blocker" name="attr_weapon2Uses" style="text-align: center; height: 100%;" value="5">

		<input type="checkbox" class="fade-toggle" name="attr_weapon2UseType" value="Deplete" hidden="true">
		<div class="fade-item reusableIcon" style="width: 30px; height: 30px;"></div>  

		</div>

	</div>
	<!-- Weapon2 Uses indicator END -->

<div class="weaponIcons">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_weapon2Type"><div class="type-image typeIcon slash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_weapon2Type"><div class="type-image typeIcon pierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_weapon2Type"><div class="type-image typeIcon blunt"></div>
		</div>
	</div>


		<div class="dicerollBlock">
		<input type="text" class="diceNum" name="attr_weapon2Dice1" value="1">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_weapon2Dice2" value="6">
		<div class="plainText">+</div>
		<input type="text" name="attr_weapon2Dice3" placeholder="0" value="0">
		</div>

	<div>
             
	<button type="action" class="NDice" id="autoroll_weapon2_raw" name="act_rollCombat"></button>

	</div>
	<!-- dice roll end -->

	</div></div>
	<!-- header end -->

	<!-- Weapon2 Edit-->
<div>
<input type="checkbox" class="hide-toggle" name="attr_settingEditMode" value="true">
<div class="hide-item editCover">

	<div class="settingStyle">
	<div class="settingStyle" style="width: 60px;"><b data-i18n="message-uses">Uses</b>:	</div> 

	<input type="text" class="transpInput" style="width: 23px;" name="attr_weapon2Uses" value="5"> / 
	<input type="number" class="darkInput" name="attr_weapon2Uses_max" value="5" min="1">
	<select name="attr_weapon2UseType" class="darkInput" style="width: 70px; margin-left: 5px;">
		<option data-i18n="uses-nolimit" value="Limitless" selected>No limit</option>
		<option data-i18n="uses-reload" value="Reload">Reload</option>
		<option data-i18n="uses-deplete" value="Deplete">Deplete</option>
	</select>

	</div>

</div>
</div>

	<!-- Weapon2 Edit end -->

	<div class="weaponRankBox weapon"> 

	<select name="attr_weapon2Type" class="weapon_type">
 	<option value="None" data-i18n="weapon-type-None">---</option>
         <option data-i18n="weapon-type-Slash" value="Slash">Slash</option>
         <option data-i18n="weapon-type-Pierce" value="Pierce">Pierce</option>
	 <option data-i18n="weapon-type-Blunt" value="Blunt">Blunt</option>
         </select>


	<select name="attr_weapon2Range" class="weapon_distance">
 	<option value="None" data-i18n="weapon-type-None">---</option>
         <option data-i18n="weapon-type-Melee" value="Melee">Melee</option>
         <option data-i18n="weapon-type-Ranged" value="Ranged">Ranged</option>
         </select>

	</div>

	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
	<div class="descHead"></div>
       <textarea spellcheck="false"  name="attr_weapon2Description" class="weaponDescriptionInput" data-i18n-placeholder="weapon-desc" placeholder="Weapon description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_weapon2Effect" class="weaponEffectInput" data-i18n-placeholder="weapon-effect" placeholder="Weapon effects."></textarea>
        </div>

	</div>
	<!-- desc end -->	

	</div>
<!-- Weapon2 Block END -->

<!-- !!EXTRA!! Weapons area -->
<input type="checkbox" class="hide-toggle" name="attr_settingExtraEquip" value="true">
<div class="hide-item">

<!-- Weapon3 block -->
<div class="contentContainer">

<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
<button type="action" class="darkInput shareButton" id="share_weapon3" name="act_shareWeapon" data-i18n-title="share" title="Share info"></button>
<button type="action" class="darkInput editButton" id="edit_outfit" name="act_editMode" data-i18n-title="edit" title="Edit"></button>

	<!-- Weapon3 header -->
	<div class="sectionHeader weapon">


	<input type="text" class="outfitRank" name="attr_weapon3Rank" placeholder="0" data-i18n-title="rank" title="Rank">
	<input type="text" class="transpInput contentName" name="attr_weapon3Name" data-i18n-placeholder="equip-weapon3-name" placeholder="Weapon Name (3)">

	<!-- Weapon dice roll block -->
	<div class="rowContainer combatDice">

	<!-- Weapon3 Uses indicator -->
	<div class="buffer" style="width: 30px; height: 30px;">
	<input type="checkbox" class="hide-toggle-rev" name="attr_weapon3UseType" value="Limitless" hidden="true" /checked>
		<div class="hide-item-rev rowContainer centerFlex" style="position: relative;">

		<input type="text" class="transpInput blocker" name="attr_weapon3Uses" style="text-align: center; height: 100%;" value="5">

		<input type="checkbox" class="fade-toggle" name="attr_weapon3UseType" value="Deplete" hidden="true">
		<div class="fade-item reusableIcon" style="width: 30px; height: 30px;"></div>  

		</div>

	</div>
	<!-- Weapon3 Uses indicator END -->

<div class="weaponIcons">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_weapon3Type"><div class="type-image typeIcon slash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_weapon3Type"><div class="type-image typeIcon pierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_weapon3Type"><div class="type-image typeIcon blunt"></div>
		</div>
	</div>


		<div class="dicerollBlock">
		<input type="text" class="diceNum" name="attr_weapon3Dice1" value="1">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_weapon3Dice2" value="6">
		<div class="plainText">+</div>
		<input type="text" name="attr_weapon3Dice3" placeholder="0" value="0">
		</div>

	<div>
             
	<button type="action" class="NDice" id="autoroll_weapon3_raw" name="act_rollCombat"></button>

	</div>
	<!-- dice roll end -->

	</div></div>
	<!-- header end -->

	<!-- Weapon3 Edit-->
<div>
<input type="checkbox" class="hide-toggle" name="attr_settingEditMode" value="true">
<div class="hide-item editCover">

	<div class="settingStyle">
	<div class="settingStyle" style="width: 60px;"><b data-i18n="message-uses">Uses</b>:	</div> 

	<input type="text" class="transpInput" style="width: 23px;" name="attr_weapon3Uses" value="5"> / 
	<input type="number" class="darkInput" name="attr_weapon3Uses_max" value="5" min="1">
	<select name="attr_weapon3UseType" class="darkInput" style="width: 70px; margin-left: 5px;">
		<option data-i18n="uses-nolimit" value="Limitless" selected>No limit</option>
		<option data-i18n="uses-reload" value="Reload">Reload</option>
		<option data-i18n="uses-deplete" value="Deplete">Deplete</option>
	</select>

	</div>

</div>
</div>

	<!-- Weapon3 Edit end -->

	<div class="weaponRankBox weapon"> 

	<select name="attr_weapon3Type" class="weapon_type">
 	<option value="None" data-i18n="weapon-type-None">---</option>
         <option data-i18n="weapon-type-Slash" value="Slash">Slash</option>
         <option data-i18n="weapon-type-Pierce" value="Pierce">Pierce</option>
	 <option data-i18n="weapon-type-Blunt" value="Blunt">Blunt</option>
         </select>


	<select name="attr_weapon3Range" class="weapon_distance">
 	<option value="None" data-i18n="weapon-type-None">---</option>
         <option data-i18n="weapon-type-Melee" value="Melee">Melee</option>
         <option data-i18n="weapon-type-Ranged" value="Ranged">Ranged</option>
         </select>

	</div>

	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
	<div class="descHead"></div>
       <textarea spellcheck="false"  name="attr_weapon3Description" class="weaponDescriptionInput" data-i18n-placeholder="weapon-desc" placeholder="Weapon description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_weapon3Effect" class="weaponEffectInput" data-i18n-placeholder="weapon-effect" placeholder="Weapon effects."></textarea>
        </div>

	</div>
	<!-- desc end -->	

	</div>
<!-- Weapon3 Block END -->

<!-- Weapon4 block -->
<div class="contentContainer">

<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
<button type="action" class="darkInput shareButton" id="share_weapon4" name="act_shareWeapon" data-i18n-title="share" title="Share info"></button>
<button type="action" class="darkInput editButton" id="edit_outfit" name="act_editMode" data-i18n-title="edit" title="Edit"></button>

	<!-- Weapon4 header -->
	<div class="sectionHeader weapon">


	<input type="text" class="outfitRank" name="attr_weapon4Rank" placeholder="0" data-i18n-title="rank" title="Rank">
	<input type="text" class="transpInput contentName" name="attr_weapon4Name" data-i18n-placeholder="equip-weapon4-name" placeholder="Weapon Name (4)">

	<!-- Weapon dice roll block -->
	<div class="rowContainer combatDice">

	<!-- Weapon4 Uses indicator -->
	<div class="buffer" style="width: 30px; height: 30px;">
	<input type="checkbox" class="hide-toggle-rev" name="attr_weapon4UseType" value="Limitless" hidden="true" /checked>
		<div class="hide-item-rev rowContainer centerFlex" style="position: relative;">

		<input type="text" class="transpInput blocker" name="attr_weapon4Uses" style="text-align: center; height: 100%;" value="5">

		<input type="checkbox" class="fade-toggle" name="attr_weapon4UseType" value="Deplete" hidden="true">
		<div class="fade-item reusableIcon" style="width: 30px; height: 30px;"></div>  

		</div>

	</div>
	<!-- Weapon4 Uses indicator END -->

<div class="weaponIcons">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Slash" name="attr_weapon4Type"><div class="type-image typeIcon slash"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Pierce" name="attr_weapon4Type"><div class="type-image typeIcon pierce"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Blunt" name="attr_weapon4Type"><div class="type-image typeIcon blunt"></div>
		</div>
	</div>


		<div class="dicerollBlock">
		<input type="text" class="diceNum" name="attr_weapon4Dice1" value="1">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_weapon4Dice2" value="6">
		<div class="plainText">+</div>
		<input type="text" name="attr_weapon4Dice3" placeholder="0" value="0">
		</div>

	<div>
             
	<button type="action" class="NDice" id="autoroll_weapon4_raw" name="act_rollCombat"></button>

	</div>
	<!-- dice roll end -->

	</div></div>
	<!-- header end -->

	<!-- Weapon4 Edit-->
<div>
<input type="checkbox" class="hide-toggle" name="attr_settingEditMode" value="true">
<div class="hide-item editCover">

	<div class="settingStyle">
	<div class="settingStyle" style="width: 60px;"><b data-i18n="message-uses">Uses</b>:	</div> 

	<input type="text" class="transpInput" style="width: 23px;" name="attr_weapon4Uses" value="5"> / 
	<input type="number" class="darkInput" name="attr_weapon4Uses_max" value="5" min="1">
	<select name="attr_weapon4UseType" class="darkInput" style="width: 70px; margin-left: 5px;">
		<option data-i18n="uses-nolimit" value="Limitless" selected>No limit</option>
		<option data-i18n="uses-reload" value="Reload">Reload</option>
		<option data-i18n="uses-deplete" value="Deplete">Deplete</option>
	</select>

	</div>

</div>
</div>
	<!-- Weapon4 Edit end -->

	<div class="weaponRankBox weapon"> 

	<select name="attr_weapon4Type" class="weapon_type">
 	<option value="None" data-i18n="weapon-type-None">---</option>
         <option data-i18n="weapon-type-Slash" value="Slash">Slash</option>
         <option data-i18n="weapon-type-Pierce" value="Pierce">Pierce</option>
	 <option data-i18n="weapon-type-Blunt" value="Blunt">Blunt</option>
         </select>


	<select name="attr_weapon4Range" class="weapon_distance">
 	<option value="None" data-i18n="weapon-type-None">---</option>
         <option data-i18n="weapon-type-Melee" value="Melee">Melee</option>
         <option data-i18n="weapon-type-Ranged" value="Ranged">Ranged</option>
         </select>

	</div>

	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
	<div class="descHead"></div>
       <textarea spellcheck="false"  name="attr_weapon4Description" class="weaponDescriptionInput" data-i18n-placeholder="weapon-desc" placeholder="Weapon description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_weapon4Effect" class="weaponEffectInput" data-i18n-placeholder="weapon-effect" placeholder="Weapon effects."></textarea>
        </div>

	</div>
	<!-- desc end -->	

	</div>
<!-- Weapon4 Block END -->

</div>
<!-- !!EXTRA!! Weapons end -->

<!-- Augmentation block -->
	<div class="augmentBlock">

<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" name="act_shareAugment" data-i18n-title="share" title="Share info"></button>

	<!-- Augment header -->
	<div class="sectionHeader augment rowContainer" id="augment-name">
	<input type="text" class="outfitRank" name="attr_augmentRank" placeholder="0" data-i18n-title="rank" title="Rank">
	<input type="text" class="transpInput contentName" name="attr_augmentName" data-i18n-placeholder="augment-name" placeholder="Augmentation name">

        <select name="attr_augmentType" class="darkInput contentName topRight">
	<option data-i18n="augment-type-None" value="None">---</option>
	<option data-i18n="augment-type-Tattoos" value="Tattoos">Tattoos</option>
	<option data-i18n="augment-type-Drugs" value="Drugs">Serums/Drugs</option>
	<option data-i18n="augment-type-Surgery" value="Surgery">Surgery</option>
	<option data-i18n="augment-type-Prosthesis" value="Prosthesis">Prosthesis</option>
	<option data-i18n="augment-type-FullProsthesis" value="FullProsthesis">Full Prosthesis</option>
	<option data-i18n="augment-type-Other" value="Other">Other</option>
        </select>

	</div>

	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_augmentDescription" class="augmentDescriptionInput" data-i18n-placeholder="augment-desc" placeholder="Augment description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_augmentEffect" class="weaponEffectInput" data-i18n-placeholder="augment-effect" placeholder="Augment effects."></textarea>
        </div>

	</div>
	<!-- desc end -->	

	</div>

<!-- Augmentation block - END -->

                </div>
<!-- Weapon section END -->

<!-- Outfit / Other equipment section -->
<div class="rowContainer" style="max-width: 600px; flex-wrap: wrap;">
<div class="weaponContainer">

<!-- Outfit block -->
<div class="contentContainer">
<div>

<input type="checkbox" class="hide-toggle-rev" name="attr_settingHideShare" value="true">
<div class="hide-item-rev" style="position: absolute; bottom: 0px; right: 0px;">

<button type="action" class="darkInput shareButton" name="act_shareOutfit" data-i18n-title="share" title="Share info"></button>

<button type="action" class="darkInput editButton" id="edit_outfit" name="act_editMode" data-i18n-title="edit" title="Edit"></button>
</div>

<!-- Outfit Burn/Bleed Resist -->
<input type="checkbox" class="hide-toggle" name="attr_settingEditMode" value="true">
<div class="editCover hide-item">

<div class="rowContainer" style="width:40%;">
<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_burnResist" value="0" hidden="true">

        <div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon burn"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon burn-limbus"></div>
	</div>
	</div>

        <div class="status_effect_value"><input type="number" class="ailmentNum" name="attr_burnResist" value="0"></div>
</div>

<div class="rowContainer">
<input type="checkbox" class="fade-toggle" name="attr_bleedResist" value="0" hidden="true">

        <div class="ailmentIconSelector rowContainer centerFlex">
	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_settingLimbusStyle"><div class="hide-item-rev skillIcon bleed"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_settingLimbusStyle"><div class="type-image skillIcon bleed-limbus"></div>
	</div>
	</div>

       <div class="status_effect_value"><input type="number"  class="ailmentNum" name="attr_bleedResist" value="0"></div>
	</div>

	</div>
</div>

<!-- Outfit Burn/Bleed Resist -->


<!-- Outfit header -->
	<div class="sectionHeader outfit" id="outfit-name">

	<input type="text" class="outfitRank" name="attr_outfitRank" placeholder="0" data-i18n-title="rank" title="Rank">
		<input type="text" class="transpInput contentName" name="attr_outfitName" data-i18n-placeholder="outfit-name" placeholder="Outfit">

	<!-- Outfit dice roll block -->
	<div class="rowContainer combatDice">
	
	<div class="evadeIcon typeIcon defend">
	</div>


		<div class="dicerollBlock">
		<input type="text" class="diceNum" name="attr_defDice1" value="1">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_defDice2" value="6">
		<div class="plainText">+</div>
		<input type="text" name="attr_defDice3" value="0">
		</div>

	<div>
              
<button type="action" class="NDice" id="autoroll_def_raw" name="act_rollCombat"></button>

	</div>
	<!-- dice roll end -->

	</div></div>
	<!-- header end -->

	<div class="weaponRangeBox outfit"> 

	<div class="rowContainer combatDice evadeAdjust">

	<div class="evadeIcon typeIcon evade">
	</div>


		<div class="dicerollBlock">
		<input type="text" class="diceNum" name="attr_evdDice1" value="1">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_evdDice2" value="6">
		<div class="plainText">+</div>
		<input type="text" name="attr_evdDice3" value="0">
		</div>

	<div>
              
<button type="action" class="NDice" id="autoroll_evd_raw" name="act_rollCombat"></button>

	</div>

	</div>
	</div>


	<!-- Description/Effect section -->

<div class="rowContainer">

<div class="rowContainer">
	<textarea spellcheck="false"  name="attr_outfitEffect" class="weaponEffectInput" data-i18n-placeholder="outfit-effect" placeholder="Outfit effects."></textarea>

	</div>

<!-- Outfit resistance table -->
	<div class="rowContainer resistanceChart" style="margin-top: 25px">
		<div class="rowContainer centerFlex">

<div id="outfit_res_slash">
		<div class="resIconLeft">
		<div class="resistIcon slashNormal"></div>
		</div>

	</div>

                            <select name="attr_outfitImmune1" id="outfitImmune1" class="outfitResistVal dmg">
				<option data-i18n="outfit-res-none" value="" selected disabled hidden>---</option>
                                <option data-i18n="outfit-res-fatal" value="2">[x2]　　　Fatal</option>
                                <option data-i18n="outfit-res-weak" value="1.5">[x1.5]　　Weak</option>
                                <option data-i18n="outfit-res-normal" value="1">[x1]　　　Normal</option>
                                <option data-i18n="outfit-res-endured" value="0.5">[x0.5]　　Endured</option>
                                <option data-i18n="outfit-res-ineffective" value="0.25">[x0.25]　　Ineffective</option>
                                <option data-i18n="outfit-res-immune" value="0">[x0]　　　Immune</option>
                            </select>

                            <select name="attr_outfitImmune2" id="outfitImmune2" class="outfitResistVal stg">
				<option data-i18n="outfit-res-none" value="" selected disabled hidden>---</option>
                                <option data-i18n="outfit-res-fatal" value="2">[x2]　　　Fatal</option>
                                <option data-i18n="outfit-res-weak" value="1.5">[x1.5]　　Weak</option>
                                <option data-i18n="outfit-res-normal" value="1">[x1]　　　Normal</option>
                                <option data-i18n="outfit-res-endured" value="0.5">[x0.5]　　Endured</option>
                                <option data-i18n="outfit-res-ineffective" value="0.25">[x0.25]　　Ineffective</option>
                                <option data-i18n="outfit-res-immune" value="0">[x0]　　　Immune</option>
                            </select>

<div id="outfit_res_slashSTG">
		<div class="resIconRight">
		<div class="resistIcon slashNormalSTG"></div>
		</div>

	</div>


		</div>

		<div class="rowContainer centerFlex">


<div id="outfit_res_pierce">
		<div class="resIconLeft">
		<div class="resistIcon pierceNormal"></div>
		</div>


	</div>


                            <select name="attr_outfitImmune3" id="outfitImmune3" class="outfitResistVal dmg">
				<option data-i18n="outfit-res-none" value="" selected disabled hidden>---</option>
                                <option data-i18n="outfit-res-fatal" value="2">[x2]　　　Fatal</option>
                                <option data-i18n="outfit-res-weak" value="1.5">[x1.5]　　Weak</option>
                                <option data-i18n="outfit-res-normal" value="1">[x1]　　　Normal</option>
                                <option data-i18n="outfit-res-endured" value="0.5">[x0.5]　　Endured</option>
                                <option data-i18n="outfit-res-ineffective" value="0.25">[x0.25]　　Ineffective</option>
                                <option data-i18n="outfit-res-immune" value="0">[x0]　　　Immune</option>
                            </select>

                            <select name="attr_outfitImmune4" id="outfitImmune4" class="outfitResistVal stg">
				<option data-i18n="outfit-res-none" value="" selected disabled hidden>---</option>
                                <option data-i18n="outfit-res-fatal" value="2">[x2]　　　Fatal</option>
                                <option data-i18n="outfit-res-weak" value="1.5">[x1.5]　　Weak</option>
                                <option data-i18n="outfit-res-normal" value="1">[x1]　　　Normal</option>
                                <option data-i18n="outfit-res-endured" value="0.5">[x0.5]　　Endured</option>
                                <option data-i18n="outfit-res-ineffective" value="0.25">[x0.25]　　Ineffective</option>
                                <option data-i18n="outfit-res-immune" value="0">[x0]　　　Immune</option>
                            </select>


<div id="outfit_res_pierceSTG">
		<div class="resIconRight">
		<div class="resistIcon pierceNormalSTG"></div>
		</div>


	</div>



		</div>

		<div class="rowContainer centerFlex">


<div id="outfit_res_blunt">
		<div class="resIconLeft">
		<div class="resistIcon bluntNormal"></div>
		</div>


	</div>


                            <select name="attr_outfitImmune5" id="outfitImmune5" class="outfitResistVal dmg">
				<option data-i18n="outfit-res-none" value="" selected disabled hidden>---</option>
                                <option data-i18n="outfit-res-fatal" value="2">[x2]　　　Fatal</option>
                                <option data-i18n="outfit-res-weak" value="1.5">[x1.5]　　Weak</option>
                                <option data-i18n="outfit-res-normal" value="1">[x1]　　　Normal</option>
                                <option data-i18n="outfit-res-endured" value="0.5">[x0.5]　　Endured</option>
                                <option data-i18n="outfit-res-ineffective" value="0.25">[x0.25]　　Ineffective</option>
                                <option data-i18n="outfit-res-immune" value="0">[x0]　　　Immune</option>
                            </select>

                            <select name="attr_outfitImmune6" id="outfitImmune6" class="outfitResistVal stg">
				<option data-i18n="outfit-res-none" value="" selected disabled hidden>---</option>
                                <option data-i18n="outfit-res-fatal" value="2">[x2]　　　Fatal</option>
                                <option data-i18n="outfit-res-weak" value="1.5">[x1.5]　　Weak</option>
                                <option data-i18n="outfit-res-normal" value="1">[x1]　　　Normal</option>
                                <option data-i18n="outfit-res-endured" value="0.5">[x0.5]　　Endured</option>
                                <option data-i18n="outfit-res-ineffective" value="0.25">[x0.25]　　Ineffective</option>
                                <option data-i18n="outfit-res-immune" value="0">[x0]　　　Immune</option>
                            </select>

<div id="outfit_res_bluntSTG">
		<div class="resIconRight">
		<div class="resistIcon bluntNormalSTG"></div>
		</div>

	</div>


		</div>
</div>
<!-- Resistance chart end -->
</div>

<div class="outfitDescription"><textarea spellcheck="false"  name="attr_outfitDescription" class="outfitDescriptionInput" data-i18n-placeholder="outfit-desc" placeholder="Outfit description."></textarea></div> 


</div>

</div>





	<!-- desc end -->	

	</div>


<!-- Item section -->
<div class="weaponContainer">

	<!-- Tool1 block -->
	<div class="contentContainer half" style="margin-right: 7px;">

	<!-- header -->
	<div class="sectionHeader tool rowContainer">
	<input type="text" class="outfitRank" name="attr_tool1Rank" placeholder="0" data-i18n-title="rank" title="Rank">
	<input type="text" class="headerName transpInput" name="attr_tool1Name" data-i18n-placeholder="tool-name" placeholder="Tool name">

	<input type="checkbox" id="attr_tool1Portable" name="attr_tool1Portable" value="Portable"><label for="attr_tool1Portable" class="portableIcon" data-i18n-title="tool-portable" title="Portable"></label> 

	<input type="checkbox" id="attr_tool1Reusable" name="attr_tool1Reusable" value="Reusable"><label for="attr_tool1Reusable" class="reusableIcon" data-i18n-title="tool-reusable" title="Reusable"> 

<div class="rowContainer centerFlex" style="width: 30px; height: 30px;">   
<input type="text" class="transpInput" name="attr_tool1Uses" style="width: 100%; height: 100%; text-align: center;" value="1">
<div class="blocker"></div>  
</div>

</label>

	</div>
	<!-- header end -->
  
	<!-- Tool1 Edit-->
<input type="checkbox" class="hide-toggle" name="attr_settingEditMode" value="true">
<div class="hide-item editCover">

	<div class="settingStyle" style="margin-bottom: 3px;">
	<div class="settingStyle" style="width: 42px;"><b data-i18n="message-icon">Icon</b>:</div> 
	<input type="text" class="darkInput" list="iconlist" name="attr_tool1Icon" style="width: 143px;" data-i18n-placeholder="message-icon-placeholder" placeholder="Icon selection" value="Hand">
	</div>
	<div class="settingStyle">
	<div class="settingStyle" style="width: 42px;"><b data-i18n="message-uses">Uses</b>:	</div> 

	<input type="text" class="transpInput" style="width: 23px;" name="attr_tool1Uses" value="1"> / 
	<input type="number" class="darkInput" name="attr_tool1Uses_max" value="3" min="1">

	</div>

</div>

	<!-- Tool1 Edit end -->

<div>
<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_tool1" name="act_shareTool" data-i18n-title="share" title="Share info"></button>
<button type="action" class="darkInput editButton" id="edit_outfit" name="act_editMode" data-i18n-title="edit" title="Edit"></button>
</div>


	<!-- Description/Effect section -->

        <div class="toolDescription">
       <textarea spellcheck="false"  name="attr_tool1Description" class="toolDescriptionInput" data-i18n-placeholder="tool-desc" placeholder="Tool description."></textarea>
        </div>

        <div class="itemEffect">
	<textarea spellcheck="false"  name="attr_tool1Effect" class="weaponEffectInput" data-i18n-placeholder="tool-effect" placeholder="Tool effects."></textarea>
        </div>

	<!-- desc end -->	

	</div>
	<!-- Tool1 Block - end -->


	<!-- Tool2 block -->
	<div class="contentContainer half">

	<!-- header -->
	<div class="sectionHeader tool rowContainer">
	<input type="text" class="outfitRank" name="attr_tool2Rank" placeholder="0" data-i18n-title="rank" title="Rank">
	<input type="text" class="headerName transpInput" name="attr_tool2Name" data-i18n-placeholder="tool-name" placeholder="Tool name">

	<input type="checkbox" id="attr_tool2Portable" name="attr_tool2Portable" value="Portable"><label for="attr_tool2Portable" class="portableIcon" title="Portable" data-i18n-title="tool-portable"></label> 

	<input type="checkbox" id="attr_tool2Reusable" name="attr_tool2Reusable" value="Reusable"><label for="attr_tool2Reusable" class="reusableIcon" data-i18n-title="tool-reusable" title="Reusable"> 

<div class="rowContainer centerFlex" style="width: 30px; height: 30px;">   
<input type="text" class="transpInput" name="attr_tool2Uses" style="width: 100%; height: 100%; text-align: center;" value="1">
<div class="blocker"></div>  
</div>

</label>

	</div>
	<!-- header end -->
  
	<!-- Tool2 Edit-->
<input type="checkbox" class="hide-toggle" name="attr_settingEditMode" value="true">
<div class="hide-item editCover">

	<div class="settingStyle" style="margin-bottom: 3px;">
	<div class="settingStyle" style="width: 42px;"><b data-i18n="message-icon">Icon</b>:</div> 
	<input type="text" class="darkInput" list="iconlist" name="attr_tool2Icon" style="width: 143px;" data-i18n-placeholder="message-icon-placeholder" placeholder="Icon selection" value="Hand">
	</div>
	<div class="settingStyle">
	<div class="settingStyle" style="width: 42px;"><b data-i18n="message-uses">Uses</b>:	</div> 

	<input type="text" class="transpInput" style="width: 23px;" name="attr_tool2Uses" value="1"> / 
	<input type="number" class="darkInput" name="attr_tool2Uses_max" value="3" min="1">

	</div>

</div>

	<!-- Tool2 Edit end -->

<div>
<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_tool2" name="act_shareTool" data-i18n-title="share" title="Share info"></button>
<button type="action" class="darkInput editButton" id="edit_outfit" name="act_editMode" data-i18n-title="edit" title="Edit"></button>
</div>

	<!-- Description/Effect section -->
        <div class="toolDescription">
       <textarea spellcheck="false"  name="attr_tool2Description" class="toolDescriptionInput" data-i18n-placeholder="tool-desc" placeholder="Tool description."></textarea>
        </div>

        <div class="itemEffect">
	<textarea spellcheck="false"  name="attr_tool2Effect" class="weaponEffectInput"
data-i18n-placeholder="tool-effect" placeholder="Tool effects."></textarea>
        </div>

	<!-- desc end -->	

	</div>
	<!-- Tool2 Block - end -->

</div>
<!-- Tool Block END -->

<!-- !!EXTRA!! Tool section -->
<input type="checkbox" class="hide-toggle" name="attr_settingExtraEquip" value="true">
<div class="hide-item">

<div class="weaponContainer">

	<!-- Tool3 block -->
	<div class="contentContainer half" style="margin-right: 7px;">

	<!-- header -->
	<div class="sectionHeader tool rowContainer">
	<input type="text" class="outfitRank" name="attr_tool3Rank" placeholder="0" data-i18n-title="rank" title="Rank">
	<input type="text" class="headerName transpInput" name="attr_tool3Name" data-i18n-placeholder="tool-name" placeholder="Tool name">

	<input type="checkbox" id="attr_tool3Portable" name="attr_tool3Portable" value="Portable"><label for="attr_tool3Portable" class="portableIcon" title="Portable" data-i18n-title="tool-portable"></label> 

	<input type="checkbox" id="attr_tool3Reusable" name="attr_tool3Reusable" value="Reusable"><label for="attr_tool3Reusable" class="reusableIcon" data-i18n-title="tool-reusable" title="Reusable"> 

<div class="rowContainer centerFlex" style="width: 30px; height: 30px;">   
<input type="text" class="transpInput" name="attr_tool3Uses" style="width: 100%; height: 100%; text-align: center;" value="1">
<div class="blocker"></div>  
</div>

</label>

	</div>
	<!-- header end -->
  
	<!-- Tool3 Edit-->
<input type="checkbox" class="hide-toggle" name="attr_settingEditMode" value="true">
<div class="hide-item editCover">

	<div class="settingStyle" style="margin-bottom: 3px;">
	<div class="settingStyle" style="width: 42px;"><b data-i18n="message-icon">Icon</b>:</div> 
	<input type="text" class="darkInput" list="iconlist" name="attr_tool3Icon" style="width: 143px;" data-i18n-placeholder="message-icon-placeholder" placeholder="Icon selection" value="Hand">
	</div>
	<div class="settingStyle">
	<div class="settingStyle" style="width: 42px;"><b data-i18n="message-uses">Uses</b>:	</div> 

	<input type="text" class="transpInput" style="width: 23px;" name="attr_tool3Uses" value="1"> / 
	<input type="number" class="darkInput" name="attr_tool3Uses_max" value="3" min="1">

	</div>

</div>

	<!-- Tool3 Edit end -->

<div>
<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_tool3" name="act_shareTool" data-i18n-title="share" title="Share info"></button>
<button type="action" class="darkInput editButton" id="edit_outfit" name="act_editMode" data-i18n-title="edit" title="Edit"></button>
</div>




	<!-- Description/Effect section -->

        <div class="toolDescription">
       <textarea spellcheck="false"  name="attr_tool3Description" class="toolDescriptionInput" data-i18n-placeholder="tool-desc" placeholder="Tool description."></textarea>
        </div>

        <div class="itemEffect">
	<textarea spellcheck="false"  name="attr_tool3Effect" class="weaponEffectInput" data-i18n-placeholder="tool-effect" placeholder="Tool effects."></textarea>
        </div>

	<!-- desc end -->	

	</div>
	<!-- Tool3 Block - end -->


	<!-- Tool4 block -->
	<div class="contentContainer half">

	<!-- header -->
	<div class="sectionHeader tool rowContainer">
	<input type="text" class="outfitRank" name="attr_tool4Rank" placeholder="0" data-i18n-title="rank" title="Rank">
	<input type="text" class="headerName transpInput" name="attr_tool4Name" data-i18n-placeholder="tool-name" placeholder="Tool name">

	<input type="checkbox" id="attr_tool4Portable" name="attr_tool4Portable" value="Portable"><label for="attr_tool4Portable" class="portableIcon" title="Portable" data-i18n-title="tool-portable"></label> 

	<input type="checkbox" id="attr_tool4Reusable" name="attr_tool4Reusable" value="Reusable"><label for="attr_tool4Reusable" class="reusableIcon" data-i18n-title="tool-reusable" title="Reusable"> 

<div class="rowContainer centerFlex" style="width: 30px; height: 30px;">   
<input type="text" class="transpInput" name="attr_tool4Uses" style="width: 100%; height: 100%; text-align: center;" value="1">
<div class="blocker"></div>  
</div>

</label>

	</div>
	<!-- header end -->
  
	<!-- Tool4 Edit-->
<input type="checkbox" class="hide-toggle" name="attr_settingEditMode" value="true">
<div class="hide-item editCover">

	<div class="settingStyle" style="margin-bottom: 3px;">
	<div class="settingStyle" style="width: 42px;"><b data-i18n="message-icon">Icon</b>:</div> 
	<input type="text" class="darkInput" list="iconlist" name="attr_tool4Icon" style="width: 143px;" data-i18n-placeholder="message-icon-placeholder" placeholder="Icon selection" value="Hand">
	</div>
	<div class="settingStyle">
	<div class="settingStyle" style="width: 42px;"><b data-i18n="message-uses">Uses</b>:	</div> 

	<input type="text" class="transpInput" style="width: 23px;" name="attr_tool4Uses" value="1"> / 
	<input type="number" class="darkInput" name="attr_tool4Uses_max" value="3" min="1">

	</div>

</div>

	<!-- Tool4 Edit end -->

<div>
<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_tool4" name="act_shareTool" data-i18n-title="share" title="Share info"></button>
<button type="action" class="darkInput editButton" id="edit_outfit" name="act_editMode" data-i18n-title="edit" title="Edit"></button>
</div>


	<!-- Description/Effect section -->
        <div class="toolDescription">
       <textarea spellcheck="false"  name="attr_tool4Description" class="toolDescriptionInput" data-i18n-placeholder="tool-desc" placeholder="Tool description."></textarea>
        </div>

        <div class="itemEffect">
	<textarea spellcheck="false"  name="attr_tool4Effect" class="weaponEffectInput" data-i18n-placeholder="tool-effect" placeholder="Tool effects."></textarea>
        </div>

	<!-- desc end -->	

	</div>
	<!-- Tool4 Block - end -->
</div>
</div>
<!-- !!EXTRA!! Item Block END -->


</div>

</div>

<!-- ??? -->

<!-- Special Items section -->
<input type="checkbox" class="hide-toggle-rev" name="attr_settingHideSpecial" value="true">
<div class="hide-item-rev rowContainer">
<div class="contentBlock">

	<!-- Special Item1 block -->
	<div class="specialBlock">

<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
<button type="action" class="darkInput shareButton" id="share_special1" name="act_shareSpecial" data-i18n-title="share" title="Share info"></button>

	<!-- Header -->
	<div class="sectionHeader special" id="special1Name">
		
	<input type="text" type="text" class="outfitRank" name="attr_special1Rank" placeholder="0" data-i18n-title="rank" title="Rank">

	<input type="text" class="transpInput contentName" name="attr_special1Name" data-i18n-placeholder="special-name" placeholder="Special item name">

		<select name="attr_special1Risk" class="darkInput contentName topRight" data-i18n-title="special-risk-text" title="Risk Level">
			<option data-i18n="special-risk-none" value="none">---</option>
			<option data-i18n="special-risk-0" value="0">Canard</option>
			<option data-i18n="special-risk-1" value="1">Urban Myth</option>
			<option data-i18n="special-risk-2" value="2">Urban Legend</option>
			<option data-i18n="special-risk-3" value="3">Urban Plague</option>
			<option data-i18n="special-risk-4" value="4">Urban Nightmare</option>
			<option data-i18n="special-risk-5" value="5">Star of the City</option>
			<option data-i18n="special-risk-6" value="6">Impuritas Civitatis</option>
		</select>

	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

	<div class="special" style="height: 110px;"> 

	<div class="specialColumn">
	<span data-i18n="special-range-text">Effect Range</span>
 		<select name="attr_special1Range" class="darkInput" id="special1Range" style="text-align: center;">
                          <option data-i18n="special-range-none" value="none">---</option>
                          <option data-i18n="special-range-0" value="0">One or two people</option>
                          <option data-i18n="special-range-1" value="1">Street</option>
                          <option data-i18n="special-range-2" value="2">Neighborhood</option>
                          <option data-i18n="special-range-3" value="3">Residence Area</option>
                          <option data-i18n="special-range-4" value="4">Nest</option>
                          <option data-i18n="special-range-5" value="5">Multiple Nests</option>
                          <option data-i18n="special-range-6" value="6">City</option>
               	</select>
	</div>

	<div class="specialColumn">
	<span data-i18n="special-duration-text">Duration</span>
		<select name="attr_special1Duration" class="darkInput" id="special1_duration" style="text-align: center;">
			<option data-i18n="special-duration-none" value="none">---</option>
			<option data-i18n="special-duration-0" value="0">A moment</option>
			<option data-i18n="special-duration-1" value="1">Seconds</option>
			<option data-i18n="special-duration-2" value="2">Minutes</option>
			<option data-i18n="special-duration-3" value="3">Hours</option>
			<option data-i18n="special-duration-4" value="4">Days</option>
			<option data-i18n="special-duration-5" value="5">Weeks</option>
			<option data-i18n="special-duration-6" value="6">Months</option>
              	</select>
	</div>

	</div>

       <textarea spellcheck="false"  name="attr_special1Description" class="specialDescriptionInput" data-i18n-placeholder="special-desc" placeholder="Special item description/effects."></textarea>

	</div>
	<!-- desc end -->	

	</div>
<!-- Special Item 1 Block END -->


<!-- Special Item2 block -->
	<div class="specialBlock">

<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
<button type="action" class="darkInput shareButton" id="share_special2" name="act_shareSpecial" data-i18n-title="share" title="Share info"></button>

	<!-- Header -->
	<div class="sectionHeader special" id="special2Name">
		
	<input type="text" type="text" class="outfitRank" name="attr_special2Rank" placeholder="0" data-i18n-title="rank" title="Rank">

	<input type="text" class="transpInput contentName" name="attr_special2Name" data-i18n-placeholder="special-name" placeholder="Special item name">

	<select name="attr_special2Risk" class="darkInput contentName topRight" data-i18n-title="special-risk-text" title="Risk Level">
			<option data-i18n="special-risk-none" value="none">---</option>
			<option data-i18n="special-risk-0" value="0">Canard</option>
			<option data-i18n="special-risk-1" value="1">Urban Myth</option>
			<option data-i18n="special-risk-2" value="2">Urban Legend</option>
			<option data-i18n="special-risk-3" value="3">Urban Plague</option>
			<option data-i18n="special-risk-4" value="4">Urban Nightmare</option>
			<option data-i18n="special-risk-5" value="5">Star of the City</option>
			<option data-i18n="special-risk-6" value="6">Impuritas Civitatis</option>
		</select>

	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

	<div class="special" style="height: 110px;"> 

	<div class="specialColumn">
	<span data-i18n="special-range-text">Effect Range</span>
 		<select name="attr_special2Range" class="darkInput" id="special2Range" style="text-align: center;">
                          <option data-i18n="special-range-none" value="none">---</option>
                          <option data-i18n="special-range-0" value="0">One or two people</option>
                          <option data-i18n="special-range-1" value="1">Street</option>
                          <option data-i18n="special-range-2" value="2">Neighborhood</option>
                          <option data-i18n="special-range-3" value="3">Residence Area</option>
                          <option data-i18n="special-range-4" value="4">Nest</option>
                          <option data-i18n="special-range-5" value="5">Multiple Nests</option>
                          <option data-i18n="special-range-6" value="6">City</option>
               	</select>
	</div>

	<div class="specialColumn">
	<span data-i18n="special-duration-text">Duration</span>
		<select name="attr_special2Duration" class="darkInput" id="special2_duration" style="text-align: center;">
			<option data-i18n="special-duration-none" value="none">---</option>
			<option data-i18n="special-duration-0" value="0">A moment</option>
			<option data-i18n="special-duration-1" value="1">Seconds</option>
			<option data-i18n="special-duration-2" value="2">Minutes</option>
			<option data-i18n="special-duration-3" value="3">Hours</option>
			<option data-i18n="special-duration-4" value="4">Days</option>
			<option data-i18n="special-duration-5" value="5">Weeks</option>
			<option data-i18n="special-duration-6" value="6">Months</option>
              	</select>
	</div>

	</div>

       <textarea spellcheck="false"  name="attr_special2Description" class="specialDescriptionInput" data-i18n-placeholder="special-desc" placeholder="Special item description/effects."></textarea>

	</div>
	<!-- desc end -->	

	</div>
<!-- Special Item2 Block END -->

</div>

</div>
</div>
</div>
</div>
<!-- Equipment END -->

<!-- Skill section -->

	<div class="sheet-body sheet-skills darkBG">
        <div class="contentBlock" id="skillSection">

<!-- EGO Skills Column -->
            <div class="weaponContainer">

	<!-- EGO Skill1 block -->
	<div class="skillBlock">

	<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_egoSkill1" name="act_shareSkill" data-i18n-title="share" title="Share info"></button>


	<!-- header -->
	<div class="sectionHeader skillE rowContainer">

	<input type="text" class="transpInput skillName" name="attr_egoSkill1Name" data-i18n-placeholder="skill-ego-name" placeholder="Mystery skill name">

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill1Type"><div class="type-image skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill1Type"><div class="type-image skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill1Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill1Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill1Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill1Type"><div class="type-image skillIcon skillMass"></div>
		</div>

<input class="skillRank" type="text" name="attr_egoSkill1Rank" value="0" placeholder="0" data-i18n-title="rank" title="Rank">

	</div>

	<div class="rowContainer centerFlex skillE"> 

				<select name="attr_egoSkill1Type" class="whiteInput skillType" id="EGOskill1-type">
				    <option data-i18n="skill-type-None" value="None" selected>---</option>
                                    <option data-i18n="skill-type-Attack" value="Attack">Attack</option>
                                    <option data-i18n="skill-type-Defend" value="Defend">Defend</option>
                                    <option data-i18n="skill-type-Evade" value="Evade">Evade</option>
                                    <option data-i18n="skill-type-Action" value="Action">Action</option>
                                    <option data-i18n="skill-type-Mass" value="Mass">Mass</option>
                                </select>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill">
		<input type="text" class="diceNum" name="attr_egoSkill1Dice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_egoSkill1Dice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_egoSkill1Dice3" placeholder="0" value="0">
		</div>
	

	<div class="lightCost">
				<input class="outfitRank" type="text" name="attr_egoskill1Light" value="1" data-i18n-title="skill-light-cost" title="Light Cost">
	</div>

	</div>


	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_egoSkill1Description" class="augmentDescriptionInput" data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_egoSkill1Effect" class="weaponEffectInput" data-i18n-placeholder="skill-effect" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div>

	</div>
	<!-- desc end -->
	</div>
<!-- EGO Skill1 block - END -->

<!-- EGO Skill2 block -->
	<div class="skillBlock">

	<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_egoSkill2" name="act_shareSkill" data-i18n-title="share" title="Share info"></button>


	<!-- header -->
	<div class="sectionHeader skillE rowContainer">

	<input type="text" class="transpInput skillName" name="attr_egoSkill2Name" data-i18n-placeholder="skill-ego-name" placeholder="Mystery skill name">

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill2Type"><div class="type-image skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill2Type"><div class="type-image skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill2Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill2Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill2Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill2Type"><div class="type-image skillIcon skillMass"></div>
		</div>

<input class="skillRank" type="text" name="attr_egoSkill2Rank" value="0" placeholder="0" data-i18n-title="rank" title="Rank">

	</div>

	<div class="rowContainer centerFlex skillE"> 

				<select name="attr_egoSkill2Type" class="whiteInput skillType" id="egoSkill2-type">
				    <option data-i18n="skill-type-None" value="None" selected>---</option>
                                    <option data-i18n="skill-type-Attack" value="Attack">Attack</option>
                                    <option data-i18n="skill-type-Defend" value="Defend">Defend</option>
                                    <option data-i18n="skill-type-Evade" value="Evade">Evade</option>
                                    <option data-i18n="skill-type-Action" value="Action">Action</option>
                                    <option data-i18n="skill-type-Mass" value="Mass">Mass</option>
                                </select>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill">
		<input type="text" class="diceNum" name="attr_egoSkill2Dice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_egoSkill2Dice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_egoSkill2Dice3" placeholder="0" value="0">
		</div>
	

	<div class="lightCost">
				<input class="outfitRank" type="text" name="attr_egoskill2Light" value="1" data-i18n-title="skill-light-cost" title="Light Cost">
	</div>

	</div>


	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_egoSkill2Description" class="augmentDescriptionInput"data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_egoSkill2Effect" class="weaponEffectInput" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div>

	</div>
	<!-- desc end -->
	</div>
<!-- EGO Skill2 block - END -->

<!-- EGO Skill3 block -->
	<div class="skillBlock">

	<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_egoSkill3" name="act_shareSkill" data-i18n-title="share" title="Share info"></button>


	<!-- header -->
	<div class="sectionHeader skillE rowContainer">

	<input type="text" class="transpInput skillName" name="attr_egoSkill3Name" data-i18n-placeholder="skill-ego-name" placeholder="Mystery skill name">

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill3Type"><div class="type-image skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill3Type"><div class="type-image skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill3Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill3Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill3Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill3Type"><div class="type-image skillIcon skillMass"></div>
		</div>

<input class="skillRank" type="text" name="attr_egoSkill3Rank" value="0" placeholder="0" data-i18n-title="rank" title="Rank">

	</div>

	<div class="rowContainer centerFlex skillE"> 

				<select name="attr_egoSkill3Type" class="whiteInput skillType" id="egoSkill3-type">
				    <option data-i18n="skill-type-None" value="None" selected>---</option>
                                    <option data-i18n="skill-type-Attack" value="Attack">Attack</option>
                                    <option data-i18n="skill-type-Defend" value="Defend">Defend</option>
                                    <option data-i18n="skill-type-Evade" value="Evade">Evade</option>
                                    <option data-i18n="skill-type-Action" value="Action">Action</option>
                                    <option data-i18n="skill-type-Mass" value="Mass">Mass</option>
                                </select>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill">
		<input type="text" class="diceNum" name="attr_egoSkill3Dice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_egoSkill3Dice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_egoSkill3Dice3" placeholder="0" value="0">
		</div>
	

	<div class="lightCost">
				<input class="outfitRank" type="text" name="attr_egoskill3Light" value="1" data-i18n-title="skill-light-cost" title="Light Cost">
	</div>

	</div>


	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_egoSkill3Description" class="augmentDescriptionInput"data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_egoSkill3Effect" class="weaponEffectInput" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div>

	</div>
	<!-- desc end -->
	</div>
<!-- EGO Skill3 block - END -->

<!-- EGO Skill4 block -->
	<div class="skillBlock">

	<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_egoSkill4" name="act_shareSkill" data-i18n-title="share" title="Share info"></button>


	<!-- header -->
	<div class="sectionHeader skillE rowContainer">

	<input type="text" class="transpInput skillName" name="attr_egoSkill4Name" data-i18n-placeholder="skill-ego-name" placeholder="Mystery skill name">

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill4Type"><div class="type-image skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill4Type"><div class="type-image skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill4Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill4Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill4Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill4Type"><div class="type-image skillIcon skillMass"></div>
		</div>

<input class="skillRank" type="text" name="attr_egoSkill4Rank" value="0" placeholder="0" data-i18n-title="rank" title="Rank">

	</div>

	<div class="rowContainer centerFlex skillE"> 

				<select name="attr_egoSkill4Type" class="whiteInput skillType" id="egoSkill4-type">
				    <option data-i18n="skill-type-None" value="None" selected>---</option>
                                    <option data-i18n="skill-type-Attack" value="Attack">Attack</option>
                                    <option data-i18n="skill-type-Defend" value="Defend">Defend</option>
                                    <option data-i18n="skill-type-Evade" value="Evade">Evade</option>
                                    <option data-i18n="skill-type-Action" value="Action">Action</option>
                                    <option data-i18n="skill-type-Mass" value="Mass">Mass</option>
                                </select>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill">
		<input type="text" class="diceNum" name="attr_egoSkill4Dice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_egoSkill4Dice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_egoSkill4Dice3" placeholder="0" value="0">
		</div>
	

	<div class="lightCost">
				<input class="outfitRank" type="text" name="attr_egoskill4Light" value="1" data-i18n-title="skill-light-cost" title="Light Cost">
	</div>

	</div>


	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_egoSkill4Description" class="augmentDescriptionInput"data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_egoSkill4Effect" class="weaponEffectInput" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div>

	</div>
	<!-- desc end -->
	</div>
<!-- EGO Skill4 block - END -->


<!-- !!EXTRA!! EGO skills -->
<input type="checkbox" class="hide-toggle" name="attr_settingExtraEquip" value="true">
<div class="hide-item" style="width: 100%;">

<!-- EGO Skill5 block -->
	<div class="skillBlock">

	<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_egoSkill5" name="act_shareSkill" data-i18n-title="share" title="Share info"></button>


	<!-- header -->
	<div class="sectionHeader skillE rowContainer">

	<input type="text" class="transpInput skillName" name="attr_egoSkill5Name" data-i18n-placeholder="skill-ego-name" placeholder="Mystery skill name">

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill5Type"><div class="type-image skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill5Type"><div class="type-image skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill5Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill5Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill5Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill5Type"><div class="type-image skillIcon skillMass"></div>
		</div>

<input class="skillRank" type="text" name="attr_egoSkill5Rank" value="0" placeholder="0" data-i18n-title="rank" title="Rank">

	</div>

	<div class="rowContainer centerFlex skillE"> 

				<select name="attr_egoSkill5Type" class="whiteInput skillType" id="egoSkill5-type">
				    <option data-i18n="skill-type-None" value="None" selected>---</option>
                                    <option data-i18n="skill-type-Attack" value="Attack">Attack</option>
                                    <option data-i18n="skill-type-Defend" value="Defend">Defend</option>
                                    <option data-i18n="skill-type-Evade" value="Evade">Evade</option>
                                    <option data-i18n="skill-type-Action" value="Action">Action</option>
                                    <option data-i18n="skill-type-Mass" value="Mass">Mass</option>
                                </select>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill">
		<input type="text" class="diceNum" name="attr_egoSkill5Dice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_egoSkill5Dice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_egoSkill5Dice3" placeholder="0" value="0">
		</div>
	

	<div class="lightCost">
				<input class="outfitRank" type="text" name="attr_egoskill5Light" value="1" data-i18n-title="skill-light-cost" title="Light Cost">
	</div>

	</div>


	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_egoSkill5Description" class="augmentDescriptionInput"data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_egoSkill5Effect" class="weaponEffectInput" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div>

	</div>
	<!-- desc end -->
	</div>
<!-- EGO Skill5 block - END -->

<!-- EGO Skill6 block -->
	<div class="skillBlock">

	<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_egoSkill6" name="act_shareSkill" data-i18n-title="share" title="Share info"></button>


	<!-- header -->
	<div class="sectionHeader skillE rowContainer">

	<input type="text" class="transpInput skillName" name="attr_egoSkill6Name" data-i18n-placeholder="skill-ego-name" placeholder="Mystery skill name">

<div class="iconHolder egoSkills">
		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_egoSkill6Type"><div class="type-image skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_egoSkill6Type"><div class="type-image skillIcon skillAtt"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_egoSkill6Type"><div class="type-image skillIcon skillDef"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_egoSkill6Type"><div class="type-image skillIcon skillEvd"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_egoSkill6Type"><div class="type-image skillIcon skillAct"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_egoSkill6Type"><div class="type-image skillIcon skillMass"></div>
		</div>

<input class="skillRank" type="text" name="attr_egoSkill6Rank" value="0" placeholder="0" data-i18n-title="rank" title="Rank">

	</div>

	<div class="rowContainer centerFlex skillE"> 

				<select name="attr_egoSkill6Type" class="whiteInput skillType" id="egoSkill6-type">
				    <option data-i18n="skill-type-None" value="None" selected>---</option>
                                    <option data-i18n="skill-type-Attack" value="Attack">Attack</option>
                                    <option data-i18n="skill-type-Defend" value="Defend">Defend</option>
                                    <option data-i18n="skill-type-Evade" value="Evade">Evade</option>
                                    <option data-i18n="skill-type-Action" value="Action">Action</option>
                                    <option data-i18n="skill-type-Mass" value="Mass">Mass</option>
                                </select>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill">
		<input type="text" class="diceNum" name="attr_egoSkill6Dice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_egoSkill6Dice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_egoSkill6Dice3" placeholder="0" value="0">
		</div>
	

	<div class="lightCost">
				<input class="outfitRank" type="text" name="attr_egoskill6Light" value="1" data-i18n-title="skill-light-cost" title="Light Cost">
	</div>

	</div>


	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_egoSkill6Description" class="augmentDescriptionInput"data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_egoSkill6Effect" class="weaponEffectInput" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div>

	</div>
	<!-- desc end -->
	</div>
<!-- EGO Skill6 block - END -->


</div>


<!-- !!EXTRA!! EGO skills - END -->

</div> 
<!-- EGO Skills Column END -->


<!-- Regular Skills column -->
            <div class="weaponContainer">

	<!-- Skill1 block -->
	<div class="skillBlock">
<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_skill1" name="act_shareSkill" data-i18n-title="share" title="Share info"></button>

	<!-- header -->
	<div class="sectionHeader skillN rowContainer" style="position: relative;">

	<input type="text" class="transpInput skillName" name="attr_skill1Name" data-i18n-placeholder="skill-name" placeholder="Skill name">


<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill1Type"><div class="type-image skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill1Type"><div class="type-image skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill1Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill1Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill1Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill1Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

<input class="skillRank" type="text" name="attr_skill1Rank" value="0" placeholder="0" data-i18n-title="rank" title="Rank">


	</div>

	<div class="rowContainer centerFlex skillN"> 

				<select name="attr_skill1Type" class="whiteInput skillType">
				    <option data-i18n="skill-type-None" value="None" selected>---</option>
                                    <option data-i18n="skill-type-Attack" value="Attack">Attack</option>
                                    <option data-i18n="skill-type-Defend" value="Defend">Defend</option>
                                    <option data-i18n="skill-type-Evade" value="Evade">Evade</option>
                                    <option data-i18n="skill-type-Action" value="Action">Action</option>
                                    <option data-i18n="skill-type-Mass" value="Mass">Mass</option>
                                </select>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill">
		<input type="text" class="diceNum" name="attr_skill1Dice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_skill1Dice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_skill1Dice3" placeholder="0" value="0">
		</div>
	

	<div class="lightCost">
				<input class="outfitRank" type="text" name="attr_skill1Light" value="1" data-i18n-title="skill-light-cost" title="Light Cost">
	</div>

	</div>


	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_skill1Description" class="augmentDescriptionInput"data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_skill1Effect" class="weaponEffectInput" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div>

	</div>
	<!-- desc end -->
	</div>
<!-- Skill1 block - END -->

	<!-- Skill2 block -->
	<div class="skillBlock">
<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_skill2" name="act_shareSkill" data-i18n-title="share" title="Share info"></button>

	<!-- header -->
	<div class="sectionHeader skillN rowContainer" style="position: relative;">

	<input type="text" class="transpInput skillName" name="attr_skill2Name" data-i18n-placeholder="skill-name" placeholder="Skill name">


<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill2Type"><div class="type-image skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill2Type"><div class="type-image skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill2Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill2Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill2Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill2Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

<input class="skillRank" type="text" name="attr_skill2Rank" value="0" placeholder="0" data-i18n-title="rank" title="Rank">


	</div>

	<div class="rowContainer centerFlex skillN"> 

				<select name="attr_skill2Type" class="whiteInput skillType">
				    <option data-i18n="skill-type-None" value="None" selected>---</option>
                                    <option data-i18n="skill-type-Attack" value="Attack">Attack</option>
                                    <option data-i18n="skill-type-Defend" value="Defend">Defend</option>
                                    <option data-i18n="skill-type-Evade" value="Evade">Evade</option>
                                    <option data-i18n="skill-type-Action" value="Action">Action</option>
                                    <option data-i18n="skill-type-Mass" value="Mass">Mass</option>
                                </select>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill">
		<input type="text" class="diceNum" name="attr_skill2Dice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_skill2Dice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_skill2Dice3" placeholder="0" value="0">
		</div>
	

	<div class="lightCost">
				<input class="outfitRank" type="text" name="attr_skill2Light" value="1" data-i18n-title="skill-light-cost" title="Light Cost">
	</div>

	</div>


	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_skill2Description" class="augmentDescriptionInput"data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_skill2Effect" class="weaponEffectInput" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div>

	</div>
	<!-- desc end -->
	</div>
<!-- Skill2 block - END -->

<!-- Skill3 block -->
	<div class="skillBlock">
<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_skill3" name="act_shareSkill" data-i18n-title="share" title="Share info"></button>

	<!-- header -->
	<div class="sectionHeader skillN rowContainer" style="position: relative;">

	<input type="text" class="transpInput skillName" name="attr_skill3Name" data-i18n-placeholder="skill-name" placeholder="Skill name">


<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill3Type"><div class="type-image skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill3Type"><div class="type-image skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill3Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill3Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill3Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill3Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

<input class="skillRank" type="text" name="attr_skill3Rank" value="0" placeholder="0" data-i18n-title="rank" title="Rank">


	</div>

	<div class="rowContainer centerFlex skillN"> 

				<select name="attr_skill3Type" class="whiteInput skillType">
				    <option data-i18n="skill-type-None" value="None" selected>---</option>
                                    <option data-i18n="skill-type-Attack" value="Attack">Attack</option>
                                    <option data-i18n="skill-type-Defend" value="Defend">Defend</option>
                                    <option data-i18n="skill-type-Evade" value="Evade">Evade</option>
                                    <option data-i18n="skill-type-Action" value="Action">Action</option>
                                    <option data-i18n="skill-type-Mass" value="Mass">Mass</option>
                                </select>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill">
		<input type="text" class="diceNum" name="attr_skill3Dice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_skill3Dice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_skill3Dice3" placeholder="0" value="0">
		</div>
	

	<div class="lightCost">
				<input class="outfitRank" type="text" name="attr_skill3Light" value="1" data-i18n-title="skill-light-cost" title="Light Cost">
	</div>

	</div>


	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_skill3Description" class="augmentDescriptionInput"data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_skill3Effect" class="weaponEffectInput" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div>

	</div>
	<!-- desc end -->
	</div>
<!-- Skill3 block - END -->

<!-- Skill4 block -->
	<div class="skillBlock">
<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_skill4" name="act_shareSkill" data-i18n-title="share" title="Share info"></button>

	<!-- header -->
	<div class="sectionHeader skillN rowContainer" style="position: relative;">

	<input type="text" class="transpInput skillName" name="attr_skill4Name" data-i18n-placeholder="skill-name" placeholder="Skill name">


<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill4Type"><div class="type-image skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill4Type"><div class="type-image skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill4Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill4Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill4Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill4Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

<input class="skillRank" type="text" name="attr_skill4Rank" value="0" placeholder="0" data-i18n-title="rank" title="Rank">


	</div>

	<div class="rowContainer centerFlex skillN"> 

				<select name="attr_skill4Type" class="whiteInput skillType">
				    <option data-i18n="skill-type-None" value="None" selected>---</option>
                                    <option data-i18n="skill-type-Attack" value="Attack">Attack</option>
                                    <option data-i18n="skill-type-Defend" value="Defend">Defend</option>
                                    <option data-i18n="skill-type-Evade" value="Evade">Evade</option>
                                    <option data-i18n="skill-type-Action" value="Action">Action</option>
                                    <option data-i18n="skill-type-Mass" value="Mass">Mass</option>
                                </select>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill">
		<input type="text" class="diceNum" name="attr_skill4Dice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_skill4Dice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_skill4Dice3" placeholder="0" value="0">
		</div>
	

	<div class="lightCost">
				<input class="outfitRank" type="text" name="attr_skill4Light" value="1" data-i18n-title="skill-light-cost" title="Light Cost">
	</div>

	</div>


	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_skill4Description" class="augmentDescriptionInput"data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_skill4Effect" class="weaponEffectInput" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div>

	</div>
	<!-- desc end -->
	</div>
<!-- Skill4 block - END -->


<!-- !!EXTRA!! Regular Skills -->
<input type="checkbox" class="hide-toggle" name="attr_settingExtraEquip" value="true">
<div class="hide-item" style="width: 100%;">

<!-- Skill5 block -->
	<div class="skillBlock">
<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_skill5" name="act_shareSkill" data-i18n-title="share" title="Share info"></button>

	<!-- header -->
	<div class="sectionHeader skillN rowContainer" style="position: relative;">

	<input type="text" class="transpInput skillName" name="attr_skill5Name" data-i18n-placeholder="skill-name" placeholder="Skill name">


<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill5Type"><div class="type-image skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill5Type"><div class="type-image skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill5Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill5Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill5Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill5Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

<input class="skillRank" type="text" name="attr_skill5Rank" value="0" placeholder="0" data-i18n-title="rank" title="Rank">


	</div>

	<div class="rowContainer centerFlex skillN"> 

				<select name="attr_skill5Type" class="whiteInput skillType">
				    <option data-i18n="skill-type-None" value="None" selected>---</option>
                                    <option data-i18n="skill-type-Attack" value="Attack">Attack</option>
                                    <option data-i18n="skill-type-Defend" value="Defend">Defend</option>
                                    <option data-i18n="skill-type-Evade" value="Evade">Evade</option>
                                    <option data-i18n="skill-type-Action" value="Action">Action</option>
                                    <option data-i18n="skill-type-Mass" value="Mass">Mass</option>
                                </select>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill">
		<input type="text" class="diceNum" name="attr_skill5Dice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_skill5Dice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_skill5Dice3" placeholder="0" value="0">
		</div>
	

	<div class="lightCost">
				<input class="outfitRank" type="text" name="attr_skill5Light" value="1" data-i18n-title="skill-light-cost" title="Light Cost">
	</div>

	</div>


	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_skill5Description" class="augmentDescriptionInput"data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_skill5Effect" class="weaponEffectInput" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div>

	</div>
	<!-- desc end -->
	</div>
<!-- Skill5 block - END -->

<!-- Skill6 block -->
	<div class="skillBlock">
<input type="checkbox" class="hide-toggle" name="attr_settingHideShare" value="true">
	<button type="action" class="darkInput shareButton" id="share_skill6" name="act_shareSkill" data-i18n-title="share" title="Share info"></button>

	<!-- header -->
	<div class="sectionHeader skillN rowContainer" style="position: relative;">

	<input type="text" class="transpInput skillName" name="attr_skill6Name" data-i18n-placeholder="skill-name" placeholder="Skill name">


<div class="iconHolder">

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="" name="attr_skill6Type"><div class="type-image skillIcon skillNone"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Attack" name="attr_skill6Type"><div class="type-image skillIcon skillAtt weapon"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Defend" name="attr_skill6Type"><div class="type-image skillIcon skillDef outfit"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Evade" name="attr_skill6Type"><div class="type-image skillIcon skillEvd STGR"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Action" name="attr_skill6Type"><div class="type-image skillIcon skillAct tool"></div>
		</div>

		<div class="attackIcon">
		<input type="checkbox" class="expand-toggle" value="Mass" name="attr_skill6Type"><div class="type-image skillIcon skillMass weapon"></div>
		</div>

<input class="skillRank" type="text" name="attr_skill6Rank" value="0" placeholder="0" data-i18n-title="rank" title="Rank">


	</div>

	<div class="rowContainer centerFlex skillN"> 

				<select name="attr_skill6Type" class="whiteInput skillType">
				    <option data-i18n="skill-type-None" value="None" selected>---</option>
                                    <option data-i18n="skill-type-Attack" value="Attack">Attack</option>
                                    <option data-i18n="skill-type-Defend" value="Defend">Defend</option>
                                    <option data-i18n="skill-type-Evade" value="Evade">Evade</option>
                                    <option data-i18n="skill-type-Action" value="Action">Action</option>
                                    <option data-i18n="skill-type-Mass" value="Mass">Mass</option>
                                </select>

		<div class="dicerollBlock whiteInput" data-i18n-title="skill-dice-text" title="Dice modifiers applied when using skill">
		<input type="text" class="diceNum" name="attr_skill6Dice1" value="0">
		<div class="plainText">D</div>
		<input type="text" class="diceVal" name="attr_skill6Dice2" value="0">
		<div class="plainText">+</div>
		<input type="text" name="attr_skill6Dice3" placeholder="0" value="0">
		</div>
	

	<div class="lightCost">
				<input class="outfitRank" type="text" name="attr_skill6Light" value="1" data-i18n-title="skill-light-cost" title="Light Cost">
	</div>

	</div>


	</div>
	<!-- header end -->


	<!-- Description/Effect section -->
	<div class="rowContainer weaponInfo">

        <div class="weaponDescription">
       <textarea spellcheck="false"  name="attr_skill6Description" class="augmentDescriptionInput"data-i18n-placeholder="skill-desc" placeholder="Skill description."></textarea>
        </div>

        <div class="weaponEffect">
	<textarea spellcheck="false"  name="attr_skill6Effect" class="weaponEffectInput" data-i18n-placeholder="skill-effect" placeholder="Skill effects."></textarea>
        </div>

	</div>
	<!-- desc end -->
	</div>
<!-- Skill6 block - END -->


</div>


<!-- !!EXTRA!! Regular Skills - END -->


</div> 
<!-- Regular Skills - END -->






</div> <!-- outside of green line -->
  
              </div></div></div></div>
<!-- Skill section END -->


<!-- Character Details -->
	<div class="sheet-body sheet-details darkBG">
	<div class="contentContainer" id="characterDetails">

<div class="profileHeader" style="top: 12px; right: 10px; left: auto;">
<input type="checkbox" id="attr_distortState" name="attr_distortState" value="true"><label for="attr_distortState" class="distortIcon" data-i18n-title="distort-toggleText" title="Distort"></label>
</div>

<!-- Normal profile -->
<input type="checkbox" class="hide-toggle-rev" name="attr_distortState" value="true">
<div class="hide-item-rev" style="width: 100%;">
<div class="rowContainer" style="padding-top: 5px;">
<div class="half" style="position: relative;">

	<div class="CharImage"><img name="attr_character_avatar">
	<div class="CharImageText" data-i18n="character-photo">Photo</div></div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-name-text">Name</div>
	<input class="CharName" type="text" name="attr_character_nameBase"></div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-job">Occupation</div>
	<input class="CharName" type="text" name="attr_character_job"></div>
               
	<div class="profileData">
	<div class="textSection" data-i18n="character-age">Age</div>
	<input class="CharName" type="text" name="attr_age"></div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-height">Height</div>
	<input class="CharName" type="text" name="attr_height"></div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-origin">Birthplace</div>
	<input class="CharName" type="text" name="attr_character_origin"></div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-residence">Residence</div>
	<input class="CharName" type="text" name="attr_character_residence"></div>

	<div class="profileData" style="position: relative;">
	<div class="textSection" data-i18n="character-assets">Assets</div>
	<input class="CharName" type="text" name="attr_character_assets" data-i18n-placeholder="character-assets-placeholder" placeholder="Money, items, other assets.">


<input class="CharResidence" type="text" name="attr_character_ahn" data-i18n-placeholder="character-ahn-placeholder" style="width: 159px !important; position: absolute; right: 0px; top: 0px;">

</div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-summary">Summary</div>
	<textarea spellcheck="false"  name="attr_character_summary" data-i18n-placeholder="character-summary-placeholder" class="CharTopNotes" placeholder="General character summary."></textarea></div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-history">Notable History</div>
	<textarea spellcheck="false"  name="attr_character_history" class="CharTopNotes" data-i18n-placeholder="character-history-placeholder" placeholder="Recent or past history."></textarea>
	</div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-relations">Relations</div>
	<textarea spellcheck="false"  name="attr_character_relations" class="CharTopNotes" data-i18n-placeholder="character-relations-placeholder" placeholder="Relations with others."></textarea>
	</div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-notes">Notes</div>
	<textarea spellcheck="false"  name="attr_character_notes" class="CharTopNotes" data-i18n-placeholder="character-notes-placeholder" placeholder="Any other notes."></textarea>
	</div>

</div>


<div class="columnAlign half centerFlex" id="characterExtra">

	<div class="profileData">
	<div class="textSection" style="width: 50px !important;">URL</div>
	<input type="text" class="CharResidence" name="attr_character_url" data-i18n-placeholder="character-url-placeholder" placeholder="External sheet/reference" style="max-width: 300px;"></div>

<div class="textSection" data-i18n="character-desc">Description</div>
<div class="bigbox">
<textarea spellcheck="false" name="attr_character_desc" data-i18n-placeholder="character-desc-placeholder" placeholder="Physical description."></textarea></div>


<div class="textSection" data-i18n="character-personality">Personality</div>
<div class="bigbox">
<textarea spellcheck="false" name="attr_character_personality" data-i18n-placeholder="character-personality-placeholder" placeholder="Personality description."></textarea></div>


<div class="textSection" data-i18n="character-background">Background</div>
<div class="bigbox">
<textarea spellcheck="false" name="attr_character_background" data-i18n-placeholder="character-background-placeholder" placeholder="Background description."></textarea></div>

</div>
</div>
</div>

<!-- Distortion profile -->
<input type="checkbox" class="hide-toggle" name="attr_distortState" value="true">
<div class="hide-item" style="width: 100%;">
<div class="rowContainer distortProfile" style="padding-top: 5px;">
<div class="half" style="position: relative;">

	<div class="CharImage"><img name="attr_character_avatar">
	<div class="CharImageText" data-i18n="character-photo">Photo</div></div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-name-text">Name</div>
	<input class="CharName whiteInput" type="text" name="attr_distort_name"></div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-job">Occupation</div>
	<input class="CharName whiteInput" type="text" name="attr_character_job"></div>
               
	<div class="profileData">
	<div class="textSection" data-i18n="character-age">Age</div>
	<input class="CharName whiteInput" type="text" name="attr_age"></div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-height">Height</div>
	<input class="CharName whiteInput" type="text" name="attr_height"></div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-origin">Birthplace</div>
	<input class="CharName whiteInput" type="text" name="attr_character_origin"></div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-residence">Residence</div>
	<input class="CharName whiteInput" type="text" name="attr_character_residence"></div>

	<div class="profileData">
	<div class="textSection" data-i18n="distort-origin">Origin</div>
	<input class="CharResidence whiteInput" data-i18n-placeholder="distort-origin-placeholder" placeholder="Origin of Distortion." type="text" name="attr_distort_origin"></div>

	<div class="profileData">
	<div class="textSection" data-i18n="distort-summary">Summary</div>
	<textarea spellcheck="false"  name="attr_distort_summary" data-i18n-placeholder="distort-summary-placeholder" class="CharTopNotes whiteInput" placeholder="General summary of Distortion."></textarea></div>

	<div class="profileData">
	<div class="textSection" data-i18n="distort-behavior">Behavior</div>
	<textarea spellcheck="false"  name="attr_distort_behavior" class="CharTopNotes whiteInput" data-i18n-placeholder="distort-behavior-placeholder" placeholder="Notes on Distortion behaviour."></textarea>
	</div>

	<div class="profileData">
	<div class="textSection" data-i18n="distort-taboo">Taboos/Boons</div>
	<textarea spellcheck="false"  name="attr_distort_taboo" class="CharTopNotes whiteInput" data-i18n-placeholder="distort-taboo-placeholder" placeholder="Distortion taboos."></textarea>
	</div>

	<div class="profileData">
	<div class="textSection" data-i18n="character-notes">Notes</div>
	<textarea spellcheck="false"  name="attr_distort_notes" class="CharTopNotes whiteInput" data-i18n-placeholder="distort-notes-placeholder" placeholder="Other Distortion notes."></textarea>
	</div>


</div>


<div class="columnAlign half centerFlex" id="distortExtra">

	<div class="profileData">
	<div class="textSection" style="width: 50px !important;">URL</div>
	<input type="text" class="CharResidence whiteInput" name="attr_distort_url" data-i18n-placeholder="character-url-placeholder" placeholder="External sheet/reference" style="max-width: 300px;"></div>

<div class="textSection" data-i18n="distort-appearance">Appearance</div>
<div class="bigbox">
<textarea spellcheck="false" class="whiteInput" name="attr_distort_appearance" data-i18n-placeholder="distort-appearance-placeholder" placeholder="Appearance of Distortion."></textarea></div>

<div class="textSection" data-i18n="distort-atmosphere">Atmosphere</div>
<div class="bigbox">
<textarea spellcheck="false" class="whiteInput" name="attr_distort_atmosphere" data-i18n-placeholder="distort-atmosphere-placeholder" placeholder="Atmosphere of Distortion."></textarea></div>

<div class="textSection" data-i18n="distort-story">Story</div>
<div class="bigbox">
<textarea spellcheck="false" class="whiteInput" name="attr_distort_story" data-i18n-placeholder="distort-story-placeholder" placeholder="Story of Distortion."></textarea></div>

</div>
</div>

<!-- distortion details end -->



</div>
	</div>
</div>

<!-- Details END -->

<!-- Sheet Editor -->
<div class="sheet-body sheet-export darkBG">
	<div class="contentContainer" id="sheetExport">

		<div class="rowContainer centerFlex">

<button type="action" class="declare" name="act_clearButton" id="clear_editorOutput" data-i18n-title="reset-button" title="Reset" style="position: absolute; left: 0;">x</button>

	<select name="attr_exportType" class="darkInput" style="width: 200px !important; position: absolute; left: 90px; margin-bottom: 0px;">
 	<option data-i18n="export-type-All" value="All" /selected>All</option>
         <option data-i18n="export-type-Equip" value="Equip">Equipment</option>
	<option data-i18n="export-type-Skill" value="Skills">Skills</option>
	<option data-i18n="export-type-Ego" value="Ego">E.G.O</option>
         <option data-i18n="export-type-Distort" value="Distort">Distortion</option>
	<option data-i18n="export-type-Character" value="Character">Character details</option>
	<option data-i18n="export-type-Settings" value="Settings">Settings</option>
         </select>

<button type="action" class="declare" name="act_export" data-i18n="message-export">Export</button>
<button type="action" class="declare" name="act_swap" title="Swap" style="font-size: 14pt; margin-left: 5px; margin-right: 5px;">⇔</button>
<button type="action" class="declare" name="act_import" data-i18n="message-import">Import</button>

<button type="action" class="declare" name="act_clearButton" data-i18n-title="reset-button" title="Reset" id="clear_editorInput" style="position: absolute; right: 0;">x</button>

		</div>

		<div class="rowContainer">
	<textarea spellcheck="false" class="half" name="attr_editorOutput" data-il18n-placeholder="editor-outputText" placeholder="Editor output"></textarea>

	<textarea spellcheck="false" class="half" name="attr_editorInput" data-il18n-placeholder="editor-inputText" placeholder="Editor input"></textarea>
		</div>

</div>
</div>


<!-- Sheet Editor -->
	<div class="sheet-body sheet-edit darkBG">

<input type="text" name="attr_global_editKey" hidden="true">

<div class="rowContainer centerFlex">
<input type="checkbox" class="hide-toggle" name="attr_global_accessCheck" value="0" hidden="true">
<div class="hide-item" style="width: 200px; height: 250px; text-align: center;">
<h4 data-il18n-placeholder="editor-pw">Edit Mode Password</h4>
<input type="text" class="darkInput" name="attr_global_access">
</div>

</div>

	<div class="contentContainer" id="sheetSettings">

<input type="checkbox" class="hide-toggle-rev" name="attr_global_accessCheck" value="0" hidden="true">
<div class="hide-item-rev rowContainer">

<!-- Game Setting Section -->
<div><h3>
<input type="checkbox" class="switch-toggle" name="attr_syncLockGame" value="true" hidden="true">
<button type="action" class="lockButton" id="lock_Game" name="act_lockSection"></button>

	<div>
	<input type="checkbox" class="hide-toggle" name="attr_syncStateGame" value="true">
	<div class="hide-item syncIcon"></div>
	</div>

<span data-i18n="editor-gamesettings">Game Settings</span> 

<label for="hideGameSettings" class="arrowholder"><input type="checkbox" class="switch-toggle" id="hideGameSettings" name="attr_hideGameSettings" value="true" style="display: none;"><div class="arrow"></div></label></h3>

<input type="checkbox" class="hide-toggle-rev" name="attr_hideGameSettings" value="true" hidden="true">
<div class="hide-item-rev" style="width: 100%;">

<div class="rowContainer centerFlex">
	<textarea spellcheck="false" class="half" name="attr_gameEditor" data-il18n-placeholder="editor-outputText" data-i18n-placeholder="editor-gamesettings-textedit" placeholder="Game Settings output"></textarea>
</div>
<div class="rowContainer">
<button type="action" name="act_resetGlobal" data-i18n="clear-button" class="btn">Clear</button>
<button type="action" name="act_syncGlobal" data-i18n="sync-button" class="btn">Sync Data</button>
<button type="action" name="act_exportGlobal" data-i18n="message-export" class="btn">Export</button>
<button type="action" name="act_importGlobal" data-i18n="message-import" class="btn">Import</button>
</div>


<!-- Obscured -->
<div id="globalSettings">
<fieldset class="repeating_global">

<input type="text" name="attr_editKey" hidden="true">
<textarea name="attr_gameSettingSource" hidden="true"></textarea>
<textarea name="attr_ailmentSettingSource" hidden="true"></textarea>

<div class="rowContainer">

<!-- General settings -->
<div style="text-align: left; padding: 10px;">

<div>
<div class="settingStyle">
<div style="width: 100px">
<b data-i18n="editor-rulename">Ruleset Name</b>:</div> <input type="text" style="input" name="attr_ruleName" data-i18n="editor-rulename-placeholder" value="Original Rulebook (Default)">
</div>

<div class="settingStyle">
<div style="width: 100px">
<b data-i18n="bar-health">Health</b>:</div> <input type="number" name="attr_healthBase" value="30">

+
(<select type="text" name="attr_healthStat" value="Instinct" style="width: 80px;">
<option value="Instinct" data-i18n="stats-instinct">Fortitude</option>
<option value="InstinctTemperance" data-i18n="editor-instinct-temperance">(Fortitude + Temperance)/2</option>
</select>
 * 

<input type="number" name="attr_healthStatMod" value="6">)
+ (<span data-i18n="rank">Rank</span> *
<input type="number" name="attr_healthRankMod" value="6">)
</div>

<div class="settingStyle"><div style="width: 100px">
<b data-i18n="bar-stagres">Stagger Res</b>:</div> <input type="number" name="attr_staggerBase" value="20">

+
(<select type="text" name="attr_staggerStat" value="Charm" style="width: 80px;">
<option value="Charm" data-i18n="stats-charm">Charm</option>
<option value="CharmJustice" data-i18n="editor-charm-justice">(Charm + Justice)/2</option>
</select>
 *  

 <input type="number" name="attr_staggerStatMod" value="4">)
+ (<span data-i18n="rank">Rank</span> *
<input type="number" name="attr_staggerRankMod" value="4">)
</div>

<div class="settingStyle"><div style="width: 100px">
<b data-i18n="bar-sanity">Sanity</b>:</div> <input type="number" name="attr_sanityBase" value="15">

+
(<select type="text" name="attr_sanityStat" value="Wisdom" style="width: 80px;">
<option value="Wisdom" data-i18n="stats-wisdom">Prudence</option>
<option value="WisdomInsight" data-i18n="editor-wisdom-insight">(Prudence + Insight)/2</option>
</select>
 * 

 <input type="number" name="attr_sanityStatMod" value="3">)
+ (<span data-i18n="rank">Rank</span> *
<input type="number" name="attr_sanityRankMod" value="0">)
</div>

<div class="settingStyle"><div style="width: 100px">
<b data-i18n="bar-light">Light</b>:</div> <input type="number" name="attr_lightBase" value="3">
 + (<span data-i18n="rank">Rank</span> * <input type="number" name="attr_lightRankMod" value="1">)
</div>

<div class="settingStyle"><div style="width: 100px">
<b data-i18n="editor-distortlight">Distort Light</b>:</div> <input type="number" name="attr_distortLightBase" value="5">
 + (<span data-i18n="rank">Rank</span> * <input type="number" name="attr_distortLightRankMod" value="1">)
</div>

<div class="settingStyle"><div style="width: 100px">
<b data-i18n="character-level">Level</b>:</div> <input type="number" name="attr_expCalc" value="8"> <span data-i18n="character-exp">EXP</span>
</div>

<div class="settingStyle"><div style="width: 100px">
<b data-i18n="helper-att-power">Att Power</b>:</div> <select type="text" name="attr_attStat" value="Instinct" style="width: 120px;">
<option value="Instinct" data-i18n="stats-instinct">Fortitude</option>
<option value="Rank" data-i18n="rank">Rank</option>
<option value="InstinctWisdom" data-i18n="editor-instinct-wisdom">(Fortitude + Prudence)/2</option>
</select>
+ <span data-i18n="ailments-strength">Strength</span> / <span data-i18n="ailments-feeble">Feeble</span>
</div>

<div class="settingStyle"><div style="width: 100px">
<b data-i18n="helper-def-power">Def Power</b>:</div> <select type="text" name="attr_defStat" value="Temperance" style="width: 120px;">
<option value="Temperance" data-i18n="stats-temperance">Temperance</option>
<option value="Rank" data-i18n="rank">Rank</option>
<option value="TemperanceCharm" data-i18n="editor-temperance-charm">(Temperance + Charm)/2</option>

</select>
+ <span data-i18n="ailments-endurance">Endurance</span> / <span data-i18n="ailments-disarm">Disarm</span>

</div>

<div class="settingStyle"><div style="width: 100px">
<b data-i18n="helper-evd-power">Evd Power</b>:</div> <select type="text" name="attr_evdStat" value="Insight" style="width: 120px;">
<option value="Insight" data-i18n="stats-insight">Insight</option>
<option value="Rank" data-i18n="rank">Rank</option>
<option value="InsightJustice" data-i18n="editor-insight-justice">(Insight + Justice)/2</option>
</select> + 

<select type="text" name="attr_evdAilment" class="transpInput" style="width: 135px; text-align: left;">
<option value="EnduranceDisarm" data-i18n="editor-endurance-disarm">Endurance/Disarm</option>
<option value="HasteBind" data-i18n="editor-haste-bind">Haste/Bind</option>
</select>

</div>

<div class="settingStyle"><div style="width: 100px">
<b data-i18n="editor-multihit-penalty">Multi-hit Penalty</b>:</div> <input type="number" name="attr_multiPenalty" value="-2"><select type="text" class="transpInput" name="attr_multiStyle" style="width: 90px;">
<option data-i18n="editor-nattacks" value="n" selected>x n Attacks</option>
<option data-i18n="editor-flat" value="Flat">Flat</option>
</select>
</div>


</div>
</div>
<!-- General settings end -->

<input type="checkbox" value="true" name="attr_iconStyle" hidden="true" /checked>

<!-- Default ailments -->
<div>

<label for="LimbusStyleInternal"><input type="checkbox" id="LimbusStyleInternal" name="attr_iconStyle" value="true"><span data-i18n="settings-limbusstyle">Limbus style ailment icons</span></label>

<div class="settingStyle columnAlign centerFlex">

<!-- Stagger -->
<div class="rowContainer repitemMock" style="width: 250px;">

	<div class="ailmentIconSelector rowContainer centerFlex">

	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_iconStyle"><div class="hide-item-rev skillIcon stagger"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_iconStyle"><div class="type-image skillIcon stagger-limbus"></div>
	</div>

	</div>

<div class="columnAlign">

<div class="rowContainer settingStyle"><div style="width: 100px;">
<b data-i18n="editor-stg-recovery">STG Recovery</b>:</div> <input type="number" name="attr_staggerRecoverPercent" min="0" value="100" style="width:50px;">% + <input type="number" name="attr_staggerRecoverBase" value="0"></div>

<div class="rowContainer settingStyle"><div style="width: 100px;">
<b data-i18n="editor-stg-sanity">SP Damage</b>:</div> <input type="number" name="attr_staggerSanity" value="5"></div>

</div>



</div>
<!-- Stagger end -->

<div class="rowContainer centerFlex">

<!-- Burn -->
<div class="rowContainer repitemMock">

	<div class="ailmentIconSelector rowContainer centerFlex">

	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_iconStyle"><div class="hide-item-rev skillIcon burn"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_iconStyle"><div class="type-image skillIcon burn-limbus"></div>
	</div>

	</div>

<div class="columnAlign">

<div class="settingStyle"><div style="width: 50px">
<b data-i18n="message-decay">Decay</b>:</div> 
  <select name="attr_burnDecayMode" class="darkInput" style="width: 40px;">
    <option value="+">+</option>
    <option value="x" selected>x</option>
    <option value="=">=</option>
  </select>

 <input type="text" name="attr_burnDecayVal" style="width: 40px;" value="0.5">
</div>

</div>



</div>
<!-- Burn end -->

<!-- Bleed -->
<div class="rowContainer repitemMock">

	<div class="ailmentIconSelector rowContainer centerFlex">

	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_iconStyle"><div class="hide-item-rev skillIcon bleed"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_iconStyle"><div class="type-image skillIcon bleed-limbus"></div>
	</div>

	</div>

<div class="columnAlign">

<div class="settingStyle"><div style="width: 50px">
<b data-i18n="message-decay">Decay</b>:</div> 
  <select name="attr_bleedDecayMode" class="darkInput" style="width: 40px;">
    <option value="+">+</option>
    <option value="x" selected>x</option>
    <option value="=">=</option>
  </select>

 <input type="text" name="attr_bleedDecayVal" style="width: 40px;" value="0.5">
</div>

</div>



</div>
<!-- Bleed end -->
</div>

<div class="rowContainer centerFlex">
<!-- Smoke -->
<div class="rowContainer repitemMock">

	<div class="ailmentIconSelector rowContainer centerFlex">

	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_iconStyle"><div class="hide-item-rev skillIcon smoke"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_iconStyle"><div class="type-image skillIcon smoke-limbus"></div>
	</div>

	</div>

<div class="columnAlign">

<div class="settingStyle"><div style="width: 50px">
<b data-i18n="message-decay">Decay</b>:</div> 
  <select name="attr_smokeDecayMode" class="darkInput" style="width: 40px;">
    <option value="+" selected>+</option>
    <option value="x">x</option>
    <option value="=">=</option>
  </select>

 <input type="text" name="attr_smokeDecayVal" style="width: 40px;" value="-1">
</div>

</div>



</div>
<!-- Smoke end -->

<!-- Charge -->
<div class="rowContainer repitemMock">

	<div class="ailmentIconSelector rowContainer centerFlex">

	<div class="attackIcon">
	<input type="checkbox" class="hide-toggle-rev" value="true" name="attr_iconStyle"><div class="hide-item-rev skillIcon charge"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="true" name="attr_iconStyle"><div class="type-image skillIcon charge-limbus"></div>
	</div>

	</div>

<div class="columnAlign">

<div class="settingStyle"><div style="width: 50px">
<b data-i18n="message-decay">Decay</b>:</div> 
  <select name="attr_chargeDecayMode" class="darkInput" style="width: 40px;">
    <option value="+" selected>+</option>
    <option value="x">x</option>
    <option value="=">=</option>
  </select>

 <input type="text" name="attr_chargeDecayVal" style="width: 40px;" value="0">
</div>

</div>



</div>
<!-- Charge end -->


</div>


</div></div>
<!-- Default Ailments END -->

</div>
</fieldset>
</div>
<!-- Obscured end -->



</div>

<!-- Game Setting section END -->


<!-- Custom Ailment section -->
<div><h3>
<input type="checkbox" class="switch-toggle" name="attr_syncLockAilment" value="true" hidden="true">
<button type="action" class="lockButton" id="lock_Ailment" name="act_lockSection">
</button>

	<div>
	<input type="checkbox" class="hide-toggle" name="attr_syncStateAilment" value="true">
	<div class="hide-item syncIcon"></div>
	</div>


<span data-i18n="editor-customailments">Custom Ailments</span>

<label for="hideAilmentSettings" class="arrowholder"><input type="checkbox" class="switch-toggle" id="hideAilmentSettings" name="attr_hideAilmentSettings" value="true" style="display: none;"><div class="arrow"></div></label></h3>

<input type="checkbox" class="hide-toggle-rev" name="attr_hideAilmentSettings" value="true" hidden="true">
<div class="hide-item-rev" style="width: 100%;">

	<textarea spellcheck="false" class="half" name="attr_ailmentEditor" data-i18n-placeholder="editor-customailments-textedit" placeholder="Custom Ailments Editor"></textarea>


<!-- menu -->
<div class="rowContainer">

<button type="action" name="act_clearAilment" data-i18n="clear-button" class="btn">Clear</button>


<button type="action" name="act_syncAilment" data-i18n="sync-button" class="btn">Sync Data</button>


<div>
<label for="ailmentCollapse">
<div class="btn rowContainer centerFlex" style="width: 40px;"> <input type="checkbox" id="ailmentCollapse" class="switch-toggle" name="attr_settingCustomCollapse" value="true" style="display: none !important"><div class="smallarrow"></div></div>
</label>
</div>

<button type="action" name="act_exportRepeating" data-i18n="message-export" class="btn">Export</button>

  <select name="attr_customImportMode" class="darkInput" style="width: 100px;">
    <option data-i18n="import-type-replace" value="Replace" selected>Replace</option>
    <option data-i18n="import-type-add" value="Add">Add</option>
  </select>

<button type="action" name="act_importRepeating" data-i18n="message-import" class="btn">Import</button>


</div>

<!-- menu -->

<div class="ailmentCustomEditor rowContainer">

<fieldset class="repeating_ailments">
<button type="action" class="copyButton" name="act_copycustom"></button>

<input type="checkbox" class="switch-toggle" name="attr_ailDisplay" value="true" hidden="true" /checked>
<button type="action" class="displayButton" name="act_displaycustom"></button>

<div class="columnAlign">

<div class="rowContainer settingStyle">

	<!-- Icon selector -->
	<div class="ailmentIconSelector rowContainer centerFlex">

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Question" name="attr_ailIcon"><div class="type-image skillIcon question"></div>
	</div>

	<div class="attackIcon">
<input type="checkbox" class="expand-toggle" value="0" name="attr_ailIcon"><div class="type-image skillIcon question"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Burn" name="attr_ailIcon"><div class="type-image skillIcon burn"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Bleed" name="attr_ailIcon"><div class="type-image skillIcon bleed"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Paralysis" name="attr_ailIcon"><div class="type-image skillIcon paralysis"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Smoke" name="attr_ailIcon"><div class="type-image skillIcon smoke"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Charge" name="attr_ailIcon"><div class="type-image skillIcon charge"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Fortune" name="attr_ailIcon"><div class="type-image skillIcon fortune"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Fragile" name="attr_ailIcon"><div class="type-image skillIcon fragile"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Protection" name="attr_ailIcon"><div class="type-image skillIcon protection"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="StaggerProtection" name="attr_ailIcon"><div class="type-image skillIcon staggerprotection"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Strength" name="attr_ailIcon"><div class="type-image skillIcon strength"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Feeble" name="attr_ailIcon"><div class="type-image skillIcon feeble"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Endurance" name="attr_ailIcon"><div class="type-image skillIcon endurance"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Disarm" name="attr_ailIcon"><div class="type-image skillIcon disarm"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Haste" name="attr_ailIcon"><div class="type-image skillIcon haste"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Bind" name="attr_ailIcon"><div class="type-image skillIcon bind"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Panic" name="attr_ailIcon"><div class="type-image skillIcon panic"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="Hostile" name="attr_ailIcon"><div class="type-image skillIcon hostile"></div>
	</div>

<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Burn" name="attr_ailIcon"><div class="type-image skillIcon burn-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bleed" name="attr_ailIcon"><div class="type-image skillIcon bleed-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Paralysis" name="attr_ailIcon"><div class="type-image skillIcon paralysis-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Smoke" name="attr_ailIcon"><div class="type-image skillIcon smoke-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Charge" name="attr_ailIcon"><div class="type-image skillIcon charge-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fortune" name="attr_ailIcon"><div class="type-image skillIcon fortune-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fragile" name="attr_ailIcon"><div class="type-image skillIcon fragile-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Protection" name="attr_ailIcon"><div class="type-image skillIcon protection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/StaggerProtection" name="attr_ailIcon"><div class="type-image skillIcon staggerprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Strength" name="attr_ailIcon"><div class="type-image skillIcon strength-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Feeble" name="attr_ailIcon"><div class="type-image skillIcon feeble-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Endurance" name="attr_ailIcon"><div class="type-image skillIcon endurance-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Disarm" name="attr_ailIcon"><div class="type-image skillIcon disarm-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Haste" name="attr_ailIcon"><div class="type-image skillIcon haste-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bind" name="attr_ailIcon"><div class="type-image skillIcon bind-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Hostile" name="attr_ailIcon"><div class="type-image skillIcon hostile-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Panic" name="attr_ailIcon"><div class="type-image skillIcon panic-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PanicBlue" name="attr_ailIcon"><div class="type-image skillIcon panic-limbus-blue"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Rupture" name="attr_ailIcon"><div class="type-image skillIcon rupture-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Tremor" name="attr_ailIcon"><div class="type-image skillIcon tremor-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Sinking" name="attr_ailIcon"><div class="type-image skillIcon sinking-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Poise" name="attr_ailIcon"><div class="type-image skillIcon poise-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Frostbite" name="attr_ailIcon"><div class="type-image skillIcon frostbite-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Poison" name="attr_ailIcon"><div class="type-image skillIcon poison-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Nails" name="attr_ailIcon"><div class="type-image skillIcon nails-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Ruin" name="attr_ailIcon"><div class="type-image skillIcon ruin-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Devastation" name="attr_ailIcon"><div class="type-image skillIcon devastation-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Critical" name="attr_ailIcon"><div class="type-image skillIcon critical-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Aggro" name="attr_ailIcon"><div class="type-image skillIcon aggro-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Ammo" name="attr_ailIcon"><div class="type-image skillIcon ammo-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Bullseye" name="attr_ailIcon"><div class="type-image skillIcon bullseye-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Barrier" name="attr_ailIcon"><div class="type-image skillIcon barrier-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Duel" name="attr_ailIcon"><div class="type-image skillIcon duel-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Fist" name="attr_ailIcon"><div class="type-image skillIcon fist-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/FistGreen" name="attr_ailIcon"><div class="type-image skillIcon fist-limbus-green"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Heal" name="attr_ailIcon"><div class="type-image skillIcon heal-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/KAmpule" name="attr_ailIcon"><div class="type-image skillIcon kampule-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/TTime" name="attr_ailIcon"><div class="type-image skillIcon ttime-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/SlashProtection" name="attr_ailIcon"><div class="type-image skillIcon slashprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PierceProtection" name="attr_ailIcon"><div class="type-image skillIcon pierceprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/BluntProtection" name="attr_ailIcon"><div class="type-image skillIcon bluntprotection-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/SlashFragility" name="attr_ailIcon"><div class="type-image skillIcon slashfragility-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/PierceFragility" name="attr_ailIcon"><div class="type-image skillIcon piercefragility-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/BluntFragility" name="attr_ailIcon"><div class="type-image skillIcon bluntfragility-limbus"></div>
	</div>

	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Wrath" name="attr_ailIcon"><div class="type-image skillIcon wrath-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Lust" name="attr_ailIcon"><div class="type-image skillIcon lust-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Sloth" name="attr_ailIcon"><div class="type-image skillIcon sloth-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Gluttony" name="attr_ailIcon"><div class="type-image skillIcon gluttony-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Gloom" name="attr_ailIcon"><div class="type-image skillIcon gloom-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Pride" name="attr_ailIcon"><div class="type-image skillIcon pride-limbus"></div>
	</div>
	<div class="attackIcon">
	<input type="checkbox" class="expand-toggle" value="limbus/Envy" name="attr_ailIcon"><div class="type-image skillIcon envy-limbus"></div>
	</div>


	<!-- Icon selector END -->

</div>

<input type="text" name="attr_ailName" class="transpInput" data-i18n-placeholder="message-ailname-placeholder" placeholder="Ailment Name">
<input type="number" name="attr_ailNum" hidden="true">

</div>

<input type="checkbox" class="hide-toggle-rev" name="attr_ailCollapse" value="true" hidden="true">
<div class="hide-item-rev rowContainer" style="margin-top: 3px;">
<div class="rowContainer settingStyle">

<div class="customAilText">
<span data-i18n="message-icon">Icon</span>:
</div>

<input name="attr_ailIcon" list="iconlist" type="text" placeholder="Type for icon selection." value="Question">
</div>

<div class="rowContainer settingStyle">

<div class="customAilText">
<span data-i18n="message-trigger">Trigger</span>:
</div>

  <select name="attr_ailTrigger" class="whiteInput" style="width: 210px;">
    <option data-i18n="message-none" value="None" selected>None</option>
    <option data-i18n="trigger-roundend" value="RoundEnd">Round End</option>
    <option data-i18n="trigger-onaction" value="OnAction">On Action</option>
  </select>

</div>

<input type="checkbox" class="fade-toggle" name="attr_ailTrigger" value="None" hidden="true" /checked>
<div>
<div class="rowContainer settingStyle">

<div class="customAilText">
<span data-i18n="message-effect">Effect</span>:
</div>

<select name="attr_ailEffect" class="whiteInput" style="width: 105px;">
    <option data-i18n="message-none" value="None" selected>None</option>
    <option data-i18n="bar-health" value="HP">Health</option>
    <option data-i18n="bar-stagres" value="StagRes">Stagger</option>
    <option data-i18n="bar-sanity" value="SP">Sanity</option>
    <option data-i18n="bar-light" value="Light">Light</option>
    <option data-i18n="distort-counter-full" value="distortCounter">Distortion Counter</option>
    <option data-i18n="helper-text-difficulty" value="difficulty">Difficulty</option>
</select>

 <select name="attr_ailEffectMode" class="darkInput" style="width: 40px;">
    <option value="+" selected>+</option>
    <option value="x">x</option>
  <option value="=">=</option>
  </select>

<input type="text" name="attr_ailEffectVal" style="width: 40px;" value="-n">
</div>

<div class="rowContainer settingStyle">

<div class="customAilText">
<span data-i18n="message-decay">Decay</span>:
</div>

  <select name="attr_ailDecayMin" class="whiteInput" style="width: 105px">
    <option data-i18n="decay-min-1" value="1" selected>Count (Min: 1)</option>
    <option data-i18n="decay-min-0" value="0">Count (Min: 0)</option>
  </select>

  <select name="attr_ailDecayMode" class="darkInput" style="width: 40px;">
    <option value="+">+</option>
    <option value="x">x</option>
    <option value="=" selected>=</option>
  </select>

 <input type="text" name="attr_ailDecayVal" style="width: 40px;" value="0">


</div>
</div>

<input type="checkbox" class="fade-toggle" name="attr_ailMax" value="0" hidden="true" /checked>
<div class="rowContainer settingStyle">


<div class="customAilText">
<span data-i18n="message-max">Max</span>:
</div>

<div class="settingStyle">
 <input type="number" name="attr_ailMax" style="width: 40px;" min="0" value="0">

<select name="attr_ailMaxBehavior" class="transpInput" type="text" style="width: 140px;">
    <option data-i18n="max-none" value="None" selected>No Override</option>
    <option data-i18n="max-clear" value="Clear">Clear on Max</option>
    <option data-i18n="max-effect" value="Effect">Effect on Max</option>
    <option data-i18n="max-decay" value="Decay">Decay on Max</option>
    <option data-i18n="max-effectdecay" value="EffectDecay">Effect + Decay on Max</option>
   <option data-i18n="max-effectclear" value="EffectClear">Effect + Clear on Max</option>

</select>
</div>

</div>

<input type="checkbox" class="fade-toggle" name="attr_ailMessageCheck" value="0" hidden="true" /checked>
<div class="columnAlign settingStyle">

 <select name="attr_ailMessageCheck" class="darkInput" value="0">
    <option data-i18n="message-nomessage" value="0" selected>No Message</option>
    <option data-i18n="message-sendmessage" value="true">Send Message</option>
  </select>

<div>
 <textarea name="attr_ailMessage" data-i18n="message-custom-placeholder" value="[CHAR]: [DIFF] damage from [AIL]">[CHAR]: [DIFF] damage from [AIL]</textarea>
</div>

</div>
</div>

</div>
</div>


</div>

</fieldset>
</div>

</div>
<!-- Custom Ailment section END -->



</div>
<!-- Icon Selector Data -->
<datalist id="iconlist">
    <option value="None">None</option>
    <option value="Question">Question</option>

    <option value="Burn">Burn</option>
    <option value="Bleed">Bleed</option>
    <option value="Paralysis">Paralysis</option>
    <option value="Smoke">Smoke</option>
    <option value="Charge">Charge</option>
    <option value="Fortune">Fortune</option>
    <option value="Fragile">Fragile</option>
    <option value="Protection">Protection</option>
    <option value="StaggerProtection">Stagger Protection</option>
    <option value="Strength">Strength</option>
    <option value="Feeble">Feeble</option>
    <option value="Endurance">Endurance</option>
    <option value="Disarm">Disarm</option>
    <option value="Haste">Haste</option>
    <option value="Bind">Bind</option>
    <option value="Panic">Panic</option>
    <option value="Hostile">Hostile</option>

    <option value="limbus/Burn">Burn (Limbus)</option>
    <option value="limbus/Bleed">Bleed (Limbus)</option>
    <option value="limbus/Paralysis">Paralysis (Limbus)</option>
    <option value="limbus/Smoke">Smoke (Limbus)</option>
    <option value="limbus/Charge">Charge (Limbus)</option>
    <option value="limbus/Fortune">Fortune (Limbus)</option>
    <option value="limbus/Fragile">Fragile (Limbus)</option>
    <option value="limbus/Protection">Protection (Limbus)</option>
    <option value="limbus/StaggerProtection">Stagger Protection (Limbus)</option>
    <option value="limbus/Strength">Strength (Limbus)</option>
    <option value="limbus/Feeble">Feeble (Limbus)</option>
    <option value="limbus/Endurance">Endurance (Limbus)</option>
    <option value="limbus/Disarm">Disarm (Limbus)</option>
    <option value="limbus/Haste">Haste (Limbus)</option>
    <option value="limbus/Bind">Bind (Limbus)</option>
    <option value="limbus/Hostile">Hostile (Limbus)</option>

    <option value="limbus/Rupture">Rupture (Limbus)</option>
    <option value="limbus/Tremor">Tremor (Limbus)</option>
    <option value="limbus/Sinking">Sinking (Limbus)</option>
    <option value="limbus/Poise">Poise (Limbus)</option>
    <option value="limbus/Panic">Panic: !!! (Limbus)</option>
    <option value="limbus/PanicBlue">Panic: Brain (Limbus)</option>
    <option value="limbus/Frostbite">Frostbite (Limbus)</option>
    <option value="limbus/Poison">Poison (Limbus)</option>
    <option value="limbus/Nails">Nails (Limbus)</option>
    <option value="limbus/Ruin">Ruin (Limbus)</option>
    <option value="limbus/Devastation">Devastation (Limbus)</option>
    <option value="limbus/Critical">Critical (Limbus)</option>

    <option value="limbus/Aggro">Aggro (Limbus)</option>
    <option value="limbus/Bullseye">Bullseye (Limbus)</option>
    <option value="limbus/Ammo">Ammo (Limbus)</option>
    <option value="limbus/Barrier">Charge Barrier (Limbus)</option>
    <option value="limbus/Duel">Duel (Limbus)</option>
    <option value="limbus/Fist">Fist: Red (Limbus)</option>
    <option value="limbus/FistGreen">Fist: Green (Limbus)</option>
    <option value="limbus/Heal">Heal (Limbus)</option>
    <option value="limbus/KAmpule">K-Corp Ampule (Limbus)</option>
    <option value="limbus/TTime">T-Corp Time (Limbus)</option>

    <option value="limbus/SlashProtection">Slash Protection (Limbus)</option>
    <option value="limbus/PierceProtection">Pierce Protection (Limbus)</option>
    <option value="limbus/BluntProtection">Blunt Protection (Limbus)</option>
    <option value="limbus/SlashFragility">Slash Fragility (Limbus)</option>
    <option value="limbus/PierceFragility">Pierce Fragility (Limbus)</option>
    <option value="limbus/BluntFragility">Blunt Fragility (Limbus)</option>

    <option value="limbus/Wrath">Wrath (Limbus)</option>
    <option value="limbus/Lust">Lust (Limbus)</option>
    <option value="limbus/Sloth">Sloth (Limbus)</option>
    <option value="limbus/Gluttony">Gluttony (Limbus)</option>
    <option value="limbus/Gloom">Gloom (Limbus)</option>
    <option value="limbus/Pride">Pride (Limbus)</option>
    <option value="limbus/Envy">Envy (Limbus)</option>


</datalist> 

<!-- Icon Selector Data END -->


	</div>
	</div>
<!-- Sheet Editor END -->


<br><br><br><br><br><br><br><br><br>


<rolltemplate class="sheet-rolltemplate-message">
    <div class="sheet-template-wrapper" style="background-color: #333; border-radius: 5px; color: #fff; padding: 5px;">

       {{icon}} {{#name}}<b>{{name}}</b>{{/name}}{{message}}
	{{#roll1}} {{roll1}} {{/roll1}}
    </div>
</rolltemplate>


<rolltemplate class="sheet-rolltemplate-shareB">
    	<div class="sheet-template-wrapper" style="background-color: #333; border-radius: 5px;  overflow: hidden; border: 1px #555 solid;">
    		<div class="sheet-template-wrapper" style="color: #fff; position: relative;">

		{{header}}

		{{body}}

		</div>
	</div>

</rolltemplate>

<rolltemplate class="sheet-rolltemplate-baseRoll">
    <div class="sheet-template-wrapper" style="background-color: #454545; border-radius: 5px; color: #eee; height: auto; padding: 5px; overflow: hidden;">
	<div style="position: relative;">
	{{#infodump}} {{infodump}} {{/infodump}}
	{{#roll1}}<div style="position: absolute; top: 2px; right: 0px;"><h4 style="background-color: #000; height: 25px; min-width: 30px; padding-left: 3px; padding-right: 3px; text-align: center; padding-top: 6px;">{{roll1}}</div> {{/roll1}}

	{{#challenge}}
	{{#roll1}}
	<div style="text-align: center; margin-top: 5px;">
	{{#rollLess() roll1 7}}
	<b data-i18n="message-failure">Failure...</b> <img src="https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/bad.png" style="width: 25px; height: 25px;">
	{{/rollLess() roll1 7}}

	{{#rollBetween() roll1 7 9}}
	<b data-i18n="message-normal">Partial Success</b> <img src="https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/normal.png" style="width: 25px; height: 25px;">
	{{/rollBetween() roll1 7 9}}

	{{#rollGreater() roll1 9}}
<b data-i18n="message-success">Success!</b> <img src="https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/good.png" style="width: 25px; height: 25px;">
	{{/rollGreater() roll1 9}}

	</div>
 	{{/roll1}}
	{{/challenge}}

	</div>


    </div>
</rolltemplate>

<script type="text/worker">


/* Auto: Recalculate derived stats */
on("change:instinct change:wisdom change:justice change:charm change:insight change:temperance change:repeating_global", function() {

getSectionIDs(`repeating_global`, idarray => {
        let id = `repeating_global_${idarray[0]}`;

	getAttrs(["instinct", "wisdom", "justice", "charm", "insight", "temperance", "distortState", "settingTestOption", `${id}_healthBase`, `${id}_healthStat`, `${id}_healthStatMod`, `${id}_healthRankMod`, `${id}_staggerBase`, `${id}_staggerStat`, `${id}_staggerStatMod`, `${id}_staggerRankMod`, `${id}_sanityBase`, `${id}_sanityStat`, `${id}_sanityStatMod`, `${id}_sanityRankMod`, `${id}_lightBase`, `${id}_lightRankMod`, `${id}_distortLightBase`, `${id}_distortLightRankMod`, `${id}_attStat`, `${id}_defStat`, `${id}_evdStat`], function(values) {

	let instinctVal = parseInt(values.instinct);
	let wisdomVal = parseInt(values.wisdom);
	let justiceVal = parseInt(values.justice);
	let charmVal = parseInt(values.charm);
	let insightVal = parseInt(values.insight);
	let temperanceVal = parseInt(values.temperance);

	let distortState = values.distortState;
	let optionstate = values.settingTestOption;

	let healthBase = parseInt(values[`${id}_healthBase`]);
	let healthStat = values[`${id}_healthStat`];
	let healthStatMod = parseInt(values[`${id}_healthStatMod`]);
	let healthRankMod = parseInt(values[`${id}_healthRankMod`]);

	let staggerBase = parseInt(values[`${id}_staggerBase`]);
	let staggerStat = values[`${id}_staggerStat`];
	let staggerStatMod = parseInt(values[`${id}_staggerStatMod`]);
	let staggerRankMod = parseInt(values[`${id}_staggerRankMod`]);

	let sanityBase = parseInt(values[`${id}_sanityBase`]);
	let sanityStat = values[`${id}_sanityStat`];
	let sanityStatMod = parseInt(values[`${id}_sanityStatMod`]);
	let sanityRankMod = parseInt(values[`${id}_sanityRankMod`]);

	let lightBase = parseInt(values[`${id}_lightBase`]);
	let lightRankMod = parseInt(values[`${id}_lightRankMod`]);

	let dlightBase = parseInt(values[`${id}_distortLightBase`]);
	let dlightRankMod = parseInt(values[`${id}_distortLightRankMod`]);

	let attStat = values[`${id}_attStat`];
	let defStat = values[`${id}_defStat`];
	let evdStat = values[`${id}_evdStat`];


	let ranknew = parseInt((instinctVal+wisdomVal+justiceVal+charmVal+insightVal+temperanceVal)/(6));
	let rnum = ranknew;
	let worknew = "4";

	if(rnum > 6){
	rnum = "6";
	}
	if(ranknew > 5){
	ranknew = "EX";
	worknew = "8";
	} 
	else if (ranknew == 5 || ranknew == 4){
	worknew = "8";
	}
	else if (ranknew == 3 || ranknew == "2"){
	worknew = "6";
	}

	let hpnew = parseInt(healthBase + (instinctVal * healthStatMod) + (rnum * healthRankMod));
	let stagresnew = parseInt(staggerBase + (charmVal * staggerStatMod) + (rnum * staggerRankMod));
	let spnew = parseInt(sanityBase + (wisdomVal * sanityStatMod) + (rnum * sanityRankMod));
	let mixVal = "";

	if(healthStat == "InstinctTemperance"){
	mixVal = parseInt((instinctVal + temperanceVal)/2);
	hpnew = parseInt(healthBase + (mixVal * healthStatMod) + (rnum * healthRankMod));
	}

	if(staggerStat == "CharmJustice"){
	mixVal = parseInt((charmVal + justiceVal)/2);
	stagresnew = parseInt(staggerBase + (mixVal * staggerStatMod) + (rnum * staggerRankMod));
	}

	if(sanityStat == "WisdomInsight"){
	mixVal = parseInt((wisdomVal + insightVal)/2);
	spnew = parseInt(sanityBase + (mixVal * sanityStatMod) + (rnum * sanityRankMod));
	}


	let lightnew = parseInt((rnum * lightRankMod) + lightBase);

	if(distortState == "true"){
	lightnew = parseInt((rnum * dlightRankMod) + dlightBase);
	}

	/* Att, Def, Evd Calculation */
	let newAtt = instinctVal;
	let newDef = temperanceVal;
	let newEvd = insightVal;

	if(attStat == "Rank"){
	newAtt = rnum;
	}
	else if(attStat == "InstinctWisdom"){
	newAtt = parseInt((instinctVal + wisdomVal)/2);
	}

	if(defStat == "Rank"){
	newDef = rnum;
	}
	else if(defStat == "TemperanceCharm"){
	newDef = parseInt((temperanceVal + charmVal)/2);
	}

	if(evdStat == "Rank"){
	newEvd = rnum;
	}
	else if(evdStat == "InsightJustice"){
	newEvd = parseInt((insightVal + justiceVal)/2);
	}	


	setAttrs({"charRankBase":ranknew, "charRankNum":rnum, "HP_max":hpnew, "StagRes_max":stagresnew, "SP_max":spnew, "Light_max":lightnew, "distortWorkBase":worknew, "attPower":newAtt, "defPower":newDef, "evdPower":newEvd});

		});
	});
});

/* Recalculate level */
on("change:EXP change:repeating_global:expCalc", function(){
getSectionIDs(`repeating_global`, idarray => {
        let id = `repeating_global_${idarray[0]}`;

	getAttrs(["EXP", `${id}_expCalc`], function(values) {
		let exp = parseInt(values.EXP);
		let calc = parseInt(values[`${id}_expCalc`]);
		let newlevel = parseInt(exp/calc);

		setAttrs({"level":newlevel});


		});
	});
});

/* Set Icon Style */
on("change:settingLimbusStyle", function() {
getSectionIDs(`repeating_global`, idarray => {
        let id = `repeating_global_${idarray[0]}`;
	output = [];

	getAttrs(["settingLimbusStyle", `${id}_iconStyle`], function(values) {

	if(values.settingLimbusStyle != values[`${id}_iconStyle`]){
	output[`${id}_iconStyle`] = values.settingLimbusStyle;

	setAttrs(output);
	}

		});
	});
});

on("change:repeating_global:iconStyle", function() {
getSectionIDs(`repeating_global`, idarray => {
        let id = `repeating_global_${idarray[0]}`;
	output = [];

	getAttrs(["settingLimbusStyle", `${id}_iconStyle`], function(values) {

	if(values.settingLimbusStyle != values[`${id}_iconStyle`]){
	output["settingLimbusStyle"] = values[`${id}_iconStyle`];

	setAttrs(output);
	}

		});
	});
});


/* Edit toggle */
on("change:settingHideShare", function() {
	setAttrs({"settingEditMode":"0"});

});

/* Auto: Community Rules (Test) */
on("change:settingTestOption", function() {

getAttrs(["settingTestOption", "instinct", "charRankNum"], function(values) {

	let state = values.settingTestOption;

	/* Rank-based Attack Power */
	let instinct = parseInt(values.instinct);
	let charRankNum = parseInt(values.charRankNum);
	
	if(state == "true"){
	setAttrs({"attPower":charRankNum});
	}
	else{
	setAttrs({"attPower":instinct});
	}


	});

});

/* Auto: Setting Evade influence */
on("change:settingEvdInfluence", function() {

getSectionIDs(`repeating_global`, idarray => {
        let id = `repeating_global_${idarray[0]}`;

getAttrs(["settingEvdInfluence", `${id}_evdAilment`, "insight", "Haste", "Bind", "Endurance", "Disarm"], function(values) {

	let evdinfluence = values[`${id}_evdAilment`];
	let newevd = "0";	
	let insight = parseInt(values.insight);
	let positive = 0;
	let negative = 0;
	
	if(evdinfluence == "HasteBind"){
	positive = parseInt(values.Haste);
	negative = parseInt(values.Bind);

	setAttrs({"evdPositive":positive, "evdNegative":negative});
	}
	else{
	positive = parseInt(values.Endurance);
	negative = parseInt(values.Disarm);

	setAttrs({"evdPositive":positive, "evdNegative":negative});
	}


		});
	});

});

/* Auto: Set Distortion state */
on("change:distortState", function() {

getSectionIDs(`repeating_global`, idarray => {
        let id = `repeating_global_${idarray[0]}`;

	getAttrs(["distortState", "distortStateTemp", "character_name", "character_nameBase", "distort_name", "egoCondition", "egoConditionTemp", "settingDistortSave", "editorInput", "editorOutput", `${id}_lightBase`, `${id}_lightRankMod`, `${id}_distortLightBase`, `${id}_distortLightRankMod`, "charRankNum"], function(values) {
	let state = values.distortState;
	let prevstate = values.distortStateTemp;

	let updatename = "";
	let origname = values.character_name;
	let basename = values.character_nameBase;
	let distortname = values.distort_name;
	let distortstring = getTranslationByKey("message-distorted");
	let newcondition = "";
	let currentcondition = values.egoCondition;
	let prevcondition = values.egoConditionTemp;
	let save = values.settingDistortSave;

	let rnum = parseInt(values.charRankNum);

	let lightBase = parseInt(values[`${id}_lightBase`]);
	let lightRank = parseInt(values[`${id}_lightRankMod`]);

	let dlightBase = parseInt(values[`${id}_distortLightBase`]);
	let dlightRank = parseInt(values[`${id}_distortLightRankMod`]);

	let light = values.Light_max;

	if(prevcondition == "" || (state == "true" && prevcondition != currentcondition)){
	prevcondition = values.egoCondition;
	}

	if(origname != "" && basename == ""){
	basename = origname;
	newcondition = prevcondition;
	}

	if(state == "true" && distortname != ""){

	updatename = distortname;
	newcondition = "AlwaysActive";

	}
	else if(state == "true" && distortname == ""){
	updatename = basename + " (" + distortstring + ")";
	newcondition = "AlwaysActive";	
	}
	else {
	newcondition = prevcondition;
	updatename = basename;
	}

	/* Auto Save/Load data */
	if(save == "true"){
	let input = values.editorInput;
	let output = values.editorOutput;

	setAttrs({"editorOutput":input, "editorInput":output});
	dataExport("All");
	dataImport();

	
	}

	if(state == "true"){
	light = parseInt((rnum * dlightRank) + dlightBase);
	}
	else {
	light = parseInt((rnum * lightRank) + lightBase);
	}


	setAttrs({"character_nameBase":basename, "character_name":updatename, "Light_max":light, "Light":light});

		});
	});
});

/* Auto: Update Distortion Name */
on("change:distort_name", function() {
	getAttrs(["distortState", "distort_name", "character_nameBase"], function(values) {
	let name = values.distort_name;
	let basename = values.character_nameBase;
	let state = values.distortState;
	let distortstring = getTranslationByKey("message-distorted");

	if(state == "true" && name != ""){

	setAttrs({"character_name":name});

	}
	else if(state == "true" && name == ""){
	name = basename + " (" + distortstring + ")";

	setAttrs({"character_name":name});

	}

	});
});

/* Auto: Update Base name */
on("change:character_nameBase", function() {
	getAttrs(["distortState", "character_name", "character_nameBase"], function(values) {
	let name = values.character_name;
	let basename = values.character_nameBase;
	let state = values.distortState;

	if(state != "true" && name != basename){

	setAttrs({"character_name":basename});

	}

	});
});


/* Auto: Initialize Base name */
on("sheet:opened", function() {
	getAttrs(["distortState", "character_name", "character_nameBase"], function(values) {
	let name = values.character_name;
	let basename = values.character_nameBase;
	let state = values.distortState;

	if(state != "true" && basename != name){

	setAttrs({"character_nameBase":name});

	}

	});
});



/* Auto: Detect Stagger */
on("change:StagRes", function() {

	getAttrs(["StagRes", "StaggerState"], function(values) {
	let currentstag = parseInt(values.StagRes);
	let currentstate = values.StaggerState;

		if(currentstag <= 0 && currentstate == "0"){

		setAttrs({"StaggerState":"Staggered"});

 
		} /* Value check end */

	});
});

/* Auto: Recalc Advantage state */
on("change:advNum change:disadvNum", function() {
	getAttrs(["advNum", "disadvNum"], function(values) {
	let currentadv = parseInt(values.advNum);
	let currentdisadv = parseInt(values.disadvNum);
	let newstate = "0";

	if(currentadv > currentdisadv){
	newstate = "Advantage";
	}
	else if(currentdisadv > currentadv){
	newstate = "Disadvantage";
	}


	setAttrs({"advNum":currentadv, "disadvNum":currentdisadv, "advState":newstate});

	});
});

/* Auto: Recalc Advantages */
on("change:Fortune change:Paralysis", function() {
	getAttrs(["Fortune", "Paralysis"], function(values) {
	let currentadv = parseInt(values.Fortune);
	let currentdisadv = parseInt(values.Paralysis);
	
	let newadv = currentadv - currentdisadv;
	let newdisadv = currentdisadv - currentadv;
	let newstate = "0";

	if(newadv <= 0){
	newadv = "0";
	}
	
	if(newdisadv <= 0){
	newdisadv = "0";
	}

	if(newadv > newdisadv){
	newstate = "Advantage";
	}
	else if(newdisadv > newadv){
	newstate = "Disadvantage";
	}


	setAttrs({"advNum":newadv, "disadvNum":newdisadv, "advState":newstate});

	});
});

/* Auto: Detect Hostile */
on("change:distortCounter", function() {
	getAttrs(["settingAutoDetect", "HostileState", "distortCounter"], function(values) {
	let detect = values.settingAutoDetect;
	let hostilestate = values.HostileState;
	let currentcounter = parseInt(values.distortCounter);

	/* AutoDetect check */
	if(detect != "0"){

		if(currentcounter <= 0 && hostilestate == "0"){
			setAttrs({"HostileState":"Hostile"});
 
		}
		else if(currentcounter > 0 && hostilestate != "0"){
		setAttrs({"HostileState":"0"});


		} /* Value check end */

	} /* AutoDetect check end */

		});
});



/* Auto: Detect Panic */
on("change:SP", function() {
	getAttrs(["settingAutoDetect", "settingMuteMessage", "PanicState", "SP"], function(values) {
	let detect = values.settingAutoDetect;
	let mutemessage = values.settingMuteMessage;
	let panicstate = values.PanicState;
	let currentsan = parseInt(values.SP);

	/* AutoDetect check */
	if(detect != "0"){
		currentsan = parseInt(values.SP);

		if(currentsan <= 0 && panicstate == "0"){
			setAttrs({"PanicState":"Panic"});
 
		}
		else if(currentsan > 0 && panicstate != "0"){
		setAttrs({"PanicState":"0"});


		} /* Value check end */

	} /* AutoDetect check end */

		});
});

/* Auto: HP related updates (Detect Defeat, Detect EGO activation) */
on("change:HP", function() {

	getAttrs(["settingAutoDetect", "settingMuteMessage", "DefeatState", "egoActiveState", "HP", "HP_max", "egoCondition"], function(values) {
	let detect = values.settingAutoDetect;
	let mutemessage = values.settingMuteMessage;
	let defeatstate = values.DefeatState;
	let iconnew = "";
	let currenthp = parseInt(values.HP);
	let halfhp = parseInt((values.HP_max) / 2);
	let egocon = values.egoCondition;
	let egostate = values.egoActiveState;

	/* EGO check*/
	if(egocon == "HalfHealth" && currenthp <= halfhp && egostate != "true"){
		setAttrs({"egoActiveState":"true"});
	}

	/* Defeat check */
	if(currenthp <= 0 && detect != "0" && defeatstate == "0"){

		setAttrs({"DefeatState":"Defeated"});

		} /* Defeat check end */

	});

});

/* Auto: EGO - Clear skill select */
on("change:egoActiveState", function() {

	getAttrs(["egoActiveState"], function(values) {
	let egostate = values.egoActiveState;
	output = {};

	if(egostate == "0"){
	output["skillSelect"] = "0";
	} 

	output["toolSelect"] = "";

	setAttrs(output);
	});

});

/* Auto: Skill loadout change - Clear skill select */
on("change:skill1Type change:skill2Type change:skill3Type change:skill4Type change:skill5Type change:skill6Type change:egoSkill1Type change:egoSkill2Type change:egoSkill3Type change:egoSkill4Type change:egoSkill5Type change:egoSkill6Type", function() {

	setAttrs({"skillSelect":"0"});


});

/* Auto: Hostile State updates */
on("change:HostileState", function() {
	getAttrs(["distortCounter", "distortCounter_max", "HostileState", "settingWhisperRolls", "settingWhisperTarget", "settingMuteMessage", "messageOverride", "settingLimbusStyle"], function(values) {

	let currentstate = values.HostileState;
	let currentcounter = values.distortCounter;
	let messagestate = values.settingMuteMessage;
	let overridecheck = values.messageOverride;

	let style = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/images/ailments/";
	if(values.settingLimbusStyle == "true"){
	style = style + "limbus/";
	}

	let iconnew = "<img src='" + style + "Hostile.png' style='width: 25px; height: 25px;' >";

	/* Whisper roll */
	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	if(overridecheck == "true"){
	messagestate = "true";
	setAttrs({"messageOverride":"0"});
	}

	if(currentstate != "Hostile" && currentcounter == "0"){
	let newcounter = values.distortCounter_max;
	setAttrs({"distortCounter":newcounter});

	}

	setAttrs({"dummyIcon":iconnew});

	/* Translation prep */
	let langStateTrue = " is Hostile!";
	let langStateFalse = " is no longer Hostile.";

	if(getTranslationByKey("message-hostile1") != false){

	langStateTrue = getTranslationByKey("message-hostile1");
	langStateFalse = getTranslationByKey("message-hostile2");
	}
	
	if(messagestate != "true" && currentstate != "Hostile"){
	startRoll((whisper + "&{template:message} {{icon=@{dummyIcon}}} {{name=@{character_name}}} {{message=" + langStateFalse + "}}"), (results) => {

            finishRoll(results.rollId, {} );
        });
	}
	else if(messagestate != "true" && currentstate == "Hostile"){
	startRoll((whisper + "&{template:message} {{icon=@{dummyIcon}}} {{name=@{character_name}}} {{message=" + langStateTrue + "}}"), (results) => {

            finishRoll(results.rollId, {} );
        });
	}

	});
});

/* Auto: Panic State updates */
on("change:PanicState", function() {
	getAttrs(["SP", "PanicState", "settingWhisperRolls", "settingWhisperTarget", "settingMuteMessage", "messageOverride", "settingLimbusStyle"], function(values) {

	let currentstate = values.PanicState;
	let messagestate = values.settingMuteMessage;
	let overridecheck = values.messageOverride;

	let style = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/images/ailments/";
	if(values.settingLimbusStyle == "true"){
	style = style + "limbus/";
	}

	let iconnew = "<img src='" + style + "Panic.png' style='width: 25px; height: 25px;' >";

	/* Whisper roll */
	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	if(overridecheck == "true"){
	messagestate = "true";
	setAttrs({"messageOverride":"0"});
	}

	setAttrs({"dummyIcon":iconnew});

	/* Translation prep */
	let langStateTrue = " went into Panic!";
	let langStateFalse = " is no longer Panicked";

	if(getTranslationByKey("message-panic1") != false){

	langStateTrue = getTranslationByKey("message-panic1");
	langStateFalse = getTranslationByKey("message-panic2");
	}
	
	if(messagestate != "true" && currentstate != "Panic"){
	startRoll((whisper + "&{template:message} {{icon=@{dummyIcon}}} {{name=@{character_name}}} {{message=" + langStateFalse + "}}"), (results) => {

            finishRoll(results.rollId, {} );
        });
	}
	else if(messagestate != "true" && currentstate == "Panic"){
	startRoll((whisper + "&{template:message} {{icon=@{dummyIcon}}} {{name=@{character_name}}} {{message=" + langStateTrue + "}}"), (results) => {

            finishRoll(results.rollId, {} );
        });
	}

	});
});

/* Auto: Defeat State updates */
on("change:DefeatState", function() {
	getAttrs(["DefeatState", "settingWhisperRolls", "settingWhisperTarget", "settingMuteMessage", "messageOverride", "settingLimbusStyle"], function(values) {

	let currentstate = values.DefeatState;
	let messagestate = values.settingMuteMessage;
	let overridecheck = values.messageOverride;

	let style = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/images/ailments/";
	if(values.settingLimbusStyle == "true"){
	style = style + "limbus/";
	}

	let iconnew = "<img src='" + style + "Defeat.png' style='width: 25px; height: 25px;'>";

	if(overridecheck == "true"){
	messagestate = "true";
	setAttrs({"messageOverride":"0"});
	}

	setAttrs({"dummyIcon":iconnew});

	/* Whisper roll */
	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Translation prep */
	let langDefeat = " can no longer fight.";

	if(getTranslationByKey("message-defeat") != false){

	langDefeat = getTranslationByKey("message-defeat");

	}
	
	if(messagestate != "true" && currentstate == "Defeated"){
	startRoll((whisper + "&{template:message} {{icon=@{dummyIcon}}} {{name=@{character_name}}} {{message=" + langDefeat + "}}"), (results) => {

            finishRoll(results.rollId, {} );
        });
	}

	});
});

/* Auto: Stagger State updates */
on("change:StaggerState", function() {

getSectionIDs(`repeating_global`, idarray => {
        let id = `repeating_global_${idarray[0]}`;

	getAttrs(["StagRes", "StaggerState", "settingWhisperRolls", "settingWhisperTarget", "settingMuteMessage", "SP", "egoCondition", "egoActiveState", "messageOverride", "distortState", `${id}_staggerSanity`, "settingLimbusStyle"], function(values) {

	let style = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/images/ailments/";
	if(values.settingLimbusStyle == "true"){
	style = style + "limbus/";
	}

	let iconnew = "<img src='" + style + "FragileStagger.png' style='width: 25px; height: 25px;' >";
	let currentstate = values.StaggerState;
	let messagestate = values.settingMuteMessage;
	let egocon = values.egoCondition;
	let egostate = values.egoActiveState;
	let sanity = parseInt(values.SP) - parseInt(values[`${id}_staggerSanity`]);

	if(egocon == "OnStagger" && currentstate != "0"){
	setAttrs({"egoActiveState":"true"});
	}

	if(currentstate == "Staggered" && values.distortState != "true") {
	setAttrs({"SP":sanity});
	}

	let overridecheck = values.messageOverride;
	if(overridecheck == "true"){
	messagestate = "true";
	setAttrs({"messageOverride":"0"});
	}

	setAttrs({"dummyIcon":iconnew});

	/* Whisper roll */
	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Translation prep */
	let langStateTrue = " is Staggered!";
	let langStateFalse = " is no longer Staggered.";

	if(getTranslationByKey("message-stagger1") != false){

	langStateTrue = getTranslationByKey("message-stagger1");
	langStateFalse = getTranslationByKey("message-stagger2");
	}
	
	if(messagestate != "true" && currentstate != "Staggered"){
	startRoll((whisper + "&{template:message} {{icon=@{dummyIcon}}} {{name=@{character_name}}} {{message=" + langStateFalse + "}}"), (results) => {

            finishRoll(results.rollId, {} );
        });
	}
	else if(messagestate != "true" && currentstate == "Staggered"){
	startRoll((whisper + "&{template:message} {{icon=@{dummyIcon}}} {{name=@{character_name}}} {{message=" + langStateTrue + "}}"), (results) => {

            finishRoll(results.rollId, {} );
        });
	}

		});
	});
});

/* Auto: Immobile State updates */
on("change:ImmobileState", function() {
	getAttrs(["ImmobileState", "settingWhisperRolls", "settingWhisperTarget", "settingMuteMessage", "messageOverride", "settingLimbusStyle"], function(values) {


	let currentstate = values.ImmobileState;
	let messagestate = values.settingMuteMessage;
	let overridecheck = values.messageOverride;

	let style = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/images/ailments/";
	if(values.settingLimbusStyle == "true"){
	style = style + "limbus/";
	}
	let iconnew = "<img src='" + style + "Immobile.png' style='width: 25px; height: 25px;'>";

	if(overridecheck == "true"){
	messagestate = "true";
	setAttrs({"messageOverride":"0"});
	}

	setAttrs({"dummyIcon":iconnew});

	/* Whisper roll */
	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Translation prep */
	let langStateTrue = " is Immobile!";
	let langStateFalse = " is no longer Immobile.";

	if(getTranslationByKey("message-immobile1") != false){

	langStateTrue = getTranslationByKey("message-immobile1");
	langStateFalse = getTranslationByKey("message-immobile2");
	}
	
	if(messagestate != "true" && currentstate != "Immobile"){
	startRoll((whisper + "&{template:message} {{icon=@{dummyIcon}}} {{name=@{character_name}}} {{message=" + langStateFalse + "}}"), (results) => {

            finishRoll(results.rollId, {} );
        });
	}
	else if(messagestate != "true" && currentstate == "Immobile"){
	startRoll((whisper + "&{template:message} {{icon=@{dummyIcon}}} {{name=@{character_name}}} {{message=" + langStateTrue + "}}"), (results) => {

            finishRoll(results.rollId, {} );
        });
	}

	});
});

/* Auto: Seal State updates */
on("change:SealState", function() {
	getAttrs(["SealState", "settingWhisperRolls", "settingWhisperTarget", "settingMuteMessage", "messageOverride", "settingLimbusStyle"], function(values) {

	let currentstate = values.SealState;
	let messagestate = values.settingMuteMessage;
	let overridecheck = values.messageOverride;

	let style = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/images/ailments/";
	if(values.settingLimbusStyle == "true"){
	style = style + "limbus/";
	}

	let iconnew = "<img src='" + style + "Seal.png' style='width: 25px; height: 25px;'>";

	if(overridecheck == "true"){
	messagestate = "true";
	setAttrs({"messageOverride":"0"});
	}

	setAttrs({"dummyIcon":iconnew});

	/* Whisper roll */
	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Translation prep */
	let langStateTrue = " is Sealed!";
	let langStateFalse = " is no longer Sealed.";

	if(getTranslationByKey("message-seal1") != false){

	langStateTrue = getTranslationByKey("message-seal1");
	langStateFalse = getTranslationByKey("message-seal2");
	}
	
	if(messagestate != "true" && currentstate != "Seal"){
	startRoll((whisper + "&{template:message} {{icon=@{dummyIcon}}} {{name=@{character_name}}} {{message=" + langStateFalse + "}}"), (results) => {

            finishRoll(results.rollId, {} );
        });
	}
	else if(messagestate != "true" && currentstate == "Seal"){
	startRoll((whisper + "&{template:message} {{icon=@{dummyIcon}}} {{name=@{character_name}}} {{message=" + langStateTrue + "}}"), (results) => {

            finishRoll(results.rollId, {} );
        });
	}

	});
});

/* Auto: Update Evd power (Endurance/Disarm) */
on("change:Endurance change:Disarm", function() {

getSectionIDs(`repeating_global`, idarray => {
        let id = `repeating_global_${idarray[0]}`;

	getAttrs(["settingEvdInfluence", `${id}_evdAilment`, "evdPositive", "evdNegative", "Endurance", "Disarm"], function(values) {
	let evdinfluence = values[`${id}_evdAilment`];

	let endurancenum = parseInt(values.Endurance);
	let disarmnum = parseInt(values.Disarm);

	/* Update Evd */
	if(evdinfluence == "EnduranceDisarm"){
	setAttrs({"evdPositive":endurancenum, "evdNegative":disarmnum});

	}

		});
	});
});

/* Auto: Update calculated speed | Update Evd power (Haste/Bind) */
on("change:Haste change:Bind change:dynamicSpeed change:baseSpeed", function() {

getSectionIDs(`repeating_global`, idarray => {
        let id = `repeating_global_${idarray[0]}`;

	getAttrs(["settingTurnUpdate", "baseSpeed", "prevSpeed", "Haste", "Bind", "character_name", "settingEvdInfluence", `${id}_evdAilment`, "evdPositive", "evdNegative"], function(values) {
	let turnupdate = values.settingTurnUpdate;
	let evdinfluence = values[`${id}_evdAilment`];

	let basespeed = parseInt(values.baseSpeed);
	let prevspeed = parseInt(values.prevSpeed);
	let dynamicspeed = parseInt(values.dynamicSpeed);

	let hastenum = parseInt(values.Haste);
	let bindnum = parseInt(values.Bind);
	let name = values.character_name;
	let newspeed = basespeed + hastenum - bindnum;
	let command = "[[" + newspeed + "&{tracker} ]]";
	let message = "Speed update: ";
	
	setAttrs({"calcSpeed":newspeed, "prevSpeed":newspeed});

	/* Update Evd */
	if(evdinfluence == "HasteBind"){
	setAttrs({"evdPositive":hastenum, "evdNegative":bindnum});

	}

	if(turnupdate == "true"){
	if(prevspeed != newspeed){
	startRoll("/w @{character_name} Speed updated: [[@{calcSpeed} &{tracker}]]", (results) => {
            finishRoll(results.rollId, {} );
       			 });
	}
	}	


		});
	});
});


/* Action: Reset Ailments */
   on('clicked:resetAilments', function() {
	getAttrs(["SP"], function(values) {
	let newsan = parseInt(values.SP);

	if(newsan <= "0"){
	newsan = "1";
	}

	setAttrs({"messageOverride":"true"});

	setAttrs({  
    	"StaggerState":"0", "PanicState":"0", "SealState":"0", "ImmobileState":"0", "DefeatState":"0", "Burn": "0", "Bleed":"0", "Paralysis":"0", "Protection": "0", "StaggerProtection": "0", "Fragile": "0", "Strength": "0", "Feeble": "0", "Endurance": "0", "Disarm": "0", "Haste": "0", "Bind": "0", "Charge":"0", "Smoke": "0", "Seal":"0", "Fortune":"0", "SP":newsan});	});


	/* Custom Ailments */
        getSectionIDs(`repeating_ailments`, idarray => {
            const fieldnames = idarray.reduce((rows,id) => [...rows, `repeating_ailments_${id}_ailNum`], '');
            getAttrs([...fieldnames], v => {
                const output = {};
                idarray.forEach(id => {
                    output[`repeating_ailments_${id}_ailNum`] = 0;
                });
                setAttrs(output);
            });
        });


});

/*Action: Reset uses */
on('clicked:resetUses', function() {
	getAttrs(["tool1Reusable", "tool1Uses_max", "tool2Reusable", "tool2Uses_max", "tool3Reusable", "tool3Uses_max", "tool4Reusable", "tool4Uses_max", "weapon1Uses_max", "weapon1UseType", "weapon2Uses_max", "weapon2UseType", "weapon3Uses_max", "weapon3UseType", "weapon4Uses_max", "weapon4UseType", "egoUses_max", "egoUseType"], function(values) {
	
	let output = {};

	if(values.tool1Reusable == "Reusable"){
	output["tool1Uses"] = values.tool1Uses_max;
	}
	if(values.tool2Reusable == "Reusable"){
	output["tool2Uses"] = values.tool2Uses_max;
	}
	if(values.tool3Reusable == "Reusable"){
	output["tool3Uses"] = values.tool3Uses_max;
	}
	if(values.tool4Reusable == "Reusable"){
	output["tool4Uses"] = values.tool4Uses_max;
	}

	if(values.weapon1UseType == "Reload"){
	output["weapon1Uses"] = values.weapon1Uses_max;
	}
	if(values.weapon2UseType == "Reload"){
	output["weapon2Uses"] = values.weapon2Uses_max;
	}
	if(values.weapon3UseType == "Reload"){
	output["weapon3Uses"] = values.weapon3Uses_max;
	}
	if(values.weapon4UseType == "Reload"){
	output["weapon4Uses"] = values.weapon4Uses_max;
	}

	if(values.egoUseType == "Reload"){
	output["egoUses"] = values.egoUses_max;
	}



	setAttrs(output);

	});
});

/* Action: Reset health */
   on('clicked:resetHealth', function() {
	getAttrs(["HP_max", "StagRes_max", "SP_max", "Light_max", "distortCounter_max", "egoCondition"], function(values) {
	let egocon = values.egoCondition;
	let egonew = "0";
 	let hpnew = parseInt(values.HP_max);
	let stagrnew = parseInt(values.StagRes_max);
	let spnew = parseInt(values.SP_max);
	let lightnew = parseInt(values.Light_max);
	let counternew = parseInt(values.distortCounter_max);

	if(egocon == "AlwaysActive"){
	egonew = "true";
	}

	setAttrs({"messageOverride":"true"});

	setAttrs({"HP": hpnew, "StagRes": stagrnew, "SP":spnew, "Light":lightnew, "egoActiveState":egonew, "StaggerState":"0", "PanicState":"0", "SealState":"0", "ImmobileState":"0", "DefeatState":"0", "distortCounter":counternew});


 		});

	});

/* Action: Reset stats */
   on('clicked:resetStats', function() {

	setAttrs({"instinct":"0", "wisdom":"0", "justice":"0", "charm":"0", "insight":"0", "temperance":"0"});

	});

/* Action: Reset Observation level */
   on('clicked:resetObservation', function() {

	setAttrs({"obsDesc":"true", "obsSummary":"true", "obsCounter":"true", "obsWorkAmount":"true", "obsEffect":"0", "obsBehavior":"0", "obsTaboon":"0", "obsWorkResults":"0", "obsWorkPref":"0", "obsAppearance":"0", "obsAtmosphere":"0", "obsStory":"0"});

	});

/* Action: Reset global settings to default */
   on('clicked:resetGlobal', function() {

        getSectionIDs(`repeating_global`, idarray => {
           let id = `repeating_global_${idarray[0]}`;

	/* Translation prep */
	let langRulename = "Original Rulebook (Default)";

	if(getTranslationByKey("editor-rulename-placeholder") != false){

	langRulename = getTranslationByKey("editor-rulename-placeholder");
	}

	setAttrs({[`${id}_ruleName`]:langRulename, [`${id}_healthBase`]:"30", [`${id}_healthStat`]:"Instinct", [`${id}_healthStatMod`]:"6", [`${id}_healthRankMod`]:"6", [`${id}_staggerBase`]:"20", [`${id}_staggerStat`]:"Charm", [`${id}_staggerStatMod`]:"4", [`${id}_staggerRankMod`]:"4", [`${id}_sanityBase`]:"15", [`${id}_sanityStat`]:"Wisdom", [`${id}_sanityStatMod`]:"3", [`${id}_sanityRankMod`]:"0", [`${id}_lightBase`]:"3", [`${id}_lightRankMod`]:"1", [`${id}_distortLightBase`]:"5", [`${id}_distortLightRankMod`]:"1", [`${id}_expCalc`]:"8", [`${id}_attStat`]:"Instinct", [`${id}_defStat`]:"Temperance", [`${id}_evdStat`]:"Insight", [`${id}_evdAilment`]:"EnduranceDisarm", [`${id}_multiPenalty`]:"-2", [`${id}_multiStyle`]:"n", [`${id}_staggerRecoverPercent`]:"100", [`${id}_staggerRecoverBase`]:"0", [`${id}_staggerSanity`]:"5", [`${id}_burnDecayMode`]:"x", [`${id}_burnDecayVal`]:"0.5", [`${id}_bleedDecayMode`]:"x", [`${id}_bleedDecayVal`]:"0.5", [`${id}_smokeDecayMode`]:"+", [`${id}_smokeDecayVal`]:"-1", [`${id}_chargeDecayMode`]:"+", [`${id}_chargeDecayVal`]:"0", "settingLimbusStyle":"0"});

        	});

	});

/* Action: Export global settings from button */
   on('clicked:exportGlobal', function() {

	dataExportGlobal();

});

function dataExportGlobal() {
     getSectionIDs(`repeating_global`, idarray => {
	let id = `repeating_global_${idarray[0]}_`;
	let attrkey = [`${id}ruleName`, `${id}healthBase`, `${id}healthStat`, `${id}healthStatMod`, `${id}healthRankMod`, `${id}staggerBase`, `${id}staggerStat`, `${id}staggerStatMod`, `${id}staggerRankMod`, `${id}sanityBase`, `${id}sanityStat`, `${id}sanityStatMod`, `${id}sanityRankMod`, `${id}lightBase`, `${id}lightRankMod`, `${id}distortLightBase`, `${id}distortLightRankMod`, `${id}attStat`, `${id}defStat`, `${id}evdStat`, `${id}evdAilment`, `${id}multiPenalty`, `${id}multiStyle`, `${id}staggerRecoverPercent`, `${id}staggerRecoverBase`, `${id}staggerSanity`, `${id}burnDecayMode`, `${id}burnDecayVal`, `${id}bleedDecayMode`, `${id}bleedDecayVal`, `${id}smokeDecayMode`, `${id}smokeDecayVal`, `${id}chargeDecayMode`, `${id}chargeDecayVal`, `settingLimbusStyle`];
	let exportkey = attrkeyGlobal;
	let textbase = "";

	getAttrs(attrkey, function(values) {

		for(let i = 0; i< attrkey.length ;i++){
		tempval = values[attrkey[i]];

		if(tempval == undefined){
		tempval = "";
		}

   	 	textbase += "[`" + exportkey[i] + "`,`" + tempval + "`]";

		if(i < (attrkey.length - 1)){
		textbase += ", ";
		}

		}


	textbase = textbase.replace(/	/g, ''); /* Remove whitespace */
	

	setAttrs({"gameEditor": textbase });


		});
	});

}

/* Action: Import global settings */
   on('clicked:importGlobal', function() {

      getSectionIDs(`repeating_global`, idarray => {
           let id = `repeating_global_${idarray[0]}_`;

		dataImport("gameEditor", id, "global_");

		});

});

/* Action: Sync global settings */
on('clicked:syncGlobal', function() {

getSectionIDs(`repeating_global`, idarray => {
	let id = `repeating_global_${idarray[0]}_`;

	getAttrs(["syncLockGame", "syncStateGame", "gameEditor", `${id}gameSettingSource`], function(values) {
	let syncCheck = values.syncLockGame;
	let syncState = values.syncStateGame;

	let current = values.gameEditor;
	let source = values[`${id}gameSettingSource`];

	/* Translation prep */
	let langSync = "Sync";
	let langGameSettings = "Game Settings";
	let langSyncSuccess = " sync successful.";
	let langSyncFail =  " is locked.\n Unlock before syncing.";
	let langSyncNoChange = "No change. Current data is synced.\n(Press Import if display does not match.)";
	let langSyncEmpty = "No change. Source data is empty.";

	if(getTranslationByKey("sync-button") != false){
	langSync = getTranslationByKey("sync-button");
	langGameSettings = getTranslationByKey("editor-gamesettings");
	langSyncSuccess = getTranslationByKey("pop-sync-success");
	langSyncFail = getTranslationByKey("pop-sync-fail");
	langSyncNoChange = getTranslationByKey("pop-sync-synced");
	langSyncEmpty = getTranslationByKey("pop-sync-empty");

	}

	let syncHeader = langSync;
	let syncBody = "";
	let syncToggle = "0"; 
	const output = {};


	if(source != null && source != ""){
	if(source != current && syncCheck != "true"){

	setAttrs({"gameEditor":source});

	dataImport(`${id}gameSettingSource`, id, "global_");

	syncState = "0";
	syncBody = langGameSettings + langSyncSuccess;
	syncToggle = "true"; 

		}
	else if(source != current && syncCheck == "true"){
	syncBody = langGameSettings + langSyncFail;
	syncToggle = "true"; 

		}
	else if(source == current) {
	syncBody = langSyncNoChange;
	syncToggle = "true"; 

		}
	}
	else {
	syncHeader = langSync;
	syncBody = langSyncEmpty;
	syncToggle = "true"; 
	}

	output[`popup_messageHeader`] = syncHeader;
	output[`popup_messageBody`] = syncBody;
	output[`popup_display`] = syncToggle;
	output[`syncStateGame`] = syncState;

	setAttrs(output);


			});
		});

});



/* Action: Reset roll helper values */
on('clicked:resetHelpers', function() {
	getAttrs(["Paralysis", "Fortune"], function(values) {

	let newadvNum = values.Fortune;
	let newdisadvNum = values.Paralysis;

	setAttrs({"baseSpeed":"0", "Difficulty":"0", "advNum":newadvNum, "disadvNum":newdisadvNum, "advState":"0", "baseActNum":"0", "baseLuckNum":"0", "skillSelect":"0"});


 		});

	});


/* Auto: EGO condition update */
on("change:egoCondition", function() {

	getAttrs(["egoCondition", "HP", "HP_max", "StaggerState"], function(values) {
	let condition = values.egoCondition;
	let currenthp = parseInt(values.HP);
	let halfhp = parseInt((values.HP_max) / 2);
	let stagger = values.StaggerState;
	setAttrs({"egoActiveState":"0"});

	if(condition == "AlwaysActive"){
	setAttrs({"egoActiveState":"true"});

	}
	else if(condition == "OnStagger" && stagger != "0"){
	setAttrs({"egoActiveState":"true"});
	}
	else if(condition == "HalfHealth" && currenthp <= halfhp){
	setAttrs({"egoActiveState":"true"});
	}

	});
});

/* Checking for tool select changes */
on("change:tool1Name change:tool2Name change:tool3Name change:tool4Name change:tool1Uses change:tool2Uses change:tool3Uses change:tool4Uses change:special1Name change:special2Name ", function(){

	setAttrs({"toolSelect":""});

});

/* Checking for weapon range changes */
on("change:weapon1Range", function(){ 
	getAttrs(["weapon1Range"], function(values){
	if(values.weapon1Range == "Ranged"){setAttrs({"weapon1UseType":"Reload"}); }
	else { setAttrs({"weapon1UseType":"Limitless"}); }
	}); });

on("change:weapon2Range", function(){ 
	getAttrs(["weapon2Range"], function(values){
	if(values.weapon2Range == "Ranged"){setAttrs({"weapon2UseType":"Reload"}); }
	else { setAttrs({"weapon2UseType":"Limitless"}); }
	}); });

on("change:weapon3Range", function(){ 
	getAttrs(["weapon3Range"], function(values){
	if(values.weapon3Range == "Ranged"){setAttrs({"weapon3UseType":"Reload"}); }
	else { setAttrs({"weapon3UseType":"Limitless"}); }
	}); });

on("change:weapon4Range", function(){ 
	getAttrs(["weapon4Range"], function(values){
	if(values.weapon4Range == "Ranged"){setAttrs({"weapon4UseType":"Reload"}); }
	else { setAttrs({"weapon4UseType":"Limitless"}); }
	}); });

/* Auto: Update Skill Selection */
on("change:skillSelect", function() {

	/* Get IDs/names */
	getAttrs(["skillSelect"], function(values){
        let buttonid = values.skillSelect;
	let skillcat = buttonid.split('S')[0];

	let name = buttonid + "Name";
	let type = buttonid + "Type";
	let rank = buttonid + "Rank";
	let effect = buttonid + "Effect";
	let desc = buttonid + "Description";
	let light = buttonid + "Light";

	let diceA = buttonid + "Dice1";
	let diceB = buttonid + "Dice2";
	let diceC = buttonid + "Dice3";
	let noskill = "0";

	/* Get attributes */
	if(buttonid != "0"){
        getAttrs([`${name}`, `${type}`, `${rank}`, `${effect}`, `${desc}`, `${light}`, `${diceA}`, `${diceB}`, `${diceC}`, "Light"], function(values) {

	let skillname = values[name];
	let skillrank = values[rank];
	let skilltype = values[type];
	let skilleffect = values[effect];
	let skilldesc = values[desc];
	let skilllight = values[light];

	let skilldiceA = values[diceA];
	let skilldiceB = values[diceB];
	let skilldiceC = values[diceC];

	let currentLight = values.Light;

	if(currentLight < skilllight){
	noskill = "true";

	setAttrs({"selectName":skillname, "selectRank":"0", "selectType":"0", "selectEffect":skilleffect, "selectDescription":skilldesc, "selectLight":skilllight, "selectDice1":"0", "selectDice2":"0", "selectDice3":"0", "selectDefDice1":"0", "selectDefDice2":"0", "selectDefDice3":"0", "selectAtkDice1":"0", "selectAtkDice2":"0", "selectAtkDice3":"0", "selectEvdDice1":"0", "selectEvdDice2":"0", "selectEvdDice3":"0", "selectCancel":noskill});
	}
	else{
	if(skilltype == "Attack" || skilltype == "Mass"){
	setAttrs({"selectAtkDice1":skilldiceA, "selectAtkDice2":skilldiceB, "selectAtkDice3":skilldiceC, "selectDefDice1":"0", "selectDefDice2":"0", "selectDefDice3":"0", "selectEvdDice1":"0", "selectEvdDice2":"0", "selectEvdDice3":"0"});
		}
	else if(skilltype == "Defend"){
	setAttrs({"selectDefDice1":skilldiceA, "selectDefDice2":skilldiceB, "selectDefDice3":skilldiceC, "selectAtkDice1":"0", "selectAtkDice2":"0", "selectAtkDice3":"0", "selectEvdDice1":"0", "selectEvdDice2":"0", "selectEvdDice3":"0"});
		}
	else if(skilltype == "Evade"){
	setAttrs({"selectEvdDice1":skilldiceA, "selectEvdDice2":skilldiceB, "selectEvdDice3":skilldiceC, "selectDefDice1":"0", "selectDefDice2":"0", "selectDefDice3":"0", "selectAtkDice1":"0", "selectAtkDice2":"0", "selectAtkDice3":"0"});
		}
	else {
	setAttrs({"selectEvdDice1":"0", "selectEvdDice2":"0", "selectEvdDice3":"0", "selectDefDice1":"0", "selectDefDice2":"0", "selectDefDice3":"0", "selectAtkDice1":"0", "selectAtkDice2":"0", "selectAtkDice3":"0"});

		}

	setAttrs({"selectName":skillname, "selectRank":skillrank, "selectType":skilltype, "selectEffect":skilleffect, "selectDescription":skilldesc, "selectLight":skilllight, "selectDice1":skilldiceA, "selectDice2":skilldiceB, "selectDice3":skilldiceC, "selectCancel":noskill});
	}
		});
	}
else {
	setAttrs({"selectName":" ", "selectRank":"0", "selectType":"0", "selectEffect":" ", "selectDescription":" ", "selectLight":"0", "selectDice1":"0", "selectDice2":"0", "selectDice3":"0", "selectDefDice1":"0", "selectDefDice2":"0", "selectDefDice3":"0", "selectAtkDice1":"0", "selectAtkDice2":"0", "selectAtkDice3":"0", "selectEvdDice1":"0", "selectEvdDice2":"0", "selectEvdDice3":"0", "selectCancel":noskill});
	}

});

});


/* Action: Update ailments */
on('clicked:updateAilments', function() {

getSectionIDs(`repeating_global`, idarray => {
           let id = `repeating_global_${idarray[0]}`;

	getAttrs(["settingMuteMessage", "settingWhisperRolls", "settingWhisperTarget", "settingBurnImmune", "StaggerState", "SealState", "ImmobileState", "Burn", "burnResist", "burnResist_ego", "distortState", "egoActiveState", "egoType", "Smoke", "Charge", "HP", "StagRes_max", "settingLimbusStyle", `${id}_staggerRecoverPercent`, `${id}_staggerRecoverBase`, `${id}_burnDecayMode`, `${id}_burnDecayVal`, `${id}_smokeDecayMode`, `${id}_smokeDecayVal`, `${id}_chargeDecayMode`, `${id}_chargeDecayVal`], function(values) {

 	let burnnew = "0";
	let burncurrent = values.Burn;
	let burndecay = values[`${id}_burnDecayVal`];

	let stagnew = "0";

	let smokenew = "0";
	let smokecurrent = values.Smoke;
	let smokedecay = values[`${id}_smokeDecayVal`];

	let chargenew = "0";
	let chargecurrent = values.Charge;
	let chargedecay = values[`${id}_chargeDecayVal`]; 

	let nomessage = values.settingMuteMessage;
	let burnimmune = values.settingBurnImmune;
	let iconstyle = values.settingLimbusStyle;
	let stagcheck = values.StaggerState;
	let sealcheck = values.SealState;
	let immobilecheck = values.ImmobileState;

	let iconnew = "";

	let style = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/images/ailments/";
	if(values.settingLimbusStyle == "true"){
	style = style + "limbus/";
	}

	let burnresist = values.burnResist;
	let distortstate = values.distortState;
	let egostate = values.egoActiveState;
	let egotype = values.egoType;

	if(egostate == "true" && egotype == "Outfit" && distortstate != "true"){
	burnresist = values.burnResist_ego;
	}
	else if(distortstate == "true"){
	burnresist = parseInt(values.burnResist) + parseInt(values.burnResist_ego);
	}

	/* Whisper roll */
	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Burn processing */
	if (parseInt(values.Burn) > 0){

		/* Decay */
		if(burndecay == "n"){
		burndecay = parseInt(burncurrent);
		}
		else if(burndecay == "-n"){
		burndecay = parseInt(0 - burncurrent);
		}

		if(values[`${id}_burnDecayMode`] == "+"){
		burnnew = parseInt(burncurrent) + parseInt(burndecay);
		}
		else if(values[`${id}_burnDecayMode`] == "x"){
		burnnew = parseInt(parseInt(burncurrent) * parseFloat(burndecay));
		}
		else if(values[`${id}_burnDecayMode`] == "="){
		burnnew = parseInt(burndecay);
		}

	let burndamage = parseInt(values.Burn - burnresist);

	if(burndamage <= 0){
	burndamage = 0;
	}

	let burnresult = parseInt(values.HP - burndamage);

	let iconnew = "<img src='"+ style + "Burn.png' style='width: 25px; height: 25px;' >";

	if(burnimmune == "true"){
	burnresult = parseInt(values.HP);
	}

	/* Translation prep */
	let langBurn = " was burned for ";
	let langDamage = " damage.";
	let langResist = "Resistance: ";
	let langResistCombined = "";

	if(getTranslationByKey("message-burn") != false){

	langBurn = getTranslationByKey("message-burn");
	langDamage= getTranslationByKey("message-damage");
	langResist= getTranslationByKey("message-resist");
	}

	if(burnresist != "0"){
	langResistCombined = "<b style='opacity: 50%;'><br>(" + langResist + burnresist + ")</b>";
	}

	let burnmessage = langBurn + "<b>" + burndamage + "</b>" + langDamage + langResistCombined;

	setAttrs({"HP":burnresult, "dummy":burnmessage, "dummyIcon":iconnew});

	if(nomessage != "true" && burnimmune != "true"){
	startRoll((whisper + "&{template:message} {{icon=@{dummyIcon}}} {{name=@{character_name}}} {{message=@{dummy} }}"), (results) => {
            finishRoll(results.rollId, {} );
       			 });

		}
	}

	/* Smoke processing */
	if (parseInt(values.Smoke) > 0){

		if(smokedecay == "n"){
		smokedecay = parseInt(smokecurrent);
		}
		else if(smokedecay == "-n"){
		smokedecay = parseInt(0 - smokecurrent);
		}

		if(values[`${id}_smokeDecayMode`] == "+"){
		smokenew = parseInt(smokecurrent) + parseInt(smokedecay);
		}
		else if(values[`${id}_smokeDecayMode`] == "x"){
		smokenew = parseInt(parseInt(smokecurrent) * parseFloat(smokedecay));
		}
		else if(values[`${id}_smokeDecayMode`] == "="){
		smokenew = parseInt(smokedecay);
		}
	}

	/* Charge processing */
	if (parseInt(values.Charge) > 0){

		if(chargedecay == "n"){
		chargedecay = parseInt(chargecurrent);
		}
		else if(chargedecay == "-n"){
		chargedecay = parseInt(0 - chargecurrent);
		}

		if(values[`${id}_chargeDecayMode`] == "+"){
		chargenew = parseInt(chargecurrent) + parseInt(chargedecay);
		}
		else if(values[`${id}_chargeDecayMode`] == "x"){
		chargenew = parseInt(parseInt(chargecurrent) * parseFloat(chargedecay));
		}
		else if(values[`${id}_chargeDecayMode`] == "="){
		chargenew = parseInt(chargedecay);
		}
	}


	/* Stagger processing */
	if(stagcheck != "0"){
	stagnew = parseInt((values.StagRes_max) * parseFloat(parseInt(values[`${id}_staggerRecoverPercent`])/100) + parseInt(values[`${id}_staggerRecoverBase`]));

	setAttrs({"StaggerState":"0", "StagRes":stagnew});

	}

	/* Seal processing */
	if(sealcheck != "0"){

	setAttrs({"SealState":"0"});

	}

	/* Immobile processing */
	if(immobilecheck != "0"){

	setAttrs({"ImmobileState":"0"});

	}


	setAttrs({  
    	"Burn": burnnew, "Paralysis":"0", "Protection": "0", "StaggerProtection": "0", "Fragile": "0", "Strength": "0", "Feeble": "0", "Endurance": "0", "Disarm": "0", "Haste": "0", "Bind": "0", "Smoke": smokenew, "Charge":chargenew, "Fortune":"0", "baseActNum":"0"});

	});


	/* Custom Ailments */
        getSectionIDs(`repeating_ailments`, idarray => {
            const fieldnames = idarray.reduce((rows,id) => [...rows, `repeating_ailments_${id}_ailTrigger`], '');
            getAttrs([...fieldnames], v => {
  
                idarray.forEach(id => {

			let current = v[`repeating_ailments_${id}_ailTrigger`];

			if(current == "RoundEnd"){
			updateCustomAilment(id);
			}

                });

            });
        });
    });


});

function updateAdvantages(changeval){

getAttrs(["Paralysis", "Fortune", "advState", "advNum", "disadvNum"], function(values) {

	let newadvstate = values.advState;

	let newparalysis = values.Paralysis - parseInt(changeval);
	let newfortune = values.Fortune - parseInt(changeval);
	let newadvnum = values.advNum - parseInt(changeval);
	let newdisadvnum = values.disadvNum - parseInt(changeval);

	if(newfortune < 0){newfortune = 0;}
	if(newparalysis < 0){newparalysis = 0;}
	if(newadvnum < 0){ newadvnum = 0;}
	if(newdisadvnum < 0) { newdisadvnum = 0;}

	let comparePos = newadvnum;
	let compareNeg = newdisadvnum;

	const output = {};

	if(values.advState == "Advantage" && values.advNum != "0"){

		if(values.Fortune > 0){
		output["Fortune"] = newfortune;
		comparePos = newfortune;
		compareNeg = newparalysis;
		}
		else{
		output["advNum"] = newadvnum;}

	}
	else if(values.advState == "Disadvantage" && values.disadvNum != "0"){

		if(values.Paralysis > 0){
		output["Paralysis"] = newparalysis;
		comparePos = newfortune;
		compareNeg = newparalysis;
		}
		else{
		output["disadvNum"] = newdisadvnum;}
	}

	if(comparePos == compareNeg){
	newadvstate = "0";
	}
	else if(comparePos > compareNeg){
	newadvstate = "Advantage";
	}
	else if(comparePos < compareNeg){
	newadvstate = "Disadvantage";
	}

	output["advState"] = newadvstate;

	setAttrs(output);

	});

}

function updateBleed() {
getSectionIDs(`repeating_global`, idarray => {
           let id = `repeating_global_${idarray[0]}`;

getAttrs(["Bleed", "bleedResist", "bleedResist_ego", "distortState", "egoActiveState", "egoType", "HP", "settingBleedImmune", "settingWhisperRolls", "settingWhisperTarget", "settingMuteMessage", "settingLimbusStyle", "character_name", `${id}_bleedDecayMode`, `${id}_bleedDecayVal`], function(values) {
	let bleednew = "0";
	let bleedcurrent = values.Bleed;
	let bleeddecay = values[`${id}_bleedDecayVal`];

	let bleedimmune = values.settingBleedImmune;
	let bleedmessage = " ";
	let charname = values.character_name;
	let nomessage = values.settingMuteMessage;
	let hiddenroll = values.settingWhisperRolls;
	let bleedresist = values.bleedResist;

	let distortstate = values.distortState;
	let egostate = values.egoActiveState;
	let egotype = values.egoType;

	if(egostate == "true" && egotype == "Outfit" && distortstate != "true"){
	bleedresist = values.bleedResist_ego;
	}
	else if(distortstate == "true"){
	bleedresist = parseInt(values.bleedResist) + parseInt(values.bleedResist_ego);
	}

	/* Translation prep */
	let langBleed = " bled for ";
	let langDamage = " damage.";
	let langResist = "Resistance: "
	let langResistCombined = "";

	if(getTranslationByKey("message-bleed") != false){

	langBleed = getTranslationByKey("message-bleed");
	langDamage= getTranslationByKey("message-damage");
	langResist= getTranslationByKey("message-resist");
	}

	if(bleedresist != "0"){
	langResistCombined = "<b style='opacity: 50%;'><br>(" + langResist + bleedresist + ")</b>";
	}

	/* Bleed processing */
	if (parseInt(values.Bleed) > 0){

		/* Decay */
		if(bleeddecay == "n"){
		bleeddecay = parseInt(bleedcurrent);
		}
		else if(bleeddecay == "-n"){
		bleeddecay = parseInt(0 - bleedcurrent);
		}

		if(values[`${id}_bleedDecayMode`] == "+"){
		bleednew = parseInt(bleedcurrent) + parseInt(bleeddecay);
		}
		else if(values[`${id}_bleedDecayMode`] == "x"){
		bleednew = parseInt(parseInt(bleedcurrent) * parseFloat(bleeddecay));
		}
		else if(values[`${id}_bleedDecayMode`] == "="){
		bleednew = parseInt(bleeddecay);
		}

		let bleeddamage = parseInt(values.Bleed - bleedresist);

		if(bleeddamage < 0){
		bleeddamage = 0;
		}

		let bleedresult = parseInt(values.HP - bleeddamage);

		let style = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/images/ailments/";
		if(values.settingLimbusStyle == "true"){
		style = style + "limbus/";
		}

		let iconnew = "<img src='" + style + "Bleed.png' style='width: 25px; height: 25px;' >";
		if(bleedimmune == "true"){
		bleedresult = parseInt(values.HP);
		}

		if(nomessage != "true" && bleedimmune != "true"){
		bleedmessage = iconnew + " <b>" + charname + "</b>" + langBleed + "<b>" + bleeddamage + "</b>" + langDamage + langResistCombined;

		setAttrs({"dummy":bleedmessage, "HP":bleedresult, "Bleed":bleednew});


	/* Whisper roll */
	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/*--- Send roll --*/
	startRoll((whisper + "&{template:message} {{message=@{dummy} }}"), (results) => {
            finishRoll(results.rollId, { });
        });


	setAttrs({"dummy":" "});
	}
	}

		});
	});

}

/* Action: Combat Roll */
on('clicked:rollCombat', (info) => {
	/* Preparing values */
	/* Get IDs/names */
        let buttonid = info.htmlAttributes.id.split('_')[1];
        let rawcheck = info.htmlAttributes.id.split('_')[2];
        let numcheck = info.htmlAttributes.id.split('_')[3];

	let name = buttonid + "Name";
	let type = buttonid + "Type";
	let effect = buttonid + "Effect";
	let range = buttonid + "Range";
	let uses = "";
	let usesmax = "";
	let usetype = "";

	if(buttonid != "def" && buttonid != "evd"){
	uses = buttonid + "Uses";
	usesmax = buttonid + "Uses_max";
	usetype = buttonid + "UseType";
	}

	if(buttonid == "egoWeapon" || buttonid == "egoDef" || buttonid == "egoEvd"){
	uses = "egoUses";
	usesmax = "egoUses_max";
	usetype = "egoUseType";
	}

	let diceA = buttonid + "Dice1";
	let diceB = buttonid + "Dice2";
	let diceC = buttonid + "Dice3";

	let headercolor = "#888";
	let headertext = "#fff";

	let basetype = "";

	let newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/question.png";

	/* Action type formatting */
	if(buttonid == "def" && rawcheck != "distort"){
	basetype = "Defend";
	headercolor = "#7397d1";
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/defend.png";
	}
	else if(buttonid == "egoDef" || (buttonid == "def" && rawcheck == "distort")) {
	basetype = "Defend";
	headercolor = "#000";
	headertext = "#6d9eeb";
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoDef.png";
	}
	else if(buttonid == "evd" && rawcheck != "distort"){
	basetype = "Evade";
	headercolor = "#dbb748";
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/evade.png";
	}
	else if(buttonid == "egoEvd" || (buttonid == "evd" && rawcheck == "distort")){
	basetype = "Evade";
	headercolor = "#000";
	headertext = "#f1c232";
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoEvd.png";
	}
	else if(buttonid == "act"){
	basetype = "Action";
	headercolor = "#8e7cc3";
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/Portable.png";
	}
	else if(buttonid == "egoWeapon" || rawcheck == "distort"){
	basetype = "Attack";
	headercolor = "#000";
	headertext = "#cc4125";
	}
	else {
	basetype = "Attack";
	headercolor = "#c25944";
	}

	if(buttonid == "egoWeapon" || buttonid == "egoDef" || buttonid == "egoEvd"){
	effect = "egoEffect";
	name = "egoName";
	}
	else if(buttonid == "def" || buttonid == "evd"){
	effect = "outfitEffect";
	name = "outfitName";

	}
	

	/* Get attributes */

getSectionIDs(`repeating_global`, idarray => {
           let id = `repeating_global_${idarray[0]}`;

        getAttrs(["egoActiveState", "settingSimpleDisplay", "settingWhisperRolls", "settingWhisperTarget", "settingMultihitFull", `${id}_multiPenalty`, `${id}_multiStyle`, "character_name", "advState", "difficulty", "skillSelect", "baseActNum", "Light", "difficulty", "Endurance", "Disarm", "Strength", "Feeble", "evdPositive", "evdNegative", "advNum", "disadvNum", "attPower", "defPower", "evdPower", "selectName", "selectLight", "selectType", "selectDice1", "selectDice2", "selectDice3", "selectEffect", "distortWeaponDice1", "distortWeaponDice2", "distortWeaponDice3", "distortDefDice1", "distortDefDice2", "distortDefDice3", "distortEvdDice1", "distortEvdDice2", "distortEvdDice3", "distortEffect", "distortEffect2", "settingMultihitUses", "settingHideUses", `${name}`, `${type}`, `${range}`, `${effect}`, `${diceA}`, `${diceB}`, `${diceC}`, `${uses}`, `${usesmax}`, `${usetype}`], function(values) {

	let currentlight = parseInt(values.Light);
	let newlight = parseInt(values.Light);
	let charname = values.character_name;
	let simpledisplay = values.settingSimpleDisplay;
	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;

	let currentuses = parseInt(values[`${uses}`]);
	let newuses = parseInt(values[`${uses}`]);
	let maxuses = values[`${usesmax}`];
	let limitbehavior = values[`${usetype}`];
	let weaponuse = "";

	if(limitbehavior != "Limitless" && limitbehavior != null && values.settingHideUses != "true"){
	weaponuse = " (" + currentuses + "/" + maxuses + ")";
	}

	let multihitfull = values.settingMultihitFull;
	let multipenalty = parseInt(values[`${id}_multiPenalty`]);
	let multistyle = values[`${id}_multiStyle`];

	let distortstate = values.distortState;

	let skillselect = values.skillSelect;
	let advstate = values.advState;
	let difficulty = parseInt(values.difficulty);
	let lightmessage = "";

	let advcounter = values.advNum;
	let disadvcounter = values.disadvNum;

	let actcounter = parseInt(values.baseActNum) + 1;

	/* Base dice */
	let baseset = values;
	let basename = values[name];
	let baseeffect = values[effect];

	let basedice1 = values[diceA];
	let basedice2 = values[diceB];
	let basedice3 = values[diceC];

	let weapontype = values[type];
	let weaponrange = values[range];

	let basetypemessage = basetype;
	let weaponmessage = "";
	let attackmessage = "";

	/* Weapon icon variations */
	if(weapontype == "Slash" && buttonid != "egoWeapon" && rawcheck != "distort"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/Slash.png";
	}
	else if(weapontype == "Pierce" && buttonid != "egoWeapon" && rawcheck != "distort"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/pierce.png";
	}
	else if(weapontype == "Blunt" && buttonid != "egoWeapon" && rawcheck != "distort"){
	newicon= "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/blunt.png";
	}
	else if(weapontype == "Slash" && (buttonid == "egoWeapon" || rawcheck == "distort")){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoSlash.png";
	}
	else if(weapontype == "Pierce" && (buttonid == "egoWeapon" || rawcheck == "distort")){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoPierce.png";
	}
	else if(weapontype == "Blunt" && (buttonid == "egoWeapon" || rawcheck == "distort")){
	newicon= "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoBlunt.png";
	}

	/* Outfit name */ 
	if((buttonid == "def" || buttonid == "evd") && basename == ""){
	basename = getTranslationByKey("outfit-name") || "Outfit";

	}

	/* Translation prep */
	let langFrom = "From";
	let langRoll = "Roll";
	let langSkill = "Skill";
	let langEffectBase = "Base effect";
	let langEffectSkill = "Skill effect";
	let langAdv = "Adv.";
	let langDisadv = "Disadv.";
	let langMass = "Mass Attack";
	let skilleffect = "(No Skill)";
	let langDistortEffect = "Distortion Effect";

	if(getTranslationByKey("message-from") != false){

	langFrom = getTranslationByKey("message-from");
	langRoll = getTranslationByKey("message-roll");
	langSkill = getTranslationByKey("message-skill");
	langEffectBase = getTranslationByKey("message-effectbase");
	langEffectSkill = getTranslationByKey("message-effectskill");
	langAdv = getTranslationByKey("message-adv");
	langDisadv = getTranslationByKey("message-disadv");

	skilleffect = getTranslationByKey("message-noskill");
	langDistortEffect = getTranslationByKey("distort-effectText");
	langMass = getTranslationByKey("skill-type-Mass");

	if(basetype == "Attack" && buttonid != "egoWeapon"){
	weapontype = getTranslationByKey("weapon-type-" + weapontype) || "";
	weaponrange = getTranslationByKey("weapon-type-" + weaponrange) || "";
	}

	}


	/* Skill */
	let skillname = values.selectName;
	let skilltype = values.selectType;
	let skillcost = values.selectLight;
	let skilldice1 = "0";
	let skilldice2 = "0";
	let skilldice3 = "0";
	let skillmass = "";
	let skillinfo = "";

	if(currentlight >= skillcost && rawcheck != "raw"){

	

		if(skilltype == "Mass" && basetype == "Attack"){
		skilltype = "Attack";
		skillmass = " | " + langMass;


			if(buttonid == "egoWeapon" || rawcheck == "distort") {
			newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoWide.png";	
			}
			else {
			newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/Wide.png";
			}

		}

		if(basetype == skilltype){

		skilldice1 = values.selectDice1;
		skilldice2 = values.selectDice2;
		skilldice3 = values.selectDice3;

		newlight = currentlight - skillcost;

		lightmessage = " <span style='color: #fee2b0'>(" + langSkill + ")</span>";
		skillinfo= "<br><b>" + langSkill + ": </b>" + skillname + "<br>";

		skilleffect = values.selectEffect;

			}
		}

	/* Power */
	let activepower = "0";
	if(basetype == "Attack"){
	activepower = parseInt(values.attPower) + parseInt(values.Strength) - parseInt(values.Feeble);
	
	attackmessage = weapontype + " | " + weaponrange + weaponuse + skillmass + "<br>";

	}
	else if(basetype == "Defend"){
	activepower = parseInt(values.defPower) + parseInt(values.Endurance) - parseInt(values.Disarm);

	}
	else if(basetype == "Evade"){
	activepower = parseInt(values.evdPower) + parseInt(values.evdPositive) - parseInt(values.evdNegative);
	}

	/* Distortion modifiers */
	let distortdice1 = "0";
	let distortdice2 = "0";
	let distortdice3 = "0";
	let distorteffect = "";

	if(rawcheck == "distort" && basetype == "Attack"){
	distortdice1 = values.distortWeaponDice1;
	distortdice2 = values.distortWeaponDice2;
	distortdice3 = values.distortWeaponDice3;
	distorteffect = values.distortEffect;
	}
	else if(rawcheck == "distort" && basetype == "Defend"){
	distortdice1 = values.distortDefDice1;
	distortdice2 = values.distortDefDice2;
	distortdice3 = values.distortDefDice3;
	distorteffect = values.distortEffect2;

	}
	else if(rawcheck == "distort" && basetype == "Evade"){
	distortdice1 = values.distortEvdDice1;
	distortdice2 = values.distortEvdDice2;
	distortdice3 = values.distortEvdDice3;
	distorteffect = values.distortEffect2;

	}

	/* Dice formatting */
	combinedice1 = parseInt(basedice1) + parseInt(distortdice1) + parseInt(skilldice1);
	combinedice2 = parseInt(basedice2) + parseInt(distortdice2) + parseInt(skilldice2);
	combinedice3 = parseInt(basedice3) + parseInt(distortdice3) + parseInt(skilldice3) + parseInt(activepower);

	if(values.settingMultihitUses == "true" && limitbehavior != "Limitless" && limitbehavior != null){
		if(combinedice1 > currentuses){
		combinedice1 = newuses;
		newuses = "0";
		}
		else if(combinedice1 <= currentuses){
		newuses = newuses - combinedice1;
		if(newuses < 0){ newuses = "0";}
		}

	}
	else if(values.settingMultihitUses != "true" && limitbehavior != "Limitless" && limitbehavior != null) {
		newuses = newuses - 1;
		if(newuses < 0){ newuses = "0";}
	}

	/* Multi-hit roll prep */
	let multihitdebuff = "";

	if(combinedice1 > 1 && multihitfull != "true"){

		if(multistyle == "Flat"){
		multihitdebuff = multipenalty;	
		}
		else {
		multihitdebuff = parseInt((multipenalty)*(combinedice1 - 1));
		}

	}


	let rollformat = "";
	let baseformat = "1d" + combinedice2 + "+" + combinedice3 + "+(" + parseInt(difficulty) + ")" + multihitdebuff;

	/* Raw base dice override */
	if(rawcheck == "raw"){
	combinedice1 = basedice1;
	conbinedice2 = basedice2;
	combinedice3 = basedice3;

	}


	/* Advantage processing */
	let advmod = "";
	let advquantity = "";
	let advformat = "{(" + baseformat + "), (" + baseformat + ")}";
	let acounter = "0";
	let dcounter = combinedice1;
	let rollformatmessage = combinedice1 + "d" + combinedice2 + "+" + combinedice3 + "+(" + parseInt(difficulty) + ")" + multihitdebuff + lightmessage;

	if(advstate == "Advantage"){
	advmod = "kh1";
	acounter = advcounter;

	rollformatmessage = rollformatmessage + " <span style='color: #85a874;'>(" + langAdv;
	}

	else if(advstate == "Disadvantage"){
	advmod = "dh1";
	acounter = disadvcounter;

	rollformatmessage = rollformatmessage + " <span style='color: #cc4125;'>(" + langDisadv;
	}
	else{
	advstate == " ";
	}


	
	
	if(advstate != "0" && acounter == "0"){
	acounter = dcounter;
	rollformatmessage += ") </span>";
	}
	else if(acounter > dcounter && advstate != "0"){
	acounter = dcounter;
	rollformatmessage += " x" + acounter + ")</span>";
	}
	else if(acounter <= dcounter && advstate != "0"){
	rollformatmessage += " x" + acounter + ")</span>";
	}



	/* Multi-hit formatting */
	if(combinedice1 > 1){

		if(acounter != "0"){

		for(let i = 0; i< acounter ;i++){
   	 	rollformat += " [[" + advformat + advmod + "]]";
		dcounter = dcounter - 1;
			}
		}

		if(dcounter > 0){
		for(let i = 0; i< dcounter ;i++){
   	 	rollformat += " [[" + baseformat + "]]";
		}
		}

	}
	else {
		if(advstate != "0"){
		rollformat = "[[" + advformat + advmod + "]]";
		}
		else {

		rollformat = "[[" + baseformat + "]]";
		}

	}

	let distortformat = "";
	if(rawcheck == "distort"){
	distortformat = "<br><div style='width: 100%; background-color: #111; height: 80px; float: left; text-align: center; color:" + headertext + "'><b>" + langDistortEffect + "</b><br><div style='overflow: auto; border-top: 1px #555 solid; height: 70px;'>" + distorteffect + "</div></div>";
	}

	let header = "<div style='background-color: #222; overflow: hidden; height: 30px; border: 2px #000 solid; color: " + headertext + "'><div style='float: left'><img src='" + newicon + "' style='width: 30px; height: 30px; border-right: 2px #000 solid; margin-right: 5px; background-color:" + headercolor + "'></div><div style='width: 55%; overflow: hidden; height: 20px; padding-top: 5px; float: left;'><b>" + basename + "</b></div></div>";

	let body = "<b>" + langFrom + ": </b>"+ charname + "<br><b>" + langRoll + ": </b>" + rollformatmessage + skillinfo + "<div style='text-align: center'>" + attackmessage + "</div><br><div style='width: 50%; height: 80px; float: left;'><b>" + langEffectBase + ":</b><br><div style='overflow: auto; border: 1px #555 solid; height: 70px;'>" + baseeffect + "</div></div><div style='width: 50%; height: 80px; float: left;'><b>" + langEffectSkill + ":</b><br><div style='overflow: auto; border: 1px #555 solid; height: 70px;'>" + skilleffect + "</div></div>" + distortformat;

	let info = header + body;

	if(simpledisplay == "true"){
	info = header;

	}


	setAttrs({"baseActNum":actcounter, "dummy":info, "Light":newlight, "dummy2":rollformat, "advState":advstate});

	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/*--- send roll end --*/
	startRoll((whisper + "&{template:baseRoll} {{roll1= @{dummy2} }} {{advantage=@{advState}}} {{infodump=@{dummy}}}"), (results) => {
            //const total = results.results.roll1.result;

            finishRoll(
                results.rollId,
                {
           
                }
            );
        });
	/*--- send roll end ---*/


	/* Bleed processing */
	updateBleed();

	/* Custom Ailments processing */
        getSectionIDs(`repeating_ailments`, idarray => {
            const fieldnames = idarray.reduce((rows,id) => [...rows, `repeating_ailments_${id}_ailTrigger`], '');
            getAttrs([...fieldnames], v => {
                idarray.forEach(id => {

			let current = v[`repeating_ailments_${id}_ailTrigger`];

			if(current == "OnAction"){
			updateCustomAilment(id);
			}
                });
            });
        });

	/* Cleanup */
	updateAdvantages(combinedice1);

	setAttrs({"dummy":" ", "skillSelect":"0", [`${uses}`]:newuses});

    });

  });
});

/* Action: Challenge Roll */
on('clicked:rollChallenge', (info) => {
	/* Preparing values */
	/* Get IDs/names */
        let buttonid = info.htmlAttributes.id.split('_')[1];

	let headercolor = "#888";
	let newicon = "/";
	let headertext = "#fff";
	let challenge = "{{challenge= }}";

	let basetype = "";

	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/Portable.png";

	/* Get attributes */
        getAttrs([`${buttonid}`, "advState", "difficulty", "justice", "settingSimpleDisplay", "settingWhisperRolls", "settingWhisperTarget", "character_name", "advNum", "disadvNum"], function(values) {

	let charname = values.character_name;
	let stat = values[buttonid];
	let statn = "";
	let advstate = values.advState;
	let simpledisplay = values.settingSimpleDisplay;
	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let tracker = "";

	let difficulty = values.difficulty;
	let spdjustice = values.justice;
	let newicon = "/";
	let lucknum = "0";

	let rollformat = "2d6" + "+" + parseInt(stat) + "+(" + parseInt(difficulty) + ")";

	/* Type Formatting */
	if(buttonid == "instinct"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/stats/Instinct.png";
	statn = "Instinct";
	}
	else if(buttonid == "wisdom"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/stats/Wisdom.png";
	statn = "Wisdom";
	}
	else if(buttonid == "justice"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/stats/Justice.png";
	statn = "Justice";

	}
	else if(buttonid == "charm"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/stats/Charm.png";
	statn = "Charm";
	}
	else if(buttonid == "insight"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/stats/Insight.png";
	statn = "Insight";
	}
	else if(buttonid == "temperance"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/stats/Temperance.png";
	statn = "Temperance";
	}
	else if(buttonid == "luck"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/fortunewhite.png";
	statn = "Luck";
	headercolor = "#dbb748";
	rollformat = "2d6+" + "(" + parseInt(difficulty) + ")";
	challenge = " ";
	}
	else if(buttonid == "speed"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/Speed.png";
	statn = "Speed";
	headercolor = "#cf8c44";
	tracker = "&{tracker}"
	rollformat = "1d6+" + parseInt(spdjustice) + "+(" + parseInt(difficulty) + ")";
	challenge = " ";

	}

	/* Translation prep */
	let langFrom = "From";
	let langRoll = "Roll";

	let langAdv = "Adv.";
	let langDisadv = "Disadv.";
	let langStat = statn;

	if(getTranslationByKey("message-from") != false){

	langFrom = getTranslationByKey("message-from");
	langRoll = getTranslationByKey("message-roll");

	langAdv = getTranslationByKey("message-adv");
	langDisadv = getTranslationByKey("message-disadv");


	langStat = getTranslationByKey("stats-" + buttonid);

	}


/* Advantage processing */
	let advmod = "";
	let rollformatmessage = rollformat;
	rollformat += tracker;

	if(advstate == "Advantage"){
	advmod = "kh1";
	rollformat = "{(" + rollformat + "), (" + rollformat + ")}" + advmod;
	rollformatmessage = rollformatmessage + " <span style='color: #85a874;'>(" + langAdv + ")</span>";
	}

	else if(advstate == "Disadvantage"){
	advmod = "dh1";
	rollformat = "{(" + rollformat + "), (" + rollformat + ")}" + advmod;
	rollformatmessage = rollformatmessage + " <span style='color: #cc4125;'>(" + langDisadv + ")</span>";
	}
	else{
	advstate == " ";
	}

	let header = "<div style='background-color: #222; overflow: hidden; height: 30px; border: 2px #000 solid; color: #fff'><div style='float: left'><img src='" + newicon + "' style='width: 30px; height: 30px; border-right: 2px #000 solid; margin-right: 5px; background-color:" + headercolor + "'></div><div style='width: 55%; overflow: hidden; height: 20px; padding-top: 5px; float: left;'><b>" + langStat + "</b></div></div>";

	let body = "<b>" + langFrom + ": </b>" + charname + "<br><b>" + langRoll + ": </b>" + rollformatmessage;

	let info = header + body;

	if(simpledisplay == "true"){
	info = header;

	}

	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}


	setAttrs({"dummy":info, "dummy2":rollformat, "advState":advstate});

	/*--- send roll end --*/
	startRoll((whisper + "&{template:baseRoll} {{roll1=[[ @{dummy2} ]]}} {{infodump=@{dummy}}}" + challenge), (results) => {
	    const total = results.results.roll1.result;

	if(statn == "Luck"){
	setAttrs({"baseLuckNum": total });
	}
	else if(statn == "Speed"){
	setAttrs({"baseSpeed": total });
	}

            finishRoll(
                results.rollId,
                {

		}
            );
        });
	/*--- send roll end ---*/

	/* Cleanup */
	updateAdvantages("1");

	setAttrs({"dummy":" ", "skillSelect":"0"});


	});

});

/* Update: Tool uses */
on('change:tool1Reusable change:tool2Reusable change:tool3Reusable change:tool4Reusable', () => {

        getAttrs(["tool1Reusable", "tool1Uses", "tool1Uses_max", "tool2Reusable", "tool2Uses", "tool2Uses_max", "tool3Reusable", "tool3Uses", "tool3Uses_max", "tool4Reusable", "tool4Uses", "tool4Uses_max"], function(values) {
	output = {};	

	if(values.tool1Reusable != "Reusable"){
	output["tool1Uses"] = "1";
	}
	else if(values.tool1Reusable == "Reusable" && parseInt(values.tool1Uses) <= 1){
	output["tool1Uses"] = values.tool1Uses_max;
	}

	if(values.tool2Reusable != "Reusable"){
	output["tool2Uses"] = "1";
	}
	else if(values.tool2Reusable == "Reusable" && parseInt(values.tool2Uses) <= 1){
	output["tool2Uses"] = values.tool2Uses_max;
	}

	if(values.tool3Reusable != "Reusable"){
	output["tool3Uses"] = "1";
	}
	else if(values.tool3Reusable == "Reusable" && parseInt(values.tool3Uses) <= 1){
	output["tool3Uses"] = values.tool3Uses_max;
	}

	if(values.tool4Reusable != "Reusable"){
	output["tool4Uses"] = "1";
	}
	else if(values.tool4Reusable == "Reusable" && parseInt(values.tool4Uses) <= 1){
	output["tool4Uses"] = values.tool4Uses_max;
	}

	setAttrs(output);

	});
});

/* Action: Declare action */
on('clicked:declareAction', (info) => {

	let headercolor = "#888";
	let newicon = "/";
	let headertext = "#fff";

	let basetype = "Action";
	headercolor = "#8e7cc3";
	newicon = "/";

	/* Get attributes */
        getAttrs(["actionType", "settingSimpleDisplay", "settingWhisperRolls", "settingWhisperTarget", "character_name", "Light", "selectName", "selectLight", "selectType", "selectDice1", "selectDice2", "selectDice3", "selectEffect", "selectDescription", "baseActNum", "distortState", "toolSelect", "tool1Name", "tool1Reusable", "tool1Uses", "tool1Uses_max", "tool1Effect", "tool1Description", "tool2Name", "tool2Reusable", "tool2Uses", "tool2Uses_max", "tool2Effect", "tool2Description", "tool3Name", "tool3Reusable", "tool3Uses", "tool3Uses_max", "tool3Effect", "tool3Description", "tool4Name", "tool4Reusable", "tool4Uses", "tool4Uses_max", "tool4Effect", "tool4Description", "special1Name","special1Description",  "special1Range", "special1Duration", "special1Risk", "special2Name", "special2Description", "special2Range", "special2Duration", "special2Risk", "egoName", "egoType", "egoDescription", "egoUses", "egoUses_max", "egoUseType", "egoEffect", "egoRisk", "egoRange", "egoDuration", "settingHideUses"], function(values) {

	let charname = values.character_name;
	let simpledisplay = values.settingSimpleDisplay;
	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let distortstate = values.distortState;
	let hideuse = values.settingHideUses;

	let actiontype = values.actionType;
	let actiontext = "";
	let currentlight = values.Light;
	let newlight = values.Light;
	let actcounter = parseInt(values.baseActNum) + 1;

	let toolselect = values.toolSelect;

	let output = {};

	if(distortstate == "true"){
	headertext = "#8e7cc3";
	headercolor = "#000";

	}

	/* Type Formatting */
	if(actiontype == "tool"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/Portable.png";
	actiontext = "Use Tool";
	}
	else if(actiontype == "move"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/Speed.png";
	actiontext = "Move";
	}
	else if(actiontype == "protect"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/defend.png";
	actiontext = "Protect";

	}
	else if(actiontype == "other"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/question.png";
	actiontext = "Other";
	}

	if(toolselect == "egoTool"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoAct.png";
	headertext = "#8e7cc3";
	headercolor = "#000";
	}
	else if(toolselect == "egoSpecial"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoSpecial.png";	
	headertext = "#cf8c44";
	headercolor = "#000";
	}
	else if(toolselect == "special1" || toolselect == "special2"){
	newicon = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/specialwhite.png";
	}

	/* Tool info */
	let toolname = "";
	let toolreuse = "0";
	let tooluses = "1";
	let toolusesmax = "1";
	let newuses = "0";
	let toolusestext = "";
	let tooldesc = "";
	let tooleffect = "";

	let specialriskNum = "0";
	let specialrangeNum = "0";
	let specialdurationNum = "0";

	let toolinfo = "";

	if(toolselect == "egoTool" || toolselect == "egoSpecial"){
	toolname = values.egoName;
	tooldesc = values.egoDescription;
	tooleffect = values.egoEffect;

	tooluses = values.egoUses;
	toolusesmax = values.egoUses_max;
	toolreuse = values.egoUseType;

		if(toolreuse != "Limitless" && toolreuse != null){
		toolusestext = " (" + tooluses + "/" + toolusesmax + ")";

		newuses = parseInt(tooluses) - 1;
			if(parseInt(newuses) < 0){ 
			newuses = "0";
			}

		output["egoUses"] = newuses;
		}

		if(toolselect == "egoSpecial"){
		specialriskNum = values.egoRisk;
		specialrangeNum = values.egoRange;
		specialdurationNum = values.egoDuration; 
		}

	}
	else if(toolselect == "special1" || toolselect == "special2"){
	toolname = values[`${toolselect}Name`];
	tooldesc = values[`${toolselect}Description`];

	specialriskNum = values[`${toolselect}Risk`];
	specialrangeNum = values[`${toolselect}Range`];
	specialdurationNum = values[`${toolselect}Duration`]; 

	}
	else if(toolselect == "" || toolselect == null){
	toolselect = "";
	}
	else {
	toolname = values[`${toolselect}Name`];
	tooldesc = values[`${toolselect}Description`];
	tooleffect = values[`${toolselect}Effect`];
	tooluses = values[`${toolselect}Uses`];
	toolusesmax = values[`${toolselect}Uses_max`];
	toolreuse = values[`${toolselect}Reusable`];

		if(toolreuse == "Reusable"){
		toolusestext = " (" + tooluses + "/" + toolusesmax + ")";

		newuses = parseInt(tooluses) - 1;
			if(parseInt(newuses) < 0){ 
			newuses = "0";
			}

		output[`${toolselect}Uses`] = newuses;
		}
		else {
		toolusestext = " (1/1)";
		output[`${toolselect}Uses`] = "0";
		}


	}

	if(values.settingHideUses == "true"){
	toolusestext = "";
	}

	/* Skill info */
	let skillname = values.selectName;
	let skilltype = values.selectType;
	let skillcost = values.selectLight;
	let skilldesc = values.selectDescription;
	let skilleffect = values.selectEffect;

	let skilldice1 = "0";
	let skilldice2 = "0";
	let skilldice3 = "0";
	let skillinfo = "";

	let lightmessage = "";

	/* Translation prep */
	let langFrom = "From";
	let langUse = "Use Tool";
	let langSkill = "Skill";
	let langDesc = "Description";
	let langEffect = "Effect";

	let langRisk = "Risk";
	let langRange = "Range";
	let langDuration = "Duration";


	if(getTranslationByKey("message-from") != false){

	actiontext = getTranslationByKey("palette-action-" + actiontype);

	langFrom = getTranslationByKey("message-from");
	langUse = getTranslationByKey("palette-action-tool");
	langSkill = getTranslationByKey("message-skill");
	langDesc = getTranslationByKey("message-desc");
	langEffect = getTranslationByKey("message-effect");

	langRisk = getTranslationByKey("special-risk-text");
	langRange = getTranslationByKey("special-range-text");
	langDuration = getTranslationByKey("special-duration-text");

	specialrisk = getTranslationByKey("special-risk-" + specialriskNum);
	specialrange = getTranslationByKey("special-range-" + specialrangeNum);
	specialduration = getTranslationByKey("special-duration-" + specialdurationNum);

	}

	if(toolselect == "special1" || toolselect == "special2"){
	tooleffect = tooldesc;
	tooldesc = "<b>Risk</b>: " + specialrisk + "<br><b>Range</b>: " + specialrange + "<br><b>Duration</b>: " + specialduration;
	}
	else if(toolselect == "egoSpecial"){
	tooldesc = "<b>Risk</b>: " + specialrisk + "<br><b>Range</b>: " + specialrange + "<br><b>Duration</b>: " + specialduration + "<br>" + tooldesc;

	}

	if(toolselect != "" && toolselect != null && toolselect != "0"){
	toolinfo = "<b>" + langUse + "</b>: " +  toolname + toolusestext + "<br><div style='text-align: center; padding-top: 3px; padding-bottom: 3px;'><div style='text-align: left; padding: 5px;'>" + tooldesc + "</div></div><div style='height: 60px; width: 98%; border: 1px #555 solid; overflow: auto; float: left; padding: 3px;'>" + tooleffect + "</div>";
	}

	if(currentlight >= skillcost){

		if(skilltype == "Action"){

		skilldice1 = values.selectDice1;
		skilldice2 = values.selectDice2;
		skilldice3 = values.selectDice3;

		newlight = currentlight - skillcost;

		lightmessage = " <span style='color: #fee2b0'>(" + langSkill + ")</span>";
		skillinfo= "<b>" + langSkill + ": </b>" + skillname + "<br><div style='width: 50%; height: 80px; float: left;'><b>" + langDesc + ":</b><br><div style='overflow: auto; border: 1px #555 solid; height: 70px;'>" + skilldesc + "</div></div><div style='width: 50%; height: 80px; float: left;'><b>" + langEffect + ":</b><br><div style='overflow: auto; border: 1px #555 solid; height: 70px;'>" + skilleffect + "</div></div>";


			}
	}



	let info = "<div style='background-color: #222; overflow: hidden; height: 30px; border: 2px #000 solid; color: " + headertext + ";'><div style='float: left'><img src='" + newicon + "' style='width: 30px; height: 30px; border-right: 2px #000 solid; margin-right: 5px; background-color:" + headercolor + "'></div><div style='width: 80%; overflow: hidden; height: 20px; padding-top: 5px; float: left;'><b>" + actiontext + lightmessage + "</b></div></div><b>" + langFrom + ": </b> " + charname + "<br>" + toolinfo + skillinfo;

	setAttrs({"dummy":info});

	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/*--- send roll end --*/
	startRoll((whisper + "&{template:baseRoll} {{infodump=@{dummy} }}"), (results) => {
            finishRoll(
                results.rollId,
                {

		}
            );
        });
	/*--- send roll end ---*/


	/* Bleed processing */
	updateBleed();

	/* Custom Ailments processing */
        getSectionIDs(`repeating_ailments`, idarray => {
            const fieldnames = idarray.reduce((rows,id) => [...rows, `repeating_ailments_${id}_ailTrigger`], '');
            getAttrs([...fieldnames], v => {
                idarray.forEach(id => {

			let current = v[`repeating_ailments_${id}_ailTrigger`];

			if(current == "OnAction"){
			updateCustomAilment(id);
			}
                });
            });
        });

	output["skillSelect"] = "";
	output["toolSelect"] = "";
	output["Light"] = newlight;
	output["baseActNum"] = actcounter;

	setAttrs(output);



	});

});

/* Share: Outfit */
on("clicked:shareOutfit", function() {
	getAttrs(["outfitImmune1", "outfitImmune2", "outfitImmune3", "outfitImmune4", "outfitImmune5", "outfitImmune6", "outfitName", "outfitRank", "outfitEffect", "outfitDescription", "defDice1", "defDice2", "defDice3", "evdDice1", "evdDice2", "evdDice3", "settingWhisperRolls", "settingWhisperTarget"], function(values) {

	let name = values.outfitName;
	let rank = values.outfitRank;
	let desc = values.outfitDescription;
	let effect = values.outfitEffect;
	let diceD = values.defDice1 + "d" + values.defDice2 + "+" + values.defDice3;
	let diceE = values.evdDice1 + "d" + values.evdDice2 + "+" + values.evdDice3;


	let iconSlash = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/def/ResSlash.png' style='width: 25px; height: 25px;'>";
	let iconSlashSTG = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/def/ResSlashStg.png' style='width: 25px; height: 25px;'>";

	let iconPierce = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/def/ResPierce.png' style='width: 25px; height: 25px;'>";
	let iconPierceSTG = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/def/ResPierceStg.png' style='width: 25px; height: 25px;'>";

	let iconBlunt = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/def/ResBlunt.png' style='width: 25px; height: 25px;'>";
	let iconBluntSTG = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/def/ResBluntStg.png' style='width: 25px; height: 25px;'>";

	let immune = 
	"<div style='height:15px;'><div style='width: 70px; color: #c25944; float: left'>" + iconSlash + " x" + values.outfitImmune1 + "</div> <div style='width: 70px; color: #dbb748; float: left;'>" + iconSlashSTG + " x" + values.outfitImmune2 + "</div></div><br>" + 
	"<div style='height:15px;'><div style='width: 70px; color: #c25944; float: left'>" + iconPierce + " x" + values.outfitImmune3 + "</div> <div style='width: 70px; color: #dbb748; float: left;'>" + iconPierceSTG + " x" + values.outfitImmune4 + "</div></div><br>" +
	"<div style='height:15px;'><div style='width: 70px; color: #c25944; float: left'>" + iconBlunt + " x" + values.outfitImmune5 + "</div> <div style='width: 70px; color: #dbb748; float: left;'>" + iconBluntSTG + " x" + values.outfitImmune6 + "</div></div>";


	/* Translation prep */
	let langRank = "Rank";
	let langDef = "Def";
	let langEvd = "Evd";
	
	if(getTranslationByKey("rank") != false){

	langRank = getTranslationByKey("rank");
	langDef = getTranslationByKey("message-defend");
	langEvd = getTranslationByKey("message-evade");

	}

	let iconnew = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/defend.png' style='width: 30px; height: 30px;' >";

	header = "<div style='background-color: #7397d1; overflow: hidden; height: 30px;'><div style='float: left'>" + iconnew + "</div><div style='width: 55%; overflow: hidden; height: 20px; padding-top: 5px; float: left;'><b>" + name + "</b></div><div style='position: absolute; top: 5px; right: 5px;'> <b>" + langRank + ": </b>" + rank + "</div></div>";

	body = "<div style='text-align: center; padding-top: 3px; padding-bottom: 3px; border-bottom: 1px #555 solid;'><b>" + langDef + ": </b>" + diceD + " | <b>" + langEvd + ": </b>" + diceE + "</div><div style='width: 100%; height: 70px; overflow: hidden;'><div style='height: 70px; width: 49%; border-right: 1px #555 solid; overflow: auto; float: left;'>" + effect + "</div><div style='height: 70px; width: 49%; overflow: auto; float: left;'>" + immune + "</div></div><div style='height: 60px; width: 98%; border-top: 1px #555 solid; overflow: auto; float: left; padding: 3px;'>" + desc + "</div>";

	setAttrs({"dummy":header, "dummy2":body});

	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Send */
	startRoll((whisper + "&{template:shareB} {{header=@{dummy} }} {{body=@{dummy2} }}"), (results) => {

            finishRoll(results.rollId, {} );
        });

	setAttrs({"dummy":" ", "dummy2":" "});

    });

});

/* Share: Augment */
on("clicked:shareAugment", function() {
 getAttrs(["settingWhisperRolls", "settingWhisperTarget", "augmentName", "augmentType", "augmentDescription", "augmentEffect", "augmentRank"], function(values) {

	let headTag = "<div style='background-color: #85a874; overflow: hidden; height: 30px;'>";
	let iconnew = "<img src='/' style='width: 5px; height: 30px; opacity: 0%;'>";

	let augmentname = values.augmentName;
	let augmentdesc = values.augmentDescription;
	let augmenteffect = values.augmentEffect;
	let augmentrank = values.augmentRank;
	let augmenttype = values.augmentType;

	/* Translation prep */
	let langRank = "Rank";
	let langType = "Type";
	
	if(getTranslationByKey("rank") != false){

	langRank = getTranslationByKey("rank");
	langType = getTranslationByKey("message-type");

	augmenttype = getTranslationByKey("augment-type-" + augmenttype);

	}

	if(augmenttype == "FullProsthesis"){
	augmenttype = "Full Prosthesis";
	}
	else if(augmenttype == "Drugs"){
	augmenttype = "Drugs/Serums";
	}

	header = "<div style='background-color: #85a874; overflow: hidden; height: 30px;'><div style='float: left'><img src='/' style='width: 5px; height: 30px; opacity: 0%;'></div><div style='width: 55%; overflow: hidden; height: 20px; padding-top: 5px; float: left;'><b>" + augmentname + "</b></div><div style='position: absolute; top: 5px; right: 5px;'> <b>" + langRank + ": </b>" + augmentrank + "</div></div>";

	body = "<div style='text-align: center; padding-top: 3px; padding-bottom: 3px; border-bottom: 1px #555 solid;'><b>" + langType + ": </b>" + augmenttype + "</div><div style='width: 100%; height: 70px; overflow: hidden;'><div style='height: 70px; width: 49%; border-right: 1px #555 solid; overflow: auto; float: left;'>" + augmentdesc + "</div><div style='height: 70px; width: 49%; overflow: auto; float: left;'>" + augmenteffect + "</div></div>";

	setAttrs({"dummy":header, "dummy2":body});

	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Send */
	startRoll((whisper + "&{template:shareB} {{header=@{dummy} }} {{body=@{dummy2} }}"), (results) => {

            finishRoll(results.rollId, {} );
        });

	setAttrs({"dummy":" ", "dummy2":" "});

    });

});

/*-- Share: Tools --*/
on("clicked:shareTool", function(info) {

	/* Get IDs/names */
        let buttonid = info.htmlAttributes.id.split('_')[1];

	let name = buttonid + "Name";
	let type = buttonid + "Type";
	let rank = buttonid + "Rank";
	let effect = buttonid + "Effect";
	let desc = buttonid + "Description";

	let portable = buttonid + "Portable";
	let reusable = buttonid + "Reusable";
	let uses = buttonid + "Uses";

	let header = "";
	let body = "";

	/* Get attributes */
        getAttrs([`${name}`, `${type}`, `${rank}`, `${effect}`, `${desc}`, `${portable}`, `${reusable}`, `${uses}`, "settingWhisperRolls", "settingWhisperTarget"], function(values) {

	let toolname = values[name];
	let toolrank = values[rank];
	let tooltype = values[type];
	let tooleffect = values[effect];
	let tooldesc = values[desc];
	let toolportable = values[portable];
	let toolreusable = values[reusable];
	let tooluses = values[uses];
	let toolinfo = "";

	/* Translation prep */
	let langRank = "Rank";
	let langPortable = "Portable";
	let langPortableNo = "Not portable";

	let langReusable = "Reusable";
	let langReusableNo = "Not reusable";

	
	if(getTranslationByKey("rank") != false){

	langRank = getTranslationByKey("rank");

	langPortable = getTranslationByKey("tool-portable");
	langPortableNo = getTranslationByKey("tool-portableNo");

	langReusable = getTranslationByKey("tool-reusable");
	langReusableNo = getTranslationByKey("tool-reusableNo");

	}

	/* Formatting */

	if(toolportable != "Portable"){
	toolportable = langPortableNo;
	}
	else { toolportable = "<b>" + langPortable + "</b>"; }
	
	if(toolreusable != "Reusable") {
	toolreusable = langReusableNo;
	}
	else{ toolreusable = "<b>" + langReusable + " (" + tooluses + ")</b>"; }

	if(toolreusable != " " && toolportable != " ") {
	toolinfo = toolportable + " | " + toolreusable; 
	}
	else { toolinfo = toolportable + toolreusable; }

	header = "<div style='background-color: #8e7cc3; overflow: hidden; height: 30px;'><div style='float: left'><img src='/' style='width: 5px; height: 30px; opacity: 0%;'></div><div style='width: 55%; overflow: hidden; height: 20px; padding-top: 5px; float: left;'><b>" + toolname + "</b></div><div style='position: absolute; top: 5px; right: 5px;'> <b>"+ langRank + ": </b>" + toolrank + "</div></div>";

	body = "<div style='text-align: center; padding-top: 3px; padding-bottom: 3px; border-bottom: 1px #555 solid;'>" + toolinfo + "</div><div style='width: 100%; height: 70px; overflow: hidden;'><div style='height: 70px; width: 49%; border-right: 1px #555 solid; overflow: auto; float: left;'>" + tooldesc + "</div><div style='height: 70px; width: 49%; overflow: auto; float: left;'>" + tooleffect + "</div></div>";

	setAttrs({"dummy":header, "dummy2":body});

	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Send */
	startRoll((whisper + "&{template:shareB} {{header=@{dummy} }} {{body=@{dummy2} }}"), (results) => {

            finishRoll(results.rollId, {} );
        });

	setAttrs({"dummy":" ", "dummy2":" "});

    });

});


/*-- Share: Special items --*/
on("clicked:shareSpecial", function(info) {

	/* Get IDs/names */
        let buttonid = info.htmlAttributes.id.split('_')[1];

	let name = buttonid + "Name";
	let rank = buttonid + "Rank";
	let desc = buttonid + "Description";

	let risk = buttonid + "Risk";
	let duration = buttonid + "Duration";
	let range = buttonid + "Range";

	let header = "";
	let body = "";

	/* Get attributes */
        getAttrs([`${name}`, `${rank}`, `${desc}`, `${risk}`, `${range}`, `${duration}`, "settingWhisperRolls", "settingWhisperTarget"], function(values) {

	let specialname = values[name];
	let specialrank = values[rank];
	let specialdesc = values[desc];
	let specialriskNum = values[risk];
	let specialrangeNum = values[range];
	let specialdurationNum = values[duration];

	let specialrisk = "---";
	let specialrange = "---";
	let specialduration = "---";

	/* Formatting */

/* Switching Risk to string */
	switch (specialriskNum) {
  	case "0":
   	 specialrisk = "Canard";
    	 break;
 	case "1":
   	 specialrisk = "Urban Myth";
    	 break;
 	case "2":
   	 specialrisk = "Urban Legend";
    	 break;
	case "3":
   	 specialrisk = "Urban Plague";
    	 break;
	case "4":
   	 specialrisk = "Urban Nightmare";
    	 break;
	case "5":
   	 specialrisk = "Star of the City";
    	 break;
	case "6":
   	 specialrisk = "Impuritas Civitatis";
    	 break;
  	default:
    	 specialrisk = "---";
	}

	/* Switching Range to string */
	switch (specialrangeNum) {
  	case "0":
   	 specialrange = "One or two people";
    	 break;
 	case "1":
   	 specialrange = "Street";
    	 break;
 	case "2":
   	 specialrange = "Neighborhood";
    	 break;
	case "3":
   	 specialrange = "Residence Area";
    	 break;
	case "4":
   	 specialrange = "Nest";
    	 break;
	case "5":
   	 specialrange = "Multiple Nests";
    	 break;
	case "6":
   	 specialrange = "City";
    	 break;
  	default:
    	 specialrange = "---";
	}

	/* Switching Duration to string */
	switch (specialdurationNum) {
  	case "0":
   	 specialduration = "A moment";
    	 break;
 	case "1":
   	 specialduration = "Seconds";
    	 break;
 	case "2":
   	 specialduration = "Minutes";
    	 break;
	case "3":
   	 specialduration = "Hours";
    	 break;
	case "4":
   	 specialduration = "Days";
    	 break;
	case "5":
   	 specialduration = "Weeks";
    	 break;
	case "6":
   	 specialduration = "Months";
    	 break;
  	default:
    	 specialduration = "---";
	}

	/* Translation prep */
	let langRank = "Rank";
	let langRisk = "Risk";
	let langRange = "Range";
	let langDuration = "Duration";
	
	if(getTranslationByKey("rank") != false){

	langRank = getTranslationByKey("rank");

	langRisk = getTranslationByKey("special-risk-text");
	langRange = getTranslationByKey("special-range-text");
	langDuration = getTranslationByKey("special-duration-text");

	specialrisk = getTranslationByKey("special-risk-" + specialriskNum);
	specialrange = getTranslationByKey("special-range-" + specialrangeNum);
	specialduration = getTranslationByKey("special-duration-" + specialdurationNum);

	}

	header = "<div style='background-color: #cf8c44; overflow: hidden; height: 30px;'><div style='float: left'><img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/specialwhite.png' style='width: 30px; height: 30px;'></div><div style='width: 55%; overflow: hidden; height: 20px; padding-top: 5px; float: left;'><b>" + specialname + "</b></div><div style='position: absolute; top: 5px; right: 5px;'> <b>" + langRank + ": </b>" + specialrank + "</div></div>";

	body = "<div style='text-align: center; padding-top: 3px; padding-bottom: 3px; border-bottom: 1px #555 solid;'><div style='text-align: left; padding: 5px;'><b>" + langRisk +": </b>" + specialrisk + "<br> <b>" + langRange + ": </b>" + specialrange + "<br> <b>" + langDuration + ": </b>" + specialduration + "</div></div><div style='height: 60px; width: 98%; border-top: 1px #555 solid; overflow: auto; float: left; padding: 3px;'>" + specialdesc + "</div>";

	setAttrs({"dummy":header, "dummy2":body});

	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Send */
	startRoll((whisper + "&{template:shareB} {{header=@{dummy} }} {{body=@{dummy2} }}"), (results) => {

            finishRoll(results.rollId, {} );
        });

	setAttrs({"dummy":" ", "dummy2":" "});

    });

});

/*-- Share: Weapons --*/
on("clicked:shareWeapon", function(info) {

	/* Get IDs/names */
        let buttonid = info.htmlAttributes.id.split('_')[1];

	let name = buttonid + "Name";
	let type = buttonid + "Type";
	let rank = buttonid + "Rank";
	let effect = buttonid + "Effect";
	let desc = buttonid + "Description";
	let range = buttonid + "Range";

	let diceA = buttonid + "Dice1";
	let diceB = buttonid + "Dice2";
	let diceC = buttonid + "Dice3";

	let header = "";
	let body = "";

	/* Get attributes */
        getAttrs([`${name}`, `${type}`, `${rank}`, `${effect}`, `${desc}`, `${range}`, `${diceA}`, `${diceB}`, `${diceC}`, "settingWhisperRolls", "settingWhisperTarget"], function(values) {

	let weaponname = values[name];
	let weaponrank = values[rank];
	let weapontype = values[type];
	let weaponeffect = values[effect];
	let weapondesc = values[desc];
	let weaponrange = values[range];
	let weapondice = values[diceA] + "d" + values[diceB] + "+" + values[diceC];

	/* Formatting */
	iconnew = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/question.png' style='width: 30px; height: 30px;'>";

	if(weapontype == "Slash"){
	iconnew = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/Slash.png' style='width: 30px; height: 30px;'>";
	}
	else if(weapontype == "Pierce"){
	iconnew = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/pierce.png' style='width: 30px; height: 30px;'>";
	}
	else if(weapontype == "Blunt"){
	iconnew = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/blunt.png' style='width: 30px; height: 30px;'>";
	}

	/* Translation prep */
	let langRank = "Rank";
	let langDiceType = "Att";

	if(getTranslationByKey("rank") != false){

	langRank = getTranslationByKey("rank");
	langDiceType = getTranslationByKey("message-attack");

	weapontype = getTranslationByKey("weapon-type-" + weapontype);
	weaponrange = getTranslationByKey("weapon-type-" + weaponrange);

	}

	header = "<div style='background-color: #c25944; overflow: hidden; height: 30px;'><div style='float: left'>" + iconnew + "</div><div style='width: 55%; overflow: hidden; height: 20px; padding-top: 5px; float: left;'><b>" + weaponname + "</b></div><div style='position: absolute; top: 5px; right: 5px;'> <b>" + langRank + ": </b>" + weaponrank + "</div></div>";

	body = "<div style='text-align: center; padding-top: 3px; padding-bottom: 3px; border-bottom: 1px #555 solid;'><b>" + langDiceType + ": </b>" + weapondice + " | " + weapontype + " | " + weaponrange + "</div><div style='width: 100%; height: 70px; overflow: hidden;'><div style='height: 70px; width: 49%; border-right: 1px #555 solid; overflow: auto; float: left;'>" + weapondesc + "</div><div style='height: 70px; width: 49%; overflow: auto; float: left;'>" + weaponeffect + "</div></div>";

	setAttrs({"dummy":header, "dummy2":body});

	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Send */
	startRoll((whisper + "&{template:shareB} {{header=@{dummy} }} {{body=@{dummy2} }}"), (results) => {

            finishRoll(results.rollId, {} );
        });

	setAttrs({"dummy":" ", "dummy2":" "});

    });

});

/*-- Share: Distortion --*/
on("clicked:shareDistort", function(info) {

	/* Get attributes */
        getAttrs(["distort_name", "distort_summary", "distortDescription", "distortEffect", "distortDescription2", "distortEffect2", "distortWeaponDice1", "distortWeaponDice2", "distortWeaponDice3", "distortDefDice1", "distortDefDice2", "distortDefDice3", "distortEvdDice1", "distortCounter", "distortEvdDice2", "distortEvdDice3", "distortCounter", "distortCounter_max", "obsDesc", "obsEffect", "obsBehavior", "obsTaboon", "obsCounter", "obsWorkAmount", "obsWorkResults", "obsWorkPref", "obsSummary", "obsAppearance", "obsAtmosphere", "obsStory", "settingWhisperRolls", "settingWhisperTarget", "distortWorkBase", "distortResultGood", "distortResultNormal", "distortResultBad", "distortWorkInstinct", "distortWorkWisdom", "distortWorkJustice", "distortWorkCharm", "distortWorkInsight", "distortWorkTemperance", "distort_behavior", "distort_taboo", "distort_atmosphere", "distort_appearance", "distort_story"], function(values) {
	let name = values.distort_name;
	let rank = values.charRankBase;
	let attEffect = values.distortEffect;
	let attDesc = values.distortDescription;
	let defEffect = values.distortEffect2;
	let defDesc = values.distortDescription2;

	let iconnew = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/Distort.png";
	let typecolor = "#fff";

	/* Translation prep */
	let langMod = "Mod";
	let langWorkPref = "Preferences";
	let langWorkResult = "Results";
	let langWorkAmount = "Work Amount";
	let langTaboon = "Taboos/Boons";
	let langBehavior = "Behavior";
	let langStory = "Story";
	
	if(getTranslationByKey("message-mod") != false){
	langMod = getTranslationByKey("message-mod");
	langWorkPref = getTranslationByKey("distort-obs-workpreference");
	langWorkResult = getTranslationByKey("distort-loweringresults");
	langWorkAmount = getTranslationByKey("distort-obs-work");
	langTaboon = getTranslationByKey("distort-obs-taboon");
	langBehavior = getTranslationByKey("distort-behavior");
	langStory = getTranslationByKey("distort-story");

	}


	/* Formatting */
	let diceA = values.distortWeaponDice1 + "d" + values.distortWeaponDice2 + "+" + values.distortWeaponDice3;
	let diceD = values.distortDefDice1 + "d" + values.distortDefDice2 + "+" + values.distortDefDice3;
	let diceE = values.distortEvdDice1 + "d" + values.distortEvdDice2 + "+" + values.distortEvdDice3;
	let counter = values.distortCounter + "/" + values.distortCounter_max;

	let distortSummary = "";
	if(values.obsSummary == "true"){
	distortSummary = "<div style='padding: 3px; border-bottom: 1px #555 solid; max-height: 60px; overflow: auto;'>" + values.distort_summary + "</div>";}

	let distortAppearance = "";
	if(values.obsAppearance == "true"){
	distortAppearance = "<div style='padding: 3px; border-bottom: 1px #555 solid; max-height: 50px; overflow: auto;'>" + values.distort_appearance + "</div>";
	}

	let distortAtmosphere = "";
	if(values.obsAtmosphere == "true"){
	distortAtmosphere = "<div style='padding: 3px; border-bottom: 1px #555 solid; max-height: 50px; overflow: auto;'>" + values.distort_atmosphere + "</div>";
	}

	let distortStory = "";
	if(values.obsStory == "true"){
	distortStory = "<div style='background-color:#111; padding: 5px;'><b>" + langStory + "</b></div><div style='padding: 3px; border-bottom: 1px #555 solid; max-height: 80px; overflow: auto;'>" + values.distort_story + "</div>";}

	/* Work result formatting */
	let goodIcon = "opacity: 30%";
	let normalIcon = "opacity: 30%";
	let badIcon = "opacity: 30%";

	if(values.distortResultGood == "Good"){
	goodIcon = "opacity: 100%";
	}
	if(values.distortResultNormal == "Normal"){
	normalIcon = "opacity: 100%";
	}
	if(values.distortResultBad == "Bad"){
	badIcon = "opacity: 100%";
	}

	let distortWorkResult = "<div style='text-align: center; width: 39%; float:left; opacity: 30%;'><b>"+ langWorkResult +"</b><br> ?</div>";
	if(values.obsWorkResults == "true"){
	distortWorkResult = "<div style='text-align: center; width: 39%; float:left;'><b>"+ langWorkResult +"</b><br> <img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/good.png' style='height: 25px; width: 25px; " + goodIcon + ";'> <img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/normal.png' style='height: 25px; width: 25px; " + normalIcon + ";'> <img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/bad.png' style='height: 25px; width: 25px; " + badIcon + ";'></div>";
	}

	/* Work preference formatting */

	let distortWorkPref = "<div style='text-align: center; width: 30%; float: left; opacity: 30%;'><b>"+ langWorkPref +"</b><br><b style='color: #cc4125;'>?</b> | <b style='color: #d9d9d9;'>?</b> | <b style='color: #46bdc6;'>?</b><br><b style='color: #9c66c6;'>?</b> | <b style='color: #ffe599;'>?</b> | <b style='color: #ac609d;'>?</b></div>";
	if(values.obsWorkPref == "true"){
	distortWorkPref = "<div style='text-align: center; width: 30%; float: left;'><b>"+ langWorkPref +"</b><br><b style='color: #cc4125;'>" + values.distortWorkInstinct + "</b> | <b style='color: #d9d9d9;'>"+ values.distortWorkWisdom +"</b> | <b style='color: #46bdc6;'>" + values.distortWorkJustice + "</b><br><b style='color: #9c66c6;'>" + values.distortWorkCharm + "</b> | <b style='color: #ffe599;'>"+ values.distortWorkInsight +"</b> | <b style='color: #ac609d;'>" + values.distortWorkTemperance + "</b></div>";
	}

	let distortWorkAmount = "<div style='text-align: center; width: 30%; float: left; opacity: 30%;'><b>" + langWorkAmount + "</b><br><span style='font-size: 25px;'>?</span></div>";
	if(values.obsWorkAmount == "true"){
	distortWorkAmount = "<div style='text-align: center; width: 30%; float: left;'><b>" + langWorkAmount + "</b><br><span style='font-size: 25px;'>"+ values.distortWorkBase + "</span></div>";
	}


	let workSection = "";
	if(values.obsWorkAmount == "true" || values.obsWorkPref == "true" || values.obsWorkResults == "true"){
	workSection = "<div style='width: 100%; background-color: #222; overflow: auto; height: 55px;'>" + distortWorkAmount + distortWorkPref + distortWorkResult + "</div>";}

	/* Behavior/Taboo formatting */

	let distortBehavior = "";
	let distortTaboo = "";
	let flexwidth1 = "49%";
	let flexwidth2 = "50%";

	if(values.obsBehavior != "true" || values.obsTaboon != "true"){
	flexwidth1 = "100%";
	flexwidth2 = "100%";

	}

	if(values.obsBehavior == "true"){
	distortBehavior = "<div style='width: " + flexwidth1 + "; float: left;'><b>" + langBehavior + ": </b><br><div style='height: 60px; overflow: auto;'>" + values.distort_behavior + "</div></div>";

	}
	if(values.obsTaboon == "true"){
	distortTaboo = "<div style='width: "+ flexwidth2 + "; float: left;'><b>" + langTaboon + ": </b><br><div style='height: 60px; overflow: auto;'>" + values.distort_taboo + "</div></div>";
	}
	
	let behaviorSection = "<div style='width: 100%; max-height: 80px; overflow: hidden; background-color: #222;'>"+ distortBehavior + distortTaboo  + "</div>";

	if(values.obsTaboon != "true" && values.obsBehavior != "true"){
	behaviorSection = "";
	}
	/* Behavior section end */

	let distortCounter = "";
	if(values.obsCounter == "true"){
	distortCounter = "<div style='position: absolute; top: 5px; right: 5px; font-size: 20px; color: #cc4125;'> <b>" + counter + "</b></div>";
	}

	let distortDesc = "";
	if(values.obsDesc == "true"){
	distortDesc = "<div style='width: 100%; max-height: 50px; overflow: hidden; background-color: #111;'><div style='height: 50px; width: 49%; border-right: 1px #555 solid; overflow: auto; color: #cc4125; float: left;'><b>" + attDesc + "</b></div><div style='height: 50px; width: 50%; overflow: auto; float: left; color: #6d9eeb;'><b>" + defDesc + "</b></div></div>";
	}

	let distortEffect = "";
	if(values.obsEffect == "true"){
	distortEffect = "<div style='width: 100%; height: 60px; overflow: hidden; background-color: #111; border-top: 1px #555 solid; border-bottom: 1px #555 solid;'><div style='height: 60px; width: 49%; color: #cc4125; border-right: 1px #555 solid; overflow: auto; float: left;'>" + attEffect + "</div><div style='height: 60px; width: 50%; color: #6d9eeb; overflow: auto; float: left;'>" + defEffect + "</div></div> <div style='text-align: center; padding-top: 5px; padding-bottom: 5px; color: #fff; background-color: #000;'><b>" + langMod + ": </b> <span style=' color: #cc4125'>" + diceA + "</span> | <span style='color: #6d9eeb;'>" + diceD + "</span> | <span style='color: #dbb748'>" + diceE + "</span></div>";

	}



	header = "<div style='background-color: #000; color: " + typecolor + "; overflow: hidden; height: 30px;'><div style='float: left'><img src='" + iconnew + "' style='width: 30px; height: 30px; opacity: 50%;'></div><div style='width: 55%; overflow: hidden; height: 20px; padding-top: 5px; float: left;'><b>" + name + "</b></div>" + distortCounter + "</div>";

	body = workSection + behaviorSection + distortSummary + distortAppearance + distortAtmosphere + distortStory + distortDesc + distortEffect + " ";

	setAttrs({"dummy":header, "dummy2":body});

	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Send */
	startRoll((whisper + "&{template:shareB} {{header=@{dummy} }} {{body=@{dummy2} }}"), (results) => {

            finishRoll(results.rollId, {} );
        });

	setAttrs({"dummy":" ", "dummy2":" "});

    });

});

/*-- Share: Ego --*/
on("clicked:shareEgo", function(info) {

	/* Get attributes */
        getAttrs(["egoName", "egoRank", "egoIdeology", "egoCondition", "egoType", "egoDescription", "egoEffect", "egoWeaponType", "egoWeaponRange", "egoWeaponDice1", "egoWeaponDice2", "egoWeaponDice3", "egoDefDice1", "egoDefDice2", "egoDefDice3", "egoEvdDice1", "egoEvdDice2", "egoEvdDice3", "egoImmune1", "egoImmune2", "egoImmune3", "egoImmune4", "egoImmune5", "egoImmune6", "egoRisk", "egoRange", "egoDuration", "settingWhisperRolls", "settingWhisperTarget"], function(values) {
	let name = values.egoName;
	let rank = values.egoRank;
	let conditionBase = values.egoCondition;
	let condition = conditionBase;
	let type = values.egoType;
	let effect = values.egoEffect;
	let desc = values.egoDescription;
	let ideology = values.egoIdeology;

	let specialriskNum = values.egoRisk;
	let specialrangeNum = values.egoRange;
	let specialdurationNum = values.egoDuration;

	let iconnew = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/question.png";
	let typecolor = "#fff";
	let bottomdata = "";

	/* Condition formatting */
	switch (condition) {
  	case "AlwaysActive":
   	 condition = "Always active";
    	 break;
 	case "HalfHealth":
   	 condition = "50% health";
    	 break;
 	case "OnStagger":
   	 condition = "On stagger";
    	 break;
 	case "EnemyDefeat":
   	 condition = "Enemy defeat";
    	 break;
 	case "AllyDefeat":
   	 condition = "Ally defeat";
    	 break;
  	default:
    	 condition = "---";
	}

	/* Translation prep */
	let langRank = "Rank";
	let langDiceTypeAtt = "Att";
	let langDiceTypeDef = "Def";
	let langDiceTypeEvd = "Evd";
	let langType = "Type";
	let langEgoType = type;

	let langRisk = "Risk";
	let langRange = "Range";
	let langDuration = "Duration";
	
	if(getTranslationByKey("rank") != false){

	langRank = getTranslationByKey("rank");
	langType = getTranslationByKey("message-type");
	langDiceTypeAtt = getTranslationByKey("message-attack");
	langDiceTypeDef = getTranslationByKey("message-defend");
	langDiceTypeEvd = getTranslationByKey("message-evade");

	langEgoType = getTranslationByKey("ego-type-" + type);
	condition = getTranslationByKey("ego-active-" + conditionBase);

	langRisk = getTranslationByKey("special-risk-text");
	langRange = getTranslationByKey("special-range-text");
	langDuration = getTranslationByKey("special-duration-text");

	specialrisk = getTranslationByKey("special-risk-" + specialriskNum);
	specialrange = getTranslationByKey("special-range-" + specialrangeNum);
	specialduration = getTranslationByKey("special-duration-" + specialdurationNum);

	}


	/* Formatting */
	if(type == "Weapon"){
	let diceA = values.egoWeaponDice1 + "d" + values.egoWeaponDice2 + "+" + values.egoWeaponDice3;
	let weapontype = values.egoWeaponType;
	let weaponrange = values.egoWeaponRange;

	typecolor = "#cc4125";

	if(weapontype == "Slash"){
	iconnew = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoSlash.png";
		}
	else if(weapontype == "Pierce"){
	iconnew = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoPierce.png";
		}
	else if(weapontype == "Blunt"){
	iconnew = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoBlunt.png";
		}

	if(getTranslationByKey("weapon-type-" + weapontype) != false){
	weapontype = getTranslationByKey("weapon-type-" + weapontype);
	weaponrange = getTranslationByKey("weapon-type-" + weaponrange);
	}

	bottomdata = "<div style='text-align: center; padding-top: 5px; padding-bottom: 5px; color:" + typecolor + "; background-color: #000;'><b>" + langDiceTypeAtt + ": </b>" + diceA + " | " + weapontype + " | " + weaponrange + "</div>";
	

	}
	else if(type == "Outfit"){
	typecolor = "#6d9eeb";
	iconnew = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoDef.png";

	let diceD = values.egoDefDice1 + "d" + values.egoDefDice2 + "+" + values.egoDefDice3;
	let diceE = values.egoEvdDice1 + "d" + values.egoEvdDice2 + "+" + values.egoEvdDice3;

let iconSlash = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/def/ResSlash.png' style='width: 25px; height: 25px;'>";
	let iconSlashSTG = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/def/ResSlashStg.png' style='width: 25px; height: 25px;'>";

	let iconPierce = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/def/ResPierce.png' style='width: 25px; height: 25px;'>";
	let iconPierceSTG = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/def/ResPierceStg.png' style='width: 25px; height: 25px;'>";

	let iconBlunt = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/def/ResBlunt.png' style='width: 25px; height: 25px;'>";
	let iconBluntSTG = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/def/ResBluntStg.png' style='width: 25px; height: 25px;'>";

	let immune = 
	"<div style='height:15px;'><div style='width: 70px; color: #c25944; float: left'>" + iconSlash + " x" + values.egoImmune1 + "</div> <div style='width: 70px; color: #dbb748; float: left;'>" + iconSlashSTG + " x" + values.egoImmune2 + "</div></div><br>" + 
	"<div style='height:15px;'><div style='width: 70px; color: #c25944; float: left'>" + iconPierce + " x" + values.egoImmune3 + "</div> <div style='width: 70px; color: #dbb748; float: left;'>" + iconPierceSTG + " x" + values.egoImmune4 + "</div></div><br>" +
	"<div style='height:15px;'><div style='width: 70px; color: #c25944; float: left'>" + iconBlunt + " x" + values.egoImmune5 + "</div> <div style='width: 70px; color: #dbb748; float: left;'>" + iconBluntSTG + " x" + values.egoImmune6 + "</div></div>";

	bottomdata = "<div style='background-color: #000; height: 70px;'><div style='text-align: center; padding-top: 15px; padding-bottom: 15px; color:" + typecolor + "; width: 49%; float: left;'><b>" + langDiceTypeDef + ": </b> " + diceD + "<br><span style='color: #dbb748'><b>" + langDiceTypeEvd + ": </b>" + diceE + "</span></div><div style='height: 70px; width:49%; float: left; overflow: auto;'>" + immune +"</div></div>";

	}
	else if(type == "Tool"){
	typecolor = "#8e7cc3";
iconnew = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoAct.png";
	}
	else if(type == "Special"){
	typecolor = "#cf8c44";
iconnew = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoSpecial.png";

	bottomdata = "<div style='text-align: center; padding-top: 5px; padding-bottom: 5px; color:" + typecolor + "; background-color: #000;'><div style='text-align: left; padding: 5px;'><b>" + langRisk + ": </b>" + specialrisk + "<br> <b>" + langRange + ": </b>" + specialrange + "<br> <b>" + langDuration + ": </b>" + specialduration + "</div></div>";


	}
	else if(type == "0"){
	type = "---";
	}

	header = "<div style='background-color: #000; color: " + typecolor + "; overflow: hidden; height: 30px;'><div style='float: left'><img src='" + iconnew + "' style='width: 30px; height: 30px;'></div><div style='width: 55%; overflow: hidden; height: 20px; padding-top: 5px; float: left;'><b>" + name + "</b></div><div style='position: absolute; top: 5px; right: 5px;'> <b>"+ langRank + ": </b>" + rank + "</div></div>";

	body = "<div style='text-align: center; padding-top: 3px; padding-bottom: 3px; border-bottom: 1px #555 solid;'><b>" + langType + ": </b>" + langEgoType + " | " + condition + "</div><div style='padding: 3px; border-bottom: 1px #555 solid; max-height: 30px; overflow: auto;'>" + ideology + "</div><div style='width: 100%; height: 70px; overflow: hidden;'><div style='height: 70px; width: 49%; border-right: 1px #555 solid; overflow: auto; float: left;'>" + desc + "</div><div style='height: 70px; width: 49%; overflow: auto; float: left;'>" + effect + "</div></div>" + bottomdata;

	setAttrs({"dummy":header, "dummy2":body});

	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Send */
	startRoll((whisper + "&{template:shareB} {{header=@{dummy} }} {{body=@{dummy2} }}"), (results) => {

            finishRoll(results.rollId, {} );
        });

	setAttrs({"dummy":" ", "dummy2":" "});

    });

});

/*-- Share: Skills --*/
on("clicked:shareSkill", function(info) {

	/* Get IDs/names */
        let buttonid = info.htmlAttributes.id.split('_')[1];
	let skillcat = buttonid.split('S')[0];

	let name = buttonid + "Name";
	let type = buttonid + "Type";
	let rank = buttonid + "Rank";
	let effect = buttonid + "Effect";
	let desc = buttonid + "Description";
	let light = buttonid + "Light";

	let diceA = buttonid + "Dice1";
	let diceB = buttonid + "Dice2";
	let diceC = buttonid + "Dice3";

	let header = "";
	let body = "";

	/* Get attributes */
        getAttrs([`${name}`, `${type}`, `${rank}`, `${effect}`, `${desc}`, `${light}`, `${diceA}`, `${diceB}`, `${diceC}`, "settingWhisperRolls", "settingWhisperTarget"], function(values) {

	let skillname = values[name];
	let skillrank = values[rank];
	let skilltype = values[type];
	let skilleffect = values[effect];
	let skilldesc = values[desc];
	let skilllight = values[light];
	let skilldice = values[diceA] + "d" + values[diceB] + "+" + values[diceC];
	let iconurl = "/";
	let iconbg = "#555";
	let headerbg = "#555";

	/* Formatting */

	if (skillcat == "ego"){
	iconbg = "#000";
	headerbg = "#000";

	if(skilltype == "Attack"){
	iconurl = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoAtt.png";
		}
	else if(skilltype == "Defend"){
	iconurl = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoDef.png";
		}
	else if(skilltype == "Evade"){
	iconurl = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoEvd.png";
		}
	else if(skilltype == "Action"){
	iconurl = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoAct.png";
		}
	else if(skilltype == "Mass"){
	iconurl = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/egoWide.png";
		}
	}
	else{
	if(skilltype == "Attack"){
	iconurl = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/Attack.png";
	iconbg = "#c25944";
		}
	else if(skilltype == "Defend"){
	iconurl = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/defend.png";
	iconbg = "#7397d1";
		}
	else if(skilltype == "Evade"){
	iconurl = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/evade.png";
	iconbg = "#dbb748";
		}
	else if(skilltype == "Action"){
	iconurl = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/Portable.png";
	iconbg = "#8e7cc3";
		}
	else if(skilltype == "Mass"){
	iconurl = "https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/Wide.png";
	iconbg = "#c25944";
		}
	}

	/* Translation prep */
	let langRank = "Rank";
	let langMod = "Mod";
	let langCost = "Cost";
	
	if(getTranslationByKey("rank") != false){

	langRank = getTranslationByKey("rank");
	langMod = getTranslationByKey("message-mod");
	langCost = getTranslationByKey("message-cost");

	skilltype = getTranslationByKey("skill-type-" + skilltype);

	}

	let iconnew = "<img src='" + iconurl + "' style='width: 28px; height: 28px; border-radius: 100px; border: 1px #fff solid; background-color: " + iconbg + ";'>";

	header = "<div style='background-color: " + headerbg + "; overflow: hidden; height: 30px;'><div style='float: left'>" + iconnew + "</div><div style='width: 55%; overflow: hidden; height: 20px; padding-top: 5px; padding-left: 2px; float: left;'><b>" + skillname + "</b></div><div style='position: absolute; top: 5px; right: 5px;'> <b>" + langRank + ": </b>" + skillrank + "</div></div>";

	body = "<div style='text-align: center; padding-top: 3px; padding-bottom: 3px; border-bottom: 1px #555 solid;'><b>" + skilltype + "</b> | <b>" + langMod + ": </b>" + skilldice + " | <b>" + langCost + ": </b>" + skilllight + "</div><div style='width: 100%; height: 70px; overflow: hidden;'><div style='height: 70px; width: 49%; border-right: 1px #555 solid; overflow: auto; float: left;'>" + skilldesc + "</div><div style='height: 70px; width: 49%; overflow: auto; float: left;'>" + skilleffect + "</div></div>";

	setAttrs({"dummy":header, "dummy2":body});

	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
	}

	/* Send */
	startRoll((whisper + "&{template:shareB} {{header=@{dummy} }} {{body=@{dummy2} }}"), (results) => {

            finishRoll(results.rollId, {} );
        });

	setAttrs({"dummy":" ", "dummy2":" "});

    });

});

/* Toggle: Edit Mode */
on("clicked:editMode", function(){
getAttrs(["settingEditMode"], function(values) {

	let newstate = "";
	let editmode = values.settingEditMode;

	if(editmode == "true"){
	newstate = "0";
	}
	else {
	newstate = "true";
	}
	

	setAttrs({"settingEditMode":newstate});

	});

});


/* Tab toggler */
    const buttonlist = ["equipment","skills","details","export", "edit"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });

/*--- Export/Import functions ---*/

let attrkeyCharacter = ["character_nameBase", "instinct", "wisdom", "justice", "charm", "insight", "temperance", "EXP", "character_job", "age", "height", "character_origin", "character_residence", "character_assets", "character_ahn", "character_url", "character_summary", "character_combatnote", "character_history", "character_relations", "character_notes", "character_desc", "character_personality", "character_background"];

let attrkeySettings = ["settingWhisperRolls", "settingMuteMessage", "settingAutoDetect", "settingTurnUpdate", "settingSimpleDisplay", "settingExtraEquip", "settingHideSpecial", "settingHelperText", "settingHideShare", "settingBurnImmune", "settingBleedImmune", "settingMultihitFull", "settingMultihitUses", "settingHideUses"];

let attrkeyEquip = ["outfitName", "outfitRank", "outfitDescription", "outfitEffect", "defDice1", "defDice2", "defDice3", "evdDice1", "evdDice2", "evdDice3", "outfitImmune1", "outfitImmune2", "outfitImmune3", "outfitImmune4", "outfitImmune5", "outfitImmune6", "bleedResist", "burnResist", 

"weapon1Name", "weapon1Rank", "weapon1Description", "weapon1Effect", "weapon1Dice1", "weapon1Dice2", "weapon1Dice3", "weapon1Type", "weapon1Range", "weapon1Uses", "weapon1Uses_max", "weapon1UseType",
"weapon2Name", "weapon2Rank", "weapon2Description", "weapon2Effect", "weapon2Dice1", "weapon2Dice2", "weapon2Dice3", "weapon2Type", "weapon2Range", "weapon2Uses", "weapon2Uses_max", "weapon2UseType",
"weapon3Name", "weapon3Rank", "weapon3Description", "weapon3Effect", "weapon3Dice1", "weapon3Dice2", "weapon3Dice3", "weapon3Type", "weapon3Range", "weapon3Uses", "weapon3Uses_max", "weapon3UseType",
"weapon4Name", "weapon4Rank", "weapon4Description", "weapon4Effect", "weapon4Dice1", "weapon4Dice2", "weapon4Dice3", "weapon4Type", "weapon4Range", "weapon4Uses", "weapon4Uses_max", "weapon4UseType",

"augmentName", "augmentRank", "augmentType", "augmentDescription", "augmentEffect",

"tool1Name", "tool1Rank", "tool1Description", "tool1Effect", "tool1Portable", "tool1Reusable", "tool1Uses", "tool1Uses_max", "tool1Icon",
"tool2Name", "tool2Rank", "tool2Description", "tool2Effect", "tool2Portable", "tool2Reusable", "tool2Uses", "tool2Uses", "tool2Uses_max", "tool2Icon",
"tool3Name", "tool3Rank", "tool3Description", "tool3Effect", "tool3Portable", "tool3Reusable", "tool3Uses", "tool3Uses", "tool3Uses_max", "tool3Icon",
"tool4Name", "tool4Rank", "tool4Description", "tool4Effect", "tool4Portable", "tool4Reusable", "tool4Uses", "tool4Uses", "tool4Uses_max", "tool4Icon",

"special1Name", "special1Rank", "special1Risk", "special1Range", "special1Duration", "special1Description", 
"special2Name", "special2Rank", "special2Risk", "special2Range", "special2Duration", "special2Description"];

let attrkeyDistort = ["distort_name", "distortWork", "distortCounter", "distortWorkInstinct", "distortWorkWisdom", "distortWorkJustice", "distortWorkCharm", "distortWorkInsight", "distortWorkTemperance", "distortResultGood", "distortResultNormal", "distortResultBad", "distortWeaponDice1", "distortWeaponDice2", "distortWeaponDice3", "distortDefDice1", "distortDefDice2", "distortDefDice3", "distortEvdDice1", "distortEvdDice2", "distortEvdDice3", "distortDescription", "distortEffect", "distortDescription2", "distortEffect2", "distort_url", "distort_summary", "distort_behavior", "distort_combatnote", "distort_origin", "distort_notes", "distort_taboo", "distort_appearance", "distort_atmosphere", "distort_story"];

let attrkeyEgo = ["egoName", "egoCondition", "egoType", "egoRank", "egoIdeology", "egoDescription", "egoEffect", "egoWeaponDice1", "egoWeaponDice2", "egoWeaponDice3", "egoWeaponType", "egoWeaponRange", "egoDefDice1", "egoDefDice2", "egoDefDice3", "egoEvdDice1", "egoEvdDice2", "egoEvdDice3", "egoImmune1", "egoImmune2", "egoImmune3", "egoImmune4", "egoImmune5", "egoImmune6", "egoUses", "egoUses_max", "egoUseType", "egoRisk", "egoRange", "egoDuration", "bleedResist_ego", "burnResist_ego"];

let attrkeySkills = ["skill1Name", "skill1Rank", "skill1Type", "skill1Light", "skill1Dice1", "skill1Dice2", "skill1Dice3", "skill1Description", "skill1Effect",
"skill2Name", "skill2Rank", "skill2Type", "skill2Light", "skill2Dice1", "skill2Dice2", "skill2Dice3", "skill2Description", "skill2Effect",
"skill3Name", "skill3Rank", "skill3Type", "skill3Light", "skill3Dice1", "skill3Dice2", "skill3Dice3", "skill3Description", "skill3Effect",
"skill4Name", "skill4Rank", "skill4Type", "skill4Light", "skill4Dice1", "skill4Dice2", "skill4Dice3", "skill4Description", "skill4Effect",
"skill5Name", "skill5Rank", "skill5Type", "skill5Light", "skill5Dice1", "skill5Dice2", "skill5Dice3", "skill5Description", "skill5Effect",
"skill6Name", "skill6Rank", "skill6Type", "skill6Light", "skill6Dice1", "skill6Dice2", "skill6Dice3", "skill6Description", "skill6Effect",
"egoSkill1Name", "egoSkill1Rank", "egoSkill1Type", "egoSkill1Light", "egoSkill1Dice1", "egoSkill1Dice2", "egoSkill1Dice3", "egoSkill1Description", "egoSkill1Effect",
"egoSkill2Name", "egoSkill2Rank", "egoSkill2Type", "egoSkill2Light", "egoSkill2Dice1", "egoSkill2Dice2", "egoSkill2Dice3", "egoSkill2Description", "egoSkill2Effect",
"egoSkill3Name", "egoSkill3Rank", "egoSkill3Type", "egoSkill3Light", "egoSkill3Dice1", "egoSkill3Dice2", "egoSkill3Dice3", "egoSkill3Description", "egoSkill3Effect",
"egoSkill4Name", "egoSkill4Rank", "egoSkill4Type", "egoSkill4Light", "egoSkill4Dice1", "egoSkill4Dice2", "egoSkill4Dice3", "egoSkill4Description", "egoSkill4Effect",
"egoSkill5Name", "egoSkill5Rank", "egoSkill5Type", "egoSkill5Light", "egoSkill5Dice1", "egoSkill5Dice2", "egoSkill5Dice3", "egoSkill5Description", "egoSkill5Effect",
"egoSkill6Name", "egoSkill6Rank", "egoSkill6Type", "egoSkill6Light", "egoSkill6Dice1", "egoSkill6Dice2", "egoSkill6Dice3", "egoSkill6Description", "egoSkill6Effect"];

let attrkeyGlobal = ["global_ruleName", "global_healthBase", "global_healthStat", "global_healthStatMod", "global_healthRankMod", "global_staggerBase", "global_staggerStat", "global_staggerStatMod", "global_staggerRankMod", "global_sanityBase", "global_sanityStat", "global_sanityStatMod", "global_sanityRankMod", "global_lightBase", "global_lightRankMod", "global_distortLightBase", "global_distortLightRankMod", "global_attStat", "global_defStat", "global_evdStat", "global_evdAilment", "global_multiPenalty", "global_multiStyle", "global_staggerRecoverPercent", "global_staggerRecoverBase", "global_staggerSanity", "global_burnDecayMode", "global_burnDecayVal", "global_bleedDecayMode", "global_bleedDecayVal", "global_smokeDecayMode", "global_smokeDecayVal", "global_chargeDecayMode", "global_chargeDecayVal", "settingLimbusStyle"];

/* Data Exporter */
function dataExport(override, target){

getAttrs(["exportType"], function(values) {

	let exporttype = values.exportType;
	let textbase = "";
	let tempval = "";
	let attrkey = "";
	let output = "editorOutput";

	if(target != null){
	output = target;
	}

	let char = "";
	let distort = "";
	let ego = "";
	let equip = "";
	let skills = "";

	/* Format key */

	if(override != null){
	exporttype = override;
	}

	if(exporttype == "All"){
	
	attrkey = attrkeyCharacter.concat(attrkeyDistort, attrkeyEgo, attrkeyEquip, attrkeySkills, attrkeySettings);
	
	}
	else if (exporttype == "Equip"){
	attrkey = attrkeyEquip;
	}
	else if (exporttype == "Distort"){
	attrkey = attrkeyDistort;
	}
	else if (exporttype == "Ego"){
	attrkey = attrkeyEgo;
	}
	else if (exporttype == "Skills"){
	attrkey = attrkeySkills;
	}
	else if (exporttype == "Character"){
	attrkey = attrkeyCharacter;
	}
	else if (exporttype == "Settings"){
	attrkey = attrkeySettings;
	}
	else if (exporttype == "Global"){
	attrkey = attrkeyGlobal;
	}
	else {
	attrkey = [];
	}

	/* Get attributes */

	getAttrs(attrkey, function(values) {

	for(let i = 0; i< attrkey.length ;i++){
	tempval = values[attrkey[i]];

	if(tempval == undefined){
	tempval = "";
	}

   	 	textbase += "[`" + attrkey[i] + "`,`" + tempval + "`]";

		if(i < (attrkey.length - 1)){
		textbase += ", ";
		}

	}


	textbase = textbase.replace(/	/g, ''); /* Remove whitespace */
	

	setAttrs({[output]: textbase });

		});


	});

}

/* Data Importer */
function dataImport(target, prefix, replacestr){

	let inputsource = "editorInput";
	let inputprefix = "";
	
	if(target != null){
	inputsource = target;

	}

getAttrs([`${inputsource}`], function(values) {

	let input = values[`${inputsource}`];

	input = input.replace(/	/g, ''); /* Remove whitespace */
	input = input.replace(/\n/g, "@"); /* Temporarily replace line breaks */
	input = input.replace(/"/g, "“"); /* Temporarily replace " quotes */

	if(replacestr != null && prefix != null){
	input = input.replaceAll(replacestr, prefix);
	}

	let inputarray = "[" + input + "]";
	let attrtarget = "";
	let attrvalue = "";

	inputarray = inputarray.replace(/`/g, '"');

	inputarray = JSON.parse(inputarray);

	const output = {};

	for(let i = 0; i< inputarray.length ;i++){

	attrtarget = inputarray[i][0].toString();
	attrvalue = inputarray[i][1].toString();

	//console.log("Set " + attrtarget + " to: " + attrvalue);

	attrvalue = attrvalue.replace(/@/g, "\n"); /* Reintroduce line breaks */
	attrvalue = attrvalue.replace(/“/g, '"'); /* Reintroduce " quotes */

	output[`${attrtarget}`] = attrvalue;

		}

      	setAttrs(output);	


	});
}

/* Data Exporter - Repeating Section */
function dataExportRepeating(section){

getSectionIDs("repeating_ailments", function(idarray) {

	let textbase = "";
	let tempval = "";
	let attrkey = [];
	let exportkey = [];

	/* Get attributes */
      for(var i=0; i < idarray.length; i++) {
	let currentid = `repeating_${section}_${idarray[i]}`;
	let finalid = i;

	let currentkeys = [`${currentid}_ailName`, `${currentid}_ailIcon`, `${currentid}_ailDisplay`, `${currentid}_ailTrigger`, `${currentid}_ailEffect`, `${currentid}_ailEffectMode`, `${currentid}_ailEffectVal`, `${currentid}_ailDecayMode`, `${currentid}_ailDecayVal`, `${currentid}_ailDecayMin`, `${currentid}_ailMax`, `${currentid}_ailMaxBehavior`, `${currentid}_ailMessageCheck`, `${currentid}_ailMessage`];

	let finalkeys = [`${finalid}_ailName`, `${finalid}_ailIcon`, `${finalid}_ailDisplay`, `${finalid}_ailTrigger`, `${finalid}_ailEffect`, `${finalid}_ailEffectMode`, `${finalid}_ailEffectVal`, `${finalid}_ailDecayMode`, `${finalid}_ailDecayVal`, `${finalid}_ailDecayMin`, `${finalid}_ailMax`, `${finalid}_ailMaxBehavior`, `${finalid}_ailMessageCheck`, `${finalid}_ailMessage`];

	attrkey = attrkey.concat(currentkeys);
	exportkey = exportkey.concat(finalkeys);

      }


	getAttrs(attrkey, function(values) {

		for(let i = 0; i< attrkey.length ;i++){
		tempval = values[attrkey[i]];

		if(tempval == undefined){
		tempval = "";
		}

   	 	textbase += "[`" + exportkey[i] + "`,`" + tempval + "`]";

		if(i < (attrkey.length - 1)){
		textbase += ", ";
		}

		}


	textbase = textbase.replace(/	/g, ''); /* Remove whitespace */
	

	setAttrs({"ailmentEditor": textbase });

		});
	});
}

function dataImportRepeating(section, override){

getAttrs(["ailmentEditor", "customImportMode", "settingCustomCollapse"], function(values) {

	let input = values.ailmentEditor;
	let mode = values.customImportMode;
	let collapseSetting = values.settingCustomCollapse;

	input = input.replace(/	/g, ''); /* Remove whitespace */
	input = input.replace(/\n/g, "@"); /* Temporarily replace line breaks */
	input = input.replace(/"/g, "“"); /* Temporarily replace " quotes */

	let inputarray = "[" + input + "]";
	let attrid = "";
	let attrtarget = "";
	let attrvalue = "";

	inputarray = inputarray.replace(/`/g, '"');

	inputarray = JSON.parse(inputarray);

	const output = {};
	let currentid = 0;
	let oldrowid = "";
	let newrowid = generateRowID();
	output[`repeating_${section}_${newrowid}_ailCollapse`] = collapseSetting;

	if(input != null && input != ""){
		if(override != null){
		mode = override;
		}

		if(mode != "Add"){
		clearCustomAilments();
		}

		for(let i = 0; i< inputarray.length ;i++){

		attrid = inputarray[i][0].split('_')[0];
		attrtarget = inputarray[i][0].split('_')[1];
		attrvalue = inputarray[i][1].toString();

		attrvalue = attrvalue.replace(/@/g, "\n"); /* Reintroduce line breaks */
		attrvalue = attrvalue.replace(/“/g, '"'); /* Reintroduce " quotes */

		/* Moving to next item */
		if(currentid != attrid){
		oldrowid = newrowid;
		newrowid = generateRowID();

			while(oldrowid == newrowid){
			//console.log("This shouldn't happen:" + newrowid);

			newrowid = generateRowID();
			//console.log("Fixing:" + newrowid);
			}

		output[`repeating_${section}_${newrowid}_ailCollapse`] = collapseSetting;

		currentid += 1;
		//console.log("ID: " + newrowid + " | " + attrtarget + "|" + attrid + ", " + currentid + "|");
			}
	
		output[`repeating_${section}_${newrowid}_${attrtarget}`] = attrvalue;

		}

      	setAttrs(output);

	}	


	});
}

/* Export Repeating button */
on("clicked:exportRepeating", function(info) { 
	dataExportRepeating("ailments");

});

/* Import Repeating button */
on("clicked:importRepeating", function(info) { 
	dataImportRepeating("ailments");

});


/* Swap function */
function dataSwap() {
	getAttrs(["editorOutput", "editorInput"], function(values) {
	
	let newoutput = values.editorInput;
	let newinput = values.editorOutput;


	setAttrs({ "editorOutput":newoutput, "editorInput":newinput});
	});
}

/* Swap button */ 
on("clicked:swap", function(info) {
	dataSwap();

	});

/* Function: Clear specified attribute from button */
on("clicked:clearButton", function(info) {

        let buttonid = info.htmlAttributes.id.split('_')[1];

	setAttrs({ [buttonid]:""});

});

/* Import button */
on("clicked:import", function(info) {
	dataImport();

});

/* Export button */
on("clicked:export", function(info) { 
	dataExport();

});

/* Action: Status ailment clicker */
on('clicked:ailmentClicker', (info) => {

	/* Get IDs/names */
        let buttonid = info.htmlAttributes.id.split('_')[1];
	let ailment = buttonid.toString();

	/* Get attributes */
        getAttrs([`${ailment}`], function(values) {

	let currentValue = parseInt(values[ailment]);
	let newval = currentValue + 1;

	setAttrs({ [buttonid]:newval});

    });

});

/* Action: Custom ailment clicker */
on('clicked:repeating_ailments:clickercustom', (info) => {

	const rowid = info.sourceAttribute.split('_')[2];
        getAttrs([`repeating_ailments_${rowid}_ailNum`], function(values) {

	let newval = values[`repeating_ailments_${rowid}_ailNum`];

	newval = parseInt(newval) + 1;

          setAttrs({ [`repeating_ailments_${rowid}_ailNum`]:newval });

        });
});

/* Action: Lock section from sync */
on('clicked:lockSection', (info) => {

	let target = info.htmlAttributes.id.split('_')[1];
	let attrname = "syncLock" + target;

	getAttrs([`${attrname}`], function(values) {

	let synclock = values[`${attrname}`];

	if(synclock != "true"){
          setAttrs({ [`${attrname}`]:"true" });

	}
	else {
	  setAttrs({ [`${attrname}`]:"0" });
	}

        });

});


/* Action: Custom ailment display toggle */
on('clicked:repeating_ailments:displaycustom', (info) => {

	const rowid = info.sourceAttribute.split('_')[2];
        getAttrs([`repeating_ailments_${rowid}_ailDisplay`], function(values) {

	let currentval = values[`repeating_ailments_${rowid}_ailDisplay`];
	let newval = "0";

	if(currentval == "0"){
	newval = "true";
	}
	else {
	newval = "0";
	}

          setAttrs({ [`repeating_ailments_${rowid}_ailDisplay`]:newval });

        });
});


/* Action: Custom ailment copy */
on('clicked:repeating_ailments:copycustom', (info) => {

	let rowid = info.sourceAttribute.split('_')[2];

        getAttrs([`repeating_ailments_${rowid}_ailNum`, `repeating_ailments_${rowid}_ailName`, `repeating_ailments_${rowid}_ailIcon`, `repeating_ailments_${rowid}_ailDisplay`, `repeating_ailments_${rowid}_ailCollapse`, `repeating_ailments_${rowid}_ailTrigger`, `repeating_ailments_${rowid}_ailEffect`, `repeating_ailments_${rowid}_ailEffectMode`, `repeating_ailments_${rowid}_ailEffectVal`, `repeating_ailments_${rowid}_ailDecayMode`, `repeating_ailments_${rowid}_ailDecayVal`, `repeating_ailments_${rowid}_ailDecayMin`, `repeating_ailments_${rowid}_ailMax`, `repeating_ailments_${rowid}_ailMaxBehavior`, `repeating_ailments_${rowid}_ailMessageCheck`, `repeating_ailments_${rowid}_ailMessage`], function(values) {

	let newrowid = generateRowID();
	let newrowattrs = {};

	/* Translation prep */
	let langCopy = "Copy";

	if(getTranslationByKey("message-copy") != false){
	langCopy = getTranslationByKey("message-copy");
	}

	newrowattrs[`repeating_ailments_${newrowid}_ailName`] = values[`repeating_ailments_${rowid}_ailName`] + " (" + langCopy + ")";
	newrowattrs[`repeating_ailments_${newrowid}_ailIcon`] = values[`repeating_ailments_${rowid}_ailIcon`];
	newrowattrs[`repeating_ailments_${newrowid}_ailDisplay`] = values[`repeating_ailments_${rowid}_ailDisplay`];
	newrowattrs[`repeating_ailments_${newrowid}_ailCollapse`] = values[`repeating_ailments_${rowid}_ailCollapse`];

	newrowattrs[`repeating_ailments_${newrowid}_ailTrigger`] = values[`repeating_ailments_${rowid}_ailTrigger`];

	newrowattrs[`repeating_ailments_${newrowid}_ailEffect`] = values[`repeating_ailments_${rowid}_ailEffect`];
	newrowattrs[`repeating_ailments_${newrowid}_ailEffectMode`] = values[`repeating_ailments_${rowid}_ailEffectMode`];
	newrowattrs[`repeating_ailments_${newrowid}_ailEffectVal`] = values[`repeating_ailments_${rowid}_ailEffectVal`];

	newrowattrs[`repeating_ailments_${newrowid}_ailDecayMin`] = values[`repeating_ailments_${rowid}_ailDecayMin`];
	newrowattrs[`repeating_ailments_${newrowid}_ailDecayMode`] = values[`repeating_ailments_${rowid}_ailDecayMode`];
	newrowattrs[`repeating_ailments_${newrowid}_ailDecayVal`] = values[`repeating_ailments_${rowid}_ailDecayVal`];

	newrowattrs[`repeating_ailments_${newrowid}_ailMax`] = values[`repeating_ailments_${rowid}_ailMax`];
	newrowattrs[`repeating_ailments_${newrowid}_ailMaxBehavior`] = values[`repeating_ailments_${rowid}_ailMaxBehavior`];

	newrowattrs[`repeating_ailments_${newrowid}_ailMessageCheck`] = values[`repeating_ailments_${rowid}_ailMessageCheck`];
	newrowattrs[`repeating_ailments_${newrowid}_ailMessage`] = values[`repeating_ailments_${rowid}_ailMessage`];



	setAttrs(newrowattrs);


        });


});



/* Action: Clear all ailment data */
on('clicked:clearAilment', (info) => {

clearCustomAilments();

});

function clearCustomAilments() {

   getSectionIDs("repeating_ailments", function(idarray) {
      for(var i=0; i < idarray.length; i++) {
        removeRepeatingRow("repeating_ailments_" + idarray[i]);
      }
	});

}

/* Check: Collapse all ailment data */
on('change:settingCustomCollapse', (info) => {

getAttrs(["settingCustomCollapse"], function(values) {

	let setting = values.settingCustomCollapse;

        getSectionIDs(`repeating_ailments`, idarray => {
            const fieldnames = idarray.reduce((rows,id) => [...rows, `repeating_ailments_${id}_ailCollapse`], '');
            getAttrs([...fieldnames], v => {
                const output = {};
                idarray.forEach(id => {

                    output[`repeating_ailments_${id}_ailCollapse`] = setting;

                });
                setAttrs(output);
            });
        });

   });

});


/* Action: Sync all ailment data */
on('clicked:syncAilment', (info) => {

getSectionIDs(`repeating_global`, idarray => {
           let id = `repeating_global_${idarray[0]}`;

 getAttrs(["ailmentEditor", `${id}_ailmentSettingSource`, "syncLockAilment", "syncStateAilment"], function(values) {

	let current = values.ailmentEditor;
	let source = values[`${id}_ailmentSettingSource`];

	const output = {};

	/* Translation prep */
	let langSync = "Sync";
	let langCustomAilments = "Custom Ailments";
	let langSyncSuccess = " sync successful.";
	let langSyncFail =  " is locked.\n Unlock before syncing.";
	let langSynced = "No change. Current data is synced.\n(Press Import if display does not match.)";
	let langSyncEmpty = "No change. Source data is empty.";

	if(getTranslationByKey("sync-button") != false){
	langSync = getTranslationByKey("sync-button");
	langCustomAilments = getTranslationByKey("editor-customailments");
	langSyncSuccess = getTranslationByKey("pop-sync-success");
	langSyncFail = getTranslationByKey("pop-sync-fail");
	langSynced = getTranslationByKey("pop-sync-synced");
	langSyncEmpty = getTranslationByKey("pop-sync-empty");

	}

	let syncHeader = langSync;
	let syncBody = "";
	let syncToggle = "0"; 
	let syncCheck = values.syncLockAilment;
	let syncState = values.syncStateAilment;

	if(source != null && source != ""){
	if(source != current && syncCheck != "true"){


	setAttrs({"ailmentEditor":source});

	dataImportRepeating("ailments", "Replace");
	syncBody = langCustomAilments + langSyncSuccess;
	syncToggle = "true"; 
	syncState = "0";

		}
	else if(source != current && syncCheck == "true"){
	syncBody = langCustomAilments + langSyncFail;
	syncToggle = "true"; 

		}
	else if(source == current) {
	syncBody = langSynced;
	syncToggle = "true"; 

		}
	}
	else {
	syncBody = langSyncEmpty;
	syncToggle = "true"; 
	}

	output[`popup_messageHeader`] = syncHeader;
	output[`popup_messageBody`] = syncBody;
	output[`popup_display`] = syncToggle;
	output[`syncStateAilment`] = syncState;

	setAttrs(output);

		});
	});
});



/* Function: Update custom ailment */
function updateCustomAilment(rowid) {

        getAttrs([`repeating_ailments_${rowid}_ailNum`, `repeating_ailments_${rowid}_ailName`, `repeating_ailments_${rowid}_ailIcon`, `repeating_ailments_${rowid}_ailTrigger`, `repeating_ailments_${rowid}_ailEffect`, `repeating_ailments_${rowid}_ailEffectMode`, `repeating_ailments_${rowid}_ailEffectVal`, `repeating_ailments_${rowid}_ailDecayMode`, `repeating_ailments_${rowid}_ailDecayVal`, `repeating_ailments_${rowid}_ailDecayMin`, `repeating_ailments_${rowid}_ailMax`, `repeating_ailments_${rowid}_ailMaxBehavior`, `repeating_ailments_${rowid}_ailMessageCheck`, `repeating_ailments_${rowid}_ailMessage`, "HP", "StagRes", "SP", "Light", "distortCounter", "difficulty", "baseSpeed", "baseLuckNum", "settingWhisperRolls", "settingWhisperTarget", "settingMuteMessage", "character_name"], function(values) {

	let charname = values.character_name;
	let nomessage = values.settingMuteMessage;
	let hiddenroll = values.settingWhisperRolls;

	let ailname = values[`repeating_ailments_${rowid}_ailName`];
	let icon = values[`repeating_ailments_${rowid}_ailIcon`];
	let count = values[`repeating_ailments_${rowid}_ailNum`];

	let trigger = values[`repeating_ailments_${rowid}_ailTrigger`];

	let effecttarget = values[`repeating_ailments_${rowid}_ailEffect`];
	let effectmode = values[`repeating_ailments_${rowid}_ailEffectMode`];
	let effectval = values[`repeating_ailments_${rowid}_ailEffectVal`];

	let decaymode = values[`repeating_ailments_${rowid}_ailDecayMode`];
	let decayval = values[`repeating_ailments_${rowid}_ailDecayVal`];
	let decaymin = parseInt(values[`repeating_ailments_${rowid}_ailDecayMin`]);

	let maxcount = parseInt(values[`repeating_ailments_${rowid}_ailMax`]);
	let maxtype = values[`repeating_ailments_${rowid}_ailMaxBehavior`];

	let messagecheck = values[`repeating_ailments_${rowid}_ailMessageCheck`];
	let message = values[`repeating_ailments_${rowid}_ailMessage`]; 

	//console.log("Name: " + name + " | Icon: " + icon + " | Count: " + count + " | Trigger: " + trigger + " | Effect: " + effecttarget + effectmode + effectval + " | Decay: Count " + decaymode + decayval + " | Message: (" + messagecheck + ")" + message);

	let output = {};

	let newcount = parseInt(count);
	let newmessage = message;

	let targetval = values[`${effecttarget}`];
	let result = "";
	let change = "";

	let activateEffect = "true";
	let activateDecay = "true";
	let activateMessage = "";

	/* Max Behavior Check */
	if(maxcount > 0 && count < maxcount){

		if(maxtype == "Effect" || maxtype == "EffectClear"){
		activateEffect = "false";
		}
		else if(maxtype == "Decay"){
		activateDecay = "false";
		}
		else if(maxtype == "EffectDecay"){
		activateEffect = "false";
		activateDecay = "false";
		}

	}
	else if(maxcount > 0 && count >= maxcount){
		if(maxtype == "Clear" || maxtype == "EffectClear"){
		decaymode = "=";
		decayval = 0;
		}

	}

	/*-- Process Effect --*/
	if(effecttarget != "None" && effecttarget != null && activateEffect == "true" && count != 0){
			if(effectval == "n"){
			effectval = parseInt(count);
			}
			else if(effectval == "-n"){
			effectval = (0 - parseInt(count));
			}

			if(effectmode == "+"){
			result = parseInt(targetval) + parseInt(effectval);

			}
			else if(effectmode == "x"){
			result = parseInt(parseInt(targetval) * parseFloat(effectval));

			}
			else if(effectmode == "="){
			result = parseInt(effectval);

			}

		output[`${effecttarget}`] = result;

		change = parseInt(targetval) - parseInt(result);


		activateMessage = "true";

		}
	

	/*-- Decay --*/
	if(activateDecay == "true" && count >= decaymin){
		if(decayval == "n") {
		decayval = parseInt(count);
		}
		else if(decayval == "-n"){
		decayval = (0 - parseInt(count));
		}

		if(decaymode == "+"){
		newcount = parseInt(count) + parseInt(decayval);	
		}
		else if(decaymode == "x"){
		newcount = parseInt(parseInt(count) * parseFloat(decayval));
		}
		else if(decaymode == "="){
		newcount = parseInt(decayval);
		}

		/* Overflow adjustment */
		if(maxcount != 0 && newcount > maxcount){
		newcount = maxcount;
		}
		if(newcount <= 0){
		newcount = 0;
		}

		output[`repeating_ailments_${rowid}_ailNum`] = newcount;
	}

	setAttrs(output); 

	/*-- Decay end --*/


	/* Message */
	let mutemessage = values.settingMuteMessage;

	if(messagecheck != "0" && activateMessage == "true" && mutemessage != "true"){

	let langEffectValue = "[EVAL]";
	let langDecayValue = "[DVAL]";
	let langName = "[CHAR]";
	let langCount = "[COUNT]";
	let langAilName = "[AIL]";
	let langResult = "[RESULT]";
	let langChange = "[DIFF]";

	/*if(getTranslationByKey("message-match-value") != false){

		langEffectValue = getTranslationByKey("message-match-evalue");
		langDecayValue = getTranslationByKey("message-match-dvalue");
		langName = getTranslationByKey("message-match-name");
		langCount = getTranslationByKey("message-match-count");
		langAilName = getTranslationByKey("message-match-ailment");
		langResult = getTranslationByKey("message-match-result");
		langChange = getTranslationByKey("message-match-change");
		}*/
	
	message = message.replaceAll(langEffectValue, "<b>" + effectval + "</b>");
	message = message.replaceAll(langDecayValue, "<b>" + decayval + "</b>");
	message = message.replaceAll(langName,  "<b>" + charname + "</b>");
	message = message.replaceAll(langCount, "<b>" + count + "</b>");
	message = message.replaceAll(langAilName, "<b>" + ailname + "</b>");
	message = message.replaceAll(langResult, "<b>" + result + "</b>");
	message = message.replaceAll(langChange, "<b>" + change + "</b>");

	newmessage = message;

	let iconnew = "";

	if(icon == "Question"){
	iconnew = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/imagesResized/icons/question.png' style='width: 25px; height: 25px;' >";
	}
	if(icon != "Question" && icon != "None"){
	iconnew = "<img src='https://raw.githubusercontent.com/punibird/roll20-character-sheets/master/ProjectMoonTRPG/images/ailments/"+ icon +".png' style='width: 25px; height: 25px;' >";
	}

	newmessage = iconnew + newmessage;


	/* Whisper roll */
	let whisperrolls = values.settingWhisperRolls;
	let whispertarget = values.settingWhisperTarget;
	let whisper = "";
	if(whisperrolls == "true"){
	whisper = "/w " + whispertarget;
		}

	setAttrs({"dummy":newmessage});


	/*--- Send roll --*/
	startRoll((whisper + "&{template:message} {{icon=@{dummy}}}"), (results) => {
            finishRoll(results.rollId, { });
        });


	setAttrs({"dummy":" "});

	}
	/*--Message end --*/


	});

}

/* Update: Edit Mode state */
on("change:global_editMode", function() {

getAttrs(["global_editMode"], function(values) {
	let state = values.global_editMode;

	if(state != "true"){
	    setAttrs({ "sheetTab": "equipment" });
	}

	});
});

/* Access PW Check */
on("change:global_access", function() {
getSectionIDs("repeating_global", function(idarray) {

	let id = idarray[0];

        getAttrs([`repeating_global_${id}_editKey`, "global_access", "global_accessCheck"], function(values) {

		/* Translation prep */
		let langEditMode = "Edit Mode";
		let langPasswordError = "Wrong password.";

		if(getTranslationByKey("pop-editmode") != false){

		langEditMode = getTranslationByKey("pop-editmode");
		langPasswordError = getTranslationByKey("pop-pwerror");
		}

		const output = {};

		let state = "0";
		let popupdisplay = "0";

		let internalpw = values[`repeating_global_${id}_editKey`];
		let accesspw = values.global_access;       
 
		if(internalpw == accesspw){
		state = "true";
		}
		else if(internalpw == null || internalpw == ""){
		state = "true";
		}
		else {
		output[`popup_messageHeader`] = langEditMode;
		output[`popup_messageBody`] = langPasswordError;

		popupdisplay = "true";
		state = "0";
		}

		output[`popup_display`] = popupdisplay;
		output["global_accessCheck"] = state;

		setAttrs(output);

		});
	});
});

/* Sheet Initialization */
on("sheet:opened", function() { 
getSectionIDs("repeating_global", function(idarray) {

	/* Message Setup */
	let syncHeader = "";
	let syncBody = "";
	let syncToggle = "0"; 
	const output = {};

	setAttrs({"popup_messageHeader":"", "popup_messageBody":"", "popup_display":"0"});


	let rowid = "";

	/* Global Settings Check */
	if(idarray.length >= 1){
	rowid = idarray[0];
	
	}
	else if(idarray.length == 0) {
	rowid = generateRowID();
	//syncBody += "Initialize game settings. ID: " + rowid + "\n";
	//syncToggle = "true"; 

	output[`repeating_global_${rowid}_ruleName`] = "";

	}

    getAttrs(["syncStateGame", "syncStateAilment", "syncLockGame", "syncLockAilment", "global_access", "global_editMode", "global_editKey", "global_gameSettingSource", "global_ailmentSettingSource", "gameEditor", "ailmentEditor", `repeating_global_${rowid}_editKey`, `repeating_global_${rowid}_gameSettingSource`, `repeating_global_${rowid}_ailmentSettingSource`, "settingEvdInfluence", "settingTestOption"], function(values) {

	/* Translation prep */
	let langUpdate = "Update";
	let langGameSettings = "Game Settings";
	let langCustomAilments = "Custom Ailments";
	let langSyncSuccess = "Update synced.";
	let langSyncFail = "Update detected, but section is locked.";

	if(getTranslationByKey("pop-update") != false){

	langUpdate = getTranslationByKey("pop-update");
	langGameSettings = getTranslationByKey("editor-gamesettings");
	langCustomAilments = getTranslationByKey("editor-customailments");
	langSyncSuccess = getTranslationByKey("pop-update-success");
	langSyncFail = getTranslationByKey("pop-update-fail");
	}

	let lockGame = values.syncLockGame;
	let syncGame = values.syncStateGame;
	let lockAilment = values.syncLockAilment;
	let syncAilment = values.syncStateAilment;

	let gameSettings = values[`repeating_global_${rowid}_gameSettingSource`];
	let ailmentSettings = values[`repeating_global_${rowid}_ailmentSettingSource`];

	let updateFlagGame = "0";
	let updateFlagAilments = "0";

	let passCompare = values[`repeating_global_${rowid}_editKey`];
	let passInput = values.global_access;

	let comparekey = rowid.toLowerCase();

	/* Check: External (Default Sheet Settings) updates */
		if(values.global_editKey.toLowerCase() != comparekey){
		output[`repeating_global_${rowid}_editKey`] = values.global_editKey;
		output["global_editKey"] = rowid;

		passCompare = values.global_editKey;
		}

		if(values.global_gameSettingSource != null && values.global_gameSettingSource.toLowerCase() != comparekey){
		output[`repeating_global_${rowid}_gameSettingSource`] = values.global_gameSettingSource;
		output["global_gameSettingSource"] = rowid;
		gameSettings = values.global_gameSettingSource;

		updateFlagGame = "true";

		}

		if(values.global_ailmentSettingSource != null && values.global_ailmentSettingSource.toLowerCase() != comparekey){
		output[`repeating_global_${rowid}_ailmentSettingSource`] = values.global_ailmentSettingSource;
		output["global_ailmentSettingSource"] = rowid;
		ailmentSettings = values.global_ailmentSettingSource;

		updateFlagAilments = "true";

		}


	/* Check: PW updates */ 
	if(passCompare != passInput && passCompare != ""){
	output["global_accessCheck"] = "0";

	}
	else if(passCompare == passInput && passCompare != "") {
	output["global_accessCheck"] = "true";
	}

	if(passCompare == "" || passCompare == null){
	output["global_accessCheck"] = "true";
	}

	/* Check: Internal setting updates */
	if(gameSettings != "" && gameSettings != null && updateFlagGame != "0"){
	if(gameSettings != values.gameEditor && lockGame != "true"){

	setAttrs({"gameEditor":gameSettings});
	dataImport("gameEditor", `repeating_global_${rowid}_`, "global_");
	output["syncStateGame"] = "0";

	syncToggle = "true";
	syncHeader = langUpdate; 
	syncBody += langGameSettings + ": " + langSyncSuccess + "\n";
		}
	else if(gameSettings != values.gameEditor && lockGame == "true"){

		output["syncStateGame"] = "true";

		if(syncGame != "true"){
		syncToggle = "true";
		syncHeader = langUpdate; 
		syncBody += langGameSettings + ": " + langSyncFail + "\n";
			}
		}
	}

	if(ailmentSettings != "" && ailmentSettings != null && updateFlagAilments != "0"){
	if(ailmentSettings != values.ailmentEditor && lockAilment != "true"){

	setAttrs({"ailmentEditor":ailmentSettings});
	dataImportRepeating("ailments", "Replace");
	output["syncStateAilment"] = "0";

	syncToggle = "true";
	syncHeader = langUpdate; 
	syncBody += langCustomAilments + ": " + langSyncSuccess + "\n";
		}
	else if(ailmentSettings != values.ailmentEditor && lockAilment == "true"){

		output["syncStateAilment"] = "true";

		if(syncAilment != "true"){
		syncToggle = "true";
		syncHeader = langUpdate; 
		syncBody += langCustomAilments + ": " + langSyncFail + "\n";
			}
		}
	}

	/* Check: Obsolete attributes  */
	let evdInfluence = values.settingEvdInfluence;
	let testRankPower = values.settingTestOption;

	if(evdInfluence == "true"){
	output[`repeating_global_${rowid}_evdAilment`] = "HasteBind";
	output["settingEvdInfluence"] = "0";
	}

	if(testRankPower == "true"){
	output[`repeating_global_${rowid}_attStat`] = "Rank";
	output["settingTestOption"] = "0";
	}


	output[`popup_messageHeader`] = syncHeader;
	output[`popup_messageBody`] = syncBody;
	output[`popup_display`] = syncToggle;

	setAttrs(output);


		});
	});
});


</script>


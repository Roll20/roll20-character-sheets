<script type="text/worker">
on("change:d8mood1level", function() {
   getAttrs(["d8mood1level", "attr_character_name"], function(values) {
	const displayValues={
		0:'abcd|efgh0',
		1:'Abcd|efgh0',
		2:'ABcd|efgh0',
		3:'ABCd|efgh0',
		4:'ABCD|efgh0',
		5:'ABCD|Efgh0',
		6:'ABCD|EFgh0',
		7:'ABCD|EFGh0',
		8:'ABCD|EFGH0',
		9:'!!!ABCD|EFGHH!!!'
	},
	newValues={};
	newValues.d8mood1icons = displayValues[values.d8mood1level];
	log(`newValues: ${JSON.stringify(newValues)}`);//I'd also recommend stringifying your object to log it so that it's easier to read in the console log.
	setAttrs(newValues);
   });
});

on("change:d8mood2level", function() {
   getAttrs(["d8mood2level", "attr_character_name"], function(values) {
	const displayValues={
		0:'abcd|efgh0',
		1:'Abcd|efgh0',
		2:'ABcd|efgh0',
		3:'ABCd|efgh0',
		4:'ABCD|efgh0',
		5:'ABCD|Efgh0',
		6:'ABCD|EFgh0',
		7:'ABCD|EFGh0',
		8:'ABCD|EFGH0',
		9:'!!!ABCD|EFGHH!!!'
	},
	newValues={};
	newValues.d8mood2icons = displayValues[values.d8mood2level];
	log(`newValues: ${JSON.stringify(newValues)}`);//I'd also recommend stringifying your object to log it so that it's easier to read in the console log.
	setAttrs(newValues);
   });
});


on("change:d6mood1level", function() {
   getAttrs(["d6mood1level", "attr_character_name"], function(values) {
	const displayValues={
		0:'abc|def0',
		1:'Abc|def0',
		2:'ABc|def0',
		3:'ABC|def0',
		4:'ABC|Def0',
		5:'ABC|DEf0',
		6:'ABC|DEF0',
		7:'!!!ABC|DEFF!!!'
	},
	newValues={};
	newValues.d6mood1icons = displayValues[values.d6mood1level];
	log(`newValues: ${JSON.stringify(newValues)}`);//I'd also recommend stringifying your object to log it so that it's easier to read in the console log.
	setAttrs(newValues);
   });
});

on("change:d6mood2level", function() {
   getAttrs(["d6mood2level", "attr_character_name"], function(values) {
	const displayValues={
		0:'abc|def0',
		1:'Abc|def0',
		2:'ABc|def0',
		3:'ABC|def0',
		4:'ABC|Def0',
		5:'ABC|DEf0',
		6:'ABC|DEF0',
		7:'!!!ABC|DEFF!!!'
	},
	newValues={};
	newValues.d6mood2icons = displayValues[values.d6mood2level];
	log(`newValues: ${JSON.stringify(newValues)}`);//I'd also recommend stringifying your object to log it so that it's easier to read in the console log.
	setAttrs(newValues);
   });
});


on("change:d4mood1level", function() {
   getAttrs(["d4mood1level", "attr_character_name"], function(values) {
	const displayValues={
		0:'ab|cd0',
		1:'Ab|cd0',
		2:'AB|cd0',
		3:'AB|Cd0',
		4:'AB|CD0',
		5:'!!!AB|CDD!!!'
	},
	newValues={};
	newValues.d4mood1icons = displayValues[values.d4mood1level];
	log(`newValues: ${JSON.stringify(newValues)}`);//I'd also recommend stringifying your object to log it so that it's easier to read in the console log.
	setAttrs(newValues);
   });
});

on("change:d4mood2level", function() {
   getAttrs(["d4mood2level", "attr_character_name"], function(values) {
	const displayValues={
		0:'ab|cd0',
		1:'Ab|cd0',
		2:'AB|cd0',
		3:'AB|Cd0',
		4:'AB|CD0',
		5:'!!!AB|CDD!!!'
	},
	newValues={};
	newValues.d4mood2icons = displayValues[values.d4mood2level];
	log(`newValues: ${JSON.stringify(newValues)}`);//I'd also recommend stringifying your object to log it so that it's easier to read in the console log.
	setAttrs(newValues);
   });
});
</script>

<div class="sheet-main">
	<input type="hidden" name="attr_riskquery" value="?{World or Character at Risk?|World,0|Character,1}">
	<input type="hidden" name="attr_moodadv" value="?{Mood advantage/disadvantage?|No,1|Yes,2}">
	<input type="hidden" name="attr_aspectadv" value="?{Aspect advantage/disadvantage?|No,1|Yes,2}">
	<input type="hidden" name="attr_aspectdie" value="?{Which aspect die?|d8,8|d6,6|d4,4}">
	<input type="hidden" name="attr_mooddie" value="?{Which mood die?|d8,8|d6,6|d4,4}">
	<input type="hidden" name="attr_d8mood1icons" value="abcd|efgh0"></span>
	<input type="hidden" name="attr_d8mood2icons" value="abcd|efgh0"></span>
	<input type="hidden" name="attr_d6mood1icons" value="abc|def0"></span>
	<input type="hidden" name="attr_d6mood2icons" value="abc|def0"></span>
	<input type="hidden" name="attr_d4mood1icons" value="ab|cd0"></span>
	<input type="hidden" name="attr_d4mood2icons" value="ab|cd0"></span>
	<div class="sheet-header">
		<div class="sheet-header-box sheet-gametitle">No Stone Unturned</div>
		<input type="text" id="attr_character_name" name="attr_character_name" class="sheet-header-box sheet-name"></input>
		<input type="text" id="attr_character_name" name="attr_character_pronoun" class="sheet-header-box sheet-pronouns"></input>
		<input type="text" id="attr_character_look" name="attr_character_look" class="sheet-header-box sheet-look"></input>
		<input type="text" id="attr_character_playername" name="attr_character_playername" class="sheet-header-box sheet-playername"></input>
		<div class="sheet-label-pronouns">Pronouns</div>
		<div class="sheet-label-name">Name</div>
		<div class="sheet-label-look">Look</div>
		<div class="sheet-label-playername">Player Name</div>
	<button class="sheet-roll-rollbutton sheet-actionbutton sheet-d8d8" type="roll" name="roll_d8d8" value="&{template:nostoneunturned} {{riskquery=[[@{riskquery}]]}} {{aspectdie=[[@{aspectdie}]]}} {{mooddie=[[@{mooddie}]]}} {{aspectadv=[[@{aspectadv}]]}}  {{moodadv=[[@{moodadv}]]}}  {{charname=@{character_name}}} {{a1d8=[[1d8]]}} {{a2d8=[[1d8]]}} {{a1d6=[[1d6]]}} {{a2d6=[[1d6]]}} {{a1d4=[[1d4]]}} {{a2d4=[[1d4]]}} {{m1d8=[[1d8]]}} {{m2d8=[[1d8]]}} {{m1d6=[[1d6]]}} {{m2d6=[[1d6]]}} {{m1d4=[[1d4]]}} {{m2d4=[[1d4]]}}">Action Roll</button>
	</div>
	<div class="sheet-stats">
		<div class="sheet-statsheader sheet-sectionheader">Aspects & Moods</div>
		<div class="sheet-d8border"></div>
		<div class="sheet-d6border"></div>
		<div class="sheet-d4border"></div>
		<div class="sheet-moodslabel sheet-headertext">Moods</div>
		<div class="sheet-diesizelabel sheet-headertext">Die</div>
		<div class="sheet-aspectslabel sheet-headertext">Aspects</div>
		<div class="sheet-moodlevellabel sheet-headertext">Mood Levels</div>
		<img src="https://raw.githubusercontent.com/nostoneunturned/nostoneunturned.github.io/master/images/d8.jpg" class="sheet-d8img">
		<img src="https://raw.githubusercontent.com/nostoneunturned/nostoneunturned.github.io/master/images/d6.jpg" class="sheet-d6img">
		<img src="https://raw.githubusercontent.com/nostoneunturned/nostoneunturned.github.io/master/images/d4.jpg" class="sheet-d4img">
		<select name="attr_d8aspect" class="sheet-header-box sheet-d8aspect">
			<option class="sheet-dropdown" value="" disabled selected>Define your d8 Aspect</option>
			<option class="sheet-dropdown" value="body">Body</option>
			<option class="sheet-dropdown" value="mind">Mind</option>
			<option class="sheet-dropdown" value="heart">Heart</option>
		</select>
		<select name="attr_d6aspect" class="sheet-header-box sheet-d6aspect">
			<option class="sheet-dropdown" value="" disabled selected>Define your d6 Aspect</option>
			<option class="sheet-dropdown" value="body">Body</option>
			<option class="sheet-dropdown" value="mind">Mind</option>
			<option class="sheet-dropdown" value="heart">Heart</option>
		</select>
		<select name="attr_d4aspect" class="sheet-header-box sheet-d4aspect">
			<option class="sheet-dropdown" value="" disabled selected>Define your d4 Aspect</option>
			<option class="sheet-dropdown" value="body">Body</option>
			<option class="sheet-dropdown" value="mind">Mind</option>
			<option class="sheet-dropdown" value="heart">Heart</option>
		</select>
		<input type="text" id="attr_character_d8mood1" name="attr_character_d8mood1" class="sheet-stats-box sheet-look sheet-d8mood1"></input>
		<input type="text" id="attr_character_d8mood2" name="attr_character_d8mood2" class="sheet-stats-box sheet-look sheet-d8mood2"></input>
		<input type="text" id="attr_character_d6mood1" name="attr_character_d6mood1" class="sheet-stats-box sheet-look sheet-d6mood1"></input>
		<input type="text" id="attr_character_d6mood2" name="attr_character_d6mood2" class="sheet-stats-box sheet-look sheet-d6mood2"></input>
		<input type="text" id="attr_character_d4mood1" name="attr_character_d4mood1" class="sheet-stats-box sheet-look sheet-d4mood1"></input>
		<input type="text" id="attr_character_d4mood2" name="attr_character_d4mood2" class="sheet-stats-box sheet-look sheet-d4mood2"></input>  
		<input type='number' min='0' max='9' value='@{d8mood1level}' name='attr_d8mood1level' class="sheet-moodlevel sheet-d8mood1level"/>
		<input type='number' min='0' max='9' value='@{d8mood2level}' name='attr_d8mood2level' class="sheet-moodlevel sheet-d8mood2level"/>
		<input type='number' min='0' max='7' value='@{d6mood1level}' name='attr_d6mood1level' class="sheet-moodlevel sheet-d6mood1level"/>		
		<input type='number' min='0' max='7' value='@{d6mood2level}' name='attr_d6mood2level' class="sheet-moodlevel sheet-d6mood2level"/>
		<input type='number' min='0' max='5' value='@{d4mood1level}' name='attr_d4mood1level' class="sheet-moodlevel sheet-d4mood1level"/>		
		<input type='number' min='0' max='5' value='@{d4mood2level}' name='attr_d4mood2level' class="sheet-moodlevel sheet-d4mood2level"/>
		<span name="attr_d8mood1icons" class="sheet-d8mood1icons"></span>
		<span name="attr_d8mood2icons" class="sheet-d8mood2icons"></span>
		<span name="attr_d6mood1icons" class="sheet-d6mood1icons"></span>
		<span name="attr_d6mood2icons" class="sheet-d6mood2icons"></span>
		<span name="attr_d4mood1icons" class="sheet-d4mood1icons"></span>
		<span name="attr_d4mood2icons" class="sheet-d4mood2icons"></span>
	</div>
	<div class="sheet-skills">
		<div class="sheet-skillslabel sheet-sectionheader">Skills</div>
		<div class="sheet-skillname sheet-headertext">Skill Name</div>
		<div class="sheet-skillvalue sheet-headertext">Mod</div>
		<span name="attr_d8aspect" class="sheet-d8aspect sheet-headertext"></span>
		<span name="attr_d6aspect" class="sheet-d6aspect sheet-headertext"></span>
		<span name="attr_d4aspect" class="sheet-d4aspect sheet-headertext"></span>
		<input type="checkbox" name="attr_skill1aspect1" class="sheet-skill1aspect1" value="used">
		<input type="checkbox" name="attr_skill1aspect2" class="sheet-skill1aspect2" value="used">
		<input type="checkbox" name="attr_skill1aspect3" class="sheet-skill1aspect3" value="used">
		<input type="text" name="attr_skill1" class="sheet-skills-box sheet-skill1"></input>
		<input type="number" name="attr_skill1value" class="sheet-skills-box sheet-skillvalue1" step="1"></input>
		<input type="checkbox" name="attr_skill2aspect1" class="sheet-skill2aspect1" value="used">
		<input type="checkbox" name="attr_skill2aspect2" class="sheet-skill2aspect2" value="used">
		<input type="checkbox" name="attr_skill2aspect3" class="sheet-skill2aspect3" value="used">
		<input type="text" name="attr_skill2" class="sheet-skills-box sheet-skill2"></input>
		<input type="number" name="attr_skill2value" class="sheet-skills-box sheet-skillvalue2" step="1"></input>
		<input type="checkbox" name="attr_skill3aspect1" class="sheet-skill3aspect1" value="used">
		<input type="checkbox" name="attr_skill3aspect2" class="sheet-skill3aspect2" value="used">
		<input type="checkbox" name="attr_skill3aspect3" class="sheet-skill3aspect3" value="used">
		<input type="text" name="attr_skill3" class="sheet-skills-box sheet-skill3"></input>
		<input type="number" name="attr_skill3value" class="sheet-skills-box sheet-skillvalue3" step="1"></input>
		<input type="checkbox" name="attr_skill4aspect1" class="sheet-skill4aspect1" value="used">
		<input type="checkbox" name="attr_skill4aspect2" class="sheet-skill4aspect2" value="used">
		<input type="checkbox" name="attr_skill4aspect3" class="sheet-skill4aspect3" value="used">
		<input type="text" name="attr_skill4" class="sheet-skills-box sheet-skill4"></input>
		<input type="number" name="attr_skill4value" class="sheet-skills-box sheet-skillvalue4" step="0"></input>
		<input type="checkbox" name="attr_skill5aspect1" class="sheet-skill5aspect1" value="used">
		<input type="checkbox" name="attr_skill5aspect2" class="sheet-skill5aspect2" value="used">
		<input type="checkbox" name="attr_skill5aspect3" class="sheet-skill5aspect3" value="used">
		<input type="text" name="attr_skill5" class="sheet-skills-box sheet-skill5"></input>
		<input type="number" name="attr_skill5value" class="sheet-skills-box sheet-skillvalue5" step="0"></input>
		<input type="checkbox" name="attr_skill6aspect1" class="sheet-skill6aspect1" value="used">
		<input type="checkbox" name="attr_skill6aspect2" class="sheet-skill6aspect2" value="used">
		<input type="checkbox" name="attr_skill6aspect3" class="sheet-skill6aspect3" value="used">
		<input type="text" name="attr_skill6" class="sheet-skills-box sheet-skill6"></input>
		<input type="number" name="attr_skill6value" class="sheet-skills-box sheet-skillvalue6" step="0"></input>
		<div class="sheet-sentimentslabel sheet-sectionheader">Sentiments</div>
		<div class="sheet-sentimentsname">Sentiment</div>
		<div class="sheet-sentimentsatrisk">At Risk</div>
		<div class="sheet-sentimentslost">Lost</div>
		<div class="sheet-sentimentsdivider"></div>
		<div class="sheet-sentimentsdivider2"></div>
		<div class="sheet-sentimentsborder"></div>
		<div class="sheet-sentimentsborder2"></div>
		<input type="text" name="attr_sentiment1" class="sheet-sentiment-box sheet-sentiment1"></input>
		<input type="checkbox" name="attr_sentimentatrisk1" class="sheet-sentimentatrisk1" value="used">
		<input type="checkbox" name="attr_sentimentlost1" class="sheet-sentimentlost1" value="used">
		<input type="text" name="attr_sentiment2" class="sheet-sentiment-box sheet-sentiment2"></input>
		<input type="checkbox" name="attr_sentimentatrisk2" class="sheet-sentimentatrisk2" value="used">
		<input type="checkbox" name="attr_sentimentlost2" class="sheet-sentimentlost2" value="used">
		<input type="text" name="attr_sentiment3" class="sheet-sentiment-box sheet-sentiment3"></input>
		<input type="checkbox" name="attr_sentimentatrisk3" class="sheet-sentimentatrisk3" value="used">
		<input type="checkbox" name="attr_sentimentlost3" class="sheet-sentimentlost3" value="used">
	</div>
	<div class="sheet-details">
		<div class="sheet-sectionheader sheet-harmdetailsheader">Harm Details</div>
		<div class="sheet-sectionheader sheet-detailsheader">Details</div>
		<div class="sheet-detailborder"></div>
		<div class="sheet-detailborder2"></div>
		<input type="text" name="attr_harmdetail1" class="sheet-detail-box sheet-harmdetail1"></input>
		<input type="text" name="attr_harmdetail2" class="sheet-detail-box sheet-harmdetail2"></input>
		<input type="text" name="attr_harmdetail3" class="sheet-detail-box sheet-harmdetail3"></input>
		<input type="text" name="attr_harmdetail4" class="sheet-detail-box sheet-harmdetail4"></input>
		<input type="text" name="attr_detail1" class="sheet-detail-box sheet-detail1"></input>
		<input type="text" name="attr_detail2" class="sheet-detail-box sheet-detail2"></input>
		<input type="text" name="attr_detail3" class="sheet-detail-box sheet-detail3"></input>
		<input type="text" name="attr_detail4" class="sheet-detail-box sheet-detail4"></input>
		<input type="text" name="attr_detail5" class="sheet-detail-box sheet-detail5"></input>
		<input type="text" name="attr_detail6" class="sheet-detail-box sheet-detail6"></input>
		<input type="text" name="attr_detail7" class="sheet-detail-box sheet-detail7"></input>
		<input type="text" name="attr_detail8" class="sheet-detail-box sheet-detail8"></input>
	</div>
	<div><a href="https://nostoneunturned.github.io">get the full game rules at https://nostoneunturned.github.io<a></div>
</div>


<rolltemplate class="sheet-rolltemplate-nostoneunturned">
		{{#rollTotal() riskquery 0}}
			<div class="sheet-roll-r0c0" style="grid-area: r0c0">World at risk.</div>
			<div class="sheet-roll-r1c0">Player wins if Mood Die is higher.</div>
		{{/rollTotal() riskquery 0}}
		{{#rollTotal() riskquery 1}}
			<div class="sheet-roll-r0c0">Player at risk.</div>
			<div class="sheet-roll-r1c0">Player wins if Aspect Die is higher.		</div>
		{{/rollTotal() riskquery 1}}
		<div class="sheet-roll-r2c1">Mood die</div>
		<div class="sheet-roll-r2c2"></div>
		<div class="sheet-roll-r2c3">Aspect die</div>
		<div class="sheet-roll-r3c1">
			{{#rollTotal() mooddie 8}} {{m1d8}} {{/rollTotal() mooddie 8}} 
			{{#rollTotal() mooddie 6}} {{m1d6}} {{/rollTotal() mooddie 6}} 
			{{#rollTotal() mooddie 4}} {{m1d4}} {{/rollTotal() mooddie 4}} 
		</div>
		<div class="sheet-roll-r3c2"></div>
		<div class="sheet-roll-r3c3">
			{{#rollTotal() aspectdie 8}} {{a1d8}} {{/rollTotal() aspectdie 8}} 
			{{#rollTotal() aspectdie 6}} {{a1d6}} {{/rollTotal() aspectdie 6}} 
			{{#rollTotal() aspectdie 4}} {{a1d4}} {{/rollTotal() aspectdie 4}} 
		</div>
		<div class="sheet-roll-r4c2"></div>
		{{#rollTotal() aspectadv 1}}
			<div class="sheet-roll-r4c3"></div>
		{{/rollTotal() aspectadv 1}}
		{{#^rollTotal() aspectadv 1}}
			<div class="sheet-roll-r4c3">
			{{#rollTotal() aspectdie 8}} {{a2d8}} {{/rollTotal() aspectdie 8}} 
			{{#rollTotal() aspectdie 6}} {{a2d6}} {{/rollTotal() aspectdie 6}} 
			{{#rollTotal() aspectdie 4}} {{a2d4}} {{/rollTotal() aspectdie 4}} 
			</div>
		{{/^rollTotal() aspectadv 1}}
		{{#rollTotal() moodadv 1}}
			<div class="sheet-roll-r4c1"></div>
		{{/rollTotal() moodadv 1}}
		{{#^rollTotal() moodadv 1}}		
			<div class="sheet-roll-r4c1">
			{{#rollTotal() mooddie 8}} {{m2d8}} {{/rollTotal() mooddie 8}} 
			{{#rollTotal() mooddie 6}} {{m2d6}} {{/rollTotal() mooddie 6}} 
			{{#rollTotal() mooddie 4}} {{m2d4}} {{/rollTotal() mooddie 4}} 			
			</div>
		{{/^rollTotal() moodadv 1}}
		<div class="sheet-roll-reminders">Increment mood level & check for overload!</div>
		<div class="sheet-roll-table">Results Table</div>
		<div class="sheet-roll-tv0">0.</div>
		<div class="sheet-roll-tv1">1.</div>
		<div class="sheet-roll-tv2">2.</div>
		<div class="sheet-roll-tv3">3.</div>
		<div class="sheet-roll-tv4">4.</div>
		<div class="sheet-roll-tv5">5+</div>
		<div class="sheet-roll-tt0">Each side adds one hard detail.</div>
		<div class="sheet-roll-tt1">Winning side adds one hard detail, but incurs one hard negative detail added by an ally.</div>
		<div class="sheet-roll-tt2">Winning side adds one hard detail.</div>
		<div class="sheet-roll-tt3">Winning side adds one hard detail and one scene detail.</div>
		<div class="sheet-roll-tt4">Winning side adds one hard detail and so does one ally.</div>
		<div class="sheet-roll-tt5">Winning side adds two hard details.</div>
</rolltemplate>
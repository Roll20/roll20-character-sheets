<input type="hidden" name="attr_version" value="1.11" />
<input class="type" name="attr_sheet_background" type="hidden" value="on">
<div class="container">

<!--*********************************************************************************************************-->
<!--***************************          TOP LEVEL NAVIGATION                     ***************************-->
<!--*********************************************************************************************************-->
	<input class="type" name="attr_sheet_type" type="hidden" value="core">
	<div class="tabs">
		<img class="logo" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Warhammer40k-WrathandGlory/wrathglorylogo.png" />
		<!-- Buttons to change page view -->
		<button type="action" name="act_sheet_toggle_core" data-i18n="core">Core</button>
		<button type="action" name="act_sheet_toggle_info" data-i18n="info">Info</button>
		<button type="action" name="act_sheet_toggle_npc" data-i18n="npc">NPC</button>
	</div>

	<!--*********************************************************************************************************-->
	<!--***************************             PC SHEET                              ***************************-->
	<!--*********************************************************************************************************-->
		<div class="pc">
			<div class="section-body core">
				<div class="col-left">
					<div class="personal-info">
						<div>
							<label data-i18n="name-c">Name:</label>
							<input type="text" name="attr_character_name" title="@{character_name}" value="" />
						</div>
						<div>
							<label data-i18n="tier">Tier:</label>
							<input type="number" min="0" name="attr_tier" title="@{tier}" value="" />
						</div>
						<div>
							<label data-i18n="rank">Rank:</label>
							<input type="number" min="0" name="attr_rank" title="@{rank}" value="" />
							<label data-i18n="rankbonus">Rank Bonus:</label>
							<input type="number" min="0" name="attr_rank_bonus" title="@{rank_bonus}" value="" />
						</div>
					</div>
					<div class="attributes">
						<h1 data-i18n="attributes">Attributes</h1>
						<h2 data-i18n="attribute">Attribute</h2>
						<h2 data-i18n="rating">Rating</h2>
						<h2 data-i18n="adjustedrating">Adjusted Rating</h2>
						<input class="highlight" type="hidden" name="attr_roll" value="" />
						<div>
							<button type="action" name="act_strength" data-i18n="strength">strength</button>
							<input type="number" min="0" name="attr_strength_rating" value="2" title="@{strength_rating}" />
							<input type="number" min="0" name="attr_strength" value="2" title="@{strength}" />
						</div>
						<div>
							<button type="action" name="act_agility" data-i18n="agility">agility</button>
							<input type="number" min="0" name="attr_agility_rating" value="3" title="@{agilit_rating}" />
							<input type="number" min="0" name="attr_agility" value="3" title="@{agility}" />
						</div>
						<div>
							<button type="action" name="act_toughness" data-i18n="toughness">toughness</button>
							<input type="number" min="0" name="attr_toughness_rating" value="3" title="@{toughness_rating}" />
							<input type="number" min="0" name="attr_toughness" value="3" title="@{toughness}" />
						</div>
						<div>
							<button type="action" name="act_intellect" data-i18n="intellect">intellect</button>
							<input type="number" min="0" name="attr_intellect_rating" value="3" title="@{intellect_rating}" />
							<input type="number" min="0" name="attr_intellect" value="3" title="@{intellect}" />
						</div>
						<div>
							<button type="action" name="act_willpower" data-i18n="willpower">willpower</button>
							<input type="number" min="0" name="attr_willpower_rating" value="2" title="@{willpower_rating}" />
							<input type="number" min="0" name="attr_willpower" value="2" title="@{willpower}" />
						</div>
						<div>
							<button type="action" name="act_fellowship" data-i18n="fellowship">fellowship</button>
							<input type="number" min="0" name="attr_fellowship_rating" value="3" title="@{fellowship_rating}" />
							<input type="number" min="0" name="attr_fellowship" value="3" title="@{fellowship}" />
						</div>
						<div>
							<button type="action" name="act_initiative" data-i18n="initiative">initiative</button>
							<input type="number" min="0" name="attr_initiative_rating" value="3" title="@{initiative_rating}" />
							<input type="number" min="0" name="attr_initiative" value="3" title="@{initiative}" />
						</div>
					</div>
					<div class="combat-traits">
						<h1 data-i18n="combattraits">Combat Traits</h1>
						<h2 data-i18n="trait">Trait</h2>
						<h2 data-i18n="rating">Rating</h2>
						<h2 data-i18n="current">Current</h2>
						<input class="highlight" type="hidden" name="attr_roll" value="" />
						<div>
							<button type="action" name="act_defence" data-i18n="defence">defence</button>
							<input type="number" min="0" name="attr_defence" title="@{defence}" value="" />
						</div>
						<div class="combat-split">
							<!--<button type="action" name="act_resilience" data-i18n="resilience">resilience</button>-->
							<label data-i18n="resilience">resilience</label>
							<input type="number" min="0" name="attr_resilience" title="@{resilience}" value="" />
							<span>|</span>
							<span>
								<label data-i18n="armorvalue">Armor value</label>
								<input type="number" min="0" name="attr_armor_value" title="@{armor_value}" value="" />
							</span>
						</div>
						<div>
							<button type="action" name="act_soak" data-i18n="soak">soak</button>
							<input type="number" min="0" name="attr_soak" title="@{soak}" value="" />
						</div>
						<div>
							<label data-i18n="speed">Speed</label>
							<input type="number" min="0" name="attr_speed" title="@{speed}" value="" />
						</div>
						<div>
							<label data-i18n="shock">Shock</label>
							<input type="number" min="0" name="attr_shock" title="@{shock}" value="" />
							<input type="number" min="0" name="attr_shock_current" title="@{shock_current}" value="" />
						</div>
						<div class="combat-split wounds">
							<label data-i18n="wounds">Wounds</label>
							<input type="number" min="0" name="attr_wounds" title="@{wounds}" value="" />
							<span>|</span>
							<span>
								<label data-i18n="heavilywounded">Heavily wounded at</label>
								<input type="number" min="0" name="attr_wounded_heavily" title="@{wounded_heavily}" value="" />
							</span>
							<input type="number" min="0" name="attr_wounds_current" title="@{wounds_current}" value="" />
						</div>
					</div>
					<div class="other-traits">
						<h1 data-i18n="mentaltraits">Mental Traits</h1>
						<h2 data-i18n="trait">Trait</h2>
						<h2 data-i18n="rating">Rating</h2>
						<input class="highlight" type="hidden" name="attr_roll" value="" />
						<div>
							<button type="action" name="act_conviction" data-i18n="conviction">conviction</button>
							<input type="number" min="0" name="attr_conviction" title="@{conviction}" value="" />
						</div> 
						<div>
							<label data-i18n="corruption">Corruption</label>
							<input type="number" min="0" name="attr_corruption" title="@{corruption}" value="0" />
						</div>
						<div>
							<label data-i18n="passiveawareness">Passive Awareness</label>
							<input type="number" min="0" name="attr_passive_awereness" title="@{passive_awareness}" value="" />
						</div>
						<div>
							<button type="action" name="act_resolve" data-i18n="resolve">resolve</button>
							<input type="number" min="0" name="attr_resolve" title="@{resolve}" value="" />
						</div>
					</div>
					<div class="other-traits">
						<h1 data-i18n="socialtraits">Social Traits</h1>
						<h2 data-i18n="trait">Trait</h2>
						<h2 data-i18n="rating">Rating</h2>
						<input class="highlight" type="hidden" name="attr_roll" value="" />
						<div>
							<button type="action" name="act_influence" data-i18n="influence">influence</button>
							<input type="number" min="0" name="attr_influence" title="@{influence}" value="" />
						</div>
						<div>
							<label data-i18n="wealth">Wealth</label>
							<input type="number" min="0" name="attr_wealth" title="@{wealth}" value="" />
						</div>
					</div>
					<div class="other-traits defiance">
						<span style="display: none" data-i18n="defiance">defiance</span>
						<h1 data-i18n="defiancetracker">defiance tracker</h1>
						<button type="roll" name="defiance" value="@{gm_toggle} &{template:rolls}{{header=^{defence}}{{defiance=[[1d6cf<1cs>6]]}}">f</button>
						<input type="checkbox" name="attr_defiance_1" title="@{defiance_1}" /><span></span>
						<input type="checkbox" name="attr_defiance_2" title="@{defiance_2}" /><span></span>
						<input type="checkbox" name="attr_defiance_3" title="@{defiance_3}" /><span></span>
					</div>
					<div class="other-traits reloads">
						<h1 data-i18n="reloads">reloads</h1>
						<input type="checkbox" name="attr_reloads_1" title="@{reloads_1}" /><span></span>
						<input type="checkbox" name="attr_reloads_2" title="@{reloads_2}" /><span></span>
						<input type="checkbox" name="attr_reloads_3" title="@{reloads_3}" /><span></span>
					</div>
				</div> <!-- End of col-left -->
				<div class="col-right">
					<div class="2col-left">
						<div class="personal-info">
							<div>
								<label data-i18n="framework">Framework:</label>
								<input type="text" name="attr_framework" title="@{framework}" value="" />
							</div>
							<div>
								<label data-i18n="species">Species:</label>
								<input type="text" name="attr_species" title="@{species}" value="" />
							</div>
							<div>
								<label data-i18n="speciesability">Species Ability:</label>
								<textarea name="attr_species_ability" title="@{species_ability}" value="" spellcheck="false"></textarea>
							</div>
							<div>
								<label data-i18n="archtype">Archtype:</label>
								<textarea name="attr_archtype" title="@{archtype}" value="" spellcheck="false"></textarea>
							</div>
						</div>
					</div>
					<div class="2col-right">
						<div class="personal-info">
							<label data-i18n="archtypeability">Archtype Ability:</label>
							<textarea name="attr_archtype_ability" title="@{archtype_ability}" value="" spellcheck="false"></textarea>
						</div>
					</div>
					<div class="dieroller">
						<h1 data-i18n="diceroller">Dice Roller</h1>
						<label data-i18n="modifier">modifier</label><input type="number" min="0" name="attr_modifier_dice" title="@{modifier_dice}" value="0" />
						<label data-i18n="wrathdice">wrath dice</label><input type="number" max="10" min="0" name="attr_wrath_dice" value="1" title="@{wrath_dice}" />
						<label>d6</label><button type="roll" name="d6" value="@{gm_toggle} &{template:rolls}{{header=d6}}{{die=[[1d6]]}}" title="d6">f</button>
						<label>d3</label><button type="roll" name="d3" value="@{gm_toggle} &{template:rolls}{{header=d3}}{{die=[[1d3]]}}" title="d3">c</button>
						<label>d66</label><button type="roll" name="d66" value="@{gm_toggle} &{template:rolls}{{header=d66}}{{d66=[[1d6cs0cf0]][[1d6cs0cf0]]}}" title="d66">ff</button>
						<label data-i18n="selected">Selected: </label><span name="attr_roll_name"></span>
						<button type="roll" name="Roll" value="@{gm_toggle} &{template:rolls}{{header=@{roll_name}}}{{base=@{display_attribute}}}{{mod=[[@{modifier_dice}]]}}{{wrath=[[@{wrath_dice}]]}}@{dicepool}" title="Roll">Roll</button>
						<input class="whisper-toggle" type="hidden" name="attr_gm_toggle" value=" " /><button type="action" name="act_whisper" title="whisper">q</button>
					</div>
					<div class="skills">
						<h1 data-i18n="skills">Skills</h1>
						<h2 data-i18n="skill">Skill</h2>
						<h2 data-i18n="rating">Rating</h2>
						<h2 data-i18n="linkedattribute">Linked Attribute</h2>
						<h2 data-i18n="total">Total</h2>
						<input class="highlight" type="hidden" name="attr_roll" value="" />
						<div>
							<button type="action" name="act_athletics" data-i18n="athletics">athletics</button>
							<input type="number" min="0" name="attr_athletics_rating" title="@{athletics_rating}" value="0" />
							<select name="attr_athletics_attribute" title="@{athletics_attribute}">
								<option value="@{strength}" data-i18n="strength" selected>Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_athletics" title="@{athletics}" value="2" />
						</div>
						<div>
							<button type="action" name="act_awareness" data-i18n="awareness">awareness</button>
							<input type="number" min="0" name="attr_awareness_rating" title="@{awareness_rating}" value="0" />
							<select name="attr_awareness_attribute" title="@{awareness_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect" selected>Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_awareness" title="@{awareness}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_ballistic" data-i18n="ballistic">ballistic</button>
							<input type="number" min="0" name="attr_ballistic_rating" title="@{ballistic_rating}" value="0" />
							<select name="attr_ballistic_attribute" title="@{ballistic_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility" selected>Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_ballistic" title="@{ballistic}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_cunning" data-i18n="cunning">cunning</button>
							<input type="number" min="0" name="attr_cunning_rating" title="@{cunning_rating}" value="0" />
							<select name="attr_cunning_attribute" title="@{cunning_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship" selected>Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_cunning" title="@{cunning}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_deception" data-i18n="deception">deception</button>
							<input type="number" min="0" name="attr_deception_rating" title="@{deception_rating}" value="0" />
							<select name="attr_deception_attribute" title="@{deception_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship" selected>Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_deception" title="@{deception}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_insight" data-i18n="insight">insight</button>
							<input type="number" min="0" name="attr_insight_rating" title="@{insight_rating}" value="0" />
							<select name="attr_insight_attribute" title="@{insight_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship" selected>Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_insight" title="@{insight}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_intimidation" data-i18n="intimidation">intimidation</button>
							<input type="number" min="0" name="attr_intimidation_rating" title="@{intimidation_rating}" value="0" />
							<select name="attr_intimidation_attribute" title="@{intimidation_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower" selected>Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_intimidation" title="@{intimidation}" value="2"  />
						</div>
						<div>
							<button type="action" name="act_investigation" data-i18n="investigation">investigation</button>
							<input type="number" min="0" name="attr_investigation_rating" title="@{investigation_rating}" value="0" />
							<select name="attr_investigation_attribute" title="@{investigation_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect" selected>Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_investigation" title="@{investigation}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_leadership" data-i18n="leadership">leadership</button>
							<input type="number" min="0" name="attr_leadership_rating" title="@{leadership_rating}" value="0" />
							<select name="attr_leadership_attribute" title="@{leadership_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship" selected>Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_leadership" title="@{leadership}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_medicae" data-i18n="medicae">medicae</button>
							<input type="number" min="0" name="attr_medicae_rating" title="@{medicae_rating}" value="0" />
							<select name="attr_medicae_attribute" title="@{medicae_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect" selected>Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_medicae" title="@{medicae}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_persuasion" data-i18n="persuasion">persuasion</button>
							<input type="number" min="0" name="attr_persuasion_rating" title="@{persuasion_rating}" value="0" />
							<select name="attr_persuasion_attribute" title="@{persuasion_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship" selected>Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_persuasion" title="@{persuasion}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_pilot" data-i18n="pilot">pilot</button>
							<input type="number" min="0" name="attr_pilot_rating" title="@{pilot_rating}" value="0" />
							<select name="attr_pilot_attribute" title="@{pilot_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility" selected>Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_pilot" title="@{pilot}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_psychic" data-i18n="psychic">psychic mastery</button>
							<input type="number" min="0" name="attr_psychic_rating" title="@{psychic_rating}" value="0" />
							<select name="attr_psychic_attribute" title="@{physical_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower" selected>Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_psychic" title="@{psychic}" value="2"  />
						</div>
						<div>
							<button type="action" name="act_scholar" data-i18n="scholar">scholar</button>
							<input type="number" min="0" name="attr_scholar_rating" title="@{scholar_rating}" value="0" />
							<select name="attr_scholar_attribute" title="@{scholar_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect" selected>Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_scholar" title="@{scholar}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_stealth" data-i18n="stealth">stealth</button>
							<input type="number" min="0" name="attr_stealth_rating" title="@{stealth_rating}" value="0" />
							<select name="attr_stealth_attribute" title="@{stealth_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility" selected>Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_stealth" title="@{stealth}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_survival" data-i18n="survival">survival</button>
							<input type="number" min="0" name="attr_survival_rating" title="@{survival_rating}" value="0" />
							<select name="attr_survival_attribute" title="@{survival_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower" selected>Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_survival" title="@{survival}" value="2"  />
						</div>
						<div>
							<button type="action" name="act_tech" data-i18n="tech">tech</button>
							<input type="number" min="0" name="attr_tech_rating" title="@{tech_rating}" value="0" />
							<select name="attr_tech_attribute" title="@{tech_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect" selected>Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative">Initiative</option>
							</select>
							<input type="number" min="0" name="attr_tech" title="@{tech}" value="3"  />
						</div>
						<div>
							<button type="action" name="act_weapon" data-i18n="weapon">weapon skill</button>
							<input type="number" min="0" name="attr_weapon_rating" title="@{weapon_rating}" value="0" />
							<select name="attr_weapon_attribute" title="@{weapon_attribute}">
								<option value="@{strength}" data-i18n="strength">Strength</option>
								<option value="@{agility}" data-i18n="agility">Agility</option>
								<option value="@{toughness}" data-i18n="toughness">Toughness</option>
								<option value="@{intellect}" data-i18n="intellect">Intellect</option>
								<option value="@{willpower}" data-i18n="willpower">Willpower</option>
								<option value="@{fellowship}" data-i18n="fellowship">Fellowship</option>
								<option value="@{initiative}" data-i18n="initiative" selected>Initiative</option>
							</select>
							<input type="number" min="0" name="attr_weapon" title="@{weapon}" value="3"  />
						</div>
					</div>
				</div><!-- End of col-right -->
				<div class="weapons">
					<h1 data-i18n="weapons">Weapons</h1>
					<h2 data-i18n="name">Name</h2>
					<h2 data-i18n="damage">Damage</h2>
					<h2 data-i18n="ap">AP</h2>
					<h2 data-i18n="salvo">Salvo</h2>
					<h2 data-i18n="range">Range</h2>
					<h2 data-i18n="traits">Traits</h2>
					<fieldset class="repeating_weapons">
						<input type="hidden" name="attr_damage" value="" />
						<input type="hidden" name="attr_damage_dicepool" value="" />
						<div class="display">
							<div><span name="attr_name"></span></div>
							<div><span name="attr_damage"></span></div>
							<div><span name="attr_ap"></span></div>
							<div><span name="attr_salvo"></span></div>
							<div><span name="attr_range"></span></div>
							<div><span name="attr_traits"></span></div>
							<button type="roll" name="weapon" value="@{gm_toggle} &{template:rolls}{{header=@{name}}}{{dam=@{damage} [f](~repeating_weapons_attack_dmg)}}{{ap=@{ap}}}{{range=@{range}}}{{salvo=@{salvo}}}@{damage_dicepool}">w</button>
						</div>
						<input type="checkbox" class="settings-toggle" name="attr_flag" checked="checked" title="Weapon settings" /><span>x</span>
						<div class="settings">
							<div>
								<label data-i18n="name">name</label><input type="text" name="attr_name" title="@{name}" placeholder="Shoota" value="" />
								<label data-i18n="damage">damage</label>
								<div class="damage">
									<input type="number" name="attr_damage_base" title="@{damage_base}" placeholder="10" value="" />
									<span>+</span>
									<input type="number" min="0" name="attr_damage_ed" title="@{damage_ed}" placeholder="1" value="" />
									<span>ed</span>
								</div>
								<label data-i18n="ap">ap</label><input type="text" name="attr_ap" title="@{ap}" placeholder="0" value="" />
								<label data-i18n="salvo">salvo</label><input type="text" name="attr_salvo" title="@{salvo}" placeholder="2" value="" />
								<label data-i18n="range">range</label><input type="text" name="attr_range" title="@{range}" placeholder="36m" value="" />
							</div>
							<div>
								<label data-i18n="traits">traits</label><input type="text" name="attr_traits" title="@{traits}" placeholder="Assault, Waaagh!" value="" />
							</div>
						</div>
						<button type="roll" name="roll_attack_dmg" style="display: none;" value="@{gm_toggle} &{template:rolls}{{shiftdice=[[1d6cf<3cs6]]}}"></button>
					</fieldset>
				</div>
			</div>
			<div class="section-body info">
				<div class="col-left">
					<div class="keywords">
						<h1 data-i18n="keywords">Keywords</h1>
						<textarea name="attr_keywords" title="@{keywords}" value="" spellcheck="false"></textarea>
					</div>
					<div class="talents">
						<h1 data-i18n="talents">Talents</h1>
						<textarea name="attr_talents" title="@{talents}" value="" spellcheck="false"></textarea>
					</div>
					<div class="background">
						<h1 data-i18n="background">Background</h1>
						<textarea name="attr_background" title="@{background}" value="" spellcheck="false"></textarea>
					</div>
					<div class="gear">
						<h1 data-i18n="gear">Gear</h1>
						<textarea name="attr_gear" title="@{gear}" value="" spellcheck="false"></textarea>
					</div>
					<div class="malignancies">
						<h1 data-i18n="malignancies">Maglignancies</h1>
						<textarea name="attr_malignancies" title="@{malignancies}" value="" spellcheck="false"></textarea>
					</div>
				</div>
				<div class="col-right">
					<div class="objectives">
						<h1 data-i18n="objectives">Objectives</h1>
						<textarea name="attr_objectives" title="@{objectives}" value="" spellcheck="false"></textarea>
						<input type="checkbox" name="attr_objective_achieved" title="@{objective_achieved}" value="" />
					</div>
					<div class="ascension">
						<h1 data-i18n="ascensionnotes">Ascension Notes</h1>
						<textarea name="attr_ascension" title="@{ascension}" value="" spellcheck="false"></textarea>
					</div>
					<div class="wrath">
						<h1 data-i18n="wrathpoints">Wrath Points</h1>
						<input type="number" name="attr_wrath_points" title="@{wrath_points}" value="0" />
					</div>
					<div class="wrathglory">
						<span><b data-i18n="wrath-spendone">Spend one Wrath to:</b></span>
						<ul>
							<li data-i18n="wrath-reroll">Re-roll failures once on a test</li>
							<li data-i18n="wrath-add1">Add +1 to a Defiance check</li>
							<li data-i18n="wrath-make">Make a narrative declaration</li>
							<li data-i18n="wrath-immediately">Immediately restore 1d3+1 Shock</li>
						</ul>
						<span><b data-i18n="glory-spendone">Spend one Glory to:</b></span>
						<ul>
							<li data-i18n="glory-add1d">Add +1d to a test after any re-rolls</li>
							<li data-i18n="glory-add1">Add +1 damage to a successful attack</li>
							<li data-i18n="glory-increase">Increase the severity of a Critical Hit</li>
							<li data-i18n="glory-seize">Seize the Initiative</li>
						</ul>
					</div>
				</div>
			</div>
		</div>

	<!--*********************************************************************************************************-->
	<!--***************************             NPC SHEET                             ***************************-->
	<!--*********************************************************************************************************-->
		<div class="npc">
			<div class="section-body">
				<div class="col-left">
					<h1><input type="text" name="attr_character_name" value="Character name" title="@{character_name}" /></h1>
					<div class="npc-threat">
						<label data-i18n="threatclassification">threat classification: </label>
						<textarea name="attr_threat" title="@{threat}" value="" spellcheck="false"></textarea>
					</div>
					<div class="npc-stats">
						<div class="npc-2col">
							<input class="highlight" type="hidden" name="attr_roll" value="" />
							<div class="stat-row">
								<div>
									<button type="action" name="act_strength" data-i18n="strength">strength</button>
									<input type="number" name="attr_strength" placeholder="0"  title="@{strength}" value="0" />
								</div>
								<div>
									<button type="action" name="act_intellect" data-i18n="intellect">intellect</button>
									<input type="number" name="attr_intellect" placeholder="0" title="@{intellect}" value="0" />
								</div>
							</div>
							<div class="stat-row">
								<div>
									<button type="action" name="act_agility" data-i18n="agility">agility</button>
									<input type="number" name="attr_agility" placeholder="0"  title="@{agility}" value="0" />
								</div>
								<div>
									<button type="action" name="act_willpower" data-i18n="willpower">willpower</button>
									<input type="number" name="attr_willpower" placeholder="0"  title="@{willpower}" value="0" />
								</div>
							</div>
							<div class="stat-row">
								<div>
									<button type="action" name="act_toughness" data-i18n="toughness">toughness</button>
									<input type="number" name="attr_toughness" placeholder="0"  title="@{toughness}" value="0" />
								</div>
								<div>
									<button type="action" name="act_fellowship" data-i18n="fellowship">fellowship</button>
									<input type="number" name="attr_fellowship" placeholder="0"  title="@{fellowship}" value="0" />
								</div>
							</div>
							<div class="stat-row">
								<div>
									<button type="action" name="act_initiative" data-i18n="initiative">initiative</button>
									<input type="number" name="attr_initiative" placeholder="0"  title="@{initiative}" value="0" />
								</div>
								<div>
									<button type="action" name="act_defence" data-i18n="defence">defence</button>
									<input type="number" name="attr_defence" placeholder="0"  title="@{defence}" value="0" />
								</div>
							</div>
							<div class="stat-row">
								<div>
									<label data-i18n="speed">speed</label><input type="number" name="attr_speed" placeholder="0"  title="@{speed}" value="0" />
								</div>
								<div>
									<label data-i18n="wounds">wounds</label><input type="number" name="attr_wounds" placeholder="0"  title="@{wounds}" value="0" />
								</div>
							</div>
							<div class="stat-row">
								<div>
									<button type="action" name="act_shock" data-i18n="shock">shock</button>
									<input type="number" name="attr_shock" placeholder="0"  title="@{shock}" value="0" />
								</div>
								<div>
									<button type="action" name="act_soak" data-i18n="soak">soak</button>
									<input type="number" name="attr_soak" placeholder="0"  title="@{soak}" value="0" />
								</div>
							</div>
							<div class="stat-row">
								<div>
									<button type="action" name="act_resolve" data-i18n="resolve">resolve</button>
									<input type="number" name="attr_resolve" placeholder="0"  title="@{resolve}" value="0" />
								</div>
								<div>
									<button type="action" name="act_conviction" data-i18n="conviction">conviction</button>
									<input type="number" name="attr_conviction" placeholder="0"  title="@{conviction}" value="0" />
								</div>
							</div>
							<div class="stat-row">
								<div><label for="passive awareness" data-i18n="passiveawareness">passive awareness</label></div>
								<div><input type="number" name="attr_passive_awereness" placeholder="0" title="@{passive_awareness}" value="0" /></div>
							</div>
						</div>
						<div class="npc-1col">
							<div class="stat-row stat-long-row">
								<button type="action" name="act_resilience" data-i18n="resilience">resilience</button>
								<input type="text" name="attr_resilience" placeholder="0" title="@{resilience}" value="0" />
							</div>
							<div class="stat-row npc-class">
								<input class="settings-toggle" type="checkbox" name="attr_npc_skills" /><span>x</span>
								<div class="npc-skills-active">
									<input class="skill-list" type="hidden" name="attr_skill_list" value="" />
									<label data-i18n="skills">skills</label>
									<input class="highlight" type="hidden" name="attr_roll" value="" />
									<button type="action" name="act_default" data-i18n="default">default <span name="attr_default"></span>,</button>
									<button type="action" name="act_athletics" data-i18n="athletics">athletics <span name="attr_athletics"></span>,</button>
									<button type="action" name="act_awareness" data-i18n="awareness">awareness <span name="attr_awareness"></span>,</button>
									<button type="action" name="act_ballistic" data-i18n="ballistic">ballistic skill <span name="attr_ballistic"></span>,</button>
									<button type="action" name="act_cunning" data-i18n="cunning">cunning <span name="attr_cunning"></span>,</button>
									<button type="action" name="act_deception" data-i18n="deception">deception <span name="attr_deception"></span>,</button>
									<button type="action" name="act_insight" data-i18n="insight">insight <span name="attr_insight"></span>,</button>
									<button type="action" name="act_intimidation" data-i18n="intimidation">intimidation <span name="attr_intimidation"></span>,</button>
									<button type="action" name="act_investigation" data-i18n="investigation">investigation <span name="attr_investigation"></span>,</button>
									<button type="action" name="act_leadership" data-i18n="leadership">leadership <span name="attr_leadership"></span>,</button>
									<button type="action" name="act_medicae" data-i18n="medicae">medicae <span name="attr_medicae"></span>,</button>
									<button type="action" name="act_persuasion" data-i18n="persuasion">persuasion <span name="attr_persuasion"></span>,</button>
									<button type="action" name="act_pilot" data-i18n="pilot">pilot <span name="attr_pilot"></span>,</button>
									<button type="action" name="act_psychic" data-i18n="psychic">psychic mastery <span name="attr_psychic"></span>,</button>
									<button type="action" name="act_scholar" data-i18n="scholar">scholar <span name="attr_scholar"></span>,</button>
									<button type="action" name="act_stealth" data-i18n="stealth">stealth <span name="attr_stealth"></span>,</button>
									<button type="action" name="act_survival" data-i18n="survival">survival <span name="attr_survival"></span>,</button>
									<button type="action" name="act_tech" data-i18n="tech">tech <span name="attr_tech"></span>,</button>
									<button type="action" name="act_weapon" data-i18n="weapon">weapon skill <span name="attr_weapon"></span>,</button>
								</div>
								<div class="npc-skill-list">
									<h2 data-i18n="skill"Skill</h2><h2 data-i18n="pool">Pool</h2><h2 data-i18n="skill">Skill</h2><h2 data-i18n="pool">Pool</h2>
									<div>
										<span>
											<label data-i18n="default">default</label><input type="number" min="0" name="attr_default" placeholder="0" title="@{default}" value="0" />
										</span>
										<span>
											<label data-i18n="athletics">athletics</label><input type="number" min="0" name="attr_athletics" placeholder="0" title="@{athletics}" value="0" />
										</span>
										<span>
											<label data-i18n="awareness">awareness</label><input type="number" min="0" name="attr_awareness" placeholder="0" title="@{awareness}" value="0"  />
										</span>
										<span>
											<label data-i18n="ballistic">ballistic skill</label><input type="number" min="0" name="attr_ballistic" placeholder="0" title="@{ballistic}" value="0"  />
										</span>
										<span>
											<label data-i18n="cunning">cunning</label><input type="number" min="0" name="attr_cunning" placeholder="0" title="@{cunning}" value="0"  />
										</span>
										<span>
											<label data-i18n="deception">deception</label><input type="number" min="0" name="attr_deception" placeholder="0" title="@{deception}" value="0"  />
										</span>
										<span>
											<label data-i18n="insight">insight</label><input type="number" min="0" name="attr_insight" placeholder="0" title="@{insight}" value="0"  />
										</span>
										<span>
											<label data-i18n="intimidation">intimidation</label><input type="number" min="0" name="attr_intimidation" placeholder="0" title="@{intimidation}" value="0"  />
										</span>
										<span>
											<label data-i18n="investigation">investigation</label><input type="number" min="0" name="attr_investigation" placeholder="0" title="@{investigation}" value="0"  />
										</span>
										<span>
											<label data-i18n="leadership">leadership</label><input type="number" min="0" name="attr_leadership" placeholder="0" title="@{leadership}" value="0"  />
										</span>
									</div>
									<div>
										<span>
											<label data-i18n="medicae">medicae</label><input type="number" min="0" name="attr_medicae" placeholder="0" title="@{medicae}" value="0"  />
										</span>
										<span>
											<label data-i18n="persuasion">persuasion</label><input type="number" min="0" name="attr_persuasion" placeholder="0" title="@{persuasion}" value="0"  />
										</span>
										<span>
											<label data-i18n="pilot">pilot</label><input type="number" min="0" name="attr_pilot" placeholder="0" title="@{pilot}" value="0"  />
										</span>
										<span>
											<label data-i18n="psychic">psychic mastery</label><input type="number" min="0" name="attr_psychic" placeholder="0" title="@{psychic}" value="0"  />
										</span>
										<span>
											<label data-i18n="scholar">scholar</label><input type="number" min="0" name="attr_scholar" placeholder="0" title="@{scholar}" value="0"  />
										</span>
										<span>
											<label data-i18n="stealth">stealth</label><input type="number" min="0" name="attr_stealth" placeholder="0"  title="@{stealth}"  value="0" />
										</span>
										<span>
											<label data-i18n="survival">survival</label><input type="number" min="0" name="attr_survival" placeholder="0" title="@{survival}" value="0"  />
										</span>
										<span>
											<label data-i18n="tech">tech</label><input type="number" min="0" name="attr_tech"  placeholder="0" title="@{tech}" value="0" />
										</span>
										<span>
											<label data-i18n="weapon">weapon skill</label><input type="number" min="0" name="attr_weapon" placeholder="0" title="@{weapon}" value="0"  />
										</span>
									</div>
								</div>
							</div>
							<div class="stat-row stat-long-row">
								<label data-i18n="size">size</label><input type="text" name="attr_size" placeholder="size" title="@{size}" value="" />
							</div>
							<div class="stat-row stat-long-row">
								<label data-i18n="keywords">keywords</label><input type="text" name="attr_keywords" placeholder="keywords" title="@{keywords}" value="" />
							</div>
						</div>
					</div>
				</div>
				<div class="col-right">
					<div class="dieroller">
						<h1 data-i18n="diceroller">Dice Roller</h1>
						<label data-i18n="modifier">modifier</label><input type="number" min="0" name="attr_modifier_dice" title="@{modifier_dice}" value="0" />
						<label data-i18n="wrathdice">wrath dice</label><input type="number" max="10" min="0" name="attr_wrath_dice" value="1" title="@{wrath_dice}" />
						<label>d6</label><button type="roll" name="d6" value="@{gm_toggle} &{template:rolls}{{header=d6}}{{die=[[1d6]]}}" title="d6">f</button>
						<label>d3</label><button type="roll" name="d3" value="@{gm_toggle} &{template:rolls}{{header=d3}}{{die=[[1d3]]}}" title="d3">c</button>
						<label>d66</label><button type="roll" name="d66" value="@{gm_toggle} &{template:rolls}{{header=d66}}{{d66=[[1d6cs0cf0]][[1d6cs0cf0]]}}" title="d66">ff</button>
						<label>Selected: </label><span name="attr_roll_name"></span>
						<button type="roll" name="Roll" value="@{gm_toggle} &{template:rolls}{{header=@{roll_name}}}{{base=@{display_attribute}}}{{mod=[[@{modifier_dice}]]}}{{wrath=[[@{wrath_dice}]]}}@{dicepool}" title="Roll">Roll</button>
						<input class="whisper-toggle" type="hidden" name="attr_gm_toggle" value=" " /><button type="action" name="act_whisper" title="whisper">q</button>
					</div>
					<h2 data-i18n="attacks">Attacks</h2>
					<fieldset class="repeating_attacks">
						<input type="hidden" name="attr_display" value="" />
						<input type="hidden" name="attr_damage" value="" />
						<input type="hidden" name="attr_damage_dicepool" value="" />
						<div class="repeat-indent">
							<span name="attr_name"></span><span name="attr_display"></span>
						</div>
						<button class="chat-output" type="roll" name="Attack" value="@{gm_toggle} &{template:rolls}{{header=@{name}}}{{dam=@{damage} [f](~repeating_attacks_attack_dmg)}}{{ap=@{ap}}}{{range=@{range}}}{{salvo=@{salvo}}}@{damage_dicepool}">w</button>
						<input type="checkbox" class="settings-toggle" name="attr_flag" checked="checked" title="Attack settings" /><span>x</span>
						<div class="settings">
							<div><label data-i18n="name">name</label><input type="text" name="attr_name" placeholder=""  title="@{name}" value="" /></div>
							<div>
								<div class="damage">
									<label data-i18n="damage">damage</label>
									<input type="number" name="attr_damage_base" title="@{damage_base}" placeholder="10" value="" /><span>+</span>
									<input type="number" min="0" name="attr_damage_ed" title="@{damage_ed}" placeholder="1" value="" /><span>ed</span>
								</div>
								<div><label data-i18n="ap">ap</label><input type="text" name="attr_ap" placeholder=""  title="@{ap}" value="" /></div>
								<div><label data-i18n="range">range</label><input type="text" name="attr_range" placeholder=""  title="@{range}" value="" /></div>
								<div><label data-i18n="salvo">salvo</label><input type="text" name="attr_salvo" placeholder=""  title="@{salvo}" value="" /></div>
							</div>
							<div>
								<label for="traits">traits</label><input type="text" name="attr_traits" title="@{traits}" value="" />
							</div>
						</div>
						<button type="roll" name="roll_attack_dmg" style="display: none;" value="@{gm_toggle} &{template:rolls}{{shiftdice=[[1d6cf<3cs6]]}}"></button>
					</fieldset>
					<h2 data-i18n="specialabilities">Special Abilities</h2>
					<fieldset class="repeating_abilities">
						<input type="hidden" name="attr_display" value="" />
						<div class="repeat-indent">
							<span name="attr_name"></span><span name="attr_desc"></span>
						</div>
						<button class="chat-output" type="roll" name="Special Ability" value="@{gm_toggle} &{template:rolls}{{header=@{name}}}{{desc=@{desc}}}">w</button>
						<input type="checkbox" class="settings-toggle" name="attr_flag" checked="checked" title="Ability settings" /><span>x</span>
						<div class="settings">
							<div><input type="text" name="attr_name" title="@{name}" value="" /></div>
							<textarea name="attr_desc" title="@{desc}" value="" /></textarea>
						</div>
					</fieldset>
				</div>
			</div>
		</div>

	<!--*********************************************************************************************************-->
	<!--***************************              FOOTER                               ***************************-->
	<!--*********************************************************************************************************-->
		<div class="footer">
			<span data-i18n="disclaimer">Wrath & Glory, logos, & rules belong to Ulisses North America © 2019.</span>
			<span>Sheet Verison: </span><span name="attr_version"></span>
		</div>
</div>
<!--*********************************************************************************************************-->
<!--***************************          HIDDEN ATTRIBUTES                        ***************************-->
<!--*********************************************************************************************************-->
	<input type="hidden" name="attr_dicepool" value="" />
	<input type="hidden" name="attr_roll_name" value="" />
	<input type="hidden" name="attr_display_attribute" value="Base" />
	<input type="hidden" name="attr_glory" value="" />
	<input type="hidden" name="attr_ruin" value="" />
	
<!--*********************************************************************************************************-->
<!--***************************           ROLL TEMPLATE                           ***************************-->
<!--*********************************************************************************************************-->
	<div class="rolltemplates">
		<rolltemplate class="sheet-rolltemplate-rolls">
			{{#header}}
	    		<div class="sheet-template-header">
    				{{header}}<br />
    				{{#base}}<span>{{base}}</span>{{/base}}
    				{{#rollLess() mod 0}}<span> ♦ </span><span data-i18n="modifier">Modifier</span>{{/rollLess() mod 0}}
	    			{{#rollGreater() mod 0}}<span> ♦ </span><span data-i18n="modifier">Modifier</span>{{/rollGreater() mod 0}}
	    			{{#rollGreater() wrath 0}}<span> ♦ </span><span data-i18n="wrath">Wrath</span>{{/rollGreater() wrath 0}}
	    		</div>
    		{{/header}}
	    	 <div class="sheet-template-body">
	    	 	<!-- Start of the Dice Templates -->
	    	 	{{#die}}
		    		<div class="sheet-template-row">
		    			<span>{{die}}</span>
		    		</div>
	    		{{/die}}
	    		{{#dice1}}
	    			<div class="sheet-template-row">
	    				<div class="sheet-template-dice">
		    				{{dice1}}
			    			{{#dice2}}{{dice2}}{{/dice2}}
			    			{{#dice3}}{{dice3}}{{/dice3}}
			    			{{#dice4}}{{dice4}}{{/dice4}}
			    			{{#dice5}}{{dice5}}{{/dice5}}
			    			{{#dice6}}{{dice6}}{{/dice6}}
			    			{{#dice7}}{{dice7}}{{/dice7}}
			    			{{#dice8}}{{dice8}}{{/dice8}}
			    			{{#dice9}}{{dice9}}{{/dice9}}
			    			{{#dice10}}{{dice10}}{{/dice10}}
			    			{{#dice11}}{{dice11}}{{/dice11}}
			    			{{#dice12}}{{dice12}}{{/dice12}}
			    			{{#dice13}}{{dice13}}{{/dice13}}
			    			{{#dice14}}{{dice14}}{{/dice14}}
			    			{{#dice15}}{{dice15}}{{/dice15}}
			    			{{#dice16}}{{dice16}}{{/dice16}}
			    			{{#dice17}}{{dice17}}{{/dice17}}
			    			{{#dice18}}{{dice18}}{{/dice18}}
			    			{{#dice19}}{{dice19}}{{/dice19}}
			    			{{#dice20}}{{dice20}}{{/dice20}}
			    		</div>
			    	</div>
		    	{{/dice1}}
		    	{{#defiance}}
		    		<div class="sheet-template-row">
			    		<div class="sheet-template-defiance">
			    			{{defiance}}
			    		</div>
			    	</div>
		    	{{/defiance}}
	    		{{#d66}}
		    		<div class="sheet-template-row">
			    		<div class="sheet-template-dice">
			    			{{d66}}
			    		</div>
			    	</div>
	    		{{/d66}}
	    		{{#wrathdice1}}
		    		<div class="sheet-template-row">
			    		<div class="sheet-template-wrath">
			    			{{wrathdice1}}
			    			{{#wrathdice2}}{{wrathdice2}}{{/wrathdice2}}
			    			{{#wrathdice3}}{{wrathdice3}}{{/wrathdice3}}
			    			{{#wrathdice4}}{{wrathdice4}}{{/wrathdice4}}
			    			{{#wrathdice5}}{{wrathdice5}}{{/wrathdice5}}
			    			{{#wrathdice6}}{{wrathdice6}}{{/wrathdice6}}
			    			{{#wrathdice7}}{{wrathdice7}}{{/wrathdice7}}
			    			{{#wrathdice8}}{{wrathdice8}}{{/wrathdice8}}
			    			{{#wrathdice9}}{{wrathdice9}}{{/wrathdice9}}
			    			{{#wrathdice10}}{{wrathdice10}}{{/wrathdice10}}
			    		</div>
			    	</div>
		    	{{/wrathdice1}}
		    	<!-- End of Dice templates -->
		    	<!-- Start of the  Weapon templates-->
		    	{{#dam}}
		    		<div class="sheet-template-row sheet-template-wea">
		    			{{#ap}}<span data-i18n="ap">AP</span><span> {{ap}},</span>{{/ap}}
		    			{{#range}}<span data-i18n="range">Range</span><span> {{range}},</span>{{/range}}
		    			{{#salvo}}<span data-i18n="salvo">Salvo</span><span> {{salvo}}</span>{{/salvo}}
		    		</div>
		    		<div class="sheet-template-row sheet-template-wea">
		    			<span data-i18n="damage">Damage </span><span> {{dam}}</span>
		    		</div>
		    	{{/dam}}
		    	{{#damagedice1}}
	    			<div class="sheet-template-row">
	    				<div class="sheet-template-wea">
		    				{{damagedice1}}
			    			{{#damagedice2}}{{damagedice2}}{{/damagedice2}}
			    			{{#damagedice3}}{{damagedice3}}{{/damagedice3}}
			    			{{#damagedice4}}{{damagedice4}}{{/damagedice4}}
			    			{{#damagedice5}}{{damagedice5}}{{/damagedice5}}
			    			{{#damagedice6}}{{damagedice6}}{{/damagedice6}}
			    			{{#damagedice7}}{{damagedice7}}{{/damagedice7}}
			    			{{#damagedice8}}{{damagedice8}}{{/damagedice8}}
			    			{{#damagedice9}}{{damagedice9}}{{/damagedice9}}
			    			{{#damagedice10}}{{damagedice10}}{{/damagedice10}}
			    			{{#damagedice11}}{{damagedice11}}{{/damagedice11}}
			    			{{#damagedice12}}{{damagedice12}}{{/damagedice12}}
			    			{{#damagedice13}}{{damagedice13}}{{/damagedice13}}
			    			{{#damagedice14}}{{damagedice14}}{{/damagedice14}}
			    			{{#damagedice15}}{{damagedice15}}{{/damagedice15}}
			    			{{#damagedice16}}{{damagedice16}}{{/damagedice16}}
			    			{{#damagedice17}}{{damagedice17}}{{/damagedice17}}
			    			{{#damagedice18}}{{damagedice18}}{{/damagedice18}}
			    			{{#damagedice19}}{{damagedice19}}{{/damagedice19}}
			    			{{#damagedice20}}{{damagedice20}}{{/damagedice20}}
			    			{{#damagedice21}}{{damagedice21}}{{/damagedice21}}
			    			{{#damagedice22}}{{damagedice22}}{{/damagedice22}}
			    			{{#damagedice23}}{{damagedice23}}{{/damagedice23}}
			    			{{#damagedice24}}{{damagedice24}}{{/damagedice24}}
			    			{{#damagedice25}}{{damagedice25}}{{/damagedice25}}
			    			{{#damagedice26}}{{damagedice26}}{{/damagedice26}}
			    			{{#damagedice27}}{{damagedice27}}{{/damagedice27}}
			    			{{#damagedice28}}{{damagedice28}}{{/damagedice28}}
			    			{{#damagedice29}}{{damagedice29}}{{/damagedice29}}
			    			{{#damagedice30}}{{damagedice30}}{{/damagedice30}}
			    		</div>
			    	</div>
		    	{{/damagedice1}}
		    	{{#shiftdice}}
		    		<div class="sheet-template-row sheet-template-shift">
			    		<div class="sheet-template-wea">
				    		{{shiftdice}}
				    	</div>
				    </div>
		    	{{/shiftdice}}
		    <!--{{#traits}}
		    		<div class="sheet-template-row sheet-template-wea">
		    			<span>{{traits}}</span>
		    		</div>
		    	{{/traits}} -->
		    	<!-- End of Weapon templates -->
		    	{{#desc}}
		    		<div class="sheet-template-row sheet-template-desc">
		    			{{desc}}
		    		</div>
	    		{{/desc}}
	    	</div>
		</rolltemplate>
	</div>

<!--*********************************************************************************************************-->
<!--***************************              SCRIPTS                              ***************************-->
<!--*********************************************************************************************************-->
<script type="text/worker">

//Sheet open versioning
on("sheet:opened", () => {
	versioning(parseFloat(v.version) || 1);
});	

['sheet_toggle_core', 'sheet_toggle_info', 'sheet_toggle_options', 'sheet_toggle_npc'].forEach(attr => {
	on(`clicked:${attr}`, function(eventinfo) {
		setAttrs({
			sheet_type : eventinfo.triggerName.split("_")[2]
		});
	});
});

on("clicked:whisper", function(eventinfo) {
	getAttrs(["gm_toggle"], function (v) {
		setAttrs({
			gm_toggle : (v.gm_toggle.includes("gm")) ?  " " : "/w gm"
		}); 
	});
});


on("change:roll", function(eventinfo) {
	const attribute = eventinfo.newValue;
	update_roll(attribute);
});

['modifier_dice', 'wrath_dice'].forEach(attr => {
	on(`change:${attr}`, function(eventinfo) {
		getAttrs(["roll"], function (v) {
			const attribute = v.roll;
			update_roll(attribute);
		});
	});
});

//CALCULATE PUSH DICE TEMPLATES PC SKILL ROLLS
['athletics','awareness','ballistic','cunning','deception','insight','intimidation','investigation','leadership','medicae','persuasion','pilot','psychic','scholar','stealth','survival','tech','weapon'
].forEach(attr => {
	on(`change:${attr}_attribute change:${attr}_rating`, function(eventinfo) {
		const source =  eventinfo.sourceAttribute, name  = source.split(`_`)[0];
		getAttrs([`${name}_rating`, `${attr}_attribute`], function(v) {
			const attribute = v[`${name}_attribute`].slice(2, -1);
			getAttrs([`${attribute}`], function(v) {
				const value1 = parseInt(eventinfo.newValue) || 0, value2 = parseInt(v[`${attribute}`]) || 0;
				const tot = value1 + value2;
				setAttrs({
					[`${name}`] : tot
				});  
			});  
		});
	}); 
});

const update_skill = (name, value1, value2) => {
	const tot = value1 + value2;

	setAttrs({
		[`${name}`] : tot
	}); 
};

//SKILLS NEED TO RUN UPDATES WHEN CHANGED
[`default`,'athletics','awareness','ballistic','cunning','deception','insight','intimidation','investigation','leadership','medicae','persuasion','pilot','psychic','scholar','stealth','survival','tech','weapon'
].forEach(attr => {
	on(`change:${attr}`, function(eventinfo) {
		const attribute = eventinfo.triggerName, value = eventinfo.newValue, source = eventinfo.sourceType;
		let attrs = ["roll"];

		//SKILL LIST IS USED FOR NPC SKILL LISTING
		(source === "player") ? attrs.push("skill_list") : false;

		getAttrs(attrs, function (v) {
			if (source === "player") {
				let string = v["skill_list"];	

				if (value > 0 && string.includes(`${attribute}`)) {
					false
				} else {
					(value < 1 && string.includes(`${attribute}`)) ? string = string.replace(`${attribute},`, "") : string += `${attribute},`;
					setAttrs({skill_list : string});
				};
			};

			(attribute === v["roll"]) ? update_roll(attribute) : false;
		}); 
	});
});

//SKILLS & SKILL NAME NEEDS UPDATE ON CLICK
[`default`,'strength','agility','toughness','intellect','willpower','fellowship','initiative','defence','resilience','soak','resolve','conviction','influence','athletics','awareness','ballistic','cunning','deception','insight','intimidation','investigation','leadership','medicae','persuasion','pilot','psychic','scholar','stealth','survival','tech','weapon'
].forEach(attr => {
	on(`clicked:${attr}`, function(eventinfo) {	
		const attribute = eventinfo.triggerName.split(`:`)[1];

 		update_roll(attribute);
 		update_roll_name(attribute);
	});
});

const update_roll = (attribute) => {
	const traits   = ["condition", "defence", "influence", "resilience", "resolve", "soak"];

	getAttrs([`${attribute}`, "modifier_dice", "wrath_dice"], function(v) {
		const roll   = parseInt(v[`${attribute}`]) || 0, mod   = parseInt(v.modifier_dice) || 0;
		const wrath  = (traits.includes(attribute)) ? 0 : parseInt(v.wrath_dice) || 0;
		const tot    = (traits.includes(attribute)) ? (roll + mod) : ((roll + mod) - 1);
		let pool     = [], set     = {};

		//Troubelshooting dice
		/*console.log(`${attribute}: ${roll}`);
		console.log(`Mod: ${mod}`);
		console.log(`Wrath: ${wrath}`);
		console.log(`Total: ${tot}`);*/

		for (w = 1; w <= wrath; w++) {
			pool.push(`{{wrathdice`.concat(w, `=[[1d6cf<1cs>4]]}}`));
		};

		for (x = 1; x <= tot; x++) {
			pool.push(`{{dice`.concat(x, `=[[1d6cf<3cs>4]]}}`)); 
		};

		set["dicepool"] = (pool.join());
		set["roll"] = attribute;

		setAttrs(set, {silent: true});
	});
};

const update_roll_name = (attribute) => {
	setAttrs({
		roll_name : getTranslationByKey(attribute)
	});
};

on(`change:repeating_attacks`, function (eventinfo) {
	const array = [`repeating_attacks_damage`, `repeating_attacks_ap`, `repeating_attacks_range`, `repeating_attacks_salvo`, `repeating_attacks_traits`];

	getAttrs(array, function(v) {
		let string = "";

		array.forEach(attr => { 
			if (v[`${attr}`]) {
				const split = attr.split(`_`)[2], object = (split.lenght === '2') ? split.toUpperCase() : split.charAt(0).toUpperCase() + split.slice(1), value = v[`${attr}`];
				(object === "Traits") ? string += `${value}` : string += `${object} ${value}; `;
			};
		});

		let display = ` (${string})`;

		setAttrs({
			repeating_attacks_display: display
		});
	});
});

on(`change:repeating_weapons:damage_base change:repeating_weapons:damage_ed change:repeating_attacks:damage_base change:repeating_attacks:damage_ed`, function(eventinfo) {
	const source = eventinfo.sourceAttribute.split(`damage_`)[0];
	const damage_base = `${source}damage_base`, damage_ed = `${source}damage_ed`;

	getAttrs([`${damage_base}`, `${damage_ed}`], function(v) {
		const base = v[`${damage_base}`] || 0;
		const ed = v[`${damage_ed}`] || 0;
		setAttrs({
			[`${source}damage`] : `${base} +${ed}ED`
		});
	});
});

on(`change:repeating_weapons:damage_ed change:repeating_attacks:damage_ed`, function(eventinfo) {
	const source = eventinfo.sourceAttribute.split(`damage_`)[0];
	const ed = eventinfo.newValue;
	let pool  = [];

	console.log(eventinfo.sourceAttribute.split(`damage_`)[0]);
	console.log(eventinfo.sourceAttribute.split(`damage_`)[1]);

	for (x = 1; x <= ed; x++) {
			pool.push(`{{damagedice`.concat(x, `=[[1d6cf<3cs6]]}}`)); 
	};

	setAttrs({
		[`${source}damage_dicepool`] : (pool.join())
	});
});


	//VERSION
const versioning = (version) => {
	console.log(`%c Wrath & Glory versioning, ${version}`, "color: #111518; font-weight:bold");
   if (version => 1) {
		console.log(`%c Wrath & Glory is update to date`, "color: #7b1915; font-weight:bold");
   } else {
		setAttrs({version: "1"}, () => {versioning("1")});
	};
};


</script>





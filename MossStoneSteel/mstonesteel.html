<!----------->
<!-- FICHA -->
<!----------->
<input type="hidden" name="attr_$sheet-type" value="PC">
<div class="m-sheet">
  <select name="attr_$sheet-type" class="sheet-type">
    <option value="PC">PC</option>
    <option value="NPC">NPC</option>
    <option value="C" title="config">[C]</option>
  </select>
  
  <!--------> 
  <!-- PC --> 
  <!-------->
  
  <div class="m-pc m-a4-layout">
    <div class="m-page"> 
      <!-- LINHA -->
      <div class="m-line m-flex no-wrap spaced-btw"> 
        
        <!-- ESQ -->
        <div class="m-section chardata f-philosopher">
          <div class="m-items-right">
            <label class="m-item pdr">
            <div class="i-label"><span>Player Name:</span></div>
            <div class="i-value x-long x-invert-y">
              <div class="x-long-border"></div>
              <div class="x-long-content">
                <input type="text" name="attr_player_name">
              </div>
            </div>
            </label>
            <label class="m-item pdr">
            <div class="i-label"><span>Campaign:</span></div>
            <div class="i-value x-long">
              <div class="x-long-border"></div>
              <div class="x-long-content">
                <input type="text" name="attr_campaign">
              </div>
            </div>
            </label>
            <div class="m-iline">
              <label class="m-item">
              <div class="i-label"><span>Character Name:</span></div>
              <div class="i-value">
                <input type="text" name="attr_character_name">
              </div>
              </label>
              <label class="m-item span-in x-level">
              <div class="x-level-border"></div>
              <div class="x-level-content">
                <div class="i-label"><span>Level:</span></div>
                <div class="i-value">
                  <input type="text" name="attr_level" value="1">
                </div>
              </div>
              </label>
            </div>
            <div class="m-iline">
              <label class="m-item">
              <div class="i-label"><span>Race:</span></div>
              <div class="i-value">
                <input type="text" name="attr_character_race" placeholder="" value="">
                <input type="hidden" name="attr_character_race" value="">
                <select name="attr_character_race" style="display: none;">
                  <option value="">...</option>
                  <option value="Arctan">Arctan</option>
                  <option value="Gnome">Gnome</option>
                  <option value="Human">Human</option>
                  <option value="Sodian">Sodian</option>
                </select>
              </div>
              </label>
              <label class="m-item span-in">
              <div class="i-label"><span>XP:</span></div>
              <div class="i-value">
                <input type="text" name="attr_XP" value="0">
              </div>
              </label>
            </div>
            <div class="m-iline">
              <div class="m-item">
                <label >
                <div class="i-label"><span>Profession:</span></div>
                <div class="i-value">
                  <input type="text" name="attr_character_profession">
                  <datalist id="list-proffesions">
                    <option value="Peasant" label="Peasant: +1 FOR, Beast Handling, Might, Flora"></option>
                    <option value="Fugitive" label="Fugitive: +1 ALA, Stealth, Deceive, Disguise Tools"></option>
                    <option value="Traveller" label="Traveller: +1 CON, Observance, Persuade, History"></option>
                    <option value="Guard" label="Guard: +1 STR, Intimidate, Judgment, Might"></option>
                    <option value="Aristocrat" label="Aristocrat: +1 INT, Persuasion, Deception, History"></option>
                    <option value="Courtier" label="Courtier: +1 INT, Beast Handling, Judgement, Intimidate"></option>
                    <option value="Priest" label="Priest: +1 INT, Theology, Thaumaturgy, Persuasion"></option>
                    <option value="Sailor" label="Sailor: +1 CON, Observance, Might, Entertain"></option>
                    <option value="Minstrel" label="Minstrel: +1 CHA, Entertain, Charm, Observe"></option>
                    <option value="Jester" label="Jester: +1 CHA, Entertain, Charm, Deceive"></option>
                    <option value="Bandit" label="Bandit: +1 AGI, Stealth, Dexterity, Observance"></option>
                    <option value="Barbarian" label="Barbarian: +1 FOR, Intimidate, Stealth, Might"></option>
                    <option value="Pariah" label="Pariah: +1 ALA, Stealth, Observance, Flora, Fauna"></option>
                    <option value="Physician" label="Physician: +1 INT, Medicine, Judgment, Flora"></option>
                    <option value="Spy" label="Spy: +1 CHA, Deception, Stealth, Charm"></option>
                    <option value="Blacksmith" label="Blacksmith: +1 CON, Judgment, Might, Persuade"></option>
                    <option value="Scholar" label="Scholar: +1 INT, Choose 3 INT-based skills"></option>
                    <option value="Merchant" label="Merchant: +1 CHA, Persuade, Judgment, Observance"></option>
                    <option value="Mercenary" label="Mercenary: +1 STR, Intimidate, Might, Persuade"></option>
                    <option value="Thief" label="Thief: +1 AGI, Dexterity, Stealth, Observance"></option>
                  </datalist>
                </div>
                </label>
                <label><span>Lifestyle:</span>
                  <input type="text" name="attr_character_lifestyle" placeholder="" value="" style="margin-left: 12px; width: 110px">
                  <input type="hidden" name="attr_character_lifestyle" value="">
                  <select name="attr_character_lifestyle" style="display: none">
                    <option value="">...</option>
                    <option value="Dismal">Dismal</option>
                    <option value="Poor">Poor</option>
                    <option value="Comfortable">Comfortable</option>
                    <option value="Wealthy">Wealthy</option>
                  </select>
                </label>
              </div>
              <label class="m-item span-in">
              <div class="i-label"><span>Night Sight:</span></div>
              <div class="i-value">
                <input type="text" name="attr_character_night-sight">
              </div>
              </label>
            </div>
            <div class="m-iline">
              <label class="m-item">
              <div class="i-label"><span>Class:</span></div>
              <div class="i-value">
                <input type="text" name="attr_character_class">
              </div>
              </label>
              <label class="m-item span-in">
              <div class="i-label"><span>Height:</span></div>
              <div class="i-value">
                <input type="text" name="attr_character_height">
              </div>
              </label>
            </div>
          </div>
        </div>
        
        <!-- DIR -->
        <div class="m-flex alg-end"> 
          
          <!----------> 
          <!-- LOGO --> 
          <!---------->
          
          <div class="m-logo"> <img src="https://www.pktome.com.br/commissions/roll20/sheets/MossStoneSteel/logo_moss.jpg" alt="Moss, Stone & Steel"> </div>
          
          <!------------> 
          <!-- MAESTRIA --> 
          <!------------>
          
          <div class="m-section mastery f-philosopher">
            <div class="m-items-right">
              <label class="m-item pdr">
              <div class="i-label"><span>Armour Mastery:</span></div>
              <div class="i-value">
                <input type="text" name="attr_armour_mastery">
              </div>
              </label>
              <label class="m-item pdr">
              <div class="i-label"><span>Weapon Mastery:</span></div>
              <div class="i-value">
                <input type="text" name="attr_weapon_mastery">
                <span name="attr_weapon_mastery" class="tooltip-mastery"></span> </div>
              </label>
            </div>
          </div>
        </div>
      </div>
      
      <!-- LINHA -->
      <div class="m-line m-flex no-wrap spaced-btw" style="position: relative;">
        <div class="img-vine1"></div>
        
        <!-- ESQ -->
        <div class="m-side m-flex spaced-btw gap-small" style="padding-top: 10px;"> 
          
          <!-- MAIN -->
          <div class="m-main-group">
            <div class="m-token" name="attr_character_token"></div>
            
            <!---------------> 
            <!-- ATRIBUTOS --> 
            <!--------------->
            
            <div class="m-attributes f-philosopher"> 
              
              <!-- CON -->
              <label class="m-item m-attr a-con">
              <div class="i-label"><span>CON</span></div>
              <div class="i-value">
                <input type="hidden" name="attr_CON" value="5">
                <input type="text" name="attr_CON" value="5">
              </div>
              <input type="hidden" name="attr_CON_mod_bonus_arrow" value="0">
              <div class="m-sitem">
                <div class="i-label"><span>Mod</span></div>
                <div class="i-value">
                  <input type="hidden" name="attr_CON_plus" class="plus-signal" value="0">
                  <input type="hidden" name="attr_CON_mod" value="-2">
                  <span><span class="is-positive">+</span><span name="attr_CON_mod">-2</span></span>
                  <div class="arrow-up"> </div>
                </div>
              </div>
              </label>
              
              <!-- STR -->
              <label class="m-item m-attr a-str">
              <div class="i-label"><span>STR</span></div>
              <div class="i-value">
                <input type="hidden" name="attr_STR" value="5">
                <input type="text" name="attr_STR" value="5">
              </div>
              <input type="hidden" name="attr_STR_mod_bonus_arrow" value="0">
              <div class="m-sitem">
                <div class="i-label"><span>Mod</span></div>
                <div class="i-value">
                  <input type="hidden" name="attr_STR_plus" class="plus-signal" value="0">
                  <input type="hidden" name="attr_STR_mod" value="-2">
                  <span><span class="is-positive">+</span><span name="attr_STR_mod">-2</span></span>
                  <div class="arrow-up"></div>
                </div>
              </div>
              </label>
              
              <!-- AGI -->
              <label class="m-item m-attr a-agi">
              <div class="i-label"><span>AGI</span></div>
              <div class="i-value">
                <input type="hidden" name="attr_AGI" value="5">
                <input type="text" name="attr_AGI" value="5">
              </div>
              <input type="hidden" name="attr_AGI_mod_bonus_arrow" value="0">
              <div class="m-sitem">
                <div class="i-label"><span>Mod</span></div>
                <div class="i-value">
                  <input type="hidden" name="attr_AGI_plus" class="plus-signal" value="0">
                  <input type="hidden" name="attr_AGI_mod" value="-2">
                  <span><span class="is-positive">+</span><span name="attr_AGI_mod">-2</span></span>
                  <div class="arrow-up"></div>
                </div>
              </div>
              </label>
              
              <!-- INT -->
              <label class="m-item m-attr a-int">
              <div class="i-label"><span>INT</span></div>
              <div class="i-value">
                <input type="hidden" name="attr_INT" value="5">
                <input type="text" name="attr_INT" value="5">
              </div>
              <input type="hidden" name="attr_MOD_mod_bonus_arrow" value="0">
              <div class="m-sitem">
                <div class="i-label"><span>Mod</span></div>
                <div class="i-value">
                  <input type="hidden" name="attr_INT_plus" class="plus-signal" value="0">
                  <input type="hidden" name="attr_INT_mod" value="-2">
                  <span><span class="is-positive">+</span><span name="attr_INT_mod">-2</span></span>
                  <div class="arrow-up"></div>
                </div>
              </div>
              </label>
              
              <!-- CHA -->
              <label class="m-item m-attr a-cha">
              <div class="i-label"><span>CHA</span></div>
              <div class="i-value">
                <input type="hidden" name="attr_CHA" value="5">
                <input type="text" name="attr_CHA" value="5">
              </div>
              <input type="hidden" name="attr_CHA_mod_bonus_arrow" value="0">
              <div class="m-sitem">
                <div class="i-label"><span>Mod</span></div>
                <div class="i-value">
                  <input type="hidden" name="attr_CHA_plus" class="plus-signal" value="0">
                  <input type="hidden" name="attr_CHA_mod" value="-2">
                  <span><span class="is-positive">+</span><span name="attr_CHA_mod">-2</span></span>
                  <div class="arrow-up"></div>
                </div>
              </div>
              </label>
              
              <!-- FOR -->
              <label class="m-item m-attr a-for">
              <div class="i-label"><span>FOR</span></div>
              <div class="i-value">
                <input type="hidden" name="attr_FOR" value="5">
                <input type="text" name="attr_FOR" value="5">
              </div>
              <input type="hidden" name="attr_FOR_mod_bonus_arrow" value="0">
              <div class="m-sitem">
                <div class="i-label"><span>Mod</span></div>
                <div class="i-value">
                  <input type="hidden" name="attr_FOR_plus" class="plus-signal" value="0">
                  <input type="hidden" name="attr_FOR_mod" value="-2">
                  <span><span class="is-positive">+</span><span name="attr_FOR_mod">-2</span></span>
                  <div class="arrow-up"></div>
                </div>
              </div>
              </label>
              
              <!-- ALA -->
              <label class="m-item m-attr a-ala">
              <div class="i-label"><span>ALA</span></div>
              <div class="i-value">
                <input type="hidden" name="attr_ALA" value="5">
                <input type="text" name="attr_ALA" value="5">
              </div>
              <input type="hidden" name="attr_ALA_mod_bonus_arrow" value="0">
              <div class="m-sitem">
                <div class="i-label"><span>Mod</span></div>
                <div class="i-value">
                  <input type="hidden" name="attr_ALA_plus" class="plus-signal" value="0">
                  <input type="hidden" name="attr_ALA_mod" value="-2">
                  <span><span class="is-positive">+</span><span name="attr_ALA_mod">-2</span></span>
                  <div class="arrow-up"></div>
                </div>
              </div>
              </label>
            </div>
            
            <!-- OTHERS -->
            
            <div class="m-others f-philosopher">
              <label><span>Armour Mod</span>
                <input type="text" name="attr_armour_mod" value="0">
              </label>
              <label><span>Health</span>
                <input type="text" name="attr_hp_max" value="0">
              </label>
              <label><span>Speed</span>
                <input type="text" name="attr_speed" value="0">
              </label>
            </div>
            <div class="reset-01"></div>
          </div>
          
          <!-- -->
          <div class="m-flex f-column gap-small r-side"> 
            
            <!-- MAESTRIA E MIRA -->
            
            <div class="m-group m-flex gap-big alg-cen f-philosopher">
              <div class="m-item m-shield">
                <div class="i-label"><span>Mastery</span></div>
                <div class="i-value">
                  <input type="text" name="attr_mastery" value="+2">
                </div>
              </div>
              <div class="m-item m-shield">
                <div class="i-label"><span>Accuracy</span></div>
                <div class="i-value">
                  <input type="text" name="attr_accuracy" value="+2">
                </div>
              </div>
            </div>
            
            <!-- ESTILO DE LUTA -->
            
            <div class="m-items-right f-philosopher">
              <label class="m-item">
              <div class="i-label"><span>Fighting Style:</span></div>
              <div class="i-value">
                <input type="text" name="attr_fighting_style" placeholder="...">
              </div>
              </label>
            </div>
            
            <!-- OTHERS -->
            
            <div class="m-white-box f-philosopher">
              <div  style="display: none !important"><span class="span-title">Other:</span>
                <input type="text" name="attr_other" value="...">
              </div>
              <div class="small-font-inputs"> <span class="span-title">Language(s):</span>
                <fieldset class="repeating_language">
                  <input type="text" name="attr_name" placeholder="language">
                </fieldset>
              </div>
              <div><span class="span-title">Temporary Conditions:</span>
                <textarea name="attr_temporary_conditions" class="is-textarea" placeholder="..." rows="2"></textarea>
              </div>
              <div><span class="span-title">Permanent Conditions:</span>
                <textarea name="attr_permanent_conditions" class="is-textarea" placeholder="..." rows="2"></textarea>
              </div>
            </div>
            
            <!--------------> 
            <!-- REACTION --> 
            <!-------------->
            
            <div class="m-section tally reaction f-philosopher">
              <div class="m-title"> <span>Total</span> <span>Used Tally</span> </div>
              <div class="m-items-right">
                <div class="m-iline">
                  <label class="m-item">
                  <div class="i-label"><span>Reaction:</span></div>
                  <div class="i-value bg-ret1 size-med">
                    <input type="text" name="attr_reaction_max" value="0">
                  </div>
                  </label>
                  <label class="m-item">
                  <div class="i-value bg-ret3">
                    <input type="text" name="attr_reaction_tally" placeholder="...">
                  </div>
                  </label>
                </div>
              </div>
            </div>
          </div>
          
          <!-----------> 
          <!-- FAITH --> 
          <!----------->
          
          <div class="m-section faith f-philosopher">
            <div class="m-items-right">
              <div class="m-iline">
                <label class="m-item">
                <div class="i-label"><span>Faith:</span></div>
                <div class="i-value">
                  <input type="text" name="attr_character_fait" placeholder="...">
                </div>
                </label>
                <label class="m-item span-in">
                <div class="i-label"><span>Devotion Pts:</span></div>
                <div class="i-value">
                  <input type="text" name="attr_devotion_pts" value="0">
                </div>
                </label>
              </div>
              <label class="m-item mult-lines">
              <div class="i-label"><span>Rites:</span></div>
              <div class="i-value">
                <textarea name="attr_rites" class="is-textarea" placeholder="..." rows="3"></textarea>
              </div>
              </label>
            </div>
          </div>
        </div>
        
        <!-- DIR -->
        <div class="m-flex f-column gap-small"> 
          
          <!------------> 
          <!-- SKILLS --> 
          <!------------>
          
          <div class="border-table-area skills f-philosopher">
            <div class="border-table">
              <div class="m-table">
                <div class="m-head">
                  <div><span>Test/Skill</span></div>
                  <div><span>Base</span></div>
                  <div><span>Mod</span></div>
                  <div><span>Mastery</span></div>
                  <div><span>CT</span></div>
                </div>
                <div class="m-body"> 
                  
                  <!-- Constitution -->
                  <input type="hidden" name="attr_skill-constitution_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_concheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Constitution Check}} {{total=[[2d12]]}} {{ct=[[@{skill-constitution_ct}@{$mod}]]}}"></button>
                      <span>Constitution</span> </div>
                    <div>
                      <input type="text" name="attr_skill-constitution_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-constitution_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-constitution_mquest1">
                        <option value="No">No</option>
                        <option value="CON" selected>CON*</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-constitution_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-constitution_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-constitution_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-constitution_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-constitution_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-constitution_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-constitution_ct">
                    </div>
                  </div>
                  
                  <!-- Strength -->
                  <input type="hidden" name="attr_skill-strength_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_strcheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Strength Check}} {{total=[[2d12]]}} {{ct=[[@{skill-strength_ct}@{$mod}]]}}"></button>
                      <span>Strength</span></div>
                    <div>
                      <input type="text" name="attr_skill-strength_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-strength_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-strength_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR" selected>STR*</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-strength_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-strength_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-strength_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-strength_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-strength_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-strength_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-strength_ct">
                    </div>
                  </div>
                  
                  <!-- Agility -->
                  <input type="hidden" name="attr_skill-agility_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_agicheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Agility Check}} {{total=[[2d12]]}} {{ct=[[@{skill-agility_ct}@{$mod}]]}}"></button>
                      <span>Agility</span> </div>
                    <div>
                      <input type="text" name="attr_skill-agility_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-agility_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-agility_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI" selected>AGI*</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-agility_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-agility_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-agility_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-agility_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-agility_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-agility_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-agility_ct">
                    </div>
                  </div>
                  
                  <!-- Intelligence -->
                  <input type="hidden" name="attr_skill-intelligence_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_intcheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Intelligence Check}} {{total=[[2d12]]}} {{ct=[[@{skill-intelligence_ct}@{$mod}]]}}"></button>
                      <span>Intelligence</span> </div>
                    <div>
                      <input type="text" name="attr_skill-intelligence_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-intelligence_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-intelligence_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT" selected>INT*</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-intelligence_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-intelligence_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-intelligence_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-intelligence_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-intelligence_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-intelligence_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-intelligence_ct">
                    </div>
                  </div>
                  
                  <!-- Charisma -->
                  <input type="hidden" name="attr_skill-charisma_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_chacheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Charisma Check}} {{total=[[2d12]]}} {{ct=[[@{skill-charisma_ct}@{$mod}]]}}"></button>
                      <span>Charisma</span> </div>
                    <div>
                      <input type="text" name="attr_skill-charisma_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-charisma_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-charisma_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA" selected>CHA*</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-charisma_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-charisma_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-charisma_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-charisma_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-charisma_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-charisma_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-charisma_ct">
                    </div>
                  </div>
                  
                  <!-- Fortitude -->
                  <input type="hidden" name="attr_skill-fortitude_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_forcheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Fortitude Check}} {{total=[[2d12]]}} {{ct=[[@{skill-fortitude_ct}@{$mod}]]}}"></button>
                      <span>Fortitude</span> </div>
                    <div>
                      <input type="text" name="attr_skill-fortitude_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-fortitude_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-fortitude_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR" selected>FOR*</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-fortitude_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-fortitude_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-fortitude_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-fortitude_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-fortitude_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-fortitude_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-fortitude_ct">
                    </div>
                  </div>
                  
                  <!-- Alacrity -->
                  <input type="hidden" name="attr_skill-alacrity_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_alacheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Alacrity Check}} {{total=[[2d12]]}} {{ct=[[@{skill-alacrity_ct}@{$mod}]]}}"></button>
                      <span>Alacrity</span> </div>
                    <div>
                      <input type="text" name="attr_skill-alacrity_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-alacrity_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-alacrity_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA" selected>ALA*</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-alacrity_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-alacrity_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-alacrity_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-alacrity_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-alacrity_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-alacrity_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-alacrity_ct">
                    </div>
                  </div>
                  
                  <!-- -->
                  <div></div>
                  <div class="m-tdiv"><span>Skills</span></div>
                  <!-- --> 
                  
                  <!-- Beast Handling -->
                  <input type="hidden" name="attr_skill-beast_handling_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_beasthandlingcheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Beast Handling Check}} {{total=[[2d12]]}} {{ct=[[@{skill-beast_handling_ct}@{$mod}]]}}"></button>
                      <span>Beast Handling</span> </div>
                    <div>
                      <input type="text" name="attr_skill-beast_handling_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-beast_handling_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-beast_handling_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA" selected>FOR+CHA*</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-beast_handling_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-beast_handling_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-beast_handling_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-beast_handling_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-beast_handling_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-beast_handling_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-beast_handling_ct">
                    </div>
                  </div>
                  
                  <!-- Charm -->
                  <input type="hidden" name="attr_skill-charm_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_charmcheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Charm Check}} {{total=[[2d12]]}} {{ct=[[@{skill-charm_ct}@{$mod}]]}}"></button>
                      <span>Charm</span> </div>
                    <div>
                      <input type="text" name="attr_skill-charm_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-charm_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-charm_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA" selected>FOR+CHA*</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-charm_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-charm_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-charm_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-charm_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-charm_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-charm_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-charm_ct">
                    </div>
                  </div>
                  
                  <!-- Deceive -->
                  <input type="hidden" name="attr_skill-deceive_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_deceivecheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Deceive Check}} {{total=[[2d12]]}} {{ct=[[@{skill-deceive_ct}@{$mod}]]}}"></button>
                      <span>Deceive</span> </div>
                    <div>
                      <input type="text" name="attr_skill-deceive_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-deceive_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-deceive_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA" selected>INT+CHA*</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-deceive_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-deceive_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-deceive_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-deceive_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-deceive_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-deceive_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-deceive_ct">
                    </div>
                  </div>
                  
                  <!-- Dexterity -->
                  <input type="hidden" name="attr_skill-dexterity_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_dexcheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Dexterity Check}} {{total=[[2d12]]}} {{ct=[[@{skill-dexterity_ct}@{$mod}]]}}"></button>
                      <span>Dexterity</span> </div>
                    <div>
                      <input type="text" name="attr_skill-dexterity_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-dexterity_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-dexterity_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON" selected>AGI+CON*</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-dexterity_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-dexterity_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-dexterity_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-dexterity_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-dexterity_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-dexterity_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-dexterity_ct">
                    </div>
                  </div>
                  
                  <!-- Entertain -->
                  <input type="hidden" name="attr_skill-entertain_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_entertaincheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Entertain Check}} {{total=[[2d12]]}} {{ct=[[@{skill-entertain_ct}@{$mod}]]}}"></button>
                      <span>Entertain</span> </div>
                    <div>
                      <input type="text" name="attr_skill-entertain_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-entertain_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-entertain_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA" selected>FOR+CHA*</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-entertain_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-entertain_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-entertain_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-entertain_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-entertain_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-entertain_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-entertain_ct">
                    </div>
                  </div>
                  
                  <!-- Fauna -->
                  <input type="hidden" name="attr_skill-fauna_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_faunacheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Fauna Check}} {{total=[[2d12]]}} {{ct=[[@{skill-fauna_ct}@{$mod}]]}}"></button>
                      <span>Fauna</span> </div>
                    <div>
                      <input type="text" name="attr_skill-fauna_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-fauna_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-fauna_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT" selected>INT*</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-fauna_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-fauna_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-fauna_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-fauna_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-fauna_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-fauna_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-fauna_ct">
                    </div>
                  </div>
                  
                  <!-- Flora -->
                  <input type="hidden" name="attr_skill-flora_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_floracheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Flora Check}} {{total=[[2d12]]}} {{ct=[[@{skill-flora_ct}@{$mod}]]}}"></button>
                      <span>Flora</span> </div>
                    <div>
                      <input type="text" name="attr_skill-flora_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-flora_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-flora_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT" selected>INT*</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-flora_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-flora_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-flora_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-flora_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-flora_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-flora_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-flora_ct">
                    </div>
                  </div>
                  
                  <!-- History -->
                  <input type="hidden" name="attr_skill-history_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_historycheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=History Check}} {{total=[[2d12]]}} {{ct=[[@{skill-history_ct}@{$mod}]]}}"></button>
                      <span>History</span> </div>
                    <div>
                      <input type="text" name="attr_skill-history_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-history_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-history_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT" selected>INT*</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-history_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-history_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-history_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-history_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-history_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-history_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-history_ct">
                    </div>
                  </div>
                  
                  <!-- Intimidate -->
                  <input type="hidden" name="attr_skill-intimidate_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_intimidatecheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Intimidate Check}} {{total=[[2d12]]}} {{ct=[[@{skill-intimidate_ct}@{$mod}]]}}"></button>
                      <span>Intimidate</span> </div>
                    <div>
                      <input type="text" name="attr_skill-intimidate_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-intimidate_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-intimidate_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA" selected>FOR+CHA*</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-intimidate_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-intimidate_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-intimidate_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-intimidate_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-intimidate_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-intimidate_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-intimidate_ct">
                    </div>
                  </div>
                  
                  <!-- Judgement -->
                  <input type="hidden" name="attr_skill-judgement_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_judgementcheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Judgement Check}} {{total=[[2d12]]}} {{ct=[[@{skill-judgement_ct}@{$mod}]]}}"></button>
                      <span>Judgement</span> </div>
                    <div>
                      <input type="text" name="attr_skill-judgement_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-judgement_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-judgement_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA" selected>INT+ALA*</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-judgement_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-judgement_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-judgement_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-judgement_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-judgement_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-judgement_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-judgement_ct">
                    </div>
                  </div>
                  
                  <!-- Medicine -->
                  <input type="hidden" name="attr_skill-medicine_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_medicinecheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Medicine Check}} {{total=[[2d12]]}} {{ct=[[@{skill-medicine_ct}@{$mod}]]}}"></button>
                      <span>Medicine</span> </div>
                    <div>
                      <input type="text" name="attr_skill-medicine_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-medicine_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-medicine_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT" selected>INT*</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-medicine_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-medicine_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-medicine_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-medicine_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-medicine_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-medicine_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-medicine_ct">
                    </div>
                  </div>
                  
                  <!-- Might -->
                  <input type="hidden" name="attr_skill-might_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_mightcheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Might Check}} {{total=[[2d12]]}} {{ct=[[@{skill-might_ct}@{$mod}]]}}"></button>
                      <span>Might</span> </div>
                    <div>
                      <input type="text" name="attr_skill-might_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-might_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-might_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR" selected>FOR+STR*</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-might_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-might_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-might_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-might_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-might_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-might_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-might_ct">
                    </div>
                  </div>
                  
                  <!-- Observe -->
                  <input type="hidden" name="attr_skill-observe_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_observecheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Observe Check}} {{total=[[2d12]]}} {{ct=[[@{skill-observe_ct}@{$mod}]]}}"></button>
                      <span>Observe</span> </div>
                    <div>
                      <input type="text" name="attr_skill-observe_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-observe_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-observe_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON" selected>INT+CON*</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-observe_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-observe_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-observe_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-observe_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-observe_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-observe_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-observe_ct">
                    </div>
                  </div>
                  
                  <!-- Persuade -->
                  <input type="hidden" name="attr_skill-persuade_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_persuadecheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Persuade Check}} {{total=[[2d12]]}} {{ct=[[@{skill-persuade_ct}@{$mod}]]}}"></button>
                      <span>Persuade</span> </div>
                    <div>
                      <input type="text" name="attr_skill-persuade_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-persuade_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-persuade_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA" selected>INT+CHA*</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-persuade_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-persuade_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-persuade_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-persuade_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-persuade_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-persuade_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-persuade_ct">
                    </div>
                  </div>
                  
                  <!-- Stealth -->
                  <input type="hidden" name="attr_skill-stealth_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_stealthcheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Stealth Check}} {{total=[[2d12]]}} {{ct=[[@{skill-stealth_ct}@{$mod}]]}}"></button>
                      <span>Stealth</span> </div>
                    <div>
                      <input type="text" name="attr_skill-stealth_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-stealth_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-stealth_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA" selected>INT+ALA*</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-stealth_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-stealth_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-stealth_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-stealth_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-stealth_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-stealth_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-stealth_ct">
                    </div>
                  </div>
                  
                  <!-- Thaumaturgy -->
                  <input type="hidden" name="attr_skill-thaumaturgy_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_thaumaturgycheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Thaumaturgy Check}} {{total=[[2d12]]}} {{ct=[[@{skill-thaumaturgy_ct}@{$mod}]]}}"></button>
                      <span>Thaumaturgy</span> </div>
                    <div>
                      <input type="text" name="attr_skill-thaumaturgy_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-thaumaturgy_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-thaumaturgy_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT" selected>INT*</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-thaumaturgy_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-thaumaturgy_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-thaumaturgy_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-thaumaturgy_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-thaumaturgy_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-thaumaturgy_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-thaumaturgy_ct">
                    </div>
                  </div>
                  
                  <!-- Theology -->
                  <input type="hidden" name="attr_skill-theology_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_theologycheck" value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=Theology Check}} {{total=[[2d12]]}} {{ct=[[@{skill-theology_ct}@{$mod}]]}}"></button>
                      <span>Theology</span> </div>
                    <div>
                      <input type="text" name="attr_skill-theology_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-theology_mquest1" class="is-custom" value="No">
                      <select name="attr_skill-theology_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT" selected>INT*</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-theology_mod" class="hidden-nocustom">
                      <input type="text" name="attr_skill-theology_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_skill-theology_mquest2" class="is-custom" value="No">
                      <select name="attr_skill-theology_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_skill-theology_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_skill-theology_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_skill-theology_ct">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!--------------> 
          <!-- TOOL KIT --> 
          <!-------------->
          
          <div class="border-table-area skills toolkit f-philosopher">
            <div class="border-table">
              <div class="m-table">
                <div class="m-head">
                  <div><span>Tool Kit</span></div>
                  <div><span>Base</span></div>
                  <div><span>Mod</span></div>
                  <div><span>Mastery</span></div>
                  <div><span>CT</span></div>
                </div>
                <div class="m-body"> 
                  
                  <!-- TOOL-X1 -->
                  <input type="hidden" name="attr_tool-X1_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_toolx1" 
  value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=@{tool-X1} Check}} {{total=[[2d12]]}} {{ct=[[@{tool-X1_ct}@{$mod}]]}}"> </button>
                      <input type="text" name="attr_tool-X1" placeholder="...">
                    </div>
                    <div>
                      <input type="text" name="attr_tool-X1_base" value="0">
                    </div>
                    <div>
                      <input type="hidden" name="attr_tool-X1_mquest1" class="is-custom" value="No">
                      <select name="attr_tool-X1_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_tool-X1_mod" class="hidden-nocustom">
                      <input type="text" name="attr_tool-X1_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_tool-X1_mquest2" class="is-custom" value="No">
                      <select name="attr_tool-X1_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_tool-X1_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_tool-X1_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_tool-X1_ct">
                    </div>
                  </div>
                  
                  <!-- TOOL-X2 -->
                  <input type="hidden" name="attr_tool-X2_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_toolx2" 
  value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=@{tool-X2} Check}} {{total=[[2d12]]}} {{ct=[[@{tool-X2_ct}@{$mod}]]}}"> </button>
                      <input type="text" name="attr_tool-X2" placeholder="...">
                    </div>
                    <div>
                      <input type="text" name="attr_tool-X2_base" value="0">
                    </div>
                    <div>
                      <input type="hidden" name="attr_tool-X2_mquest1" class="is-custom" value="No">
                      <select name="attr_tool-X2_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_tool-X2_mod" class="hidden-nocustom">
                      <input type="text" name="attr_tool-X2_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_tool-X2_mquest2" class="is-custom" value="No">
                      <select name="attr_tool-X2_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_tool-X2_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_tool-X2_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_tool-X2_ct">
                    </div>
                  </div>
                  
                  <!-- TOOL-X3 -->
                  <input type="hidden" name="attr_tool-X3_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="roll" name="roll_toolx3" 
  value="@{$GM}&{template:ct} {{name=@{character_name}}} {{title=@{tool-X3} Check}} {{total=[[2d12]]}} {{ct=[[@{tool-X3_ct}@{$mod}]]}}"> </button>
                      <input type="text" name="attr_tool-X3" placeholder="...">
                    </div>
                    <div>
                      <input type="text" name="attr_tool-X3_base" value="0">
                    </div>
                    <div>
                      <input type="hidden" name="attr_tool-X3_mquest1" class="is-custom" value="No">
                      <select name="attr_tool-X3_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="AGI+CON">AGI+CON</option>
                        <option value="INT">INT</option>
                        <option value="INT+CON">INT+CON</option>
                        <option value="INT+CHA">INT+CHA</option>
                        <option value="INT+ALA">INT+ALA</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="FOR+STR">FOR+STR</option>
                        <option value="FOR+CHA">FOR+CHA</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_tool-X3_mod" class="hidden-nocustom">
                      <input type="text" name="attr_tool-X3_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_tool-X3_mquest2" class="is-custom" value="No">
                      <select name="attr_tool-X3_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_tool-X3_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_tool-X3_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_tool-X3_ct">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- LINHA -->
      <div class="m-line f-philosopher">
        <div class="m-section tally">
          <div class="m-title"> <span>Total</span> <span>Used Tally</span> </div>
          <div class="m-items-right"> 
            
            <!-------------> 
            <!-- STAMINA --> 
            <!------------->
            <input type="hidden" name="attr_stamina_alert" class="is-alert" value="0">
            <div class="m-iline">
              <label class="m-item">
              <div class="i-label"><span>Stamina:</span></div>
              <div class="i-value bg-ret1 size-med no-padding">
                <input type="text" name="attr_stamina" value="0">
                <span style="font-size: 12px;">/</span>
                <input type="text" name="attr_stamina_max" value="0">
              </div>
              </label>
              <label class="m-item">
              <div class="i-value bg-ret2 alg-cen">
                <button type="action" name="act_resetstamina" style="margin-left: 15px;">Reset</button>
                <input type="text" name="attr_stamina_tally" placeholder="...">
              </div>
              </label>
            </div>
            
            <!-----------> 
            <!-- MAGIC --> 
            <!----------->
            
            <input type="hidden" name="attr_magic_alert" class="is-alert" value="0">
            <div class="m-iline">
              <label class="m-item">
              <div class="i-label"><span>Magic:</span></div>
              <div class="i-value bg-ret1 size-med no-padding">
                <input type="text" name="attr_magic" value="-">
                <span style="font-size: 12px;">/</span>
                <input type="text" name="attr_magic_max" value="-">
              </div>
              </label>
              <label class="m-item">
              <div class="i-value bg-ret2 alg-cen">
                <button type="action" name="act_resetmagic" style="margin-left: 15px;">Reset</button>
                <input type="text" name="attr_magic_tally" placeholder="...">
              </div>
              </label>
            </div>
          </div>
        </div>
      </div>
      
      <!-- LINHA -->
      <div class="m-line m-flex no-wrap spaced-btw gap-med" style="position: relative;">
        <div class="img-vine2"></div>
        
        <!------------> 
        <!-- TRAITS --> 
        <!------------>
        
        <div class="border-table-area traits">
          <input type="hidden" name="attr_$traits-display" value="classic">
          <div class="border-table">
            <div class="m-title f-philosopher"><span>Traits:</span>
              <div class="radio-group m-flex no-wrap">
                <label>
                  <input type="radio" name="attr_$traits-display" value="classic" checked>
                  <span>Classic</span></label>
                <label>
                  <input type="radio" name="attr_$traits-display" value="individual">
                  <span>Individual</span></label>
              </div>
            </div>
            <textarea name="attr_area-trait" class="is-textarea" rows="20" style="padding-left: 40px;"></textarea>
            <div class="m-items no-classic">
              <fieldset class="repeating_trait">
                <input type="hidden" name="attr_type" class="is-color" value="Coins">
                <input type="checkbox" name="attr_$toggle_show" value="1">
                <div class="m-item">
                  <div class="i-group i-1-2">
                    <div class="is-span s-select"> <span name="attr_type">—</span>
                      <select name="attr_type">
                        <option value="—" selected>—</option>
                        <option value="Race">Race</option>
                        <option value="Passive">Passive</option>
                        <option value="Class">Class</option>
                        <option value="Other">Other</option>
                      </select>
                      <span class="float-title">Type</span> </div>
                    <div class="is-span s-compact"> <span name="attr_level">Level ?</span>
                      <input type="text" name="attr_level" value="Level ?">
                      <span class="float-title">level</span> </div>
                  </div>
                  <div class="i-item i-1-2 no-wrap just-end">
                    <div class="is-span s-compact"> <span name="attr_subtype">...</span>
                      <input type="text" name="attr_subtype" value="...">
                      <span class="float-title">subtype</span> </div>
                    <label class="btn-toggle">
                      <input type="checkbox" name="attr_$toggle_show" value="1">
                      <span></span></label>
                  </div>
                  <div class="i-item is-info">
                    <div class="is-span s-textarea"> <span name="attr_text"></span>
                      <textarea name="attr_text" placeholder="Notes here..."></textarea>
                    </div>
                  </div>
                </div>
              </fieldset>
            </div>
          </div>
        </div>
        
        <!---------------> 
        <!-- INVENTORY --> 
        <!--------------->
        
        <div class="border-table-area inventory">
          <div class="img-vine3"></div>
          <input type="hidden" name="attr_$inventory-display" value="classic">
          <div class="border-table">
            <div class="m-title f-philosopher"><span>Inventory:</span>
              <div class="radio-group m-flex no-wrap">
                <label>
                  <input type="radio" name="attr_$inventory-display" value="classic" checked>
                  <span>Classic</span></label>
                <label>
                  <input type="radio" name="attr_$inventory-display" value="individual">
                  <span>Individual</span></label>
              </div>
            </div>
            <textarea name="attr_area-Inventory" class="is-textarea" rows="20"></textarea>
            <div class="m-items no-classic">
              <fieldset class="repeating_item">
                <input type="hidden" name="attr_type" class="is-color" value="Coins">
                <input type="checkbox" name="attr_$toggle_show" value="1">
                <div class="m-item">
                  <div class="i-group i-1-2">
                    <div class="is-span s-select"> <span name="attr_type">—</span>
                      <select name="attr_type">
                        <option value="—" selected>—</option>
                        <option value="Worn">Worn</option>
                        <option value="Weapons">Weapons</option>
                        <option value="Pouch">Pouch</option>
                        <option value="Pack">Pack</option>
                        <option value="Coins">Coins</option>
                      </select>
                      <span class="float-title">Type</span> </div>
                    <div class="is-span s-compact"> <span name="attr_legend">—</span>
                      <input type="text" name="attr_legend" value="—">
                      <span class="float-title">legend/from</span> </div>
                  </div>
                  <div class="i-item i-1-2 no-wrap just-end">
                    <div class="is-span s-compact"> <span name="attr_subtype">...</span>
                      <input type="text" name="attr_subtype" value="...">
                      <span class="float-title">subtype</span> </div>
                    <label class="btn-toggle">
                      <input type="checkbox" name="attr_$toggle_show" id="inventory-id1" value="1">
                      <span></span></label>
                  </div>
                  <div class="i-item is-info">
                    <div class="is-span s-textarea"> <span name="attr_text"></span>
                      <textarea name="attr_text" placeholder="Notes here..."></textarea>
                    </div>
                  </div>
                </div>
              </fieldset>
            </div>
          </div>
        </div>
        
        <!---------------> 
        <!-- 3ª COLUNA --> 
        <!--------------->
        <div class="f-column gap-small equips"> 
          
          <!---------------> 
          <!-- ARMADURAS --> 
          <!--------------->
          
          <div class="border-table-area equipped-armour">
            <div class="border-table">
              <div class="m-title m-flex f-philosopher spaced-btw"><span>Equipped Armour:</span> <span>Total: <span name="attr_armour_score"></span></span></div>
              <div class="m-table">
                <div class="m-head">
                  <div><span>Armour Type (origin)</span></div>
                  <div><span>Armour Score</span></div>
                </div>
                <div class="m-body"> 
                  
                  <!-- ARMADURA-X1 -->
                  <div class="m-tline">
                    <div>
                      <input type="text" name="attr_armour-X1_type" value="Natural Armour (x)">
                    </div>
                    <div>
                      <input type="text" name="attr_armour-X1_score" value="0">
                    </div>
                  </div>
                  
                  <!-- ARMADURA-X2 -->
                  <div class="m-tline">
                    <div>
                      <input type="text" name="attr_armour-X2_type">
                    </div>
                    <div>
                      <input type="text" name="attr_armour-X2_score">
                    </div>
                  </div>
                  
                  <!-- ARMADURA-X3 -->
                  <div class="m-tline">
                    <div>
                      <input type="text" name="attr_armour-X3_type">
                    </div>
                    <div>
                      <input type="text" name="attr_armour-X3_score">
                    </div>
                  </div>
                  
                  <!-- ARMADURA-X4 -->
                  <div class="m-tline">
                    <div>
                      <input type="text" name="attr_armour-X4_type">
                    </div>
                    <div>
                      <input type="text" name="attr_armour-X4_score">
                    </div>
                  </div>
                  
                  <!-- ARMADURA-X5 -->
                  <div class="m-tline">
                    <div>
                      <input type="text" name="attr_armour-X5_type">
                    </div>
                    <div>
                      <input type="text" name="attr_armour-X5_score">
                    </div>
                  </div>
                  
                  <!-- ARMADURA-X6 -->
                  <div class="m-tline">
                    <div>
                      <input type="text" name="attr_armour-X6_type">
                    </div>
                    <div>
                      <input type="text" name="attr_armour-X6_score">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-----------> 
          <!-- ARMAS --> 
          <!----------->
          <input type="hidden" name="attr_$blockweapons" value="">
          <div class="border-table-area equipped-weapons">
            <div class="border-table">
              <div class="m-title f-philosopher"><span>Equipped Weapons:</span>
                <label class="f-super-small">
                  <input type="checkbox" name="attr_$blockweapons" value="close">
                  Block weapons</label>
              </div>
              <div class="m-table">
                <div class="m-head">
                  <input type="hidden" name="attr_$sta_on" class="h-wzero" value="0">
                  <div><span>Weapon <span title="Stamina Cost">(STA<span class="n-zero">&nbsp;is active</span>)</span></span></div>
                  <div><span>Base</span></div>
                  <div><span>Mod</span></div>
                  <div><span>Mastery</span></div>
                  <div><span>CT</span></div>
                  <div><span>Damage</span></div>
                </div>
                <div class="m-body"> 
                  
                  <!-- ARMA-X1 -->
                  <input type="hidden" name="attr_weapon-X1_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="action" name="act_weaponx1"> </button>
                      <input type="text" name="attr_weapon-X1" value="Unarmed Combat (1)">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X1_base" value="8">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X1_mquest1" class="is-custom" value="No">
                      <select name="attr_weapon-X1_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="INT">INT</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X1_mod" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X1_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X1_mquest2" class="is-custom" value="No">
                      <select name="attr_weapon-X1_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X1_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X1_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X1_ct" value="8">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X1_damage" value="1d4 [Blunt]">
                      <span name="attr_weapon-X1_damage" class="tooltip-mastery"></span> </div>
                  </div>
                  
                  <!-- ARMA-X2 -->
                  <input type="hidden" name="attr_weapon-X2_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="action" name="act_weaponx2"> </button>
                      <input type="text" name="attr_weapon-X2" placeholder="Weapon X2">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X2_base" value="0">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X2_mquest1" class="is-custom" value="No">
                      <select name="attr_weapon-X2_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="INT">INT</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X2_mod" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X2_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X2_mquest2" class="is-custom" value="No">
                      <select name="attr_weapon-X2_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X2_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X2_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X2_ct" value="0">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X2_damage" value="">
                      <span name="attr_weapon-X2_damage" class="tooltip-mastery"></span> </div>
                  </div>
                  
                  <!-- ARMA-X3 -->
                  <input type="hidden" name="attr_weapon-X3_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="action" name="act_weaponx3"> </button>
                      <input type="text" name="attr_weapon-X3" placeholder="Weapon X3">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X3_base" value="0">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X3_mquest1" class="is-custom" value="No">
                      <select name="attr_weapon-X3_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="INT">INT</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X3_mod" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X3_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X3_mquest2" class="is-custom" value="No">
                      <select name="attr_weapon-X3_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X3_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X3_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X3_ct" value="0">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X3_damage" value="">
                      <span name="attr_weapon-X3_damage" class="tooltip-mastery"></span> </div>
                  </div>
                  
                  <!-- ARMA-X4 -->
                  <input type="hidden" name="attr_weapon-X4_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="action" name="act_weaponx4"> </button>
                      <input type="text" name="attr_weapon-X4" placeholder="Weapon X4">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X4_base" value="0">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X4_mquest1" class="is-custom" value="No">
                      <select name="attr_weapon-X4_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="INT">INT</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X4_mod" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X4_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X4_mquest2" class="is-custom" value="No">
                      <select name="attr_weapon-X4_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X4_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X4_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X4_ct" value="0">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X4_damage" value="">
                      <span name="attr_weapon-X4_damage" class="tooltip-mastery"></span> </div>
                  </div>
                  
                  <!-- ARMA-X5 -->
                  <input type="hidden" name="attr_weapon-X5_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="action" name="act_weaponx5"> </button>
                      <input type="text" name="attr_weapon-X5" placeholder="Weapon X5">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X5_base" value="0">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X5_mquest1" class="is-custom" value="No">
                      <select name="attr_weapon-X5_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="INT">INT</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X5_mod" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X5_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X5_mquest2" class="is-custom" value="No">
                      <select name="attr_weapon-X5_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X5_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X5_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X5_ct" value="0">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X5_damage" value="">
                      <span name="attr_weapon-X5_damage" class="tooltip-mastery"></span> </div>
                  </div>
                  
                  <!-- ARMA-X6 -->
                  <input type="hidden" name="attr_weapon-X6_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="action" name="act_weaponx6"> </button>
                      <input type="text" name="attr_weapon-X6" placeholder="Weapon X6">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X6_base" value="0">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X6_mquest1" class="is-custom" value="No">
                      <select name="attr_weapon-X6_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="INT">INT</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X6_mod" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X6_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X6_mquest2" class="is-custom" value="No">
                      <select name="attr_weapon-X6_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X6_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X6_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X6_ct" value="0">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X6_damage" value="">
                      <span name="attr_weapon-X6_damage" class="tooltip-mastery"></span> </div>
                  </div>
                  
                  <!-- ARMA-X7 -->
                  <input type="hidden" name="attr_weapon-X7_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="action" name="act_weaponx7"> </button>
                      <input type="text" name="attr_weapon-X7" placeholder="Weapon X7">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X7_base" value="0">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X7_mquest1" class="is-custom" value="No">
                      <select name="attr_weapon-X7_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="INT">INT</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X7_mod" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X7_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X7_mquest2" class="is-custom" value="No">
                      <select name="attr_weapon-X7_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X7_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X7_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X7_ct" value="0">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X7_damage" value="">
                      <span name="attr_weapon-X7_damage" class="tooltip-mastery"></span> </div>
                  </div>
                  
                  <!-- ARMA-X8 -->
                  <input type="hidden" name="attr_weapon-X8_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="action" name="act_weaponx8"> </button>
                      <input type="text" name="attr_weapon-X8" placeholder="Weapon X8">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X8_base" value="0">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X8_mquest1" class="is-custom" value="No">
                      <select name="attr_weapon-X8_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="INT">INT</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X8_mod" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X8_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X8_mquest2" class="is-custom" value="No">
                      <select name="attr_weapon-X8_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X8_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X8_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X8_ct" value="0">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X8_damage" value="">
                      <span name="attr_weapon-X8_damage" class="tooltip-mastery"></span> </div>
                  </div>
                  
                  <!-- ARMA-X9 -->
                  <input type="hidden" name="attr_weapon-X9_mquest2" class="is-custom" value="No">
                  <div class="m-tline">
                    <div>
                      <button type="action" name="act_weaponx9"> </button>
                      <input type="text" name="attr_weapon-X9" placeholder="Weapon X9">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X9_base" value="0">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X9_mquest1" class="is-custom" value="No">
                      <select name="attr_weapon-X9_mquest1">
                        <option value="No">No</option>
                        <option value="CON">CON</option>
                        <option value="STR">STR</option>
                        <option value="AGI">AGI</option>
                        <option value="INT">INT</option>
                        <option value="CHA">CHA</option>
                        <option value="FOR">FOR</option>
                        <option value="ALA">ALA</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X9_mod" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X9_mod" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="hidden" name="attr_weapon-X9_mquest2" class="is-custom" value="No">
                      <select name="attr_weapon-X9_mquest2">
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                        <option value="custom" title="Custom">»</option>
                      </select>
                      <input type="hidden" name="attr_weapon-X9_mastery" class="hidden-nocustom">
                      <input type="text" name="attr_weapon-X9_mastery" class="hidden-nocustom">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X9_ct" value="0">
                    </div>
                    <div>
                      <input type="text" name="attr_weapon-X9_damage" value="">
                      <span name="attr_weapon-X9_damage" class="tooltip-mastery"></span> </div>
                  </div>
                </div>
                <input type="hidden" name="attr_stamina_alert" class="h-won" value="0">
                <div class="is-exausted n-on"> <span class="major-exaust">exhausted!<span style="font-weight: bold;"><br>
                  <span name="attr_stamina" style="color: red">0</span>/<span name="attr_stamina_max">0</span></span></span> </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!---------> 
  <!-- NPC --> 
  <!--------->
  
  <div class="m-npc f-philosopher">
    <div class="npc-name">
      <input type="text" name="attr_character_name">
    </div>
    <div class="npc-desc">
      <textarea name="attr_npc_description" placeholder="Type the desc here..." rows="4"></textarea>
    </div>
    <div class="npc-type">
      <input type="text" name="attr_npc_type" placeholder="Type/race">
    </div>
    <div class="npc-attrs m-flex no-wrap spaced-ard alg-cen">
      <div>
        <div><span>CON</span></div>
        <div>
          <input type="text" name="attr_CON" value="5">
        </div>
        <div><span name="attr_CON_mod">-2</span></div>
      </div>
      <div>
        <div><span>STR</span></div>
        <div>
          <input type="text" name="attr_STR" value="5">
        </div>
        <div><span name="attr_STR_mod">-2</span></div>
      </div>
      <div>
        <div><span>AGI</span></div>
        <div>
          <input type="text" name="attr_AGI" value="5">
        </div>
        <div><span name="attr_AGI_mod">-2</span></div>
      </div>
      <div>
        <div><span>INT</span></div>
        <div>
          <input type="text" name="attr_INT" value="5">
        </div>
        <div><span name="attr_INT_mod">-2</span></div>
      </div>
      <div>
        <div><span>CHA</span></div>
        <div>
          <input type="text" name="attr_CHA" value="5">
        </div>
        <div><span name="attr_CHA_mod">-2</span></div>
      </div>
      <div>
        <div><span>FOR</span></div>
        <div>
          <input type="text" name="attr_FOR" value="5">
        </div>
        <div><span name="attr_FOR_mod">-2</span></div>
      </div>
      <div>
        <div><span>ALA</span></div>
        <div>
          <input type="text" name="attr_ALA" value="5">
        </div>
        <div><span name="attr_ALA_mod">-2</span></div>
      </div>
    </div>
    <div class="npc-linhas">
      <div>
        <label><span>Health</span>
          <input type="text" name="attr_HP_max" placeholder="A (XdY+Z)">
        </label>
        <label><span>XP</span>
          <input type="text" name="attr_npc_xp" placeholder="Level x (0 XP)">
        </label>
      </div>
      <div>
        <label><span>Armour</span>
          <input type="text" name="attr_npc_armour" placeholder="x (+0)">
        </label>
        <label><span>Height</span>
          <input type="text" name="attr_npc_height" placeholder="Xft (+YdZ inches)">
        </label>
      </div>
      <div>
        <label><span>Speed</span>
          <input type="text" name="attr_npc_speed" value="4m">
        </label>
        <label><span>Magic</span>
          <input type="text" name="attr_npc_magic" placeholder="none">
        </label>
      </div>
      <div>
        <input type="hidden" name="attr_npc_stamina_alert" class="is-alert" value="0">
        <label><span>Stamina</span>
          <select name="attr_npc_stamina_on" style="color: white; background: #55672f; border-radius: 6px; width: fit-content;">
            <option value="0">No stamina</option>
            <option value="1">Use stamina</option>
          </select>
          <input type="text" name="attr_npc_stamina" placeholder="0" style="max-width: 24px; text-align: center">
          <span>/</span>
          <input type="text" name="attr_npc_stamina_max" placeholder="0" style="max-width: 24px; text-align: center">
        </label>
        <label><span>Mastery</span>
          <input type="text" name="attr_npc_mastery" placeholder="...">
        </label>
      </div>
      <div>
        <label><span>Night Sight</span>
          <input type="text" name="attr_npc_night_sight" placeholder="4m">
        </label>
        <label><span>Accuracy</span>
          <input type="text" name="attr_npc_accuracy" value="0">
        </label>
      </div>
      <div>
        <label><span>Languages</span>
          <input type="text" name="attr_npc_languages" placeholder="Wislandic, Chantric..."  style="text-align: left; padding-left: 6px;">
        </label>
      </div>
    </div>
    <div class="npc-field">
      <div><span>Weapon</span></div>
      <div class="m-flex just-end">
        <fieldset class="repeating_npcweapon">
          <div class="rep-item">
            <div class="m-flex no-wrap">
              <input type="hidden" name="attr_damage_macro" value="">
              <button type="action" name="act_attack" style="background: #55672f; color:  white; width: 21px; height: 21px; align-self: center"></button>
              <input type="text" name="attr_name" placeholder="Attack name (STA)"  style="padding-left: 12px;">
            </div>
            <input type="text" name="attr_ct" placeholder="X CT">
            <input type="text" name="attr_damage" placeholder="XdY+z [Type]">
          </div>
        </fieldset>
      </div>
    </div>
    <div class="npc-field no-grid">
      <div><span>Inventory</span></div>
      <div class="m-flex just-end">
        <fieldset class="repeating_npcitem">
          <div class="rep-item">
            <input type="text" name="attr_text" placeholder="Text: Priestly Robes (+1 Armour Score)">
          </div>
        </fieldset>
      </div>
    </div>
    <div class="npc-field no-grid">
      <div><span>Traits</span></div>
      <div class="m-flex just-end">
        <fieldset class="repeating_npctrait">
          <div class="rep-item">
            <div class="is-span s-textarea"> <span name="attr_trait"></span>
              <textarea name="attr_trait" placeholder="Text: Core Being (+2 Ability Score)"></textarea>
            </div>
          </div>
        </fieldset>
      </div>
    </div>
    <div class="npc-field no-grid">
      <div><span>Mastery Skill</span></div>
      <div class="m-flex just-end">
        <fieldset class="repeating_npcskill">
          <div class="rep-item">
            <input type="text" name="attr_text" placeholder="Text: Stealth Mastery (+2)">
          </div>
        </fieldset>
      </div>
    </div>
    <div class="npc-field field-title">
      <div>
        <div><span>Spells</span></div>
        <div><span>Type / Range / Focus / Magic</span></div>
      </div>
      <div>
        <fieldset class="repeating_spell">
          <div class="rep-item">
            <div>
              <input type="text" name="attr_name" placeholder="Name: Healing Hand">
            </div>
            <div>
              <input type="text" name="attr_legend" placeholder="Legend: Action / 1m (touch) / No / 4">
            </div>
            <div>
              <textarea name="attr_text" placeholder="Text: You can heal a creature by 1d6"></textarea>
            </div>
          </div>
        </fieldset>
      </div>
    </div>
  </div>
  
  <!------------> 
  <!-- CONFIG --> 
  <!------------>
  
  <div class="m-c">
    <div class="m-page p-config">
      <h6>Basic Config</h6>
      <div class="hidden-infos m-flex no-wrap">
        <label> <span>Whisper GM?</span>
          <select name="attr_$GM">
            <option value="">No</option>
            <option value="/w GM ">Yes</option>
          </select>
        </label>
        <label> <span>Mod Popup</span>
          <select name="attr_$mod">
            <option value="">No</option>
            <option value="+@{mod-fixed} [Mod]">Yes (sheet)</option>
            <option value="+?{Mod CT|@{mod-popup}} [Mod]">Yes (popup)</option>
          </select>
        </label>
        <div class="columns2">
          <label> <span>Sheet Mod:</span>
            <input type="text" name="attr_mod-fixed" value="0">
          </label>
          <label> <span>Popup Mod:</span>
            <input type="text" name="attr_mod-popup" value="0">
          </label>
        </div>
      </div>
      <div class="hidden-infos m-flex no-wrap">
        <div class="columns2">
          <label> <span>Consume Stamina</span>
            <select name="attr_$sta_on">
              <option value="0">No</option>
              <option value="1">Yes</option>
            </select>
          </label>
          <label> <span>Stop no-Stamina</span>
            <select name="attr_$sta_stop">
              <option value="0">No</option>
              <option value="1">Yes</option>
            </select>
          </label>
        </div>
      </div>
      <h6>Stat Base Values
        <button type="action" name="act_resetstats">Reset Stats</button>
      </h6>
      <div class="hidden-infos columns2">
        <div class="m-flex no-wrap spaced-ard">
          <label><span>CON<span> (<span name="attr_CON">5</span>) = </span>base:</span>
            <input type="text" name="attr_CON-base" value="5">
          </label>
          +
          <label><span>race:</span>
            <input type="text" name="attr_CON-race" value="0">
          </label>
          +
          <label><span>others:</span>
            <input type="text" name="attr_CON-others" value="0">
          </label>
          +
          <label><span>mod:</span>
            <input type="text" name="attr_CON-mod" value="0">
          </label>
        </div>
        <div class="m-flex no-wrap spaced-ard">
          <label><span>STR<span> (<span name="attr_STR">5</span>) = </span>base:</span>
            <input type="text" name="attr_STR-base" value="5">
          </label>
          +
          <label><span>race:</span>
            <input type="text" name="attr_STR-race" value="0">
          </label>
          +
          <label><span>others:</span>
            <input type="text" name="attr_STR-others" value="0">
          </label>
          +
          <label><span>mod:</span>
            <input type="text" name="attr_STR-mod" value="0">
          </label>
        </div>
        <div class="m-flex no-wrap spaced-ard">
          <label><span>AGI<span> (<span name="attr_AGI">5</span>) = </span>base:</span>
            <input type="text" name="attr_AGI-base" value="5">
          </label>
          +
          <label><span>race:</span>
            <input type="text" name="attr_AGI-race" value="0">
          </label>
          +
          <label><span>others:</span>
            <input type="text" name="attr_AGI-others" value="0">
          </label>
          +
          <label><span>mod:</span>
            <input type="text" name="attr_AGI-mod" value="0">
          </label>
        </div>
        <div class="m-flex no-wrap spaced-ard">
          <label><span>INT<span> (<span name="attr_INT">5</span>) = </span>base:</span>
            <input type="text" name="attr_INT-base" value="5">
          </label>
          +
          <label><span>race:</span>
            <input type="text" name="attr_INT-race" value="0">
          </label>
          +
          <label><span>others:</span>
            <input type="text" name="attr_INT-others" value="0">
          </label>
          +
          <label><span>mod:</span>
            <input type="text" name="attr_INT-mod" value="0">
          </label>
        </div>
        <div class="m-flex no-wrap spaced-ard">
          <label><span>CHA<span> (<span name="attr_CHA">5</span>) = </span>base:</span>
            <input type="text" name="attr_CHA-base" value="5">
          </label>
          +
          <label><span>race:</span>
            <input type="text" name="attr_CHA-race" value="0">
          </label>
          +
          <label><span>others:</span>
            <input type="text" name="attr_CHA-others" value="0">
          </label>
          +
          <label><span>mod:</span>
            <input type="text" name="attr_CHA-mod" value="0">
          </label>
        </div>
        <div class="m-flex no-wrap spaced-ard">
          <label><span>FOR<span> (<span name="attr_FOR">5</span>) = </span>base:</span>
            <input type="text" name="attr_FOR-base" value="5">
          </label>
          +
          <label><span>race:</span>
            <input type="text" name="attr_FOR-race" value="0">
          </label>
          +
          <label><span>others:</span>
            <input type="text" name="attr_FOR-others" value="0">
          </label>
          +
          <label><span>mod:</span>
            <input type="text" name="attr_FOR-mod" value="0">
          </label>
        </div>
        <div class="m-flex no-wrap spaced-ard">
          <label><span>ALA<span> (<span name="attr_ALA">5</span>) = </span>base:</span>
            <input type="text" name="attr_ALA-base" value="5">
          </label>
          +
          <label><span>race:</span>
            <input type="text" name="attr_ALA-race" value="0">
          </label>
          +
          <label><span>others:</span>
            <input type="text" name="attr_ALA-others" value="0">
          </label>
          +
          <label><span>mod:</span>
            <input type="text" name="attr_ALA-mod" value="0">
          </label>
        </div>
      </div>
      <h6>Stat Mod Values
        <button type="action" name="act_resetmods">Reset Mods</button>
      </h6>
      <div class="hidden-infos columns2">
        <div class="m-flex no-wrap spaced-ard">
          <label><span>CON_mod (<span name="attr_CON_mod_bonus">0</span>) = </span>base:</label>
          <input type="text" name="attr_CON_mod-base" value="0">
          +
          <label><span>race:</span></label>
          <input type="text" name="attr_CON_mod-race" value="0">
          +
          <label><span>others:</span></label>
          <input type="text" name="attr_CON_mod-others" value="0">
          +
          <label><span>mod:</span></label>
          <input type="text" name="attr_CON_mod-mod" value="0">
        </div>
        <div class="m-flex no-wrap spaced-ard">
          <label><span>STR_mod (<span name="attr_STR_mod_bonus">0</span>) = </span>base:</label>
          <input type="text" name="attr_STR_mod-base" value="0">
          +
          <label><span>race:</span></label>
          <input type="text" name="attr_STR_mod-race" value="0">
          +
          <label><span>others:</span></label>
          <input type="text" name="attr_STR_mod-others" value="0">
          +
          <label><span>mod:</span></label>
          <input type="text" name="attr_STR_mod-mod" value="0">
        </div>
        <div class="m-flex no-wrap spaced-ard">
          <label><span>AGI_mod (<span name="attr_AGI_mod_bonus">0</span>) = </span>base:</label>
          <input type="text" name="attr_AGI_mod-base" value="0">
          +
          <label><span>race:</span></label>
          <input type="text" name="attr_AGI_mod-race" value="0">
          +
          <label><span>others:</span></label>
          <input type="text" name="attr_AGI_mod-others" value="0">
          +
          <label><span>mod:</span></label>
          <input type="text" name="attr_AGI_mod-mod" value="0">
        </div>
        <div class="m-flex no-wrap spaced-ard">
          <label><span>INT_mod (<span name="attr_INT_mod_bonus">0</span>) = </span>base:</label>
          <input type="text" name="attr_INT_mod-base" value="0">
          +
          <label><span>race:</span></label>
          <input type="text" name="attr_INT_mod-race" value="0">
          +
          <label><span>others:</span></label>
          <input type="text" name="attr_INT_mod-others" value="0">
          +
          <label><span>mod:</span></label>
          <input type="text" name="attr_INT_mod-mod" value="0">
        </div>
        <div class="m-flex no-wrap spaced-ard">
          <label><span>CHA_mod (<span name="attr_CHA_mod_bonus">0</span>) = </span>base:</label>
          <input type="text" name="attr_CHA_mod-base" value="0">
          +
          <label><span>race:</span></label>
          <input type="text" name="attr_CHA_mod-race" value="0">
          +
          <label><span>others:</span></label>
          <input type="text" name="attr_CHA_mod-others" value="0">
          +
          <label><span>mod:</span></label>
          <input type="text" name="attr_CHA_mod-mod" value="0">
        </div>
        <div class="m-flex no-wrap spaced-ard">
          <label><span>FOR_mod (<span name="attr_FOR_mod_bonus">0</span>) = </span>base:</label>
          <input type="text" name="attr_FOR_mod-base" value="0">
          +
          <label><span>race:</span></label>
          <input type="text" name="attr_FOR_mod-race" value="0">
          +
          <label><span>others:</span></label>
          <input type="text" name="attr_FOR_mod-others" value="0">
          +
          <label><span>mod:</span></label>
          <input type="text" name="attr_FOR_mod-mod" value="0">
        </div>
        <div class="m-flex no-wrap spaced-ard">
          <label><span>ALA_mod (<span name="attr_ALA_mod_bonus">0</span>) = </span>base:</label>
          <input type="text" name="attr_ALA_mod-base" value="0">
          +
          <label><span>race:</span></label>
          <input type="text" name="attr_ALA_mod-race" value="0">
          +
          <label><span>others:</span></label>
          <input type="text" name="attr_ALA_mod-others" value="0">
          +
          <label><span>mod:</span></label>
          <input type="text" name="attr_ALA_mod-mod" value="0">
        </div>
      </div>
      <h6>Charactermancer Guide</h6>
      <div class="hidden-infos columns2">
        <label> <span>HP (Race):</span>
          <input type="text" name="attr_HP_race" value="0">
        </label>
        <label> <span>Armour Score (Race):</span>
          <input type="text" name="attr_armour_race" value="0">
        </label>
        <label> <span>Speed (Race):</span>
          <input type="text" name="attr_speed_race" value="0">
        </label>
        <label> <span>Night Sight (Race):</span>
          <input type="text" name="attr_night_race" value="0">
        </label>
        <label> <span>Language (Race):</span>
          <input type="text" name="attr_language_race" placeholder="...">
        </label>
        <label> <span>Unique Trait (Race):</span>
          <input type="text" name="attr_trait_race" placeholder="...">
        </label>
        <label> <span>Attack Modifier (Class):</span>
          <select name="attr_attack_class">
            <option value="—">none</option>
            <option value="STR">STR</option>
            <option value="AGI">AGI</option>
            <option value="FOR">FOR</option>
          </select>
        </label>
        <label> <span>Has Magic</span>
          <select name="attr_magic_on">
            <option value="0">no</option>
            <option value="1">yes</option>
          </select>
        </label>
        <label> <span>Magic Modifier (Class):</span>
          <select name="attr_magic_attack_class">
            <option value="—">none</option>
            <option value="ALA">ALA</option>
          </select>
        </label>
        <label> <span>Armour Mastery (Class):</span>
          <input type="text" name="attr_armour_mastery_class" placeholder="...">
        </label>
        <label> <span>Weapons Mastery (Class):</span>
          <input type="text" name="attr_weapons_mastery_class" placeholder="...">
        </label>
        <label> <span>Fight Style (Class):</span>
          <input type="text" name="attr_fight_style_class" placeholder="...">
        </label>
      </div>
    </div>
  </div>
</div>

<!------------> 
<!-- SCRIPT --> 
<!------------> 

<script type="text/worker">
console.log("Ficha criada por Patrick Leo");
const Fila = {
  fila: {},
  ativa: false,
  pausada: false,
  tde: 15,
  adicionar: function (func, prioridade = 0) {
    prioridade = typeof prioridade == "string" && (prioridade == "Primeiro" || prioridade == "Ultimo") ? prioridade : parseInt(prioridade, 10) || 0;
    if (!this.fila[prioridade]) this.fila[prioridade] = [];
    this.fila[prioridade].push(func);
    if (!this.ativa) {
      setTimeout(() => this.Fila_on(), this.tde);
    }
  },
  Fila_on: async function () {
    if (this.ativa) return;
    this.ativa = true;
    if (this.tde < 100) this.tde = 0;
    while (this.temItens()) {
      if (this.pausada) {
        await new Promise(resolve => setTimeout(resolve, this.tde));
        this.pausada = false;
        continue;
      }
      const proximaPrioridade = this.proximaPrioridade();
      if (proximaPrioridade == "Ultimo" && this.temPrioridadeMaisAlta()) {
        await new Promise(resolve => setTimeout(resolve, this.tde));
        continue;
      }
      const func = this.fila[proximaPrioridade].shift();
      await func();
      await new Promise(resolve => setTimeout(resolve, this.tde));
      if (this.fila[proximaPrioridade].length === 0) delete this.fila[proximaPrioridade];
    }
    this.ativa = false;
  },
  temItens: function () {
    return Object.keys(this.fila).length > 0;
  },
  proximaPrioridade: function () {
    if (this.fila["Primeiro"] && this.fila["Primeiro"].length > 0) return "Primeiro";
    const prioridades = Object.keys(this.fila).filter(p => p != "Primeiro" && p != "Ultimo").map(p => parseInt(p, 10));
    return prioridades.length > 0 ? Math.min(...prioridades) : "Ultimo";
  },
  temPrioridadeMaisAlta: function () {
    const prioridades = Object.keys(this.fila).filter(p => p != "Ultimo" && p != "Primeiro").map(p => parseInt(p, 10));
    return prioridades.length > 0;
  }
};
const PK = {
  PersAtivo: function (charId) {
    var PersID = getActiveCharacterId();
    var msg = {
      "id": "0",
      "type": "setActiveCharacter",
      "data": charId
    };
    if (typeof self.dispatchEvent != "undefined") {
      var ev = new CustomEvent("message");
      ev.data = msg;
      self.dispatchEvent(ev);
    } else {
      self.onmessage({
        data: msg
      });
    }
    return PersID;
  },
  pegarAtributos: function (atributos) {
    var PersID = getActiveCharacterId();
    return new Promise((resolve, reject) => {
      var p_PersID = this.PersAtivo(PersID);
      try {
        getAttrs(atributos, (values) => resolve(values));
      } catch {
        reject();
      }
    }).finally(() => {
      this.PersAtivo(PersID);
    });
  },
  salvarAtributos: function (atributosObj, opcoes) {
    var PersID = getActiveCharacterId();
    return new Promise((resolve, reject) => {
      var p_PersID = this.PersAtivo(PersID);
      try {
        setAttrs(atributosObj, opcoes, (values) => resolve(values));
      } catch {
        reject();
      }
    }).finally(() => {
      this.PersAtivo(PersID);
    });
  },
  pegarSecao: function (secao) {
    secao = secao.startsWith("repeating_") ? secao : `repeating_${secao}`;
    var PersID = getActiveCharacterId();
    return new Promise((resolve, reject) => {
      var p_PersID = this.PersAtivo(PersID);
      try {
        getSectionIDs(secao, (values) => resolve(values));
      } catch {
        reject();
      }
    }).finally(() => {
      this.PersAtivo(PersID);
    });
  },
  jogarDados: async function (query) {
    let j = await startRoll(query);
    finishRoll(j.rollId, {});
    return j;
  }
};
(function () {
  const _sIn = setInterval;
  const _sto = setTimeout;
  setInterval = function (callback, tempo) {
    var PersID = getActiveCharacterId();
    _sIn(function () {
      var p_PersID = PK.PersAtivo(PersID);
      callback();
      PK.PersAtivo(PersID);
    }, tempo);
  };
  setTimeout = function (callback, tempo) {
    var PersID = getActiveCharacterId();
    _sto(function () {
      var p_PersID = PK.PersAtivo(PersID);
      callback();
      PK.PersAtivo(PersID);
    }, tempo);
  };
})();

// ============================== CONST

const coreStats = ["STR", "AGI", "CON", "INT", "CHA", "FOR", "ALA"],
  coreMods = coreStats.map(s => `${s}_mod`),
  mdt = {
    5: -2,
    6: -1,
    7: -1,
    8: 0,
    9: 0,
    10: 1,
    11: 1,
    12: 2,
    13: 2
  },
  skills = ["strength", "agility", "constitution", "intelligence", "charisma", "alacrity", "fortitude", "dexterity", "might", "stealth", "observe", "judgement", "deceive", "persuade", "beast_handling", "charm", "entertain", "intimidate", "history", "fauna", "flora", "theology", "thaumaturgy", "medicine"],
  tools = ["X1", "X2", "X3"],
  armours = ["X1", "X2", "X3", "X4", "X5", "X6"],
  weapons = ["X1", "X2", "X3", "X4", "X5", "X6", "X7", "X8", "X9"];

// ============================== STATS

coreStats.forEach(s => {
  on(`change:${s} change:${s}_mod_bonus`, () => {
    Fila.adicionar(async () => {
      const v = await PK.pegarAtributos([s, `${s}_mod_bonus`]);
      const x = parseInt(v[s]) || 0;
      const b = parseInt(v[`${s}_mod_bonus`]) || 0;
      let m = -2;
      if (x > 13) {
        m = Math.floor((x - 14) / 2) + 3;
      } else if (x > 5) {
        m = (mdt[x] !== undefined) ? mdt[x] : 0;
      }
      m += b;
      let p = m > 0 ? 1 : 0;
      await PK.salvarAtributos({
        [`${s}_mod`]: m,
        [`${s}_plus`]: p
      });
    });
  });
});

// ============================== CTS

function calcCT(p, list) {
  list.forEach(id => {
    on([
      `change:${p}-${id}_base`,
      `change:${p}-${id}_mod`,
      `change:${p}-${id}_mastery`,
      `change:${p}-${id}_mquest1`,
      `change:${p}-${id}_mquest2`,
      ...coreMods.map(attr => `change:${attr}`),
      "sheet:opened"
    ].join(" "), () => {
      Fila.adicionar(async () => {
        const attrs = [`${p}-${id}_base`, `${p}-${id}_mod`, `${p}-${id}_mastery`, `${p}-${id}_mquest1`, `${p}-${id}_mquest2`, "mastery", ...coreMods];
        const v = await PK.pegarAtributos(attrs);
        const b = parseInt(v[`${p}-${id}_base`]) || 0;
        let m = 0;
        const mq1 = v[`${p}-${id}_mquest1`];
        if (mq1 === "custom") m = parseInt(v[`${p}-${id}_mod`]) || 0;
        else if (mq1 && mq1.includes("+")) m = mq1.split("+").reduce((a, attr) => a + (parseInt(v[`${attr.trim()}_mod`]) || 0), 0);
        else if (mq1 && mq1 !== "No") m = parseInt(v[`${mq1}_mod`]) || 0;
        let x = 0;
        const mq2 = v[`${p}-${id}_mquest2`];
        if (mq2 === "custom") x = parseInt(v[`${p}-${id}_mastery`]) || 0;
        else if (mq2 && mq2 !== "No") x = parseInt(v.mastery) || 0;
        await PK.salvarAtributos({
          [`${p}-${id}_ct`]: b + m + x
        });
      });
    });
  });
}

calcCT("skill", skills);
calcCT("tool", tools);
calcCT("weapon", weapons);

// ============================== ARMOUR

on(armours.map(a => `change:armour-${a}_score`).join(" ") + " sheet:opened", () => {
  Fila.adicionar(async () => {
    const attrs = armours.map(a => `armour-${a}_score`);
    const v = await PK.pegarAtributos(attrs);
    let t = 0;
    armours.forEach(a => {
      t += parseInt(v[`armour-${a}_score`]) || 0;
    });
    const m = Math.floor(t / 6);
    await PK.salvarAtributos({
      armour_score: t,
      armour_mod: m
    });
  });
});

// ============================== WEAPONS

function normalizeDamage(raw) {
  if (!raw) return "";
  const parts = raw.split(",").map(p => p.trim());
  const formatted = parts.map(part => {
    if (/\[.+\]/.test(part)) return part;
    const match = part.match(/^(\d+d\d+(?:\+\d+)?)(?:\s+(.+))$/i);
    if (match) {
      const dice = match[1];
      const label = match[2] ? match[2].trim() : "";
      return label ? `${dice} [${label}]` : dice;
    }
    return part;
  });
  return formatted.join(", ");
}

weapons.forEach(w => {
  const fields = [
    `weapon-${w}`,
    `weapon-${w}_base`,
    `weapon-${w}_mquest1`,
    `weapon-${w}_mod`,
    `weapon-${w}_mquest2`,
    `weapon-${w}_mastery`,
    `weapon-${w}_ct`,
    `weapon-${w}_damage`
  ];

  on(fields.map(f => `change:${f}`).join(" "), () => {
    Fila.adicionar(async () => {
      const attr = `weapon-${w}_damage`;
      const v = await PK.pegarAtributos([attr]);
      let raw = (v[attr] || "").trim();
      if (!raw) return;
      const formatted = normalizeDamage(raw);
      if (formatted !== raw) {
        await PK.salvarAtributos({ [attr]: formatted });
      }
    });
  });

  on(`clicked:weapon${w.toLowerCase()}`, async () => {
    const attr = `weapon-${w}_damage`;
    const v0 = await PK.pegarAtributos([attr]);
    let raw = (v0[attr] || "").trim();
    if (raw) {
      const formatted = normalizeDamage(raw);
      if (formatted !== raw) {
        await PK.salvarAtributos({ [attr]: formatted });
        raw = formatted;
      }
    }
  });
});


// ============================== GAMEPLAY

function resetResource(attr) {
  on(`clicked:reset${attr}`, async () => {
    const attrs = [attr, `${attr}_tally`];
    const v = await PK.pegarAtributos(attrs);

    let val = 0;
    if (attr === "magic" && (v[attr] === "—" || v[attr] === "-")) {
      val = v[attr];
    }

    await PK.salvarAtributos({
      [attr]: val,
      [`${attr}_tally`]: ""
    });
  });
}

["stamina", "magic"].forEach(resetResource);


// ============================== CONFIG


coreStats.forEach(stat => {
  on([
    `change:${stat}-base`,
    `change:${stat}-race`,
    `change:${stat}-others`,
    `change:${stat}-mod`
  ].join(" "), () => {
    Fila.adicionar(async () => {
      const v = await PK.pegarAtributos([
        `${stat}-base`,
        `${stat}-race`,
        `${stat}-others`,
        `${stat}-mod`
      ]);
      const base = parseInt(v[`${stat}-base`]) || 0;
      const race = parseInt(v[`${stat}-race`]) || 0;
      const others = parseInt(v[`${stat}-others`]) || 0;
      const mod = parseInt(v[`${stat}-mod`]) || 0;
      const total = base + race + others + mod;
      await PK.salvarAtributos({
        [stat]: total
      });
    });
  });
});

coreStats.forEach(stat => {
  on([
    `change:${stat}_mod-base`,
    `change:${stat}_mod-race`,
    `change:${stat}_mod-others`,
    `change:${stat}_mod-mod`
  ].join(" "), () => {
    Fila.adicionar(async () => {
      const v = await PK.pegarAtributos([
        `${stat}_mod-base`,
        `${stat}_mod-race`,
        `${stat}_mod-others`,
        `${stat}_mod-mod`
      ]);
      const base = parseInt(v[`${stat}_mod-base`]) || 0;
      const race = parseInt(v[`${stat}_mod-race`]) || 0;
      const others = parseInt(v[`${stat}_mod-others`]) || 0;
      const mod = parseInt(v[`${stat}_mod-mod`]) || 0;
      const total = base + race + others + mod;
      const arrow = total > 0 ? 1 : total < 0 ? -1 : 0;
      await PK.salvarAtributos({
        [`${stat}_mod_bonus`]: total,
        [`${stat}_mod_bonus_arrow`]: arrow
      });
    });
  });
});

skills.forEach(skill => {
  on([
    `change:skill-${skill}_base`,
    `change:skill-${skill}_race`,
    `change:skill-${skill}_others`,
    `change:skill-${skill}_mod`
  ].join(" "), () => {
    Fila.adicionar(async () => {
      const v = await PK.pegarAtributos([
        `skill-${skill}_base`,
        `skill-${skill}_race`,
        `skill-${skill}_others`,
        `skill-${skill}_mod`
      ]);
      const base = parseInt(v[`skill-${skill}_base`]) || 0;
      const race = parseInt(v[`skill-${skill}_race`]) || 0;
      const others = parseInt(v[`skill-${skill}_others`]) || 0;
      const mod = parseInt(v[`skill-${skill}_mod`]) || 0;
      const total = base + race + others + mod;
      await PK.salvarAtributos({
        [`skill-${skill}`]: total
      });
    });
  });
});

on("change:ALA_mod change:speed_race", () => {
  Fila.adicionar(async () => {
    const v = await PK.pegarAtributos(["ALA_mod", "speed_race"]);
    const a = parseInt(v.ALA_mod) || 0;
    const r = v.speed_race || "";
    const b = parseInt(r.replace(/\D/g, "")) || 0;
    if (!r || b === 0) return;
    const t = b + a;
    await PK.salvarAtributos({
      old_speed: `${t}m`
    });
  });
});

on("change:HP_race change:CON_mod change:character_level", () => {
  Fila.adicionar(async () => {
    const v = await PK.pegarAtributos(["HP_race", "CON_mod", "character_level"]);
    const r = parseInt(v.HP_race) || 0;
    if (!v.HP_race || r === 0) return;
    const c = parseInt(v.CON_mod) || 0;
    const l = parseInt(v.character_level) || 0;
    const t = r + c + l;
    await PK.salvarAtributos({
      HP_total: t
    });
  });
});


async function calcPool({
  a,
  m,
  o,
  c,
  ac
}) {
  const attrs = [a, "level", ...m.map(x => `${x}_mod`), o];
  if (ac) attrs.push(ac);
  if (c) attrs.push(c);

  const v = await PK.pegarAtributos(attrs);
  const l = parseInt(v.level) || 0;
  const b = (v[a] || "").toUpperCase();
  const on = ac ? (parseInt(v[ac]) || 0) : 1;

  if (!on) {
    const clear = {};
    clear[o] = "—";
    if (c) clear[c] = "—";
    await PK.salvarAtributos(clear);
    return;
  }

  let md = 0;
  if (m.includes(b)) md = parseInt(v[`${b}_mod`]) || 0;

  const t = 8 + md + l;
  if (t !== parseInt(v[o])) {
    const upd = {};
    upd[o] = t;
    if (c) upd[c] = t;
    await PK.salvarAtributos(upd);
  }
}

on("sheet:opened change:attack_class change:level change:STR_mod change:AGI_mod change:FOR_mod",
  () => Fila.adicionar(() => calcPool({
    a: "attack_class",
    m: ["STR", "AGI", "FOR"],
    o: "stamina_max"
  })));

on("sheet:opened change:magic_on change:magic_class change:level change:ALA_mod",
  () => Fila.adicionar(() => calcPool({
    a: "magic_class",
    m: ["ALA"],
    o: "magic_max",
    c: "magic",
    ac: "magic_on"
  })));

on("clicked:resetstats", () => {
  Fila.adicionar(async () => {
    const attrs = coreStats.flatMap(s => [
      `${s}-base`,
      `${s}-race`,
      `${s}-others`,
      `${s}-mod`,
      s
    ]);
    const c = {};
    attrs.forEach(a => c[a] = "");
    await PK.salvarAtributos(c);
  });
});

on("clicked:resetmods", () => {
  Fila.adicionar(async () => {
    const attrs = coreStats.flatMap(s => [
      `${s}_mod-base`,
      `${s}_mod-race`,
      `${s}_mod-others`,
      `${s}_mod-mod`,
      `${s}_mod_bonus`,
      `${s}_mod_bonus_arrow`
    ]);
    const c = {};
    attrs.forEach(a => c[a] = "");
    await PK.salvarAtributos(c);
  });
});

// ============================== ALERTS

function makeAlert(attr) {
  on(`sheet:opened change:${attr} change:${attr}_max`, () => {
    Fila.adicionar(async () => {
      const v = await PK.pegarAtributos([attr, `${attr}_max`]);

      const cur = parseInt(v[attr]);
      const max = parseInt(v[`${attr}_max`]);

      const isNum = !isNaN(cur) && !isNaN(max);

      await PK.salvarAtributos({
        [`${attr}_alert`]: isNum && cur < max ? 0 : 1
      });
    });
  });
}

["stamina", "magic", "npc_stamina"].forEach(makeAlert);

// ============================== ATTACKS

function dmg(raw) {
  const p = raw.split(",").map(p => p.trim());
  const d = [];
  const b = p.map((p, i) => {
    if (/\[.+\]/.test(p)) {
      const t = p.match(/\[(.+?)\]/)[1];
      d.push(t);
      return `{{damage${i+1}=[[${p}]]}}`;
    } else {
      const m = p.match(/^(\d+d\d+(?:\+\d+)?)(?:\s+(.+))$/i);
      if (m) {
        const dice = m[1];
        const l = m[2] ? m[2].trim() : "";
        if (l) d.push(l);
        return `{{damage${i+1}=[[${dice} [${l}]]}}`;
      } else {
        return `{{damage${i+1}=[[${p}]]}}`;
      }
    }
  });
  return {
    blocks: b.join(" "),
    types: d.join(", ")
  };
}

function buildBreakdown(results) {
  const blocks = [];
  Object.keys(results).forEach(k => {
    if (k.startsWith("damage") && k !== "damage_total" && k !== "damage_x") {
      const res = results[k];
      if (!res.rolls || res.rolls.length === 0) return;

      res.rolls.forEach(roll => {
        if (roll.results && roll.results.length > 0) {
          const diceVals = roll.results.map(rn => rn.v ?? rn);
          const subtotal = diceVals.reduce((a, b) => a + b, 0);
          const bonus = res.result - subtotal;
          let str = "(" + diceVals.join("+") + ")";
          if (bonus !== 0) str += `+${bonus}`;
          blocks.push({ str, diceCount: diceVals.length, bonus });
        }
      });
    }
  });

  if (blocks.length === 0) return "-";

  if (blocks.length === 1) {
    const b = blocks[0];
    if (b.diceCount === 1 && b.bonus === 0) return "-";
    return b.str;
  }

  return blocks.map(b => `[${b.str}]`).join(" + ");
}

weapons.forEach(w => {
  on(`clicked:weapon${w.toLowerCase()}`, async () => {
    const attrs = [
      "character_name",
      `weapon-${w}`,
      `weapon-${w}_ct`,
      `weapon-${w}_damage`,
      "stamina",
      "stamina_max",
      "stamina_tally",
      "$sta_on",
      "$sta_stop"
    ];
    const v = await PK.pegarAtributos(attrs);
    const cname = v.character_name || "Unnamed";
    let wname = v[`weapon-${w}`] || "";
    const ct = parseInt(v[`weapon-${w}_ct`]) || 0;
    const raw = (v[`weapon-${w}_damage`] || "").trim();
    if (!wname || (!ct && !raw)) return;

    let c = 0;
    const sta = wname.match(/\((\d+)\)/);
    if (sta) {
      c = parseInt(sta[1]) || 0;
      wname = wname.replace(/\(.*?\)/, "").trim();
    }

    const s_max = parseInt(v.stamina_max) || 0;
    const s_cur = parseInt(v.stamina) || 0;
    const s_on = parseInt(v["$sta_on"]) || 0;
    const s_st = parseInt(v["$sta_stop"]) || 0;

    if (s_on && c > 0) {
      if (s_cur + c > s_max) {
        const msg = s_st ? "dont have STA" : "used an attack without STA";
        startRoll(`/w GM ${cname} ${msg}`, r => finishRoll(r.rollId, {}));
        if (s_st) return;
      } else {
        const newStamina = s_cur + c;
        await PK.salvarAtributos({ stamina: newStamina });

        if (newStamina <= s_max) {
          const odt = v.stamina_tally ? v.stamina_tally.trim() : "";
          const net = `${wname} (${c})`;
          const ntl = odt ? `${odt}, ${net}` : net;
          await PK.salvarAtributos({ stamina_tally: ntl });
        }
      }
    }

    let tpl = `&{template:ct} {{name=${cname}}} {{title=${wname}}} {{total=[[2d12]]}} {{ct=[[${ct}]]}}`;
    if (c > 0) tpl += ` {{stamina=[[${c}]]}}`;
    if (raw) {
      const { blocks, types } = dmg(raw);
      tpl += ` ${blocks}`;
      if (types) tpl += ` {{dmg_type=${types}}}`;
    }
    tpl += ` {{damage_total=[[0]]}} {{damage_x=[[0]]}}`;

    startRoll(tpl, r => {
      let sum = 0;
      Object.keys(r.results).forEach(k => {
        if (k.startsWith("damage") && k !== "damage_total" && k !== "damage_x")
          sum += r.results[k].result;
      });
      const breakdown = buildBreakdown(r.results);
      finishRoll(r.rollId, {
        total: r.results.total.result,
        damage_total: sum,
        damage_x: breakdown || "-"
      });
    });
  });
});

on("clicked:repeating_npcweapon:attack", async (ev) => {
  const id = ev.sourceAttribute.split("_")[2];
  const prefix = `repeating_npcweapon_${id}_`;
  const attrs = [
    `${prefix}name`,
    `${prefix}ct`,
    `${prefix}damage`,
    "npc_stamina",
    "npc_stamina_max",
    "npc_stamina_on"
  ];
  const v = await PK.pegarAtributos(attrs);
  let wname = v[`${prefix}name`] || "";
  const ctStr = (v[`${prefix}ct`] || "").toString();
  const ct = parseInt(ctStr.replace(/\D/g, "")) || 0;
  const raw = (v[`${prefix}damage`] || "").trim();
  if (!wname || (!ct && !raw)) return;
  let cost = 0;
  const staminaMatch = wname.match(/\((\d+)\)/);
  if (staminaMatch) {
    cost = parseInt(staminaMatch[1]) || 0;
    wname = wname.replace(/\(.*?\)/, "").trim();
  }
  const staminaMax = parseInt(v.npc_stamina_max) || 0;
  const staminaCur = parseInt(v.npc_stamina) || 0;
  const staOn = parseInt(v.npc_stamina_on) || 0;
  if (staOn && cost > 0) {
    const newStamina = staminaCur + cost;
    const update = { npc_stamina: newStamina };
    if (newStamina > staminaMax) update["npc_stamina_alert"] = 1;
    await PK.salvarAtributos(update);
  }
  let tpl = `&{template:ct} {{title=${wname}}} {{total=[[2d12]]}} {{ct=[[${ct}]]}}`;
  if (cost > 0) tpl += ` {{stamina=[[${cost}]]}}`;
  if (raw) {
    const { blocks, types } = dmg(raw);
    tpl += ` ${blocks}`;
    if (types) tpl += ` {{dmg_type=${types}}}`;
  }
  tpl += ` {{damage_total=[[0]]}} {{damage_x=[[0]]}}`;
  startRoll(tpl, r => {
    let sum = 0;
    Object.keys(r.results).forEach(k => {
      if (k.startsWith("damage") && k !== "damage_total" && k !== "damage_x") sum += r.results[k].result;
    });
    const breakdown = buildBreakdown(r.results);
    finishRoll(r.rollId, {
      total: r.results.total.result,
      damage_total: sum,
      damage_x: breakdown || 0
    });
  });
});

</script> 

<!------------------> 
<!-- ROLLTEMPLATE --> 
<!------------------>

<div style="display: none">
  <rolltemplate class="sheet-rolltemplate-ct">
    <div class="rt-ct">
      <div class="rt-header"> <span class="rt-name">{{name}}</span> <span class="rt-title">{{title}}</span> </div>
      <div class="rt-core">
        <div>
          <label>Total</label>
          <span>{{total}}</span></div>
        <div class="rt-vs">
          <label>&nbsp;</label>
          VS</div>
        <div>
          <label>CT</label>
          <span>{{ct}}</span></div>
        {{#stamina}}
        <div>
          <label>Stamina</label>
          <span>{{stamina}}</span></div>
        {{/stamina}} </div>
      {{#rollLess() total ct}}
      <div class="rt-result success">SUCCESS</div>
      {{/rollLess() total ct}}
      {{#rollGreater() total ct}}
      <div class="rt-result fail">FAIL</div>
      {{/rollGreater() total ct}}
      {{#rollTotal() total ct}}
      <div class="rt-result fail">FAIL</div>
      {{/rollTotal() total ct}}
      {{#computed::damage_total}}
      <div class="rt-damage">
        <label>Damage</label>
        <span>{{computed::damage_total}}</span>
        <div class="rt-x"> {{computed::damage_x}} </div>
        <div class="rt-x-legend"> {{dmg_type}} </div>
      </div>
      {{/computed::damage_total}}
      {{#allprops() name title total ct computed::damage_total computed::damage_x damage_total stamina}}
      <div class="rt-extra dmg-comp" style="display: none">
        <label>{{key}}</label>
        <span>{{value}}</span> </div>
      {{/allprops() name title total ct computed::damage_total computed::damage_x damage_total stamina}} </div>
  </rolltemplate>
</div>

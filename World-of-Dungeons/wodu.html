<h1 class="sheet-title">World of Dungeons</h1>
<div class="sheet-container">

    <!--Main-->
    <div class="sheet-row">
      <div class="sheet-column sheet-col-6 sheet-white-bg">
        <label class="sheet-text">
            <span>Name</span>
            <input type="text" name="attr_character_name"/>
        </label>
      </div>
      <div class="sheet-column sheet-col-5 sheet-white-bg">
        <label class="sheet-text">
            <span>Class</span>
            <input type="text" name="attr_class"/>
        </label>
      </div>
      <div class="sheet-column sheet-col-1 sheet-white-bg">
        <label class="sheet-number">
            <span>Level</span>
            <input type="number" name="attr_level" min="0" max="10"/>
        </label>
      </div>
    </div>

    <!--Attributes-->
    <div class="sheet-row">
      <div class="sheet-column sheet-col-6 sheet-white-bg">
        <h2>Attributes</h2>
        <div class="sheet-row">
          <div class="sheet-column sheet-col-6">
            <label class="sheet-attribute">
                <input type="number" name="attr_strength" min="0" max="3"/>
                <button type="roll" value="&{template:check} {{name=@{character_name}}} {{label=str}} {{result=[[2d6+@{strength}]]}}">Str</button>
            </label>
            <label class="sheet-attribute">
                <input type="number" name="attr_dexterity" min="0" max="3"/>
                <button type="roll" value="&{template:check} {{name=@{character_name}}} {{label=dex}} {{result=[[2d6+@{dexterity}]]}}">Dex</button>
            </label>
            <label class="sheet-attribute">
                <input type="number" name="attr_constitution" min="0" max="3"/>
                <button type="roll" value="&{template:check} {{name=@{character_name}}} {{label=con}} {{result=[[2d6+@{constitution}]]}}">Con</button>
            </label>
          </div>
          <div class="sheet-column sheet-col-6">
            <label class="sheet-attribute">
                <input type="number" name="attr_intelligence" min="0" max="3"/>
                <button type="roll" value="&{template:check} {{name=@{character_name}}} {{label=int}} {{result=[[2d6+@{intelligence}]]}}">Int</button>
            </label>
            <label class="sheet-attribute">
                <input type="number" name="attr_wisdom" min="0" max="3"/>
                <button type="roll" value="&{template:check} {{name=@{character_name}}} {{label=wis}} {{result=[[2d6+@{wisdom}]]}}">Wis</button>
            </label>
            <label class="sheet-attribute">
                <input type="number" name="attr_charisma" min="0" max="3"/>
                <button type="roll" value="&{template:check} {{name=@{character_name}}} {{label=cha}} {{result=[[2d6+@{charisma}]]}}">Cha</button>
            </label>
          </div>
        </div>
      </div>

      <!--Skills-->
      <div class="sheet-column sheet-col-2 sheet-white-bg">
        <h2>Skills</h2>
        <label class="sheet-skill">
            <input type="checkbox" name="attr_athletics"/>
            <span>Athletics</span>
        </label>
        <label class="sheet-skill">
            <input type="checkbox" name="attr_awareness"/>
            <span>Awareness</span>
        </label>
        <label class="sheet-skill">
            <input type="checkbox" name="attr_deception"/>
            <span>Deception</span>
        </label>
        <label class="sheet-skill">
            <input type="checkbox" name="attr_decipher"/>
            <span>Decipher</span>
        </label>
        <label class="sheet-skill">
            <input type="checkbox" name="attr_heal"/>
            <span>Heal</span>
        </label>
        <label class="sheet-skill">
            <input type="checkbox" name="attr_leadership"/>
            <span>Leadership</span>
        </label>
        <label class="sheet-skill">
            <input type="checkbox" name="attr_lore"/>
            <span>Lore</span>
        </label>
        <label class="sheet-skill">
            <input type="checkbox" name="attr_stealth"/>
            <span>Stealth</span>
        </label>
        <label class="sheet-skill">
            <input type="checkbox" name="attr_survival"/>
            <span>Survival</span>
        </label>
      </div>

      <!--Special Abilities-->
      <div class="sheet-column sheet-col-4 sheet-white-bg">
        <h2>Special Abilities</h2>
        <div class="sheet-row sheet-no-pad">
          <div class="sheet-column sheet-col-6 sheet-no-pad">
            <label class="sheet-ability">
                <input type="checkbox" name="attr_bless"/>
                <span>Bless</span>
            </label>
            <label class="sheet-ability">
                <input type="checkbox" name="attr_turn"/>
                <span>Turn</span>
            </label>
          </div>
          <div class="sheet-column sheet-col-6 sheet-no-pad">
            <label class="sheet-ability">
                <input type="checkbox" name="attr_cure"/>
                <span>Cure</span>
            </label>
            <label class="sheet-ability">
                <input type="checkbox" name="attr_vision"/>
                <span>Vision</span>
            </label>
          </div>
        </div>
        <hr>
        <div class="sheet-row sheet-no-pad">
          <div class="sheet-column sheet-col-6 sheet-no-pad">
            <label class="sheet-ability">
                <input type="checkbox" name="attr_hardy" value="6"/>
                <span>Hardy</span>
            </label>
            <label class="sheet-ability">
                <input type="checkbox" name="attr_slay"/>
                <span>Slay</span>
            </label>
          </div>
          <div class="sheet-column sheet-col-6 sheet-no-pad">
            <label class="sheet-ability">
                <input type="checkbox" name="attr_skirmish"/>
                <span>Skirmish</span>
            </label>
            <label class="sheet-ability">
                <input type="checkbox" name="attr_tough" value="1"/>
                <span>Tough</span>
            </label>
          </div>
        </div>
        <hr>
        <div class="sheet-row sheet-no-pad">
          <div class="sheet-column sheet-col-6 sheet-no-pad">
            <label class="sheet-ability">
                <input type="checkbox" name="attr_backstab"/>
                <span>Backstab</span>
            </label>
            <label class="sheet-ability">
                <input type="checkbox" name="attr_reflexes"/>
                <span>Reflexes</span>
            </label>
          </div>
          <div class="sheet-column sheet-col-6 sheet-no-pad">
            <label class="sheet-ability">
                <input type="checkbox" name="attr_lucky"/>
                <span>Lucky</span>
            </label>
            <label class="sheet-ability">
                <input type="checkbox" name="attr_tinker"/>
                <span>Tinker</span>
            </label>
          </div>
        </div>
        <hr>

        <div class="sheet-row sheet-no-pad">
          <div class="sheet-column sheet-col-6 sheet-no-pad">
            <label class="sheet-ability">
                <input type="checkbox" name="attr_cantrips"/>
                <span>Cantrips</span>
            </label>
            <label class="sheet-ability">
                <input type="checkbox" name="attr_ritual"/>
                <span>Ritual</span>
            </label>
          </div>
          <div class="sheet-column sheet-col-6 sheet-no-pad">
            <label class="sheet-ability">
                <input type="checkbox" name="attr_command"/>
                <span>Command</span>
            </label>
            <label class="sheet-ability">
                <input type="checkbox" name="attr_summon"/>
                <span>Summon</span>
            </label>
          </div>
        </div>
        <hr>

        <div class="sheet-row sheet-no-pad">
          <div class="sheet-column sheet-col-6 sheet-no-pad">
            <label class="sheet-ability">
                <input type="checkbox" name="attr_pet"/>
                <span>Pet</span>
            </label>
            <label class="sheet-ability">
                <input type="checkbox" name="attr_volley"/>
                <span>Volley</span>
            </label>
          </div>
          <div class="sheet-column sheet-col-6 sheet-no-pad">
            <label class="sheet-ability">
                <input type="checkbox" name="attr_scout"/>
                <span>Scout</span>
            </label>
            <label class="sheet-ability">
                <input type="checkbox" name="attr_wild"/>
                <span>Wild</span>
            </label>
          </div>
        </div>

      </div>
    </div>

    <!--Weapons-->
    <div class="sheet-row">
      <div class="sheet-column sheet-col-5 sheet-white-bg">
        <label class="sheet-reparea">
            <span>Weapons</span>
            <div class="sheet-row">
              <div class="sheet-column sheet-col-6 sheet-no-pad sheet-no-margin"><span class="sheet-rep-key sheet-text-left">Name</span></div>
              <div class="sheet-column sheet-col-2 sheet-no-pad sheet-no-margin"><span class="sheet-rep-key">Dice</span></div>
              <div class="sheet-column sheet-col-2 sheet-no-pad sheet-no-margin"><span class="sheet-rep-key">Bonus</span></div>
              <div class="sheet-column sheet-col-2 sheet-no-pad sheet-no-margin"></div>
            </div>
            <fieldset class="repeating_weapons">
              <div class="sheet-row">
                <div class="sheet-column sheet-col-6 sheet-no-pad sheet-no-margin"><input class="sheet-repinput sheet-text-left" type="text" name="attr_weaponname"/></div>
                <div class="sheet-column sheet-col-2 sheet-no-pad sheet-no-margin"><input class="sheet-repinput" type="number" name="attr_weapondice" value="1" min="1"/></div>
                <div class="sheet-column sheet-col-2 sheet-no-pad sheet-no-margin"><input class="sheet-repinput" type="number" name="attr_weaponbonus" value="0" min="0"/></div>
                <div class="sheet-column sheet-col-2 sheet-no-pad sheet-no-margin"><button class="sheet-repbutton" type="roll" value="&{template:roll} {{name=@{character_name}}} {{note=@{weaponname}}} {{label=dmg}} {{result=[[@{weapondice}d6+@{weaponbonus}]]}}">Roll</button></div>
              </div>
            </fieldset>
        </label>
      </div>

      <!--Equipment-->
      <div class="sheet-column sheet-col-7 sheet-white-bg">
        <label class="sheet-textarea">
            <span>Equipment</span>
            <textarea name="attr_equipment"></textarea>
        </label>
      </div>
    </div>

    <!--Armor & Speed-->
    <div class="sheet-row">
      <div class="sheet-column sheet-col-8 sheet-white-bg">
        <h2>Armor & Speed</h2>
        <div class="sheet-armor-group">
            <label class="sheet-armor">
                <span>None<br>Fast</span>
                <input type="radio" name="attr_armor" value="0" checked="true"/>
                <div></div>
            </label>
            <label class="sheet-armor">
                <span>Light<br>Normal</span>
                <input type="radio" name="attr_armor" value="1"/>
                <div></div>
            </label>
            <label class="sheet-armor">
                <span>Full<br>Slow</span>
                <input type="radio" name="attr_armor" value="2"/>
                <div></div>
            </label>
            <label class="sheet-armor">
                <span>Shield</span>
                <input type="checkbox" name="attr_shield" value="1"/>
                <div></div>
            </label>
            <label class="sheet-attribute">
                <span>Total<br>Armor</span>
                <input type="number" name="attr_total_armor" value="@{armor}+@{shield}+@{tough}" disabled="true"/>
            </label>
        </div>
      </div>

        <!--Hit Dice-->
      <div class="sheet-column sheet-col-2 sheet-white-bg">
        <h2>Hit Dice</h2>
        <label class="sheet-number">
            <input type="number" name="attr_hit_dice" min="1"/>
        </label>
      </div>

        <!--HitPoints-->
      <div class="sheet-column sheet-col-2 sheet-white-bg">
        <button class="sheet-btn-hit-points" type="roll" value="&{template:roll} {{name=@{character_name}}} {{label=hp}} {{result=[[(@{hit_dice}+@{constitution})d6kh@{level}+@{hardy}]]}}""><h2>Hit Points</h2></button>
         <label class="sheet-number">
            <input type="number" name="attr_hit_points" min="1"/>
        </label>
      </div>
    </div>

    <!--Notes-->
    <div class="sheet-row">
      <div class="sheet-column sheet-white-bg">
        <label class="sheet-textarea">
            <span>Notes</span>
            <textarea name="attr_notes"></textarea>
        </label>
      </div>
    </div>

    <!--Coin-->
    <div class="sheet-row">
      <div class="sheet-column sheet-col-6 sheet-white-bg">
        <h2>Coin</h2>
         <label class="sheet-number">
            <input type="number" name="attr_coin"/>
        </label>
      </div>

        <!--Next Level-->
      <div class="sheet-column sheet-col-3">
        <label class="sheet-number">
          <h2>To Next Level</h2>
          <input type="number" name="attr_needed_for_next_level"/>
        </label>
      </div>
        <!--XP-->
      <div class="sheet-column sheet-col-3 sheet-white-bg">
        <h2>XP</h2>
        <label class="sheet-number">
          <input type="number" name="attr_xp"/>
        </label>
      </div>
    </div>

</div>
<input type="hidden" name="attr_weapons"/>

<script type="text/worker">
  on('sheet:opened',function(){
    //Preserve weapons data from previous sheet.
    getAttrs(["weapons", "notes"], function(values) {
      if(values.weapons !== "") {
        setAttrs({
          notes: values.notes + "\n\nYour weapons:\n" + values.weapons,
          weapons: ""
        });
      }
    });
  });
</script>

<rolltemplate class="sheet-rolltemplate-check">
  {{#rollGreater() result 9}}
  <div class="sheet-template-container sheet-rolltemplate-success">
  {{/rollGreater() result 9}}
  {{#rollBetween() result 7 9}}
  <div class="sheet-template-container sheet-rolltemplate-partial">
  {{/rollBetween() result 7 9}}
  {{#rollLess() result 7}}
  <div class="sheet-template-container sheet-rolltemplate-failure">
  {{/rollLess() result 7}}
    <h4>{{name}}</h4>
    <h1>
      {{#rollGreater() result 11}}&#10022;{{/rollGreater() result 11}}
      {{label}}{{result}}
    </h1>
  </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-roll">
  <div class="sheet-template-container sheet-rolltemplate-neutral">
    <h4>{{name}}
    {{#note}}<br>{{note}}{{/note}}
    </h4>
    <h1>{{label}}{{result}}</h1>
  </div>
</rolltemplate>

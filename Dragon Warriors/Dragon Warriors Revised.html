<div class="main">
    <div class="buttonbar">
        <img class="headerimage" src="https://i.imgur.com/KnxTKFu.png" alt="Dragon Warriors" />
        <button type="action" name="act_character" >Combat Summary</button>
        <button type="action" name="act_basescores" >Character Builder</button>
        <button type="action" name="act_magic" >Magic</button>
        <button type="action" name="act_inventory" >Inventory</button>
        <button type="action" name="act_skills" >Paths and Skills</button>
        <button type="action" name="act_languages" >Languages</button>
        <button type="action" name="act_biographical" >Biography</button>
        <button type="action" name="act_documentation" >Settings & Documentation</button>
    </div>
    <input type='hidden' class='tabstoggle' name='attr_sheetTab' value='character' />
    <div class="character">
        <div class="common">
          <div class="label-input-pair name">
            <label>Name</label>
            <input id="character-name" name="attr_character_name" type="text" class="fourteenlongtextinput" />
          </div>
          <div class="label-input-pair profession">
            <label>Profession</label>
            <input type="text" list="profession" name="attr_profession" class="fourteenlongtextinput">
          </div>
          <div class="label-input-pair rank">
            <label>Rank</label>
            <input id="rank" class="sixshorttextinput" name="attr_rank" type="number" min="1" value="1" />
          </div>
          <div class="label-input-pair experience">
            <label>Experience</label>
            <input id="xp" class="sixshorttextinput" name="attr_xp" type="number" value="0" />
          </div>
        </div>
        <div class="primaryattributes">
            <h2>Characteristics</h2>
            <div>Strength</div>
            <div>
                <input class="fourshorttextinput" type="number" name="attr_finalstrength" value="0" readonly/>
            </div>
            <div>
                <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} tests Strength}} {{subtitle=Roll under Strength Value}} {{roll= [[?{Number of dice|1}d20cs1cf20]]}} {{Vs= [[@{finalstrength}+?{Modifier?|0}]] }}" name="roll_strengthcheck"></button>
            </div>
            <div>Reflexes</div>
            <div>
                <input class="fourshorttextinput" type="number" name="attr_finalreflexes" value="0" readonly/>
            </div>
            <div>
                <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} tests Reflexes}} {{subtitle=Roll under Reflexes Value}} {{roll= [[?{Number of dice|1}d20cs1cf20]]}} {{Vs= [[@{finalreflexes}+?{Modifier?|0}]] }}" name="roll_reflexescheck"></button>
            </div>
            <div>Intelligence</div>
            <div>
                <input class="fourshorttextinput" type="number" name="attr_finalintelligence" value="0" readonly/>
            </div>
            <div>
                <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} tests Intelligence}} {{subtitle=Roll under Intelligence Value}} {{roll= [[?{Number of dice|1}d20cs1cf20]]}} {{Vs= [[@{finalintelligence}+?{Modifier?|0}]] }}" name="intelligencecheck"></button>
            </div>
            <div>Psychic Talent</div>
            <div>
                <input class="fourshorttextinput" type="number" name="attr_finalpsychictalent" value="0" readonly/>
            </div>
            <div>
                <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} tests Psychic Talent}} {{subtitle=Roll under Psychic Talent Value}} {{roll= [[?{Number of dice|1}d20cs1cf20]]}} {{Vs= [[@{finalpsychictalent}+?{Modifier?|0}]] }}" name="roll_psychictalentcheck"></button>
            </div>
            <div>Looks</div>
            <div>
                <input class="fourshorttextinput" type="number" name="attr_finallooks" value="0" readonly/>
            </div>
            <div>
                <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} tests Looks}} {{subtitle=Roll under Looks Value}} {{roll= [[?{Number of dice|1}d20cs1cf20]]}} {{Vs= [[@{finallooks}+?{Modifier?|0}]] }}" name="roll_lookscheck"></button>
            </div>
        </div>
        <div class="finalattackdefenceattributes">
          <h2>Combat Factors</h2>
          <div class="finalmeleelabel1">Melee Attack</div>
          <div class="finalmeleebox1">
            <input class="fourshorttextinput" type="number" name="attr_finalmeleeattack" value="0" readonly />
          </div>
          <div class="finalrangedlabel1">Ranged Attack</div>
          <div class="finalrangedbox1">
            <input class="fourshorttextinput" type="number" name="attr_finalrangedattack" value="0" readonly />
          </div>
          <div class="finalmeleelabel2">Melee Defence</div>
          <div class="finalmeleebox2">
            <input class="fourshorttextinput" type="number" name="attr_finalmeleedefence" value="0" readonly />
          </div>
          <div class="finalrangedlabel2">Ranged Defence</div>
          <div class="finalrangedbox2">
            <input class="fourshorttextinput" type="number" name="attr_finalrangeddefence" value="0" readonly />
          </div>
          <div class="finalevasionlabel">Evasion</div>
            <div class="finalevasionbox"> 
                <input class="fourshorttextinput" type="number" name="attr_finalevasion" value="0" readonly />
          </div>
          <div class="finalmagdeflabel">Magical Defence</div> 
          <div class="finalmagdefbox">
              <input class="fourshorttextinput" type="number" name="attr_finalmagicaldefence" value="0" readonly /></span>
            </div>
        </div>

        <div class="guardscontainer">
            <input type="hidden" class="combat_guards_able" name="attr_combat_guards_able" value="0" />
            <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />
                <div class="nonmartialhidden">
                   <h2>Basic Guards</h2>
                    <div class="guardselect2"> 
                        <select name="attr_guardcurrent">
                        <option value="Neutral" selected>Neutral (0)</option> 
                        <option value="Offensive" >Offensive (8)</option> 
                        <option value="Defensive" >Defensive (7)</option> 
                        </select>
                    </div>
                    <div class="malabel2">
                        <span>Modifiers:</span>
                        <br>
                        <span>Melee Attack:</span>
                    </div> 
                    <div class="mabox2">
                        <br> 
                        <input title="These modifiers have been applied for you" class="fourshorttextinput" type="number" name="attr_mattackmoda" value="0" readonly />
                    </div>
                    <div class="mdlabel2">
                        <span>Melee Defence:</span>
                    </div> 
                    <div class="mdbox2"> 
                        <input title="These modifiers have been applied for you" class="fourshorttextinput" type="number" name="attr_mdefencemoda" value="0" readonly />
                    </div>
                    <div class="ralabel2">
                        <span>Ranged Attack:</span>
                    </div>
                    <div class="rabox2"> 
                        <input title="These modifiers have been applied for you" class="fourshorttextinput" type="number" name="attr_rattackmoda" value="0" readonly />
                    </div>
                    <div class="rdlabel2">
                        <span>Ranged Defence:</span>
                    </div> 
                    <div class="rdbox2"> 
                        <input title="These modifiers have been applied for you" class="fourshorttextinput" type="number" name="attr_rdefencemoda" value="0" readonly />
                    </div>
                    <div class="dodgelabel2">
                        <span>Evasion:</span>
                    </div> 
                    <div class="dodgebox2"> 
                        <input title="These modifiers have been applied for you" class="fourshorttextinput" type="number" name="attr_evasionmod" value="0" readonly />
                    </div>
                    <div class="guardother2">
                        <span>Other Effects:</span>
                        <div class="sheet-auto-expand">
                            <span name="attr_othermodifications"></span>
                            <textarea readonly name="attr_othermodifications"> </textarea>
                        </div>
                    </div>
                </div>
                <input type="hidden" class="combat_guards_able" name="attr_combat_guards_able" value="0" />
                <div class="martialhidden">
                    <h2>Advanced Guards</h2>
                    <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />
                    <div class="guardselect1"> 
                        <span>Guard Taken</span>
                        <select name="attr_guardcurrent" readonly>
                                <option value="Neutral" selected>Neutral (0)</option> 
                                <option value="Hawk" >Hawk (1)</option> 
                                <option value="Snake" >Snake (2)</option> 
                                <option value="Wolf" >Wolf (3)</option>
                                <option value="Bear" >Bear (4)</option> 
                                <option value="Cat" >Cat (5)</option> 
                                <option value="Crab" >Crab (6)</option>
                        </select>
                    </div>
                    <div class="guardcounteredcol">
                       <span>Guard Countered?</span>
                        <input type="checkbox" name="attr_guardcountered" value="1" />
                    </div>
                        <div class="malabel1">
                            <span>Modifiers:</span>
                            <br>
                            <span>Melee Attack:</span>
                        </div> 
                        <div class="mabox1">
                            <br> 
                            <input title="These modifiers have been applied for you" class="fourshorttextinput" type="number" name="attr_mattackmoda" value="0" readonly />
                        </div>
                        <div class="mdlabel1">
                            <span>Melee Defence:</span>
                        </div> 
                        <div class="mdbox1"> 
                            <input title="These modifiers have been applied for you" class="fourshorttextinput" type="number" name="attr_mdefencemoda" value="0" readonly />
                        </div>
                        <div class="ralabel1">
                            <span>Ranged Attack:</span>
                        </div>
                        <div class="rabox1"> 
                            <input title="These modifiers have been applied for you" class="fourshorttextinput" type="number" name="attr_rattackmoda" value="0" readonly />
                        </div>
                        <div class="rdlabel1">
                            <span>Ranged Defence:</span>
                        </div> 
                        <div class="rdbox1"> 
                            <input title="These modifiers have been applied for you" class="fourshorttextinput" type="number" name="attr_rdefencemoda" value="0" readonly />
                        </div>
                        <div class="dodgelabel1">
                            <span>Evasion:</span>
                        </div> 
                        <div class="dodgebox1"> 
                            <input title="These modifiers have been applied for you" class="fourshorttextinput" type="number" name="attr_evasionmod" value="0" readonly />
                        </div>
                        <div class="guardother1">
                            <span>Other Effects:</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_othermodifications"></span>
                                <textarea readonly name="attr_othermodifications"></textarea>
                            </div>
                        </div>
                </div>
        </div>
        <div class="stealthperceptionattributes">
            <h2>Stealth and Perception</h2>
            <div>Stealth</div>
            <div>
                <input class="fourshorttextinput" type="number" name="attr_finalstealth" value="0" readonly />
            </div>
            <div>
                <input type="hidden" name="attr_steper_toggle" class="steper_toggle" value="0" />
                <div class="steper_2d10">
                    <button class="roll twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} uses Stealth}} {{subtitle=Stealth vs Perception}} {{roll=[[2d10]]}} {{Vs= [[@{finalstealth}-(?{Target's Perception|0})]] }}" name="roll_stealth2d10">
                    </button>
                </div>
                <input type="hidden" name="attr_steper_toggle" class="steper_toggle" value="0" />
                <div class="steper_d20">
                    <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} uses Stealth}} {{subtitle=Stealth vs Perception}}  {{roll=[[1d20cs1cf20]]}} {{Vs= [[@{finalstealth}-(?{Target's Perception|0})]] }}" name="roll_stealth1d20">
                    </button>
                </div>
            </div>
            <div>Perception</div>
            <div>
                <input class="fourshorttextinput" type="number" name="attr_finalperception" value="0" readonly />
            </div>
            <div>
                <input type="hidden" name="attr_steper_toggle" class="steper_toggle" value="0" />
                <div class="steper_2d10">
                    <button class="roll twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} uses Perception}} {{subtitle=Roll Perception or less}} {{roll= [[2d10]]}} {{Vs= [[@{finalperception}-(?{Other Modifiers|0})]] }}" name="roll_perception2d10">
                    </button>
                </div>
                <input type="hidden" name="attr_steper_toggle" class="steper_toggle" value="0" />
                <div class="steper_d20">
                    <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} uses Perception}} {{subtitle=Roll Perception or less}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{finalperception}-(?{Other Modifiers|0})]] }}" name="roll_perception1d20">
                    </button>
                </div>
            </div>
        </div>
        <div class="afattributes">
            <h2>Armour</h2>
            <div class="imgshieldcol">
                <img class="icon shield" src="https://i.imgur.com/pjGm1On.png" alt="Shield" />
            </div>
            <div class="aftype">
                <span>Type</span>
            </div>
            <div class="aftypeinput">
                <div class="sheet-auto-expand">
                    <span name="attr_armourtype"></span>
                    <textarea name="attr_armourtype" value="None" readonly />
                </div>
            </div>
            <div class="afinput">
                <span>Armour Factor</span>
                <input title="Includes Magic and Miscellaneous Bonuses" type="number" class="fourshorttextinput" name="attr_totalaf" value="0" readonly />
            </div>
            <div class="shieldtogglebox">
                <span>Shield</span>
                <select class="shield" name="attr_shield">
                    <option value="0">Not Equipped</option>
                    <option value="1">Equipped</option>
                </select>
            </div>
            <input type="hidden" class="shield" name="attr_shield" value="0" />            
            <div class="shieldhidden">
                <span>Roll</span><input title="Modified by Guard/Abilities" type="number" class="fourshorttextinput" name="attr_shieldsuccessvalue" value="1" readonly /> <span>on</span> <input class="fourshorttextinput" type="text" name="attr_shielddievalue" value="1d6" readonly /> <button class="d6" type="roll" value="&{template:custom} {{title=@{character_name} attempts to block with a Shield}} {{subtitle=Roll target number or less}} {{roll= [[@{shielddievalue}]]}} {{Vs= [[@{shieldsuccessvalue}]] }}" name="roll_shieldcheck"> </button>
            </div>    
        </div>
        <div class="frontpage hpattributes">
            <h2>Health Points</h2>
            <span>Maximum Health Points:</span><span name="attr_maxhp" ></span>
            <br>
            <span>Wounds Taken:</span><input name="attr_input_wounds" type="number" min="0" step="1" />
            <br>
            <div class="dots">
                <input type="hidden" name="attr_wound" class="sdot" value="0" />
                <input type="hidden" name="attr_maxhp" class="sbody" min="1" value="1" />
                <button title="1" type="action" name="act_wound_1" class="sdot gt-0">
                <span class="checked"></span>
                </button>
                <button title="2" type="action" name="act_wound_2" class="sdot gt-0 gt-1">
                <span class="checked"></span>
                </button>
                <button title="3" type="action" name="act_wound_3" class="sdot gt-0 gt-1 gt-2">
                <span class="checked"></span>
                </button>
                <button title="4" type="action" name="act_wound_4" class="sdot gt-0 gt-1 gt-2 gt-3">
                <span class="checked"></span>
                </button>
                <button title="5" type="action" name="act_wound_5" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4">
                <span class="checked"></span>
                </button>
                <button title="6" type="action" name="act_wound_6" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5">
                <span class="checked"></span>
                </button>    
                <button title="7" type="action" name="act_wound_7" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6">
                <span class="checked"></span>
                </button>    
                <button title="8" type="action" name="act_wound_8" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7">
                <span class="checked"></span>
                </button>
                <button title="9" type="action" name="act_wound_9" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8">
                <span class="checked"></span>
                </button> 
                <button title="10" type="action" name="act_wound_10" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9">
                <span class="checked"></span>
                </button>
                <button title="11" type="action" name="act_wound_11" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10">
                <span class="checked"></span>
                </button>
                <button title="12" type="action" name="act_wound_12" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11">
                <span class="checked"></span>
                </button>
                <button title="13" type="action" name="act_wound_13" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12">
                <span class="checked"></span>
                </button>
                <button title="14" type="action" name="act_wound_14" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13">
                <span class="checked"></span>
                </button>
                <button title="15" type="action" name="act_wound_15" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14">
                <span class="checked"></span>
                </button>
                <button title="16" type="action" name="act_wound_16" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15">
                <span class="checked"></span>
                </button>
                <button title="17" type="action" name="act_wound_17" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16">
                <span class="checked"></span>
                </button>
                <button  title="18" type="action" name="act_wound_18" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17">
                <span class="checked"></span>
                </button>
                <button title="19" type="action" name="act_wound_19" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18">
                <span class="checked"></span>
                </button>
                <button title="20" type="action" name="act_wound_20" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19">
                <span class="checked"></span>
                </button>
                <button title="21" type="action" name="act_wound_21" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20">
                <span class="checked"></span>
                </button>
                <button title="22" type="action" name="act_wound_22" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21">
                <span class="checked"></span>
                </button>
                <button title="23" type="action" name="act_wound_23" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22">
                <span class="checked"></span>
                </button>
                <button title="24" type="action" name="act_wound_24" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23">
                <span class="checked"></span>
                </button>
                <button title="25" type="action" name="act_wound_25" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24">
                <span class="checked"></span>
                </button>
                <button title="26" type="action" name="act_wound_26" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25">
                <span class="checked"></span>
                </button>
                <button title="27" type="action" name="act_wound_27" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26">
                <span class="checked"></span>
                </button>
                <button title="28" type="action" name="act_wound_28" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27">
                <span class="checked"></span>
                </button>
                <button title="29" type="action" name="act_wound_29" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28">
                <span class="checked"></span>
                </button>
                <button title="30" type="action" name="act_wound_30" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29">
                <span class="checked"></span>
                </button>
                <button title="31" type="action" name="act_wound_31" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30">
                <span class="checked"></span>
                </button>
                <button title="32" type="action" name="act_wound_32" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31">
                <span class="checked"></span>
                </button>
                <button title="33" type="action" name="act_wound_33" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32">
                <span class="checked"></span>
                </button>
                <button title="34" type="action" name="act_wound_34" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33">
                <span class="checked"></span>
                </button>
                <button title="35" type="action" name="act_wound_35" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34">
                <span class="checked"></span>
                </button>
                <button title="36" type="action" name="act_wound_36" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35">
                <span class="checked"></span>
                </button>
                <button title="37" type="action" name="act_wound_37" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36">
                <span class="checked"></span>
                </button>
                <button title="38" type="action" name="act_wound_38" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37">
                <span class="checked"></span>
                </button>
                <button title="39" type="action" name="act_wound_39" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37 gt-38">
                <span class="checked"></span>
                </button>
                <button title="40" type="action" name="act_wound_40" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37 gt-38 gt-39">
                <span class="checked"></span>
                </button>
                <button title="41" type="action" name="act_wound_41" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37 gt-38 gt-39 gt-40">
                <span class="checked"></span>
                </button>
                <button title="42" type="action" name="act_wound_42" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37 gt-38 gt-39 gt-40 gt-41">
                <span class="checked"></span>
                </button>
                <button title="43" type="action" name="act_wound_43" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37 gt-38 gt-39 gt-40 gt-41 gt-42">
                <span class="checked"></span>
                </button>
                <button title="44" type="action" name="act_wound_44" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37 gt-38 gt-39 gt-40 gt-41 gt-42 gt-43">
                <span class="checked"></span>
                </button>
                <button title="45" type="action" name="act_wound_45" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37 gt-38 gt-39 gt-40 gt-41 gt-42 gt-43 gt-44">
                <span class="checked"></span>
                </button>
                <button title="46" type="action" name="act_wound_46" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37 gt-38 gt-39 gt-40 gt-41 gt-42 gt-43 gt-44 gt-45">
                <span class="checked"></span>
                </button>
                <button title="47" type="action" name="act_wound_47" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37 gt-38 gt-39 gt-40 gt-41 gt-42 gt-43 gt-44 gt-45 gt-46">
                <span class="checked"></span>
                </button>
                <button title="48" type="action" name="act_wound_48" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37 gt-38 gt-39 gt-40 gt-41 gt-42 gt-43 gt-44 gt-45 gt-46 gt-47">
                <span class="checked"></span>
                </button>
                <button title="49" type="action" name="act_wound_49" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37 gt-38 gt-39 gt-40 gt-41 gt-42 gt-43 gt-44 gt-45 gt-46 gt-47 gt-48">
                <span class="checked"></span>
                </button>
                <button title="50" type="action" name="act_wound_50" class="sdot gt-0 gt-1 gt-2 gt-3 gt-4 gt-5 gt-6 gt-7 gt-8 gt-9 gt-10 gt-11 gt-12 gt-13 gt-14 gt-15 gt-16 gt-17 gt-18 gt-19 gt-20 gt-21 gt-22 gt-23 gt-24 gt-25 gt-26 gt-27 gt-28 gt-29 gt-30 gt-31 gt-32 gt-33 gt-34 gt-35 gt-36 gt-37 gt-38 gt-39 gt-40 gt-41 gt-42 gt-43 gt-44 gt-45 gt-46 gt-47 gt-48 gt-49">
                <span class="checked"></span>
                </button>
                <input type="hidden" name="attr_wtwound" class="wtdot" value="0" />
                <button title="-1" type="action" name="act_wtwound_1" class="wtdot wt-0">
                <span class="checked"></span>
                </button>
                <button title="-2" type="action" name="act_wtwound_2" class="wtdot wt-0 wt-1">
                <span class="checked"></span>
                </button>
                <button title="-3" type="action" name="act_wtwound_3" class="wtdot wt-0 wt-1 wt-2">
                <span class="checked"></span>
                </button>
            </div>
            <button type="action" name="act_wound_reset" class="wound_reset">
                Heal!
            </button>
            <input type="hidden" name="attr_currenthp" />
            <br>
            <span>Poison Save</span><button class="button1 d6" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} tries to resist the effects of poison}} {{subtitle=Roll Poison Strength under Strength to resist}} {{roll= [[?{Number of Dice|3}d6]]}} {{Vs= [[@{finalstrength}+?{Strength Modifier?|0}]] }}" name="roll_poisoncheck"></button>
        </div>
        <div class="finalmeleecombatattributes">
            <h2>Melee Combat Summary</h2>
            <div class="meleeattack1">
                <span>Melee Attack</span>
                <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} attacks with @{equippedmeleeweaponname}}} {{subtitle=@{equippedmeleeweapontype} +@{equippedmeleeweaponmagicbonus}}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[@{finalmeleeattack}-(?{Enemy Defence|0})]]}} {{abr=[[@{equippedmeleeweaponabr}+@{finalmeleeabrbonus}]]}} {{Damage=[[@{equippedmeleeweapondamage}+@{finalmeleedmgbonus}]]}} {{desc=@{equippedmeleeweaponother}}}" name="roll_meleeattack"></button>                
            </div>
            <div class="equippedweaponbox">
                <span>Equipped Weapon:</span><input type="text" name="attr_equippedmeleeweaponname" readonly /><br>
                <span>Type:</span><input type="text" name="attr_equippedmeleeweapontype" readonly /><br>
                <span>Magic Bonus:</span><input type="number" name="attr_equippedmeleeweaponmagicbonus" readonly /><br>
                <input class="hidden" name="attr_warlockweapongroupmelee" value="0" />
                <input class="hidden" name="attr_ismaingauchedefenceweapon" value="0" />
            </div>
            <div class="abrbox">
                <span>Armour Bypass Roll: </span><input type="text" name="attr_equippedmeleeweaponabr" readonly /><br>
            </div>
            <div class="damagebox"> 
                <span>Damage: </span><input type="text" name="attr_equippedmeleeweapondamage" readonly /><br>
            </div>
            <div class="meleeothereffects">
                <span>Other effects: </span>
                <div class="sheet-auto-expand">
                    <span name="attr_meleeothereffects"></span>
                    <textarea name="attr_meleeothereffects" value="" readonly> </textarea>
                </div>
            </div>
            <div class="swordimage">
                <img class="icon sword" src="https://i.imgur.com/uTrcbgb.png" alt="Sword" />
            </div>
        </div>
        <div class="finalrangedcombatattributes">
            <h2>Ranged Combat Summary</h2>
            <div class="rangedattack1">
                <span>Ranged Attack</span>
                <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} attacks with @{equippedrangedweaponname}}} {{subtitle=@{equippedrangedweapontype} +@{equippedrangedweaponmagicbonus} using @{equippedammotype}}} {{attackroll= [[1d20cs1cf20]]}} {{attackvsranged=[[ @{finalrangedattack} - ?{Range Modifier|Short @{equippedrangedweaponshortrange}m, 0|Medium @{equippedrangedweaponmediumrange}m, 3|Long @{equippedrangedweaponlongrange}m, 7} - ?{Small or Crouching target?|No, 0|Yes, 2} - ?{Is the Target moving?|No, 0|Slowly, 2|Quickly, 4} -(?{Light Conditions|Normal, 0|Poor, 3|Other, ?{Other&amp;#125;}) + (?{Miscellaneous Modifiers, can be a positive (improves chance to hit) or a negative (decreases chance to hit)|0}) ]] }} {{abr=[[ @{equippedrangedweaponabr} + @{finalrangedabrbonus} ]]}} {{Damage=[[ @{equippedrangedweapondamage} + @{finalrangeddmgbonus} ]]}} {{desc=@{equippedammospecialeffect}}}" name="roll_rangedattack">
                </button>            
            </div>          
            <div class="equippedrangedweaponbox">
                <span>Equipped Ranged Weapon:</span><input class="twelvemidlongtextinput" type="text" name="attr_equippedrangedweaponname" value="" readonly /><br>
                <span>Type:</span><input class="twelvemidlongtextinput" type="text" name="attr_equippedrangedweapontype" value="" readonly /><br>
                <span>Magic Bonus:</span><input type="number" name="attr_equippedrangedweaponmagicbonus" readonly /><br>
                <input class="hidden" name="attr_warlockweapongroupranged" value="0" />
            </div>
            <div class="equippedammobox">
                <span>Ammunition Type:</span><input class="twelvemidlongtextinput" type="text" name="attr_equippedammotype" value="" readonly />
                <span>Ammunition Special Effect:</span>
                <div class="sheet-auto-expand">
                    <span name="attr_equippedammospecialeffect"></span>
                    <textarea name="attr_equippedammospecialeffect" readonly></textarea>
                </div>
            </div>
            <div class="rangedabrbox">
                <span>Armour Bypass Roll: </span><input class="fourshorttextinput" type="text" name="attr_equippedrangedweaponabr" value="" readonly />
            </div>
            <div class="rangeddamagebox">
                <span>Damage:</span><input class="fourshorttextinput" type="text" name="attr_equippedrangedweapondamage" value="" readonly />
            </div>
            <div class="bowimage">
                <img class="icon bow" src="https://i.imgur.com/xsVzmiX.png" alt="Bow" />
            </div>
            <div class="rangedweaponranges">
                    <span>Ranges:</span>
                    <br>
                    <span>Short</span><br><input class="fourshorttextinput" type='text' name="attr_equippedrangedweaponshortrange" value="" readonly /> 
                    <br>
                    <span>Medium</span><br><input class="fourshorttextinput" type='text' name="attr_equippedrangedweaponmediumrange" value="" readonly /> 
                    <br>
                    <span>Long</span><br><input class="fourshorttextinput" type='text' name="attr_equippedrangedweaponlongrange" value="" readonly /> 
            </div>
        </div>
        <div class="classcombatabilities">
            <h2>Profession Abilities</h2>
            <div class="skills_known">
                 <details>  
                    <summary>Skills Known</summary>
                    <div class="sheet-auto-expand">
                        <span name="attr_skillsknown"></span>
                        <textarea name="attr_skillsknown"></textarea>
                    </div>
                </details>
            </div>
            <div class="melee">
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />  
                <div class="barbarianmelee">
                    <input type="hidden" name="attr_bloodrageactive" value="0" />
                    <input type="hidden" name="attr_bloodragedmgmod" value="0" />
                    <div class="skillrow">
                        <h2>Barbarian Profession Abilities</h2>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Track</summary>
                            <input type="hidden" class="barbariancheckbox track" name="attr_track" value="0" />
                            <div class="barbarianroll track_front">
                                <span>Roll Track</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} searches for Tracks}} {{subtitle=Roll under Tracking Skill}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{finalperception}+@{trackmodifier}-?{Other Modifiers|0}]] }}" name="roll_track"></button>
                            </div>
                        </details>
                    </div>       
                    <div class="skillrow">
                        <details>
                            <summary>Berserk</summary>
                            <input type="hidden" class="barbariancheckbox berserk_front" name="attr_berserk" value="0" />
                            <div class="barbarianroll berserk_button_front">
                                <span>Defence Penalty</span> <input class="fourshorttextinput" title="By default this bonus applies to Melee attacks only. See below." type="number" name="attr_berserkneg" max="0" step="3" value="0"/>
                                <br>
                                <span>Attack Bonus</span> <input class="fourshorttextinput" type="number" name="attr_berserkpos" min="0" value="0" readonly />
                                <br>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Bloodrage </summary>
                            <input type="hidden" class="barbariancheckbox bloodrage_front" name="attr_bloodrage" value="0" />
                            <div class="barbarianroll bloodrage_button_front">
                                <select title="Deactivates Berserk" name="attr_bloodrageselect" >
                                    <option value="0">Inactive</option>
                                    <option value="1">Active</option>
                                </select>
                            </div>
                        </details>
                    </div>
                </div>
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />  
                <div class="knightmelee">
                    <div class="skillrow">
                        <h2>Knight Profession Abilities</h2>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Track</summary>
                            <input type="hidden" class="knightcheckbox track_front" name="attr_track" value="0" />
                            <div class="knightroll track_button_front">
                                <span>Roll Track</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} searches for Tracks}} {{subtitle=Roll under Tracking Skill}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{finalperception}+@{trackmodifier}-?{Other Modifiers|0}]] }}" name="roll_track"></button>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Weaponskill</summary>
                            <input type="hidden" class="knightcheckbox weaponskill1_front" name="attr_weaponskill1" value="0" />
                            <div class="knightskill weaponskillrow1_button_front">
                                <span>Weaponskill</span> <input type="text" name="attr_weapon1" readonly />
                            </div>
                            <input type="hidden" class="knightcheckbox weaponskill2_front" name="attr_weaponskill2" value="0" />
                            <div class="knightskill weaponskillrow2_button_front">
                                <span>Weaponskill</span> <input type="text" name="attr_weapon2" readonly />
                            </div>
                            <input type="hidden" class="knightcheckbox weaponskill3_front" name="attr_weaponskill3" value="0" />
                            <div class="knightskill weaponskillrow3_button_front">
                                <span>Weaponskill</span> <input type="text" name="attr_weapon3" readonly />
                            </div>
                        </details>
                    </div>
                    <div>
                        <details>
                            <summary>Main Gauche</summary>
                            <input type="hidden" class="knightcheckbox main_gauche_front" name="attr_main_gauche" value="0" />
                            <div class="knightskill main_gauche_button_front">
                                <select name="attr_main_gauche_active">
                                    <option value="0">Inactive</option>
                                    <option value="1">Defensive (+2 Defence, +Weapon Magic Bonus)</option>
                                    <option value="2">Offensive (Attack twice vs full Defence</option>
                                </select>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Disarm Technique</summary>
                            <input type="hidden" class="knightcheckbox disarm_front" name="attr_disarm_technique" value="0" />
                            <div class="knightroll disarm_button_front">
                                <span>Roll Disarm</span> <button class="button d6" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} attempts a disarm maneuver}} {{subtitle=Roll Disarm check under Opponent's Rank}} {{roll=[[3d6]]}} {{Vs=?{Input enemy rank or rank equivalent}}}" name="roll_disarm"></button>
                            </div>
                        </details>
                    </div>
                </div>
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />  
                <input type="hidden" class="supremacy_able" name="attr_supremacy_able" value="0" />
                <div class="supremacy">
                    <div class="skillrow">
                        <h2>Supremacy of the Sword Abilities</h2>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Iron Will</summary>
                            <input type="hidden" class="iron_will_front" name="attr_iron_will" value="0" />
                            <div class="knightskill iron_will_button_front">
                                <span>Activate against the following spells: Command, Curse, Transfix, Enslave, Enthrall, Benight, Turncoat, Pacify, Dark Thoughts, Winds of Change, and Witch Steed.</span>
                                <select name="attr_activateiron_will">
                                    <option>Inactive</option>
                                    <option>Active</option>
                                </select>
                            </div>
                        </details>    
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Intimidating</summary>
                            <input type="hidden" class="intimidating_front" name="attr_intimidating" value="0" />
                            <div class="knightroll intimidating_button_front">
                                <span>Roll Intimidate</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} glares intimidatingly}} {{subtitle=Roll Intimidation check under your Looks}} {{roll=[[1d20cs1cf20]]}} {{Vs=[[@{finallooks}+?{+1 to Looks for each other character of equal or greater Rank that stands with them|0}]] }}" name="roll_intimidate"></button>
                            </div>
                        </details>
                    </div>
                </div>
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />  
                <div class="warlockmelee">
                    <div class="skillrow">
                        <h2>Warlock Profession Abilities</h2>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Selected Weapon Groups</summary>
                            <div class="weapon-group-container">
                                <span>Weapon Group 1:</span> 
                                <div class="sheet-auto-expand">
                                    <span name="attr_weapon_group_1_description"></span>
                                    <textarea name="attr_weapon_group_1_description" class="warlock-weapongroup" readonly ></textarea>
                                </div>    
                                <br>
                                <span>Weapon Group 2:</span> 
                                <div class="sheet-auto-expand">
                                    <span name="attr_weapon_group_2_description"></span>
                                    <textarea name="attr_weapon_group_2_description" class="warlock-weapongroup" readonly ></textarea>
                                </div>    
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                      <details>
                        <summary>Appraise Enemy</summary>
                        <input type="hidden" class="warlockcheckbox appraiseenemy_front" name="attr_appraise_enemy" value="0" />
                        <div class="warlockroll appraiseenemy_button_front">
                            <span>Activate</span> <button class="button1 d20 " type="roll" value="/w gm&{template:custom} {{title=@{character_name} attempts to appraise their enemy}} {{subtitle=Roll 1d20 under Psychic Talent}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finalpsychictalent}}} {{On fail, percieved rank= [[3d6 –7]]}}" name="roll_appraiseenemy"></button>
                        </div>
                        </details>
                    </div>
                </div>
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />  
                <div class="assassinmelee">
                    <div class="skillrow">
                        <h2>Assassin Profession Abilities</h2>
                    </div>
                        <div class="skillrow">
                            <details>
                                <summary>Shock Attack</summary>
                                <input type="hidden" class="assassincheckbox shock_attack_front" name="attr_shock_attack" value="0" />
                                <div class="assassinroll shock_attack_button_front">
                                    <span>Roll Shock Attack result:</span> <button class="roll d6" type="roll" value="&{template:custom} {{title=@{character_name} delivers a Shock Attack!}} {{subtitle=Roll a D6}} {{roll= [[1d6]]}} {{Result= 1 Stunned Opponent’s attack, defence and evasion are all at 0.
                                    2 Aghast Opponent’s attack and evasion are at 0; defence is half normal. 
                                    3-4 Astonished Opponent’s attack is at 0; evasion and defence at half normal. 
                                    5-6 Surprised Opponent’s attack is at 0; evasion and defence are unimpaired}}" ></button>
                                </div>
                        </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Inner Sense</summary>
                                <input type="hidden" class="assassincheckbox inner_sense_front" name="attr_inner_sense" value="0" />
                                <div class="assassinroll inner_sense_button_front">
                                    <span>GM rolls</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} extends their Inner Senses}} {{subtitle=Roll under Psychic Talent on 1d20}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finalpsychictalent} }}" name="roll_inner_sense"></button>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Memorize</summary>
                                <input type="hidden" class="assassincheckbox memorize_front" name="attr_memorize" value="0" />
                                <div class="assassinroll memorize_button_front">
                                    <span>GM rolls</span> <button class="roll twod10" type="roll" value="&{template:custom} {{title=@{character_name} tries to recall information}} {{subtitle=Roll under target number on 1d100}} {{roll=[[1d100cs1cf100]]}} {{Vs=[[100 - (?{Months Passed (max 9)|1} * 10)]]}}" name="roll_inner_sense"></button>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                           <details>
                                <summary>Disguise</summary>
                                <input type="hidden" class="assassincheckbox disguise_front" name="attr_disguise" value="0" />
                                <div class="assassinroll disguise_button_front">
                                    <span>Roll Disguise</span> <button class="roll twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to deceive by disguise.}} {{subtitle=Stealth vs. Perception}} {{roll= [[2d10]]}} {{Vs= [[@{finalstealth}-?{Target's Perception|0}]] }}" name="roll_disguise"></button>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Pilfer</summary>
                                <input type="hidden" name="attr_pilfermodifier_front" value="0" />
                                <input type="hidden" class="assassincheckbox pilfer_front" name="attr_pilfer" value="0" />
                                <div class="assassinroll pilfer_button_front">
                                    <span>Roll Pilfer</span> <button class="roll twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to pilfer.}} {{subtitle=Stealth vs. Perception}} {{roll= [[2d10]]}} {{Vs= [[@{finalstealth}-(@{pilfermodifier})-?{Target's Perception|0}]] }}" name="roll_pilfer"></button>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Pick Lock</summary>
                                <input type="hidden" name="attr_pick_lockscore" value="0" />
                                <input type="hidden" class="assassincheckbox pick_lock_front" name="attr_pick_lock" value="0" />
                                <div class="assassinroll pick_lock_button_front">
                                    <span>GM rolls for possibility of success</span> <button class="roll twod10" type="roll" value="/w gm&{template:custom} {{title=@{character_name} examines the lock.}} {{subtitle=Roll 1d100 under the Lock Difficulty}} {{roll=[[1d100cs1cf100]]}} {{Vs= [[@{pick_lockscore} - ?{Lock Difficulty|0} ]]}}" name="roll_pick_lockcheck"></button>
                                    Roll Pick Lock <button class="roll twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} attempts to pick a lock.}} {{subtitle=Roll 1d100 under Rank}} {{roll= [[1d100cs1cf100]]}} {{Vs= @{rank}}}" name="roll_pick_lockchance"></button>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Track</summary>
                                <input type="hidden" class="assassincheckbox track_front" name="attr_track" value="0" />
                                <div class="assassinroll track_button_front">
                                    <span>Roll Track</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} searches for Tracks}} {{subtitle=Roll under Tracking Skill}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{finalperception}+@{trackmodifier}-?{Other Modifiers|0}]] }}" name="roll_track"></button>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>    
                                <summary>Deathvow</summary>
                                <input type="hidden" class="assassincheckbox deathvow_front" name="attr_deathvow" value="0" />
                                <div class="assassinroll deathvow_button_front">
                                    <span>Activate</span>
                                    <select name="attr_deathvowselect" >
                                        <option value="0">Inactive</option>
                                        <option value="1">Active</option>
                                    </select>
                                </div>
                            </details>
                        </div>
                </div>
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />  
                <div class="mysticmelee">
                    <div class="skillrow">
                        <h2>Mystic Profession Abilities</h2>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Spell Mastery</summary>
                            <span>Current Mastered Spell</span><input type="text" name="attr_mastered_spell" />
                        </details>
                    </div>              
                    <div class="skillrow">
                        <details>
                            <summary>ESP</summary>
                            <input type="hidden" class="mysticcheckbox esp_front" name="attr_esp" value="0" />
                            <div class="mysticroll esp_button_front">
                                <span>ESP Chance</span> <input class="fourshorttextinput" type="number" name="attr_espchance" value="0" /> %
                                <span>Roll ESP</span> <button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} uses ESP}} {{subtitle=Roll 1d100 under ESP chance}} {{roll= [[1d100cs1cf100]]}} {{Vs= [[@{espchance}]]%}}" name="roll_espcheck" ></button>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                        <summary>Premonition</summary> 
                            <input type="hidden" class="mysticcheckbox premonition_front" name="attr_premonition" value="0" />
                            <div class="mysticroll premonition_button_front">
                                <span>Premonition Chance</span> <input class="fourshorttextinput" type="number" name="attr_premonitionchance" value="0" /> %
                                <span>Roll Premonition</span> <button class="button twod10" type="roll" value="/w gm &{template:custom} {{title=@{character_name} uses Premonition}} {{subtitle=Roll 1d100 under Premonition Chance}} {{roll=[[1d100cs1cf100]]}} {{Vs=[[@{premonitionchance}]]%}}" name="roll_premonitioncheck"></button>
                            </div>
                        </details>
                    </div>
                </div>
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />  
                <div class="huntermelee">
                    <div class="skillrow">
                        <h2>Hunter Profession Abilities</h2>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Favoured Weapon</summary> 
                            <input type="hidden" class="huntercheckbox favoured_weapon_front" name="attr_favoured_weapon" value="0"/>
                            <div class="hunterroll favoured_weapon_button_front">
                                <span>Weapon type</span> <input type="text" name="attr_favoured_weapon_selected" readonly />                                    
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Favoured Terrain</summary>
                            <input type="hidden" class="huntercheckbox favoured_terrain_front" name="attr_favoured_terrain" value="0" />
                            <div class="hunterroll favoured_terrain_button_front">
                                <span>Terrain Type</span> <input type="text" name="attr_favoured_terrain_selected" readonly />
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Precise Shot</summary>
                            <input type="hidden" class="huntercheckbox precise_shot_front" name="attr_precise_shot" value="0" />
                            <div class="hunterroll precise_shot_button_front">
                                <span>Defence Penalty</span> <input class="fourshorttextinput" type="number" name="attr_preciseneg" step="3" max="0" value="0" />
                                <br>
                                <span>Attack Bonus</span> <input class="fourshorttextinput" type="text" name="attr_precisepos" value="0" readonly />
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Stillness</summary>
                            <input type="hidden" class="huntercheckbox stillness_front" name="attr_stillness" value="0" />
                            <div class="hunterroll stillness_button_front">
                                <span>Defence Penalty</span> <input class="fourshorttextinput" type="number" name="attr_stillnessneg" step="1" max="0" value="0" /> 
                                <br>
                                <span>Stealth Bonus</span> <input class="fourshorttextinput" type="text" name="attr_stillnesspos" value="0" readonly />
                                <br>
                                <span>Apply favoured terrain bonus</span> 
                                <select name="attr_favoured_terrain">
                                    <option value="0">Inactive</option>
                                    <option value="1">Active</option>
                                </select>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Penetrating Shot</summary>
                            <input type="hidden" class="huntercheckbox penetrating_shot_front" name="attr_penetrating_shot" value="0" />
                            <div class="hunterroll penetrating_shot_button_front">
                                <span>Activate when firing at short range</span>
                                <select name="attr_penetratingshotselect" >
                                    <option value="0">Inactive</option>
                                    <option value="1">Active</option>
                                </select>
                            </div>
                        </details>    
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Hunter's Mind</summary>
                            <input type="hidden" class="huntercheckbox hunters_mind_front" name="attr_hunters_mind" value="0" />
                            <div class="hunterroll hunters_mind_button_front">
                                <span>Activate when in the wilderness and wearing at most padded armour</span>
                                <select name="attr_huntersmindactivate">
                                    <option value="0">Inactive</option>
                                    <option value="1">Active</option>
                                </select>
                            </div>
                       </details>
                        </div>
                    <div class="skillrow">
                        <details>
                            <summary>Fast Shot</summary>
                            <input type="hidden" class="huntercheckbox fast_shot_front" name="attr_fast_shot" value="0" />
                            <div class="hunterroll fast_shot_button_front">
                                <span>Check if second shot is possible</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} concentrates on snapping off two quick shots.}} {{subtitle=Roll 1d20 under Reflexes}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finalreflexes} }}" name="roll_fast_shot"></button>
                                <br>
                                <span>Roll second attack at end of round</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} rapidly fires a second time with @{equippedrangedweaponname}}} {{subtitle=@{equippedrangedweapontype} +@{equippedrangedweaponmagicbonus} with @{equippedammotype}}} {{attackroll= [[1d20cs1cf20]]}} {{attackvsranged=[[ @{finalrangedattack} - ?{Different target from first?|No, 0|Yes, 2} - ?{Range Modifier|Short @{equippedrangedweaponshortrange}m, 0|Medium @{equippedrangedweaponmediumrange}m, 3|Long @{equippedrangedweaponlongrange}m, 7} - ?{Small or Crouching target?|No, 0|Yes, 2} - ?{Is the Target moving?|No, 0|Slowly, 2|Quickly, 4} - (?{Light Conditions|Normal, 0|Poor, 3|Other, ?{Other}}) + (?{Miscellaneous Modifiers, can be a positive (improves chance to hit) or a negative (decreases chance to hit)|0})]] }} {{abr=[[ @{equippedrangedweaponabr} + @{finalrangedabrbonus} ]]}} {{Damage=[[ @{equippedrangedweapondamage} + @{finalrangeddmgbonus} ]]}} {{desc=@{equippedammospecialeffect}}}" name="roll_fast_shot"></button>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Forage</summary>
                            <input type="hidden" class="huntercheckbox forage_front" name="attr_forage" value="0" />
                            <div class="hunterroll forage_button_front">
                                <span>Roll Forage</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} forages in the wilderness.}} {{subtitle=Roll 2d20 under Forage Skill}} {{roll=[[1d20cs1cf20]]}} {{Vs= ?{Terrain Type?|Fecund, &#91;&#91; &#64;&#123;finalperception&#125; - 10 &#93;&#93; 
                                it takes 
                                &#91;&#91;1d3&#93;&#93; 
                                hours |Fertile, &#91;&#91; &#64;&#123;finalperception&#125; - 14 &#93;&#93; 
                                it takes 
                                &#91;&#91;1d3+3&#93;&#93; 
                                hours |Desolate, &#91;&#91; &#64;&#123;finalperception&#125; - 18 &#93;&#93; 
                                it takes 
                                &#91;&#91;1d3+6&#93;&#93; 
                                hours} }}" name="roll_forage"></button>
                            </div>
                        </details>
                    </div>
                </div>
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />  
                <div class="knavemelee">
                    <div class="skillrow">
                        <h2>Knave Profession Abilities</h2>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Favoured Language</summary>
                            <input type="text" name="attr_favoured_modernlanguage" readonly />
                            <br>
                            <span>Add +1 to Perception and +1 to Looks when communicating with humans in that language.</span>
                            <select name="attr_favoured_language">
                                    <option value="0">Inactive</option>
                                    <option value="1">Active</option>
                                </select>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Human Intuition</summary>
                            <input type="hidden" class="knavecheckbox human_intuition_front" name="attr_human_intuition" value="0" />
                            <div class="knaveroll human_intuition_button_front">
                                <select name="attr_humanintuitionselect">
                                    <option value="0">Inactive</option>
                                    <option value="1">Apply to Perception</option> 
                                    <option value="2">Apply to Attack</option>
                                    <option value="3">Apply to both Perception and Attack</option>
                                </select>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                      <details>
                        <summary>Disguise</summary>
                        <input type="hidden" class="knavecheckbox disguise_front" name="attr_disguise" value="0" />
                        <div class="knaveroll disguise_button_front">
                            <span>Roll Disguise</span> <button class="roll twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to deceive by disguise.}} {{subtitle=Stealth vs. Perception}} {{roll= [[2d10]]}} {{Vs= [[@{finalstealth}-?{Target's Perception|0}]] }}" name="roll_disguise"></button>
                        </div>
                      </details>
                    </div>
                    <div class="skillrow">
                      <details>
                        <summary>Pilfer</summary>
                        <input type="hidden" class="knavecheckbox pilfer_front" name="attr_pilfer" value="0" />
                        <div class="knaveroll pilfer_button_front">
                            <span>Roll Pilfer</span> <button class="roll twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to pilfer.}} {{subtitle=Stealth vs. Perception}} {{roll= [[2d10]]}} {{Vs= [[@{finalstealth}-(@{pilfermodifier})-?{Target's Perception|0}]] }}" name="roll_pilfer"></button>
                        </div>
                      </details>
                    </div>
                    <div class="skillrow">
                      <details>
                        <summary>Distract</summary>
                        <input type="hidden" class="knavecheckbox distract_front" name="attr_distract" value="0" />
                        <div class="knaveroll distract_button_front">
                            <span>Roll Distract</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} attempts to distract their target.}} {{subtitle=Roll 1d20 under Reflexes}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finalreflexes} }}" name="roll_distract"></button>
                        </div>
                      </details>
                    </div>
                    <div class="skillrow">
                      <details>
                        <summary>Bodyguard</summary>
                        <input type="hidden" class="knavecheckbox bodyguard_front" name="attr_bodyguard" value="0" />
                        <div class="knaveroll bodyguard_button_front">
                            <span>Use the Bodyguard to Intimidate</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} has their bodyguard glare intimidatingly}} {{subtitle=Roll 1d20 under Looks}} {{roll=[[1d20cs1cf20]]}} {{Vs=[[@{finallooks}+?{+1 to Looks for each other character of equal or greater Rank that stands with them|0}]] }}" name="roll_intimidate"></button>
                        </div>
                      </details>
                    </div>
                    <div class="skillrow">
                          <details>
                            <summary>Gossip</summary>
                            <input type="hidden" class="knavecheckbox gossip_front" name="attr_gossip" value="0" />
                            <div class="knaveroll gossip_button_front">
                                <span>Roll Gossip</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} gossips around town. }} {{subtitle=Roll 2d20 - Rank}} {{It takes= [[2d20-@{rank}]] hours in a small settlement; Days in a large settlement; Weeks in a Capital City}} {{and it costs = [[1d6]] Silver Florins per day}} }" name="roll_gossip"></button>
                            </div>
                          </details>
                        </div>
                    <div class="skillrow">
                          <details>
                            <summary>Presence</summary>
                            <input type="hidden" class="knavecheckbox presence_front" name="attr_presence" value="0" />
                            <div class="knaveroll presence_button_front">
                                <span>Roll Presence</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} projects their presence.}} {{subtitle=Roll 1d20 under Looks}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{finallooks}+?{+1 to Looks for each other character of equal or greater Rank that stands with them|0}]] }}" name="roll_presence"></button>
                            </div>
                          </details>
                        </div>
                    <div class="skillrow">
                          <details>
                            <summary>Sense Falsehood</summary>
                            <input type="hidden" class="knavecheckbox sense_falsehood_front" name="attr_sense_falsehood" value="0" />
                            <div class="knaveroll sense_falsehood_button_front">
                                <span>Roll Sense Falsehood</span> <button class="button twod10 " type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title= @{character_name} tries to discern a lie.}} {{subtitle=Roll 1d100 under Target Number}} {{roll= [[1d100cs1cf100]]}} {{Vs= [[50+@{finalintelligence}+@{finalpsychictalent}+@{rank}-?{Target's rank/equivalent|1}]] }}" name="roll_sense_falsehood"></button>
                            </div>
                          </details>
                        </div>
                    <div class="skillrow">
                        <details>
                            <summary>Hypnotic Suggestion</summary>
                            <input type="hidden" class="knavecheckbox hypnotic_suggestion_front" name="attr_hypnotic_suggestion" value="0" />
                            <div class="knaveroll hypnotic_suggestion_button_front">
                                <span>Roll Hypnotic Suggestion</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} projects a Hypnotic Suggestion.}} {{subtitle=Roll 1d20 under Looks}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finallooks}}}" name="roll_hypnotic_suggestion"></button>
                            </div>
                          </details>
                        </div>
                    <div class="skillrow">
                          <details>
                            <summary>Network</summary>
                            <input type="hidden" class="knavecheckbox network_front" name="attr_network" value="0" />
                            <div class="knaveroll network_button_front">
                                <span>Roll Network</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} recalls the favours owed to them.}} {{subtitle=Roll 1d20 under Rank}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{rank}}} {{Number of loyal friends= ?{Size of settlement|village, [[1d4]]|Town, [[1d10]]| City, [[1d20]]}}}" name="roll_network"></button>
                            </div>
                          </details>
                        </div>
                    <div class="skillrow">
                        <details>
                            <summary>Words are Power</summary>
                            <input type="hidden" class="knavecheckbox words_are_power_front" name="attr_words_are_power" value="0" />
                            <div class="knaveroll words_are_power_button_front">
                                <span>Roll Words are Power</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} gives an impassioned speech.}} {{subtitle=Roll 1d20 under Looks}} {{roll= [[1d20cs1cf20]]}} {{Vs = @{finallooks}}} {{Number of people affected = [[2d20]]}}" name="roll_words_are_power"></button>
                            </div>
                        </details>
                    </div>
                </div>    
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />  
                <div class="elementalistmelee">
                    <div class="skillrow">
                        <h2>Elementalist Profession Abilities</h2>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Raw Power</summary>
                            <input type="hidden" class="elementalistcheckbox raw_power_front" name="attr_raw_power" value="0" />
                            <input type="hidden" class="elementalistcheckbox raw_poweralternate_front" name="attr_raw_poweralternate" value="0" />
                            <div class="elementalistroll raw_power_button_front">
                                <input type="hidden" class="elementalist_raw_power_type" name="attr_elementalist_raw_power_type" value="0"/>
                                <div class="elementalist_core_powers">
                                    <span>Attack with Raw Power:</span> <button class="button d20 skillroll" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} uses Raw Power}} {{spellattackroll= [[10 + ?{Magic Points expended}]]}} {{speedvsevasion= ?{Target Evasion}}} {{range= [[10 * ?{Magic Points expended}]] metres}} {{damage= [[2d6 * ?{Magic Points expended}]]}}" name="roll_raw_power"></button>
                                </div>
                                <input type="hidden" class="elementalist_raw_power_type" name="attr_elementalist_raw_power_type" value="0"/>
                                <div class="elementalist_alternate_powers">
                                  <span>Attack with Raw Power (alternate):</span> <button class="button1 twod10 skillroll" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} uses Raw Power to attack}} {{spellattackroll= [[2d10]]}} {{VS = [[@{finalmagicalattack} - ?{Target's Magical Defence}]]}} {{damage=Dealing 2 Damage per Magic Point Spent: [[?{Magic Points spent} * 2]]}}" name="roll_raw_poweralternate"></button>
                                </div>
                            </div>
                        </details>
                    </div>    
                    <div class="skillrow">
                        <details>
                            <summary>Elemental Resistance</summary>
                            <input type="hidden" class="elementalistcheckbox elemental_resistance_front" name="attr_elemental_resistance" value="0" />
                            <div class="elementalistroll elemental_resistance_button_front">
                                <select name="attr_elemental_resistance_select" >
                                    <option value="0">Inactive</option>
                                    <option value="1">Activate Primary Element Resistance</option>
                                    <option value="2">Activate Secondary Element Resistance</option>
                                </select>
                            </div>
                        </details>
                    </div>
                </div>
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />  
                <div class="priestmelee">
                    <div class="skillrow">
                        <h2>Priest Profession Abilities</h2>
                    </div>
                        <div class="skillrow">
                            <details>
                            <summary>Linguist</summary>
                            <input type="hidden" class="priestcheckbox linguist_front" name="attr_linguist" value="0" />
                            <div class="priestroll linguist_button_front">
                                <span>Roll Linguist</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} attempts to decipher some text.}} {{subtitle=Roll 1d20 under Intelligence}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finalintelligence} }}" name="roll_linguist"></button>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Exorcism</summary>
                            <input type="hidden" class="priestcheckbox exorcism_front" name="attr_exorcism" value="0" />
                            <div class="priestroll exorcism_button_front">
                                <span>Roll Exorcism</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} pits his will against a demon!}} {{subtitle=Roll 1d20 + Rank under 1d20 + Demon's Rank/Equivalent}} {{roll= [[1d20cs1cf20+@{rank}]]}} {{Vs= [[?{The Demon's Rank/Equivalent|1}+1d20cs1cf20]] }}" name="roll_exorcism"></button>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Sermon</summary>
                            <input type="hidden" class="priestcheckbox sermon_front" name="attr_sermon" value="0" />
                            <div class="priestroll sermon_button_front">
                                <span>Roll Sermon</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} gives a stirring sermon}} {{subtitle=Roll 1d20 under Looks}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finallooks} }}" name="roll_sermon"></button>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Remove Curse</summary>
                            <input type="hidden" class="priestcheckbox remove_curse_front" name="attr_remove_curse" value="0" />
                            <div class="priestroll remove_curse_button_front">
                                <span>Roll Remove Curse</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} attempts to remove a foul curse}} {{Roll 1d20 under Target Number}} {{roll= [[1d20cs1cf20]]}} {{Vs = [[@{rank}+@{finalmagicaldefence}]] }}" name="roll_remove_curse"></button>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Remove Madness</summary>
                            <input type="hidden" class="priestcheckbox remove_madness_front" name="attr_remove_madness" value="0" />
                            <div class="priestroll remove_madness_button_front">
                                <span>Roll Remove Madness</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} soothe a troubled mind}} {{subtitle=Roll 1d20 under Target Number}} {{roll= [[1d20cs1cf20]]}} {{Vs = [[@{rank}+?{Relic Quality|Holy, 1|Saintly, 2|Perfect, 4|Godly, 8}]] }}" name="roll_remove_madness"></button>
                            </div>
                        </details>
                    </div>
                </div>
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />  
                <div class="demonologistmelee">
                    <div class="skillrow">
                        <h2>Demonologist Profession Abilities</h2>
                    </div>
                    <div class="skilrow">
                        <details>
                            <summary>Demonology</summary>
                            <input type="hidden" class="demonologistcheckbox demonology_front" name="attr_demonology" value="0" />
                            <input type="hidden" name="attr_demonology_modifier" value='0' />
                            <div class="demonologistroll demonology_button_front">
                                <span>Roll Demonology</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} seeks hidden, forbidden knowledge}} {{subtitle=Roll 2d10 under Demonology Skill}} {{roll=[[2d10]]}} {{Vs = [[@{rank}+@{demonology_modifier}]]}} {{Time spent in research and meditation= [[2d10]]}}" name="roll_demonology"></button>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>The Ritual of Summoning</summary>
                            <input type="hidden" class="demonologistcheckbox ritual_front" name="attr_ritual_of_summoning" value="0" />
                            <div class="demonologistroll ritual_button_front">
                                <span>Perform The Ritual of Summoning</span> <button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} crafts a ritual to summon a Demon}} {{subtitle=Magical Attack vs Magical Defence}} {{roll= [[2d10]]}} {{Vs= [[@{finalmagicalattack}-?{The Demon's Magical Defence|0}]] }} {{Money spent on the summoning= [[2d4*10]] Silver Florins}} {{If successful, the Demon will remain for= [[1d4]] hours}} {{The caster is drained= [[1d3]] Strength 
                                (manually input into Strength Misc Modifiers)}} {{The Demon's response to being summoned is= [[1d10]] 
                                1 Aggressive and hostile; will attack immediately. 
                                2-4 Antipathetic; will need a lot of convincing to do anything other than attack. 
                                5-9 Surly; may serve, if offered a good deal. 
                                10 Friendly.}}" name="roll_ritual"></button>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Banishing a Demon</summary>
                            <input type="hidden" class="demonologistcheckbox banish_front" name="attr_banishing_a_demon" value="0" />
                            <div class="demonologistroll banish_button_front">
                                <span>Roll to Banish a Demon</span> <button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} tries to Banish a demon}} {{subtitle=Magical Attack vs Magical Defence}} {{roll= [[2d10]]}} {{Vs= [[@{finalmagicalattack}-?{Demon's Magical Defence|0}-?{Whose Demon?|My own, 0|Another's, 2}]] }}" name="roll_banish"></button>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>The Pact of the Dark Companion</summary>
                            <input type="hidden" class="demonologistcheckbox pact_front" name="attr_pact_of_the_dark_companion" value="0" />
                            <div class="demonologistroll pact_button_front">
                                <span>Roll to summon the Dark Companion</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} calls for their Dark Companion}} {{subtitle=Roll 1d100 under Target Number}} {{roll= [[1d100cs1cf100]]}} {{Vs= 20% }}" name="roll_pact"></button>
                            </div>
                        </details>
                    </div>
                </div>
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />  
                <div class="nomelee">
                    <img class="icon rider" src="https://i.imgur.com/TvsSUOU.png" alt="No Magic Attributes" />
                </div>
            </div>
        </div>
        <div class="mpattributes">
            <div class="magicattributeshidden">
              <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />
              <div class="castermp">
                <h2>Magical Combat</h2>
                <div class="castermp-grid">
                  <div>Magical Attack</div> 
                  <div><input class="fourshorttextinput" type="number" name="attr_finalmagicalattack" value="0" readonly /></div>
                  <div>Magical Defence</div>
                  <div><input class="fourshorttextinput" type="number" name="attr_finalmagicaldefence" value="0" readonly /></div>
                  <div>Direct Magical Attack</div>
                  <div><button class="dmabutton1 twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} casts a spell}} {{spellattackroll= [[2d10]]}} {{magicalattackvsmagicaldefence= [[@{MagicalAttack}-(?{Magical Defence|0})]] }}" name="roll_directmagicalattack"></button></div>
                  <div>Indirect Magical Attack</div>
                  <div><button class="imabutton1 twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} casts a spell}} {{spellattackroll= [[2d10]]}} {{speedvsevasion= [[?{Speed|0}-(?{Enemy Evasion|0})]] }}" name="roll_indirectmagicalattack"></button></div>
                  <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />
                  <div class="commonspellexpiry">
                    <div>Spell Expiry Roll</div>
                    <div><button class="serbutton1 twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} rolls Spell Expiry}} {{subtitle=Roll under Target number}} {{roll= [[2d6]] or [[1d100cf>75]]%}}" name="roll_spellexpiry"></button></div>
                  </div>
                  <div class="warlockspellexpiry">
                    <div>Warlock Spell Expiry Roll</div>
                    <div><button class="serbutton2 twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} rolls Spell Expiry}} {{subtitle=Roll under Target Number}} {{roll= [[1d20cf20]] or [[1d100cf>60]]%}}" name="roll_warlockspellexpiry"></button></div>
                  </div>
                </div>
              </div>
              <div class="mysticmp">
                <span>Psychic Fatigue Check:</span>
                <span><input class="fourshorttextinput" type="number" name="attr_pfc" value="0" readonly />- spell level <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} checks for Psychic Fatigue}} {{subtitle=Roll 1d20 under Target Number}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{pfc}-(?{Spell Level|0})]]}}" name="roll_psychicfatiguecheck"></button></span>
              </div>
            </div> 
            <div class="magicpointsattributeshidden">
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />
                <div class="standardmp">
                    <span><span name="attr_primaryelement"></span> Magic Points: <span name="attr_maxmp"></span></span>
                    <span><span name="attr_primaryelement"></span> Magic Points used:</span>
                    <input type="number" name="attr_inputmanaused" min="0" step="1" value="0" />
                    <div class="dots">
                        <input type="hidden" name="attr_manaused" class="mdot" value="0" />        
                            <input type="hidden" name="attr_maxmp" class="mbody" value="1" />
                            <button title="1" type="action" name="act_manaused_1" class="mdot mt-0">
                            <span class="checked"></span>
                            </button>
                            <button title="2" type="action" name="act_manaused_2" class="mdot mt-0 mt-1">
                            <span class="checked"></span>
                            </button>
                            <button title="3" type="action" name="act_manaused_3" class="mdot mt-0 mt-1 mt-2">
                            <span class="checked"></span>
                            </button>
                            <button title="4" type="action" name="act_manaused_4" class="mdot mt-0 mt-1 mt-2 mt-3">
                            <span class="checked"></span>
                            </button>
                            <button title="5" type="action" name="act_manaused_5" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4">
                            <span class="checked"></span>
                            </button>
                            <button title="6" type="action" name="act_manaused_6" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5">
                            <span class="checked"></span>
                            </button>    
                            <button title="7" type="action" name="act_manaused_7" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6">
                            <span class="checked"></span>
                            </button>    
                            <button title="8" type="action" name="act_manaused_8" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7">
                            <span class="checked"></span>
                            </button>
                            <button title="9" type="action" name="act_manaused_9" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8">
                            <span class="checked"></span>
                            </button> 
                            <button title="10" type="action" name="act_manaused_10" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9">
                            <span class="checked"></span>
                            </button>
                            <button title="11" type="action" name="act_manaused_11" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10">
                            <span class="checked"></span>
                            </button>
                            <button title="12" type="action" name="act_manaused_12" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11">
                            <span class="checked"></span>
                            </button>
                            <button title="13" type="action" name="act_manaused_13" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12">
                            <span class="checked"></span>
                            </button>
                            <button title="14" type="action" name="act_manaused_14" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13">
                            <span class="checked"></span>
                            </button>
                            <button title="15" type="action" name="act_manaused_15" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14">
                            <span class="checked"></span>
                            </button>
                            <button title="16" type="action" name="act_manaused_16" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15">
                            <span class="checked"></span>
                            </button>
                            <button title="17" type="action" name="act_manaused_17" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16">
                            <span class="checked"></span>
                            </button>
                            <button  title="18" type="action" name="act_manaused_18" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17">
                            <span class="checked"></span>
                            </button>
                            <button title="19" type="action" name="act_manaused_19" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18">
                            <span class="checked"></span>
                            </button>
                            <button title="20" type="action" name="act_manaused_20" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19">
                            <span class="checked"></span>
                            </button>
                            <button title="21" type="action" name="act_manaused_21" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20">
                            <span class="checked"></span>
                            </button>
                            <button title="22" type="action" name="act_manaused_22" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21">
                            <span class="checked"></span>
                            </button>
                            <button title="23" type="action" name="act_manaused_23" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22">
                            <span class="checked"></span>
                            </button>
                            <button title="24" type="action" name="act_manaused_24" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23">
                            <span class="checked"></span>
                            </button>
                            <button title="25" type="action" name="act_manaused_25" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24">
                            <span class="checked"></span>
                            </button>
                            <button title="26" type="action" name="act_manaused_26" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25">
                            <span class="checked"></span>
                            </button>
                            <button title="27" type="action" name="act_manaused_27" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26">
                            <span class="checked"></span>
                            </button>
                            <button title="28" type="action" name="act_manaused_28" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27">
                            <span class="checked"></span>
                            </button>
                            <button title="29" type="action" name="act_manaused_29" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28">
                            <span class="checked"></span>
                            </button>
                            <button title="30" type="action" name="act_manaused_30" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29">
                            <span class="checked"></span>
                            </button>
                            <button title="31" type="action" name="act_manaused_31" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30">
                            <span class="checked"></span>
                            </button>
                            <button title="32" type="action" name="act_manaused_32" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31">
                            <span class="checked"></span>
                            </button>
                            <button title="33" type="action" name="act_manaused_33" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32">
                            <span class="checked"></span>
                            </button>
                            <button title="34" type="action" name="act_manaused_34" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33">
                            <span class="checked"></span>
                            </button>
                            <button title="35" type="action" name="act_manaused_35" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34">
                            <span class="checked"></span>
                            </button>
                            <button title="36" type="action" name="act_manaused_36" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35">
                            <span class="checked"></span>
                            </button>
                            <button title="37" type="action" name="act_manaused_37" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36">
                            <span class="checked"></span>
                            </button>
                            <button title="38" type="action" name="act_manaused_38" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37">
                            <span class="checked"></span>
                            </button>
                            <button title="39" type="action" name="act_manaused_39" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37 mt-38">
                            <span class="checked"></span>
                            </button>
                            <button title="40" type="action" name="act_manaused_40" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37 mt-38 mt-39">
                            <span class="checked"></span>
                            </button>
                            <button title="41" type="action" name="act_manaused_41" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37 mt-38 mt-39 mt-40">
                            <span class="checked"></span>
                            </button>
                            <button title="42" type="action" name="act_manaused_42" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37 mt-38 mt-39 mt-40 mt-41">
                            <span class="checked"></span>
                            </button>
                            <button title="43" type="action" name="act_manaused_43" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37 mt-38 mt-39 mt-40 mt-41 mt-42">
                            <span class="checked"></span>
                            </button>
                            <button title="44" type="action" name="act_manaused_44" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37 mt-38 mt-39 mt-40 mt-41 mt-42 mt-43">
                            <span class="checked"></span>
                            </button>
                            <button title="45" type="action" name="act_manaused_45" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37 mt-38 mt-39 mt-40 mt-41 mt-42 mt-43 mt-44">
                            <span class="checked"></span>
                            </button>
                            <button title="46" type="action" name="act_manaused_46" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37 mt-38 mt-39 mt-40 mt-41 mt-42 mt-43 mt-44 mt-45">
                            <span class="checked"></span>
                            </button>
                            <button title="47" type="action" name="act_manaused_47" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37 mt-38 mt-39 mt-40 mt-41 mt-42 mt-43 mt-44 mt-45 mt-46">
                            <span class="checked"></span>
                            </button>
                            <button title="48" type="action" name="act_manaused_48" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37 mt-38 mt-39 mt-40 mt-41 mt-42 mt-43 mt-44 mt-45 mt-46 mt-47">
                            <span class="checked"></span>
                            </button>
                            <button title="49" type="action" name="act_manaused_49" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37 mt-38 mt-39 mt-40 mt-41 mt-42 mt-43 mt-44 mt-45 mt-46 mt-47 mt-48">
                            <span class="checked"></span>
                            </button>
                            <button title="50" type="action" name="act_manaused_50" class="mdot mt-0 mt-1 mt-2 mt-3 mt-4 mt-5 mt-6 mt-7 mt-8 mt-9 mt-10 mt-11 mt-12 mt-13 mt-14 mt-15 mt-16 mt-17 mt-18 mt-19 mt-20 mt-21 mt-22 mt-23 mt-24 mt-25 mt-26 mt-27 mt-28 mt-29 mt-30 mt-31 mt-32 mt-33 mt-34 mt-35 mt-36 mt-37 mt-38 mt-39 mt-40 mt-41 mt-42 mt-43 mt-44 mt-45 mt-46 mt-47 mt-48 mt-49">
                            <span class="checked"></span>
                            </button>
                        </div>
                    <button type="action" name="act_mp_reset" class="mp_reset">Refresh!</button>
                    <input type="hidden" name="attr_currentmp" />
                </div>
                <div class="elementalistmp">
                        <span><span name="attr_secondaryelement"></span> Magic Points: <span name="attr_twomaxmp"></span></span>
                        <span><span name="attr_secondaryelement"></span> Magic Points used:</span>
                        <input type="number" name="attr_inputsecmanaused" min="0" step="1" value="0" />
                        <div class="dots">
                            <input type="hidden" name="attr_secmanaused" class="m2dot" value="0" />
                            <input type="hidden" name="attr_twomaxmp" class="m2body" value="1" />
                            <button title="1" type="action" name="act_secmanaused_1" class="m2dot mt2-0">
                            <span class="checked"></span>
                            </button>
                            <button title="2" type="action" name="act_secmanaused_2" class="m2dot mt2-0 mt2-1">
                            <span class="checked"></span>
                            </button>
                            <button title="3" type="action" name="act_secmanaused_3" class="m2dot mt2-0 mt2-1 mt2-2">
                            <span class="checked"></span>
                            </button>
                            <button title="4" type="action" name="act_secmanaused_4" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3">
                            <span class="checked"></span>
                            </button>
                            <button title="5" type="action" name="act_secmanaused_5" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4">
                            <span class="checked"></span>
                            </button>
                            <button title="6" type="action" name="act_secmanaused_6" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5">
                            <span class="checked"></span>
                            </button>    
                            <button title="7" type="action" name="act_secmanaused_7" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6">
                            <span class="checked"></span>
                            </button>    
                            <button title="8" type="action" name="act_secmanaused_8" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7">
                            <span class="checked"></span>
                            </button>
                            <button title="9" type="action" name="act_secmanaused_9" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8">
                            <span class="checked"></span>
                            </button> 
                            <button title="10" type="action" name="act_secmanaused_10" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9">
                            <span class="checked"></span>
                            </button>
                            <button title="11" type="action" name="act_secmanaused_11" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10">
                            <span class="checked"></span>
                            </button>
                            <button title="12" type="action" name="act_secmanaused_12" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11">
                            <span class="checked"></span>
                            </button>
                            <button title="13" type="action" name="act_secmanaused_13" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12">
                            <span class="checked"></span>
                            </button>
                            <button title="14" type="action" name="act_secmanaused_14" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13">
                            <span class="checked"></span>
                            </button>
                            <button title="15" type="action" name="act_secmanaused_15" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14">
                            <span class="checked"></span>
                            </button>
                            <button title="16" type="action" name="act_secmanaused_16" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15">
                            <span class="checked"></span>
                            </button>
                            <button title="17" type="action" name="act_secmanaused_17" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16">
                            <span class="checked"></span>
                            </button>
                            <button  title="18" type="action" name="act_secmanaused_18" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17">
                            <span class="checked"></span>
                            </button>
                            <button title="19" type="action" name="act_secmanaused_19" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18">
                            <span class="checked"></span>
                            </button>
                            <button title="20" type="action" name="act_secmanaused_20" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19">
                            <span class="checked"></span>
                            </button>
                            <button title="21" type="action" name="act_secmanaused_21" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20">
                            <span class="checked"></span>
                            </button>
                            <button title="22" type="action" name="act_secmanaused_22" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21">
                            <span class="checked"></span>
                            </button>
                            <button title="23" type="action" name="act_secmanaused_23" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22">
                            <span class="checked"></span>
                            </button>
                            <button title="24" type="action" name="act_secmanaused_24" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23">
                            <span class="checked"></span>
                            </button>
                            <button title="25" type="action" name="act_secmanaused_25" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24">
                            <span class="checked"></span>
                            </button>
                            <button title="26" type="action" name="act_secmanaused_26" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25">
                            <span class="checked"></span>
                            </button>
                            <button title="27" type="action" name="act_secmanaused_27" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26">
                            <span class="checked"></span>
                            </button>
                            <button title="28" type="action" name="act_secmanaused_28" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27">
                            <span class="checked"></span>
                            </button>
                            <button title="29" type="action" name="act_secmanaused_29" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28">
                            <span class="checked"></span>
                            </button>
                            <button title="30" type="action" name="act_secmanaused_30" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29">
                            <span class="checked"></span>
                            </button>
                            <button title="31" type="action" name="act_secmanaused_31" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30">
                            <span class="checked"></span>
                            </button>
                            <button title="32" type="action" name="act_secmanaused_32" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31">
                            <span class="checked"></span>
                            </button>
                            <button title="33" type="action" name="act_secmanaused_33" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32">
                            <span class="checked"></span>
                            </button>
                            <button title="34" type="action" name="act_secmanaused_34" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33">
                            <span class="checked"></span>
                            </button>
                            <button title="35" type="action" name="act_secmanaused_35" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34">
                            <span class="checked"></span>
                            </button>
                            <button title="36" type="action" name="act_secmanaused_36" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35">
                            <span class="checked"></span>
                            </button>
                            <button title="37" type="action" name="act_secmanaused_37" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36">
                            <span class="checked"></span>
                            </button>
                            <button title="38" type="action" name="act_secmanaused_38" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37">
                            <span class="checked"></span>
                            </button>
                            <button title="39" type="action" name="act_secmanaused_39" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37 mt2-38">
                            <span class="checked"></span>
                            </button>
                            <button title="40" type="action" name="act_secmanaused_40" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37 mt2-38 mt2-39">
                            <span class="checked"></span>
                            </button>
                            <button title="41" type="action" name="act_secmanaused_41" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37 mt2-38 mt2-39 mt2-40">
                            <span class="checked"></span>
                            </button>
                            <button title="42" type="action" name="act_secmanaused_42" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37 mt2-38 mt2-39 mt2-40 mt2-41">
                            <span class="checked"></span>
                            </button>
                            <button title="43" type="action" name="act_secmanaused_43" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37 mt2-38 mt2-39 mt2-40 mt2-41 mt2-42">
                            <span class="checked"></span>
                            </button>
                            <button title="44" type="action" name="act_secmanaused_44" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37 mt2-38 mt2-39 mt2-40 mt2-41 mt2-42 mt2-43">
                            <span class="checked"></span>
                            </button>
                            <button title="45" type="action" name="act_secmanaused_45" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37 mt2-38 mt2-39 mt2-40 mt2-41 mt2-42 mt2-43 mt2-44">
                            <span class="checked"></span>
                            </button>
                            <button title="46" type="action" name="act_secmanaused_46" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37 mt2-38 mt2-39 mt2-40 mt2-41 mt2-42 mt2-43 mt2-44 mt2-45">
                            <span class="checked"></span>
                            </button>
                            <button title="47" type="action" name="act_secmanaused_47" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37 mt2-38 mt2-39 mt2-40 mt2-41 mt2-42 mt2-43 mt2-44 mt2-45 mt2-46">
                            <span class="checked"></span>
                            </button>
                            <button title="48" type="action" name="act_secmanaused_48" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37 mt2-38 mt2-39 mt2-40 mt2-41 mt2-42 mt2-43 mt2-44 mt2-45 mt2-46 mt2-47">
                            <span class="checked"></span>
                            </button>
                            <button title="49" type="action" name="act_secmanaused_49" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37 mt2-38 mt2-39 mt2-40 mt2-41 mt2-42 mt2-43 mt2-44 mt2-45 mt2-46 mt2-47 mt2-48">
                            <span class="checked"></span>
                            </button>
                            <button title="50" type="action" name="act_secmanaused_50" class="m2dot mt2-0 mt2-1 mt2-2 mt2-3 mt2-4 mt2-5 mt2-6 mt2-7 mt2-8 mt2-9 mt2-10 mt2-11 mt2-12 mt2-13 mt2-14 mt2-15 mt2-16 mt2-17 mt2-18 mt2-19 mt2-20 mt2-21 mt2-22 mt2-23 mt2-24 mt2-25 mt2-26 mt2-27 mt2-28 mt2-29 mt2-30 mt2-31 mt2-32 mt2-33 mt2-34 mt2-35 mt2-36 mt2-37 mt2-38 mt2-39 mt2-40 mt2-41 mt2-42 mt2-43 mt2-44 mt2-45 mt2-46 mt2-47 mt2-48 mt2-49">
                            <span class="checked"></span>
                            </button>
                        </div>
                        <button type="action" name="act_secmp_reset" class="mp_reset">Refresh!</button>
                        <input type="hidden" name="attr_currentmpelementtwo" />
                        <span><span name="attr_tertiaryelement"></span> Magic Points: <span name="attr_threemaxmp"></span></span>
                        <span><span name="attr_tertiaryelement"></span> Magic Points used:</span>
                        <input type="number" name="attr_inputtermanaused" min="0" step="1" value="0" />
                        <div class="dots">
                            <input type="hidden" name="attr_termanaused" class="m3dot" value="0" />
                            <input type="hidden" name="attr_threemaxmp" class="m3body" value="1" />
                            <button title="1" type="action" name="act_termanaused_1" class="m3dot mt3-0">
                            <span class="checked"></span>
                            </button>
                            <button title="2" type="action" name="act_termanaused_2" class="m3dot mt3-0 mt3-1">
                            <span class="checked"></span>
                            </button>
                            <button title="3" type="action" name="act_termanaused_3" class="m3dot mt3-0 mt3-1 mt3-2">
                            <span class="checked"></span>
                            </button>
                            <button title="4" type="action" name="act_termanaused_4" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3">
                            <span class="checked"></span>
                            </button>
                            <button title="5" type="action" name="act_termanaused_5" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4">
                            <span class="checked"></span>
                            </button>
                            <button title="6" type="action" name="act_termanaused_6" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5">
                            <span class="checked"></span>
                            </button>    
                            <button title="7" type="action" name="act_termanaused_7" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6">
                            <span class="checked"></span>
                            </button>    
                            <button title="8" type="action" name="act_termanaused_8" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7">
                            <span class="checked"></span>
                            </button>
                            <button title="9" type="action" name="act_termanaused_9" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8">
                            <span class="checked"></span>
                            </button> 
                            <button title="10" type="action" name="act_termanaused_10" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9">
                            <span class="checked"></span>
                            </button>
                            <button title="11" type="action" name="act_termanaused_11" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10">
                            <span class="checked"></span>
                            </button>
                            <button title="12" type="action" name="act_termanaused_12" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11">
                            <span class="checked"></span>
                            </button>
                            <button title="13" type="action" name="act_termanaused_13" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12">
                            <span class="checked"></span>
                            </button>
                            <button title="14" type="action" name="act_termanaused_14" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13">
                            <span class="checked"></span>
                            </button>
                            <button title="15" type="action" name="act_termanaused_15" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14">
                            <span class="checked"></span>
                            </button>
                            <button title="16" type="action" name="act_termanaused_16" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15">
                            <span class="checked"></span>
                            </button>
                            <button title="17" type="action" name="act_termanaused_17" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16">
                            <span class="checked"></span>
                            </button>
                            <button  title="18" type="action" name="act_termanaused_18" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17">
                            <span class="checked"></span>
                            </button>
                            <button title="19" type="action" name="act_termanaused_19" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18">
                            <span class="checked"></span>
                            </button>
                            <button title="20" type="action" name="act_termanaused_20" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19">
                            <span class="checked"></span>
                            </button>
                            <button title="21" type="action" name="act_termanaused_21" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20">
                            <span class="checked"></span>
                            </button>
                            <button title="22" type="action" name="act_termanaused_22" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21">
                            <span class="checked"></span>
                            </button>
                            <button title="23" type="action" name="act_termanaused_23" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22">
                            <span class="checked"></span>
                            </button>
                            <button title="24" type="action" name="act_termanaused_24" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23">
                            <span class="checked"></span>
                            </button>
                            <button title="25" type="action" name="act_termanaused_25" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24">
                            <span class="checked"></span>
                            </button>
                            <button title="26" type="action" name="act_termanaused_26" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25">
                            <span class="checked"></span>
                            </button>
                            <button title="27" type="action" name="act_termanaused_27" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26">
                            <span class="checked"></span>
                            </button>
                            <button title="28" type="action" name="act_termanaused_28" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27">
                            <span class="checked"></span>
                            </button>
                            <button title="29" type="action" name="act_termanaused_29" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28">
                            <span class="checked"></span>
                            </button>
                            <button title="30" type="action" name="act_termanaused_30" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29">
                            <span class="checked"></span>
                            </button>
                            <button title="31" type="action" name="act_termanaused_31" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30">
                            <span class="checked"></span>
                            </button>
                            <button title="32" type="action" name="act_termanaused_32" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31">
                            <span class="checked"></span>
                            </button>
                            <button title="33" type="action" name="act_termanaused_33" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32">
                            <span class="checked"></span>
                            </button>
                            <button title="34" type="action" name="act_termanaused_34" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33">
                            <span class="checked"></span>
                            </button>
                            <button title="35" type="action" name="act_termanaused_35" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34">
                            <span class="checked"></span>
                            </button>
                            <button title="36" type="action" name="act_termanaused_36" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35">
                            <span class="checked"></span>
                            </button>
                            <button title="37" type="action" name="act_termanaused_37" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36">
                            <span class="checked"></span>
                            </button>
                            <button title="38" type="action" name="act_termanaused_38" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37">
                            <span class="checked"></span>
                            </button>
                            <button title="39" type="action" name="act_termanaused_39" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37 mt3-38">
                            <span class="checked"></span>
                            </button>
                            <button title="40" type="action" name="act_termanaused_40" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37 mt3-38 mt3-39">
                            <span class="checked"></span>
                            </button>
                            <button title="41" type="action" name="act_termanaused_41" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37 mt3-38 mt3-39 mt3-40">
                            <span class="checked"></span>
                            </button>
                            <button title="42" type="action" name="act_termanaused_42" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37 mt3-38 mt3-39 mt3-40 mt3-41">
                            <span class="checked"></span>
                            </button>
                            <button title="43" type="action" name="act_termanaused_43" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37 mt3-38 mt3-39 mt3-40 mt3-41 mt3-42">
                            <span class="checked"></span>
                            </button>
                            <button title="44" type="action" name="act_termanaused_44" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37 mt3-38 mt3-39 mt3-40 mt3-41 mt3-42 mt3-43">
                            <span class="checked"></span>
                            </button>
                            <button title="45" type="action" name="act_termanaused_45" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37 mt3-38 mt3-39 mt3-40 mt3-41 mt3-42 mt3-43 mt3-44">
                            <span class="checked"></span>
                            </button>
                            <button title="46" type="action" name="act_termanaused_46" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37 mt3-38 mt3-39 mt3-40 mt3-41 mt3-42 mt3-43 mt3-44 mt3-45">
                            <span class="checked"></span>
                            </button>
                            <button title="47" type="action" name="act_termanaused_47" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37 mt3-38 mt3-39 mt3-40 mt3-41 mt3-42 mt3-43 mt3-44 mt3-45 mt3-46">
                            <span class="checked"></span>
                            </button>
                            <button title="48" type="action" name="act_termanaused_48" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37 mt3-38 mt3-39 mt3-40 mt3-41 mt3-42 mt3-43 mt3-44 mt3-45 mt3-46 mt3-47">
                            <span class="checked"></span>
                            </button>
                            <button title="49" type="action" name="act_termanaused_49" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37 mt3-38 mt3-39 mt3-40 mt3-41 mt3-42 mt3-43 mt3-44 mt3-45 mt3-46 mt3-47 mt3-48">
                            <span class="checked"></span>
                            </button>
                            <button title="50" type="action" name="act_termanaused_50" class="m3dot mt3-0 mt3-1 mt3-2 mt3-3 mt3-4 mt3-5 mt3-6 mt3-7 mt3-8 mt3-9 mt3-10 mt3-11 mt3-12 mt3-13 mt3-14 mt3-15 mt3-16 mt3-17 mt3-18 mt3-19 mt3-20 mt3-21 mt3-22 mt3-23 mt3-24 mt3-25 mt3-26 mt3-27 mt3-28 mt3-29 mt3-30 mt3-31 mt3-32 mt3-33 mt3-34 mt3-35 mt3-36 mt3-37 mt3-38 mt3-39 mt3-40 mt3-41 mt3-42 mt3-43 mt3-44 mt3-45 mt3-46 mt3-47 mt3-48 mt3-49">
                            <span class="checked"></span>
                            </button>
                        </div>
                    <button type="action" name="act_termp_reset" class="mp_reset">Refresh!</button>
                    <input type="hidden" name="attr_currentmpelementthree" />
                </div>
                <div class="mp nomagic">
                    <img class="icon rider" src="https://i.imgur.com/TvsSUOU.png" alt="No Magic Attributes" />
                </div>
            </div>
        </div>  
    </div>
    <div class="basescores">
        <div class="common">
          <div class="label-input-pair name">
            <label>Name</label>
            <input id="character-name" name="attr_character_name" type="text" class="fourteenlongtextinput" />
          </div>
          <div class="label-input-pair profession">
            <label>Profession</label>
            <input type="text" list="profession" name="attr_profession" class="fourteenlongtextinput">
          </div>
          <div class="label-input-pair rank">
            <label>Rank</label>
            <input id="rank" class="sixshorttextinput" name="attr_rank" type="number" min="1" value="1" />
          </div>
          <div class="label-input-pair experience">
            <label>Experience</label>
            <input id="xp" class="sixshorttextinput" name="attr_xp" type="number" value="0" />
          </div>
        </div>
        <div class="basecharacteristics">
            <h2>Primary Statistics</h2>
                <h3 class="characteristic">Characteristic</h3>
                <h3 class="Base">Base Score</h3>
                <h3 class="Modifier">Modifier</h3>
            <div>
                <span>Strength</span>
            </div>
            <div>
                <input class="fourshorttextinput" type="number" name="attr_strength" value="0" />
            </div>
            <div >
                <input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscstrength" value="0" />
            </div>
            <div >
                <span>Reflexes</span>
            </div>
            <div >
                <input class="fourshorttextinput" type="number" name="attr_reflexes" value="0" />
            </div>
            <div >
                <input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscreflexes" value="0" />
            </div>
            <div >
                <span>Intelligence</span>
            </div>
            <div >
                <input class="fourshorttextinput" type="number" name="attr_intelligence" value="0" />
            </div>
            <div >
                <input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscintelligence" value="0" />
            </div>
            <div >
                <span>Psychic Talent</span>
            </div>
            <div >
                <input class="fourshorttextinput" type="number" name="attr_psychictalent" value="0" />
            </div>
            <div >
                <input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscpsychictalent" value="0" />
            </div>
            <div >
                <span>Looks</span>
            </div>
            <div >
                <input class="fourshorttextinput" type="number" name="attr_looks" value="0" />
            </div>
            <div >
                <input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_misclooks" value="0" />
            </div>
            <div class="rollbasestatssetcontainer">
                <input title="Show Roll Base Characteristics Button" type="checkbox" class="rollstats-toggle" name="attr_rollstats-toggle" value="1">
                <div class="rollbasestatsbuttoncontainer">
                    <button type="action" class="rollbasestatsbutton" name="act_rollbasestatsbutton">Roll Base Characteristics Points</button>
                </div>
            </div>
        </div>
        <div class="baseattributes">
            <h2>Base Factors</h2>
            <h3 class="attribute">Attribute</h3>
            <h3 class="base">Base Attribute</h3>
            <h3 class="modifier">Modifier</h3>
            <div><span>Attack</span></div>
            <div><input title="Base from profession/rank only" class="fourshorttextinput" type="number" name="attr_attack" value="0" /></div>
            <div><span>See Below</span></div>
            <div><span>Defence</span></div>
            <div><input title="Base from profession/rank only" class="fourshorttextinput" type="number" name="attr_defence" value="0" /></div>
            <div><span>See Below</span></div>
            <div><span>Stealth</span></div>
            <div><input title="Base from profession/rank only" class="fourshorttextinput" type="number" name="attr_stealth" value="0" /></div>
            <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscstealth" value="0" /></div>
            <div><span>Perception</span></div>
            <div><input title="Base from profession/rank only" class="fourshorttextinput" type="number" name="attr_perception" value="0" /></div>
            <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscperception" value="0" /></div>
            <div><span>Evasion</span></div>
            <div><input title="Base from profession/rank only" class="fourshorttextinput" type="number" name="attr_evasion" value="0" /></div>
            <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscevasion" value="0" /></div>
            <div><span>Health Points</span></div>
            <div><input title="Base from profession/rank only" class="fourshorttextinput" type="number" name="attr_base_maxhp" min="1" value="1"/></div>
            <div><input class="fourshorttextinput" title="Can be a positive or negative number" type="number" name="attr_maxhp_mod" value="0"/></div>
            <div class="rollbasehpsetcontainer">
                <input title="Show Roll Base HP Button" type="checkbox" class="rollhp-toggle" name="attr_rollhp-toggle" value="1">
                <div class="rollbasehpbuttoncontainer">
                    <button type="action" class="rollbasehpbutton" name="act_rollbasehpbutton">Roll Base Health Points</button>
                    <br>
                    <span>For custom professions, input the number to be added to 1d6.</span> <input type="number" name="attr_customprofessionmodifier"> 
                </div>
            </div>
        </div>
        <div class="magicalattributes">
          <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />
          <div class="magical-grid">  
            <h2>Magical Combat Factors</h2> 
            <h3 class="attribute">Attribute</h3>
            <h3 class="base">Base Attribute</h3>
            <h3 class="modifier">Modifier</h3>
            <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />
            <div class="magicalattackcontainer">
              <div><span>Magical Attack</span></div>
              <div><input title="Base from profession/rank only" class="fourshorttextinput" type="number" name="attr_magicalattack" value="0" /></div>
              <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscmagicattack" value="0" /></div>
            </div>
            <div class="magicaldefencecontainer">
              <div><span>Magical Defence</span></div>
              <div><input title="Base from profession/rank only" class="fourshorttextinput" type="number" name="attr_magicaldefence" value="0" /></div>
              <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscmagicdefence" value="0" /></div>
            </div>
          </div>
        </div>        
        <div class="basemeleeattributes">
                    <h2>Miscellaneous Modifiers - Melee Combat</h2>
                    <h3 class="attribute">Attribute</h3>
                    <h3 class="modifier">Modifier</h3>
                    <div><span>Attack</span></div>
                    <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscattackmelee" value="0" /></div>
                    <div><span>Defence</span></div>
                    <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscdefencemelee" value="0" /></div>
                    <div><span>Armour Bypass</span></div>
                    <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscabrmelee" value="0" /></div>
                    <div><span>Damage</span></div>
                    <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscdamagemelee" value="0" /></div>
                </div>
        <div class="baserangedattributes">
            <h2>Miscellaneous Modifiers - Ranged Combat</h2>
            <h3 class="attribute">Attribute</h3>
            <h3 class="modifier">Modifier</h3>
            <div><span>Attack</span></div>
            <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscattackranged" value="0" /></div>
            <div><span>Defence</span></div>
            <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscdefenceranged" value="0" /></div>
            <div><span>Armour Bypass</span></div>
            <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscabrranged" value="0" /></div>
            <div><span>Damage</span></div>
            <div><input class="fourshorttextinput" title="Can be a positive or negative number." type="number" name="attr_miscdamageranged" value="0" /></div>
        </div>
        <div class="finalbasecombatattributes">
          <h2>Totaled Factors</h2>
          <h3>Final Melee Attack</h3>
          <input title="This is the score after all magic weapon modifiers, guard modifiers, and profession abilities have been applied." type="number" name="attr_finalmeleeattack" value="0" readonly />
          <h3>Final Ranged Attack</h3>
          <input title="This is the score after all magic weapon and ammunition modifiers, guard modifiers, and profession abilities have been applied." type="number" name="attr_finalrangedattack" value="0" readonly />
          <h3>Final Melee Defence</h3>
          <input title="This is the score after all magic weapon modifiers, shield modifiers, guard modifiers, and profession abilities have been applied." type="number" name="attr_finalmeleedefence" value="0" readonly />
          <h3>Final Ranged Defence</h3>
          <input title="This is the score after all shield modifiers, guard modifiers, and profession abilities have been applied." type="number" name="attr_finalrangeddefence" value="0" readonly />
          <h3>Final Magical Attack</h3>
          <input type="number" name="attr_finalmagicalattack" value="0" readonly />
          <h3>Final Magical Defence</h3>
          <input type="number" name="attr_finalmagicaldefence" value="0" readonly /> 
          <h3>Final Stealth</h3>
          <input type="number" name="attr_finalstealth" value="0" readonly />
          <h3>Final Perception</h3>
          <input type="number" name="attr_finalperception" value="0" readonly />
          <h3>Final Evasion</h3>
          <input type="number" name="attr_finalevasion" value="0" readonly />     
          <h3>Total Melee ABR Bonus</h3>
          <input title="ABR bonuses from strength, magic items, and profession abilities." type="number" name="attr_finalmeleeabrbonus" value="0" readonly />
          <h3>Total Ranged ABR Bonus</h3>
          <input title="ABR bonuses from strength, magic items, and profession abilities." type="number" name="attr_finalrangedabrbonus" value="0" readonly />
          <h3>Total Melee Damage Bonus</h3>
          <input title="Damage bonuses from strength, magic items, and profession abilities." type="number" name="attr_finalmeleedmgbonus" value="0" readonly />
          <h3>Total Ranged Damage Bonus</h3>
          <input title="Damage bonuses from strength, magic items, and profession abilities." type="number" name="attr_finalrangeddmgbonus" value="0" readonly />
          <h3>Current Maximum Health Points</h3>
          <input type="number" name="attr_maxhp" min="1" value="1"/>
        </div>
    </div>

    <div class="magic">
        <div class="manabox">
            <div class="magicbox">
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />
                <div class="notacaster">
                    <img class="icon sword" src="https://i.imgur.com/uTrcbgb.png" alt="Sword" />
                </div>
                <div class="castermana">
                    <h2>Magical Combat</h2>
                    <div class="castermana-grid">
                        <div>Direct Magical Attack</div>
                        <div><button class="dmabutton1 twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} casts a spell}} {{spellattackroll= [[2d10]]}} {{magicalattackvsmagicaldefence= [[@{MagicalAttack}-(?{Magical Defence|0})]] }}" name="roll_directmagicalattack"></button></div>
                        <div>Indirect Magical Attack</div>  
                        <div><button class="imabutton1 twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} casts a spell}} {{spellattackroll= [[2d10]]}} {{speedvsevasion= [[?{Speed|0}-(?{Enemy Evasion|0})]] }}" name="roll_indirectmagicalattack"></button></div>
                        <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />
                        <div class="commonspellexpiry">
                            <div>Spell Expiry Roll</div>
                            <div><button class="serbutton1 twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} rolls Spell Expiry}} {{subtitle=Roll under Target number}} {{roll= [[2d6]] or [[1d100cf>75]]%}}" name="roll_spellexpiry"></button></div>
                        </div>
                        <div class="warlockspellexpiry">
                            <div>Warlock Spell Expiry Roll</div>
                            <div><button class="serbutton2 twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} rolls Spell Expiry}} {{subtitle=Roll under Target Number}} {{roll= [[1d20cf20]] or [[1d100cf>60]]%}}" name="roll_warlockspellexpiry"></button></div>
                        </div>
                    </div>
                  </div> 
            </div>
            <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />
            <div class="elementalistattributes">
                <div class="elementselectscontainer">
                    <h2>Elements</h2>
                    <h3>Primary Element</h3>
                    <select name="attr_primaryelement">  
                        <option value=" " selected>(Pick One)</option>
                        <option value="Earth">Earth (moonset)</option>
                        <option value="Air">Air (noon)</option>
                        <option value="Water">Water (moonrise)</option>
                        <option value="Fire">Fire (sunrise)</option>
                        <option value="Darkness">Darkness (sunset)</option>
                    </select>
                    <h3>Secondary Element</h3>
                    <select name="attr_secondaryelement">  
                        <option value=" " selected>(Pick One)</option>
                        <option value="Earth">Earth (moonset)</option>
                        <option value="Air">Air (noon)</option>
                        <option value="Water">Water (moonrise)</option>
                        <option value="Fire">Fire (sunrise)</option>
                    </select>
                    <h3>Secondary Element</h3>
                    <select name="attr_tertiaryelement">  
                        <option value=" " selected>(Pick One)</option>
                        <option value="Earth">Earth (moonset)</option>
                        <option value="Air">Air (noon)</option>
                        <option value="Water">Water (moonrise)</option>
                        <option value="Fire">Fire (sunrise)</option>
                    </select>
                </div>
                <div class="elementsimage">
                    <img src="https://i.imgur.com/askHpqp.png" alt="The Elements: Earth, Air, Fire, Water, Darkness" />
                </div>   
            </div>
            <div class="manacollection">
                <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />
                <div class="mana standardmana">
                    <span name="attr_primaryelement"></span><span>Magic Points</span> <input title="Put your maximum Magic Points in this box. Mana used is tracked on the front page." class="fourshorttextinput" type="number" name="attr_maxmp" value="0" />
                </div>
                <div class="elementalistmana secondaryelementmpcontainer">
                    <span name="attr_secondaryelement"></span><span>Magic Points</span>
                    <input title="Put your maximum Magic Points in this box. Mana used is tracked on the front page." class="fourshorttextinput" type="number" name="attr_twomaxmp" value="0" />
                </div>
                <div class="elementalistmana tertiaryelementmpcontainer">
                    <span name="attr_tertiaryelement"></span><span>Magic Points</span>
                    <input title="Put your maximum Magic Points in this box. Mana used is tracked on the front page." class="fourshorttextinput" type="number" name="attr_threemaxmp" value="0" />
                </div>
                <div class="mysticmana">
                    <span>Psychic Fatigue Check:</span>
                    <span><input class="fourshorttextinput" type="number" name="attr_pfc" value="0" /> - spell level </span>
                    <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} checks for Psychic Fatigue}} {{subtitle=Roll 1d20 under Target Number}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{pfc}-(?{Spell Level|0})]]}}" name="roll_psychicfatiguecheck"></button>
               </div>
            </div>
        </div>
        <div class="spellbox">
            <input type="hidden" class="profession-toggle" name="attr_profession" value="0" /> 
            <div class="noncaster">
                <img class="headerimage" src=https://i.imgur.com/71b5OWK.png alt="Scroll" /> 
            </div>
            <div class="mystic_spell_list">
                <details class="spellbook">
                    <summary class="spellbook-header">Mystic Spells of Rank One</summary> 
                    <div class="spell-entry"> 
                        <div class="spell_name">Invigorate</div> 
                        <div class="spell_range">Range: Self</div> 
                        <div class="spell_desc">
                            <span>Description:</span><p>The Mystic converts psychic energy into physical energy, releasing a powerful restorative force into his body. He regains two Health Points. The spell will not increase his Health Point score above its normal level, of course.</p>
                        </div> 
                    </div>
                    <div class="spell-entry"> 
                        <div class="spell_name">Mirage</div> 
                        <div class="spell_range">Range: 10m</div> 
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div> 
                        <div class="spell_desc">
                            <span>Description:</span><p>A visual illusion is created, of anything the caster wishes so long as it is no bigger than man-sized. The Mirage can be ‘programmed’ to perform a set of actions (e.g., a guard marching up and down outside a door) or it can be controlled mentally, like a holographic puppet. There is a 10% chance that the Mirage will be recognized as such at first glance.</p>
                        </div> 
                    </div> 

                    <div class="spell-entry"> 
                        <div class="spell_name">See Enchantment</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>While this spell is in effect, the Mystic is able to see powerful concentrations of magic energy. He could tell whether a weapon or talisman were magical but would not be able to sense impermanent enchantments, such as the presence of a Command spell.</p>
                        </div>
                    </div>

                    <div class="spell-entry"> 
                        <div class="spell_name">Suspended Animation</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: Preset duration up to one year and a day</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic is able to sink into a deep coma, outwardly resembling death. This coma lasts for any preset duration up to a year and a day. Even ESP will detect no thoughts, but in fact, the Mystic does remain aware of his surroundings—except that his mental processes are slowed by a factor of sixty.</p>
                        </div>
                    </div>

                    <div class="spell-entry"> 
                        <div class="spell_name">Pain Mastery</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll</div>
                        <div class="spell_origin">Origin: Khitai</div>
                        <div class="spell_rarity">Rarity: Common in Khitai, rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic focuses his mind on the higher planes, distancing himself from his physical body. For the duration of the spell, the Mystic is immune to pain, enabling him to pick up flaming brands without flinching and to take the mightiest blows with no outward sign of pain. The spell has no game effect outside of the lack of pain, and does not enable the Mystic to continue fighting below 0 Health Points. The warrior monks of Khitai use this spell as a training technique for their apprentices. A few Mystic wanderers have brought this technique to the west and have sometimes used the ability to circumvent tests for righteousness, such as plucking hot irons from the fire without flinching.</p>
                        </div>
                    </div>

                    <div class="spell-entry"> 
                        <fieldset class="repeating_spells_mystic1">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>

                <details class="spellbook">
                    <summary>Mystic Spells of Rank Two</summary>
                    
                    <div class="spell-entry"> 
                        <div class="spell_name">Darksight</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic acquires the ability to see in darkness like an Elf. That is, he can see with perfect clarity by moonlight or under a star-filled night sky, and in the pitch dark of an underworld as though it were deep twilight.</p>
                        </div>
                    </div>

                    <div class="spell-entry"> 
                        <div class="spell_name">Dazzle</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_duration">Duration: One Combat Round</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell produces a flash of brilliant light that will all but blind any sighted creature within 5m for one full Combat Round. This gives the Mystic the chance to escape from his foes or make one free strike while they are dazzled, making them -8 from defence.</p>
                        </div>
                    </div>

                    <div class="spell-entry"> 
                        <div class="spell_name">Might</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>A powerful spell for use in combat, this has the effect of increasing the Mystic’s Strength. If his normal Strength score is 15 or less, it temporarily increases to 16; if normally 16 or more, it increases to 19.</p>
                        </div>
                        <div class="spell_button">
                            <span>Activate Might Spell:</span>
                            <select name="attr_might">
                                <option value="0">Inactive</option>
                                <option value="1">Active</option>
                            </select>
                        </div>
                    </div>

                    <div class="spell-entry"> 
                        <div class="spell_name">Pursuit</div>
                        <div class="spell_duration">Duration: Lasts one day</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This enables the Mystic to follow the psychic spoor of a person or creature whom he knows or has had described to him. He may thus track his quarry over terrain of any sort, and in all weathers.</p>
                        </div>
                    </div>
                    
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell"> 
                        <div class="spell_name">Mind over Matter (Nephtu’s Arm)</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: 1 Action</div>
                        <div class="spell_origin">Origin: Kaikuhuran Desert (uncommon), rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic using this spell increases his Strength to 19 for a single action. He can use this strength to break down doors, launch a devastating attack, or any other single action he can think of. The Order of Nephtu created this spell to aid them in their sacred duty to protect the hidden tombs of the Pharaohs. This last remnant of the old Kaikuhuran tomb guards practise martial arts and battle the minions of the dark God Tenubis, who sought to cast the Pharaohs from the underworld to take their power for his own.</p>
                        </div>
                    </div>

                    <div class="spell-entry"> 
                        <fieldset class="repeating_spells_mystic2">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>   
                            </fieldset>
                    </div>
                </details>
                
                <details class="spellbook">
                    <summary>Mystic Spells of Level Three</summary>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Allseeing Eye</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This extends the Mystic’s power of vision beyond the visible spectrum, enabling him to perceive any invisible object or being within 10m. The Mystic sees the invisible shapes as featureless silhouettes.</p>
                    </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Mind Cloak</div>
                        <div class="spell_duration">Duration: lasts ten minutes</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell puts up a psionic shield around the Mystic, preventing detection by ESP, Scry or similar magical means. If the caster is being tracked by another Mystic using the Pursuit spell, this spell will cause the latter to lose his ‘scent’.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Nourish</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell ensures the Mystic need never starve when he has no food or water. A single casting provides him with refreshment and nourishment for a full day.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Telekinesis</div>
                        <div class="spell_range">Range: 25m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This is the classic parapsychic ability to move and manipulate objects at a distance by the power of the mind. The spell affects a single object of up to 0.5kg weight. The maximum velocity at which an object can be moved by Telekinesis is about 15m per Combat Round, making for a rather ineffective missile (speed 8 to dodge, and doing no appreciable damage on impact anyway). The Mystic may wield a dagger by Telekinesis, in order to melee an opponent at a distance; he would do so with half his normal attack (telekinetic control is quite clumsy) and doing 1 HP less damage for a successful blow (because there is little strength in the spell).</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Psychic Strike</div>
                        <div class="spell_range">Range: 3m</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_origin">Origin: Ancient Kaikuhuru</div>
                        <div class="spell_rarity">Rarity: Rare everywhere today due to its complexity</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic launches a combined physical and mental assault on a single target. He makes a Magical Attack against the target’s Magical Defence while at the same time launching a physical attack such as a sword blow. If the Mystic is successful with his Magical Attack, the target’s Defence is reduced to ¼ against his physical attack. The target’s Defence is otherwise unaffected.</p>
                        </div>
                        <div class="spell_button">
                            <span>Psychic Strike Spell Attack Roll:</span><button type="roll" name="attr_psychic_strike" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} unleashes a Psychic Assault}} {{subtitle=Psychic Strike}} {{spellattackroll= [[2d10]]}} {{magicalattackvsmagicaldefence= [[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <fieldset class="repeating_spells_mystic3">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>      
                        </fieldset>
                    </div>
                </details>            
                
                <details class="spellbook">
                    <summary>Mystic Spells of Level Four</summary>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Clairvoyance</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell intensifies the Mystic’s inherent paranormal senses, and so confers the ability to see anything within 5m even through solid objects. A full 360° arc of ‘vision’ is obtained, making it very difficult to take the Mystic unawares.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Enthrall</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster must match his magical attack against his target’s magical defence. If successful, this spell warps its victim’s judgement so that he believes the Mystic to be his friend. This delusion does not destroy the victim’s loyalty to his real friends, however, and neither does it make him well-disposed towards the Mystic’s companions. He will believe anything the Mystic tells him and, unless the Mystic openly attacks him, will trust him completely until the spell wears off.</p>
                        </div>
                        <div class="spell-entry">
                            <span>Enthrall Spell Attack Roll:</span><button type="roll" name="attr_enthrall" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to manipulate a mind}} {{subtitle=Enthrall}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Hidden Target</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell enables the Mystic to pick off targets with arrow, sling, or thrown dagger even if blindfolded. He ignores the usual penalties for poor visibility. Even in thick fog or if the target is invisible, the Mystic shoots as if he could see him perfectly. He must know there is someone to shoot at, though—he cannot just walk into a room and lob off a few arrows ‘on spec’ in case there should happen to be an invisible Sorcerer about.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Telepathy</div>
                        <div class="spell_range">Range: 10km</div>
                        <div class="spell_duration">Duration: lasts ten minutes</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic is able to communicate telepathically with another (who must be known to him) over considerable distances. Communication is in the form of images as well as words, so different languages need not prove an insurmountable obstacle. Note, however, that two characters from totally different cultures (a medieval wizard and an Inca priest, for instance) may be simply unable to think in the same terms.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Monkey Brother</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: 1 hour</div>
                        <div class="spell_origin">Origin: Mungoda and Khitai</div>
                        <div class="spell_rarity">Rarity: Common in Mungoda and Khitai, rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell infuses the Mystic with the essence of a monkey. For one hour the Mystic climbs as if he had a Reflexes score of 18. In addition, the Mystic can travel through forests and jungles by swinging from branch to branch, covering up to 20 km per hour in this manner. When the spell wears off, the Mystic’s Reflexes are reduced by 1 for an hour due to exhaustion and sudden unfamiliarity with his leaden human limbs.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <fieldset class="repeating_spells_mystic4">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>      
                        </fieldset>
                    </div>
                </details>

                <details class="spellbook">
                    <summary>Mystic Spells of Level Five</summary>

                    <div class="spell-entry">
                        <div class="spell_name">Force Field</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies (and see below)</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell protects the Mystic with a thin, invisible force barrier. When a blow is struck against him, the Force Field absorbs the damage and prevents it from harming him. Once it has absorbed a total of 15 HP damage, the Force Field collapses. It gives no protection from magical weapons, spells, or other forms of attack (such as flames or poisonous fumes).</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Mystic Blast</div>
                        <div class="spell_range">Range: 30m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell takes the form of a psychic force bolt. The caster must match the spell’s speed of 16 against the target’s evasion. If it strikes its target, the bolt inflicts 3d6 +1 HP damage. The target may reduce this damage by his Armour Factor, if any. (A character in mail armour would take only 3d6 –3 HP, for example.)</p>
                        </div>
                        <div class="spell_button">
                            <span>Mystic Blast Spell Attack Roll:</span><button type="roll" name="attr_mystic_blast" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} throws a Psychic Force Bolt}} {{Mystic Blast Roll = [[2d10]]}} {{speedvsevasion = [[16-?{Target's Evasion}]]}} {{Bolt Damage = [[3d6+1-?{Target's Armour Factor}]]}}"></button>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Pass Unseen</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic becomes invisible... up to a point. He can walk right past his enemies and they will not notice him. This is not as good as true Invisibility (the high-level Sorcerer variety) because he will still reflect in a mirror, and becomes visible at once if he tries to attack anybody or casts another spell. Also, the spell will only fool beings of 1st to 4th rank/rank-equivalent.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Truthsense</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>While the spell lasts, the Mystic is able to tell with 85% accuracy when someone is lying to him. That is, if a character tells him a lie, d100 is rolled. On a roll of 01-85, he knows it to be a lie. On a roll of 86-00, he is not sure one way or the other. The d100 roll is made secretly by the GamesMaster, for obvious reasons.</p>
                        </div>
                        <div class="spell_button">
                            <span>Truthsense Spell Effect Roll:</span><button type="roll" name="attr_truthsense" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} tries to sense the truth}} {{subtitle=Truthsense}} {{roll = [[1d100cs1cf100]] under 85%}}"></button>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Whisper of the Muse</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: Spell expiry roll applies</div>
                        <div class="spell_origin">Origin: Khitai and Emphidor</div>
                        <div class="spell_rarity">Rarity: Uncommon in Khitai and Emphidor, rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell provides the Mystic with amazing flashes of insight and creativity. Until the spell wears off, the Mystic becomes supernaturally creative and can tell a spell-binding, original story, recite enchanting poetry, write epic tales, or hold an audience captive with their tunes. He might also gain insight into puzzles and plots if the GM so wishes.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <fieldset class="repeating_spells_mystic5">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>     
                        </fieldset>        
                    </div>
                </details>

                <details class="spellbook">
                    <summary>Mystic Spells of Level Six</summary>
                        
                    <div class="spell-entry">
                        <div class="spell_name">Assessment</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>By means of this spell, the Mystic can instantaneously assess all characters within range and determine the following: their Profession, rank (or rank-equivalent), and current Health Points. Assessment is blocked by Mind Cloak and will not give any information about characters above 10th rank.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Purification</div>
                        <div class="spell_desc">
                        <span>Description</span><p>This spell cleanses the Mystic’s body of all ailments and poisons, and heals up to 8 Health Points if he is wounded.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Steel Claw</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster’s hand is transformed into a rigid talon of gleaming metal. When he strikes with this in combat, he uses a d12 for Armour Bypass Rolls and inflicts 8 HP damage with each successful blow.</p>
                        </div>
                        <div class="spell_button">
                            <span>Steel Claw Spell Melee Attack</span><button type="roll" name="attr_steel_claw_meleeattack" class="roll d20" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} swipes at their foe with a rigid talon of gleaming metal that was once their hand}} {{subtitle=Steel Claw Spell Melee Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[(@{finalmeleeattack}-@{magicmeleeweaponbonus})-?{Target's Defence}]]}} {{abr=[[1d12+(@{finalmeleeabrbonus}-@{magicmeleeweaponbonus})]]}} {{damage=[[8+(@{finalmeleedmgbonus}-@{magicmeleeweaponbonus})]]}}"></button>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Survival</div>
                        <div class="spell_duration">Duration: lasts one day</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic is able to endure extremes of heat and cold, such as might be experienced under a blazing desert sky or in an arctic waste. He is not protected from direct exposure to fire. Survival also enables the Mystic to go without air for up to an hour after drawing a single breath.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Fleeting Enlightenment</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_duration">Duration: Spell Expiry</div>
                        <div class="spell_origin">Origin: Unknown</div>
                        <div class="spell_rarity">Rarity: Uncommon throughout Legend</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell enables the target to cast a single first-rank Mystic spell as if he were a Mystic of rank equal to the caster. The Mystic chooses the spell the target can cast. The target can cast the spell repeatedly until he fails a fatigue roll or the duration of Fleeting Enlightenment runs out. The spells cast by the target have their own spell expiry rolls and do not fail with the Fleeting Enlightenment spell.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <fieldset class="repeating_spells_mystic6">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>   
                        </fieldset>
                    </div>
                </details>

                <details class="spellbook">
                    <summary>Mystic Spells of Level Seven</summary>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Duel</div>
                        <div class="spell_duration">Duration: see below</div>
                        <div class="spell_desc">
                            <span>Description</span><p>To use this spell, the Mystic must close in mêlée with an opponent. The spell shifts both the Mystic and his opponent out of phase with the rest of the universe; they remain visible only as a flickering, indistinct blur. Out-of-phase characters are on another plane and cannot affect (or be affected by) their surroundings. Unable to move from the spot where they ‘phased out,’ the two combatants must continue their battle until one is slain. Only then does the spell terminate, returning them—alive or dead—to the normal world.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Levitation</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies, and see below</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell allows the caster to rise up into the air and float around. Levitational movement is quite slow—only 10m per Combat Round (normal walking speed, in other words). This spell requires concentration to sustain. If the Mystic wants to enter mêlée or cast another spell, he must first cancel the Levitation.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Paralysis</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster must match his magical attack against his target’s magical defence. This spell, if it takes effect, results in paralysis of all the voluntary muscles. It will work only on a living being. The victim collapses at once but remains conscious. Another Mystic who was affected by this spell could still cast spells of his own, since Mystics need only the power of their psyche to work magic and do not rely on the chants and arcane gestures of the Sorcerer.</p>
                        </div>
                        <div class="spell_button">
                            <span>Paralysis Spell Attack Roll:</span><button type="roll" name="attr_paralysis" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to paralyse their foe}} {{subtitle=Paralysis}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Protection</div>
                        <div class="spell_duration">Duration: lasts until Dispelled, and see below</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>A potent spell that adds 2 points to the caster’s magical defence and increases his Armour Factor by 2. The caster can sustain the Protection spell indefinitely if he chooses to, but he must add +1 to the die roll whenever he makes a Psychic Fatigue Check while the Protection spell is in effect.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">One Mind</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Spell expiry roll applies</div>
                        <div class="spell_origin">Origin: Mungoda</div>
                        <div class="spell_rarity">Rarity: Common in Mungoda, rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell links the minds of everyone within range and, with eerie and silent coordination, those affected work together as if a single being. The spell is commonly used for hunting or tribal warfare. All physical actions undertaken while under the effect of the spell gain a +1 bonus for every two people in the link to a maximum of +5.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <fieldset class="repeating_spells_mystic7">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>   
                        </fieldset>        
                    </div>
                </details>

                <details class="spellbook">
                    <summary>Mystic Spells of Level Eight</summary>

                    <div class="spell-entry">
                        <div class="spell_name">Intangibility</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic and any items he is wearing or carrying become intangible. He can pass through solid objects as though they were not there. While intangible, a magical weapon is required to hit him in combat. Indirect-attack spells like Firestorm pass harmlessly through his insubstantial form, though direct-attack spells are still fully effective. The Mystic must take care when using this spell, for if it expires while he is inside a solid object he will die.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Mindpool</div>
                        <div class="spell_range">Range: 3m</div>
                        <div class="spell_duration">Duration: lasts thirty seconds (5 Combat Rounds)</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell enables two Mystics to combine their power for a brief time. With multiple castings, more Mystics can be included in the Mindpool—up to five individuals at one time. Mystics in a Mindpool each resist hostile direct-attack spells with the total magical defence of the whole group, and each casts his own spells with the highest magical attack of the group.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Swiftness</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell accelerates the caster’s metabolism and physical movements. The caster gets two actions for every one Combat Round experienced by others. The first action is taken at the start of each CR, and the second occurs at the point in the CR when he would normally act. However, the Mystic cannot cast two spells in one CR because his thinking remains at normal speed.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Trance</div>
                        <div class="spell_duration">Duration: lasts ten minutes</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic enters a trance-like state while his psychic self, or ka, is freed from his body and can travel up to five kilometres. The ka can see and hear, but is ethereal and cannot interact with or be seen by others. However, characters of equal or higher rank may sense it. Another Mystic could use Pursuit to trace the ka back to its body.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Serpent Trance</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll</div>
                        <div class="spell_origin">Origin: Unknown</div>
                        <div class="spell_rarity">Rarity: Rare throughout Legend</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic opens his mind to his enemies’ thoughts, anticipating their next attacks before they make them. This spell grants the Mystic a base +5 in Defence that applies to all attacks made against him. In addition, the Mystic takes no penalties for fighting blind or being attacked from behind.</p>
                        </div>
                        <div class="spell_button">
                            <span>This spell requires you to manually add +5 to your defence, as it applies to <i>each</i> opponent and is not divided against multiple attackers.</span> 
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_mystic8">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>   
                        </fieldset>
                    </div>
                </details>

                <details class="spellbook">
                    <summary>Mystic Spells of Level Nine</summary>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Impregnable Sphere</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic is surrounded by an invisible force bubble that blocks all physical attacks. Neither missiles, creatures, nor indirect-attack spells can pass through the Sphere. However, direct-attack spells (requiring a magical attack vs magical defence roll) are unaffected. The Sphere is stationary, and the Mystic must remain in place.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Phoenix</div>
                        <div class="spell_duration">Duration: Instant (must cast after death)</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell allows the Mystic to return from the dead if cast the Combat Round after being slain. The body burns fiercely, and after 5 Combat Rounds the Mystic rises from the ashes, fully healed but with 1 permanent HP reduction. Any equipment is destroyed, with exceptional magic items potentially surviving at the GM's discretion. This spell can only be cast once per week.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Teleport</div>
                        <div class="spell_range">Range: 100m</div>
                        <div class="spell_desc">
                        <span>Description</span><p>The Mystic can vanish and reappear at a point within 100m. He can only teleport to a location he has been to before or can see when the spell is cast.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Thunderclap</div>
                        <div class="spell_range">Range: 1m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic can blow a wall down with one shout! In fact, the shout is a focus for the immense destructive energy of the psyche. If directed at an opponent who fails to jump clear (match the spell’s speed of 12 vs the target’s evasion), the spell inflicts 6d6 +6 HP damage. Unenchanted armour gives no protection from this, and even enchanted armour absorbs only 2 HP. The Thunderclap can be used to smash a 2m-wide hole in stone walls up to half a metre thick.</p>
                        </div>
                        <div class="spell_button">
                            <span>Thunderclap Spell Attack Roll:</span><button type="roll" name="attr_thunderclap" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} releases a might shout!}} {{subtitle=Thunderclap}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[12-?{Target's Evasion}]]}} {{damage=[[6d6+6-?{Is target wearing Magical Armour?|No, 0|Yes, 2}]]}}"></button>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Quavering Voice</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_origin">Origin: Krarth and Yamato</div>
                        <div class="spell_rarity">Rarity: Uncommon in Krarth and Yamato, Rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Mystic uses his own voice to draw upon the darkest power of the mind. He begins with a humming noise that soon becomes a single clear note that can strike dead any living thing hearing it. The caster can target a single sentient living being and slay it on a successful Spell Attack Roll. Alternatively, the Mystic can target up to four non-sentient living beings to slay in place of a sentient. The spell has no effect on undead or beings like golems.</p>
                        </div>
                        <div class="spell_button">
                            <span>Quavering Voice Spell Attack Roll</span><button type="roll" name="attr_quavering_voice" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} creates a deadly reverberation using their voice}} {{subtitle=Quavering Voice}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <fieldset class="repeating_spells_mystic9">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>     
                        </fieldset>
                    </div>
                </details>
            </div>

            <div class="sorcerer_spell_list">
                <details class="spellbook">
                    <summary>Sorcerer Spells of Rank One</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Dragonbreath</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>Range: 20m This spell creates a narrow jet of flame which can be directed at a single target. If the target fails to dodgethe flame (match the spell’s speed of 12 against the target’s evasion) he takes 1d6 +6 Health Points damage. This damage roll is reduced by the target’s Armour Factor, however, so a character in plate armour would lose only 1d6 +1 HP.</p>
                        </div>
                        <div class="spell_button">
                            <span>Dragonbreath Spell Attack Roll:</span><button type="roll" name="attr_dragonbreath" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} directs searing flames at their foe}} {{subtitle=Dragonbreath}} {{spellattackroll=[[2d10]]}} {{speedvsevasion= [[12-?{Target's Evasion}]]}} {{damage= [[1d6+6-?{Target's Armour Factor}]]}}"></button>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Image</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: see below</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster can create a visual image of no greater than man-size; this is nearly perfect, and has only a 10% chance of being recognized to be an illusion. The Image is a kind of hologram, and cannot be made to move around. It will last until touched or Dispelled.</p>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Lesser Healing</div>
                        <div class="spell_range">Range: touch</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell restores 2 Health Points to a wounded character. It will not increase his Health Point score above its normal (unwounded) level, of course. Lesser Healing cannot bring a character back from the dead—such a feat is possible in the Dragon Warriors world, but more potent sorcery than this is needed!.</p>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Moonglow</div>
                        <div class="spell_duration">Duration: lasts for ten minutes</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>A circle of light 5m in radius surrounds the caster, who can dim the intensity to zero or brighten it to about the level of the full moon’s light, at will. Unlike torchlight, the illumination provided by this spell is sufficiently diffuse that it may not alert monsters lurking nearby. A party of characters using no other light source but Moonglow have a chance (the usual 1 in 6) of surprising any monster they meet.</p>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Portal</div>
                        <div class="spell_range">Range: touch</div>
                        <div class="spell_duration">Duration: see below</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell may be used in either of two ways. Open Portal will thrust open any door which could normally be forced by a character of Strength 16. The second mode of the spell, Close Portal, shuts andlocks a door magically. This form of the spell is durational, and will stay in effect until Dispelled or broken by physical force.</p>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Weaken</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>Match the caster’s magical attack vs target’s magical defence. The character on whom this spell takes effects will be weakened. He temporarily loses 2 attack points and inflicts 1 less point of damage than usual when striking in combat.</p>
                        </div>
                        <div class="spell_button">
                            <span>Weaken Spell Attack Roll:</span><button type="roll" name="attr_weaken" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to sap their opponent's strength}} {{subtitle=Weaken}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Witchbane</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_origin">Origin: Algandy</div>
                        <div class="spell_rarity">Rarity: Common in Algandy, uncommon elsewhere</div>
                        <div class="spell_replaces">Replaces: Dragonbreath for Algandish Sorcerers</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>A stream of emerald flame bursts from the Sorcerer’s fingertips to engulf a single target. This spell works on all manner of supernatural entities but has no effect on a normal human – even one trained in the black arts. If a normal human is targeted the flame washes about him leaving him unharmed, though likely terrified. If the spell hits a supernatural being (Speed 12 versus the targets Evasion), the target suffers 1d6+6 damage reduced by its Armour Factor. This spell prevents a Sorcerer from being a threat to a knightly warrior while making them an excellent tool for rooting out “evil beings”.</p>
                        </div>
                        <div class="spell_button">
                            <span>Witchbane Spell Attack Roll:</span><button type="roll" name="attr_witchbane" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} blasts emerald flames from their fingertips}} {{subtitle=Witchbane}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[12-?{Target's Evasion}]]}} {{damage=[[1d6+6-?{Target's Armour Factor}]]}}"></button>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Bedevil</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Permanent</div>
                        <div class="spell_origin">Origin: Algandy</div>
                        <div class="spell_rarity">Rarity: Common throughout Legend</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Sorcerer casts this spell on a single tool, weapon, or implement. The target can be no larger than a small cart or plough. The spell causes the item to attempt to thwart any action a user tries to undertake with it. For example, a compass will give false readings, a hammer might strike a thumb, and a saddle might become undone. The spell rarely causes serious injuries but, for example, using a bedevilled rope to climb a mountain can be suicidal. The spell remains until the Sorcerer removes the spell or a Dispel Magic spell is cast on the item. Any Sorcerer who knows this spell can cast a “counter curse” on a bedevilled item.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <fieldset class="repeating_spells_sorcerer1">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>     
                        </fieldset>
                    </div>    
                </details>
                        
                <details class="spellbook">
                    <summary>Sorcerer Spells of Level Two</summary>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Detect Aura</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell enables the caster (or another on whom he casts the spell) to see the supernatural aura which surrounds enchanted beings and objects.</p>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Hold Off the Dead</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell creates a zone around the caster, 2m in radius, which affects Undead whose rank-equivalent does not exceed the caster’s rank. If such Undead enter the zone, they are immediately subject to a magical attack (match the caster’s magical attack against the Undead’s magical defence). If successful, the spell prevents them from approaching the caster as long as the enchantment lasts.</p>
                        </div>
                        <div class="spell_button">
                            <span>Hold Off the Dead Spell Effect Roll: (roll when an Undead attempts to enter the area of effect)</span><button type="roll" name="attr_hold_off_the_dead" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title= An undead foe attempts to enter @{character_name}'s zone of protection}} {{subtitle=Hold Off The Dead}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Inflict Wound</div>
                        <div class="spell_range">Range: 3m</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>Match the caster’s magical attack against the target’s magical defence. If successful, this inflicts a wound of 5 Health Points on the victim. Armour provides no protection against this damage.</p>
                        </div>
                        <div class="spell_button">
                            <span>Inflict Wound Spell Attack Roll:</span><button type="roll" name="attr_inflict_wound" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title= @{character_name} assaults their target with magic}} {{subtitle=Inflict Wound}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{damage=5}}"></button>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Peer</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies, and see below</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>When this spell is cast, the Sorcerer specifies any point within the spell’s range (e.g. “14m due north of me”, “5m straight down”, etc.). He is then able to see anything that is happening within 3m of the specified point as though he were standing there. The spell is not hampered by intervening walls or floors unless these are made of metal; more than 2cm thickness of metal will block a Peer spell. The spell will expire immediately if the caster moves around while it is operating.</p>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Tangleroots</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell affects one target, causing a tangle of magical creepers to sprout out of the ground and ensnare his legs. If the target fails to leap clear (match spell’s speed of 14 vs target’s evasion) then he is caught and immobilized. With an edged weapon it is possible to cut oneself free within 2–8 Combat Rounds (roll 2d4); beings of great strength (Strength 16 or more) will be able to pull free of the roots in only 1–3 rounds, and animals such as Wolves will take 2–12 rounds to claw and chew through the roots. This spell is commonly used either to hold any enemy while trying to escape from him or to prevent him evading a more devastating follow-up spell.</p>
                        </div>
                        <div class="spell_button">
                            Tangleroots Spell Attack Roll<button type="roll" name="attr_spell_name" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} summons roots and vines to tangle their enemies}} {{subtitle=Tangleroots}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[14-?{Target's Evasion}]]}} {{desc=Target can free themself in: ?{Method of escape|Cut free, [[2d4]] rounds|Pull free (Str 16 or higher), [[1d3]] rounds|Claw and chew, [[2d6]] rounds}}}"></button>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Warding</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>Warding enhances the Sorcerer’s luck in combat. Any character attempting a Hit Roll against him, whether in mêlée or with a missile weapon, must add 2 to the d20 score.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Echoes of Spyte</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_origin">Origin: Krarth</div>
                        <div class="spell_rarity">Rarity: Uncommon in Krarth and rare outside of that foul land</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>When cast, the Sorcerer must pick a point anywhere within 20m of where he stands. Until the spell expires or is cancelled, the Sorcerer hears everything as if he were standing at that point. This spell was used by the Krarth Magi of old to spy upon their rivals and enemies. Following the Blasting of Spyte, the remaining apprentices carried this spell out of the ruins, teaching it to their followers and spies as needed.</p>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_sorcerer2">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>   
                        </fieldset>
                    </div>    
                </details>
                    
                <details class="spellbook">
                    <summary>Sorcerer Spells of Level Three</summary>
                
                    <div class="spell-entry">
                        <div class="spell_name">Banquet</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>Enough food and drink is created to provide one meal for five people. The food is nourishing but—despite the spell’s appetising name—rather bland. Few would care to eat it if they had a choice; but when adventurers are starving they will fall upon Banquet fare enthusiastically enough!</p>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Beacon</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>If any invisible object or being is within range when Beacon is cast, the spell causes a glowing ball of green light to appear just above it. This light will move as the invisible object/being moves, thus marking out its location.</p>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Command</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>A successful casting of this spell (match caster’s magical attack vs target’s magical defence) brings the victim (who must be of 1st–3rd rank) under the Sorcerer’s control. He will then do whatever the caster tells him to do. Commanded beings do not become mindless slaves; they retain their normal intelligence and ability to reason, and are thus capable of following quite complex orders. Language barriers may be a problem—if the victim cannot understand what his ‘master’ is saying to him then he will simply act in what he believes to be his master’s best interests.</p>
                        </div>
                        <div class="spell_button">
                            <span>Command Spell Attack Roll:</span><button type="roll" name="attr_command" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title= @{character_name} speaks in a magically Commanding voice}} {{subtitle=Command}} {{spellattackroll= [[2d10]]}} {{magicalattackvsmagicaldefence= [[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Greater Healing</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>A more powerful version of Lesser Healing. It restores 7 Health Points to the recipient, with the same provisos as for the level-one spell (p. 80).</p>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Illusion</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell creates an illusion no greater than two cubic metres in volume. This differs from an Image in two ways; the Illusion will move as the caster wishes, and it fools not just sight but the other natural senses as well. There is thus very little chance of distinguishing an Illusion from the real thing; even a rigorous examination gives only a 5% chance of this. If he wishes, the Sorcerer can cast Illusion over a character (himself included) in order to provide a near-perfect disguise. When overlapped in this way, the Illusion must be equal in at least one linear dimension to the thing it is covering. A man could thus be covered by the Illusion of a 2m-long snake, but not by the Illusion of a gnat. It is important to remember that Illusions exist only in the minds of those who behold them. An Illusion could not cast a spell, inflict a wound, carry treasure, open doors, or in any other way affect the real world.</p>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Wolfcall</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell is usable only out-of-doors—in moorland, woods, and dense forest, the wild places where Wolves hunt. It summons one Wolf (see p. 253) to the caster’s side to fight for him. The Wolf will arrive 2–12 Combat Rounds after the spell is cast and will then remain until the spell wears off. The Sorcerer does not start making Spell Expiry Rolls until the Wolf turns up. (A note for the literal-minded: there does not actually have to be a Wolf nearby for Wolfcall to work. The Wolf may in fact be brought across miles of countryside in barely a minute, by the working of the Sorcerer’s magic.)</p>
                        </div>
                        <div class="spell_button">
                            <span>Wolfcall Time to Arrival:</span><button type="roll" name="attr_wolfcall" class="roll d6" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title= @{character_name} calls for a Lupine ally}} {{subtitle=Wolfcall}} {{roll= The Wolf arrives in [[2d6]] rounds}}"></button>
                            <details>
                              <summary>Wolf Stats</summary>
                              <ul>
                                <li>Attack: 15 <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} orders their Wolf to attack}} {{subtitle=Wolf Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[15-(?{Enemy Defence|0})]]}} {{abr=[[1d4]]}} {{Damage=[[5]]}} {{desc=}}" name="attr_wolfcall_attack"></button></li>    
                                <li>Weapon: Fangs (d4, 5 points)</li>
                                <li>Defence: 3</li>
                                <li>Armour Factor: 0</li>
                                <li>Evasion: 3</li>
                                <li>Magical Defence: 1</li>
                                <li>Health Points: 1d6+4</li>
                                <li>Movement: 12m (25m)</li> 
                                <li>Stealth: 16</li>
                                <li>Perception: 11</li>
                              </ul>
                            </details>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Summon Lesser Djinn</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll</div>
                        <div class="spell_origin">Origin: Ta’ashim lands</div>
                        <div class="spell_rarity">Rarity: Common in Ta’ashim lands, rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Sorcerer calls upon the power of the seven great Djinn sultans to summon one of their lesser servants; a whirling cloud of sand about half the size of a man. This lesser Djinn can do anything a normal human can, such as serving food, opening doors, carrying, and lifting. The Djinn cannot attack and, being a cloud of sand and air, is immune to non-magical damage. A few northerners have managed to learn the secrets of this spell and it can be found from time to time in the hands of well-travelled Sorcerers. Those who frequently abuse the sultan’s servants (for example by getting them to open obviously trapped doors all the time) may feel the wrath of the Djinn lords.</p>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_sorcerer3">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>
                    
                <details class='spellbook'>
                    <summary>Sorcerer Spells of Level Four</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Antidote</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This reduces the potency of poisons or drugs in a character’s bloodstream. A poison which normally requires a 3d6 roll compared to the character’s Strength (see p. 122 in Chapter 11) is reduced to one which requires a 2d6 roll, etc. The spell must be applied within one Combat Round (six seconds) of the character being poisoned. It does not reverse any damage or other effects already caused by the poison.</p>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Curse</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell affects up to four beings (roll 1d4), cursing them with bad luck if it is successful (match caster’s magical attack vs target’s magical defence). Cursed beings must adjust all their die rolls by 2 so as to make them less favourable—i.e., +2 to the die score when making a Hit Roll, –2 when making an Armour Bypass Roll, etc.</p>
                        </div>
                        <div class="spell_button">
                            <span>Curse Number of Targets:</span><button type="roll" name="attr_curse" class="roll d4" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title= @{character_name} spits curses at their foes}} {{subtitle=Roll 1d4 for number of targets affected}} {{roll=[[1d4]]}}"></button>
                            <span>Curse Spell Attack Roll:</span><button type="roll" name="attr_curse_magical_attack" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name}'s curse attacks its target'}} {{subtitle=Curse}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Targets Magical Defence}]] }}"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Disease</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_duration">Duration: lasts until Dispelled</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A single living being may be afflicted with a rotting disease (match caster’s magical attack vs target’s magical defence). The victim loses 2 Health Points every Combat Round until cured or dead.</p>
                        </div>
                        <span>Disease Spell Attack Roll:</span><button type="roll" name="attr_disease" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title= @{character_name} attempts to magically infect their foe}} {{subtitle=Disease}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{damage=2 Health Points per round until cured}}"></button>
                        
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Oracle</div>
                        <div class="spell_duration">Duration: lasts for one minute</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Sorcerer attunes himself to the spirit world and is able to ask up to three questions. The questions must be phrased in such a way that they can be answered by a yes or a no. The spirits have a 75% chance of knowing the answer to any question they are asked. (The GamesMaster rolls d100. On 01–75 they know the answer; on rolls of 76–00 they don’t.) If they do not know the answer to a question, or if the question is worded vaguely, the spirits will give a random answer (roll d6: 1–3 = yes, 4–6 = no), and they will then stick to that answer if asked the same question again. The spirits can speak only of events concerning the past and present. They cannot see into the future, nor answer questions which concern a character’s thoughts and motives.</p>
                        </div>
                        <div class="spell_button">
                            <span>Spirit Knowledge Effect Roll:</span><button type="roll" name="attr_oracle_chance" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} asks the oracles of the spirit world for answers}} {{subtitle=Oracle}} {{roll=[[1d100cs1cf100]] vs 75%}} {{desc=Spirit's false response: [[1d6]] (1–3 = yes, 4–6 = no)}}"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Shadowbolt</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Causes an ebon bolt of energy to shoot from the caster’s hand to strike a single being. If the bolt hits (match spell’s speed of 14 vs target’s evasion), it does 2d6+10 HP damage. The damage roll is reduced by a number equal to the target’s Armour Factor, if any (see the Dragonbreath spell on p. 89).</p>
                        </div>
                        <div class="spell_button">
                            <span>Shadowbolt Spell Attack Roll:</span><button type="roll" name="attr_shadowbolt" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} casts Shadowbolt}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[14-?{Target's Evasion}]]}} {{damage=[[2d6+10-?{Target's Armour Factor}]]}}"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Wall of Magic</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies, and see below</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster—or another on whom he casts the spell—is surrounded by a protective zone that will block enemy spells. The caster may expend as many points as he likes when casting the Wall of Magic (down to a minimum of 4 MP), and this is the number of Magic Points the Wall will absorb from spells cast into it. Once it has absorbed its Magic Point limit, the Wall collapses. Wall of Magic blocks only direct-attack spells, however—i.e. those that involve a magical attack vs magical defence roll. Indirect-attack spells such as Shadowbolt are unaffected. If the Wall collapses without having absorbed all the Magic Points from an incoming spell, the spell still has a chance of taking effect but the attacking Sorcerer or Mystic must adjust his attack die roll by the difference between the number of MPs left in the spell and the spell’s level.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Udjat</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll</div>
                        <div class="spell_origin">Origin: Kaikuhuru</div>
                        <div class="spell_rarity">Rarity: Rare everywhere due to its obviously pagan effect.</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Upon casting this spell, a golden, glowing, eye-shaped glyph appears on the Sorcerer’s forehead. The spell increases the Sorcerer’s Psychic Talent and Intelligence to 16 or raises a score of 16-17 to 18. The Sorcerer gains all the associated bonuses for having these characteristics.</p>
                        </div>
                        <div class="spell_button">
                            <span>Activate Udjat Spell:</span>
                            <select name="attr_udjat">
                                <option value="0">Inactive</option>
                                <option value="1">Active</option>
                            </select>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_sorcerer4">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>

                <details class="spellbook">
                    <summary>Sorcerer Spells of Level Five</summary>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Banish</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_duration">Duration: Lasts until Dispelled</div>
                        <div class="spell_desc">
                            <span>Description</span><p>For this spell to take effect, the caster must actually touch his intended victim in the Combat Round following that in which he cast the spell. This means that the caster must make a successful Hit Roll on his opponent—though no Armour Bypass Roll is needed, as it is sufficient that he merely touch the opponent’s clothing or armour. If the spell takes effect (match caster’s magical attack vs target’s magical defence) the victim is banished to limbo, and can only be freed at the caster’s whim or if a Dispel Magic (see p. 84) is cast at the spot where the victim disappeared. A Sorcerer can communicate in his dreams with those he has banished, and will usually find them quite eager to barter information and secrets in return for a promise of freedom from limbo.</p>
                        </div>
                        <div class="spell_button">
                            <span>Banish Melee Attack Roll: (does not need to bypass armour)</span> <button type="roll" name="attr_banishtouch" class="roll d20" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} attempts to Banish their foe to Limbo}} {{subtitle=Melee Attack to Banish target}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[@{finalmeleeattack}-?{Target's Defence}]]}}"></button>
                            <span>Banish Spell Attack Roll:</span> <button type="roll" name="attr_banishattempt" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to Banish their foe to Limbo}} {{subtitle=Magical Attack to Banish target}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Divination</div>
                        <div class="spell_duration">Duration: Lasts one minute</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A modification of the Oracle spell which enables the caster to ask a question even if the answer is not a simple yes/no. Only one question may be asked, and there is still the same limit (75%) on accuracy. The spirits will often answer in the form of a rhyme, riddle, or obscure clue—the GM is urged to be inventive and evasive! A Sorcerer may not cast more than one Divination in a single day.</p>
                        </div>
                        <div class="spell_button">
                            <span>Divination Spell Effect Roll: (to be rolled by GM)</span><button type="roll" name="attr_divination_chance" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} asks the oracles of the spirit world for answers}} {{subtitle=Oracle}} {{roll=[[1d100cs1cf100]] vs 75%}} {{desc=The spirits will often answer in the form of a rhyme, riddle, or obscure clue. A Sorcerer may not cast more than one Divination in a single day.}}"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Fossilize</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Lasts until Dispelled</div>
                        <div class="spell_desc">
                            <span>Description</span><p>If the spell is successful (match caster’s magical attack vs target’s magical defence), one being is turned to stone, along with anything he is wearing or carrying. Fossilize has no effect on Gargoyles (their bodies are made of rock in the first place) nor, for obvious reasons, on non-corporeal creatures such as Spectres.</p>
                        </div>
                        <div class="spell_button">
                            <span>Fossilize Spell Attack Roll:</span> <button type="roll" name="attr_fossilize" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} tries to turn their foe to stone}} {{subtitle=Fossilize}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Mantlet</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This highly useful spell surrounds the caster with an enchanted zone 3m in radius. Any arrow, quarrel, slingshot or other missile entering this zone will fall harmlessly to the ground. Magical or extremely large (more than 20kg) projectiles are not impeded by the spell, however.</p>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Reanimate the Dead</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Using this necromantic spell, the Sorcerer can raise up to six (roll 1d6) dead Humans, Elves or Dwarves as Zombies (see p. 253) under his control. Zombies, having only limited intelligence, will not be able to comprehend complex instructions—the Sorcerer must limit his commands to four words or less.</p>
                        </div>
                        <div class="spell_button">
                            <span>Reanimate the Dead Number of Undead Summoned:</span><button type="roll" name="attr_reanimate_the_dead" class="roll d6" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} raises the dead as Zombies}} {{Number of Zombies raised=[[1d6]]}}"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Transfix</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies (and see below)</div>
                        <div class="spell_desc">
                            <span>Description</span><p>If the caster is successful (match caster’s magical attack vs target’s magical defence) then 2-8 beings (roll 2d4 for the number affected) suffer a ‘brainstorm’ which causes them to stop what they are doing and stand passively until the spell wears off. Afterwards, they will be unable to remember anything that happened while the spell was in effect or in the two Combat Rounds just before it was cast. If a Transfixed character is attacked, the spell is immediately broken.</p>
                        </div>
                        <div class="spell_button">
                            <span>Transfix Number of Targets:</span> <button type="roll" name="attr_transfix_targets" class="roll d4" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} sends Magical static into the minds of their targets}} {{Number of targets=[[2d4]]}}"></button>
                            <span>Transfix Spell Attack Roll:</span> <button type="roll" name="attr_transfix_attack" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name}'s Transfix spell magically attacks its target}} {{subtitle=Transfix}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Mask of Tooth and Claw</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: 5 Minutes then Spell Expiry Roll applies</div>
                        <div class="spell_origin">Origin: Mungoda</div>
                        <div class="spell_rarity">Rarity: Uncommon in Mungoda and parts of Mercanian Coast, rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>By donning a carved wooden tiger mask the caster transforms into a sabre-tooth tiger. This grants the Sorcerer the physical aspects of the tiger like its vision, attacks, and movement speed. The spell does not change the caster’s other attributes, but does prevent him from speaking and casting spells. The spell is uncommon now and considered barbarous and uncouth by more “civilized” Sorcerers.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Mask of Feather and Talon</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: 5 Minutes then Spell Expiry Roll applies</div>
                        <div class="spell_origin">Origin: Mungoda</div>
                        <div class="spell_rarity">Rarity: Uncommon in Mungoda and parts of Mercanian Coast, rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Sorcerer dons a stylized bird of prey mask, transforming into a raptor. The Sorcerer retains his normal attributes but gains the physical shape, size, and flight ability of a bird. Normal birds can sense the magic and flee from the Sorcerer while he is in this form.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Lugh’s Spear</div>
                        <div class="spell_range">Range: 2m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll</div>
                        <div class="spell_origin">Origin: Ellesland/Mungoda</div>
                        <div class="spell_rarity">Rarity: Uncommon in Ellesland and Mungoda, rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell summons forth a spear of white ash with a copper head. Eldritch fire dances around the spear’s tip. The spear hovers beside and moves with the caster, automatically attacking any being within 2 meters, friend or foe. The spear can make one attack per round with an Attack of 22 (1d8, 5). The spear counts as a magical weapon. If the spear is struck in combat (Defence 23), it vanishes immediately. This spell was common among the early tribes of Albion but fell out of common use as most of Albion’s native Sorcerers died on the end of a legionnaire’s sword. In a strange case of parallel development, this spell has been seen among witchdoctors in Mungoda, where it is known as Ghost Assegai.</p>
                        </div>
                        <div class="spell_button">
                            <span>Lugh's Spear Melee Attack:</span><button type="roll" class="roll d20" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=Lugh's Spear strikes at the @{character_name}'s foe}} {{subtitle=Lugh’s Spear Spell Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[22-(?{Enemy Defence|0})]]}} {{abr=[[1d8]]}} {{Damage=[[5]]}} {{desc=}}" name="attr_lughs_spear"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_sorcerer5">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>        
                </details>
                    
                <details class="spellbook">
                    <summary>Sorcerer Spells of Level Six</summary>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Armour</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The spellcaster becomes encased in jet-black plate armour with an Armour Factor (AF) of 6. It does not hinder spellcasting, and any clothing or armour the caster is already wearing is transformed. This spell cannot be stacked with other armours to increase AF.</p>
                        </div>
                        <div class="spell_button">
                            <span>Activate Armour spell:</span>
                            <select name="attr_armour_spell">
                                <option value="0">Inactive</option>
                                <option value="1">Active</option>
                            </select>    
                        </div>
                    </div>
                    
                    
                    
                    <div class="spell-entry">
                        <div class="spell_name">Cure Disease</div>
                        <div class="spell_range">Range: 1m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell cleanses the target of all illnesses, whether natural or supernatural in origin. Damage already suffered as a result of the disease is not healed.</p>
                        </div>
                    </div>
                                        
                    <div class="spell-entry">
                        <div class="spell_name">Dishearten</div>
                        <div class="spell_range">Range: 30m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>If cast successfully (match caster’s magical attack vs target’s magical defence), this spell causes the victim’s heart to explode, killing them instantly. It has no effect on Undead or creatures without a heart. If it fails, the target still suffers 1d4 HP of damage.</p>
                        </div>
                        <div class="spell_button">
                            <span>Dishearten Spelll Attack Roll:</span> <button type="roll" name="attr_dishearten" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title= @{character_name} sends their victim's heart racing}} {{subtitle=Dishearten}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                            <span>Dishearten Spell Fail Damage: (the target takes damage even if the spell is unsuccessful)</span> <button type="roll" name="attr_dishearten_fail" class="roll d4" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title= @{character_name}'s victim's heart is strained, despite the spell failing to kill them}} {{subtitle=Dishearten fail effect}} {{roll=[[1d4]] damage}}"></button>
                        </div>
                    </div>
                                        
                    <div class="spell-entry">
                        <div class="spell_name">Dispel Magic</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell ends any durational spells within its range, provided the spells being dispelled cost fewer Magic Points than the Dispel Magic. It affects both enemy and caster's own spells.</p>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Phantasm</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Sorcerer summons an ectoplasmic creature. The creature’s form may vary but always has fixed abilities: magical defence of 8, evasion of 5, AF 4, 4-24 Health Points (roll 4d6), and attack/defence values summing to 28. It moves at a rate based on its appearance, with 10m/round for human-like forms.</p>
                        </div>
                        <div class="spell_button">
                            <details>
                                <summary>Phantasm Stats</summary>
                                <ul>
                                    <li>Attack: <input type="number" name="attr_phantasm_attack" value="14" min="0" max="28"><button type="roll" class="roll d20" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name}'s Phantasm strikes out}} {{subtitle=Spell Phantasm Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[@{phantasm_attack}-(?{Enemy Defence|0})]]}} {{abr=[[1d10]]}} {{Damage=[[5]]}} {{desc=}}" name="attr_phantasm"></button></li>
                                    <li>Weapon: Ectoplasmic Strike (1d10, 5)</li>
                                    <li>Defence: <input type="number" name="attr_phantasm_defence" value="14" min="0" max="28"></li> 
                                    <li>Armour Factor: 4</li>
                                    <li>Evasion: 5</li>
                                    <li>Magical Defence: 8</li>
                                    <li>Health Points: 4-24 (4d6)</li> 
                                    <li>Stealth: (@{stealth})</li> 
                                    <li>Perception: (@{perception})</li> 
                                    <li>Movement: <input type="number" name="attr_phantasm_movement" value="10"> m/round (based on form)</li> 
                                </ul>
                              <p><i>Note: Attack and Defence values must sum to 28.</i></p> 
                            </details>
                        </div>
                    </div>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Sword of Damocles</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Until activated</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A glowing sword appears above the target, following them until the caster commands it to strike. Unless dodged (match its speed of 17 vs the target's evasion), it deals 4d6 HP damage on a successful hit. The sword vanishes after its attack.</p>
                        </div>
                        <div class="spell_button">
                            <span>Sword of Damocles Spell Attack Roll:</span><button type="roll" name="attr_sword_of_damocles" class="roll twod10" value="&{template:custom2d10} {{title=@{character_name} casts Sword of Damocles}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[17-?{Target's Evasion}]]}} {{damage=[[4d6]]}}"></button>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Ushabti</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll or 1 hour</div>
                        <div class="spell_origin">Origin: Ancient Kaikuhuran spell</div>
                        <div class="spell_rarity">Rarity: Rare</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Sorcerer touches a pre-prepared stone figurine (Ushabti), transforming it into a servant or bodyguard. The duration depends on the figurine used. A warrior figurine creates a guardian who vanishes upon a Spell Expiry Roll. A worker figurine produces a non-combat servant that lasts one hour. In both cases, the Ushabti reappears undamaged after the spell expires.</p>
                            <p>The tombs of ancient Kaikuhuran magi are filled with various forms of Ushabti, including animals and objects. Some tomb robbers claim to have discovered greater Ushabti spells in these tombs.</p>
                        </div>
                        <div class="spell_button">
                            <details>
                                <summary>Ushabti Guardian</summary>
                                <ul>
                                    <li>Attack: 20 <button type="roll" name="attr_ushabti" class="roll d20" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name}'s Ushabti Warrior strikes with a sword}} {{subtitle=Ushabti Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence= [[20-?{Target's Defence Score}]]}} {{abr=[[1d8]]}} {{Damage=[[3]]}}"></button></li>
                                    <li>Weapon: Shortsword (d8, 3)</li>
                                    <li>Defence: 15</li>
                                    <li>Armour Factor: 4 (Stone)</li> 
                                    <li>Evasion: 3</li>
                                    <li>Magical Defence: 10</li> 
                                    <li>Stealth: 9</li>
                                    <li>Perception: 7</li>
                                    <li>Health Points: 20</li> 
                                </ul>
                            </details>
                        </div>                      
                    </div>
                    
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_sorcerer6">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>     
                        </fieldset>
                    </div>
                </details>
                    
                <details class="spellbook">
                    <summary>Sorcerer Spells of Level Seven</summary>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Deathlight</div>
                        <div class="spell_range">Range: 40m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A very powerful bolt of energy leaps from the caster’s hands, forking to strike 1-4 beings (match spell’s speed of 16 vs targets’ evasion). A being failing to evade takes 3d6+10 HP damage (reduced by Armour Factor, if any).</p>
                        </div>
                        <div class="spell_button">
                            <span>Deathlight Number of targets:</span> <button type="roll" name="attr_deathlight_targets" class="roll d4" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} unleashes a powerful bolt of light, which forks out}} {{subtitle=Deathlight}} {{roll= The spell streaks toward[[1d4]] target/s}}"></button>
                            <span>Deathlight Spell Attack Roll:</span> <button type="roll" name="attr_deathlight" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name}'s spell strikes at the targets around them}} {{subtitle=Deathlight}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[16-?{Target's Evasion|0}]]}} {{damage=[[3d6+10-?{Target's Armour Factor}]]}}"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Enslave</div>
                        <div class="spell_range">Range: 30m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This powerful variant of the Command spell affects a single being of any rank. A successful casting (match caster’s magical attack vs target’s magical defence) renders the victim completely subservient to the Sorcerer’s will. The victim becomes an unthinking slave, obeying only the Sorcerer’s direct commands. Language barriers are no issue; the victim will always understand instructions but follows them literally, which can sometimes lead to unexpected outcomes. Issuing or changing orders takes one Combat Round.</p>
                        </div>
                        <div class="spell_button">
                            <span>Enslave Spell Attack Roll</span><button type="roll" name="attr_enslave" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} focuses on binding the target's will to their own}} {{subtitle=Enslave}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]] }}"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Nova</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Myriad beams of searing light shoot from the caster’s body in all directions. Any being within 5m who fails to evade (match spell’s speed of 18 vs targets’ evasion) is struck by 1-3 beams (roll 1d6: 1-2 = 1 beam, 3-4 = 2 beams, 5-6 = 3 beams). Each beam inflicts 3d8 HP damage, reduced by Armour Factor.</p>
                        </div>
                        <div class="spell_button">
                            <span>Nova Spell Attack Roll:</span> <button type="roll" name="attr_nova_attack" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} launches a myriad of searing beams in all directions}} {{subtitle=Nova Attack}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[18-?{Target's Evasion}]]}}"></button>
                            <span>Nova Spell Damage Roll: (roll once for each target)</span> <button type="roll" name="attr_nova_damage" class="roll d8" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name}'s Nova beams strike and burn}} {{subtitle=Nova Damage}} {{Number of Beams=[[1d3]]}} {{Damage per beam=1: [[3d8-?{Target's Armour Factor}]] 2:[[3d8-?{Target's Armour Factor}]] 3:[[3d8-?{Target's Armour Factor}]] }}"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Spell Screen</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell creates a defensive enchantment around the Sorcerer that protects from direct-attack spells (those involving a magical attack vs magical defence roll). The Spell Screen reduces any attacking spell by 5 Magic Points (MPs). The strength of the Spell Screen does not diminish over time. Casting multiple Spell Screens does not provide additional protection. If overlapped with a Wall of Magic, spells affect the Wall first, then the Screen. The Spell Screen only protects the caster and not external objects or weapons they carry.</p>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Stasis</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Until Dispelled</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster can ‘freeze’ 1-3 victims in time (match caster’s magical attack vs target’s magical defence). Frozen characters cannot think, act, move, or be harmed in any way. They remain in stasis until the spell is dispelled.</p>
                        </div>
                        <div class="spell_button">
                            <span>Stasis Spell Attack Roll:</span><button type="roll" name="attr_stasis" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to freeze their target in time}} {{subtitle=Stasis Spell Attack}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <div class="spell_name">Vorpal Blade</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster summons a magical sword as black as midnight, surrounded by green fire. This weapon grants the Sorcerer a +3 bonus to attack and defence while wielding it. It deals 1d8 +3 Armour Bypass and 7 HP damage on a successful hit. If the caster puts down the weapon, it vanishes immediately. If offered to another, it strikes the Sorcerer once and disappears forever.</p>
                        </div>
                        <div class="spell_button">
                            <span>Vorpal Blade Spell Melee Attack:</span><button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} attacks with a magical sword as black as midnight, surrounded by green fire.}} {{subtitle=Vorpal Blade Melee Attack}}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[(@{finalmeleeattack}-@{magicmeleeweaponbonus}+3) -(?{Enemy Defence|0})]]}} {{abr=[[1d8+3+(@{finalmeleeabrbonus}-@{magicmeleeweaponbonus})]]}} {{Damage=[[7+(@{finalmeleedmgbonus}-@{magicmeleeweaponbonus})]]}} {{desc=This weapon grants the Sorcerer a +3 bonus to attack and defence while wielding it (please manually adjust defence). If the caster puts down the weapon, it vanishes immediately. If offered to another, it strikes the Sorcerer once and disappears forever. }}" name="roll_vorpal_blade_meleeattack"></button>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Shoulders of the Colossus</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll</div>
                        <div class="spell_origin">Origin: Ancient Emphidor</div>
                        <div class="spell_rarity">Rarity: Uncommon everywhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell causes the person touched to grow until they reach 4m in height. The character gains 19 Strength for the duration of the spell. Their possessions grow proportionally, and any armour gains a +2 bonus to AF due to the thickening effect. This spell is useful for reaching high spaces, terrifying or impressing others, or crossing long distances quickly (Movement 15m (30m)). This spell can be cast on an unwilling target by making a standard Magical Attack versus the target’s Magical Defence.</p>
                        </div>
                        <div class="spell_button">
                            <span>Shoulders of the Colossus Spell Attack Roll: (when cast at an unwilling target)</span> <button type="roll" name="attr_shoulders_of_the_colossus" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to bend a person's form against their will}} {{subtitle=Shoulders of the Colossus}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>
                        
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_sorcerer7">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>   
                        </fieldset>
                    </div>
                </details>
                    
                <details class="spellbook">
                    <summary>Sorcerer Spells of Level Eight</summary>
                
                    <div class="spell-entry">
                        <div class="spell_name">Astral Gate</div>
                        <div class="spell_duration">Duration: See below</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A shimmering portal, a rent in the very fabric of space itself, is created in front of the caster. This portal leads to any place the caster wishes to reach (not more than 150km away), allowing characters to cross this distance in the blink of an eye. The intended destination should be a spot which the caster knows reasonably well. If he is trying to reach a place he has only seen once, the caster has a 40% chance of ‘missing’ by up to a hundred metres (roll d100 for the distance out and d8 for direction—1 = north, 2 = northeast, 3 = east, etc). If aiming for a destination he has never seen, and is guided only by another’s account, the caster has a 50% chance of missing by up to a kilometre.</p>
                            <p>The Astral Gate will teleport only living beings and whatever they are wearing or carrying. It is not possible to lob a Shadowbolt through first, to take care of anyone at the far end! As each character passes through the Gate, a d6 is rolled. On a roll of 6, the spell expires. A Sorcerer must take three Combat Rounds to visualize his intended destination before casting Astral Gate. Unless he takes this precaution, there is a 60% chance that the far end of the Gate will emerge onto another plane of reality, and any character passing through will then be lost forever.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Bastion</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Motes of glittering light spread from the caster’s hands and rapidly spread, ‘painting’ a surface in the air as they do. Within a second, an impenetrable steel-grey barrier has been created. This barrier has a maximum surface area of some 25 square metres, and may be made to form a hemisphere roughly 4m across (within which the Sorcerer may shelter while healing himself or casting more defensive spells) or a wall (blocking a dungeon corridor, perhaps, while the caster and his companions speed away from their foes).</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Burden</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Cast at an area of ground, the Burden spell causes the pull of gravity to become so overwhelmingly strong that any being standing there will fall down and be unable to move until the spell expires. Very large creatures fare no better than smaller and weaker ones: “the bigger they are...” The spell affects a circular area up to 5m across, extending upwards into the air no more than 3m. (It is not much use, therefore, against a flying creature.) The caster’s enemies have a chance to jump clear when he casts the spell, and this is represented by matching the spell’s speed of 16 against their evasion scores. No such opportunity is available to those who blunder into the zone once the spell has taken effect, however; they are remorselessly pulled to the ground.</p>
                        </div>
                        <div class="spell_button">
                            <span>Burden Spell Attack Roll:</span> <button type="roll" name="attr_burden" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} increases gravity in their immediate vicinity}} {{subtitle=Burden}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[16-?{Target's Evasion}]]}}"></button>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Destrier</div>
                        <div class="spell_duration">Duration: See below</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This conjuration is usable only at night or in the lightless depths of an underworld, as it summons a demonic Warhorse which is driven back to its fey world by the rays of the dawn. It will also vanish at once if the Sorcerer dismounts. The Destrier is a sere black steed clad in tarnished silver armour; its eyes burn with an emerald light. Any seeing it will know it to be a faerie beast, and characters of 1st–3rd rank subtract 1 from attack when fighting it. The Destrier can carry its master across a hundred kilometres of open country or woodland in a single night. It is fierce and terrible in battle.</p>
                            <p>Note that it is only by this spell that a Sorcerer can ride a Warhorse. Normal Warhorses are available only to Knights, Barbarians and Warlocks.</p>
                        </div>
                        <div class="spell_button">
                            <details>
                              <summary>Destrier Stats</summary>
                              <ul>
                                <li>Attack: 17 <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name}'s Destrier attacks}} {{subtitle=Warhorse Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[17-(?{Enemy Defence|0})]]}} {{abr=[[?{Attack Type|Bite, 1d8+1|Kick, 1d10+1}]]}} {{Damage=[[?{Damage Type|Bite, 4|Kick, 6}]]}} {{desc=}}" name="attr_destrier"></button></li>
                                <li>Weapon: Silver-shod hoofs and teeth (Bite 1d8+1, 4 or Kick 1d10+1, 6)</li>
                                <li>Defence: 4</li>
                                <li>Armour Factor: 3 (Silver barding)</li>
                                <li>Evasion: 4</li>
                                <li>Magical Defence: 13</li>
                                <li>Health Points: 2d6+12</li> 
                                <li>Stealth: 8</li>
                                <li>Perception: 12</li>
                                <li>Special Abilities: Elfsight (see p. 123)</li>
                              </ul>
                            </details>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Evil Eye</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster of the spell becomes touched by the spirit of the Fomori demi-god Balor, whose gaze is Death. The caster’s left eye is filled with a fathomless dark. Any character mêléeing him has a 40% chance of meeting the hideous stare of this eye. This check is made at the end of each Combat Round. (The chance may be less than 40% if the caster’s opponent looks away or shuts his eyes—as for Gaze Attacks, p. 123). A character who looks into the eye’s gaze is subject to a 1d12 Fright Attack (see Fright Attacks, p. 122): a twelve-sided die is rolled and the victim’s rank is subtracted from the score. If the caster can roll less than or equal to the result on 2d10, the victim dies.</p> 
                            <p>The user of this spell temporarily loses sight in the affected eye. Thus deprived of binocular vision, he subtracts 1 point from attack and 2 points from both defence and evasion while the spell lasts.</p>
                        </div>
                        <div class="spell_button">
                            <span>Evil Eye Chance to Meet Gaze Roll:</span><button type="roll" name="attr_evil_eye_gaze_chance" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name}'s left eye turns dark and terrible}} {{subtitle=Evil Eye, Roll 1d100 under Target Number}} {{roll=[[1d100cs1cf100]] vs 40%}}"></button>
                            <span>Evil Eye Fright Attack Roll:</span><button type="roll" name="attr_evil_eye_fright_attack" class="roll d12" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} meets their opponent’s gaze, they try to resist its terrifying power}} {{subtitle=2d10 Roll is equal to, or less than, 1d12 - rank to kill target)}} {{Vs=[[1d12-?{Target's Rank}]]}} {{roll=[[2d10]]}}"></button>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Rune</div>
                        <div class="spell_duration">Duration: Lasts until activated</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This is a notorious spell used as a magical trap by high-ranking Sorcerers; experienced adventurers are always wary of stumbling across a Sorcerer’s Rune. The Rune is cast by inscribing an occult symbol on a wall, flagstone, tapestry or other suitable object. The Sorcerer can then cast into it any other spell that he is able to use. This spell will be held by the Rune and released if anyone except the caster comes within 3m line of sight. The Rune must be exposed if it is to work, but Sorcerers can be quite artful in contriving abstract murals or odd locations (the ceiling? behind a door?) to keep others from noticing a Rune before it goes off. A Sorcerer may have only one Rune at any given time.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Possession</div>
                        <div class="spell_range">Range: 10m (Initial casting)</div>
                        <div class="spell_duration">Duration: 5 minutes, then Spell Expiry applies</div>
                        <div class="spell_origin">Origin: Krarth</div>
                        <div class="spell_rarity">Rarity: Uncommon in Krarth; rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell enables a Sorcerer to transfer his consciousness to another human’s body, taking control of the target. While this spell is active the Sorcerer’s own body collapses as if in a deep sleep. If the Sorcerer’s body suffers injury or death while he possesses another the spell ends immediately. To possess a target the Sorcerer must overcome their Magical Defence score. While possessing his target the Sorcerer has no access to their skills or powers and cannot cast spells himself. When the spell ends the target has no memory of anything that happened while he was possessed.</p>
                        </div>
                        <div class="spell_button">
                            <span>Possession Spell Attack Roll:</span><button type="roll" name="attr_possession" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} tries to take over the body of another}} {{subtitle=Possession}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>
                
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_sorcerer8">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>   
                        </fieldset>
                    </div>
                </details>
                    
                <details class="spellbook">
                    <summary>Sorcerer Spells of Level Nine</summary>
                
                    <div class="spell-entry">
                        <div class="spell_name">Animate Bones</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_desc">
                            <span>Description</span><p>By casting this over the skeletal remains of someone the Sorcerer slew, the caster can animate the remains into a Skeleton. The Skeleton is simple-minded and fully obedient, possessing attack 10, defence 5, evasion 3, magical defence 3, and 2-7 Health Points (roll 1d6 + 1).</p>
                        </div>
                        <div class="spell_button">
                            <details>
                              <summary>Skeleton</summary>
                              <ul>
                                <li>Attack: 11  <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name}'s Skeleton Warrior strikes}} {{subtitle=Skeleton Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[11-(?{Enemy Defence|0})]]}} {{abr=[[?{Armour Bypass Dice|1d3}]]}} {{Damage=[[?{Damage|2}]]}} {{desc=}}" name="attr_animate_bones"></button></li>
                                <li>Weapon: Skeletons will fight unarmed, unless they can acquire a weapon.</li>
                                <li>Defence: 5</li>
                                <li>Evasion: 3</li>
                                <li>Magical Defence: 3</li>
                                <li>Health Points: 2-7 (1d6+1)</li> 
                              </ul>
                            </details>
                        </div>               
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Battlemaster</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A supernatural, obsidian-armoured warrior is summoned from another Plane and bound in the caster’s service for the period of the spell. The Battlemaster is clad in magical mail armour and wields a magic axe. His characteristics and scores are:</p>
                            <p>When the spell runs out the Battlemaster returns to his own dimensional Plane, where any wounds he has received are supernaturally healed before the next time he is summoned. Although any given Sorcerer can materialize the Battlemaster only once per day, he exists on many planes simultaneously and it is thus possible for two Sorcerers actually to summon him at the same time. If the Battlemaster should be ordered to attack himself (i.e. another Battlemaster summoned by a different Sorcerer), his two selves will merge into one and he will be freed from the control of either summoner. He will then proceed to wreak havoc before returning to his own world.</p>
                        </div>
                        <div class="spell_button">
                            <details>
                              <summary>Battlemaster</summary>
                              <ul>
                                <li>Attack: 30 <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name}'s mighty Battlemaster leaps to the attack}} {{subtitle=Battlemaster Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[30-(?{Enemy Defence|0})]]}} {{abr=[[1d8+2]]}} {{Damage=[[8]]}} {{desc=}}" name="attr_battlemaster"></button></li>
                                <li>Weapon: Axe (d8 +2, 8 points)</li>
                                <li>Defence: 24</li>
                                <li>Armour Factor: 6</li>
                                <li>Evasion: 8</li>
                                <li>Magical Defence: 17</li> 
                                <li>Stealth: 12</li>
                                <li>Perception: 18</li>
                                <li>Health Points: 24</li>
                                <li>Strength: 18</li>
                                <li>Reflexes: 13</li>
                                <li>Special Abilities: Panoptical vision</li> 
                              </ul>
                            </details>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Firestorm</div>
                        <div class="spell_range">Range: 30m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster flings a ball of snarling flames which explodes into an inferno of 6m diameter. Characters will take 4d10 +4 HP damage if they fail to jump clear (match spell’s speed of 18 vs targets’ evasion)— and 4 HP damage even if they do, simply from the peripheral heat of this terrible blast! A target wearing magic armour (of any sort) may reduce the damage he takes by 3 points; armour that is not enchanted provides no defence.</p>
                        </div>
                        <div class="spell_button">
                        Firestorm Spell Attack Roll:<button type="roll" name="attr_firestorm_attack" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} flings a ball of flames, which explodes}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[18-?{Target's Evasion}]]}} {{damage=The inferno burns for [[4d10+4-?{Is target wearing Magical Armour?|No, 0|Yes, 3}]] damage}}"></button>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Invisibility</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster is rendered invisible. If his opponents become aware of his general location (perhaps he sneezed or knocked over a vase, or they saw him begin to cast the incantation), he may be attacked with spells. Direct-attack spells affect an invisible target normally, but indirect-attack spells are subject to a penalty of 1d8 speed points to represent their likelihood of being slightly off-target. A character attempting to mêlée the invisible Sorcerer incurs a penalty of –4 from attack and –8 from defence (just like fighting blind, of course—see p. 61). Missile weapons are almost useless against one who is invisible: the bowman halves his normal attack and subtracts 3. Sir Balin, who has an attack of 13, therefore shoots at an invisible enemy as though with an attack of only 4.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Miracle Cure</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell restores the recipient to his normal Health Point score, cures any diseases and eradicates any toxins he is suffering from, and regenerates any missing limbs or organs. As with the Lesser Healing and Greater Healing spells, it has no effect on a dead character.</p>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <div class="spell_name">Raise Fog</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>With the casting of this spell (which must be used out-of-doors), a dense mist quickly rises to cover an area 60m across by 5m high. This area is centred on the Sorcerer’s position when he cast the spell. The Sorcerer himself can see quite normally within the fog, but for others the visibility is barely 3m.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Spirit Leech</div>
                        <div class="spell_range">Range: 10m (Initial casting)</div>
                        <div class="spell_duration">Duration: Spell expiry applies</div>
                        <div class="spell_origin">Origin: Kingdom of Wyrd</div>
                        <div class="spell_rarity">Rarity: Rare</div>
                        <div class="spell_desc">
                            <span>Description</span><p>With a dread incantation, the Sorcerer summons forth this flying spectral worm from some dark dimension. The Spirit Leech cannot survive without magical energy, and attacks the nearest being to it (excluding the caster) that has Magic Points. The Spirit Leech can be blocked by magical shields like Spell Screen, but these defences only last a single round against it. The Spirit Leech moves at a base speed of 30m. Once the Spirit Leech makes physical contact with the target (Attack 23 against Defence, armour does not protect) it latches onto it, automatically drawing 5 MP from the unfortunate each turn. The Spirit Leech is impervious to all attacks, but can be destroyed by depriving it of Magic Points for two consecutive rounds. Smart magicians might cast a series of durational spells, let the leech vanish and then cancel their spells to recoup some of their lost power. There are reasons that the Magi of Krarth do not push their claim to the Kingdom of Wyrd.</p>
                        </div>
                        <div class="spell_button">
                            <span>Spirit Leech Melee Attack Roll:</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name}'s Spectral Worm slithers through the air to attack}} {{subtitle=Spirit Leech Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[23-(?{Enemy Defence|0})]]}}" name="attr_spirit_leech"></button>
                        </div>
                    </div>

                    <div class="spell-entry">
                        <fieldset class="repeating_spells_sorcerer9">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>      
                        </fieldset>
                    </div>
                </details>
                <details class="spellbook">
                    <summary>Sorcerer Spells of Level Ten</summary>
                    
                    <div class="spell-entry">
                        <div class="spell_name">Doppelganger</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A soulless duplicate of a known person can be created using a clay simulacrum mixed with the caster’s own blood, resulting in a permanent 1d4 Health Point loss. The duplicate takes on the physical characteristics and skills of the original, but lacks reason, volition, and knowledge skills. It cannot walk on consecrated ground or cast a reflection.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Hecatomb</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell causes instant death to all beings within 10m (match caster’s magical attack vs victims’ magical defence). The caster suffers a severe magical backlash, losing 1-100 experience points as a result.</p>
                        </div>
                        <div class="spell_button">
                            <span>Hecatomb Spell Attack Roll:</span> <button type="roll" name="attr_hecatomb" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} creates a zone of magical death}} {{subtitle=Hecatomb}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                            <span>Hecatomb Spell Backlash Effect: (the caster suffers when using this spell)</span> <button type="roll" name="attr_hecatomb_backlash" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} is wracked by the magical backlash of unleashing death}} {{Suffering=[[1d100]] experience loss}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Pentacle of Entrapment</div>
                        <div class="spell_duration">Duration: Three days</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell requires a large pentacle about 5m across to be drawn or engraved. When the spell is cast, the pentacle becomes a trap for the caster’s enemies. The first 2–12 beings of up to 5th rank to come within 20m (they must be able to see the pentacle) are subject to the spell. Those on whom it takes effect (match caster’s magical attack vs victim’s magical defence) will be instantaneously transported within the pentacle’s boundary. Though unharmed, they will be powerless to escape unless they know the ‘key’ word (arbitrarily chosen by the Sorcerer when he cast the spell) that unlocks the Pentacle of Entrapment. The spell is also negated if any part of the pentacle design is erased, but this cannot be accomplished by one trapped within it.</p>
                        </div>
                        <div class="spell_button">
                            <span>Pentacle of Entrapment Number of Targets Roll:</span> <button type="roll" name="attr_pentacle_of_entrapment_targets" class="roll d6" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} draws a Pentacle of Entrapment}} {{It can trap =[[2d6]] victims within}}"></button>
                            <span>Pentacle Spell Attack Roll: (roll once for each target that comes into range, up to maximum targets)</span> <button type="roll" name="attr_pentacle_of_entrapment_attack" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name}'s Pentacle of Entrapment attempts to draw a victim inside}} {{subtitle=Pentacle of Entrapment}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Resurrect</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Restores life to a character who has been dead for no more than 28 days. The character loses 1d3 Health Points permanently, and their Strength and Reflexes are halved for one week. The spell must be cast at sunrise, and the caster cannot use spells above the fifth level for the rest of the day.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Scry</div>
                        <div class="spell_duration">Duration: Three minutes</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Enables the Sorcerer to look into a specially prepared obsidian mirror to view far-off places, people, or past events. The mirror cannot show specific locations, penetrate physical barriers, or see onto consecrated ground. If a Sorcerer of equal or higher rank is observed, they will know and can cancel the spell, shattering the mirror.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Transformation</div>
                        <div class="spell_duration">Duration: Three minutes</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster transforms into any creature whose rank-equivalent does not exceed their own rank. The Sorcerer retains their Health Points, magical attack, and magical defence, but gains the fighting skills of the new form. Magic cannot be used unless the form is humanoid.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Sleep of Ages</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell places a willing target in a sleep lasting 100 years or until a specific condition is met. The target does not age during this time and can only be awakened by Dispel Magic or physical damage.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_sorcerer10">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>
            </div>
            <div class="warlock_spell_list">
                <details>
                    <summary>Warlock Spells of Level One</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Eyes of Night</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: lasts for ten minutes</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Warlock’s eyes glow brightly, casting a beam of red light to a distance of 20m. This enables him to see perfectly even in utter darkness, and by looking at something, they can illuminate it so that their companions can see it. Use of this spell temporarily reduces the Warlock’s stealth score by 2 and negates any chance of surprising their enemies.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Heal Injury</div>
                        <div class="spell_range">Range: touch</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster can use this spell to recover 1d4 HP when wounded. Alternatively, they can use it to treat an injured comrade. The spell cannot bring a character back from the dead (reduced to –3 HP or below), nor increase a character’s Health Points above their normal score.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Imperil</div>
                        <div class="spell_range">Range: touch</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>For this spell to take effect, the Warlock must touch the intended victim within one Combat Round of casting: that is, their next action after casting the Imperil spell must be a successful hit either with their hand or a mêlée weapon. If their Hit Roll fails, the spell is wasted. The spell will pass through clothing and armour, however, and does not depend on a successful Armour Bypass Roll. If it takes effect (match caster’s magical attack vs target’s magical defence), the victim is rendered more vulnerable to wounds. Any wound they takes from a mêlée weapon (i.e. swords, spears, etc., but not arrows or crossbow bolts) while the spell lasts will be for 1 Health Point more than usual. A character under this spell thus takes 5 HP damage from a normal sword, 7 HP from a battleaxe, and so on.</p>
                        </div>
                        <div class="spell_button">
                            <span>Imperil Melee Attack Roll: (needs to touch target, but not damage)</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} attacks with @{equippedmeleeweaponname}}} {{subtitle=@{equippedmeleeweapontype} +@{equippedmeleeweaponmagicbonus}}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[@{finalmeleeattack}-(?{Enemy Defence|0})]]}} {{abr=[[@{equippedmeleeweaponabr}+@{finalmeleeabrbonus}]]}} {{Damage=[[@{equippedmeleeweapondamage}+@{finalmeleedmgbonus}]]}} {{desc=@{equippedmeleeweaponother} The spell will pass through clothing and armour, and does not depend on a successful Armour Bypass Roll.}}" name="roll_imperil_melee_attack"></button>                
                            <span>Imperil Spell Attack Roll:</span> <button type="roll" name="attr_imperil_spell_effect" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to weaken their target's flesh}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{target's Magical Defence}]] }} {{desc=If it takes effect, the victim is rendered more vulnerable to wounds. Any wound they takes from a mêlée weapon while the spell lasts will be for 1 Health Point more than usual.}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Perception of Sorcery</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell enables the Warlock to sense magic within a range of 3m. By concentrating on an object or being, they may be able to determine whether it is enchanted or under the effect of a spell. They is not able to determine anything about the nature or strength of the spell. Perception of Sorcery is not infallible; a d20 roll is made (by the GM) for each object/person scrutinized, and the Warlock only senses any spells present if the roll is under their Psychic Talent score. (Having got a negative result, successive examinations of the same object/person will continue to yield the same result unless a spell is later cast on it—see the description of Sixth Sense on p. 34). The Warlock must take a full Combat Round for each object or being they wishes to investigate using this spell.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Silent Warrior</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_duration">Duration: lasts one Combat Round</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A phantasmal warrior is created to strike at one of the caster’s enemies or perform some other action taking no more than one round. The Silent Warrior cannot be harmed, but they can be dispelled by means of a Ring of Negation, Dispel Magic, or Terminate Enchantment if there is time to do this before they attacks. They strikes at the end of the Combat Round in which they was created; their attack score is 18 and their greatsword is a (d10, 5) weapon. After this single blow, they fades out of existence.</p>
                        </div>
                        <div class="spell_button">
                            <span>Silent Warrior Melee Attack Roll:</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name}'s illusory warrior swings its sword} }} {{subtitle=Silent Warrior Melee Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[18-(?{Enemy Defence|0})]]}} {{abr=[[1d10]]}} {{Damage=[[5]]}} {{desc=After this single swing, they fades out of existence.}} " name="roll_silent_warrior_melee_attack"></button>                
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Battle Brother</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: Spell expiry applies</div>
                        <div class="spell_origin">Origin: Emphidor</div>
                        <div class="spell_rarity">Rarity: Uncommon</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell summons an illusion of a heavily armed and armoured warrior to guard the Warlock’s flank. The warrior takes its appearance from the Warlock with subtle changes that make him more threatening, such as adding 6 inches to their height, larger weapons, or a scar or two. The Battle Brother shouts and threatens anyone approaching the Warlock from the back or side, both warning the caster of sneak attacks and acting in an intimidating manner to ward off attackers.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_warlock1">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>   
                        </fieldset>
                    </div>
                </details>
                <details>
                    <summary>Warlock Spells of Level Two</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Camouflage</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell enables the caster to blend in with whatever they is standing against, covering him with the illusion of a stone wall, a hedgerow, an open field, or whatever. They adds +2 to their stealth score and suffers no stealth penalty for lack of cover (see p. 63). However, they only gains these benefits when more than 5m from their enemies—at closer ranges, the Camouflage spell is ineffective.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Fearlessness</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>While under this spell, the Warlock cannot be affected by Fright Attacks (see p 122). The spell prevents him from experiencing the emotion of fear. It does not turn him into a berserker. Low-ranking characters are apt to become a little reckless when using the spell, but more experienced Warlocks will be accustomed to its effects and should be better able to distinguish between lack of fear and lack of caution.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Fortune</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This is an all-purpose ‘good luck’ charm. It enhances the Warlock’s chance of success in anything they attempts. In game terms, they may add or subtract 1 from any dice roll they makes—but they can only apply its modifier to one dice roll in any given Combat Round. That means that they could increase their chance of hitting an opponent, say, but they could not also increase the chance of the same blow striking through armour. They must declare when they is taking advantage of the spell’s effect before making the roll. The spell also may be used to influence rolls made by the GM on the player’s behalf. It cannot influence rolls made by other characters (e.g., a Hit Roll made by the Warlock’s opponent). The Fortune spell itself is excluded from its effect; the caster cannot use it to influence its own Spell Expiry Rolls.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Inquiry</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell enables the caster to assess instantaneously all characters within a radius of 15m to determine whether they are protected by some defence (such as Spell Screen or Wall of Magic) which shields against direct-attack spells. The caster may also be able to determine the strength of such defences. The chance of doing this is rank ×20%: the GM rolls d100, and if the score is less than or equal to the Warlock’s rank ×20, then they is told the strength of the magical defences. If the roll fails (and a 96–100 is always counted as a failure in this case), then the GM gives a misleading result within 1d8 Magic Points of the defence’s actual strength. Inquiry does not distinguish between the various types of direct-attack shields; it merely informs its caster of the total Magic Points (or spell-levels, in the case of a Mystic) that could be blocked by the shields at the instant of probing (A Spell Screen cannot be distinguished from a 5 MP Wall of Magic, for example).</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Warning</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A small bell, apparently fashioned of red gold, appears in the air behind the caster and floats noiselessly along with him when they moves. Being ethereal, it cannot be seized out of the air or separated from the caster by any means. Its function is to produce a warning clangour if they is about to be attacked, thus negating any chance of surprise or shock attack against him.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Djinn-Borne Leap</div>
                        <div class="spell_range">Range: Self (20m)</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_origin">Origin: Caliphate of Zhenir</div>
                        <div class="spell_rarity">Rarity: Common in Zhenir, rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A quick invocation to the seven great Djinn sultans enables the Warlock to leap vast distances trailing blue flames and sparks in their wake. The Warlock can use this spell to make a single leap of up to 20m in any direction. The spell carries the caster in a parabolic arc, so making it impossible to leap straight up using the spell. The high point of the arc is about 10m which is enough to clear most castle walls. The sparks that rain to the ground with the Warlock’s passing are likely to ignite flammable objects such as dry straw.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_warlock2">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>     
                        </fieldset>
                    </div>
                </details>
                <details>
                    <summary>Warlock Spells of Level Three</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Deceit</div>
                        <div class="spell_range">Range: touch</div>
                        <div class="spell_duration">Duration: lasts one day</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Warlock can apply this spell to a character (including themself) or object so that detection spells will obtain a false reading. They could, for example, apply it to an enchanted talisman so that it would register as non-magical under Detect Aura, or use it to make themself appear more or less powerful than they really is to a Mystic using the Assessment spell. The spells and abilities which may be fooled by Deceit are: ESP and Premonition, Detect Aura and Oracle, See Enchantment and Assessment, Perception of Sorcery and Warning. The spell always works against characters whose rank does not exceed the Warlock’s. More experienced magic-users have a chance (20% per rank higher than the Warlock’s) of realizing they are being deceived.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Enhancement</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell temporarily increases the Warlock’s Strength and Reflexes: if the characteristic is 17 or less it increases to 18, if it is normally 18, it increases to 19. After the spell wears off, both characteristics are depleted 1 point below their normal scores until sunset. The Warlock can go on to use this spell a second and third time, etc., in the same day—but each use depletes the normal characteristic scores by a further point, and they must not reduce either score below 1.</p>
                        </div>
                        <div class="spell_button">
                            <span>Activate Enhancement spell:</span>
                            <select name="attr_enhancement">
                                <option value="0">Inactive</option>
                                <option value="1">Active</option>
                            </select>
                            <span>Enhancement Spell Negative Modifier</span>
                            <input type="number" name="attr_enhancement_neg" max="0" value="0" />
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Havok</div>
                        <div class="spell_range">Range: 12m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This releases a glittering wave of energy that engulfs a single being; according to legend, it is sometimes possible to glimpse a giant ghostly hawk within the light of the blast. If it hits its target (match spell’s speed of 14 vs target’s evasion), the spell inflicts 3d10 HP damage. The damage roll is reduced by the target’s Armour Factor (if any).</p>
                        </div>
                        <div class="spell_button">
                            <span>Havok Spell Attack Roll:</span> <button type="roll" name="attr_havok" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} releases a glittering wave of energy at a single target}} {{subtitle=Havok}} {{spellattackroll=[[2d10]]}} {{speedvsevasion= [[14-?{Target's Evasion}]]}} {{damage= [[3d10-?{Target's Armour Factor}]]}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Illusion</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Except for the different Spell Expiry probability, this is identical to the Sorcery spell of the same name (see p. 82). An Illusion of up to 2 cubic metres volume can be created, and even if examined closely there is only a 5% chance of distinguishing it from reality. An illusory sentry thus looks and sounds just like a real person, and even feels solid to the touch. It can be made to seem to attack someone who believes it and (although it is illusory and therefore not able to actually harm him) its sword will make a convincing clang and give off a shower of illusory sparks when it strikes their own. The Illusion can be cast onto a character (including the caster) in order to give a near-perfect disguise, with the single limitation that the Illusion must be equal in at least one linear measurement to the size of the thing it is covering.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Telekinesis</div>
                        <div class="spell_range">Range: 25m</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This is the same as the Mystic spell of the same name (see p. 91). The caster can lift and move an object weighing up to 500 grams (1 pound) without touching it. Telekinesis does not move an object with any great speed or force—a missile would have a speed of 8; while a dagger or cudgel could be wielded at half the caster’s normal attack, but would inflict only 2 HP on a successful hit.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Ibn-Azi’s Shattering Blow</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_origin">Origin: Newly discovered in the Ta’ashim lands, virtually unknown outside of the Caliphate</div>
                        <div class="spell_rarity">Rarity: Rare in the Caliphate</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Warlock lands a resounding blow on their target, causing any armour worn to fly apart in a spasm of leather and steel. The Warlock must make successful attack and armour bypass rolls or the spell fizzles. The spell does no permanent damage to the armour, but requires at least ten minutes of work to reassemble the pieces. The spell has no effect on targets with natural armour such as hair, thick skin, or scales. Beings of earth, stone, and metal like Automatons, Earth Elementals, Gargoyles, and Golems take 2d4 HP damage from this spell but suffer no armour factor reduction.</p>
                        </div>
                        <div class="spell_button">
                            <span>Ibn-Azi’s Shattering Blow Melee Attack Roll:</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} swings their weapon, aiming to land a resounding blow on their target}} {{subtitle=Ibn Azi's Shattering Blow}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[@{finalmeleeattack}-(?{Enemy Defence|0})]]}} {{abr=[[@{equippedmeleeweaponabr}+@{finalmeleeabrbonus}]]}} {{Damage=[[@{equippedmeleeweapondamage}+@{finalmeleedmgbonus}]]}} {{desc=Any armour worn flies apart in a spasm of leather and steel. The spell has no effect on targets with natural armour such as hair, thick skin, or scales. Beings of earth, stone, and metal like Automatons, Earth Elementals, Gargoyles, and Golems take [[2d4]] HP damage from this spell but suffer no armour factor reduction.}} " name="roll_ibn_azis_melee_attack"></button>                
                        </div>
                    </div>  
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_warlock3">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>     
                        </fieldset>
                    </div>
                </details>
                <details>
                    <summary>Warlock Spells of Level Four</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Aegis</div>
                        <div class="spell_duration">Duration: 1d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Aegis spell provides the Warlock with a magical protection which takes effect when they is about to be struck by a weapon (whether in mêlée or by an arrow, etc.) or by an indirect-effect spell (see p. 75). On a roll of 1 on 1d6 the attack is negated.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Neutralize Toxin</div>
                        <div class="spell_range">Range: touch</div>
                        <div class="spell_duration">Duration: 1d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>While this spell is in effect, poisons that enter the character’s body are immediately neutralized. If the spell is cast on a character after they has been poisoned, then it will prevent him from taking further damage but will not restore any Health Points already lost.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Oracle</div>
                        <div class="spell_duration">Duration: lasts for one minute</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This duplicates a Sorcerer’s ability to contact the spirit Plane and put questions to its denizens (see p. 82). Three yes/no questions may be asked within the one minute the spell lasts, and there is a 75% chance that the spirits will know the answer to each. If they do not know, they will answer randomly, and will also do this if the question is phrased ambiguously. Questions about the future or a character’s thoughts will not be answered—the spirits speak only of tangibles, not speculations and fancies. It is quite important for the GM to time a player-character who uses this spell. Players should not be allowed to look at a watch, as accurate timekeeping devices are very rare in the medieval world of Dragon Warriors.</p>
                        </div>
                        <div class="spell_button">
                            <span>Oracle Spirit Knowledge Chance Roll:</span><button type="roll" name="attr_oracle_warlock" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} asks the oracles of the spirit world for answers}} {{subtitle=Oracle}} {{First Question=[[1d100cs1cf100]] vs 75%}} {{Second Question=[[1d100cs1cf100]] vs 75%}} {{Third Question=[[1d100cs1cf100]] vs 75%}} {{desc=If they do not know, they will answer randomly, and will also do this if the question is phrased ambiguously. Questions about the future or a character’s thoughts will not be answered—the spirits speak only of tangibles, not speculations and fancies.}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Turncoat</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>If successful (match caster’s magical attack vs target’s magical defence), this spell causes a single enemy of the caster’s party to switch sides and attack their own comrades. It can only be cast once a fight is in progress and has no effect on a lone foe (i.e., one who has no comrades to turn against). An affected character does not lose their hostility to the caster—if and when they has slain all their own companions, they will resume their attack on the caster’s party even if the spell is still operating.</p>
                        </div>
                        <div class="spell_button">
                            <span>Turncoat Spell Attack Roll:</span> <button type="roll" name="attr_turncoat" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} tries to manipulate their target's loyalties}} {{subtitle=Turncoat}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>                        
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Vitality</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This restorative spell has the effect of adding up to 12 HP to the Warlock’s Health Points score when they is injured. It will not take him above their normal (unwounded) Health Points score, of course. Vitality can only be used to heal the Warlock themself; it has no effect on another character.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Faestus’ Wrath</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll</div>
                        <div class="spell_origin">Origin: Emphidian Empire</div>
                        <div class="spell_rarity">Rarity: Common today in Selentine lands, rare elsewhere</div>
                        <div class="spell_replaces">Replaces: Turncoat for Selentine Warlocks</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Warlock casts this spell on an enemy’s weapon, making a magical attack as usual against the target's Magical Defence. If the attack is successful, the weapon leaps and twists in the owner’s hand, attempting to strike him repeatedly. The weapon attacks once per round with an Attack of 16, inflicting damage as if it was wielded by its owner. Exceptionally strong warriors beware! Anyone with Reflexes and Strength scores of 13 each can grab the weapon holding it in place and preventing it from attacking. Keeping the weapon at bay counts as a full action, and someone performing that action cannot move or attack without letting go of the weapon.</p>
                        </div>
                        <div class="spell_button">
                            <span>Faestus’ Wrath Spell Attack Roll:</span> <button type="roll" name="attr_faestus_wrath" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} throws an enchantment at an enemy's weapon}} {{subtitle=Faestus’ Wrath}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                            <span>Faestus’ Wrath Melee Attack Roll:</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=The enchanted weapon leaps and twists in its owner’s hand, attempting to strike them repeatedly.}} {{subtitle=Faestus’ Wrath}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[16-(?{Enemy Defence|0})]]}} {{abr=[[?{Target weapon's ABR|1d6}+?{Target weilder's ABR bonus|0}]]}} {{Damage=[[?{Target weapon's Damage|4}+?{Target weilder's Damage bonus|0}]]}} {{desc=Anyone with Reflexes and Strength scores of 13 each can grab the weapon holding it in place and preventing it from attacking. Keeping the weapon at bay counts as a full action, and someone performing that action cannot move or attack without letting go of the weapon.}} " name="roll_faestus_wrath_melee_attack"></button>                
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_warlock4">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>   
                        </fieldset>
                    </div>
                </details>
                <details>
                    <summary>Warlock Spells of Level Five</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Force of Will</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell gives the Warlock the ability to completely ignore pain, allowing him to stay in combat until virtually hacked apart if need be. They does not black out on reaching 0 HP and must be reduced to –20 HP in order to kill him. Under the effect of this spell, it is thus possible to endure terrible wounds and then use Vitality or Heal Injury to restore oneself before the spell wears off. Of course, if the Force of Will spell should expire when the Warlock’s HP score is –3 or less, then they dies at once.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Hellfire</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_duration">Duration: lasts until dispelled or extinguished</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A character or creature who succumbs to this spell (match caster’s magical attack vs target’s magical defence) immediately bursts into flames. They takes 3d6 HP damage every round until the Hellfire is extinguished. Armour gives no protection (it is the victim’s body that is burning), and non-magical armour will be burnt away by the flames, losing 1 point from its Armour Factor each round. The Hellfire can be countered with Dispel Magic or Terminate Enchantment, or the flames can be beaten out. This requires a roll of 6 on 1d6, but before attempting this, each round the victim must roll equal to or under their rank on d8. Failure means that they starts to panic and can do nothing to save themself. Comrades can also try to put out the flames by pouring on water, smothering them with a cloak or whatever; each character attempting this rolls 1d6 and, as before, the flames go out on a roll of 6. Helping in this way is risky, though, because any character within 2m of the victim suffers 1d6 HP burn damage every round (in this case, less Armour Factor, if any).</p>
                        </div>
                        <div class="spell_button">
                            <span>Hellfire Spell Attack Roll:</span> <button type="roll" name="attr_hellfire" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to magically ignite their target's body}} {{subtitle=Hellfire}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{damage=[[3d6]]}} {{desc=Non-magical armour will be burnt away by the flames, losing 1 point from its Armour Factor each round}}"> </button> 
                            <span>Hellfire Ongoing Effects Roll:</span> <button type="roll" name="attr_hellfire_ongoing" class="roll d6" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=The Hellfire continues to burn, as the urge to panic rises.}} {{subtitle=Roll 1d8 vs Rank or under to avoid panic}} {{roll=[[1d8]]}} {{vs=[[?{Victim's Rank}]] }} {{damage=[[3d6]]}} {{desc=Failure means that they start to panic and can do nothing to save themself}}" > </button>
                            <span>Hellfire Victim Extinguish Attempt Roll:</span> <button type="roll" name="attr_hellfire_extinguish" class="roll d6" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=The victim, or their ally, attempts to extinguish the Hellfire}} {{subtitle=Roll 6 on 1d6 to succeed}} {{roll=[[1d6]]}} {{vs=[[6]]}}" > </button>
                            <span>Hellfire Area of Effect Damage Roll: (roll for each living being within 2m of the victim)</span> <button type="roll" name="attr_hellfire_areaeffect" class="roll d6" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=The Hellfires' burning intensity affects everybody around the victim}} {{damage=[[1d6-?{target's Armour Factor}]] }}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Slow</div>
                        <div class="spell_range">Range: 12m</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This causes 1-8 beings to move and think at half normal speed (caster’s magical attack vs targets’ magical defence). Slowed beings may only act in alternate Combat Rounds. Unless they has higher Reflexes than the Warlock and has thus acted already, an affected character loses their action (see p. 70) for the Combat Round in which the spell is cast.</p>
                        </div>
                        <div class="spell_button">
                            <span>Slow Number of Targets Roll:</span> <button type="roll" name="attr_slow_targets" class="roll d8" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} attempts to catch many enemies in their magical net}} {{subtitle=The spell tagets 1d8 victims}} {{roll=[[1d8]]}} " > </button>
                            <span>Slow Spell Attack Roll: (roll once against each target)</span> <button type="roll" name="attr_slow" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name}'s spell magially saps at their victim's ability to think and move}} {{subtitle=Slow}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=Slowed beings may only act in alternate Combat Rounds. Unless they has higher Reflexes than the Warlock and has thus acted already, an affected character loses their action for the Combat Round in which the spell is cast}}"> </button> 
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Soulbane</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>With this spell, the Warlock can fling a tendril of black fire that burns the psychic essence of the one it strikes (match spell’s speed of 17 vs target’s evasion). The effect of the spell is to reduce the target’s magical attack (if any) and magical defence by 2d8 points. If the target is wearing enchanted armour, then they can reduce the dice rolls by the armour’s magic bonus. Neither score will be reduced below 0, and depleted scores recover at the rate of 1 point every Combat Round. Note that this is an indirect-effect spell and is not impeded by Wall of Magic, Spell Screen, etc.</p>
                        </div>
                        <div class="spell_button">
                            <span>Soulbane Spell Attack Roll:</span><button type="roll" name="attr_soulbane" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} flings a tendril of black fire at their target}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[17-?{Target's Evasion}]]}} {{desc=The spell reduces the target’s magical attack (if any) and magical defence by [[2d8-?{Magic Armour Bonus}]] points. Depleted scores recover at the rate of 1 point every Combat Round.}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Terminate Enchantment</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>erminate Enchantment dispels a single durational spell. As with Dispel Magic, it does not affect spells which were cast with more Magic Points than itself. If they directs it at a character who is under more than one durational spell, the Warlock must specify which spell they is trying to terminate—if they does not, the GM determines randomly which spell is affected.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Apep’s Fang</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_origin">Origin: Ancient Kaikuhuru</div>
                        <div class="spell_rarity">Rarity: Rare</div>
                        <div class="spell_desc">
                            <span>Description</span><p>In the shadows of the Kaikuhuran Empire, the Warlock-Priests of Apep wielded weapons laced with venom that they claimed came from the fangs of their dread master. This spell envenoms a single blade as if it were coated in a single dose of Assassin’s Lotion. All standard rules for Assassin’s Lotion apply.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_warlock5">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>   
                        </fieldset>
                    </div>
                </details>
                <details>
                    <summary>Warlock Spells of Level Six</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Annihilate</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This silent spell affects a single being of up to 8th rank or rank-equivalent (match caster’s magical attack vs target’s magical defence). The victim is utterly destroyed and cannot be restored to life by any known means. Special note: If a player-character or important NPC should fall prey to an Annihilate spell, the GM may allow the other player-characters to discover some way to bring him back to life. This should not be an easy task—Divination or another magical source might reveal that they can recover their soul only by travelling to another Plane of reality or even venturing into Hell! Retrieving their body would then be another task; perhaps their original body would turn out to be lost forever, and their only hope would be for the soul to be bound into the body of the Warlock who slew him. The idea is that Annihilate is a very deadly spell but it should generally be possible for the player-characters to achieve even an ‘impossible’ task if they are prepared to persevere with the arduous quest it entails.</p>
                        </div>
                        <div class="spell_button">
                            <span>Annihilate Spell Attack Roll:</span> <button type="roll" name="attr_annihilate" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name}'s spell magially saps at their victim's ability to think and move}} {{subtitle=Slow}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The victim is utterly destroyed and cannot be restored to life by any known means.}}"> </button> 
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Lunacy</div>
                        <div class="spell_range">Range: 2m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This baleful conjuration can only be employed outdoors when the moon is in the night sky. It causes the Warlock’s eyes to fill with the cold, deranging gleam of moonlight. A character facing him in close combat at that moment has an 80% chance of looking straight into their eyes, and if this happens, the character is subject to a Fright Attack of intensity 21. Instead of killing the character, this Fright Attack drives him into a state of hopeless insanity. They becomes a mewling halfwit who can do no more than grin and gurgle unintelligibly. There is a drawback to this spell. In the round they casts it, the Warlock is blinded and consequently at –8 defence.</p>
                        </div>
                        <div class="spell_button">
                            <span>Lunacy Chance to Meet Gaze Roll:</span> <button type="roll" name="attr_lunacy_gaze_chance" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name}'s eyes fill with the cold, deranging gleam of moonlight}} {{subtitle=A character facing the Warlock in close combat at that moment has an 80% chance of looking straight into their eyes}} {{roll=[[1d100cs1cf100]] vs 80%}}"></button>
                            <span>Lunacy Fright Attack Roll:</span> <button type="roll" name="attr_lunacy_fright_attack" class="roll d12" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} meets their opponent’s gaze, the vicitm tries to resist their maddening gleam}} {{subtitle=The victim is subject to a Fright Attack of intensity 21 - Rank, which the caster must roll equal to or under on 2d10)}} {{Vs=[[21-?{Target's Rank}]]}} {{roll=[[2d10]]}} {{desc=this Fright Attack drives him into a state of hopeless insanity. They becomes a mewling halfwit who can do no more than grin and gurgle unintelligibly. There is a drawback to this spell. In the round they casts it, the Warlock is blinded and consequently at –8 defence}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Panoply</div>
                        <div class="spell_duration">Duration: 1d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>An invisible force surrounds and protects the Warlock, giving him a +2 bonus to their Armour Factor. If they is wearing mail armour, for instance, they gets a total AF of 6 as long as the spell lasts.</p>
                        </div>
                        <div class="spell_button">
                            <span>Activate Panoply Spell:</span>
                            <select name="attr_panoply_activate">
                                <option value="0">Inactive</option>
                                <option value="1">Active</option>
                            </select>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Sigil of Destiny</div>
                        <div class="spell_duration">Duration: lasts one day</div>
                        <div class="spell_desc">
                            <span>Description</span><p>o use this spell, the Warlock predicts something that might befall him or one of their companions in the next twenty-four hours and ‘seals’ their prediction with the Sigil of Destiny. The idea is that by making this prediction they prevents it from coming true. The prediction usually concerns a fatality (“I will be killed by a swordblow” or “Sir Cuthbert will slip while climbing and die from the fall”), though the Warlock can predict a non-fatal occurrence (e.g. “I will be wounded by a sword-blow”). If the occurrence happens as predicted within twenty-four hours, the Sigil is activated and cancels out the effect. For example, suppose the Warlock predicted that they would be slain by a dragon and this in fact happens. The last fatal wound is immediately negated as if it had never happened and combat proceeds—no doubt with the dragon wondering why its fiery breath didn’t leave so much as a scorch mark on the armour of this Warlock. The following limitations apply to the Sigil of Destiny: </p>
                            <p>The prediction must indicate death/wounding/ incapacitation by:<p>
                            <ul>
                                <li>i. a WEAPON—the weapon type must be specified (sword, spear, etc); the effect of the Sigil will be to negate the crucial wound;</li>
                                <li>ii. a CREATURE—any nonhuman species; in this case, the weapon (if any) does not need to be specified; </li>
                                <li>iii. a SPELL—the spell level and attack mode (direct or indirect) must be specified; the Sigil prevents it from affecting the protected character; </li>
                                <li>iv. as a result of a failed roll on Reflexes, Strength (includes poisons) or Intelligence—the characteristic involved must be specified;</li>
                            </ul> 
                            <p>the Sigil allows the character to take the roll again, this time with automatic success. The prediction must relate to a single character, and only that character can be saved by the Sigil. Each casting of this spell is good for only one ‘extra life’ and is then used up — you cannot predict taking a wound from a Skeleton and thus acquire total invincibility against every Skeleton you encounter while exploring the Labyrinth of Aktrium. The spell only covers effects that are direct, instant and obvious. Consider a Warlock who, having predicted death from a sword-blow, is struck a non-fatal wound with a sword. The sword happens to be coated in a slow-acting poison from which they dies several hours later. The sword may be said to have brought about their death, but only indirectly (it was actually the poison that killed him). The Sigil would not come into effect in this case.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Vaporize</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster changes into a cloud of reddish mist. In this form, they is immune to normal (non-magical) weapons and to indirect-attack spells such as Energy Bolt. They can drift along at a rate of 3m per Combat Round and seep through even the smallest cracks, so only hermetic obstacles like Bastion can bar their way. While in vapour-form, the Warlock cannot cast spells, though durational spells that they cast beforehand continue to operate.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Call to Arms</div>
                        <div class="spell_range">Range: Self and up to 5 companions within 10m</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_origin">Origin: Khitai</div>
                        <div class="spell_rarity">Rarity: Common in Khitai, uncommon elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>With a cry of alarm and a few quick gestures, the Warlock girds themself and their companions for battle. This spell instantly wakes the targets, places their weapons in their hands, and dons their armour. The weapons and armour must be accessible to the targets and within 10m of the caster. This spell is a favourite with civilized Khitai Warlocks travelling through the dark and dangerous western lands.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_warlock6">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>
                <details>
                    <summary>Warlock Spells of Level Seven</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Nemesis</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell increases the effectiveness of any attack the Warlock makes on one selected character within 15m: they can adjust their Hit Rolls, Armour Bypass Rolls and damage scores against the character by 3 points each. Any spells they casts at the character gain +3 to speed or magical attack (whichever is applicable), and if the spell inflicts damage on its target, then that is increased by 3. If the Warlock can slay their chosen foe while the Nemesis spell lasts, they gets twice the regular experience points award (see p. 129)—but if the foe is killed by someone else or is still alive when the spell wears off, the Warlock immediately loses 1d10 experience points.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Pacify</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This causes up to 2–12 beings to cease hostilities against the caster (match caster’s magical attack vs targets’ magical defence). They will still be able to attack the caster’s allies, but can take no action which might harm him. Pacify is not an Enthrall spell and affected characters do not become friendly to the caster; they merely acquire a mental block that prevents them from attacking him. If the Warlock attacks a character they has Pacified, that character snaps out of the spell immediately.</p>
                        </div>
                        <div class="spell_button">
                            <span>Pacify Spell Number of Targets Roll:</span> <button type="roll" name="attr_pacify_targets" class="roll d6" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} attempts to affect many enemies with their enchanment}} {{subtitle=The spell tagets 2d6 victims}} {{roll=[[2d6]]}} " > </button>
                            <span>Pacify Spell Attack Roll: (roll once against each target)</span> <button type="roll" name="attr_slow" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name}'s spell magially saps at their victim's ability to think and move}} {{subtitle=Slow}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=This causes them to cease hostilities against the caster. They will still be able to attack the caster’s allies, but can take no action which might harm him. Pacify is not an Enthrall spell and affected characters do not become friendly to the caster; they merely acquire a mental block that prevents them from attacking him. If the Warlock attacks a character they has Pacified, that character snaps out of the spell immediately}}"> </button> 
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Runic Weapon</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A magical weapon appears in the caster’s hand or in the hand of a specified character within 12m. This weapon is the colour of blood and shimmers with a strange golden light. It must belong to one of the caster’s chosen Weapon Groups (see p. 38), so a Warlock who specialized in the use of battleaxe and bow could not use the spell to create a magic sword. The Runic Weapon is +3 (see p. 137) and unlike a Vorpal Blade it can be put down or freely handed to another character.</p>
                        </div>
                        <div class="spell_button">
                            <span>Activate Runic Weapon Spell: Please manually add your +3 weapon to your weapon list, this sheet is unable to do so for you.</span>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Spell Screen</div>
                        <div class="spell_duration">Duration: 1d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Other than its shorter duration, this is the same as the 7th-level Sorcery spell of the same name. A Spell Screen protects its caster from direct-attack spells by reducing any spell cast at him by 5 Magic Points. It does not affect spells cast by the Warlock themself. A spell which gets through the Screen with reduced strength may still affect the Warlock, but its effective magical attack against him is reduced by the difference between the spell’s level and the number of Magic Points remaining in it.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">The Trickster’s Hand</div>
                        <div class="spell_range">Range: touch</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>With this spell, the Warlock surrounds themself or one companion with a magical defence against missiles such as arrows or thrown rocks. Enchanted missiles that are shot at him simply drop out of the air at a distance of 3m. Non-magical missiles are more spectacularly affected: when such a missile gets to within 3m of the protected character, it stops in mid-air as though seized by an invisible hand. Suddenly, it reverses and flies back towards the person who shot it. The attacker is thus hit unerringly by their own missile, which penetrates armour in the normal way (Armour Bypass Roll as usual), although it inflicts 1 less Health Point of damage than usual. The spell defends only against missiles targeted at the protected character. An arrow or other projectile shot past him at another character will be unimpeded even if it passes closer than 3m. Any missile weighing more than 20kg (for instance, the shot of a trebuchet or siege catapult) will pass through the spell-barrier without being stopped.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Jupro’s Legion</div>
                        <div class="spell_range">Range: 20m radius around caster</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll</div>
                        <div class="spell_origin">Origin: Selentine priests of Mars</div>
                        <div class="spell_rarity">Rarity: Uncommon in Selentine empire, rare elsewhere</div>
                        <div class="spell_replaces">Replaces: Nemesis for Selentine Warlocks</div>
                        <div class="spell_desc">
                            <span>Description</span><p>With a sonorous chant, the Warlock empowers their allies with the strength of the ancient Selentine heroes. Any ally of the Warlock standing within 20m of him when they begins the chant gains a +2 to their Attack and Defence. This spell turns average troops into hardened warriors, and veteran fighters into legends. The chant that accompanies this spell is often taken up by surrounding units, giving them a feeling of invincibility and incidentally making it difficult to spot the unit that has been bolstered. Each character affected by the spell must continue to chant for the duration or the spell will cease to function on them. The Warlock is not affected by the spell and need not continue the chant.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_warlock7">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>     
                        </fieldset>
                    </div>
                </details>
                <details>
                    <summary>Warlock Spells of Level Eight</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Demon Path</div>
                        <div class="spell_duration">Duration: lasts two minutes</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This enables the Warlock literally to walk on air. The effect is accompanied by faint, glowing red ‘stepping stones’ that appear under the Warlock’s foot with each step they takes and then fade as they passes on to the next. They can move safely at normal walking speed, but if they tries to run or fight on the Demon Path they must roll under their Reflexes on 1d20 or fall to the ground below.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Energy Bolt</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A thunderous blast of scarlet energy rips through the air to strike 1–3 beings within 15m (spell’s speed of 17 vs targets’ evasion). If not dodged, the Energy Bolt inflicts 5d10 Health Points. This damage roll is reduced by the target’s Armour Factor if any—a Basilisk (AF 2) would take only 5d10 –2 HP, etc.</p>
                        </div>
                        <div class="spell_button">
                            <span>Energy Bolt Spell Number of Targets: </span><button type="roll" name="attr_energy_bolt_targets" class="roll d6" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name}'s spell forks from their fingertips}} {{subtitle=The spell will strike 1–3 beings within 15m}} {{roll=[[1d3]]}}"></button>
                            <span>Energy Bolt Spell Attack Roll:</span> <button type="roll" name="attr_energy_bolt" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=A thunderous blast of scarlet energy rips through the air}} {{subtitle=Energy Bolt}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[17-?{Target's Evasion}]]}} {{damage=[[5d10-?{Target's Armour Factor}]]}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Gauntlet</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>When this spell is cast, a disembodied gauntlet of glittering gold mail appears in the air within 6m of the Warlock. Gliding through the air at a speed of 24m per Combat Round, it will strike at the Warlock’s foes or perform other actions for him such as opening chests, fetching items, etc. It can be given a weapon (including a Runic Weapon) or can attack with its metal talons (d10, 4). It has attack 20, defence 18, Armour Factor 4, 12 Health Points, evasion 8. It is not affected by direct-attack magic. If its Health Points score is reduced to zero it falls from the air and vanishes in a blaze of red flames.</p>
                        </div>
                        <div class="spell_button">
                            <details>
                              <summary>Gauntlet</summary>
                              <ul>
                                <li>Attack: 20 <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=A disembodied gauntlet of glittering gold mail appears in the air, it glides through the air to attack}} {{subtitle=Gauntlet Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[20-?{Enemy Defence|0}]]}} {{abr=[[?{Armour Bypass Die|1d10}+?{Armour Bypass Bonus|0}]] }} {{Damage=[[?{Damage|4}+?{Damage Bonus|0}]] }}" name="attr_gauntlet_attack"></button></li>    
                                <li>Weapon: Metal Talons (d10, 4 points), or other weapon equipped</li>
                                <li>Defence: 18</li>
                                <li>Armour Factor: 4</li>
                                <li>Evasion: 8</li>
                                <li>Health Points: 12</li>
                                <li>Movement: 24m (25m)</li> 
                              </ul>
                            </details>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Killing Frenzy</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>While under the effect of this powerful combat spell the Warlock is able to make two attacks every Combat Round. The first must be taken at the point in the round when they would normally get their action (see p. 70) and the second at the very end of the round. The Killing Frenzy allows only multiple weapon attacks. If the Warlock does something else such as casting a spell or moving instead of attacking with a weapon they does not get a second action that round. Furthermore, only attacks with a weapon in which the Warlock specializes (i.e. which belongs to one of their chosen Weapon Groups) are affected.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Reincarnate</div>
                        <div class="spell_range">Range: touch</div>
                        <div class="spell_duration">Duration: lasts until dispelled</div>
                        <div class="spell_desc">
                            <span>Description</span><p>With this spell, any character who has been slain during the previous seven days can be brought back to life in the body of another. The target of the spell (whose body forms the ‘host’ for the Reincarnated soul) must be quiescent—unconscious or drugged—for the spell to work, and the caster must still match their magical attack against the target’s magical defence. If the spell works, the target’s body becomes possessed by the mind and soul of the slain character. Looks, Strength and Reflexes remain those of the host but in all other respects (skills, personality, memories, etc.) the Reincarnated character is dominant. Unlike an Amulet of Soul Storing (p. 143), this spell does not displace the original persona, which remains dormant within the body. In times of psychic stress (whenever the Reincarnated character has a direct-attack spell cast at him) the dormant ‘host’ persona may try to reassert possession of the body and suppress the ‘intruder’ persona. The Reincarnated character rolls 3d6, adds their rank, and subtracts the rank of the ‘host’; they must roll the final total or less on 2d10 in order to retain dominance. If they fails the roll, the ‘host’ persona regains mastery of their own body but the positions are merely reversed, the Reincarnated soul is not cast out but remains dormant within the body until banished by Dispel Magic or Terminate Enchantment. The advantage of the Reincarnate spell is that it may be used to bring a character back from the dead even if their original body is lost or destroyed. The disadvantages are twofold—first as explained above, and second that there is a small chance (5%) that the soul the caster places in the host body will not be the soul they intended. Reaching into the spirit world is like standing at the mouth of a vast dark cave and yelling for a friend lost within: someone—or something—else may come in answer to your call.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Rain of Death</div>
                        <div class="spell_range">Range: 20m radius within bow range</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_origin">Origin: Unknown</div>
                        <div class="spell_rarity">Rarity: Uncommon among Nomad Khanates, rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>o cast this spell, the Warlock must have a loaded bow or crossbow in their hands. The Warlock fires a single shot as they casts the spell; no attack roll is necessary as this is just part of the ritual. The missile splits into dozens of duplicates of itself in mid-air, filling a 20m radius at the point the shot would strike (determined by the caster, no attack roll required) with arrows/bolts. The spell's range is determined by the weapon used. Everyone in the area of effect must make an Evasion check against Speed 14 or be struck by 1d4 arrows. Damage from the spectral arrows is (1d6, 4). This spell is used by Khanate Warlocks in the employ of their lords and is commonly used during the hit-and-run charges the nomads are famous for.</p>
                        </div>
                        <div class="spell_button">
                            <span>Rain of Death Spell Attack Roll: (roll for each target in the 20m radius area)</span> <button type="roll" name="attr_rain_of_death_attack" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} fires a single shot as they casts the spell, and the missile splits into dozens of duplicates of itself in mid-air}} {{subtitle=Rain of Death, fills an aread 20m Radius}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[14-?{Target's Evasion}]]}} {{desc=This target is struck by [[1d4]] arrows}}"></button>
                            <span>Rain of Death Spell Damage Roll: (roll for each target hit successfully)</span> <button type="roll" name="attr_rain_of_death_damage" class="roll d6" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=The spectral arrows pin-cusion their victims}} {{subtitle=Rain of Death, roll once for each victim}} {{Armour Bypass Rolls=?{Number of missiles that hit|1, [[1d6]]|2, [[1d6]] [[1d6]]|3, [[1d6]] [[1d6]] [[1d6]]|4, [[1d6]] [[1d6]] [[1d6]] [[1d6]]} }} {{Damage per Missile=?{Number of missiles to do damage?|0, 0|1, [[1d6]]|2, [[1d6]] [[1d6]]|3, [[1d6]] [[1d6]] [[1d6]]|4, [[1d6]] [[1d6]] [[1d6]] [[1d6]]}}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_warlock8">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>
                <details>
                    <summary>Warlock Spells of Level Nine</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Flying Steed</div>
                        <div class="spell_duration">Duration: lasts three hours maximum (see below)</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell brings a flying Hippogriff to act as the Warlock’s steed for up to three hours. The spell can be cast only during the hours of night and terminates at sunrise if it has not expired before then. The Hippogriff has attack 20, defence 6, magical defence 10, and evasion 6. In combat, it will bite (d8 +2, 5) or claw (d12, 6). It has 20-30 Health Points (roll 2d6 +18) and is 8th rank-equivalent.</p>
                        </div>
                        <div class="spell_button">
                            <details>
                                <summary>Hippogriff Stats</summary>
                                <ul>
                                    <li>Attack: 20 <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name}'s Hippogriff attacks!}} {{subtitle=Hippogriff Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[20-(?{Enemy Defence|0})]]}} {{abr=?{Attack type|Bite, [[1d8+2]]|Claw, [[1d12]]}}} {{Damage=?{Weapon type|Bite, [[5]]|Claw, [[6]]}}}"> </button>
                                    </li>
                                    <li>Defence: 6</li>
                                    <li>Magical Defence: 10</li>
                                    <li>Evasion: 6</li>
                                    <li>Health Points: 2d6+18</li>
                                    <li>Rank: 8</li>
                                    <li>AF: 3 (0 vs magic weapons)</li>
                                    <li>Movement: 15m (30m) flying—90m</li>
                                    <li>Stealth: 10</li>
                                    <li>Perception: 11</li>
                                    <li>Notes: In horse form, stats as per Warhorse; can change between forms at will at night.</li>
                                </ul>
                            </details>
                            <details>
                                <summary>Warhorse Stats</summary>
                                <ul>
                                    <li>Attack: 17 <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name}'s Hippogriff (Warhorse form) attacks!}} {{subtitle=Warhorse Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[17-(?{Enemy Defence|0})]]}} {{abr=?{Attack type|Bite, [[1d8]]|Kick, [[1d10]]}}} {{Damage=?{Weapon type|Bite, [[4]]|Kick, [[6]]}}}"></button>
                                    </li>
                                    <li>Defence: 4</li>
                                    <li>Magical Defence: 4</li>
                                    <li>Evasion: 4</li>
                                    <li>Health Points: 1d6+16</li>
                                    <li>Rank: 5</li>
                                    <li>AF: 0 (3 wearing barding)</li>
                                    <li>Movement: 15m (30m)</li>
                                    <li>Stealth: 10</li>
                                    <li>Perception: 6</li>
                                </ul>
                            </details>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Invulnerability</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Warlock encloses themself and one companion inside an invisible barrier that is impervious to all spells, ring-effects, creatures, and all weapons. Attacks such as hypnosis or Fright Attacks can affect those protected by this spell. The Warlock can move around slowly (5m/round).</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Simulacrum</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Warlock can create their own double. The Simulacrum has all of the original’s normal stats and the current Magic Points score of the Warlock. The Warlock can see through their double’s eyes, and they obey their telepathic commands. There is a chance that if one takes a wound, the other may suffer the same effect.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Song of Battle</div>
                        <div class="spell_duration">Duration: d20 Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Song of Battle transforms the Warlock into a ferocious berserker. They becomes immune to direct-attack magic and gains +8 attack and +4 defence. Intelligent creatures up to 2nd rank and animals up to 4th rank-equivalent have a 30% chance of fleeing in panic if they attacks.</p>
                        </div>
                        <div class="spell_button">
                            <span>Activate Song of Battle Spell:</span>
                            <select name=attr_song_of_battle_toggle>
                                <option value="0">Inactive</option>
                                <option value="1">Active</option>
                            </select>
                            <span>Song of Battle Fear Effect Roll:</span> <button type="roll" name="attr_song_of_battle_fear" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name}'s Battle Form inspires fear in their foes}} {{subtitle=This affects Intelligent creatures up to 2nd rank and animals up to 4th rank-equivalent}} {{roll=[[1d100cs1cf100]]}} {{vs=[[30%]] }} {{desc=Enemies have a 30% chance of fleeing in panic if the warlock attacks them.}}" > </button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Teleport</div>
                        <div class="spell_range">Range: 100m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell enables the Warlock to transport themself instantaneously to somewhere within 100m. They can only teleport to a place which they can either see when they casts the spell or where they has been before.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Fog of War</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll</div>
                        <div class="spell_origin">Origin: Ereworn</div>
                        <div class="spell_rarity">Rarity: Uncommon in Ellesland, rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Ereworn is famous for its dark and deadly fogs. Peasant and noble alike fear the mists, and with good reason. This spell surrounds the Warlock in a magical mist that radiates 5m out in all directions and moves with the Warlock. The Warlock can be dimly seen by anyone outside the fog, resulting in a -2 Attack penalty to ranged attacks. The Warlock can make a Magical Attack against anyone entering the mist. If the attack fails, the target ignores the mist. If the attack is successful, the fog thickens about them, and the target is lost in the mist. Those lost in the mist must roll 1d8 each round and consult the following table: 1: Exit the fog. The target can re-enter the mist if they chooses and suffer a new magical attack.2-7: Wanders lost in the mist, unable to see.8: Encounter the Warlock. Once this is rolled, the target is no longer lost and can choose to fight or flee from the Warlock. Fleeing the Warlock provokes another magical attack as the target re-enters the mist. The fog warps space, and in theory, any number of people could become lost in it. If the Warlock wishes, they may choose to encounter a particular person instead of rolling randomly.</p>
                        </div>
                        <div class="spell_button">
                            <span>Fog of War Spell Attack Roll: (roll for each target in the area of efffect, or entering the fog)</span> <button type="roll" name="attr_fog_of_war_attack" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name}'s surrounds themself in a magical mist.}} {{subtitle=Fog of War, radiates 5m in all directions and moves with the Warlock}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The fog warps space, and in theory, any number of people could become lost in it. If the Warlock wishes, they may choose to encounter a particular person instead of rolling randomly.}}"> </button> 
                            <span>Fog of War Spell Effect Roll:</span> <button type="roll" name="attr_fog_of_war" class="roll d8" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name}'s fog thickens about them, and the target is lost in the mist.}} {{subtitle=Those lost in the mist must roll 1d8 each round}} {{roll=[[1d8]]}} {{desc=1: Exit the fog. The target can re-enter the mist if they chooses and suffer a new magical attack.
                            2-7: Wanders lost in the mist, unable to see.
                            8: Encounter the Warlock. Once this is rolled, the target is no longer lost and can choose to fight or flee from the Warlock. 
                            Fleeing the Warlock provokes another magical attack as the target re-enters the mist}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_warlock9">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>     
                        </fieldset>
                    </div>
                </details>
            </div>
            <div class="elementalist_spell_list">
                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                <input type="hidden" class="element-toggle2" name="attr_secondaryelement" value="" />
                <input type="hidden" class="element-toggle3" name="attr_tertiaryelement" value="" />
                <div class="earth_spell_list">
                    <details>
                        <summary>Earth Spells</summary>
                        <details>
                            <summary>Level 1</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Abundance</div>
                                <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The Elementalist must find a soft patch of earth into which to thrust their staff. They may then cast the spell onto the staff; any fruit, of the Elementalist’s choice, will emerge sprouting from the side of the haft. This will occur at the rate of one fruit per Round until the Spell Expiry Roll takes place. A whole feast of fruit may be provided in this way, given lucky rolls!</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span><p> If this spell is cast by a Darkness Elementalist, the fruit produced contains a medium poison, although superficially it is even more appetizing than the fruit produced above.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 2</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Spider Magic</div>
                                <div class="spell_range">Range: 10m</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This is essentially a concealing spell. The sorcerer may cast the spell on a well-used path, and immediately the undergrowth will spring up making it look disused; or they may cast the spell over an archway, and spiderwebs will appear, making it seem as if no one has passed in this direction for a long time. It will only affect an area in a 10m radius of the caster.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span><p> If this spell is cast by a Darkness Elementalist, the plant growth/spider webbing will not cease within a 10m radius but will continue to expand at a rate of 1m per Round until a Spell Expiry Roll takes effect. The plant growth is acidic and, if touched, will cause the loss of 1 Health Point or one point of permanent damage to a character’s Armour Factor if they is wearing armour. The spider’s web is similarly acidic.</p>
                                </div>
                            </div>
                            <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Feet (Roots) of the Earth</div>
                                <div class="spell_range">Range: Self</div>
                                <div class="spell_duration">Duration: Spell expiry applies</div>
                                <div class="spell_origin">Origin: Thuland</div>
                                <div class="spell_rarity">Rarity: Uncommon in Thuland, rare elsewhere</div>
                                <div class="spell_desc">
                                    <span>Description:</span> <p>This spell originates from the hidden villages in the north-eastern Pagan Mountains. These legendary villages were inaccessible except by their Elementalist protectors, but they syill exist tucked away to this day, unaware of the passing of years or the deaths of their ancient religions. Darkness has overtaken some of these villages, and terrible things happen to outsiders who find them.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The darkness version of this spell kills all plant life within 3m of the caster… this effect moves with the Elementalist.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 3</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Forest Murmurs</div>
                                <div class="spell_duration">Duration: 10 minutes</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This spell allows the caster to communicate with wayside plants. The plants’ memory only stretches back for twenty-four hours, and they have no sight so cannot describe the appearance of people or things that have passed their way. However, they will be able to report the number of people and the time they passed (whether daylight or at night), report snatches of their conversation, etc. They can also detect the aura of magic. Unfortunately, this method of communicating with inanimate bodies is not totally foolproof, and the GM should roll for a 10% chance of the information being a false rumour.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Forest Murmers Spell Effect Roll:</span> <button type="roll" name="attr_forest_murmers" class="roll twod10" value="/w gm&{template:custom} {{title=@{character_name} listens for Forest Murmurs}} {{subtitle=10% chance of incorrect information being passed on}} {{roll=[[1d100cs1cf100]]}} {{vs=[[10%%]] }}" > </button>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span><p> Any Darkness Elementalist, fearing that they is being followed, may cast the spell on a large stretch of path where they thinks their pursuers or enemies may stop. If they attempt to cast the normal Forest Murmurs spell, the rumours that the pursuers receive will always be false ones.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 4</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Create Bog</div>
                                <div class="spell_range">Range: 10m</div>
                                <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This is an aimed spell, and the caster must pit the spell’s speed of 12 against their opponent’s evasion. If the opponent fails to dodge, they will find that the ground at their feet has turned to a thick, viscous sludge which will temporarily immobilize him. Characters wishing to escape embogment should make a d20 roll under their Strength for each Round they are trapped. If they make the throw, the GM must assume they have managed to pull themselves free of the mire.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Create Bog Spell Attack Roll:</span> <button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} aims at the ground beneath their target, turning it to a thick, viscous sludge}} {{subtitle=Create Bog}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[12-?{Target Evasion}]]}} {{desc=If the opponent fails to dodge, the mud will temporarily immobilize him.}}" name="roll_create_bog"></button>
                                    <span>Create Bog escape roll:</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=The bog's victim attempts to struggle free}} {{subtitle=Roll Strength or below on 1d20}} {{roll=[[1d20]]}} {{vs=[[?{Target's Strength Score}]]}}" name="roll_create_bog_escape"></button>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                 Darkness: <p>The bog created is a bottomless one, and a character thus captured will sink without trace unless they pulls themself free or is otherwise saved. Both categories are subject to the normal Spell Expiry Rolls.</p>
                                </div>
                            </div>
                            <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Skadi’s Path</div>
                                <div class="spell_range">Range: Self (30m)</div>
                                <div class="spell_duration">Duration: Instant</div>
                                <div class="spell_origin">Origin: Mercanian Coast</div>
                                <div class="spell_rarity">Rarity: Uncommon on the Mercanian Coast, rare elsewhere</div>
                                <div class="spell_desc">
                                    <span>Description:</span> <p>The Elementalist must cast this spell while standing on stone or earth. Casting the spell while in a boat or on the first floor of a dwelling causes it to fail. On casting this spell the Elementalist is engulfed by the earth and stone at their feet, sinking into the ground. The Elementalist is transported to a point of the caster’s choosing within 30m of their current location as long as it is connected to the ground. Once at the chosen destination the earth heaves and spits out the Elementalist.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The darkness version of this spell causes stone to erupt from the ground in a 3 meter radius from the point the Elementalist leaves from. The attack has a speed of 12 and inflicts 2d6 points of damage reduced by the target’s armour factor.</p>
                                    <button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=The ground where @{character_name} was standing erupts violently}} {{subtitle=Anyone standing in the affected area must evade}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[12-?{Target Evasion}]]}} {{damage=[[2d6-?{Target's Armour Factor}]] }}" name="roll_dark_skadis_path"></button>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 5</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Roots</div>
                                <div class="spell_range">Range: 20m</div>
                                <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The sorcerer casts a directional spell that causes any roots around the vicinity of their opponent’s feet to spring from the ground and grasp at their ankles. The spell will affect any opponent within a 2m radius of where it lands. The number of roots appearing will vary depending on terrain:</p>
                                    <ul>
                                        <li>Forest: 10 roots</li>
                                        <li>Open ground, temperate climate: 6 roots</li>
                                        <li>Open ground, cold climate: 4 roots</li>
                                        <li>Open ground, dry climate: 2 roots</li>
                                        <li>Desert; indoors; stone flooring: 0</li>
                                    </ul>
                                    <p>Each root has to be evaded, and each has a speed of 16. Characters are immobilized when held by a root. If a character is held by four roots, assume that all their limbs have been pinned and that they is borne to the ground, unable to move until the Spell Expiry Roll takes place. A character who still has one hand free can attempt to hack themself clear by striking out at each root around him. The roots have 4 Health Points each.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Roots Spell Attack Roll: (roll once per root summoned)</span> <button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} calls the roots around their opponent’s feet to spring from the ground and grasp at them.}} {{subtitle=Affects a 2m radius. The number of roots varies depending on terrain}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[12-?{Target Evasion}]]}} {{desc=Characters are immobilized when held by a root. If held by four roots, all limbs have been pinned and they are unable to move until the spell ends. A character who still has at least one hand free can attempt to hack clear. Each root has 4 HP.}}" name="roll_roots_attack"></button>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span><p>The roots called up not only seize limbs but also strangle and crush: assume damage (1d6, 4) for each root in contact with the victim.</p>
                                    <span>Roots Spell Darkness Damage Roll: (roll once for each root attached)</span> <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=The grasping roots crush and strangle}} {{subtitle=roll ABR and damage for each root}} {{abr=[[1d6]]}} {{damage=[[4]]}}" ></button>
                                </div>
                            </div>
                            <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Earth Mother’s Womb</div>
                                <div class="spell_range">Range: Touch (voluntary targets only)</div>
                                <div class="spell_duration">Duration: 8 hours</div>
                                <div class="spell_origin">Origin: Thuland and Mercanian Coast</div>
                                <div class="spell_rarity">Rarity: Uncommon in Thuland and on the Mercanian Coast, rare elsewhere</div>
                                <div class="spell_desc">
                                    <span>Description:</span> <p>With a quick invocation to the Fay of the earth, the Elementalist or their chosen target sinks into the earth. The target stays beneath ground in a deep healing trance, protected from the outside world by 3m of earth and stone. Eight hours later, the target emerges from the earth refreshed and healed of 10 Health Points of damage. An Elementalist entombed in this manner regains all magic points from their Earth category due to their deep communion with the earth. The spell must be cast in an area that has at least 3m depth of earth or stone.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The darkness version of this spell is sometimes called Womb of Shadows and returns magic points to the Elementalist’s darkness category rather than the Earth category.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 6</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Rock Wall</div>
                                <div class="spell_range">Range: 10m</div>
                                <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>An Elementalist may cast this spell on any freestanding rock and make it grow to ten times its normal size, on the condition that the sorcerer is capable of physically lifting the original rock by themself. As a rough guide, only rocks half the size of the average human body can be lifted in this way. These rocks can be used to block up doorways, topple down on enemies, etc. The rocks will keep their blown-up shape until a Spell Expiry Roll takes place.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The same as above, but no Spell Expiry Roll takes place and the transformation is permanent. A Darkness Elementalist could entomb someone behind one of these large rocks forever.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 7</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Fissure</div>
                                <div class="spell_range">Range: 1m</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This spell causes a permanent 3m-wide fissure to appear in any surface in front of the caster. The fissure will extend 5m to either side of the caster and will be 5m in depth. Anyone standing in the affected area must evade the speed of the fissure (18) or fall into it (1d6 damage). Anyone trying to jump the fissure will find that they have to roll under their Reflexes on a d20 to succeed. A fissure will appear in any terrain, on the surface or underground.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Fissure Spell Attack Roll:</span> <button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} splits open the earth}} {{subtitle=Anyone standing in the affected area must evade, or fall into it}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[18-?{Target Evasion}]]}} {{damage=[[1d6]]}} {{desc=The permanent fissure is 3m wide, extends 5m to either side of the caster and is 5m in depth. Anyone trying to jump the fissure will find that they have to roll under their Reflexes on a d20 to succeed.}}" name="roll_fissure"></button>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The pit is filled with churning teeth of rock that will prove to be instantaneously fatal to anyone falling into it. A Spell Expiry Roll applies to these ‘teeth’, although in both cases, the fissure will remain a permanent feature.</p>
                                </div>
                            </div>
                            <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Master of Earth and Stone</div>
                                <div class="spell_range">Range: 20m</div>
                                <div class="spell_duration">Duration: Spell expiry applies (effects are permanent)</div>
                                <div class="spell_origin">Origin: Thuland and Glissom</div>
                                <div class="spell_rarity">Rarity: Common in Thuland and Glissom, rare elsewhere</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This spell enables the Elementalist to sculpt up to 1 cubic meter of earth or stone per round. This can be used to dig trenches, open holes in stone walls, undermine foundations, create tunnels, or even plough fields. Stone liquefies, reshapes, and re-solidifies under the effects of this spell. Legend tells that the ancient dark fortress of Aegis Fell, in northern Glissom, was created by some forgotten druid using this spell. Certainly, the ruin seems to have been carved whole from a rocky tor overlooking the Hadran Sea.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>Normal animals and insects will not approach earth or stone worked by this spell.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 8</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Give Up the Dead</div>
                                <div class="spell_range">Range: 10m</div>
                                <div class="spell_desc">
                                    <span>Description:</span><p>The caster calls up the buried remains of all those interred within a 10m radius. This applies to human corpses as well as animal ones. It does not apply to any body that has not been buried at least one lunara. These bodies may act as bodyguards or perform simple tasks for him, but they are subject collectively to a Spell Expiry Roll, so their usefulness may be of limited duration. The state of the temporarily resurrected bodies will vary somewhat, but assume that all humans disinterred have the following basic characteristics: </p>
                                    <p>For animal skeletons, assume they have half the Health Points, attack, defence, and magical defence that a living member of their species would have.</p>
                                    <span>Chances of raising the dead:</span>
                                    <ul>
                                        <li>Graveyard or other burial ground: 95% of producing 1-12 skeletons</li>
                                        <li>Ancient ruins, catacombs etc.: A 60% of producing 1-6 skeletons</li>
                                        <li>Open ground: 10% chance of producing 1-2 skeletons</li>
                                    </ul>
                                </div>    
                                <div class="spell_button">
                                    <button type="roll" class="roll twod10" name="attr_give_up_the_dead" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} calls up the buried remains of all those interred around them}} {{subtitle=Percentage chance of summoning any undead}} {{roll=[[1d100]]}} {{desc=Graveyard or other burial ground: [[95]]%
                                        Ancient ruins, catacombs etc.: [[60]]%
                                        Open ground: [[10]]% }}"> </button>
                                    <details>
                                        <summary>Skeleton</summary>
                                        <ul>
                                            <li>Attack: 11  <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name}'s Skeleton Warrior strikes}} {{subtitle=Skeleton Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[11-(?{Enemy Defence|0})]]}} {{abr=[[?{Armour Bypass Dice|1d3}]]}} {{Damage=[[?{Damage|2}]]}} {{desc=}}" name="attr_animate_bones"></button></li>
                                            <li>Weapon: Skeletons will fight unarmed, unless they can acquire a weapon.</li>
                                            <li>Defence: 5</li>
                                            <li>Evasion: 3</li>
                                            <li>Magical Defence: 3</li>
                                            <li>Health Points: 1d6+1</li> 
                                        </ul>
                                    </details>
                                </div>                    
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span><p>The necromancy is permanent, and the skeletons of man and beast will follow the spell caster until they are destroyed.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 9</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Tremor</div>
                                <div class="spell_range">Range: 20m</div>
                                <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This spell causes a violent tremor of the earth’s surface which increases in intensity as time elapses. The spell affects an area 10m across and anyone or anything in this radius will find that they are taking damage. The spell is subject to a Spell Expiry Roll.</p>
                                </div>
                                <div class="spell_button">
                                    <p>Consult the table below for damage:</p>
                                    <ul>
                                        <li>Round 1: A slight shaking in the earth’s surface is noticeable beneath the soles of the feet. The surface of liquids held in cups, etc. begins to ripple, birds leave their nests and take flight.</li>
                                        <li>Round 2: The earth is now vibrating so fast that the surface ripples. If it is covered by flagstones or other similar surface these will begin to gently undulate up and down. All animals in the area will cry out in fear. Fixtures on the wall will fall from their hangings and cups will overturn, spilling their contents.</li>
                                        <li>Round 3: The first round in which anyone still in the vicinity of the tremor will take damage. The shaking is now so intense it jars the bones, cracks paving stones and exposes the roots of trees. Damage 1d4 (armour doesn’t protect).<button type="roll" class="roll d4" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{subtitle=The shaking is now so intense it jars the bones, cracks paving stones and exposes the roots of trees.}} {{title=Tremor Round 3 Effect}} {{damage=[[1d4]]}}"></button></li>
                                        <li>Round 4: Human jaw bones are now chattering together like castanets, the walls of buildings are shaking, and cracks are appearing in them. Paving stones appear like waves rolling on a sea. It is nearly impossible to keep one’s footing (d20 roll under Reflexes). Damage 2d4 (armour doesn’t protect).<button type="roll" class="roll d4" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{subtitle=Human jaw bones are now chattering together like castanets, the walls of buildings are shaking, and cracks are appearing in them. Paving stones appear like waves rolling on a sea. It is nearly impossible to keep one’s footing.}} {{title=Tremor Round 4 Effect. Roll equal to, or under Reflexes on 1d20 to remain standing}} {{roll=[[1d20]]}} {{vs=[[@{finalreflexes}]]}} {{damage=[[2d4]]}}"></button></li>
                                        <li>Round 5: No one can stand up and hence escape the zone of the tremor. Destruction is assured for them and they will take a further 1d4 damage to the 2d4 damage per round that they are already taking. If in an enclosed space, ceiling masonry will now begin to fall, posing an additional threat. Fissures will appear in the earth, swallowing humans, trees, articles of domestic furniture, or whatever else is appropriate to the place.<button type="roll" class="roll d4" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{subtitle=No one can stand up and hence escape the zone of the tremor. Destruction is assured for them. If in an enclosed space, ceiling masonry will now begin to fall. Fissures will appear in the earth, swallowing up everything.}} {{title=Tremor Round 5 Effect}} {{damage=[[3d4]]}}"></button></li>
                                        <li>Round 6: Total destruction: normal wooden buildings (but not citadels or castles) will collapse in on themselves, the earth will split open revealing a great chasm into which all things will fall and where nothing can survive.<button type="roll" class="roll d4" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{subtitle=Normal buildings collapse. The earth splits open revealing a great chasm into which all things fall.}} {{title=Tremor Round 6 Effect}} {{damage=Nothing can survive}}"></button></li>
                                    </ul>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The effect of the spell is not subject to an Expiry Roll: the destruction of any wall or building in the area where this spell is cast is assured.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 10</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Summon the Man of Stone</div>
                                <div class="spell_range">Range: Self</div>
                                <div class="spell_duration">Duration: Spell expiry applies</div>
                                <div class="spell_origin">Origin: Thuland</div>
                                <div class="spell_rarity">Rarity: Uncommon in Thuland, rare elsewhere</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>If the Elementalist finds themself in a rocky area where there is plenty of free-standing stone, they may summon up a titanic figure made of rock who will serve him until the Spell Expiry Roll takes place. The Stone Man will be able to break through walls and always travels in a directly straight line once freed of its summoner’s control. It will disappear after exactly one hour.</p>
                                </div>
                                <div class="spell_button">
                                    <details>
                                        <summary>Stone Man</summary>
                                        <ul>
                                            <li>Attack: 30 <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name}'s Rock Elemental strikes}} {{subtitle=Rock Elemental Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[30-(?{Enemy Defence|0})]]}} {{abr=[[1d8+2}]]}} {{Damage=[[8]]}} {{desc=}}" name="attr_rock_elemental_attack"></button></li>
                                            <li>Weapon: Fist (d8 +2)</li>
                                            <li>Defence: 24</li>
                                            <li>Evasion: 8</li>
                                            <li>Magical Defence: 17</li>
                                            <li>Health Points: 24</li> 
                                        </ul>
                                    </details>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The creature summoned is different to that above. It battens on to the flesh of living men, delighting in grinding their bones between its stony jaws. Such a Stone Man released on a settlement could devastate its population within minutes, so it is perhaps fortunate that, like its relative above, this juggernaut only remains on this plane for one hour’s duration. Like the species above, the titan moves in straight lines and can burrow through cliffs and subterranean tunnels.</p>
                                </div>
                            </div>
                            <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Skadi’s Fortress</div>
                                <div class="spell_range">Range: Self</div>
                                <div class="spell_duration">Duration: 1 day</div>
                                <div class="spell_origin">Origin: Thuland</div>
                                <div class="spell_rarity">Rarity: Uncommon in Thuland, rare in Mercanian Coast and Ellesland, unknown elsewhere</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This spell gathers the earth and rock from around the caster and uses it to create a mighty fortress of stone and clay. The fortress consists of a three-story tower, with stone “cheval de frise” surrounding it in a 20m radius. The caster and their allies inside the fortress can rain death down from the tower battlements. The tower has 2m thick walls without any doors or windows. The Elementalist can choose to open a portal that allows allies to enter or exit the tower, although they must find their own way through the cheval de frise. This spell cannot be cast in areas that lack earth and stone. It is believed that the secret of Skadi’s Fortress was whispered to mortal man by the Goddess herself.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span><p>The fortress exudes a powerful sense of dread, and those below 2nd Rank cannot approach it or attempt to do it harm.</p>
                                </div>
                            </div>
                        </details>
                        <div class="spell-entry">
                            <fieldset class="repeating_spells_earth">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                            </fieldset>
                        </div>
                    </details>
                </div>
                <div class="air_spell_list">
                    <details>
                        <summary>Air Spells</summary>
                        <details>
                            <summary>Level 1</summary>
                            <div class="spell-entry">
                            <div class="spell_name">Cutting Power of the Mind</div>
                            <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                            <div class="spell_desc">
                                <span>Description</span><p>The caster invokes the power of air to enhance his thoughts, cutting through all distractions like a sharp knife. His Intelligence temporarily increases to 18, or, if already 18, to 19. In addition to the usual benefits of his newly increased Intelligence, he gains a +2 bonus on all attack rolls when wielding any ranged weapon; he is capable of influencing its movement even when it is in flight, using the power of his mind alone.</p>
                            </div>
                            <div class="spell_button">
                                <span>Activate Cutting Power of the Mind Spell:</span>
                                <select name="attr_cutting_power_of_the_mind_toggle">
                                    <option value="0">Inactive</option>
                                    <option value="1">Active</option>
                                </select>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                                <span>Darkness:</span><p>Darkness: As above, except that the ranged weapon gains a +1 bonus to Damage also.
                            </div>
                        </div>
                            <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                        <div class="spell-entry playerspell">
                            <div class="spell_name">Leaf on the Wind</div>
                            <div class="spell_range">Range: Self</div>
                            <div class="spell_duration">Duration: Spell expiry applies</div>
                            <div class="spell_origin">Origin: Mercanian Coast</div>
                            <div class="spell_rarity">Rarity: Common on the Mercanian Coast, uncommon elsewhere</div>
                            <div class="spell_desc">
                                <span>Description</span><p>A hundred years ago, the cliffs and fjords of the Mercanian Coast were home to a number of brutal deaths, as followers of the True Faith took to hurling “devil worshippers” from the cliff tops. This spell saved the lives of a number of Völva Elementalists during those dark days. An Elementalist under the effects of this spell is buoyed up by the spirits of the air while falling and takes no damage from any fall… unless of course the spell ends while he is still in the air. Falling while under the effects of this spell is at a rate of 10m per round.</p>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                                <span>Darkness:</span> <p>The darkness version of this spell can be cast on another person by touch</p>
                            </div>
                        </div>
                      </details>
                      <details>
                          <summary>Level 2</summary>
                          <div class="spell-entry">
                            <div class="spell_name">Stargaze</div>
                            <div class="spell_duration">Duration: 1 day</div>
                            <div class="spell_desc">
                                <span>Description</span><p>The element of Wind and Air leads one’s thoughts naturally to the sky. Stargaze is a sorcerous ability to reduce the effect of hardship on the caster’s mind, making him able to bear hunger for a week without visibly weakening, and enabling him to stand in combat although his Health Point total may have gone below 0. If the caster should continue in combat until he is at –3 he will collapse dead. Stargaze will also allow the caster to hold his breath underwater for twice the usual time, endure twice the strength of heat as any other man, twice the cold etc.</p>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                                <span>Darkness:</span><p> The caster may negate the effects of adversity altogether. Wounds inflicted on him will cause no reduction in his Health Points, nor will fire and lack of air. Food will act like a poison on the body. At the same time, the caster will not be able to affect anyone or anything else physically; thus, he will not be able to enter into combat or even open a door although he will be able to pass through a Wall of Fire totally unharmed. This condition will last for exactly one day. At the end of that day the caster must make a roll against a magical attack of 1d6 +10 or he will find that his body begins to evaporate into a vapour until all that is left of him is a thin wraith of ethereal smoke.
                                Roll at the end of the day:</p>
                                <span>Stargaze Darkness Spell Attack Roll:</span><button type="roll" name="attr_dark_stargaze" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} fights the dark desire to simply fade from existence}} {{subtitle=Stargaze Darkness effect}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[(1d6+10)-@{finalmagicaldefence}]]}} {{desc=If the spell succeeds against the caster, their body begins to evaporate into a vapour until all that is left of them is a thin wraith of ethereal smoke}}"> </button> 
                            </div>
                          </div>
                      </details>
                      <details>
                          <summary>Level 3</summary>
                          <div class="spell-entry">
                            <div class="spell_name">False Rumours</div>
                            <div class="spell_desc">
                                <span>Description</span><p>An aural version of the various Illusion spells used by other magicians, in which the caster subdues the spirits of the air and makes them set up aural illusions to mislead the enemy. Any distortion may be added to the sound (scraps of a conversation, the clank of armour, the sound of falling bodies, marching armies, song, etc.) to make these noises in some way threatening to the person listening to them.</p>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                                <span>Darkness:</span><p> The sound created is always that of a demoniacal moan that will turn the hearer mad (see page 124) if they fail to resist a Fright Attack of 14 (see page 122).</p>
                                <span>Fright Attack Roll:</span><button type="roll" name="attr_false_rumours_fright_attack" class="roll d12" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} meets their opponent’s gaze, they try to resist its terrifying power}} {{subtitle=False Rumours Darkness Effect}} {{roll=[[2d10]]}} {{Vs=[[14-?{Target's Rank}]]}}"></button>
                            </div>
                          </div>
                      </details>
                      <details>
                        <summary>Level 4</summary>
                        <div class="spell-entry">
                            <div class="spell_name">Windwall</div>
                            <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                            <div class="spell_desc">
                                <span>Description</span><p>The caster may create a wall of wind around his body, or use the wall to block a corridor immediately in front or behind him. The wall of wind thus created is 1m thick and stretches for more than 10m to either side of the caster of the spell. Stepping into the wall is rather like stepping into the centre of a typhoon: on the first round anyone doing so will take 1d8 points of damage (armour does not protect) and will continue to do so for as long as they remain in the wall. The only way to break through the wall is to roll under one’s Strength on 2d20. The wall is subject to a normal Spell Expiry Roll.</p>
                            </div>
                            <div class="spell_button">
                                <span>Windwall Spell Damage Roll:</span> <button type="roll" name="attr_windwall_damage" class="roll d8" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=Stepping into the wall of wind is rather like stepping into the centre of a typhoon}} {{subtitle=Windwall Damage Effect}} {{roll=[[1d8]]}}"></button>
                                <span>Windwall Attempt to Break Through Roll:</span> <button type="roll" name="attr_windwall_break" class="roll d20" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=The only way to break through the wall is through brute force}} {{subtitle=Windwall Break Through Check}} {{roll=[[2d20]]}} {{vs=[[?{Strength Score}]]}}"></button>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                                <span>Darkness:</span><p> The wall will advance forward at the rate of 1m per round and therefore can be used offensively against people trapped at the ends of corridors, etc.</p>
                            </div>
                        </div>
                        <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                        <div class="spell-entry playerspell">
                            <div class="spell_name">Chosen of Tor</div>
                            <div class="spell_range">Range: Self</div>
                            <div class="spell_duration">Duration: Spell Expiry Roll</div>
                            <div class="spell_origin">Origin: Mercanian Coast</div>
                            <div class="spell_rarity">Rarity: Uncommon on the Mercanian Coast, rare elsewhere</div>
                            <div class="spell_replaces">Replaces: Windwall for Mercanian Elementalists</div>
                            <div class="spell_desc">
                                <span>Description</span><p>The Elementalist calls upon the spirits of the air to protect him. Anyone attacking the Elementalist takes a -4 penalty to his Attack score, as a small hurricane blows up around him and the spirits howl their anger in his ears. The Völva of the Mercanian coast have made good use of this spell in the last few centuries. What was once used as a potent raiding tool is now, more often than not, used to protect Mercanian trading vessels from pirate attack.</p>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                                <span>Darkness:</span> <p>The spirits of the air summoned by Darkness Elementalists are vengeful, and whisper dark secrets in the ears of those attacking him. The Darkness Elementalist makes a Magical Attack, and if he succeeds then the victim is inflicted with insanity. Roll on the Madness Table (see Dragon Warriors, p. 124)</p>
                                <button type="roll" class="roll twod10" name="attr_dark_chosen_of_tor" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} summons vengeful dark spirits of the air, they whisper dark secrets in the ears of those attacking the caster.}} {{subtitle=Chosen of Tor Madness Attack}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{Degree of Insanity=[[1d6]]}} {{Type of Madness=[[1d10]]}} {{desc=see Dragon Warriors, p. 124}}"> </button> 
                            </div>                      
                        </div>
                    </details>
                    <details>
                        <summary>Level 5</summary>
                        <div class="spell-entry">
                            <div class="spell_name">Summon the Host of the Air</div>
                            <div class="spell_range">Range: 1 mile</div>
                            <div class="spell_desc">
                                <span>Description</span><p>The caster attracts to himself all those creatures currently in flight through the medium of air in a one-mile radius. These he may instruct to do as he wishes, getting them to attack his enemies or instructing them to spy out the land, etc. The caster will be able to communicate in simple terms with the summoned creatures. Some terrains may not, of course, be suitable for various types of creature. There may not be even a single insect in an arctic waste or an arid desert, but assume the following in a temperate climate:</p>
                                <p>1d6 Result:</p>
                                <ul>
                                    <li>1: A few miscellaneous insects.</li>
                                    <li>2: Insects as above and one or two birds.</li>
                                    <li>3: A swarm of insects and one or two birds.</li>
                                    <li>4: A cloud of stinging insects.</li>
                                    <li>5: A bird of prey that could attack an opponent.</li>
                                    <li>6: A flight of birds of prey, capable of carrying the caster in flight.</li>
                                </ul>
                            </div>
                            <div class="spell_button">
                                <span>Summon the Host of the Air Effect Roll: </span><button type="roll" name="attr_host_of_the_air" class="roll d6" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} attracts to themself all those creatures currently in flight through the medium of air in a one-mile radius}} {{subtitle=Roll 1d6 to see what is attaracted}} {{roll=[[1d6]]}} {{desc=1: A few miscellaneous insects.
                                2: Insects as above and one or two birds.
                                3: A swarm of insects and one or two birds.
                                4: A cloud of stinging insects.
                                5: A bird of prey that could attack an opponent.
                                6: A flight of birds of prey, capable of carrying the caster in flight.}}"></button>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                                <span>Darkness:</span><p> The caster always manages to summon a swarm of insects and a flight of birds of prey to himself (as in 6 above).</p>
                            </div>
                        </div>
                    </details>
                    <details>
                        <summary>Level 6</summary>
                        <div class="spell-entry">
                            <div class="spell_name">Intangibility</div>
                            <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                            <div class="spell_desc">
                                <span>Description</span><p>This spell allows the caster to pass through the thickest of walls as if they were made of air: no barrier will be able to stop him apart from enchanted metal. (which will cause 1d6 points of damage to his incorporeal body). The spell is risky, particularly if the caster wishes to travel some distance underground or through a wall. The spell is subject to a normal Expiry Roll and if it wears off while the magician is travelling through something solid, he will be instantly crushed to a pulp. While intangible, the caster cannot cause any damage in combat etc.</p>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                                <span>Darkness:</span> <p>Can be reversed to affect an opponent, rendering them ineffective in combat.</p>
                                <span>Intangibility Darkness Spell Attack Roll:</span> <button type="roll" class="roll twod10" name="attr_dark_intangibility" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to alter their victim's physical state}} {{subtitle=Intangibility Darkness effect}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The victim becomes as if they were air. Enchanted metal will deal 1d6 damage. If the spell wears off while traveling through a solid object, the victim will be crushed.}}"> </button>  
                            </div>
                        </div>
                        <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                        <div class="spell-entry playerspell">
                            <div class="spell_name">Winds of Change</div>
                            <div class="spell_range">Range: 10m</div>
                            <div class="spell_duration">Duration: Spell expiry roll</div>
                            <div class="spell_origin">Origin: Desert of Songs</div>
                            <div class="spell_rarity">Rarity: Common in the Desert of Songs, rare elsewhere</div>
                            <div class="spell_desc">
                                <span>Description</span><p>This spell targets one being and changes its thinking about a single topic named by the caster. The Elementalist whispers the new point of view and a gust of wind carries it to the target. A standard Magical Attack versus Magical Defence roll is made. Examples of new points of view include; “I am not a threat”, “I am too dangerous to attack”, and “the oasis should be shared”. When the spell expires, the target returns to his previous thinking, but still retains an understanding of the enforced point of view. This new understanding sometimes opens minds that would otherwise be closed to change.</p>
                            </div>
                            <div class="spell_button">
                                <span>Winds of Change Spell Attack Roll:</span> <button type="roll" class="roll twod10" name="attr_winds_of_change" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} whispers on a gust of wind and it is carried to the target}} {{subtitle=Gust of Wind Attack}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=When the spell expires, the target returns to his previous thinking, but still retains an understanding of the enforced point of view. This new understanding sometimes opens minds that would otherwise be closed to change.}}"> </button>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                                <span>Darkness:</span><p> The darkness version of this spell never leads to increased understanding. In addition, the spell can only inspire negative thoughts.</p>
                            </div>                   
                        </div>
                        </details>
                      <details>
                          <summary>Level 7</summary>
                        <div class="spell-entry">
                            <div class="spell_name">Garrotte</div>
                            <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                            <div class="spell_desc">
                                <span>Description</span><p>This spell (which must be dodged—speed 19) causes a mysterious constricting band to appear around the throat of an opponent, exerting enough pressure to throttle them if the caster so wishes, although the pressure can be relaxed or increased as he desires. The only way to release the grip of the garrotte is for the victim to roll under his Strength on 3d20, in which case he has broken the cord. Otherwise assume 3 Health Points of damage taken by the victim each round until he is dead.</p>
                            </div>
                            <div class="spell_button">
                                <span>Garotte Spell Attack Roll:</span> <button type="roll" class="roll twod10" name="attr_garotte" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} causes a mysterious constricting band to appear, attempting to encircle the throat of an opponent,}} {{subtitle=Garotte Speed vs Evasion}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[19-?{Target's Evasion}]]}} {{damage=[[3]] HP per round}} {{desc=The caster can relax or increase the pressure as he desires.}}"> </button>
                                <span>Garotte Victim Escape Roll:</span> <button type="roll" class="roll d20" name="attr_garotte_escape" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name}'s Garotte vicitm attempts to escape}} {{subtitle=The only way to release the grip of the garrotte is for the victim to roll under his Strength on 3d20, in which case he has broken the cord.}} {{roll=[[3d20]]}} {{vs=?{Victim's Strength Score}}"> </button>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                                <span>Darkness:</span> <p>If the victim does not evade the spell, the air implodes around his head causing 1d20 points of damage automatically and leaving the victim deaf.</p>
                                <span>Garotte Darkness Spell Effect:</span> <button type="roll" class="roll d20" name="attr_garotte_escape" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=The air implodes around @{character_name}'s victim's head}} {{subtitle=Garotte Darkness Effect}} {{damage=[[1d20]]}} {{desc=The vicitim is also struck deaf}}"> </button>
                            </div>
                        </div>
                        </details>
                        <details>
                            <summary>Level 8</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Flight</div>
                                <div class="spell_duration">Duration: 1 hour</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The caster may use this on himself and fly through the air for one hour. When in flight, assume that the caster can move through the air at twice normal movement rate. He may carry anything up to his normal encumbrance, but this will usually preclude carrying other people unless he is either very strong or has shed all his equipment.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>Darkness Elementalists may cast Flight on to other people (their magical attack vs magical defence) but can only control that person’s flight whilst they are still in sight. The controlled persons cannot in any way control their own flight. Indeed, the Darkness Elementalist may find putting flight on to one of his enemies and then flying them into the ground from a great height a convenient way of disposing of them.</p>
                                    <span>Flight Spell Darkness Attack Roll:</span> <button type="roll" class="roll twod10" name="attr_dark_flight" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to force another to take flight}} {{subtitle=Flight Darkness effect}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The Darkness Elementalist can only control that person’s flight whilst they are still in sight. The controlled persons cannot in any way control their own flight.}}"> </button>  
                                </div>
                            </div>
                        <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">(Summon) Rukh</div>
                                <div class="spell_range">Range: 100m</div>
                                <div class="spell_duration">Duration: Spell expiry applies</div>
                                <div class="spell_origin">Origin: Batubatan</div>
                                <div class="spell_rarity">Rarity: Uncommon in the Desert of Songs, Khitai, and Batubatan, rare elsewhere</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This spell summons forth one of the legendary Rukhs, giant birds whose mastery of the skies is unrivalled. The great creature has a wingspan of over 50m and is capable of carrying away an adult elephant in its massive talons. The Rukh can be ordered to attack the Elementalist’s foes—typically by carrying them high in the air and dropping them—or to carry the Elementalist and his companions on its massive back. Anyone on the Rukh’s back when the spell expires will float to the ground supported by a gentle wind.</p>
                                </div>
                                <div class="spell_button">
                                <details>    
                                    <summary>Rukh Stats:</summary>
                                    <ul>
                                        <li>Attack: 24 <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} summons forth one of the legendary Rukhs to attack}} {{subtitle=Rukh Talon Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[24-(?{Enemy Defence|0})]]}} {{abr=[[1d10]]}} {{damage=[[7]]}} {{desc=The Rukh will attempt to carry them high in the air and drop them}}" name="attr_rukh_attack"></button></li>
                                        <li>Talons (d10, 7)</li>
                                        <li>Defence: 18</li>
                                        <li>Magical Defence: 12</li>
                                        <li>Evasion: 5</li>
                                        <li>Armour Factor: 3</li>
                                        <li>Stealth: 10</li>
                                        <li>Perception: 16</li>
                                        <li>Health Points: 30</li>
                                    </ul>
                                </details> 
                                </div>
                                <div class="spell_background">
                                    <p>This spell was created by an isolated community of Elementalists living on an island off the coast of Batubatan. The peaceful Elementalists were under constant attack from raiders, and so they sent a flight of Rukhs to carry off the pirates' ship. The vessel was found 50 miles inland, speared on a mountaintop.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>The Rukh’s shadow causes a 1d6 Fright Attack (see Dragon Warriors, p. 122) on anyone it falls upon.</p>
                                    <button type="roll" class="roll twod10" name="attr_dark_chosen_of_tor" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=The Rukh's shadow looms ominously overhead}} {{subtitle=Rukh's Shadow Fright Attack}} {{roll=[[2d10]]}} {{vs=[[1d6-?{Target's Rank}]]}}"></button>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 9</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Spin</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>A character may cast this on an opponent (who has a chance to resist its effects). If they fail they will begin to rotate, slowly rising into the air. The rotation of their body will become quicker and quicker until they eventually fly apart limb from limb. If a Spell Expiry takes place they will immediately return to the earth, over which they will have been spinning at a height of 2m. Assume the character will take 1d2 damage per round of spinning (no armour protection).</p>
                                </div>
                                <div class="spell_button">
                                    <span>Spin Spell Attack Roll:</span> <button type="roll" class="roll twod10" name="attr_spin" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} causes the air to twist rapidly around their opponent, trying to lifet them off their feet}} {{subtitle=Spin Spell Attack}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{damage=1d2 per round, [[1d2]]}} {{desc=If they fail they will begin to rotate, slowly rising into the air. The rotation of their body will become quicker and quicker until they eventually fly apart limb from limb. If a Spell Expiry takes place they will immediately return to the earth, over which they will have been spinning at a height of 2m.}}"> </button> 
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>The effect is the same, apart from the fact that the victim will bore down into the ground causing 1d6 damage per round (no armour protection).</p>
                                    <span>Spin Darkness Spell Attack Roll:</span> <button type="roll" class="roll twod10" name="attr_dark_spin" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} causes the air to twist rapidly around their opponent, trying to drill them into the earth}} {{subtitle=Darkness Spin Spell Attack}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{damage=1d6 per round, [[1d6]]}} {{desc=If they fail they will begin to rotate, slowly boring into the earth. The rotation of their body will become quicker and quicker until they eventually rip apart limb from limb.}}"> </button> 
                                </div>
                            </div>
                        </details>
                      <details>
                            <summary>Level 10</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Banshee</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The Elementalist may summon a Banshee, an animate vortex of violent, shrieking wind. The Banshee will deafen anyone within a 10m radius apart from the spell-caster. The Elementalist may direct the Banshee to attack one opponent specified by himself. The Banshee will pursue this victim until it has achieved its goal, which is to implode upon its victim. This implosion causes immediate death on the victim’s part. Summoning a Banshee requires the expenditure of 5–50 (5d10) Experience Points on the part of the caster.</p>
                                </div>
                                <div class="spell_button">
                                    <details>
                                        <summary>Banshee</summary>
                                        <ul>
                                            <li>Attack 17, Implosion (Death) <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} summons an animate vortex of violent, shrieking wind which deafens everybody around them.}} {{subtitle=The Banshee's arrival deafens anyone within a 10m radius ofthe spell-caster. 
                                            The Elementalist may direct the Banshee to attack one specified opponent. 
                                            It will pursue this victim until it has imploded on them.}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[17-(?{Enemy Defence|0})]]}} {{desc=This implosion causes immediate death on the victim’s part.}}" name="attr_banshee_attack"></button></li>
                                            <li>Movement: 25m</li>
                                            <li>Defence 12 </li>
                                            <li>Evasion 8</li>
                                            <li>Magical Defence 16 </li>
                                            <li>Health Points 18 (immune to nonmagical weapons)</li>
                                        </ul>
                                    </details>
                                    Banshee Caster XP Loss: <button type="roll" class="roll twod10" name="attr_banshee_expenditure" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} feels the draining effect of casting such a powerful spell}} {{subtitle=}} {{roll=[[5d10]]}} {{desc=Summoning a Banshee requires the expenditure of 5–50 (5d10) Experience Points on the part of the caster.}}"> </button>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>The Banshee thus summoned will not be satisfied by just one victim but will run amok, its shrieking increasing as it sucks in the screams of its victims. It will only dissipate once it has destroyed one hundred victims. A Banshee summoned by a Darkness Elementalist costs the caster 10–100 (10d10) Experience Points.</p>
                                    <span>Banshee Darkness Caster XP Loss:</span> <button type="roll" class="roll twod10" name="attr_dark_banshee_expenditure" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} feels the draining effect of casting such a powerful spell}} {{subtitle=}} {{roll=[[10d10]]}} {{desc=Summoning a Banshee requires the expenditure of 10-100 Experience Points on the part of the Darkness Elementalist.}}"> </button>
                                </div>
                            </div>
                        </details>
                        <div class="spell-entry">
                            <fieldset class="repeating_spells_air">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>   
                            </fieldset>
                        </div>
                    </details>
                </div>
                <div class="water_spell_list">
                    <details>
                        <summary>Water Spells</summary>
                        <details>
                            <summary>Level 1</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Rain</div>
                                <div class="spell_range">Range: Self</div>
                                <div class="spell_duration">Duration: 5 minutes</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The caster causes a light rainfall in a small area of 5m radius, yielding two gallons of drinkable water if collected. The rain can also be used to extinguish the lights of foes.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span><p> The water is mildly acidic; treat as a mild poison if drunk or a weak acid if exposed to armour for a long time.</p>
                                </div>
                            </div>
                            <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Marid’s Gift</div>
                                <div class="spell_range">Range: Touch</div>
                                <div class="spell_duration">Duration: Instant</div>
                                <div class="spell_origin">Origin: Marid giants</div>
                                <div class="spell_rarity">Rarity: Common in the Desert of Songs or Azure Coast; rare elsewhere</div>
                                <div class="spell_replaces">Replaces: Rain for the Water Elementalists of those regions</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This spell causes a body or container of water touched by the Elementalist to be purified and drinkable. It removes poisons, impurities, parasites, and the effects of stagnancy. When cast on salt water, the spell makes it drinkable, though it still retains a salty tang. The spell can affect a single pool or container no greater than 10m x 10m x 2m; this is usually enough to purify the water from an oasis. The water from wells or pools remains pure until it refills naturally. This spell was a gift from the Marid giants of the Azure Coast to the storm-wizards of the Desert of Songs. The Marid giants are a wise and peaceful race, who suffered greatly at the hands of Kappa invaders until the storm-wizards intervened on their side.</p> 
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>The darkness version of this spell reverses the effect above, polluting an oasis or water vessel. Use of this spell has in the past caused open warfare between the tribes of the Desert of Storms.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 2</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Wave Mastery</div>
                                <div class="spell_range">Range: 10m</div>
                                <div class="spell_duration">Duration: Spell expiry roll</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The Elementalist controls the movement and direction of waves within a 10m radius, propelling ships or reducing wave activity.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>Propel other craft away and create a mini tidal wave of 6m height aimed at a target, damaging small boats (1d6 Ship Points loss).</p>
                                    <span>Darkness Wave Mastery Darkness Spell Ship Damage Roll:</span><button type="roll" class="roll d6" name="attr_dark_wave_mastery" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} summons a 6m wave, aimed at a their target}} {{subtitle=Wave Mastery Darkness Effect}} {{damage=[[1d6]] Ship Points}} {{desc=This attack damages small boats}}"></button>
                                </div>
                            </div>
                        </details>    
                        <details>
                            <summary>Level 3</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Icewall</div>
                                <div class="spell_range">Range: 2m</div>
                                <div class="spell_duration">Duration: Spell expiry roll</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The caster may throw up a wall made of solid ice in front of him, around himself, or around an opponent as long as they are standing within the 2m radius of the spell’s effect. The ice wall is 1m thick and will extend 5m to either side of the caster. If the spell is used offensively the victim will be entrapped if he fails to evade the spell speed of 10. It will take one man-hour to break through the ice wall with a weapon although the ice will have completely melted within six hours in a temperate climate.</p>
                                </div>
                                <div class="spell_button">
                                    Iceewall Spell Attack Roll: <button type="roll" class="roll twod10" name="attr_icewall" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} attempts to throw up a wall made of solid ice to surround an opponent}} {{subtitle=Icewall Entrap Attack}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[10-?{Target's Evasion}]]}}"></button>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span><p> The ice barrier does not melt and is more impervious to the blows of humanity. As a spell of entrapment it is more useful than the version above. It will take one day for the victim to break through the barrier (assuming he has a sword, axe or mace to use for this purpose) and the ice itself will not melt even in the brightest sunshine.</p>
                                </div>
                          </div>
                        </details>
                        <details>
                            <summary>Level 4</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Walk on Water</div>
                                <div class="spell_range">Range: Self</div>
                                <div class="spell_duration">Duration: Spell expiry roll applies</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The Elementalist may cast this spell on himself to become able to walk on any watery surface as if it were solid ground. Unfortunately this spell is subject to an Expiry Roll, so many an Elementalist has been discomfited by suddenly disappearing beneath the surface on which he was treading in front of his friends. It is therefore perhaps advisable for use on short crossings only.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span><p> The Spell Expiry Roll does not apply to the Darkness version of the above spell: instead the caster may walk on the water for exactly one hour before the effects of the spell wear off.</p>
                                </div>
                            </div>
                            <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Lyrr’s Cleansing</div>
                                <div class="spell_range">Range: Touch</div>
                                <div class="spell_duration">Duration: Instant</div>
                                <div class="spell_origin">Origin: Unknown</div>
                                <div class="spell_rarity">Rarity: Uncommon throughout Legend</div>
                                <div class="spell_replaces">Replaces: Waterwalk</div>
                                <div class="spell_desc">
                                  <span>Description</span><p>Running water is a powerful tool for removing enchantments. This spell works in much the same manner as the Sorcerer spell Dispel Magic, except that it affects a single target that the caster must immerse in running water for the magic to work.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The darkness version of this spell requires stagnant water to work.</p>
                                </div>
                            </div>
                        </details>    
                        <details>
                            <summary>Level 5</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Ice Spear</div>
                                <div class="spell_range">Range: Normal javelin range</div>
                                <div class="spell_duration">Duration: Instant</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>A glittering shard of ice, the shape and length of a normal throwing spear, will appear in the Elementalist’s hand. No matter what the caster’s normal attack is, it will be 20 with this weapon, reflecting the magical homing qualities it is imbued with. The spear is effective over the normal ranges for a javelin (p. 69) and will do (d10, 8). It will instantly dissolve on impact with the target.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Ice Spear Ranged Attack Roll</span><button type="roll" class="roll d20" name="attr_ice_spear" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} hurls a glittering shard of ice at their foe}} {{subtitle=Ice Spear Attack}} {{attackroll=[[1d20]]}} {{attackvsranged=[[20-?{Range Modifier|Short 15m, 0|Medium 25m, 3|Long 35m, 7} - ?{Small or Crouching target?|No, 0|Yes, 2} - ?{Is the Target moving?|No, 0|Slowly, 2|Quickly, 4} -(?{Light Conditions|Normal, 0|Poor, 3|Other, ?{Other&amp;#125;}) + (?{Miscellaneous Modifiers, can be a positive (improves chance to hit) or a negative (decreases chance to hit)|0})]] }} {{abr=[[1d10+@{finalrangedabrbonus}]]}} {{damage=[[8+@{finalrangeddmgbonus}]]}} {{desc=The Ice Spear instantly dissolves on impact with the target.}}"></button>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="">
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>The same as above, except that if the ice spear penetrates armour then the victim is subjected to a direct attack spell (caster’s magical attack vs victim’s magical defence) of Paralysis (see p. 93).</p>
                                    <span>Ice Spear Darkness Spell Effect Roll:</span> <button type="roll" class="roll twod10" name="attr_dark_ice_spear" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=The Ice Spear begins to freeze its victim's limbs}} {{subtitle=Ice Spear Darkness Effect}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The victim collapses at once, but remains conscious}}"></button>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 6</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Breathe Under Water</div>
                                <div class="spell_range">Range: Self</div>
                                <div class="spell_duration">Duration: 10 minutes</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The caster will find that without holding his breath he is able to stay underwater for ten minutes at a stretch. At the end of this period he will have to resurface or he will begin to drown.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>The Elementalist may reverse the effect, so that their victim will not be able to breathe normal air for ten minutes. Unless tehy can get to water before they black out, they will suffocate on dry land. A successful magical attack vs magical defence roll is required for the spell to take effect.</p>
                                    <button type="roll" class="roll twod10" name="attr_dark_breathe_under_water" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to alter their victim's ability top breathe air}} {{subtitle=Breathe Under Water Darkness Attack}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The victim will not be able to breathe normal air for ten minutes. Unless they can get to water before they black out, they will suffocate on dry land.}}"></button>
                                </div>
                            </div>
                        <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Ship of Fays</div>
                                <div class="spell_range">Range: 10m</div>
                                <div class="spell_duration">Duration: 1 hour</div>
                                <div class="spell_origin">Origin: Coastal Ellesland and Mercania</div>
                                <div class="spell_rarity">Rarity: Uncommon in coastal Ellesland and the Mercanian Coast; Rare elsewhere</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This spell must be cast while the Elementalist stands waist-deep in a river or sea. The spell summons forth a longboat made of mist and water-weed, which slowly rises from the water. The craft carries up to 8 passengers to a destination specified by the Elementalist when casting the spell. The destination must be connected by water to the Elementalist's current location. If the destination is over 100 miles away, the Ship of Fays takes the passengers that far and disintegrates away into nothing but useless weeds. This can be quite dangerous on ocean crossings. The journey takes one hour, regardless of distance, and the passengers remember nothing of the journey—for them it is if it passed in the blink of an eye. Some believe that those touched by the Fay can remember the journey, though none have chosen to speak openly about the experience.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>While passengers will not remember the journey, they will be touched by a nameless dread. The passengers will not sleep for the next two nights and suffer a -1 to all actions due to sleep deprivation.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 7</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Blizzard</div>
                                <div class="spell_range">Range: 20m</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The Elementalist may call down a thick blanket of swirling ice particles 20m across. He may either use this to conceal himself and the people that he is with (there is a 5m-wide sphere of clear air at the centre of the area of effect), or he may use it offensively against opponents. Defensively, anyone entering the blizzard will have their movement rates halved and their visibility reduced to the level of extreme darkness. The caster, however, will be able to see anyone enter the blizzard from the protected central sphere at its heart.</p>
                                    <p>Similarly, the Elementalist may make the blizzard descend on a party of his enemies as long as they are no more than 20m distant. Again, he will be able to see clearly, but they will not be able to unless they reach the heart of the storm at the centre of the blizzard.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The ice particles are razor-sharp. Anyone moving through the storm will find that the ice particles do 2 points of damage to naked flesh per round, or will strip away 1 Armour Factor point every round that armour is exposed to them.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 8</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Freeze</div>
                                <div class="spell_range">Range: 60m</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This is an offensive spell which can be directed at any enemy within 60m. A jet of freezing water emerges from the caster’s hands with a speed of 16: if the victim does not evade the jet, he is immediately covered from head to toe in freezing ice and will be totally immobilized for ten rounds. Victims must also roll to survive the shock of the cold-water jet. The victim must roll under his current Health Points on d20 or be assumed to have died of shock.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Freeze Spell Attack Roll</span><button type="roll" class="roll twod10" name="attr_freeze_attack" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} sprays a jet of freezing water from their hands}} {{subtitle=Freeze Spell Attack Roll}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[16-?{Target's Evasion Score}]]}} {{range=60m}}"></button>
                                    <span>Freeze Victim Resist Roll</span><button type="roll" class="roll d20" name="attr_freeze_resist" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=The freezing water shocks the victim's system}} {{subtitle=Freeze Spell Resist Roll}} {{roll=[[1d20]]}} {{Vs=[[?{Target's Current Health Points}]]}} {{desc=The victim must roll under their current Health Points on d20 or be assumed to have died of shock.}}"></button>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>This is similar to the above, except that the speed of the spell is 20.</p>
                                    <span>Freeze Darkness Spell Attack Roll</span><button type="roll" class="roll twod10" name="attr_dark_freeze_attack" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} sprays a jet of freezing water from their hands}} {{subtitle=Freeze Spell Attack Roll}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[20-?{Target's Evasion Score}]]}} {{range=60m}}"></button>
                                    <span>Freeze Darkness Victim Resist Roll</span><button type="roll" class="roll d20" name="attr_dark_freeze_resist" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=The freezing water shocks the victim's system}} {{subtitle=Freeze Spell Resist Roll}} {{roll=[[1d20]]}} {{Vs=[[?{Target's Current Health Points}]]}} {{desc=The victim must roll under their current Health Points on d20 or be assumed to have died of shock.}}"></button>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 9</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Lightning</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>Although many would categorize lightning under the elements of Air or Fire, its province is properly that of Water, lightning being the harbinger of violent storms and deluges. During such a storm the Water Elementalist becomes extremely powerful, acting as a conduit for the supernatural forces of the sky and directing them on to the earth. Holding up a copper rod, which is part of the equipment of all such Elementalists, he will attract the lightning down on to himself, but will not take any damage. The copper rod will then become charged and the Elementalist will be able to do the following with it (three uses):</p>
                                    <ul>
                                        <li>1. Fire lightning bolts at opponents: these bolts have speeds of 20 and cause 12 points of damage. Eve iif the victim survives this damage, he still has to roll under his remaining Health Points on a d20 or die from the electric shock.</li>
                                        <li>2. Animate a corpse: if the rod touches a new corpse (not dead longer than one month) it will become animated and function very much like a Zombie would for the period of a day (for Zombies, see p. 253).</li>
                                        <li>3. Create a force field: anyone entering within a radius of 20m of the caster will automatically receive a 3-point loss to their Health Points. They will continue to lose another 3 points per round that they remain in the area, or until the effect wears off. It will wear off when the magician shifts his ground.</li>
                                    </ul>
                                </div>
                                <div class="spell_button">
                                    <span>Lightning Spell Attack Roll:</span> <button type="roll" name="attr_lightning" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} channels the stored lightning into a bolt, which they throw at their target.}} {{subtitle=Lightning Spell Attack}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[20-?{Target's Evasion Score}]]}} {{damage=[[12]]}}"></button>
                                    <span>Lightning Victim Resist Electric Shock Roll:</span> <button type="roll" class="roll d20" name="attr_lightning_resist" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=The lightning bolt courses through the victims body}} {{subtitle=Lightning Shock Resist Roll}} {{roll=[[1d20]]}} {{Vs=[[?{Target's Current Health Points}]]}} {{desc=The victim must roll under their current Health Points on d20 or die of shock.}}"></button>
                                </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span><p> The caster has five uses of the above powers. Alternatively, he can use up the entire charge (all five uses) to animate a single corpse as a permanent Zombie, rather than the type that lasts a single day.</p>
                                </div>
                            </div>
                        <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Manannán’s Due</div>
                                <div class="spell_range">Range: 200m</div>
                                <div class="spell_duration">Duration: Instant</div>
                                <div class="spell_origin">Origin: Mercanian Coast</div>
                                <div class="spell_rarity">Rarity: Uncommon in coastal Ellesland and Mercania; Rare elsewhere</div>
                                <div class="spell_desc">
                                   <span>Description</span><p>The Elementalist awakens an ancient god of the sea, offering 2d8 beings specified by the caster within range as tribute. The spell only affects beings on, in, or within sight of the ocean (such as on a ship or on a beach) and has no effect on beings of 2nd Rank or above. If the Elementalist succeeds on a Magical Attack, then the targets simply drop what they are doing, walk into the water and drown themselves. The target’s companions can attempt to save them by restraining them for 20 rounds, at which point the compulsion fades. A friendly Elementalist can use Wave Mastery to keep water out of the target’s lungs until the spell breaks.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Manannán’s Due Spell Number of Targets Roll:</span> <button type="roll" class="roll d8" name="attr_manannans_due_number" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} awakens an ancient god of the sea, offering it living beings as tribute.}} {{subtitle=Manannán’s Due Number of Sacrifices}} {{roll=[[2d8]]}}"></button>
                                    <span>Manannán’s Due Spell Attack Roll:</span> <button type="roll" class="roll twod10" name="attr_manannans_due_attack" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} compells their victims to sacrifice their lives}} {{subtitle=Manannán’s Due Spell Attack Roll}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The targets simply drop what they are doing, walk into the water and drown themselves.}}"></button>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>Wave Mastery has no effect on the darkness empowered version of this spell.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 10</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Summon Tidal Wave</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The caster can create a 10m-high wall of water from the surface of a lake or the sea and direct it towards any target he chooses. The tidal wave can wreak terrible devastation amongst shipping, swamping all but the largest cogs to the extent of 2d10 Ship Points damage. Coastal towns can be flooded—possibly with the loss of hundreds of lives. Ranked characters may survive inundation by rolling equal to or under their rank on 1d12, but even if this roll succeeds the character takes 1d6 Health Points damage. The wall of water can only penetrate about half a mile inland and is only 30m across. Each casting of the spell costs the Elementalist the permanent loss of 1d4 Health Points.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Summon Tidal Wave Ship Damage Roll:</span><button type="roll" class="roll twod10" name="attr_summon_tidal_wave_ships" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} creates a 30m-wide, 10m-high wall of water from the surface of the water, and directs it towards a target}} {{subtitle=Tidal Wave Ship Damage}} {{Damage=[[2d10]]}}"></button>
                                    <span>Summon Tidal Wave Target Survival Roll:</span> <button type="roll" class="roll d12" name="attr_summon_tidal_wave_survive" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=The Tidal Wave crashes into people with deadly force}} {{subtitle=Roll under your rank to survive}} {{roll=[[1d12]]}} {{Vs=[[?{Victim's Rank}]]}} {{damage=Survivors take [[1d6]] damage}}{{desc=The wall of water can only penetrate about half a mile inland.}}"></button>
                                    <span>Summon Tidal Wave Caster's Cost Effect Roll:</span> <button type="roll" class="roll d4" name="attr_summon_tidal_wace_cost" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=Summoning the Tides themselves starins the caster's body to their limit}} {{subtitle=Permanent cost of casting this spell}} {{roll=[[1d4]]}} {{desc=Each casting of the spell costs the Elementalist a permanent loss of Health Points.}}"></button> 
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>The tidal wave will roll on over land, spurred by some occult power that only those masters of the Darkness element are familiar with. Its movement rate is 20mph (50m per combat round) and it will destroy everything in its path. The tsunami will dissipate according to the normal Spell Expiry Rolls.</p>
                                </div>
                            </div>
                        </details>
                        <div class="spell-entry">
                            <fieldset class="repeating_spells_water">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>     
                            </fieldset>
                        </div>
                    </details>
                </div>
                <div class="fire_spell_list">
                    <details>
                        <summary>Fire Spells</summary>
                        <details>
                            <summary>Level 1</summary>
                            <div class="spell-entry">
                              <div class="spell_name">Candle</div>
                              <div class="spell_range">Range: 10m</div>
                              <div class="spell_duration">Duration: 1 hour</div>
                              <div class="spell_desc">
                                <span>Description</span><p>The caster may create a magical candle that will glitter in the air in front of him and will not go out even when it is immersed in water. The candle and its illumination are not visible to anyone else but the caster. It has the range of light of a normal torch (10m) and will last for one hour.</p>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                                <span>Darkness:</span> <p>The candle will create an area of darkness around the caster, and people standing outside the range of the candle will only be able to see indistinctly the form within it, no matter if there is strong daylight or other illumination (add 3 to evasion and defence).</p>
                              </div>
                            </div>
                        <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Brigantia’s Heart</div>
                                <div class="spell_range">Range: Touch</div>
                                <div class="spell_duration">Duration: One Night</div>
                                <div class="spell_origin">Origin: Glissom</div>
                                <div class="spell_rarity">Rarity: Common in Glissom, uncommon in Ellesland, rare elsewhere</div>
                                <div class="spell_replaces">Replaces: Pyrotechnics for Druids from Glissom</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The Elementalist calls upon the old pacts imploring Brigantia, the Goddess of flame to bless a single fire (campfire or heath fire). The spell can only be cast at night and lasts until the first light of dawn. Anyone sleeping beside the fire for the night regains 2 health points in addition to any regained through normal rest. The fire must be kept fuelled, but may be put out in the normal manner.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The darkness version of this spell curses a single fire so that its smoke forms a malignant fume. Any person spending four hours next to the fire (outdoors or indoors) suffers the effects of a medium poison (see Dragon Warriors, p. 122).</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 2</summary>
                            <div class="spell-entry">
                              <div class="spell_name">Pyrotechnics</div>
                              <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                              <div class="spell_desc">
                                <span>Description</span><p>The caster may create any illusions involving light and fire he chooses. Thus, he may wish to create the impression of a torchlight procession, fire fairies that flit across the moonlit glades or ghostly shades lurking in graveyards. As with any illusion, there is a 5% chance of ‘disbelieving’ pyrotechnics. The Spell Expiry Roll applies.</p>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                               <span>Darkness:</span> <p>The caster will be able to create monstrous illusions from the shadows or revenants. As above, there is a normal chance of disbelieving these.</p>
                              </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 3</summary>
                            <div class="spell-entry">
                              <div class="spell_name">Fire Arrow</div>
                              <div class="spell_desc">
                                <span>Description</span><p>The caster may create a fire arrow by placing this spell on an enchanted arrow. It will immediately flare up with occult flames, but these will in no way harm the caster as he notches the arrow on to his bow and shoots. The shot involving the fire arrow will always be as if shot with a bonus of +5 to attack, doing (d10 + 10) damage and, of course, setting anything inflammable on fire in the process.</p>
                            </div>
                            <div class="spell_button">
                                <span>Fire Arrow Ranged Attack Roll: (you must have an appropriate bow equipped for this to work)</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} attacks with @{equippedrangedweaponname}}} {{subtitle=@{equippedrangedweapontype} +@{equippedrangedweaponmagicbonus} using a magically enhanced Fire Arrow}} {{attackroll= [[1d20cs1cf20]]}} {{attackvsranged=[[ (@{finalrangedattack}+5) - ?{Range Modifier|Short @{equippedrangedweaponshortrange}m, 0|Medium @{equippedrangedweaponmediumrange}m, 3|Long @{equippedrangedweaponlongrange}m, 7} - ?{Small or Crouching target?|No, 0|Yes, 2} - ?{Is the Target moving?|No, 0|Slowly, 2|Quickly, 4} -(?{Light Conditions|Normal, 0|Poor, 3|Other, ?{Other&amp;#125;}) + (?{Miscellaneous Modifiers, can be a positive (improves chance to hit) or a negative (decreases chance to hit)|0})]] }} {{abr=[[1d10+@{finalrangedabrbonus}]]}} {{Damage=[[10+@{finalrangeddmgbonus}]]}} {{desc=@{character_name}'s arrow flares with occult flames, but these do not harm the caster or their bow.}}}" name="attr_rangedattack_flame_arrow"></button>
                            </div>
                            <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                            <div class="spell_darkness">
                                <span>Darkness:</span> <p>An arrow of darkness will be produced that will do the damage described above with the same attack bonus, etc.</p>
                                <span>Fire Arrow Darkness Ranged Attack Roll: (you must have an appropriate bow equipped for this to work)</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} attacks with @{equippedrangedweaponname}}} {{subtitle=@{equippedrangedweapontype} +@{equippedrangedweaponmagicbonus} using a magically enhanced Arrow of Darkness}} {{attackroll= [[1d20cs1cf20]]}} {{attackvsranged=[[ (@{finalrangedattack}+5) - ?{Range Modifier|Short @{equippedrangedweaponshortrange}m, 0|Medium @{equippedrangedweaponmediumrange}m, 3|Long @{equippedrangedweaponlongrange}m, 7} - ?{Small or Crouching target?|No, 0|Yes, 2} - ?{Is the Target moving?|No, 0|Slowly, 2|Quickly, 4} -(?{Light Conditions|Normal, 0|Poor, 3|Other, ?{Other&amp;#125;}) + (?{Miscellaneous Modifiers, can be a positive (improves chance to hit) or a negative (decreases chance to hit)|0})]] }} {{abr=[[1d10+@{finalrangedabrbonus}]]}} {{Damage=[[10+@{finalrangeddmgbonus}]]}} {{desc=@{character_name}'s arrow gleams with occult darkness, but these do not harm the caster or their bow.}}}" name="attr_rangedattack_dark_flame_arrow"></button>
                              </div>
                            </div>
                        <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Ifrit’s Cloak</div>
                                <div class="spell_range">Range: 3m radius centred on caster</div>
                                <div class="spell_duration">Duration: Spell expiry applies</div>
                                <div class="spell_origin">Origin: Desert of Songs and Azure Coast</div>
                                <div class="spell_rarity">Rarity: Uncommon on the Desert of Songs and Azure Coast, rare elsewhere</div>
                                <div class="spell_replaces">Replaces: Fire Arrow for certain storm-wizards</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The spell wraps the caster in a mantle of smoke and embers that billow from his cloak, blinding those close to him. Enemies suffer a -3 to Attack and Defence while within 3m of the caster. As an action, the Elementalist can also choose to swirl the cloak about himself to release a shower of embers. These embers ignite any flammable substances within 2m of the caster. This spell is known to the storm-wizards of the Desert of Songs, where they call upon ancient elemental compacts to conjure this mantle.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The embers created by the darkness version of this spell have Speed 12 and burn anyone failing to dodge for 1d8 Health Points of damage, minus the target’s Armour Factor.</p>
                                    <button type="roll" class="roll twod10" name="attr_dark_ifrits_cloak" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} swirls their fiery cloak about themself, releasing a shower of embers}} {{subtitle=Ifrit's Cloak Darkness Spell Attack}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[12-?{Target's Evasion}]]}} {{damage=[[1d8-?{Target's Armour Factor}]]}}"></button>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 4</summary>
                            <div class="spell-entry">
                              <div class="spell_name">Sheet of Flame</div>
                              <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                              <div class="spell_desc">
                                    <span>Description</span><p>The caster may produce a wall of fire, 1m across and 5m to either side of him. This may also be used to surround himself or an opponent. Anyone trying to cross this barrier will automatically take 8 points of damage. As a protection to the caster, this wall of fire is a mixed blessing. Although it can protect the caster, the flames also suck away his oxygen supply and, unless he disbands the spell within six rounds, this will be totally used up and he will pass out. If the spell is used in order to trap an opponent, they will have an opportunity to jump out of the mounting ring of fire that springs up around them. The speed of the fire is 14. Opponents thus trapped will also pass out within six rounds unless the wall is dispelled or it expires.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Sheet of Flame Spell Attack Roll:</span><button type="roll" class="roll twod10" name="attr_sheet_of_flame" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} produce's a wall of fire to surround a target}} {{subtitle=Sheet of Flame Spell Attack Roll}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[14-?{Target's Evasion Score}]]}} {{damage=Anyone trying to cross this barrier will automatically take [[8]] points of damage}} {{desc=Opponents trapped will pass out within six rounds unless the wall is dispelled or it expires}}"></button>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>Darkness Elementalists can get the Sheet of Flame to move forward at the rate of 1m per Round.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 5</summary>
                            <div class="spell-entry">
                              <div class="spell_name">Protection from Fire</div>
                              <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                              <div class="spell_desc">
                                <span>Description</span><p>The caster becomes immune to all fire damage as long as he has already placed the spell upon himself before entering the combat or danger zone where he is likely to be harmed.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The Elementalist is protected from flame as above. In addition, any offensive spell involving the use of fire will rebound upon the spell caster with their own magical attack.</p>
                                </div>
                            </div>
                        <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Fires of Purification</div>
                                <div class="spell_range">Range: Self</div>
                                <div class="spell_duration">Duration: Instant</div>
                                <div class="spell_origin">Origin: Kastrian Sorcerers of Khitai</div>
                                <div class="spell_rarity">Rarity: Common among the Kastrian Sorcerers; Rare elsewhere</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>In far Khitai fire is seen as a means of purification. This spell engulfs the caster in flame for a few seconds, which can be quite terrifying for those not used to the sight. The caster is immediately cleansed of any disease, poison, or mental malady. The Kastrian Sorcerers of Khitai are famous for their devout beliefs in the elemental spirits, and they consider this spell to be a form of prayer.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>This darkness version of this spell requires a second target, to which the disease or poison is transferred. The caster must make a successful Magical Attack roll to succeed.</p>
                                    <button type="roll" class="roll twod10" name="attr_dark_fires_of_purification" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} immolates themself, releasing the impurities from their own body and forcing them toward another}} {{subtitle=Fires of Purification Darkness Spell Attack}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The caster is immediately cleansed of any disease, poison, or mental malady and they are transferred to the victim}}"></button>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 6</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Extinguish</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The caster will cause all light, whether natural or magical, to be doused in a one mile radius of himself. He himself will be able to see as if it were broad daylight in this area. The Elementalist may also extinguish fires in this way.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>As well as the lights going out in the area, the Darkness version of the above spell will be accompanied by a dank and dismal rain.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 7</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Flash</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The Elementalist causes a blinding flash of light to appear in the sky: anyone not consciously averting their gaze (roll under Reflexes on 1d20) will be blinded for 2d10 Rounds and must fight at -4 attack and -8 defence until the effect is gone. The flash will be visible at a distance of ten miles during the day and fifty miles at night.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Flash Spell Attack Roll:</span> <button type="roll" class="roll d20" name="attr_flash" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} causes a blinding flash of light to appear in the sky}} {{subtitle=Flash Spell Attack}} {{roll=[[1d20]]}} {{vs=[[?{Target's Reflexes}]]}} {{Blinded for=[[2d10]] rounds}} {{range=The flash will be visible at a distance of ten miles during the day and fifty miles at night.}} {{desc=Blinded foes must fight at -4 attack and -8 defence until the effect is gone.}}"></button>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The blindness is permanent and can only be alleviated by Dispel Magic.</p>
                              </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 8</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Fire Weapon</div>
                                <div class="spell_range">Range: 20m</div>
                                <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This spell, when cast upon a melee weapon, will make it glow with a white-hot heat, increasing its armour penetration and its damage factor by 2 each. The weapon will not damage the wielder’s hand in any way.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Fire Weapon Melee Attack Roll: (you must have an appropriate weapon equipped for this to work)</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} attacks with @{equippedmeleeweaponname} enhanced magically to be white-hot}} {{subtitle=@{equippedmeleeweapontype} +@{equippedmeleeweaponmagicbonus}}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[@{finalmeleeattack}-(?{Enemy Defence|0})]]}} {{abr=[[(@{equippedmeleeweaponabr}+2)+@{finalmeleeabrbonus}]]}} {{Damage=[[(@{equippedmeleeweapondamage}+2)+@{finalmeleedmgbonus}]]}} {{desc=@{equippedmeleeweaponother}, further enhanced with the Fire Weapon spell}}" name="roll_meleeattack_fire_weapon"></button>               
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                    <span>Darkness:</span> <p>The heat of the weapon is so intense that no armour can protect against it at all: the victim’s Armour Factor is assumed to be 0.</p>
                                    <span>Fire Weapon Darkness Melee Attack Roll: (you must have an appropriate weapon equipped for this to work)</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} attacks with @{equippedmeleeweaponname} enhanced magically to burn like plasma}} {{subtitle=@{equippedmeleeweapontype} +@{equippedmeleeweaponmagicbonus}}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[@{finalmeleeattack}-(?{Enemy Defence|0})]]}} {{abr=The blade's heat is so intense that it burns right through any armour}} {{Damage=[[(@{equippedmeleeweapondamage}+2)+@{finalmeleedmgbonus}]]}} {{desc=@{equippedmeleeweaponother}, further enhanced with the Fire Weapon spell}}" name="roll_meleeattack_dark_fire_weapon"></button>                
                                </div>
                            </div>
                        <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Blood of Molten Fire</div>
                                <div class="spell_range">Range: Self</div>
                                <div class="spell_duration">Duration: Spell expiry applies</div>
                                <div class="spell_origin">Origin: Desert of Songs</div>
                                <div class="spell_rarity">Rarity: Uncommon among the storm-wizards of the desert, rare elsewhere</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This spell turns the Elementalist’s blood into flaming magma. The caster suffers no ill effects beyond mild indigestion from having their blood turned to flaming death. Anyone cutting the caster’s skin is splattered with the burning fluid (Speed 12, damage 6). Any nonmagical weapon cutting the caster is destroyed. Creatures damaging the caster with natural weapons, such as claws or teeth, suffer 8 Health Points of damage automatically. If the caster chooses, he can break his own skin and use his own blood to light fires. The storm-wizards employ this spell in their battles with the undead creatures which plague the ancient tombs and ruins of the Desert of Songs. Many an undead monster has turned itself into a burning cinder attempting to kill a prepared stormwizard.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Blood of Molten Fire Spell Attack Roll:</span> <button type="roll" class="roll twod10" name="attr_blood_of_molten_fire" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name}'s blood has been turned to molten magma, it spatters out when their skin is cut}} {{subtitle=Blood of Molten Fire Spell Attack}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[12-?{Target's Evasion Score}]]}} {{damage=[[6]], or [[8]] if the attack was a natural weapon}} {{desc=Any nonmagical weapon cutting the caster is destroyed.}}"></button>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 9</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Conflagration</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The caster may start a fire at a distance of a mile from where he stands merely by gesturing to the place where he wishes the fire to start, or by conjuring up in his mind’s eye a place which he has visited in the past week. The fire produced will be of the strength of a roaring bonfire and will easily catch on any combustible material in the area near it.</p>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness: </span><p>If the fire is started in a domestic building, all the doors and windows of the building will mysteriously jam or lock, preventing the escape of the people inside.</p>
                                </div>
                            </div>
                        <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Wrath of the Hearth Spirit</div>
                                <div class="spell_range">Range: The building the fire is contained within</div>
                                <div class="spell_duration">Duration: Spell expiry applies</div>
                                <div class="spell_origin">Origin: Kastrian Sorcerers of Khitai</div>
                                <div class="spell_rarity">Rarity: Uncommon in Khitai, extremely rare elsewhere</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The Kastrian Sorcerers of Khitai created this spell to defend their homes from the seemingly endless waves of demons that besiege their land. This spell must be cast on a single hearth fire in a dwelling whereupon it awakens the spirit of the hearth fire to defend the domicile. The fire leaps outward, blasting a single intruder for 10 Health Points of damage (Speed 16); armour reduces the damage by its armour factor. The flame jumps to a different target each round, as directed by the caster, until the spell expires. The spell cannot target someone who lives in the house or is a guest there.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Wrath of the Hearth Spirit Spell Attack Roll:</span> <button type="roll" class="roll twod10" name="attr_wrath_of_the_hearth_spirit" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=The spirit of the hearth fire leaps outward and blasts flame to defend its domicile.}} {{subtitle=Wrath of the Hearth Spirit Spell Attack}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[16-?{Target's Evasion Score}]]}} {{damage=[[10-?{Target's Armour Factor}]]}} {{desc=The flame jumps to a different target each round, as directed by the caster, until the spell expires. The spell cannot target someone who lives in the house or is a guest there.}}"></button>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness: </span><p>The darkness version of this spell drives the hearth spirit insane. The spirit attacks at random, and will attack those who dwell within the building.</p>                         
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 10</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Summon the Holocaust</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The Holocaust is a being made entirely of fire and stands over 3m tall. Its touch will set alight a wooden wall or gradually melt metal objects, and no human can stand beside it for more than a round without being horribly scorched. To summon one of these creatures, the Elementalist needs the bones of one who has been killed by fire and must cast these up in the air, muttering a ritual incantation. The fire-being will then appear and serve the caster for one hour on this plane.</p>
                                </div>
                                <div class="spell_button">
                                    <details>
                                        <summary>The Holocaust</summary>
                                        <ul>
                                            <li>Attack: 32 <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=The Holocaust, a being made entirely of fire over 3m tall swings its fists}} {{subtitle=The Holocaust Melee Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[32-(?{Enemy Defence|0})]]}} {{abr=[[1d10+2]]}} {{Damage=[[10]]}} {{desc=Its touch will set alight a wooden wall or gradually melt metal objects}}" name="roll_the_holocaust_meleeattack"></button></li>
                                            <li>Fist of Fire: (d10 +2, 10)</li>
                                            <li>Defence: 26</li>
                                            <li>Evasion: 8</li>
                                            <li>Magical Defence: 19</li>
                                            <li>Health Points: 28</li>
                                        </ul>
                                    </details>
                                </div>
                                <input type="hidden" class="element-toggle1" name="attr_primaryelement" value="" />
                                <div class="spell_darkness">
                                   <span>Darkness:</span> <p>The methods and the effect are similar to above, except that after the hour time period, the Holocaust will not disband but will begin to act on its own accord, feasting on all the combustible things in the area. It will continue to burn for one day.</p>
                                </div>
                            </div>
                        </details>
                        <div class="spell-entry">
                            <fieldset class="repeating_spells_fire">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>      
                            </fieldset>
                        </div>
                    </details>
                </div>
                <div class="darkness_spell_list">
                    <details>
                        <summary>Darkness Spells</summary>
                        <details>
                            <summary>Level 1</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Catspaw</div>
                                <div class="spell_duration">Duration: 10 minutes</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This spell allows the caster to move with absolute silence over all surfaces, be they broad paving stones or brittle twigs. At the same time, the character casts no shadow. The character gains +1 stealth for every 2 ranks he has attained.</p>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: The absence of shadow will become permanent after ten uses.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 2</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Darkeyes</div>
                                <div class="spell_duration">Duration: 1 hour</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The character will be able to see perfectly even in pitch blackness. The limits of vision are the same as for a normal character during the day, except that the Darkness Elementalist will be able to detect infinitesimally small movements that would not normally be noticed by a character during daylight.</p>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: If a sudden light is produced in front of a Darkness Elementalist using this particular spell, he will be blinded for 1d20 rounds.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 3</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Benight</div>
                                <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This creates a zone of darkness 10m across, which the caster can direct over one or more of his enemies if they are grouped suitably. This zone will move on to the opponents with a speed of 20. Anyone failing to dodge will find themselves lost in an area of complete and utter inky darkness in which their combat abilities will be reduced as if they were fighting blind. A nameless dread will come over them, and they must try to resist the caster’s magical attack, or fall prey to one of the madnesses listed in the Madness Table (see p. 124).</p>
                                </div>
                                <div class="spell_button">
                                    <span>Benight Spell Attack Roll:</span> <button type="roll" class="roll twod10" name="attr_benight_attack" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} creates a zone of darkness 10m across, and directs it over their enemies.}} {{subtitle=Benight Spell Attack}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[20 - ?{Target's Evasion Score}]]}} {{desc=Anyone failing to dodge will find themselves lost in an area of complete and utter inky darkness in which their combat abilities will be reduced as if they were fighting blind.}}"></button>
                                    <span>Benight Madness Effect Roll:</span> <button type="roll" class="roll twod10" name="attr_benight_effect" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=A nameless dread comes over everyone in the field of darkness.}} {{subtitle=Benight Madness Effect}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=Those that fall prey to the effect are afflicted with the madnesses listed in the Madness Table (see p. 124).}}"></button>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: If no one succumbs to madness, the caster himself is attacked by a magical attack of 30; if the attack is successful, he goes mad himself (consult the Madness Table, p. 124).</p>
                                </div>
                            </div>
                        <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Dark Thoughts</div>
                                <div class="spell_range">Range: 10m</div>
                                <div class="spell_duration">Duration: Spell expiry applies</div>
                                <div class="spell_origin">Origin: Krarth</div>
                                <div class="spell_rarity">Rarity: Rare in Krarth</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This is another spell from the pen of Vald the Mad Monk of Krarth. The spell affects a single target, filling their minds with dark and violent thoughts. The target flies into a berserker rage, attacking the nearest living beings. If a number of living beings stand close to him, the target will attack those he cares the most about first. The target will continue to attack until he can no longer see anyone. This spell gained some notoriety a few years ago when it was used during a noble marriage ceremony in Kurland; the groom, a duke of some importance, slew six people before his own bodyguard ended his life.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Dark Thoughts Spell Attack Roll:</span> <button type="roll" class="roll twod10" name="attr_dark_thoughts" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} casts at their target, filling their minds with dark and violent thoughts.}} {{subtitle=Dark Thoughts Spell Attack}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The target flies into a berserker rage, attacking the nearest living beings. If a number of living beings stand close to him, the target will attack those he cares the most about first. The target will continue to attack until he can no longer see anyone.}}"></button>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: The first time the Darkness Elementalist casts this spell, his closest friend or family member will betray him.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 4</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Curtain of Night</div>
                                <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The Elementalist casts a wall of darkness in front of himself. This barrier is 1m wide and extends 5m to either side of him. Although the spell caster can see through the barrier, anyone on the other side cannot see back through it. The Elementalist can cast spells through the barrier, but no hostile spell magic can reach him: all spells involving fire or light cast at the barrier will be reflected back on the caster with the same magical attack as the caster’s.</p>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: If the Darkness Elementalist ever passes through his own Curtain of Night (voluntarily or not), he is attacked by a magical attack equivalent to his own which, if successful, causes him to fade away to nothingness, leaving behind only his shadow (if he still has one).</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 5</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Javelin of Darkness</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>A mystic javelin appears in the Elementalist’s hands as he casts this spell. If he hurls it at an opponent or opponents, the spear affects them with the caster’s magical attack. Success leads to their being blinded; although the javelin may only effectively ‘hit’ one opponent (doing (d6, 3) damage if it does), its magically blinding effect will take place within a 10m radius of where it lands.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Javelin of Darkness Ranged Attack Roll:</span> <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=A mystic javelin appears in @{character_name} hands as they cast this spell, they hurl it at their target.}} {{subtitle=Javelin of Darkness Ranged Attack}}} {{attackroll= [[1d20cs1cf20]]}} {{attackvsranged=[[@{finalrangedattack}-?{Range Modifier|Short @{equippedrangedweaponshortrange}m, 0|Medium @{equippedrangedweaponmediumrange}m, 3|Long @{equippedrangedweaponlongrange}m, 7} - ?{Small or Crouching target?|No, 0|Yes, 2} - ?{Is the Target moving?|No, 0|Slowly, 2|Quickly, 4} -(?{Light Conditions|Normal, 0|Poor, 3|Other, ?{Other&amp;#125;}) + (?{Miscellaneous Modifiers, can be a positive (improves chance to hit) or a negative (decreases chance to hit)|0})]] }} {{abr=[[1d6 + @{finalrangedabrbonus} ]]}} {{Damage=[[3 + @{finalrangeddmgbonus} ]]}} {{desc=@{equippedammospecialeffect}}}" name="roll_rangedattack_javelin_of_darkness"></button>
                                    <span>Javelin of Darkness Blindness Spell Effect Roll:</span> <button type="roll" class="roll twod10" name="attr_javelin_of_darkness_effect" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=Where the Javelin lands, there is a burst of blinding magical energy to a 10m radius}} {{subtitle=Javelin of Darkness Blindness Effect}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=Each target in the 10m radius that fails is blinded}}"></button>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: A black, star-shaped sooty patch will appear on the palm of the Elementalist’s hand after three successful uses of this spell.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 6</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Shadowfall</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The Elementalist casts this spell over a one-mile radius. An eerie premature twilight settles over this area as if it were dusk, even if it is the middle of the day. If the spell is cast at night, then the darkness becomes utter and terrible. All creatures in the area are subject to an attack of Phobia (see the Madness Table, p. 124). A character failing to resist will be seized by panic and run for 2–12 hours from the epicenter of the spell (NB: the panic lasts longer than the normal phobia attack).</p>
                                </div>
                                <div class="spell_button">
                                    <span>Shadowfall Spell Attack Roll:</span> <button type="roll" name="attr_shadowfall_fright_attack" class="roll d12" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} deepens the darkness of night until it becomes utter and terrible}} {{subtitle=Shadowfall Fright Attack Roll}} {{spellattackroll=[[2d10]]}} {{vs=[[1d12-?{Target's Rank}]]}} {{desc=A character failing to resist will be seized by panic and run for [[2d6]] hours from the epicenter of the spell}}"></button>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: After three successful uses of this spell, the Elementalist becomes prone to intermittent attacks of sunlight phobia.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 7</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Summon the Creatures of the Night</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The sorcerer raises the following dire phantasms from the shadows of the night. These creatures will remain until an hour before sunrise, serving the caster’s wishes (roll 1d6):</p>
                                    <ul>
                                        <li>Bats (see p. 238)</li>
                                        <li>Giant Spider (see p 250)</li>
                                        <li>Ghost (see p. 241)</li>
                                        <li>Hag (see p. 243)</li>
                                        <li>Wraith (see p. 253)</li>
                                        <li>Spectre (see p. 250)</li>
                                    </ul>
                                    <p>These phantasms are illusory, but unless disbelieved (see p. 103), they will create the same psychic and physical effects as the ‘real’ versions. Characters will therefore take damage, suffer Fright Attacks etc., unless they disbelieve them.</p>
                                </div>
                                <div class="spell_button">
                                    <span>Summon the Creatures of the Night Spell Effect Roll:</span> <button type="roll" class="roll d6" name="attr_summon_creatures_of_the_night_type" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} calls forth dire phantasms from the shadows of the night.}} {{subtitle=Summon the Creatures of the Night Table Roll}} {{roll=[[1d6]]}} {{desc=1. Bats (see p. 238)
                                        2. Giant Spider (see p 250)
                                        3. Ghost (see p. 241)
                                        4. Hag (see p. 243)
                                        5. Wraith (see p. 253)
                                        6. Spectre (see p. 250)}}"></button>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: Every time the Darkness Elementalist casts this spell, he must resist becoming a creature of the shadows, an insubstantial Wraith (see p. 253). Roll a magical attack of 2d8 +1 against the character’s magical defence.</p>
                                </div>
                            </div>
                        <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Dark Rebirth</div>
                                <div class="spell_range">Range: Touch</div>
                                <div class="spell_duration">Duration: Variable, ends on the next night of a full moon</div>
                                <div class="spell_origin">Origin: Krarth</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>This blasphemous spell is a hideous parody of resurrection. The spell requires the sacrifice of a human being in an hour-long ritual in order to bring another back to life. The spell does indeed bring the person back, but without their soul, and the process is so scarring they are invariably mad in some way… usually quietly psychopathic. The spell’s effect is only temporary, but the Darkness Elementalist rarely lets this be known.</p>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: In future, the resurrected character may only be raised from the dead again by means of the Darkness version of this spell; other forms of resurrection or rebirth are forever barred to him.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 8</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Eclipse of the Moon</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The caster may cause a temporary eclipse of the moon for ten Rounds: this will cause a Fright Attack (see p. 122) on anyone observing it with a strength of 12. Anyone failing to resist the effect of the spell will become permanently phobic about darkness (see the Madness Table, p. 124).</p>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: A shadowy half-moon will appear on the character’s forehead once he has cast this spell three or more times.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 9</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Shadow Self</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>By a great effort of will, the caster of this spell detaches his self from his body, slipping away from it by means of his shadow (anyone noticing this transformation would see the caster’s shadow flowing away from him and eventually detaching itself from his body). Once at a suitable distance from the old body, the shadow will reform into a corporeal shape that is an exact duplicate of the caster’s body (complete with his persona and ‘soul’) except that he will have lost 1 Health Point permanently in the transition. The old body will continue performing actions for another ten rounds after the Shadow Self has left it, but its Intelligence has been drained to zero and it therefore cannot cast spells. After this time, the body will crumple in on itself rather like a punctured balloon and fall to the ground as a lifeless husk. This spell is obviously useful to the Darkness Elementalist in an impossible combat situation where death is inevitable.</p>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: The permanent loss of 1 Health Point.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Level 10</summary>
                            <div class="spell-entry">
                                <div class="spell_name">Summon Balor, Prince of Darkness</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The eyes of Balor are death, and no one has seen him and lived, not even his disciples who dwell in the Lost City of Nem beneath the frozen lake of Nimmur. The geas of summoning Balor is therefore death to the caster, as it is to everyone else within a 20m radius.</p>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: Summoning Balor results in death to the caster and everyone within a 20m radius.</p>
                                </div>
                            </div>
                            <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                            <div class="spell-entry playerspell">
                                <div class="spell_name">Karach</div>
                                <div class="spell_range">Range: Touch</div>
                                <div class="spell_duration">Duration: Permanent</div>
                                <div class="spell_origin">Origin: See text</div>
                                <div class="spell_desc">
                                    <span>Description</span><p>The Elementalist uses clay mixed with the heart-blood of a dead person to fashion a likeness of the dead individual. The Elementalist then calls upon all the dark gods of the underworld to breathe life into the mockery. The Karach appears as an almost perfect duplicate of the original, having all his skills and powers but lacking a soul, and as such cannot set foot on holy ground. It also has a single physical imperfection, such as an extra toe or a short tail, which might be spotted if it is captured and examined. The Karach is under the complete control of the Elementalist, and carries out his orders without question. An Elementalist can only have a single Karach active at one time.</p>
                                    <p>There are ten thousand blasphemies written on every wall of the Lost City of Nem. This spell was transcribed from there by the mad monk Vlad of Krarth and placed in a series of books simply titled “The Black Passages”. Following Vlad’s untimely death, devout monks from his monastery scrubbed the Black Passages from the vellum and sent the books to Tamor for proper disposal. However, the blank books never made it as far as Tamor, and they were later sold to a dozen monasteries across the west where they were turned into illuminated manuscripts. The text from the Black Passages still lurks in the vellum waiting to be discovered.</p>
                                </div>
                                <div class="spell_geas">
                                    <p>Geas: The Elementalist permanently loses 1d2 points of Looks. The caster’s flesh becomes more and more clay-like until at 0 Looks, his flesh transforms completely to wet clay. This effect is cosmetic only and does not impair the Elementalist in any other way.</p>
                                </div>
                            </div>
                        </details>
                        <details>
                            <summary>Custom Spells of Darkness</summary>
                            <div class="spell-entry">
                                <fieldset class="repeating_spells_darkness">
                                <span>Name</span>
                                <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                                <span>Range </span>
                                <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                                <span>Duration</span> 
                                <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                                <span>Description</span>
                                <div class="sheet-auto-expand">
                                    <span name="attr_CustomSpellDescription"></span>
                                    <textarea name="attr_CustomSpellDescription"></textarea>
                                </div>   
                                </fieldset>
                            </div>
                        </details>
                    </details>
                </div>   
            </div>
            
            <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
            <div class="demonologist_spell_list playerspell">
                <details class="spellbook">
                    <summary class="spellbook-header">Demonologist Spells of Rank One</summary> 
                    <div class="spell-entry">
                        <div class="spell_name">Demonic Vitality</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell leeches the vigour from a small animal or bird to cure the caster. The caster sacrifices the animal with a dark incantation and regains 1d4 Health Points. The spell also removes minor blemishes and scars from the caster’s skin, and subtly changes their appearance over time to appear better-looking but slightly crueller. Demonologists who have used this spell for years tend to look beautiful, but their inner cruelty is clearly painted on their faces. Due to this, there is no increase in Looks score.</p>
                        </div>
                        <div class="spell_button">
                            <span>Demonic Vitality HP Roll:</span> <button type="roll" name="attr_demonicvitality" class="roll d4" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} leeches vitality from a small creature}} {{subtitle=Demonic Vitality}} {{Health Point Regain=[[1d4]]}} {{desc=The spell also removes minor blemishes and scars from the caster’s skin, and subtly changes their appearance over time to appear better-looking but slightly crueller.}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Vice</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_desc">
                            <span>Description</span><p>All of mankind’s sins are laid bare in the deepest pits of hell. This spell summons forth an infernal servant that whispers the target’s greatest vice in the Demonologist’s ear. The infernal servant lies about the vice 5% of the time. It is a wise man who does not wholly trust his servants.</p>
                        </div>
                        <div class="spell_button">
                            <span>Vice Spell - chance the demon is lying</span><button type="roll" class="roll twod10" name="attr_vice_chance" value="/w gm &{template:custom2d10} {{title=This spell summons forth an infernal servant that whispers the target’s greatest vice in the @{character_name}'s' ear}} {{subtitle=Vice Spell Chance that the Demon is lying}} {{roll=[[1d100]]}} {{vs=[[5%]]}} {{desc=It is a wise man who does not wholly trust his servants.}}"></button>
                        </div>  
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Gleam of Malevolence</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster welcomes dark powers into his own body, giving him a taste of powers to come. Others can sense this fell power, and while this spell is in effect normal animals will not approach the caster or attack him. Humans instinctively flinch from the caster and take a -1 to penalty to attack him.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Festering Blow</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_duration">Duration: One Attack</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell infuses a single attack made by the caster with hellish power. The caster attacks as normal—including making an armour bypass roll—and inflicts normal damage +2 on a successful strike (for example, a sword would inflict 6 Health Points). If the blow misses then the spell is lost. The wound thus inflicted will not heal naturally, festering and rotting until some magical means of healing is applied. Demonologists have been known to use this spell to disfigure those who cross them.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_demonologist1">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>     
                        </fieldset>
                    </div>
                </details>    
                <details class="spellbook">
                    <summary class="spellbook-header">Sorcerer Spells of Rank One</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Dragonbreath</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>Range: 20m This spell creates a narrow jet of flame which can be directed at a single target. If the target fails to dodgethe flame (match the spell’s speed of 12 against the target’s evasion) he takes 1d6 +6 Health Points damage. This damage roll is reduced by the target’s Armour Factor, however, so a character in plate armour would lose only 1d6 +1 HP.</p>
                        </div>
                        <div class="spell_button">
                            <span>Dragonbreath Spell Attack Roll:</span><button type="roll" name="attr_dragonbreath" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} directs searing flames at their foe}} {{subtitle=Dragonbreath}} {{spellattackroll=[[2d10]]}} {{speedvsevasion= [[12-?{Target's Evasion}]]}} {{damage= [[1d6+6-?{Target's Armour Factor}]]}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Image</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: see below</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster can create a visual image of no greater than man-size; this is nearly perfect, and has only a 10% chance of being recognized to be an illusion. The Image is a kind of hologram, and cannot be made to move around. It will last until touched or Dispelled.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Lesser Healing</div>
                        <div class="spell_range">Range: touch</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell restores 2 Health Points to a wounded character. It will not increase his Health Point score above its normal (unwounded) level, of course. Lesser Healing cannot bring a character back from the dead—such a feat is possible in the Dragon Warriors world, but more potent sorcery than this is needed!.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Moonglow</div>
                        <div class="spell_duration">Duration: lasts for ten minutes</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>A circle of light 5m in radius surrounds the caster, who can dim the intensity to zero or brighten it to about the level of the full moon’s light, at will. Unlike torchlight, the illumination provided by this spell is sufficiently diffuse that it may not alert monsters lurking nearby. A party of characters using no other light source but Moonglow have a chance (the usual 1 in 6) of surprising any monster they meet.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Portal</div>
                        <div class="spell_range">Range: touch</div>
                        <div class="spell_duration">Duration: see below</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell may be used in either of two ways. Open Portal will thrust open any door which could normally be forced by a character of Strength 16. The second mode of the spell, Close Portal, shuts andlocks a door magically. This form of the spell is durational, and will stay in effect until Dispelled or broken by physical force.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Weaken</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>Match the caster’s magical attack vs target’s magical defence. The character on whom this spell takes effects will be weakened. He temporarily loses 2 attack points and inflicts 1 less point of damage than usual when striking in combat.</p>
                        </div>
                        <div class="spell_button">
                            <span>Weaken Spell Attack Roll:</span><button type="roll" name="attr_weaken" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to sap their opponent's strength}} {{subtitle=Weaken}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Witchbane</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_origin">Origin: Algandy</div>
                        <div class="spell_rarity">Rarity: Common in Algandy, uncommon elsewhere</div>
                        <div class="spell_replaces">Replaces: Dragonbreath for Algandish Sorcerers</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>A stream of emerald flame bursts from the Sorcerer’s fingertips to engulf a single target. This spell works on all manner of supernatural entities but has no effect on a normal human – even one trained in the black arts. If a normal human is targeted the flame washes about him leaving him unharmed, though likely terrified. If the spell hits a supernatural being (Speed 12 versus the targets Evasion), the target suffers 1d6+6 damage reduced by its Armour Factor. This spell prevents a Sorcerer from being a threat to a knightly warrior while making them an excellent tool for rooting out “evil beings”.</p>
                        </div>
                        <div class="spell_button">
                            <span>Witchbane Spell Attack Roll:</span><button type="roll" name="attr_witchbane" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} blasts emerald flames from their fingertips}} {{subtitle=Witchbane}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[12-?{Target's Evasion}]]}} {{damage=[[1d6+6-?{Target's Armour Factor}]]}}"></button>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Bedevil</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Permanent</div>
                        <div class="spell_origin">Origin: Algandy</div>
                        <div class="spell_rarity">Rarity: Common throughout Legend</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Sorcerer casts this spell on a single tool, weapon, or implement. The target can be no larger than a small cart or plough. The spell causes the item to attempt to thwart any action a user tries to undertake with it. For example, a compass will give false readings, a hammer might strike a thumb, and a saddle might become undone. The spell rarely causes serious injuries but, for example, using a bedevilled rope to climb a mountain can be suicidal. The spell remains until the Sorcerer removes the spell or a Dispel Magic spell is cast on the item. Any Sorcerer who knows this spell can cast a “counter curse” on a bedevilled item.</p>
                        </div>
                    </div>
                </details>    
                <details class="spellbook">
                    <summary class="spellbook-header">Demonologist Spells of Rank Two</summary> 
                    <div class="spell-entry">
                        <div class="spell_name">Torment of the Pit</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Spell Expiry Applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell inflicts a taste of eternal torment on the target. The target takes a 3 point penalty to all rolls as they writhe in agony. This spell is used as both a means of punishment and as a method of crippling powerful opponents in battle.</p>
                        </div>
                        <div class="spell_button">
                            <span>Torment of the Pit Attack Roll:</span> <button type="roll" name="attr_tormentofthepit" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} inflicts the target with a taste of eternal torment}} {{subtitle=Torment of the Pit}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-(?{Target's Magical Defence|0})]]}} {{desc=The target takes a 3 point penalty to all rolls as they writhe in agony.}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Vanity</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: 2 hours</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Folk forget that the masters of the pit were once Gods and angelic beings. This spell boosts the caster’s Looks to 16, or if it were already 16 or higher, it becomes 19—truly angelic. Once the spell duration lapses, the caster’s Looks score drops to 3 for the next 8 hours as the darker aspects of the pit take over. The demonologist can cast the spell again and again while under the penalty, but if he does so the remaining penalty time is “banked” and must be paid off after the last spell ends, with an extra 8 hours for each successive Vanity spell cast. Vain demonologists who cast this spell often frequently find themselves facing a long time of looking like a monster.</p>
                        </div>
                        <div class="spell_button">
                            <span>Activate Vanity Spell</span>
                            <select name="attr_vanity_toggle">
                                <option value="0">Inactive</option>
                                <option value="1">Active Positive Effect</option>
                                <option value="2">Active Negative Effect</option>
                            </select>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Eye for an Eye</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell can be cast on any target that hurt the caster in the last 5 rounds. The spell causes the caster to suffer 1d6 Health Points damage and heals the caster of an equal amount of damage. The spell only works on living beings, and has no effect on undead, golems, or their ilk.</p>
                        </div>
                        <div class="spell_button">
                            <span>Eye for an Eye Attack Roll:</span> <button type="roll" name="attr_eyeforaneye" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} suffers and heals damage}} {{subtitle=Eye for an Eye}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-(?{Target's Magical Defence|0})]]}} {{damage=[[1d6]]}} {{desc=The spell heals the caster of an equal amount of damage, please manually adjust.}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Dark Divination</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster makes a minor sacrifice to the dark powers and specifies a target. Demonic spies whisper the target’s darkest secret to the caster. There is a 10% chance that the demons lie to the caster out of spite. This chance increases to 50% if the caster has cast the spell already today... the forces of hell do not like to be called upon lightly. This spell can be used to gain incredible leverage over a person, but more than one Demonologist has had his throat cut for daring to blackmail the wrong nobleman.</p>
                        </div>
                        <div class="spell_button">
                            <span>Dark Divination Spell - chance the demon is lying</span><button type="roll" class="roll twod10" name="attr_vice_chance" value="/w gm &{template:custom2d10} {{title=Demonic spies whisper the target’s darkest secret to @{character_name}.}} {{subtitle=Dark Divination Spell Chance that the Demon is lying}} {{roll=[[1d100]]}} {{vs=?{Is this the first casting of this spell today?|Yes, [[10%]]|No, [[50%]]} }} {{desc=It is a wise person who does not wholly trust their servants.}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_demonologist2">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>   
                        </fieldset>
                    </div>
                </details>   
                <details>
                    <summary class="spellbook-header" >Sorcerer Spells of Level Two</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Detect Aura</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell enables the caster (or another on whom he casts the spell) to see the supernatural aura which surrounds enchanted beings and objects.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Hold Off the Dead</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell creates a zone around the caster, 2m in radius, which affects Undead whose rank-equivalent does not exceed the caster’s rank. If such Undead enter the zone, they are immediately subject to a magical attack (match the caster’s magical attack against the Undead’s magical defence). If successful, the spell prevents them from approaching the caster as long as the enchantment lasts.</p>
                        </div>
                        <div class="spell_button">
                            <span>Hold Off the Dead Spell Effect Roll: (roll when an Undead attempts to enter the area of effect)</span><button type="roll" name="attr_hold_off_the_dead" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title= An undead foe attempts to enter @{character_name}'s zone of protection}} {{subtitle=Hold Off The Dead}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=If successful, the spell prevents them from approaching the caster as long as the enchantment lasts.}} "></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Inflict Wound</div>
                        <div class="spell_range">Range: 3m</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>Match the caster’s magical attack against the target’s magical defence. If successful, this inflicts a wound of 5 Health Points on the victim. Armour provides no protection against this damage.</p>
                        </div>
                        <div class="spell_button">
                            <span>Inflict Wound Spell Attack Roll:</span><button type="roll" name="attr_inflict_wound" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title= @{character_name} assaults their target with magic}} {{subtitle=Inflict Wound}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{damage=5}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Peer</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies, and see below</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>When this spell is cast, the Sorcerer specifies any point within the spell’s range (e.g. “14m due north of me”, “5m straight down”, etc.). He is then able to see anything that is happening within 3m of the specified point as though he were standing there. The spell is not hampered by intervening walls or floors unless these are made of metal; more than 2cm thickness of metal will block a Peer spell. The spell will expire immediately if the caster moves around while it is operating.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Tangleroots</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell affects one target, causing a tangle of magical creepers to sprout out of the ground and ensnare his legs. If the target fails to leap clear (match spell’s speed of 14 vs target’s evasion) then he is caught and immobilized. With an edged weapon it is possible to cut oneself free within 2–8 Combat Rounds (roll 2d4); beings of great strength (Strength 16 or more) will be able to pull free of the roots in only 1–3 rounds, and animals such as Wolves will take 2–12 rounds to claw and chew through the roots. This spell is commonly used either to hold any enemy while trying to escape from him or to prevent him evading a more devastating follow-up spell.</p>
                        </div>
                        <div class="spell_button">
                            <span>Tangleroots Spell Attack Roll</span><button type="roll" name="attr_spell_name" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} summons roots and vines to tangle their enemies}} {{subtitle=Tangleroots}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[14-?{Target's Evasion}]]}} {{desc=Target can free themself in: ?{Method of escape|Cut free, [[2d4]] rounds|Pull free (Str 16 or higher), [[1d3]] rounds|Claw and chew, [[2d6]] rounds}}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Warding</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>Warding enhances the Sorcerer’s luck in combat. Any character attempting a Hit Roll against him, whether in mêlée or with a missile weapon, must add 2 to the d20 score.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Echoes of Spyte</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_origin">Origin: Krarth</div>
                        <div class="spell_rarity">Rarity: Uncommon in Krarth and rare outside of that foul land</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>When cast, the Sorcerer must pick a point anywhere within 20m of where he stands. Until the spell expires or is cancelled, the Sorcerer hears everything as if he were standing at that point. This spell was used by the Krarth Magi of old to spy upon their rivals and enemies. Following the Blasting of Spyte, the remaining apprentices carried this spell out of the ruins, teaching it to their followers and spies as needed.</p>
                        </div>
                    </div>
                </details>
                <details class="spellbook">
                    <summary class="spellbook-header">Demonologist Spells of Rank Three</summary> 
                    <div class="spell-entry">
                        <div class="spell_name">Wrath</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Spell Expiry Applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Demonologist casts this spell on a friendly target to infuse them with the essence of wrath. The target feels hellish fury, gaining +3 to Attack, +1 to armour bypass rolls, and +1 to damage until the spell ends. The target also suffers a -5 penalty to Defence during this time.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Glutton’s Curse</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Spell Expiry Applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The target of this spell suffers from a terrible hunger that lasts until the spell expires. The target eats and drinks as fast as they can; if no food is present the target tries to eat any living being, and failing that even tears into their own flesh for sustenance.</p>
                        </div>
                        <div class="spell_button">
                            <span>Glutton’s Curse Attack Roll:</span> <button type="roll" name="attr_gluttonscurse" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} inflicts the target with a ravenous hunger}} {{subtitle=Glutton’s Curse}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-(?{Target's Magical Defence|0})]]}} {{desc=The target eats and drinks as fast as they can; if no food is present the target tries to eat any living being, and failing that even tears into their own flesh for sustenance.}} "></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Lord of Lies</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: Spell Expiry Applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The next lie the caster tells before the spell’s expiry will be believed by everyone hearing it. Once the spell expires, those affected will no-longer believe the caster and may turn on him. The Demonologist can only state “facts” and not force others reactions/attitudes; for example the caster can state “I am the world’s greatest lover” or “I am the king” not “You find me incredibly attractive”. Use of this spell can be quite addictive and dangerous.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Scent of the Fallen</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: Spell Expiry Applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Through use of this spell the demonologist can smell corruption and lies. A lie will be plain as a breath of sweet air from the liar’s mouth. Corrupt people will have a sweet smell commensurate with their level of corruption; an innocent child will stink, while a brutal killer will smell like a summer meadow. This is a fine example of a spell intended to rework how the Demonologist sees the world.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_demonologist3">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>    
                <details>
                    <summary class="spellbook-header">Sorcerer Spells of Level Three</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Banquet</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>Enough food and drink is created to provide one meal for five people. The food is nourishing but—despite the spell’s appetising name—rather bland. Few would care to eat it if they had a choice; but when adventurers are starving they will fall upon Banquet fare enthusiastically enough!</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Beacon</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>If any invisible object or being is within range when Beacon is cast, the spell causes a glowing ball of green light to appear just above it. This light will move as the invisible object/being moves, thus marking out its location.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Command</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>A successful casting of this spell (match caster’s magical attack vs target’s magical defence) brings the victim (who must be of 1st–3rd rank) under the Sorcerer’s control. He will then do whatever the caster tells him to do. Commanded beings do not become mindless slaves; they retain their normal intelligence and ability to reason, and are thus capable of following quite complex orders. Language barriers may be a problem—if the victim cannot understand what his ‘master’ is saying to him then he will simply act in what he believes to be his master’s best interests.</p>
                        </div>
                        <div class="spell_button">
                            <span>Command Spell Attack Roll:</span><button type="roll" name="attr_command" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title= @{character_name} speaks in a magically Commanding voice}} {{subtitle=Command}} {{spellattackroll= [[2d10]]}} {{magicalattackvsmagicaldefence= [[@{finalmagicalattack}-?{Target's Magical Defence}]]}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Greater Healing</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_desc">
                            <span>Description:</span><p>A more powerful version of Lesser Healing. It restores 7 Health Points to the recipient, with the same provisos as for the level-one spell (p. 80).</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Illusion</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell creates an illusion no greater than two cubic metres in volume. This differs from an Image in two ways; the Illusion will move as the caster wishes, and it fools not just sight but the other natural senses as well. There is thus very little chance of distinguishing an Illusion from the real thing; even a rigorous examination gives only a 5% chance of this. If he wishes, the Sorcerer can cast Illusion over a character (himself included) in order to provide a near-perfect disguise. When overlapped in this way, the Illusion must be equal in at least one linear dimension to the thing it is covering. A man could thus be covered by the Illusion of a 2m-long snake, but not by the Illusion of a gnat. It is important to remember that Illusions exist only in the minds of those who behold them. An Illusion could not cast a spell, inflict a wound, carry treasure, open doors, or in any other way affect the real world.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Wolfcall</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell is usable only out-of-doors—in moorland, woods, and dense forest, the wild places where Wolves hunt. It summons one Wolf (see p. 253) to the caster’s side to fight for him. The Wolf will arrive 2–12 Combat Rounds after the spell is cast and will then remain until the spell wears off. The Sorcerer does not start making Spell Expiry Rolls until the Wolf turns up. (A note for the literal-minded: there does not actually have to be a Wolf nearby for Wolfcall to work. The Wolf may in fact be brought across miles of countryside in barely a minute, by the working of the Sorcerer’s magic.)</p>
                        </div>
                        <div class="spell_button">
                            <span>Wolfcall Time to Arrival:</span><button type="roll" name="attr_wolfcall" class="roll d6" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title= @{character_name} calls for a Lupine ally}} {{subtitle=Wolfcall}} {{roll= The Wolf arrives in [[2d6]] rounds}}"></button>
                            <details>
                                <summary>Wolf Stats</summary>
                                <ul>
                                    <li>Attack: 15 <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} orders their Wolf to attack}} {{subtitle=Wolf Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[15-(?{Enemy Defence|0})]]}} {{abr=[[1d4]]}} {{Damage=[[5]]}} {{desc=}}" name="attr_wolfcall_attack"></button></li>    
                                    <li>Weapon: Fangs (d4, 5 points)</li>
                                    <li>Defence: 3</li>
                                    <li>Armour Factor: 0</li>
                                    <li>Evasion: 3</li>
                                    <li>Magical Defence: 1</li>
                                    <li>Health Points: 1d6+4</li>
                                    <li>Movement: 12m (25m)</li> 
                                    <li>Stealth: 16</li>
                                    <li>Perception: 11</li>
                                </ul>
                            </details>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Summon Lesser Djinn</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll</div>
                        <div class="spell_origin">Origin: Ta’ashim lands</div>
                        <div class="spell_rarity">Rarity: Common in Ta’ashim lands, rare elsewhere</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Sorcerer calls upon the power of the seven great Djinn sultans to summon one of their lesser servants; a whirling cloud of sand about half the size of a man. This lesser Djinn can do anything a normal human can, such as serving food, opening doors, carrying, and lifting. The Djinn cannot attack and, being a cloud of sand and air, is immune to non-magical damage. A few northerners have managed to learn the secrets of this spell and it can be found from time to time in the hands of well-travelled Sorcerers. Those who frequently abuse the sultan’s servants (for example by getting them to open obviously trapped doors all the time) may feel the wrath of the Djinn lords.</p>
                        </div>
                    </div>
                </details>
                <details class="spellbook">
                    <summary class="spellbook-header">Demonologist Spells of Rank Four</summary> 
                    <div class="spell-entry">
                        <div class="spell_name">Witch Steed</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_duration">Duration: One night</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell twists the mind of a pig, goat, or human so that it serves as a mount for the caster for a single night. The target cannot do anything except serve as a mount. Any attempt to attack or harm the target will dispel the spell instantly. The target is spurred on by the forces of hell itself and moves as fast as a normal horse. The spell ends at dawn the following morning, and the target takes 1d8 Health Points damage from cuts, bruises, and total exhaustion. It is not uncommon for a mere mortal to be struck dead by this effect. The spell can only be cast at night and requires a bridle (decorated with silver stolen from a church and worth 200F) be flung over the target. The target remembers the night as a vivid nightmare.</p>
                        </div>
                        <div class="spell_button">
                            <span>Witch Steed Attack Roll:</span> <button type="roll" name="attr_witchsteed" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} twists the mind of a creature to serve as their steed}} {{subtitle=Witch Steed}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-(?{Target's Magical Defence|0})]]}} {{damage=[[1d8]]}} {{desc=The target cannot do anything except serve as a mount. Any attempt to attack or harm the target will dispel the spell instantly. The target is spurred on by the forces of hell itself and moves as fast as a normal horse. The spell ends at dawn the following morning and the target takes damage from cuts, bruises, and total exhaustion.}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Phylactery</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_duration">Duration: Special (see text)</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell infuses 2 of the caster’s Health Points into a bloodstone ring (costing 50F) worn on his finger. The lost Health Points reduces the caster’s maximum Health Points by 2, which are restored when the spell ends. As a standard action, the caster can call upon the power of the ring to heal 8 Health Points damage to himself, at which point the ring melts and the caster’s maximum Health Points return to normal. An enemy can attack the ring directly by taking a -8 to their Attack. This destroys the ring and ends the spell.</p>
                        </div>
                        <div class="spell_button">
                            <span>Activate Phylactery Spell Effect</span>
                            <select name="attr_phylactery_toggle">
                                <option value="0">Inactive</option>
                                <option value="1">Active</option>
                            </select>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Hellsbreath</div>
                        <div class="spell_range">Range: 10m</div>
                        <div class="spell_duration">Duration: Instant</div>
                        <div class="spell_attack">Attack: Speed Vs Target’s Evasion</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>The caster exhales a poisonous fume that affects 1d4 targets in front of themself. The spell has a Speed of 14 and causes 2d6 Health Points of damage to affected targets. This damage is not reduced by armour factor.</p>
                        </div>
                        <div class="spell_button">
                            <span>Hellsbreath Spell Number of Targets</span><button type="roll" class="roll d4" name="attr_hellsbreath_targets" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} exhales a poisonous fume in front of themself}} {{subtitle=Hellsbreath Number of Targets}} {{roll=[[1d4]]}}" ></button>
                            <span>Hellsbreath Spell Attack Roll:</span> <button type="roll" name="attr_hellsbreath" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=The poisonous fume begins to eat away its target}} {{subtitle=Hellsbreath}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[14-?{Target's Evasion}]]}} {{damage=[[2d6]]}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Indulgence</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_duration">Duration: Spell Expiry Applies</div>
                        <div class="spell_attack">Attack: Magical Attack Vs Target’s Magical Defence</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>This spell is cast on a single target, forcing them to indulge their greatest vice as soon as physically possible. No thought is given to propriety or stealth, the target simply indulges as soon as possible, ignoring all social conventions. Use of this spell can destroy reputations and start wars.</p>
                        </div>
                        <div class="spell_button">
                            <span>Indulgence Spell Attack Roll:</span>
                            <button type="roll" name="attr_indulgence" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} casts Indulgence}} {{subtitle=Indulgence}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The target is forced to indulge their greatest vice as soon as physically possible. No thought is given to propriety or stealth, the target simply indulges as soon as possible, ignoring all social conventions.}} "></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_demonologist4">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>
                <details class='spellbook'>
                    <summary class="spellbook-header">Sorcerer Spells of Level Four</summary>
                    <div class="spell-entry">
                        <div class="spell_name">Antidote</div>
                        <div class="spell_range">Range: 5m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This reduces the potency of poisons or drugs in a character’s bloodstream. A poison which normally requires a 3d6 roll compared to the character’s Strength (see p. 122 in Chapter 11) is reduced to one which requires a 2d6 roll, etc. The spell must be applied within one Combat Round (six seconds) of the character being poisoned. It does not reverse any damage or other effects already caused by the poison.</p>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Curse</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>This spell affects up to four beings (roll 1d4), cursing them with bad luck if it is successful (match caster’s magical attack vs target’s magical defence). Cursed beings must adjust all their die rolls by 2 so as to make them less favourable—i.e., +2 to the die score when making a Hit Roll, –2 when making an Armour Bypass Roll, etc.</p>
                        </div>
                        <div class="spell_button">
                            <span>Curse Number of Targets:</span><button type="roll" name="attr_curse" class="roll d4" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title= @{character_name} spits curses at their foes}} {{subtitle=Roll 1d4 for number of targets affected}} {{roll=[[1d4]]}}"></button>
                            <span>Curse Spell Attack Roll:</span><button type="roll" name="attr_curse_magical_attack" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name}'s curse attacks its target'}} {{subtitle=Curse}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Targets Magical Defence}]] }}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Disease</div>
                        <div class="spell_range">Range: 15m</div>
                        <div class="spell_duration">Duration: lasts until Dispelled</div>
                        <div class="spell_desc">
                            <span>Description</span><p>A single living being may be afflicted with a rotting disease (match caster’s magical attack vs target’s magical defence). The victim loses 2 Health Points every Combat Round until cured or dead.</p>
                        </div>
                        <span>Disease Spell Attack Roll:</span><button type="roll" name="attr_disease" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title= @{character_name} attempts to magically infect their foe}} {{subtitle=Disease}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{damage=2 Health Points per round until cured}}"></button>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Oracle</div>
                        <div class="spell_duration">Duration: lasts for one minute</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The Sorcerer attunes himself to the spirit world and is able to ask up to three questions. The questions must be phrased in such a way that they can be answered by a yes or a no. The spirits have a 75% chance of knowing the answer to any question they are asked. (The GamesMaster rolls d100. On 01–75 they know the answer; on rolls of 76–00 they don’t.) If they do not know the answer to a question, or if the question is worded vaguely, the spirits will give a random answer (roll d6: 1–3 = yes, 4–6 = no), and they will then stick to that answer if asked the same question again. The spirits can speak only of events concerning the past and present. They cannot see into the future, nor answer questions which concern a character’s thoughts and motives.</p>
                        </div>
                        <div class="spell_button">
                            <span>Spirit Knowledge Effect Roll:</span><button type="roll" name="attr_oracle_chance" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} asks the oracles of the spirit world for answers}} {{subtitle=Oracle}} {{roll=[[1d100cs1cf100]] vs 75%}} {{desc=Spirit's false response: [[1d6]] (1–3 = yes, 4–6 = no)}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Shadowbolt</div>
                        <div class="spell_range">Range: 20m</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Causes an ebon bolt of energy to shoot from the caster’s hand to strike a single being. If the bolt hits (match spell’s speed of 14 vs target’s evasion), it does 2d6+10 HP damage. The damage roll is reduced by a number equal to the target’s Armour Factor, if any (see the Dragonbreath spell on p. 89).</p>
                        </div>
                        <div class="spell_button">
                            <span>Shadowbolt Spell Attack Roll:</span><button type="roll" name="attr_shadowbolt" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} casts Shadowbolt}} {{spellattackroll=[[2d10]]}} {{speedvsevasion=[[14-?{Target's Evasion}]]}} {{damage=[[2d6+10-?{Target's Armour Factor}]]}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Wall of Magic</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies, and see below</div>
                        <div class="spell_desc">
                            <span>Description</span><p>The caster—or another on whom he casts the spell—is surrounded by a protective zone that will block enemy spells. The caster may expend as many points as he likes when casting the Wall of Magic (down to a minimum of 4 MP), and this is the number of Magic Points the Wall will absorb from spells cast into it. Once it has absorbed its Magic Point limit, the Wall collapses. Wall of Magic blocks only direct-attack spells, however—i.e. those that involve a magical attack vs magical defence roll. Indirect-attack spells such as Shadowbolt are unaffected. If the Wall collapses without having absorbed all the Magic Points from an incoming spell, the spell still has a chance of taking effect but the attacking Sorcerer or Mystic must adjust his attack die roll by the difference between the number of MPs left in the spell and the spell’s level.</p>
                        </div>
                    </div>
                    <input type="hidden" class="playerspells_toggle" name="attr_playerspells_toggle" value="0"/>
                    <div class="spell-entry playerspell">
                        <div class="spell_name">Udjat</div>
                        <div class="spell_range">Range: Self</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll</div>
                        <div class="spell_origin">Origin: Kaikuhuru</div>
                        <div class="spell_rarity">Rarity: Rare everywhere due to its obviously pagan effect.</div>
                        <div class="spell_desc">
                            <span>Description</span><p>Upon casting this spell, a golden, glowing, eye-shaped glyph appears on the Sorcerer’s forehead. The spell increases the Sorcerer’s Psychic Talent and Intelligence to 16 or raises a score of 16-17 to 18. The Sorcerer gains all the associated bonuses for having these characteristics.</p>
                        </div>
                        <div class="spell_button">
                            <span>Activate Udjat Spell:</span>
                            <select name="attr_udjat">
                                <option value="0">Inactive</option>
                                <option value="1">Active</option>
                            </select>
                        </div>
                    </div>
                </details>                          
                <details class="spellbook">
                    <summary class="spellbook-header">Demonologist Spells of Rank Five</summary> 
                    <div class="spell-entry">
                        <div class="spell_name">Ritual of Binding</div>
                        <div class="spell_desc">
                            <p>Binding eliminates the necessity of bargaining with a demon but it has its drawbacks in that attempting to bind a demon without its consent will certainly enrage it.</p>
                            <p>Match the caster’s magical attack with the target demon’s magical defence. If the character succeeds then the demon is bound in his service. Instead of vanishing after a few hours, it remains on this plane until killed or banished. A bound demon cannot directly harm the one who bound it, nor can it deliberately kill itself in order to escape from this plane. The binder can give it one command of up to thirteen words, and the demon will obey this command literally. Commands such as ‘Obey all my future commands’ or ‘Serve me loyally’ are not effective, and immediately free the demon if tried. That is, the command must specify particular services and actions rather than establishing conditions or attitudes for future behaviour.</p>
                            <p>A character cannot have more than seven demons bound on this plane at one time; if he tries to bind an eighth, all are freed. Some demons have a special resistance to binding, which increases their magical defence solely against this spell.</p>
                            <p>Binding can in some cases be to the demon’s advantage. It may want permanent residence on this plane. Demon lords invariably desire to return to their realms as soon as possible, but some of the lesser demons lead a difficult existence in their own world and would prefer being bound to this plane. The problem is one of trust—there is nothing to prevent a summoner from agreeing to bind a demon ‘as a favour’ and then giving it any order he likes. There is thus only about a 1% chance of a demon asking to be bound—if you then actually keep your word and bind it without giving it a command, you will have that demon’s eternal gratitude.</p>
                        </div>
                        <div class="spell_button">
                            <span>Ritual of Binding Spell Attack</span><button type="roll" class="roll twod10" name="attr_ritual_of_binding" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to bind a demon to their service}} {{subtitle=Ritual of Binding Spell Attack}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=A bound demon cannot directly harm the one who bound it, nor can it deliberately kill itself in order to escape from this plane. The binder can give it one command of up to thirteen words, and the demon will obey this command literally. Commands such as ‘Obey all my future commands’ or ‘Serve me loyally’ are not effective, and immediately free the demon if tried.}} " ></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_demonologist4">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>
                <details class="spellbook">
                    <summary class="spellbook-header">Demonologist Spells of Rank Six</summary> 
                    <div class="spell-entry">
                        <div class="spell_name">Possession by Eldyr</div>
                        <div class="spell_range">Range: 1m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>The possession spells are a group of enchantments for possessing people (usually the caster’s companions) with the spirit-essence of a demon lord. The demon is not summoned by the spell. Unlike most normal spells, Possession by Eldyr takes five Combat Rounds to cast. To cast the Possession by Eldyr spell one must also have the talisman appropriate to the demon lord invoked—this may be a mask, wand, bell, gong, censer or one of several other items. The caster must prepare talismans for any demon lords he wishes to invoke, at a construction cost of 3d6F each. Alternatively, he can buy or otherwise obtain talismans prepared by another demonologist. The character must make a Demonology roll to see whether he has properly prepared a particular demonic talisman—a Possession by Eldyr spell will always fail (still with an expenditure of Magic Points) if the talisman used is defective.</p>
                            <p>Up to three people are affected by a single casting of Possession by Eldyr. To be affected they must be conscious but passive—the spell cannot be applied to a character in combat. Possession can be directed at subdued or magically charmed enemies of the caster, but he must match his magical attack against their magical defence for the spell to take effect. Also, Possession by Eldyr does not give the caster control over the spell’s recipients—the possessed characters retain their own normal aims and motives. However, they cannot under any circumstances harm the caster so long as he carries the proper talisman. Note that two different Possession by... spells cannot be combined. Possessed characters are also unaffected by the following spells: Enslave, Enthrall, and Pacify.</p>
                            <p>The possessed characters have magically charming voices and demeanours. Any characters of 3rd Rank or below who listen to them speak for one Combat Round or more will be affected by the possessed characters as though they had cast a Command spell (see Dragon Warriors, p. 82). Looks scores are raised to 19.</p>
                        </div>
                        <div class="spell_button">
                            <span>Possession by Eldyr Demonology Roll</span><button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attmepts to prepare a demonic talisman}} {{subtitle=Roll 2d10 under Demonology Skill}} {{roll=[[2d10]]}} {{Vs = [[@{rank}+@{demonology_modifier}]]}}" name="roll_demonology_possession"></button>
                            <span>Possession by Eldyr Spell Attack Roll:</span><button type="roll" name="attr_possession_eldyr" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} invokes the spirit-essence of Eldyr}} {{subtitle=Possession by Eldyr}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The possessed characters have magically charming voices and demeanours. Any characters of 3rd Rank or below who listen to them speak for one Combat Round or more will be affected by the possessed characters as though they had cast a Command spell (see Dragon Warriors, p. 82). Looks scores are raised to 19.}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Possession by Kesh</div>
                        <div class="spell_range">Range: 1m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>As per Possession by Eldyr, except the following applies instead of the final paragraph: The possessed characters have an aura of terror about them. If anyone attempts to come within 5m of one of them, he pits his Magical Attack against the Magical Defence of the approacher. If he succeeds, the possessed character is so terrifying that the victim may not approach any closer, and may not attack the possessed character by any means.</p>
                        </div>
                        <div class="spell_button">
                            <span>Possession by Kesh Demonology Roll</span><button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attmepts to prepare a demonic talisman}} {{subtitle=Roll 2d10 under Demonology Skill}} {{roll=[[2d10]]}} {{Vs = [[@{rank}+@{demonology_modifier}]]}}" name="roll_demonology_possession"></button>
                            <span>Possession by Kesh Spell Attack Roll:</span><button type="roll" name="attr_possession_kesh" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} invokes the spirit-essence of Kesh}} {{subtitle=Possession by Kesh}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The possessed characters have an aura of terror about them. If anyone attempts to come within 5m of one of them, he pits his Magical Attack against the Magical Defence of the approacher. If he succeeds, the possessed character is so terrifying that the victim may not approach any closer, and may not attack the possessed character by any means.}}"></button>
                       </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_demonologist4">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>
                <details class="spellbook">
                    <summary class="spellbook-header">Demonologist Spells of Rank Seven</summary> 
                    <div class="spell-entry">
                        <div class="spell_name">Possession by Tsienra</div>
                        <div class="spell_range">Range: 1m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>As per Possession by Eldyr, except the following applies instead of the final paragraph: The possessed characters gain +2 to Attack and +1 to Defence, and have their Reflexes scores raised to 19.</p>
                        </div>
                        <div class="spell_button">
                            <span>Possession by Tsienra Demonology Roll</span><button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attmepts to prepare a demonic talisman}} {{subtitle=Roll 2d10 under Demonology Skill}} {{roll=[[2d10]]}} {{Vs = [[@{rank}+@{demonology_modifier}]]}}" name="roll_demonology_possession"></button>
                            <span>Possession by Tsienra Spell Attack Roll:</span><button type="roll" name="attr_possession_Tsienra" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} invokes the spirit-essence of Tsienra}} {{subtitle=Possession by Tsienra}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The possessed characters gain +2 to Attack and +1 to Defence, and have their Reflexes scores raised to 19.}}"></button>
                       </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Possession by Kojuro</div>
                        <div class="spell_range">Range: 1m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>As per Possession by Eldyr, except the following applies instead of the final paragraph: The possessed characters gain +2 to Attack and +2 to Defence, and gain a +1 bonus to Damage and to all armour bypass rolls in mêlée combat.</p>
                        </div>
                        <div class="spell_button">
                            <span>Possession by Kojuro Demonology Roll</span><button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attmepts to prepare a demonic talisman}} {{subtitle=Roll 2d10 under Demonology Skill}} {{roll=[[2d10]]}} {{Vs = [[@{rank}+@{demonology_modifier}]]}}" name="roll_demonology_possession"></button>

                            <span>Possession by Kojuro Spell Attack Roll:</span><button type="roll" name="attr_possession_Kojuro" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} invokes the spirit-essence of Kojuro}} {{subtitle=Possession by Kojuro}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The possessed characters gain +2 to Attack and +2 to Defence, and gain a +1 bonus to Damage and to all armour bypass rolls in mêlée combat.}}"></button>
                       </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_demonologist4">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>
                <details class="spellbook">
                    <summary class="spellbook-header">Demonologist Spells of Rank Eight</summary> 
                    <div class="spell-entry">
                        <div class="spell_name">Possession by Akresh</div>
                        <div class="spell_range">Range: 1m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>As per Possession by Eldyr, except the following applies instead of the final paragraph: The possessed characters gain +2 to Defence, a +1 bonus to any armour worn (or natural armour 2 if no armour is worn) and an increase of +2d6 Health Points. Damage is removed from the bonus Health Points first.</p>
                        </div>
                        <div class="spell_button">
                            <span>Possession by Akresh Demonology Roll</span><button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attmepts to prepare a demonic talisman}} {{subtitle=Roll 2d10 under Demonology Skill}} {{roll=[[2d10]]}} {{Vs = [[@{rank}+@{demonology_modifier}]]}}" name="roll_demonology_possession"></button>
                            <span>Possession by Akresh Spell Attack Roll:</span><button type="roll" name="attr_possession_Akresh" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} invokes the spirit-essence of Akresh}} {{subtitle=Possession by Akresh}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The possessed characters gain +2 to Defence, a +1 bonus to any armour worn (or natural armour 2 if no armour is worn) and an increase of +2d6 Health Points. Damage is removed from the bonus Health Points first.}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Possession by Hragahl</div>
                        <div class="spell_range">Range: 1m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>As per Possession by Eldyr, except the following applies instead of the final paragraph: The possessed characters gain +2 to Magical Attack and +2 to Magical Defence, and have their Psychic Talent scores raised to 19.</p>
                        </div>
                        <div class="spell_button">
                            <span>Possession by Hragahl Demonology Roll</span><button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attmepts to prepare a demonic talisman}} {{subtitle=Roll 2d10 under Demonology Skill}} {{roll=[[2d10]]}} {{Vs = [[@{rank}+@{demonology_modifier}]]}}" name="roll_demonology_possession"></button>
                            <span>Possession by Hragahl Spell Attack Roll:</span><button type="roll" name="attr_possession_Hragahl" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} invokes the spirit-essence of Hragahl}} {{subtitle=Possession by Hragahl}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The possessed characters gain +2 to Magical Attack and +2 to Magical Defence, and have their Psychic Talent scores raised to 19.}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_demonologist8">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>
                <details class="spellbook">
                    <summary class="spellbook-header">Demonologist Spells of Rank Nine</summary> 
                    <div class="spell-entry">
                        <div class="spell_name">Possession by Engala</div>
                        <div class="spell_range">Range: 1m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>As per Possession by Eldyr, except the following applies instead of the final paragraph: The possessed characters have their Strength scores raised to 19, and gain an increase of +3d6 Health Points. Damage is removed from the bonus Health Points first.</p>
                        </div>
                        <div class="spell_button">
                            <span>Possession by Engala Demonology Roll</span><button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attmepts to prepare a demonic talisman}} {{subtitle=Roll 2d10 under Demonology Skill}} {{roll=[[2d10]]}} {{Vs = [[@{rank}+@{demonology_modifier}]]}}" name="roll_demonology_possession"></button>

                            <span>Possession by Engala Spell Attack Roll:</span><button type="roll" name="attr_possession_Engala" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} invokes the spirit-essence of Engala}} {{subtitle=Possession by Engala}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=he possessed characters have their Strength scores raised to 19, and gain an increase of +3d6 Health Points. Damage is removed from the bonus Health Points first.}}"></button>
                       </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Possession by Sarasathsa</div>
                        <div class="spell_range">Range: 1m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>As per Possession by Eldyr, except the following applies instead of the final paragraph: The possessed characters gain +6 to Magical Defence, are immune to Fright Attacks, and have their Intelligence scores raised to 19. Sarasatha’s possession is double-edged, in that the recipient could become sunk into lethargy and pensive introspection (roll Psychic Talent or less on 2d10 when coming out of possession to avoid this). A lethargic character will be unwilling to take any action that involves effort. He may attempt another Psychic Talent roll after every hour of lethargy to throw off the effects.</p>
                        </div>
                        <div class="spell_button">
                            <span>Possession by Sarasathsa Demonology Roll</span><button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attmepts to prepare a demonic talisman}} {{subtitle=Roll 2d10 under Demonology Skill}} {{roll=[[2d10]]}} {{Vs = [[@{rank}+@{demonology_modifier}]]}}" name="roll_demonology_possession"></button>

                            <span>Possession by Sarasathsa Spell Attack Roll:</span><button type="roll" name="attr_possession_Sarasathsa" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} invokes the spirit-essence of Sarasathsa}} {{subtitle=Possession by Sarasathsa}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The possessed characters gain +6 to Magical Defence, are immune to Fright Attacks, and have their Intelligence scores raised to 19. Sarasatha’s possession is double-edged, in that the recipient could become sunk into lethargy and pensive introspection (roll Psychic Talent or less on 2d10 when coming out of possession to avoid this). A lethargic character will be unwilling to take any action that involves effort. He may attempt another Psychic Talent roll after every hour of lethargy to throw off the effects.}}"></button>
                       </div>
                    </div>    
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_demonologist9">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>
                <details class="spellbook">
                    <summary class="spellbook-header">Demonologist Spells of Rank Ten</summary> 
                    <div class="spell-entry">
                        <div class="spell_name">Possession by Kyrax</div>
                        <div class="spell_range">Range: 1m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>As per Possession by Eldyr, except the following applies instead of the final paragraph: The possessed characters gain +4 to Stealth and Perception.</p>
                        </div>
                        <div class="spell_button">
                            <span>Possession by Kyrax Demonology Roll</span><button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attmepts to prepare a demonic talisman}} {{subtitle=Roll 2d10 under Demonology Skill}} {{roll=[[2d10]]}} {{Vs = [[@{rank}+@{demonology_modifier}]]}}" name="roll_demonology_possession"></button>

                            <span>Possession by Kyrax Spell Attack Roll:</span><button type="roll" name="attr_possession_Kyrax" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} invokes the spirit-essence of Kyrax}} {{subtitle=Possession by Kyrax}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=The possessed characters gain +4 to Stealth and Perception.}}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">Possession by Umalu</div>
                        <div class="spell_range">Range: 1m</div>
                        <div class="spell_duration">Duration: Spell Expiry Roll applies</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>As per Possession by Eldyr, except the following applies instead of the final paragraph: Roll 1d20 for each possessed character:</p>
                            <ul>
                                <li>1. Grows 2 extra arms; may wield either two two-handed weapons, or two shields and two one-handed weapons, attacking or defending with all (this will allow a character to make 2 attacks, and potentially attempt 2 shield parries, per combat round).</li>
                                <li>2. Thick, armoured plates all over. The character gains an Armour Factor of 6 (not cumulative with other armour). Furthermore, any attack that does penetrate his armour does 1 point less damage than usual.</li>
                                <li>3. Catlike quickness. The character’s Reflexes increases to 19, his movement is increased by half as much again, his Evasion increases by +2, and his Attack and Defence increase by +2.</li>
                                <li>4. Venomed claws, horns, or other natural weapons. The character may make an unarmed attack that is d10, 5, and inflicts a strong poison attack on the target.</li>
                                <li>5. Huge pincers, or club-like arm, or similar. The character may make a d12, 7 unarmed attack.</li>
                                <li>6. Terrifying appearance. The character gains a Gaze Attack (see Dragon Warriors, p. 123). He matches his Magical Attack against the targets’ Magical Defence. If he succeeds, they are paralysed with terror for 1d6 Combat Rounds, unable to move or perform any actions.</li>
                                <li>7. Wings. The character’s movement doubles, and he may fly, with all that that entails.</li>
                                <li>8. Chameleonic skin. The character’s stealth increases by +6, and defence by +4.</li>
                                <li>9. Flaming flesh. Anyone who is in mêlée combat with the character suffers an automatic hit each combat round, with d6 armour penetration and doing 4 damage.</li>
                                <li>10. Flaming breath. The character may breathe flame each round, with a range of 20m, doing 5d6 damage to anyone who cannot evade its speed of 15 (armour worn reduces the damage by 2, regardless of type).</li>
                                <li>11. Acid blood. Anyone who successfully wounds the character in mêlée combat must dodge a speed 16 attack, or suffer 6d6 damage (armour does not offer any protection, and indeed has a 25% chance of being melted and rendered useless).</li>
                                <li>12. Death touch. The character’s right hand becomes cold and lifeless, imbued with necromantic energy. If he manages to touch an opponent in combat (normal attack versus defence roll applies), the victim suffers 1d6 damage (armour does not protect) and must roll equal to or less than his Strength on 2d10 or die on the spot.</li>
                                <li>13. Living shadow. The character becomes immune to damage from non-magical weapons, which simply pass through him without harm. His own attacks ignore non-magical armour.</li>
                                <li>14. Giantism. The character’s Strength increases to 19, and he gains an increase of +5d6 Health Points. Damage is removed from the bonus Health Points first.</li>
                                <li>15. Webbed feet, withered legs, or tentacles instead of legs; movement is halved, and the character has a –2 penalty to stealth.</li>
                                <li>16. One arm (determined randomly) withers away, or is replaced by a non-functional claw or other appendage. The character may not use a shield or 2-handed weapon.</li>
                                <li>17. The character’s sight is interfered with, perhaps with the eyes being replaced with insectoid eyes, or perhaps with a flap of skin hanging over them. –2 penalty to Perception, Defence, and Attack.</li>
                                <li>18. The character’s whole face is hideously warped and disfigured. Looks score is reduced to 1.</li>
                                <li>19. The character’s bones become brittle and thin; all damage he suffers in combat is increased by +1.</li>
                                <li>20. The character’s brain becomes soft and mushy, or is exposed to the air by part of the skull drawing back to reveal it. His Intelligence and Psychic Talent scores are each reduced by –6 (to a minimum of 1).</li>
                            </ul>
                        </div>
                        <div class="spell_button">
                            <span>Possession by Umalu Demonology Roll</span><button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attmepts to prepare a demonic talisman}} {{subtitle=Roll 2d10 under Demonology Skill}} {{roll=[[2d10]]}} {{Vs = [[@{rank}+@{demonology_modifier}]]}}" name="roll_demonology_possession"></button>

                            <span>Possession by Umalu Spell Attack Roll:</span> 
                            <button type="roll" name="attr_possession_Umalu" class="roll twod10" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} invokes the spirit-essence of Umalu}} {{subtitle=Possession by Umalu}} {{spellattackroll=[[2d10]]}} {{magicalattackvsmagicaldefence=[[@{finalmagicalattack}-?{Target's Magical Defence}]]}} {{desc=Roll 1d20 for each possessed character: [[1d20]] }}"></button>
                        </div>
                    </div>
                    <div class="spell-entry">
                        <div class="spell_name">The Curse of Asterion</div>
                        <div class="spell_range">Range: Touch</div>
                        <div class="spell_duration">Duration: Permanent</div>
                        <div class="spell_desc">
                            <span>Description</span>
                            <p>Also called the Curse of Binding Energy, this is a technique for dispelling a particular demon for all time. It is usable only once in a character’s lifetime (for reasons which will become obvious), and in fact only two cases of its use are recorded—once when the noble Asterion employed it to save his daughter’s life, the other when the lunatic mage Athat turned it against a demon lord in a moment of arrogant pique.</p>
                            <p>A fairly short phrase, the Curse is only effective if the character follows through the complex logical arguments associated with it as he speaks the words of the Curse; this is represented by the demonologist rolling under his Intelligence score on three six-sided dice.</p>
                            <p>The procedure is as follows: the character must touch and grapple with the demon (represented by a successful attack against its defence) as he (or she) activates the Curse of Asterion. If successful, both the demon and the character disappear forever from this world. Are they both disintegrated by the power of the magic? Or transported to a dimension of their own where they battle on together throughout Eternity? The truth is unknowable.</p>
                        </div>
                        <div class="spell_button">
                            <span>The Curse of Asterion Intelligence Roll:</span><button type="roll" name="attr_curse_of_asterion" class="roll d6" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} invokes the Curse of Asterion}} {{subtitle=The Curse of Asterion}} {{roll=[[3d6]]}} {{vs=[[@{finalintelligence}]]}}"></button><br>
                            <span>The Curse of Asterion Grapple Attack Roll:</span><button class="roll d20" type="roll" name="attr_meleeattack_asterion" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} grabs at the demon, trying to graple it}} {{subtitle=The Curse of Asterion Grapple Attack}} {{attackroll=[[1d20cs1cf20]]}} {{attackvsdefence=[[(@{finalmeleeattack}-@{magicmeleeweaponbonus})-(?{Enemy Defence|0})]]}} {{desc=If successful, both the demon and the character disappear forever from this world.}}" ></button>                
                        </div>
                    </div>
                    <div class="spell-entry">
                        <fieldset class="repeating_spells_demonologist4">
                            <span>Name</span>
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellName" value="" /><br>
                            <span>Range </span>
                            <input class="eightmidtextinput" type="text" name="attr_CustomSpellRange" value="" /><br>
                            <span>Duration</span> 
                            <input class="sixteenlongtextinput" type="text" name="attr_CustomSpellDuration" value="" /><br>
                            <span>Description</span>
                            <div class="sheet-auto-expand">
                                <span name="attr_CustomSpellDescription"></span>
                                <textarea name="attr_CustomSpellDescription"></textarea>
                            </div>    
                        </fieldset>
                    </div>
                </details>
            </div>
        </div>
    </div>
    <div class="inventory">
        <div class="weapons">
            <div class="meleeweapons">
                <h2>Melee Weapons</h2>
                <fieldset class="repeating_meleeweapons">
                    <input type="hidden" name="attr_hide" value="0" class="equip-toggle">
                    <div class="hidden-row">
                        <span>Weapon name</span> <input type="text" name="attr_meleeweaponname" class="eightmidtextinput" />
                        <br>
                        <span>Weapon type</span> <input type="text" name="attr_meleeweapon" list="meleeweapon" class="eightmidtextinput" />
                        <br>
                        <span>Magic Bonus</span><input type="number" name="attr_magicmeleeweaponbonus" min="0" max="3" value="0" class="fourshorttextinput" />
                        <span>Armour Bypass Roll</span> <input type="text" name="attr_meleeabr" value="0" class="fourshorttextinput" />
                        <span>Damage</span> <input type="text" name="attr_meleedamage" value="0" size="4" class="fourshorttextinput" />
                        <span>Other Effects</span> 
                        <div class="sheet-auto-expand">
                            <span name="attr_meleeothereffects"></span>
                            <textarea name="attr_meleeothereffects"></textarea>
                        <br>
                        </div>
                        <button type="action" name="act_equippedmeleewep">Equip/Update</button>
                    </div>
                </fieldset>
            </div>
            <div class="rangedweapons">
                <h2>Ranged Weapons</h2>
                <fieldset class="repeating_rangedweapons">
                    <input type="hidden" name="attr_hide" value="0" class="equip-toggle">
                    <div class="hidden-row">
                        <span>Weapon name</span> <input type="text" name="attr_rangedweapon_name" class="eightmidtextinput" /><br>
                        <span>Weapon type</span> <input class="eightmidtextinput" type="text" name="attr_rangedweapon" list="rangedweapon" /><br>
                        <input type="hidden" name="attr_ranged_magic_toggle" class="rangedmagicallowed" value="0"/>
                        <div class="rangedmagicallowed">
                            <span>Magic Bonus</span> <input class="fourshorttextinput" type="number" name="attr_magicrangedweaponbonus" min="0" max="3" value="0" />
                        </div>
                        <span>Armour Bypass Roll</span> <input class="fourshorttextinput" type="text" name="attr_rangedabr" value="0" />
                        <span>Damage</span> <input class="fourshorttextinput" type="text" name="attr_rangeddamage" value="0" size="4" />
                        <br>
                        <span>Short</span> <input class="fourshorttextinput" type="number" name="attr_weaponshortrange" value="0" />
                        <span>Medium</span> <input class="fourshorttextinput" type="number" name="attr_weaponmediumrange" value="0" />
                        <span>Long</span> <input class="fourshorttextinput" type="number" name="attr_weaponlongrange" value="0" />
                        <br>
                        <button type="action" name="act_equippedrangedwep">Equip/Update</button>
                    </div>
                </fieldset>
            </div>
            <div class="ammunition">
                <h2>Ammunition</h2>
                <fieldset class="repeating_ammo">
                    <input type="hidden" name="attr_hide" value="0" class="equip-toggle">
                    <div class="hidden-row">
                        <span>Ammunition Name</span> <input type="text" name="attr_ammotype_name" class="eightmidtextinput" /><br>
                        <span>Ammunition Type</span> <input class="sixteenlongtextinput" type="text" name="attr_ammotype" list="ammotype" /><br>
                        <span>Quantity</span> <input class="fourshorttextinput" type="number" name="attr_ammoqty" value="0" />
                        <span>Magic Bonus</span> <input class="fourshorttextinput" type="number" name="attr_magicammobonus" min="0" max="3" value="0" />
                        <br>
                        <span>Special Ammunition Modifiers: Attack</span> <input class="fourshorttextinput" type="number" name="attr_specialammomodifier" value="0" />
                        <span>ABR</span> <input class="fourshorttextinput" type="number" name="attr_specialammoabrmodifier" value="0" />
                        <span>Damage</span> <input class="fourshorttextinput" type="number" name="attr_specialammodmgmodifier" value="0" />
                        <br>
                        <span>Special Effects</span> 
                        <div class="sheet-auto-expand">
                            <span name="attr_specialeffect"></span>
                            <textarea name="attr_specialeffect"> </textarea>
                            <br>
                        </div>
                        <button type="action" name="act_equippedammo">Equip/Update</button>
                    </div>
                </fieldset>
            </div>
        </div>
        <div class="armour">
            <h2>Armour</h2>
            <div class="armourtypelist">
            <span>Armour Type</span> <input type="text" list="armourtype" name="attr_armourtype" />
            </div>
            <div class="basearmourdetails">
                <span>Base Armour Factor</span> <input type="number" name="attr_baseaf" min="0" value="0"  /><br>
                <span>Magic Bonus</span> <input type="number" name="attr_magicafbonus" min="0" max="3" value="0" /><br>
                <span>Miscellaneous Bonus</span> <input type="number" name="attr_miscaf" title="Can be a positive or negative number." value="0" />
            </div>
            <div class="armourproficiencypenalties">
                <h3>Non-Proficiency Penalties</h3>
                <span>Attack</span> <input type="number" name="attr_armourattackpenalty" max="0" step="1" value="0"  /><br>
                <span>Defence</span> <input type="number" name="attr_armourdefencepenalty" max="0" step="1" value="0"  /><br>
                <span>Stealth</span> <input type="number" name="attr_armourstealthpenalty" max="0" step="1" value="0"  />
            </div>
            <div class="skullimage"> 
                <img class="icon skull" src="https://i.imgur.com/CrBuh7g.png" alt="Helmed Skull" /> 
            </div>
            <div class="shieldtogglebox">
                <span>Shield</span> 
                <select name="attr_shield">
                    <option value="0">Not Equipped</option>
                    <option value="1">Equipped</option>
                </select>
            </div>
            <input type="hidden" class="shield" name="attr_shield" value="0" />
            <div class="shieldhidden">
                Roll <input title="Modified by Guard/Abilities" type="number" class="fourshorttextinput" name="attr_shieldsuccessvalue" value="1"  /> on <input class="fourshorttextinput" type="text" name="attr_shielddievalue" value="1d6"  />
                <button class="d6" type="roll" value="&{template:custom} {{title=@{character_name} attempts to block with a Shield}} {{subtitle=Roll equal to, or under, Target Number}} {{roll= [[@{shielddievalue}]]}} {{Vs= [[@{shieldsuccessvalue}]] }}" name="roll_shieldcheck"></button>
                <span>Magic Bonus</span> <input class="fourshorttextinput" type='number' name='attr_magicshield' value='0' />    
            </div>    
        </div>
        <div class="money">
            <h2>Coin Purse</h2>
            <div class="goldcrowns">
                <span>Crowns</span> <input type="number" id="gc" name="attr_gc" value="0" />
            </div>
            <div class="silverflorins">
                <span>Florins</span> <input type="number" id="sf" name="attr_sf" value="0" />
            </div>
            <div class="copperpennies">
                <span>Pennies</span> <input type="number" id="cp" name="attr_cp" value="0" />
            </div>
            <div class="chestimage">
                <img class="icon chest" src="https://i.imgur.com/Mz8a04v.png" alt="Coin Chest" />
            </div>
            <div class="otherwealth">
                <h2>Other Wealth</h2>
                <div class="sheet-auto-expand">
                    <span name="attr_otherwealth"></span>
                    <textarea name="attr_otherwealth"></textarea>
                </div>  
            </div>
        </div>
        <div class="possessions">
            <h2>Possessions</h2>
                <fieldset class="repeating_inventoryitems">
                        <span>Item</span> <input type="text" name="attr_inventoryitem" value="" /><br>
                        <span>Location</span> <input type="text" name="attr_itemlocation" list="itemlocation" /><br>
                        <span>Quantity</span> <input type="number" step="any" name="attr_inventoryqty" value="1" /> &nbsp; &nbsp; &nbsp; 
                        <span>Encumbrance Value</span> <input type="number" step="any" name="attr_encumbranceValue" value="0" />
                </fieldset>
        </div>
        <div class="encumbrance">
            <h2>Encumbrance</h2>
            <div class="encumbrancecontainer">
                <span>Total Encumbrance</span><br> 
                <input name="attr_totalencumbrance" type="number" step="any" value="0" title="Includes only equipment and coins. Weapons, ammunition, and shield need to be added to inventory to count toward encumbrance." /><br><br><br><br>
                <span>Maximum Encumbrance</span><br> 
                <input name="attr_maxenc" type="number" step="any" value="0" title="Determined by Strength score" />
            </div>
            <div class="clawimage">
                <img class="icon claw" src="https://i.imgur.com/gvqoIzZ.png" alt="Encumbrance Icon" />
            </div>    
        </div>
    </div>
    <div class="skills">
        <div class="professionskillscontainer">
            <input type="hidden" class="profession-toggle" name="attr_profession" value="0" />
            <div class="assassinskills">
                <details>
                <summary><h2>Assassin Profession Skills</h2></summary>
                <div class="counter-container">
                    <div class="counterbox">
                        <span>Combat Techniques:</span>
                        <div class="counterfields">
                            <span>Max:</span>
                            <input type="number" class="fourshorttextinput" name="attr_combattechniques_max" value="0" />
                            
                            <span>Selected:</span>
                            <input type="number" class="fourshorttextinput" name="attr_combattechniques_selected" value="0" readonly />
                        </div>
                    </div>
                    <div class="counterbox">
                        <span>Mental Techniques:</span>
                        <div class="counterfields">
                            <span>Max:</span>
                            <input type="number" class="fourshorttextinput" name="attr_mentaltechniques_max" value="0" />
                            
                            <span>Selected:</span>
                            <input type="number" class="fourshorttextinput" name="attr_mentaltechniques_selected" value="0" readonly />
                        </div>
                    </div>
                    <div class="counterbox">
                        <span>Alchemical Techniques:</span>
                        <div class="counterfields">
                            <span>Max:</span>
                            <input type="number" class="fourshorttextinput" name="attr_alchemicaltechniques_max" value="0" />
                            
                            <span>Selected:</span>
                            <input type="number" class="fourshorttextinput" name="attr_alchemicaltechniques_selected" value="0" readonly />
                        </div>
                    </div>
                    <div class="counterbox">
                        <span>Skills of the Assassin:</span>
                        <div class="counterfields">
                            <span>Max:</span>
                            <input type="number" class="fourshorttextinput" name="attr_assassinskills_max" value="0" />
                            <span>Selected:</span>
                            <input type="number" class="fourshorttextinput" name="attr_assassinskills_selected" value="0" readonly />
                        </div>
                    </div>
                </div>
                <details>
                    <summary>Assassin Combat Techniques</summary>
                    <div class="assassincombattechniques">
                        <div class="skillrow">
                            <details>
                                <summary>Armour Piercing</summary>
                                <select name="attr_armour_piercing">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_armour_peircing_text"></span>
                                    <textarea readonly name="attr_armour_peircing_text">Assassins are extremely adept at striking for the weak points in an opponent’s armour, and when attacking with sword, staff, dagger, shortsword or throwing spike, the Assassin adds +1 to his Armour Bypass Rolls.
                                    </textarea>
                                </div>    
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Shock Attack</summary>
                                <select class="assassincheckbox shock_attack" name="attr_shock_attack">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <input type="hidden" class="assassincheckbox shock_attack" name="attr_shock_attack" value="0"/>
                                <div class="assassinroll shock_attack">
                                    <button class="roll d6" type="roll" value="&{template:custom} {{title=@{character_name} delivers a Shock Attack!}} {{subtitle=Roll 1d6}} {{roll= [[1d6]]}} {{Result= 1 Stunned Opponent’s attack, defence and evasion are all at 0.
                                    2 Aghast Opponent’s attack and evasion are at 0; defence is half normal. 
                                    3-4 Astonished Opponent’s attack is at 0; evasion and defence at half normal. 
                                    5-6 Surprised Opponent’s attack is at 0; evasion and defence are unimpaired}}" ></button>
                                </div>
                                <div class="sheet-auto-expand">
                                    <span name="attr_shock_attack_text"></span>
                                    <textarea name="attr_shock_attack_text" readonly>An Assassin who successfully moves within 3 metres of an enemy without being noticed is then able to make a shock attack. The effect of this is automatic surprise (see p. 61). Additionally, if the Assassin’s rank is higher than that of his surprised opponent, he rolls d6 and consults the Shock Attack Table.
                                    </textarea>
                                    <ul>Shock Attack Table 
                                        <li>Roll Description Effect</li>
                                        <li>1 Stunned Opponent’s attack, defence and evasion are all at 0 </li>
                                        <li>2 Aghast Opponent’s attack and evasion are at 0; defence is half normal </li>
                                        <li>3-4 Astonished Opponent’s attack is at 0; evasion and defence at half normal </li>
                                        <li>5-6 Surprised Opponent’s attack is at 0; evasion and defence are unimpaired</li>
                                    Any special effect from the above table lasts for a round, after which the victim may act normally.</ul>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Throwing Spike</summary>
                                <select name="attr_throwing_spike">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select> 
                                <div class="sheet-auto-expand">
                                    <span name="attr_throwing_spike_text"></span>
                                    <textarea name="attr_throwing_spike_text" readonly>The throwing spike (sometimes called a throwing star) is an unusual weapon used almost exclusively by Assassins. Ordinarily it is just a (d2, 2) weapon—making it (d2 +1, 2) in the hands of an Assassin, if the Assassin has the Armour Piercing technique—and is therefore not especially effective against armoured targets. It has the advantage that an Assassin can hurl up to three spikes, not necessarily all at the same opponent, as a single action. Throwing spikes are sometimes coated with poison (see pages 45 and 122).
                                    Throwing spike: (d2 +1, 2) when used by an Assassin. Short/Medium/Long ranges: 0-10m/11-20m/21-25m 
                                    Assassins must make their own spikes/stars, at a materials cost of 3-12 florins for nine. This takes the character two days. The nine spikes together, fitted into a sort of bandolier, count as one item for encumbrance purposes. Throwing spikes can be re-used if the Assassin can locate and recover them after they have been thrown.
                                    </textarea>
                                </div>    
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary><span >Unarmed Combat</span></summary>
                                <select name="attr_unarmed_combat">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select> 
                                <div class="sheet-auto-expand">
                                    <span name="attr_unarmed_combat_text"></span>
                                    <textarea name="attr_unarmed_combat_text" readonly>The skill of unarmed combat is of particular interest to an Assassin, because he cannot always be sure of having a weapon to hand when his intended victim comes near. When using unarmed combat, the Assassin makes Armour Bypass Rolls with a d6 and inflicts 3 points of damage on a successful blow.
                                    </textarea>
                                </div>    
                            </details>
                        </div>
                    </div>
                </details>
                <details>
                    <summary>Assassin Mental Techniques</summary>
                    <div class="assassinmentaltechniques">
                        <div class="skillrow">
                            <details>
                                <summary><span >Inner Sense</span></summary>
                                <select class="assassincheckbox inner_sense" name="attr_inner_sense">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <input type="hidden" class="assassincheckbox inner_sense" name="attr_inner_sense" value="0"/>
                                <div class="assassinroll inner_sense">
                                    <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} extends their Inner Senses}} {{subtitle=Roll 1d20 under Psychic Talent}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finalpsychictalent} }}" name="roll_inner_sense"></button>
                                </div>
                                <div class="sheet-auto-expand">
                                    <span name="attr_inner_sense_text"></span>
                                    <textarea name="attr_inner_sense_text" readonly>Assassins are the agents of night, and cultivate a psychic ‘inner sense’ to enable them to operate in darkness. Whenever an Assassin comes within one metre of a pit, obstacle, being or trap—even in pitch blackness—he will sense it if he rolls under his Psychic Talent score on 1d20. For the now-familiar reasons, this roll is actually made for the Assassin by the GM.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Memorize</summary>
                                <select class="assassincheckbox memorize" name="attr_memorize">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <input type="hidden" class="assassincheckbox memorize" name="attr_memorize" value="0"/>
                                <div class="assassinroll memorize">
                                    <button class="roll twod10" type="roll" value="&{template:custom} {{title=@{character_name} tries to recall information}} {{subtitle=Roll 1d100 under Target Number}} {{roll=[[1d100cs1cf100]]}} {{Vs=[[100 - (?{Months Passed (max 9)|1} * 10)]]}}" name="roll_memorize"></button>
                                </div>
                                <div class="shet-auto-expand">
                                    <span name="attr_memorize_text"></span>
                                    <textarea name="attr_memorize_text" readonly>Assassins are trained to recall information with almost photographic accuracy. The Assassin has total short-term recall, with a 100% chance of recollecting the full details of anything he has glanced at or overheard in the last month. The chance of remembering something diminishes with the passage of time, decreasing by 10% for each month after the first until reaching a minimum of 10%.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Deathvow</summary>
                                <select name="attr_deathvow">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_deathvow_text"></span>  
                                    <textarea readonly>A Master Assassin gains the power of the Deathvow, wherewith he can ‘set’ himself to kill a given character, driving this single objective so forcefully into his subconscious mind that he becomes virtually a walking bomb. The time taken to prepare the mind for the Deathvow is one week. During this period, the Master Assassin reviews and absorbs everything he knows about his intended target. If he subsequently comes within 3m of the target at any time, the Assassin immediately goes into a killing frenzy that lasts until he or the target is dead. This killing frenzy gives the Assassin a bonus of +10 to attack and +2 on Armour Bypass Rolls and on the damage inflicted with a successful hit; also, instead of blacking out at 0 HP, he stays conscious and fighting until the moment of death (–3 HP).
                                    </textarea>
                                </div>
                            </details>
                        </div>
                    </div>
                </details>
                <details>
                    <summary>Assassin Meditational Techniques</summary>
                    <div class="assassinmeditationaltechniques">
                        <div class="skillrow">
                            <details>
                                <summary>Light Trance</summary>
                                <select name="attr_light_trance">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_light_trance_text"></span>
                                    <textarea name="attr_light_trance_text" readonly>The Light Trance, which an Assassin may make use of from 1st rank up, allows for rapid recovery from injury and poison. The Assassin must remain in the trance for one full day, at the end of which he recovers an extra 1d8 Health Points in addition to any HP that he would have recovered anyway by the natural healing rules (see p. 68). There is also a 20% chance that the trance will neutralize any disease or toxin from which the Assassin is suffering.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Darkness Trance</summary>
                                <select name="attr_darkness_trance">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_darkness_trance_text"></span>
                                    <textarea name="attr_darkness_trance_text" readonly>The Darkness Trance, which Assassins acquire at 2nd rank, duplicates the effect of the Mystic spell Suspended Animation (p. 90). The Assassin must spend two hours in the trance, and at the end of this time he is able to sink into a deathlike coma of any preset duration up to a year and a day. The Assassin appears dead while in this state, and even ESP will detect no signs of life.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Water Trance</summary>
                                <input type="checkbox" name="attr_water_trance" value="1" />
                                <div class="sheet-auto-expand">
                                    <span name="attr_water_trance_text"></span>
                                    <textarea name="attr_water_trance_text" readonly>The Water Trance ability is gained at 4th rank. The Assassin must spend one hour in the trance state. At the end of this time his thoughts become masked so that he cannot be detected by ESP, the spell Scry or similar sorcery. This effect is, of course, exactly like the Mystic spell Mind Cloak, and its duration is twenty minutes.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Earth Trance</summary>
                                <input type="checkbox" name="attr_earth_trance" value="1" />
                                <div class="sheet-auto-expand">
                                    <span name="attr_earth_trance_text"></span>
                                    <textarea name="attr_earth_trance_text" readonly>Mastery of the Earth Trance is acquired at 6th rank. The trance state lasts for as long as the Assassin wishes to maintain it. While in the trance he is unharmed by extremes of heat and cold. This goes beyond the normal limits of a Mystic’s Survival spell (p. 93) to include partial immunity to fire: the damage caused by the spells Dragonbreath and Fire-storm and a Dragon’s flames are all reduced to 10 HP. While in Earth Trance the Assassin can go for up to an hour without drawing breath.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Void Trance</summary>
                                <select name="attr_void_trance">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_void_trance_text"></span>
                                    <textarea name="attr_void_trance_text" readonly>At 8th rank, the Assassin is able to enter the Void Trance. The trance must last a half-hour, at the end of which the Assassin gains the benefit of the Mystic spell Hidden Target (p. 91). However, unlike the spell—whose duration is set by a Spell Expiry Roll—this effect will last for fifteen minutes.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Fire Trance</summary>
                                <select name="attr_fire_trance">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_fire_trance_text"></span>
                                    <textarea name="attr_fire_trance_text" readonly>The Fire Trance is learned at 10th rank. The trance takes one hour to complete, and gives the Assassin the effect of a Swiftness spell (p. 94). This allows him to move at twice normal speed, strike twice per Combat Round, etc. The effect lasts for five minutes after concluding the trance.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Wind Trance</summary>
                                <select name="attr_wind_trance">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_wind_trance_text"></span>
                                    <textarea name="attr_wind_trance_text" readonly>Only when he reaches 12th rank does an Assassin master the secrets of the Wind Trance. This trance takes one hour to complete and provides the Assassin with the power of Intangibility (p. 94). A Spell Expiry Roll is made to determine how long this effect lasts.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                    </div>
                </details>
                <details>
                    <summary>Assassin Alchemical Techniques</summary>
                    <div class="assassinalchemicaltechniques">
                        <div class="skillrow">
                            <details>
                                <summary>Assassin’s Lotion</summary>
                                <select name="attr_assassins_lotion">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_assassins_lotion_text"></span>
                                    <textarea name="attr_assassins_lotion_text" readonly>Assassin’s Lotion is a normal poison (see p. 122) which can be coated onto throwing spikes, the edge of a sword, etc. Coating a weapon with the substance is an action requiring one Combat Round. The weapon must be used within one minute or the Lotion oxidizes and becomes harmless. The Lotion works only for the first wound scored with the weapon—after that it is used up. Brewing up a flask of the Lotion containing enough for five applications takes three days and costs 150 silver florins.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Smoke Jar</summary>
                            <select name="attr_smoke_jar">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <div class="sheet-auto-expand">
                                <span name="attr_smoke_jar_text"></span>
                                <textarea name="attr_smoke_jar_text" readonly>A Smoke Jar is a large clay pot which functions exactly like a Vial of Smoke (see p. 140). For encumbrance purposes, it is counted as two items, however. A Smoke Jar takes two days to prepare, at a cost of 100 florins.
                                </textarea>
                            </div>
                        </details>
                    </div>    
                    <div class="skillrow">
                        <details>
                            <summary>Flash Pellets</summary>
                            <select name="attr_flash_pellets">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <div class="sheet-auto-expand">
                                <span name="attr_flash_pellets_text"></span>
                                <textarea name="attr_flash_pellets_text" readonly>Flash Pellets produce a blinding flare of light when hurled at the ground. Any sighted creature within 5 metres will be dazzled for the next Combat Round, allowing the Assassin to flee from the scene or conceal himself. Use of a Flash Pellet often gives the impression that the Assassin has vanished into thin air! It takes one day to prepare three of these pellets (the three together constitute one ‘encumbrance point’), and the ingredients cost 50 florins for each. There is a chance the Assassin will get something wrong, with a 50% chance of failure at 1st rank, decreasing by 5% with each rank. The success or failure is only determined when the potion is used.
                                </textarea>
                            </div>
                        </details>
                    </div>
                </details>
                <details>
                    <summary>The Skills of Assassins</summary>
                    <div class="theskillsofassassins">
                        <div class="skillrow">
                            <details>
                                <summary>Breakfall</summary>
                                <select name="attr_breakfall">
                                    <option value="0">Unknown</option>
                                    <option value="1">1 Rank</option>
                                    <option value="2">2 Ranks</option>
                                    <option value="3">3 Ranks</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_breakfall_text"></span>
                                    <textarea name="attr_breakfall_text" readonly>Assassins with the Breakfall skill can fall up to 6m without sustaining injury. They take the same damage as other Professions for any greater distance than this. This skill may be selected up to three times. On the second selection, the Assassin may safely fall up to 12m; on the third, up to 18m.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Climbing</summary>
                                <select name="attr_climbing">
                                    <option value="0">Unknown</option>
                                    <option value="1">1 Rank</option>
                                    <option value="2">2 Ranks</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_climbing_text"></span>
                                    <textarea name="attr_climbing_text" readonly>Assassins with the Climbing skill carry special iron claws (no encumbrance) that fit over their gloves and boots for climbing purposes. This enables them to modify the usual climbing rules on page 63. When an Assassin wishes to climb a wall or cliff-face, he subtracts half his rank (rounded down) from the difficulty factor of the climb. This skill may be selected a second time, allowing the Assassin to subtract his rank from the difficulty factor of the climb, rather than half his rank.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Jumping</summary>
                                <select name="attr_jumping">
                                    <option value="0">Unknown</option>
                                    <option value="1">1 Rank</option>
                                    <option value="2">2 Ranks</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_jumping_text"></span>
                                    <textarea name="attr_jumping_text" readonly>An Assassin who already has the Climbing skill may select the Jumping skill. An Assassin with the Jumping skill can leap up to scale any obstacle below 3m in height, given at least 5m as a run-up. This is executed as a single jumping somersault—spectacular, though it can lead to problems if there is a drop on the other side! This skill may be selected a second time, allowing the Assassin to scale an obstacle up to 4.5m in height with a single leap.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Disguise</summary>
                                <select name="attr_disguise">
                                    <option value="0">Unknown</option>
                                    <option value="1">1 Rank</option>
                                    <option value="2">2 Ranks</option>
                                </select>
                                <select class="assassincheckbox disguise" name="attr_disguise_status">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <input type="hidden" class="assassincheckbox disguise" name="attr_disguise_hidden" value="0"/>
                                <div class="assassinroll disguise">
                                    <button class="roll twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to deceive by disguise.}} {{subtitle=Roll Stealth vs. Perception}} {{roll= [[2d10]]}} {{Vs= [[@{finalstealth}-?{Target's Perception|0}]] }}" name="roll_disguise"></button>
                                </div>
                                <div class="sheet-auto-expand">
                                    <span name="attr_disguise_text"></span>
                                    <textarea name="attr_disguise_text" readonly>This skill is used to blend into a group in order to evade a pursuer, or to masquerade as another person in order to gain access to the home of an intended victim. The skill of disguise does not give the Assassin the ability to mimic a specific individual, merely to simulate the appearance and mannerisms of a type. The chance that a character will see through the Assassin’s disguise is usually quite small. This is determined by subtracting the observing character’s perception from the Assassin’s stealth, and the result is the number that the Assassin must roll equal to or under on 2d10 to pass undetected. The Disguise roll must be repeated every ten minutes that the Assassin maintains his disguise, or once per hour if the skill is selected a second time. Additional rolls are required if engaging in conversation.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Pilfer</summary>
                                <input type="hidden" name="attr_pilfermodifier" value="0" />
                                <select name="attr_pilfer">
                                    <option value="0">Unknown</option>
                                    <option value="1">1 Rank</option>
                                    <option value="2">2 Ranks</option>
                                </select>
                                <input type="hidden" class="assassincheckbox pilfer" name="attr_pilfer" value="0"/>
                                <div class="assassinroll pilfer">
                                    <button class="roll twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to pilfer.}} {{subtitle=Roll Stealth vs. Perception}} {{roll= [[2d10]]}} {{Vs= [[@{finalstealth}-(@{pilfermodifier})-?{Target's Perception|0}]] }}" name="roll_pilfer"></button>
                                </div>
                                <textarea readonly>
                                    This is the ability to ‘lift’ small items from a person while standing next to them. The attempt to pilfer is made as a normal stealth vs perception roll with an intrinsic handicap of –4 from the Assassin’s stealth score. If the roll fails, the Assassin fails to get the item—and the GM checks to see if his would-be victim noticed the attempt. This skill may be selected a second time, reducing the handicap to stealth to -2.
                                </textarea>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Pick Lock</summary>
                                <input type="hidden" name="attr_pick_lockscore" value="0" />
                                <select name="attr_pick_lock">
                                    <option value="0">Unknown</option>
                                    <option value="1">1 Rank</option>
                                    <option value="2">2 Ranks</option>
                                    <option value="3">3 Ranks</option>
                                </select>
                                <input type="hidden" class="assassincheckbox pick_lock" name="attr_pick_lock" value="0"/>
                                <div class="assassinroll pick_lock">
                                    <button class="roll twod10" type="roll" value="/w gm&{template:custom} {{title=@{character_name} examines the lock.}} {{subtitle=Roll 1d100 vs Lock Difficulty}} {{roll=[[1d100cs1cf100]]}} {{Vs= [[@{pick_lockscore} - ?{Lock Difficulty|0} ]]}}" name="roll_pick_lockcheck"></button>
                                    <button class="roll twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} attempts to pick a lock.}} {{subtitle=Roll 1d100 under Rank}} {{roll= [[1d100cs1cf100]]}} {{Vs= @{rank}}}" name="roll_pick_lockchance"></button>
                                </div>
                                <textarea readonly>
                                    The chance of picking a lock successfully depends on its mechanism. The base chance is 30%. The Assassin may select the Pick Lock skill up to three times, increasing the chance to 60% and then to 90%. Modifiers based on Intelligence and Reflexes may improve the chance further. The dice roll establishes whether the lock can be picked, with percentile dice rolls required every Combat Round. Failure allows a second attempt after at least a week. A set of lock picks is needed.
                                </textarea>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Track</summary>
                                <select name="attr_track">
                                    <option value="0">Unknown</option>
                                    <option value="1">1 Rank</option>
                                    <option value="2">2 Ranks</option>
                                </select>
                                <input type="hidden" class="assassincheckbox track" name="attr_track" value="0"/>
                                <div class="assassinroll track">
                                    <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} searches for Tracks}} {{subtitle=Roll 1d20 under Tracking Skill}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{finalperception}+@{trackmodifier}-?{Other Modifiers|0}]] }}" name="roll_track"></button>
                                </div>
                                <textarea readonly>
                                    Assassins with this skill may attempt to track their victims or other opponents and prey animals across country. This is explained on page 63. Selecting this skill a second time grants a +2 bonus on all tracking-related perception rolls.
                                </textarea>
                            </details>
                        </div>
                    </div>
                </details>
            </details>
            </div>
            <div class="knightskills">
                <details>
                <summary><h2>Knight Profession Skills</h2></summary>
                <div class="counter-container">
                    <div class="counterbox">
                        <span>Special Abilities of a Knight:</span>
                        <div class="counterfields">
                            <span>Max:</span>
                            <input type="number" class="fourshorttextinput" name="attr_knightproskills_max" readonly />
                            <span>Selected:</span>
                            <input type="number" class="fourshorttextinput" name="attr_knightproskills_selected" readonly />
                        </div>
                    </div>
                    <input type="hidden" class="supremacy_able" name="attr_supremacy_able" value="0" />
                    <div class="supremacy counterbox">
                        <span>The Supremacy of the Sword:</span>
                        <div class="counterfields">
                            <span>Max:</span>
                            <input type="number" class="fourshorttextinput" name="attr_knightsupremacy_max" readonly />
                            <span>Selected:</span>
                            <input type="number" class="fourshorttextinput" name="attr_knightsupremacy_selected" readonly />
                        </div>
                    </div>
                </div>
                <details>
                    <summary class="bigbolddetails">Special Abilities of a Knight</summary>
                        <div class="skillrow">
                            <details>
                                <summary>Track</summary>
                                <select name="attr_track">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <input type="hidden" class="knightcheckbox track" name="attr_track_hidden" value="0"/>
                                <div class="knightroll track">
                                    <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} searches for Tracks}} {{subtitle=Roll 1d20 under Tracking Skill}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{finalperception}+@{trackmodifier}-?{Other Modifiers|0}]] }}" name="roll_track"></button>
                                </div>
                                <div class="sheet-auto-expand">
                                    <span name="attr_track_text"></span>
                                    <textarea name="attr_track_text" readonly>
                                        Knights may attempt to track their opponents or prey animals across country. This is explained in more detail on p. 63.
                                    </textarea>
                                </div>
                            </details>
                        </div>

                        <div class="skillrow">
                            <details>
                                <summary>Armour Expert</summary>
                                <select class="knightcheckbox armour_expert" name="attr_armour_expert">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_armour_expert_text"></span>
                                    <textarea name="attr_armour_expert_text" readonly>
                                        The Knight is the only character who can wear a suit of plate armour without any penalties to attack or defence. He never suffers any attack or defence penalties for wearing armour.
                                    </textarea>
                                </div>
                            </details>
                        </div>

                        <div class="skillrow">
                            <details>
                                <summary>Ride Warhorse</summary>
                                <select class="knightcheckbox ride_warhorse" name="attr_ride_warhorse">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_ride_warhorse_text"></span>
                                    <textarea name="attr_ride_warhorse_text" readonly>
                                        All characters can ride, but only Knights, Barbarians, and some Warlocks have had the long years of special training required to ride a warhorse (p. 245). Warhorses are larger, stronger, and far more spirited than ordinary horses, making them impossible to handle if one is not ‘born to the saddle’.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Disarm Technique</summary>
                                <select class="knightcheckbox disarm_technique" name="attr_disarm_technique">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <input type="hidden" class="knightcheckbox disarm_technique" name="attr_disarm_technique_hidden" value="0"/>
                                <div class="knightroll disarm_technique">
                                    <button class="button d6" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} attempts a disarm maneuver}} {{subtitle=Roll 3d6 under Target Number}} {{roll= [[3d6]]}} {{Vs= ?{Input enemy rank or rank equivalent}}}" name="roll_disarm"></button>
                                </div>
                                <div class="sheet-auto-expand">
                                    <span name="attr_disarm_technique_text"></span>
                                    <textarea name="attr_disarm_technique_text" readonly>
                                        The Knight is able to twist an opponent’s sword out of his hand by catching the blade in the specially shaped guard of his own weapon. The skill comes into effect when a sword-blow is aimed at the Knight and the attacker scores a 20 for his Hit Roll (always a miss). The Knight then rolls 3d6, and if he scores higher than his enemy’s rank (or rank-equivalent) then the sword is wrenched from the latter’s hand and flung 1m to 6m away.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Expert Parry</summary>
                                <select class="knightcheckbox expert_parry" name="attr_expert_parry">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_expert_parry_text"></span>
                                    <textarea name="attr_expert_parry_text" readonly>
                                        Knowledge of this skill gives the Knight greater proficiency in the use of a shield. For any blow that would otherwise hit him, he rolls d10. On a roll of 1 or 2 he catches the blow on his shield, negating it.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Main Gauche</summary>
                                <select class="knightcheckbox main_gauche" name="attr_main_gauche">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_main_gauche_text"></span>
                                    <textarea name="attr_main_gauche_text" readonly>
                                        This skill enables the character to fight with two weapons simultaneously—a one-handed weapon such as a sword or axe in his right hand, and a dagger or a shortsword in his left. Evidently this precludes him from using a shield. The secondary weapon may be used as a guard, giving +2 to the character’s defence. (If the dagger/shortsword is magical, its bonus is also added.) Alternatively, the character can strike with both weapons at once, making a separate Hit Roll for each weapon. His defence is zero for that Round. Both blows must be at the same opponent. The opponent’s defence counts fully against both blows.
                                    </textarea>
                                </div>
                                <br>
                                <input type="hidden" class="knightcheckbox main_gauche" name="attr_main_gauche_hidden" value="0"/>
                                <div class="knightroll main_gauche">
                                    <fieldset class="repeating_meleeweapons maingauchesummary">
                                        <span name="attr_meleeweaponname"></span>, 
                                        <span name="attr_meleeweapon"></span>, +
                                        <span name="attr_magicmeleeweaponbonus"></span>
                                        <button type="action" name="act_equipoffhand">Equip Offhand</button>
                                        <input type="hidden" name="attr_ismaingauchedefenceweapon" />
                                        <input type="hidden" name="attr_meleeabr" />
                                        <input type="hidden" name="attr_meleedamage" />
                                        <input type="hidden" name="attr_meleeothereffects" />
                                    </fieldset>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Master Bowman</summary>
                                <select class="knightcheckbox master_bowman" name="attr_master_bowman">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_master_bowman_text"></span>
                                    <textarea name="attr_master_bowman_text" readonly>
                                        The Master Bowman adds +1 to Armour Bypass Rolls for arrows (not quarrels—the crossbow is not covered by this skill). He is also able to loose off his arrows more quickly than an untrained archer; as well as shooting an arrow at his usual time to act in the Combat Round, he has a 50% chance of being able to shoot a second at the end of that round.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Quick Draw</summary>
                                <select class="knightcheckbox quick_draw" name="attr_quick_draw">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_quick_draw_text"></span>
                                    <textarea name="attr_quick_draw_text" readonly>
                                        This skill applies to daggers, shortswords, and swords. Normally the drawing of a weapon is an action requiring one complete Combat Round, but a character with this skill can take his weapon from its scabbard and strike with it immediately.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Swordmaster</summary>
                                <select class="knightcheckbox swordmaster" name="attr_swordmaster">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_swordmaster_text"></span>
                                    <textarea name="attr_swordmaster_text" readonly>
                                        This skill is only effective when the Knight is using a sword (either one-handed or two-handed). He makes a critical hit (i.e., a blow that requires no Armour Bypass Roll) on a Hit Roll score of 1 or 2. This is twice the regular chance of a critical hit.
                                    </textarea>
                                </div>
                            </details>
                        </div>
                    <div class="skillrow">
                        <details>
                            <summary>Weaponskill</summary>
                            <input type="checkbox" class="knightcheckbox weaponskill1" name="attr_weaponskill1" value="1" />
                            <div class="knightskill weaponskillrow1">
                                <span>Weaponskill 1</span>
                                <select name="attr_weapon1">
                                    <option value="">Select a Weapon</option>
                                    <option value="Battleaxe">Battleaxe</option>
                                    <option value="Cudgel">Cudgel</option>
                                    <option value="Dagger">Dagger</option>
                                    <option value="Flail">Flail</option>
                                    <option value="Halberd">Halberd</option>
                                    <option value="Mace">Mace</option>
                                    <option value="Morning star">Morning star</option>
                                    <option value="Shortsword">Shortsword</option>
                                    <option value="Spear">Spear</option>
                                    <option value="Staff">Staff</option>
                                    <option value="Sword">Sword</option>
                                    <option value="Two-handed sword">Two-handed sword</option>
                                    <option value="Unarmed combat">Unarmed combat</option>
                                    <option value="Footman’s Flail">Footman’s Flail</option>
                                    <option value="Holy Water Sprinkler">Holy Water Sprinkler</option>
                                    <option value="Longsword">Longsword</option>
                                    <option value="Pollaxe">Pollaxe</option>
                                    <option value="Scourge">Scourge</option>
                                    <option value="War Axe">War Axe</option>
                                    <option value="Warhammer">Warhammer</option>
                                    <option value="War Lance">War Lance</option>
                                </select>
                            </div>
                            <input type="checkbox" class="knightcheckbox weaponskill2" name="attr_weaponskill2" value="1" />
                            <div class="knightskill weaponskillrow2">
                                <span>Weaponskill 2</span>
                                <select name="attr_weapon2">
                                    <option value="">Select a Weapon</option>
                                    <option value="Battleaxe">Battleaxe</option>
                                    <option value="Cudgel">Cudgel</option>
                                    <option value="Dagger">Dagger</option>
                                    <option value="Flail">Flail</option>
                                    <option value="Halberd">Halberd</option>
                                    <option value="Mace">Mace</option>
                                    <option value="Morning star">Morning star</option>
                                    <option value="Shortsword">Shortsword</option>
                                    <option value="Spear">Spear</option>
                                    <option value="Staff">Staff</option>
                                    <option value="Sword">Sword</option>
                                    <option value="Two-handed sword">Two-handed sword</option>
                                    <option value="Unarmed combat">Unarmed combat</option>
                                    <option value="Footman’s Flail">Footman’s Flail</option>
                                    <option value="Holy Water Sprinkler">Holy Water Sprinkler</option>
                                    <option value="Longsword">Longsword</option>
                                    <option value="Pollaxe">Pollaxe</option>
                                    <option value="Scourge">Scourge</option>
                                    <option value="War Axe">War Axe</option>
                                    <option value="Warhammer">Warhammer</option>
                                    <option value="War Lance">War Lance</option>
                                </select>
                            </div>
                            <input type="checkbox" class="knightcheckbox weaponskill3" name="attr_weaponskill3" value="1" />
                            <div class="knightskill weaponskillrow3">
                                <span>Weaponskill 3</span>
                                <select name="attr_weapon3">
                                    <option value="">Select a Weapon</option>
                                    <option value="Battleaxe">Battleaxe</option>
                                    <option value="Cudgel">Cudgel</option>
                                    <option value="Dagger">Dagger</option>
                                    <option value="Flail">Flail</option>
                                    <option value="Halberd">Halberd</option>
                                    <option value="Mace">Mace</option>
                                    <option value="Morning star">Morning star</option>
                                    <option value="Shortsword">Shortsword</option>
                                    <option value="Spear">Spear</option>
                                    <option value="Staff">Staff</option>
                                    <option value="Sword">Sword</option>
                                    <option value="Two-handed sword">Two-handed sword</option>
                                    <option value="Unarmed combat">Unarmed combat</option>
                                    <option value="Footman’s Flail">Footman’s Flail</option>
                                    <option value="Holy Water Sprinkler">Holy Water Sprinkler</option>
                                    <option value="Longsword">Longsword</option>
                                    <option value="Pollaxe">Pollaxe</option>
                                    <option value="Scourge">Scourge</option>
                                    <option value="War Axe">War Axe</option>
                                    <option value="Warhammer">Warhammer</option>
                                    <option value="War Lance">War Lance</option>
                                </select>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_weaponskill_text"></span>
                                <textarea name="attr_weaponskill_text" readonly>A separate Weaponskill governs the use of each mêlée weapon, so this skill must be selected more than once if the character desires special mastery of several weapon types. When fighting with the weapon specific to his Weapons the character adds 1 to Armour Bypass Rolls.</textarea>
                            </div>
                        </details>
                    </div>
                </details>
                <input type="hidden" class="supremacy_able" name="attr_supremacy_able" value="0" />
                <div class="supremacy"> 
                    <details>
                        <summary>The Supremacy of the Sword</summary>
                            <div class="skillrow">
                                <details>
                                    <summary>Fearless</summary>
                                    <select class="knightcheckbox fearless" name="attr_fearless">
                                        <option value="0">Unknown</option>
                                        <option value="1">Known</option>
                                    </select>
                                    <div class="sheet-auto-expand">
                                        <span name="attr_fearless_text"></span>
                                        <textarea name="attr_fearless_text" readonly>Mastery of fear can be a key advantage for experienced warriors. Whenever a Fearless character must make a Morale Check, or resolve a Fright Attack, she gains a +2 bonus to her effective Rank.</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>Intimidating</summary>
                                    <select class="knightcheckbox intimidating" name="attr_intimidating">
                                        <option value="0">Unknown</option>
                                        <option value="1">Known</option>
                                    </select>
                                    <input type="hidden" class="knightcheckbox intimidating" name="attr_intimidating" value="0"/>
                                    <div class="knightroll intimidating">
                                        <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} glares intimidatingly}} {{subtitle=Roll 1d20 under Looks}} {{roll=[[1d20cs1cf20]]}} {{Vs=[[@{finallooks}+?{+1 to Looks for each other character of equal or greater Rank that stands with them|0}]] }}" name="roll_intimidate"></button>
                                    </div>
                                    <div class="sheet-auto-expand">
                                        <span name="attr_intimidating_text"></span>
                                        <textarea name="attr_intimidating_text" readonly>A menacing warrior is adept at extorting information or services from a victim, or scaring them away by threats. Roll Looks or under on 1d20. Add +1 to Looks for each other character of equal or greater Rank that stands with the Intimidating character. If the intimidation attempt succeeds, then the victim is subjected to the effects of a failed Morale check. If the attempt fails, then the victim becomes enraged for 2d10 rounds, and may initiate combat at the GM’s discretion.</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>Iron Will</summary>
                                    <select class="knightcheckbox iron_will" name="attr_iron_will">
                                        <option value="0">Unknown</option>
                                        <option value="1">Known</option>
                                    </select>
                                    <div class="sheet-auto-expand">
                                        <span name="attr_iron_will_text"></span>
                                        <textarea name="attr_iron_will_text" readonly>The focused determination of a highly disciplined warrior can make it very hard for magical foes to control her mind. A character with Iron Will gains +2 to Magical Defence against the following spells: Command, Curse, Transfix, Enslave, Enthrall, Benight, Turncoat, Pacify, Dark Thoughts, Winds of Change, and Witch Steed.</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>Tireless</summary>
                                    <select class="knightcheckbox tireless" name="attr_tireless">
                                        <option value="0">Unknown</option>
                                        <option value="1">Known</option>
                                    </select>
                                    <div class="sheet-auto-expand">
                                        <span name="attr_tireless_text"></span>
                                        <textarea name="attr_tireless_text" readonly>Warriors can perform exhausting non-combat tasks—such as digging a hole or pulling a cart—with considerably more energy and efficiency than most people. In any given hour of such work, a Tireless character can achieve half as much again as an ordinary person, while also working for a total number of hours equal to his Strength value. For example, a Tireless character of Strength 14 who is digging a ditch can do so for 14 hours straight, achieving as much in that time as a typical labourer would do in 21 hours.</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>True Grit</summary>
                                    <select class="knightcheckbox true_grit" name="attr_true_grit">
                                        <option value="0">Unknown</option>
                                        <option value="1">Known</option>
                                    </select>
                                    <div class="sheet-auto-expand">
                                        <span name="attr_true_grit_text"></span>
                                        <textarea name="attr_true_grit_text" readonly>Seasoned warriors can possess great reserves of mental fortitude. When a character with True Grit has been reduced to 0 Health Points or below, he remains conscious and may act normally. However, the character will still die on reaching –3 Health Points.</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>Oak Fists</summary>
                                    <select class="knightcheckbox oak_fists" name="attr_oak_fists">
                                        <option value="0">Unknown</option>
                                        <option value="1">Known</option>
                                    </select>
                                    <div class="sheet-auto-expand">
                                        <span name="attr_oak_fists_text"></span>
                                        <textarea name="attr_oak_fists_text" readonly>The brawling skills of experienced warriors can be devastating. When fighting in unarmed combat, a character with Oak Fists can make Armour Bypass Rolls with a d6, and inflict 3 points of damage on a successful blow.</textarea>
                                    </div>
                                </details>
                            </div>
                    </details>
                </div>
                </details>
            </div>    
            <div class="barbarianskills">
                <details>
                <summary><h2>Barbarian Profession Skills</h2></summary>
                    <div class="counter-container">
                        <input type="hidden" class="supremacy_able" name="attr_supremacy_able" value="0" />
                        <div class="supremacy counterbox">
                            <span>The Supremacy of the Sword:</span>
                            <div class="counterfields">
                                <span>Max:</span>
                                <input type="number" class="fourshorttextinput" name="attr_barbariansupremacy_max" />
                                <span>Selected:</span>
                                <input type="number" class="fourshorttextinput" name="attr_barbariansupremacy_selected" readonly />
                            </div>
                        </div>
                    </div>
                <details>
                    <summary>Special Abilities of a Barbarian</summary>
                        <div class="skillrow">
                            <details>
                                <summary>Track</summary>
                                <select class="barbariancheckbox track" name="attr_track">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <input type="hidden" class="barbariancheckbox track" name="attr_track" value="0"/>
                                <div class="barbarianroll track">
                                    <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} searches for Tracks}} {{subtitle=Roll 1d20 under Tracking Skill}} {{roll=[[1d20cs1cf20]]}} {{Vs=[[ @ {finalperception} + @{trackmodifier} - ?{Other Modifiers|0} ]] }}" name="roll_track"></button>
                                </div>
                                <div class="sheet-auto-expand">
                                    <span name="attr_track_text"></span>
                                    <textarea name="attr_track_text" readonly>Barbarians may attempt to track their opponents or prey animals across country. This is explained on p. 63.</textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Berserk</summary>
                                <select class="barbariancheckbox berserk" name="attr_berserk">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_berserk_text"></span>
                                    <textarea name="attr_berserk_text" readonly>Barbarians have the special ability of going berserk in combat. The character is able to make more powerful attacks at the cost of neglecting his defence. He may temporarily add 1 point to attack for each 3 points he subtracts from defence for that Round.</textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Ride Warhorse</summary>
                                <select class="barbariancheckbox ride_warhorse" name="attr_ride_warhorse">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_ride_warhorse_text"></span>
                                    <textarea name="attr_ride_warhorse_text" readonly>All player-characters can ride but only Knights and Barbarians, along with a few Warlocks, have had the long years of special training required to ride a warhorse. Warhorses are larger, stronger, and far more spirited than ordinary horses, making them impossible to handle if one is not raised to ride them.</textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Bloodrage</summary>
                                <select class="barbariancheckbox bloodrage" name="attr_bloodrage">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_bloodrage_text"></span>
                                    <textarea name="attr_bloodrage_text" readonly>A Bloodrage is an even more effective way than going berserk of calling upon the reserves of stamina and ferocity that reside in the depths of the human soul. A Barbarian of 8th rank or higher may go into a Bloodrage during any combat in which he has taken a wound. He begins to bellow and roar terrible war-oaths, foam drools from his mouth, and his eyes glaze with insensate fury. Any normal mortal whom he attacks is 80% likely to flee in terror, and even hardy adventurers of the 1st and 2nd ranks have a 25% chance of immediate retreat. Under Bloodrage, the Barbarian may not use missile weapons. He will always seek close combat with his foes, attacking with an enhanced attack score equal to his normal attack plus his defence score. He loses all interest in parrying, however, and his defence goes temporarily to zero. A Barbarian in Bloodrage feels no pain and continues to fight on until victorious or dead. His battle-craziness cannot be abated by mind-controlling spells. A spell such as Enslave has no effect on him while he is in the Bloodrage. However, once all enemies have fallen or fled, the Barbarian will turn on any other available target of his fury, including his own companions! To shrug off the Bloodrage, the character must roll under his Intelligence score on 1d20.</textarea>
                                </div>
                            </details>
                        </div>
                </details>
                <input type="hidden" class="supremacy_able" name="attr_supremacy_able" value="0" />
                <div class="supremacy">                
                    <details>
                        <summary>The Supremacy of the Sword</summary>
                        <div class="skillrow">
                            <details>
                                <summary>Fearless</summary>
                                <select class="barbariancheckbox fearless" name="attr_fearless">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_fearless_text"></span>
                                    <textarea name="attr_fearless_text" readonly>Mastery of fear can be a key advantage for experienced warriors. Whenever a Fearless character must make a Morale Check, or resolve a Fright Attack, she gains a +2 bonus to her effective Rank.</textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Intimidating</summary>
                                <select class="barbariancheckbox intimidating" name="attr_intimidating">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <input type="hidden" class="barbariancheckbox intimidating" name="attr_intimidating" value="0"/>
                                <div class="barbarianroll intimidating">
                                    <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} glares intimidatingly}} {{subtitle=Roll 1d20 under Looks}} {{roll=[[1d20cs1cf20]]}} {{Vs=[[@{finallooks}+?{+1 to Looks for each other character of equal or greater Rank that stands with them|0}]] }}" name="roll_intimidate"></button>
                                </div>
                                <div class="sheet-auto-expand">
                                    <span name="attr_intimidating_text"></span>
                                    <textarea name="attr_intimidating_text" readonly>A menacing warrior is adept at extorting information or services from a victim, or scaring them away by threats. Roll Looks or under on 1d20. Add +1 to Looks for each other character of equal or greater Rank that stands with the Intimidating character. If the intimidation attempt succeeds, the victim is subjected to the effects of a failed Morale check. If the attempt fails, the victim becomes enraged for 2d10 rounds, and may initiate combat at the GM’s discretion.</textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Iron Will</summary>
                                <select class="barbariancheckbox iron_will" name="attr_iron_will">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_iron_will_text"></span>
                                    <textarea name="attr_iron_will_text" readonly>The focused determination of a highly disciplined warrior can make it very hard for magical foes to control her mind. A character with Iron Will gains +2 to Magical Defence against the following spells: Command, Curse, Transfix, Enslave, Enthrall, Benight, Turncoat, Pacify, Dark Thoughts, Winds of Change, and Witch Steed.</textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Tireless</summary>
                                <select class="barbariancheckbox tireless" name="attr_tireless">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_tireless_text"></span>
                                    <textarea name="attr_tireless_text" readonly>Warriors can perform exhausting non-combat tasks—such as digging a hole or pulling a cart—with considerably more energy and efficiency than most people. In any given hour of such work, a Tireless character can achieve half as much again as an ordinary person, while also working for a total number of hours equal to his Strength value.</textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>True Grit</summary>
                                <select class="barbariancheckbox true_grit" name="attr_true_grit">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_true_grit_text"></span>
                                    <textarea name="attr_true_grit_text" readonly>Seasoned warriors can possess great reserves of mental fortitude. When a character with True Grit has been reduced to 0 Health Points or below, she can continue to fight. However, she must make a Morale Check at the start of each Round, until her Health rises above 0 again. Each time she takes damage, she loses Morale Points as usual, until her Morale reaches zero. At this point, she collapses and becomes unconscious.</textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Oak Fists</summary>
                                <select class="barbariancheckbox oak_fists" name="attr_oak_fists">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_oak_fists_text"></span>
                                    <textarea name="attr_oak_fists_text" readonly>The brawling skills of experienced warriors can be devastating. When fighting in unarmed combat, a character with Oak Fists can make Armour Bypass Rolls with a d6, and inflict 3 points of damage on a successful blow.</textarea>
                                </div>
                            </details>
                        </div>
                    </details>
                </div>
                </details>
            </div>
            <div class="sorcererskills">
                <details>
                <summary><h2>Sorcerer Profession Skills</h2></summary>
                <details>
                    <summary>Special Abilities of a Sorcerer</summary>
                    <div class="skillrow">
                        <details>
                            <summary>Calligraphy</summary>
                            <select class="sorcerercheckbox calligraphy" name="attr_calligraphy">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <div class="sheet-auto-expand">
                                <span name="attr_calligraphy_text"></span>
                                <textarea name="attr_calligraphy_text" readonly>This is the ability to prepare magical scrolls, a skill known to any Sorcerer of 4th rank or higher. The total cost of the basic materials for a scroll will be 3-18 crowns: parchment of high quality is called for, along with gold leaf and some rare and expensive pigments. The scroll may be for any spell that the Sorcerer is able to cast (that is, whose level does not exceed his rank), and the maximum number of Magic Points placed in the spell is limited by the Sorcerer’s rank. Each scroll that a Sorcerer prepares temporarily suppresses 2 points of his normal Magic Points score until it is used.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Alchemy</summary>
                            <select class="sorcerercheckbox alchemy" name="attr_alchemy">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <div class="sheet-auto-expand">
                                <span name="attr_alchemy_text"></span>
                                <textarea name="attr_alchemy_text" readonly>Alchemy is the science which governs the preparation of potions and thaumaturgic compounds. A Sorcerer first begins to master this skill when he reaches 6th rank. The Sorcerer does not become a Master Alchemist overnight. At 6th rank he knows how to distil only the less complex potions. Others must wait until he gains more experience. It takes twenty-eight days to distil a potion. In a normal-sized laboratory, there could be up to ten potions ‘on the boil’ at one time. The Sorcerer cannot leave these bubbling away while he goes off on an adventure; the alchemical process calls for continual supervision as various ingredients are mixed and added, vaporized, condensed, and filtered. There is always a chance that the Sorcerer will do something wrong or miss out on some vital ingredient. This gets less likely as his experience grows. The chance that a potion will turn out misbrewed and useless is 40% when the Sorcerer is 6th rank, decreasing by 10% per rank above the 6th. This roll is made by the Games Master; the Sorcerer only finds out whether he got the formula right when he (or someone else) drinks it. Full details of the various potions are given in Chapter 13, on pp138-141.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Craft Talismans</summary>
                            <select class="sorcerercheckbox craft_talismans" name="attr_craft_talismans">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <div class="sheet-auto-expand">
                                <span name="attr_craft_talismans_text"></span>
                                <textarea name="attr_craft_talismans_text" readonly>Talismans may be constructed when the Sorcerer reaches 8th rank. The work will take seven months and cost the Sorcerer in the region of 300 crowns.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Craft Amulets</summary>
                            <select class="sorcerercheckbox craft_amulets" name="attr_craft_amulets">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <div class="sheet-auto-expand">
                                <span name="attr_craft_amulets_text"></span>
                                <textarea name="attr_craft_amulets_text" readonly>Amulets must wait until the Sorcerer reaches 10th rank. Manufacture of one of these items will take a year and a day, at a basic materials cost of 400 to 500 crowns.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Craft Rings</summary>
                            <select class="sorcerercheckbox craft_rings" name="attr_craft_rings">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <div class="sheet-auto-expand">
                                <span name="attr_craft_rings_text"></span>
                                <textarea name="attr_craft_rings_text" readonly>Only a Master Sorcerer of 12th rank or above is able to construct a magic ring. Apparatus and miscellaneous costs are likely to be in the region of 600 crowns. The work will take three years; those rings which have charges will also require one month per charge.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Craft Novel Items</summary>
                            <select class="sorcerercheckbox craft_novel_items" name="attr_craft_novel_items">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <div class="sheet-auto-expand">
                                <span name="attr_craft_novel_items_text"></span>
                                <textarea name="attr_craft_novel_items_text" readonly>It is said that at 15th rank a Sorcerer has such consummate understanding of Artifice that he is able to build magic items of his own devising, rather than copying the powers and procedures handed down in the ancient lore.</textarea>
                            </div>
                        </details>
                    </div>    
                    <div class="skillrow">
                        <details>
                            <summary>Craft Wands</summary>
                            <select class="sorcerercheckbox craft_wands" name="attr_craft_wands">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <div class="sheet-auto-expand">
                                <span name="attr_craft_wands_text"></span>
                                <textarea name="attr_craft_wands_text" readonly>A wand is a device that enables a Sorcerer to concentrate his power efficiently in a small group of spells, at the expense of weakening him in other spells and reducing his versatility.</textarea>
                            </div>
                        </details>
                    </div>
                </details>
            </details>
            </div>
            <div class="mysticskills">
                <details>
                <summary><h2>Mystic Profession Skills</h2></summary>
                <details> 
                    <summary>The Special Abilities of a Mystic</summary>
                    <div class="skillrow">
                        <details>
                            <summary>Spell Mastery</summary>
                            <input type="text" name="attr_mastered_spell" list="mastered_spell_list" />
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Premonition (or Sixth Sense)</summary>
                            <select class="mysticcheckbox premonition" name="attr_premonition">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <input type="hidden" class="mysticcheckbox premonition" name="attr_premonition" value="0"/>
                            <div class="mysticroll premonition">
                                <button class="button twod10" type="roll" value="/w gm &{template:custom} {{title=@{character_name} uses Premonition}} {{subtitle=Roll 1d100 under Premonition Chance}} {{roll=[[1d100cs1cf100]]}} {{Vs=[[@{premonitionchance}]]}}" name="roll_premonitioncheck"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_premonition_text"></span>
                                <textarea name="attr_premonition_text" readonly>This is the ability to sense danger. It must be applied to a specific object or location within 5 metres of the Mystic. 
                                It does not give any exact knowledge as to the form of the danger. 
                                The chance of perceiving danger (if there is any danger to be perceived) is: 35% + 2% per rank. 
                                So Caedmon Skysoul, who is 2nd rank, has a Premonition success rate of 39%.
                                To use Premonition, the Mystic must first concentrate on the place or thing under suspicion. 
                                This takes two full Combat Rounds while he clears his mind of all distractions. In the third CR the GamesMaster rolls d100. 
                                If the roll comes up within the Mystic’s success range, the GM informs him of any danger that is present. 
                                If the percentile roll is outside the required range, or if there is no danger, the Mystic simply gets no impression. 
                                (Note that the Mystic will not be able to distinguish between sensing ‘no danger’ and not sensing ‘danger’.)
                                Would it not be possible to double-check a Premonition reading by waiting another two Combat Rounds and trying again? 
                                In fact, no. Having got a negative reading (for whatever reason) the Mystic will continue to get that same reading on every attempt 
                                until the circumstances actually change in some way (e.g. the brook he’s previously checked out as safe is suddenly poisoned by some Goblins upstream).</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>ESP (or Seventh Sense)</summary>
                            <select class="mysticcheckbox esp" name="attr_esp">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <input type="hidden" class="mysticcheckbox esp" name="attr_esp" value="0"/>
                            <div class="mysticroll esp">
                                <button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} uses ESP}} {{subtitle=Roll 1d100 under ESP chance}} {{roll=[[1d100cs1cf100]]}} {{Vs=[[ @ {espchance} ]]}}" name="roll_espcheck"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_esp_text"></span>
                                <textarea name="attr_esp_text" readonly>This is the ability to detect thoughts within a range of 10 metres. 
                                No indication is given of direction, nor of the number of beings—although the Mystic is able to selectively ‘tune out’ the thoughts of his companions. 
                                He can tell the difference between intelligent thoughts and animal thoughts, but he cannot actually read minds.
                                The success chance of ESP is: 5% + 3% per rank. 
                                So looking at Caedmon again, we see his ESP ability is at 11%.
                                The Mystic must prepare for three Combat Rounds before attempting to use ESP. 
                                Unlike Premonition, this does not take all his concentration. He could be in the middle of a fight and still use his ESP ability.
                                A Mystic using the spell Mind Cloak will not register on ESP. 
                                Nor will the following: Elves (except if detected by an Elven Mystic), Ghosts, Gnomes, Goblins, Hobgoblins and the Undead. 
                                Tenebrous and obscure, the thoughts of these magic folk slip through the Human Mystic’s coarse ESP net.
                                A Mystic of 9th rank or higher will always be able to sense the proximity of another Mystic of 9th rank or higher 
                                (unless the latter has got a Mind Cloak spell up). The Mystic Force is so strong with such individuals that they activate one another’s Seventh Sense automatically.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Enchantment of Arms and Armour</summary>
                            <select class="mysticcheckbox enchantment" name="attr_enchantment">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <div class="sheet-auto-expand">
                                <span name="attr_enchantment_text"></span>
                                <textarea name="attr_enchantment_text" readonly>A 4th-rank Mystic is able to produce +1 magic weapons and armour. 
                                At 6th rank the ability extends to +2 items, and at 9th rank to +3 items. 
                                Producing an enchanted weapon or suit of armour entails more than just stoking up a forge and hammering out the metal. 
                                A long period of solitude and fasting, of physical and mental preparation, must come first. The task may take months or years.
                                The time taken to create enchanted items is as follows:
                                +1 arrow or quarrel: 25 days
                                +2 arrow or quarrel: 125 days
                                +3 arrow or quarrel: 375 days
                                +1 weapon: 100 days
                                +2 weapon: 500 days
                                +3 weapon: 1500 days
                                +1 armour (any sort): 100 days
                                +2 armour (any sort): 400 days
                                +3 armour (any sort): 900 days
                                If the Mystic fails to remain in the proper transcendent state throughout this time, he may produce a flawed item. 
                                The chance of producing a flawed item is 40% at 4th rank, 30% at 5th, etc. 
                                A Mystic always knows when he has made a flawed item, which will eventually bring ill-luck to its owner.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Adepthood</summary>
                            <select class="mysticcheckbox adepthood" name="attr_adepthood">
                                <option value="0">Unknown</option>
                                <option value="1">Known</option>
                            </select>
                            <div class="sheet-auto-expand">
                                <span name="attr_adepthood_text"></span>
                                <textarea name="attr_adepthood_text" readonly>The Mystic may first attempt to attain Adept-hood when he reaches 8th rank. 
                                He must find some secluded spot where he can dwell in solitary contemplation. Each day he meditates, and at the end of each week he checks to see if he has achieved Adepthood. 
                                (In game-terms, this is indicated by a roll of 96-00 on d100.)
                                The Adept Mystic's Reflexes and Psychic Talent scores both increase to 18. His natural rate of healing from wounds is doubled, 
                                and he becomes immune to poison and disease. His serenity cannot be perturbed by external influences, 
                                rendering him inviolate against fright attacks, mind-controlling spells, or possession by demons or spirits. 
                                Lastly, no enchanted weapon he forges will ever be flawed.</textarea>
                            </div>
                        </details>
                    </div>
                </details>
                </details>
            </div>
            <div class="elementalistskills">
                <details>
                    <summary><h2>Elementalist Profession Skills</h2></summary>
                        <input type="hidden" class="elementalist_raw_power_type" name="attr_elementalist_raw_power_type" value="0"/>
                        <div class="skillrow elementalist_core_powers">
                            <details>
                                <summary>Raw Power</summary>
                                <select class="elementalistcheckbox raw_power" name="attr_raw_power">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="elementalistroll raw_power">
                                    <div class="elementalist_core_powers">
                                        <span>Attack with Raw Power:</span> <button class="button d20 skillroll" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} uses Raw Power}} {{spellattackroll= [[10 + ?{Magic Points expended}]]}} {{speedvsevasion= ?{Target Evasion}}} {{range= [[10 * ?{Magic Points expended}]] metres}} {{damage= [[2d6 * ?{Magic Points expended}]]}}" name="roll_raw_power"></button>
                                    </div>
                                </div>
                                <div class="sheet-auto-expand">
                                    <span name="attr_raw_power_text"></span>
                                    <textarea name="attr_raw_power_text" readonly>Even when incapable of casting a spell, or less effective at casting a spell, for some reason (for example, due to wearing armour, being paralyzed, or otherwise being unable to make the requisite arcane hand gestures), an Elementalist can cause raw elemental power to surge out from his body and into a foe, so long as he has Magic Points remaining in at least one Element. This is an Indirect Attack with a Speed of 10 + Magic Points expended, a Range of 10 metres per Magic Point expended, and damage of 2d6 per Magic Point expended. For example, a Water Elementalist using 3 Magic Points to make this attack would cause a surge of freezing water to blast a foe up to 30 metres away at a speed of 13, dealing 6d6 damage.
                                    An Elementalist can potentially use this raw elemental power for other, more mundane purposes, as in the examples in the table above. Note that these mundane uses are not usually intended as attacks, though there is nothing to prevent them from being used during combat if that might be helpful.</textarea>
                                </div>
                            </details>
                        </div>
                        <input type="hidden" class="elementalist_raw_power_type" name="attr_elementalist_raw_power_type" value="0"/>
                        <div class="skillrow elementalist_alternate_powers">
                            <details>
                                <summary>Raw Power (alternate version)</summary>
                                <select class="elementalistcheckbox raw_poweralternate" name="attr_raw_poweralternate">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <input type="hidden" class="elementalistcheckbox raw_poweralternate" name="attr_raw_poweralternate" value="0"/>
                                <div class="elementalistroll raw_poweralternate">
                                    <input type="hidden" class="elementalist_raw_power_type" name="attr_elementalist_raw_power_type" value="0"/>
                                    <div class="elementalist_alternate_powers">
                                      <span>Attack with Raw Power (alternate):</span> <button class="button1 twod10 skillroll" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} uses Raw Power to attack}} {{spellattackroll= [[2d10]]}} {{VS = [[@{finalmagicalattack} - ?{Target's Magical Defence}]]}} {{damage=Dealing 2 Damage per Magic Point Spent: [[?{Magic Points spent} * 2]]}}" name="roll_raw_poweralternate"></button>
                                    </div>
                                </div>
                                <div class="sheet-auto-expand">
                                    <span name="attr_raw_poweralternate_text"></span>
                                    <textarea name="attr_raw_poweralternate_text" readonly>The Elementalist’s body seethes with untapped elemental power. Using this ability, the Elementalist chooses a target and infuses it with the aforementioned elemental energy to cause damage. Raw power can still be used for mundane effects (see Dragon Warriors, p. 37).
                                    Raw power is a direct attack with a range of 10m and pits the Elementalist’s Magical Attack against the target’s Magical Defence. If the attack is successful the target takes 2 Health Points of damage for each Magic Point spent in the attack.
                                    The Elementalist can spend up to 1MP per rank on the Raw Power effect. The MP for a given elemental strike must come from the appropriate magic point pool; if the Elementalist doesn’t have MPs of that type available he cannot use or boost that attack.
                                    Each Raw Power attack has a special effect as follows:
                                    Fire: Sets the target on fire, inflicting 1HP damage per round, until the target spends a round putting the fire out.
                                    Earth: Shards of stone erupt from the target’s skin before vanishing. The shards shred armour and reduce the target’s Armour Factor by 1 until basic repairs are made. Repairs take 5-10 minutes of work.
                                    Air: This agonising attack forces air into the target’s body tissues, causing terrible pain and exploding organs. The target has his movement reduced by half for 1d6 rounds due to the pain. This special effect doesn’t work on automatons or the undead, though they take damage normally.
                                    Water: This attack freezes the target from the inside causing massive damage. The target has his Evasion reduced by 1 for 1d6 rounds.
                                    Darkness: Hampers the target’s vision, inflicting a -1 to Attack and Defence for 1d6 rounds.</textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Elemental Essence</summary>
                                <select class="elementalistcheckbox elemental_essence" name="attr_elemental_essence">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <input type="hidden" class="elementalistcheckbox elemental_essence" name="attr_elemental_essence" value="0"/>
                                <div class="sheet-auto-expand">
                                    <span name="attr_elemental_essence_text"></span>
                                    <textarea name="attr_elemental_essence_text" readonly>An 8th Rank Elementalist can create an Elemental Essence (see Dragon Warriors, p. 140) of her own main Element (only). This takes seven days of full-time work, per Essence, and costs just 100C. The Elementalist, unlike a Sorcerer using Alchemy (see Dragon Warriors, p. 30), does not need a laboratory or any other special equipment. However, she must brew the Essence in a place suited to the element: atop a volcano or by a massive forest fire for Fire, deep beneath a mighty mountain for Earth, out at sea or even underwater for Water, or on a mountaintop at least two miles high for Air.
                                    A Darkness Elemental Essence resembles an uncut black diamond, at least in smoothness and hardness, but reflects no light whatsoever. If it is immersed in the fresh blood of any creature, in a dark place, it immediately becomes a Darkness Elemental (see below). A Darkness Elementalist of 8th Rank can create a Darkness Elemental Essence as above. It must be brewed in a dark place both literally and figuratively; a place that has recently seen great death, such as a battlefield or mass plague grave.
                                    Elementalists of any Rank are treated as one Rank higher when attempting to command an elemental summoned by Elemental Essence, so long as it is of their main element, but they always fail an attempt to command an Elemental that is not from their main or subsidiary elements. An Elementalist automatically succeeds at commanding an elemental summoned from an Elemental Essence she has created herself; there is no need to roll.</textarea>
                                </div>
                            </details>
                        </div>
                        <div class="skillrow">
                            <details>
                                <summary>Elemental Resistance</summary>
                                <select class="elementalistcheckbox elemental_resistance" name="attr_elemental_resistance">
                                    <option value="0">Unknown</option>
                                    <option value="1">Known</option>
                                </select>
                                <div class="sheet-auto-expand">
                                    <span name="attr_elemental_resistance_text"></span>
                                    <textarea name="attr_elemental_resistance_text" readonly>An Elementalist is resistant to being attacked by her own element, as wielded by another Elementalist or (at the GM’s discretion) in the form of another spellcaster’s spell, magical item attack, or even mundane attack (for example a hurricane, blizzard, burning building, or rocky avalanche). She gains a +4 to magical defence and evasion if attacked by her primary element, or a +2 if attacked by one of her secondary elements. She is so familiar with the elements in question that she can easily evade or resist their attacks.</textarea>
                                </div>
                            </details>
                        </div>
                </details>
            </div>
            <div class="warlockskills">
                <details>
                    <summary><h2>Warlock Profession Skills</h2></summary>
                    <div class="counter-container">
                        <div class="counterbox">
                            <span>Special Abilities of a Warlock:</span>
                            <div class="counterfields">
                                <span>Max:</span>
                                <input type="number" class="fourshorttextinput" name="attr_warlockskills_max" />
                                
                                <span>Selected:</span>
                                <input type="number" class="fourshorttextinput" name="attr_warlockskills_selected" readonly />
                            </div>
                        </div>
                    </div>
                    <div class="weapon-group-selection">
                        <details>
                            <summary class="bigbolddetails">Select Weapon Groups</summary>
                            <div class="weapon-group-container">
                                <span>Weapon Group 1:</span>
                                <select name="attr_weapon_group_1" class="warlock-weapongroup">
                                    <option value="1">Weapon Group I: Flail, Mace, Morningstar, Holy Water Sprinkler, Scourge, Warhammer</option>
                                    <option value="2">Weapon Group II: Dagger, Shortsword, Sword</option>
                                    <option value="3">Weapon Group III: Halberd, Staff, Spear, Footman's Flail, Pollaxe, War Lance</option>
                                    <option value="4">Weapon Group IV: Two-handed Sword, Longsword</option>
                                    <option value="5">Weapon Group V: Battleaxe, War Axe</option>
                                    <option value="6">Weapon Group VI: Bow, Longbow</option>
                                    <option value="7">Weapon Group VII: Crossbow, Javelin, Sling, Dagger, Rock, Throwing Spike, Arbalest</option>
                                    <option value="8">Weapon Group VIII: Cudgel, Unarmed combat</option>
                                </select>
                                <span>Weapon Group 2:</span>
                                <select name="attr_weapon_group_2" class="warlock-weapongroup">
                                    <option value="1">Weapon Group I: Flail, Mace, Morningstar, Holy Water Sprinkler, Scourge, Warhammer</option>
                                    <option value="2">Weapon Group II: Dagger, Shortsword, Sword</option>
                                    <option value="3">Weapon Group III: Halberd, Staff, Spear, Footman's Flail, Pollaxe, War Lance</option>
                                    <option value="4">Weapon Group IV: Two-handed Sword, Longsword</option>
                                    <option value="5">Weapon Group V: Battleaxe, War Axe</option>
                                    <option value="6">Weapon Group VI: Bow, Longbow</option>
                                    <option value="7">Weapon Group VII: Crossbow, Javelin, Sling, Dagger, Rock, Throwing Spike, Arbalest</option>
                                    <option value="8">Weapon Group VIII: Cudgel, Unarmed combat</option>
                                </select>
                            </div>
                        </details>
                    </div>
                    <div class="warlockabilities">
                        <details>
                            <summary class="bigbolddetails">Special Abilities of a Warlock</summary>
                            <div class="skillrow">
                                <details>
                                    <summary>Appraise Enemy</summary>
                                    <input type="checkbox" class="warlockcheckbox appraiseenemy" name="attr_appraise_enemy" value="1" />
                                    <div class="warlockroll appraiseenemy">
                                        <button class="button1 d20" type="roll" value="/w gm&{template:custom} {{title=@{character_name} attempts to appraise their enemy}} {{subtitle=Roll 1d20 under Psychic Talent}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finalpsychictalent}}} {{On fail, percieved rank= [[3d6 –7]]}}" name="roll_appraiseenemy"></button>
                                    </div>
                                    <div class="sheet-auto-expand">
                                        <span name="attr_appraise_enemy_text"></span>
                                        <textarea name="attr_appraise_enemy_text" readonly>This skill enables the Warlock to determine the Profession (if any) and rank of a character just by watching him for a few moments. The GM rolls a d20, and if the score is under the Warlock’s Psychic Talent he informs him accurately of the character’s Profession and rank. If the d20 roll fails, the GM derives a random result for the observed character’s rank by rolling 3d6 –7, taking results below 1 as 1st-rank, and gives his Profession as whatever seems most plausible. (Note that even without this skill it is usually easy to tell a Barbarian, say, from a Sorcerer! Also note that tables for determining random Professions and ranks will appear in the Dragon Warriors Bestiary. Use of the skill takes one Combat Round for each character observed. It can only be used once on any given character—i.e. the Warlock cannot double-check in case of a mistake the first time. Because this is a skill rather than a spell it is not affected by Deceit or Mind Cloak. However, for the same reason it is affected by an Assassin’s Disguise skill, and an Assassin who disguises himself successfully will be able to fool the Warlock into thinking him to be some other rank and Profession.</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>Arrow Cutting</summary>
                                    <input type="checkbox" name="attr_arrow_cutting" value="1" />
                                    <div class="sheet-auto-expand">
                                        <span name="attr_arrow_cutting_text"></span>
                                        <textarea name="attr_arrow_cutting_text" readonly>This talent allows the Warlock to knock or catch arrows out of the air before they hit him! This calls for total concentration, so he cannot do it while spell-casting, in mêlée, etc. He is able to pit his defence score against the bowman’s attack. The Hit Roll is thus made as for normal mêlée combat, except that the usual range and visibility modifiers (p. 68) still apply also. The Warlock will have to split his defence (p. 68) if more than one arrow is shot at him in the same Combat Round. The Arrow Cutting skill can only be used if the Warlock can see his attacker; this is because he needs to see the release of the arrow to time his parry—he does not actually follow it in flight with his eye. Despite the name, this skill applies to all missile weapons (throwing stars, arrows, javelins, etc.) except for crossbow bolts.</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>Fight Blind</summary>
                                    <input type="checkbox" name="attr_fight_blind" value="1" />
                                    <div class="sheet-auto-expand">
                                        <span name="attr_fight_blind_text"></span>
                                        <textarea name="attr_fight_blind_text" readonly>The Warlock acquires a kind of ‘radar’ sense. When fighting blind (in pitch darkness or thick smoke, or against an invisible foe, for instance) he incurs a penalty of only –2 attack and –4 defence. (This is only 50% of the usual penalty for fighting blind; see p. 61)</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>Unarmed Combat</summary>
                                    <input type="checkbox" name="attr_unarmed_combat" value="1" />
                                    <div class="sheet-auto-expand">
                                        <span name="attr_unarmed_combat_text"></span>
                                        <textarea name="attr_unarmed_combat_text" readonly>In order to select this skill, the Warlock must have chosen Weapon Group VIII as one of his fields of specialization. If he later switches to another Weapon Group, he loses the use of this skill. When fighting unarmed, the skill means that he uses a d6 for Armour Bypass Rolls and inflicts 3 HP damage on a successful blow.</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>Minor Enchantment (Weapons)</summary>
                                    <input type="checkbox" name="attr_minor_enchantment_weapons" value="1" />
                                    <div class="sheet-auto-expand">
                                        <span name="attr_minor_enchantment_weapons_text"></span>
                                        <textarea name="attr_minor_enchantment_weapons_text" readonly>This gives the Warlock the ability to forge enchanted weapons. There are three sub-levels to the Minor Enchantment skill: basic, advanced, and master. The first time the Warlock chooses this skill it gives him the ability to produce +1 magic weapons. He must wait until he gains another rank and then take the same skill a second time in order to reach the advanced level required for +2 weapons. For master level (+3 weapons) he must take this skill three times. The time taken to create an enchanted weapon is given on p. 35. There is a 1% chance that the weapon will turn out to be flawed.</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>Minor Enchantment (Armour)</summary>
                                    <input type="checkbox" name="attr_minor_enchantment_armour" value="1" />
                                    <div class="sheet-auto-expand">
                                        <span name="attr_minor_enchantment_armour_text"></span>
                                        <textarea name="attr_minor_enchantment_armour_text" readonly>This gives the Warlock the ability to forge enchanted armour. There are three sub-levels to the Minor Enchantment skill: basic, advanced, and master. The first time the Warlock chooses this skill it gives him the ability to produce +1 magic armour. He must wait until he gains another rank and then take the same skill a second time in order to reach the advanced level required for +2 armour. For master level (+3 armour) he must take this skill three times. The time taken to create an enchanted armour is given on p. 35. There is a 1% chance that the armour will turn out to be flawed.</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>Major Enchantment (Weapons)</summary>
                                    <input type="checkbox" name="attr_major_enchantment_weapons" value="1" />
                                    <div class="sheet-auto-expand">
                                        <span name="attr_major_enchantment_weapons_text"></span>
                                        <textarea name="attr_major_enchantment_weapons_text" readonly>A Warlock is only able to take this skill when he has Minor Enchantment of Weapons at the master level. The skill enables him to produce three magic swords which are listed below. He can make only one of each type of sword in his lifetime, and each takes a year and a day to make. These items must be swords of some form—a normal sword, shortsword, scimitar, two-handed sword or whatever. It is not possible to forge other types of weapon using this skill. Volcanic Sword: The wielder of this sword can cause its blade to glow white-hot or even burst into flame. This adds +5 HP to the damage the weapon inflicts; e.g. a Volcanic Shortsword becomes a (d8, 8) weapon. This applies only against creatures that can be affected by heat and/or fire. Severblade: The edge of this sword is always razor-sharp. While fighting with it, a character uses d20 for Armour Bypass Rolls. The damage inflicted is as it would be for a normal sword. Vampire Sword: This sword leeches the life-energy of those it slays and channels it into its owner. If wounded, the wielder of the Vampire Sword gets back 3 HP for every living creature or character he kills with it. The powers listed above are the only magical powers these weapons possess. They cannot be imbued with magic bonuses (+1, etc.) in addition to these powers.</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>Major Enchantment (Armour)</summary>
                                    <input type="checkbox" name="attr_major_enchantment_armour" value="1" />
                                    <div class="sheet-auto-expand">
                                        <span name="attr_major_enchantment_armour_text"></span>
                                        <textarea name="attr_major_enchantment_armour_text" readonly>A Warlock must have mastered the Minor Enchantment of Armour before he can acquire this skill. When he takes the skill, he must select one armour type from the three given below. He must take the skill a second time if he also wants to be able to make one of the other armour types. All of these types of magic armour are plate. Like the special swords given above, they have no magic bonus; this means that they have an intrinsic Armour Factor. Fashioning a suit of these armour types takes three years. There is a 1% chance that the armour will turn out to be flawed. Nullplate: This must be made with an alloy of silver which becomes jet-black in the process of forging. The armour must be studded with emeralds and jade, and the total cost is likely to approach 5000 florins. Whoever wears the armour is protected at all times by a kind of low-power Spell Screen that reduces any direct-attack spells cast at him by 3 Magic Points. Herculean Armour: Made from an alloy of gold and decorated with rubies, topaz, or fire opals, this armour is likely to cost some 4000 florins. It has a reddish, coppery appearance when finished. The wearer has a Strength of 20 at all times, allowing him numerous advantages. Fortress Armour: An alloy of platinum produces a suit of armour that shimmers like quicksilver. Moreover, it must be adorned with diamonds, and the total expense may be more than 8000 florins. It protects its wearer from all forms of destructive energy by reducing the damage roll by 20 HP.</textarea>
                                    </div>
                                </details>
                            </div>
                            <div class="skillrow">
                                <details>
                                    <summary>Ride Warhorse</summary>
                                    <input type="checkbox" name="attr_ride_warhorse" value="1" />
                                    <div class="sheet-auto-expand">
                                        <span name="attr_ride_warhorse_text"></span>
                                        <textarea name="attr_ride_warhorse_text" readonly>A Warlock who has chosen this speciality can ride a warhorse, exactly as though she were a Knight or Barbarian.</textarea>
                                    </div>
                                </details>
                            </div>
                        </details>
                    </div>
                </details>
            </div>    
            <div class="knaveskills">
                <details>
                <summary><h2>Knave Profession Skills</h2></summary>
                <div class="counter-container">
                    <!-- Combat Technique Counter -->
                    <div class="counterbox">
                        <span>Special Abilities of a Knave:</span>
                        <div class="counterfields">
                            <span>Max:</span>
                            <input type="number" class="fourshorttextinput" name="attr_knaveskills_max" />
                            
                            <span>Selected:</span>
                            <input type="number" class="fourshorttextinput" name="attr_knaveskills_selected" readonly />
                        </div>
                    </div>
                </div>
                  <h2>Knave Profession Skills</h2>
                  <details>
                    <summary>The Special Abilities of a Knave</summary>
                    <div class="skillrow">
                        <details>
                            <summary>Disguise</summary>
                            <input type="checkbox" class="knavecheckbox disguise" name="attr_disguise" value="1" />
                            <input type="checkbox" class="knavecheckbox disguise" name="attr_disguise" value="2" />
                            <div class="knaveroll disguise">
                                <button class="roll twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to deceive by disguise.}} {{subtitle=Roll Stealth vs Perception}} {{roll= [[2d10]]}} {{Vs= [[@{finalstealth}-?{Target's Perception|0}]] }}" name="roll_disguise"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_disguise_text"></span>
                                <textarea name="attr_disguise_text" readonly>This skill is used to blend into a group in order to evade a pursuer, or to masquerade as another person in order to gain access to the home of an intended victim. The skill of disguise does not give the Assassin the ability to mimic a specific individual, merely to simulate the appearance and mannerisms of a type. The chance that a character will see through the Knave’s disguise is usually quite small. This is determined by subtracting the observing character’s perception from the Knave’s stealth, and the result is the number that the Knave must roll equal to or under on 2d10 to pass undetected. The Disguise roll must be repeated every ten minutes that the Knave maintains his disguise, or once per hour if the skill is selected a second time. Additional rolls are required if engaging in conversation.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Pilfer</summary>
                            <input type="checkbox" class="knavecheckbox pilfer" name="attr_pilfer" value="1" />
                            <input type="checkbox" class="knavecheckbox pilfer" name="attr_pilfer" value="2" />
                            <div class="knaveroll pilfer">
                                <button class="roll twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} attempts to pilfer.}} {{subtitle=Roll Stealth vs. Perception}} {{roll= [[2d10]]}} {{Vs= [[@{finalstealth}-(@{pilfermodifier})-?{Target's Perception|0}]] }}" name="roll_pilfer"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_pilfer_text"></span>
                                <textarea name="attr_pilfer_text" readonly>This is the ability to ‘lift’ small items from a person while standing next to them. The attempt to pilfer is made as a normal stealth vs perception roll with an intrinsic handicap of –4 from the Knave’s stealth score. If the roll fails, the Knave fails to get the item—and the GM checks to see if his would-be victim noticed the attempt. This skill may be selected a second time, reducing the handicap to stealth to -2.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Second Tongue</summary>
                            <input type="checkbox" name="attr_second_tongue" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_second_tongue_text"></span>
                                <textarea name="attr_second_tongue_text" readonly>A Knave can choose one additional language of up to Intermediate level during character creation.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Favoured Language</summary>
                            <input type="checkbox" name="attr_favoured_language" value="1" />
                            <div class="knaveroll favoured_language">
                                <span>Language</span>
                                <select name="attr_favoured_modernlanguage">
                                    <option value="Blank" selected>(Pick One)</option>
                                    <option value="Elleslandic">Elleslandic</option>
                                    <option value="Visic">Visic</option>
                                    <option value="Latter Mercanian">Latter Mercanian</option>
                                    <option value="LCabbandari">Low Cabbandari</option>
                                    <option value="HCabbandari">High Cabbandari</option>
                                    <option value="Dakkandi">Dakkandi</option>
                                    <option value="Algandarve">Algandarve</option>
                                    <option value="Angate">Angate</option>
                                    <option value="Beaulangue">Beaulangue</option>
                                    <option value="Kurlish">Kurlish</option>
                                    <option value="MEmphidian">Modern Emphidian</option>
                                    <option value="Opalarian">Opalarian</option>
                                    <option value="Nascerine">Nascerine</option>
                                    <option value="Etyabeyely">Et'ya'be'yely</option>
                                    <option value="Klav">Klav</option>
                                    <option value="Unno">Unno</option>
                                    <option value="Raukil">Raukil</option>
                                    <option value="Tsutsuneng">Tsutsuneng</option>
                                    <option value="Coradian">Coradian Trader's Argot</option>
                                    <option value="Arcane">Arcane</option>
                                </select>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_favoured_language_text"></span>
                                <textarea name="attr_favoured_language_text" readonly>A natural and alluring charisma is a fundamental part of the Knave’s personality. Choose any one modern language in which the Knave is fluent as a Favoured Language. Add +1 to Perception and +1 to Looks when communicating with humans in that language.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Natural Linguist</summary>
                            <input type="checkbox" name="attr_natural_linguist" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_natural_linguist_text"></span>
                                <textarea name="attr_natural_linguist_text" readonly>A keen ear enables the Knave to take only half the normal time to learn any modern language. When living in a community, the Knave can perform a Learning By Usage roll for the primary language within that society every month at +10%, and if they are tutored at the same time then this is reduced to one roll every three weeks. The bonus does not apply to learning scripts.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Human Intuition</summary>
                            <input type="checkbox" name="attr_human_intuition" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_human_intuition_text"></span>
                                <textarea name="attr_human_intuition_text" readonly>This ability allows the Knave to add +1 to their Perception when contemplating past and potential actions of other humans, and also those who were once human such as the undead. This can assist in many instances, allowing the Knave to second-guess a person. Examples include: 1) where a victim might have hidden an object, secret door or a trap, 2) what relevance an individual’s vocabulary may have, or 3) the hidden meanings revealed in body language.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Uncanny Intuition</summary>
                            <input type="checkbox" name="attr_uncanny_intuition" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_uncanny_intuition_text"></span>
                                <textarea name="attr_uncanny_intuition_text" readonly>(Prerequisite: Human Intuition) Whilst many Knaves are skilled in reading their fellow man, those who walk the path of adventure into lightless underworlds, ancient forests and the wastelands of the world come into contact with a wide variety of beings. For every 3 interactions (combat, conversation etc.) that the Knave experiences with non-human beings, the Knave may roll under his Intelligence. On a successful roll, he may thenceforth use the Human Intuition skill on these beings as well as humans.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Infuriate/Pacify</summary>
                            <input type="checkbox" name="attr_infuriate_pacify" value="1" />
                            <input type="checkbox" name="attr_infuriate_pacify" value="2" />
                            <div class="sheet-auto-expand">
                                <span name="attr_infuriate_pacify_text"></span>
                                <textarea name="attr_infuriate_pacify_text" readonly>Fighting the Knave and his allies is a confusing experience at the best of times; the Knave may keep up a running commentary as the combat progresses, either hurling taunts and insults or speaking words of peace and exquisite platitudes. The Knave may select one enemy per round. If the Knave chooses to Infuriate his enemy, adjust their statistics as follows: +1 to Attack and -2 to Defence. If the Knave chooses to Pacify them, adjust the enemy stats as follows: -2 to Attack and +1 to Defence.</textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Distract</summary>
                            <input type="checkbox" class="knavecheckbox distract" name="attr_distract" value="1" />
                            <input type="checkbox" class="knavecheckbox distract" name="attr_distract" value="2" />
                            <div class="knaveroll distract">
                                <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} attempts to distract their target.}} {{subtitle=Roll 1d20 under Reflexes}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finalreflexes} }}" name="roll_distract"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_distract_text"></span>  
                                <textarea name="attr_distract_text" readonly>
                                    Knaves can divert the attention of their victims by physical acts of misdirection. The Knave must first engage the victim in a one-to-one conversation for one minute, while maintaining their full attention throughout. Roll Reflexes or under on 1d20. When initiating combat, the Knave or a ready companion gains an automatic Surprise on a successfully distracted victim for one combat round. The Knave may additionally apply a -1 modifier to an opponent’s Perception Check, and may also apply a -1 modifier to any Pilfer attempt. Another advantage from a successful distraction roll is to allow him to immediately flee combat before it begins, without suffering a Defence penalty. If this skill is purchased again the modifiers are increased by 1 and the state of Surprise persists for an additional round.                        
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Magic Hands</summary>
                            <input type="checkbox" name="attr_magic_hands" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_magic_hands_text"></span>  
                                <textarea name="attr_magic_hands_text" readonly>
                                    A Knave gains the ability to perform feats of sleight-of-hand that are utterly impossible to the naked eye, such as ‘vanishing’ coins and scraps of parchment into seemingly thin air at will. This ability also gives a +1 to all Pilfer attempts.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Bodyguard</summary>
                            <input type="checkbox" class="knavecheckbox bodyguard" name="attr_bodyguard" value="1" />
                            <div class="knaveroll bodyguard">
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} has their bodyguard glare intimidatingly}} {{subtitle=Roll 1d20 under Looks}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{finallooks}+?{+1 to Looks for each other character of equal or greater Rank that stands with them|0}]] }}" name="roll_intimidate"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_bodyguard_text"></span>  
                                <textarea name="attr_bodyguard_text" readonly>
                                    At 3rd Rank, the Knave can recruit a loyal Hotblood as his own personal NPC bodyguard. This fighting companion admires the Knave as their best friend and will fight alongside the Knave, while also acting as a shill in their scams.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Gossip</summary>
                            <input type="checkbox" class="knavecheckbox gossip" name="attr_gossip" value="1" />
                            <div class="knaveroll gossip">
                                <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} gossips around town.}} {{It takes= [[2d20-@{rank}]] hours in a small settlement; Days in a large settlement; Weeks in a Capital City}} {{and it costs = [[1d6]] Silver Florins per day}}" name="roll_gossip"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_gossip_text"></span>  
                                <textarea name="attr_gossip_text" readonly>
                                    Knaves are adept at extracting information from other humans in apparently normal conversation. Within 2d20 - Rank hours of entering a small settlement, the Knave is able to uncover all manner of local intrigue and secrets. For larger settlements, such as market towns, this is 2d20 - Rank days, and for a capital city, 1d20 - Rank weeks, rounded up. There is also a financial cost of 1d6 florins/day spent in the rumour-mill.
                                    Note: This skill may be difficult for the GM to adjudicate; simply allow a Knave that has invested the requisite time in a settlement to be privy to one or two pieces of GM-only information for adventures linked to that locality.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Presence</summary>
                            <input type="checkbox" class="knavecheckbox presence" name="attr_presence" value="1" />
                            <div class="knaveroll presence">
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} projects their presence.}} {{subtitle=Roll 1d20 under Looks}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{finallooks}+?{+1 to Looks for each other character of equal or greater Rank that stands with them|0}]] }}" name="roll_presence"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_presence_text"></span>  
                                <textarea name="attr_presence_text" readonly>
                                    The Knave gains knowledge which enables her to project her enhanced charisma onto other people. Her ability to shape their perceived personality and physical attractiveness is a powerful force in social encounters. Roll Looks or under on 1d20. This skill can also be used on non-humans as well as humans, perhaps even to gain the favour of a long-dead king. The Knave can also convince others to believe that they are either one Rank higher or lower than she actually is, at will. An Additional +1 bonus is gained for every 3rd rank. Failure is likely to lead to the victim becoming highly suspicious of the Knave and potentially raising an alarm or initiating combat.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Sense Falsehood</summary>
                            <input type="checkbox" class="knavecheckbox sense_falsehood" name="attr_sense_falsehood" value="1" />
                            <div class="knaveroll sense_falsehood">
                                <button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} tries to discern a lie.}} {{subtitle=Roll 1d100 under Target Number}} {{roll= [[1d100cs1cf100]]}} {{Vs= [[50+@{finalintelligence}+@{finalpsychictalent}+@{rank}-?{Target's rank/equivalent|1}]] }}" name="roll_sense_falsehood"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_sense_falsehood_text"></span>  
                                <textarea name="attr_sense_falsehood_text" readonly>
                                    To perform this skill, the Knave must make a successful roll while carefully watching and listening to the mark. The percentage chance to determine whether a statement is true or false is 50 + Knave’s Intelligence + Knave’s Psychic Ability + Knave’s Rank - Rank/equivalent of the mark.
                                </textarea>
                            </div>
                        </details>
                    </div>
                </details>
                <details>
                    <summary>Skills of the Mighty</summary>
                    <div class="skillrow">
                        <details>
                            <summary>Hypnotic Suggestion</summary>
                            <input type="checkbox" class="knavecheckbox hypnotic_suggestion" name="attr_hypnotic_suggestion" value="1" />
                            <div class="knaveroll hypnotic_suggestion">
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} projects a Hypnotic Suggestion.}} {{subtitle=Roll 1d20 under Looks}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finallooks}}}" name="roll_hypnotic_suggestion"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_hypnotic_suggestion_text"></span>  
                                <textarea name="attr_hypnotic_suggestion_text" readonly>
                                    Almost magical in effect, the Knave is able to influence a human subconsciously during an apparently normal conversation. The Knave must first engage the victim in a one-to-one conversation for a number of minutes equal to the victim’s Rank, while maintaining their full attention throughout. Roll Looks or under on 1d20.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Network</summary>
                            <input type="checkbox" class="knavecheckbox network" name="attr_network" value="1" />
                            <div class="knaveroll network">
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} recalls the favours owed to them.}} {{subtitle=Roll 1d20 under Rank}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{rank}}} {{Number of loyal friends= ?{Size of settlement|village, [[1d4]]|Town, [[1d10]]| City, [[1d20]]}}}" name="roll_network"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_network_text"></span>  
                                <textarea name="attr_network_text" readonly>
                                    Wherever the Knave wanders she never seems to be far from one of a vast multitude of friends and acquaintances; people who owe her favours and can “get things done”. Every time that a Knave enters a new settlement, roll Rank or under on d20. If successful, then a number of NPCs of the GM’s choice inside the settlement are loyal friends that owe a favour to one of the Knave’s acquaintances, and the Knave may seek them out for assistance. The number of NPCs is as follows: d4 for a village, d10 for a town, and d20 for a city.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Words are Power</summary>
                            <input type="checkbox" class="knavecheckbox words_are_power" name="attr_words_are_power" value="1" />
                            <div class="knaveroll words_are_power">
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} gives an impassioned speech.}} {{subtitle=Roll 1d20 under Looks}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finallooks}}} {{Number of people affected = [[2d20]]}}" name="roll_words_are_power"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_words_are_power_text"></span>  
                                <textarea name="attr_words_are_power_text" readonly>
                                    By using the right words at the right time and right volume, the Knave can raise an army of eager accomplices from a crowd. The Knave must deliver a one-minute eloquent, impassioned speech to a group of 2d20 characters within earshot that are the same Rank as the Knave or lower. Roll Looks or under on 1d20.
                                </textarea>
                            </div>
                        </details>
                    </div>
                </details>
                </details>
            </div>
            <div class="hunterskills">
                <details>
                <summary><h2>Hunter Profession Skills</h2></summary>
                <div class="counter-container">
                    <div class="counterbox">
                        <span>Special Abilities of a Hunter:</span>
                        <div class="counterfields">
                            <span>Max:</span>
                            <input type="number" class="fourshorttextinput" name="attr_hunterskills_max" />
                            <span>Selected:</span>
                            <input type="number" class="fourshorttextinput" name="attr_hunterskills_selected" readonly />
                        </div>
                    </div>
                </div>
                <details>
                    <summary>Special Abilities of a Hunter</summary>
                    <div class="skillrow">
                        <details>
                            <summary>Track</summary>
                            <input type="checkbox" class="huntercheckbox track" name="attr_track" value="1" />
                            <input type="checkbox" class="huntercheckbox track" name="attr_track" value="2" />
                            <div class="hunterroll track">
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} searches for Tracks}} {{subtitle=Roll 1d20 under Tracking Skill}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{finalperception}+@{trackmodifier}-?{Other Modifiers|0}]] }}" name="roll_track"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_track_text"></span>  
                                <textarea name="attr_track_text" readonly>
                                    As per Assassin (see Dragon Warriors, p. 48). May be selected a second time for +2.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Bowyer & Fletcher</summary>
                            <input type="checkbox" name="attr_bowyer_fletcher" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_bowyer_fletcher_text"></span>  
                                <textarea name="attr_bowyer_fletcher_text" readonly>
                                    Self-reliance is a key aspect of the hunter’s ethos. The Hunter can manufacture one specific ranged weapon of his choosing, plus ammunition for that weapon (if necessary). For example, bows and normal arrows could be selected providing that the Hunter possesses suitable raw materials in the form of strong wood, string/glue and feathers, while a reusable weapon such as a javelin would not, of course, require any ammunition. Normal arrowheads can either be bought beforehand or made from flint. As a guide, a sling and slingshot are fairly quick and cheap to produce at 1 Florin and 5 Pennies, respectively. The creation of six arrows/quarrels with ready-made arrowheads takes three days with a materials cost of 2 Florins. One normal bow or javelin will take three days to produce at a cost of 5 Florins, while one longbow will take 5 days to produce at a cost of 15 Florins.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Precise Shot</summary>
                            <input type="checkbox" name="attr_precise_shot" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_precise_shot_text"></span>  
                                <textarea name="attr_precise_shot_text" readonly>
                                    The Hunter is the master of ranged weapons. By taking a moment to focus on his target, he may make a much more precise attack. By doing so, he may temporarily add 1 point to his Attack for each 3 points he subtracts from his Defence for that round, but only when attacking with a ranged weapon. This may be combined with Stillness, below.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Favoured Weapon</summary>
                            <input type="checkbox" class="huntercheckbox favoured_weapon" name="attr_favoured_weapon" value="1" />
                            <div class="hunterroll favoured_weapon">
                                Weapon type 
                                <input class="eightmidtextinput" type="text" name="attr_favoured_weapon_selected" list="rangedweapon" />
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_favoured_weapon_text"></span>  
                                <textarea name="attr_favoured_weapon_text" readonly>
                                    As a master of the hunt, the Hunter often finds himself using a signature type of weapon, or at least one which he becomes intrinsically attached to. The Hunter may designate any ranged weapon type (eg: Bows, Javelins, Slings, etc.) as his Favoured Weapon. Doing so gives no immediate bonus, but many of the High-level skills give bonuses to this weapon. Once he has selected his Favoured Weapon, a Hunter may not change it.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Favoured Terrain</summary>
                            <input type="checkbox" class="huntercheckbox favoured_terrain" name="attr_favoured_terrain" value="1" />
                            <div class="hunterroll favoured_terrain">
                                Terrain Type
                                <input type="text" list="terraintype" name="attr_favoured_terrain_selected" class="fourteenlongtextinput">
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_favoured_terrain_text"></span>  
                                <textarea name="attr_favoured_terrain_text" readonly>
                                    Through years of study, wandering and ranging, the Hunter has become a master of the wilderness. Choose one from the following to be your Favoured Terrain: Open, Forest, Hills, Swamp, Arctic, and Desert. Add +2 to Stealth, Perception, and Forage (q.v.) rolls when in chosen terrain type.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Set Traps</summary>
                            <input type="checkbox" name="attr_set_traps" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_set_traps_text"></span>  
                                <textarea name="attr_set_traps_text" readonly>
                                    Snares and traps normally used for game can also be adapted to catch poachers and the King’s Men. The Hunter will know where to set the trap to most likely be triggered. The target of the trap may use Evasion (see Dragon Warriors, p. 71), as usual. The Speed depends on the type of trap, but the Hunter can make advanced traps at higher Ranks (+1 to Speed at 5th Rank and +2 at 9th Rank). The Hunter describes the type of trap and results of it being triggered when he first sets the trap. Normally it is something simple such as a snare or pit. More complex traps take more time and equipment to set up properly. Some examples are given below, but the GamesMaster may allow others. Note that in each case, the construction time includes time to conceal the trap.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Forage</summary>
                            <input type="checkbox" class="huntercheckbox forage" name="attr_forage" value="1" />
                            <div class="hunterroll forage">
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} forages in the wilderness.}} {{subtitle=Roll 1d20 under Forage Skill}} {{roll=[[1d20cs1cf20]]}} {{Vs= ?{Terrain Type?|Fecund, [[ {@{finalperception} - 10} ]] it takes [[1d3]] hours |Fertile, [[ {@{finalperception} - 14} ]] it takes [[1d3+3]] hours |Desolate, [[ {@{finalperception} - 18} ]] it takes [[1d3+6]] hours} }}" name="roll_forage"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_forage_text"></span>  
                                <textarea name="attr_forage_text" readonly>
                                    The Hunter is an expert at finding sustenance in the wilderness. The Hunter must make a Perception roll and beat a difficulty number assigned by the GM. Then the GM rolls an appropriate die to determine how long the Hunter takes in finding the food and water. The three basic levels of foraging ability by any terrain are:
                                        Type TN Time
                                        Fecund 10 1d3
                                        Fertile 14 1d3+3
                                        Desolate 18 1d3+6
                                    The result of the die roll indicates how many hours it takes for the Hunter to find a day’s food and water for a number of people equal to half the Hunter’s Rank. If the Hunter is in his Favoured Terrain (see above) he may add +2 to his Perception for purposes of making the Foraging roll.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Stillness</summary>
                            <input type="checkbox" name="attr_stillness" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_stillness_text"></span>  
                                <textarea name="attr_stillness_text" readonly>
                                    A Hunter can take advantage of natural surroundings, slow his breathing and remain perfectly still in order to observe his quarry. To reflect this, the Hunter chooses a space to hide, lowers his Defence and adds half that amount (rounded down) to his Stealth score (i.e. -2 Defence results in +1 Stealth, etc.). In his Favoured Terrain, he adds the full amount to Stealth. This may be combined with Precise Shot, above.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Hunter’s Mind</summary>
                            <input type="checkbox" name="attr_hunters_mind" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_hunters_mind_text"></span>  
                                <textarea name="attr_hunters_mind_text" readonly>
                                    Being the master of the wild, the Hunter comes to know how to read and blend in to his surroundings. As such, when in the wilderness and wearing at most padded armour, he may add +1 to Stealth and Perception for every three Ranks.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>False Trail</summary>
                            <input type="checkbox" name="attr_false_trail" value="1" />
                            <input type="checkbox" name="attr_false_trail" value="2" />
                            <div class="sheet-auto-expand">
                                <span name="attr_false_trail_text"></span>  
                                <textarea name="attr_false_trail_text" readonly>
                                    This skill enables the hunter to skilfully manipulate the environment, removing real tracks and laying false tracks to deceive anyone that attempts to use the Track skill in that location. This could be used to escape, lure the enemy into a prepared killing ground or simply send the enemy off on a wild goose chase. When a Hunter lays a false trail, those following him must make an Intelligence roll, Difficulty Factor: 10 + (1/2 Hunter’s Rank). May be taken a second time, in which case the Hunter adds his full Rank to the Difficulty Factor of any such roll.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Climb</summary>
                            <input type="checkbox" name="attr_climb" value="1" />
                            <input type="checkbox" name="attr_climb" value="2" />
                            <div class="sheet-auto-expand">
                                <span name="attr_climb_text"></span>  
                                <textarea name="attr_climb_text" readonly>
                                    Subtract half of Rank from difficulty factor of the climb when climbing trees, rockfaces, and similar rough surfaces. May be taken a second time, in which case the character subtracts his full rank from the difficulty factor.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Sneak Attack</summary>
                            <input type="checkbox" name="attr_sneak_attack" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_sneak_attack_text"></span>  
                                <textarea name="attr_sneak_attack_text" readonly>
                                    A Hunter who successfully moves within 6 metres of a target without being seen automatically gains Surprise.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Soldier</summary>
                            <input type="checkbox" name="attr_soldier" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_soldier_text"></span>  
                                <textarea name="attr_soldier_text" readonly>
                                    Hunters are often recruited temporarily into armies as auxiliary troops or levies, being much in demand by local lords and mercenary captains for their ranged combat skills. Those who remain for a longer period often acquire heavy armour, and become used to wearing it. This skill allows the Hunter to have the armour penalties appropriate to a Barbarian or Warlock (see Dragon Warriors, p. 70).
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Penetrating Shot</summary>
                            <input type="checkbox" name="attr_penetrating_shot" value="1" />
                            <input type="checkbox" name="attr_penetrating_shot" value="2" />
                            <div class="sheet-auto-expand">
                                <span name="attr_penetrating_shot_text"></span>  
                                <textarea name="attr_penetrating_shot_text" readonly>
                                    The Hunter has become adept at finding weak spots in armour, hide, etc. As such, when attacking with his Favoured Weapon at Short range, he may add +1 to Armour Bypass Rolls. This skill may be taken twice.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Master Fletcher</summary>
                            <input type="checkbox" name="attr_master_fletcher" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_master_fletcher_text"></span>  
                                <textarea name="attr_master_fletcher_text" readonly>
                                    An experienced Hunter becomes a skilled craftsman in the art of fletching. The Hunter can manufacture new types of arrow and quarrel beyond the normal broadhead type, and he is also able to manufacture normal arrows and quarrels in half the time specified in the Bowyer & Fletcher skill. Any non-Hunter profession that attempts to fire a special arrow does so with a -1 Attack penalty.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Fast Shot</summary>
                            <input type="checkbox" class="huntercheckbox fast_shot" name="attr_fast_shot" value="1" />
                            <div class="hunterroll fast_shot">
                                <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} concentrates on snapping off two quick shots.}} {{subtitle=Roll 1d20 under Reflexes}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finalreflexes} }}" name="roll_fast_shot_check"></button>
                                <button class="roll d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:customd20} {{title=@{character_name} rapidly fires their second shot with @{equippedrangedweaponname}}} {{subtitle=@{equippedrangedweapontype} +@{equippedrangedweaponmagicbonus} using @{equippedammotype}}} {{attackroll= [[1d20cs1cf20]]}} {{attackvsranged=[[ @{finalrangedattack} - ?{Range Modifier|Short @{equippedrangedweaponshortrange}m, 0|Medium @{equippedrangedweaponmediumrange}m, 3|Long @{equippedrangedweaponlongrange}m, 7} - ?{Small or Crouching target?|No, 0|Yes, 2} - ?{Is the Target moving?|No, 0|Slowly, 2|Quickly, 4} -(?{Light Conditions|Normal, 0|Poor, 3|Other, ?{Other&amp;#125;}) + (?{Miscellaneous Modifiers, can be a positive (improves chance to hit) or a negative (decreases chance to hit)|0})]] }} {{abr=[[ @{equippedrangedweaponabr} + @{finalrangedabrbonus} ]]}} {{Damage=[[ @{equippedrangedweapondamage} + @{finalrangeddmgbonus} ]]}} {{desc=@{equippedammospecialeffect}}}" name="roll_fast_shot_attack"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_fast_shot_text"></span>  
                                <textarea name="attr_fast_shot_text" readonly>
                                    At the beginning of a combat round, the Hunter may declare that he wishes to loose two shots (throw two javelins, etc.) instead of the normal one. He shoots his first arrow as normal. If he can roll under his Reflexes, he may shoot a second arrow after all other actions have been taken that round. He may change targets with the second shot, but doing so imposes a penalty of -2 to his Attack score. Fast Shot may only be used with the Favoured Weapon.
                                </textarea>
                            </div>
                        </details>
                    </div>
                </details>
                </details>
            </div>
            <div class="priestskills">
                <details>
                <summary><h2>Priest Profession Skills</h2></summary>
                <div class="counter-container">
                    <div class="counterbox">
                        <span>Special Abilities of a Priest:</span>
                        <div class="counterfields">
                            <span>Max:</span>
                            <input type="number" class="fourshorttextinput" name="attr_priestskills_max" />
                            <span>Selected:</span>
                            <input type="number" class="fourshorttextinput" name="attr_priestskills_selected" readonly />
                        </div>
                    </div>
                </div>
                <details>
                    <summary>Special Abilities of a Priest</summary>
                    <div class="skillrow">
                        <details>
                            <summary>Literate</summary>
                            <input type="checkbox" name="attr_literate" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_literate_text"></span>
                                <textarea name="attr_literate_text" readonly>
                                    Due to their extensive time spent studying holy books, and volumes of ancient lore, Priests are automatically literate in their native language.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Ancient Script</summary>
                            <input type="checkbox" name="attr_ancient_script" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_ancient_script_text"></span>
                                <textarea name="attr_ancient_script_text" readonly>
                                    The Priest can speak, read, and write in Bacchile or Opalarian (or other ancient language of the character’s culture).
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Breadth of Knowledge</summary>
                            <input type="checkbox" name="attr_breadth_of_knowledge" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_breadth_of_knowledge_text"></span>
                                <textarea name="attr_breadth_of_knowledge_text" readonly>
                                    Priests often pick up skills and hobbies outside the general scope of their studies of scripture. Each Priest begins the game with three areas of Breadth of Knowledge, equivalent to having Intermediate skill in any three areas of their choice. Priests automatically gain a detailed knowledge of their own religion and its associated mythology.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Linguist</summary>
                            <input type="checkbox" class="priestcheckbox linguist" name="attr_linguist" value="1" />
                            <div class="priestroll linguist">
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} attempts to decipher some text.}} {{subtitle=Roll 1d20 under Intelligence}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finalintelligence} }}" name="roll_linguist"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_linguist_text"></span>
                                <textarea name="attr_linguist_text" readonly>
                                    Time spent studying ancient tomes and speaking with people from a variety of backgrounds give most Priests an innate understanding of the nuances of various languages. A Priest may recognize any spoken or written language by rolling less than Intelligence on d20. Additionally, Priests learn new languages as if they were one category simpler. Further, the Priest will add his Intelligence score to his chances to know additional ancient languages.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Bulwark</summary>
                            <input type="checkbox" name="attr_bulwark" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_bulwark_text"></span>
                                <textarea name="attr_bulwark_text" readonly>
                                    The calming presence and inspiring influence of the Priest adds tenacity to his companions, so long as they are of the same faith as the Priest. Add +2 to each companion character’s Rank for purposes of resolving Fright Attacks. This skill may be taken a second time, for a total of a +4 bonus. To give the bonus, the Priest must either recite prayers, or brandish a holy symbol, or both, when the Fright Attack is made. If he does not realize a Fright Attack is imminent (that is, if the player of the Priest does not state in advance that he plans to start using the skill), he may react to the Fright Attack and give the bonus immediately anyway, even if unprepared, with a successful Intelligence roll. Any allies who are within earshot (for prayers) or within sight of the Priest gain the bonus.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Exorcism</summary>
                            <input type="checkbox" class="priestcheckbox exorcism" name="attr_exorcism" value="1" />
                            <div class="priestroll exorcism">
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} pits his will against a demon!}} {{subtitle=Roll 1d20 + Rank against 1d20 + The Demon's Will}} {{roll= [[1d20cs1cf20+@{rank}]]}} {{Vs= [[?{The Demon's Rank/Equivalent|1}+1d20cs1cf20]] }}" name="roll_exorcism"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_exorcism_text"></span>
                                <textarea name="attr_exorcism_text" readonly>
                                    A priest with a prayer book and holy symbol can attempt to exorcise a demon (any of the Infernal Creatures from the Bestiary, or any of the new demons from this book). This takes one combat round. The Priest makes a Rank + d20 roll, as does the demon (Rank-equivalent + d20). If the Priest wins, the demon is banished back to the nether planes. If the demon wins, the demon is unaffected, and the Priest may not attempt to banish the same demon again. The Priest has something of a crisis of faith. He must be absolved and reassured by a superior before he can use any of his Priestly powers again, other than the 1st Rank powers (which he retains, even during his crisis). In the event of a draw, the demon is banished, but at terrible cost to the Priest. Roll 1D6: 1 Hair turns white. (If it’s already white, the GM chooses a different, permanent appearance change.) 2 Madness (see Dragon Warriors, p. 124) 3 Unconsciousness for 3d6 minutes. The Priest cannot be woken by any means during this time. 4 Take d4 + demon’s rank in damage. 5 Take d4 + demon’s rank in damage. In addition, the damage will be in the form of permanent facial scarring (-1 to Looks), often with a distinctly demonic look to it (for example, a brand that resembles an inverted pentagram). 6 Roll twice more, and apply both results.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Sermon</summary>
                            <input type="checkbox" class="priestcheckbox sermon" name="attr_sermon" value="1" />
                            <div class="priestroll sermon">
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} gives a stirring sermon}} {{subtitle=Roll 1d20 under Looks}} {{roll= [[1d20cs1cf20]]}} {{Vs= @{finallooks} }}" name="roll_sermon"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_sermon_text"></span>
                                <textarea name="attr_sermon_text" readonly>
                                    Oration of the Saviour’s (or the Illuminated One’s, or the Bodhisattva’s, etc.) Holy Word comes naturally to the Priest. The faithful flock—all members of the Priest’s faith who are listening—will temporarily feel compelled to set aside their differences and help those less fortunate than themselves, if the Priest succeeds at a Looks roll. Requirement: a prayer book.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Healing Hands</summary>
                            <input type="checkbox" name="attr_healing_hands" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_healing_hands_text"></span>
                                <textarea name="attr_healing_hands_text" readonly>
                                    Through study of medicine, the priest has learned some basic skill with healing. Increase his chance to wake an unconscious character to 1-2 on 1d6, and add +2 HP per day to his patient’s natural recovery rate while resting. This skill cannot raise a dead character, reattach a severed limb, or anything of the sort. It is simply meant to represent herbalism, minor first aid, and comforting the wounded character.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Remove Curse</summary>
                            <input type="checkbox" class="priestcheckbox remove_curse" name="attr_remove_curse" value="1" />
                            <div class="priestroll remove_curse">
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} attempts to remove a foul curse}} {{subtitle=Roll 1d20 under Target Number}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{rank}+@{finalmagicaldefence}]] }}" name="roll_remove_curse"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_remove_curse_text"></span>
                                <textarea name="attr_remove_curse_text" readonly>
                                    The Priest has studied the ways of demons and other dark beings, and learned the rites and rituals to remove Curses. To do this, the priest must perform a short ritual (about fifteen minutes) over the cursed character. He will need to anoint the cursed character with holy oil or water, and burn incense during the ritual. The Priest’s player then rolls a d20, trying to roll equal to or less than the Priest’s Rank, plus his Magical defence bonus. If the roll succeeds, the curse is lifted. Requirement: a prayer book.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Depth of Knowledge</summary>
                            <input type="checkbox" name="attr_depth_of_knowledge" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_depth_of_knowledge_text"></span>
                                <textarea name="attr_depth_of_knowledge_text" readonly>
                                    The priest may raise one of his or her Intermediate skills to Advanced.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Remove Madness</summary>
                            <input type="checkbox" class="priestcheckbox remove_madness" name="attr_remove_madness" value="1" />
                            <div class="priestroll remove_madness">
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} soothe a troubled mind}} {{subtitle=Roll 1d20 under Target Number}} {{roll= [[1d20cs1cf20]]}} {{Vs= [[@{rank}+?{Relic Quality|Holy, 1|Saintly, 2|Perfect, 4|Godly, 8}]] }}" name="roll_remove_madness"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_remove_madness_text"></span>
                                <textarea name="attr_remove_madness_text" readonly>
                                    In order for a Priest to cure someone of madness, the crazed party must be brought before an altar bearing the relic of a saint. Depending on the madness, restraint may be necessary. The Priest will then perform a lengthy (at least one hour) ceremony. At the end of the ceremony, roll a d20. The roll must be equal to or lower than the character’s level, plus a bonus based on the quality of the Relic. If the d20 roll is lower than the character’s level, plus the appropriate bonus, the character is cured of his madness. A failure on the die roll indicates the madness remains, but does not worsen. Rolling both a failure and a natural ‘20’ on the die causes the character to take on an additional madness. Rolling the same madness as the character is currently inflicted with indicates that the madness worsens. Requirement: a prayer book.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Words are Power</summary>
                            <input type="checkbox" name="attr_words_are_power" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_words_are_power_text"></span>
                                <textarea name="attr_words_are_power_text" readonly>
                                    As per the Knave power.
                                </textarea>
                            </div>
                        </details>
                    </div>
                </details>  
                </details>
            </div>
            <div class="demonologistskills">
                <details>
                <summary><h2>Demonologist Profession Skills</h2></summary>
                <details>
                    <summary>Special Abilities of a Demonologist</summary>
                    <div class="skillrow">
                        <details>
                            <summary>Demonic Specialism</summary>
                            <input type="checkbox" name="attr_demonic_specialism" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_demonic_specialism_text"></span>
                                <textarea name="attr_demonic_specialism_text" readonly>
                                    A demonologist is particularly effective at magically attacking and defending against demons. He gets a +1 bonus to Magical Defence and Magical Attack against all Infernal Creatures from the Dragon Warriors Bestiary (pp 67–73), all the demons in this book, and any other creatures that the GM logically decides are demonic in nature (that is, summoned from Hell). This bonus increases to +3 at 7th Rank, and to +5 at 12th Rank.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Demonology</summary>
                            <input type="checkbox" class="demonologistcheckbox demonology" name="attr_demonology" value="1" />
                            <input type="hidden" name="attr_demonology_modifier" value='0' />
                            <div class="demonologistroll demonology">
                                Roll Demonology 
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} seeks hidden, forbidden knowledge}} {{subtitle=Roll 2d10 under Demonology Skill}} {{roll=[[2d10]]}} {{Vs = [[@{rank}+@{demonology_modifier}]]}} {{Time spent in research and meditation= [[2d10]]}}" name="roll_demonology"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_demonology_text"></span>
                                <textarea name="attr_demonology_text" readonly>
                                    A demonologist is an expert in demonic lore. Demonology is a chancy, inexact science, full of rumour and myth. A demonologist has a Demonology Skill equal to his Rank, with bonuses or penalties dependent on his Intelligence. Information is broken down into categories for detailed understanding of demons. Demonology rolls are usually made by the GM on the character’s behalf. Information categories include full game statistics, special wards, bargaining requirements, and bonuses to magical defence against Summoning and Binding.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>The Pentacle of Protection</summary>
                            <input type="checkbox" name="attr_pentacle_of_protection" value="1" />
                            <div class="sheet-auto-expand">
                                <span name="attr_pentacle_of_protection_text"></span>
                                <textarea name="attr_pentacle_of_protection_text" readonly>
                                    The Pentacle of Protection is a useful defence for the demonologist. It must be drawn out with various substances on a hard surface before the Ritual of Summoning begins. The demonologist expends one Magic Point to activate it for the next hour. If the Pentacle’s power lapses, it turns to ash. It provides magical defence against hostile demons and cannot be used if the wrong demon materializes.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>The Ritual of Summoning</summary>
                            <input type="checkbox" class="demonologistcheckbox ritual" name="attr_ritual_of_summoning" value="1" />
                            <div class="demonologistroll ritual">
                                <div class="demonologistroll ritual_button_front">
                                    Perform The Ritual of Summoning 
                                    <button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} crafts a ritual to summon a Demon}} {{subtitle=Ritual of Summoning}} {{spellattackroll= [[2d10]]}} {{Vs= [[@{finalmagicalattack}-?{The Demon's Magical Defence|0}]] }} {{Money spent on the summoning= [[2d4*10]] Silver Florins}} {{If successful, the Demon will remain for= [[1d4]] hours}} {{The caster is drained= [[1d3]] Strength (manually input into Strength Misc Modifiers)}} {{The Demon's response to being summoned is= [[1d10]] 
                                    1 Aggressive and hostile; will attack immediately. 
                                    2-4 Antipathetic; will need a lot of convincing to do anything other than attack. 
                                    5-9 Surly; may serve, if offered a good deal. 
                                    10 Friendly.}}" name="roll_ritual"></button>
                                </div>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_ritual_of_summoning_text"></span>
                                <textarea name="attr_ritual_of_summoning_text" readonly>
                                    The Ritual of Summoning requires several rare components and takes fifteen minutes to perform. It involves making a Spell Attack Roll against the demon’s magical defence. The demonologist loses 1d3 Strength points due to the ritual. The demon remains for 1-4 hours unless the Ritual of Binding is used. The GM should prepare notes about the demon’s personality and quirks.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>Banishing a Demon</summary>
                            <input type="checkbox" class="demonologistcheckbox banish" name="attr_banishing_a_demon" value="1" />
                            <div class="demonologistroll banish">
                                Roll to Banish a Demon 
                                <button class="button twod10" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom2d10} {{title=@{character_name} tries to Banish a demon}} {{subtitle=Banishing a Demon}} {{spellattackroll= [[2d10]]}} {{Vs= [[@{finalmagicalattack}-?{Demon's Magical Defence|0}-?{Whose Demon?|My own, 0|Another's, 2}]] }}" name="roll_banish"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_banishing_a_demon_text"></span>
                                <textarea name="attr_banishing_a_demon_text" readonly>
                                    Banishing a demon requires chanting a mystic phrase for five Combat Rounds. The demonologist makes a Spell Attack Roll against the demon’s magical defence. Only one attempt at banishment can be made, and if it fails, other methods must be used. A penalty of -2 applies if banishing a demon summoned by someone else.
                                </textarea>
                            </div>
                        </details>
                    </div>
                    <div class="skillrow">
                        <details>
                            <summary>The Pact of the Dark Companion</summary>
                            <input type="checkbox" class="demonologistcheckbox pact" name="attr_pact_of_the_dark_companion" value="1" />
                            <div class="demonologistroll pact">
                                Roll to summon the Dark Companion 
                                <button class="button d20" type="roll" value="?{Choose roll type|Public roll,|GM and player,/w gm}&{template:custom} {{title=@{character_name} calls for their Dark Companion}} {{subtitle=Roll 1d100 under Target Number}} {{roll= [[1d100cs1cf100]]}} {{Vs= 20% }}" name="roll_pact"></button>
                            </div>
                            <div class="sheet-auto-expand">
                                <span name="attr_pact_of_the_dark_companion_text"></span>
                                <textarea name="attr_pact_of_the_dark_companion_text" readonly>
                                    After successfully bargaining with a demon, a demonologist can offer the Pact of the Dark Companion. This involves a permanent reduction of 1 Magic Point and 1 Health Point. The demonologist can call on the Dark Companion at any time, but it can only remain for up to twenty-one Combat Rounds in a single day. The Dark Companion must slay a sentient being each month, or it will end the Pact and seek to slay the demonologist.
                                </textarea>
                            </div>
                        </details>
                    </div>
                </details>
                </details>
            </div>
            <div class="customskills">
                <details>
                <summary><h2>Custom Special Abilities</h2></summary>
                    <fieldset class="repeating_customskills">
                        <span>Skill Name</span>
                        <input type="text" name="attr_special_ability_name" placeholder="Ability Name" />
                        <br>
                        <span>1 Rank</span><input type="checkbox" name="attr_special_ability_checkbox" value="1" />
                        <span>2 Ranks</span><input type="checkbox" name="attr_special_ability_checkbox" value="2" />
                        <span>3 Ranks</span><input type="checkbox" name="attr_special_ability_checkbox" value="3" />
                        <br>
                        <span>Description</span>
                        <div class="specialabilitydescription sheet-auto-expand">
                            <span name="attr_special_ability_description"></span>
                            <textarea name="attr_special_ability_description" placeholder="Description"></textarea>
                        </div>
                    </fieldset>
                </details>
            </div>
        </div>
            <input type="hidden" class="paths_toggle" name="attr_paths_toggle" value="0"/>
            <div class="pathscontainer">
                <span  >
                  <span>Path Taken</span>
                </span>
                <span>Name </span>
                <input class="sixteenlongtextinput" type="text" name="attr_path" value="None" />
                <br>
                <span>Description </span>
                <div class="sheet-auto-expand">
                    <span name="attr_pathdescription"></span>  
                    <textarea name="attr_pathdescription"></textarea>
                </div>
                </textarea>
            </div>
            <input type="hidden" class="secondaryskills_toggle" name="attr_secondaryskills_toggle" value="0"/>
            <div class="secondaryskillscontainer">
                <span>Secondary Skills</span>
                <fieldset class="repeating_secondaryskills">
                    <span>Skill</span>
                    <input class="sixteenlongtextinput" type="text" name="attr_secondaryskill" list="secondaryskill" value="None" />
                    <span>Level</span>
                    <select name="attr_secondaryskilllevel">
                        <option value="None" selected>(Pick One)</option>
                        <option value="Basic">Basic</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Advanced">Advanced</option>
                    </select>
                    <br>
                    <span>Description</span>
                    <br>
                    <div class="sheet-auto-expand">
                        <span name="attr_secondaryskilldescription"></span>  
                        <textarea name="attr_secondaryskilldescription"></textarea>
                    </div>
                </fieldset>
            </div>
        </div>
    <div class="languages">
        <div class="modlang">
            <span>Modern Languages</span>
            <fieldset class="repeating_modernlanguages">
                <span>Language</span>
                    <select name="attr_modernlanguage">
                        <option value="Blank" selected>(Pick One)</option>
                        <option value="Elleslandic">Elleslandic</option>
                        <option value="Visic">Visic</option>
                        <option value="Latter Mercanian">Latter Mercanian</option>
                        <option value="LCabbandari">Low Cabbandari</option>
                        <option value="HCabbandari">High Cabbandari</option>
                        <option value="Dakkandi">Dakkandi</option>
                        <option value="Algandarve">Algandarve</option>
                        <option value="Angate">Angate</option>
                        <option value="Beaulangue">Beaulangue</option>
                        <option value="Kurlish">Kurlish</option>
                        <option value="MEmphidian">Modern Emphidian</option>
                        <option value="Opalarian">Opalarian</option>
                        <option value="Nascerine">Nascerine</option>
                        <option value="Etyabeyely">Et'ya'be'yely</option>
                        <option value="Klav">Klav</option>
                        <option value="Unno">Unno</option>
                        <option value="Raukil">Raukil</option>
                        <option value="Tsutsuneng">Tsutsuneng</option>
                        <option value="Coradian">Coradian Trader's Argot</option>
                        <option value="Arcane">Arcane</option>
                    </select>
                <span>Fluency Level</span>
                    <select name="attr_modernfluency">
                        <option value="None" selected>(Pick One)</option>
                        <option value="Fluent">Fluent</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Basic">Basic</option>
                    </select>
                <span>Literate?</span>
                    <input type="checkbox" name="attr_modernliterate" value="1" />
                <span>Script</span>
                    <select name="attr_modernwriting">
                        <option value="None" selected>(Pick One)</option>
                        <option value="Classic">Classic</option>
                        <option value="Nikkar Runic">Nikkar Runic</option>
                        <option value="Emphidian">Emphidian</option>
                        <option value="Jezant">Jezant</option>
                        <option value="Majestic">Majestic</option>
                        <option value="Kitai Pictograms">Kitai Pictograms</option>
                    </select>
            </fieldset>
        </div>
        <div class="anclang">
            <span>Ancient Languages</span>
            <fieldset class="repeating_ancientlanguages">
                <span>Language</span>
                    <select name="attr_ancientlanguage">
                        <option value="None" selected>(Pick One)</option>
                        <option value="Bacchile">Bacchile</option>
                        <option value="Emphidian">Ancient Emphidian</option>
                        <option value="Old Mercanian">Old Mercanian</option>
                        <option value="Old Kurlish">Old Kurlish</option>
                        <option value="Kaikahuran">Ancient Kaikahuran</option>
                        <option value="Lughwyd">Lughwyd</option>
                    </select>
                <span>Fluency Level</span>
                    <select name="attr_ancientfluency">
                        <option value="None" selected>(Pick One)</option>
                        <option value="Fluent">Fluent</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Basic">Basic</option>
                    </select>
                <span>Literate?</span>
                    <input type="checkbox" name="attr_ancientliterate" value="1" />
                <span>Script</span>
                    <select name="attr_ancientwriting">
                        <option value="None" selected>(Pick One)</option>
                        <option value="Classic">Classic</option>
                        <option value="Nikkar Runic">Nikkar Runic</option>
                        <option value="Emphidian">Emphidian</option>
                        <option value="Jezant">Jezant</option>
                        <option value="Qemor Heiroglyphs">Qemor Heiroglyphs</option>
                        <option value="Kell">Kell</option>
                        <option value="Majestic">Majestic</option>
                        <option value="Kitai Pictograms">Kitai Pictograms</option>
                    </select>
            </fieldset>
        </div>
    </div>
    <div class="biographical">
        <div class="basicbio">
            <span>Physical and Biographical Details</span>
            <span>Gender</span>
                <input class="eightmidtextinput" name="attr_gender" type="text" value="None" /><br>
            <span>Age</span>
                <input class="fourshorttextinput" name="attr_age" type="number" value="0" /><br>
            <span>Height</span>
                <input class="fourshorttextinput" name="attr_height" type="text" value="None" /><br>
            <span>Build</span>
                <input class="sixteenlongtextinput" name="attr_build" type="text" value="None" /><br>
            <span>Eye Colour</span>
                <input class="eightmidtextinput" name="attr_eyes" type="text" value="None" /><br>
            <span>Hair Colour / Style</span>
                <input class="sixteenlongtextinput" name="attr_hair" type="text" value="None" /><br>
            <span>Origin Country</span>
                <input class="sixteenlongtextinput" name="attr_origin" type="text" value="None" /><br>
            <span>Family Background</span>
                <input class="sixteenlongtextinput" name="attr_familybackground" type="text" value="None" /><br>
            <span>Description</span>
            <div class="sheet-auto-expand">
                <span name="attr_description"></span>  
                <textarea name="attr_description" readonly placeholder="Enter description here..."></textarea>
            </div><br>
            <span>Biography</span>
            <div class="sheet-auto-expand">
                <span name="attr_biography"></span>  
                <textarea name="attr_biography" readonly placeholder="Enter biography here..."></textarea>
            </div>
        </div>
    </div>
    <div class="documentation">
        <h1>Settings</h1>
        <span>Berserk:</span><select title="Rule Option" name="attr_berserktoranged">
            <option value="0">Only applies to Melee (Core Rules Default)</option>
            <option value="1">Applies to Ranged and Melee</option>
        </select>
        <span>Stealth and Perception Dice Type:</span><select title="Rule Option" name="attr_steper_toggle">
            <option value="0" selected >Use 2d10 (default)</option>
            <option value="1">Use d20</option>
        </select>
        <span>Allow Ranged Weapons to be Magical:</span><select title="Rule Option" name="attr_ranged_magic_toggle">
            <option value="Enabled" selected >Ranged Weapons can be Magical (default)</option>
            <option value="Disabled">Ranged Weapons can not be Magical</option>
        </select>
        <span>Elementalist Raw Power</span><select title="Rule Option" name="attr_elementalist_raw_power_type">
            <option value="Core" selected >Core Rules (default)</option>
            <option value="PG">Player's Guide version</option>
            <option value="Both">Display both versions</option>
        </select>
        <span>Combat Guards</span><select title="Rule Option" name="attr_combat_guards_able">
            <option value="enabled" selected >Combat Guards are enabled (default)</option>
            <option value="disabled">Combat Guards are disabled</option>
        </select>
        <span>The Supremacy of the Sword</span><select title="Rule Option" name="attr_supremacy_able">
            <option value="enabled" selected >The Supremacy of the Sword skills are enabled (default)</option>
            <option value="disabled">The Supremacy of the Sword skills are disabled</option>
        </select>
        <span>Paths</span><select title="Rule Option" name="attr_paths_toggle">
            <option value="enabled" selected >Paths are enabled (default)</option>
            <option value="disabled">Paths skills are disabled</option>
        </select>
        <span>Secondary Skills</span><select title="Rule Option" name="attr_secondaryskills_toggle">
            <option value="enabled" selected >Secondary Skills are enabled (default)</option>
            <option value="disabled">Secondary Skills are disabled</option>
        </select>
        <span>Players Guide Spells</span><select title="Rule Option" name="attr_playerspells_toggle">
            <option value="enabled" selected >Players Guide Spells are available (default)</option>
            <option value="disabled">Players Guide Spells are unavailable</option>
        </select>
        <h1>Documentation</h1>
        <p>This character sheet includes material based on the Dragon Warriors setting, created by Dave Morris and Oliver Johnson, and used under the Serpent King Games Fan Policy. We are not permitted to charge for access to this content. This character sheet is endorsed, or officially approved by Serpent King Games. For more information about Dragon Warriors products and Serpent King Games, please visit <a href="http://www.serpentking.com">www.serpentking.com</a>.</p>
        <p>Serpent King Games expects you to use the Dragon Warriors setting responsibly and legally. This means avoiding associations with extreme graphic violence, explicit sexual content, hate speech against any real-world groups, or anything else that does not present Dragon Warriors in a positive light.</p>
        <p>If you have any questions about Dragon Warriors or the conditions of use for this character sheet, please email <a href="mailto:info@serpentking.com">info@serpentking.com</a>.</p>
        <p>Most images on this character sheet come directly from the Dragon Warriors books. The image representing Magic Points, named "effect," was created by ATOM and sourced from the Noun Project.</p>
        <p>A huge shoutout to Roll20 forums members <a href="https://app.roll20.net/users/157788/gigs">Gigs</a>, <a href="https://app.roll20.net/users/463088/vince">vÍnce</a>, and Scott, without whom this sheet would not have been built successfully.</p>
        <p><a href="https://app.roll20.net/users/653871/brendan-r">Brendan R (SouthernSkies)</a> and <a href="https://app.roll20.net/users/202381/norman">Norman</a>, who have been absolute champions at doing the serious playtest/debugging of version 2.0</p>
        <p>And most certainly not least, the brave group of adventurers who have been my primary playtesters: Gille, Hariot, Cador, Randos, Ulfthak, Argane, Ivon, and Kallister.</p>
        <span >Release Notes</span>
            <p>Ver 2.02</p>
        <ul>
            <li>Fixed more incorrectly placed readonly tags across the sheet</li>
            <li>Fixed high Psychic Talent score bonus to Magical Attack</li>
            <li>Fixed missing Psychic Fatigue check buttons</li>
            <li>Evasion and Magical Defence put into the Combat Factors summary at the top of the page for easier quick reference</li>
            <li>Guards moved out of the Magic container on the summary page</li>
            <li>Renamed "Character Modification" to "Character Builder". Made sure all information including magical attributes, profession and rank appear on this page so users do not have to flip pages to make and check changes.</li>
            <li>Various other UI, layout, and styling improvements</li>
        </ul>
        <p>Ver 2.01</p>
        <ul>
            <li>Demonologist Spells have been implemented</li>
            <li>Fixed errors in layout for Custom Classes - skills and abilities sections</li>
            <li>Removed "readonly" from Secondary Skills and Paths textboxes to allow for custom edits</li>
            <li>The Ammunition Repeating section event listner has been made more specific so that it does not overwrite custom data unless the Ammo type is changed</li>
            <li>Multiple buttons beside Stealth and Perception were confusing some users. I have made a toggle option, switching which button is visible, on the settings page.</li>
            <li>Armour penalties (from non-profession) were not being included in their relevent calculations, added the Javascript to support it properly</li>
            <li>Many of the AF3 armour options were incorrectly classified as AF4, this has now been fixed.</li>
            <li>Custom classes were not able to see spell lists, this has been corrected.</li>
            <li>Rearranged the front character sheet so that the most commonly used items are at the top - please send feedback, I can always change it back if nobody likes it</li>
            <li>Renamed the first two tabs to better reflect their purpose</li>
            <li>The level advancement math was totally wrong! I have adjusted the math so that it should be working properly now - please report any math errors (this is NOT my strong point).</li>
        </ul>
        <p>Ver 2.0</p>
        <ul>
            <li>Killed the 'Click to Update!' Button. The sheet now updates on change (Fair Warning: this may add lag to the sheet functions,this is the price of having a responsive sheet).</li>
            <li>Removed legacy code; the character sheet is now CSE compliant.</li>
            <li>Completely rewrote the JavaScript sheetworkers to add automation to nearly everything (and to clear out some old bugs that just wouldn't quit).</li>
            <li>Base scores:All base scores are now calculated for you. Input your Profession and Rank, and the rest is handled automatically. You can override defaults, but your changes may be lost if the sheet recalculates (This should only happen if you change the content of the Profession input, but no garuantees it won't bug another way).</li>
            <li>Custom professions can now be input, but will not auto-populate. All Profession's abilities and skills will remain visible and available to select for custom professions.</li>
            <li>Characteristic scores now properly modify all base scores, including Atk, Def, MAtk, MDef, Stealth, Percep, Eva, ABR, Dmg, Encumbrance.</li>
            <li>The experience field now automatically adjusts your rank.</li>
            <li>Increasing your rank will adjust all scores appropriately (including MaxHp and Magic Points), unless you are using a custom profession.</li>
            <li>Roll buttons for Base Characteristics and Starting HP can be hidden by a checkbox to help prevent accidental rerolls.</li>
            <li>Weapons, Ammo, and Armour now use datalists and self-populate on selection. Custom entries can still be added as long as they are named uniquely.</li>
            <li>Armour non-proficiency penalties now self-calculate based on your Profession. For Hunters, it takes the 'Soldier' skill into account.</li>
            <li>Equipping special ammo types adjusts scores and Attack score by an additional -1 for non-Hunter professions.</li>
            <li>Updated Wounds and Mana radio button logic: Clicking the first button a second time will clear it (first click sets the value to 1, second click sets it to 0).</li>
            <li>Added a numerical input box for users who find it difficult to track the number of radio buttons clicked/un-clicked.</li>
            <li>All skills known that modify stats should now apply those modifiers directly (if it is something tracked on the character sheet).</li>
            <li>Skills with no conditional modifiers only need to be selected from the relevant Profession list on the skills page.</li>
            <li>Some skills with conditional modifiers still need to be activated from the front of the sheet (as with the old sheet).</li>
            <li>Skills selected as 'known' populate a list on the front sheet for player quick reference.</li>
            <li>Added all spells (except, see above) from the Core book and Player's Guide to the sheet. All spells that have an associated roll, or effect, include a button to roll it.</li>
            <li>Added a 'settings' element to the Documentation page, you can now control the visibility of certain items and change certain rules with controls on the settings tab.</li>
        </ul>
        
        <span>Other Requested Functional Changes:</span>
        <ul>
            <li>Dice Roll buttons now better represent the kind of die they roll.</li>
            <li>Encumbrance calculation now considers only coins and items in the inventory, not weapons/ammo lists or the shield tick (add those items to your inventory list to have them counted).</li>
            <li>Encumbrance calculations can now handle fractions.</li>
            <li>The item location field now impacts encumbrance calculation; items listed in any location other than "On person" are excluded from encumbrance calculations.</li>
            <li>Moved magic attributes from the side of the Magic page to the top.</li>
            <li>Added a button beside Stealth/Perception to choose between rolling 1d20 or 2d10.</li>
            <li>Changed the Skills page to use a datalist for Secondary Skills, removing the old repeating table.</li>
            <li>Fixed spelling of "Armour Piercing".</li>
            <li>Added a Max HP Misc Modifiers input to help track temporary Maximum HP loss.</li>
        </ul>

        <p>Ver 1.2.4</p>
        <span>Token Integration and Radio Button Bug Fix</span>
        <ul>
            <li>Implemented new attributes: currenthp, currentmp, currentmpelementtwo, and currentmpelementthree for accurate representation of wounds and magic points on token bars.</li>
            <li>Corrected a bug requiring double clicks on wound/mp radio buttons to function properly.</li>
        </ul>
        
        <span>Layout Changes:</span>
        <ul>
            <li>Removed redundant magic point trackers from the Magic page, which interfered with the currentmp set of attributes.</li>
        </ul>
        
        <p>Ver 1.2.3</p>
        <span>Workaround to Address Lag Issue</span>
        <ul>
            <li>Streamlined Sheet Workers to reduce overall attribute calls. Added a "Click to Apply Changes" button to apply changes made to the sheet.</li>
            <li>Note: This solution is temporary; further optimization is needed.</li>
        </ul>
        
        <p>Ver 1.2.2</p>
        <span>Layout Fixes, Bug Fixes</span>
        <ul>
            <li>Fixed error preventing Precise Shot modifiers from being applied to rolls.</li>
            <li>Removed spinners from read-only boxes to avoid confusion.</li>
            <li>Moved base score inputs to the renamed "Base Scores" tab.</li>
            <li>Removed ABR/DMG bonus boxes from the front sheet; moved AF misc bonus to the AF section of the Inventory page.</li>
            <li>Opened base Magic Stats on the Magic page for all classes.</li>
            <li>Changed the tab name from "Skills" to "Path and Skills" and added a paths box.</li>
            <li>Added a classic DW picture to the front page to reduce spacing issues.</li>
            <li>Added a poison save roll button under health points.</li>
        </ul>
        
        <p>Ver 1.2.1</p>
        <span>Layout Changes, Bug Fixes, and Sheet Roll Updates</span>
        <ul>
            <li>Improved display using CSS Grid, removed redundant information.</li>
            <li>Revised "Combat" tab to "Miscellaneous Modifiers" for entering modifiers.</li>
            <li>All guard functions now controlled on the front page.</li>
            <li>Updated roll templates and fixed PFC sheet roll.</li>
            <li>Increased Max Wounds and Magic Points to 50 dots each.</li>
            <li>Removed API dependency for ESP and Premonition checks; suggested "Blind Roll" API for Pro Subscribers.</li>
        </ul>
        
        <p>Ver 1.2</p>
        <span>Total Overhaul Update</span>
        <ul>
            <li>Major layout changes and font style corrections.</li>
            <li>Added artworks and fixed issues with Elementalist MP sections and Mystic's Psychic Fatigue field.</li>
            <li>Added Combat page to track Attack and Defence scores.</li>
            <li>Changed button images and added wound counters.</li>
            <li>Added magic bonus section to weapons and shields, and ensured only one weapon's magic bonus applies at a time.</li>
            <li>Modified Armour Factor area and added basic game roll functions.</li>
        </ul>
        
        <p>Ver 1.1</p>
        <span>Bug Fixes and Feature Updates</span>
        <ul>
            <li>Improved error checking for HP, MP, and other stats.</li>
            <li>Added manual rolling options for skills and improved formula accuracy.</li>
        </ul>
        
        <p>Ver 1.0</p>
        <span>Initial Release</span>
        <ul>
            <li>First version of the Dragon Warriors character sheet.</li>
        </ul>
    </div>
</div>

<datalist id="profession">
<option value="Knight">Knight</option>
<option value="Barbarian">Barbarian</option>
<option value="Warlock">Warlock</option>
<option value="Assassin">Assassin</option>
<option value="Knave">Knave</option>
<option value="Hunter">Hunter</option>
<option value="Priest">Priest</option>
<option value="Mystic">Mystic</option>
<option value="Elementalist">Elementalist</option>
<option value="Demonologist">Demonologist</option>
<option value="Sorcerer">Sorcerer</option>
</datalist>            

<datalist id="meleeweapon">
<option value="Battleaxe" data-abr="d8" data-damage="6">
<option value="Cudgel" data-abr="d3" data-damage="3">
<option value="Dagger" data-abr="d4" data-damage="3">
<option value="Flail" data-abr="d6" data-damage="4">
<option value="Halberd" data-abr="d10" data-damage="5">
<option value="Mace" data-abr="d6" data-damage="4">
<option value="Morning star" data-abr="d6" data-damage="5">
<option value="Shortsword" data-abr="d8" data-damage="3">
<option value="Spear" data-abr="2d4" data-damage="4">
<option value="Staff" data-abr="d6" data-damage="3">
<option value="Sword" data-abr="d8" data-damage="4">
<option value="Two-handed sword" data-abr="d10" data-damage="5">
<option value="Unarmed combat" data-abr="d3" data-damage="2">
<option value="Footman’s Flail" data-abr="d6" data-damage="5">
<option value="Holy Water Sprinkler" data-abr="d6" data-damage="5">
<option value="Longsword" data-abr="2d4" data-damage="4">
<option value="Pollaxe" data-abr="d12" data-damage="4">
<option value="Scourge" data-abr="d2" data-damage="3">
<option value="War Axe" data-abr="d6" data-damage="5">
<option value="Warhammer" data-abr="d10" data-damage="3">
<option value="War Lance" data-abr="2d4" data-damage="6">
</datalist>

<datalist id="rangedweapon">
<option value="Arbalest" data-abr="d12" data-damage="5" data-short="50" data-medium="250" data-long="450" data-group="7">Arbalest</option>
<option value="Longbow" data-abr="d8" data-damage="4" data-short="50" data-medium="150" data-long="300" data-group="6">Longbow</option>
<option value="Bow" data-abr="d6" data-damage="4" data-short="50" data-medium="125" data-long="250" data-group="6">Bow</option>
<option value="Crossbow" data-abr="d10" data-damage="4" data-short="25" data-medium="75" data-long="250" data-group="7">Crossbow</option>
<option value="Dagger" data-abr="d3" data-damage="3" data-short="10" data-medium="20" data-long="25" data-group="2">Dagger</option>
<option value="Javelin" data-abr="d8" data-damage="4" data-short="15" data-medium="25" data-long="35" data-group="7">Javelin</option>
<option value="Rock" data-abr="d3" data-damage="2" data-short="10" data-medium="15" data-long="20" data-group="7">Rock</option>
<option value="Sling" data-abr="d6" data-damage="3" data-short="25" data-medium="75" data-long="100" data-group="7">Sling</option>
<option value="Throwing Spike" data-abr="d2" data-damage="2" data-short="10" data-medium="20" data-long="25" data-group="7">Throwing Spike</option>
</datalist>

<datalist id="ammotype">
<option value="Regular Ammunition " data-attack="0" data-abr="0" data-damage="0" data-specialeffect="">
<option value="Blunt Arrows" data-attack="-4" data-abr="-2" data-damage="-2" data-specialeffect="Non-lethal missile requiring a specially constructed padded arrowhead without any cutting edge. Cost to produce 6 arrows: 4 Florins"> </option>
<option value="Forked Arrows" data-attack="-2" data-abr="-1" data-damage="1" data-specialeffect="Flesh cutting missile requiring a specially forged wide bladed and multi-pronged arrowhead. Cost to produce 6 arrows: 8 Florins"> </option>
<option value="Bodkin Arrows" data-attack="-1" data-abr="1" data-damage="-1" data-specialeffect="Armour-piercing missile requiring a specially forged narrow hardened-steel arrowhead. Cost to produce 6 arrows: 6 Florins"> </option>
<option value="Fire Arrows" data-attack="-3" data-abr="-2" data-damage="0" data-specialeffect="Flammable missile requiring a specially constructed flammable cloth/steel arrowhead. Sets target alight on a successful hit, dealing a further 4HP damage per round until the fire is put out. Cost to produce 6 arrows: 4 Florins"> </option>
<option value="Wooden Arrows" data-attack="-2" data-abr="-1" data-damage="0" data-specialeffect="Has a simple fire-hardened point rather than steel. Can be made by a Hunter out in the wilderness without any cost"> </option>
<option value="Flint Arrows" data-attack="-1" data-abr="-1" data-damage="0" data-specialeffect="May be made by a Hunter in the wilderness using sharp minerals like obsidian. Requires more time to make than wooden arrows"> </option>
</datalist>

<datalist id="mastered_spell_list">
<option value="See Enchantment (Rank 1)">See Enchantment (Rank 1)</option>
<option value="Darksight (Rank 2)">Darksight (Rank 2)</option>
<option value="Allseeing Eye (Rank 3)">Allseeing Eye (Rank 3)</option>
<option value="Mind Cloak (Rank 4)">Mind Cloak (Rank 4)</option>
<option value="Clairvoyance (Rank 5)">Clairvoyance (Rank 5)</option>
<option value="Hidden Target (Rank 6)">Hidden Target (Rank 6)</option>
<option value="Telepathy (Rank 6)">Telepathy (Rank 6)</option>
<option value="Truthsense (Rank 7)">Truthsense (Rank 7)</option>
<option value="Assessment (Rank 7)">Assessment (Rank 7)</option>
</datalist>

<datalist id="armourtype">
<option value="None">None</option>
<option value="Quilted Jacket">Quilted Jacket</option>
<option value="Heavy Cloth Jacket">Heavy Cloth Jacket</option>
<option value="Gambeson">Gambeson</option>
<option value="Soft Leather Jacket">Soft Leather Jacket</option>
<option value="Padded Armour Coat">Padded Armour Coat</option>
<option value="Padded Armour">Padded Armour</option>
<option value="Thick Leather Jacket">Thick Leather Jacket</option>
<option value="Woven Cord Cuirass">Woven Cord Cuirass</option>
<option value="Boiled Leather Cuirass">Boiled Leather Cuirass</option>
<option value="Crown Jacket">Crown Jacket</option>
<option value="Ring Jacket">Ring Jacket</option>
<option value="Mail Vest">Mail Vest</option>
<option value="Mail Hauberk">Mail Hauberk</option>
<option value="Scale Hauberk">Scale Hauberk</option>
<option value="Jezeraint">Jezeraint</option>
<option value="Lamellar">Lamellar</option>
<option value="Brigandine">Brigandine</option>
<option value="Plate Cuirass">Plate Cuirass</option>
<option value="Mail Armour">Mail Armour</option>
<option value="Scale Coat">Scale Coat</option>
<option value="Double Mail Hauberk">Double Mail Hauberk</option>
<option value="Plate Armour">Plate Armour</option>
<option value="Banded Armour">Banded Armour</option>
<option value="Other">Other</option>
</datalist>

<datalist id="itemlocation">
<option value="On person">
<option value="On Horse">
<option value="On cart/carriage">
<option value="In storage">
</datalist>

<datalist id="terraintype">
<option>Open</option>
<option>Forest</option>
<option>Hills</option>
<option>Swamp</option>
<option>Arctic</option>
<option>Desert</option>
</datalist>       

<datalist id="secondaryskill">
<option value="Artist">Artist</option>
<option value="Blacksmith">Blacksmith</option>
<option value="Builder">Builder</option>
<option value="Cavalry">Cavalry</option>
<option value="Farmer">Farmer</option>
<option value="Goldsmith">Goldsmith</option>
<option value="Leatherworker">Leatherworker</option>
<option value="Merchant">Merchant</option>
<option value="Miner">Miner</option>
<option value="Priest">Priest</option>
<option value="Sailor">Sailor</option>
<option value="Shipwright">Shipwright</option>
<option value="Survival">Survival</option>
<option value="Tailor">Tailor</option>
</datalist>

<rolltemplate class="sheet-rolltemplate-custom">
    <div class="sheet-container sheet-color-{{color}}">
        <div class="sheet-header">
            {{#title}}<div class="sheet-title"><span>{{title}}</span></div>{{/title}}
            {{#subtitle}}<div class="sheet-subtitle"><span>{{subtitle}}</span></div>{{/subtitle}}
        </div>
    <div class="sheet-content">
      {{#roll}}<div class="sheet-key"><span>Roll</span></div>{{/roll}}
      {{#roll}}<div class="sheet-value"><span>{{roll}}</span></div>{{/roll}}
      {{#Vs}}<div class="sheet-key"><span>Vs</span></div>{{/Vs}}
      {{#Vs}}<div class="sheet-value"><span>{{Vs}}</span></div>{{/Vs}}
      {{#allprops() title subtitle roll Vs desc}}
        <div class="sheet-key"><span>{{key}}</span></div>
        <div class="sheet-value"><span>{{value}}</span></div>
      {{/allprops() title subtitle roll Vs desc}}
      {{#desc}}<div class="sheet-desc"><span>{{desc}}</span></div>{{/desc}}
    </div>
  </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-custom2d10">
    <div class="sheet-container sheet-color-{{color}}">
        <div class="sheet-header">
            {{#title}}<div class="sheet-title"><span>{{title}}</span></div>{{/title}}
            {{#subtitle}}<div class="sheet-subtitle"><span>{{subtitle}}</span></div>{{/subtitle}}
        </div>
        
        <div class="sheet-content">
            {{#spellattackroll}}<div class="sheet-key"><span>Spell Attack Roll</span></div>{{/spellattackroll}}
            {{#roll}}<div class="sheet-key"><span>Roll Result</span></div>{{/roll}}
          
            {{#spellattackroll}}
                <div class="sheet-value"><span>{{spellattackroll}}</span></div>
                {{#rollTotal() spellattackroll 20}}<div class="sheet-fumble"><span class="sheet-fumble">Critical Failure!</span></div>{{/rollTotal() spellattackroll 20}}
                {{#rollTotal() spellattackroll 2}}<div class="sheet-crit"><span class="sheet-crit">Critical Success!</span></div>{{/rollTotal() spellattackroll 2}}
            {{/spellattackroll}}
            
            {{#roll}}
                <div class="sheet-value"><span>{{roll}}</span></div>
                {{#rollTotal() roll 2}}<div class="sheet-crit"><span class="sheet-crit">Critical Success!</span></div>{{/rollTotal() roll 2}}
                {{#rollTotal() roll 20}}<div class="sheet-fumble"><span class="sheet-fumble">Critical Failure!</span></div>{{/rollTotal() roll 20}}
            {{/roll}}
            
            {{#^rollTotal() spellattackroll 20}}
                {{#speedvsevasion}}<div class="sheet-key"><span>Speed vs Evasion</span></div>{{/speedvsevasion}}
                {{#speedvsevasion}}<div class="sheet-value"><span>{{speedvsevasion}}</span></div>{{/speedvsevasion}}
                {{#magicalattackvsmagicaldefence}}<div class="sheet-key"><span>Magical Attack vs Magical Defence</span></div>{{/magicalattackvsmagicaldefence}}
                {{#magicalattackvsmagicaldefence}}<div class="sheet-value"><span>{{magicalattackvsmagicaldefence}}</span></div>{{/magicalattackvsmagicaldefence}}
                {{#range}}<div class="sheet-key"><span>Range</span></div>{{/range}}
                {{#range}}<div class="sheet-key"><span>{{range}}</span></div>{{/range}}
                {{#damage}}<div class="sheet-key"><span>Damage</span></div>{{/damage}}
                {{#damage}}<div class="sheet-value"><span>{{damage}}</span></div>{{/damage}}
            {{/^rollTotal() spellattackroll 20}}

            {{#^rollTotal() roll 20}}
                {{#Vs}}<div class="sheet-key"><span>Target number to roll, or less</span></div>{{/Vs}}
                {{#Vs}}<div class="sheet-value"><span>{{Vs}}</span></div>{{/Vs}}
            {{/^rollTotal() roll 20}}
        
                    {{#allprops() title subtitle desc spellattackroll speedvsevasion magicalattackvsmagicaldefence range damage roll Vs}}
                        <div class="sheet-key">{{key}}</div>
                        <div class="sheet-value">{{value}}</div>
                    {{/allprops() title subtitle desc spellattackroll speedvsevasion magicalattackvsmagicaldefence range damage roll Vs}}
                    {{#desc}}<div class="sheet-desc"><span>{{desc}}</span></div>{{/desc}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-customd20">
    <div class="sheet-container sheet-color-{{color}}">
        <div class="sheet-header">
            {{#title}}<div class="sheet-title"><span>{{title}}</span></div>{{/title}}
            {{#subtitle}}<div class="sheet-subtitle"><span>{{subtitle}}</span></div>{{/subtitle}}
        </div>
        <div class="sheet-content">
            {{#attackroll}}<div class="sheet-key"><span>Attack Roll</span></div>{{/attackroll}}
            {{#attackroll}}<div class="sheet-value"><span>{{attackroll}}</span></div>{{/attackroll}}
            
            {{#roll}}<div class="sheet-key"><span>Roll Result</span></div>{{/roll}}
            {{#roll}}<div class="sheet-value"><span>{{roll}}</span></div>{{/roll}}
            
            {{#rollWasFumble() roll}}<div class="sheet-fumble"><span class="sheet-fumble">Critical Failure!</span></div>{{/rollWasFumble() roll}}
            {{#rollWasFumble() attackroll}}<div class="sheet-fumble"><span class="sheet-fumble">Critical Miss!</span></div>{{/rollWasFumble() attackroll}}

            {{#^rollWasFumble() roll}}
                {{#rollWasCrit() roll}}<div class="sheet-crit"><span class="sheet-crit">Critical Success!</span></div>{{/rollWasCrit() roll}}
                {{#^rollWasCrit() roll}}
                    {{#Vs}}<div class="sheet-key"><span>Target number to roll, or less</span></div>{{/Vs}}
                    {{#Vs}}<div class="sheet-value"><span>{{Vs}}</span></div>{{/Vs}}
                {{/^rollWasCrit() roll}}
            {{/^rollWasFumble() roll}}
            
            {{#^rollWasFumble() attackroll}}
                {{#attackvsdefence}}<div class="sheet-key"><span>Attack vs Defence</span></div>{{/attackvsdefence}}
                {{#attackvsdefence}}<div class="sheet-value"><span>{{attackvsdefence}}</span></div>{{/attackvsdefence}}
                {{#attackvsranged}}<div class="sheet-key"><span>Attack vs Ranged Adjustments</span></div>{{/attackvsranged}}
                {{#attackvsranged}}<div class="sheet-value"><span>{{attackvsranged}}</span></div>{{/attackvsranged}}
                {{#abr}}
                    {{#^rollWasCrit() attackroll}}
                        <div class="sheet-key"><span>Armour Bypass Roll</span></div>
                        <div class="sheet-value"><span>{{abr}}</span></div>
                    {{/^rollWasCrit() attackroll}}
                {{/abr}}          
                {{#rollWasCrit() attackroll}}<div class="sheet-crit"><span class="sheet-crit">Critical Hit!<br>The attack automatically bypasses armour.</span></div>{{/rollWasCrit() attackroll}}
                {{#Damage}}
                    <div class="sheet-key"><span>Damage</span></div>
                    <div class="sheet-value"><span>{{Damage}}</span></div>
                {{/Damage}}
            {{/^rollWasFumble() attackroll}}
            
            {{#^rollWasFumble() attackroll}}
                {{#^rollWasFumble() roll}}
                    {{#allprops() title subtitle desc roll attackroll attackvsranged attackvsdefence Vs abr Damage}}
                        <div class="sheet-key">{{key}}</div>
                        <div class="sheet-value">{{value}}</div>
                    {{/allprops() title subtitle desc roll attackroll attackvsranged attackvsdefence Vs abr Damage}}            
                    {{#desc}}<div class="sheet-desc"><span>{{desc}}</span></div>{{/desc}}
                {{/^rollWasFumble() roll}}
            {{/^rollWasFumble() attackroll}}
        </div>
  </div>
</rolltemplate>

<script type="text/worker">

    const buttonlist = ["character","inventory","basescores","magic","skills","languages","biographical","documentation"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });
    
    const repeatingSum = (destinations, section, fields, ...extras) => {
        const isNumber = value => parseFloat(value).toString() === value.toString();
        const isOption = value => [...checks.valid, ...checks.roundtypes].includes(value);
        const isRounding = value => checks.roundtypes.includes(value);
        const isFraction = value => value.includes('/') && !(value.includes(',') || value.includes('|'));
        const getTrimmed = value => value.toLowerCase().replace(/\s/g, '');
        const getRounded = (type, value, pow) => (Math[type](value * Math.pow(10, pow)) / Math.pow(10, pow)).toFixed(Math.max(0, pow));
        const getFraction = (value) => /*{ console.log(`value: ${value}`); */
            parseInt(value.split('/')[0]) / parseInt(value.split('/')[1]);
        const getMultiplier = (value, rounding = 1) => 'undefined' === typeof value ? (rounding ? 0: 1) : (
            isNumber(value) ? parseFloat(value) : (isFraction(value) ? getFraction(value) : value));
        if (!Array.isArray(destinations)) destinations = [getTrimmed(destinations)];
        if (!Array.isArray(fields)) fields = [getTrimmed(fields)];
        const fields_trimmed = fields.map(field => getTrimmed(field).split(':')[0]);
        const subfields = fields_trimmed.slice(0,destinations.length);
        const checks = { valid: ['multiplier'], roundtypes: ['ceil', 'round', 'floor'] };
        let properties = {attributes: {}, options: {}};
        extras.forEach(extra => {
            const [prop, v] = getTrimmed(extra).split(':');
            const multiplier_maybe = getMultiplier(v, isRounding(prop));
            const obj = isNumber(multiplier_maybe) ? subfields.reduce((obj,field) => {
                obj[field] = multiplier_maybe;
                return obj;
            },{}) : multiplier_maybe.split(',').reduce((obj, item) => {
                const [stat, value] = item.split('|');
                const multiplier = getMultiplier(value, isRounding(prop));
                obj[stat] = multiplier;
                return obj;
            }, {});
            properties[isOption(prop) ? 'options' : 'attributes'][prop] = obj;
        });
        getSectionIDs(`repeating_${section}`, idArray => {
            const attrArray = idArray.reduce((m, id) => [...m, ...(fields_trimmed.map(field => `repeating_${section}_${id}_${field}`))], []);
            getAttrs([...attrArray, ...Object.keys(properties.attributes)], v => {
                const getValue = (section, id, field) => v[`repeating_${section}_${id}_${field}`] === 'on' ? 1 : parseFloat(v[`repeating_${section}_${id}_${field}`]) || 0;
                const commonMultipliers = (fields.length <= destinations.length) ? [] : fields.splice(destinations.length, fields.length - destinations.length);
                const output = destinations.reduce((obj, destination, index) => {
                    let sumTotal = idArray.reduce((total, id) => total + getValue(section, id, fields_trimmed[index]) * commonMultipliers.reduce((subtotal, mult) => subtotal * ((!mult.includes(':') || mult.split(':')[1].split(',').includes(fields_trimmed[index])) ? getValue(section, id, mult.split(':')[0]) : 1), 1), 0);
                    sumTotal *= (properties.options.hasOwnProperty('multiplier') && Object.keys(properties.options.multiplier).includes(fields_trimmed[index])) ? (parseFloat(properties.options.multiplier[fields_trimmed[index]]) || 0): 1;
                    sumTotal += Object.entries(properties.attributes).reduce((total, [key, value]) => 
                        total += (value.hasOwnProperty(fields_trimmed[index]) ? parseFloat(v[key] || 0) * (parseFloat(value[fields_trimmed[index]]) || 1): 0) , 0);
                    checks.roundtypes.forEach(type => {
                        if (properties.options.hasOwnProperty(type)) {
                            if (Object.keys(properties.options[type]).includes(fields_trimmed[index])) {
                                sumTotal = getRounded(type, sumTotal, (+properties.options[type][fields_trimmed[index]] || 0));
                            } else if (properties.options[type] == '0' || !isNaN(+properties.options[type] || 'x') ) {
                                sumTotal = getRounded(type, sumTotal, +properties.options[type]);
                            } 
                        } 
                    });
                    obj[destination] = sumTotal;
                    return obj;
                }, {});
                setAttrs(output);
            }); 
        }); 
    };  
    
on("change:xp", function() {
    getAttrs(['xp', 'rank'], function(values) {
        let xp = parseInt(values.xp) || 0; // Default xp to 0 if not provided
        let rank = 1; // Initialize rank to 1

        // Determine rank based on experience points
        if (xp >= 650) {
            // Calculate rank beyond 9th
            rank = 9 + Math.floor((xp - 650) / 250);
        } else if (xp >= 450) {
            rank = 8;
        } else if (xp >= 300) {
            rank = 7;
        } else if (xp >= 200) {
            rank = 6;
        } else if (xp >= 130) {
            rank = 5;
        } else if (xp >= 90) {
            rank = 4;
        } else if (xp >= 60) {
            rank = 3;
        } else if (xp >= 30) {
            rank = 2;
        }

        // Set attributes for rank
        setAttrs({
            rank: rank
        });
    });
});

on("change:profession change:rank", function() {
    // Retrieve profession and rank values
    getAttrs(['profession', 'rank'], function(values) {
        let profession = values.profession || "Unknown";
        let rank = parseInt(values.rank) || 1; // Default rank to 1 if not provided

        // List of valid professions from the datalist
        const validProfessions = ["Knight", "Barbarian", "Warlock", "Assassin", "Knave", "Elementalist", "Hunter", "Priest", "Mystic", "Demonologist", "Sorcerer"];
        
        // Check if the profession is valid
        if (!validProfessions.includes(profession)) {
            return; // Exit the function if profession is not in the valid list
        }

        // Define base values based on profession
        let baseAttack = 0;
        let baseDefence = 0;
        let baseMagicalAttack = 0;
        let baseMagicalDefence = 0;
        let baseEvasion = 0;
        let baseStealth = 0;
        let basePerception = 0;

        // Determine base values based on profession
        if (profession === "Knight") {
            baseAttack = 13;
            baseDefence = 7;
            baseMagicalAttack = 0;
            baseMagicalDefence = 3;
            baseEvasion = 4;
            baseStealth = 13;
            basePerception = 5;
        } else if (profession === "Barbarian") {
            baseAttack = 14;
            baseDefence = 6;
            baseMagicalAttack = 0;
            baseMagicalDefence = 3;
            baseEvasion = 5;
            baseStealth = 13;
            basePerception = 5;
        } else if (profession === "Sorcerer") {
            baseAttack = 11;
            baseDefence = 5;
            baseMagicalAttack = 15;
            baseMagicalDefence = 5;
            baseEvasion = 3;
            baseStealth = 13;
            basePerception = 5;
        } else if (profession === "Mystic") {
            baseAttack = 12;
            baseDefence = 6;
            baseMagicalAttack = 14;
            baseMagicalDefence = 4;
            baseEvasion = 3;
            baseStealth = 14;
            basePerception = 6;
        } else if (profession === "Elementalist") {
            baseAttack = 11;
            baseDefence = 5;
            baseMagicalAttack = 15;
            baseMagicalDefence = 5;
            baseEvasion = 3;
            baseStealth = 13;
            basePerception = 5;
        } else if (profession === "Warlock") {
            baseAttack = 12;
            baseDefence = 5;
            baseMagicalAttack = 12;
            baseMagicalDefence = 4;
            baseEvasion = 3;
            baseStealth = 13;
            basePerception = 5;
        } else if (profession === "Assassin") {
            baseAttack = 13;
            baseDefence = 5;
            baseMagicalAttack = 0;
            baseMagicalDefence = 3;
            baseEvasion = 5;
            baseStealth = 18;
            basePerception = 8;
        } else if (profession === "Knave") {
            baseAttack = 11;
            baseDefence = 5;
            baseMagicalAttack = 0;
            baseMagicalDefence = 3;
            baseEvasion = 5;
            baseStealth = 14;
            basePerception = 8;
        } else if (profession === "Hunter") {
            baseAttack = 13;
            baseDefence = 6;
            baseMagicalAttack = 0;
            baseMagicalDefence = 3;
            baseEvasion = 5;
            baseStealth = 16;
            basePerception = 8;
        } else if (profession === "Priest") {
            baseAttack = 11;
            baseDefence = 6;
            baseMagicalAttack = 0;
            baseMagicalDefence = 6;
            baseEvasion = 3;
            baseStealth = 12;
            basePerception = 6;
        } else if (profession === "Demonologist") {
            baseAttack = 11;
            baseDefence = 5;
            baseMagicalAttack = 15;
            baseMagicalDefence = 5;
            baseEvasion = 3;
            baseStealth = 13;
            basePerception = 5;
        }

        // Calculate rank-based increases
        let attackIncrease = 0;
        let defenceIncrease = 0;
        let magicalAttackIncrease = 0;
        let magicalDefenceIncrease = 0;
        let evasionIncrease = 0;
        let stealthIncrease = 0;
        let perceptionIncrease = 0;

        if (profession === "Assassin") {
            attackIncrease = Math.max(0, rank - 1);
            defenceIncrease = Math.max(0, Math.floor((rank -1) / 2));
            magicalDefenceIncrease = Math.max(0, rank - 1);
            evasionIncrease = Math.max(0, Math.floor((rank - 1) / 4));
            stealthIncrease = Math.max(0, rank - 1);
            perceptionIncrease = Math.max(0, rank - 1);
        } else if (profession === "Barbarian") {
            attackIncrease = Math.max(0, rank - 1);
            defenceIncrease = Math.max(0, rank - 1);
            magicalDefenceIncrease = Math.max(0, rank - 1);
            evasionIncrease = Math.max(0, Math.floor((rank - 1) / 4));
            stealthIncrease = Math.max(0, Math.floor((rank -1) / 2));
            perceptionIncrease = Math.max(0, Math.floor((rank -1) / 2));
        } else if (profession === "Knight") {
            attackIncrease = Math.max(0, rank - 1);
            defenceIncrease = Math.max(0, rank - 1);
            magicalDefenceIncrease = Math.max(0, rank - 1);
            evasionIncrease = Math.max(0, Math.floor((rank - 1) / 4));
            perceptionIncrease = Math.max(0, Math.floor((rank -1) / 2));
            stealthIncrease = Math.max(0, Math.floor((rank - 1) / 3));
        } else if (profession === "Elementalist") {
            attackIncrease = Math.max(0, Math.floor((rank - 1) / 3));
            defenceIncrease = Math.max(0, Math.floor((rank - 1) / 3));
            magicalAttackIncrease = Math.max(0, rank - 1) + Math.min(1, Math.max(0, Math.floor(rank / 7))) + Math.min(1, Math.max(0, Math.floor(rank / 12)));
            magicalDefenceIncrease = Math.max(0, rank - 1) + Math.min(1, Math.max(0, Math.floor(rank / 7))) + Math.min(1, Math.max(0, Math.floor(rank / 12)));
            evasionIncrease = Math.max(0, Math.floor((rank - 1) / 4));
            stealthIncrease = Math.max(0, Math.floor((rank - 1) / 3));
            perceptionIncrease = Math.max(0, Math.floor((rank - 1) / 3));
        } else if (profession === "Mystic") {
            attackIncrease = Math.max(0, Math.floor((rank - 1) / 2));
            defenceIncrease = Math.max(0, Math.floor((rank - 1) / 2));
            magicalAttackIncrease = Math.max(0, rank - 1);
            magicalDefenceIncrease = Math.max(0, rank - 1) + Math.min(1, Math.max(0, Math.floor(rank / 7))) + Math.min(1, Math.max(0, Math.floor(rank / 12)));            
            evasionIncrease = Math.max(0, Math.floor((rank - 1) / 4));
            stealthIncrease = Math.max(0, Math.floor((rank - 1) / 3));
            perceptionIncrease = Math.max(0, rank - 1);
        } else if (profession === "Sorcerer") {
            attackIncrease = Math.max(0, Math.floor((rank - 1) / 3));
            defenceIncrease = Math.max(0, Math.floor((rank - 1) / 3));
            magicalAttackIncrease = Math.max(0, rank - 1) + Math.min(1, Math.max(0, Math.floor(rank / 7))) + Math.min(1, Math.max(0, Math.floor(rank / 12)));
            magicalDefenceIncrease = Math.max(0, rank - 1) + Math.min(1, Math.max(0, Math.floor(rank / 7))) + Math.min(1, Math.max(0, Math.floor(rank / 12)));
            evasionIncrease = Math.max(0, Math.floor((rank - 1) / 4));
            stealthIncrease = Math.max(0, Math.floor((rank - 1) / 3));
            perceptionIncrease = Math.max(0, Math.floor((rank - 1) / 3));
        } else if (profession === "Warlock") {
            attackIncrease = Math.max(0, rank - 1);
            defenceIncrease = Math.max(0, rank - 1);
            magicalAttackIncrease = Math.max(0, rank - 1);
            magicalDefenceIncrease = Math.max(0, rank - 1);
            evasionIncrease = Math.max(0, Math.floor((rank - 1) / 4));
            stealthIncrease = Math.max(0, Math.floor((rank - 1) / 3));
            perceptionIncrease = Math.max(0, Math.floor((rank - 1) / 3));
        } else if (profession === "Knave") {
            attackIncrease = Math.max(0, rank - 1);
            defenceIncrease = Math.max(0, Math.floor((rank - 1) / 2));
            magicalDefenceIncrease = Math.max(0, rank - 1);
            evasionIncrease = Math.max(0, Math.floor((rank - 1) / 4));
            stealthIncrease = Math.max(0, rank - 1);
            perceptionIncrease = Math.max(0, rank - 1);
        } else if (profession === "Hunter") {
            attackIncrease = Math.max(0, rank - 1);
            defenceIncrease = Math.max(0, Math.floor((rank - 1) / 2));
            magicalDefenceIncrease = Math.max(0, rank - 1);
            evasionIncrease = Math.max(0, Math.floor((rank - 1) / 4));
            stealthIncrease = Math.max(0, rank - 1);
            perceptionIncrease = Math.max(0, rank - 1);
        } else if (profession === "Priest") {
            attackIncrease = Math.max(0, Math.floor((rank - 1) / 2));
            defenceIncrease = Math.max(0, Math.floor((rank - 1) / 2));
            magicalDefenceIncrease = Math.max(0, rank - 1) + Math.min(1, Math.max(0, Math.floor(rank / 7))) + Math.min(1, Math.max(0, Math.floor(rank / 12)));
            evasionIncrease = Math.max(0, Math.floor((rank - 1) / 4));
            stealthIncrease = Math.max(0, Math.floor((rank - 1) / 3));
            perceptionIncrease = Math.max(0, rank - 1);;
        } else if (profession === "Demonologist") {
            attackIncrease = Math.max(0, Math.floor((rank - 1) / 3));
            defenceIncrease = Math.max(0, Math.floor((rank - 1) / 3));
            magicalAttackIncrease = Math.max(0, rank - 1);
            magicalDefenceIncrease = Math.max(0, rank - 1);
            evasionIncrease = Math.max(0, Math.floor((rank - 1) / 4));
            stealthIncrease = Math.max(0, Math.floor((rank - 1) / 3));
            perceptionIncrease = Math.max(0, Math.floor((rank - 1) / 3));
        }

        // Calculate final values
        let finalAttack = baseAttack + attackIncrease;
        let finalDefence = baseDefence + defenceIncrease;
        let finalMagicalAttack = baseMagicalAttack + magicalAttackIncrease;
        let finalMagicalDefence = baseMagicalDefence + magicalDefenceIncrease;
        let finalEvasion = baseEvasion + evasionIncrease;
        let finalStealth = baseStealth + stealthIncrease;
        let finalPerception = basePerception + perceptionIncrease;

        // Set final attribute values
        setAttrs({
            attack: finalAttack,
            defence: finalDefence,
            magicalattack: finalMagicalAttack,
            magicaldefence: finalMagicalDefence,
            evasion: finalEvasion,
            stealth: finalStealth,
            perception: finalPerception
        });
    });
});

on("change:profession change:rank change:maxhp_mod change:base_maxhp", function() {
    // Retrieve necessary attributes
    getAttrs(['profession', 'rank', 'maxhp', 'previousRank', 'maxhp_mod', 'base_maxhp'], function(values) {
        let profession = values.profession || "Unknown";
        let rank = parseInt(values.rank) || 1;
        let maxHP = parseInt(values.maxhp) || 1;
        let previousRank = parseInt(values.previousRank) || 1;
        let maxHP_Mod = parseInt(values.maxhp_mod) || 0;
        let baseMaxHP = parseInt(values.base_maxhp) || 1; // Retrieve base max HP

        // Define base HP increases based on profession
        let hpIncreaseCurrentRank = 0;
        let hpIncreasePreviousRank = 0;

        // Calculate HP increase for the current rank
        switch (profession) {
            case "Knight":
            case "Hunter": 
                hpIncreaseCurrentRank = rank;
                break;
            case "Barbarian":
                hpIncreaseCurrentRank = rank * 2;
                break;
            case "Sorcerer": 
            case "Mystic": 
            case "Elementalist": 
            case "Warlock": 
            case "Assassin": 
            case "Knave": 
            case "Priest": 
            case "Demonologist": 
                hpIncreaseCurrentRank = Math.floor(rank / 2);
                break;
        }

        // Calculate HP increase for the previous rank (using the same logic)
        switch (profession) {
            case "Knight":
            case "Hunter": 
                hpIncreasePreviousRank = previousRank;
                break;
            case "Barbarian":
                hpIncreasePreviousRank = previousRank * 2;
                break;
            case "Sorcerer": 
            case "Mystic": 
            case "Elementalist": 
            case "Warlock": 
            case "Assassin": 
            case "Knave": 
            case "Priest": 
            case "Demonologist": 
                hpIncreasePreviousRank = Math.floor(previousRank / 2);
                break;
        }

        // Calculate new max HP using the base value
        let newMaxHP = baseMaxHP + hpIncreaseCurrentRank - hpIncreasePreviousRank + maxHP_Mod; 

        // Update attributes
        setAttrs({
            maxhp: newMaxHP,
            previousRank: rank,
            base_maxhp: baseMaxHP  // Store the base max HP if it's not already set
        });
    });
});

on("change:rank change:profession", function() {
    getAttrs(['profession', 'rank'], function(values) {
        let profession = values.profession || "Unknown";
        let rank = parseInt(values.rank) || 1;
        let maxmp = 0;
        let twomaxmp = 0;
        let threemaxmp = 0;

        switch (profession.toLowerCase()) {
            case "sorcerer":
                maxmp = 4 + (rank > 1 ? (rank - 1) * 4 : 0);
                break;
            case "elementalist":
                maxmp = 3 * rank;
                twomaxmp = rank;
                threemaxmp = rank;
                break;
            case "warlock":
                maxmp = 2 * rank;
                break;
            case "demonologist":
                maxmp = 4 + (rank > 1 ? (rank - 1) * 3 : 0);
                break;
            default:
                maxmp = 0;
                break;
        }

        // Set attributes for max magic points
        setAttrs({
            maxmp: maxmp,
            twomaxmp: twomaxmp, // Secondary pool for Elementalist
            threemaxmp: threemaxmp // Tertiary pool for Elementalist
        });
    });
});

on('change:strength change:enhancement change:enhancement_neg change:cutting_power_of_the_mind_toggle change:udjat change:might change:reflexes change:intelligence change:psychictalent change:looks change:miscstrength change:miscreflexes change:miscintelligence change:miscpsychictalent change:misclooks change:adepthood change:favoured_language', function() {
    getAttrs([
        'strength', 'reflexes', 'intelligence', 'psychictalent', 'looks',
        'miscstrength', 'miscreflexes', 'miscintelligence', 'miscpsychictalent', 'enhancement', 'enhancement_neg',
        'misclooks', 'adepthood', 'favoured_language', 'might', 'udjat', 'cutting_power_of_the_mind_toggle'
    ], function(values) {
        // Parse attributes with default value of 0 if not present
        let str = parseInt(values.strength, 10) || 0;
        let ref = parseInt(values.reflexes, 10) || 0;
        let int = parseInt(values.intelligence, 10) || 0;
        let psy = parseInt(values.psychictalent, 10) || 0;
        let lks = parseInt(values.looks, 10) || 0;
        let mstr = parseInt(values.miscstrength, 10) || 0;
        let mref = parseInt(values.miscreflexes, 10) || 0;
        let mint = parseInt(values.miscintelligence, 10) || 0;
        let mpsy = parseInt(values.miscpsychictalent, 10) || 0;
        let mlks = parseInt(values.misclooks, 10) || 0;
        let adepthood = values.adepthood === "1";
        let favoured_language = values.favoured_language === "1";
        let might = values.might === "1";
        let udjat = values.udjat === "1";
        let cuttingpower = values.cutting_power_of_the_mind_toggle === "1";
        let Enhancement = values.enhancement === "1";
        let enhancementNeg = parseInt(values.enhancement_neg, 10) || 0;
      
        // Calculate base values
        let fstr = str + mstr;
        let fref = ref + mref;
        let fint = int + mint;
        let fpsy = psy + mpsy;
        let flks = lks + mlks;

        // Apply Adepthood rule
        if (adepthood) {
            fref = 18;
            fpsy = 18;
        }

        // Apply Might rule
        if (might) {
            if (fstr <= 15) {
                fstr = 16;  // If strength is 15 or less, increase it to 16
            } else if (fstr >= 16 && fstr <= 18) {
                fstr = 19;  // If strength is between 16 and 18, increase it to 19
            }
        }
        // Apply cutting_power_of_the_mind rule
        if (cuttingpower) {
            if (fint <= 17) {
                fint = 18;
            } else if (fint == 18) {
                fint = 19;
            }
        }

        //Apply Enhancement rule
        if (Enhancement) {
            if (fstr <= 17) {
                fstr = 18;
            } else if (fstr == 18) {
                fstr = 19;
            } else {
                fstr = fstr;
            }
            if (fref <= 17) {
                fref = 18;
            } else if (fref == 18) {
                fref = 19;
            } else {
                fref = fref;
            }
        }

        //Apply Enhancement Negative modifiers
        if (enhancementNeg < 0) {
            fstr += enhancementNeg;
            fref += enhancementNeg;
        }

        // Apply Udjat rule
        if (udjat) {
            // For fint (intelligence)
            if (fint <= 15) {
                fint = 16;  // If intelligence is 15 or less, increase it to 16
            } else if (fint >= 16 && fint <= 18) {
                fint = 19;  // If intelligence is between 16 and 18, increase it to 19
            }

            // For fpsy (psychic talent)
            if (fpsy <= 15) {
                fpsy = 16;  // If psychic talent is 15 or less, increase it to 16
            } else if (fpsy >= 16 && fpsy <= 18) {
                fpsy = 19;  // If psychic talent is between 16 and 18, increase it to 19
            }
        }

        // Apply Favoured Language bonus
        if (favoured_language) {
            flks += 1;
        }


        
        // Update final attributes
        setAttrs({
            finalstrength: fstr,
            finalreflexes: fref,
            finalintelligence: fint,
            finalpsychictalent: fpsy,
            finallooks: flks
        });
    });
});

// Handle changes to the Secondary Skill Name
on('change:repeating_secondaryskills:secondaryskill', function(event) {
    if (event.sourceType === 'sheetworker') return;

    const skillDescriptions = {
        "Artist": "At basic level, a character can draw simple, childlike pictures and maps. At intermediate level, she can draw quick, expert sketches of whatever is in front of her. At advanced level, a character's drawing skills increase, and she can also be capable of working with other media such as stone or wood.",
        "Blacksmith": "At basic level, a character can act as a blacksmith’s assistant, shovelling coal and occasionally being permitted to swing a large hammer (under careful instruction). At intermediate level, he can make nails, ploughs, simple knives and tools, and horseshoes, as well as shoe a horse. At advanced level, he can forge (non-magical) weapons and armour.",
        "Builder": "At basic level, a character can make a simple overnight shelter of branches or reeds. At intermediate level, he can make a house of wattle and daub, or a simple hut of wood. At advanced level, he can build in stone, including making complex structures such as churches or castles.",
        "Cavalry": "At basic level, a character can mount a trained horse (perhaps with some assistance) and ride it along a road or track, in the daytime while at a walk; she can also muck out a stable. At intermediate level, she can also ride at an amble, trot, canter, or gallop, and jump a horse over small obstacles; groom and feed a horse; and set up a saddle, bit, bridle, and other gear appropriately. She can also lead a group of horses and riders at an amble or trot, even if some of the riders only have basic skill. At the advanced level, given time, she can catch, break, and train a wild horse. The Advanced level also allows her to ride a trained warhorse into battle and have it fight under her control. For PCs, advanced riding is solely the domain of Knights, Barbarians, and Warlocks. It is not possible to learn this level of control outside of these professions as a PC. NPCs without professions can learn the Advanced level of Cavalry as though it were any other skill.",
        "Farmer": "At basic level, a character can dig a ditch or hole, and feed and water animals. At intermediate level, she can also milk cows, shear sheep, catch chickens, and sow and reap all kinds of crops. At advanced level, she can treat simple, common ailments in farm animals, build and repair fences and gates, evaluate the optimal farming potential of a plot of land, make cheese, butter, and cream, and plan simple crop rotation.",
        "Goldsmith": "At basic level, a character can act as a goldsmith’s assistant, shovelling coal and occasionally being permitted to tend crucibles of molten metal (under careful instruction). At intermediate level, she can work with semi-precious metals to make simple jewellery and decorative items. At advanced level, she can work with gold and silver, too, and set gems into her pieces.",
        "Leatherworker": "At basic level, a character can make simple repairs to leatherwork, using either needle and thread, or rivets. At intermediate level, she can make simple leather goods such as pouches, holders, or bags, assuming she has plenty of leather and other materials. At advanced level, she can make leather clothing and armour, as well as tanning any hides she may have acquired.",
        "Merchant": "At basic level, a character knows the typical prices and availabilities of the weapons, armour, and other goods listed in the main rulebook, as well as being able to count and do basic mathematics; addition and subtraction, so long as the sums involved are no more than double figures. At intermediate level, she can do advanced mathematics, including accounting and calculating interest on loans; she can evaluate the worth of any non-magical goods, including taking into account their condition and age, and their different values at retail, wholesale, second-hand, etc.; and she can negotiate a 5% discount on all purchases. At advanced level, her discount increases to 10%, and she can run a successful business as a money-lender or a merchant, and can evaluate the worth (in Florins) of magical items, so long as she knows their precise properties and capabilities.",
        "Miner": "At basic level, a character can dig clay out of a riverbed and identify common stone types. At intermediate level, she can mine for various kinds of stone, and (under instruction), ore, and have a good sense of direction underground. At advanced level, she can safely prop up mine tunnels, identify ores and veins by sight, and plan and carry out undermining of enemy fortifications.",
        "Priest": "At basic level, a character knows the Commandments and a couple of standard prayers. At intermediate level, she can lead a basic religious service—including officiating at births, marriages, and deaths—and knows many prayers, with a reasonable knowledge of the tales of the True Faith. At advanced level, she can officiate at all religious rituals, debate fine theological points, and create excellent illuminated manuscripts (in any language she can write) by copying existing ones.",
        "Sailor": "At basic level, a character can row a small boat in calm waters without significant risk of capsizing. At intermediate level, he can also carry out all the shipboard tasks of a professional sailor, including casting off, rowing as part of a team, gauging depth, predicting the weather (at sea, only, 60% chance to predict the weather for the next 8 hours), dropping and weighing anchor, towing, knots and ropework, operating sails, and simple sewing. At advanced level, his weather prediction chance increases to 85%, and he can navigate, pilot a ship around any ports and seas he knows well, and captain ships of any size.",
        "Shipwright": "At basic level, a character can make a simple raft, given suitable tools and materials. At intermediate level, she can build small riverboats or coracles, assist an advanced shipwright in building a larger ship, and repair minor damage at sea. At advanced level, she can build, repair, maintain, and overhaul full-sized ships of all kinds.",
        "Survival": "At basic level, a character can gather suitable firewood, and start and maintain a campfire in good weather. At intermediate level, she can start and maintain a fire in poor weather, as well as gathering plant foods and setting simple snares and traps to catch small animals, and, if near water, fishing. At advanced level, she can track, skin, and prep prey animals and humans (as per the Track talent), as well as being able to train and command hunting animals (other than horses) such as hounds and falcons.",
        "Tailor": "At basic level, a character can make simple repairs to clothing, if he has a needle and thread. At intermediate level, he can make simple, non-fitted clothing. At advanced level, he can make more complex clothing, fabric armour, uniforms, and even banners."
    };

    const skillName = event.newValue;
    const description = skillDescriptions[skillName] || ''; // Set description or leave blank for custom skills
    const repeatingId = event.sourceAttribute.split('_')[2];

    setAttrs({
        [`repeating_secondaryskills_${repeatingId}_secondaryskilldescription`]: description
    });
});

on("clicked:repeating_meleeweapons:equippedmeleewep", function(eventInfo) {
    // Get the row ID of the clicked button
    const rowId = eventInfo.triggerName.split('_')[2];    

    getSectionIDs('repeating_meleeweapons', function(ids) {
        const output = {}; // Initialize 'output' here

        ids.forEach(function(id) {
            output[`repeating_meleeweapons_${id}_hide`] = (id == rowId) ? 1 : 0;
        });

        // Define the fields to retrieve from the current row
        const fields = [
            `repeating_meleeweapons_${rowId}_meleeweaponname`,
            `repeating_meleeweapons_${rowId}_meleeweapon`,
            `repeating_meleeweapons_${rowId}_magicmeleeweaponbonus`,
            `repeating_meleeweapons_${rowId}_meleeabr`,
            `repeating_meleeweapons_${rowId}_meleedamage`,
            `repeating_meleeweapons_${rowId}_meleeothereffects`
        ];

        // Get the attributes of the current row
        getAttrs(fields, function(values) {
            // Add the equipped weapon attributes to the existing 'output' object
            output.equippedmeleeweaponname = values[`repeating_meleeweapons_${rowId}_meleeweaponname`] || "Unnamed";
            output.equippedmeleeweapontype = values[`repeating_meleeweapons_${rowId}_meleeweapon`] || "";
            output.equippedmeleeweaponmagicbonus = parseInt(values[`repeating_meleeweapons_${rowId}_magicmeleeweaponbonus`]) || 0;
            output.equippedmeleeweaponabr = values[`repeating_meleeweapons_${rowId}_meleeabr`] || "0d0";
            output.equippedmeleeweapondamage = values[`repeating_meleeweapons_${rowId}_meleedamage`] || "0";
            output.equippedmeleeweaponother = values[`repeating_meleeweapons_${rowId}_meleeothereffects`] || "No other effects";

            setAttrs(output); 
        });
    });
});

on('change:unarmed_combat change:oak_fists change:repeating_meleeweapons', function(event) {
    getSectionIDs('repeating_meleeweapons', function(ids) {
        const id = event.sourceAttribute.split('_')[2];

        // Retrieve attributes and ensure unarmed_combat and oak_fists are set to 0 if unchecked
        getAttrs(['unarmed_combat', 'oak_fists', event.sourceAttribute], function(v) {
            let weaponName = v[`repeating_meleeweapons_${id}_meleeweapon`] || '';
            let unarmed_combatActive = parseInt(v['unarmed_combat']) || 0;
            let oak_fistsActive = parseInt(v['oak_fists']) || 0;

            // Ensure unarmed_combat is set to 0 if unchecked
            if (v['unarmed_combat'] !== "1") {
                setAttrs({ unarmed_combat: "0" });
                unarmed_combatActive = 0;
            }

            // Ensure oak_fists is set to 0 if unchecked
            if (v['oak_fists'] !== "1") {
                setAttrs({ oak_fists: "0" });
                oak_fistsActive = 0;
            }

            // Initialize weapon options
            const weaponOptions = {
                "Battleaxe": {abr: "d8", damage: "6", warlockweapongroupmelee: 5},
                "Cudgel": {abr: "d3", damage: "3", warlockweapongroupmelee: 8},
                "Dagger": {abr: "d4", damage: "3", warlockweapongroupmelee: 2},
                "Flail": {abr: "d6", damage: "4", warlockweapongroupmelee: 1},
                "Halberd": {abr: "d10", damage: "5", warlockweapongroupmelee: 3},
                "Mace": {abr: "d6", damage: "4", warlockweapongroupmelee: 1},
                "Morning star": {abr: "d6", damage: "5", warlockweapongroupmelee: 1},
                "Shortsword": {abr: "d8", damage: "3", warlockweapongroupmelee: 2},
                "Spear": {abr: "2d4", damage: "4", warlockweapongroupmelee: 3},
                "Staff": {abr: "d6", damage: "3", warlockweapongroupmelee: 3},
                "Sword": {abr: "d8", damage: "4", warlockweapongroupmelee: 2},
                "Two-handed sword": {abr: "d10", damage: "5", warlockweapongroupmelee: 4},
                "Unarmed combat": {abr: "d3", damage: "2", warlockweapongroupmelee: 8},
                "Footman’s Flail": {abr: "d6", damage: "5", warlockweapongroupmelee: 3},
                "Holy Water Sprinkler": {abr: "d6", damage: "5", warlockweapongroupmelee: 1},
                "Longsword": {abr: "2d4", damage: "4", warlockweapongroupmelee: 4},
                "Pollaxe": {abr: "d12", damage: "4", warlockweapongroupmelee: 3},
                "Scourge": {abr: "d2", damage: "3", warlockweapongroupmelee: 3},
                "War Axe": {abr: "d6", damage: "5", warlockweapongroupmelee: 5},
                "Warhammer": {abr: "d10", damage: "3", warlockweapongroupmelee: 5},
                "War Lance": {abr: "2d4", damage: "6", warlockweapongroupmelee: 3},
            };
            
            // Override if Unarmed Combat or Oak Fists is selected and active
            if ((weaponName === 'Unarmed combat' && unarmed_combatActive === 1) || (weaponName === 'Unarmed combat' && oak_fistsActive === 1)) {
                weaponOptions[weaponName] = {abr: "d6", damage: "3", warlockweapongroupmelee: 8, ismaingauchedefenceweapon: 0};
            }
            
            // Apply the abr, damage, warlockweapongroupmelee, and ismaingauchedefenceweapon dynamically based on the weapon
            if (weaponOptions[weaponName]) {
                const { abr, damage, warlockweapongroupmelee, ismaingauchedefenceweapon } = weaponOptions[weaponName];
                setAttrs({
                    [`repeating_meleeweapons_${id}_meleeabr`]: abr,
                    [`repeating_meleeweapons_${id}_meleedamage`]: damage,
                    [`repeating_meleeweapons_${id}_warlockweapongroupmelee`]: warlockweapongroupmelee,
                    [`repeating_meleeweapons_${id}_ismaingauchedefenceweapon`]: ismaingauchedefenceweapon
                });
            }
        });
    });
});

on("clicked:repeating_rangedweapons:equippedrangedwep", function(eventInfo) {
  // Get the row ID of the clicked button
  const rowId = eventInfo.triggerName.split('_')[2]; 

  getSectionIDs('repeating_rangedweapons', function(ids) {
    const output = {}; // Initialize 'output' here

    ids.forEach(function(id) {
      output[`repeating_rangedweapons_${id}_hide`] = (id == rowId) ? 1 : 0;
    });

    // Define the fields to retrieve from the current row
    const fields = [
      `repeating_rangedweapons_${rowId}_rangedweapon_name`,
      `repeating_rangedweapons_${rowId}_rangedweapon`,
      `repeating_rangedweapons_${rowId}_magicrangedweaponbonus`,
      `repeating_rangedweapons_${rowId}_rangedabr`,
      `repeating_rangedweapons_${rowId}_rangeddamage`,
      `repeating_rangedweapons_${rowId}_weaponshortrange`,
      `repeating_rangedweapons_${rowId}_weaponmediumrange`,
      `repeating_rangedweapons_${rowId}_weaponlongrange`
    ];

    // Get the attributes of the current row
    getAttrs(fields, function(values) {
      // Add the equipped weapon attributes to the existing 'output' object
      output.equippedrangedweaponname = values[`repeating_rangedweapons_${rowId}_rangedweapon_name`] || "Unnamed";
      output.equippedrangedweapontype = values[`repeating_rangedweapons_${rowId}_rangedweapon`] || "";
      output.equippedrangedweaponmagicbonus = values[`repeating_rangedweapons_${rowId}_magicrangedweaponbonus`] || 0;
      output.equippedrangedweaponabr = values[`repeating_rangedweapons_${rowId}_rangedabr`] || "0d0";
      output.equippedrangedweapondamage = values[`repeating_rangedweapons_${rowId}_rangeddamage`] || 0;
      output.equippedrangedweaponshortrange = values[`repeating_rangedweapons_${rowId}_weaponshortrange`] || 0;
      output.equippedrangedweaponmediumrange = values[`repeating_rangedweapons_${rowId}_weaponmediumrange`] || 0;
      output.equippedrangedweaponlongrange = values[`repeating_rangedweapons_${rowId}_weaponlongrange`] || 0;

      // Set the output attributes
      setAttrs(output);
    }); 
  });
});

on('change:repeating_rangedweapons', function(event) {
    if (event.sourceType === 'sheetworker') return;

    const weaponOptions = {
        "Arbalest": {abr: "d12", damage: "5", short: "50", medium: "250", long: "450", group: 7},
        "Longbow": {abr: "d8", damage: "4", short: "50", medium: "150", long: "300", group: 6},
        "Bow": {abr: "d6", damage: "4", short: "50", medium: "125", long: "250", group: 6},
        "Crossbow": {abr: "d10", damage: "4", short: "25", medium: "75", long: "250", group: 7},
        "Dagger": {abr: "d3", damage: "3", short: "10", medium: "20", long: "25", group: 2},
        "Javelin": {abr: "d8", damage: "4", short: "15", medium: "25", long: "35", group: 7},
        "Rock": {abr: "d3", damage: "2", short: "10", medium: "15", long: "20", group: 7},
        "Sling": {abr: "d6", damage: "3", short: "25", medium: "75", long: "100", group: 7},
        "Throwing Spike": {abr: "d2", damage: "2", short: "10", medium: "20", long: "25", group: 7}
    };

    const id = event.sourceAttribute.split('_')[2];
    const weaponName = event.newValue;

    if (weaponOptions[weaponName]) {
        const { abr, damage, short, medium, long, group } = weaponOptions[weaponName];
        setAttrs({
            [`repeating_rangedweapons_${id}_rangedabr`]: abr,
            [`repeating_rangedweapons_${id}_rangeddamage`]: damage,
            [`repeating_rangedweapons_${id}_weaponshortrange`]: short,
            [`repeating_rangedweapons_${id}_weaponmediumrange`]: medium,
            [`repeating_rangedweapons_${id}_weaponlongrange`]: long,
            [`repeating_rangedweapons_${id}_warlockweapongroupranged`]: group
        });
    }
});

// Function to calculate Armour Factor (AF) and penalties based on Armour Type and Profession
on("change:panoply_activate change:armourtype change:baseaf change:profession change:soldier change:magicafbonus change:miscaf change:armour_spell", function() {
    getAttrs(['baseaf', 'armourtype', 'profession', 'soldier', 'magicafbonus', 'miscaf', 'armour_spell','panoply_activate'], function(values) {
        let af = 0; 
        let attackPenalty = 0;
        let defencePenalty = 0;
        let totalaf = 0;
        let armourSpell = values.armour_spell === "1";
        let panoplyActivate = values.panoply_activate === "1";

        const profession = values.profession;
        const armourtype = values.armourtype;
        const soldierSkill = values.soldier === "1";
        const magicafbonus = parseInt(values.magicafbonus, 10) || 0;
        const miscaf = parseInt(values.miscaf, 10) || 0;

        // Determine Armour Factor (AF) - prioritize list values
        if (["None"].includes(armourtype)) {
            af = 0;
        } else if ([
            "Quilted Jacket",
            "Heavy Cloth Jacket",
            "Gambeson",
            "Soft Leather Jacket",
            "Padded Armour Coat",
            "Padded Armour",
            "Thick Leather Jacket",
            "Woven Cord Cuirass",
            "Boiled Leather Cuirass"
        ].includes(armourtype)) {
            af = 1;
        } else if ([
            "Crown Jacket",
            "Ring Jacket",
            "Mail Vest"
        ].includes(armourtype)) {
            af = 2;
        } else if ([
            "Mail Hauberk",
            "Scale Hauberk",
            "Jezeraint"
        ].includes(armourtype)) {
            af = 3;
        } else if ([
            "Lamellar",
            "Brigandine",
            "Plate Cuirass",
            "Mail Armour",
            "Scale Coat",
            "Double Mail Hauberk"
        ].includes(armourtype)) {
            af = 4;
        } else if ([
            "Plate Armour",
            "Banded Armour"
        ].includes(armourtype)) {
            af = 5;
        } else { 
            // If armourtype is NOT on the list, use the baseaf value
            af = parseInt(values.baseaf, 10) || 0; 
        }

        // ... (rest of your penalty calculations based on profession) ...

        // Calculate total Armour Factor (AF)
        totalaf = af + magicafbonus + miscaf; 

        // Calculate penalties based on profession
        if (profession === "Barbarian" || profession === "Warlock") {
            if (af === 5) {
                attackPenalty = 2;
                defencePenalty = 2;
            }
        } else if (["Assassin", "Knave", "Hunter", "Priest", "Mystic"].includes(profession)) {
            if (af === 4) {
                attackPenalty = 2;
                defencePenalty = 2;
            } else if (af === 5) {
                attackPenalty = 4;
                defencePenalty = 4;
            }
        } else if (["Elementalist", "Demonologist", "Sorcerer"].includes(profession)) {
            if (af === 3) {
                attackPenalty = 1;
                defencePenalty = 1;
            } else if (af === 4) {
                attackPenalty = 3;
                defencePenalty = 3;
            } else if (af === 5) {
                attackPenalty = 4;
                defencePenalty = 4;
            }
        }

        // Adjust penalties for Hunter with Soldier skill
        if (profession === "Hunter" && soldierSkill) {
            if (af === 5) {
                attackPenalty = 2;
                defencePenalty = 2;
            }
        }

        // Set penalties to 0 for Knight
        if (profession === "Knight") {
            attackPenalty = 0;
            defencePenalty = 0;
        }

        // Calculate total Armour Factor (AF)
        totalaf = af + magicafbonus + miscaf;

        if (panoplyActivate) {
            totalaf +=2;
        }

        if (armourSpell) {
            totalaf = 6;
        }

        // Set calculated attributes
        setAttrs({
            baseaf: af,
            armourattackpenalty: attackPenalty,
            armourdefencepenalty: defencePenalty,
            totalaf: totalaf
        });
    });
});

// Function to calculate encumbrance
on('change:repeating_inventoryitems change:gc change:sf change:cp change:strength', function() {
    getSectionIDs('repeating_inventoryitems', function(ids) {
        const fields = ['gc', 'sf', 'cp', 'strength'];

        // Include all inventory items' encumbrance values, quantities, and locations in the fields array
        ids.forEach(id => {
            fields.push(`repeating_inventoryitems_${id}_encumbranceValue`);
            fields.push(`repeating_inventoryitems_${id}_inventoryqty`);
            fields.push(`repeating_inventoryitems_${id}_itemLocation`);
        });

        getAttrs(fields, function(values) {
            // Parse values as floats to handle fractions
            const crowns = parseFloat(values.gc) || 0;
            const florins = parseFloat(values.sf) || 0;
            const pennies = parseFloat(values.cp) || 0;
            const strength = parseFloat(values.strength) || 0;

            let totalEncumbrance = 0;

            // Calculate encumbrance from inventory items
            ids.forEach(id => {
                const location = values[`repeating_inventoryitems_${id}_itemLocation`] || "On person";
                const encumbranceValue = parseFloat(values[`repeating_inventoryitems_${id}_encumbranceValue`]) || 0;
                const quantity = parseFloat(values[`repeating_inventoryitems_${id}_inventoryqty`]) || 0;

                // Only add to total encumbrance if the item is "On person"
                if (location === "On person") {
                    totalEncumbrance += encumbranceValue * quantity;
                }
            });

            // Calculate encumbrance from coins
            const totalCoins = crowns + florins + pennies;
            totalEncumbrance += Math.floor(totalCoins / 150);

            // Determine maximum encumbrance based on strength
            let maxEncumbrance = 0;
            if (strength >= 16) maxEncumbrance = 14;
            else if (strength >= 13) maxEncumbrance = 12;
            else if (strength >= 9) maxEncumbrance = 10;
            else if (strength >= 6) maxEncumbrance = 8;
            else if (strength >= 3) maxEncumbrance = 6;

            // Set the calculated values
            setAttrs({
                totalencumbrance: totalEncumbrance,
                maxenc: maxEncumbrance
            });
        });
    });
});

on("clicked:repeating_ammo:equippedammo", function(eventInfo) {
  // Get the row ID of the clicked button
  const rowId = eventInfo.triggerName.split('_')[2]; 

  getSectionIDs('repeating_ammo', function(ids) {
    const output = {}; // Initialize 'output' here

    ids.forEach(function(id) {
      output[`repeating_ammo_${id}_hide`] = (id == rowId) ? 1 : 0;
    });

    // Define the fields to retrieve from the current row
    const fields = [
      `repeating_ammo_${rowId}_ammotype_name`,
      `repeating_ammo_${rowId}_ammotype`,
      `repeating_ammo_${rowId}_ammoqty`,
      `repeating_ammo_${rowId}_magicammobonus`,
      `repeating_ammo_${rowId}_specialammomodifier`,
      `repeating_ammo_${rowId}_specialammoabrmodifier`,
      `repeating_ammo_${rowId}_specialammodmgmodifier`,
      `repeating_ammo_${rowId}_specialeffect`
    ];

    // Get the attributes of the current row
    getAttrs(fields, function(values) {
      // Add the equipped ammo attributes to the existing 'output' object
      output.equippedammoname = values[`repeating_ammo_${rowId}_ammotype_name`] || "";
      output.equippedammotype = values[`repeating_ammo_${rowId}_ammotype`] || "";
      output.equippedammoqty = values[`repeating_ammo_${rowId}_ammoqty`] || 0;
      output.equippedammomagicbonus = values[`repeating_ammo_${rowId}_magicammobonus`] || 0;
      output.equippedammoattackmod = values[`repeating_ammo_${rowId}_specialammomodifier`] || 0;
      output.equippedammoabrmod = values[`repeating_ammo_${rowId}_specialammoabrmodifier`] || 0;
      output.equippedammodmgmod = values[`repeating_ammo_${rowId}_specialammodmgmodifier`] || 0;
      output.equippedammospecialeffect = values[`repeating_ammo_${rowId}_specialeffect`] || "None";

      // Set the output attributes
      setAttrs(output);
    });
  });
});

on('change:repeating_ammo:ammotype change:profession', function(event) {
    if (event.sourceType === 'sheetworker') return;

    const id = (event.sourceAttribute.split('_')[2] || '').toLowerCase();
    const fieldName = event.sourceAttribute.split('_')[3];

    getAttrs([`profession`, `repeating_ammo_${id}_ammotype`], function(values) {
        const profession = values.profession || 'None';
        const ammoType = values[`repeating_ammo_${id}_ammotype`] || 'Regular Ammunition';

        const ammoOptions = {
            "Regular Ammunition": { attack: 0, abr: 0, damage: 0, specialeffects: "" },
            "Blunt Arrows": { 
                attack: -4, abr: -2, damage: -2, 
                specialeffect: "Non-lethal missile requiring a specially constructed padded arrowhead without any cutting edge. Cost to produce 6 arrows: 4 Florins"
            },
            "Forked Arrows": { 
                attack: -2, abr: -1, damage: 1, 
                specialeffect: "Flesh cutting missile requiring a specially forged wide bladed and multi-pronged arrowhead. Cost to produce 6 arrows: 8 Florins"
            },
            "Bodkin Arrows": { 
                attack: -1, abr: 1, damage: -1, 
                specialeffect: "Armour-piercing missile requiring a specially forged narrow hardened-steel arrowhead. Cost to produce 6 arrows: 6 Florins"
            },
            "Fire Arrows": { 
                attack: -3, abr: -2, damage: 0, 
                specialeffect: "Flammable missile requiring a specially constructed flammable cloth/steel arrowhead. Sets target alight on a successful hit, dealing a further 4HP damage per round until the fire is put out. Cost to produce 6 arrows: 4 Florins"
            },
            "Wooden Arrows": { 
                attack: -2, abr: -1, damage: 0, 
                specialeffect: "Has a simple fire-hardened point rather than steel. Can be made by a Hunter out in the wilderness without any cost"
            },
            "Flint Arrows": { 
                attack: -1, abr: -1, damage: 0, 
                specialeffect: "May be made by a Hunter in the wilderness using sharp minerals like obsidian. Requires more time to make than wooden arrows"
            }
        };

        let modifiers = ammoOptions[ammoType] || ammoOptions["Regular Ammunition"];

        if (profession === 'Hunter') {
            if (ammoType === "Blunt Arrows") {
                modifiers = { 
                    attack: -3, abr: -2, damage: -2, 
                    specialeffect: "Non-lethal missile requiring a specially constructed padded arrowhead without any cutting edge. Cost to produce 6 arrows: 4 Florins"
                };
            } else if (ammoType === "Forked Arrows") {
                modifiers = { 
                    attack: -1, abr: -1, damage: 1, 
                    specialeffect: "Flesh cutting missile requiring a specially forged wide bladed and multi-pronged arrowhead. Cost to produce 6 arrows: 8 Florins"
                };
            } else if (ammoType === "Bodkin Arrows") {
                modifiers = { 
                    attack: 0, abr: 1, damage: -1, 
                    specialeffect: "Armour-piercing missile requiring a specially forged narrow hardened-steel arrowhead. Cost to produce 6 arrows: 6 Florins"
                };
            } else if (ammoType === "Fire Arrows") {
                modifiers = { 
                    attack: -2, abr: -2, damage: 0, 
                    specialeffect: "Flammable missile requiring a specially constructed flammable cloth/steel arrowhead. Sets target alight on a successful hit, dealing a further 4HP damage per round until the fire is put out. Cost to produce 6 arrows: 4 Florins"
                };
            } else if (ammoType === "Wooden Arrows") {
                modifiers = { 
                    attack: -1, abr: -1, damage: 0, 
                    specialeffect: "Has a simple fire-hardened point rather than steel. Can be made by a Hunter out in the wilderness without any cost"
                };
            } else if (ammoType === "Flint Arrows") {
                modifiers = { 
                    attack: 0, abr: -1, damage: 0, 
                    specialeffect: "May be made by a Hunter in the wilderness using sharp minerals like obsidian. Requires more time to make than wooden arrows"
                };
            }
        }

        setAttrs({
            [`repeating_ammo_${id}_specialammomodifier`]: modifiers.attack,
            [`repeating_ammo_${id}_specialammoabrmodifier`]: modifiers.abr,
            [`repeating_ammo_${id}_specialammodmgmodifier`]: modifiers.damage,
            [`repeating_ammo_${id}_specialeffect`]: modifiers.specialeffect
        });
    });
});

const woundValues = Array.from({ length: 51 }, (_, i) => i.toString());
const wtwoundValues = ["0", "1", "2", "3"];

// Function to handle wound changes
function handleWoundChange(value) {
  on(`clicked:wound_${value}`, function() {
    getAttrs(["wtwound", "wound", "maxhp", "input_wounds"], function(v) {
      let currentWound = parseInt(v.wound) || 0;
      let wnd = parseInt(value);
      let wtwnd = parseInt(v.wtwound) || 0;
      let maxhp = parseInt(v.maxhp);
      let chp = maxhp - wnd - wtwnd;

      // Check if wounds were at or above maxhp and now become equal to or less than maxhp
      let wasAtOrAboveMaxhp = currentWound >= maxhp;
      let willBeAtOrBelowMaxhp = wnd <= maxhp;

      if (wasAtOrAboveMaxhp && willBeAtOrBelowMaxhp && wtwnd > 0) {
        // If conditions are met, reset wtwound to 0
        setAttrs({
          wound: wnd,
          wtwound: 0,
          currenthp: maxhp - wnd,
          currenthp_max: maxhp,
          input_wounds: wnd
        });
      } else if (currentWound === 0) {
        // If current value is 0, set wound to the clicked button's value
        setAttrs({
          wound: wnd,
          currenthp: chp,
          currenthp_max: maxhp,
          input_wounds: wnd
        });
      } else if (currentWound === 1 && value === "1") {
        // If current value is 1 and first button is clicked, reset to 0
        setAttrs({
          wound: 0,
          currenthp: maxhp - 0 - wtwnd,
          currenthp_max: maxhp,
          input_wounds: 0
        });
      } else {
        // If current value is greater than 1 or any other button is clicked
        setAttrs({
          wound: wnd,
          currenthp: chp,
          currenthp_max: maxhp,
          input_wounds: wnd
        });
      }
    });
  });
}

// Function to handle wound tolerance changes for wtwound
function handleWtWoundChange(value) {
  on(`clicked:wtwound_${value}`, function() {
    getAttrs(["wtwound", "maxhp", "wound", "input_wounds"], function(v) {
      let currentWtWound = parseInt(v.wtwound) || 0;
      let maxhp = parseInt(v.maxhp) || 0;
      let wtw = parseInt(value) || 0;
      let currentWound = parseInt(v.wound) || 0;

      if (currentWound < maxhp && wtw > 0) {
        // If wounds are less than maxhp and wtwound is filled
        setAttrs({
          wtwound: wtw,
          wound: maxhp, // Set wounds to maxhp
          currenthp: maxhp - maxhp - wtw, // Adjust for full wounds
          currenthp_max: maxhp,
          input_wounds: maxhp + wtw
        });
      } else if (currentWtWound === 0) {
        // If current value is 0, set wtwound to the clicked button's value
        setAttrs({
          wtwound: wtw,
          currenthp: maxhp - currentWound - wtw,
          currenthp_max: maxhp,
          input_wounds: currentWound + wtw
        });
      } else if (currentWtWound === 1 && value === "1") {
        // If current value is 1 and first button is clicked, reset to 0
        setAttrs({
          wtwound: 0,
          currenthp: maxhp - currentWound - 0,
          currenthp_max: maxhp,
          input_wounds: currentWound
        });
      } else {
        // If current value is greater than 1 or any other button is clicked
        setAttrs({
          wtwound: wtw,
          currenthp: maxhp - currentWound - wtw,
          currenthp_max: maxhp,
          input_wounds: currentWound + wtw
        });
      }
    });
  });
}

// Input field change handler
on("change:input_wounds", function(event) {
  let inputValue = parseInt(event.newValue) || 0;
  getAttrs(["wound", "wtwound", "maxhp"], function(v) {
    let currentWound = parseInt(v.wound) || 0;
    let currentWtWound = parseInt(v.wtwound) || 0;
    let maxhp = parseInt(v.maxhp) || 0;

    if (inputValue > maxhp + 3) {
      setAttrs({
        wound: maxhp,
        wtwound: inputValue - maxhp,
        currenthp: 0,
        currenthp_max: maxhp,
        input_wounds: inputValue
      });
    } else if (inputValue > maxhp) {
      setAttrs({
        wound: maxhp,
        wtwound: inputValue - maxhp,
        currenthp: maxhp - maxhp - (inputValue - maxhp),
        currenthp_max: maxhp,
        input_wounds: inputValue
      });
    } else {
      setAttrs({
        wound: inputValue,
        wtwound: 0,
        currenthp: maxhp - inputValue,
        currenthp_max: maxhp,
        input_wounds: inputValue
      });
    }
  });
});

// Wound Reset Handler
on("clicked:wound_reset", function() {
  getAttrs(["maxhp"], function(v) {
    const maxhp = parseInt(v.maxhp) || 0; // Default to 0 if maxhp is undefined
    setAttrs({
      wound: 0,
      wtwound: 0,
      currenthp: maxhp,
      input_wounds: 0
    });
  });
});

// Attach event listeners
woundValues.forEach(handleWoundChange);
wtwoundValues.forEach(handleWtWoundChange);

// Function to handle primary mana usage changes with enhanced logic
function handlePrimaryManaUsageChange(values) {
  values.forEach(function(value) {
    on(`clicked:manaused_${value}`, function() {
      getAttrs(["maxmp", "currentmp", "manaused"], function(v) {
        let used = parseInt(value);
        let maxMp = parseInt(v.maxmp);
        let currentMp = parseInt(v.currentmp) || maxMp; // Default to maxMp if currentMp is not defined
        
        // Implementing the new logic based on the current value
        if (currentMp === 0) {
          // If current value is 0, set mana to the clicked button's value
          currentMp = used;
        } else if (currentMp === 1 && value === "1") {
          // If current value is 1 and first button is clicked, reset to 0
          currentMp = 0;
          used = 0; // Update used value to 0
        } else {
          // If current value is greater than 1 or any other button is clicked
          currentMp = used;
        }

        setAttrs({
          currentmp: currentMp,
          maxmp: maxMp,
          manaused: used
        });
      });
    });
  });
}

// Define primary mana usage values
const primaryManaValues = Array.from({ length: 51 }, (_, i) => i.toString());

// Attach event listeners for primary mana usage
handlePrimaryManaUsageChange(primaryManaValues);

// Function to handle primary mana input changes
function handlePrimaryManaInputChange() {
  on(`change:inputmanaused`, function(event) {
    const used = parseInt(event.newValue) || 0;
    
    getAttrs(["maxmp"], function(v) {
      let maxMp = parseInt(v.maxmp) || 0;
      let currentMp = maxMp - used;

      setAttrs({
        currentmp: currentMp,
        manaused: used
      }, {silent: true});
    });
  });
}

// Attach event listener for primary mana input
handlePrimaryManaInputChange();

// Ensure input box is updated correctly when primary mana radio buttons change
function updatePrimaryInputBox() {
  on(`change:manaused`, function(event) {
    const used = parseInt(event.newValue) || 0;
    
    setAttrs({
      inputmanaused: used
    }, {silent: true});
  });
}

updatePrimaryInputBox();

// MP Reset Handler for primary mana
on("clicked:mp_reset", function() {
  getAttrs(["maxmp"], function(v) {
    const maxmp = parseInt(v.maxmp) || 0;
    setAttrs({
      manaused: 0,
      currentmp: maxmp,
      inputmanaused: 0
    });
  });
});

// Function to handle secondary mana usage changes with enhanced logic
function handleSecondaryManaUsageChange(values) {
  values.forEach(function(value) {
    on(`clicked:secmanaused_${value}`, function() {
      getAttrs(["twomaxmp", "secmanaused", "currentmpelementtwo"], function(v) {
        let used = parseInt(value);
        let maxMp = parseInt(v.twomaxmp);
        let currentMp = parseInt(v.currentmpelementtwo) || maxMp; // Default to maxMp if currentMp is not defined
        
        // Implementing the new logic based on the current value
        if (currentMp === 0) {
          // If current value is 0, set mana to the clicked button's value
          currentMp = used;
        } else if (currentMp === 1 && value === "1") {
          // If current value is 1 and first button is clicked, reset to 0
          currentMp = 0;
          used = 0; // Update used value to 0
        } else {
          // If current value is greater than 1 or any other button is clicked
          currentMp = used;
        }

        setAttrs({
          currentmpelementtwo: currentMp,
          twomaxmp: maxMp,
          secmanaused: used
        });
      });
    });
  });
}

// Define secondary mana usage values
const secondaryManaValues = Array.from({ length: 51 }, (_, i) => i.toString());

// Attach event listeners for secondary mana usage
handleSecondaryManaUsageChange(secondaryManaValues);

// Function to handle secondary mana input changes
function handleSecondaryManaInputChange() {
  on(`change:inputsecmanaused`, function(event) {
    const used = parseInt(event.newValue) || 0;
    
    getAttrs(["twomaxmp"], function(v) {
      let maxMp = parseInt(v.twomaxmp) || 0;
      let currentMp = maxMp - used;

      setAttrs({
        currentmpelementtwo: currentMp,
        secmanaused: used
      }, {silent: true});
    });
  });
}

// Attach event listener for secondary mana input
handleSecondaryManaInputChange();

// Ensure input box is updated correctly when secondary mana radio buttons change
function updateSecondaryInputBox() {
  on(`change:secmanaused`, function(event) {
    const used = parseInt(event.newValue) || 0;
    
    setAttrs({
      inputsecmanaused: used
    }, {silent: true});
  });
}

updateSecondaryInputBox();

// MP Reset Handler for secondary mana
on("clicked:secmp_reset", function() {
  getAttrs(["twomaxmp"], function(v) {
    const twomaxmp = parseInt(v.twomaxmp) || 0;
    setAttrs({
      secmanaused: 0,
      currentmpelementtwo: twomaxmp,
      inputsecmanaused: 0
    });
  });
});

// Function to handle tertiary mana usage changes with enhanced logic
function handleTertiaryManaUsageChange(values) {
  values.forEach(function(value) {
    on(`clicked:termanaused_${value}`, function() {
      getAttrs(["threemaxmp", "termanaused", "currentmpelementthree"], function(v) {
        let used = parseInt(value);
        let maxMp = parseInt(v.threemaxmp);
        let currentMp = parseInt(v.currentmpelementthree) || maxMp; // Default to maxMp if currentMp is not defined
        
        // Implementing the new logic based on the current value
        if (currentMp === 0) {
          // If current value is 0, set mana to the clicked button's value
          currentMp = used;
        } else if (currentMp === 1 && value === "1") {
          // If current value is 1 and first button is clicked, reset to 0
          currentMp = 0;
          used = 0; // Update used value to 0
        } else {
          // If current value is greater than 1 or any other button is clicked
          currentMp = used;
        }

        setAttrs({
          currentmpelementthree: currentMp,
          threemaxmp: maxMp,
          termanaused: used
        });
      });
    });
  });
}

// Define tertiary mana usage values
const tertiaryManaValues = Array.from({ length: 51 }, (_, i) => i.toString());

// Attach event listeners for tertiary mana usage
handleTertiaryManaUsageChange(tertiaryManaValues);

// Function to handle tertiary mana input changes
function handleTertiaryManaInputChange() {
  on(`change:inputtermanaused`, function(event) {
    const used = parseInt(event.newValue) || 0;
    
    getAttrs(["threemaxmp"], function(v) {
      let maxMp = parseInt(v.threemaxmp) || 0;
      let currentMp = maxMp - used;

      setAttrs({
        currentmpelementthree: currentMp,
        termanaused: used
      }, {silent: true});
    });
  });
}

// Attach event listener for tertiary mana input
handleTertiaryManaInputChange();

// Ensure input box is updated correctly when tertiary mana radio buttons change
function updateTertiaryInputBox() {
  on(`change:termanaused`, function(event) {
    const used = parseInt(event.newValue) || 0;
    
    setAttrs({
      inputtermanaused: used
    }, {silent: true});
  });
}

updateTertiaryInputBox();

// MP Reset Handler for tertiary mana
on("clicked:termp_reset", function() {
  getAttrs(["threemaxmp"], function(v) {
    const threemaxmp = parseInt(v.threemaxmp) || 0;
    setAttrs({
      termanaused: 0,
      currentmpelementthree: threemaxmp,
      inputtermanaused: 0
    });
  });
});

on('change:rank change:profession', function() {  
    getAttrs(['rank'], function(values) {
        const rank = parseInt(values.rank) || 0; // Default to 0 if rank is undefined
        const psycfatcheck = rank + 13;
        const esp = 5 + (rank * 3);
        const prem = 35 + (rank * 2);

        setAttrs({
            pfc: psycfatcheck,
            espchance: esp,
            premonitionchance: prem
        });
    });
});

on('change:guardcurrent change:guardcountered change:expert_parryselect', function() {
    getAttrs([
        'mattackmoda', 'mdefencemoda', 'rattackmoda', 'rdefencemoda', 'evasionmod', 'othermodifications', 
        'guardabrmodifier', 'guarddamagemodifier', 'shield', 'expert_parryselect', 'shieldsuccessvalue', 
        'shielddievalue', 'guardcountered', 'finalmeleeattack', 'finalmeleedefence', 'finalrangedattack', 
        'finalrangeddefence', 'evasion', 'guardcurrent'
    ], function(values) {
        const forms = {
            Hawk: {mattackmoda: 1, mdefencemoda: -2, rattackmoda: 1, rdefencemoda: -2, evasionmod: 0, guarddamagemodifier: 0, guardabrmodifier: 0, othermodifications: "If wielding a two-handed weapon: -1 Evasion and +1 Armour Penetration (please adjust manually)"},
            Snake: {mattackmoda: 1, mdefencemoda: -3, rattackmoda: 1, rdefencemoda: -3, evasionmod: 0, guarddamagemodifier: 0, guardabrmodifier: 0, othermodifications: "Critical Hits do +1 HP damage (please adjust manually)"},
            Wolf: {mattackmoda: 2, mdefencemoda: -3, rattackmoda: 2, rdefencemoda: -3, evasionmod: -1, guarddamagemodifier: 0, guardabrmodifier: 0, othermodifications: "None"},
            Bear: {mattackmoda: -2, mdefencemoda: 1, rattackmoda: -2, rdefencemoda: 1, evasionmod: 0, guarddamagemodifier: 0, guardabrmodifier: 0, othermodifications: "+1 additional Defence for each opponent beyond the first (Please enter in the Miscellaneous Modifiers Section manually)"},
            Cat: {mattackmoda: -2, mdefencemoda: 1, rattackmoda: -2, rdefencemoda: 1, evasionmod: 1, guarddamagemodifier: 0, guardabrmodifier: 0, othermodifications: "If using a shield: an additional -1 Attack and Shields block on a roll of 1 on 1d4 (these adjustments have been made for you)"},
            Crab: {mattackmoda: -2, mdefencemoda: 2, rattackmoda: -2, rdefencemoda: 2, evasionmod: 0, guarddamagemodifier: 0, guardabrmodifier: 0, othermodifications: "None"},
            Neutral: {mattackmoda: 0, mdefencemoda: 0, rattackmoda: 0, rdefencemoda: 0, evasionmod: 0, guarddamagemodifier: 0, guardabrmodifier: 0, othermodifications: "None"},
            Defensive: {mattackmoda: -2, mdefencemoda: 1, rattackmoda: -2, rdefencemoda: 1, evasionmod: 1, guarddamagemodifier: -1, guardabrmodifier: -1, othermodifications: "-1 Damage and -1 Armour Penetration (these adjustments have been made for you)"},
            Offensive: {mattackmoda: 1, mdefencemoda: -2, rattackmoda: 1, rdefencemoda: -2, evasionmod: -1, guarddamagemodifier: 0, guardabrmodifier: 0, othermodifications: "None"}
        };
         // Get current guard setting
        let gua = values.guardcurrent || 'Neutral';

        // Reset all guard modifiers to Neutral
        const neutralForm = forms.Neutral;
        setAttrs({
            'mattackmoda': neutralForm.mattackmoda,
            'mdefencemoda': neutralForm.mdefencemoda,
            'rattackmoda': neutralForm.rattackmoda,
            'rdefencemoda': neutralForm.rdefencemoda,
            'evasionmod': neutralForm.evasionmod,
            'guardabrmodifier': neutralForm.guardabrmodifier,
            'guarddamagemodifier': neutralForm.guarddamagemodifier,
            'othermodifications': neutralForm.othermodifications
        }, function() {
            // Now apply the new guard settings
            let output = forms[gua] || neutralForm;

            // Apply evasion modifiers
            output.evasionmod += parseInt(values.evasion) || 0;
            output.othermodifications = values.othermodifications || "None";

            // Adjust evasion modifier if the guard is countered
            if (values.guardcountered === '1') {
                if (['Hawk', 'Snake', 'Wolf'].includes(gua)) {
                    output.mattackmoda -= 2; // Apply additional -2 to `mattackmoda`
                    output.rattackmoda -= 2; // Apply additional -2 to `rattackmoda`
                } else if (['Crab', 'Cat', 'Bear'].includes(gua)) {
                    output.mdefencemoda -= 2; // Apply additional -2 to `mdefencemoda`
                    output.rdefencemoda -= 2; // Apply additional -2 to `rdefencemoda`
                }
            }
            
            // Shield settings
            let shielddie = values.shielddievalue || '1d6';
            let shieldsuccess = parseInt(values.shieldsuccessvalue) || 1;

            if (values.expert_parryselect === '1') {
                shielddie = '1d10';
                shieldsuccess = 2;
            } else if (gua === "Cat" && parseInt(values.shield) === 1) {
                shielddie = '1d4';
                shieldsuccess = 1;
            }

            output.shielddievalue = shielddie;    
            output.shieldsuccessvalue = shieldsuccess;

            // Apply the new guard settings
            setAttrs(output);
        });
    });
});

on('change:weaponskillselect change:weapon1 change:weapon2 change:weapon3 change:equippedammoabrmod change:equippedammodmgmod change:master_bowmanselect change:finalstrength change:miscabrmelee change:miscdamagemelee change:miscabrranged change:miscdamageranged change:equippedmeleeweaponmagicbonus change:equippedrangedweaponmagicbonus change:equippedammomagicbonus change:bloodrageselect change:guarddamagemodifier change:guardabrmodifier change:armour_piercing change:deathvowselect change:penetratingshotselect change:penetrating_shot change:cutting_power_of_the_mind_toggle', function(eventinfo) {
    getAttrs([
        'weaponskillselect', 'weapon1', 'weapon2', 'weapon3',
        'miscabrmelee', 'miscdamagemelee', 'miscabrranged', 'miscdamageranged',
        'equippedmeleeweaponmagicbonus', 'equippedrangedweaponmagicbonus', 'equippedammomagicbonus',
        'bloodrageselect', 'guarddamagemodifier', 'guardabrmodifier', 'finalstrength', 'master_bowmanselect',
        'equippedmeleeweapontype', 'equippedmeleeweaponabr', 'equippedmeleeweapondamage',
        'equippedrangedweapontype', 'rangedabr', 'rangeddamage', 'equippedammotype',
        'armour_piercing', 'deathvowselect', 'cutting_power_of_the_mind_toggle', 'primaryelement',
        'penetratingshotselect', 'penetrating_shot', 'equippedammoabrmod', 'equippedammodmgmod'
    ], function(v) {
        let weaponskillActive = parseInt(v['weaponskillselect']) || 0;
        let equippedMeleeWeapon = v['equippedmeleeweapontype'] || '';
        let equippedRangedWeapon = v['equippedrangedweapontype'] || '';
        let equippedAmmoType = v['equippedammotype'] || '';
        let armour_piercingActive = parseInt(v['armour_piercing']) || 0;
        let deathvowSelect = parseInt(v['deathvowselect']) || 0;
        let penetratingShotActive = parseInt(v['penetratingshotselect']) || 0;
        let penetratingShotValue = parseInt(v['penetrating_shot']) || 0;
        let cuttingPower = parseInt(v['cutting_power_of_the_mind_toggle']) || 0;
        let primaryelement = v['primaryelement'] || '';

        let selectedWeapons = [
            v['weapon1'] || '',
            v['weapon2'] || '',
            v['weapon3'] || ''
        ];

        let miscMeleeABR = parseInt(v['miscabrmelee']) || 0;
        let miscMeleeDmg = parseInt(v['miscdamagemelee']) || 0;
        let miscRangedABR = parseInt(v['miscabrranged']) || 0;
        let miscRangedDmg = parseInt(v['miscdamageranged']) || 0;

        let finalStrength = parseInt(v['finalstrength']) || 0;

        let specialAmmoABR = parseInt(v['equippedammoabrmod']) || 0;  
        let specialAmmoDamage = parseInt(v['equippedammodmgmod']) || 0;

        let magicMeleeABRBonus = parseInt(v['equippedmeleeweaponmagicbonus']) || 0;
        let magicMeleeDmgBonus = magicMeleeABRBonus;
        let magicRangedABRBonus = parseInt(v['equippedrangedweaponmagicbonus']) || 0;
        let magicRangedDmgBonus = magicRangedABRBonus;
        let magicAmmoABRBonus = parseInt(v['equippedammomagicbonus']) || 0;
        let magicAmmoDmgBonus = magicAmmoABRBonus;
        
        let guardDamageMod = parseInt(v['guarddamagemodifier']) || 0;
        let guardABRMod = parseInt(v['guardabrmodifier']) || 0;

        let bloodrage = parseInt(v['bloodrageselect']) || 0;

        // Calculate final attack and damage bonuses
        let finalMeleeABRBonus = miscMeleeABR + magicMeleeABRBonus + guardABRMod;
        let finalMeleeDmgBonus = miscMeleeDmg + magicMeleeDmgBonus + guardDamageMod;
        let finalRangedABRBonus = miscRangedABR + magicRangedABRBonus + magicAmmoABRBonus + specialAmmoABR;
        let finalRangedDmgBonus = miscRangedDmg + magicRangedDmgBonus + magicAmmoDmgBonus + specialAmmoDamage;

        // Apply Bloodrage damage modifier
        if (bloodrage === 1) {
            finalMeleeDmgBonus += 1;
        }

        // Strength modifier for specific values of FinalStrength
        if ([16, 17, 18].includes(finalStrength)) {
            finalMeleeDmgBonus += 1;
            finalMeleeABRBonus += 1;
            finalRangedDmgBonus += 1;
            finalRangedABRBonus += 1;
        } else if (finalStrength > 18) {
            finalMeleeDmgBonus += 2;
            finalMeleeABRBonus += 2;
            finalRangedDmgBonus += 2;
            finalRangedABRBonus += 2;
        }

        // Weaponskill modifier for melee weapons
        if (weaponskillActive && selectedWeapons.includes(equippedMeleeWeapon)) {
            finalMeleeABRBonus += 1;
        }

        // Apply armour piercing bonus to specific melee and ranged weapons
        if (armour_piercingActive === 1) {
            const meleearmour_piercingWeapons = ['sword', 'staff', 'dagger', 'shortsword'];
            const rangedarmour_piercingWeapon = 'throwing spike';

            if (meleearmour_piercingWeapons.includes(equippedMeleeWeapon.toLowerCase())) {
                finalMeleeABRBonus += 1;
            }

            if (equippedRangedWeapon.toLowerCase() === rangedarmour_piercingWeapon) {
                finalRangedABRBonus += 1;
            }
        }

        // Apply Penetrating Shot bonus if activated
        if (penetratingShotActive === 1) {
            finalRangedABRBonus += penetratingShotValue;
        }

        let master_bowmanBonus = 0;
        if (eventinfo.sourceType === "player" && (eventinfo.sourceAttribute.includes("master_bowmanselect") || eventinfo.sourceAttribute.includes("rangedweapon"))) {
            let ismaster_bowmanActive = parseInt(v['master_bowmanselect']) || 0;

            if (ismaster_bowmanActive) {
                let weaponName = equippedRangedWeapon.toLowerCase();

                // Check if the weapon is "longbow", "bow", or any custom "bow" (but not "cross" in the name)
                if ((weaponName === 'longbow' || weaponName === 'bow' || weaponName.includes('bow')) && !weaponName.includes('cross')) {
                    master_bowmanBonus = 1;
                }

                finalRangedABRBonus += master_bowmanBonus;
            }
        }

        // Apply Death Vow bonus if deathvowselect is 1
        if (deathvowSelect === 1) {
            finalMeleeABRBonus += 2;
            finalMeleeDmgBonus += 2;
            finalRangedABRBonus += 2;
            finalRangedDmgBonus += 2;
        }

        if (cuttingPower === 1 && primaryelement === "Darkness") {
          finalRangedDmgBonus += 1;
        }

        // Set final attributes
        setAttrs({
            finalmeleeabrbonus: finalMeleeABRBonus,
            finalmeleedmgbonus: finalMeleeDmgBonus,
            finalrangedabrbonus: finalRangedABRBonus,
            finalrangeddmgbonus: finalRangedDmgBonus
        });
    });
});

on('change:expert_parryselect', function() {
    getAttrs(['expert_parryselect'], function(v) {
        // Default values for shield die and success value
        let shieldDie = '1d6'; // Default shield die value
        let successValue = 1;  // Default shield success value

        // Check if Expert Parry is selected
        let expert_parryActive = v.expert_parryselect === '1';

        if (expert_parryActive) {
            // Modify shield die and success value based on Expert Parry skill
            shieldDie = '1d10'; // Expert Parry changes the die to 1d10
            successValue = 2;   // Expert Parry changes the success value to 2
        }

        // Set attributes
        setAttrs({
            'shielddievalue': shieldDie,
            'shieldsuccessvalue': successValue
        });
    });
});

on('change:profession change:rank change:warlockweapongroups change:meleeweapon change:equippedrangedweapontype', function() {
    getAttrs([
        'profession', 'rank', 'warlockweapongroups', 'weapon_group_1', 'weapon_group_2',
        'warlockweapongroupmelee', 'warlockweapongroupranged'
    ], function(values) {
        // Retrieve the values
        let profession = values.profession || '';
        let rank = parseInt(values.rank) || 0;
        let warlockWeaponGroups = parseInt(values.warlockweapongroups) || 0;
        let weaponGroup1 = parseInt(values.weapon_group_1) || 0;
        let weaponGroup2 = parseInt(values.weapon_group_2) || 0;
        let warlockWeaponGroupMelee = parseInt(values.warlockweapongroupmelee) || 0;
        let warlockWeaponGroupRanged = parseInt(values.warlockweapongroupranged) || 0;

        // Set default values to 0
        let nonProfMelee = 0;
        let nonProfRanged = 0;

        if ((profession === 'warlock' && rank > 2) || warlockWeaponGroups === 1) {
            if (warlockWeaponGroupMelee !== weaponGroup1 && warlockWeaponGroupMelee !== weaponGroup2) {
                nonProfMelee = -2;
            }
        }

        if ((profession === 'warlock' && rank > 2) || warlockWeaponGroups === 1) {
            if (warlockWeaponGroupRanged !== weaponGroup1 && warlockWeaponGroupRanged !== weaponGroup2) {
                nonProfRanged = -2;
            }
        }

        // Set the attribute values
        setAttrs({
            nonprofmelee: nonProfMelee,
            nonprofranged: nonProfRanged
        });
    });
});

on("change:armourstealthpenalty change:stealth change:miscstealth change:perception change:miscperception change:reflexes change:psychic_talent change:humanintuitionselect change:stillnesspos change:rank change:huntersmindactivate change:baseaf change:favoured_language", function() {
    getAttrs([
        'stealth', 'miscstealth', 'perception', 'miscperception',
        'reflexes', 'psychic_talent', 'humanintuitionselect',
        'stillnesspos', 'rank', 'huntersmindactivate', 'baseaf', 'favoured_language',
        'armourstealthpenalty'
    ], function(values) {
        let stealth = parseInt(values.stealth) || 0;
        let miscStealth = parseInt(values.miscstealth) || 0;
        let perception = parseInt(values.perception) || 0;
        let miscPerception = parseInt(values.miscperception) || 0;
        let reflexes = parseInt(values.reflexes) || 0;
        let psychicTalent = parseInt(values.psychic_talent) || 0;
        let humanIntuitionSelect = parseInt(values.humanintuitionselect) || 0;
        let stillnessPos = parseInt(values.stillnesspos) || 0;
        let rank = parseInt(values.rank) || 0;
        let huntersMindActive = values.huntersmindactivate === "1";
        let baseAF = parseInt(values.baseaf) || 0;
        let favoured_language = values.favoured_language === "1";
        let armourstealthpenalty = parseInt(values.armourstealthpenalty) || 0;
        // Initial final scores calculation
        let finalStealth = stealth + miscStealth + stillnessPos;
        let finalPerception = perception + miscPerception;

        // Apply Reflexes modifiers
        if (reflexes <= 5) {
            finalStealth -= 1;
        } else if (reflexes >= 16) {
            finalStealth += 1;
        }

        // Apply Psychic Talent modifiers
        if (psychicTalent <= 5) {
            finalPerception -= 1;
        } else if (psychicTalent >= 16) {
            finalPerception += 1;
        }

        // Apply the rule for human intuition perception
        if (humanIntuitionSelect === 1 || humanIntuitionSelect === 3) {
            finalPerception += 1;
        }

        // Apply the favoured language bonus
        if (favoured_language) {
            finalPerception += 1;
        }

        // Apply Hunter's Mind bonus if conditions are met
        if (huntersMindActive && baseAF < 3) {
            let huntersMindBonus = Math.floor(rank / 3);
            finalStealth += huntersMindBonus;
            finalPerception += huntersMindBonus;
        }

        if (armourstealthpenalty < 0) {
            finalStealth += armourstealthpenalty; // Adding a negative value effectively subtracts
        }

        // Update attributes with final scores
        setAttrs({
            'finalstealth': finalStealth,
            'finalperception': finalPerception
        });
    });
});

on('change:armourattackpenalty change:armourdefencepenalty change:finalstrength change:humanintuitionselect change:finalreflexes change:attack change:defence change:evasion change:miscattackmelee change:miscdefencemelee change:miscattackranged change:miscdefenceranged change:miscevasion change:berserkneg change:berserkpos change:berserktoranged change:bloodrageselect change:main_gauche_active change:maingauchedefencebonus change:shield change:magicshield change:equippedmeleeweaponmagicbonus change:magicrangedweaponbonus change:equippedammomagicbonus change:mattackmoda change:mdefencemoda change:rattackmoda change:rdefencemoda change:nonprofranged change:nonprofmelee change:deathvowselect change:preciseneg change:stillnessneg change:equippedammoattackmod change:intelligence change:elemental_resistance_select change:song_of_battle_toggle', function() {

    getAttrs([
        'finalstrength', 'finalreflexes', 'attack', 'defence', 'evasion',
        'miscattackmelee', 'miscdefencemelee', 'miscattackranged', 'miscdefenceranged', 'miscevasion',
        'berserkpos', 'berserkneg', 'berserktoranged', 'bloodrageselect', 'main_gauche_active', 'maingauchedefencebonus',
        'shield', 'magicshield', 'equippedmeleeweaponmagicbonus', 'magicrangedweaponbonus', 'equippedammomagicbonus', 'song_of_battle_toggle',
        'mattackmoda', 'mdefencemoda', 'rattackmoda', 'rdefencemoda', 'nonprofranged', 'nonprofmelee', 'humanintuitionselect',
        'deathvowselect', 'preciseneg', 'stillnessneg', 'equippedammoattackmod', 'intelligence', 'elemental_resistance_select',
        'armourattackpenalty', 'armourdefencepenalty'
    ], function(values) {
        
        // Retrieve base values
        let baseAttack = parseInt(values['attack']) || 0;
        let baseDefence = parseInt(values['defence']) || 0;
        let baseEvasion = parseInt(values['evasion']) || 0;

        // Retrieve characteristic scores
        let strength = parseInt(values['finalstrength']) || 0;
        let reflexes = parseInt(values['finalreflexes']) || 0;
        let intelligence = parseInt(values['intelligence']) || 0;

        // Retrieve misc values
        let miscMeleeAttack = parseInt(values['miscattackmelee']) || 0;
        let miscMeleeDefence = parseInt(values['miscdefencemelee']) || 0;
        let miscRangedAttack = parseInt(values['miscattackranged']) || 0;
        let miscRangedDefence = parseInt(values['miscdefenceranged']) || 0;
        let miscEvasion = parseInt(values['miscevasion']) || 0;

        //Retrieve non-proficient Armour Penalties
        let armourattackpenalty = parseInt(values['armourattackpenalty']) || 0;
        let armourdefencepenalty = parseInt(values['armourdefencepenalty']) || 0;
            
        // Retrieve special ammo modifiers
        let specialAmmoAttack = parseInt(values['equippedammoattackmod']) || 0;

        // Retrieve guard modifiers
        let guardMeleeAttack = parseInt(values['mattackmoda']) || 0;
        let guardMeleeDefence = parseInt(values['mdefencemoda']) || 0;
        let guardRangedAttack = parseInt(values['rattackmoda']) || 0;
        let guardRangedDefence = parseInt(values['rdefencemoda']) || 0;

        // Retrieve magic bonuses
        let magicMeleeWeaponBonus = parseInt(values['equippedmeleeweaponmagicbonus']) || 0;
        let magicRangedWeaponBonus = parseInt(values['magicrangedweaponbonus']) || 0;
        let magicAmmoBonus = parseInt(values['equippedammomagicbonus']) || 0;

        // Knight Skill Modifiers
        let main_gauche_active = parseInt(values['main_gauche_active']) || 0;
        let maingaucheDefenceBonus = parseInt(values['maingauchedefencebonus']) || 0;

        // Warlock Skill Modifiers
        let nonProfRanged = parseInt(values['nonprofranged']) || 0;
        let nonProfMelee = parseInt(values['nonprofmelee']) || 0;
        
        //Elementalist Skill Modifiers
        let elemental_resistance_select = parseInt(values['elemental_resistance_select']) || 0;

        // Shield Status and Magic Bonus
        let shieldEquipped = parseInt(values['shield']) || 0;
        let magicShieldBonus = parseInt(values['magicshield']) || 0;

        // Death Vow Select
        let deathvowSelect = parseInt(values['deathvowselect']) || 0;

        let stillnessNeg = parseInt(values['stillnessneg']) || 0;
        let humanIntuitionSelect = parseInt(values['humanintuitionselect']) || 0;

        let songOfBattle = values.song_of_battle_toggle ==="1";

        // Barbarian Skill Modifiers
        let berserkNeg = parseInt(values['berserkneg']) || 0;
        let berserkToRanged = parseInt(values['berserktoranged']) || 0;
        let bloodrage = parseInt(values['bloodrageselect']) || 0;
        
        // Ensure berserkNeg is a multiple of 3 and negative (if not 0)
        if (berserkNeg < 0) {
            berserkNeg = Math.floor(berserkNeg / 3) * 3; // Enforce multiple of 3
        }

        // Calculate berserk and precise shot attack bonuses based on defense penalty
        let berserkPos = Math.floor(-berserkNeg / 3);

        // Initialize final values
        let finalMeleeAttack = baseAttack + miscMeleeAttack + guardMeleeAttack + nonProfMelee + magicMeleeWeaponBonus;
        let finalMeleeDefence = baseDefence + miscMeleeDefence + guardMeleeDefence - stillnessNeg + magicMeleeWeaponBonus;
        let finalRangedAttack = baseAttack + miscRangedAttack + guardRangedAttack + nonProfRanged + specialAmmoAttack + magicRangedWeaponBonus + magicAmmoBonus;
        let finalRangedDefence = baseDefence + miscRangedDefence + guardRangedDefence - stillnessNeg;
        let finalEvasion = baseEvasion + miscEvasion;

        // Apply Strength Effects
        if (strength <= 5) {
            finalMeleeAttack -= 2;
            finalMeleeDefence -= 1;
            finalRangedAttack -= 2;
            finalRangedDefence -= 1;
        } else if (strength <= 8) {
            finalMeleeAttack -= 1;
            finalRangedAttack -= 1;
        } else if (strength <= 12) {
            // No modifiers for strength between 9 and 12
        } else if (strength <= 15) {
            finalMeleeAttack += 1;
            finalRangedAttack += 1;
        } else {
            finalMeleeAttack += 2;
            finalRangedAttack += 2;
            finalMeleeDefence += 1;
            finalRangedDefence += 1;
        }

        // Apply Reflexes Effects
        if (reflexes <= 5) {
            finalMeleeAttack -= 1;
            finalMeleeDefence -= 2;
            finalRangedAttack -= 1;
            finalRangedDefence -= 2;
            finalEvasion -= 2;
        } else if (reflexes <= 8) {
            finalMeleeDefence -= 1;
            finalRangedDefence -= 1;
            finalEvasion -= 1;
        } else if (reflexes <= 12) {
            // No modifiers for reflexes between 9 and 12
        } else if (reflexes <= 15) {
            finalMeleeDefence += 1;
            finalRangedDefence += 1;
            finalEvasion += 1;
        } else {
            finalMeleeAttack += 1;
            finalRangedAttack += 1;
            finalMeleeDefence += 2;
            finalRangedDefence += 2;
            finalEvasion += 2;
        }

        // Apply Intelligence Effects
        if (intelligence <= 5) {
            finalMeleeAttack -= 1;
            finalMeleeDefence -= 1;
            finalRangedAttack -= 1;
            finalRangedDefence -= 1;
        } else if (intelligence >= 16) {
            finalMeleeAttack += 1;
            finalMeleeDefence += 1;
            finalRangedAttack += 1;
            finalRangedDefence += 1;
        }

        // Hunter Skill Modifiers
        let preciseNeg = parseInt(values['preciseneg']) || 0;
        
        // Ensure preciseNeg is a multiple of 3 and negative (if not 0)
        if (preciseNeg < 0) {
            preciseNeg = Math.floor(preciseNeg / 3) * 3; // Enforce multiple of 3
        }
        
        // Calculate the maximum allowed preciseNeg without going below 0 finalRangedDefence
        let maxPreciseNeg = -finalRangedDefence;
        
        // Ensure preciseNeg doesn't exceed the maximum and is a multiple of 3
        if (preciseNeg < maxPreciseNeg) {
            preciseNeg = Math.ceil(maxPreciseNeg / 3) * 3; // Round up to the nearest multiple of 3
        }
        
        // Calculate precisePos based on the capped preciseNeg
        let precisePos = Math.floor(-preciseNeg / 3);
        
        // Apply the effects
        finalMeleeDefence += preciseNeg;
        finalRangedAttack += precisePos;
        finalRangedDefence += preciseNeg;

        // Apply Bloodrage Effects
        if (bloodrage === 1) {
            finalMeleeAttack += finalMeleeDefence;
            finalMeleeDefence = 0;
            finalRangedAttack = 0;
            finalRangedDefence = 0;
        } else {
            // Apply Berserk Effects (with input capping)
        
            // Calculate the maximum allowed berserkNeg without going below 0 finalMeleeDefence
            let maxBerserkNeg = -finalMeleeDefence;
        
            // Ensure berserkNeg doesn't exceed the maximum and is a multiple of 3
            if (berserkNeg < maxBerserkNeg) {
                berserkNeg = Math.ceil(maxBerserkNeg / 3) * 3; // Round up to the nearest multiple of 3
            }
        
            // Update the 'berserkneg' attribute on the sheet to the capped value
            setAttrs({ 
                berserkneg: berserkNeg 
            });
        
            // Calculate berserkPos based on the capped berserkNeg
            let berserkPos = Math.floor(-berserkNeg / 3); 
            
            // Apply the effects
            finalMeleeDefence += berserkNeg; 
            finalMeleeAttack += (berserkToRanged ? 0 : berserkPos);
            finalRangedAttack += (berserkToRanged ? berserkPos : 0);
            finalRangedDefence += berserkNeg;
        }

        // Adjust Melee Defence based on Main Gauche
        if (main_gauche_active === 1) {
            finalMeleeDefence += 2 + maingaucheDefenceBonus;
        } else if (main_gauche_active === 2) {
            finalMeleeDefence = 0;
        }
        
        // Add Shield Magic Bonus to Defence
        if (shieldEquipped) {
            finalMeleeDefence += magicShieldBonus;
            finalRangedDefence += magicShieldBonus;
        }
        
        // Apply non-proficient armour penalties to attack and defence
        if (armourattackpenalty < 0) {
            finalMeleeAttack += armourattackpenalty; // Adding a negative value effectively subtracts
            finalRangedAttack += armourattackpenalty;
        }

        if (armourdefencepenalty < 0) {
            finalMeleeDefence += armourdefencepenalty;
            finalRangedDefence += armourdefencepenalty;
        }        

        // Apply Death Vow Select Effect
        if (deathvowSelect === 1) {
            finalMeleeAttack += 10;
            finalRangedAttack += 10; // Assuming you want to apply it to both melee and ranged attacks
        }
 
        // Apply Elemental Resistance modifiers (only one can apply at a time)
        if (elemental_resistance_select === 1) {
            finalEvasion += 4;
        } else if (elemental_resistance_select === 2) {
            finalEvasion += 2;
        }
                
        // Apply Human Intuition Attack bonus if the checkbox is checked
        if (humanIntuitionSelect === 2 || humanIntuitionSelect === 3) {
            finalMeleeAttack += 1;
            finalRangedAttack += 1;
        }

        if (songOfBattle) {
            finalMeleeAttack += 8;
            finalRangedAttack += 8;
            finalMeleeDefence += 4;
            finalRangedDefence += 4;
        }

        // Set attributes
        setAttrs({
            finalmeleeattack: finalMeleeAttack,
            finalmeleedefence: finalMeleeDefence,
            finalrangedattack: finalRangedAttack,
            finalrangeddefence: finalRangedDefence,
            finalevasion: finalEvasion,
            berserkpos: berserkPos,
            precisepos: precisePos,
            berserkneg: berserkNeg,
            preciseneg: preciseNeg
        });
    });
});

on('change:stillnessneg change:favoured_terrain', function() {
    getAttrs(['stillnessneg', 'favoured_terrain', 'finalMeleeDefence', 'finalRangedDefence'], function(values) {
        // Parse and default values
        let stillnessNeg = parseInt(values['stillnessneg'], 10) || 0;
        let favoured_terrain = values['favoured_terrain'] === '1';
        let finalMeleeDefence = parseInt(values['finalmeleedefence']);
        let finalRangedDefence = parseInt(values['finalrangeddefence']);
        
        // Ensure stillnessNeg is a multiple of 2 and negative (if not 0)
        if (stillnessNeg < 0) {
            stillnessNeg = Math.floor(stillnessNeg / 2) * 2;
        }

        // Calculate the maximum allowed stillnessNeg without going below 0 finalMeleeDefence or finalRangedDefence
        let maxStillnessNeg = Math.max(-finalMeleeDefence, -finalRangedDefence); // Consider both defenses

        // Ensure stillnessNeg doesn't exceed the maximum and is a multiple of 2
        if (stillnessNeg < maxStillnessNeg) {
            stillnessNeg = Math.ceil(maxStillnessNeg / 2) * 2;
        }

        // Calculate the Stealth bonus
        let stillnessPos;
        if (favoured_terrain) {
            stillnessPos = -stillnessNeg; // Full bonus if favoured terrain (negate to make it positive)
        } else {
            stillnessPos = Math.floor(-stillnessNeg / 2); // Half bonus otherwise (negate to make it positive)
        }

        // Set the attributes
        setAttrs({
            stillnesspos: stillnessPos,
            stillnessneg: stillnessNeg
        });
    });
});

on('change:finalintelligence change:finalpsychictalent change:magicalattack change:magicaldefence change:miscmagicattack change:miscmagicdefence change:activateiron_will change:elemental_resistance_primary change:elemental_resistance_secondary change:demonic_specialism', function() {
    getAttrs([
        'finalintelligence', 'finalpsychictalent',
        'magicalattack', 'magicaldefence', 'miscmagicattack', 'miscmagicdefence',
        'activateiron_will', 'elemental_resistance_primary', 'elemental_resistance_secondary',
        'demonic_specialism', 'rank'
    ], function(values) {
        // Retrieve base scores and modifiers
        let intelligence = parseInt(values.finalintelligence, 10) || 0;
        let psychicTalent = parseInt(values.finalpsychictalent, 10) || 0;
        let baseMagicalAttack = parseInt(values.magicalattack, 10) || 0;
        let baseMagicalDefence = parseInt(values.magicaldefence, 10) || 0;
        let miscMagicalAttack = parseInt(values.miscmagicattack, 10) || 0;
        let miscMagicalDefence = parseInt(values.miscmagicdefence, 10) || 0;
        let activateiron_will = parseInt(values.activateiron_will, 10) || 0;
        let elemental_resistance_primary = parseInt(values.elemental_resistance_primary, 10) || 0;
        let elemental_resistance_secondary = parseInt(values.elemental_resistance_secondary, 10) || 0;
        let demonicSpecialism = parseInt(values.demonic_specialism, 10) || 0;
        let rank = parseInt(values.rank, 10) || 0;

        // Initialize modifiers
        let magicalAttackModifier = 0;
        let magicalDefenceModifier = 0;

        // Calculate Intelligence modifiers
        if (intelligence >= 16) {
            magicalAttackModifier += 1;
            magicalDefenceModifier += 1;
        } else if (intelligence <= 5) {
            magicalAttackModifier -= 1;
            magicalDefenceModifier -= 1;
        }

        // Calculate Psychic Talent modifiers
        if (psychicTalent >= 16) {
            magicalDefenceModifier += 2;
            magicalAttackModifier += 2;            
        } else if (psychicTalent >= 13) {
            magicalDefenceModifier += 1;
            magicalAttackModifier += 1;            
        } else if (psychicTalent >= 9) {
            magicalDefenceModifier += 0;
        } else if (psychicTalent >= 6) {
            magicalDefenceModifier -= 1;
        } else if (psychicTalent <= 5) {
            magicalDefenceModifier -= 2;
        }

        // Apply Iron Will bonus
        if (activateiron_will === 1) {
            magicalDefenceModifier += 2;
        }

        // Apply Elemental Resistance modifiers (only one can apply at a time)
        if (elemental_resistance_primary === 1) {
            magicalDefenceModifier += 4;
        } else if (elemental_resistance_secondary === 1) {
            magicalDefenceModifier += 2;
        }

        // Apply Demonic Specialism bonuses
        if (demonicSpecialism === 1) {
            if (rank >= 12) {
                magicalAttackModifier += 5;
                magicalDefenceModifier += 5;
            } else if (rank >= 7) {
                magicalAttackModifier += 3;
                magicalDefenceModifier += 3;
            } else {
                magicalAttackModifier += 1;
                magicalDefenceModifier += 1;
            }
        }

        // Calculate final values
        let finalMagicalAttack = baseMagicalAttack + magicalAttackModifier + miscMagicalAttack;
        let finalMagicalDefence = baseMagicalDefence + magicalDefenceModifier + miscMagicalDefence;

        // Set attributes
        setAttrs({
            'finalmagicalattack': finalMagicalAttack,
            'finalmagicaldefence': finalMagicalDefence
        });
    });
});

on('change:rank change:armour_piercing change:shock_attack change:throwing_spike change:unarmed_combat change:inner_sense change:memorize change:deathvow change:assassins_lotion change:smoke_jar change:flash_pellets change:breakfall change:climbing change:jumping change:disguise change:pilfer change:pick_lock change:track', function() {
    getAttrs([
        'armour_piercing', 
        'shock_attack', 
        'throwing_spike', 
        'unarmed_combat', 
        'inner_sense', 
        'memorize', 
        'deathvow', 
        'assassins_lotion', 
        'smoke_jar', 
        'flash_pellets',
        'breakfall',
        'climbing',
        'jumping',
        'disguise',
        'pilfer',
        'pick_lock',
        'track',
        'rank'
    ], function(values) {
        const rank = parseInt(values.rank, 10) || 0;

        // Helper function to parse and add values
        const parseAndSum = (value) => {
            const num = parseInt(value, 10) || 0;
            return num > 0 ? num : 0;
        };

        // Calculate max values based on rank
        let maxCombatTechniques = rank >= 7 ? 4 : rank >= 5 ? 3 : rank >= 3 ? 2 : rank >= 1 ? 1 : 0;
        let maxMentalTechniques = rank >= 12 ? 3 : rank >= 8 ? 2 : rank >= 4 ? 1 : 0;
        let maxAlchemicalTechniques = rank >= 1 ? 1 : 0;
        let maxAssassinSkills = rank >= 11 ? 5 : rank >= 7 ? 4 : rank >= 5 ? 3 : rank >= 3 ? 2 : rank >= 1 ? 1 : 0;

        // Count selected combat techniques
        let combatTechniqueSelectedCount = parseAndSum(values.armour_piercing) +
                                            parseAndSum(values.shock_attack) +
                                            parseAndSum(values.throwing_spike) +
                                            parseAndSum(values.unarmed_combat);

        // Count selected mental techniques
        let mentalTechniqueSelectedCount = parseAndSum(values.inner_sense) +
                                            parseAndSum(values.memorize) +
                                            parseAndSum(values.deathvow);

        // Check if any alchemical technique is selected
        let alchemicalTechniqueSelectedCount = (values.assassins_lotion === '1' || 
                                                values.smoke_jar === '1' || 
                                                values.flash_pellets === '1') ? 1 : 0;

        // Count selected assassin skills
        let assassinSkillsSelectedCount = parseAndSum(values.breakfall) +
                                          parseAndSum(values.climbing) +
                                          parseAndSum(values.jumping) +
                                          parseAndSum(values.disguise) +
                                          parseAndSum(values.pilfer) +
                                          parseAndSum(values.pick_lock) +
                                          parseAndSum(values.track);

        // Update the attributes
        setAttrs({
            'combattechniques_max': maxCombatTechniques,
            'mentaltechniques_max': maxMentalTechniques,
            'alchemicaltechniques_max': maxAlchemicalTechniques,
            'assassinskills_max': maxAssassinSkills,
            'combattechniques_selected': combatTechniqueSelectedCount,
            'mentaltechniques_selected': mentalTechniqueSelectedCount,
            'alchemicaltechniques_selected': alchemicalTechniqueSelectedCount,
            'assassinskills_selected': assassinSkillsSelectedCount
        });
    });
});

// Listen for changes to the rank and Knight skills
on('change:rank change:disarm_technique change:expert_parry change:main_gauche change:master_bowman change:quick_draw change:swordmaster change:weaponskill1 change:weaponskill2 change:weaponskill3 change:fearless change:intimidating change:iron_will change:tireless change:true_grit change:oak_fists', function() {
    getAttrs([
        'disarm_technique', 
        'expert_parry', 
        'main_gauche', 
        'master_bowman', 
        'quick_draw', 
        'swordmaster', 
        'weaponskill1', 
        'weaponskill2', 
        'weaponskill3',
        'rank',
        'fearless', 
        'intimidating', 
        'iron_will', 
        'tireless', 
        'true_grit', 
        'oak_fists'
    ], function(values) {
        const rank = parseInt(values.rank, 10) || 0;

        // Knight calculations
        let maxKnightSkills = 0;
        let knightsupremacyMax = 0;
        let knightSkillsSelectedCount = 0;
        let supremacySkillsSelectedCount = 0;

        // Calculate max Knight skills based on rank
        if (rank >= 13) {
            maxKnightSkills = 6;
        } else if (rank >= 12) {
            maxKnightSkills = 5;
        } else if (rank >= 11) {
            maxKnightSkills = 4;
        } else if (rank >= 10) {
            maxKnightSkills = 3;
        } else if (rank >= 9) {
            maxKnightSkills = 2;
        } else if (rank >= 8) {
            maxKnightSkills = 1;
        } else {
            maxKnightSkills = 0;
        }

        // Calculate knightsupremacy_max based on rank
        if (rank >= 6) {
            knightsupremacyMax++;
        }
        if (rank >= 3) {
            knightsupremacyMax++;
        }

        // Count selected Knight skills
        if (values.disarm_technique === '1') {
            knightSkillsSelectedCount++;
        }
        if (values.expert_parry === '1') {
            knightSkillsSelectedCount++;
        }
        if (values.main_gauche === '1') {
            knightSkillsSelectedCount++;
        }
        if (values.master_bowman === '1') {
            knightSkillsSelectedCount++;
        }
        if (values.quick_draw === '1') {
            knightSkillsSelectedCount++;
        }
        if (values.swordmaster === '1') {
            knightSkillsSelectedCount++;
        }
        if (values.weaponskill1 === '1') {
            knightSkillsSelectedCount++;
        }
        if (values.weaponskill2 === '1') {
            knightSkillsSelectedCount++;
        }
        if (values.weaponskill3 === '1') {
            knightSkillsSelectedCount++;
        }

        // Count selected Supremacy Skills
        if (values.fearless === '1') {
            supremacySkillsSelectedCount++;
        }
        if (values.intimidating === '1') {
            supremacySkillsSelectedCount++;
        }
        if (values.iron_will === '1') {
            supremacySkillsSelectedCount++;
        }
        if (values.tireless === '1') {
            supremacySkillsSelectedCount++;
        }
        if (values.true_grit === '1') {
            supremacySkillsSelectedCount++;
        }
        if (values.oak_fists === '1') {
            supremacySkillsSelectedCount++;
        }

        // Update the attributes
        setAttrs({
            'knightproskills_max': maxKnightSkills,
            'knightproskills_selected': knightSkillsSelectedCount,
            'knightsupremacy_max': knightsupremacyMax,
            'knightsupremacy_selected': supremacySkillsSelectedCount
        });
    });
});



// Listen for changes to the Profession, skills, and rank
on('change:profession change:track change:berserk change:ride_warhorse change:bloodrage change:thesupremacyofthesword change:fearless change:intimidating change:iron_will change:tireless change:true_grit change:oak_fists change:rank', function() {
    getAttrs([
        'profession',
        'track', 
        'berserk', 
        'ride_warhorse', 
        'bloodrage', 
        'fearless', 
        'intimidating', 
        'iron_will', 
        'tireless', 
        'true_grit', 
        'oak_fists', 
        'rank'
    ], function(values) {
        const rank = parseInt(values.rank, 10) || 0;

        // Barbarian calculations
        let maxBarbarianSkills = 0;
        let barbarianSkillsSelectedCount = 0;

        // Calculate max Barbarian skills based on rank
        if (rank >= 13) {
            maxBarbarianSkills = 6;
        } else if (rank >= 12) {
            maxBarbarianSkills = 5;
        } else if (rank >= 11) {
            maxBarbarianSkills = 4;
        } else if (rank >= 10) {
            maxBarbarianSkills = 3;
        } else if (rank >= 9) {
            maxBarbarianSkills = 2;
        } else if (rank >= 8) {
            maxBarbarianSkills = 1;
        } else {
            maxBarbarianSkills = 0;
        }

        // Count selected Barbarian skills
        if (values.fearless === '1') {
            barbarianSkillsSelectedCount++;
        }
        if (values.intimidating === '1') {
            barbarianSkillsSelectedCount++;
        }
        if (values.iron_will === '1') {
            barbarianSkillsSelectedCount++;
        }
        if (values.tireless === '1') {
            barbarianSkillsSelectedCount++;
        }
        if (values.true_grit === '1') {
            barbarianSkillsSelectedCount++;
        }
        if (values.oak_fists === '1') {
            barbarianSkillsSelectedCount++;
        }

        // Handle automatic checking based on profession and rank
        if (values.profession === 'Barbarian') {
            // Automatically check the Barbarian skills if not already checked
            setAttrs({
                'track': '1',
                'ride_warhorse': '1',
                'berserk': '1'
            });
            
            // Check bloodrage if rank is 8 or higher
            if (values.profession === 'Barbarian' && rank >= 8) {
                setAttrs({
                    'bloodrage': '1'
                });
            }
        }

       // Update the attributes
        setAttrs({
            'attr_barbariansupremacy_max': maxBarbarianSkills,
            'attr_barbariansupremacy_selected': barbarianSkillsSelectedCount
        });
    });
});

on('change:profession change:rank change:hunters_mind change:false_trail change:climb change:sneak_attack change:soldier change:penetrating_shot change:master_fletcher change:fast_shot', function() {
    getAttrs([
        'profession',
        'rank',
        'hunters_mind', 
        'false_trail', 
        'climb', 
        'sneak_attack', 
        'soldier', 
        'penetrating_shot', 
        'master_fletcher', 
        'fast_shot',
        'track',
        'bowyer_fletcher',
        'precise_shot',
        'favoured_weapon',
        'favoured_terrain',
        'set_traps',
        'forage',
        'stillness'
    ], function(values) {
        let rank = parseInt(values.rank, 10) || 1; // Default to 1 if no rank is set
        let hunterSkillsSelectedCount = 0;
        let hunterSkillsMax = 1; // Initial skills at 3rd Rank

        // Calculate the maximum number of Hunter skills
        if (rank >= 3) {
            hunterSkillsMax = 1; // 1 skill at 3rd Rank
        }
        if (rank >= 6) {
            hunterSkillsMax += 1; // 1 additional skill at 6th Rank
        }
        if (rank >= 8) {
            hunterSkillsMax += Math.floor((rank - 8) / 1) + 1; // 1 additional skill per rank from 8th Rank onward
        }

        // Count selected Hunter skills with their values
        hunterSkillsSelectedCount += parseInt(values.hunters_mind, 10) || 0;
        hunterSkillsSelectedCount += parseInt(values.false_trail, 10) || 0;
        hunterSkillsSelectedCount += parseInt(values.climb, 10) || 0;
        hunterSkillsSelectedCount += parseInt(values.sneak_attack, 10) || 0;
        hunterSkillsSelectedCount += parseInt(values.soldier, 10) || 0;
        hunterSkillsSelectedCount += parseInt(values.penetrating_shot, 10) || 0;
        hunterSkillsSelectedCount += parseInt(values.master_fletcher, 10) || 0;
        hunterSkillsSelectedCount += parseInt(values.fast_shot, 10) || 0;

        // Automatically check specific Hunter skills if Profession is Hunter
        if (values.profession === 'Hunter') {
            setAttrs({
                'track': '1',
                'bowyer_fletcher': '1',
                'precise_shot': '1',
                'favoured_weapon': '1',
                'favoured_terrain': '1',
                'set_traps': '1',
                'forage': '1',
                'stillness': '1'
            });
        }

        // Update the attributes
        setAttrs({
            'hunterskills_max': hunterSkillsMax,
            'hunterskills_selected': hunterSkillsSelectedCount
        });
    });
});

on('change:disguise change:pilfer change:second_tongue change:favoured_language change:natural_linguist change:human_intuition change:uncanny_intuition change:infuriate_pacify change:distract change:magic_hands change:bodyguard change:gossip change:presence change:sense_falsehood change:hypnotic_suggestion change:network change:words_are_power', function() {
    getAttrs([
        'disguise', 
        'pilfer', 
        'second_tongue', 
        'favoured_language', 
        'natural_linguist', 
        'human_intuition', 
        'uncanny_intuition', 
        'infuriate_pacify', 
        'distract', 
        'magic_hands', 
        'bodyguard', 
        'gossip', 
        'presence', 
        'sense_falsehood', 
        'hypnotic_suggestion', 
        'network', 
        'words_are_power', 
        'rank'
    ], function(values) {

        let maxKnaveSkills = 6; // Default maximum skills at Rank 1
        let knaveSkillsSelectedCount = 0;
        const rank = parseInt(values.rank, 10) || 0;

        // Update max skills based on rank
        if (rank >= 3) {
            maxKnaveSkills += 1; // One more skill at Rank 3
        }
        if (rank >= 6) {
            maxKnaveSkills += 1; // One more skill at Rank 6
        }
        if (rank >= 8) {
            maxKnaveSkills += 1; // One more skill at Rank 8
        }
        if (rank > 8) {
            maxKnaveSkills += Math.floor((rank - 8) / 1); // One more skill per rank above 8
        }

        // Count selected Knave skills with their values
        knaveSkillsSelectedCount += parseInt(values.disguise, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.pilfer, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.second_tongue, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.favoured_language, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.natural_linguist, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.human_intuition, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.uncanny_intuition, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.infuriate_pacify, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.distract, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.magic_hands, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.bodyguard, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.gossip, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.presence, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.sense_falsehood, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.hypnotic_suggestion, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.network, 10) || 0;
        knaveSkillsSelectedCount += parseInt(values.words_are_power, 10) || 0;

        // Update the attributes
        setAttrs({
            'knaveskills_max': maxKnaveSkills,
            'knaveskills_selected': knaveSkillsSelectedCount
        });
    });
});


// Listen for changes to the Profession and Warlock skills
on('change:profession change:appraise_enemy change:arrow_cutting change:fight_blind change:unarmed_combat change:minor_enchantment_weapons change:minor_enchantment_armour change:major_enchantment_weapons change:major_enchantment_armour change:ride_warhorse change:warlockweapongroups change:simultaneous_casting change:rank', function() {
    getAttrs([
        'profession',
        'appraise_enemy',
        'arrow_cutting',
        'fight_blind',
        'unarmed_combat',
        'minor_enchantment_weapons',
        'minor_enchantment_armour',
        'major_enchantment_weapons',
        'major_enchantment_armour',
        'ride_warhorse',
        'warlockweapongroups',
        'simultaneous_casting',
        'rank'
    ], function(values) {
        let warlockSkillsSelectedCount = 0;
        let maxskills = 0;

        // Check if the profession is Warlock
        if (values.profession === 'Warlock') {
            // Automatically check the Warlock skills if not already checked
            setAttrs({
                'warlockweapongroups': '1',
                'simultaneous_casting': '1'
            });
        }
        
        // Count selected Warlock skills
        if (values.appraise_enemy === '1') {
            warlockSkillsSelectedCount++;
        }
        if (values.arrow_cutting === '1') {
            warlockSkillsSelectedCount++;
        }
        if (values.fight_blind === '1') {
            warlockSkillsSelectedCount++;
        }
        if (values.unarmed_combat === '1') {
            warlockSkillsSelectedCount++;
        }
        if (values.minor_enchantment_weapons === '1') {
            warlockSkillsSelectedCount++;
        }
        if (values.minor_enchantment_armour === '1') {
            warlockSkillsSelectedCount++;
        }
        if (values.major_enchantment_weapons === '1') {
            warlockSkillsSelectedCount++;
        }
        if (values.major_enchantment_armour === '1') {
            warlockSkillsSelectedCount++;
        }
        if (values.ride_warhorse === '1') {
            warlockSkillsSelectedCount++;
        }

        // Calculate maxskills based on the rank
        let rank = parseInt(values.rank, 10);
        if (rank >= 8) {
            maxskills = Math.floor((rank - 7) / 1); // One talent at 8th rank, another at 9th, etc.
        }

        // Update the attributes with the count of selected Warlock skills and maxskills
        setAttrs({
            'warlockskills_selected': warlockSkillsSelectedCount,
            'warlockskills_max': maxskills
        });
    });
});


// Listen for changes to the Rank and Profession
on('change:rank change:profession change:breadth_of_knowledge change:literate change:ancient_script change:linguist change:bulwark change:exorcism change:sermon change:healing_hands change:remove_curse change:depth_of_knowledge change:remove_madness change:words_are_power', function() {
    getAttrs([
        'rank',
        'profession',
        'bulwark', // Corrected from 'bulwark'
        'exorcism',
        'sermon',
        'healing_hands',
        'remove_curse',
        'depth_of_knowledge',
        'remove_madness',
        'words_are_power',
        'ancient_script',
        'literate',
        'linguist',
        'breadth_of_knowledge'
    ], function(values) {
        
        // Check if the profession is Priest
        if (values.profession === 'Priest') {
            // Automatically check the Priest skills
            setAttrs({
                'breadth_of_knowledge': '1',
                'literate': '1',
                'linguist': '1',
                'ancient_script': '1'
            });
        }

        // Update the count of selected Priest skills
        let priestSkillsSelectedCount = 0;
        if (values.bulwark === '1') { 
            priestSkillsSelectedCount++;
        }
        if (values.exorcism === '1') {
            priestSkillsSelectedCount++;
        }
        if (values.sermon === '1') {
            priestSkillsSelectedCount++;
        }
        if (values.healing_hands === '1') {
            priestSkillsSelectedCount++;
        }
        if (values.remove_curse === '1') {
            priestSkillsSelectedCount++;
        }
        if (values.depth_of_knowledge === '1') {
            priestSkillsSelectedCount++;
        }
        if (values.remove_madness === '1') {
            priestSkillsSelectedCount++;
        }
        if (values.words_are_power === '1') {
            priestSkillsSelectedCount++;
        }

        // Calculate max number of skills based on rank
        let rank = parseInt(values.rank) || 0;
        let maxPriestSkills = 0;

        if (rank >= 3) {
            maxPriestSkills += 1; // One more skill at Rank 3
        }
        if (rank >= 6) {
            maxPriestSkills += 1; // One more skill at Rank 6
        }
        if (rank >= 8) {
            maxPriestSkills += 1; // One more skill at Rank 8
        }
        if (rank > 8) {
            maxPriestSkills += Math.floor((rank - 8) / 1); // One more skill per rank above 8
        }

        // Update attributes with correct syntax
        setAttrs({
            'priestskills_max': maxPriestSkills,
            'priestskills_selected': priestSkillsSelectedCount // No need to set this twice
        });
    });
});

// Listen for changes to profession and rank
on('change:profession change:rank change:intelligence', function() {
    getAttrs([
        'profession',
        'rank',
        'intelligence',
        'calligraphy',
        'alchemy',
        'craft_amulets',
        'craft_novel_items',
        'craft_wands',
        'craft_rings',
        'craft_talismans',
        'premonition',
        'esp',
        'enchantment',
        'raw_power',
        'elemental_resistance',
        'demonic_specialism',
        'demonology',
        'demonology_modifier',
        'pentacle_of_protection',
        'ritual_of_summoning',
        'banishing_a_demon',
        'pact_of_the_dark_companion'
    ], function(values) {
        const profession = values.profession;
        const rank = parseInt(values.rank, 10) || 0;
        const intelligence = parseInt(values.intelligence, 10) || 0;

        // Default all attributes to unchecked
        let updates = {
            'calligraphy': '0',
            'alchemy': '0',
            'craft_amulets': '0',
            'craft_novel_items': '0',
            'craft_wands': '0',
            'craft_rings': '0',
            'craft_talismans': '0',
            'premonition': '0',
            'esp': '0',
            'enchantment': '0',
            'raw_power': '0',
            'elemental_resistance': '0',
            'demonic_specialism': '0',
            'demonology': '0',
            'demonology_modifier': '0',
            'pentacle_of_protection': '0',
            'ritual_of_summoning': '0',
            'banishing_a_demon': '0',
            'pact_of_the_dark_companion': '0'
        };

        // Apply rules based on profession and rank
        if (profession === 'Sorcerer') {
            if (rank >= 4) {
                updates.calligraphy = '1';
            }
            if (rank >= 6) {
                updates.alchemy = '1';
            }
            if (rank >= 8) {
                updates.craft_talismans = '1';
                updates.craft_wands = '1';
            }
            if (rank >= 10) {
                updates.craft_amulets = '1';
            }
            if (rank >= 12) {
                updates.craft_rings = '1';
            }
            if (rank >= 15) {
                updates.craft_novel_items = '1';
            }
        }

        // Apply rules based on profession and rank for Mystic
        if (profession === 'Mystic') {
            updates.premonition = '1';
            updates.esp = '1';
            if (rank >= 4) {
                updates.enchantment = '1';
            }
        }

        // Apply rules based on profession for Elementalist
        if (profession === 'Elementalist') {
            updates.raw_power = '1';
            updates.elemental_resistance = '1';
        }

        // Apply rules based on profession for Demonologist
        if (profession === 'Demonologist') {
            // Demonic Specialism
            if (rank >= 1) {
                updates.demonic_specialism = '1';
            }
            if (rank >= 7) {
                updates.demonic_specialism = '3';
            }
            if (rank >= 12) {
                updates.demonic_specialism = '5';
            }

            // Demonology
            let demonologyValue = 1;
            if (intelligence <= 5) {
                demonologyValue -= 2;
            } else if (intelligence <= 8) {
                demonologyValue -= 1;
            } else if (intelligence <= 12) {
                    demonologyValue += 0;
            } else if (intelligence >= 13) {
                demonologyValue += 1;
            } else if (intelligence >= 16) {
                demonologyValue += 2;
            }
            updates.demonology_modifier = demonologyValue;

            // Pentacle of Protection
            if (rank >= 4) {
                updates.pentacle_of_protection = '1';
            }

            // Ritual of Summoning
            if (rank >= 4) {
                updates.ritual_of_summoning = '1';
            }

            // Banishing a Demon
            updates.banishing_a_demon = '1';

            // Pact of the Dark Companion
            if (rank >= 7) {
                updates.pact_of_the_dark_companion = '1';
            }
        }

        // Update the attributes
        setAttrs(updates);
    });
});

on('change:skillsknown change:profession change:rank change:raw_power change:raw_power_alternate change:elemental_essence change:elemental_resistance change:oak_fists change:track change:berserk change:ride_warhorse change:bloodrage change:armour_expert change:armour_piercing change:shock_attack change:throwing_spike change:unarmed_combat change:inner_sense change:memorize change:deathvow change:light_trance change:darkness_trance change:water_trance change:earth_trance change:void_trance change:fire_trance change:wind_trance change:disarm_technique change:expert_parry change:main_gauche change:master_bowman change:quick_draw change:swordmaster change:weaponskill1 change:weaponskill2 change:weaponskill3 change:calligraphy change:alchemy change:craft_talismans change:craft_amulets change:craft_rings change:craft_novel_items change:craft_wands change:premonition change:esp change:enchantment change:adepthood change:appraise_enemy change:arrow_cutting change:fight_blind change:minor_enchantment_weapons change:minor_enchantment_armour change:major_enchantment_weapons change:major_enchantment_armour change:disguise change:pilfer change:second_tongue change:favoured_language change:natural_linguist change:human_intuition change:uncanny_intuition change:infuriate_pacify change:distract change:magic_hands change:bodyguard change:gossip change:presence change:sense_falsehood change:hypnotic_suggestion change:network change:words_are_power change:literate change:ancient_script change:breadth_of_knowledge change:linguist change:bulwark change:exorcism change:sermon change:healing_hands change:remove_curse change:depth_of_knowledge change:remove_madness change:demonic_specialism change:demonology change:pentacle_of_protection change:ritual_of_summoning change:banishing_a_demon change:pact_of_the_dark_companion change:fearless change:intimidating change:iron_will change:tireless change:true_grit change:breakfall change:climbing change:jumping change:pick_lock change:bowyer_fletcher change:precise_shot change:favoured_weapon change:favoured_terrain change:set_traps change:forage change:stillness change:hunters_mind change:false_trail change:climb change:penetrating_shot change:sneak_attack change:soldier change:master_fletcher change:master_tracker change:fast_shot', function() {
    getAttrs([
        'track', 'berserk', 'ride_warhorse', 'bloodrage', 'armour_expert', 'armour_piercing', 'shock_attack', 'throwing_spike', 'unarmed_combat',
        'inner_sense', 'memorize', 'deathvow', 'light_trance', 'darkness_trance', 'water_trance', 'earth_trance', 'void_trance',
        'fire_trance', 'wind_trance', 'disarm_technique', 'expert_parry', 'main_gauche', 'master_bowman', 'quick_draw', 'swordmaster',
        'weaponskill1', 'weaponskill2', 'weaponskill3', 'calligraphy', 'alchemy', 'craft_talismans', 'craft_amulets', 'craft_rings', 'craft_novel_items',
        'craft_wands', 'premonition', 'esp', 'enchantment', 'adepthood', 'appraise_enemy', 'arrow_cutting', 'fight_blind',
        'minor_enchantment_weapons', 'minor_enchantment_armour', 'major_enchantment_weapons', 'major_enchantment_armour', 
        'disguise', 'pilfer', 'second_tongue', 'favoured_language', 'natural_linguist', 'human_intuition', 'uncanny_intuition',
        'infuriate_pacify', 'distract', 'magic_hands', 'bodyguard', 'gossip', 'presence', 'sense_falsehood', 'hypnotic_suggestion',
        'network', 'words_are_power', 'literate', 'ancient_script', 'breadth_of_knowledge', 'linguist', 'bulwark', 'exorcism',
        'sermon', 'healing_hands', 'remove_curse', 'depth_of_knowledge', 'remove_madness', 'demonic_specialism', 'demonology',
        'pentacle_of_protection', 'ritual_of_summoning', 'banishing_a_demon', 'pact_of_the_dark_companion', 'fearless', 'intimidating', 
        'iron_will', 'tireless', 'true_grit', 'breakfall', 'climbing', 'jumping', 'pick_lock', 'oak_fists', 'raw_power', 'raw_power_alternate', 
        'elemental_essence', 'elemental_resistance', 'bowyer_fletcher', 'precise_shot', 'favoured_weapon', 'favoured_terrain', 'set_traps', 'forage',
        'stillness', 'hunters_mind', 'false_trail', 'climb', 'penetrating_shot', 'sneak_attack', 'soldier', 'master_fletcher', 'master_tracker', 'fast_shot'
    ], function(values) {
        // Extract and parse values
        let skillsList = [];
        // Loop through all values and extract non-zero, defined skills
        for (let skill in values) {
            // Add this line to check for both undefined and 0 values
            if (values[skill] && values[skill] != 0) {
                let skillName = skill.replace(/_/g, ' ').toUpperCase();
                let skillRank = values[skill];  // Get the rank or value of the skill
                
                // Determine whether to use "rank" or "ranks"
                let rankText = (skillRank == 1) ? 'rank' : 'ranks';
                
                // Append the rank, appropriate word, and add a dot-point before each skill
                skillsList.push(`• ${skillName} (${skillRank} ${rankText})`);
            }
        }
        // Create a single string for skills
        let skillsText = skillsList.join('\n');

        // Set the skillsKnown attribute to be used in the HTML
        setAttrs({
            'skillsknown': skillsText
        });
    });
});

// Central Sheetworker Script for Pick Lock, Presence, Pilfer, Track, and pick_lock Chance Calculation
on("change:rank change:presence change:pick_lock change:finalintelligence change:finalreflexes change:pilfer change:track change:magic_hands", function() {
    getAttrs(["rank", "pick_lock", "finalintelligence", "finalreflexes", "presence", "pilfer", "track", "magic_hands"], function(values) {
        // Parse attribute values with default 0
        let pick_lock = parseInt(values['pick_lock'], 10) || 0;
        let intelligenceBonus = 0;
        let reflexesBonus = 0;
        let rank = parseInt(values['rank'], 10) || 1;
        let magicHands = parseInt(values['magic_hands'], 10) || 0;

        // Fetch finalIntelligence and finalReflexes values
        let finalIntelligence = parseInt(values["finalintelligence"], 10) || 0;
        let finalReflexes = parseInt(values["finalreflexes"], 10) || 0;
        
        // Calculate intelligence and reflexes bonuses
        if (finalIntelligence >= 16) {
            intelligenceBonus = 5;
        }
        if (finalReflexes >= 16) {
            reflexesBonus = 10;
        }
        
        // --- pick_lock Chance Calculation ---
        let pick_lockChance = 0;
        if (pick_lock === 1) {
            pick_lockChance = 30;
        } else if (pick_lock === 2) {
            pick_lockChance = 60;
        } else if (pick_lock === 3) {
            pick_lockChance = 90;
        }

        // --- Pilfer Modifier Calculation ---
        let pilfer = parseInt(values.pilfer, 10) || 0;
        let pilferModifier = 0;
        
        if (pilfer === 1) {
            pilferModifier = 4;
        } else if (pilfer === 2) {
            pilferModifier = 2;
        }
        
        if (magicHands === 1) {
            pilferModifier -= 1;
        }

        // --- Track Modifier Calculation ---
        let track = parseInt(values.track, 10) || 0;
        let trackModifier = 0;
        
        if (track === 1) {
            trackModifier = 0;
        } else if (track === 2) {
            trackModifier = 2;
        }

        // Calculate Presence score
        let presenceScore = Math.floor(rank / 3);
        
        // Calculate total pick_lock score
        let pick_lockScore = pick_lockChance + intelligenceBonus + reflexesBonus;

        // Set the new attribute values
        setAttrs({
            "pick_lockscore": pick_lockScore,
            "presencemodifier": presenceScore,
            "pilfermodifier": pilferModifier,
            "trackmodifier": trackModifier,
            "pick_lockchance": pick_lockChance
        });
    });
});


on('clicked:rollbasehpbutton', function() {
    // Get the selected profession, the current maxhp, and the custom profession modifier
    getAttrs(['profession', 'customprofessionmodifier'], function(values) {
        const profession = values.profession;
        const customProfessionModifier = parseInt(values.customprofessionmodifier, 10) || 0; // Default to 0 if empty or NaN
        
        // Roll a d6
        const roll = Math.floor(Math.random() * 6) + 1;
        
        // Calculate the bonus based on the profession
        let bonus = 0;
        if (profession === 'Knight') {
            bonus = 7;
        } else if (profession === 'Barbarian') {
            bonus = 9;
        } else if (['Sorcerer', 'Elementalist', 'Demonologist', 'Knave', 'Priest'].includes(profession)) {
            bonus = 4;
        } else if (['Mystic', 'Warlock', 'Assassin', 'Hunter'].includes(profession)) {
            bonus = 5;
        } else {
            // If the profession is custom, use the custom profession modifier
            bonus = customProfessionModifier;
        }

        // Calculate the final max HP
        const base_maxHP = roll + bonus;

        // Output the result to the maxhp attribute field
        setAttrs({
            base_maxhp: base_maxHP
        });
    });
});

// When the RollBaseStats button is clicked, calculate the stats
on('clicked:rollbasestatsbutton', function() {
    // Get the current base attributes
    getAttrs(['strength', 'reflexes', 'intelligence', 'psychictalent', 'looks'], function(values) {
        // Output the result to the Base Stats attribute fields
        setAttrs({
        });
    });
});

// When the Roll Base Characteristics button is clicked, roll 3d6 for each stat
on('clicked:rollbasestatsbutton', function() {
    // Function to roll 3d6 and return the result
    function roll3d6() {
        return Math.floor(Math.random() * 6) + 1 +
               Math.floor(Math.random() * 6) + 1 +
               Math.floor(Math.random() * 6) + 1;
    }
    
    // Roll 3d6 for each characteristic
    const strength = roll3d6();
    const reflexes = roll3d6();
    const intelligence = roll3d6();
    const psychictalent = roll3d6();
    const looks = roll3d6();
    
    // Output the result to the Base Stats attribute fields
    setAttrs({
        strength: strength,
        reflexes: reflexes,
        intelligence: intelligence,
        psychictalent: psychictalent,
        looks: looks
    });
});

// Listen for changes to the attr_mastered_spell attribute
on("change:mastered_spell", function(event) {
    getAttrs(["mastered_spell"], function(values) {
        // Retrieve the updated value of attr_mastered_spell
        let mastered_spell = values.mastered_spell;
        
        // Set the new value for attr_mastered_spell
        setAttrs({
            mastered_spell: mastered_spell
        });
    });
});
on('change:weapon_group_1 change:weapon_group_2', function() {
    getAttrs(['weapon_group_1', 'weapon_group_2'], function(values) {
        // Define the mapping of values to descriptions
        const weaponGroupDescriptions = {
            '1': 'Weapon Group I: Flail, Mace, Morningstar, Holy Water Sprinkler, Scourge, Warhammer',
            '2': 'Weapon Group II: Dagger, Shortsword, Sword',
            '3': 'Weapon Group III: Halberd, Staff, Spear, Footman\'s Flail, Pollaxe, War Lance',
            '4': 'Weapon Group IV: Two-handed Sword, Longsword',
            '5': 'Weapon Group V: Battleaxe, War Axe',
            '6': 'Weapon Group VI: Bow, Longbow',
            '7': 'Weapon Group VII: Crossbow, Javelin, Sling, Dagger, Rock, Throwing Spike, Arbalest',
            '8': 'Weapon Group VIII: Cudgel, Unarmed combat'
        };

        // Get the selected values
        const weaponGroup1 = values.weapon_group_1;
        const weaponGroup2 = values.weapon_group_2;

        // Set the descriptions based on the selected values
        const weaponGroup1Description = weaponGroupDescriptions[weaponGroup1] || '';
        const weaponGroup2Description = weaponGroupDescriptions[weaponGroup2] || '';

        // Update the attributes with the descriptions
        setAttrs({
            'weapon_group_1_description': weaponGroup1Description,
            'weapon_group_2_description': weaponGroup2Description
        });
    });
});

on("clicked:repeating_meleeweapons:equipoffhand", function(eventInfo) {
    const sourceId = eventInfo.sourceAttribute.split('_')[2]; // Extracting the ID of the repeating section row
    const prefix = `repeating_meleeweapons_${sourceId}_`;

    // Get the current magic bonus of the selected weapon
    getAttrs([`${prefix}magicmeleeweaponbonus`], function(values) {
        const magicBonus = values[`${prefix}magicmeleeweaponbonus`] || 0;

        // Set the ismaingauchedefenceweapon to '1' and update maingauchedefencebonus with magic bonus
        const update = {
            [`${prefix}ismaingauchedefenceweapon`]: '1', // Set the attribute to indicate it's equipped offhand
            'maingauchedefencebonus': magicBonus // Export the magic bonus to the main gauche defence bonus attribute
        };

        setAttrs(update);
    });
});

on("change:phantasm_attack change:phantasm_defence", function(eventinfo) {
    getAttrs(["phantasm_attack", "phantasm_defence"], function(values) {
        let attack = parseInt(values.phantasm_attack) || 0;
        let defence = parseInt(values.phantasm_defence) || 0;

        // Check which field triggered the change
        if (eventinfo.sourceAttribute === "phantasm_attack") {
            defence = 28 - attack; // Adjust defence
        } else if (eventinfo.sourceAttribute === "phantasm_defence") {
            attack = 28 - defence; // Adjust attack
        }

        setAttrs({
            phantasm_attack: attack,
            phantasm_defence: defence
        });
    });
});

</script>
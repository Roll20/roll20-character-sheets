<input type="hidden" name="attr_runeBag" />
<div class="sheet-container">
    <div class="tabs">
        <input type="radio" name='attr_gametype' value='rgs2' checked='checked'>
        <span for='rgs2'>RGS2</span>
        <input type="radio" name='attr_gametype' value='rgs3'>
        <span for='rgs2'>RGS3</span>
        <button type="action" name="act_character" >RGS2</button>
        <button type="action" name="act_current" >Current</button>
        <button type="action" name="act_rgs3" >RGS3</button>
        <button type="action" name="act_lifepath" >Lifepath</button>
    </div>
    <input type='hidden' class='tabstoggle' name='attr_sheetTab' value='character' />
   
    
    <div class="character">
        <div class="bio ability-box">
            <label class="playernamebox"><span class="labeltext">Player Name: </span><input class="biotext" type="text" name="attr_player_name" /></label>
            <label class="charnamebox"><span class="labeltext">Character Name: </span><input class="biotext" type="text" name="attr_character_name" /></label>
            <label class="archtypebox"><span class="labeltext">Archtype: </span><input class="biotext" type="text" name="attr_archtype" /></label>
            <label class="levelbox"><span class="labeltext"> Level: </span><input type="number" name="attr_level" /></label>
            <input type="text" name="attr_voidrune" class="single-char voidrunebox" />
        </div>
        <div class="stats ability-box">
            <br>
            <span class="bio-stat-box sizebox"><label class="labeltext">Size: </label><span class="sizecontainer stat-image-container stat-container"><input type="number" value=4 name="attr_basesize" /></span></span>
            <span class="bio-stat-box movebox"><label class="labeltext">Move: </label><span class="movecontainer stat-image-container stat-container"><input type="number" value=4 name="attr_basemove" /></span></span>
            <span class="bio-stat-box essencebox"><label class="labeltext">Essence: </label><span class="essencecontainer stat-image-container stat-container"><input type="number" name="attr_essence" /></span></span>
            <span class="bio-stat-box destinybox"><label class="labeltext">Destiny: </label><span class="destinycontainer stat-image-container stat-container h"><input type="number" name="attr_destiny" /></span></span>
        </div>
        <div class="skills ability-box">
            <div class="skills ability-wrapper">
                <span class="skillname labeltext">Skills:</span>
                <span class="skillrank labeltext">Rank:</span>
                <fieldset class="repeating_skills">
                    <input class="skillname" type="text" name="attr_skills_name" />
                    <input class="skillrank" type="number" name="attr_skill_rank" />
                    <input type="checkbox" class="toggle-show" />
                    <div class="skilldetails showable">
                        <label class="labeltext modlabel">Description:</label><textarea class="skilldesc textbox" name="attr_skills_description"></textarea>
                    </div>
                </fieldset>
            </div>
        </div>
        <div class="passives ability-box">
            <span class="checkbox"></span>
            <span class="passivename labeltext">Passive:</span>
            <span class="labeltext type">Ability Type:</span>
            <span class="labeltext toggle-show">Show</span>
            <fieldset class="repeating_passives">
                <input class="checkbox" type="checkbox" name="attr_passives_toggle" value="1" />
                <input class="passivename" type="text" name="attr_passives_name" />
                <select class="type type" name="attr_passives_type">
                    <option value="feat">Feat</option>
                    <option value="enchantment">Enchantment</option>
                    <option value="rune">Rune</option>
                    <option value="shadow">Shadow</option>
                    <option value="primal">Primal</option>
                    <option value="bloodline_primal">Bloodline Primal</option>
                    <option value="summon">Summon</option>
                </select>
                <input type="checkbox" class="toggle-show" />
                <div class="passivedetails showable">
                    <label class="modlabel labeltext">Description:</label><br><textarea class="passivedesc textbox" name="attr_passives_description"></textarea>
                    <label class="modlabel labeltext">PDF:<input class="mod" type='number' name='attr_passives_pdf' /></label>
                    <label class="modlabel labeltext">Pierce:<input class="mod" type="number" name='attr_passives_pierce' /></label>
                    <label class="modlabel labeltext">Focus:<input class="mod" type="number" name='attr_passives_focus' /></label>
                    <label class="modlabel labeltext">Reach/<br>Range:<input class="mod" type="number" name='attr_passives_reach' /></label>
                    <label class="modlabel labeltext">Heal:<input class="mod" type="number" name='attr_passives_heal' /></label>
                    <label class="modlabel labeltext">Recover:<input class="mod" type="number" name='attr_passives_recover' /></label>
                    <label class="modlabel labeltext">Size:<input class="mod" type="number" name='attr_passives_size' /></label>
                    <label class="modlabel labeltext">Move:<input class="mod" type="number" name='attr_passives_move' /></label>
                    <label class="modlabel labeltext">PPF:<input class="mod" type="number" name='attr_passives_ppf' /></label>
                    <label class="modlabel labeltext">Parry:<input class="mod" type="number" name='attr_passives_pparry' /></label>
                    <label class="modlabel labeltext">Evade:<input class="mod" type="number" name='attr_passives_evade' /></label>
                    <label class="modlabel labeltext">MDF:<input class="mod" type="number" name='attr_passives_mdf' /></label>
                    <label class="modlabel labeltext">MPF:<input class="mod" type="number" name='attr_passives_mpf' /></label>
                    <label class="modlabel labeltext">MParry:<input class="mod" type="number" name='attr_passives_mparry' /></label>
                    <label class="modlabel labeltext">SDF:<input class="mod" type="number" name='attr_passives_sdf' /></label>
                    <label class="modlabel labeltext">SPF:<input class="mod" type="number" name='attr_passives_spf' /></label>
                    <label class="modlabel labeltext">SParry:<input class="mod" type="number" name='attr_passives_sparry' /></label>
                    <label class="modlabel labeltext">SoAF:<input class="mod" type="number" name='attr_passives_soaf' /></label>
                    <label class="modlabel labeltext">SoDF:<input class="mod" type="number" name='attr_passives_sodf' /></label>
                    <label class="modlabel labeltext">SoPR:<input class="mod" type="number" name='attr_passives_sopr' /></label>
                </div>
            </fieldset>
        </div>
        <div class="actives ability-box">
            <br>
            <span class="checkbox"></span>
            <span class="rune labeltext">Rune:</span>
            <span class="activename labeltext">Active:</span>
            <span class="type labeltext">Ability Type:</span>
            <span class="pmeta labeltext">PMeta:</span>
            <span class="mmeta labeltext">MMeta:</span>
            <span class="smeta labeltext">SMeta:</span>
            <span class="labeltext toggle-show">Show</span>
            <fieldset class="repeating_actives">
                <input class="checkbox" type="checkbox" name="attr_actives_toggle" value="1" />
                <select name="attr_rune" class="rune bluetext" onchange="this.className=this.options[this.selectedIndex].className">
                    <option value="0">----</option>
                    <option value="void">&#x25AF;</option>
                    <option value="tiwaz"><span>&#x16CF;</span></option>
                    <option value="berkano"><span>&#x16D2;</span></option>
                    <option value="ehwo"><span>&#x16D6;</span></option>
                    <option value="mann"><span>&#x16D7;</span></option>
                    <option value="claguz"><span>&#x16D9;</span></option>
                    <option value="ing"><span>&#x16DD;</span></option>
                    <option value="dagaz"><span>&#x16DE;</span></option>
                    <option value="othala"><span>&#x16DF;</span></option>
                    <option value="hagalaz"><span>&#x16BA;</span></option>
                    <option value="naudhneed"><span>&#x16BE;</span></option>
                    <option value="isaice"><span class="bluetext">&#x16C1;</span></option>
                    <option value="jethe" class="bluetext"><span>&#x16C3;</span></option>
                    <option value="eihwas"><span class="bluetext">&#x16C7;</span></option>
                    <option value="pertho" class="bluetext"><span>&#x16C8;</span></option>
                    <option value="elhaz"><span>&#x16C9;</span></option>
                    <option value="sowsun"><span>&#x16CA;</span></option>
                    <option value="fehu"><span style="background-color:green">&#x16A0;</span></option>
                    <option value="uruz"><span>&#x16A2;</span></option>
                    <option value="thurisaz"><span>&#x16A6;</span></option>
                    <option value="cansuz"><span>&#x16A8;</span></option>
                    <option value="raidho"><span>&#x16B1;</span></option>
                    <option value="kenaz"><span>&#x16B2;</span></option>
                    <option value="gebgift"><span>&#x16B7;</span></option>
                    <option value="wunjo"><span>&#x16B9;</span></option>
                    <option value="physical" class="redtext"><span>Physical</span></option>
                    <option value="mental"><span class="bluetext">Mental</span></option>
                    <option value="spiritual">Spiritual</option>
                </select>
                <input class="activename" type="text" name="attr_avtivename" />
                <select name="attr_activetype" class="activetype type">
                    <option value="manoeuvre">Manoeuvre</option>
                    <option value="stance">Stance</option>
                    <option value="interrupt">Interrupt</option>
                    <option value="spell">Spell</option>
                    <option value="runespell">Rune Spell</option>
                    <option value="seithspell">Seith Spell</option>
                    <option value="spellsong">Spell Song</option>
                    <option value="shapechange">Shapechange</option>
                    <option value="transform">Transform</option>
                    <option value="gate">Gate</option>
                    <option value="alkaspell">Alka Spell</option>
                    <option value="shade">Shade</option>
                    <option value="snare">Snare</option>
                    <option value="verwandlungspell">Verwandlung Spell</option>
                    <option value="verwandlungalkaspell">Verwandlung Alka Spell</option>
                    <option value="faith">Faith</option>
                    <option value="voidspell">Void Spell</option>
                    <option value="divinespell">Divine Spell</option>
                    <option value="creationspell">Creation Spell</option>
                    <option value="feat">Providence</option>
                </select>
                <select name="attr_pmeta" class="pmeta metatag">
                    <option value="abate">Abate</option>
                    <option value="absorb">Absorb</option>
                    <option class="meta" value="amplify">Amplify</option>
                    <option value="area">Area</option>
                    <option value="cannibalize">Cannibalize</option>
                    <option value="combo">Combo</option>
                    <option value="cluster">Cluster</option>
                    <option value="deflect">Deflect</option>
                    <option value="dodge">Dodge</option>
                    <option value="echo">Echo</option>
                    <option value="eldritch">Eldritch</option>
                    <option value="expanse">Expanse</option>
                    <option value="fortify">Fortify</option>
                    <option value="gloom">Gloom</option>
                    <option value="maintain">Maintain</option>
                    <option value="multi">Multi</option>
                    <option value="open">Open</option>
                    <option value="permanency">Permanency</option>
                    <option value="piercer">Piercer</option>
                    <option value="proficiency">Proficiency</option>
                    <option value="range">Range</option>
                    <option value="sight">Sight</option>
                    <option value="stutter">Stutter</option>
                    <option value="weapon">Weapon</option>
                </select>
                <select name="attr_mmeta" class="mmeta metatag">
                    <option value="abate">Abate</option>
                    <option value="absorb">Absorb</option>
                    <option value="amplify">Amplify</option>
                    <option value="area">Area</option>
                    <option value="cannibalize">Cannibalize</option>
                    <option value="combo">Combo</option>
                    <option value="cluster">Cluster</option>
                    <option value="deflect">Deflect</option>
                    <option value="dodge">Dodge</option>
                    <option value="echo">Echo</option>
                    <option value="eldritch">Eldritch</option>
                    <option value="expanse">Expanse</option>
                    <option value="fortify">Fortify</option>
                    <option value="gloom">Gloom</option>
                    <option value="maintain">Maintain</option>
                    <option value="multi">Multi</option>
                    <option value="open">Open</option>
                    <option value="permanency">Permanency</option>
                    <option value="piercer">Piercer</option>
                    <option value="proficiency">Proficiency</option>
                    <option value="range">Range</option>
                    <option value="sight">Sight</option>
                    <option value="stutter">Stutter</option>
                    <option value="weapon">Weapon</option>
                </select>
                <select name="attr_smeta" class="smeta metatag">
                    <option value="abate">Abate</option>
                    <option value="absorb">Absorb</option>
                    <option value="amplify">Amplify</option>
                    <option value="area">Area</option>
                    <option value="cannibalize">Cannibalize</option>
                    <option value="combo">Combo</option>
                    <option value="cluster">Cluster</option>
                    <option value="deflect">Deflect</option>
                    <option value="dodge">Dodge</option>
                    <option value="echo">Echo</option>
                    <option value="eldritch">Eldritch</option>
                    <option value="expanse">Expanse</option>
                    <option value="fortify">Fortify</option>
                    <option value="gloom">Gloom</option>
                    <option value="maintain">Maintain</option>
                    <option value="multi">Multi</option>
                    <option value="open">Open</option>
                    <option value="permanency">Permanency</option>
                    <option value="piercer">Piercer</option>
                    <option value="proficiency">Proficiency</option>
                    <option value="range">Range</option>
                    <option value="sight">Sight</option>
                    <option value="stutter">Stutter</option>
                    <option value="weapon">Weapon</option>
                </select>
                <input type="checkbox" class="toggle-show" />
                <div class="activedetails showable">
                    <label class="desclabel labeltext">Description:<textarea name="attr_actives_description" class="activedesc textbox"></textarea></label>
                    <label class="modlabel labeltext">PDF:<input class="mod" type='number' name='attr_actives_pdf' /></label>
                    <label class="modlabel labeltext">Pierce:<input class="mod" type="number" name='attr_actives_pierce' /></label>
                    <label class="modlabel labeltext">Reach/<br>Range:<input class="mod" type="number" name='attr_actives_reach' /></label>
                    <label class="modlabel labeltext">Size:<input class="mod" type="number" name='attr_actives_size' /></label>
                    <label class="modlabel labeltext">Move:<input class="mod" type="number" name='attr_actives_move' /></label>
                    <label class="modlabel labeltext">Heal:<input class="mod" type="number" name='attr_actives_heal' /></label>
                    <label class="modlabel labeltext">Recover:<input class="mod" type="number" name='attr_actives_recover' /></label>
                    <label class="modlabel labeltext">Focus:<input class="mod" type="number" name='attr_actives_focus' /></label>
                    <label class="modlabel labeltext">PPF:<input class="mod" type="number" name='attr_actives_ppf' /></label>
                    <label class="modlabel labeltext">Parry:<input class="mod" type="number" name='attr_actives_pparry' /></label>
                    <label class="modlabel labeltext">Evade:<input class="mod" type="number" name='attr_actives_evade' /></label>
                    <label class="modlabel labeltext">MDF:<input class="mod" type="number" name='attr_actives_mdf' /></label>
                    <label class="modlabel labeltext">MPF:<input class="mod" type="number" name='attr_actives_mpf' /></label>
                    <label class="modlabel labeltext">MParry:<input class="mod" type="number" name='attr_actives_mparry' /></label>
                    <label class="modlabel labeltext">SDF:<input class="mod" type="number" name='attr_actives_sdf' /></label>
                    <label class="modlabel labeltext">SPF:<input class="mod" type="number" name='attr_actives_spf' /></label>
                    <label class="modlabel labeltext">SParry:<input class="mod" type="number" name='attr_actives_sparry' /></label>
                </div>
            </fieldset>
        </div>
        <div class="socials ability-box">
            <br>
            <span class="checkbox"></span>
            <span class="rune labeltext">Rune:</span>
            <span class="socialname labeltext">Social:</span>
            <span class="type labeltext">Ability Type:</span>
            <span class="pmeta labeltext">PMeta:</span>
            <span class="mmeta labeltext">MMeta:</span>
            <span class="smeta labeltext">SMeta:</span>
            <span class="labeltext toggle-show">Show</span>
            <fieldset class="repeating_socials">
                <input class="checkbox" type="checkbox" name="attr_socials_toggle" value="1" />
                <select name="attr_rune" class="rune bluetext" onchange="this.className=this.options[this.selectedIndex].className">
                    <option value="void">&#x16F1;</option>
                    <option value="tiwaz"><span>&#x16CF;</span></option>
                    <option value="berkano"><span>&#x16D2;</span></option>
                    <option value="ehwo"><span>&#x16D6;</span></option>
                    <option value="mann"><span>&#x16D7;</span></option>
                    <option value="claguz"><span>&#x16D9;</span></option>
                    <option value="ing"><span>&#x16DD;</span></option>
                    <option value="dagaz"><span>&#x16DE;</span></option>
                    <option value="othala"><span>&#x16DF;</span></option>
                    <option value="hagalaz"><span>&#x16BA;</span></option>
                    <option value="naudhneed"><span>&#x16BE;</span></option>
                    <option value="isaice"><span class="bluetext">&#x16C1;</span></option>
                    <option value="jethe" class="bluetext"><span>&#x16C3;</span></option>
                    <option value="eihwas"><span class="bluetext">&#x16C7;</span></option>
                    <option value="pertho" class="bluetext"><span>&#x16C8;</span></option>
                    <option value="elhaz"><span>&#x16C9;</span></option>
                    <option value="sowsun"><span>&#x16CA;</span></option>
                    <option value="fehu"><span style="background-color:green">&#x16A0;</span></option>
                    <option value="uruz"><span>&#x16A2;</span></option>
                    <option value="thurisaz"><span>&#x16A6;</span></option>
                    <option value="cansuz"><span>&#x16A8;</span></option>
                    <option value="raidho"><span>&#x16B1;</span></option>
                    <option value="kenaz"><span>&#x16B2;</span></option>
                    <option value="gebgift"><span>&#x16B7;</span></option>
                    <option value="wunjo"><span>&#x16B9;</span></option>
                    <option value="physical" class="redtext"><span>Physical</span></option>
                    <option value="mental"><span class="bluetext">Mental</span></option>
                    <option value="spiritual">Spiritual</option>
                </select>
                <input class="socialname" type="text" name="attr_socialname" />
                <select name="attr_type" class="type type">
                    <option value="socialattack">Social Attack</option>
                    <option value="socialdefend">Social Defend</option>
                    <option value="question">Question</option>
                    <option value="socialprovoke">Provoke</option>
                    <option value="socialcompel">Compel</option>
                    <option value="socialdefendvsquestion">Defend vs Question</option>
                    <option value="socialdefendvsprovoke">Defend vs Provoke</option>
                    <option value="socialdefendvscompel">Defend vs Compel</option>
                </select>
                <select name="attr_pmeta" class="pmeta metatag">
                    <option value="abate">Abate</option>
                    <option value="area">Area</option>
                    <option value="aid">Aid</option>
                    <option value="amplify">Amplify</option>
                    <option value="combo">Combo</option>
                    <option value="maintain">Maintain</option>
                    <option value="master">Mastery</option>
                    <option value="multi">Multi</option>
                    <option value="range">Range</option>
                    <option value="resist">Resist</option>
                    <option value="swift">Swift</option>
                    <option value="sinister">Sinister</option>
                </select>
                <select name="attr_mmeta" class="mmeta metatag">
                    <option value="abate">Abate</option>
                    <option value="area">Area</option>
                    <option value="aid">Aid</option>
                    <option value="amplify">Amplify</option>
                    <option value="combo">Combo</option>
                    <option value="maintain">Maintain</option>
                    <option value="master">Mastery</option>
                    <option value="multi">Multi</option>
                    <option value="range">Range</option>
                    <option value="resist">Resist</option>
                    <option value="swift">Swift</option>
                    <option value="sinister">Sinister</option>
                </select>
                <select name="attr_smeta" class="smeta metatag">
                    <option value="abate">Abate</option>
                    <option value="area">Area</option>
                    <option value="aid">Aid</option>
                    <option value="amplify">Amplify</option>
                    <option value="combo">Combo</option>
                    <option value="maintain">Maintain</option>
                    <option value="master">Mastery</option>
                    <option value="multi">Multi</option>
                    <option value="range">Range</option>
                    <option value="resist">Resist</option>
                    <option value="swift">Swift</option>
                    <option value="sinister">Sinister</option>
                </select>
                <input type="checkbox" class="toggle-show" />
                <div class="socialdetails showable">
                    <label class="desclabel labeltext">Description:<textarea name="attr_actives_description" class="socialdesc textbox"></textarea></label>
                    <label class="modlabel labeltext">SoAF:<input class="mod" type="number" name='attr_socials_soaf' /></label>
                    <label class="modlabel labeltext">SoDF:<input class="mod" type="number" name='attr_socials_sodf' /></label>
                    <label class="modlabel labeltext">SoPR:<input class="mod" type="number" name='attr_socials_sopr' /></label>
                    <label class="modlabel labeltext">PDF:<input class="mod" type='number' name='attr_socials_pdf' /></label>
                    <label class="modlabel labeltext">Move:<input class="mod" type="number" name='attr_socials_move' /></label>
                    <label class="modlabel labeltext">Heal:<input class="mod" type="number" name='attr_socials_heal' /></label>
                    <label class="modlabel labeltext">Focus:<input class="mod" type="number" name='attr_socials_focus' /></label>
                    <label class="modlabel labeltext">PPF:<input class="mod" type="number" name='attr_socials_ppf' /></label>
                    <label class="modlabel labeltext">Parry:<input class="mod" type="number" name='attr_socials_pparry' /></label>
                    <label class="modlabel labeltext">Evade:<input class="mod" type="number" name='attr_socials_evade' /></label>
                    <label class="modlabel labeltext">MDF:<input class="mod" type="number" name='attr_socials_mdf' /></label>
                    <label class="modlabel labeltext">MPF:<input class="mod" type="number" name='attr_socials_mpf' /></label>
                    <label class="modlabel labeltext">MParry:<input class="mod" type="number" name='attr_socials_mparry' /></label>
                    <label class="modlabel labeltext">SDF:<input class="mod" type="number" name='attr_socials_sdf' /></label>
                    <label class="modlabel labeltext">SPF:<input class="mod" type="number" name='attr_socials_spf' /></label>
                    <label class="modlabel labeltext">SParry:<input class="mod" type="number" name='attr_socials_sparry' /></label>
                </div>
            </fieldset>
        </div>        
        
        <div class="equipment ability-box">
            <span class="checkbox"></span>
            <span class="equipname labeltext">Equipment:</span>
            <span class="textbox labeltext">Description:</span>
            <span class="labeltext toggle-show">Show</span>
            <fieldset class="repeating_equipment">
                <input class="checkbox" type="checkbox" name="attr_equipment_toggle" value="1" />
                <input class="equipname" type="text" name="attr_equipment_name" />
                <textarea class="equipdesc textbox" name="attr_equipment_description"></textarea>
                <input type="checkbox" class="toggle-show" />
                <div class="equipdetails showable">
                    <label class="modlabel labeltext">PDF:<input class="mod" type='number' name='attr_equipment_pdf' /></label>
                    <label class="modlabel labeltext">Pierce:<input class="mod" type="number" name='attr_equipment_pierce' /></label>
                    <label class="modlabel labeltext">Reach/<br>Range:<input class="mod" type="number" name='attr_equipment_reach' /></label>
                    <label class="modlabel labeltext">Heal:<input class="mod" type="number" name='attr_equipment_heal' /></label>
                    <label class="modlabel labeltext">Recover:<input class="mod" type="number" name='attr_equipment_recover' /></label>
                    <label class="modlabel labeltext">Size:<input class="mod" type="number" name='attr_equipment_size' /></label>
                    <label class="modlabel labeltext">Move:<input class="mod" type="number" name='attr_equipment_move' /></label>
                    <label class="modlabel labeltext">Focus:<input class="mod" type="number" name='attr_equipment_focus' /></label>
                    <label class="modlabel labeltext">PPF:<input class="mod" type="number" name='attr_equipment_ppf' /></label>
                    <label class="modlabel labeltext">Parry:<input class="mod" type="number" name='attr_equipment_pparry' /></label>
                    <label class="modlabel labeltext">Evade:<input class="mod" type="number" name='attr_equipment_evade' /></label>
                    <label class="modlabel labeltext">MDF:<input class="mod" type="number" name='attr_equipment_mdf' /></label>
                    <label class="modlabel labeltext">MPF:<input class="mod" type="number" name='attr_equipment_mpf' /></label>
                    <label class="modlabel labeltext">MParry:<input class="mod" type="number" name='attr_equipment_mparry' /></label>
                    <label class="modlabel labeltext">SDF:<input class="mod" type="number" name='attr_equipment_sdf' /></label>
                    <label class="modlabel labeltext">SPF:<input class="mod" type="number" name='attr_equipment_spf' /></label>
                    <label class="modlabel labeltext">SParry:<input class="mod" type="number" name='attr_equipment_sparry' /></label>
                    <label class="modlabel labeltext">SoAF:<input class="mod" type="number" name='attr_equipment_soaf' /></label>
                    <label class="modlabel labeltext">SoDF:<input class="mod" type="number" name='attr_equipment_sodf' /></label>
                    <label class="modlabel labeltext">SoPR:<input class="mod" type="number" name='attr_equipment_sopr' /></label>
                </div>
            </fieldset>
        </div>
        <div class="notes ability-box">
            <label class="labeltext">Notes:</label>
            <textarea class="notebox" name="attr_notes"></textarea>
        </div>
    </div>
    <div class="current">
        <div class="conditions grid-container"></div>
        <div class="condition blind grid-element">
            <input class="blind numbox" type="number" value="0" name="attr_blind" />
        </div>
        <div class="condition degen-curse grid-element">
            <input class="degen numbox" type="number" value="0" name="attr_degen" />
            <input class="curse numbox" type="number" value="0" name="attr_curse" />
        </div>
        <div class="condition taunt grid-element">
            <input class="taunt numbox" type="number" value="0" name="attr_taunt" />
        </div>
        <div class="condition impeded grid-element">
            <input class="impeded numbox" type="number" value="0" name="attr_impeded" />
        </div>
        <div class="condition shroud grid-element">
            <input class="shroud numbox" type="number" value="0" name="attr_shroud" />
        </div>
        <div class="condition possession grid-element">
            <input class="possession numbox" type="number" value="0" name="attr_possession" />
        </div>
        <div class="condition rage grid-element">
            <input class="rage numbox" type="number" value="0" name="attr_rage" />
        </div>
        <div class="condition vulnerable grid-element">
            <input class="vulnerable numbox" type="number" value="0" name="attr_vulnerable" />
        </div>
        <div class="condition aura grid-element">
            <input class="aura numbox" type="number" value="0" name="attr_aura" />
        </div>
        <div class="derived grid-container">
            <div class="derived grid-element pdf">
                <label class="derived-stat-label">Physical<br>DF: </label>
                <span class="stat-container"><input type="number" name="attr_pdf" /></span>
            </div>
            <div class="derived grid-element pierce">
                <label class="derived-stat-label">Pierce: </label>
                <span class="stat-container"><input type="number" name="attr_pierce" /></span>
            </div>
            <div class="derived grid-element focus">
                <label class="derived-stat-label">Focus: </label>
                <span class="stat-container"><input type="number" name="attr_focus" /></span>
            </div>
            <div class="derived grid-element heal">
                <label class="derived-stat-label">Heal:</label>
                <span class="stat-container"><input type="number" name="attr_heal" /></span>
            </div>
            <div class="derived grid-element size">
                <label class="derived-stat-label">Size:</label>
                <span class="stat-container"><input type="number" name="attr_size" /></span>
            </div>
            <div class="derived grid-element move">
                <label class="derived-stat-label">Movement:</label>
                <span class="stat-container"><input type="number" name="attr_move" /></span>
            </div>
            <div class="derived grid-element ppf">
                <label class="derived-stat-label">Physical<br>PF: </label>
                <span class="stat-container"><input type="number" name="attr_ppf" /></span>
            </div>
            <div class="derived grid-element pparry">
                <label class="derived-stat-label">Physical<br>Parry: </label>
                <span class="stat-container"><input type="number" name="attr_pparry" /></span>
            </div>
            <div class="derived grid-element evade">
                <label class="derived-stat-label">Evade: </label>
                <span class="stat-container"><input type="number" name="attr_evade" /></span>
            </div>
            <div class="derived grid-element mdf">
                <label class="derived-stat-label">Mental<br>DF: </label>
                <span class="stat-container"><input type="number" name="attr_mdf" /></span>
            </div>
            <div class="derived grid-element mpf">
                <label class="derived-stat-label">Mental<br>PF: </label>
                <span class="stat-container"><input type="number" name="attr_mpf" /></span>
            </div>
            <div class="derived grid-element mparry">
                <label class="derived-stat-label">Mental<br>Parry: </label>
                <span class="stat-container"><input type="number" name="attr_mparry" /></span>
            </div>
            <div class="derived grid-element sdf">
                <label class="derived-stat-label">Spiritual<br>DF: </label>
                <span class="stat-container"><input type="number" name="attr_sdf" /></span>
            </div>
            <div class="derived grid-element spf">
                <label class="derived-stat-label">Spiritual<br>PF: </label>
                <span class="stat-container"><input type="number" name="attr_spf" /></span>
            </div>
            <div class="derived grid-element sparry">
                <label class="derived-stat-label">Spiritual<br>Parry: </label>
                <span class="stat-container"><input type="number" name="attr_sparry" /></span>
            </div>
            <div class="derived grid-element soaf">
                <label class="derived-stat-label">Social<br>Attack: </label>
                <span class="stat-container"><input type="number" name="attr_soaf" /></span>
            </div>
            <div class="derived grid-element sodf">
                <label class="derived-stat-label">Social<br>Defend: </label>
                <span class="stat-container"><input type="number" name="attr_sodf" /></span>
            </div>
            <div class="derived grid-element sopr">
                <label class="derived-stat-label">Social<br>Protection: </label>
                <span class="stat-container"><input type="number" name="attr_sopr" /></span>
            </div>
        </div>
    </div>
    <div class="rgs3">
        <div class="bio ability-box">
            <input class="playernamebox text-container" type="text" name="attr_player_name" />
            <input class="charnamebox text-container" type="text" name="attr_character_name" />
            <span class="stat-container levelbox"><input class="levelbox stat-container" type="number" name="attr_level" /></span>
            <span class="stat-container essencebox"><input type="number" name="attr_essence" /></span>
            <span class="stat-container destinybox"><input type="number" name="attr_destiny" /></span>
            <span class="basesizebox stat-container"><input type="number" value=4 name="attr_basesize" /></span>
            <span class="healbox stat-container"><input type="number" name="attr_heal" /></span>
            <span class="movebox stat-container"><input type="number" name="attr_move" /></span>
            <span class="focusbox stat-container"><input type="number" name="attr_focus" /></span>
            <span class="sizebox stat-container"><input type="number" name="attr_size" /></span>
            <input class="archtypebox text-container" type="text" name="attr_archtype" />
        </div>
        <div class="currentstats">
            <div class="statgrid">
                <div class="grid-element soaf">
                    <span class="derived stat-container"><input class="labeltext" type="number" name="attr_soaf" /></span>
                </div>
                <div class="grid-element sopr">
                    <span class="derived stat-container"><input class="labeltext" type="number" name="attr_sopr" /></span>
                </div>
                <div class="grid-element sodf">
                    <span class="derived stat-container"><input class="labeltext" type="number" name="attr_sodf" /></span>
                </div>
                <div class="grid-element pdf">
                    <span class="derived stat-container"><input class="labeltext" type="number" name="attr_pdf" /></span>
                </div>
                <div class="grid-element ppf">
                    <span class="derived stat-container"><input class="labeltext" type="number" name="attr_ppf" /></span>
                </div>
                <div class="grid-element pparry">
                    <span class="derived stat-container"><input class="labeltext" type="number" name="attr_pparry" /></span>
                </div>
                <div class="grid-element mdf">
                    <span class="derived stat-container"><input class="labeltext" type="number" name="attr_mdf" /></span>
                </div>
                <div class="grid-element mpf">
                    <span class="derived stat-container"><input class="labeltext" type="number" name="attr_mpf" /></span>
                </div>
                <div class="grid-element mparry">
                    <span class="derived stat-container"><input class="labeltext" type="number" name="attr_mparry" /></span>
                </div>
                <div class="grid-element sdf">
                    <span class="derived stat-container"><input class="labeltext" type="number" name="attr_sdf" /></span>
                </div>
                <div class="grid-element spf">
                    <span class="derived stat-container"><input class="labeltext" type="number" name="attr_spf" /></span>
                </div>
                <div class="grid-element sparry">
                    <span class="derived stat-container"><input class="labeltext" type="number" name="attr_sparry" /></span>
                </div>
            </div>
        </div>
        <div class="actives ability-box">
            <br>
            <span class="checkbox"></span>
            <span class="rune-container labeltext">Rune:</span>
            <span class="activename labeltext">   Active:</span>
            <span class="type-container labeltext">Type:</span>
            <span class="labeltext toggle-show">Show</span>
            <fieldset class="repeating_actives">
                <input class="checkbox" type="checkbox" name="attr_actives_toggle" value="1" />
                <div class="rune-container">
                    <div class="rune-child">
                        <input type="checkbox" name="attr_void" class="rune void" value="void" />
                        <span>&#x25AF;</span>
                        <input type="checkbox" name="attr_fehu" class="rune fehu" value="fehu" />
                        <span class="green">&#x16A0;</span>
                        <input type="checkbox" name="attr_uruz" class="rune uruz" value="uruz" />
                        <span class="green">&#x16A2;</span>
                        <input type="checkbox" name="attr_thurisaz" class="rune thurisaz" value="thurisaz" />
                        <span class="green">&#x16A6;</span>
                        <input type="checkbox" name="attr_cansuz" class="rune cansuz" value="cansuz" />
                        <span class="green">&#x16A8;</span>
                        <input type="checkbox" name="attr_raidho" class="rune raidho" value="raidho" />
                        <span class="green">&#x16B1;</span>
                        <input type="checkbox" name="attr_kenaz" class="rune kenaz" value="kenaz" />
                        <span class="green">&#x16B2;</span>
                        <input type="checkbox" name="attr_gebgift" class="rune gebgift" value="gebgift" />
                        <span class="green">&#x16B7;</span>
                        <input type="checkbox" name="attr_wunjo" class="rune wunjo" value="wunjo" />
                        <span class="green">&#x16B9;</span>
                        <input type="checkbox" name="attr_hagalaz" class="rune hagalaz" value="hagalaz" />
                        <span class="blue">&#x16BA;</span>
                        <input type="checkbox" name="attr_naudhneed" class="rune naudhneed" value="naudhneed" />
                        <span class="blue">&#x16BE;</span>
                        <input type="checkbox" name="attr_isaice" class="rune isaice" value="isaice" />
                        <span class="blue">&#x16C1;</span>
                        <input type="checkbox" name="attr_jethe" class="rune jethe" value="jethe" />
                        <span class="blue">&#x16C3;</span>
                        <input type="checkbox" name="attr_eihwas" class="rune eihwas" value="eihwas" />
                        <span class="blue">&#x16C7;</span>
                        <input type="checkbox" name="attr_pertho" class="rune pertho" value="pertho" />
                        <span class="blue">&#x16C8;</span>
                        <input type="checkbox" name="attr_elhaz" class="rune elhaz" value="elhaz" />
                        <span class="blue">&#x16C9;</span>
                        <input type="checkbox" name="attr_sowsun" class="rune sowsun" value="sowsun" />
                        <span class="blue">&#x16CA;</span>
                        <input type="checkbox" name="attr_tiwaz" class="rune tiwaz" value="tiwaz" />
                        <span class="red">&#x16CF;</span>
                        <input type="checkbox" name="attr_berkano" class="rune berkano" value="berkano" />
                        <span class="red">&#x16D2;</span>
                        <input type="checkbox" name="attr_ehwo" class="rune ehwo" value="ehwo" />
                        <span class="red">&#x16D6;</span>
                        <input type="checkbox" name="attr_mann" class="rune mann" value="mann" />
                        <span class="red">&#x16D7;</span>
                        <input type="checkbox" name="attr_claguz" class="rune claguz" value="claguz" />
                        <span class="red">&#x16D9;</span>
                        <input type="checkbox" name="attr_dagaz" class="rune dagaz" value="dagaz" />
                        <span class="red">&#x16DE;</span>
                        <input type="checkbox" name="attr_ing" class="rune ing" value="ing" />
                        <span class="red">&#x16DD;</span>
                        <input type="checkbox" name="attr_othala" class="rune othala" value="othala" />
                        <span class="red">&#x16DF;</span>
                        <input type="checkbox" name="attr_physical" class="rune physical" value="physical" />
                        <span  style="font-size:0.7em" class="red">&#x258B;</span>
                        <input type="checkbox" name="attr_mental" class="rune mental" value="mental" />
                        <span  style="font-size:0.7em" class="blue">&#x258B;</span>
                        <input type="checkbox" name="attr_spiritual" class="rune spiritual" value="spiritual" />
                        <span  style="font-size:0.7em" class="green">&#x258B;</span>
                    </div>
                </div>
                <input class="activename" type="text" name="attr_avtivename" />
                <div class="type-container">
                    <div class="type-child">
                        <input type="checkbox" name="attr_manoeuvre" class="type manoeuvre" value="manoeuvre" />
                        <span>Manoeuvre<br></span>
                        <input type="checkbox" name="attr_stance" class="type stance" value="stance" />
                        <span>Stance<br></span>
                        <input type="checkbox" name="attr_interrupt" class="type interrupt" value="interrupt" />
                        <span>Interrupt<br></span>
                        <input type="checkbox" name="attr_spell" class="type spell" value="spell" />
                        <span>Spell<br></span>
                        <input type="checkbox" name="attr_feat" class="type feat" value="feat" />
                        <span>Feat<br></span>
                        <input type="checkbox" name="attr_alka" class="type alka" value="alka" />
                        <span>Alka<br></span>
                        <input type="checkbox" name="attr_runic" class="type runic" value="runic" /><span>Rune<br></span>
                        <input type="checkbox" name="attr_seith" class="type seith" value="seith" /><span>Seith<br></span>
                        <input type="checkbox" name="attr_song" class="type song" value="song" /><span>Song<br></span>
                        <input type="checkbox" name="attr_verwandlung" class="type verwandlung" value="verwandlung" /><span>Verwandlung<br></span>
                        <input type="checkbox" name="attr_shapechange" class="type shapechange" value="shapechange" /><span>Shapechange<br></span>
                        <input type="checkbox" name="attr_transform" class="type transform" value="transform" /><span>Transform<br></span>
                        <input type="checkbox" name="attr_divine" class="type divine" value="divine" /><span>Divine<br></span>
                        <input type="checkbox" name="attr_gate" class="type gate" value="gate" /><span>Gate<br></span>
                        <input type="checkbox" name="attr_shade" class="type shade" value="shade" /><span>Shade<br></span>
                        <input type="checkbox" name="attr_faith" class="type faith" value="faith" /><span>Faith<br></span>
                        <input type="checkbox" name="attr_snare" class="type snare" value="snare" /><span>Snare<br></span>
                        <input type="checkbox" name="attr_void" class="type void" value="voidtype" /><span>void<br></span>
                        <input type="checkbox" name="attr_creation" class="type creation" value="creation" /><span>Creation<br></span>
                        <input type="checkbox" name="attr_providence" class="type providence" value="providence" /><span>Providence<br></span>
                        <input type="checkbox" name="attr_unseelie" class="type unseelie" value="unseelie" /><span>Unseelie</span>
                    </div>
                </div>
                <input type="checkbox" class="toggle-show" />
                <div class="activedetails showable">
                    <select name="attr_pmeta" class="pmeta metatag">
                        <option value="abate">Abate</option>
                        <option value="absorb">Absorb</option>
                        <option value="aid">Aid</option>
                        <option class="meta" value="amplify">Amplify</option>
                        <option value="area">Area</option>
                        <option value="cannibalize">Cannibalize</option>
                        <option value="combo">Combo</option>
                        <option value="cluster">Cluster</option>
                        <option value="deflect">Deflect</option>
                        <option value="dodge">Dodge</option>
                        <option value="echo">Echo</option>
                        <option value="element">Element</option>
                        <option value="eldritch">Eldritch</option>
                        <option value="expanse">Expanse</option>
                        <option value="fortify">Fortify</option>
                        <option value="gloom">Gloom</option>
                        <option value="invert">Invert</option>
                        <option value="maintain">Maintain</option>
                        <option value="mastery">Mastery</option>
                        <option value="multi">Multi</option>
                        <option value="open">Open</option>
                        <option value="permanency">Permanency</option>
                        <option value="piercer">Piercer</option>
                        <option value="proficiency">Proficiency</option>
                        <option value="range">Range</option>
                        <option value="resist">Resist</option>
                        <option value="sight">Sight</option>
                        <option value="stutter">Stutter</option>
                        <option value="swift">Swift</option>
                        <option value="weapon">Weapon</option>
                    </select>
                    <select name="attr_mmeta" class="mmeta metatag">
                        <option value="abate">Abate</option>
                        <option value="absorb">Absorb</option>
                        <option value="aid">Aid</option>
                        <option class="meta" value="amplify">Amplify</option>
                        <option value="area">Area</option>
                        <option value="cannibalize">Cannibalize</option>
                        <option value="combo">Combo</option>
                        <option value="cluster">Cluster</option>
                        <option value="deflect">Deflect</option>
                        <option value="dodge">Dodge</option>
                        <option value="echo">Echo</option>
                        <option value="element">Element</option>
                        <option value="eldritch">Eldritch</option>
                        <option value="expanse">Expanse</option>
                        <option value="fortify">Fortify</option>
                        <option value="gloom">Gloom</option>
                        <option value="invert">Invert</option>
                        <option value="maintain">Maintain</option>
                        <option value="mastery">Mastery</option>
                        <option value="multi">Multi</option>
                        <option value="open">Open</option>
                        <option value="permanency">Permanency</option>
                        <option value="piercer">Piercer</option>
                        <option value="proficiency">Proficiency</option>
                        <option value="range">Range</option>
                        <option value="resist">Resist</option>
                        <option value="sight">Sight</option>
                        <option value="stutter">Stutter</option>
                        <option value="swift">Swift</option>
                        <option value="weapon">Weapon</option>
                    </select>
                    <select name="attr_smeta" class="smeta metatag">
                        <option value="abate">Abate</option>
                        <option value="absorb">Absorb</option>
                        <option value="aid">Aid</option>
                        <option class="meta" value="amplify">Amplify</option>
                        <option value="area">Area</option>
                        <option value="cannibalize">Cannibalize</option>
                        <option value="combo">Combo</option>
                        <option value="cluster">Cluster</option>
                        <option value="deflect">Deflect</option>
                        <option value="dodge">Dodge</option>
                        <option value="echo">Echo</option>
                        <option value="element">Element</option>
                        <option value="eldritch">Eldritch</option>
                        <option value="expanse">Expanse</option>
                        <option value="fortify">Fortify</option>
                        <option value="gloom">Gloom</option>
                        <option value="invert">Invert</option>
                        <option value="maintain">Maintain</option>
                        <option value="mastery">Mastery</option>
                        <option value="multi">Multi</option>
                        <option value="open">Open</option>
                        <option value="permanency">Permanency</option>
                        <option value="piercer">Piercer</option>
                        <option value="proficiency">Proficiency</option>
                        <option value="range">Range</option>
                        <option value="resist">Resist</option>
                        <option value="sight">Sight</option>
                        <option value="stutter">Stutter</option>
                        <option value="swift">Swift</option>
                        <option value="weapon">Weapon</option>
                    </select>
                    <label class="desclabel labeltext">Description:<textarea name="attr_actives_description" class="activedesc desc"></textarea></label>
                    <label class="modlabel labeltext">PDF:<input class="mod stat-container" type="number" name='attr_actives_pdf' /></label>
                    <label class="modlabel labeltext">Size:<input class="mod stat-container" type="number" name='attr_actives_size' /></label>
                    <label class="modlabel labeltext">Move:<input class="mod stat-container" type="number" name='attr_actives_move' /></label>
                    <label class="modlabel labeltext">Heal:<input class="mod stat-container" type="number" name='attr_actives_heal' /></label>
                    <label class="modlabel labeltext">Focus:<input class="mod stat-container" type="number" name='attr_actives_focus' /></label>
                    <label class="modlabel labeltext reach">Reach/<br>Range:<input class="mod stat-container" type="number" name='attr_actives_reach' /></label>
                    <label class="modlabel labeltext">PPF:<input class="mod stat-container" type="number" name='attr_actives_ppf' /></label>
                    <label class="modlabel labeltext">Parry:<input class="mod stat-container" type="number" name='attr_actives_pparry' /></label>
                    <label class="modlabel labeltext">MDF:<input class="mod stat-container" type="number" name='attr_actives_mdf' /></label>
                    <label class="modlabel labeltext">MPF:<input class="mod stat-container" type="number" name='attr_actives_mpf' /></label>
                    <label class="modlabel labeltext">MParry:<input class="mod stat-container" type="number" name='attr_actives_mparry' /></label>
                    <label class="modlabel labeltext">SDF:<input class="mod stat-container" type="number" name='attr_actives_sdf' /></label>
                    <label class="modlabel labeltext">SPF:<input class="mod stat-container" type="number" name='attr_actives_spf' /></label>
                    <label class="modlabel labeltext">SParry:<input class="mod stat-container" type="number" name='attr_actives_sparry' /></label>
                    <label class="modlabel labeltext">SoAF:<input class="mod stat-container" type="number" name='attr_actives_soaf' /></label>
                    <label class="modlabel labeltext">SoDF:<input class="mod stat-container" type="number" name='attr_actives_sodf' /></label>
                    <label class="modlabel labeltext">SoPR:<input class="mod stat-container" type="number" name='attr_actives_sopr' /></label>
                </div>
            </fieldset>
        </div>
        <div class="socials ability-box">
            <br>
            <span class="checkbox"></span>
            <span class="rune-container labeltext">Rune:</span>
            <span class="socialname labeltext">Social:</span>
            <span class="type-container labeltext">Type:</span>
            <span class="labeltext toggle-show">Show</span>
            <fieldset class="repeating_socials">
                <input class="checkbox" type="checkbox" name="attr_socials_toggle" value="1" />
                <div class="rune-container">
                    <div class="rune-child">
                        <input type="checkbox" name="attr_void" class="rune void" value="void" />
                        <span>&#x25AF;</span>
                        <input type="checkbox" name="attr_fehu" class="rune fehu" value="fehu" />
                        <span class="green">&#x16A0;</span>
                        <input type="checkbox" name="attr_uruz" class="rune uruz" value="uruz" />
                        <span class="green">&#x16A2;</span>
                        <input type="checkbox" name="attr_thurisaz" class="rune thurisaz" value="thurisaz" />
                        <span class="green">&#x16A6;</span>
                        <input type="checkbox" name="attr_cansuz" class="rune cansuz" value="cansuz" />
                        <span class="green">&#x16A8;</span>
                        <input type="checkbox" name="attr_raidho" class="rune raidho" value="raidho" />
                        <span class="green">&#x16B1;</span>
                        <input type="checkbox" name="attr_kenaz" class="rune kenaz" value="kenaz" />
                        <span class="green">&#x16B2;</span>
                        <input type="checkbox" name="attr_gebgift" class="rune gebgift" value="gebgift" />
                        <span class="green">&#x16B7;</span>
                        <input type="checkbox" name="attr_wunjo" class="rune wunjo" value="wunjo" />
                        <span class="green">&#x16B9;</span>
                        <input type="checkbox" name="attr_hagalaz" class="rune hagalaz" value="hagalaz" />
                        <span class="blue">&#x16BA;</span>
                        <input type="checkbox" name="attr_naudhneed" class="rune naudhneed" value="naudhneed" />
                        <span class="blue">&#x16BE;</span>
                        <input type="checkbox" name="attr_isaice" class="rune isaice" value="isaice" />
                        <span class="blue">&#x16C1;</span>
                        <input type="checkbox" name="attr_jethe" class="rune jethe" value="jethe" />
                        <span class="blue">&#x16C3;</span>
                        <input type="checkbox" name="attr_eihwas" class="rune eihwas" value="eihwas" />
                        <span class="blue">&#x16C7;</span>
                        <input type="checkbox" name="attr_pertho" class="rune pertho" value="pertho" />
                        <span class="blue">&#x16C8;</span>
                        <input type="checkbox" name="attr_elhaz" class="rune elhaz" value="elhaz" />
                        <span class="blue">&#x16C9;</span>
                        <input type="checkbox" name="attr_sowsun" class="rune sowsun" value="sowsun" />
                        <span class="blue">&#x16CA;</span>
                        <input type="checkbox" name="attr_tiwaz" class="rune tiwaz" value="tiwaz" />
                        <span class="red">&#x16CF;</span>
                        <input type="checkbox" name="attr_berkano" class="rune berkano" value="berkano" />
                        <span class="red">&#x16D2;</span>
                        <input type="checkbox" name="attr_ehwo" class="rune ehwo" value="ehwo" />
                        <span class="red">&#x16D6;</span>
                        <input type="checkbox" name="attr_mann" class="rune mann" value="mann" />
                        <span class="red">&#x16D7;</span>
                        <input type="checkbox" name="attr_claguz" class="rune claguz" value="claguz" />
                        <span class="red">&#x16D9;</span>
                        <input type="checkbox" name="attr_dagaz" class="rune dagaz" value="dagaz" />
                        <span class="red">&#x16DE;</span>
                        <input type="checkbox" name="attr_ing" class="rune ing" value="ing" />
                        <span class="red">&#x16DD;</span>
                        <input type="checkbox" name="attr_othala" class="rune othala" value="othala" />
                        <span class="red">&#x16DF;</span>
                        <input type="checkbox" name="attr_physical" class="rune physical" value="physical" />
                        <span  style="font-size:0.7em" class="red">&#x258B;</span>
                        <input type="checkbox" name="attr_mental" class="rune mental" value="mental" />
                        <span  style="font-size:0.7em" class="blue">&#x258B;</span>
                        <input type="checkbox" name="attr_spiritual" class="rune spiritual" value="spiritual" />
                        <span  style="font-size:0.7em" class="green">&#x258B;</span>
                    </div>
                </div>
                <input class="socialname" type="text" name="attr_socialname" />
                <div class="type-container">
                    <div class="type-child">
                        <input type="checkbox" name="attr_socialally" class="type ally" value="ally" /><span>Ally<br></span>
                        <input type="checkbox" name="attr_socialattack" class="type attack" value="attack" /><span>Attack<br></span>
                        <input type="checkbox" name="attr_socialcompel" class="type compel" value="compel" /><span>Compel<br></span>
                        <input type="checkbox" name="attr_socialdefend" class="type defend" value="defend" /><span>Defend<br></span>
                        <input type="checkbox" name="attr_socialprovoke" class="type provoke" value="provoke" /><span>Provoke<br></span>
                        <input type="checkbox" name="attr_socialquestion" class="type question" value="question" /><span>Question<br></span>
                    </div>
                </div>
                <input type="checkbox" class="toggle-show" />
                <div class="socialdetails showable">
                    <select name="attr_pmeta" class="pmeta metatag">
                        <option value="abate">Abate</option>
                        <option value="area">Area</option>
                        <option value="aid">Aid</option>
                        <option value="amplify">Amplify</option>
                        <option value="combo">Combo</option>
                        <option value="maintain">Maintain</option>
                        <option value="master">Mastery</option>
                        <option value="multi">Multi</option>
                        <option value="range">Range</option>
                        <option value="resist">Resist</option>
                        <option value="swift">Swift</option>
                        <option value="sinister">Sinister</option>
                    </select>
                    <select name="attr_mmeta" class="mmeta metatag">
                        <option value="abate">Abate</option>
                        <option value="area">Area</option>
                        <option value="aid">Aid</option>
                        <option value="amplify">Amplify</option>
                        <option value="combo">Combo</option>
                        <option value="maintain">Maintain</option>
                        <option value="master">Mastery</option>
                        <option value="multi">Multi</option>
                        <option value="range">Range</option>
                        <option value="resist">Resist</option>
                        <option value="swift">Swift</option>
                        <option value="sinister">Sinister</option>
                    </select>
                    <select name="attr_smeta" class="smeta metatag">
                        <option value="abate">Abate</option>
                        <option value="area">Area</option>
                        <option value="aid">Aid</option>
                        <option value="amplify">Amplify</option>
                        <option value="combo">Combo</option>
                        <option value="maintain">Maintain</option>
                        <option value="master">Mastery</option>
                        <option value="multi">Multi</option>
                        <option value="range">Range</option>
                        <option value="resist">Resist</option>
                        <option value="swift">Swift</option>
                        <option value="sinister">Sinister</option>
                    </select>
                    <label class="desclabel labeltext">Description:<textarea name="attr_socials_description" class="socialdesc desc textbox"></textarea></label>
                    <label class="modlabel labeltext">SoAF:<input class="mod stat-container" type="number" name='attr_socials_soaf' /></label>
                    <label class="modlabel labeltext">SoDF:<input class="mod stat-container" type="number" name='attr_socials_sodf' /></label>
                    <label class="modlabel labeltext">SoPR:<input class="mod stat-container" type="number" name='attr_socials_sopr' /></label>
                    <label class="modlabel labeltext">PDF:<input class="mod stat-container" type='number' name='attr_socials_pdf' /></label>
                    <label class="modlabel labeltext">Move:<input class="mod stat-container" type="number" name='attr_socials_move' /></label>
                    <label class="modlabel labeltext">Heal:<input class="mod stat-container" type="number" name='attr_socials_heal' /></label>
                    <label class="modlabel labeltext">Focus:<input class="mod stat-container" type="number" name='attr_socials_focus' /></label>
                    <label class="modlabel labeltext">PPF:<input class="mod stat-container" type="number" name='attr_socials_ppf' /></label>
                    <label class="modlabel labeltext">Parry:<input class="mod stat-container" type="number" name='attr_socials_pparry' /></label>
                    <label class="modlabel labeltext">MDF:<input class="mod stat-container" type="number" name='attr_socials_mdf' /></label>
                    <label class="modlabel labeltext">MPF:<input class="mod stat-container" type="number" name='attr_socials_mpf' /></label>
                    <label class="modlabel labeltext">MParry:<input class="mod stat-container" type="number" name='attr_socials_mparry' /></label>
                    <label class="modlabel labeltext">SDF:<input class="mod stat-container" type="number" name='attr_socials_sdf' /></label>
                    <label class="modlabel labeltext">SPF:<input class="mod stat-container" type="number" name='attr_socials_spf' /></label>
                    <label class="modlabel labeltext">SParry:<input class="mod stat-container" type="number" name='attr_socials_sparry' /></label>
                </div>
            </fieldset>
        </div>
        <div class="passives ability-box">
            <br>
            <span class="checkbox"></span>
            <span class="passivename labeltext">Passive:</span>
            <span class="labeltext type-container">Type:</span>
            <span class="labeltext toggle-show">Show</span>
            <fieldset class="repeating_passives">
                <input class="checkbox" type="checkbox" name="attr_passives_toggle" value="1" />
                <input class="passivename" type="text" name="attr_passives_name" />
                <div class="type-container">
                    <div class="type-child">
                        <input type="checkbox" name="attr_passivebloodline" class="type bloodline" value="bloodline" /><span>Bloodline<br></span>
                        <input type="checkbox" name="attr_passivefeat" class="type feat" value="feat" /><span>Feat<br></span>
                        <input type="checkbox" name="attr_passiveenchantment" class="type enchantment" value="enchantment" /><span>Enchantment<br></span>
                        <input type="checkbox" name="attr_passiverune" class="type runetype" value="rune" /><span>Rune<br></span>
                        <input type="checkbox" name="attr_passiveshadow" class="type shadow" value="shadow" /><span>Shadow<br></span>
                        <input type="checkbox" name="attr_passiveprimal" class="type primal" value="primal" /><span>Primal<br></span>
                        <input type="checkbox" name="attr_passivesocial" class="type social" value="social" /><span>Social<br></span>
                        <input type="checkbox" name="attr_passivesummon" class="type summon" value="summon" /><span>Summon<br></span>
                    </div>
                </div>
                <input type="checkbox" class="toggle-show" />
                <div class="passivedetails showable">
                    <label class="desclabel labeltext">Description:</label><br><textarea class="passivedesc desc textbox" name="attr_passives_description"></textarea>
                    <label class="modlabel labeltext">PDF:<input class="mod stat-container" type='number' name='attr_passives_pdf' /></label>
                    <label class="modlabel labeltext">Focus:<input class="mod stat-container" type="number" name='attr_passives_focus' /></label>
                    <label class="modlabel labeltext reach">Reach/<br>Range:<input class="mod stat-container" type="number" name='attr_passives_reach' /></label>
                    <label class="modlabel labeltext">Heal:<input class="mod stat-container" type="number" name='attr_passives_heal' /></label>
                    <label class="modlabel labeltext">Size:<input class="mod stat-container" type="number" name='attr_passives_size' /></label>
                    <label class="modlabel labeltext">Move:<input class="mod stat-container" type="number" name='attr_passives_move' /></label>
                    <label class="modlabel labeltext">PPF:<input class="mod stat-container" type="number" name='attr_passives_ppf' /></label>
                    <label class="modlabel labeltext">Parry:<input class="mod stat-container" type="number" name='attr_passives_pparry' /></label>
                    <label class="modlabel labeltext">MDF:<input class="mod stat-container" type="number" name='attr_passives_mdf' /></label>
                    <label class="modlabel labeltext">MPF:<input class="mod stat-container" type="number" name='attr_passives_mpf' /></label>
                    <label class="modlabel labeltext">MParry:<input class="mod stat-container" type="number" name='attr_passives_mparry' /></label>
                    <label class="modlabel labeltext">SDF:<input class="mod stat-container" type="number" name='attr_passives_sdf' /></label>
                    <label class="modlabel labeltext">SPF:<input class="mod stat-container" type="number" name='attr_passives_spf' /></label>
                    <label class="modlabel labeltext">SParry:<input class="mod stat-container" type="number" name='attr_passives_sparry' /></label>
                    <label class="modlabel labeltext">SoAF:<input class="mod stat-container" type="number" name='attr_passives_soaf' /></label>
                    <label class="modlabel labeltext">SoDF:<input class="mod stat-container" type="number" name='attr_passives_sodf' /></label>
                    <label class="modlabel labeltext">SoPR:<input class="mod stat-container" type="number" name='attr_passives_sopr' /></label>
                </div>
            </fieldset>
        </div>
        <div class="skills ability-box">
            <div class="skills ability-wrapper">
                <br>
                <span class="rune-container labeltext">Rune:</span>
                <span class="skillname labeltext">Skills:</span>
                <span class="skillrank labeltext">Rank:</span>
                <fieldset class="repeating_skills">
                    <div class="rune-container">
                        <div class="rune-child">
                            <input type="checkbox" name="attr_void" class="rune void" value="void" />
                            <span>&#x25AF;</span>
                            <input type="checkbox" name="attr_fehu" class="rune fehu" value="fehu" />
                            <span class="green">&#x16A0;</span>
                            <input type="checkbox" name="attr_uruz" class="rune uruz" value="uruz" />
                            <span class="green">&#x16A2;</span>
                            <input type="checkbox" name="attr_thurisaz" class="rune thurisaz" value="thurisaz" />
                            <span class="green">&#x16A6;</span>
                            <input type="checkbox" name="attr_cansuz" class="rune cansuz" value="cansuz" />
                            <span class="green">&#x16A8;</span>
                            <input type="checkbox" name="attr_raidho" class="rune raidho" value="raidho" />
                            <span class="green">&#x16B1;</span>
                            <input type="checkbox" name="attr_kenaz" class="rune kenaz" value="kenaz" />
                            <span class="green">&#x16B2;</span>
                            <input type="checkbox" name="attr_gebgift" class="rune gebgift" value="gebgift" />
                            <span class="green">&#x16B7;</span>
                            <input type="checkbox" name="attr_wunjo" class="rune wunjo" value="wunjo" />
                            <span class="green">&#x16B9;</span>
                            <input type="checkbox" name="attr_hagalaz" class="rune hagalaz" value="hagalaz" />
                            <span class="blue">&#x16BA;</span>
                            <input type="checkbox" name="attr_naudhneed" class="rune naudhneed" value="naudhneed" />
                            <span class="blue">&#x16BE;</span>
                            <input type="checkbox" name="attr_isaice" class="rune isaice" value="isaice" />
                            <span class="blue">&#x16C1;</span>
                            <input type="checkbox" name="attr_jethe" class="rune jethe" value="jethe" />
                            <span class="blue">&#x16C3;</span>
                            <input type="checkbox" name="attr_eihwas" class="rune eihwas" value="eihwas" />
                            <span class="blue">&#x16C7;</span>
                            <input type="checkbox" name="attr_pertho" class="rune pertho" value="pertho" />
                            <span class="blue">&#x16C8;</span>
                            <input type="checkbox" name="attr_elhaz" class="rune elhaz" value="elhaz" />
                            <span class="blue">&#x16C9;</span>
                            <input type="checkbox" name="attr_sowsun" class="rune sowsun" value="sowsun" />
                            <span class="blue">&#x16CA;</span>
                            <input type="checkbox" name="attr_tiwaz" class="rune tiwaz" value="tiwaz" />
                            <span class="red">&#x16CF;</span>
                            <input type="checkbox" name="attr_berkano" class="rune berkano" value="berkano" />
                            <span class="red">&#x16D2;</span>
                            <input type="checkbox" name="attr_ehwo" class="rune ehwo" value="ehwo" />
                            <span class="red">&#x16D6;</span>
                            <input type="checkbox" name="attr_mann" class="rune mann" value="mann" />
                            <span class="red">&#x16D7;</span>
                            <input type="checkbox" name="attr_claguz" class="rune claguz" value="claguz" />
                            <span class="red">&#x16D9;</span>
                            <input type="checkbox" name="attr_dagaz" class="rune dagaz" value="dagaz" />
                            <span class="red">&#x16DE;</span>
                            <input type="checkbox" name="attr_ing" class="rune ing" value="ing" />
                            <span class="red">&#x16DD;</span>
                            <input type="checkbox" name="attr_othala" class="rune othala" value="othala" />
                            <span class="red">&#x16DF;</span>
                            <input type="checkbox" name="attr_physical" class="rune physical" value="physical" />
                            <span  style="font-size:0.7em" class="red">&#x258B;</span>
                            <input type="checkbox" name="attr_mental" class="rune mental" value="mental" />
                            <span  style="font-size:0.7em" class="blue">&#x258B;</span>
                            <input type="checkbox" name="attr_spiritual" class="rune spiritual" value="spiritual" />
                            <span  style="font-size:0.7em" class="green">&#x258B;</span>
                        </div>
                    </div>
                    <input class="skillname" type="text" name="attr_skills_name" />
                    <input class="skillrank stat-container" type="number" name="attr_skill_rank" />
                    <input type="checkbox" class="toggle-show" />
                    <div class="skilldetails showable">
                        <select name="attr_pmeta" class="pmeta metatag">
                            <option value="abate">Abate</option>
                            <option value="aid">Aid</option>
                            <option value="amplify">Amplify</option>
                            <option value="area">Area</option>
                            <option value="efficient">Efficient</option>
                            <option value="mastery">Mastery</option>
                            <option value="multi">Multi</option>
                            <option value="range">Range</option>
                            <option value="swift">Swift</option>
                            <option value="surmount">Surmount</option>
                        </select>
                        <select name="attr_mmeta" class="mmeta metatag">
                            <option value="abate">Abate</option>
                            <option value="aid">Aid</option>
                            <option value="amplify">Amplify</option>
                            <option value="area">Area</option>
                            <option value="efficient">Efficient</option>
                            <option value="mastery">Mastery</option>
                            <option value="multi">Multi</option>
                            <option value="range">Range</option>
                            <option value="swift">Swift</option>
                            <option value="surmount">Surmount</option>
                        </select>
                        <select name="attr_smeta" class="smeta metatag">
                            <option value="abate">Abate</option>
                            <option value="aid">Aid</option>
                            <option value="amplify">Amplify</option>
                            <option value="area">Area</option>
                            <option value="efficient">Efficient</option>
                            <option value="mastery">Mastery</option>
                            <option value="multi">Multi</option>
                            <option value="range">Range</option>
                            <option value="swift">Swift</option>
                            <option value="surmount">Surmount</option>
                        </select>
                        <label class="labeltext desclabel">Description:</label><textarea class="skilldesc textbox desc" name="attr_skills_description"></textarea>
                    </div>
                </fieldset>
            </div>
        </div>
        <div class="equipment ability-box">
            <br>
            <span class="checkbox"></span>
            <span class="equipname labeltext">Equipment:</span>
            <span class="equipdesc labeltext">Description:</span>
            <span class="labeltext toggle-show">Show</span>
            <fieldset class="repeating_equipment">
                <input class="checkbox" type="checkbox" name="attr_equipment_toggle" value="1" />
                <input class="equipname" type="text" name="attr_equipment_name" />
                <textarea class="equipdesc textbox" name="attr_equipment_description"></textarea>
                <input type="checkbox" class="toggle-show" />
                <div class="equipdetails showable">
                    <label class="modlabel labeltext">PDF:<input class="mod stat-container" type='number' name='attr_equipment_pdf' /></label>
                    <label class="modlabel labeltext reach">Reach/<br>Range:<input class="mod stat-container" type="number" name='attr_equipment_reach' /></label>
                    <label class="modlabel labeltext">Heal:<input class="mod stat-container" type="number" name='attr_equipment_heal' /></label>
                    <label class="modlabel labeltext">Size:<input class="mod stat-container" type="number" name='attr_equipment_size' /></label>
                    <label class="modlabel labeltext">Move:<input class="mod stat-container" type="number" name='attr_equipment_move' /></label>
                    <label class="modlabel labeltext">Focus:<input class="mod stat-container" type="number" name='attr_equipment_focus' /></label>
                    <label class="modlabel labeltext">PPF:<input class="mod stat-container" type="number" name='attr_equipment_ppf' /></label>
                    <label class="modlabel labeltext">Parry:<input class="mod stat-container" type="number" name='attr_equipment_pparry' /></label>
                    <label class="modlabel labeltext">MDF:<input class="mod stat-container" type="number" name='attr_equipment_mdf' /></label>
                    <label class="modlabel labeltext">MPF:<input class="mod stat-container" type="number" name='attr_equipment_mpf' /></label>
                    <label class="modlabel labeltext">MParry:<input class="mod stat-container" type="number" name='attr_equipment_mparry' /></label>
                    <label class="modlabel labeltext">SDF:<input class="mod stat-container" type="number" name='attr_equipment_sdf' /></label>
                    <label class="modlabel labeltext">SPF:<input class="mod stat-container" type="number" name='attr_equipment_spf' /></label>
                    <label class="modlabel labeltext">SParry:<input class="mod stat-container" type="number" name='attr_equipment_sparry' /></label>
                    <label class="modlabel labeltext">SoAF:<input class="mod stat-container" type="number" name='attr_equipment_soaf' /></label>
                    <label class="modlabel labeltext">SoDF:<input class="mod stat-container" type="number" name='attr_equipment_sodf' /></label>
                    <label class="modlabel labeltext">SoPR:<input class="mod stat-container" type="number" name='attr_equipment_sopr' /></label>
                </div>
            </fieldset>
        </div>
    </div>
    <div class="lifepath">
        <div class="characteristics">
            <label class="lifepathname"><span class="labeltext lifepathlabel">Personality: </span><input class="text-container" type="text" name="attr_lifepath_personality" /><span class="spacer"></span><textarea class="lifepathdesc textbox" name="attr_lifepath_personality_description"></textarea></label>
            <label class="lifepathname"><span class="labeltext lifepathlabel">Ambition: </span><input class="text-container" type="text" name="attr_lifepath_ambition" /><span class="spacer"></span><textarea class="lifepathdesc textbox" name="attr_lifepath_ambition_description"></textarea></label>
            <label class="lifepathname"><span class="labeltext lifepathlabel">Morality: </span><input class="text-container" type="text" name="attr_lifepath_morality" /><span class="spacer"></span><textarea class="lifepathdesc textbox" name="attr_lifepath_morality_description"></textarea></label>
            <label class="lifepathname"><span class="labeltext lifepathlabel">Vice: </span><input class="text-container" type="text" name="attr_lifepath_vice" /><span class="spacer"></span><textarea class="lifepathdesc textbox" name="attr_lifepath_vice_description"></textarea></label>
        </div>
        <div class="earlylife">
            <label class="lifepathname"><span class="labeltext">Early Life</span></label>
            <label class="lifepathname"><span class="labeltext sublabel">Birthplace: </span><input class="earlylifetext" type="text" name="attr_lifepath_birthplace" /></label>
            <label class="lifepathname"><span class="labeltext sublabel">Family: </span><input class="earlylifetext" type="text" name="attr_lifepath_family" /></label>
            <label class="lifepathname"><span class="labeltext sublabel">Defining Event: </span><input class="earlylifetext" type="text" name="attr_lifepath_definingevent" /></label>
            <label class="lifepathname"><span class="labeltext sublabel">Scarring Event: </span><input class="earlylifetext" type="text" name="attr_lifepath_scarringevent" /></label>
        </div>
        <div class="socialposition ability-box">
            <label class="lifepathname"><span class="labeltext">Social Position</span></label>
            <label class="lifepathname"><span class="labeltext sublabel">Profession: </span><input class="earlylifetext" type="text" name="attr_lifepath_profession" /></label>
            <label class="lifepathname"><span class="labeltext sublabel">Social Contact: </span></label>
            <fieldset class="repeating_contacts repeatinginput">
                <input class="contacttext" type="text" name="attr_lifepath_socialcontact" />
            </fieldset>
        </div>
        <div class="brusheswithpower ability-box">
            <label class="lifepathname"><span class="labeltext">Brushes With Power</span></label>
            <fieldset class="repeating_brusheswithpower">
                <div class='brushes'>
                    <select style='height: 2.2em;' class="lifepathselect sublabel stringtext">
                        <option class="lifepathoption">Civil</option>
                        <option class="lifepathoption">Royal</option>
                        <option class="lifepathoption">Divine</option>
                    </select>
                    <textarea class="lifetext textbox" name="attr_lifepath_brusheswithpower_description"></textarea>
                </div>
            </fieldset>
        </div>
        <div class="dwellerrelationships ability-box">
            <label class="lifepathname"><span class="labeltext">Dweller Relationships</span></label>
            <span class="lifepathtext dweller">Dweller: </span>
            <span class="lifepathtext circumstance">Circumstance: </span>
            <span class="lifepathtext state">State: </span>
            <fieldset class="repeating_relationships">
                <input class="dweller text-container earlylifetext" type="text" name="attr_lifepath_dwellername" />
                <input class="circumstance text-container earlylifetext" type="text" name="attr_lifepath_dwellercircumstance" />
                <input class="state text-container earlylifetext" type="text" name="attr_lifepath_dwellerstate" />
            </fieldset>
        </div>
        <div class="lifepathnotes ability-box">
            <label class="labeltext lifepathname">Notes:</label>
            <textarea class="textbox lifenotes" name="attr_lifepathnotes"></textarea>
        </div>
        <div class="strings ability-box">
            <label class="lifepathname"><span class="labeltext">Strings</span></label>
            <span class="lifepathtext labeltext target">Target: </span>
            <span class="lifepathtext labeltext information">Information: </span>
            <span class="lifepathtext labeltext state">Notes: </span>
            <fieldset class="repeating_strings">
                <input class="target stringtext labeltext" type="text" name="attr_lifepath_dwellername" />
                <input class="information stringtext labeltext" type="text" name="attr_lifepath_dwellercircumstance" />
                <input class="notes stringtext labeltext" type="text" name="attr_lifepath_dwellerstate" />
            </fieldset>
        </div>
    </div>
</div>

<script type="text/worker">
    const int = (value, error = 0) => parseInt(value) || error;
    const derived_stats = ['pdf', 'pierce', 'focus','heal','size','move', 'ppf', 'pparry', 'evade', 'mdf', 'mpf', 'mparry', 'sdf', 'spf', 'sparry', 'soaf', 'sodf', 'sopr'];
    // an array of the repeating section names
    const section_names = ['equipment', 'passives', 'actives', 'socials'];
    // an array of the attributes outside of the section you want to use.
    const outside_attributes = ['basesize', 'basemove'];
    
    // a function to quickly build repeating section names, suitable for this worker.
    const section_field = (section, field, id = ':') => `repeating_${section}${id === ':' ? id : `_${id}_`}${section}_${field}`;
    
    // altered buildChanges, so now it is a function that can hanndle all 3 repeating sections
    const buildChanges = (section) => derived_stats.reduce((total, item) => `${total} change:${section_field(section, item)}`, '');

    // created 3 variables for the change:stuff line, to make that less of a chore to write and read
    const toggleChanges = section_names.map(section => `change:repeating_${section}:${section}_toggle`).join(' ');
    const outsideChanges = outside_attributes.map(stat => `change:${stat}`).join(' ');
    const removeSections = section_names.map(section => `remove:repeating_${section}`).join(' ');
    
    on(`${toggleChanges} ${outsideChanges} ${buildChanges(section_names[0])} ${buildChanges(section_names[1])} ${buildChanges(section_names[2])} ${buildChanges(section_names[3])} ${toggleChanges} ${removeSections} sheet:opened`, () => {
        // define the fieldnames outside the first getSectionIDs to make clear it doesnt belong to any of them
        const fieldnames = [];
        // notice the idarray array name has changed. It must be different in each getSectionIDs
        getSectionIDs(`repeating_${section_names[0]}`, idarray0 => {
            
            // loop through idarray0, and create the repeating section attribute for each modifier attribute name
            idarray0.forEach(id => {
                derived_stats.forEach(mod => fieldnames.push(section_field(section_names[0], `${mod}`, id)));
                fieldnames.push(section_field(section_names[0], 'toggle', id));
            });
            
            getSectionIDs(`repeating_${section_names[1]}`, idarray1 => {
                // loop through idarray1, and create the repeating section attribute for each modifier attribute name
                idarray1.forEach(id => {
                    derived_stats.forEach(mod => fieldnames.push(section_field(section_names[1], `${mod}`, id)));
                    fieldnames.push(section_field(section_names[1], 'toggle', id));
                });
    
                getSectionIDs(`repeating_${section_names[2]}`, idarray2 => {
                    // loop through idarray2, and create the repeating section attribute for each modifier attribute name
                    idarray2.forEach(id => {
                        derived_stats.forEach(mod => fieldnames.push(section_field(section_names[2], `${mod}`, id)));
                        fieldnames.push(section_field(section_names[2], 'toggle', id));
                    });
                    
                    getSectionIDs(`repeating_${section_names[3]}`, idarray3 => {
                    // loop through idarray3, and create the repeating section attribute for each modifier attribute name
                        idarray3.forEach(id => {
                            derived_stats.forEach(mod => fieldnames.push(section_field(section_names[3], `${mod}`, id)));
                            fieldnames.push(section_field(section_names[3], 'toggle', id));
                        });
    
                        // now we are ready to grab all the values from the character sheet
                        // outside_attributes as an array of the attributes you want to usem that aren't in the repeating sections
                        getAttrs([...fieldnames, ...outside_attributes], v => {
                            //console.log(v);
                            //console.log('v^');
                            // initialise the object used for output, with each total attribute set to a default value of 0
                            const output = {};
                            derived_stats.forEach(mod => output[`${mod}`] = 0);
                            
                            // loop through all 3 idarrays
                            // first set up an array of arrays, to make the idearrays easy to access with an index
                            const idarrays = [idarray0, idarray1, idarray2, idarray3];
                            
                            [0,1,2,3].forEach(num => {
                                // now loop through each idarray, and get the various values and add them to output
                                idarrays[num].forEach(id => {
                                    // check if this row is to be counted or not
                                    const toggle = int(v[section_field(section_names[num], 'toggle', id)]);
                                    if (toggle) {
                                        // add each modifier to the total
                                        derived_stats.forEach(mod => output[`${mod}`] = output[`${mod}`] + int(v[section_field(section_names[num], `${mod}`, id)]));
                                    }
                                });
                                
                            });
    
                            // now handle the outsideattributes however you need to. 
                            output.size = output.size + int(v.basesize);
                            output.move = output.move + int(v.basemove);
                            setAttrs(output);
                        });
                    });
                });
            });
        });
    });
    
    
    const buttonlist = ["character","current", "rgs3", "lifepath"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            //console.log('clicked');
            setAttrs({
                sheetTab: button
            });
        });
    });
    
    // This handels keeping a running list of which runes have been used
    const runes = ["void", "fehu", "uruz", "thurisaz","cansuz", "raidho", "kenaz", "gebgift", "wunjo",
    "hagalaz", "naudhneed", "isaice", "jethe", "eihwas", "pertho", "elhaz", "sowsun", "tiwaz", "berkano", 
    "ehwo", "mann", "claguz", "dagaz", "ing", "othala", "physical", "mental", "spiritual"]
    on("change:repeating_actives", (eventInfo) => {
        //setAttrs({"runeBag": [1,1,3]});
        //console.log(eventInfo);
        //console.log(eventInfo.newValue);
        if (_.contains(runes, eventInfo.newValue) || _.contains(runes, eventInfo.previousValue)) {
            getAttrs(['runeBag'], v => {
                console.log(v);
                bag = v.runeBag.split(',');
                //console.log(bag);
                //console.log(_.contains(runes, bag[0]));
                bag = _.filter(bag, function(rune){
                    //console.log(_.contains(runes, rune));
                    return _.contains(runes, rune)});
                console.log(_.contains(['physical','mental','spiritual'], eventInfo.newValue));
                if (eventInfo.newValue == 0) {
                    //console.log("new value 0")
                    //bag = _.difference(bag, [eventInfo.previousValue]);
                    console.log(bag);
                    const index = bag.indexOf(eventInfo.previousValue);
                    if (index > -1) {
                        bag.splice(index, 1);
                    }
                    console.log(bag);
                }
                else if ((!(_.contains(bag, eventInfo.newValue)) || (_.contains(['physical','mental','spiritual'], eventInfo.newValue))) && (eventInfo.newValue != 'void')) {
                    bag.push(eventInfo.newValue);
                    console.log(bag);
                }
                //console.log(bag);
                bag = bag.join(',');
                console.log(bag);
                setAttrs({"runeBag": bag});
            });
        }
    })
</script>





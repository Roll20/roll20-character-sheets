		<input name="attr_SetupDone" style="display: none;" type="text" value="0">
		<input name="attr_tab1" title="Main" class="sheet-tab sheet-tab1" type="radio" checked="checked" value="1"><span class="sheet-tabSpan" title="Main"></span>
		<input name="attr_tab1" title="Gear & $" class="sheet-tab sheet-tab2" type="radio" value="2"><span  class="sheet-tabSpan"  title="Gear & $"></span>
		<input name="attr_tab1" title="Magic" class="sheet-tab sheet-tab3" type="radio" value="3"><span  class="sheet-tabSpan"  title="Magic"></span>
		<input name="attr_tab1" title="Background" class="sheet-tab sheet-tab4" type="radio" value="4"><span  class="sheet-tabSpan"  title="Background"></span>

		<div class="sheet-tab-content sheet-tab1"><!--- Tab 1 start -->
			 <div class="sheet-cdiv">
				<input name="attr_is_config" class="sheet-HideConfig" type="checkbox" checked="checked"><span class="sheet-is-config"><span style='font-family: "pictos";'>y</span></span>
				<div class="sheet-config" style="border-style: dotted; border-color: gray; padding: 5px; background-image: none; background-color: white;">

				</div>
			</div>
			<br>
			<span style="left: 122px; top: 112px; position: absolute;"><img src="https://raw.githubusercontent.com/Lockbox313/imagedump/master/Elric/chaosTest2.png"></span>

			<span style="left: 627px; top: 112px; position: absolute;"><img style="width: auto; height: 150px;" src="https://raw.githubusercontent.com/Lockbox313/imagedump/master/Elric/lawSymbolTest.png"></span>

			<div style="text-align: center;">
				<span></span><span class="sheet-header2" data-i18n="ALLEGIANCE">ALLEGIANCE</span><span></span>
			</div>
			<div class="sheet-allgWrapper">

				<span class="sheet-allgSpan sheet-allFrame1">
					<input name="attr_chaos" class="sheet-allgValues" type="text" value="0">
					<div class="sheet-allgCheck">
						<input name="attr_chaosChk" type="checkbox" value="0">
						<button  type="roll" name="roll_chaos" class="sheet-allg_roll"  value="&amp;{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{chaos})]]}}  {{crit=[[round(([[(@{chaos})]])/5)+1]]}} {{success=[[(@{chaos})]]}} {{roll=[[1d100]]}} {{skill=Chaos Roll}} {{type=0}} {{impale=0}}"><span data-i18n="Chaos">Chaos</span></button>
					</div>
					<select class="sheet-allegianceRank"  name="attr_chaosRank">
						<option selected value=""></option>
						<option value="Allegiance" data-i18n="Allegiance">Allegiance</option>
						<option value="Allegiance">Champion</option>
					</select>
				</span>
				<span class="sheet-allgSpan  sheet-allFrame1">
					<input name="attr_balance" class="sheet-allgValues" type="text" value="0">
					<div class="sheet-allgCheck">
						<input name="attr_balanceChk" type="checkbox">
						<button  type="roll" name="roll_balance" class="sheet-allg_roll"  value="&amp;{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{balance})]]}}  {{crit=[[round(([[(@{balance})]])/5)+1]]}} {{success=[[(@{balance})]]}} {{roll=[[1d100]]}} {{skill=Balance Roll}} {{type=0}} {{impale=0}}"><span data-i18n="Balance">Balance</span></button>
					</div>
					<select class="sheet-allegianceRank" name="attr_balanceRank">
						<option selected value=""></option>
						<option value="Allegiance"  data-i18n="Allegiance">Allegiance</option>
						<option value="Allegiance">Champion</option>
					</select>
				</span>
				<span class="sheet-allgSpan  sheet-allFrame1">
					<input name="attr_law" class="sheet-allgValues" type="text" value="0">
					<div class="sheet-allgCheck">
						<input name="attr_lawChk" type="checkbox">
						<button  type="roll" name="roll_law" class="sheet-allg_roll"  value="&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{law})]]}}  {{crit=[[round(([[(@{law})]])/5)+1]]}} {{success=[[(@{law})]]}} {{roll=[[1d100]]}} {{skill=Law Roll}} {{type=0}} {{impale=0}}"><span data-i18n="Law">Law</span></button>
					</div>
					<select class="sheet-allegianceRank" name="attr_lawRank">
						<option selected value=""></option>
						<option value="Allegiance"  data-i18n="Allegiance">Allegiance</option>
						<option value="Allegiance">Champion</option>
					</select>
				</span>
			</div>
			<br>
			<div class="sheet-wrapper1">
				<div class="sheet-col1">
					<div class="sheet-wrapper2">

							<!--Row1-->
							<div class="sheet-col1 sheet-row1 sheet-bottCell">
								<input name="attr_strChk" type="checkbox">
							</div>
							<div class="sheet-col2 sheet-row1 sheet-charLabel">
								<span class="sheet-statLabel" data-i18n="STR">STR</span>
							</div>
							<div class="sheet-col3 sheet-row1 ">
								<input name="attr_strBase" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col4 sheet-row1 ">
								<input name="attr_strMod" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col5 sheet-row1 ">
								<input name="attr_str" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col6 sheet-row1  sheet-bottCell sheet-statLabel2">
								<span data-i18n="Dam-Bonus">Dam.Bonus</span>
								<span><input name="attr_damagebonus" class="sheet-char_values" type="text" value="0"></span>
								<input name="attr_mdamagebonus" class="sheet-char_values" style="display: none;" type="text" value="0">
							</div>

							<!--Row2-->
							<div class="sheet-col1 sheet-row2 sheet-bottCell">
								<input name="attr_conChk" type="checkbox">
							</div>
							<div class="sheet-col2 sheet-row2 sheet-charLabel">
								<span class="sheet-statLabel" data-i18n="CON">CON</span>
							</div>
							<div class="sheet-col3 sheet-row2 ">
								<input name="attr_conBase" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col4 sheet-row2 ">
								<input name="attr_conMod" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col5 sheet-row2 ">
								<input name="attr_con" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col6 sheet-row2  sheet-bottCell sheet-statLabel2">
								<button  type="roll" name="roll_con" class="sheet-text_roll"  value="&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{con}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{con}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{con}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=Constitution Roll}} {{type=0}} {{impale=0}}"><span data-i18n="CON-Roll">CON Roll</span></button>
							</div>
							<!--Row3-->
							<div class="sheet-col1 sheet-row3 sheet-bottCell">

							</div>
							<div class="sheet-col2 sheet-row3 charLabel">
								<span class="sheet-statLabel" data-i18n="SIZ">SIZ</span>
							</div>
							<div class="sheet-col3 sheet-row3 ">
								<input name="attr_sizBase" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col4 sheet-row3 ">
								<input name="attr_sizMod" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col5 sheet-row3 ">
								<input name="attr_siz" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col6 sheet-row3  sheet-bottCell">

							</div>
							<div class="sheet-col7 sheet-row3 ">

							</div>
							<!--Row4-->
							<div class="sheet-col1 sheet-row4 sheet-bottCell">
								<input name="attr_intChk" type="checkbox">
							</div>
							<div class="sheet-col2 sheet-row4 sheet-charLabel">
								<span class="sheet-statLabel" data-i18n="INT">INT</span>
							</div>
							<div class="sheet-col3 sheet-row4 ">
								<input name="attr_intBase" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col4 sheet-row4 ">
								<input name="attr_intMod" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col5 sheet-row4 ">
								<input name="attr_int" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col6 sheet-row4 sheet-bottCell sheet-statLabel2">
								<button  type="roll" name="roll_idea" class="sheet-text_roll"  value="&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{int}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{int}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{int}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=Idea Roll}} {{type=0}} {{impale=0}}"><span data-i18n="Idea-Roll">Idea Roll</span></button>
							</div>

							<!--Row5-->
							<div class="sheet-col1 sheet-row5 sheet-bottCell">
								<input name="attr_intChk" type="checkbox">
							</div>
							<div class="sheet-col2 sheet-row5 sheet-charLabel">
								<span class="sheet-statLabel" data-i18n="POW">POW</span>
							</div>
							<div class="sheet-col3 sheet-row5 ">
								<input name="attr_powBase" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col4 sheet-row5">
								<input name="attr_powMod" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col5 sheet-row5">
								<input name="attr_pow" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col6 sheet-row5 sheet-bottCell sheet-statLabel2">
								<button  type="roll" class="sheet-text_roll"  name="roll_powRoll" value="&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{pow}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{pow}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{pow}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=Luck Roll}} {{type=0}} {{impale=0}}"><span data-i18n="Luck-Roll">Luck Roll</span></button>
							</div>
							<!--Row6-->
							<div class="sheet-col1 sheet-row6 sheet-bottCell">
								<input name="attr_dexChk" type="checkbox">
							</div>
							<div class="sheet-col2 sheet-row6 sheet-charLabel">
								<span class="sheet-statLabel" data-i18n="DEX">DEX</span>
							</div>
							<div class="sheet-col3 sheet-row6">
								<input name="attr_dexBase" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col4 sheet-row6">
								<input name="attr_dexMod" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col5 sheet-row6">
								<input name="attr_dex" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col6 sheet-row6  sheet-bottCell sheet-statLabel2">
								<button  type="roll" class="sheet-text_roll"  value="&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{dex}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{dex}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{dex}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=Dexterity Roll}} {{type=0}} {{impale=0}}"><span data-i18n="Dexterity-Roll">Dexterity Roll</span></button>
							</div>
							<!--Row7-->
							<div class="sheet-col1 sheet-row7 sheet-bottCell">

							</div>
							<div class="sheet-col2 sheet-row7 sheet-charLabel">
								<span class="sheet-statLabel" data-i18n="APP">APP</span>
							</div>
							<div class="sheet-col3 sheet-row7">
								<input name="attr_appBase" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col4 sheet-row7">
								<input name="attr_appMod" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col5 sheet-row7">
								<input name="attr_app" class="sheet-char_values" type="text" value="0">
							</div>
							<div class="sheet-col6 sheet-row7 sheet-bottCell sheet-statLabel2">
								<button  type="roll" class="sheet-text_roll"  value="&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{app}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{app}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{app}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=Charisma Roll}} {{type=0}} {{impale=0}}"><span data-i18n="Charisma-Roll">Charisma Roll</span></button>
							</div>


					</div>
				</div>
				<div class="sheet-col2">
					<div class="dtlsLine">
						<span class="sheet-charLabel" data-i18n="Name">Name</span><span><input name="attr_character_name" class="sheet-text_input name" type="text"></span>
					</div>
					<div class="sheet-dtlsLine">
						<span class="sheet-charLabel" data-i18n="Birthplace">Birthplace</span><span><input name="attr_brthplc" class="sheet-text_input sheet-birthPlc" type="text"></span>
						<span class="sheet-charLabel" data-i18n="Gender">Gender</span><span><input name="attr_gender" class="sheet-text_input sheet-gender" type="text"></span>
						<span class="sheet-charLabel" data-i18n="Age">Age</span><span><input name="attr_age" class="sheet-text_input sheet-age" type="text"></span>
					</div>
					<div class="sheet-dtlsLine">
						<span class="sheet-charLabel" data-i18n="Title">Title</span><span><input name="attr_title" class="sheet-text_input sheet-title"	 type="text"></span>
						<span class="sheet-charLabel" data-i18n="Family">Family</span><span><input name="attr_family" class="sheet-text_input sheet-family" type="text"></span>
					</div>
					<div class="sheet-dtlsLine">
						<span class="sheet-charLabel" data-i18n="Occupation">Occupation</span><span><input name="attr_occupation" class="sheet-text_input sheet-occupation" type="text"></span>
					</div>
					<span class="sheet-charLabel" data-i18n="Looks-Atitude">Looks,Atitude</span>
					<textarea name="attr_looks" class="sheet-looks"></textarea>



				</div>
			</div>
			<div class="fullDivider sheet-centerText">
				<div class="sheet-header2" data-i18n="Skills">Skills</div>
			</div>

				<div class="sheet-modDiv">
					<span class="sheet-allgSpan sheet-allFrame1">
						<div style="text-align: center;">
							<input name="attr_skillMod" class="sheet-allgValues" type="text" value="0">
							<div class="sheet-allgCheck" style="text-align: center;">
								<span data-i18n="Modifier">Modifier</span>
							</div>
						</div>
					</span>
				</div>
			<div class="sheet-skillsWrapper">

				<div class="sheet-col1">
					<fieldset class="repeating_skills1">
						<div class="sheet-skills">
							<input name="attr_expCheck" type="checkbox">
							<input name="attr_skill" class="sheet-text_input sheet-skillName" type="text">
							<input name="attr_skillValue" class="sheet-text_input sheet-skill_values" type="text" value="0"><button  type="roll" class="sheet-skillButtons"  value="&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{skillValue}+@{skillMod})]]}}  {{crit=[[round(([[(@{skillValue}+@{skillMod})]])/5)+1]]}} {{success=[[(@{skillValue}+@{skillMod})]]}} {{roll=[[1d100]]}} {{skill=@{skill}}} {{type=0}} {{impale=0}}"></button>
						</div>
					</fieldset>
				</div>
				<div class="sheet-col2">
					<fieldset class="repeating_skills2">
						<div class="sheet-skills">
							<input name="attr_expCheck" type="checkbox">
							<input name="attr_skill" class="sheet-text_input sheet-skillName" type="text">
							<input name="attr_skillValue" class="sheet-text_input sheet-skill_values" type="text" value="0"><button  type="roll"  value="&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{skillValue}+@{skillMod})]]}}  {{crit=[[round(([[(@{skillValue}+@{skillMod})]])/5)+1]]}} {{success=[[(@{skillValue}+@{skillMod})]]}} {{roll=[[1d100]]}} {{skill=@{skill}}} {{type=0}} {{impale=0}}"></button>
						</div>
					</fieldset>
				</div>
				<div class="sheet-col3">
					<fieldset class="repeating_skills3">
						<div class="sheet-skills">
							<input name="attr_expCheck" type="checkbox">
							<input name="attr_skill" class="sheet-text_input sheet-skillName" type="text">
							<input name="attr_skillValue" class="sheet-text_input sheet-skill_values" type="text" value="0"><button  type="roll"  value="&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{skillValue}+@{skillMod})]]}}  {{crit=[[round(([[(@{skillValue}+@{skillMod})]])/5)+1]]}} {{success=[[(@{skillValue}+@{skillMod})]]}} {{roll=[[1d100]]}} {{skill=@{skill}}} {{type=0}} {{impale=0}}"></button>
						</div>
					</fieldset>
				</div>

				<div class="sheet-col4">
					<div style="text-align: center;">
						<span style="font-weight: bold;" data-i18n="Weapons">Weapons</span>
					</div>

					<fieldset class="repeating_Weapons">
						<div class="sheet-skills">
							<input name="attr_expCheck" type="checkbox">
							<input name="attr_skill" class="sheet-text_input sheet-skillName" type="text" value="Class ">
							<input name="attr_skillValue" class="sheet-text_input sheet-skill_values" type="text" value="0"><button  type="roll"  value="&{template:skillRoll} {{name=@{character_name}}} {{skillvalue=[[(@{skillTotal})]]}} {{fumble=[[{(101-(round((100-(@{skillTotal}+@{skill_mod}))/20))),100}kl1]]}} {{crit=[[round(([[(@{skillTotal}+@{skill_mod})]])/20)+1]]}}  {{special=[[round(([[(@{skillTotal}+@{skill_mod})]])/5)+1]]}}    {{success=[[(@{skillTotal}+@{skill_mod})]]}} {{roll=[[1d100]]}} {{skillname=@{skill}}}"></button>
						</div>
					</fieldset>
				</div>


			</div>
			<br>
			<div class="sheet-hpShieldWrapper">
				<div class="sheet-col1 sheet-row1">
					<div class="hpDivider sheet-centerText">
						<div class="header2 bold" data-i18n="Hit-Points-Damage">Hit Points & Damage</div>
					</div>

					<div>
						<div class="sheet-hpwndsrow1">
							<span class="sheet-bold" data-i18n="Hit-points">Hit points</span>
							<input name="attr_hpCur" class="sheet-text_input sheet-armorRow sheet-2digits" type="text" readonly="readonly" value="0">/<input name="attr_hpMax" class="sheet-text_input sheet-armorRow sheet-2digits" type="text" readonly="readonly" value="0"><button  type="roll" name="roll_MjrWnd" title="Roll Major Wound" class="sheet-text_roll sheet-majWndButt"  value="&{template:mjrWnd} {{roll=[[1d100]]}}"><span data-i18n="Major-Wound">Major Wound</span></button><input name="attr_mjrWnd" class="sheet-char_values" type="text" readonly="readonly" value="0">
						</div>
						<div>
							<span class="sheet-bold" data-i18n="Damage">Damage</span>
							<input name="attr_wounds" class="sheet-text_input sheet-armorRow sheet-wounds" type="text" value="0"><button  type="roll" name="roll_powx4" title="POWx4" class="sheet-text_roll sheet-POWx4"  value="&{template:Powx4} {{roll=[[1d100]]}} {{value=[[@{pow}*4]]}}"><span data-i18n="POWx4">POWx4</span></button>
						</div>
					</div>
				</div>
				<div class="sheet-col2 sheet-row1">
					<div class="sheet-shieldDivider sheet-centerText">
						<div class="sheet-header2" data-i18n="Dodge-Fumbles-Shield">Dodge, Fumbles & Shield</div>
					</div>

					<div style="margin-left: 2px;">
						<div class="sheet-dodgeWrapper sheet-melee_wpns_labels sheet-centerText">
							<div class="sheet-col3  sheet-row1" data-i18n="Skill">Skill</div>
							<div class="sheet-col4  sheet-row1" data-i18n="Mod">Mod.</div>
							<div class="sheet-col5  sheet-row1" data-i18n="%">%</div>


							<div class="sheet-col1 sheet-row2 sheet-centerChkBox">
								<input name="attr_dodgeExpCheck" type="checkbox">
							</div>
							<div class="sheet-col2 sheet-row2 sheet-dodge"><span data-i18n="Dodge">Dodge</span></div>
							<input name="attr_dodgeValue" class="sheet-text_input sheet-2digits sheet-row2 sheet-col3" type="text" title="Base DEXx2" value="DEXx2">
							<input name="attr_dodgeMod" class="sheet-text_input sheet-2digits sheet-row2 sheet-col4" type="text" value="0">
							<input name="attr_dodgeTotal" readonly="readonly" class="sheet-text_input sheet-2digits sheet-row2 sheet-col5" type="text" value="0">
							<div class="sheet-row2 sheet-col6">
								<button  type="roll" name="roll_dodge"  value="&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{dodgeTotal}+@{skillMod})]]}}  {{crit=[[round(([[(@{dodgeTotal}+@{skillMod})]])/5)+1]]}} {{success=[[(@{dodgeTotal}+@{skillMod})]]}} {{roll=[[1d100]]}}  {{skill=Dodge}} {{type=[[0]]}} {{impale=[[0]]}} {{rollname=[Roll Fumble](~h2hfumble)}}"></button>
							</div>
							<div class="sheet-col7 sheet-row2" >
								<span><button  type="roll" name="roll_h2hfumble" class="sheet-text_roll"  value="&{template:h2hFumble} {{roll=[[1d100]]}}">
								<span data-i18n="H-to-H-Fumbles">H-to-H Fumbles</span></span><span><button  type="roll" name="roll_msslFumble" class="sheet-text_roll"  value="&{template:msslFumble} {{roll=[[1d6]]}}"><span data-i18n="Missile-Fumbles">Missile Fumbles</span></button></span></span>
							</div>

						</div>
					</div>


					<div class="sheet-shieldwrapper sheet-melee_wpns_labels sheet-centerText">


						<div class="sheet-col3  sheet-row1" data-i18n="Skill">Skill</div>
						<div class="sheet-col4  sheet-row1" data-i18n="Mod">Mod.</div>
						<div class="sheet-col5  sheet-row1" data-i18n="%">%</div>
						<div class="sheet-col7  sheet-row1" data-i18n="Type">Type</div>
						<div class="sheet-col8  sheet-row1" data-i18n="Damage">Damage</div>
						<div class="sheet-col10  sheet-row1" data-i18n="HP">HP</div>


						<div class="sheet-col1 sheet-row2 sheet-centerChkBox">
							<input name="attr_shldExpCheck" type="checkbox">
						</div>
						<div class="col2  sheet-row2 sheet-shield"><span data-i18n="Shield">Shield</span></div>

						<div class="sheet-col3  sheet-row2">
							<div class="sheet-cellFill">
								<input name="attr_shieldValue" class="sheet-text_input sheet-armorRow sheet-centerText" style="width: 35px;" type="text" value="15">
							</div>
						</div>
						<div class="sheet-col4  sheet-row2">
							<div class="sheet-cellFill">
								<input name="attr_shieldMod" class="sheet-text_input sheet-armorRow sheet-centerText" style="width: 35px;" type="text" value="0">
							</div>
						</div>
						<div class="sheet-col5  sheet-row2">
							<div class="sheet-cellFill">
								<input name="attr_shieldToT" class="sheet-text_input sheet-armorRow sheet-centerText" style="width: 35px;" type="text" readonly="readonly" value="0">
							</div>
						</div><div class="sheet-col6  sheet-row2"><button  type="roll" name="roll_shield"  value="&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{shieldToT}+@{skillMod})]]}}  {{crit=[[round(([[(@{shieldToT}+@{skillMod})]])/5)+1]]}} {{success=[[(@{shieldToT}+@{skillMod})]]}} {{roll=[[1d100]]}} {{weapon=@{ShieldType}}} {{skill=Shield}} {{type=[[1]]}} {{impale=[[0]]}} {{damage=[[@{shieldDamage}+@{damagebonus}]] Knockback}} {{critdamage=[[@{shieldDamage}+@{shieldDamage}+@{damagebonus}]] Knockback}} {{mntTogVal=[[0}]]}}  {{rollname=[Roll Fumble](~h2hfumble)}}"></button></div>
						<div class="sheet-col7  sheet-row2"><input name="attr_ShieldType" class="sheet-text_input sheet-armorRow sheet-cellFill" type="text"></div>
						<div class="sheet-col8  sheet-row2">
							<div class="sheet-cellFill">
								<input name="attr_shieldDamage" class="sheet-text_input sheet-armorRow sheet-armorDice sheet-cellFill" style="width: 57px;" type="text" value="0">
							</div>
						</div>
						<div class="sheet-col9  sheet-row2"><button  type="roll" name="roll_shieldDamgae" title="" ></button></div>
						<div class="sheet-col10  sheet-row2">
							<div class="sheet-fillCell">
								<input name="attr_shldHpCur" class="sheet-text_input sheet-armorRow sheet-2digits" type="text" value="0">/<input name="attr_shldHpMax" class="sheet-text_input sheet-armorRow sheet-2digits" type="text" value="0">
							</div>
						</div>

					</div>
				</div>
			</div><!-- hpShieldWrapper -->
			<br>
			<!-- Armor -->
			<div class="sheet-fullDivider sheet-centerText">
				<div class="sheet-header2" data-i18n="Armor">Armor</div>
			</div>
			<div class="sheet-armorWrapper sheet-melee_wpns_labels sheet-centerText">
				   <div class="sheet-col1 sheet-row1"><br><span data-i18n="Armor-Type">Armor Type</span></div>
				   <div class="sheet-col2 rsheet-ow1"><span data-i18n="Helmet-on">Helmet on:</span><br><span data-i18n="Dmg-Deflect-affect">Dmg Deflect/% affect</span></div>
				   <div class="sheet-col3 sheet-row1"><span data-i18n="Helmet-off">Helmet off:</span><br><span data-i18n="Dmg-Deflect-affect">Dmg Deflect/% affect</span></div>
				   <div class="sheet-col4 sheet-row1"><br><span data-i18n="Burden">Burden</span></div>
				   <div class="sheet-col5 sheet-row1"><span data-i18n="Rounds-to-Put-On">Rounds to<br>Put On</span></div>
			</div>
			<div class="sheet-armorWrapper sheet-centerText" style="margin-top: 5px;">
				<div class="sheet-col1 sheet-row2">
					<div>
						<input name="attr_armorType" class="sheet-text_input sheet-cellFill sheet-armorRow" type="text">
					</div>
				</div>
				<div class="sheet-col2 sheet-row2">
					<div class="sheet-cellFill">
						<input name="attr_helmOnAP" class="sheet-text_input sheet-armorRow sheet-armorDice" type="text" value="0"><button  type="roll" name="roll_helmOnAP" value="&{template:armor} {{armorTitle=Armor Helm On}} {{type=[[1]]}} {{deflect=[[@{helmOnAP}]]}}"></button>/<input name="attr_helmOnAffect" class="sheet-text_input sheet-2digits sheet-armorRow" type="text" value="0"><button  type="roll" name="roll_helmOnAffect" value="&{template:armor} {{armorTitle=Armor Skill Affect}} {{type=[[2]]}} {{roll=[[1d100]]}} {{affect=[[@{helmOnAffect}]]}}"></button>
					</div>
				</div>
				<div class="sheet-col3 sheet-row2">
					<div class="sheet-cellFill sheet-armorRow">
						<input name="attr_helmOffAP" class="sheet-text_input sheet-armorRow sheet-armorDice" type="text" value="0"><button  type="roll" name="roll_helmOffAP" value="&{template:armor} {{armorTitle=Armor Helm Off}} {{type=[[1]]}} {{deflect=[[@{helmOffAP}]]}}"></button>/<input name="attr_helmOffAffect" class="sheet-text_input sheet-2digits sheet-armorRow" type="text" value="0"><button  type="roll" name="roll_helmOffAffect" value="&{template:armor} {{armorTitle=Armor Skill Affect}} {{type=[[2]]}} {{roll=[[1d100]]}} {{affect=[[@{helmOffAffect}]]}}"></button>
					</div>
				</div>
				<div class="sheet-col4 sheet-row2">
					<div class="sheet-armorRow">
						<select name="attr_burden" class="sheet-cellFill sheet-armorSele">
							<option value="0"><span data-i18n="Light">Light</span></option>
							<option value="1"><span data-i18n="Moderate">Moderate</span></option>
							<option value="2"><span data-i18n="Cumbersome">Cumbersome</span></option>
						</select>
					</div>
				</div>
				<div class="sheet-col5 sheet-row2">
					<div class="sheet-armorRow">
						<input name="attr_rndsPutOn" class="sheet-text_input sheet-cellFill sheet-armorRow" style="width: 35px; text-align: center;" type="text">
					</div>
				</div>
			</div>
			<!-- Armor -->
			<br>
			<div class="sheet-fullDivider sheet-centerText">
				<div class="sheet-header2" data-i18n="Hand-To-Hand-Weapons">Hand-To-Hand Weapons</div>
			</div>


			<div class="sheet-h2hWrapper">
				   <div class="sheet-col1 sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="Melee-Weapon">Melee Weapon</div>
				   <div class="sheet-col2 sheet-row1  sheet-tableHdr sheet-cellFill" data-i18n="Skill-Used">Skill Used</div>
				   <div class="sheet-col3  sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="STR">STR</div>
				   <div class="sheet-col4  sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="DEX">DEX</div>
				   <div class="sheet-col5  sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="#">#</div>
				   <div class="sheet-ol6  sheet-row1 sheet-tableHdr sheet-cellFill" daata-i18n="Skill">Skill</div>
				   <div class="sheet-col7  sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="Mod">Mod.</div>
				   <div class="sheet-col8  sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="Total">Total</div>
				   <div class="sheet-col9  sheet-row1 sheet-tableHdr sheet-cellFill"></div>
				   <div class="sheet-col10  sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="Damage">Damage</div>
				   <div class="sheet-col11  sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="*">*</div>
				   <div class="sheet-col12  sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="Hands">Hands</div>
				   <div class="sheet-col13  sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="I?">I?</div>
				   <div class="sheet-col14  sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="Parry">Parry</div>
				   <div class="sheet-col15  sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="Length">Length</div>
				   <div class="sheet-col16  sheet-row1 sheet-tableHdr sheet-cellFill" data-i18n="HP">HP</div>
				   <div class="sheet-col17  sheet-row1 sheet-tableHdr" data-i18n="Turn-Order">Turn Order</div>
			</div>

			<fieldset class="repeating_melee">
				
			   <div class="sheet-h2hWrapper">
	
				  <input name="attr_weapon_type" class="sheet-text_input  sheet-cellFill sheet-col1" type="text">
				  <input name="attr_skillName" class="sheet-text_input  sheet-cellFill sheet-col2" type="text">
				  <input name="attr_strmin" class="sheet-text_input sheet-2digits sheet-col3" style="width: 21px;" type="text" value="9">
				  <input name="attr_dexmin" class="sheet-text_input sheet-2digits sheet-col4" style="width: 21px;" type="text" value="9">
				  <input name="attr_skillDefault" title="STR/DEX < min." class="col5"  type="checkbox">
				  <input name="attr_skillReduct" style="display: none;" type="text" value="1">
				  <input name="attr_minmod" class="sheet-text_input sheet-2digits" style="width: 30px; display: none;" type="text" readonly="" value="0">
				  <input name="attr_skillValue" class="sheet-text_input sheet-2digits sheet-col6" type="text" readonly="">
				  <input name="attr_skillWpnMod" class="sheet-text_input sheet-2digits sheet-col7" type="text" value="0">
				  <input name="attr_skillTotal" class="sheet-text_input sheet-2digits sheet-col8" type="text" readonly="" value="0"><button  type="roll" class="sheet-col9" style="margin-right: 0px; margin-left: 0px;"  name="roll_meleeWpn" value="@{melee_value}"></button>
								<input name="attr_fumbleRoll" type="hidden" value="&{template:default} {{msg=Hi there}}">

								<textarea name="attr_melee_value" style="display: none;">&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{skillTotal})]]}}  {{crit=[[round(([[(@{skillTotal})]])/5)+1]]}} {{success=[[(@{skillTotal})]]}} {{roll=[[1d100]]}} {{weapon=@{weapon_type}}} {{skill=@{skillName}}} {{type=[[1]]}} {{impale=[[@{impales}]]}} {{damage=[[@{wpn_damage}+@{damagebonus}]]}} {{critdamage=[[@{wpn_damage}+@{wpn_damage}+@{damagebonus}]]}} {{mntTogVal=[[@{mntDbToggle}]]}} {{mntDamage=[[@{wpn_damage}+@{mountDB}]]}} {{mntCrit=[[@{wpn_damage}+@{wpn_damage}+@{mountDB}]]}}</textarea>


				  <input name="attr_wpn_damage" class="sheet-text_input  sheet-centerText sheet-cellFill sheet-col10" type="text">
				  <input name="attr_critdamage" style="display: none;" type="text">

				  <input name="attr_mntDbToggle" class="sheet-col11" type="checkbox" value="1">
				  <input name="attr_hands" class="sheet-text_input sheet-centerText sheet-2digits sheet-col12" style="width: 21px; margin-bottom: 0px;" type="text">
				  <input name="attr_impales" title="Impales?" class="sheet-col13" type="checkbox" value="1">
				  <select name="attr_parry" class="sheet-col14  sheet-cellFill" style="margin-bottom: 0px;width: 57px;">
					<option value="Yes"><span data-i18n="Yes">Yes</span></option>
					<option value="No"><span data-i18n="No">No</span></option>
					<option value="B/W"><span data-i18n="B/W">B/W</span></option>
					<!--<option value="Yes*"><span data-i18n="Yes*">Yes*</span></option>-->
				  </select>

				  <select name="attr_length" class="sheet-col15 sheet-cellFill" style="margin-bottom: 0px;">
					<option value="Short"><span data-i18n="Short">Short</span></option>
					<option value="Medium"><span data-i18n="Medium">Medium</span></option>
					<option value="Long"><span data-i18n="Long">Long</span></option>
					<!--<option value="All"><span data-i18n="">All</span></option>-->
				  </select>
				  <input type="text" name="attr_rankVal" value="0.1" style="display:none">
				 <div class="sheet-col16 sheet-centerText">
					<input name="attr_wpn_hp" class="sheet-text_input sheet-2digits" style="width: 21px;" type="text" value="0">/
					<input name="attr_wpn_hpmax" class="sheet-text_input sheet-2digits" style="width: 21px;" type="text" value="0">
				  </div>
					<div class="sheet-col17">
						<button type="roll" style="padding-top: 0px;" class="sheet-turn_order sheet-col17" title="Add to turn order" value="&{template:turnOrder} {{weapon=@{weapon_type}}} {{rank=[[[[@{dex}+@{rankVal}]] &{tracker}]]}}" ></button><button type="roll" style="padding-top: 0px;" class="sheet-turn_order sheet-col18" title="Add to turn order -? Dex"  value="&{template:turnOrder} {{weapon=@{weapon_type}}} {{rank=[[[[@{dex}+@{rankVal}+?{Mod.|-5}]] &{tracker}]]}}" ></button>
				   </div>
				  <!--<input type="checkbox" name="attr_skillcheck" />	-->
			   </div>
			</fieldset>
			<!-- section,wpnType,skill,hands,damage,critDamage,impales,hp,length,parry,strmin,dexmin -->
			<div>
				<span class="sheet-input_label" data-i18n="Use-mount-damage-bonus">* Use mount's damage bonus</span>
				<input name="attr_mountDB" title="Mount Damage Bonus" class="sheet-text_input" style="width: 50px;" type="text" value="0">

			</div>
			<br>
			<div class="sheet-fullDivider sheet-centerText">
				<div class="sheet-header2" data-i18n="Missile-Weapons">Missile Weapons</div>
			</div>

			<div class="sheet-msslWrapper">
				   <div class="sheet-col1 sheet-row1 sheet-tableHdr" data-i18n="Missile-Weapon">Missile Weapon</div>
				   <div class="sheet-col2 sheet-row1  sheet-tableHdr" data-i18n="Skill-Used">Skill Used</div>
				   <div class="sheet-col3  sheet-row1 sheet-tableHdr" data-i18n="STR">STR</div>
				   <div class="sheet-col4 sheet-row1  sheet-ableHdr" data-i18n="DEX">DEX</div>
				   <div class="sheet-col5  sheet-row1 sheet-tableHdr" data-i18n="#">#</div>
				   <div class="sheet-col6  sheet-row1 tableHdr" data-i18n="Skill">Skill</div>
				   <div class="sheet-col7  sheet-row1 sheet-tableHdr" data-i18n="Mod">Mod.</div>
				   <div class="sheet-col8 sheet-row1  sheet-tableHdr" data-i18n="Total">Total</div>
				   <div class="sheet-col9  sheet-row1 sheet-tableHdr"></div>
				   <div class="sheet-col10  sheet-row1 sheet-tableHdr" data-i18n="Damage">Damage</div>
				   <div class="sheet-col11  sheet-row1 sheet-tableHdr" data-i18n="DB">DB</div>
				   <div class="sheet-col12  sheet-row1 sheet-tableHdr" data-i18n="Range">Range</div>
				   <div class="sheet-col13  sheet-row1 sheet-tableHdr" data-i18n="Attks">Attks</div>
				   <div class="sheet-col14  sheet-row1 sheet-tableHdr" data-i18n="I?">I?</div>
				   <div class="sheet-col15  sheet-row1 sheet-tableHdr" data-i18n="HP">HP</div>
				   <div class="sheet-col16 sheet-row1 sheet-tableHdr" data-i18n="Ammo">Ammo</div>
				   <div class="sheet-col17  sheet-row1 sheet-tableHdr" data-i18n="Turn-Order">Turn Order</div>

			</div>


			<fieldset class="repeating_missle">
			   <div class="sheet-msslWrapper">


				  <input name="attr_weapon_type" class="sheet-text_input sheet-cellFill sheet-col1" type="text">
				  <input name="attr_skillName" class="sheet-text_input sheet-cellFill  sheet-col2" type="text">
				  <input name="attr_strmin" class="sheet-text_input sheet-cellFill sheet-centerText  col3" style="width: 21px; margin-left: 1px;" type="text" value="9">
				  <input name="attr_dexmin" class="sheet-text_input sheet-cellFill sheet-centerText  sheet-col4" style="width: 21px;" type="text" value="9">
				  <input name="attr_skillDefault" title="STR/DEX < min."  type="checkbox">
				 <input name="attr_skillReduct" style="display: none;" type="text" value="1">
				  <input name="attr_minmod" class="sheet-text_input sheet-2digits" style="width: 30px; display: none;" type="text" readonly="" value="0">
				  <input name="attr_skillValue" class="sheet-text_input sheet-2digits sheet-col6" type="text" readonly="">
							  <input name="attr_skillWpnMod" class="sheet-text_input sheet-2digits sheet-col7" type="text" value="0">
					<input name="attr_skillTotal" class="sheet-text_input sheet-2digits sheet-col8" type="text" readonly="" value="0"><button  type="roll" class="col9" style="margin-right: 0px; margin-left: 0px;" name="roll_msslWpn"  value="@{melee_value}"></button>


								<textarea name="attr_melee_value" style="display: none;">&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{skillTotal})]]}}  {{crit=[[round(([[(@{skillTotal})]])/5)+1]]}} {{success=[[(@{skillTotal})]]}} {{roll=[[1d100]]}} {{weapon=@{weapon_type}}} {{skill=@{skillName}}} {{type=[[1]]}} {{impale=[[@{impales}]]}} {{damage=[[@{wpn_damage}+@{wpnmdb}]]}} {{critdamage=[[@{wpn_damage}+@{wpn_damage}+@{wpnmdb}]]}} {{mntTogVal=[[0]]}}</textarea>


				  <input name="attr_wpn_damage" class="sheet-text_input  sheet-cellFill  sheet-col10" type="text">
				  <input name="attr_mdbtoggle" class="sheet-col11" selected="selected"  type="checkbox">
				  <input name="attr_wpnmdb" style="display: none;" type="text" value="0">
				  <input name="attr_critdamage" style="display: none;" type="text">
				  <input name="attr_baseRange" class="sheet-text_input sheet-cellFill sheet-centerText sheet-col12" type="text" value="0">
				  <input name="attr_attacks" class="sheet-text_input sheet-cellFill sheet-centerText sheet-col13" type="text" value="0">
				  <input name="attr_impales" title="Impales?" class="sheet-col14" type="checkbox" value="1">
				 <div class="sheet-col15 sheet-centerText">
					<input name="attr_wpn_hp" class="sheet-text_input 2digits" style="width: 21px;height:19px;" type="text" value="0">/
					<input name="attr_wpn_hpmax" class="sheet-text_input 2digits" style="width: 21px;height:19px;" type="text" value="0">
				  </div>
				  <input name="attr_wpn_ammo" class="sheet-text_input sheet-centerText sheet-cellFill  sheet-col16" style="width: 35px;" type="text">

				  <div class="sheet-col17">
					<button type="roll" style="padding-top: 0px;1" name="roll_addMsslRnk" class="sheet-turn_order" title="Add to turn order" value="&{template:turnOrder} {{weapon=@{weapon_type}}} {{rank=[[[[@{dex}+0.3]] &{tracker}]]}}" ></button><button type="roll" style="padding-top: 0px;" name="roll_addMsslRnk-5" class="sheet-turn_order" title="Add to turn order -? Dex" value="&{template:turnOrder} {{weapon=@{weapon_type}}} {{rank=[[[[@{dex}+0.3+?{Mod.|-5}]] &{tracker}]]}}" ></button>
				  </div>
			   </div>
			</fieldset>
			<br>
			<span data-i18n="#-STR-DEX"> # STR or DEX below minimum</span>
			<br>
		</div><!--- Tab 1 end -->
		<div class="sheet-tab-content sheet-tab2"><!--- Tab 2 start -->
			<div class="gearWrapper">
						<div class="sheet-col1 sheet-row1">
							<div class="sheet-gearDivider sheet-centerText">
								<div class="sheet-header2" data-i18n="Equipment-Carried">Equipment Carried</div>
							</div>
							<div class="sheet-defaultTextarea bold" data-i18n="Equipment-Carried">Equipment Carried</div>
							<textarea class="sheet-equipment" name="attr_equipmentCarried" ></textarea>
							<div class="sheet-defaultTextarea bold" data-i18n="Other-Equipment">Other Equipment</div>
							<textarea class="sheet-equipment" name="attr_otherEquipment" ></textarea>
							<br>
							<div class="sheet-gearDivider sheet-centerText">
								<div class="sheet-header2" data-i18n="Saddle-Horse">Saddle Horse</div>
							</div>
							<br>
							<div class="sheet-horseWrapper">
								<div>
									<span class="sheet-bold" data-i18n="Name">Name</span><input type="text" name="attr_horse_name" class="sheet-text_input sheet-horseName"/>
									<span class="sheet-bold" data-i18n="Breed">Breed</span><input type="text" name="attr_horse_breed" class="sheet-text_input sheet-horseBreed"/>
								</div>
								<div class="horseStatWrapper sheet-marginT10">

										<span class="sheet-centerText sheet-bottCell bold sheet-col1 sheet-row1" data-i18n="CON">CON</span>
										<input type="text"  name="attr_horse_con" value="0" class="sheet-col2 sheet-row1 sheet-char_values"/>
										<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col3 sheet-row1" data-i18n="STR">STR</span>
										<input type="text" name="attr_horse_str"  value="0" class="sheet-col4 sheet-row1 sheet-char_values"/>
										<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col5 row1" data-i18n="SIZ">SIZ</span>
										<input type="text" name="attr_horse_siz"  value="0" class="sheet-col6 sheet-row1 sheet-char_values"/>
										<span class="sheet-centerText sheet-bottCell sheet-bold sheet-row1" style="grid-row: 7 / span 3" data-i18n="Dam-Bonus">Dam.Bonus</span>
										<input type="text"  readonly="readonly"  value="0" name="attr_mountDB" class="sheet-col10 sheet-row1 sheet-char_values"/>

										<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col1 sheet-row2" data-i18n="INT">INT</span>
										<input type="text" name="attr_horse_int"  value="0" class="sheet-col2 sheet-row2 sheet-char_values"/>
										<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col3 sheet-row2" data-i18n="POW">POW</span>
										<input type="text" name="attr_horse_pow"  value="0" class="sheet-col4 sheet-row2 sheet-char_values"/>
										<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col5 sheet-row2" data-i18n="DEX">DEX</span>
										<input type="text"  name="attr_horse_dex"  value="0" class="sheet-col6 sheet-row2 sheet-char_values"/>
										<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col7 sheet-row2" data-i18n="MOV">MOV</span>
										<input type="text"  name="attr_horse_mov"  value="0" class="sheet-col8 sheet-row2 sheet-char_values"/>

									</div>
									<br>
									<div>
										<div class="sheet-hpwndsrow1">
											<span class="sheet-bold" data-i18n="Armor">Armor</span>

											<input name="attr_horseArmor" class="sheet-text_input sheet-armorRow sheet-horseArmor" type="text" value="1D2-1">
											<input name="attr_horseArmorType" class="sheet-text_input sheet-armorRow sheet-horseArmorType" type="text" value="Muscle"><button type="roll" value="&{template:armor} {{armorTitle=@{horseArmorType}}} {{type=[[1]]}} {{deflect=[[@{horseArmor}]]}}"></button>
											<span class="sheet-bold" data-i18n="Hit-points">Hit Points</span>
											<input name="attr_horseHpCur" class="sheet-text_input sheet-armorRow sheet-2digits" type="text" readonly="readonly" value="0">/<input name="attr_horseHpMax" class="sheet-text_input sheet-armorRow sheet-2digits" type="text" readonly="readonly" value="0">
										</div>
										<div>
											<span class="sheet-bold" data-i18n="Damage">Damage</span>
											<input name="attr_horseWounds" class="sheet-text_input sheet-armorRow sheet-wounds" type="text" value="0"><button  type="roll" name="roll_powx4" title="POWx4" class="sheet-text_roll POWx4"  value="&{template:Powx4} {{roll=[[1d100]]}} {{value=[[@{horse_pow}*4]]}}"><span data-i18n="POWx4">POWx4</span></button><button  type="roll" name="roll_horseMjrWnd" title="Roll Major Wound" class="sheet-text_roll sheet-majWndButt"  value="&{template:mjrWnd} {{roll=[[1d100]]}}"><span data-i18n="Major-Wound">Major Wound</span></button><input name="attr_horseMjrWnd" class="sheet-char_values" type="text" readonly="readonly" value="0">
										</div>
									</div>


									<br>
									<div class="sheet-horseWeapons">
										   <div class="sheet-col2 sheet-tableHdr" data-i18n="Weapon">Weapon</div>
										   <div class="sheet-col3 sheet-tableHdr" data-i18n="%">%</div>
										   <div class="sheet-col4 sheet-tableHdr" data-i18n="Damage">Damage</div>
										   <div class="sheet-col5 sheet-tableHdr" data-i18n="DB">DB</div>
									</div>
									<fieldset class="repeating_horseWeapons">
										<div class="sheet-horseWeapons">
											<input name="attr_exptoggle" class="sheet-col1 sheet-bottCell" type="checkbox">
											<input type="text" name="attr_horseWeapon" class="sheet-text_input sheet-cellFill sheet-col2"/>
											<input type="text" name="attr_horseSkillToT" class="sheet-text_input sheet-cellFill sheet-centerText col3"/>
											<input type="text" name="attr_horseWpnDamage" class="sheet-text_input sheet-cellFill sheet-col4"/>
											<input name="attr_dbtoggle" class="sheet-col5 sheet-bottCell" type="checkbox"><button type="roll"  class="sheet-col6" name="roll_horseDamage" value="&{template:Roll} {{skillModVal=[[(@{horseSkillToT}+?{Mod.|0})]]}}  {{crit=[[round(([[(@{horseSkillToT}+?{Mod.|0})]])/5)+1]]}} {{success=[[(@{horseSkillToT}+?{Mod.|0})]]}} {{roll=[[1d100]]}} {{weapon=@{horse_name}}} {{skill=@{horseWeapon}}} {{type=[[1]]}} {{impale=[[0]]}} {{damage=[[@{horseWpnDamage}+@{WpnDB}]]}} {{critdamage=[[@{horseWpnDamage}+@{horseWpnDamage}+@{WpnDB}]]}} {{mntTogVal=[[0}]]}}  {{rollname=[Roll Fumble](~h2hfumble)}}"></button>
											<input type="text" style="display:none" name="attr_WpnDB"  />
										</div>
									</fieldset>
									<br>
									<br>
									<div class="sheet-horseSkills">
										   <div class="sheet-col2 sheet-tableHdr" data-i18n="Skill">Skill</div>
										   <div class="sheet-col3 sheet-tableHdr" data-i18n="%">%</div>
									</div>
									<fieldset class="repeating_horseSkills">
										<div class="sheet-horseSkills">
											<input name="attr_dbtoggle" class="sheet-col1 sheet-bottCell" type="checkbox">
											<input type="text" name="attr_skill" class="sheet-text_input sheet-cellFill sheet-col2"/>
											<input type="text" name="attr_skillValue" class="sheet-text_input sheet-cellFill sheet-centerText col3"/><button type="roll"  class="sheet-col4" name="roll_horseDamage" value="&{template:Roll} {{skillModVal=[[(@{SkillValue}+?{Mod.|0})]]}}  {{crit=[[round(([[(@{SkillValue}+?{Mod.|0})]])/5)+1]]}} {{success=[[(@{SkillValue}+?{Mod.|0})]]}} {{roll=[[1d100]]}} {{weapon=@{horse_name}}} {{skill=@{Skill}}} {{type=[[0]]}}  "></button>

										</div>
									</fieldset>
									<br>
								</div>
						</div>
						<div class="sheet-col2 sheet-row1">
							<div class="sheet-gearDivider sheet-centerText">
								<div class="sheet-header2" data-i18n="Wealth">Wealth</div>
							</div>
							<div class="sheet-bold" data-i18n="Bronzes-on-Person">Bronzes on Person</div>
							<textarea class="sheet-defaultTextarea wealth" name="attr_bronzesOnPerson"></textarea>
							<div class="sheet-bold" data-i18n="Treasure">Treasure</div>
							<textarea class="sheet-defaultTextarea wealth"  name="attr_Treasure"></textarea>
							<div class="sheet-bold" data-i18n="Income">Income</div>
							<textarea class="sheet-defaultTextarea wealth"  name="attr_Income"></textarea>
							<div class="sheet-bold" data-i18n="Property">Property</div>
							<textarea class="sheet-defaultTextarea wealth" name="attr_Property"></textarea>
							<div class="sheet-bold" data-i18n="Land">Land</div>
							<textarea class="sheet-defaultTextarea wealth" name="attr_Land"></textarea>

						</div>
			</div><!-- gearWrapper -->
		</div><!--- Tab 2 end -->
		<div class="sheet-tab-content sheet-tab3"><!--- Tab 3 start -->

			<div style="width: 38%;margin: auto;">
				<div class="sheet-magicStatsWrapper">
					<span class="sheet-row1 sheet-mpLabel" data-i18n="Magic-Points">Magic points</span>
					<span class="sheet-row1 sheet-spellLabel" data-i18n="Spells">Spells</span>
					 <div class="sheet-row2 sheet-col1 sheet-tableHdr sheet-centerText" data-i18n="Cur">Cur.</div>
					<div class="sheet-row2 sheet-col2 sheet-tableHdr sheet-centerText" data-i18n="Max">Max.</div>
					<div class="sheet-row2 col3 sheet-tableHdr sheet-centerText" data-i18n="Regen">Regen.</div>
					<div class="sheet-row2 sheet-col4 sheet-tableHdr sheet-centerText" data-i18n="#Spells"># Spells</div>
					<div class="sheet-row2 col5 sheet-tableHdr sheet-centerText" data-i18n="Duration">Duration</div>
				</div>
				<div class="sheet-magicStatsWrapper">
					<div class="sheet-row3 sheet-col1 sheet-tableHdr sheet-centerText" ><input type="text" name="attr_curMp" class="sheet-text_input sheet-cellFill sheet-col1 sheet-centerText"/></div>
					<div class="sheet-row3 sheet-col2 sheet-tableHdr sheet-centerText"><input type="text" name="attr_pow" readonly="readonly" class="sheet-text_input sheet-cellFill sheet-centerText"/></div>
					<div class="sheet-row3 col3 sheet-tableHdr sheet-centerText"><input type="text" name="attr_powRegen" readonly="readonly" class="sheet-text_input sheet-2digits sheet-centerText"/><span data-i18n="6-hours">/ 6 hours</span></div>
					<div class="sheet-row3 sheet-col4 sheet-tableHdr sheet-centerText"><input type="text" name="attr_int" readonly="readonly" class="sheet-text_input sheet-cellFill sheet-centerText"/></div>
					<div class="sheet-row3 sheet-col5 sheet-tableHdr sheet-centerText"><input type="text" name="attr_pow" readonly="readonly" class="sheet-text_input sheet-2digits sheet-cellFill sheet-centerText"/><span data-i18n="Combat-Rounds">Combat Rounds</span></div>
				</div>
			</div>
			<div class="sheet-centerDiv sheet-marginT10">
				<button  type="roll" class="sheet-text_roll"  name="roll_powRoll" value="&{template:Roll} {{name=@{character_name}}} {{skillModVal=[[(@{pow}*5)]]}}  {{crit=[[round(([[(@{pow}*5)]])/5)+1]]}} {{success=[[(@{pow}*5)]]}} {{roll=[[1d100]]}} {{skill=Summoning Roll}} {{type=0}} {{impale=0}}"><span data-i18n="Summoning-Roll">Summoning  Roll</span></button><button type="roll" name="roll_summonFumble" class="sheet-text_roll" value="&{template:summonFumble} {{roll=[[1d100]]}}" data-i18n="Summoning-Fumble">Summoning Fumble</button><button type="roll" style="padding-top: 0px;" class="sheet-turn_order sheet-col17" title="Add to turn order" value="&{template:turnOrder} {{weapon=Spell Casting}}} {{rank=[[[[100+@{int}]] &{tracker}]]}}" ></button>
			</div>
			<br>


			<div class="sheet-spellRuneStorageWrapper">
				<div class="sheet-col1">
					<div class="sheet-storageInscribedDivider sheet-centerText">
						<div class="sheet-header2" data-i18n="Spells-Runes">Spells & Runes</div>
					</div>
					<div class="sheet-spellWrapper">
						<div class="sheet-row1 sheet-col1 sheet-tableHdr" data-i18n="Spell-Name">Spell Name</div>
						 <div class="sheet-row1 sheet-col2 sheet-tableHdr sheet-centerText" data-i18n="Source">Source</div>
						<div class="sheet-row1 sheet-col3 sheet-tableHdr" data-i18n="MP-Cost">MP-Cost</div>
						 <div class="sheet-row1 sheet-col4 sheet-tableHdr sheet-centerText" data-i18n="Range">Range</div>
						<!--<div class="sheet-row1 col5 sheet-tableHdr sheet-centerText" data-i18n="Effect">Effect</div>-->
					</div>
					<fieldset class="repeating_spells">
						<div class="sheet-spellWrapper">
							<input type="text" name="attr_spellName" class="sheet-col1 sheet-text_input sheet-cellFill  sheet-spellHgt"/>
							<select name="attr_spellSource" class="sheet-col2" style="width: 73px; margin-bottom: 0px;">
								<option value="Chaos" selected><span data-i18n="Chaos">Chaos</span></option>
								<option value="Law"><span data-i18n="Law">Law</span></option>
							</select>
							<input type="text" name="attr_mpCost" class="sheet-col3 sheet-text_input sheet-cellFill sheet-2digits sheet-centerText  spellHgt"/>
							<select name="attr_spellRange" class="sheet-col4" style="width: 73px; margin-bottom: 0px;">
								<option value="Sight" selected><span data-i18n="Sight">Sight</span></option>
								<option value="Touch"><span data-i18n="Touch">Touch</span></option>
							</select>
						</div>
						<div><textarea class="sheet-marginT10 sheet-spellEffect" name="attr_spellEffect"></textarea></div>
					</fieldset>
				</div>
				<div class="sheet-col2">
					<div class="sheet-storageInscribedDivider sheet-centerText">
						<div class="sheet-header2" data-i18n="MP-Storage">MP Storage</div>
					</div>
					<div class="sheet-mpStorageWrapper">
						   <div class="sheet-row1 sheet-col1" data-i18n="Location-Item">Location / Item</div>
						   <div class="sheet-row1  sheet-col2" data-i18n="Cur">Cur.</div>
						   <div class="sheet-row1 sheet-col3" data-i18n="Max">Max.</div>
					</div>

					<fieldset class="repeating_mpStorage">
						<div class="sheet-mpStorageWrapper">
							<input  type="text"  class="sheet-col1 sheet-text_input sheet-centerText sheet-cellFill" name="attr_mpLOC"/>
							<input  type="text" value="0" class="sheet-col2 sheet-text_input  sheet-centerText sheet-2digits"  name="attr_curmp"/>
							<input  type="text" value="0" class="sheet-col3 sheet-text_input  sheet-centerText sheet-2digits"  name="attr_maxmp"/>
						</div>
					</fieldset>
					<br>
					<div class="sheet-storageInscribedDivider sheet-centerText">
						<div class="sheet-header2" data-i18n="Inscribed-Runes">Inscribed Runes</div>
					</div>
					<div class="sheet-runeWrapper">
						<div class="sheet-row1 sheet-col1 sheet-tableHdr" data-i18n="Name">Name</div>
						<div class="sheet-row1 sheet-col2 sheet-tableHdr sheet-centerText" data-i18n="Source">Source</div>
						<div class="sheet-row1 sheet-col3 sheet-tableHdr" data-i18n="MP">MP</div>
						<div class="sheet-row1 sheet-col4 sheet-tableHdr sheet-centerText" data-i18n="Range">Range</div>
						<div class="sheet-row1 sheet-col5 sheet-tableHdr sheet-centerText" data-i18n="Duration">Dur.</div>
						<div class="sheet-row1 sheet-col6 sheet-tableHdr sheet-centerText" data-i18n="Location">Location</div>
					</div>
					<fieldset class="repeating_runes">
						<div class="sheet-runeWrapper">
							<input type="text" name="attr_runeName" class="sheet-col1 sheet-text_input sheet-cellFill sheet-spellHgt"/>
							<select name="attr_runeSource" class="sheet-col2 sheet-cellFill">
								<option value="Chaos" selected><span data-i18n="Chaos">Chaos</span></option>
								<option value="Law"><span data-i18n="Law">Law</span></option>
							</select>
							<input type="text" name="attr_mpCost" class="sheet-col3 sheet-text_input sheet-cellFill sheet-centerText sheet-spellHgt"/>
							<select name="attr_spellRange" class="sheet-col4 sheet-cellFill">
								<option value="Sight"><span data-i18n="Barrier">Barrier</span></option>
								<option value="Sight"><span data-i18n="Enclosure">Enclosure</span></option>
								<option value="Sight"><span data-i18n="Self">Self</span></option>
								<option value="Touch" selected><span data-i18n="Touch">Touch</span></option>
							</select>
							<input type="text" name="attr_runeDuration" class="sheet-col5 sheet-text_input sheet-cellFill sheet-spellHgt"/>
							<input type="text" name="attr_runeLocation" class="sheet-col6 sheet-text_input sheet-cellFill sheet-spellHgt"/>
						</div>
						<div><textarea class="sheet-spellEffect sheet-marginT10" name="attr_runeEffect"></textarea></div>
					</fieldset>



				</div>


			</div>

			<div class="sheet-fullDivider sheet-centerText">
				<div class="sheet-header2" data-i18n="Bound-Demons-Elementals">Bound Demons & Elementals</div>
			</div>
			<div class="sheet-demonsWrapper">
				<div class="sheet-col1">
				<div class="repeating_demons">

					<div class="sheet-demonWrapper sheet-marginT10">
							<div>
								<span class="sheet-bold" data-i18n="Name">Name</span><input type="text" name="attr_demon_name" class="sheet-text_input sheet-horseName"/>
								<span class="sheet-bold" data-i18n="Breed">Breed</span><input type="text" name="attr_demon_breed" class="sheet-text_input sheet-horseBreed"/>
							</div>
							<div class="sheet-demonStatWrapper sheet-marginT10">

									<span class="sheet-centerText sheet-bottCell bold sheet-col1 sheet-row1" data-i18n="CON">CON</span>
									<input type="text"  name="attr_demon_con" value="0" class="sheet-col2 sheet-row1 sheet-char_values"/><button class="sheet-row1 col3" value="&{template:Roll} {{name=@{demon_name}}} {{skillModVal=[[(@{demon_con}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{demon_con}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{demon_con}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=@{demon_name} Constitution Roll}} {{type=0}} {{impale=0}}"  type="roll"></button>
									<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col4 sheet-row1" data-i18n="STR">STR</span>
									<input type="text" name="attr_demon_str"  value="0" class="sheet-col5 sheet-row1 sheet-char_values"/>
									<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col7 sheet-row1" data-i18n="SIZ">SIZ</span>
									<input type="text" name="attr_demon_siz"  value="0" class="col8 sheet-row1 sheet-char_values"/>
									<span class="sheet-centerText sheet-bottCell bold sheet-col1 sheet-row2" data-i18n="INT">INT</span>
									<input type="text" name="attr_demon_int"  value="0" class="sheet-col2 sheet-row2 sheet-char_values"/><button class="sheet-row2 col3" value="&{template:Roll} {{name=@{demon_name}}} {{skillModVal=[[(@{demon_int}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{demon_int}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{demon_int}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=@{demon_name} Idea Roll}} {{type=0}} {{impale=0}}" type="roll"></button>
									<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col4 sheet-row2" data-i18n="POW">POW</span>
									<input type="text" name="attr_demon_pow"  value="0" class="sheet-col5 sheet-row2 sheet-char_values"/><button class="sheet-row2 sheet-col6" value="&{template:Roll} {{name=@{demon_name}}} {{skillModVal=[[(@{demon_pow}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{demon_pow}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{demon_pow}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=@{demon_name} Luck Roll}} {{type=0}} {{impale=0}}"  type="roll"></button>
									<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col7 sheet-row2" data-i18n="DEX">DEX</span>
									<input type="text"  name="attr_demon_dex"  value="0" class="sheet-col8 sheet-row2 sheet-char_values"/><button class="sheet-row2 col9" value="&{template:Roll} {{name=@{demon_name}}} {{skillModVal=[[(@{demon_dex}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{demon_dex}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{demon_dex}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=@{demon_name} Dexterity Roll}} {{type=0}} {{impale=0}}"  type="roll"></button>


								</div>
								<div class="sheet-marginT5">
									<span class="sheet-centerText sheet-bold "  data-i18n="Dam-Bonus">Dam.Bonus</span>
									<input type="text"  readonly="readonly"  value="0" name="attr_demonDB" class="sheet-char_values"/>
									<span class="sheet-centerText sheet-bold" data-i18n="MOV">MOV</span>
									<input type="text"  name="attr_demon_mov"  value="0" class="sheet-char_values"/>
								</div>
								<div class="sheet-marginT10">
									<span class="sheet-bold "  data-i18n="Need">Need</span>
									<input type="text"   value="" name="attr_demonNeed" class="sheet-text_input sheet-cellFill"/>
								</div>

								<div class="sheet-marginT10">
									<div class="sheet-hpwndsrow1">
										<span class="sheet-bold" data-i18n="Armor">Armor</span>

										<input name="attr_demonArmor" class="sheet-text_input sheet-armorRow sheet-horseArmor" type="text" value="">
										<input name="attr_demonArmorType" class="sheet-text_input sheet-armorRow sheet-horseArmorType" type="text" value=""><button type="roll" value="&{template:armor} {{armorTitle=@{demonArmorType}}} {{type=[[1]]}} {{deflect=[[@{demonArmor}]]}}"></button>
										<span class="sheet-bold" data-i18n="Hit-points">Hit Points</span>
										<input name="attr_demonHpCur" class="sheet-text_input sheet-armorRow sheet-2digits" type="text"  value="0">/<input name="attr_demonHpMax" class="sheet-text_input sheet-armorRow sheet-2digits" type="text" readonly="readonly" value="0">
									</div>
									<div>
										<span class="sheet-bold" data-i18n="Damage">Damage</span>
										<input name="attr_demonWounds" class="sheet-text_input sheet-armorRow sheet-wounds" type="text" value="0"><button  type="roll" name="roll_powx4" title="POWx4" class="sheet-text_roll sheet-POWx4"  value="&{template:Powx4} {{roll=[[1d100]]}} {{value=[[@{demon_pow}*4]]}}"><span data-i18n="POWx4">POWx4</span></button><button  type="roll" name="roll_demonMjrWnd" title="Roll Major Wound" class="sheet-text_roll sheet-majWndButt"  value="&{template:mjrWnd} {{roll=[[1d100]]}}"><span data-i18n="Major-Wound">Major Wound</span></button><input name="attr_demonMjrWnd" class="sheet-char_values" type="text" readonly="readonly" value="0">
									</div>
								</div>
								<br>	
								<div class="sheet-demonAbilities sheet-marginT10">
									   <div class="sheet-col1 sheet-tableHdr" data-i18n="Ability">Ability</div>
									   <div class="sheet-col2 sheet-tableHdr" data-i18n="MP">MP</div>
									   <div class="sheet-col3 sheet-tableHdr" data-i18n="Range">Range</div>
									   <div class="sheet-col4 sheet-tableHdr" data-i18n="Chance">Chance</div>

								</div>
								<fieldset class="repeating_demonAbilities">

									<div class="sheet-demonAbilities">
										<input type="text" name="attr_demonAbility" class="sheet-text_input sheet-topCell sheet-cellFill sheet-col1"/>
										<input type="text" name="attr_abilityMPCost" class="sheet-text_input sheet-topCell sheet-cellFill sheet-centerText sheet-col2"/>
										<input type="text" name="attr_abilityRange" class="sheet-text_input sheet-topCell  sheet-cellFill sheet-centerText col3"/>
										<input name="attr_AbilityChance" class="sheet-col4 sheet-text_input sheet-cellFill sheet-centerText sheet-topCell" type="text">
									</div>
									<div class="sheet-abilityEffectHdr" data-i18n="Effect">Effect</div>
									<textarea class="sheet-abilityEffect" name="attr_abilityEffect"></textarea>
								</fieldset>
								<br>
								<div class="sheet-horseWeapons">
									   <div class="sheet-col2 sheet-tableHdr" data-i18n="Weapon">Weapon</div>
									   <div class="sheet-col3 sheet-tableHdr" data-i18n="%">%</div>
									   <div class="sheet-col4 sheet-tableHdr" data-i18n="Damage">Damage</div>
									   <div class="sheet-col5 sheet-tableHdr" data-i18n="DB">DB</div>
								</div>
								<fieldset class="repeating_demonWeapons">
									<div class="sheet-horseWeapons">
										<input name="attr_exptoggle" class="sheet-col1 sheet-bottCell" type="checkbox">
										<input type="text" name="attr_demonWeapon" class="sheet-text_input sheet-cellFill sheet-col2"/>
										<input type="text" name="attr_demonSkillToT" class="sheet-text_input sheet-cellFill sheet-centerText col3"/>
										<input type="text" name="attr_demonWpnDamage" class="sheet-text_input sheet-cellFill sheet-col4"/>
										<input name="attr_dbtoggle" class="sheet-col5 sheet-bottCell" type="checkbox"><button type="roll"  class="sheet-col6" name="roll_demonDamage" value="&{template:Roll} {{skillModVal=[[(@{demonSkillToT}+?{Mod.|0})]]}}  {{crit=[[round(([[(@{demonSkillToT}+?{Mod.|0})]])/5)+1]]}} {{success=[[(@{demonSkillToT}+?{Mod.|0})]]}} {{roll=[[1d100]]}} {{weapon=@{demon_name}}} {{skill=@{demonWeapon}}} {{type=[[1]]}} {{impale=[[0]]}} {{damage=[[@{demonWpnDamage}+@{WpnDB}]]}} {{critdamage=[[@{demonWpnDamage}+@{demonWpnDamage}+@{WpnDB}]]}} {{mntTogVal=[[0}]]}}  {{rollname=[Roll Fumble](~h2hfumble)}}"></button>
										<input type="text" style="display:none" name="attr_WpnDB"  />
									</div>
								</fieldset>
								<br>
								<div class="sheet-horseSkills sheet-marginT10">
									   <div class="sheet-col2 sheet-tableHdr" data-i18n="Skill">Skill</div>
									   <div class="sheet-col3 sheet-tableHdr" data-i18n="%">%</div>
								</div>
								<fieldset class="repeating_demonSkills">
									<div class="sheet-horseSkills">
										<input name="attr_dbtoggle" class="sheet-col1 sheet-bottCell" type="checkbox">
										<input type="text" name="attr_skill" class="sheet-text_input sheet-cellFill sheet-col2"/>
										<input type="text" name="attr_skillValue" class="sheet-text_input sheet-cellFill sheet-centerText col3"/><button type="roll"  class="sheet-col4" name="roll_demonDamage" value="&{template:Roll} {{skillModVal=[[(@{SkillValue}+?{Mod.|0})]]}}  {{crit=[[round(([[(@{SkillValue}+?{Mod.|0})]])/5)+1]]}} {{success=[[(@{SkillValue}+?{Mod.|0})]]}} {{roll=[[1d100]]}} {{weapon=@{demon_name}}} {{skill=@{demon_name}&#x000D;&#x000A;@{Skill}}} {{type=[[0]]}}  "></button>

									</div>
								</fieldset>
								<br>
					</div>
				</div>
				</div><!-- sheet-col1 end-->
				<div class="sheet-col2">


					<div class="sheet-demonWrapper sheet-marginT10">
							<div>
								<span class="sheet-bold" data-i18n="Name">Name</span><input type="text" name="attr_demon_name2" class="sheet-text_input sheet-horseName"/>
								<span class="sheet-bold" data-i18n="Breed">Breed</span><input type="text" name="attr_demon_breed2" class="sheet-text_input sheet-horseBreed"/>
							</div>
							<div class="sheet-demonStatWrapper sheet-marginT10">

									<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col1 sheet-row1" data-i18n="CON">CON</span>
									<input type="text"  name="attr_demon_con2" value="0" class="sheet-col2 sheet-row1 sheet-char_values"/><button name="roll_demonCon2" class="sheet-row1 sheet-col3" value="&{template:Roll} {{name=@{demon_name2}}} {{skillModVal=[[(@{demon_con2}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{demon_con2}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{demon_con2}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=@{demon_name} Constitution Roll}} {{type=0}} {{impale=0}}"  type="roll"></button>
									<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col4 sheet-row1" data-i18n="STR">STR</span>
									<input type="text" name="attr_demon_str2"  value="0" class="sheet-col5 sheet-row1 sheet-char_values"/>
									<span class="sheet-centerText sheet-bottCell sheet-bold col7 sheet-row1" data-i18n="SIZ">SIZ</span>
									<input type="text" name="attr_demon_siz2"  value="0" class="sheet-col8 sheet-row1 sheet-char_values"/>
									<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col1 sheet-row2" data-i18n="INT">INT</span>
									<input type="text" name="attr_demon_int2"  value="0" class="sheet-col2 sheet-row2 sheet-char_values"/><button class="sheet-row2 sheet-col3" value="&{template:Roll} {{name=@{demon_name2}}} {{skillModVal=[[(@{demon_int2}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{demon_int2}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{demon_int2}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=@{demon_name2} Idea Roll}} {{type=0}} {{impale=0}}" type="roll"></button>
									<span class="sheet-centerText sheet-bottCell sheet-bold sheet-col4 sheet-row2" data-i18n="POW">POW</span>
									<input type="text" name="attr_demon_pow2"  value="0" class="sheet-col5 sheet-row2 sheet-char_values"/><button class="sheet-row2 sheet-col6" value="&{template:Roll} {{name=@{demon_name}}} {{skillModVal=[[(@{demon_pow2}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{demon_pow2}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{demon_pow2}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=@{demon_name2} Luck Roll}} {{type=0}} {{impale=0}}"  type="roll"></button>
									<span class="sheet-centerText sheet-bottCell sheet-boldsheet- sheet-col7 sheet-row2" data-i18n="DEX">DEX</span>
									<input type="text"  name="attr_demon_dex2"  value="0" class="sheet-col8 sheet-row2 sheet-char_values"/><button class="sheet-row2 sheet-col9" value="&{template:Roll} {{name=@{demon_name2}}} {{skillModVal=[[(@{demon_dex2}*?{Multiplier|5})]]}}  {{crit=[[round(([[(@{demon_dex2}*?{Multiplier|5})]])/5)+1]]}} {{success=[[(@{demon_dex2}*?{Multiplier|5})]]}} {{roll=[[1d100]]}} {{skill=@{demon_name2} Dexterity Roll}} {{type=0}} {{impale=0}}"  type="roll"></button>


								</div>
								<div class="sheet-marginT5">
									<span class="sheet-centerText sheet-bold "  data-i18n="Dam-Bonus">Dam.Bonus</span>
									<input type="text"  readonly="readonly"  value="0" name="attr_demonDB2" class="sheet-char_values"/>
									<span class="sheet-centerText sheet-bold" data-i18n="MOV">MOV</span>
									<input type="text"  name="attr_demon_mov2"  value="0" class="sheet-char_values"/>
								</div>
								<div class="sheet-marginT10">
									<span class="sheet-bold "  data-i18n="Need">Need</span>
									<input type="text"   value="" name="attr_demonNeed2" class="sheet-text_input sheet-cellFill"/>
								</div>

								<div class="sheet-marginT10">
									<div class="sheet-hpwndsrow1">
										<span class="sheet-bold" data-i18n="Armor">Armor</span>

										<input name="attr_demonArmor2" class="sheet-text_input sheet-armorRow sheet-horseArmor" type="text" value="">
										<input name="attr_demonArmorType2" class="sheet-text_input sheet-armorRow sheet-horseArmorType" type="text" value=""><button type="roll" value="&{template:armor} {{armorTitle=@{demonArmorType2}}} {{type=[[1]]}} {{deflect=[[@{demonArmor2}]]}}"></button>
										<span class="sheet-bold" data-i18n="Hit-points">Hit Points</span>
										<input name="attr_demonHpCur2" class="sheet-text_input sheet-armorRow sheet-2digits" type="text"  value="0">/<input name="attr_demonHpMax2" class="sheet-text_input sheet-armorRow sheet-2digits" type="text" readonly="readonly" value="0">
									</div>
									<div>
										<span class="sheet-bold" data-i18n="Damage">Damage</span>
										<input name="attr_demonWounds2" class="sheet-text_input sheet-armorRow sheet-wounds" type="text" value="0"><button  type="roll" name="roll_powx42" title="POWx4" class="sheet-text_roll sheet-POWx4"  value="&{template:Powx4} {{roll=[[1d100]]}} {{value=[[@{demon_pow2}*4]]}}"><span data-i18n="POWx4">POWx4</span></button><button  type="roll" name="roll_demonMjrWnd2" title="Roll Major Wound" class="sheet-text_roll sheet-majWndButt"  value="&{template:mjrWnd} {{roll=[[1d100]]}}"><span data-i18n="Major-Wound">Major Wound</span></button><input name="attr_demonMjrWnd2" class="sheet-char_values" type="text" readonly="readonly" value="0">
									</div>
								</div>
								<br>	
								<div class="sheet-demonAbilities sheet-marginT10">
									   <div class="sheet-col1 sheet-tableHdr" data-i18n="Ability">Ability</div>
									   <div class="sheet-col2 sheet-tableHdr" data-i18n="MP">MP</div>
									   <div class="sheet-col3 sheet-tableHdr" data-i18n="Range">Range</div>
									   <div class="sheet-col4 sheet-tableHdr" data-i18n="Chance">Chance</div>

								</div>
								<fieldset class="repeating_demonAbilities2">

									<div class="sheet-demonAbilities">
										<input type="text" name="attr_demonAbility" class="sheet-text_input sheet-topCell sheet-cellFill sheet-col1"/>
										<input type="text" name="attr_abilityMPCost" class="sheet-text_input sheet-topCell sheet-cellFill sheet-centerText sheet-col2"/>
										<input type="text" name="attr_abilityRange" class="sheet-text_input sheet-topCell  sheet-cellFill sheet-centerText col3"/>
										<input name="attr_AbilityChance" class="sheet-col4 sheet-text_input sheet-cellFill sheet-centerText sheet-topCell" type="text">
									</div>
									<div class="sheet-abilityEffectHdr" data-i18n="Effect">Effect</div>
									<textarea class="sheet-abilityEffect" name="attr_abilityEffect"></textarea>
								</fieldset>
								<br>
								<div class="sheet-horseWeapons">
									   <div class="sheet-col2 sheet-tableHdr" data-i18n="Weapon">Weapon</div>
									   <div class="sheet-col3 sheet-tableHdr" data-i18n="%">%</div>
									   <div class="sheet-col4 sheet-tableHdr" data-i18n="Damage">Damage</div>
									   <div class="sheet-col5 sheet-tableHdr" data-i18n="DB">DB</div>
								</div>
								<fieldset class="repeating_demonWeapons2">
									<div class="sheet-horseWeapons">
										<input name="attr_exptoggle" class="sheet-col1 sheet-bottCell" type="checkbox">
										<input type="text" name="attr_demonWeapon" class="sheet-text_input sheet-cellFill sheet-col2"/>
										<input type="text" name="attr_demonSkillToT" class="sheet-text_input sheet-cellFill sheet-centerText sheet-col3"/>
										<input type="text" name="attr_demonWpnDamage" class="sheet-text_input sheet-cellFill sheet-col4"/>
										<input name="attr_dbtoggle" class="sheet-col5 sheet-bottCell" type="checkbox"><button type="roll"  class="sheet-col6" name="roll_demonDamage" value="&{template:Roll} {{skillModVal=[[(@{demonSkillToT}+?{Mod.|0})]]}}  {{crit=[[round(([[(@{demonSkillToT}+?{Mod.|0})]])/5)+1]]}} {{success=[[(@{demonSkillToT}+?{Mod.|0})]]}} {{roll=[[1d100]]}} {{weapon=@{demon_name2}}} {{skill=@{demonWeapon}}} {{type=[[1]]}} {{impale=[[0]]}} {{damage=[[@{demonWpnDamage}+@{WpnDB}]]}} {{critdamage=[[@{demonWpnDamage}+@{demonWpnDamage}+@{WpnDB}]]}} {{mntTogVal=[[0}]]}}  {{rollname=[Roll Fumble](~h2hfumble)}}"></button>
										<input type="text" style="display:none" name="attr_WpnDB"  />
									</div>
								</fieldset>
								<br>	
								<div class="sheet-horseSkills sheet-marginT10">
									   <div class="sheet-col2 sheet-tableHdr" data-i18n="Skill">Skill</div>
									   <div class="sheet-col3 sheet-tableHdr" data-i18n="%">%</div>
								</div>
								<fieldset class="repeating_demonSkills2">
									<div class="sheet-horseSkills">
										<input name="attr_dbtoggle" class="sheet-col1 sheet-bottCell" type="checkbox">
										<input type="text" name="attr_skill" class="sheet-text_input sheet-cellFill sheet-col2"/>
										<input type="text" name="attr_skillValue" class="sheet-text_input sheet-cellFill sheet-centerText col3"/><button type="roll"  class="sheet-col4" name="roll_demonDamage" value="&{template:Roll} {{skillModVal=[[(@{SkillValue}+?{Mod.|0})]]}}  {{crit=[[round(([[(@{SkillValue}+?{Mod.|0})]])/5)+1]]}} {{success=[[(@{SkillValue}+?{Mod.|0})]]}} {{roll=[[1d100]]}} {{weapon=@{demon_name2}}} {{skill=@{demon_name2}&#x000D;&#x000A;@{Skill}}} {{type=[[0]]}}  "></button>

									</div>
								</fieldset>
								<br>
					</div>
				</div>
				</div><!-- sheet-col2 end-->

		</div><!--- Tab 3 end -->
		<div class="sheet-tab-content sheet-tab4"><!--- Tab 4 start -->
			<div class="sheet-fullDivider sheet-centerText">
				<div class="sheet-header2" data-i18n="Background">Background</div>
			</div>
			<div class="sheet-backgroundWrapper">
				<div class="sheet-col1">
					<span class="sheet-charLabel" data-i18n="Titles-Aliases">Titles & Aliases</span>
					<textarea class="sheet-cellFill" name="attr_titlesAlisases"></textarea>

					<div class="sheet-marginT10">
						<span class="sheet-charLabel" data-i18n="Residence">Residence</span>
						<textarea class="sheet-cellFill" name="attr_Residence"></textarea>
					</div>
				</div>
				<div class="sheet-col2">
					<span class="sheet-charLabel" data-i18n="Family-Friends">Family & Friends</span>
					<textarea class="sheet-cellFill" name="attr_Family-Friends"></textarea>

					<div class="sheet-marginT10">
						<span class="sheet-charLabel" data-i18n="Enemies">Enemies</span>
						<textarea class="sheet-cellFill" name="attr_Enemies"></textarea>
					</div>
				</div>
			</div>
		</div><!--- Tab 4 end -->

	<!-- skillvalue,crit,success,roll,skill,impale -->
	<rolltemplate class="sheet-rolltemplate-Roll">
		<div class="wrapper">

			{{#rollTotal() type 1}}
				<div class="rollResult">{{weapon}}</div>
			{{/rollTotal() type 1}}
			<div class="rollHeader">{{skill}}</div>
			<div style="text-align:center">
				<img class="botDivider" src="https://raw.githubusercontent.com/Lockbox313/imagedump/master/Elric/stormbringerDivderTest2.png">
			</div>

			<div class="rollBody"> <!-- -->
				<!--<div class="rollResult">Roll: <b>20</b> <= {{skillModVal}}</div> -->

				<div class="rollResult">Roll:{{roll}}  <= {{skillModVal}} </div>

				{{#rollGreater() roll 98}}
					{{#rollTotal() roll 100}}
						<div class="rollResult">Result:Fumble</div>
						{{#rollname}}
							<div class="rollResult">
								{{rollname}}
							</div>
						{{/rollname}}
					{{/rollTotal() roll 100}}
					{{#^rollTotal() roll 100}}
						{{#rollGreater() skillModVal 100}}
							<div class="rollResult">Result:Failure</div>
						{{/rollGreater() skillModVal 100}}
						{{#^rollGreater() skillModVal 100}}
							<div class="rollResult">Result:Fumble</div>
						{{/^rollGreater() skillModVal 100}}
					{{/^rollTotal() roll 100}}
				{{/rollGreater() roll 98}}

				{{#^rollGreater() roll 98}}

					{{#rollGreater() roll skillModVal}}
						<div class="rollResult">Result:Failure</div>
					{{/rollGreater() roll skillModVal}}

					{{#^rollGreater() roll skillModVal}}
						{{#rollTotal() roll 1}}
							{{#rollTotal() impale 1}}
								<div class="rollResult">Result:Impale</div>
								<div class="rollResult">Normal Damage:{{damage}}</div>
								<div class="rollResult">Critical Damage:{{critdamage}}</div>
							{{/rollTotal() impale 1}}
							{{#^rollTotal() impale 1}}
								<div class="rollResult">Result:Critical</div>
								<div class="rollResult">Normal Damage:{{damage}}</div>
								<div class="rollResult">Critical Damage:{{critdamage}}</div>
							{{/^rollTotal() impale 1}}
						{{/rollTotal() roll 1}}

						{{#^rollTotal() roll 1}}

							{{#rollBetween() roll 2 crit}}
								<div class="rollResult">Result:Critical</div>
								{{#rollTotal() type 1}}
									<div class="rollResult">Normal Damage:{{damage}}</div>
									<div class="rollResult">Critical Damage:{{critdamage}}</div>
								{{/rollTotal() type 1}}
							{{/rollBetween() roll 2 crit}}
							{{#^rollBetween() roll 2 crit}}
								<div class="rollResult">Result:Success</div>
								{{#rollTotal() type 1}}
									{{#rollTotal() mntTogVal 1}}
										<div class="rollResult">Damage:{{mntDamage}}</div>
									{{/rollTotal() mntTogVal 1}}
									{{#^rollTotal() mntTogVal 1}}
										<div class="rollResult">Damage:{{damage}}</div>
									{{/^rollTotal() mntTogVal 1}}
								{{/rollTotal() type 1}}
							{{/^rollBetween() roll 2 crit}}
						{{/^rollTotal() roll 1}}


					{{/^rollGreater() roll skillModVal}}

				{{/^rollGreater() roll 98}}

		</div>

	</rolltemplate>


	<rolltemplate class="sheet-rolltemplate-h2hFumble">
		<div class="wrapper">


			<div class="rollHeader">Hand-To-Hand Fumble</div>
			<div style="text-align:center">
				<img class="botDivider" src="https://raw.githubusercontent.com/Lockbox313/imagedump/master/Elric/stormbringerDivderTest2.png">
			</div>
			<div class="rollBody">
				<div class="rollResult">

					{{#rollBetween() roll 1 6}}
						<span data-i18n="h2hFumble1"><b>Slip or trip over rocks, etc</b>.- lose next parry; your foe may disengage.Slip or trip over rocks, etc. lose next parry; your foe may disengage.</span>
					{{/rollBetween() roll 1 6}}
					{{#rollBetween() roll 7 12}}
						<span data-i18n="h2hFumble2"><b>Slip or trip on a corpse or other obstacle</b>-lose next attack; your opponent may disengage.</span>
					{{/rollBetween() roll 7 12}}
					{{#rollBetween() roll 13 18}}
						<span data-i18n="h2hFumble3"><b>Slip or trip in a pool of blood or water or other hazard:-</b> lose next parry and attack;your enemy may disengage.</span>
					{{/rollBetween() roll 13 18}}
					{{#rollBetween() roll 19 24}} <span data-i18n="h2hFumble4"><b>Sweat in eyes</b>-parry, dodge,or move only for the next 1D3 combat rounds; your foe may disengage.</span>{{/rollBetween() roll 19 24}}
					{{#rollBetween() roll 25 28}} <span data-i18n="h2hFumble5"><b>Shield strap breaks</b>-halve your shield parry percentage until repaired. lnapplicable to a demon shield.</span>{{/rollBetween() roll 25 28}}
					{{#rollBetween() roll 29 32}} <span data-i18n="h2hFumble6"><b>Distracted</b>-automatic miss on your next attack, in whatever round it occurs.</span>{{/rollBetween() roll 29 32}}
					{{#rollBetween() roll 33 36}} <span data-i18n="h2hFumble7"><b>Drop weapon</b>-it's at your feet and costs 5 DEX-ranks to recover. Your enemy may disengage. lgnore this fumble if you parry with a shield.</span>{{/rollBetween() roll 33 36}}
					{{#rollBetween() roll 37 40}} <span data-i18n="h2hFumble8"><b>Weapon knocked away</b>-it is I D4 yards distant in a 1D8 direction. lgnore this fumble if you parry with a shield.</span>{{/rollBetween() roll 37 40}}
					{{#rollBetween() roll 41 43}} <span data-i18n="h2hFumble9"><b>Blow to solar plexus</b>-you can parry but not attack or dodge for two rounds; your opponent may disengage. lgnore thisfumble if you parry with a shield.</span>{{/rollBetween() roll 41 43}}
					{{#rollBetween() roll 44 46}} <span data-i18n="h2hFumble10"><b>Arm cut, dislocated shoulder</b>- you can use a weapon or use a shield (but not both) for the rest of the fight. lgnore this fumble if you parry with a shield.</span>{{/rollBetween() roll 44 46}}
					{{#rollBetween() roll 47 49}} <span data-i18n="h2hFumble11"><b>Smash to your face</b>-parry and dodge only for the next round as you try to wipe blood from your eyes; enemy may disengage. lgnore result if wearing a helmet.</span>{{/rollBetween() roll 47 49}}
					{{#rollBetween() roll 50 52}} <span data-i18n="h2hFumble12"><b>Unexpected blow from the side or rear</b>-you're knocked down; your foe may disengage</span>{{/rollBetween() roll 50 52}}
					{{#rollBetween() roll 53 55}} <span data-i18n="h2hFumble13"><b>Heavy hit to head</b>-you lose no hit points, but your senses reel from the buffet. Halve your attack and parry skills for one full round.</span>{{/rollBetween() roll 53 55}}
					{{#rollBetween() roll 56 58}} <span data-i18n="h2hFumble14"><b>Helmet knocked off or heavy hit to head <b>-if the former, you'll need 5 DEX-ranks to pick it up, and a full combat round to strap it on after disengaging. If the latter, Halve your attack and parry skills for one full round. Inapplicable to demon armor.</span>{{/rollBetween() roll 56 58}}
					{{#rollBetween() roll 59 62}} <span data-i18n="h2hFumble15"><b>Weapon breaks</b>-to get another one, unsheathe one or pick one up; your opponent may disengage. Inapplicable to a demon weapon.</span>{{/rollBetween() roll 59 62}}
					{{#rollBetween() roll 63 65}} <span data-i18n="h2hFumble16"><b>Your shield is cloven in two</b> - discard shield. If you were not using a shield, parrying weapon breaks. Inapplicable to a demon shield.</span>{{/rollBetween() roll 63 65}}
					{{#rollBetween() roll 66 68}} <span data-i18n="h2hFumble17"><b>Broken or cut</b> -  nose-bleed for 1D6+4 combat rounds; resulting deformity is permanent (lose 1 APP)</span>{{/rollBetween() roll 66 68}}
					{{#rollBetween() roll 69 71}} <span data-i18n="h2hFumble18"><b>Foot stepped on, ankle sprained</b>- halve MOV for rest of the battle</span>{{/rollBetween() roll 69 71}}
					{{#rollBetween() roll 72 74}} <span data-i18n="h2hFumble19"><b>You lose the little finger from your left or right hand</b> - uniformly lower weapon skills or shield skill by 10 percent. player's choice</span>{{/rollBetween() roll 72 74}}
					{{#rollBetween() roll 75 77}} <span data-i18n="h2hFumble20"><b>Weapon stuck in opponent's shield or armor</b>-roll STR x3 or less to pull it out.</span>{{/rollBetween() roll 75 77}}
					{{#rollBetween() roll 78 80}} <span data-i18n="h2hFumble21"><b>Leg cut</b>-halve Dodge skill until Physik. Heal, or Suture is successfully applied.</span>{{/rollBetween() roll 78 80}}
					{{#rollBetween() roll 81 83}} <span data-i18n="h2hFumble22"><b>Lose shoe or boot</b>-you will want it if the day is very hot or very cold, or if the ground is rocky. Disengage plus successful Search to find it.</span>{{/rollBetween() roll 81 83}}
					{{#rollBetween() roll 84 86}} <span data-i18n="h2hFumble23"><b>Knee smashed or chopped</b> - no Dodges, Ride. or Swim, or moves above 4. lgnore this result if you're using a large shield</span>{{/rollBetween() roll 84 86}}
					{{#rollBetween() roll 87 89}} <span data-i18n="h2hFumble24"><b>Bloody cut across one eye half blinds you</b>-halves attacks and parries until Physik, Heal, or Suture is successfully appl~ed.</span>{{/rollBetween() roll 87 89}}
					{{#rollBetween() roll 90 92}} <span data-i18n="h2hFumble25"><b>Armor straps cut</b>-subtract 1 from armor roll results until the armor is repaired. Inapplicable to demon armor.</span>{{/rollBetween() roll 90 92}}
					{{#rollBetween() roll 93 95}} <span data-i18n="h2hFumble26"><b>Portion of armor lost</b>-uniformly reduce armor roll results by 2 for the rest of the fight. Inapplicable to demon armor.</span>{{/rollBetween() roll 93 95}}
					{{#rollBetween() roll 96 97}} <span data-i18n="h2hFumble27"><b>Hit friend or self, your Luck roll decides </b>-does rolled damage with applicable damage bonus.</span>{{/rollBetween() roll 96 97}}
					{{#rollBetween() roll 98 99}} <span data-i18n="h2hFumble28"><b>Really bad fumble</b> - roll two more results.</span>{{/rollBetween() roll 98 99}}
					{{#rollTotal() roll100}} <span data-i18n="h2hFumble29"><b>Worst possilble fumble</b>-roll three more times.</span>{{/rollTotal() roll100}}
				</div>
			</div>
		</div>
	</rolltemplate>


	<rolltemplate class="sheet-rolltemplate-msslFumble">
		<div class="wrapper">


			<div class="rollHeader">Missile Fumble</div>
			<div style="text-align:center">
				<img class="botDivider" src="https://raw.githubusercontent.com/Lockbox313/imagedump/master/Elric/stormbringerDivderTest2.png">
			</div>
			<div class="rollBody">
				<div class="rollResult">
					{{#rollTotal() roll 1}}
						<span data-i18n="msslFumble1">Fumbler slips, does not fire this though attacking, but do not 6 Fumbler sees that he or she round.</span>
					{{/rollTotal() roll 1}}
					{{#rollTotal() roll 2}}
						<span data-i18n="msslFumble2">Fumbler fails, breaking the arrow or spear, or spilling sling stones. No shooting this round.</span>
					{{/rollTotal() roll 2}}
					{{#rollTotal() roll 3}}
						<span data-i18n="msslFumble3">Fumbler drops the missle, picks it up, then shoots on the last DEX rank.</span>
					{{/rollTotal() roll 3}}
					{{#rollTotal() roll 4}}
						<span data-i18n="msslFumble4">Fumbler slips and misfires, hitting a random target on his own side. if available. Roll as though attacking, but donot add a damage bonus, becuase the attack was made off balance.  The target cannot parry or dodge.</span>
					{{/rollTotal() roll 4}}
					{{#rollTotal() roll 5}}
						<span data-i18n="msslFumble5">Because of improper care the fumbler's bowstring breaks, or the the spearhead falls off. No attack this round. Fixing the problem takes 1D4 combat rounds. Inappicable to demon weapons.</span>
					{{/rollTotal() roll 5}}
					{{#rollTotal() roll 6}}
						<span data-i18n="msslFumble6">Fumbler sees that he or she has not unpacked some or all of his or her ammunition, and that this attack is thelast possible. If thepack is nearby, 1D3 combat rounds to fetch it.</span>
					{{/rollTotal() roll 6}}
				</div>
			</div>
		</div>
	</rolltemplate>




	<rolltemplate class="sheet-rolltemplate-mjrWnd">
		<div class="wrapper">
			<div class="rollHeader" data-i18n="Major-Wound">Major Wound</div>
			<div style="text-align:center">
				<img class="botDivider" src="https://raw.githubusercontent.com/Lockbox313/imagedump/master/Elric/stormbringerDivderTest2.png">
			</div>
			<div class="rollBody">
				<div class="rollResult">
					{{#rollBetween() roll 1 10}}
						<span data-i18n="MajorWound-1">Severed leg tendons causing limping, or fused ankle bones causing limping, or back muscles or spinal nerve damage bending the torso to the left or right, or a shattered knee that cannot bend, or make up your own. Lose 1D3 DEX. The maximum MOV is now that 1D3 less. Still able to fight.</span>
					{{/rollBetween() roll 1 10}}
					{{#rollBetween() roll 11 20}}
						<span data-i18n="MajorWound-2">Much of your nose has been sliced away, or multiple scars deface both hands, or an ear has been cut off, or a livid scar lends an evil cast to your face, or make up your own. Lose 1D3 APP. Your visible and unappealing deformity cannot be disguised. Still able to fight.</span>
					{{/rollBetween() roll 11 20}}
					{{#rollBetween() roll 21 30}}
						<span data-i18n="MajorWound-3">Wrist or hand damage, or a slab of arm or shoulder muscle has been cut away, or a chunk was hewn from thigh or calf muscles, or you have spinal nerve damage, or several fingers or toes were severed, or make up your own. Lose 1D3 STR; this loss may change what weapons you can swing. Still able to fight with a weapon, but not a shield.</span>
					{{/rollBetween() roll 21 30}}
					{{#rollBetween() roll 31 40}}
						<span data-i18n="MajorWound-4">A punctured lung leads to a weakened respiratory system, or deep stomach wounds chronically reinfect. or belly wounds weaken your digestion and general health, or you damaged kidneys and liver, or make up your own. Lose 1D3 CON; maximum MOV is now that 1D3 less, and Hit Points may be lower. Still able to fight.</span>
					{{/rollBetween() roll 31 40}}
					{{#rollBetween() roll 41 50}}
						<span data-i18n="MajorWound-5">Concussion damages hearing and limits Listen and Insight to maximums of 65 percent; or cuts to the head thereafter requiring Luck rolls each time to use the skills Insight, Nature, Other Language(s), and World Lore; or blows or cuts which affect depth perception and leave missile weapon skills at maximums of 65 percent; or multiple cuts to the face and neck limit the skills of Bargain, Fast Talk, Oratory, and spoken languages to 65 percent maximum, or make up your own. Lose 1D3 INT; this loss affects the Adventurer’s ability to cast magic. Still able to fight</span>
					{{/rollBetween() roll 41 50}}
					{{#rollBetween() roll 51 60}}
						<span data-i18n="MajorWound-6">Back muscles or spinal nerve damage bending the torso, both leg tendons causing limping, or fused ankle bones causing limping or loss of one or both arms.  Lose 1D6 DEX and reduce maximum MOV by that same amount. Unable to fight.</span>
					{{/rollBetween() roll 51 60}}
					{{#rollBetween() roll 61 70}}
						<span data-i18n="MajorWound-7">Much of your nose has been sliced away, or multiple scars deface both hands, or an ear has been cut off, or a livid scar lends an evil cast to your face, or make up your own. Lose 1D6 APP. Your visible and very unappealing deformity cannot be disguised. Still able to fight</span>
					{{/rollBetween() roll 61 70}}
					{{#rollBetween() roll 71 80}}
						<span data-i18n="MajorWound-8">Wrist or hand damage, or a slab of arm or shoulder muscle has been cut away, or a chunk was hewn from thigh or calf muscles, or you have spinal nerve damage, or several fingers or toes were severed, or make up your own. Lose 1D6 STR; this loss may change what weapons you can swing. Still able to fight with a weapon, but not a shield</span>
					{{/rollBetween() roll 71 80}}
					{{#rollBetween() roll 81 90}}
						<span data-i18n="MajorWound-9">A punctured lung leads to a weakened respiratory system, or deep stomach wounds chronically reinfect. or belly wounds weaken your digestion and general health, or you damaged kidneys and liver, or make up your own. Lose 1D6 CON; maximum MOV is now that 1D6 less, and Hit Points may be lower. Unable to fight</span>
					{{/rollBetween() roll 81 90}}
					{{#rollBetween() roll 91 92}}
						<span data-i18n="MajorWound-10">Bad facial and vocal-cord injuries. Lose 1D6 APP; lower the Charisma roll respectively. Still able to fight </span>
					{{/rollBetween() roll 91 92}}
					{{#rollBetween() roll 93 94}}
						<span data-i18n="MajorWound-11">Broken bones and severed ganglia. Lose 1D6 DEX; from now on the Adventurer can only use shields and 1H hand-to-hand weapons. Still able to fight.</span>
					{{/rollBetween() roll 93 94}}
					{{#rollBetween() roll 95 96}}
						<span data-i18n="MajorWound-12">Nerve damage to left or right arm. Lose 1D6 DEX; hereafter only the other arm can wield weapons or shields. Still able to fight</span>
					{{/rollBetween() roll 95 96}}
					{{#rollBetween() roll 97 98}}
						<span data-i18n="MajorWound-13">Nerve damage to both arms. Lose 1D6 DEX; though the legs are fine, neither arm nor hand can wield anything. Unable to fight.</span>
					{{/rollBetween() roll 97 98}}
					{{#rollTotal() roll 99}}
						<span data-i18n="MajorWound-14">Adventurer is mutilated by vicious wounds. Lose 1D3 points each from APP, DEX, and CON, and describe the results. Unable to fight.</span>
					{{/rollTotal() roll 99}}
					{{#rollTotal() roll 100}}
						<span data-i18n="MajorWound-15">Adventurer was deliberately mutilated after collapsing. Remove 1D4 points each from any of four characteristics, and describe the results. Unable to fight.</span>
					{{/rollTotal() roll 100}}

				</div>
			</div>
		</div>
	</rolltemplate>


	<rolltemplate class="sheet-rolltemplate-armor">
		<div class="wrapper">


			<div class="rollHeader">{{armorTitle}}</div>
			<div style="text-align:center">
				<img class="botDivider" src="https://raw.githubusercontent.com/Lockbox313/imagedump/master/Elric/stormbringerDivderTest2.png">
			</div>
			<div class="rollBody">
				<div class="rollResult">
					{{#rollTotal() type 1}}
						<span data-i18n="dmg-defelct">Damage Deflected:</span>{{deflect}}
					{{/rollTotal() type 1}}
					{{#rollTotal() type 2}}
						<div class="rollResult">Roll:{{roll}}  <= {{affect}} </div>
						{{#rollGreater() roll affect}}
							<span data-i18n="No-affect">Skill not affected</span>{{deflect}}
						{{/rollGreater() roll affect}}
						{{#^rollGreater() roll affect}}
							<span data-i18n="Skill-Halved">Skill halved</span>{{deflect}}
						{{/^rollGreater() roll affect}}
					{{/rollTotal() type 2}}
				</div>
			</div>
		</div>
	</rolltemplate>

	<rolltemplate class="sheet-rolltemplate-turnOrder">
		<div class="wrapper">


			<div class="rollHeader">DEX Rank</div>
			<div style="text-align:center">
				<img class="botDivider" src="https://raw.githubusercontent.com/Lockbox313/imagedump/master/Elric/stormbringerDivderTest2.png">
			</div>
			<div class="rollBody">
				<div class="rollResult">
					<span>{{weapon}} {{rank}}</span>
				</div>
			</div>
		</div>
	</rolltemplate>

	<rolltemplate class="sheet-rolltemplate-summonFumble">
		<div class="wrapper">
			<div class="rollHeader" data-i18n="Summoning-Fumble">Summoning Fumble</div>
			<div style="text-align:center">
				<img class="botDivider" src="https://raw.githubusercontent.com/Lockbox313/imagedump/master/Elric/stormbringerDivderTest2.png">
			</div>
			<div class="rollBody">
				<div class="rollResult">
					{{#rollBetween() roll 1 5}}
						<span data-i18n="summonFumble1">Violent explosion in octagon deafens those nearby for 1D10 hours, and creates a powerful stench</span>{
					{{/rollBetween() roll 1 5}}
					{{#rollTotal() roll 6}}
						<span data-i18n="summonFumble2">Demon appears as desired, but performs the opposite to each given command.</span>
					{{/rollTotal() roll 6}}
					{{#rollBetween() roll 7 29}}
						<span data-i18n="summonFumble3">Demon appears as wanted in octagon, but it is not bound by the octagon. It immediately attacks the  Summoner.</span>
					{{/rollBetween() roll 7 29}}
					{{#rollBetween() roll 30 41}}
						<span data-i18n="summonFumble4">The interior of the octagon is replaced permanently by a well filled with stars; no air escapes, but  things thrown down this well fall forever, and occasionally horrible things appear up out of it.</span>
					{{/rollBetween() roll 30 41}}
					{{#rollBetween() roll 42 55}}
						<span data-i18n="summonFumble5">An average bal'boost appears outside the octagon; it attacks until it has killed or captured someone, then returns to its home plane</span>
					{{/rollBetween() roll 42 55}}
					{{#rollBetween() roll 56 70}}
						<span data-i18n="summonFumble6">Summoner disappears, drawn to a random continent from where he or she must get home alone. Roll 1D6: 1,2 Western continent; 3,4 Southern continent; 5,6 Northern continent. Gamemaster chooses the nation.</span>
					{{/rollBetween() roll 56 70}}
					{{#rollBetween() roll 71 80}}
						<span data-i18n="summonFumble7">Chaotic corruption: one of the summoner's limbs is replaced with one from another mammal, a gigantic insect, an arthropod. Lose 1D10 APP as well.</span>
					{{/rollBetween() roll 71 80}}
					{{#rollBetween() roll 81 87}}
						<span data-i18n="summonFumble8">Astral corruption: summoner's player must move 1D6 points from POW to one other summoner characteristic.</span>
					{{/rollBetween() roll 81 87}}
					{{#rollBetween() roll 88 93}}
						<span data-i18n="summonFumble9">Mental corruption: summoner's player must move 1D6 points from INT to one other summoner characteristic.</span>
					{{/rollBetween() roll 88 93}}
					{{#rollBetween() roll 94 95}}
						<span data-i18n="summonFumble10">Demon appears normally and behaves as expected, except that it occupies five places in memory (not one), cannot die at the summoner's behest, and cannot be dismissed.</span>
					{{/rollBetween() roll 94 95}}
					{{#rollBetween() roll 96 97}}
						<span data-i18n="summonFumble11">Summoner and bystanders disappear, all drawn to the city of Ameeron on the other side of the Shade Gate, or as the gamemaster chooses. See Elric of Melniboné for more about Ameeron.</span>
					{{/rollBetween() roll 96 97}}
					{{#rollTotal() roll 98}}
						<span data-i18n="summonFumble12">Quaolnargn (or an identical sibling, or some equivalent horror) appears.</span>
					{{/rollTotal() roll 98}}
					{{#rollTotal() roll 99}}
						<span data-i18n="summonFumble13">Chaos Lord appears.</span>
					{{/rollTotal() roll 99}}
					{{#rollTotal() roll 100}}
						<span data-i18n="summonFumble14">Summoner turns inside out. All skills fall to base chance. His or her disgusting body continues to function normally, though it terrifies onlookers. APP is zero.</span>
					{{/rollTotal() roll 100}}
				</div>
			</div>
		</div>
	</rolltemplate>



	<rolltemplate class="sheet-rolltemplate-Powx4">
		<div class="wrapper">


			<div class="rollHeader">POW x 4</div>
			<div style="text-align:center">
				<img class="botDivider" src="https://raw.githubusercontent.com/Lockbox313/imagedump/master/Elric/stormbringerDivderTest2.png">
			</div>
			<div class="rollBody">
				<div class="rollResult">
						<div class="rollResult">Roll:{{roll}}  <= {{value}} </div>
						{{#rollGreater() roll value}}
							<span data-i18n="unconsciousnes">Unconsciousnes</span>
						{{/rollGreater() roll value}}
						{{#^rollGreater() roll value}}
							<span data-i18n="conscious">Consciouss</span>
						{{/^rollGreater() roll value}}
				</div>
			</div>
		</div>
	</rolltemplate>




	<script type="text/worker">

				on('sheet:opened',function(){

					getAttrs(["setupDone"], function(pvalue) {
						console.log("hello there");

						let SetupDone=parseInt(pvalue.setupDone);
						console.log("setupdone: "+SetupDone );

						if (SetupDone==0){
							console.log("do setup");

									incSkill("repeating_skills1","Art(..........)","5");
									incSkill("repeating_skills1","Bargain","15");
									incSkill("repeating_skills1","Climb","40");
									incSkill("repeating_skills1","Conceal Object","25");
									incSkill("repeating_skills1","Craft(..........)","5");
									incSkill("repeating_skills1","Disguise","15");
									incSkill("repeating_skills1","Evaluate","15");
									incSkill("repeating_skills1","Fast Talk","15");
									incSkill("repeating_skills1","Hide","20");
									incSkill("repeating_skills1","Insight","15");

									incSkill("repeating_skills2","Jump","25");
									incSkill("repeating_skills2","Listen","25");
									incSkill("repeating_skills2","Million Spheres","0");
									incSkill("repeating_skills2","Move Quietly","20");
									incSkill("repeating_skills2","Natural World","25");
									incSkill("repeating_skills2","Navigate","10");
									incSkill("repeating_skills2","Oratory","5");
									incSkill("repeating_skills2","Lang. (..........)","0");
									incSkill("repeating_skills2","Own Lang."," ");
									incSkill("repeating_skills2","Physik","30");
									incSkill("repeating_skills2","Pick Lock","5");
									incSkill("repeating_skills2","Potions","0");
									incSkill("repeating_skills2","Repair/Devise","DEX4");

									incSkill("repeating_skills3","Ride","35");
									incSkill("repeating_skills3","Sailing","15");
									incSkill("repeating_skills3","Scent/Taste","15");
									incSkill("repeating_skills3","Scribe","0");
									incSkill("repeating_skills3","Search","20");
									incSkill("repeating_skills3","Swim","25");
									incSkill("repeating_skills3","Throw","25");
									incSkill("repeating_skills3","Track","10");
									incSkill("repeating_skills3","Trap","5");
									incSkill("repeating_skills3","Unknown Kingdoms","0");
									incSkill("repeating_skills3","Young Kingdoms","15");

									incSkill("repeating_Weapons","Class 14","50");
									incSkill("repeating_Weapons","Class 15","25");


									addMeleeWpn("repeating_melee","Brawl","Class 14","1H","1D3","2D3","0","0","Short","B/W","0","0");
									addMeleeWpn("repeating_melee","Grapple","Class 15","2H","1D6","2d6","0","0","Short","Y*","0","0");

									//add horse skills and weapons
									incSkill("repeating_horseSkills","Dodge","45");
									incSkill("repeating_horseSkills","Hide","25");
									incSkill("repeating_horseSkills","Move Quietly","25");
									incSkill("repeating_horseSkills","Scent/Taste","80");

									//repeating_horseWeapons
									addHorseWpn("repeating_horseweapons","Bite","10","1D8", false);
									addHorseWpn("repeating_horseweapons","Kick","20","2D8", true);
									addHorseWpn("repeating_horseweapons","Rear & Plunge","10","2D6", true);

									setAttrs({setupDone:1});
						}

					});
				})

				function addHorseWpn(section,wpnType,skillvalue,damage,checked){
						var id=getId();
						var setObj = {};

						setObj[section+"_"+id+'_horseWeapon']=wpnType;
						setObj[section+"_"+id+'_horseSkillToT']=skillvalue;
						setObj[section+"_"+id+'_horseWpnDamage']=damage;
						if (checked){
							setObj[section+"_"+id+'_dbtoggle']=1;
						}else{
							setObj[section+"_"+id+'_dbtoggle'];
						}
						setAttrs(setObj);
				}


				function addMeleeWpn(section,wpnType,skill,hands,damage,critDamage,impales,hp,length,parry,strmin,dexmin){
						var id=getId();
						var setObj = {};

						setObj[section+"_"+id+'_weapon_type']=wpnType;
						setObj[section+"_"+id+'_skillName']=skill;
						setObj[section+"_"+id+'_hands']=hands;
						setObj[section+"_"+id+'_wpn_damage']=damage;
						setObj[section+"_"+id+'_critdamage']=critDamage;
						setObj[section+"_"+id+'_hp']=hp;
						setObj[section+"_"+id+'_length']=length;
						setObj[section+"_"+id+'_parry']=parry;
						setObj[section+"_"+id+'_strmin']=strmin;
						setObj[section+"_"+id+'_dexmin']=dexmin;
						setAttrs(setObj);

				}

				function incSkill(section,skill,value){
					 getSectionIDs(section, function(idArray) {
						var found = false;
						if (idArray.length > 0) {
							var fields = [];
							_.each(idArray, function(currentID) {
								fields.push(section+"_" + currentID + "_skill");
								fields.push(section+"_" + currentID + "_skillValue");
							});
							getAttrs(fields, function(values) {
								_.each(idArray, function(currentID, i) {
									var curSkill = values[section+"_" + idArray[i] + "_skill"];
									if (curSkill === skill){
										found = true;
									}
								});
								if (!found) {
									console.log(skill+""+section+" add !!!!!!!!!!!");
									addSkill(section,skill,value);
								}
							});
						}
						else{
							addSkill(section,skill,value);
						}


					});
				}


				function addSkill(section,skill,value){
						var id=getId();
						var setObj = {};
						setObj[section+"_"+id+'_skill']=skill;
						setAttrs(setObj);
						setObj[section+"_"+id+'_skillValue']=value;
						console.log("!!!!!!!!! skill value: "+value);
						setAttrs(setObj);
				}

				function getId(){
					const sattrs = {};
					const createdIDs = [];
					var retId = 0;
					if (createdIDs.length==0){
						retId = generateRowID();
						createdIDs.push(retId);
					}
					var checkit = true;
					  while (checkit==true) {
						let newID = generateRowID();
						console.log("Newid "+newID);
						if (!createdIDs.includes(newID)) {
						  newrowid = newID;
						  console.log("newrowid "+newID);
						  createdIDs.push(newrowid);
						  checkit=false;
						}
					  }
						  retId = newrowid;


					return retId;
				}


			on("change:strBase change:strMod", function() {
			   getAttrs(["strBase","strMod"], function(values) {

					str = parseInt(values.strBase)+parseInt(values.strMod);
					setAttrs({str:str});
			   });
			})


			on("change:conBase change:conMod", function() {
			   getAttrs(["conBase","conMod"], function(values) {

					con = parseInt(values.conBase)+parseInt(values.conMod);
					setAttrs({con:con});
			   });
			})

			on("change:sizBase change:sizMod", function() {
			   getAttrs(["sizBase","sizMod"], function(values) {

					siz = parseInt(values.sizBase)+parseInt(values.sizMod);
					setAttrs({siz:siz});
			   });
			})

			on("change:intBase change:intMod", function() {
			   getAttrs(["intBase","intMod"], function(values) {

					int = parseInt(values.intBase)+parseInt(values.intMod);
					setAttrs({int:int});
			   });
			})

			on("change:powBase change:powMod", function() {
			   getAttrs(["powBase","powMod"], function(values) {

					pow = parseInt(values.powBase)+parseInt(values.powMod);
					setAttrs({pow:pow});
			   });
			})


			on("change:pow", function() {
			   getAttrs(["pow"], function(values) {

					powRegen = Math.floor(parseInt(values.pow)/4);
					setAttrs({powRegen:powRegen});
			   });
			})

			on("change:dexBase change:dexMod", function() {
			   getAttrs(["dexBase","dexMod"], function(values) {

					dex = parseInt(values.dexBase)+parseInt(values.dexMod);
					setAttrs({dex:dex});
			   });
			})

			on("change:appBase change:appMod", function() {
			   getAttrs(["appBase","appMod"], function(values) {

					app = parseInt(values.appBase)+parseInt(values.appMod);
					setAttrs({app:app});
			   });
			})

			//Calculate current hit points
			on("change:wounds change:hpMax", function() {
			   getAttrs(["wounds","hpMax"], function(values) {
					let hpMax = parseInt(values.hpMax);
					let wounds = values.wounds;
					let wndData = wounds.split("+");
					console.log("Wound Array");
					console.table(wndData);
					var wndTotal = 0;  // Variable to hold your total

					for(var i = 0, len = wndData.length; i < len; i++) {

						console.log("wound pts :"+wndData[i]);
						wndTotal += parseInt(wndData[i]);
					}
					console.log("wndTotal: "+wndTotal);
					setAttrs({hpCur:hpMax-wndTotal});
			   });
			});


			//Calculate Major Wound & hit points
			on("change:siz change:con", function() {
			   getAttrs(["siz","con"], function(values) {
					hp = Math.ceil((parseInt(values.siz)+parseInt(values.con))/2);
					mw = Math.ceil(hp/2)
					setAttrs({hpMax:hp,mjrWnd:mw});
			   });
			});


			//Set Damage Bonus
			on("change:str change:siz", function() {
				getAttrs(["str", "siz"], function(pvalue) {
					console.log("************ Start Damage Bonus ************");
					console.log("str: "+pvalue.str);
					console.log("siz: "+pvalue.siz);
					var curStrength = parseInt(pvalue.str);
					var curSize = parseInt(pvalue.siz);
					var StplusSi = curStrength + curSize;
					console.log("Str+Size value: " + StplusSi);
					dbValues=getDamageBonus(curStrength,curSize,StplusSi);
					setAttrs({ damagebonus: dbValues[0],mdamagebonus: dbValues[1]});
					console.log("************ End Damage Bonus ************");
				});
			});


			//Calculate horse current hit points
			on("change:horseWounds change:horseHpMax", function() {
			   getAttrs(["horseWounds","horseHpMax"], function(values) {
					let hpMax = parseInt(values.horseHpMax);
					let wounds = values.horseWounds;
					let wndData = wounds.split("+");
					console.log("Wound Array");
					console.table(wndData);
					var wndTotal = 0;  // Variable to hold your total

					for(var i = 0, len = wndData.length; i < len; i++) {

						console.log("wound pts :"+wndData[i]);
						wndTotal += parseInt(wndData[i]);
					}
					console.log("wndTotal: "+wndTotal);
					setAttrs({horseHpCur:hpMax-wndTotal});
			   });
			});


			//Calculate Horse Major Wound & hit points
			on("change:horse_siz change:horse_con", function() {
			   getAttrs(["horse_siz","horse_con"], function(values) {
					hp = Math.ceil((parseInt(values.horse_siz)+parseInt(values.horse_con))/2);
					mw = Math.ceil(hp/2)
					setAttrs({horseHpMax:hp,horseMjrWnd:mw});
			   });
			})


			//Set Horse Damage Bonus
			on("change:horse_str change:horse_siz", function() {
				getAttrs(["horse_str", "horse_siz"], function(pvalue) {
					console.log("************ Start Damage Bonus ************");
					console.log("str: "+pvalue.horse_str);
					console.log("siz: "+pvalue.horse_siz);
					var curStrength = parseInt(pvalue.horse_str);
					var curSize = parseInt(pvalue.horse_siz);
					var StplusSi = curStrength + curSize;
					console.log("Str+Size value: " + StplusSi);
					dbValues=getDamageBonus(curStrength,curSize,StplusSi);
					setAttrs({ mountDB: dbValues[0]});
					console.log("************ End Damage Bonus ************");
				});
			})


			on("change:mountDB", function() {

				let section ="repeating_horseweapons";


				getSectionIDs(section, function(idArray) {
					if (idArray.length > 0) {

							_.each(idArray, function(currentID, i) {
								getAttrs(["mountDB",section+"_" + currentID + "_WpnDB",section+"_" + currentID + "_dbtoggle"], function(values) {

									console.log("!!!!!! stuff3  "+JSON.stringify(values));

									let mountDB = values.mountDB;

									let dbtoggle = values[section+"_" + idArray[i] + "_dbtoggle"];

									if (dbtoggle == "on"){
										console.log("!!!!!!!!!!!! found2 "+dbtoggle);
										let attrsToSet = {[section+"_" + idArray[i] +'_WpnDB']: mountDB};
										console.log("attrs to set "+JSON.stringify(attrsToSet));

										setAttrs(attrsToSet);
									}


								});
							});

					}
				});
			})


			on("change:repeating_horseweapons:dbtoggle", function() {
			   getAttrs(["repeating_horseweapons_dbtoggle","mountDB"], function(values) {
						console.log("Start set mount damage bonus");
						console.log(values);
						console.log(values.repeating_horseweapons_dbtoggle);
						let mdb =  values.repeating_horseweapons_dbtoggle;
						let mdbStr = "";
						if (mdb=="on"){

							mdbStr = values.mountDB;

						}


						setAttrs({repeating_horseweapons_WpnDB:mdbStr});

			   });
			})



			//Calculate demon current hit points
			on("change:demonWounds change:demonHpMax", function() {
			   getAttrs(["demonWounds","demonHpMax"], function(values) {
					let hpMax = parseInt(values.demonHpMax);
					let wounds = values.demonWounds;
					let wndData = wounds.split("+");
					console.log("Wound Array");
					console.table(wndData);
					var wndTotal = 0;  // Variable to hold your total

					for(var i = 0, len = wndData.length; i < len; i++) {

						console.log("wound pts :"+wndData[i]);
						wndTotal += parseInt(wndData[i]);
					}
					console.log("wndTotal: "+wndTotal);
					setAttrs({demonHpCur:hpMax-wndTotal});
			   });
			});


			//Calculate demon Major Wound & hit points
			on("change:demon_siz change:demon_con", function() {
			   getAttrs(["demon_siz","demon_con"], function(values) {
					hp = Math.ceil((parseInt(values.demon_siz)+parseInt(values.demon_con))/2);
					mw = Math.ceil(hp/2)
					setAttrs({demonHpMax:hp,demonMjrWnd:mw});
			   });
			})


			//Set demon Damage Bonus
			on("change:demon_str change:demon_siz", function() {
				getAttrs(["demon_str", "demon_siz"], function(pvalue) {
					console.log("************ Start Damage Bonus ************");
					console.log("str: "+pvalue.demon_str);
					console.log("siz: "+pvalue.demon_siz);
					var curStrength = parseInt(pvalue.demon_str);
					var curSize = parseInt(pvalue.demon_siz);
					var StplusSi = curStrength + curSize;
					console.log("Str+Size value: " + StplusSi);
					dbValues=getDamageBonus(curStrength,curSize,StplusSi);
console.log("dbValues: "+dbValues);
					dbValues[0] = dbValues[0].replace("d6", "d8");
					dbValues[1] = dbValues[1].replace("d6", "d8");
					setAttrs({ demonDB: dbValues[0]});
					console.log("************ End Damage Bonus ************");
				});
			})


			on("change:repeating_demonweapons:dbtoggle", function() {
			   getAttrs(["repeating_demonweapons_dbtoggle","demonDB"], function(values) {
						console.log("Start set demon damage bonus");
						console.log(values);
						console.log(values.repeating_demonweapons_dbtoggle);
						let mdb =  values.repeating_demonweapons_dbtoggle;
						let mdbStr = "";
						if (mdb=="on"){

							mdbStr = values.demonDB;

						}


						setAttrs({repeating_demonweapons_WpnDB:mdbStr});

			   });
			})


			//Calculate demon2 current hit points
			on("change:demonWounds2 change:demonHpMax2", function() {
			   getAttrs(["demonWounds2","demonHpMax2"], function(values) {
					let hpMax = parseInt(values.demonHpMax2);
					let wounds = values.demonWounds2;
					let wndData = wounds.split("+");
					console.log("Wound Array");
					console.table(wndData);
					var wndTotal = 0;  // Variable to hold your total

					for(var i = 0, len = wndData.length; i < len; i++) {

						console.log("wound pts :"+wndData[i]);
						wndTotal += parseInt(wndData[i]);
					}
					console.log("wndTotal: "+wndTotal);
					setAttrs({demonHpCur2:hpMax-wndTotal});
			   });
			});


			//Calculate demon2 Major Wound & hit points
			on("change:demon_siz2 change:demon_con2", function() {
			   getAttrs(["demon_siz2","demon_con2"], function(values) {
					hp = Math.ceil((parseInt(values.demon_siz2)+parseInt(values.demon_con2))/2);
					mw = Math.ceil(hp/2)
					setAttrs({demonHpMax2:hp,demonMjrWnd2:mw});
			   });
			})


			//Set demon2 Damage Bonus
			on("change:demon_str2 change:demon_siz2", function() {
				getAttrs(["demon_str2", "demon_siz2"], function(pvalue) {
					console.log("************ Start Damage Bonus ************");
					console.log("str: "+pvalue.demon_str2);
					console.log("siz: "+pvalue.demon_siz2);
					var curStrength = parseInt(pvalue.demon_str2);
					var curSize = parseInt(pvalue.demon_siz2);
					var StplusSi = curStrength + curSize;
					console.log("Str+Size value: " + StplusSi);
					dbValues=getDamageBonus(curStrength,curSize,StplusSi);
					dbValues[0] = dbValues[0].replace("d6", "d8");
					dbValues[1] = dbValues[1].replace("d6", "d8");
					setAttrs({ demonDB2: dbValues[0]});
					console.log("************ End Damage Bonus ************");
				});
			})


			//Set demon2 Damage toggle  Bonus
			on("change:repeating_demonweapons2:dbtoggle", function() {
			   getAttrs(["repeating_demonweapons2_dbtoggle","demonDB2"], function(values) {
						console.log("Start set demon damage bonus");
						console.log(values);
						console.log(values.repeating_demonweapons2_dbtoggle);
						let mdb =  values.repeating_demonweapons2_dbtoggle;
						let mdbStr = "";
						if (mdb=="on"){

							mdbStr = values.demonDB2;

						}


						setAttrs({repeating_demonweapons2_WpnDB:mdbStr});

			   });
			})



			function getDamageBonus(curStrength,curSize,StplusSi){

					var DBonus = "0";
					var mDBonus = "0";
					var DBonusC = 0;

					//Determine Bonus
					if (StplusSi < 13) {
						console.log("-- Str+Siz is less than 13 --");
						DBonus = "-1d4";
						mDBonus = "-1d2";
						console.log("DBonus value: " + DBonus);
					}
					else if (StplusSi >= 25 &&  StplusSi <= 32) {
						DBonus = "1d4";
						mDBonus = "1d2";
						console.log("DBonus value: " + DBonus);
					}
					else if (StplusSi >= 33 &&  StplusSi <= 40) {
						console.log("-- Str+Siz is less than 31 --");
						DBonus = "1d6";
						mDBonus = "1d3";
						console.log("DBonus value: " + DBonus);
					}
					else if (StplusSi >= 41){ //StplusSi is greater than
						DBonusC = 2+Math.floor(parseFloat((StplusSi - 40) / 16));
						console.log("DBonusC value: " + DBonusC);

						DBonus = DBonusC + "d6";
						mDBonus = DBonusC + "d3";
						console.log("DBonus value: " + DBonus);
					}
					return [DBonus,mDBonus];
			}






			on("change:shieldValue change:shieldMod", function() {
			   getAttrs(["shieldValue","shieldMod"], function(values) {

					let tot = parseInt(values.shieldValue)+parseInt(values.shieldMod);
					setAttrs({shieldToT:tot});
			   });
			})


			on("change:dodgeValue change:dodgeMod", function() {
			   getAttrs(["dodgeValue","dodgeMod"], function(values) {

					let tot = parseInt(values.dodgeValue)+parseInt(values.dodgeMod);
					setAttrs({dodgeTotal:tot});
			   });
			})


			  on("change:repeating_missle:mdbtoggle", function() {
			   getAttrs(["repeating_missle_mdbtoggle","mdamagebonus","attr_mmaxDb"], function(values) {
						console.log("Start set missle damage bonus");
						console.log(values);
						console.log(values.repeating_missle_mdbtoggle);
						var mdb =  values.repeating_missle_mdbtoggle;
						var mdbStr = "0";
						var maxmdbStr = "0";
						if (mdb=="on"){

							mdbStr = values.mdamagebonus;
							maxmdbStr = values.mmaxDb;
						}


						setAttrs({repeating_missle_wpnmdb:mdbStr});

			   });
			});



			on("change:repeating_Weapons:skillValue", function(eventInfo) {
				getAttrs(["repeating_Weapons_skill","repeating_Weapons_skillValue"], function(pvalue) {
						console.log("!!!!!! stuff  "+JSON.stringify(eventInfo.sourceAttribute));
						let sourceA = eventInfo.sourceAttribute
						let  repeatRow = sourceA.match(/[^_]*_[^_]*_[^_]*/g);
						var wpnSkill = pvalue.repeating_Weapons_skill;
						var skillTotal = pvalue.repeating_Weapons_skillValue;
						console.log("changed weapon skill to "+wpnSkill);
						var skillVal=setSkillValues2(wpnSkill,"repeating_melee",repeatRow,skillTotal);
						skillVal=setSkillValues2(wpnSkill,"repeating_missle",repeatRow,skillTotal);

				});
			})


			on("change:repeating_melee:skillValue change:repeating_melee:skillWpnMod", function() {
			   getAttrs(["repeating_melee_skillValue","repeating_melee_skillWpnMod"], function(values) {

						var skillValue =  parseInt(values.repeating_melee_skillValue);
						console.log("skillValue:"+skillValue);

						var skillWpnMod =  parseInt(values.repeating_melee_skillWpnMod);
						console.log("skillWpnMod:"+skillWpnMod);
						var skillTotal = skillValue+skillWpnMod;
						console.log("skillTotal:"+skillTotal);


						setAttrs({repeating_melee_skillTotal:skillTotal});
			   });
			})

			  on("change:repeating_melee:length", function() {
			   getAttrs(["repeating_melee_length"], function(values) {
						let length =  values.repeating_melee_length;
						console.log("length: "+length);
						let rankVal	= 0.1;
						if (length==="Long"){
							rankVal=0.2;

						}
						console.log("rankVal:"+rankVal);
						setAttrs({repeating_melee_rankVal:rankVal});

			   });
			});

			on("change:repeating_melee:skillName", function(eventInfo) {
				getAttrs(["repeating_melee_skillName"], function(pvalue) {
							console.log("!!!!!! stuff  "+JSON.stringify(eventInfo.sourceAttribute));
							let sourceA = eventInfo.sourceAttribute
							let  repeatRow = sourceA.match(/[^_]*_[^_]*_[^_]*/g);
							var wpnSkill = pvalue.repeating_melee_skillName;
							console.log("changed weapon skill to "+wpnSkill);
							getSkillValues(wpnSkill,"repeating_Weapons",repeatRow);


				});
			});


			on("change:repeating_missle:skillValue change:repeating_missle:skillWpnMod", function() {
			   getAttrs(["repeating_missle_skillValue","repeating_missle_skillWpnMod"], function(values) {

						var skillValue =  parseInt(values.repeating_missle_skillValue);
						console.log("skillValue:"+skillValue);

						var skillWpnMod =  parseInt(values.repeating_missle_skillWpnMod);
						console.log("skillWpnMod:"+skillWpnMod);
						var skillTotal = skillValue+skillWpnMod;
						console.log("skillTotal:"+skillTotal);


						setAttrs({repeating_missle_skillTotal:skillTotal});
			   });
			})

			on("change:repeating_missle:skillName", function(eventInfo) {
				getAttrs(["repeating_missle_skillName"], function(pvalue) {
							console.log("!!!!!! stuff  "+JSON.stringify(eventInfo.sourceAttribute));
							let sourceA = eventInfo.sourceAttribute
							let  repeatRow = sourceA.match(/[^_]*_[^_]*_[^_]*/g);
							var wpnSkill = pvalue.repeating_missle_skillName;
							console.log("changed weapon skill to "+wpnSkill);
							getSkillValues(wpnSkill,"repeating_Weapons",repeatRow);


				});
			});

			function getSkillValues(wpnSkill,section,section2){
				 getSectionIDs(section, function(idArray) {
					if (idArray.length > 0) {

						_.each(idArray, function(currentID, i) {
							getAttrs([section+"_" + currentID + "_skill",section+"_" + currentID + "_skillValue"], function(values) {

								console.log("!!!!!! stuff2  "+JSON.stringify(values));

								/*let wStr = values[section+"_" + idArray[i] + "_skill"];*/
								/*console.log("!!!!!! Look for skill "+wStr);*/
								let skillname = values[section+"_" + idArray[i] + "_skill"];
								var skillValue =0 ;

								if (skillname == wpnSkill){
									console.log("!!!!!!!!!!!! found "+wpnSkill);
									skillValue = values[section+"_" + idArray[i] + "_skillValue"];
									console.log("!!!!!! skillValue "+skillValue);
									let attrsToSet = {[section2 + '_skillValue']: skillValue};
									setAttrs(attrsToSet);
								}


							});
						});
					}

				});
			}


				function setSkillValues2(wpnSkill,section,section2,skillValue){
					 getSectionIDs(section, function(idArray) {
						if (idArray.length > 0) {

							_.each(idArray, function(currentID, i) {
								getAttrs([section+"_" + currentID + "_skillName",section+"_" + currentID + "_skillValue"], function(values) {

									console.log("!!!!!! stuff3  "+JSON.stringify(values));

									let skillname = values[section+"_" + idArray[i] + "_skillName"];
									console.log("!!!!!! wpnSkill "+wpnSkill+" skillname "+skillname);

									if (skillname == wpnSkill){
										console.log("!!!!!!!!!!!! found2 "+wpnSkill);
										let attrsToSet = {[section+"_" + idArray[i] +'_skillValue']: skillValue};
										console.log("attrs to set "+JSON.stringify(attrsToSet));

										setAttrs(attrsToSet);
									}


								});
							});
						}

					});
				}


	</script>





@import url('https://fonts.googleapis.com/css?family=Merriweather+Sans:300,400,500,700,800|Merriweather:400,700,900&display=swap');

.sheet-darkmode .charactersheet {
    background-color: #1f1f1f;
    .sheet {
        padding: 0;
    }
}

.charactersheet {
    .sheet {
        padding: 20px;
    }

    p,
    button,
    span,
    div,
    label,
    input,
    textarea {
        font-family: 'Merriweather Sans', sans-serif;
        font-weight: 400;
        font-variant-numeric: lining-nums;
        color: white;
    }

    input,
    textarea {
        font-weight: 400;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h2 span,
    .sans-serif {
        font-family: 'Merriweather Sans', sans-serif;
        font-weight: 700;
        font-variant-numeric: lining-nums;
        color: white;
    }

    .bold span,
    .bold input,
    .bold {
        font-weight: bold;
    }
    .unbold span,
    .unbold input,
    .unbold {
        font-weight: normal;
    }

    .bolder span {
        font-weight: 900;
    }

    .large {
        font-size: 22px !important;
    }

    .mezzolarge {
        font-size: 20px !important;
    }

    .midlarge {
        font-size: 18px !important;
    }

    .menolarge {
        font-size: 16px !important;
    }

    .medium {
        font-size: 14px !important;
    }

    .midsmall {
        font-size: 12px !important;
    }

    .small {
        font-size: 10px !important;
    }

    .hidden {
        display: none;
    }

    .strike {
        display: block;
        text-align: center;
        overflow: hidden;
        white-space: nowrap;

        & > span {
            position: relative;
            display: inline-block;
        }

        & > span:before,
        & > span:after {
            content: '';
            position: absolute;
            top: 50%;
            width: 9999px;
            height: 1px;
            background: white;
        }

        & > span:before {
            right: 100%;
            margin-right: 15px;
        }

        & > span:after {
            left: 100%;
            margin-left: 15px;
        }
    }

    /** Header row **/
    .header {
        color: white;

        .half {
            width: 50%;
        }

        div {
            padding: 5px;
        }

        input {
            padding: 0;
            margin-bottom: -8px;
        }

        label > span {
            display: inline-block;
            width: 100%;
        }

        .tabs {
            margin: 0;
            padding: 0;
            border-bottom: 1px solid lightgray;
        }

        .tabs label {
            text-align: center;
            color: white;
            border-top: 0;
            margin: auto 0 0 0;
            padding: 0;
            line-height: 30px;
            height: 30px;

            &:hover {
                background-color: #ffffffa0;
                color: black !important;
            }
        }

        .tabs div {
            padding: 0;
        }

        .active {
            background-color: #ffffffa0;
            color: black !important;
        }

        .info label > span {
            border-bottom: 1px solid white;
        }

        label.close {
            margin: 10px 10px 0 0;
            height: 16px;
            width: 16px;
            opacity: 0.8;
            float: right;
            padding: 0;
        }
        input.close:checked ~ label.close {
            opacity: 1;
        }
        input.close {
            display: none;
        }
    }

    /** Options **/

    input[name='attr_options_toggle'][value='0'] ~ #options {
        display: none;
    }

    #options {
        background-color: #141414;
        color: white;
        height: 200px;
        padding: 20px 30px;
        text-align: center;
        h1,
        h2,
        h3,
        h4,
        h5,
        p,
        label,
        select,
        option {
            color: white;
            background-color: #141414;
        }

        button.close {
            width: 16px;
            height: 16px;
        }
    }

    input[name='attr_show_powers_magic'][value='powers']
        ~ h2[data-i18n='MAGIC'] {
        display: none;
    }
    input[name='attr_show_powers_magic'][value='magic']
        ~ h2[data-i18n='POWERS'] {
        display: none;
    }

    // CSS Grid stuff

    .character-grid {
        display: grid;
        grid-template-columns: 200px 250px 165px 165px 250px 200px;
        grid-template-areas:
            'traits armor general general damage powers'
            'feats skills abilities abilities advskills cantrips'
            'conditions skills abilities abilities advskills afflictions'
            'equipment equipment equipment equipment equipment equipment'
            'hirelings hirelings hirelings hirelings hirelings hirelings';
    }

    .griditem {
    }

    .tile {
        color: white;
        background: rgba(20, 20, 20, 0.9);

        margin: 5px;
        padding: 15px 10px;

        p,
        h1,
        h2,
        h3,
        h4,
        h5,
        label,
        select {
            color: inherit;
        }

        h2 {
            font-size: 22px;
            text-align: center;
            text-transform: uppercase;
            line-height: normal;
            margin-bottom: 8px;
        }

        h5 {
            text-align: center;
            text-transform: uppercase;
            line-height: normal;
            margin-bottom: 8px;
        }
    }

    input[name='attr_theme'][value='a'] ~ .sheet {
        background-image: url('https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Blood_and_Doom_by_Dicetale_Games/static/background_theme_a_fading.jpg');
    }

    input[name='attr_theme'][value='a_dark'] ~ .sheet {
        background-image: url('https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Blood_and_Doom_by_Dicetale_Games/static/background_theme_a_dark_fading.jpg');
    }

    input[name='attr_theme'][value='b'] ~ .sheet {
        background-image: url('https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Blood_and_Doom_by_Dicetale_Games/static/background_theme_b_fading.jpg');
    }

    input[name='attr_theme'][value='c'] ~ .sheet {
        background-image: url('https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Blood_and_Doom_by_Dicetale_Games/static/background_theme_c_fading.jpg');
    }

    input[name='attr_theme'][value='white'] ~ .sheet {
        background-color: white;
    }

    input[name='attr_tiles_opacity'][value='1'] ~ .sheet .tile {
        background: rgba(20, 20, 20, 1);
    }

    input[name='attr_tiles_opacity'][value='0.95'] ~ .sheet .tile {
        background: rgba(20, 20, 20, 0.95);
    }

    input[name='attr_tiles_opacity'][value='0.99'] ~ .sheet .tile {
        background: rgba(20, 20, 20, 0.99);
    }

    .sheet {
        background-repeat: no-repeat;
        background-size: 100%;
        width: 1230px;
        background-color: black;
    }

    .center {
        text-align: center;
    }

    .left {
        text-align: left;
    }

    .right {
        text-align: right;
    }

    .justify {
        text-align: justify;
        justify-content: space-between;

        .slider {
            margin-left: auto;
            width: auto;
        }
    }

    .center-vertical {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .text-input {
        border-bottom: 1px solid rgba(255, 255, 255, 0.6);

        input {
            background-color: transparent;
            color: white;
            border: 0;
            outline: none;
            width: 100%;

            &[type='number'] {
                width: 1.5em !important;
                background-color: transparent;
                color: white;
                border: none;
            }
        }
        &.duo {
            input {
                padding: 1px;
                height: 20px;
            }
            span {
                margin: auto 0;
            }
        }
    }

    .inline-radio {
        label {
            display: inline;
            padding: 0;
        }

        .infix {
            margin: 0;
            padding: 0;
        }

        input[type='radio'] {
            display: none;
        }

        input:checked + span {
            color: red;
        }
    }

    .text-checkbox {
        label {
            display: inline;
        }

        input[type='checkbox'] {
            display: none;
        }

        input:checked + span {
            color: red;
        }
    }

    .inline {
        display: flex;
        flex-direction: row !important;
        justify-content: space-between;
        flex: 1 1 0;

        div {
            width: 100%;

            button[type='roll'] {
                padding: 0 !important;
                margin: 0 !important;
            }
        }

        &.space-around {
            justify-content: space-around;
        }
    }

    .inline-input {
        vertical-align: middle;

        h1,
        h2,
        h3,
        h4,
        h5,
        p {
            display: inline;
            vertical-align: middle;
        }

        input {
            vertical-align: middle;
        }
    }

    .text-buttons {
        display: flex;
        justify-content: space-around;
        flex-direction: row;
        flex-grow: 1;

        input:not([type='number']) {
            display: none;
        }

        input[type='number'] {
            -moz-appearance: textfield;

            &::-webkit-outer-spin-button,
            ::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }

            padding: 0;
            background-color: transparent;
            color: white;
            border: 0;
            width: 10px;

            &:focus {
                outline: none;
            }
        }

        label {
            font-size: 14px;
            text-align: center;
            padding: 0 3px;
            display: inline;
        }

        input:checked + label,
        input:checked ~ input {
            color: red;
        }
    }

    .uppercase {
        text-transform: uppercase;
    }

    .capitalize {
        text-transform: capitalize;
    }

    .column {
        flex-direction: column;
        display: flex;
        flex: 1;
        flex-basis: 100%;
    }

    .save {
        h4 {
            padding: 4px;
            text-transform: capitalize;
            font-size: 14px;
        }

        option,
        select {
            font-size: 14px;
        }
    }

    .general {
        display: flex;
        flex-direction: row;

        .column {
            margin: 0 5px;
        }

        label {
            text-align: center;
            font-size: 12px;

            input {
                color: white;
                background: transparent;
                display: block;
                margin: 0 auto;
                border: none;
                font-size: 14px;
                text-align: center;
                font-weight: bold;
                width: 22px !important;
            }
        }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Firefox */
        input[type='number'] {
            -moz-appearance: textfield;
        }

        .wounds,
        .bruises {
            margin-bottom: 15px;
        }

        p {
            margin: 0;
        }

        .bruises > :first-child > .center > * {
            flex: 1;

            &:first-child {
                text-align: left;
            }

            &:last-child {
                text-align: right;
            }
        }
    }

    .nowrap {
        white-space: nowrap;
    }

    .fake-checkbox {
        display: inline-block;
        border: 2px solid lightgray;
        border-radius: 1px;
        background-color: transparent;
        place-content: center;
        margin: 0 5px -3px 30px;
    }

    .checkbox-small {
        width: 10px !important;
        height: 10px !important;
    }

    .checkbox-normal {
        width: 14px !important;
        height: 14px !important;
    }

    .checkbox-midlarge {
        width: 16px !important;
        height: 16px !important;
    }

    .checkbox-large {
        width: 20px !important;
        height: 20px !important;
    }

    .slider {
        /* Checked and lower */
        input {
            appearance: none;
            border: 2px solid lightgray;
            border-radius: 1px;
            background-color: transparent;
            place-content: center;

            &::before {
                content: '';
                width: 100%;
                height: 100%;
                margin-bottom: 5px;
                transform: scale(1);
                background-color: white;
                display: inline-block;
                box-sizing: border-box;
                clip-path: polygon(
                    80% 0,
                    100% 0,
                    100% 20%,
                    70% 50%,
                    100% 85%,
                    100% 100%,
                    80% 100%,
                    50% 70%,
                    20% 100%,
                    0% 100%,
                    0% 80%,
                    30% 50%,
                    0% 20%,
                    0% 0%,
                    20% 0%,
                    50% 30%
                );
            }
        }

        /* Above checked */
        input:checked ~ input {
            &::before {
                display: none;
            }
        }

        input[value='0'] {
            display: none;
        }
    }

    .noline {
        border-bottom: none !important;
    }

    .placeholder-line {
        input {
            box-sizing: border-box;
            border-bottom: 1px solid rgba(255, 255, 255, 0);
            border-radius: 0;
            padding: 5px 0 0;
            margin-bottom: 0;
        }

        input:placeholder-shown {
            border-bottom: 1px solid rgba(255, 255, 255, 0.5);
        }
    }

    .number-input-arrows {
        display: flex;

        span {
            height: 1.5em;
        }

        button {
            background-color: transparent;
            background-repeat: no-repeat;
            background-size: contain;
            border: none;
            margin: 0;
            padding: 0;
            height: 12px;
            width: 12px;

            &.number-arrow-up {
                position: relative;
                top: -20%;
                background-image: url('https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Blood_and_Doom_by_Dicetale_Games/static/up_arrow.png');
            }

            &.number-arrow-down {
                position: relative;
                top: -70%;
                background-image: url('https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Blood_and_Doom_by_Dicetale_Games/static/down_arrow.png');
            }
        }
        input {
            padding: 1px;
        }
    }

    .equipment-row .number-input-arrows button {
        &.number-arrow-up {
            top: -10%;
        }

        &.number-arrow-down {
            top: -50%;
        }
    }

    @supports (-moz-appearance: none) {
        .number-input-arrows button {
            &.number-arrow-up {
                top: -50%;
            }

            &.number-arrow-down {
                top: -100%;
            }
        }
        .equipment-row .number-input-arrows button {
            &.number-arrow-up {
                top: -45%;
            }

            &.number-arrow-down {
                top: -95%;
            }
        }
    }

    /** Section specific stuff **/

    .traits {
        .trait-improved {
            min-width: 30px;
            width: inherit;
            input {
                margin-top: 6px;
            }
        }
        .trait-name {
            .text-input {
                width: 146px;
            }
        }
    }

    .armor {
        .resilience {
            margin-top: 40px;
        }

        .equipment-row {
            justify-content: center;
        }
        .number-input-arrows {
            margin-bottom: 0.5em;
            margin-left: 10px;
        }
        .inline {
            justify-content: center;
        }
    }

    .skills {
        .inline:not(.fillable) {
            margin-bottom: 15px;

            input {
                margin: 0;
                padding: 0;
            }
        }
        input {
            font-size: 14px;
            padding: 0;
        }

        .skill {
            width: 122px;
        }
    }

    .advskills {
        display: flex;
        flex-direction: column;

        .inline {
            margin-bottom: 5px;
            flex-grow: 1;
        }

        input {
            font-size: 14px;
        }
    }

    textarea {
        background: transparent;
        color: white;
        resize: none;
        border: none;
        height: 1.3em;
        overflow: hidden;
        padding: 0;
        margin: 0;

        &:focus {
            outline: none;
        }
    }

    .logo img {
        max-width: 100%;
        margin: 0 auto;
        display: block;
    }

    .conditions {
        width: 100%;
        height: 85%;
        display: flex;
        flex-direction: row;

        & > .column {
            justify-content: space-around;
        }

        label {
            font-size: 12px;
            margin-bottom: 0;
        }
    }

    button.inline-roll {
        color: white;
        background: transparent;
        padding: 0;
        border: none;
        box-shadow: none;
        text-shadow: none;
        margin-bottom: 5px;

        &::before {
            display: none;
        }

        &:hover {
            background: transparent;
            color: red;
        }
        span {
            color: inherit;
        }
    }

    .dice-roller {
        button {
            color: white;
            background: transparent;
            padding: 0;
            border: none;
            box-shadow: none;
            text-shadow: none;
            margin-bottom: 5px;

            &::before {
                display: none;
            }

            &:hover {
                background: transparent;
                color: red;
            }
        }
    }

    .damage-rolls {
        margin: 10px 0 10px 0;
        & > .column {
            margin: 0;
        }
        .damage-dice {
            flex-grow: 1;
            .inline {
                justify-content: space-around;
                flex-grow: 0;
            }
        }
        .damage-num,
        .damage-bonus {
            .inline {
                margin: 0;
                padding: 0;
                max-height: 2rem;
                justify-content: space-around;
            }
            .inline-radio .infix {
                margin: 0 2px;
            }
        }
        .damage-num {
            max-width: 35px;
        }
        .damage-bonus {
            max-width: 70px;
        }
    }

    .powers,
    .resources {
        .damage-roll h4 {
            margin: 2px 4px 2px 4px;
        }
        .damage {
            margin-bottom: 10px;
        }
        .inline div {
            width: inherit;
        }

        .text-input {
            border: none;
        }

        .power {
            margin-bottom: 5px;
        }

        .power-improved {
            min-width: 30px;
        }

        .power-name {
            .power-name-static,
            .text-input {
                width: 126px;
            }

            input {
                margin: 0;
                padding: 0;
            }
        }

        .power-level {
            flex-grow: 1;

            .text-input {
                width: inherit;
            }

            input {
                color: white;
                background: transparent;
                display: block;
                margin: 0;
                border: none;
                text-align: center;
                font-weight: bold;
                width: 20px !important;
                padding: 0;
            }

            input::-webkit-outer-spin-button,
            input::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }

            /* Firefox */
            input[type='number'] {
                -moz-appearance: textfield;
            }
        }
    }

    .afflictions {
        textarea {
            background: transparent;
            color: white;
            resize: none;
            border: none;
            height: 100%;
        }
    }

    .abilities {
        .ability-scores {
            h2 {
                margin: 5px;
            }

            h4 {
                font-size: 12px;
                margin-top: 10px;
                margin-bottom: -3px;
            }

            label {
                padding: 0;
            }

            input {
                color: white;
                background: transparent;
                display: block;
                margin: 0 auto;
                padding: 0;
                border: none;
                font-size: 22px;
                text-align: center;
                font-weight: bold;
                width: 30px !important;
            }

            input::-webkit-outer-spin-button,
            input::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }

            /* Firefox */
            input[type='number'] {
                -moz-appearance: textfield;
            }
        }

        .ability-roll {
            margin-top: 8px;
        }
        .inline-roll {
            margin: 0;
        }

        .difficulty {
            h5 {
                margin-bottom: 4px;
            }
        }
    }

    .equipment {
        display: flex;
        flex-direction: row;

        .column {
            margin: 0 5px;
        }
    }

    input.custom-checkbox {
        margin: auto;
        appearance: none;
        border: 2px solid lightgray;
        border-radius: 1px;
        background-color: transparent;
        place-content: center;

        &::before {
            display: none;
        }

        &:checked {
            &::before {
                content: '';
                width: 100%;
                height: 100%;
                margin-bottom: 3px;
                transform: scale(1);
                background-color: white;
                display: inline-block;
                box-sizing: border-box;
                clip-path: polygon(
                    80% 0,
                    100% 0,
                    100% 20%,
                    70% 50%,
                    100% 85%,
                    100% 100%,
                    80% 100%,
                    50% 70%,
                    20% 100%,
                    0% 100%,
                    0% 80%,
                    30% 50%,
                    0% 20%,
                    0% 0%,
                    20% 0%,
                    50% 30%
                );
            }
        }
    }

    .equipment-row {
        display: flex;
        flex-direction: row;

        label {
            padding: 0;

            input {
                padding: 0;
            }
        }

        .column {
            flex: none;
        }

        .equipment-name {
            width: 300px;
            flex-grow: 1;
            margin: 0;
        }

        .equipment-broken {
            width: 15px;
            input {
                height: 18px !important;
                width: 18px;
            }
        }

        .equipment-uses {
            input[type='number'] {
                width: 20px;
                text-align: center;
            }

            input::-webkit-outer-spin-button,
            input::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }

            /* Firefox */
            input[type='number'] {
                -moz-appearance: textfield;
            }
        }

        input:not([type='checkbox']) {
            background-color: transparent;
            color: white;
            border: 0;
            outline: none;
            width: 100%;
        }
    }

    .hireling-row {
        display: flex;
        flex-direction: row;

        .column {
            flex: none;
            margin: 0;
        }

        .column:not(:last-child) {
            border-right: 1px solid white;
        }

        .hireling-name {
            width: 300px;
            flex-grow: 1;
        }

        .hireling-oath {
            width: 50px;
        }

        .hireling-loyalty {
            width: 50px;

            input::-webkit-outer-spin-button,
            input::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }

            /* Firefox */
            input[type='number'] {
                -moz-appearance: textfield;
            }
        }

        input {
            background-color: transparent;
            color: white;
            border: 0;
            outline: none;
            width: 100%;
        }
    }

    .treasure-row {
        display: flex;
        flex-direction: row;

        .column {
            width: 100%;
            flex: none;
            margin: 0;
        }

        input {
            background-color: transparent;
            color: white;
            border: 0;
            outline: none;
            width: 100%;
        }
    }

    .shield:after {
        content: '+' !important;
    }

    .ignore-width {
        display: inline-block;
        width: 0;
    }

    .x1,
    .x2,
    .x3,
    .x6 {
        & > :last-child::after {
            display: inline-block;
            width: 0;
        }
    }

    .x1 > :last-child::after {
        content: 'x1';
    }

    .x2 > :last-child::after {
        content: 'x2';
    }

    .x3 > :last-child::after {
        content: 'x3';
    }

    .x6 > :last-child::after {
        content: 'x6';
    }

    /** Bio Page **/

    .bio-grid {
        display: grid;
        grid-auto-columns: 1fr;
        grid-template-areas:
            'languages languages languages deities deities deities'
            'personality personality personality ideals ideals ideals'
            'party-vow party-vow party-vow habits habits habits'
            'people people avatar avatar possession possession'
            'treasure treasure avatar avatar property property'
            'treasure treasure appearance appearance property property';
    }

    .bio {
        .sheet-avatar {
            text-align: center;
        }

        textarea {
            background: transparent;
            color: white;
            resize: none;
            border: 1px solid white;
            overflow-x: hidden;
            overflow-y: scroll;
            width: 90%;
            margin: 0 4% 0 4%;
            height: 120px;

            &:focus {
                outline: none;
            }
        }

        textarea.diminutive {
            height: 4rem;
        }

        .people,
        .possession,
        .treasure,
        .property {
            & textarea {
                height: 200px;
            }
        }
    }

    input[name='attr_tab'][value='character'] ~ .bio {
        display: none;
    }

    input[name='attr_tab'][value='bio'] ~ .character {
        display: none;
    }
}

/** Roll Templates **/
/* I don't know what the fuck is going on, but without this thing the roll template styles break.
    It doesn't matter what I put here, even if there is no template called 'standard'. */
.sheet-rolltemplate-standard {
    color: black; /* PLACEHOLDER */
}

.sheet-rolltemplate-ability,
.sheet-rolltemplate-damage,
.sheet-rolltemplate-doom {
    .sheet-template-container {
        background-color: black;
        color: white;
        padding: 5px 5px 20px 20px;
        background-repeat: no-repeat;
        background-size: 100%;
        min-height: 100px;

        .sheet-template-header {
            margin-bottom: 20px;

            h1,
            h2 {
                height: 30px;
            }

            .sheet-template-name {
                font-weight: bold;
                font-family: 'Merriweather', serif;
                font-size: 14px;
                color: #f8c9ad;
            }

            .sheet-template-title {
                font-family: 'Merriweather Sans', sans-serif;
                font-weight: bolder;
                font-size: 18px;
                text-transform: uppercase;
            }
        }

        .sheet-template-rolls {
            font-family: 'Merriweather Sans', sans-serif;
            font-weight: 500;
            line-height: 1.8em;

            h5 {
                font-weight: 800;
                font-size: 18px;
                margin-top: 6px;
            }

            h5.sheet-good {
                color: #56ba53;
            }

            h5.sheet-bad {
                color: #de4d46;
            }

            h5.sheet-purple {
                color: #885ac9;
            }

            h5.sheet-amber {
                color: #de7a45;
            }

            .sheet-template-roll {
                .inlinerollresult {
                    background-color: transparent;
                    border: none;
                    padding: 0;

                    &.fullcrit,
                    &.importantroll,
                    &.fullfail {
                        border: none;
                    }
                }
            }
        }
    }
}

.sheet-rolltemplate-ability {
    .sheet-template-container {
        background-image: url('https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Blood_and_Doom_by_Dicetale_Games/static/chat_action_roll.jpg');
    }
}

.sheet-rolltemplate-damage {
    .sheet-template-container {
        background-image: url('https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Blood_and_Doom_by_Dicetale_Games/static/chat_damage_roll.jpg');
    }
}

.sheet-rolltemplate-doom {
    .sheet-template-container {
        background-image: url('https://raw.githubusercontent.com/roll20/roll20-character-sheets/master/Blood_and_Doom_by_Dicetale_Games/static/chat_doom_roll.jpg');
    }
}

<div class="preload"><img src="https://www.dropbox.com/s/h4e97xubsdhdo0s/xptooth-red.png?raw=1"/><img src="https://www.dropbox.com/s/kwmkrf39bjewwvz/xptooth-white.png?raw=1"/><img src="https://www.dropbox.com/s/2fgk973ji5gckhr/stresstooth-red.png?raw=1"/><img src="https://www.dropbox.com/s/kecon36tg77sabv/stresstooth-white.png?raw=1"/><img src="https://www.dropbox.com/s/9lxyjraycuij5j3/shorttooth-red.png?raw=1"/><img src="https://www.dropbox.com/s/vwadbbosvhzkzcl/shorttooth-grey.png?raw=1"/><img src="https://www.dropbox.com/s/5u07iauquhen566/stresstooth-black.png?raw=1"/><img src="https://www.dropbox.com/s/lisy5xwuo0p40ax/stresstooth-halfgrey.png?raw=1"/><img src="https://www.dropbox.com/s/o6qv50ex7anfsp7/box_neutral.png?raw=1"/><img src="https://www.dropbox.com/s/etqttco4d9tkl3y/box_light.png?raw=1"/><img src="https://www.dropbox.com/s/9pvyb1tegtwde9e/box_darkness.png?raw=1"/><img src="https://www.dropbox.com/s/7swql9mddspdnhe/box_light_checked.png?raw=1"/><img src="https://www.dropbox.com/s/7vkiwpm3n5cn18i/box_neutral_checked.png?raw=1"/><img src="https://www.dropbox.com/s/hexwib9wgfj76tm/box_darkness_checked.png?raw=1"/></div>
<input class="focus-shadow" type="hidden" name="attr_setting_focus_shadow" value="1"/>
<input class="show-broadcast" type="hidden" name="attr_setting_show_broadcast" value="1"/>
<input class="show-itemdesc" type="hidden" name="attr_setting_show_itemdesc" value="1"/>
<input class="flexwidth" type="hidden" name="attr_setting_flexwidth" value="0"/>
<input type="hidden" name="attr_changed_attributes" value=""/>
<input type="hidden" name="attr_bonusdice" value="Bonus dice"/>
<input type="hidden" name="attr_numberofdice" value=" {{?{Number of dice|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]}}}"/>
<input type="hidden" name="attr_notes_query" value="?{Notes}"/>
<input type="hidden" name="attr_position_query" value="?{Position|Risky,position=Risky|Controlled,position=Controlled|Desperate,position=Desperate|Fortune roll,position=}"/>
<input type="hidden" name="attr_effect_query" value="?{Effect|Standard|Limited|Great|Extreme|Zero}"/>
<input type="hidden" name="attr_consequence_query" value="^{a_consequence}"/>
<input type="hidden" name="attr_stress_max" value="9"/>
<input type="hidden" name="attr_trauma_max" value="4"/>
<input type="hidden" name="attr_coin_max" value="4"/>
<input type="hidden" name="attr_stash_max" value="40"/>
<input type="hidden" name="attr_playbook_xp_max" value="8"/>
<input type="hidden" name="attr_rep_max" value="12"/>
<input type="hidden" name="attr_turf_max" value="6"/>
<input type="hidden" name="attr_crew_tier_max" value="4"/>
<input type="hidden" name="attr_heat_max" value="9"/>
<input type="hidden" name="attr_wanted_max" value="4"/>
<input type="hidden" name="attr_crewcoin_max" value="16"/>
<input type="hidden" name="attr_crew_xp_max" value="8"/>
<div class="container">
  <input class="type" type="hidden" name="attr_sheet_type" value="character"/>
  <!-- Title & Version-->
  <div class="topholder flex">
    <!-- Toggle the type of sheet-->
    <div class="type-selector label">
      <input class="hidden sheet-3waybox" type="checkbox" name="attr_sheet_type" value="faction"/>
      <input class="sheet-3waybox" type="radio" name="attr_sheet_type" value="character" checked="checked"/>
      <input class="sheet-3waybox" type="radio" name="attr_sheet_type" value="crew"/>
      <input class="sheet-3waybox" type="radio" name="attr_sheet_type" value="faction"/><span data-i18n="character_mode"></span><span data-i18n="crew_mode"></span><span data-i18n="faction_mode"></span>
    </div>
    <label class="settings-checkbox">
      <input type="checkbox" name="attr_show_settings" value="1"/><span>y</span>
    </label>
    <div class="version"><span class="version-text" data-i18n="version"></span><span name="attr_version"></span></div>
  </div>
  <input class="hider" type="hidden" name="attr_show_settings" value="0"/>
  <!-- Settings-->
  <div class="settings flex-wrap">
    <div class="setting-char generaterow">
      <select name="attr_generate_source_character" title="Choose source">
        <option value="the_fist" data-i18n="the_fist"></option>
        <option value="the_shot" data-i18n="the_shot"></option>
        <option value="the_law" data-i18n="the_law"></option>
        <option value="the_gamble" data-i18n="the_gamble"></option>
        <option value="the_scout" data-i18n="the_scout"></option>
        <option value="the_outlaw" data-i18n="the_outlaw"></option>
        <option value="the_thunderheart" data-i18n="the_thunderheart"></option>
        <option value="the_speaker" data-i18n="the_speaker"></option>
        <option value="the_plan" data-i18n="the_plan"></option>
        <option value="the_gentle_touch" data-i18n="the_gentle_touch"></option>
        <option value="the_wrench_and_saw" data-i18n="the_wrench_and_saw"></option>
        <option value="the_revenant" data-i18n="the_revenant"></option>
      </select>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_ability" value="1"/><span data-i18n="add_abilities"></span>
      </label>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_friend" value="1"/><span data-i18n="add_friends"></span>
      </label>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_playbookitem" value="1"/><span data-i18n="add_items"></span>
      </label>
    </div>
    <div class="setting-crew generaterow">
      <select name="attr_generate_source_crew" title="Choose source">
        <option value="hellstone_scavengers" data-i18n="hellstone_scavengers"></option>
        <option value="outlaw_posse" data-i18n="outlaw_posse"></option>
        <option value="bounty_hunters" data-i18n="bounty_hunters"></option>
        <option value="tribe" data-i18n="tribe"></option>
      </select>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_crewability" value="1"/><span data-i18n="add_abilities"></span>
      </label>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_contact" value="1"/><span data-i18n="add_contacts"></span>
      </label>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_upgrade" value="1"/><span data-i18n="add_upgrades"></span>
      </label>
    </div>
    <div class="setting-faction generaterow">
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_factions" value="1"/><span data-i18n="generate_factions"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <select name="attr_setting_extra_stress" title="Stress Boxes">
          <option value="0" selected="selected">9</option>
          <option value="1">10</option>
          <option value="2">11</option>
          <option value="3">12</option>
        </select><span data-i18n="number_stress_boxes"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_extra_trauma" value="1"/><span></span><span data-i18n="show_extra_trauma_box"></span>
      </label>
    </div>
    <div class="setting-char setting-crew">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_extra_xp" value="1"/><span></span><span data-i18n="show_extra_xp_condition"></span>
      </label>
    </div>
    <div class="setting-char setting-crew">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_show_itemdesc" value="1" checked="checked"/><span></span><span data-i18n="show_item_description"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_show_cohort" value="1"/><span></span><span data-i18n="show_cohort_section"></span>
      </label>
    </div>
    <div class="setting-char"><span data-i18n="resistance_bonus"></span>
      <label>
        <input type="number" name="attr_setting_resbonus_wits" value="0"/><span data-i18n="wits"></span>
      </label>
      <label>
        <input type="number" name="attr_setting_resbonus_prowess" value="0"/><span data-i18n="prowess"></span>
      </label>
      <label>
        <input type="number" name="attr_setting_resbonus_guts" value="0"/><span data-i18n="guts"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_consequence_query" value="1"/><span></span><span data-i18n="query_for_consequence"></span>
      </label>
    </div>
    <div class="setting-char"><span data-i18n="load:"></span>
      <label>
        <input type="number" name="attr_setting_load_l" value="3"/><span data-i18n="light"></span>
      </label>
      <label>
        <input type="number" name="attr_setting_load_n" value="5"/><span data-i18n="normal"></span>
      </label>
      <label>
        <input type="number" name="attr_setting_load_h" value="6"/><span data-i18n="heavy"></span>
      </label>
    </div>
    <div class="setting-char setting-crew setting-faction">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_flexwidth" value="1"/><span></span><span data-i18n="flexible_width"></span>
      </label>
    </div>
    <div class="setting-char setting-crew setting-faction">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_focus_shadow" value="1" checked="checked"/><span></span><span data-i18n="show_outline"></span>
      </label>
    </div>
    <div class="setting-char setting-crew setting-faction">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_show_broadcast" value="1" checked="checked"/><span></span><span data-i18n="show_broadcast"></span>
      </label>
    </div>
    <div class="setting-char setting-crew">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_autofill" value="1" checked="checked"/><span></span><span data-i18n="fill_fields"></span>
      </label>
    </div>
    <div class="setting-char setting-crew">
      <input class="wide" type="text" spellcheck="false" name="attr_chat_image" value=""/><span data-i18n="chat_image"></span>
    </div>
    <div class="setting-faction">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_clocks_only" value="1"/><span></span><span data-i18n="clocks_only"></span>
      </label>
    </div>
  </div>
  <!-- Character Sheet-->
  <div class="type-character flex">
    <!-- Left column-->
    <div class="col55 flex-wrap">
      <!-- Logo, Header text fields-->
      <div class="col100 header flex">
        <div class="col100 bladeslogo"></div>
        <label class="col55">
          <input type="text" spellcheck="false" name="attr_name"/>
          <div class="label text title" data-i18n="name"></div>
        </label>
        <label class="col45">
          <input type="text" spellcheck="false" name="attr_crew"/>
          <div class="label text title" data-i18n="crew"></div>
        </label>
        <label class="col100">
          <input type="text" spellcheck="false" name="attr_look"/>
          <div class="label text title" data-i18n="look"></div>
        </label>
        <label class="col55">
          <div class="auto-expand"><span name="attr_heritage"></span>
            <textarea spellcheck="false" name="attr_heritage"></textarea>
          </div>
          <input type="hidden" name="attr_heritage" value=""/>
          <div class="text"><span class="label title" data-i18n="heritage"></span><span class="uppercase info" data-i18n="heritage_info"></span></div>
        </label>
        <label class="col45">
          <div class="auto-expand"><span name="attr_background"></span>
            <textarea spellcheck="false" name="attr_background"></textarea>
          </div>
          <input type="hidden" name="attr_background" value=""/>
          <div class="text"><span class="label title" data-i18n="background"></span><span class="uppercase info" data-i18n="background_info"></span></div>
        </label>
        <label class="col100 vice normal">
          <div class="auto-expand"><span name="attr_vice_purveyor"></span>
            <textarea spellcheck="false" name="attr_vice_purveyor"></textarea>
          </div>
          <input type="hidden" name="attr_vice_purveyor" value=""/>
          <div class="text"><span class="label title" data-i18n="vice_purveyor"></span><span class="uppercase info" data-i18n="vice_info"></span></div>
          <button class="vicebutton borderbutton" type="roll" name="roll_Vice" value="&{template:bitd} {{charname=@{character_name}}} {{{{subtitle=^{viceroll1}@{stress}&nbsp;^{stress}^{viceroll2}}} {{vice=1}} {{title=^{vice}}} @{vice_formula} {{charimage=@{chat_image}}}" data-i18n="indulge_vice"></button>
          <input type="hidden" name="attr_vice_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
        </label>
      </div>
      <!-- Stress and Trauma-->
      <div class="col100 flex stress def-margin">
        <!-- Stress markers-->
        <div class="stress1 blackheader">
          <div class="label" data-i18n="stress"></div>
        </div>
        <div class="stress2 blackborder flex">
          <input class="tooth zero" type="radio" name="attr_stress" value="0" checked="checked"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="1"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="2"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="3"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="4"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="5"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="6"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="7"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="8"/><span></span>
          <input class="hidden extra-teeth" type="checkbox" name="attr_setting_extra_stress" value="0" checked="checked"/>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="9"/><span></span>
          <input class="hidden extra-teeth" type="checkbox" name="attr_setting_extra_stress" value="1"/>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="10"/><span></span>
          <input class="hidden extra-teeth" type="checkbox" name="attr_setting_extra_stress" value="2"/>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="11"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="12"/><span></span>
        </div>
        <!-- Trauma markers-->
        <div class="stress3">
          <div class="blackheader">
            <div class="label" data-i18n="trauma"></div>
          </div>
          <div class="traumaholder flex">
            <input class="tooth zero" type="radio" name="attr_trauma" value="0" checked="checked"/><span></span>
            <input class="tooth regulartooth" type="radio" name="attr_trauma" value="1"/><span></span>
            <input class="tooth regulartooth" type="radio" name="attr_trauma" value="2"/><span></span>
            <input class="tooth regulartooth" type="radio" name="attr_trauma" value="3"/><span></span>
            <input class="hidden extra-teeth" type="checkbox" name="attr_setting_extra_trauma" value="0" checked="checked"/>
            <input class="tooth regulartooth" type="radio" name="attr_trauma" value="4"/><span></span>
            <input class="tooth regulartooth" type="radio" name="attr_trauma" value="5"/><span></span>
          </div>
        </div>
        <!-- Individual traumata-->
        <div class="stress4 blackborder">
          <div>
            <div class="flex">
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_scarred" value="1"/><span data-i18n="scarred"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_corrupted" value="1"/><span data-i18n="corrupted"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_visions" value="1"/><span data-i18n="visions"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_gloryhound" value="1"/><span data-i18n="gloryhound"></span>
              </label><span>—</span>
            </div>
            <div class="flex">
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_voices" value="1"/><span data-i18n="voices"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_cursed" value="1"/><span data-i18n="cursed"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_numb" value="1"/><span data-i18n="numb"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_hunted" value="1"/><span data-i18n="hunted"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_shamed" value="1"/><span data-i18n="shamed"></span>
              </label>
            </div>
          </div>
        </div>
      </div>
      <!-- Harm, Healing, Armor, Coin-->
      <div class="col100 flex def-margin">
        <!-- Harm-->
        <div class="harm col63">
          <div class="blackheader col100">
            <div class="label" data-i18n="harm"></div>
            <button class="broadcast-button" type="roll" name="roll_Harm" value="&{template:bitd-broadcast} {{charname=@{character_name}}} {{harm=1}} {{harm3=@{harm3}}} {{harm2_1=@{harm2_1}}} {{harm2_2=@{harm2_2}}} {{harm1_1=@{harm1_1}}} {{harm1_2=@{harm1_2}}} {{charimage=@{chat_image}}}" data-i18n-title="send_details_to_chat">:</button>
          </div>
          <div class="harmbody">
            <div class="flex-center harmnumber">3</div>
            <textarea class="twocols" spellcheck="false" name="attr_harm3"></textarea>
            <div class="flex-center harmeffect" data-i18n="need_help"></div>
            <div class="flex-center harmnumber">2</div>
            <textarea spellcheck="false" name="attr_harm2_1"></textarea>
            <textarea spellcheck="false" name="attr_harm2_2"></textarea>
            <div class="flex-center harmeffect" data-i18n="minus1d"></div>
            <div class="flex-center harmnumber">1</div>
            <textarea spellcheck="false" name="attr_harm1_1"></textarea>
            <textarea spellcheck="false" name="attr_harm1_2"></textarea>
            <div class="flex-center harmeffect" data-i18n="less_effect"></div>
          </div>
        </div>
        <!-- Armor, Healing and Coin-->
        <div class="col37 flex-wrap">
          <!-- Healing-->
          <div class="col45 healing">
            <div class="blackheader col100">
              <button class="label rollbutton inherit" type="roll" name="roll_Recovery" value="&{template:bitd} {{charname=@{character_name}}} {{resist=1}} {{short=1}} {{title=^{recovery}}} {{subtitle=^{rolls_for}}} @{numberofdice} {{charimage=@{chat_image}}} " data-i18n="healing"></button>
            </div>
            <div class="col100 healing-progress" data-i18n="progress_clock" data-i18n-title="recoveryblurb"></div>
            <!-- Healing clock-->
            <input class="size" type="hidden" name="attr_recovery_max" value="4"/>
            <div class="clock-container">
              <div class="spoke-0 all"></div>
              <div class="spoke-90 all"></div>
              <input class="zero input-progress" type="radio" name="attr_recovery" value="0" checked="checked"/><span></span>
              <input class="input-progress all" type="radio" name="attr_recovery" value="1" data-i18n-title="recoveryblurb"/>
              <input class="input-progress all" type="radio" name="attr_recovery" value="2" data-i18n-title="recoveryblurb"/>
              <input class="input-progress all" type="radio" name="attr_recovery" value="3" data-i18n-title="recoveryblurb"/>
              <input class="input-progress all" type="radio" name="attr_recovery" value="4" data-i18n-title="recoveryblurb"/>
              <div class="clock"></div>
            </div>
          </div>
          <!-- Armor-->
          <div class="armor col55">
            <div class="blackheader col100">
              <div class="label" data-i18n="armor_uses"></div>
            </div>
            <label>
              <input class="checkbox squarebox" type="checkbox" name="attr_armor" value="1"/><span></span><span class="label" data-i18n="armor"></span>
            </label>
            <label>
              <input class="checkbox squarebox" type="checkbox" name="attr_special" value="1"/><span></span><span class="label" data-i18n="special"></span>
            </label>
          </div>
          <!-- Coin and Stash-->
          <div class="col100 coin-and-stash">
            <!-- Coin-->
            <div class="col100 coinrow flex">
              <div class="coin flex">
                <div class="label" data-i18n="coin"></div>
                <div class="coin-selector">
                  <input class="hidden sheet-coinbox" type="checkbox" name="attr_coin1_type" value="hellstone"/>
                  <input class="sheet-coinbox" type="radio" name="attr_coin1_type" value="zero" checked="checked"/>
                  <input class="sheet-coinbox" type="radio" name="attr_coin1_type" value="coin"/>
                  <input class="sheet-coinbox" type="radio" name="attr_coin1_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
                </div>
                <div class="coin-selector">
                  <input class="hidden sheet-coinbox" type="checkbox" name="attr_coin2_type" value="hellstone"/>
                  <input class="sheet-coinbox" type="radio" name="attr_coin2_type" value="zero" checked="checked"/>
                  <input class="sheet-coinbox" type="radio" name="attr_coin2_type" value="coin"/>
                  <input class="sheet-coinbox" type="radio" name="attr_coin2_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
                </div>
                <div class="coin-selector">
                  <input class="hidden sheet-coinbox" type="checkbox" name="attr_coin3_type" value="hellstone"/>
                  <input class="sheet-coinbox" type="radio" name="attr_coin3_type" value="zero" checked="checked"/>
                  <input class="sheet-coinbox" type="radio" name="attr_coin3_type" value="coin"/>
                  <input class="sheet-coinbox" type="radio" name="attr_coin3_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
                </div>
                <div class="coin-selector">
                  <input class="hidden sheet-coinbox" type="checkbox" name="attr_coin4_type" value="hellstone"/>
                  <input class="sheet-coinbox" type="radio" name="attr_coin4_type" value="zero" checked="checked"/>
                  <input class="sheet-coinbox" type="radio" name="attr_coin4_type" value="coin"/>
                  <input class="sheet-coinbox" type="radio" name="attr_coin4_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
                </div>
              </div>
              <div class="stashbutton-holder">
                <input type="hidden" name="attr_stash_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
                <button class="rollbutton label" type="roll" name="roll_Stash" value="&{template:bitd} {{charname=@{character_name}}} {{resist=1}} {{short=1}} {{title=^{stash}}} {{subtitle=^{rolls}}} @{stash_formula} {{charimage=@{chat_image}}}" data-i18n="stash"></button>
              </div>
            </div>
            <!-- Stash-->
            <div class="col100 stash">
              <input class="zero" type="radio" name="attr_stash" value="0" checked="checked"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="1"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="2"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="3"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="4"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="5"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="6"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="7"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="8"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="9"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="10"/><span></span><br/>
              <input class="radiobox" type="radio" name="attr_stash" value="11"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="12"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="13"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="14"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="15"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="16"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="17"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="18"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="19"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="20"/><span></span><br/>
              <input class="radiobox" type="radio" name="attr_stash" value="21"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="22"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="23"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="24"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="25"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="26"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="27"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="28"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="29"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="30"/><span></span><br/>
              <input class="radiobox" type="radio" name="attr_stash" value="31"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="32"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="33"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="34"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="35"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="36"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="37"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="38"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="39"/><span></span>
              <input class="radiobox" type="radio" name="attr_stash" value="40"/><span></span><br/>
            </div>
          </div>
        </div>
      </div>
      <!-- Special abilities-->
      <div class="col100 def-margin">
        <div class="specialheader col100 label" data-i18n="special_abilities"></div>
        <div class="col100">
          <fieldset class="repeating_ability">
            <div class="specialability flex">
              <button class="broadcast-button" type="roll" name="roll_Show" value="&{template:bitd-broadcast} {{charname=@{character_name}}} {{type=^{special_ability}}} {{title=@{name}}} {{content=@{description}}} {{charimage=@{chat_image}}}" data-i18n-title="send_details_to_chat">:</button>
              <input class="checkbox circlebox" type="checkbox" name="attr_check" value="1"/><span></span>
              <div class="auto-expand abilityname smallcaps"><span name="attr_name"></span>
                <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="ability_name"></textarea>
              </div>
              <div class="auto-expand abilitydesc"><span name="attr_description"></span>
                <textarea spellcheck="false" name="attr_description" data-i18n-placeholder="ability_description"></textarea>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
      <!-- Advancement-->
      <div class="col100 def-margin">
        <div class="advancement-header flex blackheader">
          <div class="label markxp" data-i18n="mark_xp:"></div>
          <div class="label" data-i18n="playbook_advancement"></div>
          <div class="xpholder flex">
            <input class="tooth zero" type="radio" name="attr_playbook_xp" value="0" checked="checked"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="1"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="2"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="3"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="4"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="5"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="6"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="7"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="8"/><span></span>
          </div>
        </div>
        <ul class="advancement-desc">
          <li data-i18n="xp_desperate"></li>
          <li class="nondot" data-i18n="xp_top"></li>
          <li>
            <div class="auto-expand"><span name="attr_xp_condition"></span>
              <textarea spellcheck="false" name="attr_xp_condition" data-i18n-placeholder="xp_specific"></textarea>
            </div>
          </li>
          <input class="hider" type="hidden" name="attr_setting_extra_xp" value="0"/>
          <li>
            <div class="auto-expand"><span name="attr_xp_condition_extra"></span>
              <textarea spellcheck="false" name="attr_xp_condition_extra" data-i18n-placeholder="xp_specific_extra"></textarea>
            </div>
          </li>
          <li>
            <div class="auto-expand"><span name="attr_xp_condition2">You expressed your beliefs, drives, heritage, or background.</span>
              <textarea spellcheck="false" name="attr_xp_condition2">You expressed your beliefs, drives, heritage, or background.</textarea>
            </div>
          </li>
          <li>
            <div class="auto-expand"><span name="attr_xp_condition3">You struggled with issues from your vice, mutation, stigmata during the session.</span>
              <textarea spellcheck="false" name="attr_xp_condition3">You struggled with issues from your vice, mutation, stigmata during the session.</textarea>
            </div>
          </li>
        </ul>
      </div>
      <!-- Teamwork-->
      <div class="col45 right-column def-margin">
        <div class="plainheader label" data-i18n="teamwork"></div>
        <div class="teamworkbox" data-i18n="assist_a_teammate"></div>
        <div class="teamworkbox" data-i18n="lead_a_group_action"></div>
        <div class="teamworkbox" data-i18n="protect_a_teammate"></div>
        <div class="teamworkbox" data-i18n="set_up_a_teammate"></div>
      </div>
      <!-- Gather Information-->
      <div class="col55 right-column def-margin">
        <div class="gatherinfo col100">
          <div class="plainheader label" data-i18n="gather_information"></div>
          <div>
            <ul>
              <li>
                <input class="inherit" type="text" spellcheck="false" name="attr_gatherinfo1" data-i18n-placeholder="gatherinfo_what_do_they_intend"/>
              </li>
              <li>
                <input class="inherit" type="text" spellcheck="false" name="attr_gatherinfo2" data-i18n-placeholder="gatherinfo_how_can_I_get_them"/>
              </li>
              <li>
                <input class="inherit" type="text" spellcheck="false" name="attr_gatherinfo3" data-i18n-placeholder="gatherinfo_what_are_they_really"/>
              </li>
              <li>
                <input class="inherit" type="text" spellcheck="false" name="attr_gatherinfo4" data-i18n-placeholder="gatherinfo_what_should_I_look"/>
              </li>
              <li>
                <input class="inherit" type="text" spellcheck="false" name="attr_gatherinfo5" data-i18n-placeholder="gatherinfo_wheres_the_weakness"/>
              </li>
              <li>
                <input class="inherit" type="text" spellcheck="false" name="attr_gatherinfo6" data-i18n-placeholder="gatherinfo_how_can_I_find"/>
              </li>
              <li data-i18n="gatherinfo_whats_going_on"></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <!-- Right column-->
    <div class="col45 flex-wrap right-column">
      <!-- Playbook name and description-->
      <div class="playbook flex">
        <input class="label" type="text" spellcheck="false" name="attr_playbook" data-i18n-placeholder="playbook"/>
        <textarea class="label" spellcheck="false" name="attr_playbook_description" data-i18n-placeholder="playbook_description"></textarea>
        <input class="hider" type="hidden" name="attr_show_playbook_reminder" value="1"/>
        <div class="reminder"><span data-i18n="autofill_reminder_playbook"></span><br/><span data-i18n="list_playbooks"></span></div>
      </div>
      <!-- Items and Planning-->
      <div class="col53 itemcolumn small-margin">
        <!-- Load-->
        <div class="loadheader flex col100">
          <div class="label" data-i18n="load"></div>
          <label>
            <input class="checkbox" type="checkbox" name="attr_load" value="light"/><span></span><span class="loadnumber" name="attr_setting_load_l"></span><span data-i18n="light"></span>
          </label>
          <label>
            <input class="checkbox" type="checkbox" name="attr_load" value="normal"/><span></span><span class="loadnumber" name="attr_setting_load_n"></span><span data-i18n="normal"></span>
          </label>
          <label>
            <input class="checkbox" type="checkbox" name="attr_load" value="heavy"/><span></span><span class="loadnumber" name="attr_setting_load_h"></span><span data-i18n="heavy"></span>
          </label>
        </div>
        <div class="itemheader small-margin col100 flex">
          <div class="label" data-i18n="items"></div><span class="italic" data-i18n="italics_dont_count"></span>
          <label class="text-button">
            <input type="checkbox" name="attr_reset_items" value="1"/><span data-i18n="reset?"></span>
          </label>
        </div>
        <!-- Items-->
        <div class="itemholder col100 items">
          <!-- Playbook items-->
          <div class="playbookitems col100 free-repcontrol">
            <fieldset class="repeating_playbookitem">
              <input class="boxes-chosen" type="hidden" name="attr_boxes_chosen" value="0"/>
              <div class="item numboxes-chooser">
                <div data-i18n="how_much_load"></div>
                <input type="number" name="attr_numboxes" min="0" max="3" value="0"/>
                <label>
                  <input type="checkbox" name="attr_bold" value="1"/><span data-i18n="bold"></span>
                </label>
                <label>
                  <input type="checkbox" name="attr_boxes_chosen" value="1"/><span data-i18n="ok"></span>
                </label>
              </div>
              <div class="item">
                <input class="input-bold" type="hidden" name="attr_bold" value="0"/>
                <input class="numboxes" type="hidden" name="attr_numboxes" value="0"/>
                <input class="checkbox squarebox" type="checkbox" name="attr_check_1" value="1"/><span></span><span class="floatingbar boxesgeq2"></span>
                <input class="checkbox squarebox boxesgeq2" type="checkbox" name="attr_check_2" value="1"/><span class="boxesgeq2"></span><span class="floatingbar boxesgeq3 boxesgeq2"></span>
                <input class="checkbox squarebox boxesgeq2 boxesgeq3" type="checkbox" name="attr_check_3" value="1"/><span class="boxesgeq2 boxesgeq3"></span>
                <div class="auto-expand itemname"><span name="attr_name"></span>
                  <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="item_name"></textarea>
                </div>
              </div>
              <div class="item-description">
                <input class="expand" type="checkbox" name="attr_expand" value="1"/><span></span>
                <textarea spellcheck="false" name="attr_description" data-i18n-placeholder="description"></textarea>
              </div>
            </fieldset>
          </div>
          <!-- Regular items-->
          <div class="regularitems col100 free-repcontrol free-repcontrol">
            <fieldset class="repeating_item">
              <input class="input-short" type="hidden" name="attr_short" value="0"/>
              <input class="input-expand" type="hidden" name="attr_expand" value="0"/>
              <div class="item-container">
                <input class="boxes-chosen" type="hidden" name="attr_boxes_chosen" value="0"/>
                <div class="item numboxes-chooser">
                  <div data-i18n="how_much_load"></div>
                  <input type="number" name="attr_numboxes" min="0" max="3" value="0"/>
                  <label>
                    <input type="checkbox" name="attr_short" value="1"/><span data-i18n="short"></span>
                  </label>
                  <label>
                    <input type="checkbox" name="attr_boxes_chosen" value="1"/><span data-i18n="ok"></span>
                  </label>
                </div>
                <div class="item">
                  <input class="numboxes" type="hidden" name="attr_numboxes" value="0"/>
                  <input class="checkbox squarebox" type="checkbox" name="attr_check_1" value="1"/><span></span><span class="floatingbar boxesgeq2"></span>
                  <input class="checkbox squarebox boxesgeq2" type="checkbox" name="attr_check_2" value="1"/><span class="boxesgeq2"></span><span class="floatingbar boxesgeq3 boxesgeq2"></span>
                  <input class="checkbox squarebox boxesgeq2 boxesgeq3" type="checkbox" name="attr_check_3" value="1"/><span class="boxesgeq2 boxesgeq3"></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_name" data-i18n-placeholder="item_name"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_description" data-i18n-placeholder="description"></textarea>
                </div>
              </div>
            </fieldset>
          </div>
        </div>
        <!-- Alchemicals-->
        <!--.col100.def-margin-->
        <!--	input.title-checkbox(type='checkbox', name='attr_show_alchemicals', value='1')-->
        <!--	span.label.plainheader(data-i18n='alchemicals')-->
        <!--	.alchemicals.free-repcontrol-->
        <!--		.bandolier.item-->
        <!--			span.bandoliers-name(data-i18n='bandoliers')-->
        <!--			each bannum in [1,2]-->
        <!--				each checknum in range(1,3)-->
        <!--					+checkbox(`bandolier${bannum}_check_${checknum}`).checkbox.squarebox-->
        <!--					if (checknum !== 3)-->
        <!--						span.floatingbar-->
        <!--		.bandolier-desc(data-i18n='when_you_use_bandolier')-->
        <!--		fieldset.repeating_alchemical-->
        <!--			+checkbox('expand').alchemicals-expand-->
        <!--			+autoexpand('name')-->
        <!--			+textarea('description').alchemicals-info-->
        <!-- Planning and Load-->
        <div class="planning col100 def-margin">
          <input class="title-checkbox" type="checkbox" name="attr_show_planning" value="1" checked="checked"/><span class="label plainheader" data-i18n="planning_load"></span>
          <div class="planning-content">
            <div class="planningdesc" data-i18n="planningdesc"></div>
            <div class="teamworkbox"><span class="bold" data-i18n="assault"></span><span class="italic" data-i18n="detail_assault"></span></div>
            <div class="teamworkbox"><span class="bold" data-i18n="occult"></span><span class="italic" data-i18n="detail_occult"></span></div>
            <div class="teamworkbox"><span class="bold" data-i18n="deception"></span><span class="italic" data-i18n="detail_deception"></span></div>
            <div class="teamworkbox"><span class="bold" data-i18n="social"></span><span class="italic" data-i18n="detail_social"></span></div>
            <div class="teamworkbox"><span class="bold" data-i18n="stealth"></span><span class="italic" data-i18n="detail_stealth"></span></div>
            <div class="teamworkbox"><span class="bold" data-i18n="transport"></span><span class="italic" data-i18n="detail_transport"></span></div>
          </div>
        </div>
      </div>
      <!-- Action ratings-->
      <div class="col47 right-column actioncolumn small-margin">
        <div class="attribute col100">
          <div class="attribute-title flex col100">
            <button class="rollbutton label" type="roll" name="roll_wits" value="&{template:bitd} {{charname=@{character_name}}} {{resist=1}} {{subtitle=^{resists} @{consequence_query} ^{with}}} {{title=^{wits}}} @{wits_formula} {{charimage=@{chat_image}}}" data-i18n="wits" data-i18n-title="wits_description"></button>
            <input type="hidden" name="attr_wits" value="0"/>
            <input type="hidden" name="attr_wits_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
            <input type="hidden" name="attr_wits_xp_max" value="6"/>
            <div class="attribute-xp-box flex">
              <input class="tooth zero" type="radio" name="attr_wits_xp" value="0" checked="checked"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_wits_xp" value="1"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_wits_xp" value="2"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_wits_xp" value="3"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_wits_xp" value="4"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_wits_xp" value="5"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_wits_xp" value="6"/><span></span>
            </div>
          </div>
          <div class="actions col100">
            <div class="action flex col100">
              <input type="hidden" name="attr_hunt_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_hunt" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_hunt" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_hunt" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_hunt" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_hunt" value="4"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_hunt" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=^{rolls}}} {{title=^{hunt}}} {{@{position_query}}} {{effect=@{effect_query}}} @{hunt_formula} {{charimage=@{chat_image}}}" data-i18n="hunt" data-i18n-title="hunt_description"></button>
            </div>
            <div class="action flex col100">
              <input type="hidden" name="attr_read_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_read" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_read" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_read" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_read" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_read" value="4"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_read" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=^{rolls}}} {{title=^{read}}} {{@{position_query}}} {{effect=@{effect_query}}} @{read_formula} {{charimage=@{chat_image}}}" data-i18n="read" data-i18n-title="read_description"></button>
            </div>
            <div class="action flex col100">
              <input type="hidden" name="attr_survey_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_survey" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_survey" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_survey" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_survey" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_survey" value="4"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_survey" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=^{rolls}}} {{title=^{survey}}} {{@{position_query}}} {{effect=@{effect_query}}} @{survey_formula} {{charimage=@{chat_image}}}" data-i18n="survey" data-i18n-title="survey_description"></button>
            </div>
            <div class="action flex col100">
              <input type="hidden" name="attr_craft_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_craft" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_craft" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_craft" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_craft" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_craft" value="4"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_craft" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=^{rolls}}} {{title=^{craft}}} {{@{position_query}}} {{effect=@{effect_query}}} @{craft_formula} {{charimage=@{chat_image}}}" data-i18n="craft" data-i18n-title="craft_description"></button>
            </div>
          </div>
        </div>
        <div class="attribute col100">
          <div class="attribute-title flex col100">
            <button class="rollbutton label" type="roll" name="roll_prowess" value="&{template:bitd} {{charname=@{character_name}}} {{resist=1}} {{subtitle=^{resists} @{consequence_query} ^{with}}} {{title=^{prowess}}} @{prowess_formula} {{charimage=@{chat_image}}}" data-i18n="prowess" data-i18n-title="prowess_description"></button>
            <input type="hidden" name="attr_prowess" value="0"/>
            <input type="hidden" name="attr_prowess_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
            <input type="hidden" name="attr_prowess_xp_max" value="6"/>
            <div class="attribute-xp-box flex">
              <input class="tooth zero" type="radio" name="attr_prowess_xp" value="0" checked="checked"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="1"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="2"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="3"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="4"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="5"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="6"/><span></span>
            </div>
          </div>
          <div class="actions col100">
            <div class="action flex col100">
              <input type="hidden" name="attr_sling_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_sling" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sling" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sling" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sling" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sling" value="4"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_sling" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=^{rolls}}} {{title=^{sling}}} {{@{position_query}}} {{effect=@{effect_query}}} @{sling_formula} {{charimage=@{chat_image}}}" data-i18n="sling" data-i18n-title="sling_description"></button>
            </div>
            <div class="action flex col100">
              <input type="hidden" name="attr_prowl_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_prowl" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_prowl" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_prowl" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_prowl" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_prowl" value="4"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_prowl" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=^{rolls}}} {{title=^{prowl}}} {{@{position_query}}} {{effect=@{effect_query}}} @{prowl_formula} {{charimage=@{chat_image}}}" data-i18n="prowl" data-i18n-title="prowl_description"></button>
            </div>
            <div class="action flex col100">
              <input type="hidden" name="attr_brawl_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_brawl" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_brawl" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_brawl" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_brawl" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_brawl" value="4"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_brawl" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=^{rolls}}} {{title=^{brawl}}} {{@{position_query}}} {{effect=@{effect_query}}} @{brawl_formula} {{charimage=@{chat_image}}}" data-i18n="brawl" data-i18n-title="brawl_description"></button>
            </div>
            <div class="action flex col100">
              <input type="hidden" name="attr_disable_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_disable" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_disable" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_disable" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_disable" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_disable" value="4"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_disable" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=^{rolls}}} {{title=^{disable}}} {{@{position_query}}} {{effect=@{effect_query}}} @{disable_formula} {{charimage=@{chat_image}}}" data-i18n="disable" data-i18n-title="disable_description"></button>
            </div>
          </div>
        </div>
        <div class="attribute col100">
          <div class="attribute-title flex col100">
            <button class="rollbutton label" type="roll" name="roll_guts" value="&{template:bitd} {{charname=@{character_name}}} {{resist=1}} {{subtitle=^{resists} @{consequence_query} ^{with}}} {{title=^{guts}}} @{guts_formula} {{charimage=@{chat_image}}}" data-i18n="guts" data-i18n-title="guts_description"></button>
            <input type="hidden" name="attr_guts" value="0"/>
            <input type="hidden" name="attr_guts_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
            <input type="hidden" name="attr_guts_xp_max" value="6"/>
            <div class="attribute-xp-box flex">
              <input class="tooth zero" type="radio" name="attr_guts_xp" value="0" checked="checked"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_guts_xp" value="1"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_guts_xp" value="2"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_guts_xp" value="3"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_guts_xp" value="4"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_guts_xp" value="5"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_guts_xp" value="6"/><span></span>
            </div>
          </div>
          <div class="actions col100">
            <div class="action flex col100">
              <input type="hidden" name="attr_attune_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_attune" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_attune" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_attune" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_attune" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_attune" value="4"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_attune" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=^{rolls}}} {{title=^{attune}}} {{@{position_query}}} {{effect=@{effect_query}}} @{attune_formula} {{charimage=@{chat_image}}}" data-i18n="attune" data-i18n-title="attune_description"></button>
            </div>
            <div class="action flex col100">
              <input type="hidden" name="attr_command_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_command" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_command" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_command" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_command" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_command" value="4"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_command" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=^{rolls}}} {{title=^{command}}} {{@{position_query}}} {{effect=@{effect_query}}} @{command_formula} {{charimage=@{chat_image}}}" data-i18n="command" data-i18n-title="command_description"></button>
            </div>
            <div class="action flex col100">
              <input type="hidden" name="attr_consort_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_consort" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_consort" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_consort" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_consort" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_consort" value="4"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_consort" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=^{rolls}}} {{title=^{consort}}} {{@{position_query}}} {{effect=@{effect_query}}} @{consort_formula} {{charimage=@{chat_image}}}" data-i18n="consort" data-i18n-title="consort_description"></button>
            </div>
            <div class="action flex col100">
              <input type="hidden" name="attr_sway_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_sway" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sway" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sway" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sway" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sway" value="4"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_sway" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{subtitle=^{rolls}}} {{title=^{sway}}} {{@{position_query}}} {{effect=@{effect_query}}} @{sway_formula} {{charimage=@{chat_image}}}" data-i18n="sway" data-i18n-title="sway_description"></button>
            </div>
          </div>
        </div>
        <!-- add gap to avoid overlapping-->
        <div class="gap">
          <label>X</label>
        </div>
        <!-- Bonus die box-->
        <div class="bonusdie col100">
          <div class="col100 label" data-i18n="bonus_die"></div>
          <div class="col100 flex">
            <div class="flex-center bonusdieplus">+</div>
            <div class="bonusdietext">
              <div class="label" data-i18n="push_yourself"></div><span data-i18n="push_yourself_desc"></span>
              <div class="label" data-i18n="devils_bargain"></div>
            </div>
          </div>
        </div>
        <!-- Cohort-->
        <input class="hider" type="hidden" name="attr_setting_show_cohort" value="0"/>
        <div class="cohort">
          <input type="hidden" name="attr_char_cohort_verb" value="^{rolls_their}"/>
          <input type="hidden" name="attr_char_cohort_roll_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
          <div class="cohort-title flex col100 label">
            <input class="inherit" type="text" spellcheck="false" name="attr_char_cohort_name" value="Cohort"/>
            <button class="inherit rollbutton" type="roll" name="roll_char_cohort_roll" value="&{template:bitd} {{charname=@{character_name}}} {{resist=1}} {{short=1}} {{charname=@{char_cohort_name} (^{@{char_cohort_type}}, @{char_cohort_subtype})}} {{title=^{cohort_quality}}} {{subtitle=@{char_cohort_verb}}}) @{char_cohort_roll_formula} {{charimage=@{chat_image}}}" data-i18n="roll-inf"></button>
          </div>
          <div class="cohort-info flex col100 uppercase">
            <div class="cohort-dropdown">
              <div><span name="attr_char_cohort_type" data-i18n-dynamic="data-i18n-dynamic"></span></div>
              <div>
                <input type="radio" name="attr_char_cohort_type" value="gang"/><span data-i18n="gang"></span>
              </div>
              <div>
                <input type="radio" name="attr_char_cohort_type" value="elite"/><span data-i18n="elite"></span>
              </div>
              <div>
                <input type="radio" name="attr_char_cohort_type" value="expert" checked="checked"/><span data-i18n="expert"></span>
              </div>
            </div>
            <input class="sheet-inherit" type="text" spellcheck="false" name="attr_char_cohort_subtype" data-i18n-placeholder="hunter"/>
            <div class="label cohort-quality-label" data-i18n="quality_abbreviated">Q:</div>
            <input class="label" type="number" name="attr_char_cohort_quality" min="0" max="5" value="1"/>
          </div>
          <div class="cohort-condition flex col100">
            <label><span class="cohort-condition-name uppercase" data-i18n="weak"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_char_cohort_weak" value="1"/><span></span>
            </label>
            <label><span class="cohort-condition-name uppercase" data-i18n="impaired"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_char_cohort_impaired" value="1"/><span></span>
            </label>
            <label><span class="cohort-condition-name uppercase" data-i18n="broken"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_char_cohort_broken" value="1"/><span></span>
            </label>
            <label><span class="cohort-condition-name label" data-i18n="armor"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_char_cohort_armor" value="1"/><span></span>
            </label>
          </div>
          <label class="cohort-edgeflaw"><span class="uppercase" data-i18n="edges"></span>
            <div class="auto-expand"><span name="attr_char_cohort_edges"></span>
              <textarea spellcheck="false" name="attr_char_cohort_edges"></textarea>
            </div>
          </label>
          <label class="cohort-edgeflaw"><span class="uppercase" data-i18n="flaws"></span>
            <div class="auto-expand"><span name="attr_char_cohort_flaws"></span>
              <textarea spellcheck="false" name="attr_char_cohort_flaws"></textarea>
            </div>
          </label>
          <textarea class="cohort-description" spellcheck="false" name="attr_char_cohort_description"></textarea>
        </div>
        <!-- Friends-->
        <div class="col100 def-margin friends">
          <div class="specialheader col100 label flex">
            <input class="inherit" type="text" spellcheck="false" name="attr_friends_title" value="Friends"/>
          </div>
          <div class="greyholder col100">
            <fieldset class="repeating_friend">
              <div class="friend-contact friend flex">
                <input class="friendstate" type="hidden" name="attr_status" value="0"/>
                <label class="up">
                  <input class="checkbox" type="checkbox" name="attr_status" value="up"/><span></span>
                </label>
                <label class="down">
                  <input class="checkbox" type="checkbox" name="attr_status" value="down"/><span></span>
                </label>
                <div class="auto-expand"><span name="attr_name"></span>
                  <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="friend_name"></textarea>
                </div>
              </div>
              <input class="expand" type="checkbox" name="attr_null" value="1"/><span></span>
              <textarea class="description" spellcheck="false" name="attr_description" data-i18n-placeholder="notes"></textarea>
            </fieldset>
          </div>
        </div>
        <!-- Roll Fortune-->
        <button class="fortunebutton borderbutton" type="roll" name="roll_Fortune" value="&{template:bitd} {{charname=@{character_name}}} {{fortune=1}} {{subtitle=^{rolls}}} {{title=^{fortune}}} @{numberofdice} {{charimage=@{chat_image}}} {{notes=@{notes_query}}} " data-i18n="roll_fortune"></button>
      </div>
      <!-- Clocks-->
      <div class="col100 clocks def-margin free-repcontrol">
        <div class="specialheader label" data-i18n="clocks"></div>
        <fieldset class="repeating_clock">
          <input class="size" type="hidden" name="attr_size" value=""/>
          <div class="auto-expand smallcaps"><span name="attr_name"></span>
            <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="clock_name"></textarea>
          </div>
          <button class="broadcast-button" type="roll" name="roll_Show" value="&{template:bitd-broadcast} {{charname=@{character_name}}} {{title=@{name}}} {{clock=1}} {{clocksize=@{size}}} {{clockprogress=@{progress}}} {{charimage=@{chat_image}}}" data-i18n-title="send_details_to_chat">:</button>
          <div class="size-choice">
            <label class="text-button">
              <input type="radio" name="attr_size" value="4"/><span>4</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="6"/><span>6</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="8"/><span>8</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="10"/><span>10</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="12"/><span>12</span>
            </label>
          </div>
          <div class="clock-container">
            <div class="spoke-0 all"></div>
            <div class="spoke-30 sheet-12clock"></div>
            <div class="spoke-45 sheet-8clock"></div>
            <div class="spoke-36 sheet-10clock"></div>
            <div class="spoke-60 sheet-6clock sheet-12clock"></div>
            <div class="spoke-72 sheet-10clock"></div>
            <div class="spoke-90 sheet-4clock sheet-8clock sheet-12clock"></div>
            <div class="spoke-108 sheet-10clock"></div>
            <div class="spoke-120 sheet-6clock sheet-12clock"></div>
            <div class="spoke-135 sheet-8clock"></div>
            <div class="spoke-144 sheet-10clock"></div>
            <div class="spoke-150 sheet-12clock"></div>
            <input class="zero input-progress" type="radio" name="attr_progress" value="0" checked="checked"/><span></span>
            <input class="input-progress all" type="radio" name="attr_progress" value="1"/>
            <input class="input-progress all" type="radio" name="attr_progress" value="2"/>
            <input class="input-progress all" type="radio" name="attr_progress" value="3"/>
            <input class="input-progress all" type="radio" name="attr_progress" value="4"/>
            <input class="input-progress sheet-6clock sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="5"/>
            <input class="input-progress sheet-6clock sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="6"/>
            <input class="input-progress sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="7"/>
            <input class="input-progress sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="8"/>
            <input class="input-progress sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="9"/>
            <input class="input-progress sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="10"/>
            <input class="input-progress sheet-12clock" type="radio" name="attr_progress" value="11"/>
            <input class="input-progress sheet-12clock" type="radio" name="attr_progress" value="12"/>
            <div class="clock"></div>
          </div>
        </fieldset>
      </div>
      <textarea class="notes" spellcheck="false" name="attr_notes" data-i18n-placeholder="notes"></textarea>
    </div>
  </div>
  <!-- Crew Sheet-->
  <div class="type-crew flex">
    <!-- Left column-->
    <div class="col55 flex-wrap">
      <!-- Logo, Header text fields-->
      <div class="col100 header flex-wrap">
        <div class="col55 bladeslogo"></div>
        <div class="col45 crewheader label" data-i18n="crew_sheet"></div>
        <label class="col55">
          <input type="text" spellcheck="false" name="attr_crew_name"/>
          <div class="label text title" data-i18n="name"></div>
        </label>
        <label class="col45">
          <input type="text" spellcheck="false" name="attr_reputation"/>
          <div class="label text title" data-i18n="reputation"></div>
        </label>
        <label class="col100">
          <input type="text" spellcheck="false" name="attr_lair"/>
          <div class="label text title" data-i18n="lair"></div>
        </label>
      </div>
      <!-- Rep, Hold, and Tier-->
      <div class="col100 flex rep-and-hold def-margin">
        <div class="rep flex col45">
          <div class="rep1 blackheader">
            <div class="label" data-i18n="rep"></div>
          </div>
          <div class="rep2 blackborder flex">
            <div class="turfbox">
              <input type="radio" name="attr_turf" value="1"/><span></span>
              <input type="radio" name="attr_turf" value="2"/><span></span>
              <input type="radio" name="attr_turf" value="3"/><span></span>
            </div>
            <input class="turf-input" type="hidden" name="attr_turf" value="0"/>
            <input class="tooth zero" type="radio" name="attr_rep" value="0" checked="checked"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="1"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="2"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="3"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="4"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="5"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="6"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="7"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="8"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="9"/><span></span>
            <input class="tooth stresstooth turf6 turf5 turf4 turf3" type="radio" name="attr_rep" value="10"/><span></span>
            <input class="tooth stresstooth turf6 turf5 turf4 turf3 turf2" type="radio" name="attr_rep" value="11"/><span></span>
            <input class="tooth stresstooth turf6 turf5 turf4 turf3 turf2 turf1" type="radio" name="attr_rep" value="12"/><span></span>
          </div>
          <div class="rep3 blackborder">
            <div class="black-on-grey">
              <div class="label" data-i18n="turf"></div>
            </div>
            <div class="turfzero-holder">
              <input class="zero" type="radio" name="attr_turf" value="0" checked="checked"/><span></span>
            </div>
          </div>
        </div>
        <!-- Hold-->
        <div class="hold flex">
          <div class="hold1 blackheader">
            <div class="label" data-i18n="hold"></div>
          </div>
          <label class="blackborder">
            <div class="black-on-grey">
              <div class="label" data-i18n="weak"></div>
            </div>
            <input class="tooth holdtooth" type="radio" name="attr_hold" value="weak"/><span></span>
          </label>
          <label class="blackborder">
            <div class="black-on-grey">
              <div class="label" data-i18n="strong"></div>
            </div>
            <input class="tooth holdtooth" type="radio" name="attr_hold" value="strong" checked="checked"/><span></span>
          </label>
          <!-- Tier-->
          <div class="blackheader">
            <button class="label inherit rollbutton" type="roll" name="roll_Tier" value="&{template:bitd} {{charname=@{character_name}}} {{resist=1}} {{short=1}} {{title=^{crew_tier}}} {{subtitle=^{roll_their}}} @{crew_tier_formula} {{charimage=@{chat_image}}}" data-i18n="tier"></button>
            <input type="hidden" name="attr_crew_tier_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
          </div>
          <div class="tier flex">
            <input class="hidden fakeradio" type="checkbox" name="attr_crew_tier" value="0" checked="checked"/>
            <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_crew_tier" value="1"/><span></span>
            <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_crew_tier" value="2"/><span></span>
            <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_crew_tier" value="3"/><span></span>
            <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_crew_tier" value="4"/><span></span>
          </div>
        </div>
      </div>
      <!-- Claims-->
      <div class="claims col100 free-repcontrol">
        <div class="claimsrow flex">
            <input type="hidden" name="attr_claim_1_check" value="0"/>
            <div class="claimbox-darkness">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_1_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_1_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_1_desc"></textarea>
            </div>
            <label class="claimbridge claims-horisep">
              <input type="checkbox" name="attr_claim_bridge_1_2" value="1" checked="checked"/><span></span>
            </label>
            <input type="hidden" name="attr_claim_2_check" value="0"/>
            <div class="claimbox-neutral">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_2_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_2_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_2_desc"></textarea>
            </div>
            <label class="claimbridge claims-horisep">
              <input type="checkbox" name="attr_claim_bridge_2_3" value="1" checked="checked"/><span></span>
            </label>
            <input type="hidden" name="attr_claim_3_check" value="0"/>
            <div class="claimbox-neutral">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_3_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_3_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_3_desc"></textarea>
            </div>
            <label class="claimbridge claims-horisep">
              <input type="checkbox" name="attr_claim_bridge_3_4" value="1" checked="checked"/><span></span>
            </label>
            <input type="hidden" name="attr_claim_4_check" value="0"/>
            <div class="claimbox-light">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_4_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_4_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_4_desc"></textarea>
            </div>
            <label class="claimbridge claims-horisep">
              <input type="checkbox" name="attr_claim_bridge_4_5" value="1" checked="checked"/><span></span>
            </label>
            <input type="hidden" name="attr_claim_5_check" value="0"/>
            <div class="claimbox-light">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_5_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_5_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_5_desc"></textarea>
            </div>
        </div>
        <div class="claims-seprow flex">
            <label class="claimbridge claims-vertsep">
              <input type="checkbox" name="attr_claim_bridge_1_6" value="1" checked="checked"/><span></span>
            </label>
            <label class="claimbridge claims-vertsep">
              <input type="checkbox" name="attr_claim_bridge_2_7" value="1" checked="checked"/><span></span>
            </label>
            <label class="claimbridge claims-vertsep">
              <input type="checkbox" name="attr_claim_bridge_3_8" value="1" checked="checked"/><span></span>
            </label>
            <label class="claimbridge claims-vertsep">
              <input type="checkbox" name="attr_claim_bridge_4_9" value="1" checked="checked"/><span></span>
            </label>
            <label class="claimbridge claims-vertsep">
              <input type="checkbox" name="attr_claim_bridge_5_10" value="1" checked="checked"/><span></span>
            </label>
        </div>
        <div class="claimsrow flex">
            <input type="hidden" name="attr_claim_6_check" value="0"/>
            <div class="claimbox-darkness">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_6_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_6_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_6_desc"></textarea>
            </div>
            <label class="claimbridge claims-horisep">
              <input type="checkbox" name="attr_claim_bridge_6_7" value="1" checked="checked"/><span></span>
            </label>
            <input type="hidden" name="attr_claim_7_check" value="0"/>
            <div class="claimbox-darkness">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_7_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_7_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_7_desc"></textarea>
            </div>
            <label class="claimbridge claims-horisep">
              <input type="checkbox" name="attr_claim_bridge_7_8" value="1" checked="checked"/><span></span>
            </label>
          <div class="lairbox flex-center uppercase" data-i18n="equilibrium"></div>
            <label class="claimbridge claims-horisep">
              <input type="checkbox" name="attr_claim_bridge_8_9" value="1" checked="checked"/><span></span>
            </label>
            <input type="hidden" name="attr_claim_9_check" value="0"/>
            <div class="claimbox-light">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_9_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_9_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_9_desc"></textarea>
            </div>
            <label class="claimbridge claims-horisep">
              <input type="checkbox" name="attr_claim_bridge_9_10" value="1" checked="checked"/><span></span>
            </label>
            <input type="hidden" name="attr_claim_10_check" value="0"/>
            <div class="claimbox-light">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_10_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_10_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_10_desc"></textarea>
            </div>
        </div>
        <div class="claims-seprow flex">
            <label class="claimbridge claims-vertsep">
              <input type="checkbox" name="attr_claim_bridge_6_11" value="1" checked="checked"/><span></span>
            </label>
            <label class="claimbridge claims-vertsep">
              <input type="checkbox" name="attr_claim_bridge_7_12" value="1" checked="checked"/><span></span>
            </label>
            <label class="claimbridge claims-vertsep">
              <input type="checkbox" name="attr_claim_bridge_8_13" value="1" checked="checked"/><span></span>
            </label>
            <label class="claimbridge claims-vertsep">
              <input type="checkbox" name="attr_claim_bridge_9_14" value="1" checked="checked"/><span></span>
            </label>
            <label class="claimbridge claims-vertsep">
              <input type="checkbox" name="attr_claim_bridge_10_15" value="1" checked="checked"/><span></span>
            </label>
        </div>
        <div class="claimsrow flex">
            <input type="hidden" name="attr_claim_11_check" value="0"/>
            <div class="claimbox-darkness">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_11_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_11_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_11_desc"></textarea>
            </div>
            <label class="claimbridge claims-horisep">
              <input type="checkbox" name="attr_claim_bridge_11_12" value="1" checked="checked"/><span></span>
            </label>
            <input type="hidden" name="attr_claim_12_check" value="0"/>
            <div class="claimbox-darkness">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_12_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_12_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_12_desc"></textarea>
            </div>
            <label class="claimbridge claims-horisep">
              <input type="checkbox" name="attr_claim_bridge_12_13" value="1" checked="checked"/><span></span>
            </label>
            <input type="hidden" name="attr_claim_13_check" value="0"/>
            <div class="claimbox-neutral">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_13_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_13_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_13_desc"></textarea>
            </div>
            <label class="claimbridge claims-horisep">
              <input type="checkbox" name="attr_claim_bridge_13_14" value="1" checked="checked"/><span></span>
            </label>
            <input type="hidden" name="attr_claim_14_check" value="0"/>
            <div class="claimbox-neutral">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_14_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_14_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_14_desc"></textarea>
            </div>
            <label class="claimbridge claims-horisep">
              <input type="checkbox" name="attr_claim_bridge_14_15" value="1" checked="checked"/><span></span>
            </label>
            <input type="hidden" name="attr_claim_15_check" value="0"/>
            <div class="claimbox-light">
              <label>
                <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_15_check" value="1"/><span></span>
              </label>
              <textarea class="label" spellcheck="false" name="attr_claim_15_name"></textarea>
              <textarea class="claim-desc" spellcheck="false" name="attr_claim_15_desc"></textarea>
            </div>
        </div>
        <fieldset class="repeating_claim">
          <div class="claims-seprow flex">
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_top_1" value="1" checked="checked"/><span></span>
              </label>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_top_2" value="1" checked="checked"/><span></span>
              </label>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_top_3" value="1" checked="checked"/><span></span>
              </label>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_top_4" value="1" checked="checked"/><span></span>
              </label>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_top_5" value="1" checked="checked"/><span></span>
              </label>
          </div>
          <div class="claimsrow flex">
              <input type="hidden" name="attr_claim_1_check" value="0"/>
              <div class="claimbox-neutral">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_1_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_1_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_1_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_1_2" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_2_check" value="0"/>
              <div class="claimbox-neutral">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_2_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_2_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_2_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_2_3" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_3_check" value="0"/>
              <div class="claimbox-neutral">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_3_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_3_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_3_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_3_4" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_4_check" value="0"/>
              <div class="claimbox-neutral">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_4_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_4_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_4_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_4_5" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_5_check" value="0"/>
              <div class="claimbox-neutral">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_5_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_5_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_5_desc"></textarea>
              </div>
          </div>
        </fieldset>
      </div>
      <!-- Heat and Coin-->
      <div class="col100 flex heat-and-vault def-margin">
        <!-- Heat-->
        <div class="col45 flex heat">
          <!-- Heat markers-->
          <div class="heat1 blackheader">
            <div class="label" data-i18n="heat"></div>
          </div>
          <div class="heat2 blackborder flex">
            <input class="tooth zero" type="radio" name="attr_heat" value="0" checked="checked"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="1"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="2"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="3"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="4"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="5"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="6"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="7"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="8"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="9"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="10"/><span></span>
          </div>
          <!-- Wanted Level-->
          <div class="heat3">
            <div class="blackheader">
              <button class="label inherit rollbutton" type="roll" name="roll_Wanted" value="&{template:bitd} {{charname=@{character_name}}} {{vice=1}} {{short=1}} {{title=^{entanglement}}} {{subtitle=^{wantedroll1}@{heat}&nbsp;^{heat}^{wantedroll2}}} @{wanted_formula} {{charimage=@{chat_image}}}" data-i18n="wanted"></button>
              <input type="hidden" name="attr_wanted_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
            </div>
            <div class="wantedholder flex">
              <input class="tooth zero" type="radio" name="attr_wanted" value="0" checked="checked"/><span></span>
              <input class="tooth regulartooth" type="radio" name="attr_wanted" value="1"/><span></span>
              <input class="tooth regulartooth" type="radio" name="attr_wanted" value="2"/><span></span>
              <input class="tooth regulartooth" type="radio" name="attr_wanted" value="3"/><span></span>
              <input class="tooth regulartooth" type="radio" name="attr_wanted" value="4"/><span></span>
            </div>
          </div>
        </div>
        <!-- Coin-->
        <div class="crewcoin col52b">
          <div class="col100 flex">
            <div class="blackheader crewcoin1">
              <div class="label" data-i18n="coin"></div>
            </div>
            <div class="greyheader crewcoin2">
              <div class="label" data-i18n="vaults"></div>
            </div>
          </div>
          <div class="col100 flex crewcoin-coins">
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_possecoin1_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_possecoin1_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_possecoin1_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_possecoin1_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_possecoin2_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_possecoin2_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_possecoin2_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_possecoin2_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_possecoin3_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_possecoin3_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_possecoin3_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_possecoin3_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_possecoin4_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_possecoin4_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_possecoin4_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_possecoin4_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="crewcoinbar"></div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_vaultcoin01_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin01_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin01_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin01_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_vaultcoin02_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin02_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin02_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin02_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_vaultcoin03_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin03_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin03_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin03_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_vaultcoin04_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin04_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin04_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin04_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="crewcoinbar"></div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_vaultcoin05_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin05_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin05_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin05_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_vaultcoin06_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin06_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin06_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin06_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_vaultcoin07_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin07_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin07_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin07_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_vaultcoin08_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin08_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin08_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin08_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_vaultcoin09_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin09_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin09_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin09_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_vaultcoin10_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin10_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin10_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin10_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_vaultcoin11_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin11_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin11_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin11_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
            <div class="coin-selector">
              <input class="hidden sheet-coinbox" type="checkbox" name="attr_vaultcoin12_type" value="hellstone"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin12_type" value="zero" checked="checked"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin12_type" value="coin"/>
              <input class="sheet-coinbox" type="radio" name="attr_vaultcoin12_type" value="hellstone"/><span data-i18n="zero_mode"></span><span data-i18n="coin_mode"></span><span data-i18n="hellstone_mode"></span>
            </div>
          </div>
          <div class="col100 crewcoin-desc" data-i18n="upon_crew_advance"></div>
        </div>
      </div>
      <!-- Special abilities-->
      <div class="col100 def-margin">
        <div class="specialheader col100 label" data-i18n="special_abilities"></div>
        <div class="greyholder col100">
          <fieldset class="repeating_crewability">
            <div class="specialability flex">
              <button class="broadcast-button" type="roll" name="roll_Show" value="&{template:bitd-broadcast} {{charname=@{character_name}}} {{type=^{special_ability}}} {{title=@{name}}} {{content=@{description}}} {{charimage=@{chat_image}}}" data-i18n-title="send_details_to_chat">:</button>
              <input class="checkbox circlebox" type="checkbox" name="attr_check" value="1"/><span></span>
              <div class="auto-expand abilityname smallcaps"><span name="attr_name"></span>
                <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="ability_name"></textarea>
              </div>
              <div class="auto-expand abilitydesc"><span name="attr_description"></span>
                <textarea spellcheck="false" name="attr_description" data-i18n-placeholder="ability_description"></textarea>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
      <!-- Advancement-->
      <div class="col100 def-margin">
        <div class="advancement-header flex blackheader">
          <div class="label markxp" data-i18n="mark_xp:"></div>
          <div class="label" data-i18n="crew_advancement"></div>
          <div class="xpholder flex">
            <input class="tooth zero" type="radio" name="attr_crew_xp" value="0" checked="checked"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="1"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="2"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="3"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="4"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="5"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="6"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="7"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="8"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="9"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="10"/><span></span>
          </div>
        </div>
        <ul class="advancement-desc">
          <li class="nondot" data-i18n="xp_top"></li>
          <li>
            <div class="auto-expand"><span name="attr_crew_xp_condition"></span>
              <textarea spellcheck="false" name="attr_crew_xp_condition" data-i18n-placeholder="xp_crew_specific"></textarea>
            </div>
          </li>
          <input class="hider" type="hidden" name="attr_setting_extra_xp" value="0"/>
          <li>
            <div class="auto-expand"><span name="attr_xp_condition_extra"></span>
              <textarea spellcheck="false" name="attr_xp_condition_extra" data-i18n-placeholder="xp_specific_extra"></textarea>
            </div>
          </li>
          <li data-i18n="xp_contend"></li>
          <li data-i18n="xp_bolster"></li>
          <li data-i18n="xp_express"></li>
        </ul>
      </div>
    </div>
    <!-- Right column-->
    <div class="col45 flex-wrap right-column">
      <!-- Crew Type-->
      <div class="playbook flex">
        <input class="label" type="text" spellcheck="false" name="attr_crew_type" data-i18n-placeholder="crew" placeholder="Crew"/>
        <textarea class="label" spellcheck="false" name="attr_crew_description" data-i18n-placeholder="crew_description" placeholder="A short crew description"></textarea>
        <input class="hider" type="hidden" name="attr_show_playbook_reminder" value="1"/>
        <div class="reminder"><span data-i18n="autofill_reminder_crew"></span><br/><span data-i18n="list_crews"></span></div>
      </div>
      <!-- Upgrades and Hunting Grounds-->
      <div class="col53 small-margin">
        <!-- Upgrades-->
        <div class="itemheader col100"><span class="label" data-i18n="crew_upgrades"></span></div>
        <div class="itemholder col100 upgrades">
          <!-- Specific upgrades-->
          <div class="playbookitems col100 free-repcontrol">
            <fieldset class="repeating_upgrade">
              <input class="boxes-chosen" type="hidden" name="attr_boxes_chosen" value="0"/>
              <div class="item numboxes-chooser">
                <div data-i18n="how_many_boxes"></div>
                <input type="number" name="attr_numboxes" min="1" max="3" value="1"/>
                <label>
                  <input type="checkbox" name="attr_boxes_chosen" value="1"/><span data-i18n="ok"></span>
                </label>
              </div>
              <div class="item">
                <input class="numboxes" type="hidden" name="attr_numboxes" value="1"/>
                <input class="checkbox squarebox" type="checkbox" name="attr_check_1" value="1"/><span></span><span class="floatingbar boxesgeq2"></span>
                <input class="checkbox squarebox boxesgeq2" type="checkbox" name="attr_check_2" value="1"/><span class="boxesgeq2"></span><span class="floatingbar boxesgeq3 boxesgeq2"></span>
                <input class="checkbox squarebox boxesgeq2 boxesgeq3" type="checkbox" name="attr_check_3" value="1"/><span class="boxesgeq2 boxesgeq3"></span>
                <div class="auto-expand itemname"><span name="attr_name"></span>
                  <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="an_upgrade"></textarea>
                </div>
              </div>
              <div class="item-description">
                <input class="expand" type="checkbox" name="attr_expand" value="1"/><span></span>
                <textarea spellcheck="false" name="attr_description" data-i18n-placeholder="description"></textarea>
              </div>
            </fieldset>
          </div>
          <!-- Regular upgrades-->
          <div class="regularitems flex-wrap col100">
            <div class="item col100"><span class="label" data-i18n="lair"></span></div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_1_check_1" value="1"/><span></span>
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_1_check_2" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_1_name" value="Carriage"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_1_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_1_description" data-i18n-placeholder="description">You have a carriage, two horses to pull it, and a stable. A second upgrade improves the carriage with armor and four larger, swifter horses.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_2_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_2_name" value="Hidden"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_2_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_2_description" data-i18n-placeholder="description">Your hideout has a secret location and is disguised to hide it from view. If your hideout is discovered, use two downtime activities and pay Coin equal to your Tier to relocate it and hide it once again.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_3_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_3_name" value="Quarters"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_3_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_3_description" data-i18n-placeholder="description">Your hideout includes living quarters for the Posse. Without this upgrade, each PC sleeps elsewhere, and is vulnerable when they do so.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_4_check_1" value="1"/><span></span>
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_4_check_2" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_4_name" value="Secure"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_4_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_4_description" data-i18n-placeholder="description">Your hideout has locks, alarms, and traps to thwart intruders. A second upgrade improves the defences to include arcane measures that work against spirits, ghosts and maybe undead. You might roll your Posse’s Tier if these measures are ever put to the test, to see how well they thwart an intruder.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_5_check_1" value="1"/><span></span>
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_5_check_2" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_5_name" value="Vault"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_5_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_5_description" data-i18n-placeholder="description">Your hideout has a secure vault, increasing your storage capacity for Coin or Hellstone to 8. A second upgrade increases your capacity to 16. Note that for safe storage of Hellstone you have to get the 'Hellstone Storage' upgrade as well. A separate part of your vault can be used as a holding cell.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_6_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_6_name" value="Workshop"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_6_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_6_description" data-i18n-placeholder="description">Your hideout has a workshop appointed with tools for crafting, as well as a small library of books, documents, and maps. You may accomplish long-term projects with these assets without leaving your hideout.</textarea>
                </div>
              </div>
              <div class="col100">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_7_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_7_name" value="Escape Tunnel"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_7_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_7_description" data-i18n-placeholder="description">Your hideout has a hidden tunnel, its exit some distance away from your hideout. You may escape unseen if your hideout is under attack.</textarea>
                </div>
              </div>
              <div class="col100">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_8_check_1" value="1"/><span></span>
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_8_check_2" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_8_name" value="Hellstone Storage"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_8_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_8_description" data-i18n-placeholder="description">Your Storage and your Vault have proper Hellstone storage facilities. This does not give you extra capacities but makes the storing of Hellstone a safe proposition.</textarea>
                </div>
              </div>
              <div class="col100">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_9_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_9_name" value="Rail Connection"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_9_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_9_description" data-i18n-placeholder="description">Your hideout is accessible via a special rail track. If your hideout is also hidden this applies to your rail track as well.</textarea>
                </div>
              </div>
            <div class="item col100"><span class="label" data-i18n="quality"></span></div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_10_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_10_name" value="Documents"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_10_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_10_description" data-i18n-placeholder="description">+1 quality for Documents.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_11_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_11_name" value="Gear"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_11_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_11_description" data-i18n-placeholder="description">+1 quality for Gear.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_12_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_12_name" value="Implements"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_12_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_12_description" data-i18n-placeholder="description">+1 quality for Implements.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_13_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_13_name" value="Supplies"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_13_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_13_description" data-i18n-placeholder="description">+1 quality for Supplies.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_14_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_14_name" value="Weapons"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_14_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_14_description" data-i18n-placeholder="description">+1 quality for Weapons.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_15_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_15_name" value="Tools"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_15_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_15_description" data-i18n-placeholder="description">+1 quality for Tools.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_16_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_16_name" value="Horses"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_16_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_16_description" data-i18n-placeholder="description">+1 quality for horses.</textarea>
                </div>
              </div>
            <div class="col50">
              <div class="item">
                <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_17_check_1" value="1"/><span></span><span class="floatingbar"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_17_check_2" value="1"/><span></span><span class="floatingbar"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_17_check_3" value="1"/><span></span>
                <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_17_name" value="Hellstone"/>
              </div>
              <div class="item-description">
                <input class="expand" type="checkbox" name="attr_upgrade_17_expand" value="1"/><span></span>
                <textarea spellcheck="false" name="attr_upgrade_17_description" data-i18n-placeholder="description">Fine Hellstone is Hellstone that has been treated properly (some say wisely) during mining, processing, and storage etc. So it doesn’t fall under the ’Exploited Hellstone’ rule and does not generate Doom when sold.</textarea>
              </div>
            </div>
            <div class="item upgradecaption col100"><span class="label" data-i18n="training"></span></div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_20_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_20_name"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_20_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_20_description" data-i18n-placeholder="description"></textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_21_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_21_name" value="Prowess"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_21_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_21_description" data-i18n-placeholder="description">Earn 2 xp when training Prowess during downtime.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_22_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_22_name" value="Guts"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_22_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_22_description" data-i18n-placeholder="description">Earn 2 xp when training Guts during downtime.</textarea>
                </div>
              </div>
              <div class="col50">
                <div class="item">
                  <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_23_check_1" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_23_name" value="Personal"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_upgrade_23_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_upgrade_23_description" data-i18n-placeholder="description">Earn 2 xp when training playbook during downtime.</textarea>
                </div>
              </div>
            <div class="col100">
              <div class="item">
                <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_24_check_1" value="1"/><span></span><span class="floatingbar"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_24_check_2" value="1"/><span></span><span class="floatingbar"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_24_check_3" value="1"/><span></span><span class="floatingbar"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_24_check_4" value="1"/><span></span>
                <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_24_name" value="Mastery"/>
              </div>
              <div class="item-description">
                <input class="expand" type="checkbox" name="attr_upgrade_24_expand" value="1"/><span></span>
                <textarea spellcheck="false" name="attr_upgrade_24_description" data-i18n-placeholder="description">Your posse has access to master level training. You may advance your PCs' action ratings to 4 (until you unlock this upgrade, PC action ratings are capped at 3). This costs four upgrade boxes to unlock.</textarea>
              </div>
            </div>
          </div>
        </div>
        <div class="hunting-grounds col100 def-margin">
          <div class="auto-expand plainheader label"><span name="attr_hunting_grounds_type"></span>
            <textarea spellcheck="false" name="attr_hunting_grounds_type" data-i18n-placeholder="hunting_grounds"></textarea>
          </div>
          <div class="auto-expand description"><span name="attr_hunting_grounds_description"></span>
            <textarea spellcheck="false" name="attr_hunting_grounds_description" data-i18n-placeholder="hunting_grounds_description"></textarea>
          </div>
        </div>
        <button class="engagementbutton borderbutton" type="roll" name="roll_Engagement" value="&{template:bitd} {{charname=@{character_name}}} {{action=1}} {{short=1}} {{small-title=1}} {{subtitle=^{roll_for}}} {{title=^{engagement}}} @{numberofdice} {{charimage=@{chat_image}}} " data-i18n="roll_engagement"></button>
      </div>
      <!-- Cohorts and Contacts-->
      <div class="col47 right-column small-margin">
        <!-- First Cohort-->
        <div class="cohort">
          <input type="hidden" name="attr_cohort1_verb" value="^{roll_their}"/>
          <input type="hidden" name="attr_cohort1_roll_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
          <div class="cohort-title flex col100 label">
            <input class="inherit" type="text" spellcheck="false" name="attr_cohort1_name" value="Cohort"/>
            <button class="inherit rollbutton" type="roll" name="roll_cohort1_roll" value="&{template:bitd} {{charname=@{character_name}}} {{resist=1}} {{short=1}} {{charname=@{cohort1_name} (^{@{cohort1_type}}, @{cohort1_subtype})}} {{title=^{cohort_quality}}} {{subtitle=@{cohort1_verb}}}) @{cohort1_roll_formula} {{charimage=@{chat_image}}}" data-i18n="roll-inf"></button>
          </div>
          <div class="cohort-info flex col100 uppercase">
            <div class="cohort-dropdown">
              <div><span name="attr_cohort1_type" data-i18n-dynamic="data-i18n-dynamic"></span></div>
              <div>
                <input type="radio" name="attr_cohort1_type" value="gang" checked="checked"/><span data-i18n="gang"></span>
              </div>
              <div>
                <input type="radio" name="attr_cohort1_type" value="elite"/><span data-i18n="elite"></span>
              </div>
              <div>
                <input type="radio" name="attr_cohort1_type" value="expert"/><span data-i18n="expert"></span>
              </div>
            </div>
            <input class="sheet-inherit" type="text" spellcheck="false" name="attr_cohort1_subtype" data-i18n-placeholder="gang_type"/>
          </div>
          <div class="cohort-condition flex col100">
            <label><span class="cohort-condition-name uppercase" data-i18n="weak"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_cohort1_weak" value="1"/><span></span>
            </label>
            <label><span class="cohort-condition-name uppercase" data-i18n="impaired"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_cohort1_impaired" value="1"/><span></span>
            </label>
            <label><span class="cohort-condition-name uppercase" data-i18n="broken"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_cohort1_broken" value="1"/><span></span>
            </label>
            <label><span class="cohort-condition-name label" data-i18n="armor"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_cohort1_armor" value="1"/><span></span>
            </label>
          </div>
          <label class="cohort-edgeflaw"><span class="uppercase" data-i18n="edges"></span>
            <div class="auto-expand"><span name="attr_cohort1_edges"></span>
              <textarea spellcheck="false" name="attr_cohort1_edges"></textarea>
            </div>
          </label>
          <label class="cohort-edgeflaw"><span class="uppercase" data-i18n="flaws"></span>
            <div class="auto-expand"><span name="attr_cohort1_flaws"></span>
              <textarea spellcheck="false" name="attr_cohort1_flaws"></textarea>
            </div>
          </label>
          <textarea class="cohort-description" spellcheck="false" name="attr_cohort1_description"></textarea>
        </div>
        <!-- Cohort repeating section-->
        <div class="col100 cohorts free-repcontrol">
          <fieldset class="repeating_cohort">
            <div class="cohort">
              <input type="hidden" name="attr_verb" value="^{roll_their}"/>
              <input type="hidden" name="attr_roll_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <div class="cohort-title flex col100 label">
                <input class="inherit" type="text" spellcheck="false" name="attr_name" value="Cohort"/>
                <button class="inherit rollbutton" type="roll" name="roll_roll" value="&{template:bitd} {{charname=@{character_name}}} {{resist=1}} {{short=1}} {{charname=@{name} (^{@{type}}, @{subtype})}} {{title=^{cohort_quality}}} {{subtitle=@{verb}}}) @{roll_formula} {{charimage=@{chat_image}}}" data-i18n="roll-inf"></button>
              </div>
              <div class="cohort-info flex col100 uppercase">
                <div class="cohort-dropdown">
                  <div><span name="attr_type" data-i18n-dynamic="data-i18n-dynamic"></span></div>
                  <div>
                    <input type="radio" name="attr_type" value="gang" checked="checked"/><span data-i18n="gang"></span>
                  </div>
                  <div>
                    <input type="radio" name="attr_type" value="elite"/><span data-i18n="elite"></span>
                  </div>
                  <div>
                    <input type="radio" name="attr_type" value="expert"/><span data-i18n="expert"></span>
                  </div>
                </div>
                <input class="sheet-inherit" type="text" spellcheck="false" name="attr_subtype" data-i18n-placeholder="gang_type"/>
              </div>
              <div class="cohort-condition flex col100">
                <label><span class="cohort-condition-name uppercase" data-i18n="weak"></span>
                  <input class="tooth stresstooth" type="checkbox" name="attr_weak" value="1"/><span></span>
                </label>
                <label><span class="cohort-condition-name uppercase" data-i18n="impaired"></span>
                  <input class="tooth stresstooth" type="checkbox" name="attr_impaired" value="1"/><span></span>
                </label>
                <label><span class="cohort-condition-name uppercase" data-i18n="broken"></span>
                  <input class="tooth stresstooth" type="checkbox" name="attr_broken" value="1"/><span></span>
                </label>
                <label><span class="cohort-condition-name label" data-i18n="armor"></span>
                  <input class="tooth stresstooth" type="checkbox" name="attr_armor" value="1"/><span></span>
                </label>
              </div>
              <label class="cohort-edgeflaw"><span class="uppercase" data-i18n="edges"></span>
                <div class="auto-expand"><span name="attr_edges"></span>
                  <textarea spellcheck="false" name="attr_edges"></textarea>
                </div>
              </label>
              <label class="cohort-edgeflaw"><span class="uppercase" data-i18n="flaws"></span>
                <div class="auto-expand"><span name="attr_flaws"></span>
                  <textarea spellcheck="false" name="attr_flaws"></textarea>
                </div>
              </label>
              <textarea class="cohort-description" spellcheck="false" name="attr_description"></textarea>
            </div>
          </fieldset>
        </div>
        <!-- Contacts-->
        <div class="col100 def-margin contacts">
          <div class="specialheader col100 label flex">
            <input class="inherit" type="text" spellcheck="false" name="attr_contacts_title"/>
          </div>
          <div class="greyholder col100">
            <fieldset class="repeating_contact">
              <div class="friend-contact contact flex">
                <input class="friendstate" type="hidden" name="attr_check" value="0"/>
                <label>
                  <input class="checkbox" type="checkbox" name="attr_check" value="1"/><span></span>
                </label>
                <div class="auto-expand"><span name="attr_name"></span>
                  <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="contact_name"></textarea>
                </div>
              </div>
              <input class="expand" type="checkbox" name="attr_null" value="1"/><span></span>
              <textarea class="description" spellcheck="false" name="attr_description" data-i18n-placeholder="notes"></textarea>
            </fieldset>
          </div>
        </div>
        <!-- Roll Fortune-->
        <button class="fortunebutton borderbutton" type="roll" name="roll_Fortune_crew" value="&{template:bitd} {{charname=@{character_name}}} {{fortune=1}} {{subtitle=^{roll}}} {{title=^{fortune}}} @{numberofdice} {{charimage=@{chat_image}}} {{notes=@{notes_query}}} " data-i18n="roll_fortune"></button>
      </div>
      <!-- Clocks-->
      <div class="col100 clocks def-margin free-repcontrol">
        <div class="specialheader label" data-i18n="clocks"></div>
        <fieldset class="repeating_crewclock">
          <input class="size" type="hidden" name="attr_size" value=""/>
          <div class="auto-expand smallcaps"><span name="attr_name"></span>
            <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="clock_name"></textarea>
          </div>
          <button class="broadcast-button" type="roll" name="roll_Show" value="&{template:bitd-broadcast} {{charname=@{character_name}}} {{title=@{name}}} {{clock=1}} {{clocksize=@{size}}} {{clockprogress=@{progress}}} {{charimage=@{chat_image}}}" data-i18n-title="send_details_to_chat">:</button>
          <div class="size-choice">
            <label class="text-button">
              <input type="radio" name="attr_size" value="4"/><span>4</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="6"/><span>6</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="8"/><span>8</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="10"/><span>10</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="12"/><span>12</span>
            </label>
          </div>
          <div class="clock-container">
            <div class="spoke-0 all"></div>
            <div class="spoke-30 sheet-12clock"></div>
            <div class="spoke-45 sheet-8clock"></div>
            <div class="spoke-36 sheet-10clock"></div>
            <div class="spoke-60 sheet-6clock sheet-12clock"></div>
            <div class="spoke-72 sheet-10clock"></div>
            <div class="spoke-90 sheet-4clock sheet-8clock sheet-12clock"></div>
            <div class="spoke-108 sheet-10clock"></div>
            <div class="spoke-120 sheet-6clock sheet-12clock"></div>
            <div class="spoke-135 sheet-8clock"></div>
            <div class="spoke-144 sheet-10clock"></div>
            <div class="spoke-150 sheet-12clock"></div>
            <input class="zero input-progress" type="radio" name="attr_progress" value="0" checked="checked"/><span></span>
            <input class="input-progress all" type="radio" name="attr_progress" value="1"/>
            <input class="input-progress all" type="radio" name="attr_progress" value="2"/>
            <input class="input-progress all" type="radio" name="attr_progress" value="3"/>
            <input class="input-progress all" type="radio" name="attr_progress" value="4"/>
            <input class="input-progress sheet-6clock sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="5"/>
            <input class="input-progress sheet-6clock sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="6"/>
            <input class="input-progress sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="7"/>
            <input class="input-progress sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="8"/>
            <input class="input-progress sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="9"/>
            <input class="input-progress sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="10"/>
            <input class="input-progress sheet-12clock" type="radio" name="attr_progress" value="11"/>
            <input class="input-progress sheet-12clock" type="radio" name="attr_progress" value="12"/>
            <div class="clock"></div>
          </div>
        </fieldset>
      </div>
      <textarea class="notes" spellcheck="false" name="attr_crew_notes" data-i18n-placeholder="notes"></textarea>
    </div>
  </div>
  <!-- Faction Sheet-->
  <input class="input-clocks-only" type="hidden" name="attr_setting_clocks_only" value="0"/>
  <div class="type-faction flex-wrap">
    <div class="factiontitle flex col100">
      <input class="label" type="text" spellcheck="false" name="attr_factions_title" value="Factions of Mudwater &amp; Beyond"/>
      <input class="hider" type="hidden" name="attr_show_faction_generatebutton" value="1"/>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_factions" value="1"/><span data-i18n="generate_factions"></span>
      </label>
      <button class="fortunebutton borderbutton" type="roll" name="roll_Fortune_faction" value="&{template:bitd} {{charname=@{character_name}}} {{fortune=1}} {{title=^{fortune}}} {{short=1}} {{charname=}} @{numberofdice} {{charimage=@{chat_image}}} {{notes=@{notes_query}}} " data-i18n="roll_fortune"></button>
    </div>
    <div class="factions flex free-repcontrol">
      <div class="col33">
          <div class="factions-header flex uppercase">
            <input class="faction-name label" type="text" spellcheck="false" name="attr_factions1_header" value="Status Quo"/><span class="faction-tier" data-i18n="tier"></span><span class="faction-hold" data-i18n="hold"></span><span class="faction-status" data-i18n="status"></span>
          </div>
          <fieldset class="repeating_factions1">
            <div class="faction">
              <input class="expand" type="checkbox" name="attr_expand" value="1"/><span></span>
              <input class="faction-name" type="text" spellcheck="false" name="attr_name"/>
              <input class="faction-tier" type="text" spellcheck="false" name="attr_tier"/>
              <input class="faction-hold" type="text" spellcheck="false" name="attr_hold"/>
              <input class="faction-status" type="number" name="attr_status"/>
              <textarea spellcheck="false" name="attr_notes" data-i18n-placeholder="faction_notes"></textarea>
            </div>
          </fieldset>
      </div>
      <div class="col30">
          <div class="factions-header flex uppercase">
            <input class="faction-name label" type="text" spellcheck="false" name="attr_factions2_header" value="Newcomers"/><span class="faction-tier" data-i18n="tier"></span><span class="faction-hold" data-i18n="hold"></span><span class="faction-status" data-i18n="status"></span>
          </div>
          <fieldset class="repeating_factions2">
            <div class="faction">
              <input class="expand" type="checkbox" name="attr_expand" value="1"/><span></span>
              <input class="faction-name" type="text" spellcheck="false" name="attr_name"/>
              <input class="faction-tier" type="text" spellcheck="false" name="attr_tier"/>
              <input class="faction-hold" type="text" spellcheck="false" name="attr_hold"/>
              <input class="faction-status" type="number" name="attr_status"/>
              <textarea spellcheck="false" name="attr_notes" data-i18n-placeholder="faction_notes"></textarea>
            </div>
          </fieldset>
        <div class="warblurb def-margin">
          <div class="label" data-i18n="war"></div>
          <ul>
            <li class="nondot" data-i18n="warblurb1"></li>
            <li data-i18n="warblurb2"></li>
            <li data-i18n="warblurb3"></li>
            <li data-i18n="warblurb4"></li>
            <li data-i18n="warblurb5"></li>
          </ul>
        </div>
      </div>
      <div class="col36">
          <div class="specialheader label" data-i18n="locations_header1"></div>
          <fieldset class="repeating_locations">
            <div class="locationcard">
              <input type="text" spellcheck="false" name="attr_location-name" data-i18n-placeholder="Location Name"/>
              <textarea spellcheck="false" name="attr_notes" data-i18n-placeholder="Location Notes"></textarea>
              <div class="location-stats-row">
                <label data-i18n="wealth"></label>
                <input type="number" name="attr_wealth"/>
                <label data-i18n="law_order"></label>
                <input type="number" name="attr_law_order"/>
                <label data-i18n="outlaw_chaos"></label>
                <input type="number" name="attr_outlaw_chaos"/>
                <label data-i18n="supernatural"></label>
                <input type="number" name="attr_supernatural"/>
              </div>
            </div>
          </fieldset>
      </div>
    </div>
    <div class="clocks col55 free-repcontrol">
      <div class="specialheader label" data-i18n="clocks"></div>
      <fieldset class="repeating_factionclock">
        <input class="size" type="hidden" name="attr_size" value=""/>
        <div class="auto-expand smallcaps"><span name="attr_name"></span>
          <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="clock_name"></textarea>
        </div>
        <button class="broadcast-button" type="roll" name="roll_Show" value="&{template:bitd-broadcast} {{charname=@{character_name}}} {{title=@{name}}} {{clock=1}} {{clocksize=@{size}}} {{clockprogress=@{progress}}} {{charimage=@{chat_image}}}" data-i18n-title="send_details_to_chat">:</button>
        <div class="size-choice">
          <label class="text-button">
            <input type="radio" name="attr_size" value="4"/><span>4</span>
          </label>
          <label class="text-button">
            <input type="radio" name="attr_size" value="6"/><span>6</span>
          </label>
          <label class="text-button">
            <input type="radio" name="attr_size" value="8"/><span>8</span>
          </label>
          <label class="text-button">
            <input type="radio" name="attr_size" value="10"/><span>10</span>
          </label>
          <label class="text-button">
            <input type="radio" name="attr_size" value="12"/><span>12</span>
          </label>
        </div>
        <div class="clock-container">
          <div class="spoke-0 all"></div>
          <div class="spoke-30 sheet-12clock"></div>
          <div class="spoke-45 sheet-8clock"></div>
          <div class="spoke-36 sheet-10clock"></div>
          <div class="spoke-60 sheet-6clock sheet-12clock"></div>
          <div class="spoke-72 sheet-10clock"></div>
          <div class="spoke-90 sheet-4clock sheet-8clock sheet-12clock"></div>
          <div class="spoke-108 sheet-10clock"></div>
          <div class="spoke-120 sheet-6clock sheet-12clock"></div>
          <div class="spoke-135 sheet-8clock"></div>
          <div class="spoke-144 sheet-10clock"></div>
          <div class="spoke-150 sheet-12clock"></div>
          <input class="zero input-progress" type="radio" name="attr_progress" value="0" checked="checked"/><span></span>
          <input class="input-progress all" type="radio" name="attr_progress" value="1"/>
          <input class="input-progress all" type="radio" name="attr_progress" value="2"/>
          <input class="input-progress all" type="radio" name="attr_progress" value="3"/>
          <input class="input-progress all" type="radio" name="attr_progress" value="4"/>
          <input class="input-progress sheet-6clock sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="5"/>
          <input class="input-progress sheet-6clock sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="6"/>
          <input class="input-progress sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="7"/>
          <input class="input-progress sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="8"/>
          <input class="input-progress sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="9"/>
          <input class="input-progress sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="10"/>
          <input class="input-progress sheet-12clock" type="radio" name="attr_progress" value="11"/>
          <input class="input-progress sheet-12clock" type="radio" name="attr_progress" value="12"/>
          <div class="clock"></div>
        </div>
      </fieldset>
    </div>
    <div class="col45 right-column">
      <textarea class="notes" spellcheck="false" name="attr_faction_notes" data-i18n-placeholder="notes"></textarea>
    </div>
  </div>
</div>
<rolltemplate class="sheet-rolltemplate-bitd">
  <div class="holder{{#action}} action{{/action}}{{#resist}} resist{{/resist}}{{#vice}} vice{{/vice}}{{#fortune}} fortune{{/fortune}}{{#short}} short{{/short}}{{#action}}{{^position}} short{{/position}}{{/action}}">{{#charimage}}
    <div class="char-image">[Image]({{charimage}})</div>{{/charimage}}
    <div class="header{{#charimage}} narrow{{/charimage}}">{{charname}} {{subtitle}}</div>
    <div class="title"><span class="{{#small-title}}small-title{{/small-title}}">{{title}}</span></div>
    <div class="dice">{{^zerodice}}{{dice}}{{/zerodice}}{{#zerodice}}
      <div class="zerodice1">{{zerodice}}</div>
      <div class="zerodice2" data-i18n="zerodice"></div>{{/zerodice}}
    </div>{{#position}}
    <div class="position">{{position}}</div>{{/position}}{{#effect}}
    <div class="effect">{{effect}}</div>{{/effect}}{{#resist}}{{^short}}
    <div class="instructions" data-i18n="resist_instructions"></div>{{/short}}{{/resist}}{{#vice}}{{^short}}
    <div class="instructions" data-i18n="vice_instructions"></div>{{/short}}{{/vice}}{{#notes}}
    <div class="notes">{{notes}}</div>{{/notes}}
  </div>
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-bitd-broadcast">
  <div>{{#charimage}}{{^clock}}
    <div class="char-image">[Image]({{charimage}})</div>{{/clock}}{{/charimage}}
    <div class="header{{#charimage}}{{^clock}} narrow{{/clock}}{{/charimage}}">
      <div>{{charname}}</div>
      <div>{{type}}</div>
    </div>{{#content}}
    <div class="title">{{title}}</div>
    <div class="content">{{content}}</div>{{/content}}{{#clock}}
    <div class="flex">
      <div class="clock size-{{clocksize}} progress-{{clockprogress}}">
        <div class="spoke-0"></div>
        <div class="spoke-30"></div>
        <div class="spoke-36"></div>
        <div class="spoke-45"></div>
        <div class="spoke-60"></div>
        <div class="spoke-72"></div>
        <div class="spoke-90"></div>
        <div class="spoke-108"></div>
        <div class="spoke-135"></div>
        <div class="spoke-144"></div>
        <div class="spoke-120"></div>
        <div class="spoke-150"></div>
      </div>
      <div class="title">{{title}}</div>
    </div>{{/clock}}{{#harm}}
    <div class="title" data-i18n="harm"></div>
    <table class="harm">
      <tr>
        <td>3</td>
        <td>
          <div class="harm-inner">{{harm3}}</div>
        </td>
        <td data-i18n="need_help"></td>
      </tr>
      <tr>
        <td>2</td>
        <td>{{#harm2_1}}
          <div class="harm-inner">{{harm2_1}}</div>{{/harm2_1}}{{#harm2_2}}
          <div class="harm-inner">{{harm2_2}}</div>{{/harm2_2}}
        </td>
        <td data-i18n="minus1d"></td>
      </tr>
      <tr>
        <td>1</td>
        <td>{{#harm1_1}}
          <div class="harm-inner">{{harm1_1}}</div>{{/harm1_1}}{{#harm1_2}}
          <div class="harm-inner">{{harm1_2}}</div>{{/harm1_2}}
        </td>
        <td data-i18n="less_effect"></td>
      </tr>
    </table>{{/harm}}
  </div>
</rolltemplate>
<script type="text/worker">
"use strict";
const data = {
	"crew": {
		"hellstone_scavengers": {
			"base": {
				"claim_1_desc": "Hell's Own Light",
				"claim_1_name": "Dark",
				"claim_2_desc": "Spirit Well",
				"claim_2_name": "Neutral",
				"claim_3_desc": "The Map",
				"claim_3_name": "Neutral",
				"claim_4_desc": "The Great Law of Peace",
				"claim_4_name": "Light",
				"claim_5_desc": "Eternal Flame",
				"claim_5_name": "Light",
				"claim_6_desc": "Hellish Inventor",
				"claim_6_name": "Dark",
				"claim_7_desc": "Hellstone Claim",
				"claim_7_name": "Dark",
				"claim_9_desc": "The Mark of Beyond",
				"claim_9_name": "Light",
				"claim_10_desc": "Hellstone Claim",
				"claim_10_name": "Light",
				"claim_11_desc": "The Wyrm",
				"claim_11_name": "Dark",
				"claim_12_desc": "The Black Lake",
				"claim_12_name": "Dark",
				"claim_13_desc": "The Cornerstone",
				"claim_13_name": "Neutral",
				"claim_14_desc": "Hellstone Claim",
				"claim_14_name": "Neutral",
				"claim_15_desc": "The Gate",
				"claim_15_name": "Light",
				"claim_bridge_1_2": "0",
				"claim_bridge_2_7": "0",
				"claim_bridge_3_4": "0",
				"claim_bridge_5_10": "0",
				"claim_bridge_6_11": "0",
				"claim_bridge_9_14": "0",
				"claim_bridge_12_13": "0",
				"claim_bridge_14_15": "0",
				"crew_xp_condition": "crew_hellstone_scavengers_xp_condition",
				"hunting_grounds_type": "modus",
				"hunting_grounds_description": "SCAVENGE – MINING – SUPPLY – SALE",
				"upgrade_9_check_1": "1",
				"upgrade_22_check_1": "1"
			},
			"crewability": ["heigh_ho", "transporter", "dig_dug", "leverage", "got_used_to_the_strange_life", "undue_hellish_confidence", "patron", "veteran"],
			"upgrade": [{
				"name": "crew_upgrade_scavenger_rigging",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_elite_scouts",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_elite_movers",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_fine_carriages",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_steady",
				"numboxes": "3"
			}]
		},
		"outlaw_posse": {
			"base": {
				"claim_1_desc": "The Morgue",
				"claim_1_name": "Dark",
				"claim_2_desc": "Free Man Funeral",
				"claim_2_name": "Neutral",
				"claim_3_desc": "A Drop of Hell",
				"claim_3_name": "neutral",
				"claim_4_desc": "Loaded Dice",
				"claim_4_name": "Light",
				"claim_5_desc": "The Throne of Skulls",
				"claim_5_name": "Light",
				"claim_6_desc": "The Beast",
				"claim_6_name": "Dark",
				"claim_7_desc": "Hellstone Claim",
				"claim_7_name": "Dark",
				"claim_9_desc": "Last Deals of Dead Men",
				"claim_9_name": "Light",
				"claim_10_desc": "Hellstone Claim",
				"claim_10_name": "Light",
				"claim_11_desc": "Vengeful Ghosts",
				"claim_11_name": "Dark",
				"claim_12_desc": "Bringer of Pain",
				"claim_12_name": "Dark",
				"claim_13_desc": "Rail Connection",
				"claim_13_name": "Neutral",
				"claim_14_desc": "Hellstone Claim",
				"claim_14_name": "Neutral",
				"claim_15_desc": "Hanging Tree",
				"claim_15_name": "Light",
				"claim_bridge_1_2": "0",
				"claim_bridge_2_7": "0",
				"claim_bridge_3_4": "0",
				"claim_bridge_5_10": "0",
				"claim_bridge_6_11": "0",
				"claim_bridge_9_14": "0",
				"claim_bridge_12_13": "0",
				"claim_bridge_14_15": "0",
				"crew_xp_condition": "crew_outlaw_posse_xp_condition",
				"hunting_grounds_type": "modus",
				"hunting_grounds_description": "INTIMIDATION – SUPERIORITY – SWIFTNESS – SPECTACLE",
				"cohort1_subtype": "Thugs",
				"upgrade_21_check_1": "1"
			},
			"crewability": ["deadly_serious", "blood_brothers", "straightforward", "fiends", "forged_in_the_fire", "patron", "war_dogs", "veteran"],
			"upgrade": [{
				"name": "crew_upgrade_outlaw_rigging",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_elite_thugs",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_elite_movers",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_mobile_hideout",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_ruthless",
				"numboxes": "3"
			}]
		},
		"bounty_hunters": {
			"base": {
				"claim_1_desc": "The Tangled Web",
				"claim_1_name": "Dark",
				"claim_2_desc": "The Wild Hunt",
				"claim_2_name": "Neutral",
				"claim_3_desc": "Muddy Informants",
				"claim_3_name": "Neutral",
				"claim_4_desc": "Safe Passage",
				"claim_4_name": "Light",
				"claim_5_desc": "Undertaker",
				"claim_5_name": "Light",
				"claim_6_desc": "Biting Shadows",
				"claim_6_name": "Dark",
				"claim_7_desc": "Hellstone Claim",
				"claim_7_name": "Dark",
				"claim_9_desc": "Holy Weapon",
				"claim_9_name": "Light",
				"claim_10_desc": "Hellstone Claim",
				"claim_10_name": "Light",
				"claim_11_desc": "Death's Servant",
				"claim_11_name": "Dark",
				"claim_12_desc": "Unholy Weapon",
				"claim_12_name": "Dark",
				"claim_13_desc": "Secret Stash",
				"claim_13_name": "Neutral",
				"claim_14_desc": "Hellstone Claim",
				"claim_14_name": "Neutral",
				"claim_15_desc": "Wasted Bullet",
				"claim_15_name": "Light",
				"claim_bridge_1_2": "0",
				"claim_bridge_2_7": "0",
				"claim_bridge_3_4": "0",
				"claim_bridge_5_10": "0",
				"claim_bridge_6_11": "0",
				"claim_bridge_9_14": "0",
				"claim_bridge_12_13": "0",
				"claim_bridge_14_15": "0",
				"crew_description": "crew_bounty_hunters_description",
				"crew_xp_condition": "crew_bounty_hunters_xp_condition",
				"hunting_grounds_type": "modus",
				"hunting_grounds_description": "VIOLENCE – NEGOTIATION – CONNECTION – TRAP",
				"upgrade_5_check_1": "1",
				"upgrade_20_check_1": "1"
			},
			"crewability": ["bloundhounds", "a_walking_rogues_gallery", "life_line", "an_eye_for_it", "really_useful", "lucky_fellows", "patron", "veteran"],
			"upgrade": [{
				"name": "crew_upgrade_bounty_rigging",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_elite_rooks",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_elite_scouts",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_get_out_of_jail_free_card",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_hardened",
				"numboxes": "3"
			}]
		},
		"tribe": {
			"base": {
				"claim_1_desc": "The Broken Storm",
				"claim_1_name": "Dark",
				"claim_2_desc": "The Oracle",
				"claim_2_name": "Neutral",
				"claim_3_desc": "Guardian",
				"claim_3_name": "Neutral",
				"claim_4_desc": "Ancestor Spirits",
				"claim_4_name": "Light",
				"claim_5_desc": "Shadow of the Moon",
				"claim_5_name": "Light",
				"claim_6_desc": "The Bonding",
				"claim_6_name": "Dark",
				"claim_7_desc": "Hellstone Claim",
				"claim_7_name": "Dark",
				"claim_9_desc": "The Song of Buffalo",
				"claim_9_name": "Light",
				"claim_10_desc": "Hellstone Claim",
				"claim_10_name": "Light",
				"claim_11_desc": "Visions of End Time",
				"claim_11_name": "Dark",
				"claim_12_desc": "The Sea of Bones",
				"claim_12_name": "Dark",
				"claim_13_desc": "The Dance of Coyote",
				"claim_13_name": "Neutral",
				"claim_14_desc": "Hellstone Claim",
				"claim_14_name": "Neutral",
				"claim_15_desc": "Taming the Thunderbird",
				"claim_15_name": "Light",
				"claim_bridge_1_2": "0",
				"claim_bridge_2_7": "0",
				"claim_bridge_3_4": "0",
				"claim_bridge_5_10": "0",
				"claim_bridge_6_11": "0",
				"claim_bridge_9_14": "0",
				"claim_bridge_12_13": "0",
				"claim_bridge_14_15": "0",
				"crew_description": "crew_tribe_description",
				"crew_xp_condition": "crew_tribe_xp_condition",
				"hunting_grounds_type": "modus",
				"hunting_grounds_description": "SHOW OF FORCE – SWIFTNESS – SOCIAL - SACRIFICE ",
				"upgrade_3_check_1": "1",
				"upgrade_20_check_1": "1"
			},
			"crewability": ["watchers", "into_the_burning_beyond", "horseback_is_home", "one_with_the_land", "one_with_the_people", "stalkers_of_demons", "theyre_with_us", "veteran"],
			"upgrade": [{
				"name": "crew_upgrade_tribe_rigging",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_elite_scouts",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_elite_movers",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_gateway_to_the_burning_beyond",
				"numboxes": "1"
			}, {
				"name": "crew_upgrade_hardened",
				"numboxes": "3"
			}]
		}		
	},
	"playbook": {
        "the_fist": {
			"numberOfFriends": 5,
            "ability": ["is_that_all_you_got", "everybodys_kung_fu_fighting", "where_does_that_come_from", "st_anger", "health_is_better_than_wealth", "man_of_honor", "bad_ass_kata", "veteran"],
            "base": {
				"sling": "1",
				"prowl": "1",
				"brawl": "1",
				"gatherinfo1": "gatherinfo_how_can_i_hurt_them",
				"gatherinfo2": "gatherinfo_whos_most_afraid_of_me",
				"gatherinfo3": "gatherinfo_whos_most_dangerous_here",
				"gatherinfo4": "gatherinfo_what_do_they_intend_to_do",
				"gatherinfo5": "gatherinfo_how_can_i_get_them_to_x",
				"gatherinfo6": "gatherinfo_are_they_telling_the_truth",
				"playbook_description": "playbook_the_fist_description",
				"xp_condition": "playbook_the_fist_xp_condition"
            },
            "playbookitem": [{
				"name": "playbook_item_fine_hand_weapon",
				"description": "playbook_item_fine_hand_weapon_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_fine_heavy_weapon",
				"description": "playbook_item_fine_heavy_weapon_description",
				"numboxes": "2"
			}, {
				"name": "playbook_item_scary_weapon_or_tool",
				"description": "playbook_item_scary_weapon_or_tool_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_picture_of_a_lost_love",
				"description": "playbook_item_picture_of_a_lost_love_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_bottle_of_whiskey",
				"description": "playbook_item_bottle_of_whiskey_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_pack_of_bandages",
				"description": "playbook_item_pack_of_bandages_description",
				"numboxes": "1"
			}]
        },
        "the_shot": {
			"numberOfFriends": 5,
            "ability": ["smoke_and_mirrors", "fancy_dead_eye", "eastwood", "lightning_nerves_of_steal", "silver_bullets", "fill_the_air_with_lead", "stunning_performance", "veteran"],
            "base": {
				"sling": "2",
				"sway": "1",
				"gatherinfo1": "gatherinfo_where_is_the_critical_point",
				"gatherinfo2": "gatherinfo_whos_most_impressed_by_me",
				"gatherinfo3": "gatherinfo_what_do_they_intend_to_do",
				"gatherinfo4": "gatherinfo_how_can_i_get_them_to_x",
				"gatherinfo5": "gatherinfo_where_are_they_vulnerable",
				"gatherinfo6": "gatherinfo_what_do_they_expect",
				"playbook_description": "playbook_the_shot_description",
				"xp_condition": "playbook_the_shot_xp_condition"
            },
            "playbookitem": [{
				"name": "playbook_item_fine_and_flashy_pair_of_pistols",
				"description": "playbook_item_fine_and_flashy_pair_of_pistols_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_fine_rifle",
				"description": "playbook_item_fine_rifle_description",
				"numboxes": "2"
			}, {
				"name": "playbook_item_lightning_a_fine_horse",
				"description": "playbook_item_lightning_a_fine_horse_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_special_ammunition",
				"description": "playbook_item_special_ammunition_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_fine_disguise_kit",
				"description": "playbook_item_fine_disguise_kit_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_a_message_from_an_admirer",
				"description": "playbook_item_a_message_from_an_admirer_description",
				"numboxes": "0"
			}]
        },
        "the_law": {
			"numberOfFriends": 5,
            "ability": ["i_am_the_law", "a_story_to_tell", "this_aint_no_coon_hunt", "what_your_country_can_do_for_you", "s_only_a_flesh_wound", "moral_compass", "tactical_genius", "veteran"],
            "base": {
				"hunt": "1",
				"brawl": "1",
				"command": "1",
				"gatherinfo1": "gatherinfo_who_is_really_in_charge_here",
				"gatherinfo2": "gatherinfo_whos_the_most_lawabiding_here",
				"gatherinfo3": "gatherinfo_what_do_they_intend_to_do",
				"gatherinfo4": "gatherinfo_how_can_i_get_them",
				"gatherinfo5": "gatherinfo_who_should_i_look_out_for",
				"gatherinfo6": "gatherinfo_how_can_i_hurt_them",
				"playbook_description": "playbook_the_law_description",
				"xp_condition": "playbook_the_law_xp_condition"
            },
            "playbookitem": [{
				"name": "playbook_item_fine_pair_of_pistols",
				"description": "playbook_item_fine_pair_of_pistols_description",
				"numboxes": "2"
			}, {
				"name": "playbook_item_fine_shotgun",
				"description": "playbook_item_fine_shotgun_description",
				"numboxes": "2"
			}, {
				"name": "playbook_item_badge_of_authority",
				"description": "playbook_item_badge_of_authority_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_fine_documents",
				"description": "playbook_item_fine_documents_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_manacle_and_chains",
				"description": "playbook_item_manacle_and_chains_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_a_keepsake",
				"description": "playbook_item_a_keepsake_description",
				"numboxes": "0"
			}]
        },
        "the_gamble": {
			"numberOfFriends": 5,
            "ability": ["all_eyes_on_me", "gamblers_gift", "cutting_cards", "heart_of_the_cards", "fight_with_panache", "saloon_swagger", "miss_fortune", "veteran"],
            "base": {
				"sling": "1",
				"consort": "1",
				"sway": "1",
				"gatherinfo1": "gatherinfo_what_do_they_intend_to_do",
				"gatherinfo2": "gatherinfo_how_can_i_get_them_to_x",
				"gatherinfo3": "gatherinfo_are_they_telling_the_truth",
				"gatherinfo4": "gatherinfo_what_are_they_not_noticing",
				"gatherinfo5": "gatherinfo_what_do_they_really_care_about",
				"gatherinfo6": "gatherinfo_how_can_i_stand_out_here",
				"playbook_description": "playbook_the_gamble_description",
				"xp_condition": "playbook_the_gamble_xp_condition"
            },
            "playbookitem": [{
				"name": "playbook_item_fine_extravagant_melee_weapon",
				"description": "playbook_item_fine_extravagant_melee_weapon_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_fine_playing_cards_and_dice",
				"description": "playbook_item_fine_playing_cards_and_dice_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_fine_clothes_and_jewelry",
				"description": "playbook_item_badge_of_authority_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_a_set_of_won_valuable_documents",
				"description": "playbook_item_a_set_of_won_valuable_documents_description",
				"numboxes": "1"
			}, {
				"name": "playbook_a_fine_story",
				"description": "playbook_a_fine_story_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_a_small_token_of_luck",
				"description": "playbook_item_a_small_token_of_luck_description",
				"numboxes": "0"
			}]
        },
        "the_scout": {
			"numberOfFriends": 5,
            "ability": ["darken_than_the_shadows", "silent_hunter", "survivor", "learned_my_trade_from_the_best", "youre_my_game", "like_a_brother", "see_another_day", "listen_to_the_land", "veteran"],
            "base": {
				"hunt": "2",
				"prowl": "1",
				"gatherinfo1": "gatherinfo_what_is_the_best_path",
				"gatherinfo2": "gatherinfo_what_is_hidden_or_lost_here",
				"gatherinfo3": "gatherinfo_how_where_can_i_discover_x",
				"gatherinfo4": "gatherinfo_who_what_is_most_dangerous_here",
				"gatherinfo5": "gatherinfo_who_should_i_look_out_for",
				"gatherinfo6": "gatherinfo_how_will_the_environment_change",
				"playbook_description": "playbook_the_scout_description",
				"xp_condition": "playbook_the_scout_xp_condition"
            },
            "playbookitem": [{
				"name": "playbook_item_fine_hunting_knife",
				"description": "playbook_item_fine_hunting_knife_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_fine_rifle_or_bow",
				"description": "playbook_item_fine_rifle_or_bow_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_fine_leather_clothes",
				"description": "playbook_item_fine_leather_clothes_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_traps",
				"description": "playbook_item_traps_description",
				"numboxes": "2"
			}, {
				"name": "playbook_item_fine_horse_with_saddle",
				"description": "playbook_item_fine_horse_with_saddle_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_outdoor_survival_kit",
				"description": "playbook_item_outdoor_survival_kit_description",
				"numboxes": "1"
			}]
        },
        "the_outlaw": {
			"numberOfFriends": 6,
            "ability": ["one_of_those_days", "now_now_now", "didnt_saw_that_coming", "daredevil", "vengeful", "some_fine_reputation", "blaze_of_glory", "veteran"],
            "base": {
				"survey": "1",
				"sling": "1",
				"brawl": "1",
				"gatherinfo1": "gatherinfo_where_are_they_it_vulnerable",
				"gatherinfo2": "gatherinfo_where_should_i_go_flee",
				"gatherinfo3": "gatherinfo_how_can_i_discover_x",
				"gatherinfo4": "gatherinfo_who_is_most_dangerous_here",
				"gatherinfo5": "gatherinfo_what_should_i_look_out_for",
				"gatherinfo6": "gatherinfo_what_might_happen_if_i_x",
				"playbook_description": "playbook_the_outlaw_description",
				"xp_condition": "playbook_the_outlaw_xp_condition"
            },
            "playbookitem": [{
				"name": "playbook_item_a_fine_pistol",
				"description": "playbook_item_a_fine_pistol_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_a_fine_rifle_or_shotgun",
				"description": "playbook_item_a_fine_rifle_or_shotgun_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_a_fine_poncho_or_sombrero",
				"description": "playbook_item_a_fine_poncho_or_sombrero_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_a_guitar_case",
				"description": "playbook_item_a_guitar_case_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_a_fine_spirit_bane",
				"description": "playbook_item_a_fine_spirit_bane_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_a_small_piece_of_hellstone",
				"description": "playbook_item_a_small_piece_of_hellstone_description",
				"numboxes": "0"
			}]
        },
        "the_thunderheart": {
			"numberOfFriends": 5,
            "ability": ["guided_by_the_totem", "totems_vessel", "protector_of_the_people", "a_devil_with_a_blade", "gruesome_warpaint", "totem_sense", "lone_wolf", "veteran"],
            "base": {
				"attune": "1",
				"survey": "1",
				"prowl": "1",
				"gatherinfo1": "gatherinfo_what_happened_here_recently",
				"gatherinfo2": "gatherinfo_what_do_the_spirits_counsel",
				"gatherinfo3": "gatherinfo_how_can_i_discover_x",
				"gatherinfo4": "gatherinfo_how_can_i_get_to_place_x",
				"gatherinfo5": "gatherinfo_what_should_i_look_out_for",
				"gatherinfo6": "gatherinfo_where_should_i_strike",
				"playbook_description": "playbook_the_thunderheart_description",
				"xp_condition": "playbook_the_thunderheart_xp_condition"
            },
            "playbookitem": [{
				"name": "playbook_item_fine_bow_with_arrows",
				"description": "playbook_item_fine_bow_with_arrows_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_fine_weapon",
				"description": "playbook_item_fine_weapon_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_spirit_bane_or_charm",
				"description": "playbook_item_spirit_bane_or_charm_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_outdoor_survival_kit",
				"description": "playbook_item_outdoor_survival_kit_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_taboco_poison_medicine",
				"description": "playbook_item_taboco_poison_medicine_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_a_totems_gift",
				"description": "playbook_item_a_totems_gift_description",
				"numboxes": "1"
			}]
        },
        "the_speaker": {
			"numberOfFriends": 5,
            "ability": ["walk_through_the_valley", "shepherd", "a_dogs_nose", "hallow", "curandero", "eli", "premonition", "veteran"],
            "base": {
				"read": "1",
				"attune": "1",
				"consort": "1",
				"gatherinfo1": "gatherinfo_what_do_i_covet",
				"gatherinfo2": "gatherinfo_how_can_i_help_them_confess",
				"gatherinfo3": "gatherinfo_where_lies_the_corruption",
				"gatherinfo4": "gatherinfo_what_do_they_intend_to_do",
				"gatherinfo5": "gatherinfo_what_can_i_trust_them_to_do",
				"gatherinfo6": "gatherinfo_are_they_telling_the_truth",
				"playbook_description": "playbook_the_speaker_description",
				"xp_condition": "playbook_the_speaker_xp_condition"
            },
            "playbookitem": [{
				"name": "playbook_item_symbol_of_your_faith",
				"description": "playbook_item_symbol_of_your_faith_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_instrument_of_your_faith",
				"description": "playbook_item_instrument_of_your_faith_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_blessed_implements_for_a_ritual",
				"description": "playbook_item_blessed_implements_for_a_ritual_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_a_confession_of_old",
				"description": "playbook_item_a_confession_of_old_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_fine_garments_of_ceremony",
				"description": "playbook_item_fine_garments_of_ceremony_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_concealed_palm_pistol_or_blade",
				"description": "playbook_item_concealed_palm_pistol_or_blade_description",
				"numboxes": "1"
			}]
        },
        "the_plan": {
			"numberOfFriends": 6,
            "ability": ["god_save_me_from_friends", "foresight", "planning_is_everything", "runs_in_the_family", "weaving_the_web", "old_friends_everywhere", "fingers_in_every_pie", "veteran"],
            "base": {
				"read": "1",
				"consort": "2",
				"gatherinfo1": "gatherinfo_what_do_they_want_most",
				"gatherinfo2": "gatherinfo_what_should_i_look_out_for",
				"gatherinfo3": "gatherinfo_wheres_the_leverage_here",
				"gatherinfo4": "gatherinfo_how_can_i_get_x",
				"gatherinfo5": "gatherinfo_what_do_they_intend_to_do",
				"gatherinfo6": "gatherinfo_how_can_i_get_them_to_x",
				"playbook_description": "playbook_the_plan_description",
				"xp_condition": "playbook_the_plan_xp_condition"
            },
            "playbookitem": [{
				"name": "playbook_item_a_concealed_hold_out_pistol",
				"description": "playbook_item_a_concealed_hold_out_pistol_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_fine_status_symbol",
				"description": "playbook_item_fine_status_symbol_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_fine_documents",
				"description": "playbook_item_fine_documents_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_blackmail_information",
				"description": "playbook_item_blackmail_information_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_fine_ornamented_carriage",
				"description": "playbook_item_fine_ornamented_carriage_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_spirit_charm",
				"description": "playbook_item_spirit_charm_description",
				"numboxes": "0"
			}]
        },
        "the_gentle_touch": {
			"numberOfFriends": 5,
            "ability": ["snakeoil_miracles", "influential", "little_vultures", "well_travelled", "fandango", "quick_witted", "viper", "in_good_hands", "veteran"],
            "base": {
				"read": "2",
				"consort": "1",
				"gatherinfo1": "gatherinfo_what_should_i_look_out_for",
				"gatherinfo2": "gatherinfo_what_do_they_intend_to_do",
				"gatherinfo3": "gatherinfo_what_is_foreign_or_weird_here",
				"gatherinfo4": "gatherinfo_how_can_i_ease_their_suffering",
				"gatherinfo5": "gatherinfo_what_is_hidden_or_lost_here",
				"gatherinfo6": "gatherinfo_how_can_i_use_to_my_advantage",
				"playbook_description": "playbook_the_gentle_touch_description",
				"xp_condition": "playbook_the_gentle_touch_xp_condition"
            },
            "playbookitem": [{
				"name": "playbook_item_fine_concealed_palm_pistol",
				"description": "playbook_item_fine_concealed_palm_pistol_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_fine_bedside_manners",
				"description": "playbook_item_fine_bedside_manners_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_fine_doctors_bag_and_apron",
				"description": "playbook_item_fine_doctors_bag_and_apron_description",
				"numboxes": "2"
			}, {
				"name": "playbook_item_fine_and_very_strong_cough_syrup",
				"description": "playbook_item_fine_and_very_strong_cough_syrup_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_a_comforting_song",
				"description": "playbook_item_a_comforting_song_description",
				"numboxes": "0"
			}, {
				"name": "playbook_item_an_old_favor",
				"description": "playbook_item_an_old_favor_description",
				"numboxes": "0"
			}]
        },
        "the_wrench_and_saw": {
			"numberOfFriends": 5,
            "ability": ["driven", "skillful", "mad_scientist", "spiritmancer", "listening_to_their_voices", "speaking_their_tongue", "blood_sweat_and_gears", "right_time_right_tool", "veteran"],
            "base": {
				"craft": "2",
				"disable": "1",
				"gatherinfo1": "gatherinfo_what_here_is_talking_to_me",
				"gatherinfo2": "gatherinfo_how_can_i_get_them_to_x",
				"gatherinfo3": "gatherinfo_are_they_telling_the_truth",
				"gatherinfo4": "gatherinfo_what_can_i_improve_here",
				"gatherinfo5": "gatherinfo_might_happen_if_i_x",
				"gatherinfo6": "gatherinfo_how_can_i_find_x",
				"playbook_description": "playbook_the_wrench_and_saw_description",
				"xp_condition": "playbook_the_wrench_and_saw_xp_condition"
            },
            "playbookitem": [{
				"name": "playbook_item_fine_crafting_tools",
				"description": "playbook_item_fine_crafting_tools_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_fine_experimental_rifle",
				"description": "playbook_item_fine_experimental_rifle_description",
				"numboxes": "2"
			}, {
				"name": "playbook_item_fine_useful_parts",
				"description": "playbook_item_fine_useful_parts_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_hellstone_googles",
				"description": "playbook_item_hellstone_googles_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_an_unopened_box",
				"description": "playbook_item_an_unopened_box_description",
				"numboxes": "1"
			}, {
				"name": "playbook_item_a_disturbing_truth",
				"description": "playbook_item_a_disturbing_truth_description",
				"numboxes": "0"
			}]
        },
        "the_revenant": {
			"numberOfFriends": 0,
            "ability": ["one_step_beyond", "angel_of_vengeance", "touched_by_the_burning_beyond", "hellfire_torch", "unholy_mount", "like_johan", "superiority", "veteran_revenant"],
            "base": {
				"hunt": "1",
				"attune": "1",
				"gatherinfo1": "gatherinfo_what_do_they_want_most",
				"gatherinfo2": "gatherinfo_who_here_is_guilty",
				"gatherinfo3": "gatherinfo_whats_supernatural_here",
				"gatherinfo4": "gatherinfo_how_can_i_get_x",
				"gatherinfo5": "gatherinfo_what_do_they_fear",
				"gatherinfo6": "gatherinfo_how_can_i_get_them_to_x",
				"playbook_description": "playbook_the_revenant_description",
				"xp_condition": "playbook_the_revenant_xp_condition"
            },
            "playbookitem": [{
				"name": "playbook_item_a_memento",
				"description": "playbook_item_a_memento_description",
				"numboxes": "0"
			}]
        }
    },
	"factions": {
		"factions1": [{
			"name": "faction_the_8th_cavalry",
			"tier": "IV",
			"hold": "W",
			"notes": "Busy fighting native war parties lately and trying to cover lots of coach and train lines to prevent attacks. Not easy for them to come to Mudwater because the tribes are paying serious attention especially if the troop is bigger than a few soldiers. Eager to put those natives into their place. Rumors about getting new supplies from the Capital City, including better weapons & some kind of other 'support'. What is certain is that - thanks to good pay for the officers - they work mainly for 'economic interests', at least as long as the money's right."
		}, {
			"name": "faction_ironware_metal_goods",
			"tier": "III",
			"hold": "S",
			"notes": "The top dog of licensed Hellstone mining companies in Mudwater. Grew really quick thanks to the new trade and ruthless methods. Some rumors about staff members being corrupt and big chunks of Hellstone slipping through the cracks. Managed by Philomena Standish, the wife of bank director Barnabas Standish."
		}, {
			"name": "faction_northern_rail_transport",
			"tier": "III",
			"hold": "S",
			"notes": "The bigger rail company trying to make progress with their railroad connection. Owner Jefferson Caulfield and his brother Franklin are fighting for the exclusive gov’ment contract and quick to complain at Fort Hubert if their trains or workers are attacked. Lately the 8th Cavalry has been slow to respond when these calls for help come in.  Malicious gossip has it that this may have something to do with the new East-West connection."
		}, {
			"name": "faction_the_thunder_raven_tribe",
			"tier": "III",
			"hold": "S",
			"notes": "One of the bigger local native tribes said to have the strongest and most advanced Hellstone-powered medicine. Guided by a powerful raven totem, they make great advancements and skillfully combine ancient rituals with their new Hellstone energy. They like to attack under the cover of nightly darkness, often supported by thunderstorm and spirits of nature. Gray eminence behind Chief Good Hunter is the shaman The Old One. Friends since childhood days, nowadays they do not always share the same opinion about what is the right way for the tribe."
		}, {
			"name": "faction_fells_wargo",
			"tier": "III",
			"hold": "W",
			"notes": "Similar to the Pony Express, all carriages of Fells & Wargo are licensed for deliveries into native territory and Mudwater. Currently a fierce competition with the Express results into several carriages ambushed, missing or lost. People say that the Thunder Raven Tribe is responsible for those incidents with the Pony Express as beneficiary. Led by Seth Tibbot, who considers himself a friendly person, an opinion shared by only a few others. Pays good money for solid leads that connect to the Thunder Ravens."
		}, {
			"name": "faction_horizon_credit_union",
			"tier": "III",
			"hold": "W",
			"notes": "Biggest bank in Mudwater with breathtaking profits through financing Hellstone mines and other daring and high risk enterprises. Director Barnabas P. Standish is father-in-law to Mayor Walter Smith and husband to Philomena Standish. Standish is often seen at the House of Roses for 'business activities'."
		}, {
			"name": "faction_good_health_association",
			"tier": "III",
			"hold": "W",
			"notes": "Inconspicuous private organization with a solid membership among the prestigious citizens of the city. Public goal is the advancement of the common good: Hardly any event happens in the city without approval of Good Health. Only the inner circle (calling itself the 'Knights of Solomon') knows the real goal, but no one’s talking and membership of the inner circle is highly exclusive. Some rumors about secret places and rituals in the wild, purpose unknown. Investing into new, weird and unconventional research."
		}, {
			"name": "faction_eastwest_rail",
			"tier": "II",
			"hold": "S",
			"notes": "Smaller and more aggressive rail company in Mudwater. Sometimes it seems that it’s more important to them to sabotage Northern Rail & Transport than to make progress with their own tracks. Also fighting for the exclusive gov’ment contract. Headed by Ruth McCoy, dealing in contraband and illegal Hellstone."
		}, {
			"name": "faction_diamond_trust",
			"tier": "II",
			"hold": "S",
			"notes": "Playing the second fiddle, 'The Trust' is taking the back seat in financing the secondary businesses like diamonds or gold mines. It’s only a matter of time before director Arthur Peabody draws on his shady past and some unconventional methods to disturb the family ties between the city and his competition."
		}, {
			"name": "faction_the_pony_express",
			"tier": "II",
			"hold": "S",
			"notes": "'The Express' is licensed for deliveries into the native territory and Mudwater. Lately under much pressure from competitor Fells & Wargo, because a single rider can only transport a small amount of Hellstone at a time. They are usually much faster, if the rider doesn’t vanish or dies from mutation or other cause."
		}, {
			"name": "faction_the_twins",
			"tier": "II",
			"hold": "S",
			"notes": "Horatio and Ulysses Jones escaped from state prison only recently and are newcomers in town. Despite their short presence in Mudwater they already built some real clout due to their very aggressive methods. Rumors about them being a gang with 'unholy obligation & payback in Hell' are surely exaggerated."
		}, {
			"name": "faction_the_inquisition",
			"tier": "II",
			"hold": "S",
			"notes": "They claim to be sent by His Holiness the Pope himself for the salvation of the true believers. And they have a fancy official certificate to prove it. Only the Head Inquisitor 'Michael' is known by face and name, all other Inquisitors are always hooded. Is there a terrible secret hidden beneath those hoods? How many of them are there? Relationships to town officials, local church and nearly everybody else in Mudwater are tense. Michael may pay bounties for killed demons as long as you can prove the kill somehow."
		}, {
			"name": "faction_mr_wongs_family_business",
			"tier": "II",
			"hold": "S",
			"notes": "Not only the Classic chinese laundry but other 'business' as well. At least three generations of Wongs doing their duty in this family business. Head of the family is Wong Cheng, age well beyond 80, who came with his three sons Lu, Ha and Tuan and their wives into the country. They were offered no mercy on their path and therefore they tend to show none either. Rumors about mysterious ways like sticking needles into bodies and other blood magic were heard. Fact is that competitors tend to disappear when they get too cocky. Having an eye on the House of Roses."
		}, {
			"name": "faction_the_house_of_roses",
			"tier": "II",
			"hold": "S",
			"notes": "Aunt Polly owns the best whorehouse in town. Young, old, boys, girls? You name it, she has it and plenty of it, more than you need. She does not only trade in sinful pleasures of the flesh but has a solid side business of dealing in secrets. Many of them are revealed, traded, whitewashed and 'forgotten' in Polly’s house, for a reasonable 'fee' of course. Lately, she prevented a hostile and bloddy takeover attempt executed by the Wong family. After some struggle both sides agreed on a peaceful cooperation ... for now."
		}, {
			"name": "faction_fine_energy_enterprise",
			"tier": "II",
			"hold": "W",
			"notes": "Headed by John Cusack, brother to Philomena Standish, 'the Enterprise' is the second largest Hellstone buyer in Mudwater. Trying to provide what they think is clean energy for new technology. Is very curious about I&MG’s plan about a Hellstone refinery and more than willing to pay good money for that kind of information. Investing in new claims, sabotage and anything that could bring an advantage. Cusack's sick of being just the little brother and he's got something to prove."
		}, {
			"name": "faction_lord_dorian_lockwoodtate",
			"tier": "II",
			"hold": "W",
			"notes": "An English Earl (so it is said) being in the country for wealth and to bring fine arts to the people. That’s what he would say if asked. Rumors have it that he had to leave England with his butler Alfred in a hurry after he hammered a stake into the heart of an alleged vampire / fellow English man. Splendid. May be wealthy, but this is hard to say. Had a run-in recently with the Good Health Association about that Shakespeare performance at Bell Saloon."
		}, {
			"name": "faction_first_church_of_saint_michael",
			"tier": "II",
			"hold": "W",
			"notes": "Father Ike used to be the will of the Lord until the Inquisition showed up. Has still some clout with the people but his hold is weakened. A notorious drunk he first doesn’t seem to care but lately his sermons tend to focus on false prophets and religious zealots on their way to Hell. Especially those calling themselves 'Michael'. Some say he listens to the voices of angels who tell him what to do and who urge him on. You got to love his energy!"
		}, {
			"name": "faction_rattlesnake_gang",
			"tier": "I",
			"hold": "S",
			"notes": "The inner circle of the gang consists of family Burns, headed by Edwina Burns since her husband Rufus died approximately a year ago. Edwina is convinced that her husband will be back, not only soon but also alive. That may explain why she’s always in company of a coffin in which the mortal remains of Rufus should rest. Primary mean of the gang to earn money are robberies, but recently also individual acquisitions of strange materials. The latter seem to be for personal use."
		}, {
			"name": "faction_the_shadow_valley_gang",
			"tier": "I",
			"hold": "S",
			"notes": "Outlaw posse with hideout somewhere in the Shadow Valley. Rumored to be headed by a group of sisters of unknown origin. The posse is a tight-knit gang committed to absolute secrecy. The fact that a caught member who tried to brag died from spontaneous combustion strengthened the rumor that the gang is also a dark cult. Searching for artifacts lately. The only known contacts in town are Hector Martínez and his sister Alva. They haven't been seen in Mudwater for quite some time."
		}, {
			"name": "faction_explorers_society",
			"tier": "I",
			"hold": "S",
			"notes": "Wild mixture of east coast professors / scholars and adventurers claiming to explore the mines and caves to find out more about Hellstone and the event which made Hellstone happen. Also known to sell found artifacts on the black market. Buying and hoarding Hellstone for an unknown purpose."
		}, {
			"name": "faction_the_mother_of_bones",
			"tier": "I",
			"hold": "S",
			"notes": "A mysterious creature from the Burning Beyond. Her goal seems to be merging of spirits and demons. For what purpose is unknown. Also unknown is what the Mother actually is. Is she a demon who was driven out of Hell? Is she a spirit that no longer finds acceptance among her kind? Is she already such a merged being now trying to preserve her species? It is evident that she needs allies to survive in the physical world. Without allies she is not yet able to give birth to her offspring. What does she has to offer? Who would get involved with her? Who would call her ’Mother’?"
		}, {
			"name": "faction_the_black_rider",
			"tier": "I",
			"hold": "W",
			"notes": "Supposedly an undead law man reverted from Hell to take revenge. Who did him wrong is not known. What it was about or other goals or motives are also unknown. Often accompanied by a native shaman and it’s not always clear whether the Black Rider himself or the shaman is the driving force in this vendetta."
		}, {
			"name": "faction_miners_union",
			"tier": "I",
			"hold": "W",
			"notes": "Some desperate souls trying to give the hard working and risk taking men and women in the mines what they deserve. Maybe desperate enough to take some unconventional actions. Headed by Gus Cochran and sister Rachel, trying to make up his mind about his Lordship. Waiting for support from the Capital City."
		}, {
			"name": "faction_southern_refugees",
			"tier": "I",
			"hold": "W",
			"notes": "Lots of families trying to have a better life here than down in the South. Fat chance with those all those demons and town folks eying them suspiciously. Very religious and superstitious. Often divided about what’s right and wrong, with much debating and solo efforts by single persons or families."
		}, {
			"name": "faction_native_tribes_from_session_one",
			"tier": "I/II",
			"hold": "S/W"
		}]
	},
	"actions": {
		"wits": ["hunt", "read", "survey", "craft"],
		"prowess": ["sling", "prowl", "brawl", "disable"],
		"guts": ["attune", "command", "consort", "sway"]
	},
	"traumas": ["scarred", "corrupted", "visions", "gloryhound", "voices", "cursed", "numb", "hunted", "shamed"],
	"items": [{
		"name": "a_pistol",
		"description": "a_pistol_description",
		"numboxes": "1",
		"short": "1"
	}, {
		"name": "a_2nd_pistol",
		"description": "a_pistol_description",
		"numboxes": "1",
		"short": "2"
	}, {
		"name": "a_melee_weapon",
		"description": "a_melee_weapon_description",
		"numboxes": "1"
	}, {
		"name": "a_second_melee_weapon",
		"description": "a_melee_weapon_description",
		"numboxes": "1"
	}, {
		"name": "lantern",
		"description": "lantern_description",
		"numboxes": "1",
		"short": "1"
	}, {
		"name": "armor",
		"description": "armor_description",
		"numboxes": "2",
		"short": "1"
	}, {
		"name": "throwing_knifes",
		"description": "throwing_knifes_description",
		"numboxes": "1"
	}, {
		"name": "a_large_weapon",
		"description": "a_large_weapon_description",
		"numboxes": "2"
	}, {
		"name": "an_unusual_weapon",
		"description": "an_unusual_weapon_description",
		"numboxes": "1"
	}, {
		"name": "a_horse_with_saddle",
		"description": "a_horse_with_saddle_description",
		"numboxes": "0"
	}, {
		"name": "a_rope",
		"description": "a_rope_description",
		"numboxes": "1"
	}, {
		"name": "documents",
		"description": "documents_description",
		"numboxes": "1"
	}, {
		"name": "arcane_ingredients",
		"description": "arcane_ingredients_description",
		"numboxes": "1"
	}, {
		"name": "subterfuge_supplies",
		"description": "subterfuge_supplies_description",
		"numboxes": "1"
	}, {
		"name": "demolition_tools",
		"description": "demolition_tools_description",
		"numboxes": "2"
	}, {
		"name": "crafting_tools",
		"description": "crafting_tools_description",
		"numboxes": "1"
	}, {
		"name": "a_spirit_bane",
		"description": "a_spirit_bane_description",
		"numboxes": "1"
	}, {
		"name": "an_useful_item",
		"description": "an_useful_item_description",
		"numboxes": "2"
	}],	
	
	"translatedDefaults": {
		"cohort1_name": "cohort",
		"contacts_title": "contacts_title",
		"factions_title": "factions_title",
		"factions1_header": "factions1",
		"factions2_header": "factions2",
		"friends_title": "contacts_title",
		"upgrade_1_name": "carriage",
		"upgrade_1_description": "upgrade_carriage_description",
		"upgrade_2_name": "hidden",
		"upgrade_2_description": "upgrade_hidden_description",
		"upgrade_3_name": "quarters",
		"upgrade_3_description": "upgrade_quarters_description",
		"upgrade_4_name": "secure",
		"upgrade_4_description": "upgrade_secure_description",
		"upgrade_5_name": "vault",
		"upgrade_5_description": "upgrade_vault_description",
		"upgrade_6_name": "workshop",
		"upgrade_6_description": "upgrade_workshop_description",
		"upgrade_7_name": "escape_tunnel",
		"upgrade_7_description": "upgrade_escape_tunnel_description",
		"upgrade_8_name": "hellstone_storage",
		"upgrade_8_description": "upgrade_hellstone_storage_description",
		"upgrade_9_name": "rail_connection",
		"upgrade_9_description": "upgrade_rail_connection_description",
		"upgrade_10_name": "documents",
		"upgrade_10_description": "upgrade_documents_description",
		"upgrade_11_name": "gear",
		"upgrade_11_description": "upgrade_gear_description",
		"upgrade_12_name": "implements",
		"upgrade_12_description": "upgrade_implements_description",
		"upgrade_13_name": "supplies",
		"upgrade_13_description": "upgrade_supplies_description",
		"upgrade_14_name": "weapons",
		"upgrade_14_description": "upgrade_weapons_description",		
		"upgrade_15_name": "tools",
		"upgrade_15_description": "upgrade_tools_description",		
		"upgrade_16_name": "horses",
		"upgrade_16_description": "upgrade_horses_description",		
		"upgrade_17_name": "hellstone",
		"upgrade_17_description": "upgrade_hellstone_description",		
		"upgrade_20_name": "wits",
		"upgrade_20_description": "upgrade_wits_description",
		"upgrade_21_name": "prowess",
		"upgrade_21_description": "upgrade_prowess_description",
		"upgrade_22_name": "guts",
		"upgrade_22_description": "upgrade_guts_description",
		"upgrade_23_name": "personal",
		"upgrade_23_description": "upgrade_personal_description",
		"upgrade_24_name": "mastery",
		"upgrade_24_description": "upgrade_mastery_description",
		"xp_condition2": "xp_beliefs",
		"xp_condition3": "xp_vice"
	},
	"defaultValues": {
		"attune": "0",
		"brawl": "0",
		"command": "0",
		"consort": "0",
		"disable": "0",
		"craft": "0",
		"hunt": "0",
		"prowl": "0",
		"read": "0",
		"sling": "0",
		"survey": "0",
		"sway": "0"
	},
	"numberOfFriends": 6,
	"maxContactsPerCrew": 6,
	"friendlessPlaybooks": [],
	"translatedCrewAttributes": ["crew_description", "crew_xp_condition"],
	"translatedPlaybookAttributes": ["playbook_description", "xp_condition", 
									"gatherinfo1", "gatherinfo2", "gatherinfo3", "gatherinfo4", "gatherinfo5", "gatherinfo6"]
};
/* global data, getTranslationByKey, getAttrs, setAttrs, on, getSectionIDs, generateRowID, removeRepeatingRow */
const sheetVersion = "1.2";
const sheetName = "A Fistful of Darkness";
const getTranslation = (key) => (getTranslationByKey(key) || "NO_TRANSLATION_FOUND");
/* It's necessary to include the base data at the start of the file */
/* Translate all the data */
Object.keys(data.crew).forEach(crew => {
	const base = data.crew[crew].base;
	Object.keys(base).forEach(attr => {
		if (data.translatedCrewAttributes.includes(attr)) {
			base[attr] = getTranslation(base[attr]);
		}
	});
	/* Generate crew contacts from translation file */
	data.crew[crew].contact = [...Array(data.maxContactsPerCrew).keys()].map(i => ({
		name: getTranslation(`crew_${crew}_contact_${i}`)
	}));
	data.crew[crew].crewability = data.crew[crew].crewability.map(name => ({
		name: getTranslation(`crew_ability_${name}`),
		description: getTranslation(`crew_ability_${name}_description`)
	}));
	data.crew[crew].upgrade.forEach(upgrade => {
		upgrade.name = getTranslation(upgrade.name);
		if (upgrade.description) {
			upgrade.description = getTranslationByKey(upgrade.description) || "";
		}		
		upgrade.boxes_chosen = "1";
	});
});
data.items.forEach(item => {
	item.boxes_chosen = "1";
	item.name = getTranslation(item.name);
	item.description = getTranslationByKey(item.description) || "";
});
Object.keys(data.translatedDefaults).forEach(k => {
	data.translatedDefaults[k] = getTranslation(data.translatedDefaults[k]);
});
Object.assign(data.defaultValues, data.translatedDefaults);
Object.keys(data.factions).forEach(x => {
	data.factions[x].forEach(faction => {
		faction.name = getTranslation(faction.name);
	});
});
Object.keys(data.playbook).forEach(playbook => {
	const base = data.playbook[playbook].base;
	Object.keys(base).forEach(attr => {
		if (data.translatedPlaybookAttributes.includes(attr)) {
			base[attr] = getTranslation(base[attr]);
		}
	});
	/* Generate playbook friends from translation file */
	if (!data.friendlessPlaybooks.includes(playbook)) {
		data.playbook[playbook].friend = [...Array(data.playbook[playbook].numberOfFriends).keys()]
			.map(i => ({
				name: getTranslation(`playbook_${playbook}_friend_${i}`)
			}))
			.filter(o => o.name);
	}
	else data.playbook[playbook].friend = [];
	data.playbook[playbook].ability = data.playbook[playbook].ability.map(name => ({
		name: getTranslation(`playbook_ability_${name}`),
		description: getTranslation(`playbook_ability_${name}_description`)
	}));
	data.playbook[playbook].playbookitem.forEach(item => {
		item.name = getTranslation(item.name);
		if (item.description) {
			item.description = getTranslationByKey(item.description) || "";
		}
		item.boxes_chosen = "1";
	});
});
const playbookAbilityMap = new Map([...Object.values(data.playbook).map(x => x.ability).reduce((m, v) => {
	v.forEach(a => m.add(a));
	return m;
}, new Set())].map(x => {
	return [x.name.toLowerCase(), x.description];
}));
const crewAbilityMap = new Map([...Object.values(data.crew).map(x => x.crewability).reduce((m, v) => {
	v.forEach(a => m.add(a));
	return m;
}, new Set())].map(x => {
	return [x.name.toLowerCase(), x.description];
}));
/* Utility functions - shouldn't need to touch most of these */
const mySetAttrs = (attrs, options, callback) => {
		const finalAttrs = Object.keys(attrs).reduce((m, k) => {
			m[k] = `${attrs[k]}`;
			return m;
		}, {});
		setAttrs(finalAttrs, options, callback);
	},
	setAttr = (name, value) => {
		getAttrs([name], v => {
			const setting = {};
			if (v[name] !== `${value}`) setting[name] = `${value}`;
			setAttrs(setting);
		});
	},
	fillRepeatingSectionFromData = (sectionName, dataList, autogen, callback) => {
		callback = callback || (() => {});
		getSectionIDs(`repeating_${sectionName}`, idList => {
			const existingRowAttributes = [
				...idList.map(id => `repeating_${sectionName}_${id}_name`),
				...idList.map(id => `repeating_${sectionName}_${id}_autogen`)
			];
			getAttrs(existingRowAttributes, v => {
				/* Delete auto-generated rows */
				if (autogen) {
					idList = idList.filter(id => {
						if (v[`repeating_${sectionName}_${id}_autogen`]) {
							removeRepeatingRow(`repeating_${sectionName}_${id}`);
							return false;
						}
						else return true;
					});
				}
				const existingRowNames = idList.map(id => v[`repeating_${sectionName}_${id}_name`]),
					createdIDs = [],
					setting = dataList.filter(o => !existingRowNames.includes(o.name))
						.map(o => {
							let rowID;
							while (!rowID) {
								let newID = generateRowID();
								if (!createdIDs.includes(newID)) {
									rowID = newID;
									createdIDs.push(rowID);
								}
							}
							const newAttrs = {};
							if (autogen) {
								newAttrs[`repeating_${sectionName}_${rowID}_autogen`] = "1";
							}
							return Object.keys(o).reduce((m, key) => {
								m[`repeating_${sectionName}_${rowID}_${key}`] = o[key];
								return m;
							}, newAttrs);
						})
						.reduce((m, o) => Object.assign(m, o), {});
				mySetAttrs(setting, {}, callback);
			});
		});
	},
	diceMagic = num => {
		const range = end => [...Array(end + 1).keys()].slice(1);
		if (num > 0) return `dice=${range(num).map(() => "[[d6]]").join("&"+"#44"+"; ")}`;
		else return "zerodice=[[d6]]&"+"#44"+"; [[d6]]";
	},
	buildRollFormula = base => {
		return ` {{?{@{bonusdice}|${
			[0, 1, 2, 3, 4, 5, 6, -1, -2, -3].map(n => `${n},${diceMagic(n + (parseInt(base) || 0))}`).join("|")
		}}}}`;
	},
	buildNumdiceFormula = () => {
		return ` {{?{${getTranslation("numberofdice")}|${
			[0, 1, 2, 3, 4, 5, 6].map(n => `${n},${diceMagic(n)}`).join("|")
		}}}}`;
	},
	emptyFirstRowIfUnnamed = sectionName => {
		getSectionIDs(`repeating_${sectionName}`, idList => {
			const id = idList[0];
			getAttrs([`repeating_${sectionName}_${id}_name`], v => {
				if (!v[`repeating_${sectionName}_${id}_name`]) {
					removeRepeatingRow(`repeating_${sectionName}_${id}`);
				}
			});
		});
	},
	handleBoxesFill = (name, upToFour) => {
		on(`change:${name}1 change:${name}2 change:${name}3 change:${name}4`, event => {
			if (event.sourceType !== "player") return;
			getAttrs([event.sourceAttribute], v => {
				const rName = event.sourceAttribute.slice(0, -1),
					setting = {};
				if (String(v[event.sourceAttribute]) === "1") {
					switch (event.sourceAttribute.slice(-1)) {
					case "4":
						setting[`${rName}3`] = 1;
						/* falls through */
					case "3":
						setting[`${rName}2`] = 1;
						/* falls through */
					case "2":
						setting[`${rName}1`] = 1;
					}
				}
				if (String(v[event.sourceAttribute]) === "0") {
					switch (event.sourceAttribute.slice(-1)) {
					case "1":
						setting[`${rName}2`] = 0;
						/* falls through */
					case "2":
						setting[`${rName}3`] = 0;
						/* falls through */
					case "3":
						if (upToFour) setting[`${rName}4`] = 0;
					}
				}
				mySetAttrs(setting);
			});
		});
	},
	calculateResistance = name => {
		getAttrs([...data.actions[name], `setting_resbonus_${name}`], v => {
			const total = data.actions[name].map(x => v[x])
				.reduce((s, c) => s + (`${c}` === "0" ? 0 : 1), 0);
			setAttr(name, total);
			setAttr(`${name}_formula`, buildRollFormula(total + parseInt(v[`setting_resbonus_${name}`])));
		});
	},
	calculateVice = () => {
		getAttrs(Object.keys(data.actions), v => {
			const total = Math.min(...Object.keys(v).map(x => parseInt(v[x]) || 0));
			setAttr("vice_formula", buildRollFormula(total));
		});
	},
	calculateStashFormula = () => getAttrs(["stash"], v => {
		setAttr("stash_formula", buildRollFormula(Math.floor(parseInt(v.stash) / 10)));
	}),
	calculateWantedFormula = () => getAttrs(["wanted"], v => {
		setAttr("wanted_formula", buildRollFormula(v.wanted));
	}),
	calculateCohortDice = prefixes => {
		const sourceAttrs = [
			"crew_tier",
			...prefixes.map(p => `${p}_impaired`),
			...prefixes.map(p => `${p}_type`),
			...prefixes.map(p => `${p}_roll_formula`),
		];
		getAttrs(sourceAttrs, v => {
			const setting = {};
			prefixes.forEach(prefix => {
				const dice = (parseInt(v.crew_tier) || 0) - (parseInt(v[`${prefix}_impaired`]) || 0) +
						((v[`${prefix}_type`] === "elite" || v[`${prefix}_type`] === "expert") ? 1 : 0),
					formula = buildRollFormula(dice);
				if (formula !== v[`${prefix}_roll_formula`]) setting[`${prefix}_roll_formula`] = formula;
			});
			setAttrs(setting);
		});
	};
/* CONSTANTS */
const crewAttributes = [...new Set([].concat(...Object.keys(data.crew).map(x => Object.keys(data.crew[x].base))))],
	playbookAttributes = [...new Set([].concat(...Object.keys(data.playbook).map(x => Object.keys(data.playbook[x].base))))],
	watchedAttributes = new Set(crewAttributes.concat(playbookAttributes)),
	actionsFlat = [].concat(...Object.keys(data.actions).map(x => data.actions[x])),
	autoExpandFields = [
		"repeating_ability:name",
		"repeating_ability:description",
		"repeating_crewability:name",
		"repeating_crewability:description",
		"repeating_playbookitem:name",
		"repeating_upgrade:name",
		"repeating_friend:name",
		"repeating_contact:name",
		"repeating_clock:name",
		"repeating_crewclock:name",
		"repeating_factionclock:name",
		"repeating_cohort:edges",
		"repeating_cohort:flaws",
		"repeating_alchemical:name",
		"xp_condition",
		"xp_condition_extra",
		"xp_condition2",
		"xp_condition3",
		"crew_xp_condition",
		"hunting_grounds_type",
		"hunting_grounds_description",
		"cohort1_edges",
		"cohort1_flaws",
		"heritage",
		"background",
		"vice_purveyor",
	],
	autogenSections = [
		"ability",
		"crewability",
		"friend",
		"contact",
		"playbookitem",
		"upgrade"
	],
	translatedNames = [...Object.keys(data.playbook), ...Object.keys(data.crew)].reduce((m, keyName) => {
		if (getTranslationByKey(keyName)) m[getTranslationByKey(keyName).toLowerCase()] = keyName;
		else m[keyName.toLowerCase()] = keyName;
		return m;
	}, {});
/* EVENT HANDLERS */
/* Set default fields when setting crew type or playbook */
on("change:crew_type change:playbook", event => {
	getAttrs(["playbook", "crew_type", "changed_attributes", "setting_autofill", ...watchedAttributes], v => {
		const changedAttributes = (v.changed_attributes || "").split(","),
			sourceName = translatedNames[(event.sourceAttribute === "crew_type" ? v.crew_type : v.playbook).toLowerCase()],
			fillBaseData = (inputData, defaultAttrNames) => {
				if (data) {
					const finalSettings = defaultAttrNames.filter(name => !changedAttributes.includes(name))
						// do not reset attributes which have been changed by the user
						.filter(name => v[name] !== (data.defaultValues[name] || ""))
						// do not set attributes if current value is equal to sheet defaults
						.reduce((m, name) => {
							m[name] = data.defaultValues[name] || "";
							return m;
						}, {});
					Object.keys(inputData).filter(name => !changedAttributes.includes(name))
						.forEach(name => (finalSettings[name] = inputData[name]));
					mySetAttrs(finalSettings);
				}
			};
		if (event.sourceAttribute === "crew_type" ? v.crew_type : v.playbook) {
			setAttr("show_playbook_reminder", "0");
		}
		if (v.setting_autofill !== "1") return;
		if (event.sourceAttribute === "crew_type" && sourceName in data.crew) {
			fillRepeatingSectionFromData("contact", data.crew[sourceName].contact, true);
			fillRepeatingSectionFromData("crewability", data.crew[sourceName].crewability, true);
			fillRepeatingSectionFromData("upgrade", data.crew[sourceName].upgrade, true);
			fillBaseData(data.crew[sourceName].base, crewAttributes);
		}
		if (event.sourceAttribute === "playbook" && sourceName in data.playbook) {
			fillRepeatingSectionFromData("friend", data.playbook[sourceName].friend, true);
			fillRepeatingSectionFromData("ability", data.playbook[sourceName].ability, true);
			fillRepeatingSectionFromData("playbookitem", data.playbook[sourceName].playbookitem, true);
			fillBaseData(data.playbook[sourceName].base, playbookAttributes);
		}
	});
});
const fillPlaybookAbility = () => {
	const prefix = "repeating_ability";
	getAttrs([`${prefix}_name`, `${prefix}_description`], v => {
		if (!v[`${prefix}_description`]) {
			const description = playbookAbilityMap.get((v[`${prefix}_name`] || "").toLowerCase());
			if (description) setAttr(`${prefix}_description`, description);
		}
	});
};
const fillCrewAbility = () => {
	const prefix = "repeating_crewability";
	getAttrs([`${prefix}_name`, `${prefix}_description`], v => {
		if (!v[`${prefix}_description`]) {
			const description = crewAbilityMap.get((v[`${prefix}_name`] || "").toLowerCase());
			if (description) setAttr(`${prefix}_description`, description);
		}
	});
};
on("change:repeating_ability:name", fillPlaybookAbility);
on("change:repeating_crewability:name", fillCrewAbility);
/* Watch repeating rows for changes and set autogen to false if change happens */
autogenSections.forEach(sectionName => {
	on(`change:repeating_${sectionName}`, event => {
		getAttrs([`repeating_${sectionName}_autogen`], v => {
			if (v[`repeating_${sectionName}_autogen`] && event.sourceType === "player") {
				setAttr(`repeating_${sectionName}_autogen`, "");
			}
		});
	});
});
/* Watch for changes in auto-set attributes and update changed_attributes*/
watchedAttributes.forEach(name => {
	on(`change:${name}`, event => {
		if (event.sourceType === "player") {
			getAttrs(["changed_attributes"], v => {
				const changedAttributes = [...new Set(v.changed_attributes.split(",")).add(name)]
					.filter(x => !!x).join(",");
				setAttr("changed_attributes", changedAttributes);
			});
		}
	});
});
/* Register attribute/action event handlers */
Object.keys(data.actions).forEach(attrName => {
	on([...data.actions[attrName], `setting_resbonus_${attrName}`]
		.map(x => `change:${x}`).join(" "), () => calculateResistance(attrName)
	);
	on(`change:${attrName}`, calculateVice);
});
/* Calculate stash */
on("change:stash", calculateStashFormula);
on("change:wanted", calculateWantedFormula);
/* Calculate trauma */
on(data.traumas.map(x => `change:trauma_${x}`).join(" "), event => {
	getAttrs(data.traumas.map(x => `trauma_${x}`), v => {
		if (event.sourceType === "player") {
			const newTrauma = data.traumas.reduce((m, name) => m + (parseInt(v[`trauma_${name}`]) || 0), 0);
			setAttr("trauma", newTrauma);
		}
	});
});
/* Generate buttons */
on("change:generate_factions", () => {
	setAttr("show_faction_generatebutton", "0");
	Object.keys(data.factions).forEach(sectionName => {
		fillRepeatingSectionFromData(sectionName, data.factions[sectionName]);
	});
});
autogenSections.forEach(sectionName => {
	on(`change:generate_${sectionName}`, () => {
		getAttrs(["generate_source_character", "generate_source_crew", "sheet_type"], v => {
			const dataVar = (v.sheet_type === "character") ? data.playbook : data.crew,
				genSource = v[`generate_source_${v.sheet_type}`];
			if (genSource in dataVar) {
				emptyFirstRowIfUnnamed(sectionName);
				fillRepeatingSectionFromData(sectionName, dataVar[genSource][sectionName]);
			}
		});
	});
});
/* Extra stress and trauma */
on("change:setting_extra_stress", event => setAttr("stress_max", 9 + (parseInt(event.newValue) || 0)));
on("change:setting_extra_trauma", event => setAttr("trauma_max", 4 + (parseInt(event.newValue) || 0)));
/* Calculate cohort quality */
on(["crew_tier", "cohort1_impaired", "cohort1_type"].map(x => `change:${x}`).join(" "), () => calculateCohortDice(["cohort1"]));
on("change:repeating_cohort", () => calculateCohortDice(["repeating_cohort"]));
on("change:crew_tier", () => {
	getSectionIDs("repeating_cohort", a => calculateCohortDice(a.map(id => `repeating_cohort_${id}`)));
});
on("change:char_cohort_quality change:char_cohort_impaired change:setting_show_cohort", () => {
	getAttrs(["char_cohort_quality", "char_cohort_impaired"], v => {
		const dice = (parseInt(v.char_cohort_quality) || 0) - (parseInt(v.char_cohort_impaired) || 0);
		setAttr("char_cohort_roll_formula", buildRollFormula(dice));
	});
});
/* Set correct verb for cohort roll button */
["char_cohort", "cohort1", "repeating_cohort"].forEach(prefix => {
	const eventString = "change:" + ((prefix === "repeating_cohort") ? `${prefix}:type` : `${prefix}_type`);
	on(eventString, event => {
		const verb = (event.newValue === "expert") ? "^{rolls_their}" : "^{roll_their}";
		setAttr(`${prefix}_verb`, verb);
	});
});
/* Left-fill checkboxes */
handleBoxesFill("upgrade_24_check_", true);
handleBoxesFill("bandolier1_check_");
handleBoxesFill("bandolier2_check_");
["item", "playbookitem", "upgrade"].forEach(sName => handleBoxesFill(`repeating_${sName}:check_`));
/* Pseudo-radios */
["crew_tier", ...actionsFlat].forEach(name => {
	on(`change:${name}`, event => {
		if (String(event.newValue) === "0" && event.sourceType === "player") {
			setAttr(name, (parseInt(event.previousValue) || 1) - 1);
		}
		setAttr(`${name}_formula`, buildRollFormula(event.newValue || "0"));
	});
});
/* Item reset button */
on("change:reset_items", () => {
	const clearChecks = sectionName => {
		getSectionIDs(`repeating_${sectionName}`, idArray => {
			const setting = [
				...idArray.map(id => `repeating_${sectionName}_${id}_check_1`),
				...idArray.map(id => `repeating_${sectionName}_${id}_check_2`),
				...idArray.map(id => `repeating_${sectionName}_${id}_check_3`)
			].reduce((m, name) => {
				m[name] = 0;
				return m;
			}, {});
			mySetAttrs(setting);
		});
	};
	setAttr("load", 0);
	["item", "playbookitem"].forEach(clearChecks);
});
/* Default values for number of upgrades boxes — probably not necessary anymore */
// on('change:repeating_upgrade:boxes_chosen', () => {
// 	getAttrs(['repeating_upgrade_numboxes'], v => {
// 		if (!['1', '2', '3'].includes(v.repeating_upgrade_numboxes)) {
// 			setAttr('repeating_upgrade_numboxes', '1');
// 		}
// 	});
// });
/* Resistance query */
on("change:setting_consequence_query sheet:opened", () => {
	getAttrs(["setting_consequence_query"], v => {
		const consequenceQuery = (String(v.setting_consequence_query) === "1") ?
			`?{${getTranslation("consequence")}|${getTranslation("a_consequence")}}` :
			"^{a_consequence}";
		setAttr("consequence_query", consequenceQuery);
	});
});
/* Trim whitespace in auto-expand fields */
autoExpandFields.forEach(name => {
	on(`change:${name}`, event => {
		const attrName = name.replace(":", "_");
		getAttrs([attrName], v => {
			if (v[attrName].trim() !== v[attrName] && event.sourceType === "player") {
				setAttr(attrName, v[attrName].trim());
			}
		});
	});
});
/* Clean chat image URL */
on("change:chat_image", event => {
	const match = (event.newValue || "").match(/^(https:\/\/s3\.amazonaws\.com\/files\.d20\.io\/images\/.*\.jpg)\?\d+$/);
	if (match) setAttr("chat_image", match[1]);
});
/* Number of dice prompt */
on("sheet:opened", () => {
	/* Set up translated attributes */
	const translatedAttrs = {
		bonusdice: getTranslation("bonusdice"),
		effect_query: getTranslation("effect_query"),
		notes_query: `?{${getTranslation("notes")}}`,
		numberofdice: buildNumdiceFormula(),
		position_query: `?{${getTranslation("position")}|` +
			`${getTranslation("risky")},position=${getTranslation("risky")}|` +
			`${getTranslation("controlled")},position=${getTranslation("controlled")}|` +
			`${getTranslation("desperate")},position=${getTranslation("desperate")}|` +
			`${getTranslation("fortune_roll")},position=}`,
	};
	getAttrs(Object.keys(translatedAttrs), v => {
		const setting = {};
		Object.keys(translatedAttrs).forEach(name => {
			if (v[name] !== translatedAttrs[name]) setting[name] = translatedAttrs[name];
		});
		mySetAttrs(setting);
	});
});
/* INITIALISATION AND UPGRADES */
on("sheet:opened", () => {
	getAttrs(["sheet_type", "changed_attributes", "crew_type", "playbook"], v => {
		/* Make sure sheet_type is never 0 */
		if (!["crew", "faction"].includes(v.sheet_type)) setAttr("sheet_type", "character");
		/* Remove reminder box if we have playbook or crew name */
		if (v.playbook || v.crew_type) setAttr("show_playbook_reminder", "0");
	});
	/* Setup and upgrades */
	getAttrs(["version"], v => {
		const upgradeSheet = version => {
				// const [major, minor] = version && version.split(".").map(x => parseInt(x));
				console.log(`Found version ${version}.`);
			},
			initialiseSheet = () => {
				const setting = ["ability", "friend", "crewability", "contact", "playbookitem", "upgrade", "framefeature"]
					.reduce((memo, sectionName) => {
						memo[`repeating_${sectionName}_${generateRowID()}_autogen`] = 1;
						return memo;
					}, {});
				mySetAttrs(setting);
				fillRepeatingSectionFromData("item", data.items);
				/* Set translated default values */
				getAttrs(Object.keys(data.translatedDefaults), v => {
					const setting = {};
					Object.keys(data.translatedDefaults).forEach(k => {
						if (v[k] !== data.translatedDefaults[k]) setting[k] = data.translatedDefaults[k];
					});
					mySetAttrs(setting);
				});
				console.log("Initialising new sheet.");
			};
		if (v.version) upgradeSheet(v.version);
		else initialiseSheet();
		// Set version number
		mySetAttrs({
			version: sheetVersion,
			character_sheet: `${sheetName} v${sheetVersion}`,
		});
	});
});
</script>

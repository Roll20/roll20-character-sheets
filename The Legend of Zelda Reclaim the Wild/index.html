<nav class="custom-nav-tabs">
    <ul class="nav nav-tabs">
		<li>
			<input type="radio" name="attr_tab" class="sheet-tabInput" value="1" checked />
			<a href="javascript:void(0);"> General Info</a>
		</li>
		<li>
			<input type="radio" name="attr_tab" class="sheet-tabInput" value="2" />
			<a href="javascript:void(0);"> Feats, Spells, Techniques</a>
		</li>
		<li>
			<input type="radio" name="attr_tab" class="sheet-tabInput" value="3" />
			<a href="javascript:void(0);"> Inventory</a>
		</li>
		<li class="">
			<input type="radio" name="attr_tab" class="sheet-tabInput" value="4" />
			<a href="javascript:void(0);"> Materials & Key Items</a>
		</li>
	</ul>
</nav>
<main id="tab-general" class="sheet-tab sheet-tab1">
  <section class="header f-center">
    <span class="float-right w-140 f-center">
        <label>Tokens of Heroism</label>
        <input type="number" name="attr_tokens_avail" /> /
        <input type="number" name="attr_tokens_total" />
    </span>
    <label class="inline-block">Name: <input name="attr_character_name" type="text" /></label>
    <label class="inline-block">Race: <input name="attr_race" list="race" type="text" /></label>
    <br/>
    <label class="inline-block">Size: <input name="attr_size" list="size" type="text" class="w-100" /></label>
    <label class="inline-block">Age: <input name="attr_age" type="text" class="w-100" /></label>
    <label class="inline-block">Height: <input name="attr_height" type="text" class="w-100" /></label>
    <label class="inline-block">Weight: <input name="attr_weight" type="text" class="w-100" /></label>
  </section>

  <section class="common f-center">
    <label class="inline-block">
        <img src="https://i.ibb.co/gjpcSCC/noun-heart-1069408.png" class="common-icon" />
        HP: <input type="number" name="attr_hp"> / 
        <input type="number" name="attr_hp_max" value="(@{hearts_total}*4)" disabled="true"> & 
        <input type="number" name="attr_hp_temp">
    </label>
    <label class="inline-block">
        <img src="https://i.ibb.co/jDn9SkM/noun-potion-834622.png" class="common-icon" />
        MP: <input type="number" name="attr_mp"> / 
        <input type="number" name="attr_mp_max" value="(@{magic_total}*4)" disabled="true"> & 
        <input type="number" name="attr_mp_temp">
    </label>
    <label class="inline-block">
        <img src="https://i.ibb.co/GF8b09m/noun-fire-1236731.png" class="common-icon" style="height: 30px; padding: 3px;" />
        SP: <input type="number" name="attr_sp"> / 
        <input type="number" name="attr_sp_max" value="(@{stamina_total}*4)" disabled="true"> & 
        <input type="number" name="attr_sp_temp">
    </label>
    <div class="block t-center">
        <label class="inline-block">
            Defense<br/>
            <input type="number" name="attr_defense">
        </label>
        <label class="inline-block">
            Concntr.<br/>
            <input type="number" name="attr_concentration" value="(@{discipline_total}+10)" disabled="true">
        </label>
        <label class="inline-block">
            Evasion<br/>
            <input type="number" name="attr_evasion" value="(@{agility_total}+10-@{eva_penalty})" disabled="true">
        </label>
        <label class="inline-block">
            Vitality<br/>
            <input type="number" name="attr_vitality" value="(@{fortitude_total}+10)" disabled="true">
        </label>
    </div>
  </section>

  <section class="skill f-col nowrap">

    <h3>Power</h3>
    <div class="skill-table">
        <div class="table-header"></div>
        <div class="table-header">Trait</div>
        <div class="table-header">Bonus</div>
        <div class="table-header">Total</div>
    
        <div class="table-header">Combat</div>
        <div><input type="number" name="attr_combat_trait" value="1" /></div>
        <div><input type="number" name="attr_combat_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_combat_total" value="(@{combat_trait}+@{combat_bonus})" disabled="true" />
            <button type="roll" name="roll_combat" value="&{template:rolls} {{title=Combat}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{combat_total}[Combat] ]]}}"/>
        </div>
    
        <div class="table-header">Hearts</div>
        <div><input type="number" name="attr_hearts_trait" value="1" /></div>
        <div><input type="number" name="attr_hearts_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_hearts_total" value="(@{hearts_trait}+@{hearts_bonus})" disabled="true" />
            <button type="roll" name="roll_hearts" value="&{template:rolls} {{title=Hearts}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{hearts_total}[Hearts] ]]}}"/>
        </div>
    
        <div class="table-header">Athletics</div>
        <div><input type="number" name="attr_athletics_trait" value="1" /></div>
        <div><input type="number" name="attr_athletics_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_athletics_total" value="(@{athletics_trait}+@{athletics_bonus})" disabled="true" />
            <button type="roll" name="roll_athletics" value="&{template:rolls} {{title=Athletics}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{athletics_total}[Athletics] ]]}}"/>
        </div>
    
        <div class="table-header">Civ.</div>
        <div><input type="number" name="attr_civilization_trait" value="1" /></div>
        <div><input type="number" name="attr_civilization_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_civilization_total" value="(@{civilization_trait}+@{civilization_bonus})" disabled="true" />
            <button type="roll" name="roll_civilization" value="&{template:rolls} {{title=Civilization}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{civilization_total}[Civilization] ]]}}"/>
        </div>
    
        <div class="table-header">Fortitude</div>
        <div><input type="number" name="attr_fortitude_trait" value="1" /></div>
        <div><input type="number" name="attr_fortitude_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_fortitude_total" value="(@{fortitude_trait}+@{fortitude_bonus})" disabled="true" />
            <button type="roll" name="roll_fortitude" value="&{template:rolls} {{title=Fortitude}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{fortitude_total}[Fortitude] ]]}}"/>
        </div>
    
        <div class="table-header">Intimidate</div>
        <div><input type="number" name="attr_intimidate_trait" value="1" /></div>
        <div><input type="number" name="attr_intimidate_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_intimidate_total" value="(@{intimidate_trait}+@{intimidate_bonus})" disabled="true" />
            <button type="roll" name="roll_intimidate" value="&{template:rolls} {{title=Intimidate}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{intimidate_total}[Intimidate] ]]}}"/>
        </div>
    
        <div class="table-header">Mechanics</div>
        <div><input type="number" name="attr_mechanics_trait" value="1" /></div>
        <div><input type="number" name="attr_mechanics_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_mechanics_total" value="(@{mechanics_trait}+@{mechanics_bonus})" disabled="true" />
            <button type="roll" name="roll_mechanics" value="&{template:rolls} {{title=Mechanics}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{mechanics_total}[Mechanics] ]]}}"/>
        </div>
    
        <div class="table-header">Smithing</div>
        <div><input type="number" name="attr_smithing_trait" value="1" /></div>
        <div><input type="number" name="attr_smithing_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_smithing_total" value="(@{smithing_trait}+@{smithing_bonus})" disabled="true" />
            <button type="roll" name="roll_smithing" value="&{template:rolls} {{title=Smithing}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{smithing_total}[Smithing] ]]}}"/>
        </div>
    </div>

    <h3>Wisdom</h3>
    <div class="skill-table">
        <div class="table-header"></div>
        <div class="table-header">Trait</div>
        <div class="table-header">Bonus</div>
        <div class="table-header">Total</div>

        <div class="table-header">Willpower</div>
        <div><input type="number" name="attr_willpower_trait" value="1" /></div>
        <div><input type="number" name="attr_willpower_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_willpower_total" value="(@{willpower_trait}+@{willpower_bonus})" disabled="true" />
            <button type="roll" name="roll_willpower" value="&{template:rolls} {{title=Willpower}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{willpower_total}[Willpower] ]]}}"/>
        </div>

        <div class="table-header">Magic</div>
        <div><input type="number" name="attr_magic_trait" value="1" /></div>
        <div><input type="number" name="attr_magic_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_magic_total" value="(@{magic_trait}+@{magic_bonus})" disabled="true" />
            <button type="roll" name="roll_magic" value="&{template:rolls} {{title=Magic}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{magic_total}[Magic] ]]}}"/>
        </div>

        <div class="table-header">Arcana</div>
        <div><input type="number" name="attr_arcana_trait" value="1" /></div>
        <div><input type="number" name="attr_arcana_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_arcana_total" value="(@{arcana_trait}+@{arcana_bonus})" disabled="true" />
            <button type="roll" name="roll_arcana" value="&{template:rolls} {{title=Arcana}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{arcana_total}[Arcana] ]]}}"/>
        </div>

        <div class="table-header">Percept.</div>
        <div><input type="number" name="attr_perception_trait" value="1" /></div>
        <div><input type="number" name="attr_perception_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_perception_total" value="(@{perception_trait}+@{perception_bonus})" disabled="true" />
            <button type="roll" name="roll_perception" value="&{template:rolls} {{title=Perception}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{perception_total}[Perception] ]]}}"/>
        </div>

        <div class="table-header">Influence</div>
        <div><input type="number" name="attr_influence_trait" value="1" /></div>
        <div><input type="number" name="attr_influence_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_influence_total" value="(@{influence_trait}+@{influence_bonus})" disabled="true" />
            <button type="roll" name="roll_influence" value="&{template:rolls} {{title=Influence}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{influence_total}[Influence] ]]}}"/>
        </div>

        <div class="table-header">Perform</div>
        <div><input type="number" name="attr_perform_trait" value="1" /></div>
        <div><input type="number" name="attr_perform_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_perform_total" value="(@{perform_trait}+@{perform_bonus})" disabled="true" />
            <button type="roll" name="roll_perform" value="&{template:rolls} {{title=Perform}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{perform_total}[Perform] ]]}}"/>
        </div>

        <div class="table-header">Discipline</div>
        <div><input type="number" name="attr_discipline_trait" value="1" /></div>
        <div><input type="number" name="attr_discipline_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_discipline_total" value="(@{discipline_trait}+@{discipline_bonus})" disabled="true" />
            <button type="roll" name="roll_discipline" value="&{template:rolls} {{title=Discipline}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{discipline_total}[Discipline] ]]}}"/>
        </div>

        <div class="table-header">Enchant</div>
        <div><input type="number" name="attr_enchanting_trait" value="1" /></div>
        <div><input type="number" name="attr_enchanting_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_enchanting_total" value="(@{enchanting_trait}+@{enchanting_bonus})" disabled="true" />
            <button type="roll" name="roll_enchanting" value="&{template:rolls} {{title=Enchanting}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{enchanting_total}[Enchanting] ]]}}"/>
        </div>
    </div>

    <h3>Courage</h3>
    <div class="skill-table">
        <div class="table-header"></div>
        <div class="table-header">Trait</div>
        <div class="table-header">Bonus</div>
        <div class="table-header">Total</div>

        <div class="table-header">Accuracy</div>
        <div><input type="number" name="attr_accuracy_trait" value="1" /></div>
        <div><input type="number" name="attr_accuracy_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_accuracy_total" value="(@{accuracy_trait}+@{accuracy_bonus})" disabled="true" />
            <button type="roll" name="roll_accuracy" value="&{template:rolls} {{title=Accuracy}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{accuracy_total}[Accuracy] ]]}}"/>
        </div>

        <div class="table-header">Stamina</div>
        <div><input type="number" name="attr_stamina_trait" value="1" /></div>
        <div><input type="number" name="attr_stamina_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_stamina_total" value="(@{stamina_trait}+@{stamina_bonus})" disabled="true" />
            <button type="roll" name="roll_stamina" value="&{template:rolls} {{title=Stamina}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{stamina_total}[Stamina] ]]}}"/>
        </div>

        <div class="table-header">Nature</div>
        <div><input type="number" name="attr_nature_trait" value="1" /></div>
        <div><input type="number" name="attr_nature_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_nature_total" value="(@{nature_trait}+@{nature_bonus})" disabled="true" />
            <button type="roll" name="roll_nature" value="&{template:rolls} {{title=Nature}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{nature_total}[Nature] ]]}}"/>
        </div>

        <div class="table-header">Agility</div>
        <div><input type="number" name="attr_agility_trait" value="1" /></div>
        <div><input type="number" name="attr_agility_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_agility_total" value="(@{agility_trait}+@{agility_bonus})" disabled="true" />
            <button type="roll" name="roll_agility" value="&{template:rolls} {{title=Agility}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{agility_total}[Agility] ]]}}"/>
        </div>

        <div class="table-header">Command</div>
        <div><input type="number" name="attr_command_trait" value="1" /></div>
        <div><input type="number" name="attr_command_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_command_total" value="(@{command_trait}+@{command_bonus})" disabled="true" />
            <button type="roll" name="roll_command" value="&{template:rolls} {{title=Command}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{command_total}[Command] ]]}}"/>
        </div>

        <div class="table-header">Insight</div>
        <div><input type="number" name="attr_insight_trait" value="1" /></div>
        <div><input type="number" name="attr_insight_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_insight_total" value="(@{insight_trait}+@{insight_bonus})" disabled="true" />
            <button type="roll" name="roll_insight" value="&{template:rolls} {{title=Insight}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{insight_total}[Insight] ]]}}"/>
        </div>

        <div class="table-header">Guile</div>
        <div><input type="number" name="attr_guile_trait" value="1" /></div>
        <div><input type="number" name="attr_guile_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_guile_total" value="(@{guile_trait}+@{guile_bonus})" disabled="true" />
            <button type="roll" name="roll_guile" value="&{template:rolls} {{title=Guile}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{guile_total}[Guile] ]]}}"/>
        </div>

        <div class="table-header">Cooking</div>
        <div><input type="number" name="attr_cooking_trait" value="1" /></div>
        <div><input type="number" name="attr_cooking_bonus" value="0" /></div>
        <div>
            <input type="number" name="attr_cooking_total" value="(@{cooking_trait}+@{cooking_bonus})" disabled="true" />
            <button type="roll" name="roll_cooking" value="&{template:rolls} {{title=Cooking}} {{subtitle=@{character_name} }} {{roll= [[2d6+@{cooking_total}[Cooking] ]]}}"/>
        </div>
    </div>
  </section>

  <section class="weapon f-col">
    <h3>Weapons</h3>
    <fieldset class="repeating_weapon">
        <label class="block"><span class="w-70">Name:</span><input class="w-165" name="attr_weapon_name" type="text" /></label>
        <label class="block"><span class="w-70">Material:</span><input class="w-165" name="attr_weapon_material" type="text" /></label>
        <label class="inline-block">ACC: <input name="attr_weapon_acc" type="number" /></label>
        <label class="inline-block">ATK: <input name="attr_weapon_atk" type="number" /></label>
        <button type="roll" name="roll_weapon" value="&{template:weapon} {{title=@{weapon_name}}} {{subtitle=@{character_name} }} {{accuracy= [[2d6+@{accuracy_total}[Accuracy]+@{weapon_acc}[Weapon Bonus]]]}} {{damage=[[@{weapon_atk}[Weapon]+@{combat_total}[Combat]]]}}"/>
        <label class="inline-block">
            DUR: <input name="attr_weapon_dur" type="number" /> /
            <input name="attr_weapon_dur_max" type="number" />
        </label>
        <label class="inline-block" style="margin-left: -5px;">Rank:<input name="attr_weapon_rank" type="number" /></label>
        <label class="inline-block"><span class="w-70">Style:</span><input class="w-165" name="attr_weapon_style" list="style" type="text" /></label>
        <label class="inline-block"><span class="w-70">Enchant:</span><input class="w-165" name="attr_weapon_enchant" type="text" /></label>
    </fieldset>
  </section>

  <section class="armor">
    <h3>Armor</h3>
    <label class="inline-block"><span>Evasion Penalty:</span><input name="attr_eva_penalty" type="number" value="0" /></label>
    <fieldset class="repeating_armor">
        <label class="block"><span class="w-70">Name:</span><input class="w-165" name="attr_armor_name" type="text" /></label>
        <label class="block">
            <span class="w-70">Weight:</span>
            <select class="w-165" name="attr_armor_weight">
                <option>Civilian</option>
                <option>Light</option>
                <option>Medium</option>
                <option>Heavy</option>
            </select>
        </label>
        <label class="inline-block"><span class="w-70">Rank:</span><input name="attr_armor_rank" type="number" /></label>
        <label class="inline-block"><span class="w-70">DEF:</span><input name="attr_armor_def" type="number" /></label>
        <label class="block"><span class="w-70">Enchant:</span><input class="w-165" name="attr_armor_enchant" type="text" /></label>
    </fieldset>
  </section>

  <section class="attack">
    <label class="block"><span class="w-70">Movements:</span><input class="w-165" name="attr_movement_types" type="text" value="Walking (Natural), Swimming" /></label>
    <label class="inline-block"><span class="w-70">Speed:</span><input name="attr_movement_speed" type="number" value="6" /></label>
    <label class="inline-block"><span class="w-70">H. Jump:</span><input name="attr_movement_h_jump" type="number" /></label>
    <label class="inline-block"><span class="w-70">V. Jump:</span><input name="attr_movement_v_jump" type="number" /></label>
    <label class="block"><span class="w-70">Lift:</span><input class="w-165" name="attr_lift" type="text" /></label>
    <label class="block"><span class="w-70">Weakness:</span><input class="w-165" name="attr_weakness" type="text" /></label>
    <label class="block"><span class="w-70">Immunity:</span><input class="w-165" name="attr_immunity" type="text" /></label>
    <label class="block"><span class="w-70">Resists:</span><input class="w-165" name="attr_resist" type="text" /></label>
    <label class="block center-label"><span class="w-70">Status Effects:</span><textarea class="w-165 ml-75" name="attr_status_effects" rows="3"></textarea></label>
  </section>

  <section class="misc">
    <h3>Reactions</h3>
    <fieldset class="repeating_react">
        <label class="block">
            <span class="w-70">Name: <input style="margin-left:5px;" name="attr_react_used" type="checkbox" /></span>
            <input class="w-165" name="attr_react_name" type="text" />
        </label>
        <label class="block"><span class="w-70">Cost:</span><input class="w-165" name="attr_react_cost" type="text" /></label>
        <label class="block"><span class="w-70">Use Req.:</span><input class="w-165" name="attr_react_req" type="text" /></label>
        <label class="block center-label"><span class="w-70 ">Effects:</span><textarea class="w-165 ml-75" name="attr_react_effects" rows="3"></textarea></label>
    </fieldset>
  </section>

  <footer class="f-col f-center">
    <span>Generic copyright disclaimer</span>
  </footer>
</main>
<main id="tab-feats" class="sheet-tab sheet-tab2">
    <section class="feats f-col">
        <h3>Features</h3>
        <fieldset class="repeating_feature">
            <label class="block"><span class="w-70">Name:</span><input class="w-165" name="attr_feat_name" type="text" /></label>
            <label class="block"><span class="w-70">Learn:</span><input name="attr_feat_tokens" type="number" /> Tokens</label>
            <label class="block center-label"><span class="w-70">Trait Req.:</span><input class="w-165 ml-75" name="attr_feat_req" type="text" /></label>
            <label class="block center-label">
                <span class="w-70 ">Effects:</span>
                <textarea class="w-165 ml-75" name="attr_feat_effects" rows="3"></textarea>
            </label>
        </fieldset>
    </section>
    <section class="spells f-col">
        <h3>Spells</h3>
        <fieldset class="repeating_spell">
            <label class="block"><span class="w-70">Name:</span><input class="w-165" name="attr_spell_name" type="text" /></label>
            <label class="block"><span class="w-70">Learn:</span><input name="attr_spell_tokens" type="number" /> Tokens</label>
            <label class="block center-label"><span class="w-70">Learn Req.:</span><input class="w-165 ml-75" name="attr_spell_learnreq" type="text" /></label>
            <label class="block"><span class="w-70">Cost:</span><input class="w-165" name="attr_spell_cost" type="text" /></label>
            <label class="block"><span class="w-70">Use Req.:</span><input class="w-165" name="attr_spell_usereq" type="text" /></label>
            <label class="block"><span class="w-70">Range:</span><input class="w-165" name="attr_spell_range" type="text" /></label>
            <label class="block center-label">
                <span class="w-70 ">Effects:</span>
                <textarea class="w-165 ml-75" name="attr_spell_effects" rows="3"></textarea>
            </label>
        </fieldset>
    </section>
    <section class="techs f-col">
        <h3>Techniques</h3>
        <fieldset class="repeating_technique">
            <label class="block"><span class="w-70">Name:</span><input class="w-165" name="attr_tech_name" type="text" /></label>
            <label class="block"><span class="w-70">Learn:</span><input name="attr_tech_tokens" type="number" /> Tokens</label>
            <label class="block center-label"><span class="w-70">Learn Req.:</span><input class="w-165 ml-75" name="attr_tech_learnreq" type="text" /></label>
            <label class="block"><span class="w-70">Cost:</span><input class="w-165" name="attr_tech_cost" type="text" /></label>
            <label class="block"><span class="w-70">Use Req.:</span><input class="w-165" name="attr_tech_usereq" type="text" /></label>
            <label class="block"><span class="w-70">Range:</span><input class="w-165" name="attr_tech_range" type="text" /></label>
            <label class="block center-label">
                <span class="w-70 ">Effects:</span>
                <textarea class="w-165 ml-75" name="attr_tech_effects" rows="3"></textarea>
            </label>
        </fieldset>
    </section>
</main>
<main id="tab-inventory" class="sheet-tab sheet-tab3">
    <section class="ammos f-col">
        <h3>Ammunition</h3>
        <fieldset class="repeating_ammos">
            <input class="block" name="attr_ammo_name" type="text" />
            <textarea class="block" name="attr_ammo_effects" rows="3"></textarea>
        </fieldset>
    </section>
    <section class="consumes f-col">
        <h3>Consumables</h3>
        <fieldset class="repeating_consumes">
            <input class="block" name="attr_consume_name" type="text" />
            <textarea class="block" name="attr_consume_effects" rows="3"></textarea>
        </fieldset>
    </section>
    <section class="tools f-col">
        <h3>Tools</h3>
        <fieldset class="repeating_tools">
            <input class="block" name="attr_tool_name" type="text" />
            <textarea class="block" name="attr_tool_effects" rows="3"></textarea>
        </fieldset>
    </section>
</main>

<main id="tab-material" class="sheet-tab sheet-tab4">
    <section class="money f-col">
        <label class="block"><span class="w-70">Rupees:</span><input class="w-165" name="attr_rupees" type="number" /></label>
        <label class="block"><span class="w-70">Other:</span><input class="w-165" name="attr_other_wealth" type="text" /></label>
    </section>
    <section class="material f-col">
        <h3>Materials</h3>
        
        <div class="material-table">
            <div></div>
            <div class="table-header">0</div>
            <div class="table-header">1</div>
            <div class="table-header">2</div>
            <div class="table-header">3</div>
            <div class="table-header">4</div>
            <div class="table-header">5</div>

            <div class="table-header">Ancient</div>
            <div><input type="number" name="attr_m_ancient_0" /></div>
            <div><input type="number" name="attr_m_ancient_1" /></div>
            <div><input type="number" name="attr_m_ancient_2" /></div>
            <div><input type="number" name="attr_m_ancient_3" /></div>
            <div><input type="number" name="attr_m_ancient_4" /></div>
            <div><input type="number" name="attr_m_ancient_5" /></div>

            <div class="table-header">Cloth</div>
            <div><input type="number" name="attr_m_cloth_0" /></div>
            <div><input type="number" name="attr_m_cloth_1" /></div>
            <div><input type="number" name="attr_m_cloth_2" /></div>
            <div><input type="number" name="attr_m_cloth_3" /></div>
            <div><input type="number" name="attr_m_cloth_4" /></div>
            <div><input type="number" name="attr_m_cloth_5" /></div>

            <div class="table-header">Metal</div>
            <div><input type="number" name="attr_m_metal_0" /></div>
            <div><input type="number" name="attr_m_metal_1" /></div>
            <div><input type="number" name="attr_m_metal_2" /></div>
            <div><input type="number" name="attr_m_metal_3" /></div>
            <div><input type="number" name="attr_m_metal_4" /></div>
            <div><input type="number" name="attr_m_metal_5" /></div>

            <div class="table-header">Monster Parts</div>
            <div><input type="number" name="attr_m_monster_0" /></div>
            <div><input type="number" name="attr_m_monster_1" /></div>
            <div><input type="number" name="attr_m_monster_2" /></div>
            <div><input type="number" name="attr_m_monster_3" /></div>
            <div><input type="number" name="attr_m_monster_4" /></div>
            <div><input type="number" name="attr_m_monster_5" /></div>

            <div class="table-header">Stone</div>
            <div><input type="number" name="attr_m_stone_0" /></div>
            <div><input type="number" name="attr_m_stone_1" /></div>
            <div><input type="number" name="attr_m_stone_2" /></div>
            <div><input type="number" name="attr_m_stone_3" /></div>
            <div><input type="number" name="attr_m_stone_4" /></div>
            <div><input type="number" name="attr_m_stone_5" /></div>

            <div class="table-header">Wood</div>
            <div><input type="number" name="attr_m_wood_0" /></div>
            <div><input type="number" name="attr_m_wood_1" /></div>
            <div><input type="number" name="attr_m_wood_2" /></div>
            <div><input type="number" name="attr_m_wood_3" /></div>
            <div><input type="number" name="attr_m_wood_4" /></div>
            <div><input type="number" name="attr_m_wood_5" /></div>

            <div></div>
            <div class="table-header">0</div>
            <div class="table-header">1</div>
            <div class="table-header">2</div>
            <div class="table-header">3</div>
            <div class="table-header">4</div>
            <div class="table-header">5</div>

            <div class="table-header">Amber</div>
            <div><input type="number" name="attr_m_amber_0" /></div>
            <div><input type="number" name="attr_m_amber_1" /></div>
            <div><input type="number" name="attr_m_amber_2" /></div>
            <div><input type="number" name="attr_m_amber_3" /></div>
            <div><input type="number" name="attr_m_amber_4" /></div>
            <div><input type="number" name="attr_m_amber_5" /></div>

            <div class="table-header">Diamond</div>
            <div><input type="number" name="attr_m_diamond_0" /></div>
            <div><input type="number" name="attr_m_diamond_1" /></div>
            <div><input type="number" name="attr_m_diamond_2" /></div>
            <div><input type="number" name="attr_m_diamond_3" /></div>
            <div><input type="number" name="attr_m_diamond_4" /></div>
            <div><input type="number" name="attr_m_diamond_5" /></div>

            <div class="table-header">Emerald</div>
            <div><input type="number" name="attr_m_emerald_0" /></div>
            <div><input type="number" name="attr_m_emerald_1" /></div>
            <div><input type="number" name="attr_m_emerald_2" /></div>
            <div><input type="number" name="attr_m_emerald_3" /></div>
            <div><input type="number" name="attr_m_emerald_4" /></div>
            <div><input type="number" name="attr_m_emerald_5" /></div>

            <div class="table-header">Luminous Stone</div>
            <div><input type="number" name="attr_m_luminous_0" /></div>
            <div><input type="number" name="attr_m_luminous_1" /></div>
            <div><input type="number" name="attr_m_luminous_2" /></div>
            <div><input type="number" name="attr_m_luminous_3" /></div>
            <div><input type="number" name="attr_m_luminous_4" /></div>
            <div><input type="number" name="attr_m_luminous_5" /></div>

            <div class="table-header">Onyx</div>
            <div><input type="number" name="attr_m_onyx_0" /></div>
            <div><input type="number" name="attr_m_onyx_1" /></div>
            <div><input type="number" name="attr_m_onyx_2" /></div>
            <div><input type="number" name="attr_m_onyx_3" /></div>
            <div><input type="number" name="attr_m_onyx_4" /></div>
            <div><input type="number" name="attr_m_onyx_5" /></div>

            <div class="table-header">Opal</div>
            <div><input type="number" name="attr_m_opal_0" /></div>
            <div><input type="number" name="attr_m_opal_1" /></div>
            <div><input type="number" name="attr_m_opal_2" /></div>
            <div><input type="number" name="attr_m_opal_3" /></div>
            <div><input type="number" name="attr_m_opal_4" /></div>
            <div><input type="number" name="attr_m_opal_5" /></div>

            <div class="table-header">Ruby</div>
            <div><input type="number" name="attr_m_ruby_0" /></div>
            <div><input type="number" name="attr_m_ruby_1" /></div>
            <div><input type="number" name="attr_m_ruby_2" /></div>
            <div><input type="number" name="attr_m_ruby_3" /></div>
            <div><input type="number" name="attr_m_ruby_4" /></div>
            <div><input type="number" name="attr_m_ruby_5" /></div>

            <div class="table-header">Sapphire</div>
            <div><input type="number" name="attr_m_sapphire_0" /></div>
            <div><input type="number" name="attr_m_sapphire_1" /></div>
            <div><input type="number" name="attr_m_sapphire_2" /></div>
            <div><input type="number" name="attr_m_sapphire_3" /></div>
            <div><input type="number" name="attr_m_sapphire_4" /></div>
            <div><input type="number" name="attr_m_sapphire_5" /></div>

            <div class="table-header">Topaz</div>
            <div><input type="number" name="attr_m_topaz_0" /></div>
            <div><input type="number" name="attr_m_topaz_1" /></div>
            <div><input type="number" name="attr_m_topaz_2" /></div>
            <div><input type="number" name="attr_m_topaz_3" /></div>
            <div><input type="number" name="attr_m_topaz_4" /></div>
            <div><input type="number" name="attr_m_topaz_5" /></div>
        </div>
    </section>
    <section class="ingredients f-col">
        <h3>Critters &amp; Food Ingredients</h3>
        <label class="ingredients-header">
            <span class="w-165">Name</span>
            <span class="w-200">Effect</span>
            <span>Rank</span>
            <span>Amt</span>
        </label>
        <fieldset class="repeating_ingredients">
            <input class="w-165" name="attr_ing_name" type="text" />
            <input class="w-200" name="attr_ing_effect" type="text" />
            <input name="attr_ing_rank" type="number" />
            <input name="attr_ing_amount" type="number" />
        </fieldset>
    </section>
    <!--section class="surveying f-col">
        <h3>Surveying</h3>
        <label class="inline-block">Type: <input name="attr_survey_type" list="material_type" type="text" /></label>
        <label class="inline-block">Tool Rank: <input name="attr_survey_toolrank" type="number" /></label>
        <button type="action" name="act_survey" />
    </section-->
    <section class="key f-col">
        <h3>Key Items</h3>
        <fieldset class="repeating_keys">
            <input class="block" name="attr_key_name" type="text" />
        </fieldset>
    </section>
</main>

<!-- Datalists & thing that don't show directly on sheet -->

<datalist id="race">
    <option value="Gerudo">Gerudo</option>
    <option value="Goron">Goron</option>
    <option value="Hylian">Hylian</option>
    <option value="Rito">Rito</option>
    <option value="Sheikah">Sheikah</option>
    <option value="Zora">Zora</option>
    <option value="Deku Scrub">Deku Scrub</option>
    <option value="Demon">Demon</option>
    <option value="Fairy">Fairy</option>
    <option value="Subrosian">Subrosian</option>
    <option value="Talking Animal">Talking Animal</option>
    <option value="Twili">Twili</option>
</datalist>

<datalist id="size">
    <option value="Diminutive">Diminutive</option>
    <option value="Tiny">Tiny</option>
    <option value="Small">Small</option>
    <option value="Medium">Medium</option>
    <option value="Large">Large</option>
    <option value="Huge">Huge</option>
    <option value="Gigantic">Gigantic</option>
    <option value="Colossal">Colossal</option>
</datalist>

<datalist id="style">
    <option value="Bokoblin">Bokoblin</option>
    <option value="Deku">Deku</option>
    <option value="Demon">Demon</option>
    <option value="Fairy">Fairy</option>
    <option value="Gerudo">Gerudo</option>
    <option value="Goron">Goron</option>
    <option value="Guardian">Guardian</option>
    <option value="Kokiri">Kokiri</option>
    <option value="Lynel">Lynel</option>
    <option value="Neglected">Neglected</option>
    <option value="Rito">Rito</option>
    <option value="Royal Guard">Royal Guard</option>
    <option value="Sheikah">Sheikah</option>
    <option value="Subrosian">Subrosian</option>
    <option value="Talking Animal">Talking Animal</option>
    <option value="Twili">Twili</option>
    <option value="Zora">Zora</option>
</datalist>

<datalist id="material_type">
    <option value="Ancient">Ancient</option>
    <option value="Cloth">Cloth</option>
    <option value="Critters">Critters</option>
    <option value="Gemstones">Gemstones</option>
    <option value="Food">Food</option>
    <option value="Metal">Metal</option>
    <option value="Wood">Wood</option>
</datalist>

<!-- roll template -->

<rolltemplate class="sheet-rolltemplate-rolls">
  <div class="sheet-container">
    <div class="sheet-header">
      {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
      {{#name}}<div class="sheet-name">{{name}}</div>{{/name}}
      {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
    </div>
    <div class="sheet-content">
      {{#allprops() title name subtitle desc}}
      <div class="sheet-key">{{key}}</div>
      <div class="sheet-value">{{value}}</div>
      {{/allprops() title name subtitle desc}}
      {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
    </div>
  </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-weapon">
  <div class="sheet-container sheet-container-weapon">
    <div class="sheet-header">
      {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
      {{#name}}<div class="sheet-name">{{name}}</div>{{/name}}
      {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
    </div>
    <div class="sheet-content">
      {{#allprops() title name subtitle desc}}
      <div class="sheet-key">{{key}}</div>
      <div class="sheet-value">{{value}}</div>
      {{/allprops() title name subtitle desc}}
      {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
    </div>
  </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-survey">
  <div class="sheet-container sheet-container-survey">
    <div class="sheet-header">
      {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
      {{#name}}<div class="sheet-name">{{name}}</div>{{/name}}
      {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
    </div>
    <div class="sheet-content">
      {{#allprops() title name subtitle desc}}
      <div class="sheet-key">{{key}}</div>
      <div class="sheet-value">{{value}}</div>
      {{/allprops() title name subtitle desc}}
      {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
    </div>
  </div>
</rolltemplate>

<!-- Scripts -->

<script type="text/worker">

function toggleTab(tabName) {
    
}

on("change:repeating_armor:armor_weight", function(eventInfo) {
   //Do something here
   // eventInfo.sourceAttribute is the full name (including repeating ID) of the attribute 
   // that originally triggered this event, 
   // however the entire string will have been translated into lowercase and thus might not be 
   // suitable for being fed directly
   // into getAttrs() or other uses without being devandalized first.
    
    getSectionIDs("armor", function(idarray) {
        var weightFields = [];
        for(var i=0; i < idarray.length; i++) {
            console.log(idarray[i]);
            weightFields.push("repeating_armor_" + idarray[i] + "_armor_weight");
        }
        getAttrs(["agility_trait", "agility_bonus"], function(values) {
            console.log(values.agility_trait);
            getAttrs(weightFields, function(weightValues) {
                console.log(weightValues);
                var evasionVal = parseInt(values.agility_trait) + parseInt(values.agility_bonus) + 10;
                Object.values(weightValues).forEach(function(weightValue) {
                    if (weightValue === "Medium") {
                        evasionVal -= 1;
                    } else if (weightValue === "Heavy") {
                        evasionVal -= 2;
                    }
                });
                console.log(evasionVal);
                setAttrs({
                    "evasion": evasionVal
                });
            });
        });
    });
});

on('clicked:survey', (info) => {
    getAttrs(["survey_type", "survey_toolrank"], function(values) {
        var seekSkill = null;
        var harvestSkill = null;
        
        startRoll("&{template:survey} {{title=Survey for @{survey_type}}} {{subtitle=@{character_name}}} {{roll1=[[1d20]]}}", (results) => {
            const total = results.results.roll1.result
            const computed = total + 100;
    
            finishRoll(
                results.rollId,
                {
                    roll1: computed
                }
            );
        });
    });
});

</script>

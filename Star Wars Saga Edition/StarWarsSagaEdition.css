@import url('https://fonts.googleapis.com/css?family=Play:wght@400&display=swap');

input.tab::before,
.textHead > span,
.textHead,
.textHead2Col,
.character-record {
    font-family: 'Play', 'Tahoma', sans-serif;
    letter-spacing: 1px;
}

:root {
	/* Light mode colors */
  --sheet-text: #333;
  --active-tab-bg1:#dcdcdc;
  --active-tab-bg2:#fcfcfc;
  --inactive-tab-bg1:#fff;
  --inactive-tab-bg2:#c8c8c8;
  --input-border: #222;
  --input-border-top: #ccc;
  --input-disabled-bg:#e3e3e3;
  --input-disabled-border:#444;
  --input-disabled-border-top:#999;
  --input-darker-text: #333;
  --checkbox-accent: #606060; /* This is now unused on the sheet because of visible-checkbox */
  --checkbox-bg:#eee;
  --checkbox-checked-bg:#ddd;
  --checkbox-border:#8f8f9d;
  --checkbox-checked-border:#0b0b0b;
  --checkbox-check:#222;
  --checkbox-disabled-bg:#cecece;
  --checkbox-disabled-check:#606060;
  --toggle-bar: #eeeefb;
  --toggle-bar-checked: #cacad5;
  --toggle-shadow: #4441;
  --header-bg: #000;
  --header-bg-highlight: #333;
  --col1-bg:#a7a8aa;
  --col1-bg-2:#c6c7ca;
  --col1-bg-2-highlight:#d7d8db;
  --header-text: #fff;
  --header-text-highlight: #b9b9b9;
  --clickable-highlight: #0004;
  --roll-button-border: #d0d0d0;
  --roll-button-bg: #a7a8aa;
  --button-inset: #ffffff80;
  --button-image: #000000;
  --button2-text: #333;
  --rule-borders: #777;
  --ct-checked-text: #fff;
  --ct-checked-bg: #888;
  --ct-checked-inset1: #5559;
  --ct-checked-inset2: #bbb9;
  --ct-checked-textshadow: #707070c0;
  --button-border: #8886;
  --button-border-bot: #7776;
  --button-text-shadow: #ffffffc0;
  --button-bg: #f5f5f5;
  --button-gradient1: #fff;
  --button-gradient2: #e6e6e6;
  --button-shadow1: #ffffff33;
  --button-shadow2: #0000000d;
  --bonuses-bg: #7794;
  --bonuses-skills-bg: #0000000c;
  --bonuses-skills-border: #8a8aa844;
  --bonuses-toggle-shadow: #4444;
  --scrollbar1-thumb: #a7a7ae;
  --scrollbar1-shaft: #d3d3dc;
  --scrollbar2-thumb: #9090ae;
  --scrollbar2-shaft: #d9d9e6;
}

.ui-dialog {
    scrollbar-color: var(--scrollbar1-thumb) var(--scrollbar1-shaft);
}

.center {
    text-align: center; /* Used inside block elements */
    justify-content: center; /* Used if display is grid or flex */
}

.center2 {
    margin-left:50%!important;
    transform:translate(-50%);
}

.vertical-center {
    display:flex;
    align-items: center;
}

.vertical-center2 {
    align-self: center;
}

.left {
    text-align: left;
}

.right {
    text-align: right;
}

.bold {
    font-weight: bold;
}

.charsheet .small,
.charsheet .smallSkills {
    font-size: 10px;
    line-height:9px;
}

.charsheet .smallSkills{
    margin-left:15px;
}

.charsheet label {
    display: inline-block;
    font-size:14px;
    width: auto;
	margin-bottom: 0px;
    padding-right:0px;
}

.long {
    width: 100px;
}

.charsheet input,
.charsheet select {
    border: 1px solid var(--input-border);
    border-top-color: var(--input-border-top);
    display: inline-block;
}

.charsheet input[disabled],
.charsheet input[readonly],
.defaultCrew:not(:checked) ~ .defaultCrewLock:not([type="checkbox"]) {
    appearance:textfield!important; /* Otherwise, this will get overridden by the input[type="number"]:hover selector rule */
	cursor: default;
	border-color: var(--input-disabled-border);
	border-top-color: var(--input-disabled-border-top);
	text-align: center;
	background-color: var(--input-disabled-bg);
	outline: none;
}

.charsheet .defaultCrew:not(:checked) ~ .defaultCrewLock[type="checkbox"] {
    background-color: var(--checkbox-disabled-bg);
}

.charsheet .defaultCrew:not(:checked) ~ .defaultCrewLock[type="checkbox"]:before {
    background-color: var(--checkbox-disabled-check);
}

input[type="number"] {
    appearance:textfield;
}

input[type="number"]:hover {
    appearance:initial;
}

.charsheet input[disabled]::-webkit-outer-spin-button,
.charsheet input[disabled]::-webkit-inner-spin-button,
.charsheet input[readonly]::-webkit-outer-spin-button,
.charsheet input[readonly]::-webkit-inner-spin-button {
	/* This is necessary for Chrome, since the spin buttons still take up space in disabled and readonly input boxes, even while invisible. */
	display:none;
}

.charsheet input.header {
    width: 100%;
}

.classHeader {
    width: calc(100% - 300px) !important;
}

/* ******** GRIDS ******** */

.flex-break {
    flex-basis: 100%;
    height: 0;
}

.flex-texthead {
    height:21px;
    margin-right:-2px;
}

.charsheet .grid-title {
    font-weight: bold;
    text-align: center;
    justify-content: center;
    align-self: end;
    line-height: 15px;
    margin-top:4px;
}

.repcontrol {
    margin-bottom: 15px;
}

/* Bonuses and Penalties Grid */
.repcontainer[data-groupname="repeating_bonuses"] > .repitem {
    display:inline-block;
    width:33.33%;
}

.repcontainer[data-groupname="repeating_bonuses"] {
    display:flex;
    flex-wrap:wrap;
}

.bonuses-grid {
    display:grid;
    grid-template-columns: 3fr 2fr;
    gap:4px;
    margin:4px;
    border: 1px solid var(--rule-borders);
    border-radius:5px;
    padding: 5px;
    box-sizing: content-box;
}

.bonuses-header {
    grid-column: 1/3;
    display: flex;
    gap: 4px;
}

.bonuses-header input[type="text"] {
    width: calc(100% - 65px);
    color: var(--input-darker-text);
}

.bonus-categories-grid {
    margin: 6px 2px 4px 4px;
    display:grid;
    grid-template-columns: 1fr 3fr 2fr;
    row-gap: 2px;
}

.bonuses-grid .bonus-categories-grid label,
.bonuses-grid .bonus-categories-grid h4 {
    font-size:13px;
}

.bonuses-grid select {
    width: auto;
}

.bonuses-defenses > div {
    display:inline-flex;
    margin-left: -5px;
    margin-right: -5px;
    width: 100%;
}

.bonuses-defenses div div {
    flex-basis: 50px;
    flex-grow: 1;
    text-align: center;
}

.bonuses-skills {
    grid-column-start: span 2;
    height: 200px;
    overflow: scroll;
    border-style: inset;
    border-width: 2px;
    padding: 5px;
    background-color: var(--bonuses-skills-bg);
    border-radius: 5px;
    border-color: var(--bonuses-skills-border);
}

/* If the bonus is active */
.bonuses-grid:has(.bonuses-header .visible-checkbox:checked) {
    background-color: var(--bonuses-bg);
    outline: 1px solid var(--rule-borders);
    scrollbar-color: var(--scrollbar2-thumb) var(--scrollbar2-shaft);
}

.bonuses-header .visible-checkbox:checked ~ input[type="text"] {
    font-weight:bold;
}

.bonuses-header .visible-checkbox:checked ~ label.toggle-bar {
    box-shadow: 0px 0px 6px 1px var(--bonuses-toggle-shadow) inset;
}

/* Vitals Grid (HP, Threshold, Condition Track, Second Wind) */
.vitals-grid {
    display: grid;
    grid-template-columns: 7fr 3fr;
    column-gap: 6px;
    row-gap: 8px;
    text-align: center;
}

.vitals-grid-hp,
.vitals-grid-sw,
.vitals-grid-dt {
    display:flex;
    flex-wrap:wrap;
    justify-content:space-between;
}

.vitals-grid-hp {
    grid-area: 1/1/span 1/span 1;
}

.vitals-grid-sw {
    grid-area: 2/1/span 1/span 1;
}

.vitals-grid-ct {
    grid-area: 1/2/span 2/span 1;
}

.vitals-grid-dt {
    grid-area: 3/1/span 1/span 2;
}

/* Defenses grid section */
.defenses-grid {
    display:grid;
    grid-template-columns:72px repeat(4,1fr) 1.5fr 1fr;
    grid-template-rows:auto;
    justify-content: center;
    column-gap: 4px;
    row-gap:1px;
    margin-bottom: 18px;
}

.charsheet .defenses-grid input[type="number"] {
    width:100%;
}

.charsheet .defenses-grid select.modtype {
    width:auto;
    min-width: 72px;
}

.defenses-grid textarea {
    grid-column-start:span 7;
}

.defenses-grid .col1 {
    padding-right: 5px;
}

.defenses-grid .shift-left {
    margin-left: -3px;
}

/* Attacks grid section */
.attacks-grid {
    display:grid;
    grid-template-columns:50px 3fr repeat(6,1fr) 2fr 1fr 2fr;
    grid-template-rows:auto;
    justify-content: center;
    grid-row-gap: 1px;
    grid-column-gap: 2px;
}

.attacks-grid-attack-title.col1,
.attacks-grid-damage-title.col1 {
    display:flex;
    height:100%;
    font-size: 13px;
    background-color:var(--col1-bg-2);
    cursor: pointer;
}

.sectAttack-show:checked ~ label.col1:hover {
    background-color: var(--col1-bg-2-highlight);
}

.attacks-grid-weapon-name {
    grid-column:2/9;
    color: var(--input-darker-text);
    font-weight:bold;
    width:100%;
}

.attacks-grid-damage-type {
    grid-column:9/12;
    width:100%;
}

.attacks-grid-full-details {
    grid-column:1/2;
    margin-top:3px!important;
}

.attacks-grid-attack-title {
    grid-column:2/3;
}

.attacks-grid-attack-total {
    grid-column:3/8;
}

.sectAttack-show:not(:checked) ~ .attacks-grid-attack-title,
.sectAttack-show:not(:checked) ~ .attacks-grid-damage-title {
    pointer-events: none;
}

.sectAttack-show:not(:checked) ~ .attacks-grid-attack-total {
    grid-column:3/6;
    text-align:left;
}

.attacks-grid-damage-title {
    grid-column: 2/3;
}

.sectAttack-show:not(:checked) ~ .attacks-grid-damage-title {
    grid-column:6/9;
}

.attacks-grid-weapon-damage {
    grid-column: 3/5;
    width:100%;
}

.sectAttack-show:not(:checked) ~ .attacks-grid-weapon-damage {
    grid-column:9/10;
}

.sectAttack-show:not(:checked) ~ .attacks-grid-damage-plus {
    grid-column:10/11;
}

.attacks-grid-damage-total {
    grid-column: 6/8;
    width:100%;
}

.sectAttack-show:not(:checked) ~ .attacks-grid-damage-total {
    grid-column: 11/12;
}

.attacks-grid-crit-info {
    grid-column: 2/10;
    font-weight:bold;
    justify-content: space-around;
}

.attacks-grid-formulas {
    grid-column: 2/12;
}

.repcontainer[data-groupname="repeating_attack"] .repitem:first-child {
    margin-top: 2px;
}

.repcontainer[data-groupname="repeating_attack"] .repitem:not(:last-child) {
    margin-bottom: 5px;
}

/* Skills Grid */
.skills-grid {
    display:grid;
    align-items:center;
    grid-template-columns:50px 4fr 1.8fr 2fr 0.4fr 2.7fr 1fr 1fr 2fr;
    grid-template-rows:auto;
    grid-row-gap: 2px;
    grid-column-gap: 4px;
    margin-bottom: 1px;
}

.skills-grid .skills-grid-name {
    grid-column: 1/3;
    min-width: 125px;
    padding-left: 5px;
}

.skills-grid .skills-grid-name label {
    padding-right: 0px;
    font-size:13px;
    color:var(--sheet-text);
}

.charsheet .skills-grid button[type="roll"] {
    margin:0px;
}

.charsheet .skills-grid select,
.charsheet .skills-grid input[type="number"],
.skills-grid input[type="text"] {
    width:100%!important;
}

.skills-grid select {
    padding-left: calc(10% - 2px);
    padding-right: 0px;
}

.skills-grid .skills-grid-notes {
    grid-column: 2/10;
    display:flex;
    justify-content: space-between;
}

.skills-grid .skills-grid-formulas {
    grid-column: 2/10;
}

.skills-grid-formulas input {
    font-size: 12px;
}

/* Force Power/Suite Grid */
.powers-flex-container {
    display:flex;
    justify-content:space-evenly;
    padding: 2px;
}

.powers-flex-container label {
    font-size:13px;
    padding-right:0px;
}

#individual-powers:checked ~ textarea,
#power-suite:checked ~ .repcontainer,
#power-suite:checked ~ .repcontrol {
    display:none;
}

.powers-grid {
    display:grid;
    grid-template-columns:48px 1fr 45px 10px 45px;
    grid-template-rows:auto;
    justify-content: center;
    grid-row-gap: 2px;
    grid-column-gap: 2px;
}

.charsheet .powers-grid button {
    width:fit-content;
}

.charsheet .powers-grid input[type="text"],
.charsheet .powers-grid input[type="number"] {
    width:auto;
}

.powers-notes-title {
    grid-column:1/6;
    font-size:12px;
    line-height:10px;
    font-weight:bold;
}

/* Equipment CSS-rules section */
.EquipmentSection {
    width: 100%;
    overflow: hidden;
    padding: 0px 2px;
}

.EquipmentSection .EquipmentSubSection {
    /* Left side column rules */
    float: left;
    width: calc(60% - 15px);
    margin-right: 10px;
}

.EquipmentSection .EquipmentSubSection2 {
    /* Right side column rules. */
    float: right;
    width: calc(40% - 15px);
}

.EquipmentSection > div {
    vertical-align: top;
}

.EquipmentSubSection {
    /*width: calc(100% - 330px) !important; */
    width:60%;
    min-width:490px;
    max-width:680px;
}

/* Equipment grids */
.equipment-title-grid-container {
    display: grid;
    grid-template-columns: 4fr repeat(3, 1fr) repeat(4, 1.25fr);
    width: 100%;
    /* The following code is for when bordered regions are implemented
    background-color: #952fbd4f;
    border-style: solid;
    border-color: #ffffff;
    border-width: 1px;
    border-radius: 8px 8px 0px 0px; */
}

.equipment-title-grid-container > span {
    /* Place objects inside to the bottom centre */
    justify-self: center;
    align-self: end;

    /* Ensure the div uses the entire width of the grid adjusting for parent padding */
    box-sizing: border-box;
    width: 100%;
    padding: 2px;

    /* Font/Text settings */
    text-align: center;
    font-weight: bold;
}

/* Equipment grid section */
.equipment-row-grid-container {
    display: grid;
    grid-template-columns: 4fr repeat(3, 1fr) repeat(4, 1.25fr);
    grid-template-rows: 40px auto;
    width: 100%;
    /* The following code is for when bordered regions are implemented
    background-color: #952fbd27;
    border-style: solid;
    border-color: #ffffff;
    border-width: 1px;
    border-top-width: 0px; */
}

.equipment-grid-row {
    justify-self: center;
    align-self: center;
    position: relative;
    box-sizing: border-box;
    width: 100%;
}

.equipment-grid-row > input {
    justify-self: start;
    width: 100%;
}

.equipment-grid-row.carried-toggle label {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

/* Repeating equipment grid (and equipment armor) rules */
.EquipmentSubSection > .repcontainer,
.EquipmentSubSection > .equipment-armor-container {
    display: grid;
    grid-auto-rows: auto;
    grid-auto-flow: row;
    width: 100%;
    /* The following code is for when bordered regions are implemented
    background-color: #952fbd27;
    border-color: #ffffff;
    border-style: solid;
    border-width: 1px;
    border-top-width: 0px;
    border-radius: 0px 0px 4px 4px; */
}

.equipment-armor-container {
    border-top-width: 0px;
    border-bottom-width: 0px;
    border-radius: 0px;
}

.EquipmentSubSection > .repcontainer > .repitem:first-child {
    margin-top: 2px;
}

.EquipmentSubSection .repitem {
    margin-bottom: 2px;
}

.equipment-details-container {
    display: grid;
    grid-template-columns: 4fr repeat(3, 1fr) repeat(4, 1.25fr);
    grid-auto-flow: column;
    width: 100%;
    box-sizing: border-box;
    position: relative;
    align-items: center;
    justify-items: center;
}

.equipment-details-container input[type="text"]{
    width: calc(100% - 4px);
}

.equipment-details-container input[type="checkbox"]{
    width: 50%;
    height: 50%;
}

textarea.equipment-note-field {
    min-height: 40px;
    height: 40px;
    margin: 0px 4px 0px 0px;
}

.equipment-note-container {
    display: grid;
    width: 100%;
    justify-self: start;
    align-self: normal;
    padding: 2px 4px 0px 40px;
}

.charsheet div.EquipmentSubSection2 {
    width:37%;
    font-size: 14px;
    font-weight: bold;
    text-align:center;
    min-width:300px;
    float:right;
}

/* Hiding weight and encumbrance with house rule */
.encumbrance-sectShow:checked ~ .encumbrance-sect,
.encumbrance-sectShow:checked ~ div .encumbrance-sect {
    display:none;
}

.encumbrance-sectShow:checked ~ div .equipment-details-container,
.encumbrance-sectShow:checked ~ .equipment-title-grid-container,
.encumbrance-sectShow:checked ~ .equipment-row-grid-container {
    grid-template-columns: 4fr repeat(3, 1fr) repeat(2, 1.25fr);
}

/* Encumbrance grid section */

.encumbrance-grid {
    display:grid;
    margin:1px;
    justify-content: center;
    grid-template-columns:2fr 1fr 10px 1fr;
    grid-template-rows:auto;
    column-gap: 4px;
    row-gap:1px;
}

.ui-dialog .charsheet .encumbrance-grid input[type="number"],
.ui-dialog .charsheet .encumbrance-grid input[type="text"] {
    width:100%;
}
    /* The button for heavy/light load is grouped with the CT buttons */

/* Alernative encumbrance grid
.encumbrance-grid2 {
    display:grid;
    margin:1px;
    justify-content: center;
    grid-template-columns:1fr 1fr 10px repeat(4, 1fr);
    grid-template-rows:auto;
    column-gap: 4px;
    row-gap:1px;
}

.ui-dialog .charsheet .encumbrance-grid2 input[type="number"],
.ui-dialog .charsheet .encumbrance-grid2 input[type="text"],
.encumbrance-grid2 span {
    width:100%;
    grid-column: span 2;
}*/

/* Crew Skills grid */

.crew-skills-grid {
    display:grid;
    margin:1px;
    justify-content: center;
    grid-template-columns:8fr 3fr 3fr 1fr 3fr 1fr 3fr;
    grid-template-rows:auto;
    row-gap:1px;
}

.crew-skills-grid div {
    align-self: center;
    text-align: center;
}

.defaultCrew:not(:checked) ~ .defaultCrewLock {
	pointer-events:none;
}

.crew-skills-grid label {
    color:var(--sheet-text);
    font-size:13px;
    line-height:13px;
}

/* ******** END GRIDS ******** */

.charsheet select.modtype {
    width: 72px;
}

.charsheet div.textHead,
.charsheet div.textHead2Col,
.charsheet label.textHead,
.charsheet label.textHead2Col {
    background-color: var(--header-bg);
    color: var(--header-text);
    font-size: 15px;
    font-weight: bold;
    text-align:center;
    border-radius: 5px;
    width:100%;
    padding:1px 2px;
	margin-left: -2px;
    line-height: 21px;
}

.charsheet label.textHead,
.charsheet label.textHead2Col {
    margin-right: 2px;
}

h4 {
    display:inline-block;
    margin-right:10px;
}

.charsheet textarea {
    width: calc(100% - 10px);
    border-left: 1px solid var(--input-border);
    border-right: 1px solid var(--input-border);
    border-bottom: 1px solid var(--input-border);
    margin-bottom: 1px;
    resize: vertical;
}

.charsheet textarea.atkFormula,
.charsheet textarea.atkNotes {
    font-size: 12px;
}

.charsheet textarea.atkFormula,
.charsheet textarea.atkNotes {
    height: 40px;
}

.charsheet textarea.ActionNotes {
    font-size: 12px;
    height:60px;
}

.charsheet textarea.StatBlock {
    font-size: 12px;
    height:60px;
    display: inline-block;
}

.charsheet div.clear {
    clear:both;
}

.charsheet div.bot-margin {
    margin-bottom: 15px;
}

.repcontainer[data-groupname="repeating_bonuses"] > .repitem {
    display:inline-block;
    width:33.33%;
}

.repcontainer[data-groupname="repeating_organization"] > .repitem {
    display: inline-block;
}

/* These next three lines are to set the width of the left and right sides equally, with space in-between. */
.repcontainer[data-groupname="repeating_organization"] > .repitem:nth-child(odd) {
	width: calc(50% + 5px);
}

.repcontainer[data-groupname="repeating_organization"] > .repitem:nth-child(even) {
	width: calc(50% - 5px);
}

.repcontainer[data-groupname="repeating_organization"] > .repitem:nth-child(odd) {
	padding-right:10px;
}

.charsheet div.repitem:last-child hr {
	display:none;
}

hr.small-hr {
    margin-top: 4px;
    margin-bottom: 4px;
}

/* ******** Buttons, Checkboxes, and Radio Buttons ******** */
.charsheet button[type=roll] {
    padding: 6px 10px 4px !important;
    font-size: 20px;
    background-color: var(--roll-button-bg);
    font-weight: bold;
    text-shadow: 1px 1px var(--button-border);
    color: var(--button-image);
    border-radius: 100px;
    border: 1px solid var(--roll-button-border);
    cursor: pointer;
    box-shadow: 0 1px 0 var(--button-inset) inset;
}

.charsheet button[type=roll].blank-roll-button::before,
.charsheet button[type=roll].wiki-url::before {
    content: "";
}

.charsheet button[type=roll].blank-roll-button,
.charsheet button[type=roll].small-roll-button {
    font-size: 12px !important;
    line-height:5px;
    margin-top:-4px;
}

.btn.small-roll-button:hover {
    background-position: 0 -8px;
}

.charsheet button[type=action],
.charsheet button[type=roll].wiki-url {
	/*The only buttons that use this right now are the button for taking second wind, and the wiki button on the Settings tab.*/
	padding: 2px 6px!important;
	font-size: 13px;
	line-height: 18px;
	color: var(--button2-text);
	text-shadow: 0 1px 1px var(--button-text-shadow);
	background-color: var(--button-bg);
	border: 1px solid var(--button-border);
	border-bottom-color: var(--button-border-bot);
	border-radius: 4px;
	box-shadow: inset 0 1px 0 var(--button-shadow1), 0 1px 2px var(--button-shadow2);
	cursor: pointer;
}

.charsheet button[type=roll].wiki-url:hover {
    background-position:0;
}

.charsheet select {
    margin:0;
}

.charsheet input[type=radio],
.charsheet input[type=checkbox] {
    /* This should no longer be in use, with all checkboxes on the sheet using visible-checkbox */
	accent-color: var(--checkbox-accent);
}

.ui-dialog .charsheet .visible-checkbox {
    appearance: none;
    background-color: var(--checkbox-bg);
    color: currentColor;
    box-sizing:content-box;
    width: 1.153847em; /* For a font-size of 13px this is 15px */
    height: 1.153847em; /* For a font-size of 13px this is 15px */
    border: 0.077em solid var(--checkbox-border); /* For a font-size of 13px this is 1px */
    border-radius: 33%;
    display: inline-grid;
    transition: 80ms all linear;
}

.ui-dialog .charsheet .visible-checkbox:focus {
    outline:none;
}

.ui-dialog .charsheet .visible-checkbox::before {
    content: "";
    width: 100%;
    height: 100%;
    box-sizing:border-box;
    border-radius:33%;
    transform: scale(0);
    transition: 80ms transform ease-in-out;
    border: 1px solid var(--checkbox-border);  /*For a font-size of 13px this is 1px */
    background: var(--checkbox-check);
    box-shadow: inset 1px 1px var(--checkbox-bg), inset -1px 1px var(--checkbox-bg), inset 1px -1px var(--checkbox-bg), inset -1px -1px var(--checkbox-bg);
}

.ui-dialog .charsheet .small .visible-checkbox {
    width: 8px;
    height: 8px;
    border-width: 1px;
}

.ui-dialog .charsheet .visible-checkbox:checked::before {
	transform: scale(1);
}

.ui-dialog .charsheet .visible-checkbox:checked {
	border-color: var(--checkbox-checked-border);
	background-color: var(--checkbox-checked-bg);
	transition: 80ms all linear;
}

.ui-dialog .charsheet .visible-checkbox:hover::before {
	filter: contrast(70%);
}

/* Begin Hide/Show toggle */
label.toggle-bar {
    display: inline-block;
    width: 38px;
    height: 17px;
    margin-bottom:-3px;
    box-sizing: border-box;
    background-color: var(--toggle-bar);
    border-radius: 30px;
    cursor: pointer;
    transition: background-color .25s;
    box-shadow: 0px 0px 6px 1px var(--toggle-shadow) inset
}

.toggle-bar:has(input:checked) {
    background-color: var(--toggle-bar-checked);
}

label.toggle-bar input {
    display: none;
}

.toggle-knob {
    display: block;
    position: relative;
}

.toggle-knob::after {
    content:"";
    background-image:url("https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Star%20Wars%20Saga%20Edition/eyecons/eye-closed-gray.png");
    background-size:85% 85%;
    background-repeat:no-repeat;
    background-position:center;
    background-color: #eef;
    width: 13px;
    height: 13px;
    border: 1px solid #e9e9ee;
    border-radius: 50%;
    box-shadow: 0 0 3px #333b;
    position: relative;
    top: 1px;
    left: 1px;
    display: flex;
    transition: all .15s linear;
}

input:checked + .toggle-knob::after {
    background-image:url("https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Star%20Wars%20Saga%20Edition/eyecons/eye-open-gray.png");
    transform: translateX(21px);
}
/* End Hide/Show Toggle */

/* ******** END Buttons, Checkboxes, and Radio Buttons ******** */

/* ********Condition Track and Heavy Load labels ******** */
.charsheet input.encumbrance-load:checked ~ .light-load,
.charsheet input.encumbrance-load:not(:checked) ~ .heavy-load {
    display:none;
}

.charsheet input.ct-label + label,
.charsheet input.encumbrance-load ~ label {
	text-align: center;
    font-family: 'Play';
	user-select: none;
	color: var(--button2-text);
	text-shadow: 0 1px 1px var(--button-text-shadow);
	background-color: var(--button-bg);
	border: 1px solid var(--button-border);
	border-bottom-color: var(--button-border-bot);
	box-shadow: inset 0 2px 0 var(--button-shadow1), 0 2px 2px var(--button-shadow2);
	cursor: pointer;
}

.charsheet input.ct-label + label {
    width:80%;
	padding: 0px 3px;
    margin-left:3px;
    margin-top:2px;
    font-size: 12px;
    line-height: 1.3em;
    border-radius: 100px;
}

.charsheet input.encumbrance-load ~ label {
    width:100%;
    padding:10px;
    border-radius:15px;
    font-size:13px;
    font-weight: bold!important; /* Otherwise, this gets overriden by another rule in dark mode */
    letter-spacing: 1px;
}

.charsheet input[type="checkbox"].ct-persistent + label{
    margin-left:0px;
    margin-top:6px;
    width:89%;
    line-height: 1.6em;
}

.charsheet input.ct-label:checked + label,
.charsheet input.encumbrance-load ~ .heavy-load {
	text-shadow: 0 1px 1px var(--ct-checked-textshadow);
	background-color: var(--ct-checked-bg);
    color:var(--ct-checked-text);
	box-shadow: 1px 2px 2px var(--ct-checked-inset1) inset, -1px -1px 2px var(--ct-checked-inset2) inset;
}

.charsheet input.encumbrance-load ~ .heavy-load {
    font-size:15px;
}

.charsheet input.ct-label:hover + label,
.charsheet input.encumbrance-load:hover ~ label {
	filter: brightness(103%);
}

.charsheet input.ct-label:checked:hover + label,
.charsheet input.encumbrance-load:checked:hover ~ label {
	filter: brightness(109%);
}

.charsheet input.ct-label:active + label,
.charsheet input.encumbrance-load:active ~ label {
	filter: contrast(95%);
}

.charsheet input.ct-label:checked:active + label,
.charsheet input.encumbrance-load:checked:active ~ label {
	filter: contrast(105%);
}

/* ********END Condition Track labels ******** */

/* ******** Hiding sections and show/hide toggle ******** */
.forceShow:not(:checked) ~ .forceBody,
.forceShow:not(:checked) ~ div.repcontainer .forceBody,
.organizationShow:not(:checked) ~ .organizationBody,
.SRShow:not(:checked) ~ .SRBody,
.DRShow:not(:checked) ~ .DRBody,
.immuneShow:not(:checked) ~ .immuneBody,
.statusBody:not(:checked) ~ .statusBody,
.pilotSkillShow:not(:checked) ~ .pilotBody,
.commanderSkillShow:not(:checked) ~ .commanderBody,
.sectAttack-show:not(:checked) ~ .sectAttack,
.sectCon-show:checked ~ .sectCon,
.sect-show:not(:checked) ~ .sect,
.sect-show:checked ~ .sect2,
.skillShow:not(:checked) + .skillBody,
.other-mod-toggle:checked ~ div .other-mod-off,
.other-mod-toggle:checked ~ .other-mod-off,
.other-mod-toggle:not(:checked) ~ div .other-mod-on,
.other-mod-toggle:not(:checked) ~ .other-mod-on {
    display: none;
}

.hidden {
    display: none !important;
}

/* Section for showing/hiding specific skills */
.athleticsShow:not(:checked) ~ .athleticsBody,
.athleticsShow:not(:checked) ~ div.repcontainer .athleticsBody,
.athleticsShow:checked ~ .noathleticsBody,
.athleticsShow:checked ~ div.repcontainer .noathleticsBody {
    display:none!important;
}

.individual-skills-show:checked + .sect-show:not(:checked) ~ .sect {
    display:block;
}

.individual-skills-show:checked + .sect-show:not(:checked) ~ .sect .skill:not(:has(.trained:checked)) {
    display:none;
}

.individual-skills-show:checked + .sect-show:not(:checked) ~ .sect .skill:has(.trained:checked) {
    display:block;
}

.clickable:hover {
    cursor:pointer;
    text-shadow: 0px 0px 3px var(--clickable-highlight);
}

.individual-skills-show:checked + input:not(:checked) + label.clickable.textHead,
.individual-skills-show:checked + input:not(:checked) + label.clickable.textHead2Col {
    /* To fix the margin when individual skills still show */
    margin-bottom: 0px;
}

.charsheet option.CustomCrew:checked + span {
	display:none;
}

.itemcontrol {
    /* This class is used by repeating sections */
	z-index: 5;
}

/* ******** END Hiding sections and show/hide toggle ******** */

/* Code for hideable sections */

label.clickable.textHead:hover,
label.clickable.textHead2Col:hover {
    background-color: var(--header-bg-highlight);
    text-shadow: 0px 0px 4px var(--header-text-highlight);
}

label.clickable.textHead:hover:has(button:hover),
label.clickable.textHead2Col:hover:has(button:hover) {
    /* So that the label isn't lit up when just hovering over a button on it */
    background-color: var(--header-bg);
    text-shadow:none;
}

input:not(:checked) + label.clickable.textHead,
input:not(:checked) + label.clickable.textHead2Col {
    margin-bottom:5px;
}

/* ******** Start code for tabs ******** */
.charsheet div.tab-content {
    display: none;
}

.charsheet input.tab1:checked ~ div.tab1,
.charsheet input.tab2:checked ~ div.tab2,
.charsheet input.tab3:checked ~ div.tab3,
.charsheet input.tab4:checked ~ div.tab4 {
    display: block;
}

.rule-sections {
	border: 1px solid var(--rule-borders);
	border-radius: 5px;
	padding: 5px;
	margin-bottom: 5px;
}

.visible-checkbox + span {
    margin-left:5px;
}

.charsheet input.tab {
    width: 150px;
    height: 20px;
    position: relative;
    left: 6px;
    margin: 0px -1px;
    cursor: pointer;
    z-index: 1;
	border:none;
    appearance:initial;
}

.charsheet input.tab::before {
    content: attr(title);
    text-align: center;
    display: inline-block;
    background: var(--inactive-tab-bg1);
    background: linear-gradient(to top, var(--inactive-tab-bg2), var(--inactive-tab-bg1), var(--inactive-tab-bg2));
    width: 150px;
    height: 22px;
    font-size: 18px;
    letter-spacing: 1px;
}

.charsheet input.tab:checked::before {
    background: var(--active-tab-bg1);
    background: linear-gradient(to top, var(--active-tab-bg2), var(--active-tab-bg1), var(--active-tab-bg2));
}

.charsheet input.tab:hover::before {
    filter: brightness(105%);
}

.charsheet input.tab:not(:first-child)::before {
    border-left: none;
}

.charsheet div.tab-content {
    margin: 2px 0 0 5px;
    padding: 5px;
}

/* ******** Tables ******** */
.charsheet table {
    text-align: center;
    width: 100%;
}

.charsheet table th {
    font-size: 13px;
    font-weight: bold;
    text-align: center;
}

.sheet-3colrow .sheet-col {
	width: calc(33% - 21px);
	margin-right: 30px;
}

.sheet-2colrow .sheet-col {
	width: calc(50% - 20px);
	margin-right: 30px;
}

.col1,
.skillsCrewCol1 {
    font-size: 13px;
    font-weight: bold;
    text-align: left;
    padding-left: 5px;
}

.col1 {
    background-color: var(--col1-bg);
    border-radius: 5px;
}

.charsheet .skillsCrewCol1 {
    min-width:130px;
    line-height:10px;
    text-align:left;
}

.grid-table {
	display:grid;
}

.spacing {
    border-spacing: 1px 1px;
    border-collapse: separate;
    padding: 0px 1px;
}

.sheet-table {
    display: table;
    width: 100%;
}

.sheet-table-header {
    display: table-cell;
    vertical-align: bottom;
    font-size: 13px;
    font-weight: bold;
    text-align: center;
}

.sheet-table-data {
    display: table-cell;
    vertical-align: middle;
    padding-bottom: 1px;
}

.sheet-table-row {
    display: table-row;
    vertical-align: bottom;
}

/* ******** LOGOS ******** */

.charsheet div.character-record {
    font-size: 14px;
    font-weight: bold;
    text-align:center;
    width:300px;
    float:right;
}

.charsheet div.character-record label {
	cursor: pointer;
}

.sheet-darkmode .character-record img {
    content: url("https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Star%20Wars%20Saga%20Edition/SWSE%20dark%20mode%20title.png");
}

.character-record input[type="checkbox"]:checked + img {
    content: url("https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Star%20Wars%20Saga%20Edition/SWSE%20yellow%20title.png");
}

/* ******** DARK MODE FOR SHEET ******** */
:root {
	/* Dark mode colors*/
  --dm-sheet-text: #f5f5f5;
  --dm-input-bg: #3f3f50;
  --dm-input-text: #f5f5f5;
  --dm-placeholder-text: #a1a1a9;
  --dm-scrollbar1-thumb: #5c5c84;
  --dm-scrollbar1-shaft: #2e2e40;
  --dm-scrollbar2-thumb: #1e1e44;
  --dm-scrollbar2-shaft: #60608c;
  --dm-scrollbar3-shaft: #232331;
  --dm-col1: #55555a;
  --dm-col1-highlight: #727275;
  --dm-input-border: #707099;
  --dm-input-border-top: #44445c;
  --dm-input-disabled-bg: #334;
  --dm-input-disabled-text: #ddd;
  --dm-input-disabled-border: #444457;
  --dm-input-disabled-border-top: #393949;
  --dm-checkbox-accent: #668;
  --dm-checkbox-bg: #202055;
  --dm-checkbox-bg-checked: #227;
  --dm-checkbox-border: #4b4b8f;
  --dm-checkbox-border-checked: #7497ea;
  --dm-checkbox-check: #8cd0ff;
  --dm-checkbox-disabled-bg: #303060;
  --dm-checkbox-disabled-check: #719cbb;
  --dm-header-bg: #338;
  --dm-header-bg-highlight: #44a;
  --dm-header-text: #f5f5f5;
  --dm-clickable-hover:#eee;
  --dm-clickable-highlight:#fff6;
  --dm-button-bg: #747492;
  --dm-button-gradient1:#d9d9e3;
  --dm-button-gradient2: #b8b8cc;
  --dm-button-border:#7799;
  --dm-button-top-border: #bbe9;
  --dm-button-shadow:#cacaea;
  --dm-tab-active-gradient1: #333;
  --dm-tab-active-gradient2: #6e6e6e;
  --dm-tab-inactive-gradient1: #444;
  --dm-tab-inactive-gradient2: #292929;
  --dm-toggle-bar: #446;
  --dm-toggle-bar-checked: #3c3cbc;
  --dm-toggle-shadow: #0008;
  --dm-toggle-knob:#bbbbd7;
  --dm-toggle-knob-border:#6c6c8f;
  --dm-toggle-knob-active:#d1d1ec;
  --dm-toggle-knob-active-border:#9d9dcc;
  --dm-bonuses-outline: #556;
  --dm-bonuses-outline-active: #8a8aa8;
  --dm-bonuses-toggle-shadow: #000a;
  --dm-bonuses-toggle-outline: #0006;
  /* Colors below are for the CT buttons */
  --dm-ct-bg: #747492;
  --dm-ct-border: #000f;
  --dm-ct-text: #f5f5f5;
  --dm-ct-checked-bg: #6e6e87;
  --dm-ct-inset1: #0005;
  --dm-ct-inset2: #fff9;
  --dm-ct-checked-inset1: #0005;
  --dm-ct-checked-inset2: #fff9;
  --dm-ct-checked-border: #88a6;
  --dm-ct-checked-text:#f5f5f5;
  --dm-ct-normal:#00a000;
  --dm-ct-minus1:#69a500;
  --dm-ct-minus2:#b9ad00;
  --dm-ct-minus5:#cc6600;
  --dm-ct-minus10:#cc0000;
  --dm-ct-helpless:#6600cc;
  --dm-ct-persistent:#00bbbb;
  --dm-heavy-load:#cc0000;
}

.sheet-darkmode .ui-dialog {
	scrollbar-color: var(--dm-scrollbar1-thumb) var(--dm-scrollbar1-shaft);
}

.sheet-darkmode textarea {
	scrollbar-color: var(--dm-scrollbar2-thumb) var(--dm-scrollbar2-shaft);
    scrollbar-width: thin;
}

.sheet-darkmode .charsheet {
	background-color: var(--dark-surface1);
	color: var(--dark-primarytext);
}

.sheet-darkmode .charsheet .col1 {
	background-color: var(--dm-col1);
    color: var(--dark-primarytext);
}

.sheet-darkmode .charsheet .sectAttack-show:checked ~ label.col1:hover {
    background-color: var(--dm-col1-highlight);
}

.sheet-darkmode .charsheet hr {
	opacity: 0.3;
}

.sheet-darkmode .charsheet input,
.sheet-darkmode .charsheet select,
.sheet-darkmode .charsheet textarea {
    background-color: var(--dm-input-bg);
	color: var(--dm-input-text);
	border: 1px solid var(--dm-input-border);
	border-top-color: var(--dm-input-border-top);
}

.sheet-darkmode .charsheet input::placeholder,
.sheet-darkmode .charsheet textarea::placeholder {
	color: var(--dm-placeholder-text);
}

.sheet-darkmode .charsheet input::-moz-placeholder,
.sheet-darkmode .charsheet textarea::-moz-placeholder {
	color: var(--dark-primarytext);
}

/* Begin sectio for checkboxes */
.sheet-darkmode .charsheet input[type=radio],
.sheet-darkmode .charsheet input[type=checkbox] {
	accent-color: var(--dm-checkbox-accent);
}

.sheet-darkmode .ui-dialog .charsheet .visible-checkbox {
	background-color: var(--dm-checkbox-bg);
	border-color: var(--dm-checkbox-border);
}

.sheet-darkmode .ui-dialog .charsheet .visible-checkbox::before {
	border-color: var(--dm-checkbox-border-checked);
    background: var(--dm-checkbox-check);
    box-shadow: inset 0.077em 0.077em var(--dm-checkbox-bg), inset -0.077em 0.077em var(--dm-checkbox-bg), inset 0.077em -0.077em var(--dm-checkbox-bg), inset -0.077em -0.077em var(--dm-checkbox-bg);
}

.sheet-darkmode .ui-dialog .charsheet .visible-checkbox:checked {
	background-color: var(--dm-checkbox-bg-checked);
	border-color: var(--dm-checkbox-border-checked);
	transition: 60ms all linear;
}

.sheet-darkmode .charsheet .visible-checkbox:hover {
    filter: brightness(125%);
}

.sheet-darkmode .charsheet .visible-checkbox:hover::before {
    filter:none; /* This gets rid of the contrast filter from light mode. */
}
/* End section for checkboxes */

/* Start section for crew */
.sheet-darkmode .skills-grid .skills-grid-name label {
    color:var(--dark-primarytext);
}

.sheet-darkmode .crew-skills-grid label {
    color:var(--dark-primarytext);
}

.sheet-darkmode .charsheet input[disabled],
.sheet-darkmode .charsheet input[readonly],
.sheet-darkmode .defaultCrew:not(:checked) ~ .defaultCrewLock {
	background-color: var(--dm-input-disabled-bg);
	color: var(--dm-input-disabled-text);
	border: 1px solid var(--dm-input-disabled-border);
	border-top-color: var(--dm-input-disabled-border-top);
}

.sheet-darkmode .charsheet .defaultCrew:not(:checked) ~ .defaultCrewLock[type="checkbox"] {
    background-color: var(--dm-checkbox-disabled-bg);
}

.sheet-darkmode .charsheet .defaultCrew:not(:checked) ~ .defaultCrewLock[type="checkbox"]::before {
    box-shadow: inset 1em 1em var(--dm-checkbox-disabled-check); /*The dimensions don't actually make a difference, as long as they are larger than the width and height. */
}
/* End section for crew */

.sheet-darkmode .charsheet div.textHead2Col,
.sheet-darkmode .charsheet div.textHead,
.sheet-darkmode .charsheet label.textHead,
.sheet-darkmode .charsheet label.textHead2Col {
	background-color: var(--dm-header-bg);
	color: var(--dm-header-text);
    text-shadow: 1px 1px 1px black;
}

.sheet-darkmode .charsheet h4 {
    color: var(--dark-secondarytext);
}

.sheet-darkmode .clickable:hover {
    color: var(--dm-clickable-hover);
    text-shadow: 0px 0px 3px var(--dm-clickable-highlight);
}

.sheet-darkmode .charsheet label.clickable.textHead:hover,
.sheet-darkmode .charsheet label.clickable.textHead2Col:hover {
    color: var(--dm-header-text);
    background-color: var(--dm-header-bg-highlight);
    text-shadow: 0px 0px 4px var(--header-text-highlight), 1px 1px 1px black;
}

.sheet-darkmode .charsheet label.clickable.textHead:hover:has(button:hover),
.sheet-darkmode .charsheet label.clickable.textHead2Col:hover:has(button:hover) {
    /* So that the label isn't lit up when just hovering over a button on it */
    background-color: var(--dm-header-bg);
}

.sheet-darkmode .charsheet input.tab {
	border:none;
}

.sheet-darkmode .charsheet input.tab::before {
	background: linear-gradient(to top, var(--dm-tab-inactive-gradient1), var(--dm-tab-inactive-gradient2), var(--dm-tab-inactive-gradient1));
}

.sheet-darkmode .charsheet input.tab:checked::before {
    background: linear-gradient(to top, var(--dm-tab-active-gradient1), var(--dm-tab-active-gradient2), var(--dm-tab-active-gradient1));
}

.sheet-darkmode .charsheet input.tab:hover::before {
    filter: brightness(120%);
}

.sheet-darkmode .charsheet button[type=roll] {
    background-color: var(--dm-button-bg);
    /* These do not use color variables because linear-gradients have problems with them as background-images. */
    background-image: -moz-linear-gradient(top, #d9d9e3, #b8b8cc);
    background-image: -ms-linear-gradient(top, #d9d9e3, #b8b8cc);
    background-image: -webkit-linear-gradient(top, #d9d9e3, #b8b8cc);
    background-image: -o-linear-gradient(top, #d9d9e3, #b8b8cc);
    background-image: linear-gradient(top, #d9d9e3, #b8b8cc);
    border: 1px solid var(--dm-button-border);
    border-top: 1px outset var(--dm-button-top-border);
    box-shadow: 0 1px 0 var(--dm-button-shadow) inset;
}

/* Start section for toggle switches */
.sheet-darkmode label.toggle-bar {
    background-color: var(--dm-toggle-bar);
    box-shadow: 0px 0px 6px 1px var(--dm-toggle-shadow) inset
}

.sheet-darkmode .toggle-bar:has(input:checked) {
    background-color: var(--dm-toggle-bar-checked);
}

.sheet-darkmode .toggle-knob::after {
    background-image:url("https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Star%20Wars%20Saga%20Edition/eyecons/eye-closed-black.png");
    background-color: var(--dm-toggle-knob);
    border-color: var(--dm-toggle-knob-border);
}

.sheet-darkmode input:checked + .toggle-knob::after {
    background-image:url("https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Star%20Wars%20Saga%20Edition/eyecons/eye-open-black.png");
    background-color: var(--dm-toggle-knob-active);
    border-color: var(--dm-toggle-knob-active-border);
}
/* End section for toggle switches */

/* Start section for Bonuses and Penalties */
.sheet-darkmode .charsheet .bonuses-grid {
    border: 1px solid var(--dm-bonuses-outline);
}

.sheet-darkmode .charsheet .bonuses-skills {
    background-color: #0002;
    border-color: #8a8aa888;
}

.sheet-darkmode .charsheet .bonuses-grid:has(.bonuses-header .visible-checkbox:checked) {
    /* If the bonus is active */
    border-color: var(--dm-bonuses-outline-active);
    outline: 1px solid var(--dm-bonuses-outline-active);
    scrollbar-color: var(--dm-scrollbar1-thumb) var(--dm-scrollbar3-shaft);
}

.sheet-darkmode .charsheet .bonuses-header .visible-checkbox:checked ~ label.toggle-bar {
    box-shadow: 0px 0px 6px 1px var(--dm-bonuses-toggle-shadow) inset;
    outline: 1px solid var(--dm-bonuses-toggle-outline);
}
/* End section for Bonuses and Penalties */

/* Start section for condition track buttons and heavy load warning */
.sheet-darkmode .charsheet input.ct-label + label,
.sheet-darkmode .charsheet input.encumbrance-load ~ label {
	background-color: var(--dm-ct-bg);
    color:var(--dm-ct-text);
    font-weight:400;
    text-shadow: 0px 0px 2px black;
    box-shadow: 0px 1px 1px var(--dm-ct-checked-inset2) inset, -1px -2px 2px var(--dm-ct-checked-inset1) inset, 0 2px 2px var(--button-shadow2);
    border: 1px solid var(--dm-ct-border);
}

.sheet-darkmode .charsheet input.ct-label:checked + label,
.sheet-darkmode .charsheet input.encumbrance-load:checked ~ label {
	box-shadow: 1px 2px 2px var(--dm-ct-checked-inset1) inset, -1px -1px 2px var(--dm-ct-checked-inset2) inset;
	border: 1px solid var(--dm-ct-checked-border);
    font-weight:bold;
    text-shadow: 0px 0px 2px black, 0px 0px 5px black;
}

.sheet-darkmode .charsheet input.ct-normal:checked + label {
	background-color: var(--dm-ct-normal);
}

.sheet-darkmode .charsheet input.ct-minus1:checked + label {
	background-color: var(--dm-ct-minus1);
}

.sheet-darkmode .charsheet input.ct-minus2:checked + label {
	background-color: var(--dm-ct-minus2);
}

.sheet-darkmode .charsheet input.ct-minus5:checked + label {
	background-color: var(--dm-ct-minus5);
}

.sheet-darkmode .charsheet input.ct-minus10:checked + label {
	background-color: var(--dm-ct-minus10);
}

.sheet-darkmode .charsheet input.ct-helpless:checked + label {
	background-color: var(--dm-ct-helpless);
}

.sheet-darkmode .charsheet input.ct-persistent:checked + label {
	background-color: var(--dm-ct-persistent);
}

.sheet-darkmode .charsheet input.encumbrance-load:checked ~ label {
	background-color: var(--dm-heavy-load);
}

.sheet-darkmode .charsheet input.ct-label:hover + label,
.sheet-darkmode .charsheet input.encumbrance-load:hover ~ label {
	filter: brightness(105%);
}

.sheet-darkmode .charsheet input.ct-label:checked:hover + label,
.sheet-darkmode .charsheet input.encumbrance-load:checked:hover ~ label {
	filter: brightness(105%);
}

/* REMARK: This doesn't work right now, but hopefully it can be fixed eventually. */
/*.sheet-darkmode .charsheet input::part(-webkit-outer-spin-button):hover,
.sheet-darkmode .charsheet input[type=number]::part(-webkit-outer-spin-button) {

	filter:invert(80%);
}*/

/* ******** ROLL TEMPLATES ******** */

	/* Colors for light mode Rolltemplates */
.charsheet, /* I don't know why this is necessary, but something needs to be first or else sagadefault stops working. */
.sheet-rolltemplate-sagadefault,
.sheet-rolltemplate-attack,
.sheet-rolltemplate-skill,
.sheet-rolltemplate-second-wind,
.sheet-rolltemplate-statBlock,
.sheet-rolltemplate-Status {
  --rt-text: #000;
  --rt-bg: #fff;
  --rt-header-bg: #000;
  --rt-header-text: #fff;
  --rt-subheader-bg: #333;
  --rt-subheader-text: #fff;
  --rt-border: #000;
  --rt-tr-odd: #fff;
  --rt-tr-even: #ededed;
  --rt-result-bg: #000;
  --rt-result-text: #f5f5f5;
  --rt-result-border: #a7a8aa;
  --rt-result-crit-bg: #00bfff;
  --rt-result-crit-border: #00bfff;
  --rt-result-fail-bg: #b31515;
  --rt-result-fail-border: #b31515;
  --rt-result-mixed-bg: #525cca;
  --rt-result-mixed-border: #525cca;
}

	/* All roll templates (or most of them, anyway) */
.sheet-rolltemplate-sagadefault table,
.sheet-rolltemplate-attack table,
.sheet-rolltemplate-skill table,
.sheet-rolltemplate-second-wind table,
.sheet-rolltemplate-statBlock table,
.sheet-rolltemplate-Status table {
    width:100%;
    font-size: 1em;
	background-color: var(--rt-bg);
	color: var(--rt-text);
    font-family: "Helvetica Neue", Helvetica, sans-serif;
    border-collapse:separate;
    border:solid var(--rt-border) 1px;
	border-top-left-radius:5px;
	border-top-right-radius:5px;
}

.sheet-rolltemplate-sagadefault th,
.sheet-rolltemplate-attack th,
.sheet-rolltemplate-skill th,
.sheet-rolltemplate-second-wind th,
.sheet-rolltemplate-statBlock th,
.sheet-rolltemplate-Status th {
    background-color: var(--rt-header-bg);
    color: var(--rt-header-text);
	text-align: center;
    line-height: 1.6em;
    font-size: 1.2em;
    border-top-left-radius: 2.5px;
	border-top-right-radius: 2.5px;
}

.sheet-rolltemplate-sagadefault .sheet-subheader,
.sheet-rolltemplate-attack .sheet-subheader {
    background-color: var(--rt-subheader-bg);
    color: var(--rt-subheader-text);
    font-size: 1em;
    font-style: italic;
    text-align: center;
}

.sheet-rolltemplate-sagadefault .sheet-tcat,
.sheet-rolltemplate-attack .sheet-tcat,
.sheet-rolltemplate-skill .sheet-tcat,
.sheet-rolltemplate-second-wind .sheet-tcat,
.sheet-rolltemplate-statBlock .sheet-tcat,
.sheet-rolltemplate-Status .sheet-tcat {
    font-weight: bold;
}

.sheet-rolltemplate-sagadefault td,
.sheet-rolltemplate-attack td,
.sheet-rolltemplate-skill td,
.sheet-rolltemplate-second-wind td {
    padding: 5px;
    border: 1px solid var(--rt-border);
    text-align: left;
}
.sheet-rolltemplate-sagadefault tr:nth-child(odd),
.sheet-rolltemplate-attack tr:nth-child(odd),
.sheet-rolltemplate-skill tr:nth-child(odd),
.sheet-rolltemplate-second-wind tr:nth-child(odd) {
    background-color: var(rt-tr-odd);
}

.sheet-rolltemplate-sagadefault tr:nth-child(even),
.sheet-rolltemplate-attack tr:nth-child(even),
.sheet-rolltemplate-skill tr:nth-child(even),
.sheet-rolltemplate-second-wind tr:nth-child(even) {
    background-color: var(--rt-tr-even);
}

		/*inline roll formatting for most templates*/
.sheet-rolltemplate-sagadefault .inlinerollresult,
.sheet-rolltemplate-attack .inlinerollresult,
.sheet-rolltemplate-skill .inlinerollresult,
.sheet-rolltemplate-second-wind .inlinerollresult {
    display: inline-block;
    min-width: 1.5em;
    text-align: center;
    border: 2px solid var(--rt-result-border);
	border-radius: 5px;
    background-color: var(--rt-result-bg);
    color: var(--rt-result-text);
}

.sheet-rolltemplate-sagadefault .inlinerollresult.fullcrit,
.sheet-rolltemplate-attack .inlinerollresult.fullcrit,
.sheet-rolltemplate-skill .inlinerollresult.fullcrit,
.sheet-rolltemplate-second-wind .inlinerollresult.fullcrit {
    background-color: var(--rt-result-crit-bg);
    border-color: var(--rt-result-crit-border);
}

.sheet-rolltemplate-sagadefault .inlinerollresult.fullfail,
.sheet-rolltemplate-attack .inlinerollresult.fullfail,
.sheet-rolltemplate-skill .inlinerollresult.fullfail,
.sheet-rolltemplate-second-wind .inlinerollresult.fullfail {
    background-color: var(--rt-result-fail-bg);
    border-color: var(--rt-result-fail-border);
}

.sheet-rolltemplate-sagadefault .inlinerollresult.importantroll,
.sheet-rolltemplate-attack .inlinerollresult.importantroll,
.sheet-rolltemplate-skill .inlinerollresult.importantroll,
.sheet-rolltemplate-second-wind .inlinerollresult.importantroll {
    background-color: var(--rt-result-mixed-bg);
    border-color: var(--rt-result-mixed-border);
}

.sheet-rolltemplate-sagadefault div,
.sheet-rolltemplate-attack div,
.sheet-rolltemplate-skill div,
.sheet-rolltemplate-second-wind div {
    width:100%;
    max-width:400px;
}

/* INDIVIDUAL ROLL TEMPLATES*/

	/* Sheet roll template for Saga Default */
		/* There are no special elements for Saga Default template.*/

	/* Sheet roll template for Attacks */
		/* There are no special elements for Attack template.*/

	/* Sheet roll template for Skills */
.sheet-rolltemplate-skill table {
    border-radius: 5px;
}

.sheet-rolltemplate-skill th {
    border-top-left-radius: 2.5px;
	border-top-right-radius: 0px;
	text-align: center;
}

.sheet-rolltemplate-skill tr:first-child td {
    text-align: center;
    border-left: none;
	border-top-right-radius: 2.5px;
    width: 65px;
}

.sheet-rolltemplate-skill tr:last-child td {
    border-bottom-left-radius: 2.5px;
	border-bottom-right-radius: 2.5px;
}

.sheet-rolltemplate-skill tr:only-child th{
	border-bottom-left-radius: 2.5px;
}

.sheet-rolltemplate-skill tr:only-child td{
	border-top-right-radius: 2.5px;
	border-bottom-right-radius: 2.5px;
	border-bottom-left-radius: 0px;
}

	/* Sheet roll template for Second Wind */
.sheet-rolltemplate-second-wind table {
    border-radius:5px;
}

.sheet-rolltemplate-second-wind .sheet-tcat {
    font-weight: bold;
}

.sheet-rolltemplate-second-wind th {
    text-align: center;
}

.sheet-rolltemplate-second-wind tr:first-child {
	background-color: transparent;
}

.sheet-rolltemplate-second-wind tr:first-child td {
    text-align: center;
    border-left: none;
    width: 75px;
}

.sheet-rolltemplate-second-wind tr:last-child {
    border-bottom-left-radius: 5px;
	border-bottom-right-radius: 5px;
}

	/* Sheet roll template for stat block */
.sheet-rolltemplate-statBlock td,
.sheet-rolltemplate-Status td {
    text-align:left;
	padding: 2px;
}

.sheet-rolltemplate-statBlock .inlinerollresult,
.sheet-rolltemplate-Status .inlinerollresult {
	/* This makes the roll appear as regular text, though the formula is still displayed if hovered. */
    display: inline;
    background-color: transparent;
    font-weight: normal;
	font-size: 1em;
	padding: 0px;
    border: 0px;
}

/* ******** DARK MODE FOR ROLL TEMPLATES ******** */

	/* Colors for dark mode Rolltemplates */
.charsheet,
.sheet-rolltemplate-sagadefault.sheet-rolltemplate-darkmode,
.sheet-rolltemplate-attack.sheet-rolltemplate-darkmode,
.sheet-rolltemplate-skill.sheet-rolltemplate-darkmode,
.sheet-rolltemplate-second-wind.sheet-rolltemplate-darkmode,
.sheet-rolltemplate-statBlock.sheet-rolltemplate-darkmode,
.sheet-rolltemplate-Status.sheet-rolltemplate-darkmode {
  --rtdm-text: #f0f0f0;
  --rtdm-bg: #404062;
  --rtdm-header-bg: #000;
  --rtdm-header-text: #e6e6e6;
  --rtdm-subheader-bg: #06063c;
  --rtdm-subheader-text: #f5f5f5;
  --rtdm-tr-odd: #2e2e46;
  --rtdm-tr-even: #404062;
  --rtdm-result-text: #f5f5f5;
  --rtdm-result-bg: #4a206c;
  --rtdm-result-border: #732d95;
  --rtdm-result-crit-bg: #00a0c2;
  --rtdm-result-crit-border: #13ebee;
  --rtdm-result-fail-bg: #790505;
  --rtdm-result-fail-border: #c41919;
  --rtdm-result-mixed-bg: #3944ca;
  --rtdm-result-mixed-border: #4a57ed;
}

.sheet-rolltemplate-sagadefault.sheet-rolltemplate-darkmode,
.sheet-rolltemplate-attack.sheet-rolltemplate-darkmode,
.sheet-rolltemplate-skill.sheet-rolltemplate-darkmode,
.sheet-rolltemplate-second-wind.sheet-rolltemplate-darkmode,
.sheet-rolltemplate-statBlock.sheet-rolltemplate-darkmode,
.sheet-rolltemplate-Status.sheet-rolltemplate-darkmode {
    background-color: var(--dark-surface2);
	/* This uses the default Roll20 color variable to prevent colored rectangles from poking through in the rounded corners. */
}

.sheet-rolltemplate-sagadefault.sheet-rolltemplate-darkmode table,
.sheet-rolltemplate-attack.sheet-rolltemplate-darkmode table,
.sheet-rolltemplate-skill.sheet-rolltemplate-darkmode table,
.sheet-rolltemplate-second-wind.sheet-rolltemplate-darkmode table,
.sheet-rolltemplate-statBlock.sheet-rolltemplate-darkmode table,
.sheet-rolltemplate-Status.sheet-rolltemplate-darkmode table {
	background-color: transparent;
}

.sheet-rolltemplate-sagadefault.sheet-rolltemplate-darkmode th,
.sheet-rolltemplate-attack.sheet-rolltemplate-darkmode th,
.sheet-rolltemplate-skill.sheet-rolltemplate-darkmode th,
.sheet-rolltemplate-second-wind.sheet-rolltemplate-darkmode th,
.sheet-rolltemplate-statBlock.sheet-rolltemplate-darkmode th,
.sheet-rolltemplate-Status.sheet-rolltemplate-darkmode th {
	background-color: var(--rtdm-header-bg);
    color: var(--rtdm-header-text) !important; /* The default dark mode has an important tag that needs to be overwritten. */
}

.sheet-rolltemplate-sagadefault.sheet-rolltemplate-darkmode td,
.sheet-rolltemplate-attack.sheet-rolltemplate-darkmode td,
.sheet-rolltemplate-skill.sheet-rolltemplate-darkmode td,
.sheet-rolltemplate-second-wind.sheet-rolltemplate-darkmode td,
.sheet-rolltemplate-statBlock.sheet-rolltemplate-darkmode td,
.sheet-rolltemplate-Status.sheet-rolltemplate-darkmode td {
    color: var(--rtdm-text);
}

.sheet-rolltemplate-sagadefault.sheet-rolltemplate-darkmode .sheet-subheader,
.sheet-rolltemplate-attack.sheet-rolltemplate-darkmode .sheet-subheader {
    background-color: var(--rtdm-subheader-bg);
    color: var(--rtdm-subheader-text);
}

.sheet-rolltemplate-sagadefault.sheet-rolltemplate-darkmode tr:nth-child(odd),
.sheet-rolltemplate-attack.sheet-rolltemplate-darkmode tr:nth-child(odd),
.sheet-rolltemplate-skill.sheet-rolltemplate-darkmode tr:nth-child(odd) {
    background-color: var(--rtdm-tr-odd);
}

.sheet-rolltemplate-sagadefault.sheet-rolltemplate-darkmode tr:nth-child(even),
.sheet-rolltemplate-attack.sheet-rolltemplate-darkmode tr:nth-child(even),
.sheet-rolltemplate-skill.sheet-rolltemplate-darkmode tr:nth-child(even),
.sheet-rolltemplate-second-wind.sheet-rolltemplate-darkmode tr:nth-child(even) {
    background-color: var(--rtdm-tr-even);
}

	/* dark mode inline roll results */
.sheet-rolltemplate-sagadefault.sheet-rolltemplate-darkmode .inlinerollresult,
.sheet-rolltemplate-attack.sheet-rolltemplate-darkmode .inlinerollresult,
.sheet-rolltemplate-skill.sheet-rolltemplate-darkmode .inlinerollresult,
.sheet-rolltemplate-second-wind.sheet-rolltemplate-darkmode .inlinerollresult {
    color: var(--rtdm-result-text);
    background-color: var(--rtdm-result-bg);
    border: 2px solid var(--rtdm-result-border);
}

.sheet-rolltemplate-sagadefault.sheet-rolltemplate-darkmode .inlinerollresult.fullcrit,
.sheet-rolltemplate-attack.sheet-rolltemplate-darkmode .inlinerollresult.fullcrit,
.sheet-rolltemplate-skill.sheet-rolltemplate-darkmode .inlinerollresult.fullcrit,
.sheet-rolltemplate-second-wind.sheet-rolltemplate-darkmode .inlinerollresult.fullcrit {
	background-color: var(--rtdm-result-crit-bg);
    border: 2px solid var(--rtdm-result-crit-border);
}

.sheet-rolltemplate-sagadefault.sheet-rolltemplate-darkmode .inlinerollresult.fullfail,
.sheet-rolltemplate-attack.sheet-rolltemplate-darkmode .inlinerollresult.fullfail,
.sheet-rolltemplate-skill.sheet-rolltemplate-darkmode .inlinerollresult.fullfail,
.sheet-rolltemplate-second-wind.sheet-rolltemplate-darkmode .inlinerollresult.fullfail {
	background-color: var(--rtdm-result-fail-bg);
    border: 2px solid var(--rtdm-result-fail-border);
}

.sheet-rolltemplate-sagadefault.sheet-rolltemplate-darkmode .inlinerollresult.importantroll,
.sheet-rolltemplate-attack.sheet-rolltemplate-darkmode .inlinerollresult.importantroll,
.sheet-rolltemplate-skill.sheet-rolltemplate-darkmode .inlinerollresult.importantroll,
.sheet-rolltemplate-second-wind.sheet-rolltemplate-darkmode .inlinerollresult.importantroll {
    background-color: var(--rtdm-result-mixed-bg);
	border: 2px solid var(--rtdm-result-mixed-border);
}

	/* DARK MODE for Saga Default Roll Template */
/* Nothing specific yet */

	/* DARK MODE for Attack Roll Template*/
/* Nothing specific yet */

	/* DARK MODE for Skill Roll Template */
.sheet-rolltemplate-skill.sheet-rolltemplate-darkmode tr:first-child td {
    background-color: var(--rtdm-bg);
}

	/* DARK MODE for Second Wind Roll Template */
/* Nothing specific yet */

	/* DARK MODE for statBlock Template*/
.sheet-rolltemplate-statBlock.sheet-rolltemplate-darkmode td,
.sheet-rolltemplate-Status.sheet-rolltemplate-darkmode td {
    background-color: var(--rtdm-bg);
}

.sheet-rolltemplate-statBlock.sheet-rolltemplate-darkmode .inlinerollresult,
.sheet-rolltemplate-Status.sheet-rolltemplate-darkmode .inlinerollresult {
    border: none;
	background-color: transparent;
    color: var(--rtdm-text); /* same as text color */
}
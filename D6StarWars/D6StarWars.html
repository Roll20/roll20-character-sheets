<input  name="attr_version" type="hidden" value="2.41">

<input class="toggle" name="attr_sheettype" type="hidden" value="0">

<input class="selector-switch gmroll" name="attr_gmrollswitch" type="checkbox" value="1">
<input class="selector-switch rollmod" name="attr_rollmodswitch" type="checkbox" value="1">

<input class="selector-switch force" name="attr_forceswitch" type="checkbox" value="1">
<input class="selector-switch background" name="attr_backgroundswitch" type="checkbox" value="1">
<input class="selector-switch equipment" name="attr_equipmentswitch" type="checkbox" value="1">
<input checked="checked" class="selector-switch cptracker" name="attr_cpswitch" type="checkbox" value="1">
<input checked="checked" class="selector-switch credittracker" name="attr_creditswitch" type="checkbox" value="1">


<div class="master-container">

  <!-- The "Settings Menu" Cog Icon -->
  <input class="main-options options-flag" name="attr_options-flag" type="checkbox"><span class="left">y</span>

  <!-- Shows which sheet type is selected -->
  <div class="main-settings" style="height:1em;text-align:right;float:right;"><h2>Settings</h2></div>
  <div class="main-container sheettype-title pc right"><h2>Player Sheet</h2></div>
  <div class="main-container sheettype-title npc right"><h2>NPC Sheet</h2></div>
  <div class="main-container sheettype-title ship right"><h2>Ship</h2></div>
  <div class="main-container sheettype-title shop-inventory right"><h2>Shop/Container</h2></div>

  <div class="version-top"><p name="attr_version"></p></div>

  <!--  LOGO and dice images -->
  <div class="logo">
    <img alt="logo" class="logo"
         src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/D6StarWars/logo.png" title="This is where the fun begins."/>
  </div>

  <!-- ---------------------------------------------- SETTINGS MENU ------------------------------------------------- -->

  <div class="main-settings container" style="padding-top:67px">
    <div class="section" style="width:850px">

      <!-- Sheet type -->
      <div class="input-row top-row bold">
        <span
            title="Shows a more dense statblock for NPCs. Equipment sections uses the first field from the PC version">Sheet type: </span>
        <select name="attr_sheettype" style="width:90px;">
          <option selected="selected" value="0">PC</option>
          <option value="1">NPC</option>
          <option value="2">Ship</option>
          <option value="3">Container</option>
        </select>
      </div>

      <!-- GM roll toggle -->
      <div class="input-row top-row bold">
        <span title="Hides the GM rolls. They are like regular rolls but whispered to the GM">Hide GM Rolls?</span>
        <input name="attr_gmrollswitch" type="checkbox" value="1">
      </div>

      <!-- dice roll toggle -->
      <div class="input-row top-row bold">
        <span title="If checked, rolls don't ask for roll modifiers and rolls right away when selected.">Disable roll modification query when rolling?</span>
        <input name="attr_rollmodswitch" type="checkbox" value="1">
      </div>

      <!-- Wild Die toggle -->
      <div class="input-row top-row bold">
        <span title="If Wild Die isn't used, the die rolls wont explode or highlight critical successes nor failures">Use Wild Die in rolls?</span>
        <select name="attr_wilddie" style="width: 70px;">
          <option selected="selected" value="!cf1cs6">Yes</option>
          <option value="cf0cs0">No</option>
        </select>
      </div>

      <!-- Few optional sections to hide -->
      <div class="input-row top-row bold">
        <span title="Useful for those who are not Force-sensitive">Hide/Show Sections:</span>
      </div>
      <div class="input-row top-row bold">
        <span title="Useful for those who are not Force-sensitive">Hide Force Section? <input name="attr_forceswitch"
                                                                                              type="checkbox" value="1"></span>
      </div>
      <div class="input-row top-row bold">
        <span>Hide Equipment Section? </span>
        <input name="attr_equipmentswitch" type="checkbox" value="1">
      </div>
      <div class="input-row top-row bold">
        <span>Hide Background Section? </span>
        <input name="attr_backgroundswitch" type="checkbox" value="1">
      </div>
      <div class="input-row top-row bold">
        <span>Hide Character Point Summary Section? </span>
        <input checked="checked" name="attr_cpswitch" type="checkbox" value="1">
      </div>
      <div class="input-row top-row bold">
        <span>Hide Credit Summary Section? </span>
        <input checked="checked" name="attr_creditswitch" type="checkbox" value="1">
      </div>
    </div>
  </div>

  <!--  ---------------------------------------------- MAIN SHEET --------------------------------------------------- -->

  <div class="main-container container" style="padding-top:75px">

    <!-- --------------------------------------------- Player Core info -------------------------------------------- -->

    <div class="section pc">
      <div class="sheet-2colrow">
        <div class="sheet-col lineblck">
          <label class="toppad">Character Name <input class="right reduce-padd 60p" name="attr_charactername"
                                                      type="text"/></label>
          <label class="toppad">Type <input class="right reduce-padd 60p" name="attr_type" type="text"/></label>
          <label class="toppad">Species <input class="right reduce-padd 60p" name="attr_species" type="text"/></label>

          <div class="physical-params">
            <label class="toppad">Age <input class="smalltext reduce-padd" name="attr_age" type="text"/></label>
            <label class="toppad">Height <input class="smalltext reduce-padd" name="attr_height" type="text"/></label>
            <label class="toppad">Weight <input class="smalltext reduce-padd" name="attr_weight" type="text"/></label>
            <label class="toppad">Gender <input class="mediumtext reduce-padd" name="attr_gender" type="text"/></label>
          </div>
        </div>
        <div class="sheet-col">
          <label>Physical Description
            <textarea class="description-phys" name="attr_Physical_Description"></textarea>
          </label>
          <label>Credits <input class="credits totalcredits" min="0" name="attr_credits" type="number"/></label>
        </div>
      </div>
    </div>

    <!-- ------------------------------------------- Player Secondary Info ----------------------------------------- -->

    <div class="section pc">
      <div class="sheet-3colrow">
        <div class="sheet-col">
          <label class="areaLabel">Special Abilities</label>
          <textarea class="specabilities" name="attr_specialAbilities"></textarea>
        </div>
        <div class="sheet-col">
          <label>Move <input class="p60" min="0" name="attr_move" type="number" value="10"/></label>
          <label>Force Sensitive?
            <select class="smallselect" name="attr_forceSensitive">
              <option value="1">Yes</option>
              <option selected="selected" value="0">No</option>
            </select>
          </label>
          <label>Force Points <input class="p60" min="0" name="attr_forcePoints" type="number" value="1"/></label>
          <!---On char creation everyone starts with 1 FP --->
          <label>Dark Side Points <input class="p60" min="0" name="attr_darkSidePoints" type="number"
                                         value="0"/></label>
          <label>Character Points <input class="p60" min="0" name="attr_characterPoints" type="number"
                                         value="0"/></label> <!---On char creation everyone starts with 5 CP --->
          <label class="wound" style="padding-top: 20px">Wound Level
            <select class="mediumselect left wound" name="attr_WoundLevel">
              <option selected="selected" value="0">Healthy</option>
              <option value="1">Stunned</option>
              <option value="1">Wounded</option>
              <option value="2">Wounded Twice</option>
              <option value="5">Incapacitated</option>
              <!-- You shouldn't even be able to make checks while incapacitated or Mortally wounded, hence -5. -->
              <option value="5">Mortally Wounded</option>
            </select>
          </label>
        </div>
        <div class="sheet-col">
          <table class="custom-roll-table">
            <tr>
              <th class="init">Initiative bonus</th>
              <td colspan="2" class="init">
                <input class="init" min="0" name="attr_initiative" type="number" value="0"/>D+<input class="init" max="2" min="0" name="attr_initiativepip" type="number" value="0"/>
              </td>
            </tr>
            <tr></tr>
            <tr>
              <th>Initiative</th>
              <td>
                <button class="d6-dice rollmod" name="roll_init" type="roll"
                        value="&{template:black} {{name=Initiative}} {{Roll=[[(@{perception} + @{initiative} -@{WoundMod} + @{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{perceptionpip} + @{initiativepip} + ?{Other Mods(pip)|0} + 1d6@{wilddie} &{tracker}]]}}"></button>
                <button class="d6-dice rollmod-no" name="roll_initnomod" type="roll"
                        value="&{template:black} {{name=Initiative}} {{Roll=[[(@{perception} + @{initiative} -@{WoundMod} + @{Force_Up} -1)d6cf0cs7 + @{perceptionpip} + @{initiativepip} + 1d6@{wilddie} &{tracker}]]}}"></button>
              </td>
              <td></td>
            </tr>
            <tr>
              <th>Custom Roll</th>
              <td>
                <button class="d6-dice" name="roll_customroll" type="roll"
                        value="&{template:black} {{name=?{Roll Name}}} {{Roll=[[{(?{Number of dice|0} - 1)d6cf0cs7 + ?{Number of pip|0},1d6@{wilddie}}]]}}"></button>
              </td>
              <td>
                <button class="d6-dice gmroll-hide" name="roll_customroll-w" type="roll"
                        value="/w gm &{template:black} {{name=?{Roll Name}}} {{Roll=[[{(?{Number of dice|0} - 1)d6cf0cs7 + ?{Number of pip|0},1d6@{wilddie}}]]}}">
                  <span class="redtxt">(GM)</span></button>
              </td>
            </tr>
            <tr>
              <th>Extra Dice</th>
              <td>
                <button class="d6-dice" name="roll_extraroll" type="roll"
                        value="&{template:black} {{name=Extra Dice}} {{Roll=[[{?{Number of  extra dice|0}d6cf0cs7}]]}}"></button>
              </td>
              <td>
                <button class="d6-dice gmroll-hide" name="roll_extraroll-w" type="roll"
                        value="/w gm &{template:black} {{name=Extra Dice}} {{Roll=[[{?{Number of  extra dice|0}d6cf0cs7}]]}}">
                  <span class="redtxt">(GM)</span></button>
              </td>
            </tr>
            <tr>
              <th>Char Points Roll</th>
              <td>
                <button class="d6-dice" name="roll_charptroll" type="roll"
                        value="&{template:black} {{name=Character points roll}} {{Roll=[[?{Number of char points to spend on roll|1|2|3|4|5}d6!cf0cs6]]}}"></button>
              </td>
              <td>
                <button class="d6-dice gmroll-hide" name="roll_charptroll-w" type="roll"
                        value="/w gm &{template:black} {{name=Character points roll}} {{Roll=[[?{Number of char points to spend on roll|1|2|3|4|5}d6!cf0cs6]]}}">
                  <span class="redtxt">(GM)</span></button>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>

    <!-- ---------------------------------------------- NPC info block --------------------------------------------- -->

    <div class="section npc">
      <div class="sheet-2colrow">
        <div class="sheet-col first-col">
          <label class="toppad">NPC Name <input class="right reduce-padd npcname" name="attr_charactername"
                                                type="text"></label>
          <label class="wound">Wound Level
            <select class="mediumselect left wound" name="attr_WoundLevel">
              <option selected="selected" value="0">Healthy</option>
              <option value="1">Stunned</option>
              <option value="1">Wounded</option>
              <option value="2">Wounded Twice</option>
              <option value="5">Incapacitated</option>
              <!--You shouldn't even be able to make checks while incapacitated or Mortally wounded, hence -15. Later will include option to ignore wound penalties -->
              <option value="5">Mortally Wounded</option>
            </select>
          </label>
          <label>Initiative bonus<input class="init" min="0" name="attr_initiative" type="number"
                                        value="0">D+<input class="init" max="2"
                                                           min="0" name="attr_initiativepip" type="number"
                                                           value="0"></label>
          <button class="d6-dice rollmod-no" name="roll_init_n" type="roll"
                  value="&{template:black} {{name=Initiative}} {{Roll=[[(@{perception} + @{initiative} -@{WoundMod} + @{Force_Up} -1)d6cf0cs7 + @{perceptionpip} + @{initiativepip} + 1d6@{wilddie} &{tracker}]]}}">
            Initiative
          </button>

          <button class="d6-dice rollmod" name="roll_init_n" type="roll"
                  value="&{template:black} {{name=Initiative}} {{Roll=[[(@{perception} + @{initiative} -@{WoundMod} + @{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{perceptionpip} + @{initiativepip} + ?{Other Mods(pip)|0} + 1d6@{wilddie} &{tracker}]]}}">
            Initiative
          </button>
          <button class="d6-dice" name="roll_customroll_n" type="roll"
                  value="&{template:black} {{name=?{Roll Name}}} {{Roll=[[{(?{Number of dice|0} - 1)d6cf0cs7 + ?{Number of pip|0},1d6@{wilddie}}]]}}">
            Custom Roll(no mods)
          </button>
          <button class="d6-dice gmroll-hide" name="roll_customroll_n-w" type="roll"
                  value="/w gm &{template:black} {{name=?{Roll Name}}} {{Roll=[[{(?{Number of dice|0} - 1)d6cf0cs7 + ?{Number of pip|0},1d6@{wilddie}}]]}}">
            <span class="redtxt">(GM)</span>C Roll
          </button>
        </div>
        <div class="sheet-col">
          <label>Physical Description & Other Info</label>
          <textarea class="description" name="attr_Physical_Description"></textarea>
        </div>
      </div>
    </div>

    <div class="section shop-inventory">
      <label><input name="attr_containername" type="text"></label>
    </div>

    <!-- --------------------------------------------- Attributes&Skills ------------------------------------------- -->

    <div class="section pc npc">
      <label class="txtcenter">Attributes & Skills</label>
      <div class="flex-box">
        <div class="flex-col">

          <div id="attributes-dex" class="attributes">
            <div class="attribute">
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Dexterity}} {{Roll=[[(@{dexterity} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{dexteritypip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Dexterity}} {{Roll=[[(@{dexterity} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{dexteritypip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>

              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Dexterity}} {{Roll=[[(@{dexterity} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{dexteritypip} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Dexterity}} {{Roll=[[(@{dexterity} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{dexteritypip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <label class="unified-dice unified-dice-text">Dexterity</label>
              <input type="number" name="attr_dexterity" value="1" min="0" class="unified-dice unified-dice-input"/>
              <div class="unified-dice unified-dice-middle">D+</div>
              <input type="number" name="attr_dexteritypip" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
            </div>

            <fieldset class="repeating_dexskills">
            <div class="skill">
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=@{dexskillname}}} {{Roll=[[(@{dexskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{dexskillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{dexskillname}}} {{Roll=[[(@{dexskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{dexskillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=@{dexskillname}}} {{Roll=[[(@{dexskilldice} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{dexskillpip} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{dexskillname}}} {{Roll=[[(@{dexskilldice} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{dexskillpip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <label class="unified-dice unified-dice-text">
                <input type="text" name="attr_dexskillname" list="dexskills">
              </label>
              <input type="number" name="attr_dexskilldice" value="1" min="0" class="unified-dice unified-dice-input"/>
              <div class="unified-dice-middle">D+</div>
              <input type="number" name="attr_dexskillpip" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
            </div>
            </fieldset>
          </div>

          <div id="attributes-know" class="attributes">
            <div class="attribute">
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Knowledge}} {{Roll=[[(@{knowledge} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{knowledgepip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Knowledge}} {{Roll=[[(@{knowledge} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{knowledgepip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>

              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Knowledge}} {{Roll=[[(@{knowledge} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{knowledgepip} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Knowledge}} {{Roll=[[(@{knowledge} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{knowledgepip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <label class="unified-dice unified-dice-text">Knowledge</label>
              <input type="number" name="attr_knowledge" value="1" min="0" class="unified-dice unified-dice-input"/>
              <div class="unified-dice unified-dice-middle">D+</div>
              <input type="number" name="attr_knowledgepip" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
            </div>

            <fieldset class="repeating_knowskills">
              <div class="skill">
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=@{knowskillname}}} {{Roll=[[(@{knowskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{knowskillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{knowskillname}}} {{Roll=[[(@{knowskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{knowskillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=@{knowskillname}}} {{Roll=[[(@{knowskilldice} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{knowskillpip} + 1d6@{wilddie}]]}}"></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{knowskillname}}} {{Roll=[[(@{knowskilldice} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{knowskillpip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <label class="unified-dice unified-dice-text">
                  <input type="text" name="attr_knowskillname" list="knowskills">
                </label>
                <input type="number" name="attr_knowskilldice" value="1" min="0" class="unified-dice unified-dice-input"/>
                <div class="unified-dice-middle">D+</div>
                <input type="number" name="attr_knowskillpip" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
              </div>
            </fieldset>
          </div>

          <div id="attributes-mech" class="attributes">
            <div class="attribute">
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Mechanical}} {{Roll=[[(@{mechanical} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{mechanicalpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Mechanical}} {{Roll=[[(@{mechanical} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{mechanicalpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>

              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Mechanical}} {{Roll=[[(@{mechanical} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{mechanicalpip} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Mechanical}} {{Roll=[[(@{mechanical} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{mechanicalpip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <label class="unified-dice unified-dice-text">Mechanical</label>
              <input type="number" name="attr_mechanical" value="1" min="0" class="unified-dice unified-dice-input"/>
              <div class="unified-dice unified-dice-middle">D+</div>
              <input type="number" name="attr_mechanicalpip" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
            </div>

            <fieldset class="repeating_mechskills">
              <div class="skill">
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=@{mechskillname}}} {{Roll=[[(@{mechskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{mechskillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{mechskillname}}} {{Roll=[[(@{mechskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{mechskillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=@{mechskillname}}} {{Roll=[[(@{mechskilldice} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{mechskillpip} + 1d6@{wilddie}]]}}"></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{mechskillname}}} {{Roll=[[(@{mechskilldice} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{mechskillpip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <label class="unified-dice unified-dice-text">
                  <input type="text" name="attr_mechskillname" list="mechskills">
                </label>
                <input type="number" name="attr_mechskilldice" value="1" min="0" class="unified-dice unified-dice-input"/>
                <div class="unified-dice-middle">D+</div>
                <input type="number" name="attr_mechskillpip" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
              </div>
            </fieldset>
          </div>
        </div>

        <div class="flex-col">

          <div id="attributes-perc" class="attributes">
            <div class="attribute">
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Perception}} {{Roll=[[(@{perception} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{perceptionpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Perception}} {{Roll=[[(@{perception} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{perceptionpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>

              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Perception}} {{Roll=[[(@{perception} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{perceptionpip} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Perception}} {{Roll=[[(@{perception} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{perceptionpip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <label class="unified-dice unified-dice-text">Perception</label>
              <input type="number" name="attr_perception" value="1" min="0" class="unified-dice unified-dice-input"/>
              <div class="unified-dice unified-dice-middle">D+</div>
              <input type="number" name="attr_perceptionpip" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
            </div>

            <fieldset class="repeating_perckills">
              <div class="skill">
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=@{perckillname}}} {{Roll=[[(@{perckilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{perckillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{perckillname}}} {{Roll=[[(@{perckilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{perckillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=@{perckillname}}} {{Roll=[[(@{perckilldice} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{perckillpip} + 1d6@{wilddie}]]}}"></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{perckillname}}} {{Roll=[[(@{perckilldice} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{perckillpip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <label class="unified-dice unified-dice-text">
                  <input type="text" name="attr_perckillname" list="perskills">
                </label>
                <input type="number" name="attr_perckilldice" value="1" min="0" class="unified-dice unified-dice-input"/>
                <div class="unified-dice-middle">D+</div>
                <input type="number" name="attr_perckillpip" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
              </div>
            </fieldset>
          </div>

          <div id="attributes-str" class="attributes">
            <div class="attribute">
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Strength}} {{Roll=[[(@{strength} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{strengthpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Strength}} {{Roll=[[(@{strength} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{strengthpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>

              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Strength}} {{Roll=[[(@{strength} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{strengthpip} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Strength}} {{Roll=[[(@{strength} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{strengthpip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <label class="unified-dice unified-dice-text">Strength</label>
              <input type="number" name="attr_strength" value="1" min="0" class="unified-dice unified-dice-input"/>
              <div class="unified-dice unified-dice-middle">D+</div>
              <input type="number" name="attr_strengthpip" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
            </div>

            <fieldset class="repeating_strskills">
              <div class="skill">
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=@{strskillname}}} {{Roll=[[(@{strskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{strskillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{strskillname}}} {{Roll=[[(@{strskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{strskillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=@{strskillname}}} {{Roll=[[(@{strskilldice} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{strskillpip} + 1d6@{wilddie}]]}}"></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{strskillname}}} {{Roll=[[(@{strskilldice} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{strskillpip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <label class="unified-dice unified-dice-text">
                  <input type="text" name="attr_strskillname" list="strskills">
                </label>
                <input type="number" name="attr_strskilldice" value="1" min="0" class="unified-dice unified-dice-input"/>
                <div class="unified-dice-middle">D+</div>
                <input type="number" name="attr_strskillpip" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
              </div>
            </fieldset>
          </div>

          <div id="attributes-tech" class="attributes">
            <div class="attribute">
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Technical}} {{Roll=[[(@{technical} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{technicalpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Technical}} {{Roll=[[(@{technical} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{technicalpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>

              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Technical}} {{Roll=[[(@{technical} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{technicalpip} + 1d6@{wilddie}]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Technical}} {{Roll=[[(@{technical} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{technicalpip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <label class="unified-dice unified-dice-text">Technical</label>
              <input type="number" name="attr_technical" value="1" min="0" class="unified-dice unified-dice-input"/>
              <div class="unified-dice unified-dice-middle">D+</div>
              <input type="number" name="attr_technicalpip" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
            </div>

            <fieldset class="repeating_techskills">
              <div class="skill">
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=@{techskillname}}} {{Roll=[[(@{techskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{techskillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{techskillname}}} {{Roll=[[(@{techskilldice} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs7 + @{techskillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=@{techskillname}}} {{Roll=[[(@{techskilldice} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{techskillpip} + 1d6@{wilddie}]]}}"></button>
                <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{techskillname}}} {{Roll=[[(@{techskilldice} -@{WoundMod} +@{Force_Up} -1)d6cf0cs7 + @{techskillpip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <label class="unified-dice unified-dice-text">
                  <input type="text" name="attr_techskillname"  list="techskills">
                </label>
                <input type="number" name="attr_techskilldice" value="1" min="0" class="unified-dice unified-dice-input"/>
                <div class="unified-dice-middle">D+</div>
                <input type="number" name="attr_techskillpip" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
              </div>
            </fieldset>
          </div>

        </div>
      </div>  <!-- flexbox-->
    </div>

    <!-- ---------------------------------------------- Weapons & Armor -------------------------------------------- -->

    <div class="section pc npc shop-inventory">
      <label class="txtcenter">Weapon & Armor</label>
      <div class="overflow-auto">
        <div class="weapon sheet-row">
          <div class="cell cell-name">Weapon</div>
          <div class="cell cell-dice">Attack</div>
          <div class="cell cell-dice">Damage</div>
          <div class="cell cell-4">
            <div>Range</div>
            <div class="part" title="Point Blank Range (Very Easy)">PB</div> - <div class="part" title="Short Range (Easy)">S</div> / <div class="part" title="Medium Range (Moderate)">M</div> / <div class="part" title="Long Range (Difficult)">L</div>
          </div>
          <div class="cell cell-1"><abbr title="Rate of Fire">ROF</abbr></div>
          <div class="cell cell-1">Ammo</div>
        </div>

        <fieldset class="repeating_weapons">
          <div class="weapon sheet-row skill">
            <div class="cell cell-name">
              <label class="unified-dice unified-dice-text">
                <input name="attr_weapon" type="text" class="name">
              </label>
            </div>
            <div class="cell cell-dice">
              <input name="attr_weaponskill" type="number" min="0" value="0" class="unified-dice unified-dice-input"/>D+<input name="attr_weaponskillpip" type="number" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
              <button name="roll_attack" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Attack: @{weapon}}} {{Roll=[[(@{weaponskill} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs0 + @{weaponskillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
              <button name="roll_attack" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Attack: @{weapon}}} {{Roll=[[(@{weaponskill} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 + @{weaponskillpip} + 1d6@{wilddie}]]}}"></button>
              <button name="roll_attack" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Attack: @{weapon}}} {{Roll=[[(@{weaponskill} -@{WoundMod} +@{Force_Up} + ?{Dice mods|0} -1)d6cf0cs0 + @{weaponskillpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <button name="roll_attack" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Attack: @{weapon}}} {{Roll=[[(@{weaponskill} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 + @{weaponskillpip} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
            </div>
            <div class="cell cell-dice">
              <input name="attr_damagedice" type="number" value="0" min="0" class="unified-dice unified-dice-input"/>D+<input name="attr_damagepip" type="number" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Damage: @{weapon}}} {{Roll=[[(@{damagedice} + ?{Dice mods|0} - 1)d6cf0cs7 + @{damagepip} + ?{Other Mods(pip)|0} + (1d6@{wilddie})]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Damage: @{weapon}}} {{Roll=[[(@{damagedice} + ?{Dice mods|0} - 1)d6cf0cs7 + @{damagepip} + ?{Other Mods(pip)|0} + (1d6@{wilddie})]]}}"><span class="redtxt">GM</span></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Damage: @{weapon}}} {{Roll=[[(@{damagedice}- 1)d6cf0cs7 + @{damagepip} + (1d6@{wilddie})]]}}"></button>
              <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Damage: @{weapon}}} {{Roll=[[(@{damagedice}- 1)d6cf0cs7 + @{damagepip} + (1d6@{wilddie})]]}}"><span class="redtxt">GM</span></button>
            </div>
            <div class="cell cell-4">
              <input name="attr_pointblankrange" type="number" min="0" class="unified-dice unified-dice-input txtfield 40px"/>-<input name="attr_shortrange" type="number" min="0" class="unified-dice unified-dice-input txtfield 40px"/>/<input name="attr_medrange" type="number" min="0" class="unified-dice unified-dice-input txtfield 40px"/>/<input name="attr_longrange" type="number" min="0" class="unified-dice unified-dice-input txtfield 40px"/>
            </div>
            <div class="cell cell-1"><input name="attr_ROF" type="number" value="1" class="unified-dice unified-dice-input"/></div>
            <div class="cell cell-1"><input name="attr_Ammo" type="number" value="30" class="unified-dice unified-dice-input"/></div>
          </div>
        </fieldset>
      </div>

      <div class="overflow-auto">
        <div class="armor sheet-row">
          <div class="cell cell-name">Armor</div>
          <div class="cell cell-dice">Physical <span class="physical"></span></div>
          <div class="cell cell-dice">Energy <span class="energy"></span></div>
          <div class="cell cell-2">Str</div>
          <div class="cell cell-4">Other</div>
        </div>

        <fieldset class="repeating_armors">
          <div class="armor sheet-row skill">
            <div class="cell cell-name">
              <label class="unified-dice unified-dice-text">
                <input name="attr_armorname" type="text"  class="name">
              </label>
            </div>
            <div class="cell cell-dice">
              <input name="attr_armorPhDice" type="number" min="0" value="0" class="unified-dice unified-dice-input"/>D+<input name="attr_armorPhPip" type="number" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
              <button name="roll_dmg_soak_ph" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Damage Soak (Physical)}} {{Roll=[[(@{strength} +@{armorPhDice} + ?{Dice mods|0} - 1)d6cf0cs0 +@{strengthpip} +@{armorPhPip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
              <button name="roll_dmg_soak_ph" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Damage Soak (Physical)}} {{Roll=[[(@{strength} +@{armorPhDice} - 1)d6cf0cs0 +@{strengthpip} +@{armorPhPip} +1d6@{wilddie}]]}}"></button>
              <button name="roll_dmg_soak_ph" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Damage Soak (Physical)}} {{Roll=[[(@{strength} +@{armorPhDice} + ?{Dice mods|0} - 1)d6cf0cs0 +@{strengthpip} +@{armorPhPip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <button name="roll_dmg_soak_ph" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Damage Soak (Physical)}} {{Roll=[[(@{strength} +@{armorPhDice} - 1)d6cf0cs0 +@{strengthpip} +@{armorPhPip} +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
            </div>
            <div class="cell cell-dice">
              <input name="attr_armorEnDice" type="number" value="0" min="0" class="unified-dice unified-dice-input"/>D+<input name="attr_armorEnPip" type="number" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
              <button name="roll_dmg_soak_en" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Damage Soak (Energy)}} {{Roll=[[(@{strength} +@{armorEnDice} + ?{Dice mods|0} - 1)d6cf0cs0 +@{strengthpip} +@{armorEnPip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
              <button name="roll_dmg_soak_en" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Damage Soak (Energy)}} {{Roll=[[(@{strength} +@{armorEnDice} - 1)d6cf0cs0 +@{strengthpip} +@{armorEnPip} +1d6@{wilddie}]]}}"></button>
              <button name="roll_dmg_soak_en" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Damage Soak (Energy)}} {{Roll=[[(@{strength} +@{armorEnDice} + ?{Dice mods|0} - 1)d6cf0cs0 +@{strengthpip} +@{armorEnPip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <button name="roll_dmg_soak_en" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Damage Soak (Energy)}} {{Roll=[[(@{strength} +@{armorEnDice} - 1)d6cf0cs0 +@{strengthpip} +@{armorEnPip} +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
            </div>
            <div class="cell cell-2">
              <button name="roll_dmg_soak_str" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Damage Soak (Strength Only)}} {{Roll=[[(@{strength} + ?{Dice mods|0} - 1)d6cf0cs0 +@{strengthpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
              <button name="roll_dmg_soak_str" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Damage Soak (Strength Only)}} {{Roll=[[(@{strength} - 1)d6cf0cs0 +@{strengthpip} +1d6@{wilddie}]]}}"></button>
              <button name="roll_dmg_soak_str" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Damage Soak (Strength Only)}} {{Roll=[[(@{strength} + ?{Dice mods|0} - 1)d6cf0cs0 +@{strengthpip} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <button name="roll_dmg_soak_str" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Damage Soak (Strength Only)}} {{Roll=[[(@{strength} - 1)d6cf0cs0 +@{strengthpip} +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
            </div>
            <div class="cell cell-4">
              <label class="unified-dice unified-dice-text" style="width: 100%;">
                <input name="attr_armor_other" type="text"/>
              </label>
            </div>
          </div>
        </fieldset>
      </div>

    </div>

    <!-- ----------------------------------------------- Force Section --------------------------------------------- -->

    <div class="section force-hide pc npc">
      <label class="txtcenter">Force Section</label>

      <div class="flex-box">
        <div class="flex-col">

          <div id="force-control" class="force attributes">
            <div class="attribute">
              <button name="roll_force_control-w" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Force:Control}} {{Roll=[[(@{control} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{controlpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6@{wilddie}]]}}"></button>
              <button name="roll_force_control-w" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Force:Control}} {{Roll=[[(@{control} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{controlpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>

              <button name="roll_force_control-w" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Force:Control}} {{Roll=[[(@{control} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 +@{controlpip} +@{Force_EmptinessMod}  +1d6@{wilddie}]]}}"></button>
              <button name="roll_force_control-w" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Force:Control}} {{Roll=[[(@{control} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 +@{controlpip} +@{Force_EmptinessMod}  +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <label class="unified-dice unified-dice-text">Control</label>
              <input type="number" name="attr_control" min="0" class="unified-dice unified-dice-input"/>
              <div class="unified-dice unified-dice-middle">D+</div>
              <input type="number" name="attr_controlpip" min="0" max="2" class="unified-dice unified-dice-pip"/>
            </div>

            <fieldset class="repeating_controlpowers">
              <div class="skill">
                <button name="roll_force_control_p" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=@{controlpowername} (Control)}} {{Roll=[[(@{control} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{controlpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6@{wilddie}]]}}"></button>
                <button name="roll_force_control_p" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{controlpowername} (Control)}} {{Roll=[[(@{control} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{controlpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <button name="roll_force_control_p" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=@{controlpowername} (Control)}} {{Roll=[[(@{control} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 +@{controlpip} +@{Force_EmptinessMod} +1d6@{wilddie}]]}}"></button>
                <button name="roll_force_control_p" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{controlpowername} (Control)}} {{Roll=[[(@{control} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 +@{controlpip} +@{Force_EmptinessMod} +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <label class="unified-dice unified-dice-text">
                  <input name="attr_controlpowername" type="text" />
                </label>
                <input name="attr_controlpoweractive" type="checkbox" title="Active" value="1"/>
              </div>
            </fieldset>
          </div>

          <div id="force-sense" class="force attributes">
            <div class="attribute">
              <button name="roll_force_control-w" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Force:Sense}} {{Roll=[[(@{sense} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{sensepip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6@{wilddie}]]}}"></button>
              <button name="roll_force_control-w" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Force:Sense}} {{Roll=[[(@{sense} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{sensepip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>

              <button name="roll_force_control-w" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Force:Sense}} {{Roll=[[(@{sense} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 +@{sensepip} +@{Force_EmptinessMod}  +1d6@{wilddie}]]}}"></button>
              <button name="roll_force_control-w" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Force:Sense}} {{Roll=[[(@{sense} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 +@{sensepip} +@{Force_EmptinessMod}  +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <label class="unified-dice unified-dice-text">Sense</label>
              <input type="number" name="attr_sense" min="0" class="unified-dice unified-dice-input"/>
              <div class="unified-dice unified-dice-middle">D+</div>
              <input type="number" name="attr_sensepip" min="0" max="2" class="unified-dice unified-dice-pip"/>
            </div>

            <fieldset class="repeating_sensepowers">
              <div class="skill">
                <button name="roll_force_sense_p" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=@{sensepowername} (Sense)}} {{Roll=[[(@{sense} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{sensepip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6@{wilddie}]]}}"></button>
                <button name="roll_force_sense_p" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{sensepowername} (Sense)}} {{Roll=[[(@{sense} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{sensepip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <button name="roll_force_sense_p" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=@{sensepowername} (Sense)}} {{Roll=[[(@{sense} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 +@{sensepip} +@{Force_EmptinessMod} +1d6@{wilddie}]]}}"></button>
                <button name="roll_force_sense_p" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{sensepowername} (Sense)}} {{Roll=[[(@{sense} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 +@{sensepip} +@{Force_EmptinessMod} +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <label class="unified-dice unified-dice-text">
                  <input name="attr_sensepowername" type="text" />
                </label>
                <input name="attr_sensepoweractive" type="checkbox" title="Active" value="1"/>
              </div>
            </fieldset>
          </div>

          <div id="force-alter" class="force attributes">
            <div class="attribute">
              <button name="roll_force_control-w" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Force:Alter}} {{Roll=[[(@{alter} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{alterpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6@{wilddie}]]}}"></button>
              <button name="roll_force_control-w" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Force:Alter}} {{Roll=[[(@{alter} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{alterpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>

              <button name="roll_force_control-w" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Force:Alter}} {{Roll=[[(@{alter} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 +@{alterpip} +@{Force_EmptinessMod}  +1d6@{wilddie}]]}}"></button>
              <button name="roll_force_control-w" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Force:Alter}} {{Roll=[[(@{alter} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 +@{alterpip} +@{Force_EmptinessMod}  +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
              <label class="unified-dice unified-dice-text">Alter</label>
              <input type="number" name="attr_alter" min="0" class="unified-dice unified-dice-input"/>
              <div class="unified-dice unified-dice-middle">D+</div>
              <input type="number" name="attr_alterpip" min="0" max="2" class="unified-dice unified-dice-pip"/>
            </div>

            <fieldset class="repeating_alterpowers">
              <div class="skill">
                <button name="roll_force_alter_p" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=@{alterpowername} (Alter)}} {{Roll=[[(@{alter} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{alterpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6@{wilddie}]]}}"></button>
                <button name="roll_force_alter_p" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{alterpowername} (Alter)}} {{Roll=[[(@{alter} -@{WoundMod} +@{Force_Up} +?{Dice mods|0} -1)d6cf0cs0 +@{alterpip} +@{Force_EmptinessMod} +?{Other Mods(pip)|0} +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <button name="roll_force_alter_p" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=@{alterpowername} (Alter)}} {{Roll=[[(@{alter} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 +@{alterpip} +@{Force_EmptinessMod} +1d6@{wilddie}]]}}"></button>
                <button name="roll_force_alter_p" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=@{alterpowername} (Alter)}} {{Roll=[[(@{alter} -@{WoundMod} +@{Force_Up} -1)d6cf0cs0 +@{alterpip} +@{Force_EmptinessMod} +1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
                <label class="unified-dice unified-dice-text">
                  <input name="attr_alterpowername" type="text" />
                </label>
                <input name="attr_alterpoweractive" type="checkbox" title="Active" value="1"/>
              </div>
            </fieldset>
          </div>
        </div>

        <div class="flex-col">

          <table class="powers">
            <tr>
              <th>Force Emptiness <em title="adds +6 pips to all force skill rolls when active. Bonus is reduced by 1 for every DSP">details</em></th>
              <td>
                <input name="attr_Force_Emptiness" type="checkbox" value="true"/>
              </td>
            </tr>
            <tr>
              <th>Resist Pain <em title="Reduces Wound penalties to -1.">details</em></th>
              <td>
                <input name="attr_PainResist" type="checkbox" value="true"/>
              </td>
            </tr>
            <tr>
              <th>Number of active powers <em title="The number of power active is subtracted from all roll as a Multiple Action Penalty.">details</em></th>
              <td>
                <select class="smallselect" name="attr_Force_Up"
                        title="The number of power active is subtracted from all roll as a Multiple Action Penalty. Above Force Pain doesn't need to be added">
                  <option selected="selected" value="0">0</option>
                  <option value="-1">1</option>
                  <option value="-2">2</option>
                  <option value="-3">3</option>
                  <option value="-4">4</option>
                  <option value="-5">5</option>
                </select>
              </td>
            </tr>
          </table>

          <h4>Force Powers</h4>
          <textarea name="attr_forcePowers" class="force-powers-description"></textarea>

        </div>
      </div>

      <div>
        <div class="weapon sheet-row">
          <div class="cell cell-name">Lightsaber combat</div>
          <div class="cell cell-dice">Attack</div>
          <div class="cell cell-dice">Damage</div>
        </div>

        <div class="weapon sheet-row skill">
          <div class="cell cell-name">
            <label class="unified-dice unified-dice-text">
              <input name="attr_lightsaberskill" type="text" value="lightsaber" />
            </label>
          </div>
          <div class="cell cell-dice">
            <input name="attr_lightsaberskilldice" type="number" min="0" value="0" class="unified-dice unified-dice-input"/>D+<input name="attr_lightsaberskillpip" type="number" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
            <button name="roll_attack" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Attack: @{lightsaberskill}}} {{Roll=[[(@{lightsaberskilldice} -@{WoundMod} +@{Force_Up} + @{sense} + ?{Dice mods|0} -1)d6cf0cs0 + @{lightsaberskillpip} + @{sensepip} + @{Force_EmptinessMod} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"></button>
            <button name="roll_attack" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Attack: @{lightsaberskill}}} {{Roll=[[(@{lightsaberskilldice} -@{WoundMod} +@{Force_Up} + @{sense} - 1)d6cf0cs0 + @{lightsaberskillpip} + @{sensepip} + @{Force_EmptinessMod} + 1d6@{wilddie}]]}}"></button>
            <button name="roll_attack" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Attack: @{lightsaberskill}}} {{Roll=[[(@{lightsaberskilldice} -@{WoundMod} +@{Force_Up} + @{sense} + ?{Dice mods|0} -1)d6cf0cs0 + @{lightsaberskillpip} + @{sensepip} + @{Force_EmptinessMod} + ?{Other Mods(pip)|0} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
            <button name="roll_attack" type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Attack: @{lightsaberskill}}} {{Roll=[[(@{lightsaberskilldice} -@{WoundMod} +@{Force_Up} + @{sense} - 1)d6cf0cs0 + @{lightsaberskillpip} + @{sensepip} + @{Force_EmptinessMod} + 1d6@{wilddie}]]}}"><span class="redtxt">GM</span></button>
          </div>
          <div class="cell cell-dice">
            <input name="attr_lightsaberdamagedice" type="number" value="0" min="0" class="unified-dice unified-dice-input"/>D+<input name="attr_lightsaberdamagepip" type="number" value="0" min="0" max="2" class="unified-dice unified-dice-pip"/>
            <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod" value="&{template:swd6} {{name=Damage: @{weapon}}} {{Roll=[[(@{lightsaberdamagedice} + ?{Dice mods|0} - 1)d6cf0cs7 + @{lightsaberdamagepip} + ?{Other Mods(pip)|0} + (1d6@{wilddie})]]}}"></button>
            <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Damage: @{weapon}}} {{Roll=[[(@{lightsaberdamagedice} + ?{Dice mods|0} - 1)d6cf0cs7 + @{lightsaberdamagepip} + ?{Other Mods(pip)|0} + (1d6@{wilddie})]]}}"><span class="redtxt">GM</span></button>
            <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no" value="&{template:swd6} {{name=Damage: @{weapon}}} {{Roll=[[(@{lightsaberdamagedice}- 1)d6cf0cs7 + @{lightsaberdamagepip} + (1d6@{wilddie})]]}}"></button>
            <button type="roll" class="d6-dice unified-dice unified-dice-roll rollmod-no gmroll gmroll-hide" value="/w gm &{template:swd6} {{name=Damage: @{weapon}}} {{Roll=[[(@{lightsaberdamagedice}- 1)d6cf0cs7 + @{lightsaberdamagepip} + (1d6@{wilddie})]]}}"><span class="redtxt">GM</span></button>
          </div>
        </div>
      </div>
    </div>

    <!-- ------------------------------------------------ Equipment PC --------------------------------------------- -->

    <div class="section equipment-hide pc shop-inventory">
      <label class="txtcenter">Equipment</label>
      <table style="width:97%">
        <tr>
          <td style="text-align: right;">
            <textarea name="attr_geartext1"></textarea>
            <textarea name="attr_geartext2"></textarea>
          </td>
          <td class="txtcenter">
            <textarea name="attr_geartext3"></textarea>
            <textarea name="attr_geartext4"></textarea>
          </td>
          <td style="text-align: left;">
            <textarea name="attr_geartext5"></textarea>
            <textarea name="attr_geartext6"></textarea>
          </td>
        </tr>
      </table>
    </div>

    <!-- ------------------------------------------------ Equipment NPC -------------------------------------------- -->

    <div class="section equipment-hide npc">
      <label class="txtcenter">Equipment</label>
      <textarea name="attr_geartext1"></textarea>
    </div>

    <!-- ------------------------------------------- Background & extended info ------------------------------------- -->

    <div class="section background-hide pc npc">
      <label class="txtcenter">Background and extended info</label>
      <table>
        <tr>
          <td class="33p">
            <label>Background</label>
            <div>
              <textarea name="attr_background"></textarea>
            </div>
          </td>
          <td class="33p">
            <label>Personality</label>
            <div>
              <textarea name="attr_personality"></textarea>
            </div>
          </td>
          <td class="33p">
            <label>Objectives</label>
            <div>
              <textarea name="attr_objectives"></textarea>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <label>Quotes</label>
            <div>
              <textarea name="attr_quotes"></textarea>
            </div>
          </td>
          <td>
            <label>Connections to other characters</label>
            <div>
              <textarea name="attr_connections"></textarea>
            </div>
          </td>
          <td>
            <label>Additional Notes</label>
            <div>
              <textarea name="attr_notes"></textarea>
            </div>
          </td>
        </tr>
      </table>
    </div>

    <!-- ---------------------------------------------Character Point tracking ------------------------------------- -->

    <div class="section cptracker-hide pc">
      <label>Character Point Tracker</label>
      <span class="bold">Character Point Balance:</span>
      <span class="num" name="attr_cp_spent"></span>
      <fieldset class="repeating_cptable">
        <div>
          <input name="attr_cp_desc" type="text">
          <input name="attr_cp_amount" type="number">
        </div>
      </fieldset>
    </div>

    <!-- ------------------------------------------------- Credit tracking ----------------------------------------- -->

    <div class="section credittracker-hide pc">
      <label>Credit Tracker</label>
      <span class="bold">Credit Balance:</span>
      <span class="num credits" name="attr_credit_spent"></span>
      <fieldset class="repeating_credittable">
        <div>
          <input name="attr_credit_desc" type="text">
          <input name="attr_credit_amount" type="number">
        </div>
      </fieldset>
    </div>

    <!-- ------------------------------------------------- Ship Core info ------------------------------------------ -->

    <div class="section ship shipheader">
      <span class="bold">Starship:<input name="attr_ship_name" type="text"></span>
      <span class="bold">Scale:<input name="attr_ship_scale" type="text"></span>
      <span class="bold">Length:<input name="attr_ship_length" type="text"></span>
    </div>

    <div class="section ship shipblock">
      <div class="price wborder">
        <label>Pricing:</label>
        <label>Introduction Era</label>
        <div class="priceblock wborder">
          <div class="flex-row">
            <span>Era</span>
            <input name="attr_intro_era_name" type="text">
          </div>
          <div class="flex-row">
            <span>New</span>
            <input name="attr_intro_era_price_new" type="text">
          </div>
          <div class="flex-row">
            <span>Used</span>
            <input name="attr_intro_era_price_used" type="text">
          </div>
        </div>
        <label>Current Era:</label>
        <div class="priceblock wborder">
          <div class="flex-row">
            <span>Era</span>
            <input name="attr_current_era_name" type="text">
          </div>
          <div class="flex-row">
            <span>Reproduction</span>
            <input name="attr_current_era_reproduction" type="text">
          </div>
          <div class="flex-row">
            <span>New-Old-Stock</span>
            <input name="attr_current_era_new_old" type="text">
          </div>
          <div class="flex-row">
            <span>Restored</span>
            <input name="attr_current_era_price_restored" type="text">
          </div>
          <div class="flex-row">
            <span>Used</span>
            <input name="attr_current_era_price_used" type="text">
          </div>
        </div>
      </div>

      <div class="perf wborder">
        <label class="title">Performance</label>
        <div class="perf-block">
          <div class="flex-col wborder" style="margin-right: 7px;">
            <label class="medium">Crew Station:</label>
            <input class="medium" name="attr_crew_station_performance" type="text">
          </div>
          <div class="flex-col">
            <label>Maneuverability:</label>
            <input class="medium" name="attr_maneuverability" type="text">
          </div>
          <div class="flex-col">
            <label>Move(Space Units)</label>
            <input class="medium" name="attr_ship_space" type="text">
          </div>
          <div class="flex-col">
            <label>Move(Ground units)</label>
            <input class="medium" name="attr_ship_ground" type="text">
          </div>
          <div class="flex-col">
            <label>Speed(Athmospheric)</label>
            <input class="medium" name="attr_ship_athmosphere" type="text">
          </div>
        </div>
      </div>

      <div class="sensor wborder">
        <label>Sensors</label>
        <div class="flex-row">
          <div class="wborder">
            <label>Crew Station</label>
            <input class="medium" name="attr_crew_station_sensors" type="text">
          </div>
          <div class="grid">
            <div></div><!-- empty placeholder in the grid-->
            <span>Search</span>
            <span>Scan</span>
            <span>Passive</span>
            <span>Focus</span>

            <span>Range</span>
            <input class="40px" name="attr_sensor_search" type="number"/>
            <input class="40px" name="attr_sensor_scan" type="number"/>
            <input class="40px" name="attr_sensor_passive" type="number"/>
            <input class="40px" name="attr_sensor_focus" type="number"/>

            <span>Sensitivity</span>
            <input class="40px" name="attr_sensor_search_max" type="number"/>
            <input class="40px" name="attr_sensor_scan_max" type="number"/>
            <input class="40px" name="attr_sensor_passive_max" type="number"/>
            <input class="40px" name="attr_sensor_focus_max" type="number"/>
          </div>
        </div>
      </div>

      <div class="hyperdrive wborder">
        <label>Hyperdrive System</label>
        <div class="wborder">
          <div class="wborder crew">
            <label>Crew Station</label>
            <input class="medium" name="attr_crew_station_hyperdrive" type="text">
          </div>
          <div class="hyper-grid">
            <label>Astrogation System</label>
            <label>Hyperdrive Integration</label>
            <label>Hyperdrive Rating</label>

            <input name="attr_astrogation_system" type="text">
            <input name="attr_hyperdrive_integration" type="text">
            <input name="attr_hyperdrive_rating" type="text">

            <label>Astromech</label>
            <label>Jump Route Capacity</label>
            <label>Kilo-Parsecs / Hour</label>

            <input name="attr_astromech" type="text">
            <input name="attr_jump_capacity" type="text">
            <input name="attr_parsec_speed" type="text">
          </div>
        </div>

      </div>

      <div class="consume wborder">
        <div>
          <label>Consumables:</label>
          <input name="attr_ship_consumables" type="text">
        </div>

        <div>
          <label>Max:</label>
          <input name="attr_ship_consumables_max" type="text">
        </div>
      </div>

      <div class="dura wborder">
        <label>Durability:</label>
        <label>Hull:</label>
        <label>Shields:</label>
        <div>
          <input name="attr_ship_durability" type="text">
        </div>
        <div>
          <input name="attr_ship_hull" type="text">
        </div>
        <div>
          <input name="attr_ship_shields" type="text">
        </div>
      </div>
    </div>

    <!-- --------------------------------------------------- Ship Weapons ------------------------------------------ -->

    <div class="section ship">
      <label>Ship Weapons</label>
      <fieldset class="repeating_shipweapon">
        <label class="bold">Weapon Name<input name="attr_weapon_name" type="text"></label>
        <div>
          <span>Scale:<input class="40px" name="attr_weapon_scale" type="text" value=""></span>
          <span>Fire Arc:<input name="attr_weapon_arc" type="text" value=""></span>
          <span>Crew:<input name="attr_weapon_crew" type="text" value=""></span>
        </div>

        <div>
          <span>Skill:<input name="attr_weapon_skill" type="text" value=""></span>
          <span>Fire Control:<input class="40px" name="attr_weapon_fire_control" type="number" value=""> D</span>
          <span class="range">Space Range:<input class="mediumnumber" name="attr_weapon_range_space" type="number"
                                                              value=""></span>
          <span>Atmosphere Range:<input class="40px" name="attr_weapon_range_atmosphere" type="number" value=""></span>
        </div>

        <div>
          <span>Damage:
            <input class="40px" name="attr_weapon_damage" type="number" value="3">D+<input
              class="smallnumber" name="attr_weapon_damage_pip" type="number" value="0">
            <button class="d6-dice" name="roll_ship_wpn_dmg" type="roll" value="&{template:swd6} {{name=Weapon: @{weapon_name} }} {{subtitle=Ship: @{ship_name} }} {{Roll=[[(@{weapon_damage}- 1)d6cf0cs0 + @{weapon_damage_pip} +(1d6@{wilddie})]] damage}}">DMG</button>
          </span>
        </div>

      </fieldset>
    </div>

    <!-- ------------------------------------------------- Unused ship stats --------------------------------------- -->

    <div class="section ship">
      <label>Other stats</label>
      <div class="other">
        <span class="bold">Craft:<input name="attr_ship_craft" type="text"></span>
        <span class="bold">Type:<input name="attr_ship_type" type="text"></span>
        <span class="bold">Crew:<input class="mediumnumber" name="attr_ship_crew" type="number"></span>
      </div>
      <div class="other">
        <span class="bold">Skill:<input name="attr_ship_skill" type="text"></span>
        <span class="bold">Passangers:<input class="mediumnumber" name="attr_ship_passangers" type="number"></span>
        <span class="bold">Cargo Capacity:<input name="attr_ship_cargo_capacity" type="text"></span>
      </div>
      <div class="other">
        <span class="bold p90">Hyperdrive Multipiler:<input name="attr_hyperdrive_multi" type="text"></span>
        <span class="bold">Hyperdrive Backup:<input name="attr_hyperdrive_backup" type="text"></span>
        <span class="bold">Nav Computer:<input name="attr_nav_computer" type="text"></span>
      </div>
    </div>

    <!-- -----------------------------------------------Generic Ship&Vehicle section ------------------------------- -->

    <div class="section ship">
      <div class="sheet-2colrow">
        <div class="sheet-col"><!-- Vehicle -->
          <label>Vehicle</label>
          <input class="skilltext" name="attr_vehiclename" type="text"/>
          <textarea name="attr_vehicle"></textarea>
        </div>
        <div class="sheet-col"><!-- Starship -->
          <label>Starship</label>
          <input class="skilltext" name="attr_starshipname" type="text"/>
          <textarea name="attr_starship"></textarea>
        </div>
      </div>
    </div>

    <!-- ------------------------------------------------------- Footer -------------------------------------------- -->

    <div class="section footer">
      <p><small>Original Author: Timothy O'Driscoll | Main Editor: Andreas
        J. (Roll20user: 1223200) | </small> <span name="attr_version"></span></p>
    </div>

  </div>
</div>

<!-- -------------------------------Hidden Values----------------@{WoundLevel} +@{Pain}----------------------------- -->

<input name="attr_Force_EmptinessMod" type="hidden" value="0">
<input name="attr_WoundMod" type="hidden" value="0">


<datalist id="dexskills">
  <option value="Acrobatics"></option>
  <option value="Archaic Guns"></option>
  <option value="Blaster"></option>
  <option value="Blaster Artillery"></option>
  <option value="Bowcaster"></option>
  <option value="Bows"></option>
  <option value="Brawling Parry"></option>
  <option value="Contortions"></option>
  <option value="Dancing"></option>
  <option value="Dodge"></option>
  <option value="Firearms"></option>
  <option value="Grenade"></option>
  <option value="Lightsaber"></option>
  <option value="Melee Combat"></option>
  <option value="Melee Parry"></option>
  <option value="Missile Weapon"></option>
  <option value="Pick Pocket"></option>
  <option value="Running"></option>
  <option value="Shockball Fling"></option>
  <option value="Shockball Scoop"></option>
  <option value="Slingshot"></option>
  <option value="Thrown Weapons"></option>
  <option value="Vehicle Blasters"></option>
  <option value="Wedsphere"></option>
</datalist>
<datalist id="knowskills">
  <option value="Accounting"> </option>
  <option value="Agriculture"> </option>
  <option value="Alien Species"> </option>
  <option value="Artist"> </option>
  <option value="Brainwashing"> </option>
  <option value="Bureaucracy"> </option>
  <option value="Business Administration"> </option>
  <option value="Business"> </option>
  <option value="Culinary Arts"> </option>
  <option value="Cultures"> </option>
  <option value="Drink Mixology"> </option>
  <option value="Economics"> </option>
  <option value="Home Economics"> </option>
  <option value="Intimidation"> </option>
  <option value="Languages"> </option>
  <option value="Law Enforcement"> </option>
  <option value="Military History"> </option>
  <option value="Planetary Systems"> </option>
  <option value="Shockball"> </option>
  <option value="Streetwise"> </option>
  <option value="Survival"> </option>
  <option value="Tactics"> </option>
  <option value="Traffic Control"> </option>
  <option value="Torture"> </option>
  <option value="Value"> </option>
  <option value="Willpower"> </option>
</datalist>
<datalist id="mechskills">
  <option value="Airship Operation"> </option>
  <option value="Aquatic Ship Operation"> </option>
  <option value="Archaic Starship Piloting"> </option>
  <option value="Astrogation Calculating"> </option>
  <option value="Beast Handling"> </option>
  <option value="Beast Riding"> </option>
  <option value="Capital Ship Gunnery"> </option>
  <option value="Capital Ship Piloting"> </option>
  <option value="Capital Ship Shields"> </option>
  <option value="Ground Vehicle Operation"> </option>
  <option value="Holorecorder Operation"> </option>
  <option value="Household Appliance Operation"> </option>
  <option value="Hover Vehicle Operation"> </option>
  <option value="Jet Pack Operation"> </option>
  <option value="Machinery Operation"> </option>
  <option value="Musical Instrument"> </option>
  <option value="Powersuit Operation"> </option>
  <option value="Repulsorlift Operation"> </option>
  <option value="Sailed Nautical Vessel Operation"> </option>
  <option value="Sensors Operation"> </option>
  <option value="Space Transports"> </option>
  <option value="Starfighter Piloting"> </option>
  <option value="Starship Gunnery"> </option>
  <option value="Starship shields"> </option>
  <option value="Swoop Operation"> </option>
  <option value="Undersea Vehicle operation"> </option>
  <option value="Walker Operation"> </option>
</datalist>
<datalist id="perskills">
  <option value="Bargain"> </option>
  <option value="Command"> </option>
  <option value="Con"> </option>
  <option value="Forgery"> </option>
  <option value="Gambling"> </option>
  <option value="Cesa"> </option>
  <option value="Hide"> </option>
  <option value="Investigation"> </option>
  <option value="Persuasion"> </option>
  <option value="Search"> </option>
  <option value="Singing"> </option>
  <option value="Sneak"> </option>
</datalist>
<datalist id="strskills">
  <option value="Brawling"></option>
  <option value="Cleaning"></option>
  <option value="Climbing/Jumping"></option>
  <option value="Digging"></option>
  <option value="Stamina"></option>
  <option value="Swimming"></option>
</datalist>
<datalist id="techskills">
  <option value="Aquatic Vehicle Engineering"> </option>
  <option value="Aquatic Vehicle Repair"> </option>
  <option value="Archaic Gun Repair"> </option>
  <option value="Armor Design"> </option>
  <option value="Armor Repair"> </option>
  <option value="Battle Station Engineering"> </option>
  <option value="Battle Station Repair"> </option>
  <option value="Battle Station Weapon Engineering"> </option>
  <option value="Battle Station Weapon Repair"> </option>
  <option value="Blaster Artillery Engineering"> </option>
  <option value="Blaster Repair"> </option>
  <option value="Blaster Engineering"> </option>
  <option value="Bowcaster Repair"> </option>
  <option value="Bow Repair Repairing"> </option>
  <option value="Capital Ship Engineering"> </option>
  <option value="Capital Ship Repair"> </option>
  <option value="Communications Repair"> </option>
  <option value="Computer Engineering"> </option>
  <option value="Computer Programming/Repair"> </option>
  <option value="Construction"> </option>
  <option value="Cyborg Technology"> </option>
  <option value="Demolitions"> </option>
  <option value="Droid Engineering"> </option>
  <option value="Droid Repair"> </option>
  <option value="Encryption Securing"> </option>
  <option value="Engineering"> </option>
  <option value="Firearms Repair"> </option>
  <option value="First Aid"> </option>
  <option value="Ground Vehicle Engineering"> </option>
  <option value="Ground Vehicle Repair"> </option>
  <option value="Holorecorder Repair"> </option>
  <option value="Hover Vehicle Engineering"> </option>
  <option value="Hover Vehicle Repair"> </option>
  <option value="Jet Pack Engineering"> </option>
  <option value="Jet Pack Repair"> </option>
  <option value="Lightsaber Repair"> </option>
  <option value="Machinery Repair"> </option>
  <option value="Medicine Performing"> </option>
  <option value="Melee Weapon Construction"> </option>
  <option value="Melee Weapon Repair"> </option>
  <option value="Musical Instrument Repair"> </option>
  <option value="Powersuit Repair"> </option>
  <option value="Prosthetic Design"> </option>
  <option value="Prosthetic Repair"> </option>
  <option value="Repulsorlift Engineering"> </option>
  <option value="Repulsorlift Repair"> </option>
  <option value="Rocket Pack Repair"> </option>
  <option value="Sailed Nautical Vessel Repair"> </option>
  <option value="Security Bypassing"> </option>
  <option value="Space Transports Engineering"> </option>
  <option value="Space Transports Repair"> </option>
  <option value="Starfighter Engineering"> </option>
  <option value="Starfighter Repair"> </option>
  <option value="Starship Weapon Engineering"> </option>
  <option value="Starship Weapon Repair"> </option>
  <option value="Swoop Engineering"> </option>
  <option value="Swoop Repair"> </option>
  <option value="Walker Engineering"> </option>
  <option value="Walker Repair"> </option>
</datalist>


<!------------------------------------------------------- ROLL TEMPLATES ------------------------------------------- -->
<!-- new template -->

<rolltemplate class="sheet-rolltemplate-swd6">
  <div class="sheet-container sheet-color-{{color}}">
    <div class="sheet-header">
      {{#name}}
      <div class="sheet-name">{{name}}</div>
      {{/name}}
      {{#subtitle}}
      <div class="sheet-subtitle">{{subtitle}}</div>
      {{/subtitle}}
    </div>
    <div class="sheet-content">
      {{#allprops() title subtitle desc color}}
      <div class="sheet-key">{{key}}</div>
      <div class="sheet-value">{{value}}</div>
      {{/allprops() title subtitle desc color}}
      {{#desc}}
      <div class="sheet-desc">{{desc}}</div>
      {{/desc}}
    </div>
  </div>
</rolltemplate>

<!-- old -->

<rolltemplate class="sheet-rolltemplate-blue">
  <table>
    <caption>{{name}}</caption>
    {{#allprops() }}
    <tr>
      <td>{{key}}</td>
      <td>{{value}}</td>
      {{/allprops() }}
  </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-green">
  <table>
    <caption>{{name}}</caption>
    {{#allprops() }}
    <tr>
      <td>{{key}}</td>
      <td>{{value}}</td>
      {{/allprops() }}
  </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-red">
  <table>
    <caption>{{name}}</caption>
    {{#allprops() }}
    <tr>
      <td>{{key}}</td>
      <td>{{value}}</td>
      {{/allprops() }}
  </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-black">
  <table>
    <caption>{{name}}</caption>
    {{#allprops() }}
    <tr>
      <td>{{key}}</td>
      <td>{{value}}</td>
      {{/allprops() }}
  </table>
</rolltemplate>

<!-- ----------------------------------------------------- Sheet workers ------------------------------------------- -->

<script type="text/worker">
/* ===== PARAMETERS ==========
destination = the name of the attribute that stores the total quantity
section = name of repeating fieldset, without the repeating_
fields = the name of the attribute field to be summed
      can be a single attribute: 'weight'
      or an array of attributes: ['weight','number','equipped']
multiplier (optional) = a multiplier to to entire fieldset total. For instance, if summing coins of weight 0.02, might want to multiply the final total by 0.02.
*/
const repeatingSum = (destination, section, fields, multiplier = 1) => {
    if (!Array.isArray(fields)) fields = [fields];
    getSectionIDs(`repeating_${section}`, idArray => {
        const attrArray = idArray.reduce( (m,id) => [...m, ...(fields.map(field => `repeating_${section}_${id}_${field}`))],[]);
        getAttrs(attrArray, v => {
            console.log("===== values of v: "+ JSON.stringify(v) +" =====");
                 // getValue: if not a number, returns 1 if it is 'on' (checkbox), otherwise returns 0..
            const getValue = (section, id,field) => parseFloat(v[`repeating_${section}_${id}_${field}`], 10) || (v[`repeating_${section}_${id}_${field}`] === 'on' ? 1 : 0); 
            const sumTotal = idArray.reduce((total, id) => total + fields.reduce((subtotal,field) => subtotal * getValue(section, id,field),1),0);
            setAttrs({[destination]: sumTotal * multiplier});    
        });
    });
};


on("change:painresist change:woundlevel", function() {
   getAttrs(["WoundLevel", "PainResist","WoundMod"], function(values) {
	if(values.WoundLevel == "0"){
		var update = {};
		update.WoundMod = "0";
		setAttrs(update);
	}
	else if(values.WoundLevel == "1"){
		var update = {};
		update.WoundMod = "1";
		setAttrs(update);
	}
	else if(values.WoundLevel == "2"){
		if(values.PainResist == "true"){
			var update = {};
			update.WoundMod = "1";
			setAttrs(update);
		} else {
		  var update = {};
			update.WoundMod = "2";
			setAttrs(update);
		}
	}
	else if(values.WoundLevel == "5"){
		if(values.PainResist == "true"){
			var update = {};
			update.WoundMod = "1";
			setAttrs(update);
		} else {
			var update = {};
			update.WoundMod = "5";
			setAttrs(update);
		}
	}
   });
});

on("change:force_emptiness change:darksidepoints", function() {
   getAttrs(["Force_Emptiness","darkSidePoints"], function(values) {
		let v_Force_Emptiness = values.Force_Emptiness;
		let v_Force_EmptinessMod = 0;
		let v_darkSidePoints = parseInt(values.darkSidePoints)||0;

		if(v_Force_Emptiness == "true"){
			v_Force_EmptinessMod = 6 - v_darkSidePoints;
		}
		setAttrs({
			Force_EmptinessMod:v_Force_EmptinessMod
		});
   });
});

on("change:repeating_credittable remove:repeating_credittable", function() {
	repeatingSum("credit_spent","credittable","credit_amount");
});

on("change:repeating_cptable change:repeating_cptable", function() {
	repeatingSum("cp_spent", "cptable","cp_amount");
});

</script>

<!--9/1/19' set sheet verion manually with currentVersion in sheetworkers-->
<input type="hidden" name="attr_version" value="0" />
<!-- ADDED recalc checkbox to force sheet worker events. temp unhide for testing purposes-->
<input name="attr_recalc1" type="checkbox" title="RECALC" style="display:none;">

<!--tabs-->
<input class="tab character" name="attr_tab" i18n-title="character" title="Character" type="radio" value="1" checked/>
<input class="tab stronghold" name="attr_tab" i18n-title="stronghold" title="Stronghold" type="radio" value="2" />
<input class="tab dice_only" name="attr_tab" i18n-title="dice-only" title="Dice Only" type="radio" value="3" />
<div class="logo"><img alt="Forbidden Lands" src="https://i.imgur.com/uf0H3XX.png" style="width: 45%; margin: -5px 0 5px 0;"></div>

<div class="wrapper tab-content character">

    <div class="character-grid">
        <div class="box toggle-dice-only character-attributes">
            <div class="attributes-grid">
                <div class="attributes-box1 header"><h1 data-i18n="attribute-u">ATTRIBUTES</h1></div>
                <div class="attributes-box2"><span class="label" data-i18n="strength">Strength</span></div>
                <div class="attributes-box3">
                    <input class="input-number" type="number" name="attr_strength" value="0" min="0" title="@{strength}" />
                </div>
                <div class="attributes-box4">
                    <input class="input-number" type="text" name="attr_strength_total" value="0" title="@{strength_total}" readonly />
                </div>
                <div class="attributes-box5">
                    <input type="radio" name="attr_damage" value="0" style="margin:2px 8px 0 0;" data-i18n-title="no-damage" title="No Damage" checked="checked" />
                    <input class="skull" type="radio" name="attr_damage" value="1" title="@{damage}" /><span></span>
                    <input class="skull" type="radio" name="attr_damage" value="2" title="@{damage}" /><span></span>
                    <input class="skull" type="radio" name="attr_damage" value="3" title="@{damage}" /><span></span>
                    <input class="skull" type="radio" name="attr_damage" value="4" title="@{damage}" /><span></span>
                    <input class="skull" type="radio" name="attr_damage" value="5" title="@{damage}" /><span></span>
                    <input class="skull" type="radio" name="attr_damage" value="6" title="@{damage}" /><span></span>
                </div>
                <div class="attributes-box6"><span class="label" data-i18n="agility">Agility</span></div>
                <div class="attributes-box7">
                    <input class="input-number" type="number" name="attr_agility" value="0" min="0" title="@{agility}" />
                </div>
                <div class="attributes-box8">
                    <input class="input-number" type="text" name="attr_agility_total" value="0" title="@{agility_total}" readonly />        
                </div>
                <div class="attributes-box9">
                    <input type="radio" name="attr_fatigue" value="0" style="margin:2px 8px 0 0;" data-i18n-title="no-damage" title="No Damage" checked="checked" />
                    <input class="skull" type="radio" name="attr_fatigue" value="1" title="@{fatigue}" /><span></span>
                    <input class="skull" type="radio" name="attr_fatigue" value="2" title="@{fatigue}" /><span></span>
                    <input class="skull" type="radio" name="attr_fatigue" value="3" title="@{fatigue}" /><span></span>
                    <input class="skull" type="radio" name="attr_fatigue" value="4" title="@{fatigue}" /><span></span>
                    <input class="skull" type="radio" name="attr_fatigue" value="5" title="@{fatigue}" /><span></span>
                    <input class="skull" type="radio" name="attr_fatigue" value="6" title="@{fatigue}" /><span></span>
                </div>
                <div class="attributes-box10"><span class="label" data-i18n="wits">Wits</span></div>
                <div class="attributes-box11">
                    <input class="input-number" type="number" name="attr_wits" value="0" min="0" title="@{wits}" />
                </div>
                <div class="attributes-box12">
                    <input class="input-number" type="text" name="attr_wits_total" value="0" title="@{wits_total}" readonly />
                </div>
                <div class="attributes-box13">
                    <input type="radio" name="attr_confusion" value="0" style="margin:2px 8px 0 0;" data-i18n-title="no-damage" title="No Damage" checked="checked" />
                    <input class="skull" type="radio" name="attr_confusion" value="1" title="@{confusion}" /><span></span>
                    <input class="skull" type="radio" name="attr_confusion" value="2" title="@{confusion}" /><span></span>
                    <input class="skull" type="radio" name="attr_confusion" value="3" title="@{confusion}" /><span></span>
                    <input class="skull" type="radio" name="attr_confusion" value="4" title="@{confusion}" /><span></span>
                    <input class="skull" type="radio" name="attr_confusion" value="5" title="@{confusion}" /><span></span>
                    <input class="skull" type="radio" name="attr_confusion" value="6" title="@{confusion}" /><span></span>
                </div>
                <div class="attributes-box14"><span class="label" data-i18n="empathy">Empathy</span></div>
                <div class="attributes-box15">
                    <input class="input-number" type="number" name="attr_empathy" value="0" min="0" title="@{empathy}" />
                </div>
				<div class="attributes-box16">
                    <input class="input-number" type="text" name="attr_empathy_total" value="0" title="@{empathy_total}" readonly /> 
                </div>
                <div class="attributes-box17">
                    <input type="radio" name="attr_doubt" value="0" style="margin:2px 8px 0 0;" data-i18n-title="no-damage" title="No Damage" checked="checked" />
                    <input class="skull" type="radio" name="attr_doubt" value="1" title="@{doubt}" /><span></span>
                    <input class="skull" type="radio" name="attr_doubt" value="2" title="@{doubt}" /><span></span>
                    <input class="skull" type="radio" name="attr_doubt" value="3" title="@{doubt}" /><span></span>
                    <input class="skull" type="radio" name="attr_doubt" value="4" title="@{doubt}" /><span></span>
                    <input class="skull" type="radio" name="attr_doubt" value="5" title="@{doubt}" /><span></span>
                    <input class="skull" type="radio" name="attr_doubt" value="6" title="@{doubt}" /><span></span>
                </div>
            </div>
        </div>
        <div class="box toggle-dice-only character-details">
            <div class="details-grid">
                <div class="details-box1"><span class="label" data-i18n="name">Name</span></div>
                <div class="details-box2">
                    <input class="input" type="text" name="attr_character_name" value="" title="@{character_name}" />
                </div>
                <div class="details-box3"><span class="label" data-i18n="kin">Kin</span></div>
                <div class="details-box4">
                    <input class="input" type="text" name="attr_kin" value="" title="@{kin}" />        
                </div>
                <div class="details-box5"><span class="label" data-i18n="profession">Profession</span></div>
                <div class="details-box6">
                    <input class="input" type="text" name="attr_profession" value="" title="@{profession}" />
                </div>                
                <div class="details-box7"><span class="label" data-i18n="pride">Pride</span></div>
                <div class="details-box8">
                    <textarea class="input-textarea" name="attr_pride" title="@{pride}"></textarea>
                </div>
                <div class="details-box9"><span class="label" data-i18n="dark-secret">Dark Secret</span></div>
                <div class="details-box10">
                    <textarea class="input-textarea" name="attr_dark_secret" title="@{dark_secret}"></textarea>
                </div>
            </div>
        </div>
        <div class="box toggle-dice-only character-appearance">
            <div class="appearance-grid">
                <div class="appearance-box1 header"><h1 data-i18n="appearance-u">APPEARANCE</h1></div>
                <div class="appearance-box2"><span class="label" data-i18n="face">Face</span></div>
                <div class="appearance-box3">
                    <textarea class="input-textarea" name="attr_face" title="@{face}"></textarea>
                </div>
                <div class="appearance-box4"><span class="label" data-i18n="body">Body</span></div>
                <div class="appearance-box5">
                    <textarea class="input-textarea" name="attr_body" title="@{body}"></textarea>
                </div>
                <div class="appearance-box6"><span class="label" data-i18n="clothing">Clothing</span></div>
                <div class="appearance-box7">
                    <textarea class="input-textarea" name="attr_clothing" title="@{clothing}"></textarea>
                </div>
                <div class="appearance-box8">
                    <button type="action" name="act_reputation-roll" title="Update Dice Pool" data-i18n="reputation">Reputation</button>
                </div>
                <div class="appearance-box9">
                    <input class="input-number" type="number" name="attr_reputation" value="0" min="0" title="@{reputation}">
                </div>                
                <div class="appearance-box10"><span class="label" data-i18n="age">Age</span></div>
                <div class="appearance-box11">
                    <select name="attr_age" class="input" title="@{age}">
                        <option value="young" data-i18n="young-1" selected>Young +0</option>
                        <option value="adult" data-i18n="adult-2">Adult +1</option>
                        <option value="old" data-i18n="old-3">Old +2</option>
                    </select>    
                </div>
            </div>                    
        </div>        
        <div class="box toggle-dice-only character-conditions">
            <div class="conditions-grid">                
                <div class="conditions-box2">
                    <input class="input xbox conditions-hungry" type="checkbox" name="attr_hungry" value="1" title="@{hungry}" /><span></span>
                </div>
                <input class="conditions-hungry" type="checkbox" name="attr_hungry" value="1" style="display:none;" />
                <div class="conditions-box3"><span class="header-h1 conditions-hungry" data-i18n="hungry">Hungry</span></div>

                <div class="conditions-box4">
                    <input class="input xbox conditions-sleepy" type="checkbox" name="attr_sleepy" value="1" title="@{sleepy}" /><span></span>
                </div>
                <input class="conditions-sleepy" type="checkbox" name="attr_sleepy" value="1" style="display:none;" />
                <div class="conditions-box5"><span class="header-h1 conditions-sleepy" data-i18n="sleepy">Sleepy</span></div>

                <div class="conditions-box6">
                    <input class="input xbox conditions-thirsty" type="checkbox" name="attr_thirsty" value="1" title="@{thirsty}" /><span></span>
                </div>
                <input class="conditions-thirsty" type="checkbox" name="attr_thirsty" value="1" style="display:none;" />
                <div class="conditions-box7"><span class="header-h1 conditions-thirsty" data-i18n="thirsty">Thirsty</span></div>

                <div class="conditions-box8">
                    <input class="input xbox conditions-cold" type="checkbox" name="attr_cold" value="1" title="@{cold}" /><span></span>
                </div>
                <input class="conditions-cold" type="checkbox" name="attr_cold" value="1" style="display:none;" />
                <div class="conditions-box9"><span class="header-h1 conditions-cold" data-i18n="cold">Cold</span></div>
            </div>            
        </div>
        <div class="box toggle-dice-only character-injuries">
			<div class="injuries-grid">
				<div class="injuries-box1 header"><h1 data-i18n="critical-u">CRITICAL INJURIES</h1></div>
                <div class="injuries-box2 column-header"><span data-i18n="injury">Injury</span></div>
                <div class="injuries-box3 column-header"><span data-i18n="lethal">Lethal</span></div>
                <div class="injuries-box4 column-header"><span data-i18n="time-limit">Time Limit</span></div>
                <div class="injuries-box5 column-header"><span data-i18n="effects">Effects</span></div>
                <div class="injuries-box6 column-header"><span data-i18n="healing-time">Healing Time</span></div>		
                <div class="injuries-box7">
                    <fieldset class="repeating_injuries">
                        <div class="injuries-grid">
                            <input type="text" class="injuries-box8 input" name="attr_injury_name" value="" title="@{repeating_injuries_$X_injury_name}" />
                            <select class="injuries-box9 input" name="attr_injury_lethal" title="@{repeating_injuries_$X_injury_lethal}">
                                <option value="no" data-i18n="no" selected>No</option>
                                <option value="yes" data-i18n="yes">Yes</option>
                                <option value="yes -1" data-i18n="yes-1">Yes,-1</option>
                                <option value="n/a" data-i18n="not-applicable-abbr">n/a</option>
                            </select>
                            <input type="text" class="injuries-box10 input" name="attr_injury_time_limit" value="n/a" title="@{repeating_injuries_$X_injury_time_limit}" />
                            <input type="text" class="injuries-box11 input" name="attr_injury_effects" value="" title="@{repeating_injuries_$X_injury_effects}" />
                            <input type="text" class="injuries-box12 input" name="attr_injury_healing_time" value="n/a" title="@{repeating_injuries_$X_injury_healing_time}" />
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
        <div class="box toggle-dice-only character-weapons">
            <div class="weapons-grid">
                <div class="weapons-box header"><h1 data-i18n="weapon-u">WEAPONS</h1></div>
                <div class="weapons-box1 column-header"></div>
                <div class="weapons-box2 column-header"><span data-i18n="name">Name</span></div>                
                <div class="weapons-box3 column-header"><span data-i18n="grip">Grip</span></div>
                <div class="weapons-box4 column-header"><span data-i18n="skill">Skill</span></div>
                <div class="weapons-box5 column-header"><span data-i18n="bonus">Bonus</span></div>
                <div class="weapons-box6 column-header"><span data-i18n="max-abbr">Max</span></div>
                <div class="weapons-box7 column-header"><span data-i18n="dmg-abbr">Dmg</span></div>
                <div class="weapons-box8 column-header"><span data-i18n="range">Range</span></div>
                <div class="weapons-box9 column-header"><span data-i18n="features">Features</span></div>
                <div class="weapons-box10">
                    <fieldset class="repeating_weapons">
                        <div class="weapons-grid">
                            <button class="weapons-box11 roll-button" type="action" name="act_attack-roll" title="Update Dice Pool">t</button>
                            <input class="weapons-box12 input" type="text" name="attr_weapon_name" value="" title="@{repeating_weapons_$X_weapon_name}" />                            
                            <select class="weapons-box13 input" name="attr_weapon_grip" title="@{repeating_weapons_$X_weapon_grip}" title="@{repeating_weapons_$X_weapon_grip}">
                                <option data-i18n="not-applicable-abbr" value="n/a">n/a</option>
                                <option data-i18n="one-hand-abbr" value="1H" selected>1H</option>
                                <option data-i18n="two-hand-abbr" value="2H">2H</option>
                            </select>
                            <select class="weapons-box14 input" name="attr_weapon_skill" title="@{repeating_weapons_$X_weapon_skill}">
                                <option value="0" selected data-i18n="melee">Melee</option>
                                <option value="1" data-i18n="marksmanship-abbr">Marks.</option>
                            </select>
                            <select class="weapons-box15 input" name="attr_weapon_bonus" title="@{repeating_weapons_$X_weapon_bonus}">
                                <option value="0">0</option>
                                <option value="1" selected>1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                            <input class="weapons-box16 input-number" type="number" name="attr_weapon_bonus_max" value="1" min="0" title="@{repeating_weapons_$X_weapon_bonus|max}" />
                            <input class="weapons-box17 input-number" type="number" name="attr_weapon_damage" value="1" min="0" title="@{repeating_weapons_$X_weapon_damage}" />
                            <select class="weapons-box18 input" name="attr_weapon_range" title="@{repeating_weapons_$X_weapon_range}">
                                <option value="Arm" selected data-i18n="arms-length-abbr">Arm's L.</option>
                                <option value="Near" data-i18n="near">Near</option>
                                <option value="Short" data-i18n="short">Short</option>
                                <option value="Long" data-i18n="long">Long</option>
                            </select>
                            <input class="weapons-box19 input" type="text" name="attr_weapon_features" value="" title="@{repeating_weapons_$X_weapon_features}" />
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
        <div class="box toggle-dice-only character-skills">
            <div class="skills-grid" data-i18n-list="skills-list">
				<span>
					<div class="skills-box1 header"><h1 data-i18n="skill-u">SKILLS</h1></div>
					<div class="skills-box2 column-header"><span class="small-caps" data-i18n="lvl-abbr">Lvl</span></div>
					<div class="skills-box3 column-header"><span class="small-caps" data-i18n="attr-abbr">Attr</span></div>
					<div class="skills-box4 column-header"><span class="small-caps"></span></div>
					<div class="skills-box5 column-header"><span class="small-caps" data-i18n="total">Total</span></div>
				</span>
				<span data-i18n-list-item="animal-handling">
					<button type="action" name="act_dice_pool_animal_handling"><span data-i18n="animal-handling">Animal Handling</span><span class="small-caps" data-i18n="empathy-abbr"> [emp]</span></button>
					<input class="input-number" type="number" name="attr_animal_handling" value="0" min="0" title="@{animal_handling}" />
					<input class="input-number" type="text" name="attr_empathy_total" value="0" title="@{empathy_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_animal_handling_total" value="0" title="@{animal_handling_total}" readonly />
				</span>
				<span data-i18n-list-item="crafting">
					<button type="action" name="act_dice_pool_crafting"><span data-i18n="crafting">Crafting</span><span class="small-caps" data-i18n="strength-abbr"> [str]</span></button>
					<input class="input-number" type="number" name="attr_crafting" value="0" min="0" title="@{crafting}" />				
					<input class="input-number" type="text" name="attr_strength_total" value="0" title="@{strength_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_crafting_total" value="0" title="@{crafting_total}" readonly />
				</span>
				<span data-i18n-list-item="endurance">
					<button type="action" name="act_dice_pool_endurance"><span data-i18n="endurance">Endurance</span><span class="small-caps" data-i18n="strength-abbr"> [str]</span></button>				
					<input class="input-number" type="number" name="attr_endurance" value="0" min="0" title="@{endurance}" />			
					<input class="input-number" type="text" name="attr_strength_total" value="0" title="@{strength_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_endurance_total" value="0" title="@{endurance_total}" readonly />				
				</span>
				<span data-i18n-list-item="healing">			
					<button type="action" name="act_dice_pool_healing"><span data-i18n="healing">Healing</span><span class="small-caps" data-i18n="empathy-abbr"> [emp]</span></button>
					<input class="input-number" type="number" name="attr_healing" value="0" min="0" title="@{healing}" />
					<input class="input-number" type="text" name="attr_empathy_total" value="0" title="@{empathy_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_healing_total" value="0" title="@{healing_total}" readonly />
				</span>
				<span data-i18n-list-item="insight">
					<button type="action" name="act_dice_pool_insight"><span data-i18n="insight">Insight</span><span class="small-caps" data-i18n="wits-abbr"> [wit]</span></button>
					<input class="input-number" type="number" name="attr_insight" value="0" min="0" title="@{insight}" />
					<input class="input-number" type="text" name="attr_wits_total" value="0" title="@{wits_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_insight_total" value="0" title="@{insight_total}" readonly />
				</span>
				<span data-i18n-list-item="lore">
					<button type="action" name="act_dice_pool_lore"><span data-i18n="lore">Lore</span><span class="small-caps" data-i18n="wits-abbr"> [wit]</span></button>
					<input class="input-number" type="number" name="attr_lore" value="0" min="0" title="@{lore}" />
					<input class="input-number" type="text" name="attr_wits_total" value="0" title="@{wits_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_lore_total" value="0" title="@{lore_total}" readonly />
				</span>
				<span data-i18n-list-item="manipulation">
					<button type="action" name="act_dice_pool_manipulation"><span data-i18n="manipulation">Manipulation</span><span class="small-caps" data-i18n="empathy-abbr"> [emp]</span></button>
					<input class="input-number" type="number" name="attr_manipulation" value="0" min="0" title="@{manipulation}" />
					<input class="input-number" type="text" name="attr_empathy_total" value="0" title="@{empathy_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_manipulation_total" value="0" title="@{manipulation_total}" readonly />
				</span>
				<span data-i18n-list-item="marksmanship">
					<button type="action" name="act_dice_pool_marksmanship"><span data-i18n="marksmanship">Marksmanship</span><span class="small-caps" data-i18n="agility-abbr"> [agl]</span></button>
					<input class="input-number" type="number" name="attr_marksmanship" value="0" min="0" title="@{marksmanship}" />
					<input class="input-number" type="text" name="attr_agility_total" value="0" title="@{agility_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_marksmanship_total" value="0" title="@{marksmanship_total}" readonly />
				</span>
				<span data-i18n-list-item="melee">
					<button type="action" name="act_dice_pool_melee"><span data-i18n="melee">Melee</span><span class="small-caps" data-i18n="strength-abbr"> [str]</span></button>
					<input class="input-number" type="number" name="attr_melee" value="0" min="0" title="@{melee}" />
					<input class="input-number" type="text" name="attr_strength_total" value="0" title="@{strength_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_melee_total" value="0" title="@{melee_total}" readonly />
				</span>
				<span data-i18n-list-item="might">
					<button type="action" name="act_dice_pool_might"><span data-i18n="might">Might</span><span class="small-caps" data-i18n="strength-abbr"> [str]</span></button>
					<input class="input-number" type="number" name="attr_might" value="0" min="0" title="@{might}" />
					<input class="input-number" type="text" name="attr_strength_total" value="0" title="@{strength_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_might_total" value="0" title="@{might_total}" readonly />
				</span>
				<span data-i18n-list-item="move">
					<button type="action" name="act_dice_pool_move"><span data-i18n="move">Move</span><span class="small-caps" data-i18n="agility-abbr"> [agl]</span></button>
					<input class="input-number" type="number" name="attr_move" value="0" min="0" title="@{move}" />
					<input class="input-number" type="text" name="attr_agility_total" value="0" title="@{agility_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_move_total" value="0" title="@{move_total}" readonly />
				</span>
				<span data-i18n-list-item="performance">
					<button type="action" name="act_dice_pool_performance"><span data-i18n="performance">Performance</span><span class="small-caps" data-i18n="empathy-abbr"> [emp]</span></button>
					<input class="input-number" type="number" name="attr_performance" value="0" min="0" title="@{performance}" />
					<input class="input-number" type="text" name="attr_empathy_total" value="0" title="@{empathy_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_performance_total" value="0" title="@{performance_total}" readonly />
				</span>
				<span data-i18n-list-item="scouting">
					<button type="action" name="act_dice_pool_scouting"><span data-i18n="scouting">Scouting</span><span class="small-caps" data-i18n="wits-abbr"> [wit]</span></button>
					<input class="input-number" type="number" name="attr_scouting" value="0" min="0" title="@{scouting}" />
					<input class="input-number" type="text" name="attr_wits_total" value="0" title="@{wits_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_scouting_total" value="0" title="@{scouting_total}" readonly />
				</span>
				<span data-i18n-list-item="sleight-of-hand">
					<button type="action" name="act_dice_pool_sleight_of_hand"><span data-i18n="sleight-of-hand">Sleight of Hand</span><span class="small-caps" data-i18n="agility-abbr"> [agl]</span></button>
					<input class="input-number" type="number" name="attr_sleight_of_hand" value="0" min="0" title="@{sleight_of_hand}" />
					<input class="input-number" type="text" name="attr_agility_total" value="0" title="@{agility_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_sleight_of_hand_total" value="0" title="@{sleight_of_hand_total}" readonly />
				</span>
				<span data-i18n-list-item="stealth">
					<button type="action" name="act_dice_pool_stealth"><span data-i18n="stealth">Stealth</span><span class="small-caps" data-i18n="agility-abbr"> [agl]</span></button>
					<input class="input-number" type="number" name="attr_stealth" value="0" min="0" title="@{stealth}" />
					<input class="input-number" type="text" name="attr_agility_total" value="0" title="@{agility_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_stealth_total" value="0" title="@{stealth_total}" readonly />
				</span>
				<span data-i18n-list-item="survival">
					<button type="action" name="act_dice_pool_survival"><span data-i18n="survival">Survival</span><span class="small-caps" data-i18n="wits-abbr"> [wit]</span></button>
					<input class="input-number" type="number" name="attr_survival" value="0" min="0" title="@{survival}" />
					<input class="input-number" type="text" name="attr_wits_total" value="0" title="@{wits_total}" readonly />
					<span class="equal">=</span>
					<input class="input-number" type="text" name="attr_survival_total" value="0" title="@{survival_total}" readonly />
				</span>
			</div>    
        </div>
        <div class="box character-dice_pool">  
            <div class="dice_pool-grid">
              <div class="dice-header dice_pool-box1 toggle-dice-only header"><h1 data-i18n="dice-pool-u">DICE POOL</h1></div>
              <div class="dice-base">
                <div class="dice-base-header"><span class="label" data-i18n-title="base-attribute-dice" data-i18n="base">Base</span></div>
                    <input type="hidden" name="attr_attribute_die_twelve" value="1" />
                    <input type="hidden" name="attr_attribute_die_eleven" value="1" />
                    <input type="hidden" name="attr_attribute_die_ten" value="1" />
                    <input type="hidden" name="attr_attribute_die_nine" value="1" />
                    <input type="hidden" name="attr_attribute_die_eight" value="1" />                  
                    <input type="hidden" name="attr_attribute_die_seven" value="1" />
                    <input type="hidden" name="attr_attribute_die_six" value="1"/>
                    <input type="hidden" name="attr_attribute_die_five" value="1" />
                    <input type="hidden" name="attr_attribute_die_four" value="1" />
                    <input type="hidden" name="attr_attribute_die_three" value="1" />
                    <input type="hidden" name="attr_attribute_die_two" value="1" />
                    <input type="hidden" name="attr_attribute_die_one" value="1" />
                <div class="dice-base-col1">
                    <input type="radio" name="attr_attribute" value="6" class="dice-selection attribute" /><span title="6"></span>
                    <input type="radio" name="attr_attribute" value="5" class="dice-selection attribute" /><span title="5"></span>
                    <input type="radio" name="attr_attribute" value="4" class="dice-selection attribute" /><span title="4"></span>
                    <input type="radio" name="attr_attribute" value="3" class="dice-selection attribute" /><span title="3"></span>
                    <input type="radio" name="attr_attribute" value="2" class="dice-selection attribute" /><span title="2"></span>
                    <input type="radio" name="attr_attribute" value="1" class="dice-selection attribute" /><span title="1"></span>
                    <input type="radio" name="attr_attribute" value="0" class="dice-selection attribute" checked="checked" /><span title="0"></span>
                </div>
                <div class="dice-base-col2">
                    <input type="radio" name="attr_attribute" value="7" class="dice-selection attribute" /><span title="7"></span>
                    <input type="radio" name="attr_attribute" value="8" class="dice-selection attribute" /><span title="8"></span>
                    <input type="radio" name="attr_attribute" value="9" class="dice-selection attribute" /><span title="9"></span>
                    <input type="radio" name="attr_attribute" value="10" class="dice-selection attribute" /><span title="10"></span>
                    <input type="radio" name="attr_attribute" value="11" class="dice-selection attribute" /><span title="11"></span>
                    <input type="radio" name="attr_attribute" value="12" class="dice-selection attribute" /><span title="12"></span>
                </div>
              </div>
              <div class="dice-skill">
                <div class="dice-skill-header"><span class="label" data-i18n-title="skill-level" data-i18n="skill">Skill</span></div>
                  <input type="hidden" name="attr_negative_die_one" value="1" />
                  <input type="hidden" name="attr_negative_die_two" value="1" />
                  <input type="hidden" name="attr_negative_die_three" value="1" /> 
                  <input type="hidden" name="attr_skill_die_ten" value="1" />
                  <input type="hidden" name="attr_skill_die_nine" value="1" />                  
				  <input type="hidden" name="attr_skill_die_eight" value="1" />
				  <input type="hidden" name="attr_skill_die_seven" value="1" />
                  <input type="hidden" name="attr_skill_die_six" value="1" />
                  <input type="hidden" name="attr_skill_die_five" value="1" />
                  <input type="hidden" name="attr_skill_die_four" value="1" />
                  <input type="hidden" name="attr_skill_die_three" value="1" />
                  <input type="hidden" name="attr_skill_die_two" value="1" />
                  <input type="hidden" name="attr_skill_die_one" value="1" />
                <div class="dice-skill-col1">
                  <input type="radio" name="attr_skill" value="6" class="dice-selection skill" /><span title="6"></span>
                  <input type="radio" name="attr_skill" value="5" class="dice-selection skill" /><span title="5"></span>
                  <input type="radio" name="attr_skill" value="4" class="dice-selection skill" /><span title="4"></span>
                  <input type="radio" name="attr_skill" value="3" class="dice-selection skill" /><span title="3"></span>
                  <input type="radio" name="attr_skill" value="2" class="dice-selection skill" /><span title="2"></span>
                  <input type="radio" name="attr_skill" value="1" class="dice-selection skill" /><span title="1"></span>
                  <input type="radio" name="attr_skill" value="0" class="dice-selection skill" checked="checked" /><span title="0"></span>
                </div>
                <div class="dice-skill-col2">
                  <input type="radio" name="attr_skill" value="7" class="dice-selection skill" /><span title="7"></span>
                  <input type="radio" name="attr_skill" value="8" class="dice-selection skill" /><span title="8"></span>
                  <input type="radio" name="attr_skill" value="9" class="dice-selection skill" /><span title="9"></span>
                  <input type="radio" name="attr_skill" value="10" class="dice-selection skill" /><span title="10"></span>
                  <input type="radio" name="attr_skill" value="-1" class="dice-selection negative" /><span title="-1"></span>
                  <input type="radio" name="attr_skill" value="-2" class="dice-selection negative" /><span title="-2"></span>
                  <input type="radio" name="attr_skill" value="-3" class="dice-selection negative" /><span title="-3"></span>   
                </div>
              </div>
              <div class="dice-gear">
                <div class="dice-gear-header"><span class="label" data-i18n-title="gear-bonus" data-i18n="gear">Gear</span></div>
                  <input type="hidden" name="attr_gear_die_twelve" value="1" />
                  <input type="hidden" name="attr_gear_die_eleven" value="1" />
                  <input type="hidden" name="attr_gear_die_ten" value="1" />
                  <input type="hidden" name="attr_gear_die_nine" value="1" />
                  <input type="hidden" name="attr_gear_die_eight" value="1" />
                  <input type="hidden" name="attr_gear_die_seven" value="1" />
                  <input type="hidden" name="attr_gear_die_six" value="1" />
                  <input type="hidden" name="attr_gear_die_six" value="1" />
                  <input type="hidden" name="attr_gear_die_five" value="1" />
                  <input type="hidden" name="attr_gear_die_four" value="1" />
                  <input type="hidden" name="attr_gear_die_three" value="1" />
                  <input type="hidden" name="attr_gear_die_two" value="1" />
                  <input type="hidden" name="attr_gear_die_one" value="1" />
                <div class="dice-gear-col1">
                  <input type="radio" name="attr_gear" value="6" class="dice-selection gear" /><span title="6"></span>
                  <input type="radio" name="attr_gear" value="5" class="dice-selection gear" /><span title="5"></span>
                  <input type="radio" name="attr_gear" value="4" class="dice-selection gear" /><span title="4"></span>
                  <input type="radio" name="attr_gear" value="3" class="dice-selection gear" /><span title="3"></span>
                  <input type="radio" name="attr_gear" value="2" class="dice-selection gear" /><span title="2"></span>
                  <input type="radio" name="attr_gear" value="1" class="dice-selection gear" /><span title="1"></span>
                  <input type="radio" name="attr_gear" value="0" class="dice-selection gear" checked="checked" /><span title="0"></span>        
                </div>
                <div class="dice-gear-col2">
                    <input type="radio" name="attr_gear" value="7" class="dice-selection gear" /><span title="7"></span>
                    <input type="radio" name="attr_gear" value="8" class="dice-selection gear" /><span title="8"></span>
                    <input type="radio" name="attr_gear" value="9" class="dice-selection gear" /><span title="9"></span>
                    <input type="radio" name="attr_gear" value="10" class="dice-selection gear" /><span title="10"></span>
                    <input type="radio" name="attr_gear" value="11" class="dice-selection gear" /><span title="11"></span>
                    <input type="radio" name="attr_gear" value="12" class="dice-selection gear" /><span title="12"></span>
                </div>
              </div>    
              <div class="dice-artifact">
                <div class="dice-artifact-header"><span class="label" data-i18n-title="artifact-bonus" data-i18n="artifact">Artifact</span></div>
                <div class="dice-artifact-rolls">
                  <input type="checkbox" name="attr_artifact_die_ocho" value="1" class="dice-selection mighty" data-i18n-title="mighty" title="Mighty" />
                  <span title="d8"></span>
                  <input type="checkbox" name="attr_artifact_die_eight" value="1" class="dice-selection mighty" data-i18n-title="mighty" title="Mighty" />
                  <span title="d8"></span>
                  <input type="checkbox" name="attr_artifact_die_ten" value="1" class="dice-selection epic" data-i18n-title="epic" title="Epic" />
                  <span title="d10"></span>
                  <input type="checkbox" name="attr_artifact_die_twelve" value="1" class="dice-selection legendary" data-i18n-title="legendary" title="Legendary" />
                  <span title="d12"></span>
                </div>
              </div>
              <div class="dice-rolls">
                <input class="hidden api-toggle-show" type="checkbox" name="attr_api_toggle" value="1" />
                <div class="template-roll dice-rolls-roll">
                  <button class="dice-pool" type="roll" name="roll_the_dice" value="&{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{dice-pool}}} {{subtitle=@{current_preset}}} {{free-text}} {{footer}} {{attribute-die-one=[[ @{attribute_die_one}]] }} {{attribute-roll-one=[[1d6]] }} {{attribute-die-two=[[ @{attribute_die_two}]] }} {{attribute-roll-two=[[1d6]] }} {{attribute-die-three=[[ @{attribute_die_three}]] }} {{attribute-roll-three=[[1d6]] }} {{attribute-die-four=[[ @{attribute_die_four}]] }} {{attribute-roll-four=[[1d6]] }} {{attribute-die-five=[[ @{attribute_die_five}]] }} {{attribute-roll-five=[[1d6]] }} {{attribute-die-six=[[ @{attribute_die_six}]] }} {{attribute-roll-six=[[1d6]] }} {{attribute-die-seven=[[ @{attribute_die_seven}]] }} {{attribute-roll-seven=[[1d6]] }} {{attribute-die-eight=[[ @{attribute_die_eight}]] }} {{attribute-roll-eight=[[1d6]] }} {{attribute-die-nine=[[ @{attribute_die_nine}]] }} {{attribute-roll-nine=[[1d6]] }} {{attribute-die-ten=[[ @{attribute_die_ten}]] }} {{attribute-roll-ten=[[1d6]] }} {{attribute-die-eleven=[[ @{attribute_die_eleven}]] }} {{attribute-roll-eleven=[[1d6]] }} {{attribute-die-twelve=[[ @{attribute_die_twelve}]] }} {{attribute-roll-twelve=[[1d6]] }} {{skill-die-one=[[ @{skill_die_one}]] }} {{skill-roll-one=[[1d6]] }} {{skill-die-two=[[ @{skill_die_two}]] }} {{skill-roll-two=[[1d6]] }} {{skill-die-three=[[ @{skill_die_three}]] }} {{skill-roll-three=[[1d6]] }} {{skill-die-four=[[ @{skill_die_four}]] }} {{skill-roll-four=[[1d6]] }} {{skill-die-five=[[ @{skill_die_five}]] }} {{skill-roll-five=[[1d6]] }} {{skill-die-six=[[ @{skill_die_six}]] }} {{skill-roll-six=[[1d6]] }} {{skill-die-seven=[[ @{skill_die_seven}]] }} {{skill-roll-seven=[[1d6]] }} {{skill-die-eight=[[ @{skill_die_eight}]] }} {{skill-roll-eight=[[1d6]] }} {{skill-die-nine=[[ @{skill_die_nine}]] }} {{skill-roll-nine=[[1d6]] }} {{skill-die-ten=[[ @{skill_die_ten}]] }} {{skill-roll-ten=[[1d6]] }} {{negative-die-one=[[ @{negative_die_one}]] }} {{negative-roll-one=[[1d6]] }} {{negative-die-two=[[ @{negative_die_two}]] }} {{negative-roll-two=[[1d6]] }} {{negative-die-three=[[ @{negative_die_three}]] }} {{negative-roll-three=[[1d6]] }} {{gear-die-one=[[ @{gear_die_one}]] }} {{gear-roll-one=[[1d6]] }} {{gear-die-two=[[ @{gear_die_two}]] }} {{gear-roll-two=[[1d6]] }} {{gear-die-three=[[ @{gear_die_three}]] }} {{gear-roll-three=[[1d6]] }} {{gear-die-four=[[ @{gear_die_four}]] }} {{gear-roll-four=[[1d6]] }} {{gear-die-five=[[ @{gear_die_five}]] }} {{gear-roll-five=[[1d6]] }} {{gear-die-six=[[ @{gear_die_six}]] }} {{gear-roll-six=[[1d6]] }} {{gear-die-seven=[[ @{gear_die_seven}]] }} {{gear-roll-seven=[[1d6]] }} {{gear-die-eight=[[ @{gear_die_eight}]] }} {{gear-roll-eight=[[1d6]] }} {{gear-die-nine=[[ @{gear_die_nine}]] }} {{gear-roll-nine=[[1d6]] }} {{gear-die-ten=[[ @{gear_die_ten}]] }} {{gear-roll-ten=[[1d6]] }} {{gear-die-eleven=[[ @{gear_die_eleven}]] }} {{gear-roll-eleven=[[1d6]] }} {{gear-die-twelve=[[ @{gear_die_twelve}]] }} {{gear-roll-twelve=[[1d6]] }} {{artifact-die-eight=[[ @{artifact_die_eight}]] }} {{artifact-roll-eight=[[1d8]] }} {{artifact-die-ocho=[[ @{artifact_die_ocho}]] }} {{artifact-roll-ocho=[[1d8]] }} {{artifact-die-ten=[[ @{artifact_die_ten}]] }} {{artifact-roll-ten=[[1d10]] }} {{artifact-die-twelve=[[ @{artifact_die_twelve}]] }} {{artifact-roll-twelve=[[1d12]] }} @{include_with_roll}" data-i18n-title="roll-dice" title="Roll the Dice!"><span class="small-caps" data-i18n="roll"> Roll </span></button>
                </div>
                <div class="grid-item api-roll">
                  <button class="dice-pool api-button" type="roll" name="roll_the_dice_api" value="!forl [[(@{skill})d6]] [[(@{attribute})d6]] [[(@{gear})d6]] [[(@{artifact_die_eight})d8+(@{artifact_die_ocho})d8+(@{artifact_die_ten})d10+(@{artifact_die_twelve})d12]] --Character|@{character_name} --Roll|@{current_preset}" data-i18n-title="roll-dice-api" title="Roll API Dice!"><span class="small-caps" data-i18n="roll"> Roll </span></button>
                </div>
                <div class="template-roll dice-rolls-push">
                  <button class="dice-pool" type="roll" name="roll_a_push" value="&{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{pushes-the-roll}}} {{subtitle=@{current_preset}}} {{free-text}} {{footer}} {{attribute-die-one=[[ @{attribute_die_one}]] }} {{attribute-roll-one=[[1d6]] }} {{attribute-die-two=[[ @{attribute_die_two}]] }} {{attribute-roll-two=[[1d6]] }} {{attribute-die-three=[[ @{attribute_die_three}]] }} {{attribute-roll-three=[[1d6]] }} {{attribute-die-four=[[ @{attribute_die_four}]] }} {{attribute-roll-four=[[1d6]] }} {{attribute-die-five=[[ @{attribute_die_five}]] }} {{attribute-roll-five=[[1d6]] }} {{attribute-die-six=[[ @{attribute_die_six}]] }} {{attribute-roll-six=[[1d6]] }} {{attribute-die-seven=[[ @{attribute_die_seven}]] }} {{attribute-roll-seven=[[1d6]] }} {{attribute-die-eight=[[ @{attribute_die_eight}]] }} {{attribute-roll-eight=[[1d6]] }} {{attribute-die-nine=[[ @{attribute_die_nine}]] }} {{attribute-roll-nine=[[1d6]] }} {{attribute-die-ten=[[ @{attribute_die_ten}]] }} {{attribute-roll-ten=[[1d6]] }} {{attribute-die-eleven=[[ @{attribute_die_eleven}]] }} {{attribute-roll-eleven=[[1d6]] }} {{attribute-die-twelve=[[ @{attribute_die_twelve}]] }} {{attribute-roll-twelve=[[1d6]] }} {{skill-die-one=[[ @{skill_die_one}]] }} {{skill-roll-one=[[1d6]] }} {{skill-die-two=[[ @{skill_die_two}]] }} {{skill-roll-two=[[1d6]] }} {{skill-die-three=[[ @{skill_die_three}]] }} {{skill-roll-three=[[1d6]] }} {{skill-die-four=[[ @{skill_die_four}]] }} {{skill-roll-four=[[1d6]] }} {{skill-die-five=[[ @{skill_die_five}]] }} {{skill-roll-five=[[1d6]] }} {{skill-die-six=[[ @{skill_die_six}]] }} {{skill-roll-six=[[1d6]] }} {{skill-die-seven=[[ @{skill_die_seven}]] }} {{skill-roll-seven=[[1d6]] }} {{skill-die-eight=[[ @{skill_die_eight}]] }} {{skill-roll-eight=[[1d6]] }} {{skill-die-nine=[[ @{skill_die_nine}]] }} {{skill-roll-nine=[[1d6]] }} {{skill-die-ten=[[ @{skill_die_ten}]] }} {{skill-roll-ten=[[1d6]] }} {{negative-die-one=[[ @{negative_die_one}]] }} {{negative-roll-one=[[1d6]] }} {{negative-die-two=[[ @{negative_die_two}]] }} {{negative-roll-two=[[1d6]] }} {{negative-die-three=[[ @{negative_die_three}]] }} {{negative-roll-three=[[1d6]] }} {{gear-die-one=[[ @{gear_die_one}]] }} {{gear-roll-one=[[1d6]] }} {{gear-die-two=[[ @{gear_die_two}]] }} {{gear-roll-two=[[1d6]] }} {{gear-die-three=[[ @{gear_die_three}]] }} {{gear-roll-three=[[1d6]] }} {{gear-die-four=[[ @{gear_die_four}]] }} {{gear-roll-four=[[1d6]] }} {{gear-die-five=[[ @{gear_die_five}]] }} {{gear-roll-five=[[1d6]] }} {{gear-die-six=[[ @{gear_die_six}]] }} {{gear-roll-six=[[1d6]] }} {{gear-die-seven=[[ @{gear_die_seven}]] }} {{gear-roll-seven=[[1d6]] }} {{gear-die-eight=[[ @{gear_die_eight}]] }} {{gear-roll-eight=[[1d6]] }} {{gear-die-nine=[[ @{gear_die_nine}]] }} {{gear-roll-nine=[[1d6]] }} {{gear-die-ten=[[ @{gear_die_ten}]] }} {{gear-roll-ten=[[1d6]] }} {{gear-die-eleven=[[ @{gear_die_eleven}]] }} {{gear-roll-eleven=[[1d6]] }} {{gear-die-twelve=[[ @{gear_die_twelve}]] }} {{gear-roll-twelve=[[1d6]] }} {{artifact-die-eight=[[ @{artifact_die_eight}]] }} {{artifact-roll-eight=[[1d8]] }} {{artifact-die-ocho=[[ @{artifact_die_ocho}]] }} {{artifact-roll-ocho=[[1d8]] }} {{artifact-die-ten=[[ @{artifact_die_ten}]] }} {{artifact-roll-ten=[[1d10]] }} {{artifact-die-twelve=[[ @{artifact_die_twelve}]] }} {{artifact-roll-twelve=[[1d12]] }} {{push-query=?{Did You Adjust the Dice Pool?|Yes ~ Of Course I Did.,The Pool of Dice was Adjusted.|No ~ I didn't ~ I need to Cancel this Roll.,The Pool of Dice was Not Adjusted.} }} @{include_with_roll}" data-i18n-title="push-dice" title="Push the Dice!"><span class="small-caps" data-i18n="push"> Push </span></button>
                </div>
                <div class="dice-rolls-d66">
                  <button class="dice-pool" type="roll" name="roll_d66" value="&{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=D66 Roll}} {{subtitle}} {{free-text}}  {{d66-die-one=[[ 1 ]] }} {{d66-roll-one=[[ 1d6 ]] }} {{d66-die-two=[[ 1 ]] }} {{d66-roll-two=[[ 1d6 ]] }} {{footer}}" data-i18n-title="roll-dice-66" title="Roll d66!"><span class="small-caps"> D</span>66 </button>
                </div>
              </div>
              <div class="dice-preset">
                  <input type="hidden" class="input" name="attr_current_preset" value="" readonly />                    
                  <input type="hidden" name="attr_include_with_roll" value="" readonly />
                  <span class="label dice-preset-header" data-i18n="current-preset">Current Preset</span>
                  <span class="header-h1 dice-preset-preset" name="attr_current_preset"></span>
              </div>
              <div class="dice-footer">
                <button type="action" name="act_dice_pool_clear" class="small-caps dice-footer-clear" data-i18n-title="reset-dice" title="Reset dice pool." data-i18n="clear-dice-pool">Clear Dice Pool</button>
                <button type="action" name="act_api_dice_toggle" class="api-button small-caps dice-footer-api" data-i18n-title="api-dice-title" title="Use API Dice Roller. (API is a Pro feature) 'Forbidden Lands Year-Zero Die Roller' script must be installed." data-i18n="api-dice">api dice</button>
              </div>
            </div>
          </div>
        <div class="box toggle-dice-only character-talents">
            <div class="talents-grid">
                <div class="talents-box header"><h1 data-i18n="talent-u">TALENTS</h1></div>
                <div class="talents-box2 column-header"><span data-i18n="type">Type</span></div>
                <div class="talents-box3 column-header"><span data-i18n="rank">Rank</span></div>
                <div class="talents-box4">
                    <fieldset class="repeating_talents">
                        <div class="talents-grid">
                            <input class="expand" type="checkbox" name="attr_expand" data-i18n-title="show-hide" title="show/hide" /><span></span>
                            <input class="talents-box1 input" type="text" name="attr_talent_name" value="" title="@{repeating_talents_$X_talent_name}" placeholder="Name" />
                            <select class="talents-box2 input" name="attr_talent_type" title="@{repeating_talents_$X_talent_type}">
                                <option value="Kin" data-i18n="kin">Kin</option>
                                <option value="Gen" data-i18n="gen" selected>Gen</option>
                                <option value="Prof" data-i18n="prof">Prof</option>
                            </select>
                            <select class="talents-box3 input" name="attr_talent_rank" title="@{repeating_talents_$X_talent_rank}">
                                <option value="0" select>0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                            </select>
                            <textarea class="talents-box4 input-textarea" name="attr_talent_description" title="@{repeating_talents_$X_talent_description}" placeholder="description"></textarea>
                        </div>
                    </fieldset>                    
                </div>
            </div>
        </div>
        <div class="box toggle-dice-only character-armor">
            <div class="armor-container">
                <div class="armor-grid">
                    <div class="armor-box header"><h1 data-i18n="armor-helmet">ARMOR/HELMET</h1></div>
                    <div class="armor-box1 column-header"><span class="small-caps"></span></div>
                    <div class="armor-box2 column-header"><span class="small-caps" data-i18n="don">Don</span></div> 
                    <div class="armor-box3 column-header"><span class="small-caps" data-i18n="damage-abbr">Dmg</span></div>
                    <div class="armor-box4 column-header"><span class="small-caps" data-i18n="rating">Rating</span></div>
                    <div class="armor-box5 column-header"><span class="small-caps" data-i18n="total">Total</span></div>
                    <div class="armor-box6 armor-grid">                        
                        <input class="armor-box1 input" type="text" name="attr_armor1_name" value="" title="@{armor1_name}" placeholder="name" />
                        <input class="armor-box2 input" type="checkbox" name="attr_armor1_equiped" value="1" title="@{armor1_equiped}" checked />
                        <input class="armor-box3 input-number" type="number" name="attr_armor1_damage" value="0" max="0" title="@{armor1_damage}" />
                        <input class="armor-box4 input-number" type="number" name="attr_armor1_bonus" value="0" min="0" title="@{armor1_bonus}" />
                        <input class="armor-box5 input-number" type="text" name="attr_armor1_ar" value="0" title="@{armor1_ar}" readonly />
                    </div>
                    <div class="armor-box7 armor-grid">                        
                        <input class="armor-box1 input" type="text" name="attr_armor2_name" value="" title="@{armor2_name}" placeholder="name" />
                        <input class="armor-box2 input" type="checkbox" name="attr_armor2_equiped" value="1" title="@{armor2_equiped}" checked />
                        <input class="armor-box3 input-number" type="number" name="attr_armor2_damage" value="0" max="0" title="@{armor2_damage}" />
                        <input class="armor-box4 input-number" type="number" name="attr_armor2_bonus" value="0" min="0" title="@{armor2_bonus}" />
                        <input class="armor-box5 input-number" type="text" name="attr_armor2_ar" value="0" title="@{armor2_ar}" readonly />
                    </div>
                    <div class="armor-box8">
                        <div class="armor-subgrid">
                            <span class="armor-box1">
                                <button type="action" name="act_armor-roll" title="Update Dice Pool" data-i18n="armor">Armor</button>
                            </span>                            
                            <span class="armor-box4 label header" data-i18n="armor-rating-abbr">AR</span>
                            <input class="armor-box5 input-number" type="text" name="attr_ar" value="0" title="@{ar}" style="border:1px solid #000;" readonly />
                        </div>
                    </div>
                </div>
                <div class="shield-grid">
                    <div class="shield-box header"><h1 data-i18n="shield-u">SHIELD</h1></div>
                    <div class="shield-box1"></div>
                    <div class="shield-box2 column-header"><span class="small-caps" data-i18n="bonus">Bonus</span></div>
                    <div class="shield-box3 column-header"><span class="small-caps" data-i18n="max-abbr">Max</span></div>
                    <div class="shield-box4">
                        <div class="shield-grid">
                            <input class="shield-box1 input" type="text" name="attr_shield1_name" value="" title="@{shield1_name}" placeholder="name" />
                            <input class="shield-box2 input-number" type="number" name="attr_shield1_bonus" value="0" min="0" title="@{shield1_bonus}" />
                            <input class="shield-box3 input-number" type="number" name="attr_shield1_bonus_max" value="0" min="0" title="@{shield1_bonus|max}" />
                        </div>
                        <span style="position: relative;top: 3.1em;left: 5.25em;">
                            <button type="action" name="act_shield-roll" title="Update Dice Pool" data-i18n="shield">Shield</button>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="box toggle-dice-only character-consumables">
            <div class="consumables-grid">
                <div class="consumables-box1 header"><h1 data-i18n="consumable-u">CONSUMABLES</h1></div>
                <div class="consumables-box2 column-header"><span data-i18n="die">Die</span></div>
                <div class="consumables-box3 column-header"><span>&nbsp;</span></div>
                <div class="consumables-box4">
                    <span class="header-h1" data-i18n="food">Food</span>
                </div>
                <div class="consumables-box5">
                    <select class="input" name="attr_food" title="@{food}" >
                        <option value="{{subtitle=Out of Food}}" selected>0</option>                        
                        <option value="{{subtitle=D6 of Food}} {{consumable-die-six=[[ 1 ]] }} {{consumable-roll-six=[[ 1d6 ]] }}">d6</option>
                        <option value="{{subtitle=D8 of Food}} {{consumable-die-eight=[[ 1 ]] }} {{consumable-roll-eight=[[ 1d8 ]] }}">d8</option>
                        <option value="{{subtitle=D10 of Food}} {{consumable-die-ten=[[ 1 ]] }} {{consumable-roll-ten=[[ 1d10 ]] }}">d10</option>
                        <option value="{{subtitle=D12 of Food}} {{consumable-die-twelve=[[ 1 ]] }} {{consumable-roll-twelve=[[ 1d12 ]] }}">d12</option>
                    </select>
                </div>
                <div class="consumables-box6">
                    <button type="roll" name="roll_food" title="%{food}" value="&{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=Consumable}} {{footer=^{consumable-note}}} @{food}"></button>
                </div>
                <div class="consumables-box7">
                    <span class="header-h1" data-i18n="water">Water</span>
                </div>
                <div class="consumables-box8">
                    <select class="input" name="attr_water" title="@{water}" >
                        <option value="{{subtitle=Out of Water}}" selected>0</option>                        
                        <option value="{{subtitle=D6 of Water}} {{consumable-die-six=[[ 1 ]] }} {{consumable-roll-six=[[ 1d6 ]] }}">d6</option>
                        <option value="{{subtitle=D8 of Water}} {{consumable-die-eight=[[ 1 ]] }} {{consumable-roll-eight=[[ 1d8 ]] }}">d8</option>
                        <option value="{{subtitle=D10 of Water}} {{consumable-die-ten=[[ 1 ]] }} {{consumable-roll-ten=[[ 1d10 ]] }}">d10</option>
                        <option value="{{subtitle=D12 of Water}} {{consumable-die-twelve=[[ 1 ]] }} {{consumable-roll-twelve=[[ 1d12 ]] }}">d12</option>
                    </select>
                </div>
                <div class="consumables-box9">
                    <button type="roll" name="roll_water" title="%{water}" value="&{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=Consumable}} {{footer=^{consumable-note}}} @{water}"></button>
                </div>
                <div class="consumables-box10">
                    <span class="header-h1" data-i18n="arrows">Arrows</span>
                </div>
                <div class="consumables-box11">
                    <select class="input" name="attr_arrows" title="@{arrows}" >
                        <option value="{{subtitle=Out of Arrows}}" selected>0</option>                        
                        <option value="{{subtitle=D6 of Arrows}} {{consumable-die-six=[[ 1 ]] }} {{consumable-roll-six=[[ 1d6 ]] }}">d6</option>
                        <option value="{{subtitle=D8 of Arrows}} {{consumable-die-eight=[[ 1 ]] }} {{consumable-roll-eight=[[ 1d8 ]] }}">d8</option>
                        <option value="{{subtitle=D10 of Arrows}} {{consumable-die-ten=[[ 1 ]] }} {{consumable-roll-ten=[[ 1d10 ]] }}">d10</option>
                        <option value="{{subtitle=D12 of Arrows}} {{consumable-die-twelve=[[ 1 ]] }} {{consumable-roll-twelve=[[ 1d12 ]] }}">d12</option>
                    </select>
                </div>
                <div class="consumables-box12">
                    <button type="roll" name="roll_arrows" title="%{arrows}" value="&{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=Consumable}} {{footer=^{consumable-note}}} @{arrows}"></button>
                </div>
                <div class="consumables-box13">
                    <span class="header-h1" data-i18n="torches">Torches</span>
                </div>
                <div class="consumables-box14">
                    <select class="input" name="attr_torches" title="@{torches}" >
                        <option value="{{subtitle=Out of Torches}}" selected>0</option>                        
                        <option value="{{subtitle=D6 of Torches}} {{consumable-die-six=[[ 1 ]] }} {{consumable-roll-six=[[ 1d6 ]] }}">d6</option>
                        <option value="{{subtitle=D8 of Torches}} {{consumable-die-eight=[[ 1 ]] }} {{consumable-roll-eight=[[ 1d8 ]] }}">d8</option>
                        <option value="{{subtitle=D10 of Torches}} {{consumable-die-ten=[[ 1 ]] }} {{consumable-roll-ten=[[ 1d10 ]] }}">d10</option>
                        <option value="{{subtitle=D12 of Torches}} {{consumable-die-twelve=[[ 1 ]] }} {{consumable-roll-twelve=[[ 1d12 ]] }}">d12</option>
                    </select>
                </div>
                <div class="consumables-box15">
                    <button type="roll" name="roll_torches" title="%{torches}" value="&{template:forbiddenlands} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=Consumable}} {{footer=^{consumable-note}}} @{torches}"></button>
                </div>
            </div>    
        </div>
        <div class="box toggle-dice-only character-coins">
            <div class="coins-grid">
                <div class="coins-box header"><h1 data-i18n="coins-u">COINS</h1></div>
				<div class="coins-box1"></div>
                <div class="coins-box2 column-header" data-i18n="gold">Gold</div>
                <div class="coins-box3 column-header" data-i18n="silver">Silver</div>
                <div class="coins-box4 column-header" data-i18n="copper">Copper</div>

                <div class="coins-box5"><span class="label" data-i18n="carried">Carried</span></div>
                <div class="coins-box6"><input class="input-number" type="text" name="attr_gold" value="0" title="@{gold}" /></div>
                <div class="coins-box7"><input class="input-number" type="text" name="attr_silver" value="0" title="@{silver}" /></div>
                <div class="coins-box8"><input class="input-number" type="text" name="attr_copper" value="0" title="@{copper}" /></div>

                <div class="coins-box9"><span class="label" style="text-align:center;" data-i18n="mount">Mount's Gear</span></div>
                <div class="coins-box10"><input class="input-number" type="text" name="attr_gold_mount" value="0" title="@{gold_mount}" /></div>
                <div class="coins-box11"><input class="input-number" type="text" name="attr_silver_mount" value="0" title="@{silver_mount}" /></div>
                <div class="coins-box12"><input class="input-number" type="text" name="attr_copper_mount" value="0" title="@{copper_mount}" /></div>

                <div class="coins-box13"><span class="label" data-i18n="other">Other</span></div>
                <div class="coins-box14"><input class="input-number" type="text" name="attr_gold_other" value="0" title="@{gold_mount}" /></div>
                <div class="coins-box15"><input class="input-number" type="text" name="attr_silver_other" value="0" title="@{silver_mount}" /></div>
                <div class="coins-box16"><input class="input-number" type="text" name="attr_copper_other" value="0" title="@{copper_mount}" /></div>
                <input type="hidden" name="attr_coins_other_total" value="0" />

                <div class="coins-box17"><span class="label" data-i18n="total">Total</span></div>
                <div class="coins-box18"><input class="input-number" type="text" name="attr_gold_total" value="0" title="@{gold_total}" readonly /></div>
                <div class="coins-box18"><input class="input-number" type="text" name="attr_silver_total" value="0" title="@{silver_total}" readonly /></div>
                <div class="coins-box19"><input class="input-number" type="text" name="attr_copper_total" value="0" title="@{copper_total}" readonly /></div>
            </div>
        </div>
        <div class="box toggle-dice-only character-experience">
            <div class="experience-grid">
                <div class="experience-box1 header">
                    <h1 data-i18n="experience-u">EXPERIENCE</h1>
                </div>
                <div class="experience-box2 header">
                    <input class="input-number" type="number" name="attr_experience" value="0" min="0" title="@{experience}" />
                </div>
                <div class="experience-box3 header"></div>
            </div>
        </div>
        <div class="box toggle-dice-only character-willpower">
            <div class="willpower-grid">
                <div class="willpower-box1 header">
                    <h1 data-i18n="willpower-u">WILLPOWER</h1>
                </div>
                <div class="willpower-box2 header">
                    <input class="input-number" type="number" name="attr_willpower" value="0" min="0" title="@{willpower}" />
                </div>
                <div class="willpower-box3 header"></div>
            </div>
        </div>
        <div class="box toggle-dice-only character-gear">
            <div class="gear-grid">
                <div class="gear-box1 header"><h1 data-i18n="gea-u">GEAR</h1></div>                
                <div class="gear-box2 column-header"><span class="small-caps" data-i18n="quantity-abbr">Qty</span></div>
                <div class="gear-box3 column-header"><span class="small-caps" data-i18n="carried-abbr">Carr</span></div>
                <div class="gear-box4 column-header"><span class="small-caps" data-i18n="weight-abbr">Wt</span></div>
                <div class="gear-box5">
                    <fieldset class="repeating_gear">
                        <div class="gear-grid">
                            <input class="expand" type="checkbox" name="attr_expand" data-i18n-title="show-hide" title="show/hide" /><span></span>
                            <input class="gear-box1 input" type="text" name="attr_gear_name" value="" title="@{repeating_gear_$X_gear_name}" placeholder="item" />
                            <input class="gear-box2 input-number" type="number" name="attr_gear_qty" value="1" min="0" title="@{repeating_gear_$X_gear_qty}" />
                            <input class="gear-box3 input" type="checkbox" name="attr_gear_carried" value="1" title="@{repeating_gear_$X_gear_carried}" checked />
                            <select class="gear-box4 input" name="attr_gear_weight" title="@{repeating_gear_$X_gear_weight}">
                                <option data-i18n="tiny-abbr" value="0" selected>T</option>
                                <option data-i18n="light-abbr" value="0.5">L</option>
                                <option data-i18n="normal-abbr" value="1">N</option>
                                <option data-i18n="heavy-abbr" value="2">H</option>
                            </select>
                            <textarea class="gear-box5 input-textarea" name="attr_gear_description" title="@{repeating_talents_$X_gear_description}" placeholder="description"></textarea>
                        </div>
                    </fieldset>                    
                </div>
                <div class="gear-coin">
                    <div class="gear-subgrid">
                        <div class="gear-box9"><span class="label" data-i18n="coins-carried">Coins Carried</span></div>
                        <div class="gear-box10">
                            <input class="input-number" type="text" name="attr_coins_carried" value="0" title="@{coins_carried}" readonly />
                        </div>
                    </div>
                </div>
                <div class="gear-box6 header">
                    <div class="gear-subgrid">
                        <div class="gear-box7"><span class="label" data-i18n="carry">Carry</span></div>                        
                        <div class="gear-box8"><input class="input-number" type="text" name="attr_carry" value="(2*(@{strength})+@{pack_rat})" title="@{carry} = 2 x @{strength} + @{pack_rat}" disabled /></div>
                        <div class="gear-box9"><span class="label" data-i18n="encumbrance">Encumbrance</span></div>
                        <div class="gear-box10">
                            <input type="hidden" name="attr_character_gear_encumbrance" value="0" />
                            <input class="input-number" type="text" name="attr_character_encumbrance" value="0" title="@{character_encumbrance}" readonly />
                        </div>
                    </div>
                </div>
            </div>
            <div class="gear-subgrid2">
                <div class="gear-box12"><span class="label" data-i18n-title="pack-rat-title" data-i18n="pack-rat">Pack Rat Talent?</span></div>
                <div class="gear-box13">
                    <select class="input" name="attr_pack_rat">
                        <option value="0" data-i18n="no" selected>No</option>
                        <option value="2" data-i18n="rank-1-pack-rat">Rank 1 (+2)</option>
                        <option value="5" data-i18n="rank-2-pack-rat">Rank 2 (+5)</option>
                        <option value="10" data-i18n="rank-3-pack-rat">Rank 3 (+10)</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="box toggle-dice-only character-mount">
            <div class="mount-grid">                
                <div class="mount-box1 header"><h1 data-i18n="moun-u">MOUNT</h1></div>
                <input type="checkbox" name="attr_expand" class="expand" data-i18n-title="show-hide" title="show/hide" style="margin-top: 3.35em;" /><span></span>
                <input class="mount-box2 input" type="text" name="attr_mount_name" value="" title="@{mount_name}" placeholder="name" />
                <div class="mount-box3"><span class="label" data-i18n="strength-abbr-u">STR</span></div>
                <input class="mount-box4 input-number" type="number" name="attr_mount_strength" value="1" title="@{mount_strength}" />
                <div class="mount-box5"><span class="label" data-i18n="agility-abbr-u">AGI</span></div>
                <input class="mount-box6 input-number" type="number" name="attr_mount_agility" value="1" title="@{mount_agility}" />
                <textarea class="mount-box7 input-textarea" name="attr_mount_description" title="@{mount_description}" placeholder="description"></textarea>
            </div>
        </div>
        <div class="box toggle-dice-only character-mount_gear">
            <div class="mount_gear-grid">
                <div class="mount_gear-box1 header"><h1 data-i18n="on-mount">On Mount</h1></div>                
                <div class="mount_gear-box2 column-header"><span class="small-caps" data-i18n="quantity-abbr">Qty</span></div>
                <div class="mount_gear-box3 column-header"><span class="small-caps" data-i18n="carried-abbr">Carr</span></div>
                <div class="mount_gear-box4 column-header"><span class="small-caps" data-i18n="weight-abbr" >Wt</span></div>
                <div class="mount_gear-box5">
                    <fieldset class="repeating_mount">
                        <div class="mount_gear-grid">
                            <input class="expand" type="checkbox" name="attr_expand" data-i18n-title="show-hide" title="show/hide" /><span></span>
                            <input class="mount_gear-box1 input" type="text" name="attr_mount_gear_name" value="" title="@{repeating_mount_gear_$X_mount_gear_name}" placeholder="item" />                           
                            <input class="mount_gear-box2 input-number" type="number" name="attr_mount_gear_qty" value="1" title="Quantity @{repeating_mount_gear_$X_mount_gear_qty}" />
                            <input class="mount_gear-box3 input" type="checkbox" name="attr_mount_gear_carried" value="1" title="@{repeating_mount_gear_$X_mount_gear_carried}" checked />
                            <select class="mount_gear-box4 input" name="attr_mount_gear_weight" title="@{repeating_mount_gear_$X_mount_gear_weight}">
                                <option data-i18n="tiny-abbr" value="0" selected>T</option>
                                <option data-i18n="light-abbr" value="0.5">L</option>
                                <option data-i18n="normal-abbr" value="1">N</option>
                                <option data-i18n="heavy-abbr" value="2">H</option>
                            </select>
                            <textarea class="mount_gear-box5 input-textarea" name="attr_mount_gear_description" title="@{repeating_mount_gear_$X_mount_gear_description}" placeholder="description"></textarea>
                        </div>
                    </fieldset>                    
                </div>
                <div class="mount_gear-coin">
                    <div class="mount_gear-subgrid">
                        <div class="mount_gear-box9"><span class="label" data-i18n="coins-carried">Coins Carried</span></div>
                        <div class="mount_gear-box10">
                            <input class="input-number" type="text" name="attr_coins_carried_mount" value="0" title="@{coins_carried_mount}" readonly />
                        </div>
                    </div>
                </div>
                <div class="mount_gear-box6 header">
                    <div class="mount_gear-subgrid">
                        <div class="mount_gear-box7"><span class="label" data-i18n="carry">Carry</span></div>
                        <div class="mount_gear-box8"><input class="input-number" type="text" name="attr_mount_carry" value="0" title="mounted = mount_strength x2, unmounted x4" readonly /></div>
                        <div class="mount_gear-box9"><span class="label" data-i18n="encumbrance">Encumbrance</span></div>
                        <div class="mount_gear-box10">
                            <input class="input" type="hidden" name="attr_mount_gear_encumbrance" value="0" />
                            <input class="input-number" type="text" name="attr_mount_encumbrance" value="0" title="@{mount_encumbrance}" readonly />
                        </div>
                        <div class="sheet-mount_gear-box11">
                            <div style="width: 3em;">
                                <input class="sheet-input" title="@{mounted}" type="checkbox" name="attr_mounted" value="1" style="margin: 0;">
                                <span class="sheet-label" data-i18n="mounted" style="margin: 0;">Mounted</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box toggle-dice-only character-relationships">
            <div class="relationships-grid">                
                <div class="relationships-box1 header">
                    <h1 data-i18n="relationships-u">RELATIONSHIPS</h1>
                </div>
                <div class="relationships-box2">
                    <fieldset class="repeating_relationships">
                        <div class="relationships-grid">
                            <div class="relationships-box3">
                                <input class="input-number" type="text" name="attr_pc_name" value="" title="@{repeating_relationships_$X_pc_name}" placeholder="PC's name" />
                            </div>
                            <div class="relationships-box4">
                                <textarea class="input-textarea" name="attr_pc_description" title="@{repeating_relationships_$X_pc_description}" placeholder="Describe the relationship."></textarea>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
        <div class="box toggle-dice-only character-spells">
            <div class="spells-grid">                
                <div class="spells-box header">
                    <h1 data-i18n="spell-u">SPELLS</h1>
                </div>
                <div class="spells-box0 column-header"></div>
                <div class="spells-box1 column-header" data-i18n="name">Name</div>
                <div class="spells-box2 column-header" data-i18n="rank">Rank</div>
                <div class="spells-box3 column-header" data-i18n="willpower-abbr">Will</div>
                <div class="spells-box4 column-header" data-i18n="range">Range</div>
                <div class="spells-box5 column-header" data-i18n="duration">Duration</div>
                <div class="spells-box6 column-header" data-i18n="ingredients">Ingredients</div>
                <div class="spells-box7">
                    <fieldset class="repeating_spells">
                        <div class="spells-grid">
                            <input class="expand" type="checkbox" name="attr_expand" data-i18n-title="show-hide" title="show/hide" /><span></span>
                            <button class="spells-box0 roll-button" type="action" name="act_spell-roll" title="Update Dice Pool">t</button>
                            <input class="spells-box1 input" type="text" name="attr_spell_name" value="" title="@{repeating_spells_$X_spell_name}" placeholder="Spell's name" />
                            <select class="spells-box2 input" name="attr_spell_rank" title="@{repeating_spells_$X_spell_rank}">
                                <option value="1" selected>1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select>
                            <input class="spells-box3 input" type="number" name="attr_spell_willpower" value="1" min="1" title="@{repeating_spells_$X_spell_willpower}" />
                            <select class="spells-box4 input" name="attr_spell_range" title="@{repeating_spells_$X_spell_range}">
                                <option value="Personal" selected data-i18n="personal">Personal</option>
                                <option value="Arm's L." data-i18n="arms-length-abbr">Arm's L.</option>
                                <option value="Short" data-i18n="short">Short</option>
                                <option value="Near" data-i18n="near">Near</option>                                
                                <option value="Distant" data-i18n="distant">Distant</option>
                            </select>
                            <input class="spells-box5 input" type="text" name="attr_spell_duration" value="" title="@{repeating_spells_$X_spell_duration}" />                            
                            <input class="spells-box6 input" type="text" name="attr_spell_ingredients" value="" title="@{repeating_spells_$X_spell_ingredients}" />
                            <textarea class="spells-box7 input-textarea" name="attr_spell_description" title="@{repeating_spells_$X_spell_description}" placeholder="Description."></textarea>
                        </div>                        
                    </fieldset>
                </div>
            </div>
        </div>
        <div class="box toggle-dice-only character-notes">
            <div class="notes-grid">                
                <div class="notes-box1 header">
                    <h1 data-i18n="notes-u">NOTES</h1>
                </div>
                <div class="notes-box2">
                    <fieldset class="repeating_notes">
                        <div class="notes-grid">
                            <div class="notes-box3">
                                <input class="input-number" type="text" name="attr_note_name" value="" title="@{repeating_notes_$X_note_name}" placeholder="Note's name" />
                            </div>
                            <div class="notes-box4">
                                <textarea class="notes-box4 input-textarea" name="attr_note_description" title="@{repeating_notes_$X_note_description}" placeholder="Note's description."></textarea>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="wrapper tab-content stronghold">
    <div class="stronghold-grid">
        <div class="box stronghold-details">
            <div class="stronghold-details-grid">
                <div class="stronghold-details-box1 header">
                    <h1 data-i18n="stronghold-u">STRONGHOLD</h1>
                </div>
                <div class="stronghold-details-box2"><span class="label" data-i18n="name">Name</span></div>
                <div class="stronghold-details-box3">
                    <input class="input-number" type="text" name="attr_stronghold_name" value="" title="@{stronghold_name}" />
                </div>
                <div class="stronghold-details-box4"><span class="label" data-i18n="location">Location</span></div>
                <div class="stronghold-details-box5">
                    <input class="input-number" type="text" name="attr_stronghold_location" value="" title="@{stronghold_location}" />
                </div>
                <div class="stronghold-details-box6"><span class="label" data-i18n="defense-rating">Defense Rating</span></div>
                <div class="stronghold-details-box7">
                    <input class="input-number" type="number" name="attr_stronghold_dr" value="0" title="@{stronghold_dr}" />
                </div>
                <div class="stronghold-details-box8"><span class="label" data-i18n="description">Description</span></div>
                <div class="stronghold-details-box9">
                    <textarea class="input-textarea" name="attr_stronghold_description" title="@{stronghold_description}"></textarea>
                </div>
            </div>
        </div>
        <div class="box stronghold-functions">
            <div class="stronghold-functions-grid">
                <div class="stronghold-functions-box header">
                    <h1 data-i18n="function-u">FUNCTIONS</h1>
                </div>
                <div class="stronghold-functions-box1 column-header"><span data-i18n="name">Name</span></div>
                <div class="stronghold-functions-box2 column-header"><span data-i18n="number-abbr">Num</span></div>
                <div class="stronghold-functions-box3 column-header"><span data-i18n="production-outcome">Production/Outcome</span></div>
                <div class="stronghold-functions-box4">
                    <fieldset class="repeating_functions">
                        <div class="stronghold-functions-grid">
                            <input class="stronghold-functions-box1 input" type="text" name="attr_function_name" value="" title="@repeating_functions_$X_function_name}" />
                            <input class="stronghold-functions-box2 input-number" type="text" name="attr_function_number" value="" title="@{repeating_functions_$X_function_number}" />
                            <textarea class="stronghold-functions-box3 input-textarea" name="attr_function_production" title="@{repeating_functions_$X_function_production}"></textarea>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
        <div class="box stronghold-hirelings">
            <div class="stronghold-hirelings-grid">
                <div class="stronghold-hirelings-box header">
                    <h1 data-i18n="hirelings-u">HIRELINGS</h1>
                </div>
                <div class="stronghold-hirelings-box1 column-header"><span data-i18n="profession">Profession</span></div>
                <div class="stronghold-hirelings-box2 column-header"><span data-i18n="number-abbr">Num</span></div>
                <div class="stronghold-hirelings-box3 column-header"><span data-i18n="salary">Salary</span></div>
                <div class="stronghold-hirelings-box4">
                    <fieldset class="repeating_hirelings">
                        <div class="stronghold-hirelings-grid">
                            <input class="stronghold-hirelings-box1 input" type="text" name="attr_hireling_name" value="" title="@{repeating_hirelings_$X_hireling_name}" />
                            <input class="stronghold-hirelings-box2 input-number" type="text" name="attr_hireling_number" value="1" title="@{repeating_hirelings_$X_hireling_number}" />
                            <input class="stronghold-hirelings-box3 input" type="text" name="attr_hireling_salary" value="" title="@{repeating_hirelings_$X_hireling_production}" />
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
        <div class="box stronghold-stockpile">
            <div class="stronghold-stockpile-grid" data-i18n-list="stockpile-list">
                <div class="stronghold-stockpile-box1 header">
                    <h1 data-i18n="stockpile-u">STOCKPILE</h1>
                </div>
                <div class="stronghold-stockpile-box2 column-header"><span data-i18n="units">Units</span></div>
                <div class="stronghold-stockpile-box3 column-header"><span data-i18n="units">Units</span></div>
                <div class="stronghold-stockpile-box4 column-header"><span data-i18n="units">Units</span></div>
                <span class="label" data-i18n-list-item="bread" data-i18n="bread">Bread</span><input class="input-number" type="number" name="attr_stockpile_bread" value="0" min="0" title="@{stockpile_bread}" />
                <span class="label" data-i18n-list-item="cloth" data-i18n="cloth">Cloth</span><input class="input-number" type="number" name="attr_stockpile_cloth" value="0" min="0" title="@{stockpile_cloth}" />
                <span class="label" data-i18n-list-item="fish" data-i18n="fish">Fish</span><input class="input-number" type="number" name="attr_stockpile_fish" value="0" min="0" title="@{stockpile_fish}" />
                <span class="label" data-i18n-list-item="flour" data-i18n="flour">Flour</span><input class="input-number" type="number" name="attr_stockpile_flour" value="0" min="0" title="@{stockpile_flour}" />
                <span class="label" data-i18n-list-item="food" data-i18n="food">Food</span><input class="input-number" type="number" name="attr_stockpile_food" value="0" min="0" title="@{stockpile_food}" />
                <span class="label" data-i18n-list-item="fur" data-i18n="fur">Fur</span><input class="input-number" type="number" name="attr_stockpile_fur" value="0" min="0" title="@{stockpile_fur}" />
                <span class="label" data-i18n-list-item="glass" data-i18n="glass">Glass</span><input class="input-number" type="number" name="attr_stockpile_glass" value="0" min="0" title="@{stockpile_glass}" />
                <span class="label" data-i18n-list-item="gold" data-i18n="gold">Gold</span><input class="input-number" type="number" name="attr_stockpile_gold" value="0" min="0" title="@{stockpile_gold}" />
                <span class="label" data-i18n-list-item="grain" data-i18n="grain">Grain</span><input class="input-number" type="number" name="attr_stockpile_grain" value="0" min="0" title="@{stockpile_grain}" />
                <span class="label" data-i18n-list-item="herbs" data-i18n="herbs">Herbs</span><input class="input-number" type="number" name="attr_stockpile_herbs" value="0" min="0" title="@{stockpile_herbs}" />
                <span class="label" data-i18n-list-item="iron" data-i18n="iron">Iron</span><input class="input-number" type="number" name="attr_stockpile_iron" value="0" min="0" title="@{stockpile_iron}" />
                <span class="label" data-i18n-list-item="iron-ore" data-i18n="iron-ore">Iron Ore</span><input class="input-number" type="number" name="attr_stockpile_iron_ore" value="0" min="0" title="@{stockpile_iron_ore}" />
                <span class="label" data-i18n-list-item="leather" data-i18n="leather">Leather</span><input class="input-number" type="number" name="attr_stockpile_leather" value="0" min="0" title="@{stockpile_leather}" />
                <span class="label" data-i18n-list-item="meat" data-i18n="meat">Meat</span><input class="input-number" type="number" name="attr_stockpile_meat" value="0" min="0" title="@{stockpile_meat}" />
                <span class="label" data-i18n-list-item="silver" data-i18n="silver">Silver</span><input class="input-number" type="number" name="attr_stockpile_silver" value="0" min="0" title="@{stockpile_silver}" />
                <span class="label" data-i18n-list-item="stone" data-i18n="stone">Stone</span><input class="input-number" type="number" name="attr_stockpile_stone" value="0" min="0" title="@{stockpile_stone}" />
                <span class="label" data-i18n-list-item="tallow" data-i18n="tallow">Tallow</span><input class="input-number" type="number" name="attr_stockpile_tallow" value="0" min="0" title="@{stockpile_tallow}" />
                <span class="label" data-i18n-list-item="vegetables" data-i18n="vegetables">Vegetables</span><input class="input-number" type="number" name="attr_stockpile_vegatables" value="0" min="0" title="@{stockpile_vegatables}" />
                <span class="label" data-i18n-list-item="water" data-i18n="water">Water</span><input class="input-number" type="number" name="attr_stockpile_water" value="0" min="0" title="@{stockpile_water}" />
                <span class="label" data-i18n-list-item="wood" data-i18n="wood">Wood</span><input class="input-number" type="number" name="attr_stockpile_wood" value="0" min="0" title="@{stockpile_wood}" />
                <span class="label" data-i18n-list-item="wool" data-i18n="wool">Wool</span><input class="input-number" type="number" name="attr_stockpile_wool" value="0" min="0" title="@{stockpile_wool}" />
            </div>
        </div>
        <div class="box stronghold-notes">
            <div class="stronghold-notes-grid">
                <div class="stronghold-notes-box1 header">
                    <h1 data-i18n="stronghold-notes-u">STRONGHOLD NOTES</h1>
                </div>
                <textarea class="stronghold-stronghold_notes-box2 input-textarea" name="attr_stronghold_notes" title="@{stronghold_notes}"></textarea>
            </div>
        </div>
    </div>
</div>

<label class="footer">v.<span name="attr_version"></span></label>

<!-- Roll Templates -->
<rolltemplate class="sheet-rolltemplate-forbiddenlands">
    <div class="template-wrap">
        <div class="template-grid">
            <div class="template-grid-item template-span-six template-header">
                {{#character_name}}
                <div class="template-grid-item template-span-left template-header">
                {{#character_id}}[{{character_name}}](https://journal.roll20.net/character/{{character_id}}){{/character_id}}
                {{^character_id}}{{character_name}}{{/character_id}}
                </div>
                {{/character_name}}
                {{#name}}
                <div class="template-grid-item template-span-center template-header"></div>
                {{/name}}                
                {{#name}}
                <div class="template-grid-item template-span-right template-header">
                {{#name_link}}[{{name}}]({{name_link}}){{/name_link}}
                {{^name_link}}{{name}}{{/name_link}}
                </div>
                {{/name}}
            </div>
            {{#subtitle}}<div class="template-grid-item template-span-six template-subtitle"><span>{{subtitle}}</span></div>{{/subtitle}}

            <!--- dice pool -->
            {{#rollTotal() attribute-die-one 1}}
            <div class="template-grid-item template-span-one template-white-dice">
                {{#rollWasFumble() attribute-roll-one}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927713/1ttsrv1QW1ml3hT8btQr-Q/max.png" alt="Bane" class="template-bane" />
                {{/rollWasFumble() attribute-roll-one}}
                {{#rollBetween() attribute-roll-one 2 5}}
                    {{attribute-roll-one}}
                {{/rollBetween() attribute-roll-one 2 5}}
                {{#rollWasCrit() attribute-roll-one}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927679/CFpe4OjkRyZn5M9YGvUGPg/max.png" alt="Success" class="template-success" />
                {{/rollWasCrit() attribute-roll-one}}
            </div>
            {{/rollTotal() attribute-die-one 1}}
            {{#rollTotal() attribute-die-two 1}}
            <div class="template-grid-item template-span-two template-white-dice">
                {{#rollWasFumble() attribute-roll-two}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927713/1ttsrv1QW1ml3hT8btQr-Q/max.png" alt="Bane" class="template-bane" />
                {{/rollWasFumble() attribute-roll-two}}
                {{#rollBetween() attribute-roll-two 2 5}}
                    {{attribute-roll-two}}
                {{/rollBetween() attribute-roll-two 2 5}}
                {{#rollWasCrit() attribute-roll-two}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927679/CFpe4OjkRyZn5M9YGvUGPg/max.png" alt="Success" class="template-success" />
                {{/rollWasCrit() attribute-roll-two}}
            </div>
            {{/rollTotal() attribute-die-two 1}}
            {{#rollTotal() skill-die-one 1}}
            <div class="template-grid-item template-span-three template-maroon-dice">
                {{#rollBetween() skill-roll-one 1 5}}
                    {{skill-roll-one}}
                {{/rollBetween() skill-roll-one 1 5}}
                {{#rollWasCrit() skill-roll-one}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() skill-roll-one}}
            </div>
            {{/rollTotal() skill-die-one 1}}
            {{#rollTotal() skill-die-two 1}}
            <div class="template-grid-item template-span-four template-maroon-dice">
                {{#rollBetween() skill-roll-two 1 5}}
                    {{skill-roll-two}}
                {{/rollBetween() skill-roll-two 1 5}}
                {{#rollWasCrit() skill-roll-two}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() skill-roll-two}}
            </div>
            {{/rollTotal() skill-die-two 1}}
            {{#rollTotal() negative-die-one 1}}
            <div class="template-grid-item template-span-three template-purple-dice">
                {{#rollBetween() negative-roll-one 1 5}}
                    {{negative-roll-one}}
                {{/rollBetween() negative-roll-one 1 5}}
                {{#rollWasCrit() negative-roll-one}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() negative-roll-one}}
            </div>
            {{/rollTotal() negative-die-one 1}}
            {{#rollTotal() negative-die-two 1}}
            <div class="template-grid-item template-span-four template-purple-dice">
                {{#rollBetween() negative-roll-two 1 5}}
                    {{negative-roll-two}}
                {{/rollBetween() negative-roll-two 1 5}}
                {{#rollWasCrit() negative-roll-two}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() negative-roll-two}}
            </div>
            {{/rollTotal() negative-die-two 1}}
            {{#rollTotal() gear-die-one 1}}
            <div class="template-grid-item template-span-five template-black-dice">
                {{#rollWasFumble() gear-roll-one}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollWasFumble() gear-roll-one}}
                {{#rollBetween() gear-roll-one 2 5}}
                    {{gear-roll-one}}
                {{/rollBetween() gear-roll-one 2 5}}
                {{#rollWasCrit() gear-roll-one}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() gear-roll-one}}
            </div>
            {{/rollTotal() gear-die-one 1}}
            {{#rollTotal() gear-die-two 1}}
            <div class="template-grid-item template-span-shix template-black-dice">
                {{#rollWasFumble() gear-roll-two}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollWasFumble() gear-roll-two}}
                {{#rollBetween() gear-roll-two 2 5}}
                    {{gear-roll-two}}
                {{/rollBetween() gear-roll-two 2 5}}
                {{#rollWasCrit() gear-roll-two}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() gear-roll-two}}
            </div>
            {{/rollTotal() gear-die-two 1}}
<!--- BEGIN ROW TWO --->
            {{#rollTotal() attribute-die-three 1}}
            <div class="template-grid-item template-span-one template-white-dice">
                {{#rollWasFumble() attribute-roll-three}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927713/1ttsrv1QW1ml3hT8btQr-Q/max.png" alt="Bane" class="template-bane" />
                {{/rollWasFumble() attribute-roll-three}}
                {{#rollBetween() attribute-roll-three 2 5}}
                    {{attribute-roll-three}}
                {{/rollBetween() attribute-roll-three 2 5}}
                {{#rollWasCrit() attribute-roll-three}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927679/CFpe4OjkRyZn5M9YGvUGPg/max.png" alt="Success" class="template-success" />
                {{/rollWasCrit() attribute-roll-three}}
            </div>
            {{/rollTotal() attribute-die-three 1}}
            {{#rollTotal() attribute-die-four 1}}
            <div class="template-grid-item template-span-two template-white-dice">
                {{#rollWasFumble() attribute-roll-four}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927713/1ttsrv1QW1ml3hT8btQr-Q/max.png" alt="Bane" class="template-bane" />
                {{/rollWasFumble() attribute-roll-four}}
                {{#rollBetween() attribute-roll-four 2 5}}
                    {{attribute-roll-four}}
                {{/rollBetween() attribute-roll-four 2 5}}
                {{#rollWasCrit() attribute-roll-four}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927679/CFpe4OjkRyZn5M9YGvUGPg/max.png" alt="Success" class="template-success" />
                {{/rollWasCrit() attribute-roll-four}}
            </div>
            {{/rollTotal() attribute-die-four 1}}
            {{#rollTotal() skill-die-three 1}}
            <div class="template-grid-item template-span-three template-maroon-dice">
                {{#rollBetween() skill-roll-three 1 5}}
                    {{skill-roll-three}}
                {{/rollBetween() skill-roll-three 1 5}}
                {{#rollWasCrit() skill-roll-three}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() skill-roll-three}}
            </div>
            {{/rollTotal() skill-die-three 1}}
            {{#rollTotal() skill-die-four 1}}
            <div class="template-grid-item template-span-four template-maroon-dice">
                {{#rollBetween() skill-roll-four 1 5}}
                    {{skill-roll-four}}
                {{/rollBetween() skill-roll-four 1 5}}
                {{#rollWasCrit() skill-roll-four}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() skill-roll-four}}
            </div>
            {{/rollTotal() skill-die-four 1}}
            {{#rollTotal() negative-die-three 1}}
            <div class="template-grid-item template-span-three template-purple-dice">
                {{#rollBetween() negative-roll-three 1 5}}
                    {{negative-roll-three}}
                {{/rollBetween() negative-roll-three 1 5}}
                {{#rollWasCrit() negative-roll-three}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() negative-roll-three}}
            </div>
            {{/rollTotal() negative-die-three 1}}
            {{#rollTotal() gear-die-three 1}}
            <div class="template-grid-item template-span-five template-black-dice">
                {{#rollWasFumble() gear-roll-three}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollWasFumble() gear-roll-three}}
                {{#rollBetween() gear-roll-three 2 5}}
                    {{gear-roll-three}}
                {{/rollBetween() gear-roll-three 2 5}}
                {{#rollWasCrit() gear-roll-three}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() gear-roll-three}}
            </div>
            {{/rollTotal() gear-die-three 1}}
            {{#rollTotal() gear-die-four 1}}
            <div class="template-grid-item template-span-shix template-black-dice">
                {{#rollWasFumble() gear-roll-four}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollWasFumble() gear-roll-four}}
                {{#rollBetween() gear-roll-four 2 5}}
                    {{gear-roll-four}}
                {{/rollBetween() gear-roll-four 2 5}}
                {{#rollWasCrit() gear-roll-four}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() gear-roll-four}}
            </div>
            {{/rollTotal() gear-die-four 1}}
<!--- BEGIN ROW THREE -->            
            {{#rollTotal() attribute-die-five 1}}
            <div class="template-grid-item template-span-one template-white-dice">
                {{#rollWasFumble() attribute-roll-five}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927713/1ttsrv1QW1ml3hT8btQr-Q/max.png" alt="Bane" class="template-bane" />
                {{/rollWasFumble() attribute-roll-five}}
                {{#rollBetween() attribute-roll-five 2 5}}
                    {{attribute-roll-five}}
                {{/rollBetween() attribute-roll-five 2 5}}
                {{#rollWasCrit() attribute-roll-five}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927679/CFpe4OjkRyZn5M9YGvUGPg/max.png" alt="Success" class="template-success" />
                {{/rollWasCrit() attribute-roll-five}}
            </div>
            {{/rollTotal() attribute-die-five 1}}
            {{#rollTotal() attribute-die-six 1}}
            <div class="template-grid-item template-span-two template-white-dice">
                {{#rollWasFumble() attribute-roll-six}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927713/1ttsrv1QW1ml3hT8btQr-Q/max.png" alt="Bane" class="template-bane" />
                {{/rollWasFumble() attribute-roll-six}}
                {{#rollBetween() attribute-roll-six 2 5}}
                    {{attribute-roll-six}}
                {{/rollBetween() attribute-roll-six 2 5}}
                {{#rollWasCrit() attribute-roll-six}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927679/CFpe4OjkRyZn5M9YGvUGPg/max.png" alt="Success" class="template-success" />
                {{/rollWasCrit() attribute-roll-six}}
            </div>
            {{/rollTotal() attribute-die-six 1}}
            {{#rollTotal() skill-die-five 1}}
            <div class="template-grid-item template-span-three template-maroon-dice">
                {{#rollBetween() skill-roll-five 1 5}}
                    {{skill-roll-five}}
                {{/rollBetween() skill-roll-five 1 5}}
                {{#rollWasCrit() skill-roll-five}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() skill-roll-five}}
            </div>
            {{/rollTotal() skill-die-five 1}}
            {{#rollTotal() skill-die-six 1}}
            <div class="template-grid-item template-span-four template-maroon-dice">
                {{#rollBetween() skill-roll-six 1 5}}
                    {{skill-roll-six}}
                {{/rollBetween() skill-roll-six 1 5}}
                {{#rollWasCrit() skill-roll-six}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() skill-roll-six}}
            </div>
            {{/rollTotal() skill-die-six 1}}
            {{#rollTotal() gear-die-five 1}}
            <div class="template-grid-item template-span-five template-black-dice">
                {{#rollWasFumble() gear-roll-five}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollWasFumble() gear-roll-five}}
                {{#rollBetween() gear-roll-five 2 5}}
                    {{gear-roll-five}}
                {{/rollBetween() gear-roll-five 2 5}}
                {{#rollWasCrit() gear-roll-five}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() gear-roll-five}}
            </div>
            {{/rollTotal() gear-die-five 1}}
            {{#rollTotal() gear-die-six 1}}
            <div class="template-grid-item template-span-shix template-black-dice">
                {{#rollWasFumble() gear-roll-six}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollWasFumble() gear-roll-six}}
                {{#rollBetween() gear-roll-six 2 5}}
                    {{gear-roll-six}}
                {{/rollBetween() gear-roll-six 2 5}}
                {{#rollWasCrit() gear-roll-six}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() gear-roll-six}}
            </div>
            {{/rollTotal() gear-die-six 1}}
<!--- BEGIN ROW FOUR -->
            {{#rollTotal() attribute-die-seven 1}}
            <div class="template-grid-item template-span-one template-white-dice">
                {{#rollWasFumble() attribute-roll-seven}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927713/1ttsrv1QW1ml3hT8btQr-Q/max.png" alt="Bane" class="template-bane" />
                {{/rollWasFumble() attribute-roll-seven}}
                {{#rollBetween() attribute-roll-seven 2 5}}
                    {{attribute-roll-seven}}
                {{/rollBetween() attribute-roll-seven 2 5}}
                {{#rollWasCrit() attribute-roll-seven}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927679/CFpe4OjkRyZn5M9YGvUGPg/max.png" alt="Success" class="template-success" />
                {{/rollWasCrit() attribute-roll-seven}}
            </div>
            {{/rollTotal() attribute-die-seven 1}}
            {{#rollTotal() attribute-die-eight 1}}
            <div class="template-grid-item template-span-two template-white-dice">
                {{#rollWasFumble() attribute-roll-eight}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927713/1ttsrv1QW1ml3hT8btQr-Q/max.png" alt="Bane" class="template-bane" />
                {{/rollWasFumble() attribute-roll-eight}}
                {{#rollBetween() attribute-roll-eight 2 5}}
                    {{attribute-roll-eight}}
                {{/rollBetween() attribute-roll-eight 2 5}}
                {{#rollWasCrit() attribute-roll-eight}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927679/CFpe4OjkRyZn5M9YGvUGPg/max.png" alt="Success" class="template-success" />
                {{/rollWasCrit() attribute-roll-eight}}
            </div>
            {{/rollTotal() attribute-die-eight 1}}
            {{#rollTotal() skill-die-seven 1}}
            <div class="template-grid-item template-span-three template-maroon-dice">
                {{#rollBetween() skill-roll-seven 1 5}}
                    {{skill-roll-seven}}
                {{/rollBetween() skill-roll-seven 1 5}}
                {{#rollWasCrit() skill-roll-seven}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() skill-roll-seven}}
            </div>
            {{/rollTotal() skill-die-seven 1}}
            {{#rollTotal() skill-die-eight 1}}
            <div class="template-grid-item template-span-four template-maroon-dice">
                {{#rollBetween() skill-roll-eight 1 5}}
                    {{skill-roll-eight}}
                {{/rollBetween() skill-roll-eight 1 5}}
                {{#rollWasCrit() skill-roll-eight}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() skill-roll-eight}}
            </div>
            {{/rollTotal() skill-die-eight 1}}
            {{#rollTotal() gear-die-seven 1}}
            <div class="template-grid-item template-span-five template-black-dice">
                {{#rollWasFumble() gear-roll-seven}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollWasFumble() gear-roll-seven}}
                {{#rollBetween() gear-roll-seven 2 5}}
                    {{gear-roll-seven}}
                {{/rollBetween() gear-roll-seven 2 5}}
                {{#rollWasCrit() gear-roll-seven}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() gear-roll-seven}}
            </div>
            {{/rollTotal() gear-die-seven 1}}
            {{#rollTotal() gear-die-eight 1}}
            <div class="template-grid-item template-span-shix template-black-dice">
                {{#rollWasFumble() gear-roll-eight}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollWasFumble() gear-roll-eight}}
                {{#rollBetween() gear-roll-eight 2 5}}
                    {{gear-roll-eight}}
                {{/rollBetween() gear-roll-eight 2 5}}
                {{#rollWasCrit() gear-roll-eight}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() gear-roll-eight}}
            </div>
            {{/rollTotal() gear-die-eight 1}}
 <!--- BEGIN ROW FIVE -->
            {{#rollTotal() attribute-die-nine 1}}
            <div class="template-grid-item template-span-one template-white-dice">
                {{#rollWasFumble() attribute-roll-nine}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927713/1ttsrv1QW1ml3hT8btQr-Q/max.png" alt="Bane" class="template-bane" />
                {{/rollWasFumble() attribute-roll-nine}}
                {{#rollBetween() attribute-roll-nine 2 5}}
                    {{attribute-roll-nine}}
                {{/rollBetween() attribute-roll-nine 2 5}}
                {{#rollWasCrit() attribute-roll-nine}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927679/CFpe4OjkRyZn5M9YGvUGPg/max.png" alt="Success" class="template-success" />
                {{/rollWasCrit() attribute-roll-nine}}
            </div>
            {{/rollTotal() attribute-die-nine 1}}
            {{#rollTotal() attribute-die-ten 1}}
            <div class="template-grid-item template-span-two template-white-dice">
                {{#rollWasFumble() attribute-roll-ten}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927713/1ttsrv1QW1ml3hT8btQr-Q/max.png" alt="Bane" class="template-bane" />
                {{/rollWasFumble() attribute-roll-ten}}
                {{#rollBetween() attribute-roll-ten 2 5}}
                    {{attribute-roll-ten}}
                {{/rollBetween() attribute-roll-ten 2 5}}
                {{#rollWasCrit() attribute-roll-ten}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927679/CFpe4OjkRyZn5M9YGvUGPg/max.png" alt="Success" class="template-success" />
                {{/rollWasCrit() attribute-roll-ten}}
            </div>
            {{/rollTotal() attribute-die-ten 1}}
                    {{#rollTotal() skill-die-nine 1}}
            <div class="template-grid-item template-span-three template-maroon-dice">
                {{#rollBetween() skill-roll-nine 1 5}}
                    {{skill-roll-nine}}
                {{/rollBetween() skill-roll-nine 1 5}}
                {{#rollWasCrit() skill-roll-nine}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() skill-roll-nine}}
            </div>
            {{/rollTotal() skill-die-nine 1}}
            {{#rollTotal() skill-die-ten 1}}
            <div class="template-grid-item template-span-four template-maroon-dice">
                {{#rollBetween() skill-roll-ten 1 5}}
                    {{skill-roll-ten}}
                {{/rollBetween() skill-roll-ten 1 5}}
                {{#rollWasCrit() skill-roll-ten}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() skill-roll-ten}}
            </div>
            {{/rollTotal() skill-die-ten 1}}
            {{#rollTotal() gear-die-nine 1}}
            <div class="template-grid-item template-span-five template-black-dice">
                {{#rollWasFumble() gear-roll-nine}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollWasFumble() gear-roll-nine}}
                {{#rollBetween() gear-roll-nine 2 5}}
                    {{gear-roll-nine}}
                {{/rollBetween() gear-roll-nine 2 5}}
                {{#rollWasCrit() gear-roll-nine}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() gear-roll-nine}}
            </div>
            {{/rollTotal() gear-die-nine 1}}
            {{#rollTotal() gear-die-ten 1}}
            <div class="template-grid-item template-span-shix template-black-dice">
                {{#rollWasFumble() gear-roll-ten}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollWasFumble() gear-roll-ten}}
                {{#rollBetween() gear-roll-ten 2 5}}
                    {{gear-roll-ten}}
                {{/rollBetween() gear-roll-ten 2 5}}
                {{#rollWasCrit() gear-roll-ten}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() gear-roll-ten}}
            </div>
            {{/rollTotal() gear-die-ten 1}}
<!--- BEGIN ROW SIX -->
            {{#rollTotal() attribute-die-eleven 1}}
            <div class="template-grid-item template-span-one template-white-dice">
                {{#rollWasFumble() attribute-roll-eleven}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927713/1ttsrv1QW1ml3hT8btQr-Q/max.png" alt="Bane" class="template-bane" />
                {{/rollWasFumble() attribute-roll-eleven}}
                {{#rollBetween() attribute-roll-eleven 2 5}}
                    {{attribute-roll-eleven}}
                {{/rollBetween() attribute-roll-eleven 2 5}}
                {{#rollWasCrit() attribute-roll-eleven}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927679/CFpe4OjkRyZn5M9YGvUGPg/max.png" alt="Success" class="template-success" />
                {{/rollWasCrit() attribute-roll-eleven}}
            </div>
            {{/rollTotal() attribute-die-eleven 1}}
            {{#rollTotal() attribute-die-twelve 1}}
            <div class="template-grid-item template-span-two template-white-dice">
                {{#rollWasFumble() attribute-roll-twelve}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927713/1ttsrv1QW1ml3hT8btQr-Q/max.png" alt="Bane" class="template-bane" />
                {{/rollWasFumble() attribute-roll-twelve}}
                {{#rollBetween() attribute-roll-twelve 2 5}}
                    {{attribute-roll-twelve}}
                {{/rollBetween() attribute-roll-twelve 2 5}}
                {{#rollWasCrit() attribute-roll-twelve}}
                    <img src="https://s3.amazonaws.com/files.d20.io/images/76927679/CFpe4OjkRyZn5M9YGvUGPg/max.png" alt="Success" class="template-success" />
                {{/rollWasCrit() attribute-roll-twelve}}
            </div>
            {{/rollTotal() attribute-die-twelve 1}}
            {{#rollTotal() gear-die-eleven 1}}
            <div class="template-grid-item template-span-five template-black-dice">
                {{#rollWasFumble() gear-roll-eleven}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollWasFumble() gear-roll-eleven}}
                {{#rollBetween() gear-roll-eleven 2 5}}
                    {{gear-roll-eleven}}
                {{/rollBetween() gear-roll-eleven 2 5}}
                {{#rollWasCrit() gear-roll-eleven}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() gear-roll-eleven}}
            </div>
            {{/rollTotal() gear-die-eleven 1}}
            {{#rollTotal() gear-die-twelve 1}}
            <div class="template-grid-item template-span-shix template-black-dice">
                {{#rollWasFumble() gear-roll-twelve}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollWasFumble() gear-roll-twelve}}
                {{#rollBetween() gear-roll-twelve 2 5}}
                    {{gear-roll-twelve}}
                {{/rollBetween() gear-roll-twelve 2 5}}
                {{#rollWasCrit() gear-roll-twelve}}
                    <span title="Success"><img src="https://s3.amazonaws.com/files.d20.io/images/76927688/p3KFOOAONvq7PbYMO2jxzg/max.png" alt="Success" class="template-success" /></span>
                {{/rollWasCrit() gear-roll-twelve}}
            </div>
            {{/rollTotal() gear-die-twelve 1}}
<!--- BEGIN ROW SEVEN -->            
            {{#rollTotal() artifact-die-eight 1}}
            <div class="template-grid-item template-span-five template-green-dice">
                {{#rollBetween() artifact-roll-eight 1 5}}
                    {{artifact-roll-eight}}
                {{/rollBetween() artifact-roll-eight 1 5}}
                {{#rollBetween() artifact-roll-eight 6 7}}
                    <div class="template-artifact-1">
                        <span class="template-inline" title="1 Success">1</span>
                    </div>
                {{/rollBetween() artifact-roll-eight 6 7}}
                {{#rollWasCrit() artifact-roll-eight}}
                    <div class="template-artifact-2">
                        <span class="template-inline" title="2 Successes">2</span>
                    </div>
                {{/rollWasCrit() artifact-roll-eight}}
            </div>
            {{/rollTotal() artifact-die-eight 1}}
            {{#rollTotal() artifact-die-ocho 1}}
            <div class="template-grid-item template-span-shix template-green-dice">
                {{#rollBetween() artifact-roll-ocho 1 5}}
                    {{artifact-roll-ocho}}
                {{/rollBetween() artifact-roll-ocho 1 5}}
                {{#rollBetween() artifact-roll-ocho 6 7}}
                    <div class="template-artifact-1">
                        <span class="template-inline" title="1 Success">1</span>
                    </div>
                {{/rollBetween() artifact-roll-ocho 6 7}}
                {{#rollWasCrit() artifact-roll-ocho}}
                    <div class="template-artifact-2">
                        <span class="template-inline" title="2 Successes">2</span>
                    </div>
                {{/rollWasCrit() artifact-roll-ocho}}
            </div>
            {{/rollTotal() artifact-die-ocho 1}}
<!--- BEGIN ROW EIGHT -->			
            {{#rollTotal() artifact-die-ten 1}}
            <div class="template-grid-item template-span-five template-blue-dice">
                {{#rollBetween() artifact-roll-ten 1 5}}
                    {{artifact-roll-ten}}
                {{/rollBetween() artifact-roll-ten 1 5}}
                {{#rollBetween() artifact-roll-ten 6 7}}
                    <div class="template-artifact-1">
                        <span class="template-inline" title="1 Success">1</span>
                    </div>
                {{/rollBetween() artifact-roll-ten 6 7}}
                {{#rollBetween() artifact-roll-ten 8 9}}
                    <div class="template-artifact-2">
                        <span class="template-inline" title="2 Successes">2</span>
                    </div>
                {{/rollBetween() artifact-roll-ten 8 9}}
                {{#rollWasCrit() artifact-roll-ten}}
                    <div class="template-artifact-3">
                        <span class="template-inline" title="3 Successes">3</span>
                    </div>
                {{/rollWasCrit() artifact-roll-ten}}
            </div>
            {{/rollTotal() artifact-die-ten 1}}
            {{#rollTotal() artifact-die-twelve 1}}
            <div class="template-grid-item template-span-shix template-orange-dice">
                {{#rollBetween() artifact-roll-twelve 1 5}}
                    {{artifact-roll-twelve}}
                {{/rollBetween() artifact-roll-twelve 1 5}}
                {{#rollBetween() artifact-roll-twelve 6 7}}
                    <div class="template-artifact-1">
                        <span class="template-inline" title="1 Success">1</span>
                    </div>
                {{/rollBetween() artifact-roll-twelve 6 7}}
                {{#rollBetween() artifact-roll-twelve 8 9}}
                    <div class="template-artifact-2">
                        <span class="template-inline" title="2 Successes">2</span>
                    </div>
                {{/rollBetween() artifact-roll-twelve 8 9}}
                {{#rollBetween() artifact-roll-twelve 10 11}}
                    <div class="template-artifact-3">
                        <span class="template-inline" title="3 Successes">3</span>
                    </div>
                {{/rollBetween() artifact-roll-twelve 10 11}}
                {{#rollWasCrit() artifact-roll-twelve}}
                    <div class="template-artifact-4">
                        <span class="template-inline" title="4 Successes">4</span>
                    </div>
                {{/rollWasCrit() artifact-roll-twelve}}
            </div>
            {{/rollTotal() artifact-die-twelve 1}}            

<!--- consumables -->
<!--- d6 -->
            {{#rollTotal() consumable-die-six 1}}
            <div class="template-grid-item template-span-center-die template-purple-dice">
                {{#rollBetween() consumable-roll-six 1 2}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollBetween() consumable-roll-six 1 2}}					
                {{#rollBetween() consumable-roll-six 3 6}}
                    {{consumable-roll-six}}
                {{/rollBetween() consumable-roll-six 3 6}}
            </div>
            {{/rollTotal() consumable-die-six 1}}
<!--- d8 -->
            {{#rollTotal() consumable-die-eight 1}}
            <div class="template-grid-item template-span-center-die template-purple-dice">
                {{#rollBetween() consumable-roll-eight 1 2}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollBetween() consumable-roll-eight 1 2}}					
                {{#rollBetween() consumable-roll-eight 3 8}}
                    {{consumable-roll-eight}}
                {{/rollBetween() consumable-roll-eight 3 8}}
            </div>
            {{/rollTotal() consumable-die-eight 1}}
<!--- d10 -->
            {{#rollTotal() consumable-die-ten 1}}
            <div class="template-grid-item template-span-center-die template-purple-dice">
                {{#rollBetween() consumable-roll-ten 1 2}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollBetween() consumable-roll-ten 1 2}}					
                {{#rollBetween() consumable-roll-ten 3 10}}
                    {{consumable-roll-ten}}
                {{/rollBetween() consumable-roll-ten 3 10}}
            </div>
            {{/rollTotal() consumable-die-ten 1}}
<!--- d12 -->
            {{#rollTotal() consumable-die-twelve 1}}
            <div class="template-grid-item template-span-center-die template-purple-dice">
                {{#rollBetween() consumable-roll-twelve 1 2}}
                    <span title="Bane"><img src="https://s3.amazonaws.com/files.d20.io/images/76927704/49c2rsljrzIbg0eE13ixWw/max.png" alt="Bane" class="template-bane" /></span>
                {{/rollBetween() consumable-roll-twelve 1 2}}					
                {{#rollBetween() consumable-roll-twelve 3 12}}
                    {{consumable-roll-twelve}}
                {{/rollBetween() consumable-roll-twelve 3 12}}
            </div>
            {{/rollTotal() consumable-die-twelve 1}}
<!--- d66 -->
            {{#rollTotal() d66-die-one 1}}
            <div class="template-grid-item template-span-three template-maroon-dice">
                {{#rollBetween() d66-roll-one 1 6}}
                    {{d66-roll-one}}
                {{/rollBetween() d66-roll-one 1 6}}
            </div>
            {{/rollTotal() d66-die-one 1}}
            {{#rollTotal() d66-die-two 1}}
            <div class="template-grid-item template-span-four template-maroon-dice">
                {{#rollBetween() d66-roll-two 1 6}}
                    {{d66-roll-two}}
                {{/rollBetween() d66-roll-two 1 6}}
            </div>
            {{/rollTotal() d66-die-two 1}}

<!--- dice pool column labels in footer-->            
            {{#attribute-die-one}}
            <div class="template-grid-item template-span-left">
                <span class="template-smaller sheet-small-caps" data-i18n="base-dice">Base Dice</span>
            </div>
            <div class="template-grid-item template-span-center">
                <span class="template-smaller sheet-small-caps" data-i18n="skill-dice">Skill Dice</span>
            </div>
            <div class="template-grid-item template-span-right">
                <span class="template-smaller sheet-small-caps" data-i18n="gear-dice">Gear Dice</span>
            </div>
            {{/attribute-die-one}}

<!--- attack -->
            {{#weapon-bonus}}{{#weapon-damage}}{{#weapon-range}}
            <div class="template-grid-item template-span-six">
                <span class="label" data-i18n="bonus">Bonus</span>:&nbsp;{{weapon-bonus}}
                <span class="label" data-i18n="damage">Damage</span>:&nbsp;{{weapon-damage}}
                <span class="label" data-i18n="range">Range</span>:&nbsp;{{weapon-range}}
            </div>
            {{/weapon-range}}{{/weapon-damage}}{{/weapon-bonus}}
            {{#weapon-features}}<div class="template-grid-item template-span-six">{{weapon-features}}</div>{{/weapon-features}}

<!--- spell -->
            {{#spell-rank}}{{#spell-willpower}}
            <div class="template-grid-item template-span-six">
                <span class="label" data-i18n="rank">Rank</span>:&nbsp;{{spell-rank}}
                <span class="label" data-i18n="willpower">Willpower</span>:&nbsp;{{spell-willpower}}
            </div>
            {{/spell-willpower}}{{/spell-rank}}

            {{#spell-range}}{{#spell-duration}}
            <div class="template-grid-item template-span-six">
                <span class="label" data-i18n="range">Range</span>:&nbsp;{{spell-range}}
                <span class="label" data-i18n="duration">Duration</span>:&nbsp;{{spell-duration}}
            </div>
            {{/spell-duration}}{{/spell-range}}

            {{#spell-ingredients}}
            <div class="template-grid-item template-span-six">
                <span class="label" data-i18n="ingredients">Ingredients</span>:&nbsp;{{spell-ingredients}}</div>
            {{/spell-ingredients}}
            {{#spell-description}}
            <div class="template-grid-item template-span-six scroll-text">{{spell-description}}</div>
            {{/spell-description}}
            
            {{#free-text}}<div class="template-grid-item template-span-six free-text"><span>{{free-text}}</span></div>{{/free-text}}
            {{#footer}}<div class="template-grid-item template-span-six template-footer">{{footer}}</div>{{/footer}}

            {{#allprops() character_name name character_id name_link subtitle free-text footer attribute-die-one attribute-die-two attribute-die-three attribute-die-four attribute-die-five attribute-die-six attribute-die-seven attribute-die-eight attribute-die-nine attribute-die-ten attribute-die-eleven attribute-die-twelve skill-die-one skill-die-two skill-die-three skill-die-four skill-die-five skill-die-six skill-die-seven skill-die-eight skill-die-nine skill-die-ten negative-die-one negative-die-two negative-die-three gear-die-one gear-die-two gear-die-three gear-die-four gear-die-five gear-die-six gear-die-seven gear-die-eight gear-die-nine gear-die-ten gear-die-eleven gear-die-twelve artifact-die-eight artifact-die-ocho artifact-die-ten artifact-die-twelve attribute-roll-one attribute-roll-two attribute-roll-three attribute-roll-four attribute-roll-five attribute-roll-six attribute-roll-seven attribute-roll-eight attribute-roll-nine attribute-roll-ten attribute-roll-eleven attribute-roll-twelve skill-roll-one skill-roll-two skill-roll-three skill-roll-four skill-roll-five skill-roll-six skill-roll-seven skill-roll-eight skill-roll-nine skill-roll-ten negative-roll-one negative-roll-two negative-roll-three gear-roll-one gear-roll-two gear-roll-three gear-roll-four gear-roll-five gear-roll-six gear-roll-seven gear-roll-eight gear-roll-nine gear-roll-ten gear-roll-eleven gear-roll-twelve artifact-roll-eight artifact-roll-ocho artifact-roll-ten artifact-roll-twelve consumable-die-six consumable-die-eight d66-die-one d66-roll-one d66-die-two d66-roll-two consumable-die-ten consumable-die-twelve consumable-roll-six consumable-roll-eight consumable-roll-ten consumable-roll-twelve push-query weapon-bonus weapon-damage weapon-range weapon-features spell-rank spell-willpower spell-range spell-duration spell-ingredients spell-description}}
                <div class="template-grid-item template-span-half"><span>**{{key}}**:</span></div>
                <div class="template-grid-item template-span-2nd-half"><span>{{value}}</span></div>
            {{/allprops() character_name name character_id name_link subtitle free-text footer attribute-die-one attribute-die-two attribute-die-three attribute-die-four attribute-die-five attribute-die-six attribute-die-seven attribute-die-eight attribute-die-nine attribute-die-ten attribute-die-eleven attribute-die-twelve skill-die-one skill-die-two skill-die-three skill-die-four skill-die-five skill-die-six skill-die-seven skill-die-eight skill-die-nine skill-die-ten negative-die-one negative-die-two negative-die-three gear-die-one gear-die-two gear-die-three gear-die-four gear-die-five gear-die-six gear-die-seven gear-die-eight gear-die-nine gear-die-ten gear-die-eleven gear-die-twelve artifact-die-eight artifact-die-ocho artifact-die-ten artifact-die-twelve attribute-roll-one attribute-roll-two attribute-roll-three attribute-roll-four attribute-roll-five attribute-roll-six attribute-roll-seven attribute-roll-eight attribute-roll-nine attribute-roll-ten attribute-roll-eleven attribute-roll-twelve skill-roll-one skill-roll-two skill-roll-three skill-roll-four skill-roll-five skill-roll-six skill-roll-seven skill-roll-eight skill-roll-nine skill-roll-ten negative-roll-one negative-roll-two negative-roll-three gear-roll-one gear-roll-two gear-roll-three gear-roll-four gear-roll-five gear-roll-six gear-roll-seven gear-roll-eight gear-roll-nine gear-roll-ten gear-roll-eleven gear-roll-twelve artifact-roll-eight artifact-roll-ocho artifact-roll-ten artifact-roll-twelve consumable-die-six consumable-die-eight d66-die-one d66-roll-one d66-die-two d66-roll-two consumable-die-ten consumable-die-twelve consumable-roll-six consumable-roll-eight consumable-roll-ten consumable-roll-twelve push-query weapon-bonus weapon-damage weapon-range weapon-features spell-rank spell-willpower spell-range spell-duration spell-ingredients spell-description}}
            
        </div>
    </div>
</rolltemplate>

<script type="text/worker">

/* version tracking */
var Sheet = Sheet || (function() {

var currentVersion= 1.52,

/* recalculateSheet */
recalculateSheet = function(oldversion) {
		if (oldversion < 1.51) {
//call your updates/functions here
console.log(">>>> Updating Forbidden Lands sheet <<<<");

		}
	},
	
/* checkForUpdate looks at current version of page in
 * version and compares to code Sheet.version calls
 * recalulateSheet if versions don't match or if recalculate
 * button was pressed. */
	checkForUpdate = function() {
		getAttrs(["version","recalc1"],function(v){
			var setter={},currVer=0,setAny=0,recalc=false;
			currVer=parseFloat(v["version"],10)||0;
			console.log(">>>> Current sheet data version: "+currVer +", Sheet code version: " +currentVersion +" <<<<");
			
			if ( currVer!== currentVersion ) {
				recalc=true;
				setter["version"]= currentVersion;
				setAny=1;
			}
			if (v["recalc1"] && v["recalc1"]!="0" ) {
				currVer=-1;
				recalc=true;
				setter["recalc1"]=0;
				setAny=1;
			}
			if (setAny) {
				 setAttrs( setter);
			}
			if (recalc) {
				recalculateSheet(currVer);
			}
		});
	};
	return {
		currentVersion:currentVersion,
		checkForUpdate:checkForUpdate
//Add changes/updates here

    };
}());

on("sheet:opened",function() {Sheet.checkForUpdate();});
on("change:recalc1",function() {Sheet.checkForUpdate();});


    /* ===== PARAMETERS ==========
    GiGs 'Super Simple Summarizer'
    */
    const repeatingSum = (destination, section, fields, multiplier = 1) => {
        if (!Array.isArray(fields)) fields = [fields];
        getSectionIDs(`repeating_${section}`, idArray => {
            const attrArray = idArray.reduce( (m,id) => [...m, ...(fields.map(field => `repeating_${section}_${id}_${field}`))],[]);
            getAttrs(attrArray, v => {
                console.log(">>> values of v: "+ JSON.stringify(v) +" <<<<");
                        // getValue: if not a number, returns 1 if it is 'on' (checkbox), otherwise returns 0..
                const getValue = (section, id,field) => parseFloat(v[`repeating_${section}_${id}_${field}`], 10) || (v[`repeating_${section}_${id}_${field}`] === 'on' ? 1 : 0);
                const sumTotal = idArray.reduce((total, id) => total + fields.reduce((subtotal,field) => subtotal * getValue(section, id,field),1),0);
                setAttrs({[destination]: sumTotal * multiplier});
            });
        });
    };
    on('change:repeating_gear remove:repeating_gear sheet_opened', function() {
        console.log(">>>> Change Detected: Character Gear Encumbrance <<<<");
        repeatingSum("character_gear_encumbrance","gear",["gear_weight","gear_qty","gear_carried"]);
    });
    on('change:repeating_mount remove:repeating_mount sheet_opened', function() {
        console.log(">>>> Change Detected: Mount's Gear Encumbrance <<<<");
        repeatingSum("mount_gear_encumbrance","mount",["mount_gear_weight","mount_gear_qty","mount_gear_carried"]);
    });

    /* coin weight */
    on('sheet_opened change:gold change:silver change:copper change:gold_mount change:silver_mount change:copper_mount', function() {        
        getAttrs(["gold", "silver", "copper", "gold_mount", "silver_mount", "copper_mount"], function(values) {
            console.log(">>>> Change Detected: Coin Weight <<<<");	
            var gold = parseInt(values["gold"],10)||0;
            var silver = parseInt(values["silver"],10)||0;
            var copper = parseInt(values["copper"],10)||0;
            var temp_carried = Math.floor((gold + silver + copper)/100)*100;
            var output_carried = 0;
            output_carried = ((temp_carried)*0.005).toFixed(1);        
            var gold_mount = parseInt(values["gold_mount"],10)||0;
            var silver_mount = parseInt(values["silver_mount"],10)||0;
            var copper_mount = parseInt(values["copper_mount"],10)||0;
            var temp_mount = Math.floor((gold_mount + silver_mount + copper_mount)/100)*100;
            var output_mount = 0;
            output_mount = ((temp_mount)*0.005).toFixed(1);
            setAttrs({
                "coins_carried": output_carried,
                "coins_carried_mount": output_mount
            });
        });
    });
    
    /* total encumbrance */
    on('sheet_opened change:character_gear_encumbrance change:mount_gear_encumbrance change:coins_carried change:coins_carried_mount', function() {
        getAttrs(["character_gear_encumbrance", "mount_gear_encumbrance", "coins_carried", "coins_carried_mount"], function(values) {
            console.log(">>>> Change Detected: Character Encumbrance <<<<");
            var character_gear_encumbrance = parseFloat(values["character_gear_encumbrance"],10)||0;
            var mount_gear_encumbrance = parseFloat(values["mount_gear_encumbrance"],10)||0;
            var coins_carried = parseFloat(values["coins_carried"],10)||0;
            var coins_carried_mount = parseFloat(values["coins_carried_mount"],10)||0;
            var sum_character_weight = (character_gear_encumbrance + coins_carried);
            var sum_mount_weight = (mount_gear_encumbrance + coins_carried_mount);
                setAttrs({
                "character_encumbrance": sum_character_weight,
                "mount_encumbrance": sum_mount_weight
            });
        });		
    });

    /* coin total */
    on('sheet_opened change:gold change:silver change:copper change:gold_mount change:silver_mount change:copper_mount change:gold_other change:silver_other change:copper_other', function() {        
        getAttrs(["gold", "silver", "copper", "gold_mount", "silver_mount", "copper_mount", "gold_other", "silver_other", "copper_other"], function(values) {		
            console.log(">>>> Change Detected: Coin Total <<<<");
            var gold = parseInt(values["gold"],10)||0;
            var silver = parseInt(values["silver"],10)||0;
            var copper = parseInt(values["copper"],10)||0;        
            var gold_mount = parseInt(values["gold_mount"],10)||0;
            var silver_mount = parseInt(values["silver_mount"],10)||0;
            var copper_mount = parseInt(values["copper_mount"],10)||0;
            var gold_other = parseInt(values["gold_other"],10)||0;
            var silver_other = parseInt(values["silver_other"],10)||0;
            var copper_other = parseInt(values["copper_other"],10)||0;				
            var sum_gold = (gold + gold_mount + gold_other);
            var sum_silver = (silver + silver_mount + silver_other);
            var sum_copper = (copper + copper_mount + copper_other);
            setAttrs({
                "gold_total": sum_gold,
                "silver_total": sum_silver,
                "copper_total": sum_copper
            });
        });
    });

    /* ability damage calcs */    
    const damages = { 
    // an Object Literal: damages['strength'] returns 'damage', damages['empathy'] returns 'doubt', etc
        strength: 'damage', 
        agility: 'fatigue', 
        wits: 'confusion', 
        empathy: 'doubt'
    };
    Object.keys(damages).forEach(stat => { 
    // creates a sheet worker for each stat in damages - first stat = 'strength', then stat = 'agility', etc
    // in each worker, stat = the stat (strength, agility, etc) and damages[stat] = the associated damage ('damage'. 'fatigue', etc)
        on(`change:${stat} change:${damages[stat]}`, function () {
            console.log(">>> ${stat} or ${damages[stat]} has changed. <<<<");
            getAttrs([stat, damages[stat]], values => {
                const 	stat_score = parseInt(values[stat], 10)||0,
                        damage_score = parseInt(values[damages[stat]], 10)||0;
                setAttrs({
                    [stat + '_total']: Math.max(0, stat_score - damage_score )
    //Math.max returns the highest value from a comma separated list - it's just like roll20's kh1 dice function.
    // so you don't need the if( value > 0) test. With math.max, if the value is below 0, it becomes 0.
                });
            });
        });
    });
    
    /* skill total calcs */
    const attributes = { 
    // a javascript Object Literal, containing each skill, and its corresponding attribute
        'Animal Handling': 'empathy_total',
        Crafting: 'strength_total',
        Endurance: 'strength_total',
        Healing: 'empathy_total',
        Insight: 'wits_total',
        Lore: 'wits_total',
        Manipulation: 'empathy_total',
        Marksmanship: 'agility_total',
        Melee: 'strength_total',
        Might: 'strength_total',
        Move: 'agility_total',
        Performance: 'empathy_total',
        Scouting: 'wits_total',
        'Sleight of Hand': 'agility_total',
        Stealth: 'agility_total',
        Survival: 'wits_total'
    },
    getSkill = (label) => label.split(' ').join('_').toLowerCase(); 
    // a function to change (for example) "Animal Handling" to "animal_handling"
    // needed for a couple of functions below

    getSkillKey = (label) => label.split(' ').join('-').toLowerCase(); 
    // a function to change (for example) "Animal Handling" to "animal-handling"
    // needed for a couple of functions below
    
    Object.keys(attributes).forEach(skill_name => {
    // creates a sheet worker for each skill in attributes - first skill = 'strength', then stat = 'agility', etc
    // in each worker, stat = the stat (strength, agility, etc) and damages[stat] = the associated damage ('damage'. 'fatigue', etc)
        const skill = getSkill(skill_name);
        on(`change:${skill} change:${attributes[skill_name]}`, function () {
            console.log(">>> ${skill} or ${attributes[skill_name]} has changed. <<<<");
            getAttrs([skill, attributes[skill_name] ], function(values) {
                const 	stat_score = parseInt(values[attributes[skill_name]], 10)||0,
                        skill_score = parseInt(values[skill], 10)||0;
                setAttrs({
                    [skill + '_total']: stat_score + skill_score
                });
            });
        });
    });
    
    /* Wes's Dice Pool */
    on("change:attribute", function () {
        getAttrs(['attribute'], function(values) {
            const pool = { 
            //if you name the keys below to match the attributes on the character sheet, it makes setAttrs much simpler - see below.
                0: {attribute_die_one: 0, attribute_die_two: 0, attribute_die_three: 0, attribute_die_four: 0, attribute_die_five: 0, attribute_die_six: 0, attribute_die_seven: 0, attribute_die_eight: 0, attribute_die_nine: 0, attribute_die_ten: 0, attribute_die_eleven: 0, attribute_die_twelve: 0},
                1: {attribute_die_one: 1, attribute_die_two: 0, attribute_die_three: 0, attribute_die_four: 0, attribute_die_five: 0, attribute_die_six: 0, attribute_die_seven: 0, attribute_die_eight: 0, attribute_die_nine: 0, attribute_die_ten: 0, attribute_die_eleven: 0, attribute_die_twelve: 0},
                2: {attribute_die_one: 1, attribute_die_two: 1, attribute_die_three: 0, attribute_die_four: 0, attribute_die_five: 0, attribute_die_six: 0, attribute_die_seven: 0, attribute_die_eight: 0, attribute_die_nine: 0, attribute_die_ten: 0, attribute_die_eleven: 0, attribute_die_twelve: 0},
                3: {attribute_die_one: 1, attribute_die_two: 1, attribute_die_three: 1, attribute_die_four: 0, attribute_die_five: 0, attribute_die_six: 0, attribute_die_seven: 0, attribute_die_eight: 0, attribute_die_nine: 0, attribute_die_ten: 0, attribute_die_eleven: 0, attribute_die_twelve: 0},
                4: {attribute_die_one: 1, attribute_die_two: 1, attribute_die_three: 1, attribute_die_four: 1, attribute_die_five: 0, attribute_die_six: 0, attribute_die_seven: 0, attribute_die_eight: 0, attribute_die_nine: 0, attribute_die_ten: 0, attribute_die_eleven: 0, attribute_die_twelve: 0},
                5: {attribute_die_one: 1, attribute_die_two: 1, attribute_die_three: 1, attribute_die_four: 1, attribute_die_five: 1, attribute_die_six: 0, attribute_die_seven: 0, attribute_die_eight: 0, attribute_die_nine: 0, attribute_die_ten: 0, attribute_die_eleven: 0, attribute_die_twelve: 0},
                6: {attribute_die_one: 1, attribute_die_two: 1, attribute_die_three: 1, attribute_die_four: 1, attribute_die_five: 1, attribute_die_six: 1, attribute_die_seven: 0, attribute_die_eight: 0, attribute_die_nine: 0, attribute_die_ten: 0, attribute_die_eleven: 0, attribute_die_twelve: 0},
                7: {attribute_die_one: 1, attribute_die_two: 1, attribute_die_three: 1, attribute_die_four: 1, attribute_die_five: 1, attribute_die_six: 1, attribute_die_seven: 1, attribute_die_eight: 0, attribute_die_nine: 0, attribute_die_ten: 0, attribute_die_eleven: 0, attribute_die_twelve: 0},
                8: {attribute_die_one: 1, attribute_die_two: 1, attribute_die_three: 1, attribute_die_four: 1, attribute_die_five: 1, attribute_die_six: 1, attribute_die_seven: 1, attribute_die_eight: 1, attribute_die_nine: 0, attribute_die_ten: 0, attribute_die_eleven: 0, attribute_die_twelve: 0},
                9: {attribute_die_one: 1, attribute_die_two: 1, attribute_die_three: 1, attribute_die_four: 1, attribute_die_five: 1, attribute_die_six: 1, attribute_die_seven: 1, attribute_die_eight: 1, attribute_die_nine: 1, attribute_die_ten: 0, attribute_die_eleven: 0, attribute_die_twelve: 0},
                10: {attribute_die_one: 1, attribute_die_two: 1, attribute_die_three: 1, attribute_die_four: 1, attribute_die_five: 1, attribute_die_six: 1, attribute_die_seven: 1, attribute_die_eight: 1, attribute_die_nine: 1, attribute_die_ten: 1, attribute_die_eleven: 0, attribute_die_twelve: 0},
                11: {attribute_die_one: 1, attribute_die_two: 1, attribute_die_three: 1, attribute_die_four: 1, attribute_die_five: 1, attribute_die_six: 1, attribute_die_seven: 1, attribute_die_eight: 1, attribute_die_nine: 1, attribute_die_ten: 1, attribute_die_eleven: 1, attribute_die_twelve: 0},
                12: {attribute_die_one: 1, attribute_die_two: 1, attribute_die_three: 1, attribute_die_four: 1, attribute_die_five: 1, attribute_die_six: 1, attribute_die_seven: 1, attribute_die_eight: 1, attribute_die_nine: 1, attribute_die_ten: 1, attribute_die_eleven: 1, attribute_die_twelve: 1}
            };
            let attribute = values.attribute;
            if (!pool.hasOwnProperty( attribute )) {
    // I reversed the order from the example above for simplicity
                console.log(">>> Error: The item " + pool + " is not found within the pool Object. <<<<");
                return;
            }
            setAttrs(pool[attribute]);
        });
    });
    
    on("change:skill", function () {
        getAttrs(['skill'], function(values) {
            const pool = {
                "-3": {negative_die_three: 1, negative_die_two: 1, negative_die_one: 1, skill_die_one: 0, skill_die_two: 0, skill_die_three: 0, skill_die_four: 0, skill_die_five: 0, skill_die_six: 0, skill_die_seven: 0, skill_die_eight: 0, skill_die_nine: 0, skill_die_ten: 0},
                "-2": {negative_die_three: 0, negative_die_two: 1, negative_die_one: 1, skill_die_one: 0, skill_die_two: 0, skill_die_three: 0, skill_die_four: 0, skill_die_five: 0, skill_die_six: 0, skill_die_seven: 0, skill_die_eight: 0, skill_die_nine: 0, skill_die_ten: 0},
                "-1": {negative_die_three: 0, negative_die_two: 0, negative_die_one: 1, skill_die_one: 0, skill_die_two: 0, skill_die_three: 0, skill_die_four: 0, skill_die_five: 0, skill_die_six: 0, skill_die_seven: 0, skill_die_eight: 0, skill_die_nine: 0, skill_die_ten: 0},
                0: {negative_die_three: 0, negative_die_two: 0, negative_die_one: 0, skill_die_one: 0, skill_die_two: 0, skill_die_three: 0, skill_die_four: 0, skill_die_five: 0, skill_die_six: 0, skill_die_seven: 0, skill_die_eight: 0, skill_die_nine: 0, skill_die_ten: 0},
                1: {negative_die_three: 0, negative_die_two: 0, negative_die_one: 0, skill_die_one: 1, skill_die_two: 0, skill_die_three: 0, skill_die_four: 0, skill_die_five: 0, skill_die_six: 0, skill_die_seven: 0, skill_die_eight: 0, skill_die_nine: 0, skill_die_ten: 0},
                2: {negative_die_three: 0, negative_die_two: 0, negative_die_one: 0, skill_die_one: 1, skill_die_two: 1, skill_die_three: 0, skill_die_four: 0, skill_die_five: 0, skill_die_six: 0, skill_die_seven: 0, skill_die_eight: 0, skill_die_nine: 0, skill_die_ten: 0},
                3: {negative_die_three: 0, negative_die_two: 0, negative_die_one: 0, skill_die_one: 1, skill_die_two: 1, skill_die_three: 1, skill_die_four: 0, skill_die_five: 0, skill_die_six: 0, skill_die_seven: 0, skill_die_eight: 0, skill_die_nine: 0, skill_die_ten: 0},
                4: {negative_die_three: 0, negative_die_two: 0, negative_die_one: 0, skill_die_one: 1, skill_die_two: 1, skill_die_three: 1, skill_die_four: 1, skill_die_five: 0, skill_die_six: 0, skill_die_seven: 0, skill_die_eight: 0, skill_die_nine: 0, skill_die_ten: 0},
                5: {negative_die_three: 0, negative_die_two: 0, negative_die_one: 0, skill_die_one: 1, skill_die_two: 1, skill_die_three: 1, skill_die_four: 1, skill_die_five: 1, skill_die_six: 0, skill_die_seven: 0, skill_die_eight: 0, skill_die_nine: 0, skill_die_ten: 0},
                6: {negative_die_three: 0, negative_die_two: 0, negative_die_one: 0, skill_die_one: 1, skill_die_two: 1, skill_die_three: 1, skill_die_four: 1, skill_die_five: 1, skill_die_six: 1, skill_die_seven: 0, skill_die_eight: 0, skill_die_nine: 0, skill_die_ten: 0},
                7: {negative_die_three: 0, negative_die_two: 0, negative_die_one: 0, skill_die_one: 1, skill_die_two: 1, skill_die_three: 1, skill_die_four: 1, skill_die_five: 1, skill_die_six: 1, skill_die_seven: 1, skill_die_eight: 0, skill_die_nine: 0, skill_die_ten: 0},
                8: {negative_die_three: 0, negative_die_two: 0, negative_die_one: 0, skill_die_one: 1, skill_die_two: 1, skill_die_three: 1, skill_die_four: 1, skill_die_five: 1, skill_die_six: 1, skill_die_seven: 1, skill_die_eight: 1, skill_die_nine: 0, skill_die_ten: 0},
                9: {negative_die_three: 0, negative_die_two: 0, negative_die_one: 0, skill_die_one: 1, skill_die_two: 1, skill_die_three: 1, skill_die_four: 1, skill_die_five: 1, skill_die_six: 1, skill_die_seven: 1, skill_die_eight: 1, skill_die_nine: 1, skill_die_ten: 0},
                10: {negative_die_three: 0, negative_die_two: 0, negative_die_one: 0, skill_die_one: 1, skill_die_two: 1, skill_die_three: 1, skill_die_four: 1, skill_die_five: 1, skill_die_six: 1, skill_die_seven: 1, skill_die_eight: 1, skill_die_nine: 1, skill_die_ten: 1}
            };
            let skill = values.skill;
            if (!pool.hasOwnProperty( skill )) {
    // I reversed the order from the example above for simplicity
                console.log(">>> Error: The item " + pool + " is not found within the pool Object. <<<<");
                return;
            } 
            setAttrs(pool[skill]);
        });
    });
    
    on("change:gear", function () {
        getAttrs(['gear'], function(values) {
            const pool = {
                0: {gear_die_one: 0, gear_die_two: 0, gear_die_three: 0, gear_die_four: 0, gear_die_five: 0, gear_die_six: 0, gear_die_seven: 0, gear_die_eight: 0, gear_die_nine: 0, gear_die_ten: 0, gear_die_eleven: 0, gear_die_twelve: 0},
                1: {gear_die_one: 1, gear_die_two: 0, gear_die_three: 0, gear_die_four: 0, gear_die_five: 0, gear_die_six: 0, gear_die_seven: 0, gear_die_eight: 0, gear_die_nine: 0, gear_die_ten: 0, gear_die_eleven: 0, gear_die_twelve: 0},
                2: {gear_die_one: 1, gear_die_two: 1, gear_die_three: 0, gear_die_four: 0, gear_die_five: 0, gear_die_six: 0, gear_die_seven: 0, gear_die_eight: 0, gear_die_nine: 0, gear_die_ten: 0, gear_die_eleven: 0, gear_die_twelve: 0},
                3: {gear_die_one: 1, gear_die_two: 1, gear_die_three: 1, gear_die_four: 0, gear_die_five: 0, gear_die_six: 0, gear_die_seven: 0, gear_die_eight: 0, gear_die_nine: 0, gear_die_ten: 0, gear_die_eleven: 0, gear_die_twelve: 0},
                4: {gear_die_one: 1, gear_die_two: 1, gear_die_three: 1, gear_die_four: 1, gear_die_five: 0, gear_die_six: 0, gear_die_seven: 0, gear_die_eight: 0, gear_die_nine: 0, gear_die_ten: 0, gear_die_eleven: 0, gear_die_twelve: 0},
                5: {gear_die_one: 1, gear_die_two: 1, gear_die_three: 1, gear_die_four: 1, gear_die_five: 1, gear_die_six: 0, gear_die_seven: 0, gear_die_eight: 0, gear_die_nine: 0, gear_die_ten: 0, gear_die_eleven: 0, gear_die_twelve: 0},
                6: {gear_die_one: 1, gear_die_two: 1, gear_die_three: 1, gear_die_four: 1, gear_die_five: 1, gear_die_six: 1, gear_die_seven: 0, gear_die_eight: 0, gear_die_nine: 0, gear_die_ten: 0, gear_die_eleven: 0, gear_die_twelve: 0},
                7: {gear_die_one: 1, gear_die_two: 1, gear_die_three: 1, gear_die_four: 1, gear_die_five: 1, gear_die_six: 1, gear_die_seven: 1, gear_die_eight: 0, gear_die_nine: 0, gear_die_ten: 0, gear_die_eleven: 0, gear_die_twelve: 0},
                8: {gear_die_one: 1, gear_die_two: 1, gear_die_three: 1, gear_die_four: 1, gear_die_five: 1, gear_die_six: 1, gear_die_seven: 1, gear_die_eight: 1, gear_die_nine: 0, gear_die_ten: 0, gear_die_eleven: 0, gear_die_twelve: 0},
                9: {gear_die_one: 1, gear_die_two: 1, gear_die_three: 1, gear_die_four: 1, gear_die_five: 1, gear_die_six: 1, gear_die_seven: 1, gear_die_eight: 1, gear_die_nine: 1, gear_die_ten: 0, gear_die_eleven: 0, gear_die_twelve: 0},
                10: {gear_die_one: 1, gear_die_two: 1, gear_die_three: 1, gear_die_four: 1, gear_die_five: 1, gear_die_six: 1, gear_die_seven: 1, gear_die_eight: 1, gear_die_nine: 1, gear_die_ten: 1, gear_die_eleven: 0, gear_die_twelve: 0},
                11: {gear_die_one: 1, gear_die_two: 1, gear_die_three: 1, gear_die_four: 1, gear_die_five: 1, gear_die_six: 1, gear_die_seven: 1, gear_die_eight: 1, gear_die_nine: 1, gear_die_ten: 1, gear_die_eleven: 1, gear_die_twelve: 0},
                12: {gear_die_one: 1, gear_die_two: 1, gear_die_three: 1, gear_die_four: 1, gear_die_five: 1, gear_die_six: 1, gear_die_seven: 1, gear_die_eight: 1, gear_die_nine: 1, gear_die_ten: 1, gear_die_eleven: 1, gear_die_twelve: 1}
            };
            let gear = values.gear;
            if (!pool.hasOwnProperty( gear )) {
    // I reversed the order from the example above for simplicity
                console.log(">>> Error: The item " + pool + " is not found within the pool Object. <<<<");
                return;
            } 
            setAttrs(pool[gear]);
        });
    });
    const dicePoolButtons = (which) => {
        console.log(">>>> Change Detected: Dice Pool ${which} - button clicked <<<<");
        getAttrs([attributes[which], getSkill(which), getSkillKey(which)], function (values) {
    // attributes[which] returns the attribute; e.g attributes['Stealth'] gives 'agility_total'
    // getSkill(which) converts the skill name to a valid attribute string: getSkill('Animal Handling') gives 'animal_handling'
            const stat = parseInt(values[attributes[which]], 10) || 0;
    // stat here first gets attributes['Stealth'] which will be, say, 'agility_total' and 
    //  then values['ability_total'] gives you the score from the character sheet.
    
    // used to set the proper translation key
    var whichKey = getTranslationByKey(getSkillKey(which));

            setAttrs({
                attribute: stat > 0 ? stat : 0, // this is a Ternary Operator, it starts with a question (e.g. is stat > 0) 
    // and if true, returns the bit after the ? and if false returns the bit after the :
    // you can often replace simple if/then expressions with a single line ternary operator.    
                skill: parseInt(values[getSkill(which)], 10) || 0,
    // uses the translation key
                gear: 0,
                current_preset: whichKey,
                include_with_roll: ""
            });
        });
    };
    
    on("clicked:dice_pool_crafting", () => dicePoolButtons('Crafting'));
    on("clicked:dice_pool_might", () => dicePoolButtons('Might'));
    on("clicked:dice_pool_endurance", () => dicePoolButtons('Endurance'));
    on("clicked:dice_pool_melee", () => dicePoolButtons('Melee'));
    on("clicked:dice_pool_stealth", () => dicePoolButtons('Stealth'));
    on("clicked:dice_pool_sleight_of_hand", () => dicePoolButtons('Sleight of Hand'));
    on("clicked:dice_pool_move", () => dicePoolButtons('Move'));
    on("clicked:dice_pool_marksmanship", () => dicePoolButtons('Marksmanship'));
    on("clicked:dice_pool_scouting", () => dicePoolButtons('Scouting'));
    on("clicked:dice_pool_lore", () => dicePoolButtons('Lore'));
    on("clicked:dice_pool_survival", () => dicePoolButtons('Survival'));
    on("clicked:dice_pool_insight", () => dicePoolButtons('Insight'));
    on("clicked:dice_pool_manipulation", () => dicePoolButtons('Manipulation'));
    on("clicked:dice_pool_performance", () => dicePoolButtons('Performance'));
    on("clicked:dice_pool_healing", () => dicePoolButtons('Healing'));
    on("clicked:dice_pool_animal_handling", () => dicePoolButtons('Animal Handling'));
    
    on("clicked:dice_pool_clear", function() {
        console.log(">>>> Change Detected: Clear Dice Pool - button clicked <<<<");
            setAttrs({
            attribute: 0, 
            skill: 0, 
            gear: 0, 
            artifact_die_eight: 0, 
            artifact_die_ocho: 0, 
            artifact_die_ten: 0, 
            artifact_die_twelve: 0, 
            current_preset: getTranslationByKey(`custom`), 
            include_with_roll: ""
            });
        });
    
    /* api dice toggle */
    on("clicked:api_dice_toggle", function() {
        console.log(">>>> Change Detected: API Dice Toggle - button clicked <<<<");
        getAttrs(["api_toggle"], function(values) {
            const api_toggle = parseInt(values.api_toggle,10)||0;
            var buttonState = api_toggle;
    
            if(buttonState !== 0){
                buttonState = 0
            }
            else {
                buttonState = 1
            }
        setAttrs({
            api_toggle : buttonState
            });
        });
        });
    
    /* set reputation dice pool */
        on("clicked:reputation-roll", function() {
            console.log(">>>> Change Detected: Reputation - button clicked <<<<");
            getAttrs(["reputation"], function(values) {
                const reputation = parseInt(values.reputation,10)||0;
                setAttrs({
                    attribute: 0, 
                    skill: 0,
                    gear: reputation,
                    current_preset: getTranslationByKey(`reputation-roll`),
                    include_with_roll: ""
                });
            });
        });
    
    /* set weapon dice pool */
    on("clicked:repeating_weapons:attack-roll", function() {
        console.log(">>>> Change Detected: Weapon - button clicked <<<<");
        getAttrs(['repeating_weapons_weapon_skill', 'repeating_weapons_weapon_name' ,'repeating_weapons_weapon_bonus', 'repeating_weapons_weapon_damage', 'repeating_weapons_weapon_range', 'repeating_weapons_weapon_features', 'strength_total', 'agility_total', 'wits_total', 'empathy_total', 'marksmanship', 'melee'], function(values) {
            
            const 	weapon_skill = parseInt(values.repeating_weapons_weapon_skill,10)||0, 
                    weapon_bonus = parseInt(values.repeating_weapons_weapon_bonus,10)||0,
                    weapon_name = values.repeating_weapons_weapon_name,
                    weapon_damage = parseInt(values.repeating_weapons_weapon_damage,10)||0,
                    weapon_range = values.repeating_weapons_weapon_range,
                    weapon_features = values.repeating_weapons_weapon_features,
                    attribute = (weapon_skill === 0 ? parseInt(values.strength_total,10)||0 : parseInt(values.agility_total,10)||0 ),
                    skill = (weapon_skill === 0 ? parseInt(values.melee,10)||0 : parseInt(values.marksmanship,10)||0 );                    
            setAttrs({
                attribute: attribute, 
                skill: skill,
                gear: weapon_bonus,
                current_preset: getTranslationByKey(`weapon-selected`) + ` - ${weapon_name}`,
                include_with_roll: `{{weapon-bonus=${weapon_bonus}}} {{weapon-damage=${weapon_damage}}} {{weapon-range=${weapon_range}}} {{weapon-features=${weapon_features}}}`
            });
        });
    });
    
    /* set spell dice pool */
    on("clicked:repeating_spells:spell-roll", function() {
        console.log(">>>> Change Detected: Spell - button clicked <<<<");
        getAttrs(['repeating_spells_spell_name' ,'repeating_spells_spell_rank', 'repeating_spells_spell_range', 'repeating_spells_spell_duration',  'repeating_spells_spell_ingredients', 'repeating_spells_spell_description', 'repeating_spells_spell_willpower'], function(values) {
            
            const	spell_name = values.repeating_spells_spell_name,
                    spell_rank = parseInt(values.repeating_spells_spell_rank,10)||0,
                    spell_willpower = parseInt(values.repeating_spells_spell_willpower,10)||0,
                    spell_range = values.repeating_spells_spell_range,
                    spell_duration = values.repeating_spells_spell_duration,
                    spell_ingredients = values.repeating_spells_spell_ingredients,
                    spell_description = values.repeating_spells_spell_description
            setAttrs({
                attribute: 0, 
                skill: 0,
                gear: spell_willpower,
                current_preset: getTranslationByKey(`spell-selected`) + ` - ${spell_name}`,
                include_with_roll: `{{spell-rank=${spell_rank}}} {{spell-willpower=${spell_willpower}}} {{spell-range=${spell_range}}} {{spell-duration=${spell_duration}}} {{spell-ingredients=${spell_ingredients}}} {{spell-description=${spell_description}}}`
            });
        });
    });
    
    /* set armor dice pool */
    on("clicked:armor-roll", function() {
        console.log(">>>> Change Detected: Armor - button clicked <<<<");
        getAttrs(["ar"], function(values) {
            const ar = parseInt(values.ar,10)||0;
            setAttrs({
                attribute: 0, 
                skill: 0,
                gear: ar,
                current_preset: getTranslationByKey(`armor-roll`),
                include_with_roll: ""
            });
        });
    });
    
    /* set shield dice pool */
    on("clicked:shield-roll", function() {
        console.log(">>>> Change Detected: Shield - button clicked <<<<");
        getAttrs(["shield1_bonus", "melee"], function(values) {
            
            const   skill = parseInt(values.melee,10)||0,
                    shield1_bonus = parseInt(values.shield1_bonus,10)||0;
    
            setAttrs({
                skill: skill,
                gear: shield1_bonus,
                current_preset: getTranslationByKey(`shield-parry-roll`),
                include_with_roll: ""
            });
        });
    });
    
    /* set armor calcs */
    on("change:armor1_equiped change:armor1_damage change:armor1_bonus change:armor2_equiped change:armor2_damage change:armor2_bonus", function() {
        console.log(">>>> Change Detected: Armor/Helmet <<<<");
        getAttrs(["armor1_equiped", "armor1_damage", "armor1_bonus", "armor2_equiped", "armor2_damage", "armor2_bonus"], function(values) {    
            const   armor1_equiped = parseInt(values["armor1_equiped"],10)||0,
                    armor1_damage = parseInt(values["armor1_damage"],10)||0,
                    armor1_bonus = parseInt(values["armor1_bonus"],10)||0,
                    armor2_equiped = parseInt(values["armor2_equiped"],10)||0,
                    armor2_damage = parseInt(values["armor2_damage"],10)||0,
                    armor2_bonus = parseInt(values["armor2_bonus"],10)||0,
                    armor1_ar = parseInt(values["armor1_ar"],10)||0,
                    armor2_ar = parseInt(values["armor2_ar"],10)||0,
                    ar = parseInt(values["ar"],10)||0,
                    tempAR1 = Math.max((armor1_equiped*(armor1_bonus+armor1_damage))),
                    tempAR2 = Math.max((armor2_equiped*(armor2_bonus+armor2_damage))),
                    tempAR = Math.max((tempAR1 + tempAR2));
            setAttrs({
                "armor1_ar": tempAR1,
                "armor2_ar": tempAR2,
                "ar": tempAR
            });
        });
    });

    on("change:mounted change:mount_strength", function() {
        console.log(">>>> Change Detected: Mounted/Unmounted <<<<");
        getAttrs(["mounted", "mount_strength", "mount_carry"], function(values) {
            const   mounted = parseInt(values["mounted"],10)||0,
                    mount_strength = parseInt(values["mount_strength"],10)||0,
                    mount_carry = parseInt(values["mount_carry"],10)||0;
            if(mounted===1) {
                tempMountCarry = Math.max((mount_strength)*2)
            }
            else {
                tempMountCarry = Math.max((mount_strength)*4)
            }
            setAttrs({
                "mount_carry": tempMountCarry,
            });
        });
    });

</script>

<!--
------------- i18n-tags generated with ACSI V0.32 (Automated Character Sheet Internationalizer)-------------
	ACSI author: https://github.com/Anduh
	ACSI Sourcecode: https://github.com/Anduh/acsi
-->

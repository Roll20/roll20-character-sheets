{% from "box-bar.html" import boxBar, boxBarWithLimit %}
{% from "input.html" import numberInput %}
{% from "checkbox.html" import checkbox %}
{% from "utils.html" import dummyNumber %}

<!-- STATE -->
<div class="sheet-state-container">
    <!-- EGO -->
    <div>
        {{ boxBarWithLimit(name='ego',
                           minPoints=0,
                           maxPoints=2*2*6) }}
        <div data-i18n="state-ego"
             title="@{ego}">ego</div>
    </div>

    <!-- SPORE INFESTATION -->
    <div style="position: relative">{# so the toggle button can positioned #}
        {{ checkbox('spore_infestation_edit',
                    class='sheet-icon-checkbox-outside sheet-edit-checkbox',
                    checked=false) -}}
        <span class="sheet-box-bar-container sheet-hide-while-compact">
            {{ boxBar(name='spore_infestation_permanent',
                      title='permanent',
                      titleTranslation='state-spore-infestation-permanent',
                      minPoints=0,
                      maxPoints=2*6,
                      class='sheet-crossed-boxes sheet-read-only-box-bar sheet-show-only-checked-boxes') -}}
            {{ boxBar(name='spore_infestation_fill',
                      minPoints=0,
                      maxPoints=2*2*6,
                      class='sheet-read-only-box-bar sheet-show-only-checked-boxes') -}}
            {{ boxBar(name='spore_infestation_excess',
                      title='excess',
                      titleTranslation='state-spore-infestation-excess',
                      minPoints=0,
                      maxPoints=2*2*6,
                      class='sheet-highlighted-boxes sheet-read-only-box-bar sheet-show-only-checked-boxes') -}}
            {{ boxBar(name='spore_infestation_free',
                      minPoints=0,
                      maxPoints=2*2*6,
                      class='sheet-empty-boxes sheet-read-only-box-bar sheet-show-only-checked-boxes') -}}
            {{ boxBar(name='spore_infestation_disabled',
                      minPoints=0,
                      maxPoints=2*2*6,
                      class='sheet-faded-boxes sheet-read-only-box-bar sheet-show-only-checked-boxes') }}
        </span>
        <span class="sheet-show-while-compact sheet-user-text">
            <input type="hidden"
                   name="attr_spore_infestation_excess"/>{#
          #}<span name="attr_spore_infestation">{{ dummyNumber() }}</span>{#
          #}<span class="sheet-fraction-slash"></span>{#
          #}<span name="attr_spore_infestation_max">{{ dummyNumber() }}</span>
        </span>
        <span class="sheet-show-while-editing">
            <span data-i18n="state-spore-infestation-permanent">permanent</span>{#
          #}<span class="sheet-colon"></span>{#
          #}{{ numberInput(attributeName='spore_infestation_permanent',
                           min=0,
                           editable=true) }}
        </span>
        <span class="sheet-show-while-editing">
            <span data-i18n="state-spore-infestation-temporary">temporary</span>{#
          #}<span class="sheet-colon"></span>{#
          #}{{ numberInput(attributeName='spore_infestation_temporary',
                           min=0,
                           editable=true) }}
        </span>
        <div data-i18n="state-spore-infestation"
             title="@{spore_infestation}">spore infestation</div>
    </div>

    <!-- FLESH WOUNDS -->
    <div>
        {{ boxBarWithLimit(name='flesh_wounds',
                           minPoints=0,
                           maxPoints=2*2*6,
                           boxBarClass='sheet-highlighted-boxes') }}
        <div data-i18n="state-flesh-wounds"
             title="@{flesh_wounds}">flesh wounds</div>
    </div>

    <!-- TRAUMA -->
    <div>
        {{ boxBarWithLimit(name='trauma',
                           minPoints=0,
                           maxPoints=2*6,
                           boxBarClass='sheet-highlighted-boxes') }}
        <div data-i18n="state-trauma"
             title="@{trauma}">trauma</div>
   </div>
</div>

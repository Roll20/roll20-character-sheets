
<input name="attr_version" type="hidden" value="1.0"/>
<input name="attr_page" type="hidden" value="personnage"/>
<main>
  <nav class="menu" id="menu">
    <label class="navRadio">
      <input name="attr_page" type="radio" value="personnage" attributes.checked="attributes.checked"/><span title="Personnage"></span>
    </label>
    <label class="navRadio">
      <input name="attr_page" type="radio" value="competences" attributes.checked="attributes.checked"/><span title="Compétences"></span>
    </label>
    <label class="navRadio">
      <input name="attr_page" type="radio" value="escrime" attributes.checked="attributes.checked"/><span title="Escrime"></span>
    </label>
    <label class="navRadio">
      <input name="attr_page" type="radio" value="ressources" attributes.checked="attributes.checked"/><span title="Ressources &amp; contacts"></span>
    </label>
  </nav>
  <div>
    <div id="swordbar">
      <label class="healthboxwrapper">
        <div class="nstate healthbox">
          <input name="attr_health_1" type="hidden" value=""/>
          <button name="act_health_1_cycle" type="action" value=""></button><span class="nstateopt health_ok"> </span><span class="nstateopt health_tenacity">⟋</span><span class="nstateopt health_wound">X</span><span class="nstateopt health_longTenacity">✱</span>
        </div><span>V</span>
      </label>
      <label class="healthboxwrapper">
        <div class="nstate healthbox">
          <input name="attr_health_2" type="hidden" value=""/>
          <button name="act_health_2_cycle" type="action" value=""></button><span class="nstateopt health_ok"> </span><span class="nstateopt health_tenacity">⟋</span><span class="nstateopt health_wound">X</span><span class="nstateopt health_longTenacity">✱</span>
        </div>
      </label>
      <label class="healthboxwrapper">
        <div class="nstate healthbox">
          <input name="attr_health_3" type="hidden" value=""/>
          <button name="act_health_3_cycle" type="action" value=""></button><span class="nstateopt health_ok"> </span><span class="nstateopt health_tenacity">⟋</span><span class="nstateopt health_wound">X</span><span class="nstateopt health_longTenacity">✱</span>
        </div>
      </label>
      <label class="healthboxwrapper">
        <div class="nstate healthbox">
          <input name="attr_health_4" type="hidden" value=""/>
          <button name="act_health_4_cycle" type="action" value=""></button><span class="nstateopt health_ok"> </span><span class="nstateopt health_tenacity">⟋</span><span class="nstateopt health_wound">X</span><span class="nstateopt health_longTenacity">✱</span>
        </div>
      </label>
      <label class="healthboxwrapper">
        <div class="nstate healthbox">
          <input name="attr_health_5" type="hidden" value=""/>
          <button name="act_health_5_cycle" type="action" value=""></button><span class="nstateopt health_ok"> </span><span class="nstateopt health_tenacity">⟋</span><span class="nstateopt health_wound">X</span><span class="nstateopt health_longTenacity">✱</span>
        </div>
      </label>
      <label class="healthboxwrapper">
        <div class="nstate healthbox">
          <input name="attr_health_6" type="hidden" value=""/>
          <button name="act_health_6_cycle" type="action" value=""></button><span class="nstateopt health_ok"> </span><span class="nstateopt health_tenacity">⟋</span><span class="nstateopt health_wound">X</span><span class="nstateopt health_longTenacity">✱</span>
        </div>
      </label>
      <label class="healthboxwrapper">
        <div class="nstate healthbox">
          <input name="attr_health_7" type="hidden" value=""/>
          <button name="act_health_7_cycle" type="action" value=""></button><span class="nstateopt health_ok"> </span><span class="nstateopt health_tenacity">⟋</span><span class="nstateopt health_wound">X</span><span class="nstateopt health_longTenacity">✱</span>
        </div>
      </label>
      <label class="healthboxwrapper">
        <div class="nstate healthbox">
          <input name="attr_health_8" type="hidden" value=""/>
          <button name="act_health_8_cycle" type="action" value=""></button><span class="nstateopt health_ok"> </span><span class="nstateopt health_tenacity">⟋</span><span class="nstateopt health_wound">X</span><span class="nstateopt health_longTenacity">✱</span>
        </div><span>T</span>
      </label>
    </div>
    <section class="page" id="page-personnage">
      <div class="col col-2">
        <label class="textLabelled" for="name"><span>Nom</span>
          <input name="attr_nom" type="text" value=""/>
        </label>
        <label class="textLabelled"><span>Âge</span>
          <input name="attr_age" type="text" value=""/>
        </label>
        <label class="textLabelled"><span>Sexe</span>
          <input name="attr_sex" type="text" value=""/>
        </label>
      </div>
      <div class="col col-2">
        <label class="textLabelled pex" for="pex"><span>Points d’exp.</span>
          <input name="attr_pex" type="number" value="0"/>
        </label>
        <label class="profile"><span>Profil :</span>
          <select name="attr_profile-1">
            <option value="" selected="selected">Choisir un profil</option>
            <option class="optgroup" disabled="disabled">&nbsp;&nbsp;Roturiers</option>
            <option value="artisan">Artisan</option>
            <option value="aventurier">Aventurier</option>
            <option value="commercant">Commerçant</option>
            <option value="saltimbanque">Saltimbanque</option>
            <option value="valet">Valet</option>
            <option class="optgroup" disabled="disabled">&nbsp;&nbsp;Lettrés</option>
            <option value="artiste">Artiste</option>
            <option value="erudit">Érudit</option>
            <option value="medecin">Médecin</option>
            <option value="religieux">Religieux</option>
            <option value="savant">Savant</option>
            <option class="optgroup" disabled="disabled">&nbsp;&nbsp;Combattants</option>
            <option value="cavalier">Cavalier</option>
            <option value="finelame">Fine lame</option>
            <option value="forban">Forban</option>
            <option value="mousquetaire">Mousquetaire</option>
            <option value="officier">Officier</option>
            <option value="soldat">Soldat</option>
            <option class="optgroup" disabled="disabled">&nbsp;&nbsp;courtisan</option>
            <option value="conseiller">Conseiller</option>
            <option value="courtisan">Courtisan</option>
            <option value="diplomate">Diplomate</option>
            <option value="espion">Espion</option>
            <option value="libertin">Libertin</option>
            <option value="noble">Noble</option>
          </select>
        </label>
        <label class="profile"><span>Profil :</span>
          <select name="attr_profile-2">
            <option value="" selected="selected">Choisir un profil</option>
            <option class="optgroup" disabled="disabled">&nbsp;&nbsp;Roturiers</option>
            <option value="artisan">Artisan</option>
            <option value="aventurier">Aventurier</option>
            <option value="commercant">Commerçant</option>
            <option value="saltimbanque">Saltimbanque</option>
            <option value="valet">Valet</option>
            <option class="optgroup" disabled="disabled">&nbsp;&nbsp;Lettrés</option>
            <option value="artiste">Artiste</option>
            <option value="erudit">Érudit</option>
            <option value="medecin">Médecin</option>
            <option value="religieux">Religieux</option>
            <option value="savant">Savant</option>
            <option class="optgroup" disabled="disabled">&nbsp;&nbsp;Combattants</option>
            <option value="cavalier">Cavalier</option>
            <option value="finelame">Fine lame</option>
            <option value="forban">Forban</option>
            <option value="mousquetaire">Mousquetaire</option>
            <option value="officier">Officier</option>
            <option value="soldat">Soldat</option>
            <option class="optgroup" disabled="disabled">&nbsp;&nbsp;courtisan</option>
            <option value="conseiller">Conseiller</option>
            <option value="courtisan">Courtisan</option>
            <option value="diplomate">Diplomate</option>
            <option value="espion">Espion</option>
            <option value="libertin">Libertin</option>
            <option value="noble">Noble</option>
          </select>
        </label>
      </div>
      <div id="arcanes">
        <div class="blessedArcana col-2">
          <label><span>Arcane béni</span>
            <select name="attr_arcane1">
              <option value="-1"></option>
              <option value="0">0 - L’Astrologue en prière</option>
              <option value="1">1 - La Tisserande oubliée</option>
              <option value="2">2 - Le Voleur sans mémoire</option>
              <option value="3">3 - Le Jongleur indécis</option>
              <option value="4">4 - La Danseuse à l’épée</option>
              <option value="5">5 - La Sentinelle silencieuse</option>
              <option value="6">6 - L’Enlumineur aveugle</option>
              <option value="7">7 - Le Maître d’armes aux flambeaux</option>
              <option value="8">8 - La Vestale de pierre</option>
              <option value="9">9 - Le Pèlerin immobile</option>
              <option value="10">10 - L’Hérésiarque couronné</option>
              <option value="11">11 - Le Gentilhomme au corbeau</option>
              <option value="12">12 - L’Architecte des mondes</option>
              <option value="13">13 - La Courtisane amoureuse</option>
              <option value="14">14 - L’Assassin sans visage</option>
              <option value="15">15 - L’Horloger des chimères</option>
              <option value="16">16 - La Gardienne derrière le miroir</option>
              <option value="17">17 - La Magicienne sous le voile</option>
              <option value="18">18 - La Demoiselle en la tour</option>
              <option value="19">19 - L’Alchimiste des ombres</option>
              <option value="20">20 - Le Guerrier immortel</option>
              <option value="21">21 - Le Chevalier au dragon</option>
            </select>
          </label>
          <label><span>Arcane opposé</span>
            <select name="attr_arcane1_opp" readonly="readonly">
              <option value="-1"></option>
              <option value="0">0 - L’Astrologue en prière</option>
              <option value="1">1 - La Tisserande oubliée</option>
              <option value="2">2 - Le Voleur sans mémoire</option>
              <option value="3">3 - Le Jongleur indécis</option>
              <option value="4">4 - La Danseuse à l’épée</option>
              <option value="5">5 - La Sentinelle silencieuse</option>
              <option value="6">6 - L’Enlumineur aveugle</option>
              <option value="7">7 - Le Maître d’armes aux flambeaux</option>
              <option value="8">8 - La Vestale de pierre</option>
              <option value="9">9 - Le Pèlerin immobile</option>
              <option value="10">10 - L’Hérésiarque couronné</option>
              <option value="11">11 - Le Gentilhomme au corbeau</option>
              <option value="12">12 - L’Architecte des mondes</option>
              <option value="13">13 - La Courtisane amoureuse</option>
              <option value="14">14 - L’Assassin sans visage</option>
              <option value="15">15 - L’Horloger des chimères</option>
              <option value="16">16 - La Gardienne derrière le miroir</option>
              <option value="17">17 - La Magicienne sous le voile</option>
              <option value="18">18 - La Demoiselle en la tour</option>
              <option value="19">19 - L’Alchimiste des ombres</option>
              <option value="20">20 - Le Guerrier immortel</option>
              <option value="21">21 - Le Chevalier au dragon</option>
            </select>
          </label>
          <label class="textLabelled"><span>Marque</span>
            <input name="attr_arcane1_stigmata" type="text" value=""/>
          </label>
        </div>
        <div class="blessedArcana col-2">
          <label><span>Arcane béni</span>
            <select name="attr_arcane2">
              <option value="-1"></option>
              <option value="0">0 - L’Astrologue en prière</option>
              <option value="1">1 - La Tisserande oubliée</option>
              <option value="2">2 - Le Voleur sans mémoire</option>
              <option value="3">3 - Le Jongleur indécis</option>
              <option value="4">4 - La Danseuse à l’épée</option>
              <option value="5">5 - La Sentinelle silencieuse</option>
              <option value="6">6 - L’Enlumineur aveugle</option>
              <option value="7">7 - Le Maître d’armes aux flambeaux</option>
              <option value="8">8 - La Vestale de pierre</option>
              <option value="9">9 - Le Pèlerin immobile</option>
              <option value="10">10 - L’Hérésiarque couronné</option>
              <option value="11">11 - Le Gentilhomme au corbeau</option>
              <option value="12">12 - L’Architecte des mondes</option>
              <option value="13">13 - La Courtisane amoureuse</option>
              <option value="14">14 - L’Assassin sans visage</option>
              <option value="15">15 - L’Horloger des chimères</option>
              <option value="16">16 - La Gardienne derrière le miroir</option>
              <option value="17">17 - La Magicienne sous le voile</option>
              <option value="18">18 - La Demoiselle en la tour</option>
              <option value="19">19 - L’Alchimiste des ombres</option>
              <option value="20">20 - Le Guerrier immortel</option>
              <option value="21">21 - Le Chevalier au dragon</option>
            </select>
          </label>
          <label><span>Arcane opposé</span>
            <select name="attr_arcane2_opp" readonly="readonly">
              <option value="-1"></option>
              <option value="0">0 - L’Astrologue en prière</option>
              <option value="1">1 - La Tisserande oubliée</option>
              <option value="2">2 - Le Voleur sans mémoire</option>
              <option value="3">3 - Le Jongleur indécis</option>
              <option value="4">4 - La Danseuse à l’épée</option>
              <option value="5">5 - La Sentinelle silencieuse</option>
              <option value="6">6 - L’Enlumineur aveugle</option>
              <option value="7">7 - Le Maître d’armes aux flambeaux</option>
              <option value="8">8 - La Vestale de pierre</option>
              <option value="9">9 - Le Pèlerin immobile</option>
              <option value="10">10 - L’Hérésiarque couronné</option>
              <option value="11">11 - Le Gentilhomme au corbeau</option>
              <option value="12">12 - L’Architecte des mondes</option>
              <option value="13">13 - La Courtisane amoureuse</option>
              <option value="14">14 - L’Assassin sans visage</option>
              <option value="15">15 - L’Horloger des chimères</option>
              <option value="16">16 - La Gardienne derrière le miroir</option>
              <option value="17">17 - La Magicienne sous le voile</option>
              <option value="18">18 - La Demoiselle en la tour</option>
              <option value="19">19 - L’Alchimiste des ombres</option>
              <option value="20">20 - Le Guerrier immortel</option>
              <option value="21">21 - Le Chevalier au dragon</option>
            </select>
          </label>
          <label class="textLabelled"><span>Marque</span>
            <input name="attr_arcane2_stigmata" type="text" value=""/>
          </label>
        </div>
      </div>
      <div id="looking">
        <div class="col2">
          <h3 class="blue">Description</h3>
          <textarea name="attr_description"></textarea>
        </div>
        <div class="col2">
          <h3 class="blue">Habillement</h3>
          <textarea name="attr_clothing"></textarea>
        </div>
      </div>
    </section>
    <section class="page" id="page-competences">
      <div id="caracs">
        <div class="skillblock" id="griffe">
          <div class="carac">
            <h4 class="blue">Puissance
              <input name="attr_puissance" type="number" value="0"/>
            </h4>
            <div class="icon"></div>
            <div class="carac_used blue">
              <input class="displayTickbox" name="attr_puissance" type="hidden" value="0"/>
              <div class="fillLeft caracUsed">
                <input name="attr_puissance_used" type="hidden" value="0"/>
                <label>
                  <input name="attr_puissance_used" type="radio" value="0"/><span></span>
                </label>
                <label>
                  <input name="attr_puissance_used" type="radio" value="1"/><span></span>
                </label>
                <label>
                  <input name="attr_puissance_used" type="radio" value="2"/><span></span>
                </label>
                <label>
                  <input name="attr_puissance_used" type="radio" value="3"/><span></span>
                </label>
                <label>
                  <input name="attr_puissance_used" type="radio" value="4"/><span></span>
                </label>
              </div>
            </div>
          </div>
          <label class="skill"><span class="skillLabel">Athlétisme</span>
            <input name="attr_athletisme" type="number" value=""/>
            <input name="attr_athletisme_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Autorité</span>
            <input name="attr_autorite" type="number" value=""/>
            <input name="attr_autorite_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Bagarre</span>
            <input name="attr_bagarre" type="number" value=""/>
            <input name="attr_bagarre_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Équitation</span>
            <input name="attr_equitation" type="number" value=""/>
            <input name="attr_equitation_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Volonté</span>
            <input name="attr_volonte" type="number" value=""/>
            <input name="attr_volonte_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill">
            <input name="attr_sk_griffe_name" type="text" value=""/>
            <input name="attr_sk_griffe" type="number" value=""/>
            <input name="attr_sk_griffe_half" readonly="readonly" type="number" value=""/>
          </label>
        </div>
        <div class="skillblock" id="souffle">
          <div class="carac">
            <h4 class="blue">Vivacité
              <input name="attr_vivacite" type="number" value="0"/>
            </h4>
            <div class="icon"></div>
            <div class="carac_used blue">
              <input class="displayTickbox" name="attr_vivacite" type="hidden" value="0"/>
              <div class="fillLeft caracUsed">
                <input name="attr_vivacite_used" type="hidden" value="0"/>
                <label>
                  <input name="attr_vivacite_used" type="radio" value="0"/><span></span>
                </label>
                <label>
                  <input name="attr_vivacite_used" type="radio" value="1"/><span></span>
                </label>
                <label>
                  <input name="attr_vivacite_used" type="radio" value="2"/><span></span>
                </label>
                <label>
                  <input name="attr_vivacite_used" type="radio" value="3"/><span></span>
                </label>
                <label>
                  <input name="attr_vivacite_used" type="radio" value="4"/><span></span>
                </label>
              </div>
            </div>
          </div>
          <label class="skill"><span class="skillLabel">Création</span>
            <input name="attr_creation" type="number" value=""/>
            <input name="attr_creation_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Débrouille</span>
            <input name="attr_debrouille" type="number" value=""/>
            <input name="attr_debrouille_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Duperie</span>
            <input name="attr_duperie" type="number" value=""/>
            <input name="attr_duperie_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Furtivité</span>
            <input name="attr_furtivite" type="number" value=""/>
            <input name="attr_furtivite_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Vigilance</span>
            <input name="attr_vigilance" type="number" value=""/>
            <input name="attr_vigilance_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill">
            <input name="attr_sk_souffle_name" type="text" value=""/>
            <input name="attr_sk_souffle" type="number" value=""/>
            <input name="attr_sk_souffle_half" readonly="readonly" type="number" value=""/>
          </label>
        </div>
        <div class="skillblock" id="sang">
          <div class="carac">
            <h4 class="red">Galanterie
              <input name="attr_galanterie" type="number" value="0"/>
            </h4>
            <div class="icon"></div>
            <div class="carac_used red">
              <input class="displayTickbox" name="attr_galanterie" type="hidden" value="0"/>
              <div class="fillLeft caracUsed">
                <input name="attr_galanterie_used" type="hidden" value="0"/>
                <label>
                  <input name="attr_galanterie_used" type="radio" value="0"/><span></span>
                </label>
                <label>
                  <input name="attr_galanterie_used" type="radio" value="1"/><span></span>
                </label>
                <label>
                  <input name="attr_galanterie_used" type="radio" value="2"/><span></span>
                </label>
                <label>
                  <input name="attr_galanterie_used" type="radio" value="3"/><span></span>
                </label>
                <label>
                  <input name="attr_galanterie_used" type="radio" value="4"/><span></span>
                </label>
              </div>
            </div>
          </div>
          <label class="skill"><span class="skillLabel">Intrigue</span>
            <input name="attr_intrigue" type="number" value=""/>
            <input name="attr_intrigue_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Négoce</span>
            <input name="attr_negoce" type="number" value=""/>
            <input name="attr_negoce_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Persuasion</span>
            <input name="attr_persuasion" type="number" value=""/>
            <input name="attr_persuasion_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Séduction</span>
            <input name="attr_seduction" type="number" value=""/>
            <input name="attr_seduction_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Stratégie</span>
            <input name="attr_strategie" type="number" value=""/>
            <input name="attr_strategie_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill">
            <input name="attr_sk_sang_name" type="text" value=""/>
            <input name="attr_sk_sang" type="number" value=""/>
            <input name="attr_sk_sang_half" readonly="readonly" type="number" value=""/>
          </label>
        </div>
        <div class="skillblock" id="ecaille">
          <div class="carac">
            <h4 class="red">Finesse
              <input name="attr_finesse" type="number" value="0"/>
            </h4>
            <div class="icon"></div>
            <div class="carac_used red">
              <input class="displayTickbox" name="attr_finesse" type="hidden" value="0"/>
              <div class="fillLeft caracUsed">
                <input name="attr_finesse_used" type="hidden" value="0"/>
                <label>
                  <input name="attr_finesse_used" type="radio" value="0"/><span></span>
                </label>
                <label>
                  <input name="attr_finesse_used" type="radio" value="1"/><span></span>
                </label>
                <label>
                  <input name="attr_finesse_used" type="radio" value="2"/><span></span>
                </label>
                <label>
                  <input name="attr_finesse_used" type="radio" value="3"/><span></span>
                </label>
                <label>
                  <input name="attr_finesse_used" type="radio" value="4"/><span></span>
                </label>
              </div>
            </div>
          </div>
          <label class="skill"><span class="skillLabel">Érudition</span>
            <input name="attr_erudition" type="number" value=""/>
            <input name="attr_erudition_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Investigation</span>
            <input name="attr_investigation" type="number" value=""/>
            <input name="attr_investigation_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Médecine</span>
            <input name="attr_medecine" type="number" value=""/>
            <input name="attr_medecine_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Technique</span>
            <input name="attr_technique" type="number" value=""/>
            <input name="attr_technique_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill"><span class="skillLabel">Tir</span>
            <input name="attr_tir" type="number" value=""/>
            <input name="attr_tir_half" readonly="readonly" type="number" value=""/>
          </label>
          <label class="skill">
            <input name="attr_sk_ecaille_name" type="text" value=""/>
            <input name="attr_sk_ecaille" type="number" value=""/>
            <input name="attr_sk_ecaille_half" readonly="readonly" type="number" value=""/>
          </label>
        </div>
      </div>
      <div id="freeskills">
        <div class="col col-2" id="escrime">
          <label class="skill headerskill">
            <h4 class="blue">Escrime</h4>
            <input name="attr_escrime" type="number" value="4"/>
          </label>
          <textarea name="attr_escrime_notes"></textarea>
        </div>
        <div class="col col-2" id="occultisme">
          <label class="skill headerskill">
            <h4 class="red">Occultisme</h4>
            <input name="attr_occultisme" type="number" value="0"/>
          </label>
          <textarea name="attr_occultisme_notes"></textarea>
        </div>
      </div>
    </section>
    <section class="page" id="page-escrime">
      <div class="col-2">
        <h4 class="blue">Armes</h4>
        <input name="attr_armes" type="text" value=""/>
        <h4>Feintes</h4>
        <fieldset class="repeating_feintes">
          <label>
            <input name="attr_expand" value="1" type="checkbox"/><span title=" "></span>
          </label>
          <input name="attr_name" type="text" value=""/>
          <input name="attr_expand" type="hidden" value=""/>
          <textarea name="attr_description"></textarea>
        </fieldset>
      </div>
      <div class="col-2">
        <h4 class="red">École</h4>
        <input name="attr_ecole" type="text" value=""/>
        <h4>Bottes</h4>
        <fieldset class="repeating_bottes">
          <label>
            <input name="attr_expand" value="1" type="checkbox"/><span title=" "></span>
          </label>
          <input name="attr_name" type="text" value=""/>
          <input name="attr_expand" type="hidden" value=""/>
          <textarea name="attr_description"></textarea>
        </fieldset>
      </div>
    </section>
    <section class="page" id="page-ressources">
      <div class="col col-2" id="inventory">
        <h4 class="blue">Ressources</h4>
        <div class="fillLeft">
          <input name="attr_resources" type="hidden" value="0"/>
          <label>
            <input name="attr_resources" type="radio" value="0"/><span></span>
          </label>
          <label>
            <input name="attr_resources" type="radio" value="1"/><span></span>
          </label>
          <label>
            <input name="attr_resources" type="radio" value="2"/><span></span>
          </label>
          <label>
            <input name="attr_resources" type="radio" value="3"/><span></span>
          </label>
          <label>
            <input name="attr_resources" type="radio" value="4"/><span></span>
          </label>
          <label>
            <input name="attr_resources" type="radio" value="5"/><span></span>
          </label>
          <label>
            <input name="attr_resources" type="radio" value="6"/><span></span>
          </label>
          <label>
            <input name="attr_resources" type="radio" value="7"/><span></span>
          </label>
          <label>
            <input name="attr_resources" type="radio" value="8"/><span></span>
          </label>
        </div>
        <h4 class="red">Possessions</h4>
        <textarea name="attr_inventory"></textarea>
      </div>
      <div class="col col-2" id="contacts">
        <h4 class="red">Contacts</h4>
        <div class="fillLeft">
          <input name="attr_concacts" type="hidden" value="0"/>
          <label>
            <input name="attr_concacts" type="radio" value="0"/><span></span>
          </label>
          <label>
            <input name="attr_concacts" type="radio" value="1"/><span></span>
          </label>
          <label>
            <input name="attr_concacts" type="radio" value="2"/><span></span>
          </label>
          <label>
            <input name="attr_concacts" type="radio" value="3"/><span></span>
          </label>
          <label>
            <input name="attr_concacts" type="radio" value="4"/><span></span>
          </label>
          <label>
            <input name="attr_concacts" type="radio" value="5"/><span></span>
          </label>
          <label>
            <input name="attr_concacts" type="radio" value="6"/><span></span>
          </label>
          <label>
            <input name="attr_concacts" type="radio" value="7"/><span></span>
          </label>
          <label>
            <input name="attr_concacts" type="radio" value="8"/><span></span>
          </label>
        </div>
        <h4 class="blue">Relations<span>Niveau</span></h4>
        <fieldset class="repeating_relations">
          <label>
            <input name="attr_expand" value="1" type="checkbox"/><span title=" "></span>
          </label>
          <input name="attr_name" type="text" value=""/>
          <input name="attr_level" type="number" value=""/>
          <input name="attr_expand" type="hidden" value=""/>
          <textarea name="attr_description"></textarea>
        </fieldset>
      </div>
    </section>
  </div>
</main>
<script type="text/worker">
  
/**
 * This functon make cycle a n-state widget over its possible values
 * 
 * @param {string} attrName The identifier of the attribute you want to cycle on
 * @param {int} maxVal The max value the attribute could take
 */
var cycleBoxState = (attrName, maxVal) => {
    getAttrs([attrName], v => {
        const curValue = parseInt(v[attrName]) || 0;
        let data = {}
        data[attrName] = (curValue + 1) % maxVal
        setAttrs(data)
    })
}
/**
 * Triggers the change of state of the health boxes
 */
on('clicked:health_1_cycle clicked:health_2_cycle clicked:health_3_cycle clicked:health_4_cycle clicked:health_5_cycle clicked:health_6_cycle clicked:health_7_cycle clicked:health_8_cycle', (ev) => {
    let srcName = ev.htmlAttributes.name.replace('act_', '').replace('_cycle', '')
    cycleBoxState(srcName, 4);
})
/**
 * Updates the half value of a skill for display
 * 
 * @param {string} attrName The r20 attribute name of the skill
 */
var updateHalfSkill = (attrName) => {
    getAttrs([attrName], v => {
        let skillVal = parseInt(v[attrName])||0
        let data = {}
        data[`${attrName}_half`] = Math.floor(skillVal / 2)
        setAttrs(data)
    })
}
/**
 * Updates a cursed arcana according to a selected blessed arcana
 * 
 * @param {string} attrName The r20 attribute name
 */
var setCursedArcana = attrName => {
    getAttrs([attrName], v => {
        let selected = parseInt(v[attrName])
        if (selected === false || selected === -1) {
            selected = undefined
        }
        
        let data = {}
        data[`${attrName}_opp`] = (selected === undefined) ? -1 : (21 - selected);

        setAttrs(data)
    })
}
on('change:arcane1 change:arcane2', ev => {
    let attrName = ev['sourceAttribute']
    setCursedArcana(attrName)
})
/**
 * Updates half-skills on change
 */
on('change:athletisme change:autorite change:bagarre change:equitation change:volonte change:sk_griffe change:creation change:debrouille change:duperie change:furtivite change:vigilance change:sk_souffle change:intrigue change:negoce change:persuasion change:seduction change:strategie change:sk_sang change:erudition change:investigation change:medecine change:technique change:tir change:sk_ecaille', ev => {
    updateHalfSkill(ev.sourceAttribute)
})
/**
 * Makes some initializations !
 */
on('sheet:opened', ev => {
    // inits half skills for claw group
    updateHalfSkill('athletisme')
    updateHalfSkill('autorite')
    updateHalfSkill('bagarre')
    updateHalfSkill('equitation')
    updateHalfSkill('volonte')
    updateHalfSkill('sk_griffe')
    // inits half skills for blow group
    updateHalfSkill('creation')
    updateHalfSkill('debrouille')
    updateHalfSkill('duperie')
    updateHalfSkill('furtivite')
    updateHalfSkill('vigilance')
    updateHalfSkill('sk_souffle')
    // inits half skills for claw group
    updateHalfSkill('intrigue')
    updateHalfSkill('negoce')
    updateHalfSkill('persuasion')
    updateHalfSkill('seduction')
    updateHalfSkill('strategie')
    updateHalfSkill('sk_sang')
    // inits half skills for claw group
    updateHalfSkill('erudition')
    updateHalfSkill('investigation')
    updateHalfSkill('medecine')
    updateHalfSkill('technique')
    updateHalfSkill('tir')
    updateHalfSkill('sk_ecaille')

    setCursedArcana('arcane1')
    setCursedArcana('arcane2')

    // Here make the version magic
    setAttrs({
        'version': 1.0
    })
})
</script>
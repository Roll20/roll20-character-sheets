<div class="sheet-cale">&nbsp;</div>
<input type="radio" name="attr_tab1" class="sheet-tab sheet-tab1" value="1" title="Caracs" checked="checked"/><span
        title="Caracs"></span>
<input type="radio" name="attr_tab1" class="sheet-tab sheet-tab2" value="2" title="Traits"/><span title="Traits"></span>
<input type="radio" name="attr_tab1" class="sheet-tab sheet-tab3" value="3" title="Compétences"/><span
        title="Compétences"></span>
<input type="radio" name="attr_tab1" class="sheet-tab sheet-tab4" value="4" title="Gens"/><span title="Gens"></span>
<input type="radio" name="attr_tab1" class="sheet-tab sheet-tab5" value="5" title="Domaine"/><span
        title="Domaine"></span>
<div class="sheet-tab-content sheet-tab1">
    <div class="sheet-header">
        <div class="sheet-inline-block sheet-logo">
            <!--            image online url : https://i.imgur.com/7PIdcSW.jpg -->
            <img class="sheet-logo" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Pendragon-french/Images/logo-pendragon-52-300.jpg"/>
        </div>
        <div class="sheet-inline-block sheet-header-right">
            <div class="sheet-header-line">
                <div class="sheet-h2-width"><h3 class="sheet-inline">Blason</h3></div>
                <div class="sheet-inline"><textarea type="text" name="attr_blason"
                                                    placeholder="description héraldique du blason"/></textarea> </div>
            </div>
            <div class="sheet-header-line">
                <div class="sheet-h2-width"><h3 class="sheet-inline">Devise</h3></div>
                <div class="sheet-inline"><textarea type="text" name="attr_devise"
                                                    placeholder="devise du personnage ou de sa famille"/></textarea>
                </div>
            </div>
        </div>
    </div>
    <div class="sheet-3colrow">
        <div class="sheet-col1">
            <p>
                <label class='sheet-t1c1'>Nom</label><input class="sheet-big sheet-inline sheet-t1c1" type="text"
                                                            name="attr_MONNOM"/><br/>
                <label class='sheet-t1c1'>Culture</label><input class="sheet-long sheet-t1c1" type="text"
                                                                name="attr_culture"/><br/>
                <label class='sheet-t1c1'>Religion</label><select class="sheet-long sheet-t1c1" name="attr_religion">
                <option value="1">païenne</option>
                <option value="2">chrétienne romaine</option>
                <option value="3">chrétienne bretonne</option>
                <option value="4">chrétienne arienne</option>
                <option value="5">saxonne</option>
                <option value="6">picte</option>
            </select><br/>

                <input type="hidden" name="attr_debug" value="dyn" readonly/>
                <!-- religious bonus, values > 0 only if right religion selected !-->
                <!-- PAGAN-->
                <input type="hidden" name="attr_BR-Pa-formule" disabled="disabled"
                       value="(floor(@{TLux}/16)*floor(@{TEne}/16)*floor(@{TGen}/16)*floor(@{TSin}/16)*floor(@{TFie}/16)*floor(@{religion}/1)*floor(1/@{religion}))"/>

                <!-- Christian Roman-->
                <input type="hidden" name="attr_BR-Ro-formule" disabled="disabled"
                       value="(floor(@{TCha}/16)*floor(@{TCle}/16)*floor(@{TMis}/16)*floor(@{TMod}/16)*floor(@{TSob}/16)*floor(@{religion}/2)*floor(2/@{religion}))"/>

                <!-- Christian British-->
                <input type="hidden" name="attr_BR-Br-formule" disabled="disabled"
                       value="(floor(@{TCha}/16)*floor(@{TEne}/16)*floor(@{TGen}/16)*floor(@{TMod}/16)*floor(@{TSob}/16)*floor(@{religion}/3)*floor(3/@{religion}))"/>

                <!-- Christian Arian-->
                <input type="hidden" name="attr_BR-Ar-formule" disabled="disabled"
                       value="(floor(@{TCha}/16)*floor(@{TSin}/16)*floor(@{TJus}/16)*floor(@{TMis}/16)*floor(@{TSob}/16)*floor(@{religion}/4)*floor(4/@{religion}))"/>

                <!-- Pagan germanic = saxons-->
                <input type="hidden" name="attr_BR-Sa-formule" disabled="disabled"
                       value="(floor(@{TGen}/16)*floor(@{TFie}/16)*floor(@{TPra}/16)*floor(@{TImp}/16)*floor(@{TBon}/16)*floor(@{religion}/5)*floor(5/@{religion}))"/>
                <!--                <input type="hidden" name="attr_BR-Sa" disabled="disabled" value="(@{BR-Sa-formule}*1)"/>-->

                <!-- Heathen = Pictes-->
                <input type="hidden" name="attr_BR-Pi-formule" disabled="disabled"
                       value="(floor(@{TRan}/16)*floor(@{TSin}/16)*floor(@{TArb}/16)*floor(@{TFie}/16)*floor(@{TPra}/16)*floor(@{religion}/6)*floor(6/@{religion}))"/>

                <input type="hidden" name="attr_BR-recup" value="0" readonly/>
                <input type="hidden" name="attr_BR-PV" value="0" readonly/>
                <input type="hidden" name="attr_BR-degats" value="0" readonly/>
                <input type="hidden" name="attr_BR-d6dom" value="0" readonly/>
                <input type="hidden" name="attr_BR-mvt" value="0" readonly/>

                <label class='sheet-t1c1'>Age</label><input type="number" name="attr_age" class="sheet-carac"
                                                            value="21"/><span class="sheet-t1c1"> ans</span><br/>
                <label class='sheet-t1c1'>Statut</label><input class="sheet-long sheet-t1c1" type="text"
                                                               name="attr_statut"
                                                               value="chevalier"/><br/>
                <label class='sheet-t1c1'>Seigneur</label><input class="sheet-long sheet-t1c1" type="text"
                                                                 name="attr_seigneur"/><br/>
                <label class='sheet-t1c1'>Domaine</label><input class="sheet-long sheet-t1c1" type="text"
                                                                name="attr_domaine"/>
            </p>

        </div>

        <div class="sheet-col2">
            <div class="center">

                <h2>Gloire</h2>
                <input class="sheet-big sheet-t1c2-big" type="number" name="attr_gloire"/>
            </div>
            <p>
                <label class="sheet-t1c2">Ce scénario</label><input class="sheet-t1c2" type="number" name="attr_SG"/>
            </p>
            <p>
                <label class="sheet-t1c3">Gains Annuels</label>
            </p>
            <label class="sheet-t1c2">Traits</label><input class="sheet-t1c2" type="number" name="attr_AGTraits"
                                                           value="0"/><br/>
            <label class="sheet-t1c2">Chevalerie</label><input class="sheet-t1c2" type="number" name="attr_AGChevalry"
                                                               value="0"/><br/>
            <label class="sheet-t1c2">Possessions</label><input class="sheet-t1c2" type="number" name="attr_AGPos"
                                                                value="0"/><br/>
            <label class="sheet-t1c2">Passions</label><input class="sheet-t1c2" type="number" name="attr_AGPas"
                                                             value="0"/><br/>
            <label class="sheet-t1c2">Religion</label><input class="sheet-t1c2" type="number" name="attr_AGRel"
                                                             value="0"/><br/>
            <label class="sheet-t1c2">Total</label><input class="sheet-t1c2" type="text" name="attr_AGTotal"
                                                          value="(@{AGTraits}+@{AGChevalry}+@{AGPos}+@{AGPas}+@{AGRel})"
                                                          disabled="true"/><br/>
        </div>

        <div class="sheet-col3">
            <div class="center">

                <h2>PV actuels</h2>
                <div>
                    <input
                            class="sheet-big sheet-t1c3-big sheet-t1c2" type="text" name="attr_PV-actuels"
                            value="@{PV}-@{W1}-@{W2}-@{W3}-@{W4}-@{W5}-@{W6}-@{W7}-@{W8}-@{W9}}-@{W10}-@{W11}-@{W12}"
                            disabled="true"/>
                    <label class="sheet-big">/</label><input class="sheet-big sheet-t1c3-big sheet-t1c2" type="text"
                                                             name="attr_PV"
                                                             value="(@{CON}+@{TAI}+@{BR-PV}*@{flag-bonus})"
                                                             disabled="true"/>

                </div>
            </div>
            <p>
                <label class="sheet-t1c3">Inconscience</label><input style='display:inline;' type="text" name="attr_INC"
                                                                     class="sheet-carac3" value="round((@{PV})/4)"
                                                                     disabled="true"/>
            </p>

            <p><label class="sheet-t1c3 sheet-concat">Blessures (majeure >=</label> <input
                    class="sheet-t1c3 sheet-t1c3-medium" type="text"
                    name="attr_MW"
                    value="@{CON} "
                    disabled="true"/><label
                    class="sheet-t1c3">)</label>
            <table style="width: 100%;">
                <tbody>
                <tr>
                    <td><input type="number" name="attr_W1" value="0"/><label
                            class="sheet-t1c3-short">ps</label><input
                            class="sheet-t1c3" type='checkbox' name='attr_CB-w1' value='1'/></td>
                    <td><input type="number" name="attr_W2" value="0"/><label
                            class="sheet-t1c3-short">ps</label><input
                            class="sheet-t1c3" type='checkbox' name='attr_CB-w2' value='1'/></td>
                    <td><input type="number" name="attr_W3" value="0"/><label
                            class="sheet-t1c3-short">ps</label><input
                            class="sheet-t1c3" type='checkbox' name='attr_CB-w3' value='1'/></td>
                </tr>
                <tr>
                    <td><input type="number" name="attr_W4" value="0"/><label
                            class="sheet-t1c3-short">ps</label><input
                            class="sheet-t1c3" type='checkbox' name='attr_CB-w4' value='1'/></td>
                    <td><input type="number" name="attr_W5" value="0"/><label
                            class="sheet-t1c3-short">ps</label><input
                            class="sheet-t1c3" type='checkbox' name='attr_CB-w5' value='1'/></td>
                    <td><input type="number" name="attr_W6" value="0"/><label
                            class="sheet-t1c3-short">ps</label><input
                            class="sheet-t1c3" type='checkbox' name='attr_CB-w6' value='1'/></td>
                </tr>
                <tr>
                    <td><input type="number" name="attr_W7" value="0"/><label
                            class="sheet-t1c3-short">ps</label><input
                            class="sheet-t1c3" type='checkbox' name='attr_CB-w7' value='1'/></td>
                    <td><input type="number" name="attr_W8" value="0"/><label
                            class="sheet-t1c3-short">ps</label><input
                            class="sheet-t1c3" type='checkbox' name='attr_CB-w8' value='1'/></td>
                    <td><input type="number" name="attr_W9" value="0"/><label
                            class="sheet-t1c3-short">ps</label><input
                            class="sheet-t1c3" type='checkbox' name='attr_CB-w9' value='1'/></td>
                </tr>
                <tr>
                    <td><input type="number" name="attr_W10" value="0"/><label
                            class="sheet-t1c3-short">ps</label><input
                            class="sheet-t1c3" type='checkbox' name='attr_CB-w10' value='1'/></td>
                    <td><input type="number" name="attr_W11" value="0"/><label
                            class="sheet-t1c3-short">ps</label><input
                            class="sheet-t1c3" type='checkbox' name='attr_CB-w11' value='1'/></td>
                    <td><input type="number" name="attr_W12" value="0"/><label
                            class="sheet-t1c3-short">ps</label><input
                            class="sheet-t1c3" type='checkbox' name='attr_CB-w12' value='1'/></td>
                </tr>
                </tbody>
            </table>
            <p><label style='display:inline '>Chirurgie nécessaire</label>
                <input class="sheet-t1c3" type='checkbox'
                       name='attr_CB-chirurgie' value='1'/>
        </div>
    </div>
    <hr/>
    <div class="sheet-2colrow">
        <div class="sheet-col">
            <h2 style="margin-bottom: 10px;">Caractéristiques</h2>

            <p><label style='display:inline-block;  width:120px;'>TAILLE</label><input style='display:inline;'
                                                                                       type="number" name="attr_TAI"
                                                                                       class="sheet-carac2" value="10"/>
                </button>
                <button class='sheet-dice-button' type='roll' name='roll_TestTAI'
                        value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= caractéristique}} {{carac_name= TAILLE}}{{carac_value=[[@{TAI}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TAI}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TAI}+floor(?{modif|0})]],0}>21}*([[@{TAI}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TAI},0}>21}*(20-{{floor(?{modif|0})+@{TAI},0}>21}*(@{TAI}+floor(?{modif|0})-20))+{{@{TAI}+floor(?{modif|0}),30}<20}*(@{TAI}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TAI}+floor(?{modif|0}),0}>1)*(@{TAI}+floor(?{modif|0}))]]cs>[[(40-[[@{TAI}]]-1*floor(?{modif|0})+100*(1-{{[[@{TAI}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TAI}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TAI}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TAI}+floor(?{modif|0})]],0}>21}*([[@{TAI}+floor(?{modif|0})]]-20)]]]]}}'></button>
                <br/>
                <label style='display:inline-block;  width:120px; '>DEXTERITE</label><input style='display:inline;'
                                                                                            type="number"
                                                                                            name="attr_DEX"
                                                                                            class="sheet-carac2"
                                                                                            value="10"/>
                <button class='sheet-dice-button' type='roll' name='roll_TestDEX'
                        value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= caractéristique}} {{carac_name= DEXTERITE}}{{carac_value=[[@{DEX}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{DEX}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{DEX}+floor(?{modif|0})]],0}>21}*([[@{DEX}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{DEX},0}>21}*(20-{{floor(?{modif|0})+@{DEX},0}>21}*(@{DEX}+floor(?{modif|0})-20))+{{@{DEX}+floor(?{modif|0}),30}<20}*(@{DEX}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{DEX}+floor(?{modif|0}),0}>1)*(@{DEX}+floor(?{modif|0}))]]cs>[[(40-[[@{DEX}]]-1*floor(?{modif|0})+100*(1-{{[[@{DEX}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{DEX}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{DEX}+floor(?{modif|0}),0}>20}]]+[[{{[[@{DEX}+floor(?{modif|0})]],0}>21}*([[@{DEX}+floor(?{modif|0})]]-20)]]]]}}'></button>
                <br/>
                <label style='display:inline-block;  width:120px;'>FORCE</label><input style='display:inline;'
                                                                                       type="number" name="attr_FOR"
                                                                                       class="sheet-carac2" value="10"/>
                <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                        value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= caractéristique}} {{carac_name= FORCE}}{{carac_value=[[@{FOR}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{FOR}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{FOR}+floor(?{modif|0})]],0}>21}*([[@{FOR}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{FOR},0}>21}*(20-{{floor(?{modif|0})+@{FOR},0}>21}*(@{FOR}+floor(?{modif|0})-20))+{{@{FOR}+floor(?{modif|0}),30}<20}*(@{FOR}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{FOR}+floor(?{modif|0}),0}>1)*(@{FOR}+floor(?{modif|0}))]]cs>[[(40-[[@{FOR}]]-1*floor(?{modif|0})+100*(1-{{[[@{FOR}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{FOR}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{FOR}+floor(?{modif|0}),0}>20}]]+[[{{[[@{FOR}+floor(?{modif|0})]],0}>21}*([[@{FOR}+floor(?{modif|0})]]-20)]]]]}}'></button>
                <br/>
                <label style='display:inline-block;  width:120px;'>CONSTITUTION</label><input style='display:inline;'
                                                                                              type="number"
                                                                                              name="attr_CON"
                                                                                              class="sheet-carac2"
                                                                                              value="10"/>
                <button class='sheet-dice-button' type='roll' name='roll_TestCON'
                        value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= caractéristique}} {{carac_name= CONSTITUTION}}{{carac_value=[[@{CON}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{CON}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{CON}+floor(?{modif|0})]],0}>21}*([[@{CON}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{CON},0}>21}*(20-{{floor(?{modif|0})+@{CON},0}>21}*(@{CON}+floor(?{modif|0})-20))+{{@{CON}+floor(?{modif|0}),30}<20}*(@{CON}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{CON}+floor(?{modif|0}),0}>1)*(@{CON}+floor(?{modif|0}))]]cs>[[(40-[[@{CON}]]-1*floor(?{modif|0})+100*(1-{{[[@{CON}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{CON}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{CON}+floor(?{modif|0}),0}>20}]]+[[{{[[@{CON}+floor(?{modif|0})]],0}>21}*([[@{CON}+floor(?{modif|0})]]-20)]]]]}}'></button>
                <br/>
                <label style='display:inline-block;  width:120px;'>APPARENCE</label><input style='display:inline;'
                                                                                           type="number" name="attr_APP"
                                                                                           class="sheet-carac2"
                                                                                           value="10"/>
                <button class='sheet-dice-button' type='roll' name='roll_TestAPP'
                        value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= caractéristique}} {{carac_name= APPARENCE}}{{carac_value=[[@{APP}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{APP}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{APP}+floor(?{modif|0})]],0}>21}*([[@{APP}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{APP},0}>21}*(20-{{floor(?{modif|0})+@{APP},0}>21}*(@{APP}+floor(?{modif|0})-20))+{{@{APP}+floor(?{modif|0}),30}<20}*(@{APP}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{APP}+floor(?{modif|0}),0}>1)*(@{APP}+floor(?{modif|0}))]]cs>[[(40-[[@{APP}]]-1*floor(?{modif|0})+100*(1-{{[[@{APP}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{APP}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{APP}+floor(?{modif|0}),0}>20}]]+[[{{[[@{APP}+floor(?{modif|0})]],0}>21}*([[@{APP}+floor(?{modif|0})]]-20)]]]]}}'></button>
                <br/>
            </p>
            <h3 class="sheet-h3-black">Caractéristiques secondaires</h3>
            <!--            <input type="hidden" name="attr_DEG-dice" value="((@{FOR} + @{TAI}) / 6)" disabled="true"/>-->
            <label style='display:inline-block;  width:120px;'>DEGATS</label><input type="text" name="attr_DEG"
                                                                                    class="sheet-carac3"
                                                                                    value="(round((@{FOR}+@{TAI})/6)+@{BR-d6dom}*@{flag-bonus})"
                                                                                    disabled="true"/>
            <button class='sheet-dice-button' type='roll' name='roll_TestDegats'
                    value='&{template:pendragon-degats} {{perso=@{MONNOM}}} {{nbdes= [[@{DEG}]] }} {{bonus= [[@{BR-degats}*@{flag-bonus}]]}} {{roll= [[[[@{DEG}]]d6+[[@{BR-degats}*@{flag-bonus}]]]]}}'></button>

            <label class="sheet-concat">crit.</label>
            <button class='sheet-dice-button' type='roll' name='roll_TestDegatsCrit'
                    value='&{template:pendragon-degats} {{perso=@{MONNOM}}} {{critique= oui}}{{nbdes= [[@{DEG}*2]] }} {{bonus= [[@{BR-degats}*@{flag-bonus}]]}} {{roll= [[[[@{DEG}*2]]d6+[[@{BR-degats}*@{flag-bonus}]]]]}}'></button>

            <br/>
            <label style='display:inline-block;  width:120px;'>MOUVEMENT</label><input
                type="text" name="attr_MOV"
                class="sheet-carac3"
                value="round((@{FOR}+@{DEX})/10)+@{BR-mvt}*@{flag-bonus}"
                disabled="true"/><br/>
            <label style='display:inline-block;  width:120px;'>GUERISON</label><input type="text" name="attr_GUE"
                                                                                      class="sheet-carac3"
                                                                                      value="(round((@{CON}+@{FOR})/10)+@{BR-recup}*@{flag-bonus})"
                                                                                      disabled="true"/><br/>


        </div>

        <div class="sheet-col">
            <h2 style="margin-bottom: 10px;">Passions</h2>

            <label style='display:inline-block;  width:170px;'>HONNEUR</label>
            <input style='display:inline;' type="number" name="attr_HON" class="sheet-carac2" value="10"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox'
                   name='attr_CB-honneur' value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestHON'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= passion}} {{carac_name= HONNEUR}}{{carac_value=[[@{HON}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{HON}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{HON}+floor(?{modif|0})]],0}>21}*([[@{HON}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{HON},0}>21}*(20-{{floor(?{modif|0})+@{HON},0}>21}*(@{HON}+floor(?{modif|0})-20))+{{@{HON}+floor(?{modif|0}),30}<20}*(@{HON}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{HON}+floor(?{modif|0}),0}>1)*(@{HON}+floor(?{modif|0}))]]cs>[[(40-[[@{HON}]]-1*floor(?{modif|0})+100*(1-{{[[@{HON}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{HON}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{HON}+floor(?{modif|0}),0}>20}]]+[[{{[[@{HON}+floor(?{modif|0})]],0}>21}*([[@{HON}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>
            <label style='display:inline-block;  width:170px;'>LOYAUTE SEIGNEUR</label>
            <input style='display:inline;' type="number" name="attr_LOY" class="sheet-carac2" value="10"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox'
                   name='attr_CB-loyaute' value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestLOY'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= passion}} {{carac_name= LOYAUTE SEIGNEUR}}{{carac_value=[[@{LOY}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{LOY}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{LOY}+floor(?{modif|0})]],0}>21}*([[@{LOY}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{LOY},0}>21}*(20-{{floor(?{modif|0})+@{LOY},0}>21}*(@{LOY}+floor(?{modif|0})-20))+{{@{LOY}+floor(?{modif|0}),30}<20}*(@{LOY}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{LOY}+floor(?{modif|0}),0}>1)*(@{LOY}+floor(?{modif|0}))]]cs>[[(40-[[@{LOY}]]-1*floor(?{modif|0})+100*(1-{{[[@{LOY}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{LOY}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{LOY}+floor(?{modif|0}),0}>20}]]+[[{{[[@{LOY}+floor(?{modif|0})]],0}>21}*([[@{LOY}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>
            <label style='display:inline-block;  width:170px;'>HOSPITALITE</label>
            <input style='display:inline;' type="number" name="attr_HOS" class="sheet-carac2" value="10"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox'
                   name='attr_CB-hospitalite' value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestHOS'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= passion}} {{carac_name= HOSPITALITE}}{{carac_value=[[@{HOS}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{HOS}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{HOS}+floor(?{modif|0})]],0}>21}*([[@{HOS}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{HOS},0}>21}*(20-{{floor(?{modif|0})+@{HOS},0}>21}*(@{HOS}+floor(?{modif|0})-20))+{{@{HOS}+floor(?{modif|0}),30}<20}*(@{HOS}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{HOS}+floor(?{modif|0}),0}>1)*(@{HOS}+floor(?{modif|0}))]]cs>[[(40-[[@{HOS}]]-1*floor(?{modif|0})+100*(1-{{[[@{HOS}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{HOS}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{HOS}+floor(?{modif|0}),0}>20}]]+[[{{[[@{HOS}+floor(?{modif|0})]],0}>21}*([[@{HOS}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>
            <label style='display:inline-block;  width:170px;'>HAINE (SAXONS)</label>
            <input style='display:inline;' type="number" name="attr_HAI" class="sheet-carac2" value="10"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox'
                   name='attr_CB-haine' value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestHAI'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= passion}} {{carac_name= HAINE (SAXONS)}}{{carac_value=[[@{HAI}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{HAI}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{HAI}+floor(?{modif|0})]],0}>21}*([[@{HAI}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{HAI},0}>21}*(20-{{floor(?{modif|0})+@{HAI},0}>21}*(@{HAI}+floor(?{modif|0})-20))+{{@{HAI}+floor(?{modif|0}),30}<20}*(@{HAI}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{HAI}+floor(?{modif|0}),0}>1)*(@{HAI}+floor(?{modif|0}))]]cs>[[(40-[[@{HAI}]]-1*floor(?{modif|0})+100*(1-{{[[@{HAI}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{HAI}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{HAI}+floor(?{modif|0}),0}>20}]]+[[{{[[@{HAI}+floor(?{modif|0})]],0}>21}*([[@{HAI}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>
            <label style='display:inline-block;  width:170px;'>AMOUR FAMILLE</label>
            <input style='display:inline;' type="number" name="attr_AMO" class="sheet-carac2" value="10"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox'
                   name='attr_CB-amour' value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestAMO'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= passion}} {{carac_name= AMOUR FAMILLE}}{{carac_value=[[@{AMO}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{AMO}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{AMO}+floor(?{modif|0})]],0}>21}*([[@{AMO}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{AMO},0}>21}*(20-{{floor(?{modif|0})+@{AMO},0}>21}*(@{AMO}+floor(?{modif|0})-20))+{{@{AMO}+floor(?{modif|0}),30}<20}*(@{AMO}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{AMO}+floor(?{modif|0}),0}>1)*(@{AMO}+floor(?{modif|0}))]]cs>[[(40-[[@{AMO}]]-1*floor(?{modif|0})+100*(1-{{[[@{AMO}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{AMO}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{AMO}+floor(?{modif|0}),0}>20}]]+[[{{[[@{AMO}+floor(?{modif|0})]],0}>21}*([[@{AMO}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <!-- additional passions -->
            <div class="rc-tiny">
                <fieldset class="repeating_passions" style="margin-top:-20px;">
                    <input style='display:inline-block;  width:185px; background: transparent; border: none; margin-bottom:5px; text-align:left;'
                           name="attr_Pname" type='text' value="nom de la passion"><input style='display:inline;'
                                                                                          type="number"
                                                                                          name="attr_Pvalue"
                                                                                          class="sheet-carac2"
                                                                                          value="10"/>
                    <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox'
                           name='attr_CB-Pname' value='1'/>
                    <button class='sheet-dice-button' type='roll' name='roll_CB-Pname'
                            value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= passion}} {{carac_name= @{Pname}}} {{carac_value=[[@{Pvalue}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{Pvalue}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{Pvalue}+floor(?{modif|0})]],0}>21}*([[@{Pvalue}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{Pvalue},0}>21}*(20-{{floor(?{modif|0})+@{Pvalue},0}>21}*(@{Pvalue}+floor(?{modif|0})-20))+{{@{Pvalue}+floor(?{modif|0}),30}<20}*(@{Pvalue}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{Pvalue}+floor(?{modif|0}),0}>1)*(@{Pvalue}+floor(?{modif|0}))]]cs>[[(40-[[@{Pvalue}]]-1*floor(?{modif|0})+100*(1-{{[[@{Pvalue}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{Pvalue}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{Pvalue}+floor(?{modif|0}),0}>20}]]+[[{{[[@{Pvalue}+floor(?{modif|0})]],0}>21}*([[@{Pvalue}+floor(?{modif|0})]]-20)]]]]}}'></button>
                </fieldset>
            </div>


        </div>


    </div>
</div>
<!-- 2e partie, traits de personnalité -->
<div class="sheet-tab-content sheet-tab2">
    <br/>
    <h4 style="margin-bottom: 10px;">Bonus de Chevalerie (tous 16+) <input
            style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_BChe"
            class="sheet-carac2" value="@{TEne}+@{TGen}+@{TJus}+@{TMis}+@{TMod}+@{TVal}" disabled="true"/>
        <input type="text" name="attr_BCheFlag" value="0" style="display:none;" readonly/>
        <input type='text' name='attr_BCheInfo' style='width: 50px;' value="OUI" readonly/>
        actif :<input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="checkbox"
                      name="attr_BCheActif" class="sheet-carac2" value="1"/> (désactiver en période Uther)
    </h4>

    <h4 style="margin-bottom: 10px;">Bonus religieux (tous 16+)
        <input type='text' class='sheet-info' name='attr_BRInfo' value="nada" readonly/>
        <!-- flag for religious bonus : 1 if yes, 0 otherwise -->
        <input type="text" name="attr_flag-bonus" class="sheet-carac2"
               value="(@{BR-Pa-formule}+@{BR-Ro-formule}+@{BR-Br-formule}+@{BR-Ar-formule}+@{BR-Sa-formule}+@{BR-Pi-formule})"
               disabled="disabled"/>
        (0 = non, 1 = oui)
    </h4>

    <h2 style="margin-bottom: 10px; text-align:center;">Traits de personnalité</h2>

    <p style="text-align:center;">

        <button class='sheet-dice-button' type='roll' name='roll_Test-TCha'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= CHASTE}}{{carac_value=[[@{TCha}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TCha}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TCha}+floor(?{modif|0})]],0}>21}*([[@{TCha}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TCha},0}>21}*(20-{{floor(?{modif|0})+@{TCha},0}>21}*(@{TCha}+floor(?{modif|0})-20))+{{@{TCha}+floor(?{modif|0}),30}<20}*(@{TCha}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TCha}+floor(?{modif|0}),0}>1)*(@{TCha}+floor(?{modif|0}))]]cs>[[(40-[[@{TCha}]]-1*floor(?{modif|0})+100*(1-{{[[@{TCha}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TCha}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TCha}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TCha}+floor(?{modif|0})]],0}>21}*([[@{TCha}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TCha'
               value='1'/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTCha" value="1" readonly/>
        <label class="sheet-trait-label">CHASTE</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TCha"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TLux"
               class="sheet-carac2" value="(20-@{TCha})" disabled="true"/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTLux" value="1" readonly/>
        <label class="sheet-trait-label sheet-right">LUXURIEUX</label>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TLux'
               value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TLux'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= LUXURIEUX}}{{carac_value=[[@{TLux}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TLux}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TLux}+floor(?{modif|0})]],0}>21}*([[@{TLux}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TLux},0}>21}*(20-{{floor(?{modif|0})+@{TLux},0}>21}*(@{TLux}+floor(?{modif|0})-20))+{{@{TLux}+floor(?{modif|0}),30}<20}*(@{TLux}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TLux}+floor(?{modif|0}),0}>1)*(@{TLux}+floor(?{modif|0}))]]cs>[[(40-[[@{TLux}]]-1*floor(?{modif|0})+100*(1-{{[[@{TLux}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TLux}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TLux}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TLux}+floor(?{modif|0})]],0}>21}*([[@{TLux}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TEne'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= ENERGIQUE}}{{carac_value=[[@{TEne}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TEne}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TEne}+floor(?{modif|0})]],0}>21}*([[@{TEne}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TEne},0}>21}*(20-{{floor(?{modif|0})+@{TEne},0}>21}*(@{TEne}+floor(?{modif|0})-20))+{{@{TEne}+floor(?{modif|0}),30}<20}*(@{TEne}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TEne}+floor(?{modif|0}),0}>1)*(@{TEne}+floor(?{modif|0}))]]cs>[[(40-[[@{TEne}]]-1*floor(?{modif|0})+100*(1-{{[[@{TEne}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TEne}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TEne}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TEne}+floor(?{modif|0})]],0}>21}*([[@{TEne}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TEne'
               value='1'/>
        <input type='checkbox' class='sheet-checkbox-religion' name='attr_cbTEne' value="1" readonly/>
        <label class="sheet-trait-label">*ENERGIQUE</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TEne"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TPar"
               class="sheet-carac2" value="(20-@{TEne})" disabled="true"/>
        <label class="sheet-trait-label sheet-right">PARESSEUX</label>
        <input style='display:inline;  margin-left: 10px; margin-left:10px; margin-right: 10px; ' type='checkbox'
               name='attr_CB-TPar' value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TPar'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= PARESSEUX}}{{carac_value=[[@{TPar}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TPar}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TPar}+floor(?{modif|0})]],0}>21}*([[@{TPar}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TPar},0}>21}*(20-{{floor(?{modif|0})+@{TPar},0}>21}*(@{TPar}+floor(?{modif|0})-20))+{{@{TPar}+floor(?{modif|0}),30}<20}*(@{TPar}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TPar}+floor(?{modif|0}),0}>1)*(@{TPar}+floor(?{modif|0}))]]cs>[[(40-[[@{TPar}]]-1*floor(?{modif|0})+100*(1-{{[[@{TPar}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TPar}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TPar}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TPar}+floor(?{modif|0})]],0}>21}*([[@{TPar}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>

        <button class='sheet-dice-button' type='roll' name='roll_Test-TCle'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= CLEMENT}}{{carac_value=[[@{TCle}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TCle}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TCle}+floor(?{modif|0})]],0}>21}*([[@{TCle}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TCle},0}>21}*(20-{{floor(?{modif|0})+@{TCle},0}>21}*(@{TCle}+floor(?{modif|0})-20))+{{@{TCle}+floor(?{modif|0}),30}<20}*(@{TCle}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TCle}+floor(?{modif|0}),0}>1)*(@{TCle}+floor(?{modif|0}))]]cs>[[(40-[[@{TCle}]]-1*floor(?{modif|0})+100*(1-{{[[@{TCle}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TCle}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TCle}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TCle}+floor(?{modif|0})]],0}>21}*([[@{TCle}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TCle'
               value='1'/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTCle" value="1" readonly/>
        <label style='display:inline-block;  width:130px;'>CLEMENT</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TCle"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TRan"
               class="sheet-carac2" value="(20-@{TCle})" disabled="true"/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTRan" value="1" readonly/>
        <label class="sheet-trait-label sheet-right">RANCUNIER</label>
        <input style='display:inline;  margin-left: 10px; margin-left:10px; margin-right: 10px; ' type='checkbox'
               name='attr_CB-TRan' value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TRan'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= RANCUNIER}}{{carac_value=[[@{TRan}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TRan}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TRan}+floor(?{modif|0})]],0}>21}*([[@{TRan}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TRan},0}>21}*(20-{{floor(?{modif|0})+@{TRan},0}>21}*(@{TRan}+floor(?{modif|0})-20))+{{@{TRan}+floor(?{modif|0}),30}<20}*(@{TRan}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TRan}+floor(?{modif|0}),0}>1)*(@{TRan}+floor(?{modif|0}))]]cs>[[(40-[[@{TRan}]]-1*floor(?{modif|0})+100*(1-{{[[@{TRan}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TRan}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TRan}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TRan}+floor(?{modif|0})]],0}>21}*([[@{TRan}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>

        <button class='sheet-dice-button' type='roll' name='roll_Test-TGen'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= GENEREUX}}{{carac_value=[[@{TGen}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TGen}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TGen}+floor(?{modif|0})]],0}>21}*([[@{TGen}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TGen},0}>21}*(20-{{floor(?{modif|0})+@{TGen},0}>21}*(@{TGen}+floor(?{modif|0})-20))+{{@{TGen}+floor(?{modif|0}),30}<20}*(@{TGen}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TGen}+floor(?{modif|0}),0}>1)*(@{TGen}+floor(?{modif|0}))]]cs>[[(40-[[@{TGen}]]-1*floor(?{modif|0})+100*(1-{{[[@{TGen}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TGen}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TGen}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TGen}+floor(?{modif|0})]],0}>21}*([[@{TGen}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TGen'
               value='1'/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTGen" value="1" readonly/>
        <label style='display:inline-block;  width:130px;'>*GENEREUX</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TGen"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TEgo"
               class="sheet-carac2" value="(20-@{TGen})" disabled="true"/>
        <label class="sheet-trait-label sheet-right">EGOISTE</label>
        <input style='display:inline;  margin-left: 10px; margin-left:10px; margin-right: 10px; ' type='checkbox'
               name='attr_CB-TEgo' value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TEgo'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= EGOISTE}}{{carac_value=[[@{TEgo}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TEgo}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TEgo}+floor(?{modif|0})]],0}>21}*([[@{TEgo}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TEgo},0}>21}*(20-{{floor(?{modif|0})+@{TEgo},0}>21}*(@{TEgo}+floor(?{modif|0})-20))+{{@{TEgo}+floor(?{modif|0}),30}<20}*(@{TEgo}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TEgo}+floor(?{modif|0}),0}>1)*(@{TEgo}+floor(?{modif|0}))]]cs>[[(40-[[@{TEgo}]]-1*floor(?{modif|0})+100*(1-{{[[@{TEgo}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TEgo}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TEgo}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TEgo}+floor(?{modif|0})]],0}>21}*([[@{TEgo}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>

        <button class='sheet-dice-button' type='roll' name='roll_Test-TSin'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= SINCERE}}{{carac_value=[[@{TSin}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TSin}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TSin}+floor(?{modif|0})]],0}>21}*([[@{TSin}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TSin},0}>21}*(20-{{floor(?{modif|0})+@{TSin},0}>21}*(@{TSin}+floor(?{modif|0})-20))+{{@{TSin}+floor(?{modif|0}),30}<20}*(@{TSin}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TSin}+floor(?{modif|0}),0}>1)*(@{TSin}+floor(?{modif|0}))]]cs>[[(40-[[@{TSin}]]-1*floor(?{modif|0})+100*(1-{{[[@{TSin}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TSin}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TSin}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TSin}+floor(?{modif|0})]],0}>21}*([[@{TSin}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TSin'
               value='1'/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTSin" value="1" readonly/>
        <label style='display:inline-block;  width:130px;'>SINCERE</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TSin"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TTro"
               class="sheet-carac2" value="(20-@{TSin})" disabled="true"/>
        <label class="sheet-trait-label sheet-right">TROMPEUR</label>
        <input style='display:inline;  margin-left: 10px; margin-left:10px; margin-right: 10px; ' type='checkbox'
               name='attr_CB-TTro' value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TTro'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= TROMPEUR}}{{carac_value=[[@{TTro}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TTro}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TTro}+floor(?{modif|0})]],0}>21}*([[@{TTro}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TTro},0}>21}*(20-{{floor(?{modif|0})+@{TTro},0}>21}*(@{TTro}+floor(?{modif|0})-20))+{{@{TTro}+floor(?{modif|0}),30}<20}*(@{TTro}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TTro}+floor(?{modif|0}),0}>1)*(@{TTro}+floor(?{modif|0}))]]cs>[[(40-[[@{TTro}]]-1*floor(?{modif|0})+100*(1-{{[[@{TTro}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TTro}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TTro}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TTro}+floor(?{modif|0})]],0}>21}*([[@{TTro}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>

        <button class='sheet-dice-button' type='roll' name='roll_Test-TJus'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= JUSTE}}{{carac_value=[[@{TJus}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TJus}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TJus}+floor(?{modif|0})]],0}>21}*([[@{TJus}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TJus},0}>21}*(20-{{floor(?{modif|0})+@{TJus},0}>21}*(@{TJus}+floor(?{modif|0})-20))+{{@{TJus}+floor(?{modif|0}),30}<20}*(@{TJus}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TJus}+floor(?{modif|0}),0}>1)*(@{TJus}+floor(?{modif|0}))]]cs>[[(40-[[@{TJus}]]-1*floor(?{modif|0})+100*(1-{{[[@{TJus}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TJus}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TJus}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TJus}+floor(?{modif|0})]],0}>21}*([[@{TJus}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TJus'
               value='1'/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTJus" value="1" readonly/>
        <label style='display:inline-block;  width:130px;'>*JUSTE</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TJus"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TArb"
               class="sheet-carac2" value="(20-@{TJus})" disabled="true"/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTArb" value="1" readonly/>
        <label class="sheet-trait-label sheet-right">ARBITRAIRE</label>
        <input style='display:inline;  margin-left: 10px; margin-left:10px; margin-right: 10px; ' type='checkbox'
               name='attr_CB-TArb' value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TArb'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= ARBITRAIRE}}{{carac_value=[[@{TArb}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TArb}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TArb}+floor(?{modif|0})]],0}>21}*([[@{TArb}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TArb},0}>21}*(20-{{floor(?{modif|0})+@{TArb},0}>21}*(@{TArb}+floor(?{modif|0})-20))+{{@{TArb}+floor(?{modif|0}),30}<20}*(@{TArb}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TArb}+floor(?{modif|0}),0}>1)*(@{TArb}+floor(?{modif|0}))]]cs>[[(40-[[@{TArb}]]-1*floor(?{modif|0})+100*(1-{{[[@{TArb}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TArb}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TArb}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TArb}+floor(?{modif|0})]],0}>21}*([[@{TArb}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>

        <button class='sheet-dice-button' type='roll' name='roll_Test-TMis'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= MISERICORDIEUX}}{{carac_value=[[@{TMis}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TMis}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TMis}+floor(?{modif|0})]],0}>21}*([[@{TMis}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TMis},0}>21}*(20-{{floor(?{modif|0})+@{TMis},0}>21}*(@{TMis}+floor(?{modif|0})-20))+{{@{TMis}+floor(?{modif|0}),30}<20}*(@{TMis}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TMis}+floor(?{modif|0}),0}>1)*(@{TMis}+floor(?{modif|0}))]]cs>[[(40-[[@{TMis}]]-1*floor(?{modif|0})+100*(1-{{[[@{TMis}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TMis}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TMis}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TMis}+floor(?{modif|0})]],0}>21}*([[@{TMis}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TMis'
               value='1'/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTMis" value="1" readonly/>
        <label style='display:inline-block;  width:130px;'>*MISERICORDIEUX</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TMis"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TCru"
               class="sheet-carac2" value="(20-@{TMis})" disabled="true"/>
        <label class="sheet-trait-label sheet-right">CRUEL</label>
        <input style='display:inline;  margin-left: 10px; margin-left:10px; margin-right: 10px; ' type='checkbox'
               name='attr_CB-TCru' value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TCru'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= CRUEL}}{{carac_value=[[@{TCru}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TCru}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TCru}+floor(?{modif|0})]],0}>21}*([[@{TCru}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TCru},0}>21}*(20-{{floor(?{modif|0})+@{TCru},0}>21}*(@{TCru}+floor(?{modif|0})-20))+{{@{TCru}+floor(?{modif|0}),30}<20}*(@{TCru}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TCru}+floor(?{modif|0}),0}>1)*(@{TCru}+floor(?{modif|0}))]]cs>[[(40-[[@{TCru}]]-1*floor(?{modif|0})+100*(1-{{[[@{TCru}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TCru}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TCru}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TCru}+floor(?{modif|0})]],0}>21}*([[@{TCru}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>

        <button class='sheet-dice-button' type='roll' name='roll_Test-TMod'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= MODESTE}}{{carac_value=[[@{TMod}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TMod}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TMod}+floor(?{modif|0})]],0}>21}*([[@{TMod}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TMod},0}>21}*(20-{{floor(?{modif|0})+@{TMod},0}>21}*(@{TMod}+floor(?{modif|0})-20))+{{@{TMod}+floor(?{modif|0}),30}<20}*(@{TMod}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TMod}+floor(?{modif|0}),0}>1)*(@{TMod}+floor(?{modif|0}))]]cs>[[(40-[[@{TMod}]]-1*floor(?{modif|0})+100*(1-{{[[@{TMod}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TMod}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TMod}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TMod}+floor(?{modif|0})]],0}>21}*([[@{TMod}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TMod'
               value='1'/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTMod" value="1" readonly/>
        <label style='display:inline-block;  width:130px;'>*MODESTE</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TMod"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TFie"
               class="sheet-carac2" value="(20-@{TMod})" disabled="true"/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTFie" value="1" readonly/>
        <label class="sheet-trait-label sheet-right">FIER</label>
        <input style='display:inline;  margin-left: 10px; margin-left:10px; margin-right: 10px; ' type='checkbox'
               name='attr_CB-TFie' value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TFie'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= FIER}}{{carac_value=[[@{TFie}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TFie}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TFie}+floor(?{modif|0})]],0}>21}*([[@{TFie}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TFie},0}>21}*(20-{{floor(?{modif|0})+@{TFie},0}>21}*(@{TFie}+floor(?{modif|0})-20))+{{@{TFie}+floor(?{modif|0}),30}<20}*(@{TFie}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TFie}+floor(?{modif|0}),0}>1)*(@{TFie}+floor(?{modif|0}))]]cs>[[(40-[[@{TFie}]]-1*floor(?{modif|0})+100*(1-{{[[@{TFie}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TFie}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TFie}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TFie}+floor(?{modif|0})]],0}>21}*([[@{TFie}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>

        <button class='sheet-dice-button' type='roll' name='roll_Test-TSpi'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= SPIRITUEL}}{{carac_value=[[@{TSpi}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TSpi}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TSpi}+floor(?{modif|0})]],0}>21}*([[@{TSpi}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TSpi},0}>21}*(20-{{floor(?{modif|0})+@{TSpi},0}>21}*(@{TSpi}+floor(?{modif|0})-20))+{{@{TSpi}+floor(?{modif|0}),30}<20}*(@{TSpi}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TSpi}+floor(?{modif|0}),0}>1)*(@{TSpi}+floor(?{modif|0}))]]cs>[[(40-[[@{TSpi}]]-1*floor(?{modif|0})+100*(1-{{[[@{TSpi}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TSpi}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TSpi}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TSpi}+floor(?{modif|0})]],0}>21}*([[@{TSpi}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TSpi'
               value='1'/>
        <label style='display:inline-block;  width:130px;'>SPIRITUEL</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TSpi"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TPra"
               class="sheet-carac2" value="(20-@{TSpi})" disabled="true"/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTPra" value="1" readonly/>
        <label class="sheet-trait-label sheet-right">PRAGMATIQUE</label>
        <input style='display:inline;  margin-left: 10px; margin-left:10px; margin-right: 10px; ' type='checkbox'
               name='attr_CB-TPra' value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TPra'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= PRAGMATIQUE}}{{carac_value=[[@{TPra}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TPra}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TPra}+floor(?{modif|0})]],0}>21}*([[@{TPra}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TPra},0}>21}*(20-{{floor(?{modif|0})+@{TPra},0}>21}*(@{TPra}+floor(?{modif|0})-20))+{{@{TPra}+floor(?{modif|0}),30}<20}*(@{TPra}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TPra}+floor(?{modif|0}),0}>1)*(@{TPra}+floor(?{modif|0}))]]cs>[[(40-[[@{TPra}]]-1*floor(?{modif|0})+100*(1-{{[[@{TPra}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TPra}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TPra}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TPra}+floor(?{modif|0})]],0}>21}*([[@{TPra}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>

        <button class='sheet-dice-button' type='roll' name='roll_Test-TPru'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= PRUDENT}}{{carac_value=[[@{TPru}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TPru}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TPru}+floor(?{modif|0})]],0}>21}*([[@{TPru}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TPru},0}>21}*(20-{{floor(?{modif|0})+@{TPru},0}>21}*(@{TPru}+floor(?{modif|0})-20))+{{@{TPru}+floor(?{modif|0}),30}<20}*(@{TPru}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TPru}+floor(?{modif|0}),0}>1)*(@{TPru}+floor(?{modif|0}))]]cs>[[(40-[[@{TPru}]]-1*floor(?{modif|0})+100*(1-{{[[@{TPru}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TPru}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TPru}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TPru}+floor(?{modif|0})]],0}>21}*([[@{TPru}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TPru'
               value='1'/>
        <label style='display:inline-block;  width:130px;'>PRUDENT</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TPru"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TImp"
               class="sheet-carac2" value="(20-@{TPru})" disabled="true"/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTImp" value="1" readonly/>
        <label class="sheet-trait-label sheet-right">IMPULSIF</label>
        <input style='display:inline;  margin-left: 10px; margin-left:10px; margin-right: 10px; ' type='checkbox'
               name='attr_CB-TImp' value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TImp'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= IMPULSIF}}{{carac_value=[[@{TImp}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TImp}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TImp}+floor(?{modif|0})]],0}>21}*([[@{TImp}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TImp},0}>21}*(20-{{floor(?{modif|0})+@{TImp},0}>21}*(@{TImp}+floor(?{modif|0})-20))+{{@{TImp}+floor(?{modif|0}),30}<20}*(@{TImp}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TImp}+floor(?{modif|0}),0}>1)*(@{TImp}+floor(?{modif|0}))]]cs>[[(40-[[@{TImp}]]-1*floor(?{modif|0})+100*(1-{{[[@{TImp}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TImp}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TImp}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TImp}+floor(?{modif|0})]],0}>21}*([[@{TImp}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>

        <button class='sheet-dice-button' type='roll' name='roll_Test-TSob'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= SOBRE}}{{carac_value=[[@{TSob}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TSob}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TSob}+floor(?{modif|0})]],0}>21}*([[@{TSob}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TSob},0}>21}*(20-{{floor(?{modif|0})+@{TSob},0}>21}*(@{TSob}+floor(?{modif|0})-20))+{{@{TSob}+floor(?{modif|0}),30}<20}*(@{TSob}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TSob}+floor(?{modif|0}),0}>1)*(@{TSob}+floor(?{modif|0}))]]cs>[[(40-[[@{TSob}]]-1*floor(?{modif|0})+100*(1-{{[[@{TSob}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TSob}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TSob}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TSob}+floor(?{modif|0})]],0}>21}*([[@{TSob}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TSob'
               value='1'/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTSob" value="1" readonly/>
        <label style='display:inline-block;  width:130px;'>SOBRE</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TSob"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TBon"
               class="sheet-carac2" value="(20-@{TSob})" disabled="true"/>
        <input class="sheet-checkbox-religion" type="checkbox" name="attr_cbTBon" value="1" readonly/>
        <label class="sheet-trait-label sheet-right">BON VIVANT</label>
        <input style='display:inline;  margin-left: 10px; margin-left:10px; margin-right: 10px; ' type='checkbox'
               name='attr_CB-TBon' value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TBon'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= BON VIVANT}}{{carac_value=[[@{TBon}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TBon}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TBon}+floor(?{modif|0})]],0}>21}*([[@{TBon}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TBon},0}>21}*(20-{{floor(?{modif|0})+@{TBon},0}>21}*(@{TBon}+floor(?{modif|0})-20))+{{@{TBon}+floor(?{modif|0}),30}<20}*(@{TBon}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TBon}+floor(?{modif|0}),0}>1)*(@{TBon}+floor(?{modif|0}))]]cs>[[(40-[[@{TBon}]]-1*floor(?{modif|0})+100*(1-{{[[@{TBon}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TBon}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TBon}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TBon}+floor(?{modif|0})]],0}>21}*([[@{TBon}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>

        <button class='sheet-dice-button' type='roll' name='roll_Test-TCon'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= CONFIANT}}{{carac_value=[[@{TCon}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TCon}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TCon}+floor(?{modif|0})]],0}>21}*([[@{TCon}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TCon},0}>21}*(20-{{floor(?{modif|0})+@{TCon},0}>21}*(@{TCon}+floor(?{modif|0})-20))+{{@{TCon}+floor(?{modif|0}),30}<20}*(@{TCon}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TCon}+floor(?{modif|0}),0}>1)*(@{TCon}+floor(?{modif|0}))]]cs>[[(40-[[@{TCon}]]-1*floor(?{modif|0})+100*(1-{{[[@{TCon}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TCon}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TCon}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TCon}+floor(?{modif|0})]],0}>21}*([[@{TCon}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TCon'
               value='1'/>
        <label style='display:inline-block;  width:130px;'>CONFIANT</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TCon"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TMef"
               class="sheet-carac2" value="(20-@{TCon})" disabled="true"/>
        <label class="sheet-trait-label sheet-right">MEFIANT</label>
        <input style='display:inline;  margin-left: 10px; margin-left:10px; margin-right: 10px; ' type='checkbox'
               name='attr_CB-TMef' value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TMef'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= MEFIANT}}{{carac_value=[[@{TMef}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TMef}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TMef}+floor(?{modif|0})]],0}>21}*([[@{TMef}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TMef},0}>21}*(20-{{floor(?{modif|0})+@{TMef},0}>21}*(@{TMef}+floor(?{modif|0})-20))+{{@{TMef}+floor(?{modif|0}),30}<20}*(@{TMef}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TMef}+floor(?{modif|0}),0}>1)*(@{TMef}+floor(?{modif|0}))]]cs>[[(40-[[@{TMef}]]-1*floor(?{modif|0})+100*(1-{{[[@{TMef}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TMef}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TMef}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TMef}+floor(?{modif|0})]],0}>21}*([[@{TMef}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>

        <button class='sheet-dice-button' type='roll' name='roll_Test-TVal'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= VALEUREUX}}{{carac_value=[[@{TVal}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TVal}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TVal}+floor(?{modif|0})]],0}>21}*([[@{TVal}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TVal},0}>21}*(20-{{floor(?{modif|0})+@{TVal},0}>21}*(@{TVal}+floor(?{modif|0})-20))+{{@{TVal}+floor(?{modif|0}),30}<20}*(@{TVal}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TVal}+floor(?{modif|0}),0}>1)*(@{TVal}+floor(?{modif|0}))]]cs>[[(40-[[@{TVal}]]-1*floor(?{modif|0})+100*(1-{{[[@{TVal}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TVal}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TVal}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TVal}+floor(?{modif|0})]],0}>21}*([[@{TVal}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-TVal'
               value='1'/>
        <label style='display:inline-block;  width:130px;'>*VALEUREUX</label>
        <input style='display:inline; text-align:center;  font-weight:bold;' type="number" name="attr_TVal"
               class="sheet-carac2" value="10"/>
        <label style='display:inline-block;  width:30px; text-align:center'>/</label>
        <input style='display:inline; width:35px; text-align:center; font-weight:bold;' type="text" name="attr_TCou"
               class="sheet-carac2" value="(20-@{TVal})" disabled="true"/>
        <label class="sheet-trait-label sheet-right">COUARD</label>
        <input style='display:inline;  margin-left: 10px; margin-left:10px; margin-right: 10px; ' type='checkbox'
               name='attr_CB-TCou' value='1'/>
        <button class='sheet-dice-button' type='roll' name='roll_Test-TCou'
                value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait}} {{carac_name= COUARD}}{{carac_value=[[@{TCou}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{TCou}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{TCou}+floor(?{modif|0})]],0}>21}*([[@{TCou}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{TCou},0}>21}*(20-{{floor(?{modif|0})+@{TCou},0}>21}*(@{TCou}+floor(?{modif|0})-20))+{{@{TCou}+floor(?{modif|0}),30}<20}*(@{TCou}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{TCou}+floor(?{modif|0}),0}>1)*(@{TCou}+floor(?{modif|0}))]]cs>[[(40-[[@{TCou}]]-1*floor(?{modif|0})+100*(1-{{[[@{TCou}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{TCou}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{TCou}+floor(?{modif|0}),0}>20}]]+[[{{[[@{TCou}+floor(?{modif|0})]],0}>21}*([[@{TCou}+floor(?{modif|0})]]-20)]]]]}}'></button>
        <br/>
    </p>

    <h3 class="sheet-h3-black">Traits dirigés</h3>
    <div class="rc-tiny">
        <fieldset class="repeating_td">
            <select name="attr_tdtrait" class="sheet-long sheet-select"
                    style='display:inline; background: transparent; border: none;'>
                <option value="@{TCha}">Chaste</option>
                <option value="@{TLux}" style="font-color:red;">Luxurieux</option>
                <option value="@{TEne}">Energique</option>
                <option value="@{TPar}">Paresseux</option>
                <option value="@{TCle}">Clément</option>
                <option value="@{TRan}">Rancunier</option>
                <option value="@{TGen}">Généreux</option>
                <option value="@{TEgo}">Egoïste</option>
                <option value="@{TSin}">Sincère</option>
                <option value="@{TTro}">Trompeur</option>
                <option value="@{TJus}">Juste</option>
                <option value="@{TArb}">Arbitraire</option>
                <option value="@{TMis}">Miséricordieux</option>
                <option value="@{TCru}">Cruel</option>
                <option value="@{TMod}">Modeste</option>
                <option value="@{TFie}">Fier</option>
                <option value="@{TSpi}">Spirituel</option>
                <option value="@{TPra}">Pragmatique</option>
                <option value="@{TPru}">Prudent</option>
                <option value="@{TImp}">Impulsif</option>
                <option value="@{TSob}">Sobre</option>
                <option value="@{TBon}">Bon vivant</option>
                <option value="@{TCon}">Confiant</option>
                <option value="@{TMef}">Méfiant</option>
                <option value="@{TVal}">Valeureux</option>
                <option value="@{TCou}">Couard</option>
            </select>
            <input style='display:none;' name='attr_tdbase' value='CHASTE' readonly/>
            <span class="sheet-text-basic"> envers</span>
            <input style='display:inline-block;  width:160px; height: 20px; font-size:1em; background: transparent; border: none;  margin-bottom:5px; vertical-align:top;'
                   name="attr_tdcible" type='text' value="cible"><input class="sheet-carac2" type="number"
                                                                        name="attr_tdvalue"
                                                                        value="0"/>
            <button class='sheet-dice-button' type='roll' name='roll_Test-TDir'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= trait dirigé}} {{carac_name= @{tdbase} envers @{tdcible} }}{{carac_value=[[@{tdtrait}]]}} {{modif_context=[[floor(?{modif|0})+@{tdvalue}]]}} {{carac_modifiee= [[@{tdvalue}+@{tdtrait}+floor(?{modif|0})]]}} {{bonus_expert= [[{{@{tdvalue}+@{tdtrait}+floor(?{modif|0}),0}>21}*(@{tdvalue}+@{tdtrait}+floor(?{modif|0})-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{tdvalue}+@{tdtrait},0}>21}*(20-{{floor(?{modif|0})+@{tdvalue}+@{tdtrait},0}>21}*(@{tdvalue}++@{tdtrait}+floor(?{modif|0})-20))+{{@{tdvalue}+@{tdtrait}+floor(?{modif|0}),30}<20}*(@{tdvalue}+@{tdtrait}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{tdvalue}+@{tdtrait}+floor(?{modif|0}),0}>1)*(@{tdvalue}+@{tdtrait}+floor(?{modif|0}))]]cs>[[(40-(1*@{tdvalue})-1*(@{tdtrait})-1*floor(?{modif|0})+100*(1-{{@{tdvalue}+@{tdtrait}+floor(?{modif|0}),0}>21})-1)*(1-({{@{tdvalue}+@{tdtrait}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{tdvalue}+@{tdtrait}+floor(?{modif|0}),0}>20}]]+[[{{[[@{tdvalue}+@{tdtrait}+floor(?{modif|0})]],0}>21}*([[@{tdvalue}+@{tdtrait}+floor(?{modif|0})]]-20)]]]]}}'></button>
        </fieldset>
    </div>
</div>
<!-- 3e partie, compétences  -->
<div class="sheet-tab-content sheet-tab3">
    <div class="sheet-2colrow">
        <div class="sheet-col">

            <h2>Compétences</h2>

            <label style='display:inline-block;  width:140px;'>canotage</label>
            <input style='display:inline;' type="number" name="attr_canot" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox'
                   name='attr_CB-canotage' value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestCanot'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= CANOTAGE}}{{carac_value=[[@{canot}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{canot}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{canot}+floor(?{modif|0})]],0}>21}*([[@{canot}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{canot},0}>21}*(20-{{floor(?{modif|0})+@{canot},0}>21}*(@{canot}+floor(?{modif|0})-20))+{{@{canot}+floor(?{modif|0}),30}<20}*(@{canot}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{canot}+floor(?{modif|0}),0}>1)*(@{canot}+floor(?{modif|0}))]]cs>[[(40-[[@{canot}]]-1*floor(?{modif|0})+100*(1-{{[[@{canot}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{canot}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{canot}+floor(?{modif|0}),0}>20}]]+[[{{[[@{canot}+floor(?{modif|0})]],0}>21}*([[@{canot}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>chant</label>
            <input style='display:inline;' type="number" name="attr_chant" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-chant'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= CHANT}}{{carac_value=[[@{chant}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{chant}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{chant}+floor(?{modif|0})]],0}>21}*([[@{chant}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{chant},0}>21}*(20-{{floor(?{modif|0})+@{chant},0}>21}*(@{chant}+floor(?{modif|0})-20))+{{@{chant}+floor(?{modif|0}),30}<20}*(@{chant}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{chant}+floor(?{modif|0}),0}>1)*(@{chant}+floor(?{modif|0}))]]cs>[[(40-[[@{chant}]]-1*floor(?{modif|0})+100*(1-{{[[@{chant}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{chant}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{chant}+floor(?{modif|0}),0}>20}]]+[[{{[[@{chant}+floor(?{modif|0})]],0}>21}*([[@{chant}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>chasse</label>
            <input style='display:inline;' type="number" name="attr_chasse" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-chasse'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= CHASSE}}{{carac_value=[[@{chasse}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{chasse}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{chasse}+floor(?{modif|0})]],0}>21}*([[@{chasse}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{chasse},0}>21}*(20-{{floor(?{modif|0})+@{chasse},0}>21}*(@{chasse}+floor(?{modif|0})-20))+{{@{chasse}+floor(?{modif|0}),30}<20}*(@{chasse}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{chasse}+floor(?{modif|0}),0}>1)*(@{chasse}+floor(?{modif|0}))]]cs>[[(40-[[@{chasse}]]-1*floor(?{modif|0})+100*(1-{{[[@{chasse}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{chasse}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{chasse}+floor(?{modif|0}),0}>20}]]+[[{{[[@{chasse}+floor(?{modif|0})]],0}>21}*([[@{chasse}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>composition</label>
            <input style='display:inline;' type="number" name="attr_compo" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-compo'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= COMPOSITION}}{{carac_value=[[@{compo}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{compo}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{compo}+floor(?{modif|0})]],0}>21}*([[@{compo}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{compo},0}>21}*(20-{{floor(?{modif|0})+@{compo},0}>21}*(@{compo}+floor(?{modif|0})-20))+{{@{compo}+floor(?{modif|0}),30}<20}*(@{compo}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{compo}+floor(?{modif|0}),0}>1)*(@{compo}+floor(?{modif|0}))]]cs>[[(40-[[@{compo}]]-1*floor(?{modif|0})+100*(1-{{[[@{compo}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{compo}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{compo}+floor(?{modif|0}),0}>20}]]+[[{{[[@{compo}+floor(?{modif|0})]],0}>21}*([[@{compo}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>connaissance faës</label>
            <input style='display:inline;' type="number" name="attr_faes" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-faes'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= CULTURE FAES}}{{carac_value=[[@{faes}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{faes}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{faes}+floor(?{modif|0})]],0}>21}*([[@{faes}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{faes},0}>21}*(20-{{floor(?{modif|0})+@{faes},0}>21}*(@{faes}+floor(?{modif|0})-20))+{{@{faes}+floor(?{modif|0}),30}<20}*(@{faes}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{faes}+floor(?{modif|0}),0}>1)*(@{faes}+floor(?{modif|0}))]]cs>[[(40-[[@{faes}]]-1*floor(?{modif|0})+100*(1-{{[[@{faes}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{faes}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{faes}+floor(?{modif|0}),0}>20}]]+[[{{[[@{faes}+floor(?{modif|0})]],0}>21}*([[@{faes}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>courtoisie</label>
            <input style='display:inline;' type="number" name="attr_cou" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-cou'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= COURTOISIE}}{{carac_value=[[@{cou}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{cou}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{cou}+floor(?{modif|0})]],0}>21}*([[@{cou}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{cou},0}>21}*(20-{{floor(?{modif|0})+@{cou},0}>21}*(@{cou}+floor(?{modif|0})-20))+{{@{cou}+floor(?{modif|0}),30}<20}*(@{cou}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{cou}+floor(?{modif|0}),0}>1)*(@{cou}+floor(?{modif|0}))]]cs>[[(40-[[@{cou}]]-1*floor(?{modif|0})+100*(1-{{[[@{cou}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{cou}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{cou}+floor(?{modif|0}),0}>20}]]+[[{{[[@{cou}+floor(?{modif|0})]],0}>21}*([[@{cou}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>danse</label>
            <input style='display:inline;' type="number" name="attr_danse" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-danse'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= DANSE}}{{carac_value=[[@{danse}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{danse}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{danse}+floor(?{modif|0})]],0}>21}*([[@{danse}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{danse},0}>21}*(20-{{floor(?{modif|0})+@{danse},0}>21}*(@{danse}+floor(?{modif|0})-20))+{{@{danse}+floor(?{modif|0}),30}<20}*(@{danse}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{danse}+floor(?{modif|0}),0}>1)*(@{danse}+floor(?{modif|0}))]]cs>[[(40-[[@{danse}]]-1*floor(?{modif|0})+100*(1-{{[[@{danse}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{danse}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{danse}+floor(?{modif|0}),0}>20}]]+[[{{[[@{danse}+floor(?{modif|0})]],0}>21}*([[@{danse}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>éloquence</label>
            <input style='display:inline;' type="number" name="attr_elo" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-elo'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= ELOQUENCE}}{{carac_value=[[@{elo}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{elo}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{elo}+floor(?{modif|0})]],0}>21}*([[@{elo}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{elo},0}>21}*(20-{{floor(?{modif|0})+@{elo},0}>21}*(@{elo}+floor(?{modif|0})-20))+{{@{elo}+floor(?{modif|0}),30}<20}*(@{elo}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{elo}+floor(?{modif|0}),0}>1)*(@{elo}+floor(?{modif|0}))]]cs>[[(40-[[@{elo}]]-1*floor(?{modif|0})+100*(1-{{[[@{elo}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{elo}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{elo}+floor(?{modif|0}),0}>20}]]+[[{{[[@{elo}+floor(?{modif|0})]],0}>21}*([[@{elo}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>fauconnerie</label>
            <input style='display:inline;' type="number" name="attr_fau" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-fau'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= FAUCONNERIE}}{{carac_value=[[@{fau}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{fau}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{fau}+floor(?{modif|0})]],0}>21}*([[@{fau}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{fau},0}>21}*(20-{{floor(?{modif|0})+@{fau},0}>21}*(@{fau}+floor(?{modif|0})-20))+{{@{fau}+floor(?{modif|0}),30}<20}*(@{fau}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{fau}+floor(?{modif|0}),0}>1)*(@{fau}+floor(?{modif|0}))]]cs>[[(40-[[@{fau}]]-1*floor(?{modif|0})+100*(1-{{[[@{fau}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{fau}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{fau}+floor(?{modif|0}),0}>20}]]+[[{{[[@{fau}+floor(?{modif|0})]],0}>21}*([[@{fau}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>folklore</label>
            <input style='display:inline;' type="number" name="attr_fol" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-fol'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= FOLKLORE}}{{carac_value=[[@{fol}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{fol}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{fol}+floor(?{modif|0})]],0}>21}*([[@{fol}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{fol},0}>21}*(20-{{floor(?{modif|0})+@{fol},0}>21}*(@{fol}+floor(?{modif|0})-20))+{{@{fol}+floor(?{modif|0}),30}<20}*(@{fol}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{fol}+floor(?{modif|0}),0}>1)*(@{fol}+floor(?{modif|0}))]]cs>[[(40-[[@{fol}]]-1*floor(?{modif|0})+100*(1-{{[[@{fol}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{fol}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{fol}+floor(?{modif|0}),0}>20}]]+[[{{[[@{fol}+floor(?{modif|0})]],0}>21}*([[@{fol}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>gestion</label>
            <input style='display:inline;' type="number" name="attr_ges" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-ges'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= GESTION}}{{carac_value=[[@{ges}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{ges}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{ges}+floor(?{modif|0})]],0}>21}*([[@{ges}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{ges},0}>21}*(20-{{floor(?{modif|0})+@{ges},0}>21}*(@{ges}+floor(?{modif|0})-20))+{{@{ges}+floor(?{modif|0}),30}<20}*(@{ges}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{ges}+floor(?{modif|0}),0}>1)*(@{ges}+floor(?{modif|0}))]]cs>[[(40-[[@{ges}]]-1*floor(?{modif|0})+100*(1-{{[[@{ges}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{ges}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{ges}+floor(?{modif|0}),0}>20}]]+[[{{[[@{ges}+floor(?{modif|0})]],0}>21}*([[@{ges}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>héraldique</label>
            <input style='display:inline;' type="number" name="attr_her" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-her'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= HERALDIQUE}}{{carac_value=[[@{her}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{her}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{her}+floor(?{modif|0})]],0}>21}*([[@{her}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{her},0}>21}*(20-{{floor(?{modif|0})+@{her},0}>21}*(@{her}+floor(?{modif|0})-20))+{{@{her}+floor(?{modif|0}),30}<20}*(@{her}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{her}+floor(?{modif|0}),0}>1)*(@{her}+floor(?{modif|0}))]]cs>[[(40-[[@{her}]]-1*floor(?{modif|0})+100*(1-{{[[@{her}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{her}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{her}+floor(?{modif|0}),0}>20}]]+[[{{[[@{her}+floor(?{modif|0})]],0}>21}*([[@{her}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>intrigue</label>
            <input style='display:inline;' type="number" name="attr_int" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-int'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= INTRIGUE}}{{carac_value=[[@{int}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{int}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{int}+floor(?{modif|0})]],0}>21}*([[@{int}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{int},0}>21}*(20-{{floor(?{modif|0})+@{int},0}>21}*(@{int}+floor(?{modif|0})-20))+{{@{int}+floor(?{modif|0}),30}<20}*(@{int}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{int}+floor(?{modif|0}),0}>1)*(@{int}+floor(?{modif|0}))]]cs>[[(40-[[@{int}]]-1*floor(?{modif|0})+100*(1-{{[[@{int}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{int}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{int}+floor(?{modif|0}),0}>20}]]+[[{{[[@{int}+floor(?{modif|0})]],0}>21}*([[@{int}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>jeu</label>
            <input style='display:inline;' type="number" name="attr_jeu" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-jeu'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= JEU}}{{carac_value=[[@{jeu}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{jeu}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{jeu}+floor(?{modif|0})]],0}>21}*([[@{jeu}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{jeu},0}>21}*(20-{{floor(?{modif|0})+@{jeu},0}>21}*(@{jeu}+floor(?{modif|0})-20))+{{@{jeu}+floor(?{modif|0}),30}<20}*(@{jeu}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{jeu}+floor(?{modif|0}),0}>1)*(@{jeu}+floor(?{modif|0}))]]cs>[[(40-[[@{jeu}]]-1*floor(?{modif|0})+100*(1-{{[[@{jeu}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{jeu}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{jeu}+floor(?{modif|0}),0}>20}]]+[[{{[[@{jeu}+floor(?{modif|0})]],0}>21}*([[@{jeu}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>musique</label>
            <input style='display:inline;' type="number" name="attr_mus" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-mus'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= MUSIQUE}}{{carac_value=[[@{mus}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{mus}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{mus}+floor(?{modif|0})]],0}>21}*([[@{mus}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{mus},0}>21}*(20-{{floor(?{modif|0})+@{mus},0}>21}*(@{mus}+floor(?{modif|0})-20))+{{@{mus}+floor(?{modif|0}),30}<20}*(@{mus}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{mus}+floor(?{modif|0}),0}>1)*(@{mus}+floor(?{modif|0}))]]cs>[[(40-[[@{mus}]]-1*floor(?{modif|0})+100*(1-{{[[@{mus}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{mus}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{mus}+floor(?{modif|0}),0}>20}]]+[[{{[[@{mus}+floor(?{modif|0})]],0}>21}*([[@{mus}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>lire</label>
            <input style='display:inline;' type="number" name="attr_lire" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-lire'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= LIRE}}{{carac_value=[[@{lire}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{lire}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{lire}+floor(?{modif|0})]],0}>21}*([[@{lire}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{lire},0}>21}*(20-{{floor(?{modif|0})+@{lire},0}>21}*(@{lire}+floor(?{modif|0})-20))+{{@{lire}+floor(?{modif|0}),30}<20}*(@{lire}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{lire}+floor(?{modif|0}),0}>1)*(@{lire}+floor(?{modif|0}))]]cs>[[(40-[[@{lire}]]-1*floor(?{modif|0})+100*(1-{{[[@{lire}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{lire}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{lire}+floor(?{modif|0}),0}>20}]]+[[{{[[@{lire}+floor(?{modif|0})]],0}>21}*([[@{lire}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>natation</label>
            <input style='display:inline;' type="number" name="attr_nat" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-nat'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= NATATION}}{{carac_value=[[@{nat}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{nat}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{nat}+floor(?{modif|0})]],0}>21}*([[@{nat}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{nat},0}>21}*(20-{{floor(?{modif|0})+@{nat},0}>21}*(@{nat}+floor(?{modif|0})-20))+{{@{nat}+floor(?{modif|0}),30}<20}*(@{nat}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{nat}+floor(?{modif|0}),0}>1)*(@{nat}+floor(?{modif|0}))]]cs>[[(40-[[@{nat}]]-1*floor(?{modif|0})+100*(1-{{[[@{nat}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{nat}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{nat}+floor(?{modif|0}),0}>20}]]+[[{{[[@{nat}+floor(?{modif|0})]],0}>21}*([[@{nat}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>premier secours</label>
            <input style='display:inline;' type="number" name="attr_ps" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-ps'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= PREMIER SECOURS}}{{carac_value=[[@{ps}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{ps}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{ps}+floor(?{modif|0})]],0}>21}*([[@{ps}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{ps},0}>21}*(20-{{floor(?{modif|0})+@{ps},0}>21}*(@{ps}+floor(?{modif|0})-20))+{{@{ps}+floor(?{modif|0}),30}<20}*(@{ps}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{ps}+floor(?{modif|0}),0}>1)*(@{ps}+floor(?{modif|0}))]]cs>[[(40-[[@{ps}]]-1*floor(?{modif|0})+100*(1-{{[[@{ps}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{ps}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{ps}+floor(?{modif|0}),0}>20}]]+[[{{[[@{ps}+floor(?{modif|0})]],0}>21}*([[@{ps}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>reconnaitre</label>
            <input style='display:inline;' type="number" name="attr_rec" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-rec'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= RECONNAITRE}}{{carac_value=[[@{rec}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{rec}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{rec}+floor(?{modif|0})]],0}>21}*([[@{rec}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{rec},0}>21}*(20-{{floor(?{modif|0})+@{rec},0}>21}*(@{rec}+floor(?{modif|0})-20))+{{@{rec}+floor(?{modif|0}),30}<20}*(@{rec}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{rec}+floor(?{modif|0}),0}>1)*(@{rec}+floor(?{modif|0}))]]cs>[[(40-[[@{rec}]]-1*floor(?{modif|0})+100*(1-{{[[@{rec}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{rec}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{rec}+floor(?{modif|0}),0}>20}]]+[[{{[[@{rec}+floor(?{modif|0})]],0}>21}*([[@{rec}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>religion</label>
            <input style='display:inline;' type="number" name="attr_rel" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-rel'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= RELIGION}}{{carac_value=[[@{rel}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{rel}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{rel}+floor(?{modif|0})]],0}>21}*([[@{rel}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{rel},0}>21}*(20-{{floor(?{modif|0})+@{rel},0}>21}*(@{rel}+floor(?{modif|0})-20))+{{@{rel}+floor(?{modif|0}),30}<20}*(@{rel}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{rel}+floor(?{modif|0}),0}>1)*(@{rel}+floor(?{modif|0}))]]cs>[[(40-[[@{rel}]]-1*floor(?{modif|0})+100*(1-{{[[@{rel}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{rel}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{rel}+floor(?{modif|0}),0}>20}]]+[[{{[[@{rel}+floor(?{modif|0})]],0}>21}*([[@{rel}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>romance</label>
            <input style='display:inline;' type="number" name="attr_rom" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-rom'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= ROMANCE}}{{carac_value=[[@{rom}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{rom}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{rom}+floor(?{modif|0})]],0}>21}*([[@{rom}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{rom},0}>21}*(20-{{floor(?{modif|0})+@{rom},0}>21}*(@{rom}+floor(?{modif|0})-20))+{{@{rom}+floor(?{modif|0}),30}<20}*(@{rom}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{rom}+floor(?{modif|0}),0}>1)*(@{rom}+floor(?{modif|0}))]]cs>[[(40-[[@{rom}]]-1*floor(?{modif|0})+100*(1-{{[[@{rom}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{rom}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{rom}+floor(?{modif|0}),0}>20}]]+[[{{[[@{rom}+floor(?{modif|0})]],0}>21}*([[@{rom}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>séduction</label>
            <input style='display:inline;' type="number" name="attr_sed" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-sed'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= SEDUCTION}}{{carac_value=[[@{sed}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{sed}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{sed}+floor(?{modif|0})]],0}>21}*([[@{sed}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{sed},0}>21}*(20-{{floor(?{modif|0})+@{sed},0}>21}*(@{sed}+floor(?{modif|0})-20))+{{@{sed}+floor(?{modif|0}),30}<20}*(@{sed}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{sed}+floor(?{modif|0}),0}>1)*(@{sed}+floor(?{modif|0}))]]cs>[[(40-[[@{sed}]]-1*floor(?{modif|0})+100*(1-{{[[@{sed}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{sed}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{sed}+floor(?{modif|0}),0}>20}]]+[[{{[[@{sed}+floor(?{modif|0})]],0}>21}*([[@{sed}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>tournoi</label>
            <input style='display:inline;' type="number" name="attr_tou" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-tou'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= TOURNOI}}{{carac_value=[[@{tou}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{tou}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{tou}+floor(?{modif|0})]],0}>21}*([[@{tou}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{tou},0}>21}*(20-{{floor(?{modif|0})+@{tou},0}>21}*(@{tou}+floor(?{modif|0})-20))+{{@{tou}+floor(?{modif|0}),30}<20}*(@{tou}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{tou}+floor(?{modif|0}),0}>1)*(@{tou}+floor(?{modif|0}))]]cs>[[(40-[[@{tou}]]-1*floor(?{modif|0})+100*(1-{{[[@{tou}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{tou}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{tou}+floor(?{modif|0}),0}>20}]]+[[{{[[@{tou}+floor(?{modif|0})]],0}>21}*([[@{tou}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:140px;'>vigilance</label>
            <input style='display:inline;' type="number" name="attr_vig" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-vig'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= VIGILANCE}}{{carac_value=[[@{vig}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{vig}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{vig}+floor(?{modif|0})]],0}>21}*([[@{vig}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{vig},0}>21}*(20-{{floor(?{modif|0})+@{vig},0}>21}*(@{vig}+floor(?{modif|0})-20))+{{@{vig}+floor(?{modif|0}),30}<20}*(@{vig}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{vig}+floor(?{modif|0}),0}>1)*(@{vig}+floor(?{modif|0}))]]cs>[[(40-[[@{vig}]]-1*floor(?{modif|0})+100*(1-{{[[@{vig}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{vig}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{vig}+floor(?{modif|0}),0}>20}]]+[[{{[[@{vig}+floor(?{modif|0})]],0}>21}*([[@{vig}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>
            <!-- additional skills -->
            <div class="rc-tiny">
                <fieldset class="repeating_compbasic" style="margin-top:-20px;">
                    <input style='display:inline-block;  width:150px; background: transparent; border: none;  margin-bottom:5px; padding-right:10px; text-align:left; font-size:1em; '
                           name="attr_Cname" type='text' value="compétence">
                    <input style='display:inline;' type="number" name="attr_Cvalue" class="sheet-comp" value="10"/>
                    <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox'
                           name='attr_CB-Cname' value='1'/>
                    <button class='sheet-dice-button' type='roll' name='roll_TestC'
                            value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence}} {{carac_name= @{Cname}}}{{carac_value=[[@{Cvalue}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{Cvalue}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{Cvalue}+floor(?{modif|0})]],0}>21}*([[@{Cvalue}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{Cvalue},0}>21}*(20-{{floor(?{modif|0})+@{Cvalue},0}>21}*(@{Cvalue}+floor(?{modif|0})-20))+{{@{Cvalue}+floor(?{modif|0}),30}<20}*(@{Cvalue}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{Cvalue}+floor(?{modif|0}),0}>1)*(@{Cvalue}+floor(?{modif|0}))]]cs>[[(40-[[@{Cvalue}]]-1*floor(?{modif|0})+100*(1-{{[[@{Cvalue}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{Cvalue}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{Cvalue}+floor(?{modif|0}),0}>20}]]+[[{{[[@{Cvalue}+floor(?{modif|0})]],0}>21}*([[@{Cvalue}+floor(?{modif|0})]]-20)]]]]}}'></button>
                </fieldset>
            </div>

            <h2>Notes</h2>
            <textarea class="sheet-area-notes" name='attr_notes'> </textarea>
        </div>

        <div class="sheet-col">
            <h2>Compétences de combat</h2>

            <label style='display:inline-block;  width:120px;'>bataille</label>
            <input style='display:inline;' type="number" name="attr_bat" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-bat'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestBat'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence de combat}} {{carac_name= BATAILLE}}{{carac_value=[[@{bat}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{bat}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{bat}+floor(?{modif|0})]],0}>21}*([[@{bat}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{bat},0}>21}*(20-{{floor(?{modif|0})+@{bat},0}>21}*(@{bat}+floor(?{modif|0})-20))+{{@{bat}+floor(?{modif|0}),30}<20}*(@{bat}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{bat}+floor(?{modif|0}),0}>1)*(@{bat}+floor(?{modif|0}))]]cs>[[(40-[[@{bat}]]-1*floor(?{modif|0})+100*(1-{{[[@{bat}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{bat}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{bat}+floor(?{modif|0}),0}>20}]]+[[{{[[@{bat}+floor(?{modif|0})]],0}>21}*([[@{bat}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:120px;'>siège</label>
            <input style='display:inline;' type="number" name="attr_siege" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-siege'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestSiege'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence de combat}} {{carac_name= SIEGE}}{{carac_value=[[@{siege}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{siege}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{siege}+floor(?{modif|0})]],0}>21}*([[@{siege}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{siege},0}>21}*(20-{{floor(?{modif|0})+@{siege},0}>21}*(@{siege}+floor(?{modif|0})-20))+{{@{siege}+floor(?{modif|0}),30}<20}*(@{siege}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{siege}+floor(?{modif|0}),0}>1)*(@{siege}+floor(?{modif|0}))]]cs>[[(40-[[@{siege}]]-1*floor(?{modif|0})+100*(1-{{[[@{siege}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{siege}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{siege}+floor(?{modif|0}),0}>20}]]+[[{{[[@{siege}+floor(?{modif|0})]],0}>21}*([[@{siege}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:120px;'>équitation</label>
            <input style='display:inline;' type="number" name="attr_equ" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-equ'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestEqu'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence de combat}} {{carac_name= EQUITATION}}{{carac_value=[[@{equ}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{equ}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{equ}+floor(?{modif|0})]],0}>21}*([[@{equ}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{equ},0}>21}*(20-{{floor(?{modif|0})+@{equ},0}>21}*(@{equ}+floor(?{modif|0})-20))+{{@{equ}+floor(?{modif|0}),30}<20}*(@{equ}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{equ}+floor(?{modif|0}),0}>1)*(@{equ}+floor(?{modif|0}))]]cs>[[(40-[[@{equ}]]-1*floor(?{modif|0})+100*(1-{{[[@{equ}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{equ}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{equ}+floor(?{modif|0}),0}>20}]]+[[{{[[@{equ}+floor(?{modif|0})]],0}>21}*([[@{equ}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:120px;'>épée</label>
            <input style='display:inline;' type="number" name="attr_epee" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-epee'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestEpee'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence de combat}} {{carac_name= EPEE}}{{carac_value=[[@{epee}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{epee}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{epee}+floor(?{modif|0})]],0}>21}*([[@{epee}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{epee},0}>21}*(20-{{floor(?{modif|0})+@{epee},0}>21}*(@{epee}+floor(?{modif|0})-20))+{{@{epee}+floor(?{modif|0}),30}<20}*(@{epee}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{epee}+floor(?{modif|0}),0}>1)*(@{epee}+floor(?{modif|0}))]]cs>[[(40-[[@{epee}]]-1*floor(?{modif|0})+100*(1-{{[[@{epee}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{epee}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{epee}+floor(?{modif|0}),0}>20}]]+[[{{[[@{epee}+floor(?{modif|0})]],0}>21}*([[@{epee}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:120px;'>lance</label>
            <input style='display:inline;' type="number" name="attr_lance" class="sheet-comp" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-lance'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestLance'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence de combat}} {{carac_name= LANCE}}{{carac_value=[[@{lance}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{lance}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{lance}+floor(?{modif|0})]],0}>21}*([[@{lance}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{lance},0}>21}*(20-{{floor(?{modif|0})+@{lance},0}>21}*(@{lance}+floor(?{modif|0})-20))+{{@{lance}+floor(?{modif|0}),30}<20}*(@{lance}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{lance}+floor(?{modif|0}),0}>1)*(@{lance}+floor(?{modif|0}))]]cs>[[(40-[[@{lance}]]-1*floor(?{modif|0})+100*(1-{{[[@{lance}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{lance}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{lance}+floor(?{modif|0}),0}>20}]]+[[{{[[@{lance}+floor(?{modif|0})]],0}>21}*([[@{lance}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:120px;'>épieu</label>
            <input style='display:inline;' type="number" name="attr_epieu" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-epieu'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestEpieu'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence de combat}} {{carac_name= EPIEU}}{{carac_value=[[@{epieu}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{epieu}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{epieu}+floor(?{modif|0})]],0}>21}*([[@{epieu}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{epieu},0}>21}*(20-{{floor(?{modif|0})+@{epieu},0}>21}*(@{epieu}+floor(?{modif|0})-20))+{{@{epieu}+floor(?{modif|0}),30}<20}*(@{epieu}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{epieu}+floor(?{modif|0}),0}>1)*(@{epieu}+floor(?{modif|0}))]]cs>[[(40-[[@{epieu}]]-1*floor(?{modif|0})+100*(1-{{[[@{epieu}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{epieu}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{epieu}+floor(?{modif|0}),0}>20}]]+[[{{[[@{epieu}+floor(?{modif|0})]],0}>21}*([[@{epieu}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>

            <label style='display:inline-block;  width:120px; '>dague</label>
            <input style='display:inline;' type="number" name="attr_dague" value="0"/>
            <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox' name='attr_CB-dague'
                   value='1'/>
            <button class='sheet-dice-button' type='roll' name='roll_TestDague'
                    value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence de combat}} {{carac_name= DAGUE}}{{carac_value=[[@{dague}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{dague}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{dague}+floor(?{modif|0})]],0}>21}*([[@{dague}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{dague},0}>21}*(20-{{floor(?{modif|0})+@{dague},0}>21}*(@{dague}+floor(?{modif|0})-20))+{{@{dague}+floor(?{modif|0}),30}<20}*(@{dague}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{dague}+floor(?{modif|0}),0}>1)*(@{dague}+floor(?{modif|0}))]]cs>[[(40-[[@{dague}]]-1*floor(?{modif|0})+100*(1-{{[[@{dague}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{dague}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{dague}+floor(?{modif|0}),0}>20}]]+[[{{[[@{dague}+floor(?{modif|0})]],0}>21}*([[@{dague}+floor(?{modif|0})]]-20)]]]]}}'></button>
            <br/>
            <!-- additional skills -->
            <div class="rc-tiny">
                <fieldset class="repeating_comp" style="margin-top:-20px;">
                    <input style='display:inline-block;  width:130px; background: transparent; border: none;  margin-bottom:5px; text-align:left; font-size:1em; '
                           name="attr_CCname" type='text' value="compétence">
                    <input style='display:inline;' type="number" name="attr_CCvalue" class="sheet-comp" value="10"/>
                    <input style='display:inline;  margin-left: 10px; margin-right: 10px;' type='checkbox'
                           name='attr_CB-CCname' value='1'/>
                    <button class='sheet-dice-button' type='roll' name='roll_TestCC'
                            value='&{template:pendragon} {{perso=@{MONNOM}}} {{carac_type= compétence de combat}} {{carac_name= @{CCname}}}{{carac_value=[[@{CCvalue}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{CCvalue}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{CCvalue}+floor(?{modif|0})]],0}>21}*([[@{CCvalue}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{CCvalue},0}>21}*(20-{{floor(?{modif|0})+@{CCvalue},0}>21}*(@{CCvalue}+floor(?{modif|0})-20))+{{@{CCvalue}+floor(?{modif|0}),30}<20}*(@{CCvalue}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{CCvalue}+floor(?{modif|0}),0}>1)*(@{CCvalue}+floor(?{modif|0}))]]cs>[[(40-[[@{CCvalue}]]-1*floor(?{modif|0})+100*(1-{{[[@{CCvalue}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{CCvalue}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{CCvalue}+floor(?{modif|0}),0}>20}]]+[[{{[[@{CCvalue}+floor(?{modif|0})]],0}>21}*([[@{CCvalue}+floor(?{modif|0})]]-20)]]]]}}'></button>
                </fieldset>
            </div>

            <h2>Joutes</h2>
            <div>
                <div><label>Victoires / Défaites</label></div>
                <input class="sheet-comp" style="margin-left: 20px;"
                       name="attr_JouteV" type='number' value="0"><label> / </label><input
                    class="sheet-comp"
                    name="attr_JouteD" type='number' value="0">
            </div>

            <h2>Montures</h2>
            <div>
                <h4 style="margin: 10px;">Monture principale</h4>
                <div class="sheet-border">
                    <div class="sheet-item-line">
                        <input class="sheet-tiny sheet-field-width-m"
                               name="attr_Htype" type='text' placeholder="type (destrier...)">
                        <input class="sheet-comp sheet-tiny sheet-italic sheet-field-width-m" type="text"
                               name="attr_Hname" value="nom"/>
                        monté<input type='radio' value='2' name='attr_Hloc' checked='true'/>réserve<input type='radio'
                                                                                                          value='1'
                                                                                                          name='attr_Hloc'/>écurie<input
                            type='radio'
                            value='0'
                            name='attr_Hloc'/>
                    </div>
                    <div class="sheet-item-line">
                        <label class="sheet-tiny">Dégats</label> <input class="sheet-tiny" type="number"
                                                                        name="attr_HDEG" class="sheet-comp" value="0"/>
                        <button class='sheet-dice-button' type='roll' name='roll_TestDegatsH'
                                value='&{template:pendragon-degats} {{perso=@{MONNOM}}} {{typecheval=@{Htype}}} {{nomcheval=@{Hname}}}{{nbdes= [[@{HDEG}]] }} {{roll= [[[[@{HDEG}]]d6]]}}'></button>
                        <div class="sheet-spacer-15">&nbsp;</div>
                        <label class="sheet-tiny">Crit.</label>
                        <button class='sheet-dice-button' type='roll' name='roll_TestDegatsCritH'
                                value='&{template:pendragon-degats} {{perso=@{MONNOM}}} {{typecheval=@{Htype}}} {{nomcheval=@{Hname}}}{{critique= oui}}{{nbdes= [[@{HDEG}*2]] }} {{roll= [[[[@{HDEG}*2]]d6]]}}'></button>
                        <div class="sheet-spacer-15">&nbsp;</div>
                        <label class="sheet-tiny">Mouvement</label> <input class="sheet-tiny" type="number"
                                                                           name="attr_Hmvt" class="sheet-comp"
                                                                           value="0"/>
                    </div>
                    <div class="sheet-item-line">
                        <label class="sheet-tiny">TAI</label> <input class="sheet-comp sheet-tiny" type="number"
                                                                     name="attr_HTAI" value="0"/>
                        <div class="sheet-spacer-15">&nbsp;</div>
                        <label class="sheet-tiny">CON</label> <input class="sheet-comp sheet-tiny" type="number"
                                                                     name="attr_HCON" value="0"/>
                        <button class='sheet-dice-button' type='roll' name='roll_TestHCON'
                                value='&{template:pendragon} {{perso=@{Htype} @{Hname}}} {{carac_type= caractéristique}} {{carac_name= CONSTITUTION}}{{carac_value=[[@{HCON}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{HCON}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{HCON}+floor(?{modif|0})]],0}>21}*([[@{HCON}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{HCON},0}>21}*(20-{{floor(?{modif|0})+@{HCON},0}>21}*(@{HCON}+floor(?{modif|0})-20))+{{@{HCON}+floor(?{modif|0}),30}<20}*(@{HCON}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{HCON}+floor(?{modif|0}),0}>1)*(@{HCON}+floor(?{modif|0}))]]cs>[[(40-[[@{HCON}]]-1*floor(?{modif|0})+100*(1-{{[[@{HCON}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{HCON}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{HCON}+floor(?{modif|0}),0}>20}]]+[[{{[[@{HCON}+floor(?{modif|0})]],0}>21}*([[@{HCON}+floor(?{modif|0})]]-20)]]]]}}'></button>
                        <div class="sheet-spacer-15">&nbsp;</div>
                        <label class="sheet-tiny">DEX</label> <input class="sheet-comp sheet-tiny" type="number"
                                                                     name="attr_HDEX" value="0"/>
                        <button class='sheet-dice-button' type='roll' name='roll_TestHDEX'
                                value='&{template:pendragon} {{perso=@{Htype} @{Hname}}} {{carac_type= caractéristique}} {{carac_name= DEXTERITE}}{{carac_value=[[@{HDEX}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{HDEX}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{HDEX}+floor(?{modif|0})]],0}>21}*([[@{HDEX}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{HDEX},0}>21}*(20-{{floor(?{modif|0})+@{HDEX},0}>21}*(@{HDEX}+floor(?{modif|0})-20))+{{@{HDEX}+floor(?{modif|0}),30}<20}*(@{HDEX}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{HDEX}+floor(?{modif|0}),0}>1)*(@{HDEX}+floor(?{modif|0}))]]cs>[[(40-[[@{HDEX}]]-1*floor(?{modif|0})+100*(1-{{[[@{HDEX}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{HDEX}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{HDEX}+floor(?{modif|0}),0}>20}]]+[[{{[[@{HDEX}+floor(?{modif|0})]],0}>21}*([[@{HDEX}+floor(?{modif|0})]]-20)]]]]}}'></button>
                    </div>
                    <div class="sheet-item-line">
                        <label class="sheet-tiny">PV</label> <input class="sheet-comp sheet-tiny" type="number"
                                                                    name="attr_HPV" value="0"/>
                        <label class="sheet-tiny">Armure</label> <input class="sheet-comp sheet-tiny" type="number"
                                                                        name="attr_HPROT" value="0"/>
                    </div>
                </div>
            </div>
            <div>
                <h4 style="margin: 10px;">Autres montures</h4>

                <fieldset class="repeating_horse" style="margin-top:-20px;">
                    <div class="sheet-border">
                        <div class="sheet-item-line">
                            <input class="sheet-tiny sheet-field-width-m"
                                   name="attr_RHtype" type='text' placeholder="type (destrier...)">
                            <input class="sheet-comp sheet-tiny sheet-italic sheet-field-width-m" type="text"
                                   name="attr_RHname" value="nom"/>
                            monté<input type='radio' value='2' name='attr_RHloc'/>réserve<input
                                type='radio' value='1'
                                name='attr_RHloc'/>écurie<input
                                type='radio'
                                value='0'
                                name='attr_RHloc'
                                checked='true'/>
                        </div>
                        <div class="sheet-item-line">
                            <label class="sheet-tiny">Dégats</label> <input class="sheet-tiny" type="number"
                                                                            name="attr_RHDEG" class="sheet-comp"
                                                                            value="0"/>
                            <button class='sheet-dice-button' type='roll' name='roll_RTestDegatsH'
                                    value='&{template:pendragon-degats} {{perso=@{MONNOM}}} {{typecheval=@{RHtype}}} {{nomcheval=@{RHname}}}{{nbdes= [[@{RHDEG}]] }} {{roll= [[[[@{RHDEG}]]d6]]}}'></button>
                            <div class="sheet-spacer-15">&nbsp;</div>
                            <label class="sheet-tiny">Crit.</label>
                            <button class='sheet-dice-button' type='roll' name='roll_RTestDegatsCritH'
                                    value='&{template:pendragon-degats} {{perso=@{MONNOM}}} {{typecheval=@{RHtype}}} {{nomcheval=@{RHname}}}{{critique= oui}}{{nbdes= [[@{RHDEG}*2]] }} {{roll= [[[[@{RHDEG}*2]]d6]]}}'></button>
                            <div class="sheet-spacer-15">&nbsp;</div>
                            <label class="sheet-tiny">Mouvement</label> <input class="sheet-tiny" type="number"
                                                                               name="attr_RHmvt" class="sheet-comp"
                                                                               value="0"/>
                        </div>
                        <div class="sheet-item-line">
                            <label class="sheet-tiny">TAI</label> <input class="sheet-comp sheet-tiny" type="number"
                                                                         name="attr_RHTAI" value="0"/>
                            <div class="sheet-spacer-15">&nbsp;</div>
                            <label class="sheet-tiny">CON</label> <input class="sheet-comp sheet-tiny" type="number"
                                                                         name="attr_RHCON" value="0"/>
                            <button class='sheet-dice-button' type='roll' name='roll_TestHCON'
                                    value='&{template:pendragon} {{perso=@{RHtype} @{RHname}}} {{carac_type= caractéristique}} {{carac_name= CONSTITUTION}}{{carac_value=[[@{RHCON}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{RHCON}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{RHCON}+floor(?{modif|0})]],0}>21}*([[@{RHCON}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{RHCON},0}>21}*(20-{{floor(?{modif|0})+@{RHCON},0}>21}*(@{RHCON}+floor(?{modif|0})-20))+{{@{RHCON}+floor(?{modif|0}),30}<20}*(@{RHCON}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{RHCON}+floor(?{modif|0}),0}>1)*(@{RHCON}+floor(?{modif|0}))]]cs>[[(40-[[@{RHCON}]]-1*floor(?{modif|0})+100*(1-{{[[@{RHCON}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{RHCON}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{RHCON}+floor(?{modif|0}),0}>20}]]+[[{{[[@{RHCON}+floor(?{modif|0})]],0}>21}*([[@{RHCON}+floor(?{modif|0})]]-20)]]]]}}'></button>
                            <div class="sheet-spacer-15">&nbsp;</div>
                            <label class="sheet-tiny">DEX</label> <input class="sheet-comp sheet-tiny" type="number"
                                                                         name="attr_RHDEX" value="0"/>
                            <button class='sheet-dice-button' type='roll' name='roll_TestHDEX'
                                    value='&{template:pendragon} {{perso=@{RHtype} @{RHname}}} {{carac_type= caractéristique}} {{carac_name= DEXTERITE}}{{carac_value=[[@{RHDEX}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{RHDEX}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{RHDEX}+floor(?{modif|0})]],0}>21}*([[@{RHDEX}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{RHDEX},0}>21}*(20-{{floor(?{modif|0})+@{RHDEX},0}>21}*(@{RHDEX}+floor(?{modif|0})-20))+{{@{RHDEX}+floor(?{modif|0}),30}<20}*(@{RHDEX}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{RHDEX}+floor(?{modif|0}),0}>1)*(@{RHDEX}+floor(?{modif|0}))]]cs>[[(40-[[@{RHDEX}]]-1*floor(?{modif|0})+100*(1-{{[[@{RHDEX}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{RHDEX}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{RHDEX}+floor(?{modif|0}),0}>20}]]+[[{{[[@{RHDEX}+floor(?{modif|0})]],0}>21}*([[@{RHDEX}+floor(?{modif|0})]]-20)]]]]}}'></button>
                        </div>
                        <div class="sheet-item-line">
                            <label class="sheet-tiny">PV</label> <input class="sheet-comp sheet-tiny" type="number"
                                                                        name="attr_RHPV" value="0"/>
                            <label class="sheet-tiny">Armure</label> <input class="sheet-comp sheet-tiny" type="number"
                                                                            name="attr_RHPROT" value="0"/>
                        </div>
                    </div>
                </fieldset>
            </div>

            <h2>Equipement</h2>

            <fieldset class="repeating_equipement" style="margin-top:-20px;">
                <input style='display:inline-block;  width:130px; background: transparent; border: none;  margin-bottom:5px;  text-align:left; font-size:1em; '
                       name="attr_CCname" type='text' value="matériel">
                <input style='display:inline-block;  width:80px;' type="text" name="attr_CCvalue" class="sheet-comp"
                       value="carac."/>
                Porté<input type='radio' value='2' name='attr_loc'/>Sac<input type='radio' value='1' name='attr_loc'
                                                                              checked='true'/>Maison<input type='radio'
                                                                                                           value='0'
                                                                                                           name='attr_loc'
                                                                                                           checked='true'/>
                <br/>
            </fieldset>
        </div>
    </div>
</div>

<div class="sheet-tab-content sheet-tab4" style="align:center;">
    <h2 style="margin: 10px;">Mes gens</h2>
    <div>
        <table class="sheet-gens">
            <tr>
                <th class="sheet-table-col1">Nom</th>
                <th class="sheet-table-col2">Rôle</th>
                <th class="sheet-table-col3">Compétences</th>
                <th class="sheet-table-col4">Notes</th>
            </tr>
        </table>
        <fieldset class="repeating_gens" style="vertical-align:top; border: 2px solid black; padding: 5px;">
            <table class="sheet-gens">
                <tr>
                    <td class="sheet-table-col1">
                        <input type="text" name="attr_GNom"/>
                    </td>
                    <td class="sheet-table-col2">
                        <input type="text" name="attr_GRole"/>
                    </td>
                    <td class="sheet-table-col3">
                        <div>
                            <div><input type="text" name="attr_GCName1"/>
                                <input type="number" name="attr_GCValue1" value="0"/>
                                <input type='checkbox' name='attr_GC-CB1' value='1'/>
                                <button class='sheet-dice-button' type='roll' name='roll_TestGC1'
                                        value='&{template:pendragon} {{perso=@{GNom}, @{GRole}}} {{carac_type= compétence}} {{carac_name= @{GCName1}}}{{carac_value=[[@{GCValue1}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{GCValue1}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{GCValue1}+floor(?{modif|0})]],0}>21}*([[@{GCValue1}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{GCValue1},0}>21}*(20-{{floor(?{modif|0})+@{GCValue1},0}>21}*(@{GCValue1}+floor(?{modif|0})-20))+{{@{GCValue1}+floor(?{modif|0}),30}<20}*(@{GCValue1}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{GCValue1}+floor(?{modif|0}),0}>1)*(@{GCValue1}+floor(?{modif|0}))]]cs>[[(40-[[@{GCValue1}]]-1*floor(?{modif|0})+100*(1-{{[[@{GCValue1}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{GCValue1}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{GCValue1}+floor(?{modif|0}),0}>20}]]+[[{{[[@{GCValue1}+floor(?{modif|0})]],0}>21}*([[@{GCValue1}+floor(?{modif|0})]]-20)]]]]}}'></button>
                                <br/>
                            </div>
                            <div><input type="text" name="attr_GCName2"/>
                                <input type="number" name="attr_GCValue2" value="0"/>
                                <input type='checkbox' name='attr_GC-CB2' value='1'/>
                                <button class='sheet-dice-button' type='roll' name='roll_TestGC2'
                                        value='&{template:pendragon} {{perso=@{GNom}, @{GRole}}} {{carac_type= compétence}} {{carac_name= @{GCName2}}}{{carac_value=[[@{GCValue2}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{GCValue2}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{GCValue2}+floor(?{modif|0})]],0}>21}*([[@{GCValue2}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{GCValue2},0}>21}*(20-{{floor(?{modif|0})+@{GCValue2},0}>21}*(@{GCValue2}+floor(?{modif|0})-20))+{{@{GCValue2}+floor(?{modif|0}),30}<20}*(@{GCValue2}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{GCValue2}+floor(?{modif|0}),0}>1)*(@{GCValue2}+floor(?{modif|0}))]]cs>[[(40-[[@{GCValue2}]]-1*floor(?{modif|0})+100*(1-{{[[@{GCValue2}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{GCValue2}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{GCValue2}+floor(?{modif|0}),0}>20}]]+[[{{[[@{GCValue2}+floor(?{modif|0})]],0}>21}*([[@{GCValue2}+floor(?{modif|0})]]-20)]]]]}}'></button>
                                <br/>
                            </div>
                            <div><input class="sheet-inline" type="text" name="attr_GCName3"/>
                                <input class="sheet-inline" type="number" name="attr_GCValue3" value="0"/>
                                <input class="sheet-inline" type='checkbox' name='attr_GC-CB3' value='1'/>
                                <button class='sheet-inline sheet-dice-button' type='roll' name='roll_TestGC3'
                                        value='&{template:pendragon} {{perso=@{GNom}, @{GRole}}} {{carac_type= compétence}} {{carac_name= @{GCName3}}}{{carac_value=[[@{GCValue3}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{GCValue3}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{GCValue3}+floor(?{modif|0})]],0}>21}*([[@{GCValue3}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{GCValue3},0}>21}*(20-{{floor(?{modif|0})+@{GCValue3},0}>21}*(@{GCValue3}+floor(?{modif|0})-20))+{{@{GCValue3}+floor(?{modif|0}),30}<20}*(@{GCValue3}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{GCValue3}+floor(?{modif|0}),0}>1)*(@{GCValue3}+floor(?{modif|0}))]]cs>[[(40-[[@{GCValue3}]]-1*floor(?{modif|0})+100*(1-{{[[@{GCValue3}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{GCValue3}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{GCValue3}+floor(?{modif|0}),0}>20}]]+[[{{[[@{GCValue3}+floor(?{modif|0})]],0}>21}*([[@{GCValue3}+floor(?{modif|0})]]-20)]]]]}}'></button>
                                <br/>
                            </div>
                        </div>
                    </td>
                    <td class="sheet-table-col4">
                        <textarea type="text" name="attr_GN"/></textarea>
                    </td>
                </tr>
            </table>
        </fieldset>
    </div>

    <h2 style="margin: 10px;">Famille</h2>

    <div>
        <table class="sheet-gens">
            <tr>
                <th class="sheet-table-col1">Nom</th>
                <th class="sheet-table-col2">Rôle</th>
                <th class="sheet-table-col3">Compétences</th>
                <th class="sheet-table-col4">Notes</th>
            </tr>
        </table>
        <fieldset class="repeating_famille" style="vertical-align:top; border: 2px solid black; padding: 5px;">
            <table class="sheet-gens">
                <tr>
                    <td class="sheet-table-col1">
                        <input type="text" name="attr_FNom"/>
                    </td>
                    <td class="sheet-table-col2">
                        <input type="text" name="attr_FRole"/>
                    </td>
                    <td class="sheet-table-col3">
                        <div>
                            <div><input type="text" name="attr_FCName1"/>
                                <input type="number" name="attr_FCValue1" value="0"/>
                                <input type='checkbox' name='attr_FC-CB1' value='1'/>
                                <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                                        value='&{template:pendragon} {{perso=@{FNom}, @{FRole}}} {{carac_type= compétence}} {{carac_name= @{FCName1}}}{{carac_value=[[@{FCValue1}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{FCValue1}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{FCValue1}+floor(?{modif|0})]],0}>21}*([[@{FCValue1}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{FCValue1},0}>21}*(20-{{floor(?{modif|0})+@{FCValue1},0}>21}*(@{FCValue1}+floor(?{modif|0})-20))+{{@{FCValue1}+floor(?{modif|0}),30}<20}*(@{FCValue1}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{FCValue1}+floor(?{modif|0}),0}>1)*(@{FCValue1}+floor(?{modif|0}))]]cs>[[(40-[[@{FCValue1}]]-1*floor(?{modif|0})+100*(1-{{[[@{FCValue1}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{FCValue1}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{FCValue1}+floor(?{modif|0}),0}>20}]]+[[{{[[@{FCValue1}+floor(?{modif|0})]],0}>21}*([[@{FCValue1}+floor(?{modif|0})]]-20)]]]]}}'></button>
                                <br/>
                            </div>
                            <div><input type="text" name="attr_FCName2"/>
                                <input type="number" name="attr_FCValue2" value="0"/>
                                <input type='checkbox' name='attr_FC-CB2' value='1'/>
                                <button class='sheet-dice-button' type='roll' name='roll_TestFOR'
                                        value='&{template:pendragon} {{perso=@{FNom}, @{FRole}}} {{carac_type= compétence}} {{carac_name= @{FCName2}}}{{carac_value=[[@{FCValue2}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{FCValue2}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{FCValue2}+floor(?{modif|0})]],0}>21}*([[@{FCValue2}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{FCValue2},0}>21}*(20-{{floor(?{modif|0})+@{FCValue2},0}>21}*(@{FCValue2}+floor(?{modif|0})-20))+{{@{FCValue2}+floor(?{modif|0}),30}<20}*(@{FCValue2}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{FCValue2}+floor(?{modif|0}),0}>1)*(@{FCValue2}+floor(?{modif|0}))]]cs>[[(40-[[@{FCValue2}]]-1*floor(?{modif|0})+100*(1-{{[[@{FCValue2}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{FCValue2}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{FCValue2}+floor(?{modif|0}),0}>20}]]+[[{{[[@{FCValue2}+floor(?{modif|0})]],0}>21}*([[@{FCValue2}+floor(?{modif|0})]]-20)]]]]}}'></button>
                                <br/>
                            </div>
                            <div><input class="sheet-inline" type="text" name="attr_FCName3"/>
                                <input class="sheet-inline" type="number" name="attr_FCValue3" value="0"/>
                                <input class="sheet-inline" type='checkbox' name='attr_FC-CB3' value='1'/>
                                <button class='sheet-inline sheet-dice-button' type='roll' name='roll_TestFOR'
                                        value='&{template:pendragon} {{perso=@{FNom}, @{FRole}}} {{carac_type= compétence}} {{carac_name= @{FCName3}}}{{carac_value=[[@{FCValue3}]]}} {{modif_context=[[floor(?{modif|0})]]}} {{carac_modifiee= [[@{FCValue3}+ floor(?{modif|0})]]}} {{bonus_expert= [[{{[[@{FCValue3}+floor(?{modif|0})]],0}>21}*([[@{FCValue3}+floor(?{modif|0})]]-20)]]}} {{seuil= [[{{floor(?{modif|0})+@{FCValue3},0}>21}*(20-{{floor(?{modif|0})+@{FCValue3},0}>21}*(@{FCValue3}+floor(?{modif|0})-20))+{{@{FCValue3}+floor(?{modif|0}),30}<20}*(@{FCValue3}+floor(?{modif|0})))]]}}{{roll= [[1d20cs[[({@{FCValue3}+floor(?{modif|0}),0}>1)*(@{FCValue3}+floor(?{modif|0}))]]cs>[[(40-[[@{FCValue3}]]-1*floor(?{modif|0})+100*(1-{{[[@{FCValue3}]]+floor(?{modif|0}),0}>21})-1)*(1-({{@{FCValue3}+floor(?{modif|0}),0}>39}))+1]]cf[[20+100*{{@{FCValue3}+floor(?{modif|0}),0}>20}]]+[[{{[[@{FCValue3}+floor(?{modif|0})]],0}>21}*([[@{FCValue3}+floor(?{modif|0})]]-20)]]]]}}'></button>
                                <br/>
                            </div>
                        </div>
                    </td>
                    <td class="sheet-table-col4">
                        <textarea type="text" name="attr_FN"/></textarea>
                    </td>
                </tr>
            </table>
        </fieldset>
    </div>
</div>

<div class="sheet-tab-content sheet-tab5">
    <label>Nom du domaine</label><input
        class="sheet-nomdom" type="text" name="attr_Dnom" class="sheet-long"/>
    <div class="sheet-inline-block">
        <label style='display:inline-block;  width:140px; text-align:right;'>Soucis du peuple</label><input
            style='display:inline-block; width:35px;' type="number" name="attr_DPsoucis" value="0"/>
    </div>
    <div class="sheet-inline-block">
        <label style='display:inline-block;  width:160px; text-align:right;'>Haine du seigneur</label><input
            style='display:inline-block; width:35px;' type="number" name="attr_Dhaine" value="0"/>
    </div>
    <label style='display:block;'>Description</label>
    <textarea class="sheet-area" type="text" name="attr_Ddesc"/></textarea>
    <label style='display:inline-block;  width:140px; '>Infrastructures</label><br/>

    <table class="sheet-infras">
        <tr>
            <th class="sheet-table-col1">Année</th>
            <th class="sheet-table-col2">Nom</th>
            <th class="sheet-table-col3">Coût</th>
            <th class="sheet-table-col4">Entretien</th>
            <th class="sheet-table-col5">Revenus</th>
            <th class="sheet-table-col6">Check</th>
            <th class="sheet-table-col7">Gloire</th>
            <th class="sheet-table-col8">Notes</th>
        </tr>
    </table>

    <fieldset class="repeating_DInf2" style="vertical-align:middle; border: 2px solid black; padding: 1px;">
        <table class="sheet-infras">
            <tr>
                <td class="sheet-table-col1">
                    <input type="text" name="attr_DIAn"/>
                </td>
                <td class="sheet-table-col2">
                    <input type="text" name="attr_DINom"/>
                </td>
                <td class="sheet-table-col3">
                    <input type="text" name="attr_DICou"/>
                </td>
                <td class="sheet-table-col4">
                    <input type="text" name="attr_DIEnt"/>
                </td>
                <td class="sheet-table-col5">
                    <input type="text" name="attr_DIRev"/>
                </td>
                <td class="sheet-table-col6">
                    <input type="text" name="attr_DICheck"/>
                </td>
                <td class="sheet-table-col7">
                    <input type="text" name="attr_DIGloire"/>
                </td>
                <td class="sheet-table-col8">
                    <textarea class="sheet-areaI" type="text" name="attr_DINote"/></textarea>
                </td>
            </tr>
        </table>
    </fieldset>

    <br/>
    <label style='display:inline-block;  width:140px; '>Maintenance</label><br/>

    <table class="sheet-maintenance">
        <tr>
            <th class="sheet-table-col1">Année</th>
            <th class="sheet-table-col2">Evènement</th>
            <th class="sheet-table-col3">Conditions</th>
            <th class="sheet-table-col4">Soin</th>
            <th class="sheet-table-col5">Gestion</th>
            <th class="sheet-table-col6">Récoltes</th>
            <th class="sheet-table-col7">Gains</th>
            <th class="sheet-table-col8">Aides</th>
            <th class="sheet-table-col9">Dépenses</th>
            <th class="sheet-table-col10">Trésor</th>
            <th class="sheet-table-col11">Construction</th>
        </tr>
    </table>

    <fieldset class="repeating_Dsaison" style="vertical-align:middle; border: 2px solid black; padding: 1px;">
        <table class="sheet-maintenance">
            <td class="sheet-table-col1">
                <input type="text" name="attr_DAn"/>
            </td>
            <td class="sheet-table-col2">
                <input type="text" name="attr_DEve"/>
            </td>
            <td class="sheet-table-col3">
                <input type="text" name="attr_DCon"/>
            </td>
            <td class="sheet-table-col4">
                <input type="text" name="attr_DSoin"/>
            </td>
            <td class="sheet-table-col5">
                <input type="text" name="attr_DGes"/>
            </td>
            <td class="sheet-table-col6">
                <select name="attr_DRec"
                        style='display:inline-block; vertical-align:top; width:80px; background:transparent; margin:0px; padding:0px;'>
                    <option value="1">I : x2.5</option>
                    <option value="2">E : x2</option>
                    <option value="3">B : x1.5</option>
                    <option value="4" selected>N : x1</option>
                    <option value="5">F : x3/4</option>
                    <option value="6">M : x1/2</option>
                    <option value="7">TM : x1/4</option>
                    <option value="8">N : x1/6</option>
                </select>
            </td>
            <td class="sheet-table-col7">
                <input type="text" name="attr_DGain"/>
            </td>
            <td class="sheet-table-col8">
                <input type="text" name="attr_DAide"/>
            </td>
            <td class="sheet-table-col9">
                <input type="text" name="attr_DDep"/>
            </td>
            <td class="sheet-table-col10">
                <input type="text" name="attr_DTre"/>
            </td>
            <td class="sheet-table-col11">
                <input type="text" name="attr_DConst"/>
            </td>
        </table>
    </fieldset>
</div>

<rolltemplate class="sheet-rolltemplate-pendragon">
    <table>
        <tr>
            <th colspan="2" class="middle border-bottom">{{perso}}</th>
        </tr>
        <tr>
            <th colspan="2" class="middle border-bottom">{{carac_type}} {{carac_name}}</th>
        </tr>
        <tr>
            <td class="titre">car.+ mod.</td>
            <td class="valeur">{{carac_value}}+({{modif_context}}) = {{carac_modifiee}}</td>
        </tr>
        <tr>
            <td class="titre">Résultat</td>
            <td class="valeur">
                {{roll}}
                {{#rollWasCrit() roll}}
                <span class="titre green ">Critique !</span>
                {{/rollWasCrit() roll}}
                {{#^rollWasCrit() roll}}
                {{#rollLess() roll carac_modifiee}}
                <span class="titre green">Réussite </span>
                {{/rollLess() roll carac_modifiee}}
                {{#rollTotal() roll 20}}
                <span class="titre red ">Fumble !</span>
                {{/rollTotal() roll 20}}
                {{#^rollTotal() roll 20}}
                {{#^rollLess() roll carac_modifiee}}
                {{#rollGreater() roll seuil}}
                <span class="titre red ">Echec</span>
                {{/rollGreater() roll seuil}}
                {{/^rollLess() roll carac_modifiee}}
                {{/^rollTotal() roll 20}}
                {{/^rollWasCrit() roll}}
            </td>
        </tr>

    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-pendragon-degats">
    <table>
        <tr>
            <th colspan="2" class="middle border-bottom">{{perso}}{{#typecheval}} charge sur son {{typecheval}}
                {{nomcheval}}. Il {{/typecheval}} porte un coup {{#critique}}terrible {{/critique}}à
                son adversaire !
            </th>
        </tr>
        <tr>
            <th colspan="2" class="middle border-bottom">DEGATS {{#critique}}CRITIQUES {{/critique}}</th>
        </tr>
        <tr>
            <td class="titre middle">{{nbdes}}d6{{#bonus}} + {{bonus}}{{/bonus}} =></td>
            <td class="valeur">
                {{roll}}
            </td>
        </tr>

    </table>
</rolltemplate>

<script type="text/worker">

    on("sheet:opened change:TEne change:TGen change:TJus change:TMis change:TMod change:TVal", function() {
        getAttrs(["TEne", "TGen", "TJus", "TMis", "TMod", "TVal"], function(values) {
            var total = Number(values.TEne) + Number(values.TGen) + Number(values.TJus) + Number(values.TMis) + Number(values.TMod) + Number(values.TVal);
            if ( total >= 96 ) {
                  setAttrs({
                      BCheInfo: "OUI",
                      BCheFlag: "1"
                  });
            }
            else {
                setAttrs({
                      BCheInfo: "NON",
                      BCheFlag: "0"
                  });
            }
       });

    });



        on("sheet:opened change:religion ", function() {
        getAttrs(["religion"], function(values) {
            switch (values.religion) {
                case "1":
                    <!--paienne-->
                     setAttrs({
                          <!--colonne de gauche-->
                          "cbTCha": 0,
                          "cbTEne": 1,
                          "cbTCle": 0,
                          "cbTGen": 1,
                          "cbTSin": 1,
                          "cbTJus": 0,
                          "cbTMis": 0,
                          "cbTMod": 0,
                          "cbTSob": 0,
                          <!--colonne de droite-->
                          "cbTLux": 1,
                          "cbTRan": 0,
                          "cbTArb": 0,
                          "cbTFie": 1,
                          "cbTPra": 0,
                          "cbTImp": 0,
                          "cbTBon": 0,
                          "BRInfo": "(+2 recup)",
                          "BR-recup": 2,
                          "BR-PV": 0,
                          "BR-degats": 0,
                          "BR-d6dom": 0,
                          "BR-mvt": 0
                    });
                break;

                case "2":
                    <!--chretienne romaine-->
                     setAttrs({
                          <!--colonne de gauche-->
                          "cbTCha": 1,
                          "cbTEne": 0,
                          "cbTCle": 1,
                          "cbTGen": 0,
                          "cbTGen": 0,
                          "cbTSin": 0,
                          "cbTJus": 0,
                          "cbTMis": 1,
                          "cbTMod": 1,
                          "cbTSob": 1,
                          <!--colonne de droite-->
                          "cbTLux": 0,
                          "cbTRan": 0,
                          "cbTArb": 0,
                          "cbTFie": 0,
                          "cbTPra": 0,
                          "cbTImp": 0,
                          "cbTBon": 0,
                          "BRInfo": "(+6 pv)",
                          "BR-recup": 0,
                          "BR-PV": 6,
                          "BR-degats": 0,
                          "BR-d6dom": 0,
                          "BR-mvt": 0
                    });
                break;

                case "3":
                    <!--chretienne bretonne-->
                     setAttrs({
                          <!--colonne de gauche-->
                          "cbTCha": 1,
                          "cbTEne": 1,
                          "cbTCle": 0,
                          "cbTGen": 1,
                          "cbTSin": 0,
                          "cbTJus": 0,
                          "cbTMis": 0,
                          "cbTMod": 1,
                          "cbTSob": 1,
                          <!--colonne de droite-->
                          "cbTLux": 0,
                          "cbTRan": 0,
                          "cbTArb": 0,
                          "cbTFie": 0,
                          "cbTPra": 0,
                          "cbTImp": 0,
                          "cbTBon": 0,
                          "BRInfo": "(+3 PV, +2 dégats)",
                          "BR-recup": 0,
                          "BR-PV": 3,
                          "BR-degats": 2,
                          "BR-d6dom": 0,
                          "BR-mvt": 0
                    });
                break;

                case "4":
                    <!--chretienne arienne-->
                     setAttrs({
                          <!--colonne de gauche-->
                          "cbTCha": 1,
                          "cbTEne": 0,
                          "cbTCle": 0,
                          "cbTGen": 0,
                          "cbTSin": 1,
                          "cbTJus": 1,
                          "cbTMis": 1,
                          "cbTMod": 0,
                          "cbTSob": 1,
                          <!--colonne de droite-->
                          "cbTLux": 0,
                          "cbTRan": 0,
                          "cbTArb": 0,
                          "cbTFie": 0,
                          "cbTPra": 0,
                          "cbTImp": 0,
                          "cbTBon": 0,
                          "BRInfo": "(+2 PV, +3 dégats)",
                          "BR-recup": 0,
                          "BR-PV": 2,
                          "BR-degats": 3,
                          "BR-d6dom": 0,
                          "BR-mvt": 0
                    });
                break;

                case "5":
                    <!--saxonne-->
                     setAttrs({
                          <!--colonne de gauche-->
                          "cbTCha": 0,
                          "cbTEne": 0,
                          "cbTCle": 0,
                          "cbTGen": 1,
                          "cbTSin": 0,
                          "cbTJus": 0,
                          "cbTMis": 0,
                          "cbTMod": 0,
                          "cbTSob": 0,
                          <!--colonne de droite-->
                          "cbTLux": 0,
                          "cbTRan": 0,
                          "cbTArb": 0,
                          "cbTFie": 1,
                          "cbTPra": 1,
                          "cbTImp": 1,
                          "cbTBon": 1,
                          "BRInfo": "(+1d6 dégâts)",
                          "BR-recup": 0,
                          "BR-PV": 0,
                          "BR-degats": 0,
                          "BR-d6dom": 1,
                          "BR-mvt": 0
                    });
                break;

                case "6":
                    <!--pictes-->
                     setAttrs({
                          <!--colonne de gauche-->
                          "cbTCha": 0,
                          "cbTEne": 0,
                          "cbTCle": 0,
                          "cbTGen": 0,
                          "cbTSin": 1,
                          "cbTJus": 0,
                          "cbTMis": 0,
                          "cbTMod": 0,
                          "cbTSob": 0,
                          <!--colonne de droite-->
                          "cbTLux": 0,
                          "cbTRan": 1,
                          "cbTArb": 1,
                          "cbTFie": 1,
                          "cbTPra": 1,
                          "cbTImp": 0,
                          "cbTBon": 0,
                          "BRInfo": "(+2 mouvement, +1 récup)",
                          "BR-recup": 1,
                          "BR-PV": 0,
                          "BR-degats": 0,
                          "BR-d6dom": 0,
                          "BR-mvt": 2
                    });
                break;

                default:
                setAttrs({
                          <!--colonne de gauche-->
                          "cbTCha": 0,
                          "cbTEne": 0,
                          "cbTCle": 0,
                          "cbTGen": 0,
                          "cbTSin": 0,
                          "cbTJus": 0,
                          "cbTMis": 0,
                          "cbTMod": 0,
                          "cbTSob": 0,
                          <!--colonne de droite-->
                          "cbTLux": 0,
                          "cbTRan": 0,
                          "cbTArb": 0,
                          "cbTFie": 0,
                          "cbTPra": 0,
                          "cbTImp": 0,
                          "cbTBon": 0,
                          "BRInfo": "(religion inconnue !)",
                          "BR-recup": 0,
                          "BR-PV": 0,
                          "BR-degats": 0,
                          "BR-d6dom": 0,
                          "BR-mvt": 0
                });
            }
       });

  });

<!--change:repeating_TD-->

     on("change:repeating_td:tdtrait", function() {
         getAttrs(["repeating_td_tdtrait" ], function(values) {
                var tabCaracs = getTabCaracs();
                setAttrs({"repeating_td_tdbase": tabCaracs[values.repeating_td_tdtrait]});
         });
    });

<!-- map name with trait caracs -->
    function getTabCaracs() {
         var tabCaracs = new Array();
         tabCaracs["@{TCha}"] = "CHASTE";
          tabCaracs["@{TLux}"] = "LUXURIEUX";
          tabCaracs["@{TEne}"] = "ENERGIQUE";
          tabCaracs["@{TPar}"] = "PARESSEUX";
          tabCaracs["@{TCle}"] = "CLEMENT";
          tabCaracs["@{TRan}"] = "RANCUNIER";
          tabCaracs["@{TGen}"] = "GENEREUX";
          tabCaracs["@{TEgo}"] = "EGOISTE";
          tabCaracs["@{TSin}"] = "SINCERE";
          tabCaracs["@{TTro}"] = "TROMPEUR";
          tabCaracs["@{TJus}"] = "JUSTE";
          tabCaracs["@{TArb}"] = "ARBITRAIRE";
          tabCaracs["@{TMis}"] = "MISERICORDIEUX";
          tabCaracs["@{TCru}"] = "CRUEL";
          tabCaracs["@{TMod}"] = "MODESTE";
          tabCaracs["@{TFie}"] = "FIER";
          tabCaracs["@{TSpi}"] = "SPIRITUEL";
          tabCaracs["@{TPra}"] = "PRAGMATIQUE";
          tabCaracs["@{TPru}"] = "PRUDENT";
          tabCaracs["@{TImp}"] = "IMPULSIF";
          tabCaracs["@{TSob}"] = "SOBRE";
          tabCaracs["@{TBon}"] = "BON VIVANT";
          tabCaracs["@{TCon}"] = "CONFIANT";
          tabCaracs["@{TMef}"] = "MEFIANT";
          tabCaracs["@{TVal}"] = "VALEUREUX";
          tabCaracs["@{TCou}"] = "COUARD";

              return tabCaracs;
    }


</script>

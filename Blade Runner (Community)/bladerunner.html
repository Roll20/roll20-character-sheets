
<!-- SHEET INFO -->
<input type="hidden" name="attr_sheetversion" value="1.00">
<input type="hidden" name="attr_version" value="0">
<input type="hidden" name="attr_newchar" value="1">


<!-- Attributes and action buttons for push mechanics -->
<input type="hidden" name="attr_pushrollname" value="Push">
<input type="hidden" name="attr_pushrollcomment" value="">
<input type="hidden" name="attr_push" value="0">
<input type="hidden" name="attr_pushdieone" value="8">
<input type="hidden" name="attr_pushdietwo" value="8">
<input type="hidden" name="attr_pushdieoner1" value="8">
<input type="hidden" name="attr_pushdieoner2" value="8">
<input type="hidden" name="attr_pushdietwor1" value="8">
<input type="hidden" name="attr_pushdietwor2" value="8">
<input type="hidden" name="attr_pushrolladv" value="0">
<button type="roll" name="roll_pushtest" value="%{@{character_name}|pushroll1}" class="hidden"></button>
<button type="roll" name="roll_push" class="hidden" hidden value="@{rollcommand} &{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{pushrollname} }} {{comment=@{pushrollcomment}}} {{push=[[(@{push}-1)]] }} {{roll-adv=[[@{pushrolladv}]] }} {{die-one-size=[[@{pushdieone}]]}} {{die-two-size=[[@{pushdietwo}]]}} {{die-one=[[1D@{pushdieone}]] }}  {{die-one-adv=[[1D@{pushdieone}]] }} {{die-two=[[1D@{pushdietwo}]] }} {{die-two-adv=[[1D@{pushdietwo}]] }} "></button>
<button type="action" name="act_pushroll" value="%{@{character_name|pushroll1}}" class="hidden" data-push-type="1" data-name="@{pushrollname}" data-comment="@{pushrollcomment}" data-die-one="@{pushdieone}" data-die-two="@{pushdietwo}" data-adv="@{pushrolladv}" data-push="@{push}" hidden></button>
<button type="action" name="act_pushroll_1" class="hidden" hidden></button>
<button type="action" name="act_pushroll_12" class="hidden" hidden></button>
<button type="action" name="act_pushroll_13" class="hidden" hidden></button>
<button type="action" name="act_pushroll_2" class="hidden" hidden></button>
<button type="action" name="act_pushroll_23" class="hidden" hidden></button>
<button type="action" name="act_pushroll_3" class="hidden" hidden></button>
<button type="action" name="act_pushroll_123" class="hidden" hidden></button>

<!-- TAB NAVIGATION -->
<input type="hidden" class="tabstoggle hidden" name="attr_sheettab" value="1" />

<div class="border-1234 main-box background">
    <!-- <div class="border-3 w100pc header light-box header">
        <div class="float-left w70pc light-box">&nbsp;</div>
        <div class="float-right w30pc light-box text-right"></div>
    </div> -->
    

    <div class="border-3 w100pc light-box">
        <div class="w40pc">
            <input type="radio" name="attr_sheettab" id="tabcharacter" value="1" class="hidden" hidden>
            <label for="tabcharacter" class="border-2 h100pc sheet-tab" data-i18n="character-sheet-u">CHARACTER SHEET</label>
            <input type="radio" name="attr_sheettab" id="tabtimereport" value="2" class="hidden" hidden>
            <label for="tabtimereport" class="border-2 h100pc sheet-tab" data-i18n="time-tracker-u">TIME TRACKER</label>
        </div>
        <div class="w60pc">
            <div class="w100pc light-box"><span class="blade-runner">BLDE RUNNER</span></div>
        </div>
    </div>
    <!-- <div class="border-3 w100pc grey-box text-center blade-runner">EARlY ACCESS</div> -->

    <div class="tab character w100pc">     
        <div class="border-23 w40pc logo light-box">
            <img src="https://github.com/dwarfwing/Blade-Runner/blob/main/images/LAPD.png?raw=true">
            <span class="profile-database" data-i18n="profile-database">Profile Database</span>
        </div>


        <div class="border-23 w40pc light-box charinfo">
            <label class="w25pc yellow yellow-border-bottom" data-i18n="name-u">NAME</label>
            <div class="w75pc">
                <input type="text" name="attr_character_name" class="w100pc-4px" />
            </div>
            <label class="w25pc yellow" data-i18n="archetype-u">ARCHETYPE</label>
            <div class="w75pc">
                <input type="text" name="attr_archetype" class="w100pc-4px" />
            </div>
        </div>
        <div class="border-3 w20pc light-box chartype">
            <div class="w50pc h100pc align-center border-2">
                <span class="w100pc text-center" data-i18n="human-u">HUMAN</span>
                <div class="w100pc text-center">
                    <input type="radio" name="attr_charactertype" value="1" class="" checked>
                </div>            
            </div>
            <div class="w50pc h100pc align-center">
                <span class="w100pc text-center" data-i18n="replicant-u">REPLICANT</span>
                <div class="w100pc text-center">
                    <input type="radio" name="attr_charactertype" value="2" class="">
                </div>            
            </div>
        </div>

        <div class="border-23 w20px">&nbsp;</div>
        <div class="border-23 w100pc-40px  key-info">
            <div class="border-2 w50pc key-memory align-top">
                <span class="w100pc" data-i18n="key-memory-u">KEY MEMORY</span>
                <textarea name="attr_keymemory" class=""></textarea>
            </div>
            <div class="w50pc key-relationship align-top">
                <span class="w100pc" data-i18n="key-relationship-u">KEY RELATIONSHIP</span>
                <textarea name="attr_keyrelationship" class=""></textarea>            
            </div>
        </div>
        <div class="border-3 w20px">&nbsp;</div>

        <div class="border-23 w20px">&nbsp;</div>
        <div class="border-23 w100pc-40px  home-info">
            <div class="border-2 w50pc home align-top">
                <span class="w100pc" data-i18n="home-u">HOME</span>            
                <textarea name="attr_homedescription" class=""></textarea>
                <!-- <div class="border-1 w100pc  force-years">Years on the force</div> -->
            </div>
            <div class="w50pc appearance align-top">
                <span class="w100pc" data-i18n="appearance-u">APPEARANCE</span>            
                <textarea name="attr_appearance" class=""></textarea>
            </div>
        </div>
        <div class="border-3 w20px">&nbsp;</div>
        
        <div class="border-23 w20px">&nbsp;</div>
        <div class="w100pc-40px">
            <div class="w50pc border-23  points">
                <div class="border-23 w50pc force-years">
                    <span class="w75pc" data-i18n="years-on-force-u">YEARS ON THE FORCE</span>
                    <input type="number" name="attr_forceyears" class="w25pc-4px text-center" />
                </div>
                <div class="border-3 w50pc promotion-points">
                    <span class="w75pc" data-i18n="promotion-points-u">PROMOTION POINTS</span>
                    <input type="number" name="attr_promotionpoints" class="w25pc-4px text-center" />
                </div>
                <div class="border-2 w50pc humanity-points">
                    <span class="w75pc" data-i18n="humanity-points-u">HUMANITY POINTS</span>
                    <input type="number" name="attr_humanitypoints" class="w25pc-4px text-center" />
                </div>
                <div class="w50pc chinyen-points">
                    <span class="w75pc" data-i18n="chinyen-points-u">CHINYEN POINTS</span>
                    <input type="number" name="attr_chinyenpoints" class="w25pc-4px text-center" />
                </div>
            </div>
            <div class="w50pc border-23 customdice">
                <div class="w25pc border-2 text-center">
                    <div class="w100pc initiative">
                        <button id="initiative-roll" type="roll" name="initiative" value="@{rollcommand} &{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Initiative }} {{roll-adv=[[0]] }} {{die-one-size=[[10]]}} {{die-one=[[1D10]] }}  {{die-one-adv=[[1D10]] }}" class="hidden" hidden></button>
                        <label for="initiative-roll" class="w100pc yellow text-center initiative-label" data-i18n="initiative-u">INITIATIVE</label>
                        <button id="initiative-token-roll" type="roll" name="initiativetoken" value="@{rollcommand} &{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Initiative }} {{roll-adv=[[0]] }} {{die-one-size=[[10]]}} {{die-one=[[1D10 &{tracker}]] }}  {{die-one-adv=[[1D10]] }}" class="hidden" hidden></button>
                        <label for="initiative-token-roll" class="w100pc yellow text-center initiative-label smaller">(<span class="initiative-label text-center yellow smaller" data-i18n="tracker-u">TRACKER</span>)</label>
                    </div>
                    <div class="w100pc-4px secretrolls">
                        <label for="secretroll" class="yellow text-center pointer" data-i18n="secret-rolls-u">SECRET ROLLS</label><input type="checkbox" id="secretroll" name="attr_secretrolls" value="1" class="text-center" unchecked>
                    </div>
                    <!-- <input type="text" name="attr_customroll_name" class="w80pc" value="Custom roll" placeholder="Custom roll"> -->
                </div>
                <div class="w50pc border-2 dice-pool">                
                    <span class="w33pc border-3 yellow smaller" data-i18n="die-one-u">DIE 1</span>
                    <span class="w34pc border-3 yellow dice-pool-header" data-i18n="dice-pool-u">DICE POOL</span>
                    <span class="w33pc border-3 yellow smaller" data-i18n="die-two-u">DIE 2</span>
                    <input type="radio" name="attr_customdieone" id="customdieone0" value="0" class="customdie" hidden>
                    <label for="customdieone0" class="customdie-label small" data-i18n="die-zero-u">X</label>
                    <input type="radio" name="attr_customdieone" id="customdieone6" value="6" class="customdie" hidden>
                    <label for="customdieone6" class="customdie-label small" data-i18n="die-six-u">D6</label>
                    <input type="radio" name="attr_customdieone" id="customdieone8" value="8" class="customdie" hidden>
                    <label for="customdieone8" class="customdie-label small" data-i18n="die-eight-u">D8</label>
                    <input type="radio" name="attr_customdieone" id="customdieone10" value="10" class="customdie" hidden>
                    <label for="customdieone10" class="customdie-label small" data-i18n="die-ten-u">D10</label>
                    <input type="radio" name="attr_customdieone" id="customdieone12" value="12" class="customdie" hidden>
                    <label for="customdieone12" class="customdie-label small" data-i18n="die-twelve-u">D12</label>
                    <span class="separator border-2">&nbsp;</span>
                    <input type="radio" name="attr_customdietwo" id="customdietwo0" value="0" class="customdie" hidden>
                    <label for="customdietwo0" class="customdie-label small" data-i18n="die-zero-u">X</label>
                    <input type="radio" name="attr_customdietwo" id="customdietwo6" value="6" class="customdie" hidden>
                    <label for="customdietwo6" class="customdie-label small" data-i18n="die-six-u">D6</label>
                    <input type="radio" name="attr_customdietwo" id="customdietwo8" value="8" class="customdie" hidden>
                    <label for="customdietwo8" class="customdie-label small" data-i18n="die-eight-u">D8</label>
                    <input type="radio" name="attr_customdietwo" id="customdietwo10" value="10" class="customdie" hidden>
                    <label for="customdietwo10" class="customdie-label small" data-i18n="die-ten-u">D10</label>
                    <input type="radio" name="attr_customdietwo" id="customdietwo12" value="12" class="customdie" hidden>
                    <label for="customdietwo12" class="customdie-label small" data-i18n="die-twelve-u">D12</label>
                </div>
                <div class="w25pc custom-roll center">
                    <div class="w100pc h50pc">
                        <input type="text" name="attr_customroll_name" class="w100pc-4px" value="Custom roll" placeholder="Custom roll">
                    </div>
                    <div class="w100pc-4px h50pc">
                        <button type="action" name="act_customrolladv" data-name="@{customroll_name}" data-die-one="@{customdieone}" data-die-two="@{customdietwo}" data-die-one-size="@{customdieone}" data-die-two-size="@{customdietwo}" data-adv="1" data-push="@{charactertype}" class="customdice-roll w25pc h100pc-4px"><span class="disadvantage-roll  smaller" data-i18n="advantage-abbr-u">ADV</span></button>
                        <!-- <button type="roll" name="custom-adv" class="customdice-roll w20pc h50pc" value="@{rollcommand} &{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{customroll_name} }} {{roll-adv=[[1]] }} {{die-one-size=[[@{customdieone}]]}} {{die-two-size=[[@{customdietwo}]]}} {{die-one=[[1D@{customdieone}]] }}  {{die-one-adv=[[1D@{customdieone}]] }} {{die-two=[[1D@{customdietwo}]] }} {{die-two-adv=[[1D@{customdietwo}]] }} ">
                            <span class="advantage-roll  smaller">ADV</span>
                        </button> -->
                        <button type="action" name="act_customroll" data-name="@{customroll_name}" data-die-one="@{customdieone}" data-die-two="@{customdietwo}" data-die-one-size="@{customdieone}" data-die-two-size="@{customdietwo}" data-adv="0" data-push="@{charactertype}" class="customdice-roll normal-roll w50pc h100pc-4px" data-i18n="roll-abbr-u">ROLL</button>
        <!--                 <button type="roll" name="custom" class="customdice-roll normal-roll w60pc h50pc " value="@{rollcommand} &{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{customroll_name} }} {{roll-adv=[[0]] }} {{die-one-size=[[@{customdieone}]]}} {{die-two-size=[[@{customdietwo}]]}} {{die-one=[[1D@{customdieone}]] }}  {{die-one-adv=[[1D@{customdieone}]] }} {{die-two=[[1D@{customdietwo}]] }} {{die-two-adv=[[1D@{customdietwo}]] }} {{button=[Push](&#37;push)}} {{push-command=push1d@{customdieone}1d@{customdietwo}adv0}}" data-i18n="roll-abbr-u">ROLL</button>
        --><!--                 <button type="roll" name="custom" class="customdice-roll normal-roll w60pc h50pc " value="@{rollcommand} &{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{customroll_name} }} {{roll-adv=[[0]] }} {{die-one-size=[[@{customdieone}]]}} {{die-two-size=[[@{customdietwo}]]}} {{die-one=[[1D@{customdieone}]] }}  {{die-one-adv=[[1D@{customdieone}]] }} {{die-two=[[1D@{customdietwo}]] }} {{die-two-adv=[[1D@{customdietwo}]] }} {{button=[Push](!&#64;{pushedrollcommand} &#64;{template:bladerunner} {{roll-adv=[[&#64;{pushedrolladv}]]}} {{die-one=1D&#64;{pusheddieone}} {{die-one-size=&#64;{pusheddieone}}} )}}" data-i18n="roll-abbr-u">ROLL</button> -->                
                        <!-- <input type="hidden" name="attr_customrolldis_action" value=""> -->
                        <button type="action" name="act_customrolldis" data-name="@{customroll_name}" data-die-one="@{customdieone}" data-die-two="@{customdietwo}" data-die-one-size="@{customdieone}" data-die-two-size="@{customdietwo}" data-adv="-1" data-push="@{charactertype}" class="customdice-roll w25pc h100pc-4px"><span class="disadvantage-roll  smaller" data-i18n="disadvantage-abbr-u">DIS</span></button>
                        <!-- <button type="roll" name="roll_customrolldis" class="customdice-roll w20pc h50pc" value="@{customrolldis_action}">
                            <span class="disadvantage-roll  smaller">DIS</span>
                        </button> -->
                    </div>
                </div>         
            </div>
        </div>
        <div class="border-3 w20px">&nbsp;</div>

        <div class="border-23 w20px">&nbsp;</div>
        <div class="border-23 w100pc-40px  attributes-skills-header">
            <div class="w75pc"><span data-i18n="attributes-skills-u">ATTRIBUTES & SKILLS</span></div>
            <!-- <div class="w25pc border-2 secretrolls">
                <span class="yellow text-center">SECRET ROLLS</span><input type="checkbox" name="attr_secretrolls" value="1" class="text-center" unchecked>
            </div> -->
            <div class="w25pc">
                <div class="w40pc"></div>
                <div class="w20pc smaller text-center rating" data-i18n="manouver-abbr-u" data-i18n-title="manouverability" title="Manouverability">MANOUVER.</div>
                <div class="w20pc border-2 smaller text-center rating" data-i18n="rating-u">RATING</div>
                <div class="w20pc smaller text-center die" data-i18n="die-u">DIE</div>
            </div>        
        </div>
        <div class="border-3 w20px">&nbsp;</div>

        <div class="border-23 w20px">&nbsp;</div>
        <div class="w100pc-40px attributes-skills">
            <div class="w25pc border-23">
                <div class="border-3 w60pc  table-header"></div>
                <div class="border-23 w20pc  table-header smaller text-center rating" data-i18n="rating-u">RATING</div>
                <div class="border-3 w20pc  table-header smaller text-center die" data-i18n="die-u">DIE</div>
                <div class="border-3 w60pc  attribute">
                    <!-- <button type="roll" id="strengthroll-adv" name="strength-roll-adv" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Strength }} {{roll-adv=[[1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[0]]}} {{die-one=[[1D@{strength}]] }} {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[0]] }} {{die-two-adv=[[0]] }}">ADV.</button>
                    --><!-- <label for="strengthroll" class="attribute yellow">STRENGTH</label> -->
                    <!-- <button type="roll" id="strengthroll-dis" name="strength-roll-dis" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Strength }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[0]]}} {{die-one=[[1D@{strength}]] }} {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[0]] }} {{die-two-adv=[[0]] }}">DIS.</button>
                    --><!-- <button type="roll" hidden name="strength-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Strength }} {{roll-adv=[[0]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[0]]}} {{die-one=[[1D@{strength}]] }} {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[0]] }} {{die-two-adv=[[0]] }}"></button>
                    --> <button type="action" name="act_strengthroll" id="strengthroll" data-name="Strength" data-die-one="@{strength}" data-die-two="0" data-die-one-size="@{strength}" data-die-two-size="0" data-adv="0" data-push="@{charactertype}" class="attribute yellow" data-i18n="strength-u">STRENGTH</button>
                    </div>
                <div class="border-3 w20pc lighter-box attribute-rank">
                    <input type="text" name="attr_strength" hidden /> 
                    <select type="text" name="attr_strength" class="w100pc-4px">
                        <option value="12">A</option>
                        <option value="10">B</option>
                        <option value="8" selected>C</option>
                        <option value="6">D</option>
                    </select>
                </div>
                <div class="border-3 w20pc lighter-box attribute-die">
                    <span type="text" name="attr_strength" class="w100pc-4px text-center attribute-d-die" disabled readonly></span>
                </div>
                <div class="w100pc  skill-row">
                    <div class="w60pc yellow-border-bottom  skill">
                        <button type="action" name="act_handtohandrolladv" data-name="Hand-to-Hand" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
        <!--                 <button type="roll" id="handtohandroll-adv" name="handtohand-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Hand-to-Hand }} {{roll-adv=[[1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }} {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1d@{handtohand}]] }} {{die-two-adv=[[1d@{handtohand}]] }}" data-i18n="advantage-abbr-u">ADV</button> -->                <!-- <label for="handtohandroll" class="yellow skill">Close&nbsp;Combat</label> -->
                        <button type="action" name="act_handtohandroll" id="handtohandroll" data-name="Hand-to-Hand" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="0" data-push="@{charactertype}" class="skill yellow" data-i18n="handtohand">Hand-to-Hand</button>
                        <button type="action" name="act_handtohandrolldis" data-name="Hand-to-Hand" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u" data-i18n="disadvantage-abbr-u">DIS</button>
                        <!-- <button type="roll" id="handtohandroll-dis" name="handtohand-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Hand-to-Hand }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }} {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1d@{handtohand}]] }} {{die-two-adv=[[1d@{handtohand}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        --><!-- <button type="roll" hidden id="handtohandroll" name="handtohand-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Hand-to-Hand }} {{roll-adv=[[0]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }} {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1d@{handtohand}]] }} {{die-two-adv=[[1d@{handtohand}]] }}"></button>
                    --></div>
                    <div class="w20pc lighter-box skill-rank">
                        <select name="attr_handtohand" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="w20pc lighter-box skill-die">
                        <span type="text" name="attr_handtohand" class="w100pc-4px skill-d-die text-center" disabled readonly></span>
                        <button type="action" name="act_handtohandrollhelp" class="w100pc help-button" data-name="Help: Hand-to-Hand" data-die-one="0" data-die-two="@{handtohand}" data-die-one-size="0" data-die-two-size="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u" data-i18n="help-u">HELP</button>
                    </div>
                </div>
                
                <div class="w100pc  skill-row">
                    <div class="w60pc yellow-border-bottom skill">
                        <button type="action" name="act_forcerolladv" data-name="Force" data-die-one="@{strength}" data-die-two="@{force}" data-die-one-size="@{strength}" data-die-two-size="@{force}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
                        <!-- <button type="roll" id="forceroll-adv" name="force-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Force }} {{roll-adv=[[1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{force}]]}} {{die-one=[[1D@{strength}]] }} {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1d@{force}]] }} {{die-two-adv=[[1d@{force}]] }}" data-i18n="advantage-abbr-u">ADV</button>
        -->             <!-- <label for="forceroll" class="yellow skill">Force</label> -->
                        <button type="action" name="act_forceroll" data-name="Force" data-die-one="@{strength}" data-die-two="@{force}" data-die-one-size="@{strength}" data-die-two-size="@{force}" data-adv="0" data-push="@{charactertype}" class="skill yellow" data-i18n="force">Force</button>
                        <button type="action" name="act_forcerolldis" data-name="Force" data-die-one="@{strength}" data-die-two="@{force}" data-die-one-size="@{strength}" data-die-two-size="@{force}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u">DIS</button>
        <!--                 <button type="roll" id="forceroll-dis" name="force-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Force }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{force}]]}} {{die-one=[[1D@{strength}]] }} {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1d@{force}]] }} {{die-two-adv=[[1d@{force}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        <button type="roll" hidden id="forceroll" name="force-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Force }} {{roll-adv=[[0]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{force}]]}} {{die-one=[[1D@{strength}]] }} {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1d@{force}]] }} {{die-two-adv=[[1d@{force}]] }}"></button>
        -->            </div>
                    <div class="w20pc lighter-box skill-rank">
                        <select name="attr_force" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="w20pc lighter-box skill-die">
                        <span type="text" name="attr_force" class="w100pc-4px skill-d-die text-center" disabled readonly></span>
                        <button type="action" name="act_forcerollhelp" class="w100pc help-button" data-name="Help: Force" data-die-one="0" data-die-two="@{force}" data-die-one-size="0" data-die-two-size="@{force}" data-die-one-size="0" data-die-two-size="@{force}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u">HELP</button>
                    </div>
                </div>
                <div class="w100pc  skill-row">
                <div class="w60pc skill">
                        <button type="action" name="act_staminarolladv" data-name="Stamina" data-die-one="@{strength}" data-die-two="@{stamina}" data-die-one-size="@{strength}" data-die-two-size="@{stamina}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
                        <!-- <button type="roll" id="staminaroll-adv" name="stamina-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Stamina }} {{roll-adv=[[0]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{stamina}]]}} {{die-one=[[1D@{strength}]] }} {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1d@{stamina}]] }} {{die-two-adv=[[1d@{stamina}]] }}" data-i18n="advantage-abbr-u">ADV</button> -->
                        <!-- <label for="staminaroll" class="yellow skill">Stamina</label> -->
                        <button type="action" name="act_staminaroll" data-name="Stamina" data-die-one="@{strength}" data-die-two="@{stamina}" data-die-one-size="@{strength}" data-die-two-size="@{stamina}" data-adv="0" data-push="@{charactertype}" class="skill yellow" data-i18n="stamina">Stamina</button>
                        <button type="action" name="act_staminarolldis" data-name="Stamina" data-die-one="@{strength}" data-die-two="@{stamina}" data-die-one-size="@{strength}" data-die-two-size="@{stamina}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u">DIS</button>
                        <!-- <button type="roll" id="staminaroll-dis" name="stamina-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Stamina }} {{roll-adv=[[0]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{stamina}]]}} {{die-one=[[1D@{strength}]] }} {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1d@{stamina}]] }} {{die-two-adv=[[1d@{stamina}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        <button type="roll" hidden id="staminaroll" name="stamina-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Stamina }} {{roll-adv=[[0]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{stamina}]]}} {{die-one=[[1D@{strength}]] }} {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1d@{stamina}]] }} {{die-two-adv=[[1d@{stamina}]] }}"></button> -->
                        
                    </div>
                    <div class="w20pc lighter-box skill-rank">
                        <select name="attr_stamina" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="w20pc lighter-box skill-die">
                        <span type="text" name="attr_stamina" class="w100pc-4px skill-d-die text-center" disabled readonly></span>
                        <button type="action" name="act_staminarollhelp" class="w100pc help-button" data-name="Help: Stamina" data-die-one="0" data-die-two="@{stamina}" data-die-one-size="0" data-die-two-size="@{stamina}" data-die-one-size="0" data-die-two-size="@{stamina}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u">HELP</button>
                    </div>
                </div>

            </div>
            <div class="w25pc border-23">
                <div class="border-3 w60pc  table-header"></div>
                <div class="border-23 w20pc  table-header smaller text-center rating" data-i18n="rating-u">RATING</div>
                <div class="border-3 w20pc  table-header smaller text-center die" data-i18n="die-u">DIE</div>

                <div class="border-3 w60pc yellow-border-bottom attribute">
                    <!-- <button type="roll" id="agilityroll-adv" name="agility-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Agility }} {{roll-adv=[[1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[0]]}} {{die-one=[[1D@{agility}]] }} {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[0]] }} {{die-two-adv=[[0]] }}" data-i18n="advantage-abbr-u">ADV</button> -->
                    <!-- <label for="agilityroll" class="yellow attribute">AGILITY</label> -->
                    <button type="action" name="act_agilityroll" data-name="Agility" data-die-one="@{agility}" data-die-two="0" data-die-one-size="@{agility}" data-die-two-size="0" data-adv="0" data-push="@{charactertype}" class="yellow attribute" data-i18n="agility">Agility</button>
                    <!-- <button type="roll" id="agilityroll-dis" name="agility-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Agility }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[0]]}} {{die-one=[[1D@{agility}]] }} {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[0]] }} {{die-two-adv=[[0]] }}" data-i18n="disadvantage-abbr-u">DIS</button> -->
                    <!-- <button type="roll" hidden id="agilityroll" name="agility-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Agility }} {{roll-adv=[[0]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[0]]}} {{die-one=[[1D@{agility}]] }} {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[0]] }} {{die-two-adv=[[0]] }}"></button> -->
                    
                </div>
                <div class="border-3 w20pc lighter-box attribute-rank">
                    <select name="attr_agility" class="w100pc-4px">
                        <option value="12">A</option>
                        <option value="10">B</option>
                        <option value="8" selected>C</option>
                        <option value="6">D</option>
                    </select>
                </div>
                <div class="border-3 w20pc lighter-box attribute-die">
                    <span type="text" name="attr_agility" class="w100pc-4px text-center attribute-d-die" disabled readonly></span>
                </div>

                <div class="w100pc  skill-row">
                    <div class="w60pc yellow-border-bottom skill">
                        <!-- <button type="roll" id="firearmsroll-adv" name="firearms-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Firearms }} {{roll-adv=[[1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }} {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }}" data-i18n="advantage-abbr-u">ADV</button>
                        <label for="firearmsroll" class="yellow skill">Firearms</label> -->
                        <button type="action" name="act_firearmsrolladv" data-name="Firearms" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
                        <button type="action" name="act_firearmsroll" data-name="Firearms" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="0" data-push="@{charactertype}" class="yellow skill" data-i18n="firearms">Firearms</button>
                        <button type="action" name="act_firearmsrolldis" data-name="Firearms" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u">DIS</button>
                        <!-- <button type="roll" id="firearmsroll-dis" name="firearms-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Firearms }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }} {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        <button type="roll" hidden id="firearmsroll" name="firearms-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Firearms }} {{roll-adv=[[0]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }} {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }}"></button> -->
                        
                    </div>
                    <div class="w20pc lighter-box skill-rank">
                        <select name="attr_firearms" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="w20pc lighter-box skill-die">
                        <span type="text" name="attr_firearms" class="w100pc-4px skill-d-die text-center" disabled readonly></span>
                        <button type="action" name="act_firearmsrollhelp" class="w100pc help-button" data-name="Help: Firearms" data-die-one="0" data-die-two="@{firearms}" data-die-one-size="0" data-die-two-size="@{firearms}" data-die-one-size="0" data-die-two-size="@{firearms}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u">HELP</button>
                    </div>
                </div>

                <div class="w100pc  skill-row">
                    <div class="w60pc yellow-border-bottom skill">
                        <!-- <button type="roll" id="mobilityroll-adv" name="mobility-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Mobility }} {{roll-adv=[[1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{mobility}]]}} {{die-one=[[1D@{agility}]] }} {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{mobility}]] }} {{die-two-adv=[[1D@{mobility}]] }}" data-i18n="advantage-abbr-u">ADV</button>
                        <label for="mobilityroll" class="yellow skill">Mobility</label> -->
                        <button type="action" name="act_mobilityrolladv" data-name="Mobility" data-die-one="@{agility}" data-die-two="@{mobility}" data-die-one-size="@{agility}" data-die-two-size="@{mobility}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
                        <button type="action" name="act_mobilityroll" data-name="Mobility" data-die-one="@{agility}" data-die-two="@{mobility}" data-die-one-size="@{agility}" data-die-two-size="@{mobility}" data-adv="0" data-push="@{charactertype}" class="yellow skill" data-i18n="mobility">Mobility</button>
                        <button type="action" name="act_mobilityrolldis" data-name="Mobility" data-die-one="@{agility}" data-die-two="@{mobility}" data-die-one-size="@{agility}" data-die-two-size="@{mobility}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u">DIS</button>
                        <!--  <button type="roll" id="mobilityroll-dis" name="mobility-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Mobility }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{mobility}]]}} {{die-one=[[1D@{agility}]] }} {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{mobility}]] }} {{die-two-adv=[[1D@{mobility}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        <button type="roll" hidden id="mobilityroll" name="mobility-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Mobility }} {{roll-adv=[[0]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{mobility}]]}} {{die-one=[[1D@{agility}]] }} {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{mobility}]] }} {{die-two-adv=[[1D@{mobility}]] }}"></button> -->
                        
                    </div>
                    <div class="w20pc lighter-box skill-rank">
                        <select name="attr_mobility" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="w20pc lighter-box skill-die">
                        <span type="text" name="attr_mobility" class="w100pc-4px skill-d-die text-center" disabled readonly></span>
                        <button type="action" name="act_mobilityrollhelp" class="w100pc help-button" data-name="Help: Mobility" data-die-one="0" data-die-two="@{mobility}" data-die-one-size="0" data-die-two-size="@{mobility}" data-die-one-size="0" data-die-two-size="@{mobility}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u">HELP</button>
                    </div>
                </div>
                <div class="w100pc  skill-row">
                    <div class="w60pc skill">
                        <!-- <button type="roll" id="stealthroll-adv" name="stealth-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Stealth }} {{roll-adv=[[1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{stealth}]]}} {{die-one=[[1D@{agility}]] }} {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{stealth}]] }} {{die-two-adv=[[1D@{stealth}]] }}" data-i18n="advantage-abbr-u">ADV</button>
                        <label for="stealthroll" class=" yellow skill">Stealth</label> -->
                        <button type="action" name="act_stealthrolladv" data-name="Stealth" data-die-one="@{agility}" data-die-two="@{stealth}" data-die-one-size="@{agility}" data-die-two-size="@{stealth}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
                        <button type="action" name="act_stealthroll" data-name="Stealth" data-die-one="@{agility}" data-die-two="@{stealth}" data-die-one-size="@{agility}" data-die-two-size="@{stealth}" data-adv="0" data-push="@{charactertype}" class="yellow skill" data-i18n="stealth">Stealth</button>
                        <button type="action" name="act_stealthrolldis" data-name="Stealth" data-die-one="@{agility}" data-die-two="@{stealth}" data-die-one-size="@{agility}" data-die-two-size="@{stealth}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u">DIS</button>
                        <!-- <button type="roll" id="stealthroll-dis" name="stealth-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Stealth }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{stealth}]]}} {{die-one=[[1D@{agility}]] }} {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{stealth}]] }} {{die-two-adv=[[1D@{stealth}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        <button type="roll" hidden id="stealthroll" name="stealth-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Stealth }} {{roll-adv=[[0]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{stealth}]]}} {{die-one=[[1D@{agility}]] }} {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{stealth}]] }} {{die-two-adv=[[1D@{stealth}]] }}"></button>                 -->
                    </div>
                    <div class="w20pc lighter-box skill-rank">
                        <select name="attr_stealth" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="w20pc lighter-box skill-die">
                        <span type="text" name="attr_stealth" class="w100pc-4px skill-d-die text-center" disabled readonly></span>
                        <button type="action" name="act_stealthrollhelp" class="w100pc help-button" data-name="Help: Stealth" data-die-one="0" data-die-two="@{stealth}" data-die-one-size="0" data-die-two-size="@{stealth}" data-die-one-size="0" data-die-two-size="@{stealth}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u">HELP</button>
                    </div>
                </div>
            </div>
            <div class="w25pc border-23">
                <div class="border-3 w60pc "></div>
                <div class="border-23 w20pc  table-header smaller text-center rating" data-i18n="rating-u">RATING</div>
                <div class="border-3 w20pc  table-header smaller text-center die" data-i18n="die-u">DIE</div>
                <div class="border-3 w60pc attribute">
                    <button type="action" name="act_intelligenceroll" data-name="Intelligence" data-die-one="@{intelligence}" data-die-two="0" data-die-one-size="@{intelligence}" data-die-two-size="0" data-adv="0" data-push="@{charactertype}" class="yellow attribute" data-i18n="intelligence">Intelligence</button>
                    <!-- <button type="roll" id="intelligenceroll-adv" name="intelligence-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Intelligence }} {{roll-adv=[[1]] }} {{die-one-size=[[@{intelligence}]]}} {{die-two-size=[[0]]}} {{die-one=[[1D@{intelligence}]] }} {{die-one-adv=[[1D@{intelligence}]] }} {{die-two=[[0]] }} {{die-two-adv=[[0]] }}" data-i18n="advantage-abbr-u">ADV</button>    
                    <label for="intelligenceroll" class=" yellow attribute">INTELLIGENCE</label>
                    <button type="roll" id="intelligenceroll-dis" name="intelligence-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Intelligence }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{intelligence}]]}} {{die-two-size=[[0]]}} {{die-one=[[1D@{intelligence}]] }} {{die-one-adv=[[1D@{intelligence}]] }} {{die-two=[[0]] }} {{die-two-adv=[[0]] }}" data-i18n="disadvantage-abbr-u">DIS</button>    
                    <button type="roll" hidden id="intelligenceroll" name="intelligence-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Intelligence }} {{roll-adv=[[0]] }} {{die-one-size=[[@{intelligence}]]}} {{die-two-size=[[0]]}} {{die-one=[[1D@{intelligence}]] }} {{die-one-adv=[[1D@{intelligence}]] }} {{die-two=[[0]] }} {{die-two-adv=[[0]] }}"></button>    -->
                </div>
                <div class="border-3 w20pc lighter-box attribute-rank">
                    <select name="attr_intelligence" class="w100pc-4px">
                        <option value="12">A</option>
                        <option value="10">B</option>
                        <option value="8" selected>C</option>
                        <option value="6">D</option>
                    </select>
                </div>
                <div class="border-3 w20pc lighter-box attribute-die">
                    <span type="text" name="attr_intelligence" class="w100pc-4px text-center attribute-d-die" disabled readonly></span>
                </div>

                <div class="w100pc  skill-row">
                    <div class="w60pc  yellow-border-bottom skill">
                        <button type="action" name="act_medicalaidrolladv" data-name="Medical Aid" data-die-one="@{intelligence}" data-die-two="@{medicalaid}" data-die-one-size="@{intelligence}" data-die-two-size="@{medicalaid}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
                        <button type="action" name="act_medicalaidroll" data-name="Medical Aid" data-die-one="@{intelligence}" data-die-two="@{medicalaid}" data-die-one-size="@{intelligence}" data-die-two-size="@{medicalaid}" data-adv="0" data-push="@{charactertype}" class="yellow skill" data-i18n="medical-aid">Medical Aid</button>
                        <button type="action" name="act_medicalaidrolldis" data-name="Medical Aid" data-die-one="@{intelligence}" data-die-two="@{medicalaid}" data-die-one-size="@{intelligence}" data-die-two-size="@{medicalaid}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u">DIS</button>
                        <!-- <button type="roll" id="medicalaidroll-adv" name="medicalaid-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Medical Aid }} {{roll-adv=[[1]] }} {{die-one-size=[[@{intelligence}]]}} {{die-two-size=[[@{medicalaid}]]}} {{die-one=[[1D@{intelligence}]] }} {{die-one-adv=[[1D@{intelligence}]] }} {{die-two=[[1D@{medicalaid}]] }} {{die-two-adv=[[1D@{medicalaid}]] }}" data-i18n="advantage-abbr-u">ADV</button>
                        <label for="medicalaidroll" class="yellow skill">Medical Aid</label>
                        <button type="roll" id="medicalaidroll-dis" name="medicalaid-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Medical Aid }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{intelligence}]]}} {{die-two-size=[[@{medicalaid}]]}} {{die-one=[[1D@{intelligence}]] }} {{die-one-adv=[[1D@{intelligence}]] }} {{die-two=[[1D@{medicalaid}]] }} {{die-two-adv=[[1D@{medicalaid}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        <button type="roll" hidden id="medicalaidroll" name="medicalaid-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Medical Aid }} {{roll-adv=[[0]] }} {{die-one-size=[[@{intelligence}]]}} {{die-two-size=[[@{medicalaid}]]}} {{die-one=[[1D@{intelligence}]] }} {{die-one-adv=[[1D@{intelligence}]] }} {{die-two=[[1D@{medicalaid}]] }} {{die-two-adv=[[1D@{medicalaid}]] }}"></button> -->
                        
                    </div>
                    <div class="w20pc lighter-box skill-rank">
                        <select name="attr_medicalaid" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="w20pc lighter-box skill-die">
                        <span type="text" name="attr_medicalaid" class="w100pc-4px skill-d-die text-center" disabled readonly></span>
                        <button type="action" name="act_medicalaidrollhelp" class="w100pc help-button" data-name="Help: Medical Aid" data-die-one="0" data-die-two="@{medicalaid}" data-die-one-size="0" data-die-two-size="@{medicalaid}" data-die-one-size="0" data-die-two-size="@{medicalaid}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u">HELP</button>
                    </div>
                </div>
                
                <div class="w100pc  skill-row">
                    <div class="w60pc  yellow-border-bottom skill">
                        <button type="action" name="act_observationrolladv" data-name="Observation" data-die-one="@{intelligence}" data-die-two="@{observation}" data-die-one-size="@{intelligence}" data-die-two-size="@{observation}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
                        <button type="action" name="act_observationroll" data-name="Observation" data-die-one="@{intelligence}" data-die-two="@{observation}" data-die-one-size="@{intelligence}" data-die-two-size="@{observation}" data-adv="0" data-push="@{charactertype}" class="yellow skill" data-i18n="observation">Observation</button>
                        <button type="action" name="act_observationrolldis" data-name="Observation" data-die-one="@{intelligence}" data-die-two="@{observation}" data-die-one-size="@{intelligence}" data-die-two-size="@{observation}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u">DIS</button>
                        <!-- <button type="roll" id="observationroll-adv" name="observation-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Observation }} {{roll-adv=[[1]] }} {{die-one-size=[[@{intelligence}]]}} {{die-two-size=[[@{observation}]]}} {{die-one=[[1D@{intelligence}]] }} {{die-one-adv=[[1D@{intelligence}]] }} {{die-two=[[1D@{observation}]] }} {{die-two-adv=[[1D@{observation}]] }}" data-i18n="advantage-abbr-u">ADV</button>
                        <label for="observationroll" class="yellow skill">Observation</label>
                        <button type="roll" id="observationroll-dis" name="observation-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Observation }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{intelligence}]]}} {{die-two-size=[[@{observation}]]}} {{die-one=[[1D@{intelligence}]] }} {{die-one-adv=[[1D@{intelligence}]] }} {{die-two=[[1D@{observation}]] }} {{die-two-adv=[[1D@{observation}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        <button type="roll" hidden id="observationroll" name="observation-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Observation }} {{roll-adv=[[0]] }} {{die-one-size=[[@{intelligence}]]}} {{die-two-size=[[@{observation}]]}} {{die-one=[[1D@{intelligence}]] }} {{die-one-adv=[[1D@{intelligence}]] }} {{die-two=[[1D@{observation}]] }} {{die-two-adv=[[1D@{observation}]] }}"></button> -->
                    </div>
                    <div class="w20pc lighter-box skill-rank">
                        <select name="attr_observation" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="w20pc lighter-box skill-die">
                        <span type="text" name="attr_observation" class="w100pc-4px skill-d-die text-center" disabled readonly></span>
                        <button type="action" name="act_observationrollhelp" class="w100pc help-button" data-name="Help: Observation" data-die-one="0" data-die-two="@{observation}" data-die-one-size="0" data-die-two-size="@{observation}" data-die-one-size="0" data-die-two-size="@{observation}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u">HELP</button>
                    </div>
                </div>
                
                <div class="w100pc  skill-row">
                    <div class="w60pc  skill">
                        <button type="action" name="act_techrolladv" data-name="Tech" data-die-one="@{intelligence}" data-die-two="@{tech}" data-die-one-size="@{intelligence}" data-die-two-size="@{tech}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
                        <button type="action" name="act_techroll" data-name="Tech" data-die-one="@{intelligence}" data-die-two="@{tech}" data-die-one-size="@{intelligence}" data-die-two-size="@{tech}" data-adv="0" data-push="@{charactertype}" class="yellow skill" data-i18n="tech">Tech</button>
                        <button type="action" name="act_techrolldis" data-name="Tech" data-die-one="@{intelligence}" data-die-two="@{tech}" data-die-one-size="@{intelligence}" data-die-two-size="@{tech}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u">DIS</button>
                        <!-- <button type="roll" id="techroll-adv" name="tech-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Tech }} {{roll-adv=[[1]] }} {{die-one-size=[[@{intelligence}]]}} {{die-two-size=[[@{tech}]]}} {{die-one=[[1D@{intelligence}]] }} {{die-one-adv=[[1D@{intelligence}]] }} {{die-two=[[1D@{tech}]] }} {{die-two-adv=[[1D@{tech}]] }}" data-i18n="advantage-abbr-u">ADV</button>
                        <label for="techroll" class="yellow skill">Tech</label>
                        <button type="roll" id="techroll-dis" name="tech-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Tech }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{intelligence}]]}} {{die-two-size=[[@{tech}]]}} {{die-one=[[1D@{intelligence}]] }} {{die-one-adv=[[1D@{intelligence}]] }} {{die-two=[[1D@{tech}]] }} {{die-two-adv=[[1D@{tech}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        <button type="roll" hidden id="techroll" name="tech-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Tech }} {{roll-adv=[[0]] }} {{die-one-size=[[@{intelligence}]]}} {{die-two-size=[[@{tech}]]}} {{die-one=[[1D@{intelligence}]] }} {{die-one-adv=[[1D@{intelligence}]] }} {{die-two=[[1D@{tech}]] }} {{die-two-adv=[[1D@{tech}]] }}"></button> -->
                    </div>
                    <div class="w20pc lighter-box skill-rank">
                        <select name="attr_tech" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="w20pc lighter-box skill-die">
                        <span type="text" name="attr_tech" class="w100pc-4px skill-d-die text-center" disabled readonly></span>
                        <button type="action" name="act_techrollhelp" class="w100pc help-button" data-name="Help: Tech" data-die-one="0" data-die-two="@{tech}" data-die-one-size="0" data-die-two-size="@{tech}" data-die-one-size="0" data-die-two-size="@{tech}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u">HELP</button>
                    </div>
                </div>            
            </div>
            <div class="w25pc border-23">
                <div class="w100pc  skill-row">
                    <div class="border-3 w40pc lighter-box skill">
                        <button type="action" name="act_drivingrolladv" data-name="Driving" data-die-one="@{manouverability}" data-die-two="@{driving}" data-die-one-size="@{manouverability}" data-die-two-size="@{driving}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
                        <button type="action" name="act_drivingroll" data-name="Driving" data-die-one="@{manouverability}" data-die-two="@{driving}" data-die-one-size="@{manouverability}" data-die-two-size="@{driving}" data-adv="0" data-push="@{charactertype}" class="yellow skill" data-i18n="driving">Driving</button>
                        <button type="action" name="act_drivingrolldis" data-name="Driving" data-die-one="@{manouverability}" data-die-two="@{driving}" data-die-one-size="@{manouverability}" data-die-two-size="@{driving}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u">DIS</button>
                        <!-- <button type="roll" id="drivingroll-adv" name="driving-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Driving }} {{roll-adv=[[1]] }} {{die-one-size=[[@{manouverability}]]}} {{die-two-size=[[@{driving}]]}} {{die-one=[[1D@{manouverability}]] }} {{die-one-adv=[[1D@{manouverability}]] }} {{die-two=[[1D@{driving}]] }} {{die-two-adv=[[1D@{driving}]] }}" data-i18n="advantage-abbr-u">ADV</button>
                        <label for="drivingroll" class="yellow skill">Driving</label>
                        <button type="roll" id="drivingroll-dis" name="driving-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Driving }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{manouverability}]]}} {{die-two-size=[[@{driving}]]}} {{die-one=[[1D@{manouverability}]] }} {{die-one-adv=[[1D@{manouverability}]] }} {{die-two=[[1D@{driving}]] }} {{die-two-adv=[[1D@{driving}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        <button type="roll" hidden id="drivingroll" name="driving-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Driving }} {{roll-adv=[[0]] }} {{die-one-size=[[@{manouverability}]]}} {{die-two-size=[[@{driving}]]}} {{die-one=[[1D@{manouverability}]] }} {{die-one-adv=[[1D@{manouverability}]] }} {{die-two=[[1D@{driving}]] }} {{die-two-adv=[[1D@{driving}]] }}"></button> -->
                    </div>
                    <div class="border-3 w20pc lighter-box skill-rank">
                        <select name="attr_manouverability" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8" selected>C</option>
                            <option value="6">D</option>
                        </select>
                    </div>
                    <div class="border-3 w20pc lighter-box skill-rank">
                        <select name="attr_driving" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="border-3 w20pc lighter-box skill-die">
                        <span type="text" name="attr_driving" class="w100pc-4px skill-d-die text-center" disabled readonly></span>
                        <button type="action" name="act_drivingrollhelp" class="w100pc help-button" data-name="Help: Driving" data-die-one="0" data-die-two="@{driving}" data-die-one-size="0" data-die-two-size="@{driving}" data-die-one-size="0" data-die-two-size="@{driving}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u">HELP</button>
                    </div>
                </div>
                
                <div class="border-3 w60pc  attribute">
                    <button type="action" name="act_empathyroll" data-name="Empathy" data-die-one="@{empathy}" data-die-two="0" data-die-one-size="@{empathy}" data-die-two-size="0" data-adv="0" data-push="@{charactertype}" class="yellow attribute" data-i18n="empathy">Empathy</button>
                    <!-- <button type="roll" id="empathyroll-adv" name="empathy-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Empathy }} {{roll-adv=[[1]] }} {{die-one-size=[[@{empathy}]]}} {{die-two-size=[[0]]}} {{die-one=[[1D@{empathy}]] }} {{die-one-adv=[[1D@{empathy}]] }} {{die-two=[[0]] }} {{die-two-adv=[[0]] }}" data-i18n="advantage-abbr-u">ADV</button>
                    <label for="empathyroll" class="yellow attribute">EMPATHY</label>
                    <button type="roll" id="empathyroll-dis" name="empathy-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Empathy }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{empathy}]]}} {{die-two-size=[[0]]}} {{die-one=[[1D@{empathy}]] }} {{die-one-adv=[[1D@{empathy}]] }} {{die-two=[[0]] }} {{die-two-adv=[[0]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                    <button type="roll" hidden id="empathyroll" name="empathy-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Empathy }} {{roll-adv=[[0]] }} {{die-one-size=[[@{empathy}]]}} {{die-two-size=[[0]]}} {{die-one=[[1D@{empathy}]] }} {{die-one-adv=[[1D@{empathy}]] }} {{die-two=[[0]] }} {{die-two-adv=[[0]] }}"></button> -->
                </div>
                <div class="border-3 w20pc lighter-box attribute-rank">
                    <select name="attr_empathy" class="w100pc-4px">
                        <option value="12">A</option>
                        <option value="10">B</option>
                        <option value="8" selected>C</option>
                        <option value="6">D</option>
                    </select>
                </div>
                <div class="border-3 w20pc lighter-box attribute-die">
                    <span type="text" name="attr_empathy" class="w100pc-4px text-center attribute-d-die" disabled readonly></span>
                </div>

                <div class="w100pc  skill-row">
                    <div class="w60pc  yellow-border-bottom skill">
                        <button type="action" name="act_connectionsrolladv" data-name="Connections" data-die-one="@{empathy}" data-die-two="@{connections}" data-die-one-size="@{empathy}" data-die-two-size="@{connections}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
                        <button type="action" name="act_connectionsroll" data-name="Connections" data-die-one="@{empathy}" data-die-two="@{connections}" data-die-one-size="@{empathy}" data-die-two-size="@{connections}" data-adv="0" data-push="@{charactertype}" class="yellow skill" data-i18n="connections">Connections</button>
                        <button type="action" name="act_connectionsrolldis" data-name="Connections" data-die-one="@{empathy}" data-die-two="@{connections}" data-die-one-size="@{empathy}" data-die-two-size="@{connections}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u">DIS</button>
                        <!-- <button type="roll" id="connectionsroll-adv" name="connections-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Connections }} {{roll-adv=[[1]] }} {{die-one-size=[[@{empathy}]]}} {{die-two-size=[[@{connections}]]}} {{die-one=[[1D@{empathy}]] }} {{die-one-adv=[[1D@{empathy}]] }} {{die-two=[[1D@{connections}]] }} {{die-two-adv=[[1D@{connections}]] }}" data-i18n="advantage-abbr-u">ADV</button>
                        <label for="connectionsroll" class="yellow skill">Connections</label>
                        <button type="roll" id="connectionsroll-dis" name="connections-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Connections }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{empathy}]]}} {{die-two-size=[[@{connections}]]}} {{die-one=[[1D@{empathy}]] }} {{die-one-adv=[[1D@{empathy}]] }} {{die-two=[[1D@{connections}]] }} {{die-two-adv=[[1D@{connections}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        <button type="roll" hidden id="connectionsroll" name="connections-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Connections }} {{roll-adv=[[0]] }} {{die-one-size=[[@{empathy}]]}} {{die-two-size=[[@{connections}]]}} {{die-one=[[1D@{empathy}]] }} {{die-one-adv=[[1D@{empathy}]] }} {{die-two=[[1D@{connections}]] }} {{die-two-adv=[[1D@{connections}]] }}"></button> -->
                    </div>
                    <div class="w20pc lighter-box skill-rank">
                        <select name="attr_connections" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="w20pc lighter-box skill-die">
                        <span type="text" name="attr_connections" class="w100pc-4px skill-d-die text-center" disabled readonly></span>
                        <button type="action" name="act_connectionsrollhelp" class="w100pc help-button" data-name="Help: Connections" data-die-one="0" data-die-two="@{connections}" data-die-one-size="0" data-die-two-size="@{connections}" data-die-one-size="0" data-die-two-size="@{connections}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u">HELP</button>
                    </div>
                </div>
                
                <div class="w100pc  skill-row">
                    <div class="w60pc  yellow-border-bottom skill">
                        <button type="action" name="act_insightrolladv" data-name="Insight" data-die-one="@{empathy}" data-die-two="@{insight}" data-die-one-size="@{empathy}" data-die-two-size="@{insight}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
                        <button type="action" name="act_insightroll" data-name="Insight" data-die-one="@{empathy}" data-die-two="@{insight}" data-die-one-size="@{empathy}" data-die-two-size="@{insight}" data-adv="0" data-push="@{charactertype}" class="yellow skill" data-i18n="insight">Insight</button>
                        <button type="action" name="act_insightrolldis" data-name="Insight" data-die-one="@{empathy}" data-die-two="@{insight}" data-die-one-size="@{empathy}" data-die-two-size="@{insight}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u">DIS</button>
                        <!-- <button type="roll" hidden id="insightroll-adv" name="insight-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Insight }} {{roll-adv=[[1]] }} {{die-one-size=[[@{empathy}]]}} {{die-two-size=[[@{insight}]]}} {{die-one=[[1D@{empathy}]] }} {{die-one-adv=[[1D@{empathy}]] }} {{die-two=[[1D@{insight}]] }} {{die-two-adv=[[1D@{insight}]] }}" data-i18n="advantage-abbr-u">ADV</button>
                        <label for="insightroll" class="yellow skill">Insight</label>
                        <button type="roll" hidden id="insightroll-dis" name="insight-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Insight }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{empathy}]]}} {{die-two-size=[[@{insight}]]}} {{die-one=[[1D@{empathy}]] }} {{die-one-adv=[[1D@{empathy}]] }} {{die-two=[[1D@{insight}]] }} {{die-two-adv=[[1D@{insight}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        <button type="roll" hidden id="insightroll" name="insight-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Insight }} {{roll-adv=[[0]] }} {{die-one-size=[[@{empathy}]]}} {{die-two-size=[[@{insight}]]}} {{die-one=[[1D@{empathy}]] }} {{die-one-adv=[[1D@{empathy}]] }} {{die-two=[[1D@{insight}]] }} {{die-two-adv=[[1D@{insight}]] }}"></button> -->
                    </div>
                    <div class="w20pc lighter-box skill-rank">
                        <select name="attr_insight" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="w20pc lighter-box skill-die">
                        <span type="text" name="attr_insight" class="w100pc-4px skill-d-die text-center" disabled readonly></span>
                        <button type="action" name="act_insightrollhelp" class="w100pc help-button" data-name="Help: Insight" data-die-one="0" data-die-two="@{insight}" data-die-one-size="0" data-die-two-size="@{insight}" data-die-one-size="0" data-die-two-size="@{insight}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u">HELP</button>
                    </div>
                </div>
                
                <div class="w100pc  skill-row">
                    <div class="w60pc  skill">
                        <button type="action" name="act_manipulationrolladv" data-name="Manipulation" data-die-one="@{empathy}" data-die-two="@{manipulation}" data-die-one-size="@{empathy}" data-die-two-size="@{manipulation}" data-adv="1" data-push="@{charactertype}" class="adv-button advantage" data-i18n="advantage-abbr-u">ADV</button>
                        <button type="action" name="act_manipulationroll" data-name="Manipulation" data-die-one="@{empathy}" data-die-two="@{manipulation}" data-die-one-size="@{empathy}" data-die-two-size="@{manipulation}" data-adv="0" data-push="@{charactertype}" class="yellow skill" data-i18n="manipulation">Manipulation</button>
                        <button type="action" name="act_manipulationrolldis" data-name="Manipulation" data-die-one="@{empathy}" data-die-two="@{manipulation}" data-die-one-size="@{empathy}" data-die-two-size="@{manipulation}" data-adv="-1" data-push="@{charactertype}" class="adv-button disadvantage" data-i18n="disadvantage-abbr-u">DIS</button>
                        <!-- <button type="roll" id="manipulationroll-adv" name="manipulation-roll" class="adv-button advantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Manipulation }} {{roll-adv=[[1]] }} {{die-one-size=[[@{empathy}]]}} {{die-two-size=[[@{manipulation}]]}} {{die-one=[[1D@{empathy}]] }} {{die-one-adv=[[1D@{empathy}]] }} {{die-two=[[1D@{manipulation}]] }} {{die-two-adv=[[1D@{manipulation}]] }}" data-i18n="advantage-abbr-u">ADV</button>
                        <label for="manipulationroll" class="yellow skill">Manipulation</label>
                        <button type="roll" id="manipulationroll-dis" name="manipulation-roll" class="adv-button disadvantage" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Manipulation }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{empathy}]]}} {{die-two-size=[[@{manipulation}]]}} {{die-one=[[1D@{empathy}]] }} {{die-one-adv=[[1D@{empathy}]] }} {{die-two=[[1D@{manipulation}]] }} {{die-two-adv=[[1D@{manipulation}]] }}" data-i18n="disadvantage-abbr-u">DIS</button>
                        <button type="roll" hidden id="manipulationroll" name="manipulation-roll" class="hidden" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Manipulation }} {{roll-adv=[[0]] }} {{die-one-size=[[@{empathy}]]}} {{die-two-size=[[@{manipulation}]]}} {{die-one=[[1D@{empathy}]] }} {{die-one-adv=[[1D@{empathy}]] }} {{die-two=[[1D@{manipulation}]] }} {{die-two-adv=[[1D@{manipulation}]] }}"></button> -->
                    </div>
                    <div class="w20pc lighter-box skill-rank">
                        <select name="attr_manipulation" class="w100pc-4px">
                            <option value="12">A</option>
                            <option value="10">B</option>
                            <option value="8">C</option>
                            <option value="6" selected>D</option>
                        </select>
                    </div>
                    <div class="w20pc lighter-box skill-die">
                        <span type="text" name="attr_manipulation" class="w100pc-4px skill-d-die text-center " disabled readonly></span>
                        <button type="action" name="act_manipulationrollhelp" class="w100pc help-button" data-name="Help: Manipulation" data-die-one="0" data-die-two="@{manipulation}" data-die-one-size="0" data-die-two-size="@{manipulation}" data-die-one-size="0" data-die-two-size="@{manipulation}" data-adv="0" data-push="@{charactertype}" data-i18n="help-u">HELP</button>
                    </div>
                </div>
                
            </div>
        </div>
        <div class="border-3 w20px">&nbsp;</div>

        <div class="border-2 w20px">&nbsp;</div>
        <div class="border-23 w100pc-40px  weapon-header">
            <div class="w20pc "><span data-i18n="weapons-u">WEAPONS</span></div> 
            <div class="w5pc  text-center smaller" data-i18n="damage-u">DAMAGE</div>
            <div class="w8pc  text-center smaller" data-i18n="crit-u">CRIT</div>
            <div class="w12pc  text-center smaller" data-i18n="type-u">TYPE</div>
            <div class="w6pc  text-center smaller" data-i18n="range-u">RANGE</div>
            <div class="w8pc  text-center smaller" data-i18n="range-min-u">MIN RANGE</div>
            <div class="w8pc  text-center smaller" data-i18n="range-max-u">MAX RANGE</div>
            <div class="w22pc  text-center smaller" data-i18n="comment-u">COMMENT</div>
        </div>
        <div class="w20px">&nbsp;</div>
        <div class="border-2 w20px">&nbsp;</div>
        <div class="border-23 w100pc-40px weapon-row">
            <div class="border-2 w20pc">
                <input type="text" spellcheck="false" name="attr_weapon1_name" class="" />
            </div>
            <div class="border-2 w5pc lighter-box">
                <input type="number" name="attr_weapon1_damage" class="w100pc-4px text-center" />
            </div>
            <div class="border-2 w8pc lighter-box">
                <select type="text" name="attr_weapon1_critdie" class="w100pc-4px" >                
                    <option value="" selected disabled></option>               
                    <option value="12" data-i18n="die-twelve-u">D12</option>
                    <option value="10" data-i18n="die-ten-u">D10</option>
                    <option value="8" data-i18n="die-eight-u">D8</option>
                    <option value="6" data-i18n="die-six-u">D6</option>
                    <option value="@{strength}" data-i18n="strength-abbr-u">STR</option>
                    <option value="0">-</option>
                </select>
            </div>
            <div class="border-2 w12pc lighter-box">
                <select type="text" name="attr_weapon1_type" class="w100pc-4px text-center" >   
                    <option value="" selected disabled></option>             
                    <option value="0" data-i18n="piercing">Piercing</option>
                    <option value="1" data-i18n="crushing">Crushing</option>
                    <option value="2" data-i18n="slashing">Slashing</option>
                    <option value="3" data-i18n="piercing-explosion">Piercing (Expl.)</option>
                    <option value="4" data-i18n="crushing-explosion">Crushing (Expl.)</option>
                </select>
            </div>
            <input type="radio" id="combatclose1" name="attr_weapon1_combattype" value="@{handtohand}" class="w3pc cc" hidden />
            <label for="combatclose1" class="border-2 w3pc toggle-box" title="Hand-to-Hand combat" data-i18n="handtohand-abbr-u" data-i18n-title="handtohand">HtH</label>
            <input type="radio" id="combatranged1" name="attr_weapon1_combattype" value="@{firearms}" class="w3pc rc" hidden checked /> 
            <label for="combatranged1" class="border-2 w3pc toggle-box" data-i18n="ranged-combat-abbr-u" data-i18n-title="ranged-combat">RC</label>
            <div class="border-2 w8pc lighter-box">
                <select type="text" name="attr_weapon1_minrange" class="w100pc-4px text-center" >   
                    <option value="" selected disabled></option>             
                    <option value="0" data-i18n="range-engaged">Engaged</option>
                    <option value="1" data-i18n="range-short">Short</option>
                    <option value="2" data-i18n="range-medium">Medium</option>
                    <option value="3" data-i18n="range-long">Long</option>
                    <option value="4" data-i18n="range-extreme">Extreme</option>
                </select>
            </div>
            <div class="border-2 w8pc lighter-box">
                <select type="text" name="attr_weapon1_maxrange" class="w100pc-4px text-center" >   
                    <option value="" selected disabled></option>             
                    <option value="0" data-i18n="range-engaged">Engaged</option>
                    <option value="1" data-i18n="range-short">Short</option>
                    <option value="2" data-i18n="range-medium">Medium</option>
                    <option value="3" data-i18n="range-long">Long</option>
                    <option value="4" data-i18n="range-extreme">Extreme</option>
                </select>
            </div>
            <div class="border-2 w21pc lighter-box">
                <input type="text" name="attr_weapon1_comment" class="w100pc-4px" />
            </div>
            <div class="w12pc lighter-box">
                <button type="action" class="w25pc h100pc smaller cc" name="act_weapon1ccrolladv" data-name="@{weapon1_name}" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="1" data-comment="@{weapon1_comment}" data-push="@{charactertype}"><span class="advantage-roll smaller" data-i18n="advantage-abbr-u">ADV</span></button></button>
                <button type="action" class="w25pc h100pc smaller rc" name="act_weapon1rcrolladv" data-name="@{weapon1_name}" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="1" data-comment="@{weapon1_comment}" data-push="@{charactertype}"><span class="advantage-roll smaller" data-i18n="advantage-abbr-u">ADV</span></button></button>
                
                <button type="action" class="w50pc h100pc cc" name="act_weapon1ccroll" data-name="@{weapon1_name}" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="0" data-comment="@{weapon1_comment}" data-push="@{charactertype}" data-i18n="roll-abbr-u">ROLL</button>
                <button type="action" class="w50pc h100pc rc" name="act_weapon1rcroll" data-name="@{weapon1_name}" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="0" data-comment="@{weapon1_comment}" data-push="@{charactertype}" data-i18n="roll-abbr-u">ROLL</button>
                
                <button type="action" class="w25pc h100pc smaller cc" name="act_weapon1ccrolldis" data-name="@{weapon1_name}" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="-1" data-comment="@{weapon1_comment}" data-push="@{charactertype}"><span class="disadvantage-roll smaller" data-i18n="disadvantage-abbr-u">DIS</span></button>
                <button type="action" class="w25pc h100pc smaller rc" name="act_weapon1rcrolldis" data-name="@{weapon1_name}" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="-1" data-comment="@{weapon1_comment}" data-push="@{charactertype}"><span class="disadvantage-roll smaller" data-i18n="disadvantage-abbr-u">DIS</span></button>
                    
                <!-- <button type="roll" name="weapon1rc-adv" class="w100pc h50pc smaller rc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon1_name} }} {{roll-adv=[[1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }}  {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }} {{comment=@{weapon1_comment} }}" data-i18n="advantage-abbr-u">ADV</button>
                <button type="roll" name="weapon1cc-adv" class="w100pc h50pc smaller cc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon1_name} }} {{roll-adv=[[1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }}  {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1D@{handtohand}]] }} {{die-two-adv=[[1D@{handtohand}]] }} {{comment=@{weapon1_comment} }}" data-i18n="advantage-abbr-u">ADV</button>
                <button type="roll" name="weapon1rc-dis" class="w100pc h50pc smaller rc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon1_name} }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }}  {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }} {{comment=@{weapon1_comment} }}" data-i18n="disadvantage-abbr-u">DIS</button>
                <button type="roll" name="weapon1cc-dis" class="w100pc h50pc smaller cc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon1_name} }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }}  {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1D@{handtohand}]] }} {{die-two-adv=[[1D@{handtohand}]] }} {{comment=@{weapon1_comment} }}" data-i18n="disadvantage-abbr-u">DIS</button> -->
            </div>
            <!--  <div class="border-23 w5pc lighter-box">
                <button type="roll" name="weapon1rc" class="w100pc h100pc rc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon1_name} }} {{roll-adv=[[0]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }}  {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }} {{comment=@{weapon1_comment} }}" data-i18n="roll-abbr-u">ROLL</button>
                <button type="roll" name="weapon1cc" class="w100pc h100pc cc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon1_name} }} {{roll-adv=[[0]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }}  {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1D@{handtohand}]] }} {{die-two-adv=[[1D@{handtohand}]] }} {{comment=@{weapon1_comment} }}" data-i18n="roll-abbr-u">ROLL</button>
            </div> -->
        </div>
        <div class="w20px">&nbsp;</div>
        <div class="border-2 w20px">&nbsp;</div>
        <div class="border-23 w100pc-40px weapon-row">
            <div class="border-2 w20pc">
                <input type="text" spellcheck="false" name="attr_weapon2_name" class="" />
            </div>
            <div class="border-2 w5pc lighter-box">
                <input type="number" name="attr_weapon2_damage" class="w100pc-4px text-center" />
            </div>
            <div class="border-2 w8pc lighter-box">
                <select type="text" name="attr_weapon2_critdie" class="w100pc-4px" >                
                    <option value="" selected disabled></option>               
                    <option value="12" data-i18n="die-twelve-u">D12</option>
                    <option value="10" data-i18n="die-ten-u">D10</option>
                    <option value="8" data-i18n="die-eight-u">D8</option>
                    <option value="6" data-i18n="die-six-u">D6</option>
                    <option value="@{strength}" data-i18n="strength-abbr-u">STR</option>
                    <option value="0">-</option>
                </select>
            </div>
            <div class="border-2 w12pc lighter-box">
                <select type="text" name="attr_weapon2_type" class="w100pc-4px text-center" >   
                    <option value="" selected disabled></option>             
                    <option value="0" data-i18n="piercing">Piercing</option>
                    <option value="1" data-i18n="crushing">Crushing</option>
                    <option value="2" data-i18n="slashing">Slashing</option>
                    <option value="3" data-i18n="piercing-explosion">Piercing (Expl.)</option>
                    <option value="4" data-i18n="crushing-explosion">Crushing (Expl.)</option>
                </select>
            </div>
            <input type="radio" id="combatclose2" name="attr_weapon2_combattype" value="@{handtohand}" class="cc" hidden />
            <label for="combatclose2" class="border-2 w3pc toggle-box" title="Hand-to-Hand combat" data-i18n="handtohand-abbr-u" data-i18n-title="handtohand">HtH</label>
            <input type="radio" id="combatranged2" name="attr_weapon2_combattype" value="@{firearms}" class="rc" hidden checked />
            <label for="combatranged2" class="border-2 w3pc toggle-box" data-i18n="ranged-combat-abbr-u" data-i18n-title="ranged-combat">RC</label>
            <div class="border-2 w8pc lighter-box">
                <select type="text" name="attr_weapon2_minrange" class="w100pc-4px text-center" >   
                    <option value="" selected disabled></option>             
                    <option value="0" data-i18n="range-engaged">Engaged</option>
                    <option value="1" data-i18n="range-short">Short</option>
                    <option value="2" data-i18n="range-medium">Medium</option>
                    <option value="3" data-i18n="range-long">Long</option>
                    <option value="4" data-i18n="range-extreme">Extreme</option>
                </select>
            </div>
            <div class="border-2 w8pc lighter-box">
                <select type="text" name="attr_weapon2_maxrange" class="w100pc-4px text-center" >   
                    <option value="" selected disabled></option>             
                    <option value="0" data-i18n="range-engaged">Engaged</option>
                    <option value="1" data-i18n="range-short">Short</option>
                    <option value="2" data-i18n="range-medium">Medium</option>
                    <option value="3" data-i18n="range-long">Long</option>
                    <option value="4" data-i18n="range-extreme">Extreme</option>
                </select>
            </div>
            <div class="border-2 w21pc lighter-box">
                <input type="text" name="attr_weapon2_comment" class="w100pc-4px" />
            </div>
            <div class="w12pc lighter-box">
                <button type="action" class="w25pc h100pc smaller cc" name="act_weapon2ccrolladv" data-name="@{weapon2_name}" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="1" data-comment="@{weapon2_comment}" data-push="@{charactertype}"><span class="advantage-roll smaller" data-i18n="advantage-abbr-u">ADV</span></button></button>
                <button type="action" class="w25pc h100pc smaller rc" name="act_weapon2rcrolladv" data-name="@{weapon2_name}" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="1" data-comment="@{weapon2_comment}" data-push="@{charactertype}"><span class="advantage-roll smaller" data-i18n="advantage-abbr-u">ADV</span></button></button>
                
                <button type="action" class="w50pc h100pc cc" name="act_weapon2ccroll" data-name="@{weapon2_name}" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="0" data-comment="@{weapon2_comment}" data-push="@{charactertype}" data-i18n="roll-abbr-u">ROLL</button>
                <button type="action" class="w50pc h100pc rc" name="act_weapon2rcroll" data-name="@{weapon2_name}" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="0" data-comment="@{weapon2_comment}" data-push="@{charactertype}" data-i18n="roll-abbr-u">ROLL</button>
                
                <button type="action" class="w25pc h100pc smaller cc" name="act_weapon2ccrolldis" data-name="@{weapon2_name}" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="-1" data-comment="@{weapon2_comment}" data-push="@{charactertype}"><span class="disadvantage-roll smaller" data-i18n="disadvantage-abbr-u">DIS</span></button>
                <button type="action" class="w25pc h100pc smaller rc" name="act_weapon2rcrolldis" data-name="@{weapon2_name}" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="-1" data-comment="@{weapon2_comment}" data-push="@{charactertype}"><span class="disadvantage-roll smaller" data-i18n="disadvantage-abbr-u">DIS</span></button>
                    
                <!-- <button type="roll" name="weapon2rc-adv" class="w100pc h50pc smaller rc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon2_name} }} {{roll-adv=[[1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }}  {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }} {{comment=@{weapon2_comment} }}" data-i18n="advantage-abbr-u">ADV</button>
                <button type="roll" name="weapon2cc-adv" class="w100pc h50pc smaller cc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon2_name} }} {{roll-adv=[[1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }}  {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1D@{handtohand}]] }} {{die-two-adv=[[1D@{handtohand}]] }} {{comment=@{weapon2_comment} }}" data-i18n="advantage-abbr-u">ADV</button>
                <button type="roll" name="weapon2rc-dis" class="w100pc h50pc smaller rc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon2_name} }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }}  {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }} {{comment=@{weapon2_comment} }}" data-i18n="disadvantage-abbr-u">DIS</button>
                <button type="roll" name="weapon2cc-dis" class="w100pc h50pc smaller cc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon2_name} }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }}  {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1D@{handtohand}]] }} {{die-two-adv=[[1D@{handtohand}]] }} {{comment=@{weapon2_comment} }}" data-i18n="disadvantage-abbr-u">DIS</button> -->
            </div>
            <!--  <div class="border-23 w5pc lighter-box">
                <button type="roll" name="weapon2rc" class="w100pc h100pc rc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon2_name} }} {{roll-adv=[[0]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }}  {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }} {{comment=@{weapon2_comment} }}" data-i18n="roll-abbr-u">ROLL</button>
                <button type="roll" name="weapon2cc" class="w100pc h100pc cc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon2_name} }} {{roll-adv=[[0]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }}  {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1D@{handtohand}]] }} {{die-two-adv=[[1D@{handtohand}]] }} {{comment=@{weapon2_comment} }}" data-i18n="roll-abbr-u">ROLL</button>
            </div> -->
        </div>
        <div class="w20px">&nbsp;</div>
        <div class="border-2 w20px">&nbsp;</div>
        <div class="border-23 border-box w100pc-40px weapon-row">
            <div class="border-2 w20pc">
                <input type="text" spellcheck="false" name="attr_weapon3_name" class="" />
            </div>
            <div class="border-2 w5pc lighter-box">
                <input type="number" name="attr_weapon3_damage" class="w100pc-4px text-center" />
            </div>
            <div class="border-23 w8pc lighter-box">
                <select type="text" name="attr_weapon3_critdie" class="w100pc-4px" >                
                    <option value="" selected disabled></option>               
                    <option value="12" data-i18n="die-twelve-u">D12</option>
                    <option value="10" data-i18n="die-ten-u">D10</option>
                    <option value="8" data-i18n="die-eight-u">D8</option>
                    <option value="6" data-i18n="die-six-u">D6</option>
                    <option value="@{strength}" data-i18n="strength-abbr-u">STR</option>
                    <option value="0">-</option>
                </select>
            </div>
            <div class="border-2 w12pc lighter-box">
                <select type="text" name="attr_weapon3_type" class="w100pc-4px text-center" >   
                    <option value="" selected disabled></option>             
                    <option value="0" data-i18n="piercing">Piercing</option>
                    <option value="1" data-i18n="crushing">Crushing</option>
                    <option value="2" data-i18n="slashing">Slashing</option>
                    <option value="3" data-i18n="piercing-explosion">Piercing (Expl.)</option>
                    <option value="4" data-i18n="crushing-explosion">Crushing (Expl.)</option>
                </select>
            </div>
            <input type="radio" id="combatclose3" name="attr_weapon3_combattype" value="@{handtohand}" class="cc" hidden />
            <label for="combatclose3" class="border-2 w3pc lighter-box toggle-box" title="Hand-to-Hand combat" data-i18n="handtohand-abbr-u" data-i18n-title="handtohand">HtH</label>
            <input type="radio" id="combatranged3" name="attr_weapon3_combattype" value="@{firearms}" class="rc" hidden checked />
            <label for="combatranged3" class="border-2 w3pc lighter-box toggle-box" title="Ranged combat" data-i18n="ranged-combat-abbr-u" data-i18n-title="ranged-combat">RC</label>
            <div class="border-2 w8pc lighter-box">
                <select type="text" name="attr_weapon3_minrange" class="w100pc-4px text-center" >   
                    <option value="" selected disabled></option>             
                    <option value="0" data-i18n="range-engaged">Engaged</option>
                    <option value="1" data-i18n="range-short">Short</option>
                    <option value="2" data-i18n="range-medium">Medium</option>
                    <option value="3" data-i18n="range-long">Long</option>
                    <option value="4" data-i18n="range-extreme">Extreme</option>
                </select>
            </div>
            <div class="border-2 w8pc lighter-box">
                <select type="text" name="attr_weapon3_maxrange" class="w100pc-4px text-center" >   
                    <option value="" selected disabled></option>             
                    <option value="0" data-i18n="range-engaged">Engaged</option>
                    <option value="1" data-i18n="range-short">Short</option>
                    <option value="2" data-i18n="range-medium">Medium</option>
                    <option value="3" data-i18n="range-long">Long</option>
                    <option value="4" data-i18n="range-extreme">Extreme</option>
                </select>
            </div>

            <div class="border-2 w21pc lighter-box">
                <input type="text" name="attr_weapon3_comment" class="w100pc-4px" />
            </div>
            <div class="w12pc lighter-box">
                <button type="action" class="w25pc h100pc smaller cc" name="act_weapon3ccrolladv" data-name="@{weapon3_name}" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="1" data-comment="@{weapon3_comment}" data-push="@{charactertype}"><span class="advantage-roll smaller" data-i18n="advantage-abbr-u">ADV</span></button>
                <button type="action" class="w25pc h100pc smaller rc" name="act_weapon3rcrolladv" data-name="@{weapon3_name}" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="1" data-comment="@{weapon3_comment}" data-push="@{charactertype}"><span class="advantage-roll smaller" data-i18n="advantage-abbr-u">ADV</span></button></button>
         
                <button type="action" class="w50pc h100pc cc" name="act_weapon3ccroll" data-name="@{weapon3_name}" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="0" data-comment="@{weapon3_comment}" data-push="@{charactertype}" data-i18n="roll-abbr-u">ROLL</button>
                <button type="action" class="w50pc h100pc rc" name="act_weapon3rcroll" data-name="@{weapon3_name}" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="0" data-comment="@{weapon3_comment}" data-push="@{charactertype}" data-i18n="roll-abbr-u">ROLL</button>
                
                <button type="action" class="w25pc h100pc smaller cc" name="act_weapon3ccrolldis" data-name="@{weapon3_name}" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="-1" data-comment="@{weapon3_comment}" data-push="@{charactertype}"><span class="disadvantage-roll smaller" data-i18n="disadvantage-abbr-u">DIS</span></button>
                <button type="action" class="w25pc h100pc smaller rc" name="act_weapon3rcrolldis" data-name="@{weapon3_name}" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="-1" data-comment="@{weapon3_comment}" data-push="@{charactertype}"><span class="disadvantage-roll smaller" data-i18n="disadvantage-abbr-u">DIS</span></button>
                    
                <!-- <button type="roll" name="weapon3rc-adv" class="w100pc h50pc smaller rc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon3_name} }} {{roll-adv=[[1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }}  {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }} {{comment=@{weapon3_comment} }}" data-i18n="advantage-abbr-u">ADV</button>
                <button type="roll" name="weapon3cc-adv" class="w100pc h50pc smaller cc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon3_name} }} {{roll-adv=[[1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }}  {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1D@{handtohand}]] }} {{die-two-adv=[[1D@{handtohand}]] }} {{comment=@{weapon3_comment} }}" data-i18n="advantage-abbr-u">ADV</button>
                <button type="roll" name="weapon3rc-dis" class="w100pc h50pc smaller rc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon3_name} }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }}  {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }} {{comment=@{weapon3_comment} }}" data-i18n="disadvantage-abbr-u">DIS</button>
                <button type="roll" name="weapon3cc-dis" class="w100pc h50pc smaller cc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon3_name} }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }}  {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1D@{handtohand}]] }} {{die-two-adv=[[1D@{handtohand}]] }} {{comment=@{weapon3_comment} }}" data-i18n="disadvantage-abbr-u">DIS</button> -->
            </div>
            <!--  <div class="border-23 w5pc lighter-box">
                <button type="roll" name="weapon3rc" class="w100pc h100pc rc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon3_name} }} {{roll-adv=[[0]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }}  {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }} {{comment=@{weapon3_comment} }}" data-i18n="roll-abbr-u">ROLL</button>
                <button type="roll" name="weapon3cc" class="w100pc h100pc cc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon3_name} }} {{roll-adv=[[0]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }}  {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1D@{handtohand}]] }} {{die-two-adv=[[1D@{handtohand}]] }} {{comment=@{weapon3_comment} }}" data-i18n="roll-abbr-u">ROLL</button>
            </div> -->
        </div>
        <div class="w20px">&nbsp;</div>
        <div class="border-23 w20px">&nbsp;</div>    
        <div class="border-3 w100pc-40px weapon-row repeating-weapons">
            <fieldset class="repeating_weapon">
                <div class="border-23 w100pc repeating-weapon">
                    <div class="border-2 w20pc">
                        <input type="text" name="attr_name" spellcheck="false" class="" />
                    </div>
                    <div class="border-2 w5pc lighter-box">
                        <input type="number" name="attr_damage" class="w100pc-4px text-center" />
                    </div>
                    <div class="border-2 w8pc lighter-box">
                        <select type="text" name="attr_critdie" class="w100pc-4px" >                
                            <option value="" selected disabled></option>               
                            <option value="12" data-i18n="die-twelve-u">D12</option>
                            <option value="10" data-i18n="die-ten-u">D10</option>
                            <option value="8" data-i18n="die-eight-u">D8</option>
                            <option value="6" data-i18n="die-six-u">D6</option>
                            <option value="@{strength}" data-i18n="strength-abbr-u">STR</option>
                            <option value="0">-</option>
                        </select>
                    </div>
                    <div class="border-2 w12pc lighter-box">
                        <select type="text" name="attr_type" class="w100pc-4px text-center" >   
                            <option value="" selected disabled></option>             
                            <option value="0" data-i18n="piercing">Piercing</option>
                            <option value="1" data-i18n="crushing">Crushing</option>
                            <option value="2" data-i18n="slashing">Slashing</option>
                            <option value="3" data-i18n="piercing-explosion">Piercing (Expl.)</option>
                            <option value="4" data-i18n="crushing-explosion">Crushing (Expl.)</option>
                        </select>
                    </div>
                    <input type="radio" name="attr_combattype" title="Hand-to-Hand combat" value="@{handtohand}" class="border-23 w3pc toggle-box repeating-toggle-box close-combat cc" />
                    <label class="border-2 w3pc toggle-box repeating-toggle-box" title="Hand-to-Hand combat" data-i18n="handtohand-abbr-u" data-i18n-title="handtohand">HtH</label>
                    <input type="radio" name="attr_combattype" title="Ranged combat" value="@{firearms}" class="border-23 w3pc toggle-box repeating-toggle-box ranged-combat rc" checked>
                    <label class="border-2 w3pc toggle-box repeating-toggle-box" data-i18n="ranged-combat-abbr-u" data-i18n-title="ranged-combat">RC</label>
                    <div class="border-2 w8pc lighter-box">
                        <select type="text" name="attr_minrange" class="w100pc-4px text-center" >   
                            <option value="" selected disabled></option>             
                            <option value="0" data-i18n="range-engaged">Engaged</option>
                            <option value="1" data-i18n="range-short">Short</option>
                            <option value="2" data-i18n="range-medium">Medium</option>
                            <option value="3" data-i18n="range-long">Long</option>
                            <option value="4" data-i18n="range-extreme">Extreme</option>
                        </select>
                    </div>
                    <div class="border-2 w8pc lighter-box">
                        <select type="text" name="attr_maxrange" class="w100pc-4px text-center" >   
                            <option value="" selected disabled></option>             
                            <option value="0" data-i18n="range-engaged">Engaged</option>
                            <option value="1" data-i18n="range-short">Short</option>
                            <option value="2" data-i18n="range-medium">Medium</option>
                            <option value="3" data-i18n="range-long">Long</option>
                            <option value="4" data-i18n="range-extreme">Extreme</option>
                        </select>
                    </div>
            <div class="border-2 w21pc lighter-box">
                <input type="text" name="attr_comment" class="w100pc-4px" />
            </div>
            <div class="w12pc lighter-box">
                <button type="action" class="w25pc h100pc smaller cc" name="act_weaponccrolladv" data-name="@{name}" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="1" data-comment="@{comment}" data-push="@{charactertype}"><span class="advantage-roll smaller" data-i18n="advantage-abbr-u">ADV</span></button></button>
                <button type="action" class="w25pc h100pc smaller rc" name="act_weaponrcrolladv" data-name="@{name}" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="1" data-comment="@{comment}" data-push="@{charactertype}"><span class="advantage-roll smaller" data-i18n="advantage-abbr-u">ADV</span></button></button>
                
                <button type="action" class="w50pc h100pc cc" name="act_weaponccroll" data-name="@{name}" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="0" data-comment="@{comment}" data-push="@{charactertype}" data-i18n="roll-abbr-u">ROLL</button>
                <button type="action" class="w50pc h100pc rc" name="act_weaponrcroll" data-name="@{name}" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="0" data-comment="@{comment}" data-push="@{charactertype}" data-i18n="roll-abbr-u">ROLL</button>
                
                <button type="action" class="w25pc h100pc smaller cc" name="act_weaponccrolldis" data-name="@{name}" data-die-one="@{strength}" data-die-two="@{handtohand}" data-die-one-size="@{strength}" data-die-two-size="@{handtohand}" data-adv="-1" data-comment="@{comment}" data-push="@{charactertype}"><span class="disadvantage-roll smaller" data-i18n="disadvantage-abbr-u">DIS</span></button>
                <button type="action" class="w25pc h100pc smaller rc" name="act_weaponrcrolldis" data-name="@{name}" data-die-one="@{agility}" data-die-two="@{firearms}" data-die-one-size="@{agility}" data-die-two-size="@{firearms}" data-adv="-1" data-comment="@{comment}" data-push="@{charactertype}"><span class="disadvantage-roll smaller" data-i18n="disadvantage-abbr-u">DIS</span></button>
                    
                <!-- <button type="roll" name="weaponrc-adv" class="w100pc h50pc smaller rc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon_name} }} {{roll-adv=[[1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }}  {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }} {{comment=@{weapon_comment} }}" data-i18n="advantage-abbr-u">ADV</button>
                <button type="roll" name="weaponcc-adv" class="w100pc h50pc smaller cc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon_name} }} {{roll-adv=[[1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }}  {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1D@{handtohand}]] }} {{die-two-adv=[[1D@{handtohand}]] }} {{comment=@{weapon_comment} }}" data-i18n="advantage-abbr-u">ADV</button>
                <button type="roll" name="weaponrc-dis" class="w100pc h50pc smaller rc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon_name} }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }}  {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }} {{comment=@{weapon_comment} }}" data-i18n="disadvantage-abbr-u">DIS</button>
                <button type="roll" name="weaponcc-dis" class="w100pc h50pc smaller cc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon_name} }} {{roll-adv=[[-1]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }}  {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1D@{handtohand}]] }} {{die-two-adv=[[1D@{handtohand}]] }} {{comment=@{weapon_comment} }}" data-i18n="disadvantage-abbr-u">DIS</button> -->
            </div>
            <!--  <div class="border-23 w5pc lighter-box">
                <button type="roll" name="weaponrc" class="w100pc h100pc rc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon_name} }} {{roll-adv=[[0]] }} {{die-one-size=[[@{agility}]]}} {{die-two-size=[[@{firearms}]]}} {{die-one=[[1D@{agility}]] }}  {{die-one-adv=[[1D@{agility}]] }} {{die-two=[[1D@{firearms}]] }} {{die-two-adv=[[1D@{firearms}]] }} {{comment=@{weapon_comment} }}" data-i18n="roll-abbr-u">ROLL</button>
                <button type="roll" name="weaponcc" class="w100pc h100pc cc" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=@{weapon_name} }} {{roll-adv=[[0]] }} {{die-one-size=[[@{strength}]]}} {{die-two-size=[[@{handtohand}]]}} {{die-one=[[1D@{strength}]] }}  {{die-one-adv=[[1D@{strength}]] }} {{die-two=[[1D@{handtohand}]] }} {{die-two-adv=[[1D@{handtohand}]] }} {{comment=@{weapon_comment} }}" data-i18n="roll-abbr-u">ROLL</button>
            </div> -->
                </div>
            </fieldset>
        </div>
        <div class="border-3 w20px">&nbsp;</div>
        

        <div class="border-23 w20px">&nbsp;</div>
        <div class="border-23 w100pc-40px">
            <div class="border-2 w33pc  align-top">
                <span class="w100pc " data-i18n="specialities-u">SPECIALITIES</span>
                <fieldset class="repeating_specialities">
                    <div class="w100pc repeating-specialities">
                        <input type="text" name="attr_name" class="w100pc-4px" />
                    </div>
                </fieldset>
                <!-- <textarea class=""></textarea> -->
            </div>
            <div class="border-2 w34pc  align-top">
                <div class="w100pc border-3">

                    <span class="w70pc  armor-header" data-i18n="armor-u">ARMOR</span>
                    <span class="w15pc  text-center armor-rating-header smaller" data-i18n="rating-u">RATING</span>
                    <span class="w10pc  text-center armor-rating-header smaller"></span>
                    <input type="text" name="attr_armorname" class="w70pc-4px border-1" />
                    <!-- <input type="number" name="attr_armorrating" class="w25pc-4px border-1" /> -->
                    <select type="text" name="attr_armorrating" class="w15pc text-center" >                
                        <option value="0" selected>-</option>               
                        <option value="12">A</option>
                        <option value="10">B</option>
                        <option value="8">C</option>
                        <option value="6">D</option>
                    </select>
                    <button type="roll" name="armor-roll" class="w10pc armor-roll" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Armor: @{armorname} }} {{roll-adv=[[0]] }} {{die-one-size=[[@{armorrating}]]}} {{die-two-size=[[@{armorrating}]]}} {{die-one=[[1D@{armorrating}]] }} {{die-one-adv=[[1D@{armorrating}]] }} {{die-two=[[1D@{armorrating}]] }} {{die-two-adv=[[1D@{armorrating}]] }}">b</button>
                    
                </div>
                <!-- <div class="w100pc border-3">
                    <span class="w100pc ">FAVORED GEAR</span>
                    <textarea name="attr_favoredgear" spellcheck="off" class="oneliner"></textarea>
                </div> -->
                <div class="w100pc border-3">
                    <span class="w100pc " data-i18n="signature-item-u">SIGNATURE ITEM</span>
                    <textarea name="attr_signatureitem" class="oneliner"></textarea>
                </div>
                <span class="w100pc " data-i18n="gear-u">GEAR</span>
                <fieldset class="repeating_gear">
                    <div class="w100pc repeating-gear">
                        <input type="text" name="attr_name" spellcheck="false" class="w100pc-4px" />
                    </div>
                </fieldset>
                <!-- <textarea class=""></textarea> -->
            </div>
            <div class="w33pc  align-top">

                <span class="w100pc border-3 " data-i18n="health-u">HEALTH</span>
                <span class="w50pc  yellow" data-i18n="maximum-health">Maximum Health</span>
                <div class="w50pc float-right">
                    <span name="attr_health_max" class="text-center value-display"></span>
                    <select name="attr_health_mod" value="0" class="w50pc-4px text-center">
                        <option value="-" data-i18n="modifier" selected disbaled hidden>Modifier</option>
                        <option value="0">+0</option>
                        <option value="1">+1</option>
                        <option value="2">+2</option>
                        <option value="3">+3</option>
                        <option value="4">+4</option>
                        <option value="5">+5</option>
                    </select>  
                    <!-- <input type="number" name="attr_health_max_display" value="(@{health_max})" class="text-center" disabled /> -->            
                    <!-- <span name="attr_health_max" class="" disabled readonly></span> -->
                </div>
                <div class="w100pc lighter-box border-1 health-boxes" title="Damage">                
                    <input type="hidden" name="attr_health_max" class="hidden health-max max" hidden readonly />      
                    <input type="hidden" name="attr_health" value="0" class="hidden" hidden readonly />      
                    <input type="radio" id="damage0" name="attr_damage" value="0" checked class="damage-box hidden">
                    <label for="damage0" class="damage-label damage0" title="Clear" data-i18n-title="clear">X</label>     
                    <input type="radio" id="damage1" name="attr_damage" value="1" class="damage-box hidden">
                    <label for="damage1" class="damage-label damage1">1</label>     
                    <input type="radio" id="damage2" name="attr_damage" value="2" class="damage-box hidden">
                    <label for="damage2" class="damage-label damage2">2</label>     
                    <input type="radio" id="damage3" name="attr_damage" value="3" class="damage-box hidden">
                    <label for="damage3" class="damage-label damage3">3</label>     
                    <input type="radio" id="damage4" name="attr_damage" value="4" class="damage-box hidden">
                    <label for="damage4" class="damage-label damage4">4</label>     
                    <input type="radio" id="damage5" name="attr_damage" value="5" class="damage-box hidden">
                    <label for="damage5" class="damage-label damage5">5</label>     
                    <input type="radio" id="damage6" name="attr_damage" value="6" class="damage-box hidden">
                    <label for="damage6" class="damage-label damage6">6</label>     
                    <input type="radio" id="damage7" name="attr_damage" value="7" class="damage-box hidden">
                    <label for="damage7" class="damage-label damage7">7</label>     
                    <input type="radio" id="damage8" name="attr_damage" value="8" class="damage-box hidden">
                    <label for="damage8" class="damage-label damage8">8</label>     
                    <input type="radio" id="damage9" name="attr_damage" value="9" class="damage-box hidden">
                    <label for="damage9" class="damage-label damage9">9</label>   
                    <input type="radio" id="damage10" name="attr_damage" value="10" class="damage-box hidden">
                    <label for="damage10" class="damage-label damage10">10</label>
                    <input type="radio" id="damage11" name="attr_damage" value="11" class="damage-box hidden">
                    <label for="damage11" class="damage-label damage11">11</label>   
                    <input type="radio" id="damage12" name="attr_damage" value="12" class="damage-box hidden">
                    <label for="damage12" class="damage-label damage12">12</label>
                </div>
                <div class="w100pc border-1 crit-effects">
                    <textarea class="border-1" placeholder="CRITICAL INJURIES"></textarea>
                    <span>Critical roll </span>:
                    <select name="attr_rollcritdamagedie" class="w50px">
                        <option value="" data-i18n="die" selected disabled hidden>Die</option>
                        <option value="12" data-i18n="die-twelve-u">D12</option>
                        <option value="10" data-i18n="die-ten-u">D10</option>
                        <option value="8" data-i18n="die-eight-u">D8</option>
                        <option value="6" data-i18n="die-six-u">D6</option>
                    </select>
                    <select type="text" name="attr_rollcritdamagetype" class="w85px text-center" >   
                        <option value="-1" data-i18n="type" selected disabled hidden>Type</option>             
                        <option value="0" data-i18n="piercing">Piercing</option>
                        <option value="1" data-i18n="crushing">Crushing</option>
                        <option value="2" data-i18n="slashing">Slashing</option>
                        <option value="3" data-i18n="piercing-explosion">Piercing (Expl.)</option>
                        <option value="4" data-i18n="crushing-explosion">Crushing (Expl.)</option>
                    </select>
                    <button type="roll" name="critdamageroll" class="critroll-button" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Critical Damage }} {{critroll=[[1]] }} {{critrolltype=[[@{rollcritdamagetype}]] }} {{roll-adv=[[0]] }} {{die-one-size=[[@{rollcritdamagedie}]]}} {{die-one=[[1D@{rollcritdamagedie}]] }} {{die-one-adv=[[1D@{rollcritdamagedie}]] }} " data-i18n="roll-abbr-u">ROLL</button>
                </div>

                <span class="w100pc border-12" data-i18n="resolve-u">RESOLVE</span>
                <span class="w50pc yellow" data-i18n="resolve-maximum">Maximum Resolve</span>
                <div class="w50pc float-right">   
                    <span name="attr_resolve_max" class="text-center value-display"></span>     
                    <select name="attr_resolve_mod" value="0" class="w50pc-4px text-center">
                        <option value="-" data-i18n="modifier" selected disbaled hidden>Modifier</option>
                        <option value="-5">-5</option>
                        <option value="-4">-4</option>
                        <option value="-3">-3</option>
                        <option value="-2">-2</option>
                        <option value="-1">-1</option>
                        <option value="0">+0</option>
                        <option value="1">+1</option>
                        <option value="2">+2</option>
                        <option value="3">+3</option>
                        <option value="4">+4</option>
                        <option value="5">+5</option>
                    </select>  
                    <!-- <input type="number" name="attr_resolve_max" value="0" class="text-center" disabled />  -->     
                </div>
                <div class="w100pc lighter-box border-1 resolve-boxes" title="Stress" data-i18n-ti="stress">                               
                    <input type="hidden" name="attr_resolve_max" class="hidden stress-max max" hidden readonly />      
                    <input type="hidden" name="attr_resolve" value="0" class="hidden" hidden readonly />      
                    <input type="radio" id="stress0" name="attr_stress" value="0" checked class="damage-box hidden">
                    <label for="stress0" class="damage-label damage0" title="Clear" data-i18n-title="clear">X</label>     
                    <input type="radio" id="stress1" name="attr_stress" value="1" class="damage-box hidden">
                    <label for="stress1" class="damage-label damage1">1</label>     
                    <input type="radio" id="stress2" name="attr_stress" value="2" class="damage-box hidden">
                    <label for="stress2" class="damage-label damage2">2</label>     
                    <input type="radio" id="stress3" name="attr_stress" value="3" class="damage-box hidden">
                    <label for="stress3" class="damage-label damage3">3</label>     
                    <input type="radio" id="stress4" name="attr_stress" value="4" class="damage-box hidden">
                    <label for="stress4" class="damage-label damage4">4</label>     
                    <input type="radio" id="stress5" name="attr_stress" value="5" class="damage-box hidden">
                    <label for="stress5" class="damage-label damage5">5</label>     
                    <input type="radio" id="stress6" name="attr_stress" value="6" class="damage-box hidden">
                    <label for="stress6" class="damage-label damage6">6</label>     
                    <input type="radio" id="stress7" name="attr_stress" value="7" class="damage-box hidden">
                    <label for="stress7" class="damage-label damage7">7</label>     
                    <input type="radio" id="stress8" name="attr_stress" value="8" class="damage-box hidden">
                    <label for="stress8" class="damage-label damage8">8</label>     
                    <input type="radio" id="stress9" name="attr_stress" value="9" class="damage-box hidden">
                    <label for="stress9" class="damage-label damage9">9</label>   
                    <input type="radio" id="stress10" name="attr_stress" value="10" class="damage-box hidden">
                    <label for="stress10" class="damage-label damage10">10</label>    
                    <input type="radio" id="stress11" name="attr_stress" value="11" class="damage-box hidden">
                    <label for="stress11" class="damage-label damage11">11</label>   
                    <input type="radio" id="stress12" name="attr_stress" value="12" class="damage-box hidden">
                    <label for="stress12" class="damage-label damage12">12</label>
                </div>
                <div class="w100pc border-1 crit-effects">
                    <textarea class=" border-1" placeholder="CRITICAL STRESS EFFECTS" data-i18n-placeholder="critical-stress-effects-u"></textarea>
                    <span data-i18n="critical-roll">Critical roll </span>:
                    <select name="attr_stressroll_mod" value="0" class="w50px text-center">
                        <option value="-" data-i18n="modifier" selected disbaled hidden>Modifier</option>
                        <option value="0">+0</option>
                        <option value="1">+1</option>
                        <option value="2">+2</option>
                        <option value="3">+3</option>
                        <option value="4">+4</option>
                        <option value="5">+5</option>
                    </select>  
                    <input name="attr_rollcritstressdie" class="w50px hidden" value="@{empathy}">
                    <button type="roll" name="critstressroll" class="critroll-button" value="&{template:bladerunner} {{character-name=@{character_name}}} {{roll-name=Critical Stress }} {{critroll=[[2]] }} {{critrolltype=[[@{charactertype}]] }} {{roll-adv=[[0]] }} {{die-one-size=[[@{rollcritstressdie}]]}} {{die-one=[[1D@{rollcritstressdie}+@{stressroll_mod}]] }} {{die-one-adv=[[1D@{rollcritstressdie}+@{stressroll_mod}]] }} " data-i18n="roll-abbr-u">ROLL</button>
                </div>
            </div>
        </div>
        <div class="border-3 w20px">&nbsp;</div>

        <div class="border-2 w20px ">&nbsp;</div>
        <div class="border-2 w100pc-40px ">
            <span class="w50pc justify-left align-center">ALCON ENTERTAINMENT</span>
            <div class="w50pc justify-right align-center"><span>v</span><span name="attr_version" class="align-center" readonly disabled></span><span>&nbsp;</span></div>
        </div>
        <div class="w20px">&nbsp;</div>

    </div>

    <div class="w100pc tab timereport">
        <div class="border-23 w60pc logo light-box">
            <img src="https://github.com/dwarfwing/Blade-Runner/blob/main/images/LAPD.png?raw=true">
            <span class="profile-database" data-i18n="case-file-report">Case File Time Report</span>
        </div>

        <div class="border-23 w40pc light-box charinfo">
            <label class="w40pc yellow yellow-border-bottom text-right" data-i18n="case-file-name-u">CASE FILE NAME</label>
            <div class="w60pc">
                <input type="text" name="attr_character_name" class="w100pc-4px" />
            </div>
            <label class="w40pc yellow text-right" data-i18n="reporting-office">REPORTING OFFICE</label>
            <div class="w60pc">
                <input type="text" name="attr_reportingofficer" class="w100pc-4px" />
            </div>
        </div>
        
        <div class="border-2 w20px ">&nbsp;</div>
        <div class="border-23 w100pc-40px">
            <div class="w28pc border-2 dark-box yellow text-center" data-i18n="shift-one">SHIFT 1</div>
            <div class="w24pc border-2 dark-box yellow text-center" data-i18n="shift-two">SHIFT 2</div>
            <div class="w24pc border-2 dark-box yellow text-center" data-i18n="shift-three">SHIFT 3</div>
            <div class="w24pc dark-box yellow text-center" data-i18n="shift-four">SHIFT 4</div>
        </div>
        <div class="w20px">&nbsp;</div>
        
        <div class="border-2 w20px ">&nbsp;</div>
        <div class="border-23 w100pc-40px">
            <div class="w4pc h100pc border-2 header-day dark-box"><span class="w50px deg90" data-i18n="day-one">DAY 1</span></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday1shift1"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday1shift2"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday1shift3"></textarea></div>
            <div class="w24pc text-center"><textarea name="attr_reportday1shift4"></textarea></div>
        </div>
        <div class="w20px">&nbsp;</div>
        
        <div class="border-2 w20px ">&nbsp;</div>
        <div class="border-23 w100pc-40px">
            <div class="w4pc h100pc border-2 header-day dark-box"><span class="w50px deg90" data-i18n="day-two">DAY 2</span></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday2shift1"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday2shift2"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday2shift3"></textarea></div>
            <div class="w24pc text-center"><textarea name="attr_reportday2shift4"></textarea></div>
        </div>
        <div class="w20px">&nbsp;</div>
        
        <div class="border-2 w20px ">&nbsp;</div>
        <div class="border-23 w100pc-40px">
            <div class="w4pc h100pc border-2 header-day dark-box"><span class="w50px deg90" data-i18n="day-three">DAY 3</span></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday3shift1"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday3shift2"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday3shift3"></textarea></div>
            <div class="w24pc text-center"><textarea name="attr_reportday3shift4"></textarea></div>
        </div>
        <div class="w20px">&nbsp;</div>
        
        <div class="border-2 w20px ">&nbsp;</div>
        <div class="border-23 w100pc-40px">
            <div class="w4pc h100pc border-2 header-day dark-box"><span class="w50px deg90" data-i18n="day-four">DAY 4</span></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday4shift1"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday4shift2"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday4shift3"></textarea></div>
            <div class="w24pc text-center"><textarea name="attr_reportday4shift4"></textarea></div>
        </div>
        <div class="w20px">&nbsp;</div>
        
        <div class="border-2 w20px ">&nbsp;</div>
        <div class="border-23 w100pc-40px">
            <div class="w4pc h100pc border-2 header-day dark-box"><span class="w50px deg90" data-i18n="day-five">DAY 5</span></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday5shift1"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday5shift2"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday5shift3"></textarea></div>
            <div class="w24pc text-center"><textarea name="attr_reportday5shift4"></textarea></div>
        </div>
        <div class="w20px">&nbsp;</div>
        
        <div class="border-2 w20px ">&nbsp;</div>
        <div class="border-23 w100pc-40px">
            <div class="w4pc h100pc border-2 header-day dark-box"><span class="w50px deg90" data-i18n="day-six">DAY 6</span></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday6shift1"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday6shift2"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday6shift3"></textarea></div>
            <div class="w24pc text-center"><textarea name="attr_reportday6shift4"></textarea></div>
        </div>
        <div class="w20px">&nbsp;</div>
        
        <div class="border-2 w20px ">&nbsp;</div>
        <div class="border-23 w100pc-40px">
            <div class="w4pc h100pc border-2 header-day dark-box"><span class="w50px deg90" data-i18n="day-seven">DAY 7</span></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday7shift1"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday7shift2"></textarea></div>
            <div class="w24pc border-2 text-center"><textarea name="attr_reportday7shift3"></textarea></div>
            <div class="w24pc text-center"><textarea name="attr_reportday7shift4"></textarea></div>
        </div>
        <div class="w20px">&nbsp;</div>
        
        <div class="border-2 w20px ">&nbsp;</div>
        <div class="border-2 w100pc-40px ">
            <span class="w50pc justify-left align-center">ALCON ENTERTAINMENT</span>
            <div class="w50pc justify-right align-center"><span>v</span><span name="attr_version" class="align-center" readonly disabled></span><span>&nbsp;</span></div>
        </div>
        <div class="w20px">&nbsp;</div>
    </div>

</div>



<rolltemplate class="sheet-rolltemplate-bladerunner">
    <div class="template-wrap template-background">
        <div class="template-div w100pc border-1234 header">
            {{character-name}}
        </div>
        <div class="template-div w100pc border-234 header">
            {{roll-name}} {{#roll-type}} ({{roll-type}}) {{/roll-type}}
            {{#critroll}}
                {{#rollTotal() critroll 1}}
                    {{#rollTotal() critrolltype 0}} : Piercing {{/rollTotal() critrolltype 0}}
                    {{#rollTotal() critrolltype 1}} : Crushing {{/rollTotal() critrolltype 1}}
                    {{#rollTotal() critrolltype 2}} : SLashing {{/rollTotal() critrolltype 2}}
                    {{#rollTotal() critrolltype 3}} : Piercing (Expl.) {{/rollTotal() critrolltype 3}}
                    {{#rollTotal() critrolltype 4}} : Piercing (Expl.) {{/rollTotal() critrolltype 4}}
                {{/rollTotal() critroll 1}}
            {{/critroll}}
        </div>
        <div class="template-div w50pc border-234 rollinfo right">
            {{#rollGreater() die-one-size die-two-size}}
                {{#rollTotal() roll-adv 0}}<span class="rollinfo yellow" data-i18n="normal">Normal</span>{{/rollTotal() roll-adv 0}}
                {{#rollGreater() roll-adv 0}}<span class="rollinfo yellow" data-i18n="advantage">Advantage</span>{{/rollGreater() roll-adv 0}}
                {{#rollLess() roll-adv 0}}<span class="rollinfo yellow" data-i18n="disadvantage">Disadvantage</span>{{/rollLess() roll-adv 0}}
            {{/rollGreater() die-one-size die-two-size}}
            {{#rollTotal() die-one-size die-two-size}}
                {{#rollTotal() roll-adv 0}}<span class="rollinfo yellow" data-i18n="normal">Normal</span>{{/rollTotal() roll-adv 0}}
                {{#rollGreater() roll-adv 0}}<span class="rollinfo yellow" data-i18n="advantage">Advantage</span>{{/rollGreater() roll-adv 0}}
                {{#rollLess() roll-adv 0}}<span class="rollinfo yellow" data-i18n="disadvantage">Disadvantage</span>{{/rollLess() roll-adv 0}}
            {{/rollTotal() die-one-size die-two-size}}
            <!-- {{#rollGreater() die-one-size die-two-size}}<span class="rollinfo border-4 yellow">Higher</span>{{/rollGreater() die-one-size die-two-size}}
            {{#rollTotal() die-one-size die-two-size}}<span class="rollinfo border-4 yellow">Same</span>{{/rollTotal() die-one-size die-two-size}}
            {{#rollLess() die-one-size die-two-size}}<span class="rollinfo border-4 yellow">Lower</span>{{/rollLess() die-one-size die-two-size}} -->
            {{#rollTotal() die-one-size 6}}<span class="rollinfo border-4 yellow" data-i18n="die-six-u">D6</span>{{/rollTotal() die-one-size 6}}
            {{#rollTotal() die-one-size 8}}<span class="rollinfo border-4 yellow" data-i18n="die-eight-u">D8</span>{{/rollTotal() die-one-size 8}}
            {{#rollTotal() die-one-size 10}}<span class="rollinfo border-4 yellow" data-i18n="die-ten-u">D10</span>{{/rollTotal() die-one-size 10}}
            {{#rollTotal() die-one-size 12}}<span class="rollinfo border-4 yellow" data-i18n="die-twelve-u">D12</span>{{/rollTotal() die-one-size 12}}            
        </div>
        
        {{^critroll}}
            <div class="template-div w50pc border-23 rollinfo left">
                {{#rollTotal() die-two-size 6}}<span class="rollinfo border-2 yellow" data-i18n="die-six-u">D6</span>{{/rollTotal() die-two-size 6}}
                {{#rollTotal() die-two-size 8}}<span class="rollinfo border-2 yellow" data-i18n="die-eight-u">D8</span>{{/rollTotal() die-two-size 8}}
                {{#rollTotal() die-two-size 10}}<span class="rollinfo border-2 yellow" data-i18n="die-ten-u">D10</span>{{/rollTotal() die-two-size 10}}
                {{#rollTotal() die-two-size 12}}<span class="rollinfo border-2 yellow" data-i18n="die-twelve-u">D12</span>{{/rollTotal() die-two-size 12}}  
                {{#rollLess() die-one-size die-two-size}}
                    {{#rollTotal() roll-adv 0}}<span class="rollinfo yellow" data-i18n="normal">Normal</span>{{/rollTotal() roll-adv 0}}
                    {{#rollGreater() roll-adv 0}}<span class="rollinfo yellow" data-i18n="advantage">Advantage</span>{{/rollGreater() roll-adv 0}}
                    {{#rollLess() roll-adv 0}}<span class="rollinfo yellow" data-i18n="disadvantage">Disadvantage</span>{{/rollLess() roll-adv 0}}
                {{/rollLess() die-one-size die-two-size}}
            </div>
        {{/critroll}}
        {{#critroll}}
            <div class="template-div w50pc border-23 rollinfo center yellow">
                {{#^rollTotal() critrolltype 1}}
                    {{#^rollTotal() critrolltype 4}}
                        {{#rollGreater() die-one 4}} <span data-i18n="lethal-u">LETHAL<span> {{/rollGreater() die-one 4}}
                    {{/^rollTotal() critrolltype 4}}
                {{/^rollTotal() critrolltype 1}}
                {{#^rollTotal() critrolltype 0}}
                    {{#^rollTotal() critrolltype 2}}
                        {{#^rollTotal() critrolltype 3}}
                            {{#rollGreater() die-one 6}} <span data-i18n="lethal-u">LETHAL<span> {{/rollGreater() die-one 6}}
                        {{/^rollTotal() critrolltype 3}}
                    {{/^rollTotal() critrolltype 2}}
                {{/^rollTotal() critrolltype 0}}
            </div>
        {{/critroll}}
        
        <div class="template-div w50pc border-234 rollresult">
            {{#rollLess() roll-adv 0}}
                {{#^rollLess() die-one-size die-two-size}}                        
                    {{#rollTotal() die-one 1}}<span class="w50pc die-1 result-1">{{die-one}}</span>{{/rollTotal() die-one 1}}
                    {{#rollTotal() die-one 2}}<span class="w50pc die-1 result-2">{{die-one}}</span>{{/rollTotal() die-one 2}}
                    {{#rollTotal() die-one 3}}<span class="w50pc die-1 result-3">{{die-one}}</span>{{/rollTotal() die-one 3}}
                    {{#rollTotal() die-one 4}}<span class="w50pc die-1 result-4">{{die-one}}</span>{{/rollTotal() die-one 4}}
                    {{#rollTotal() die-one 5}}<span class="w50pc die-1 result-5">{{die-one}}</span>{{/rollTotal() die-one 5}}
                    {{#rollTotal() die-one 6}}<span class="w50pc die-1 result-6">{{die-one}}</span>{{/rollTotal() die-one 6}}
                    {{#rollTotal() die-one 7}}<span class="w50pc die-1 result-7">{{die-one}}</span>{{/rollTotal() die-one 7}}
                    {{#rollTotal() die-one 8}}<span class="w50pc die-1 result-8">{{die-one}}</span>{{/rollTotal() die-one 8}}
                    {{#rollTotal() die-one 9}}<span class="w50pc die-1 result-9">{{die-one}}</span>{{/rollTotal() die-one 9}}
                    {{#rollTotal() die-one 10}}<span class="w50pc die-1 result-10">{{die-one}}</span>{{/rollTotal() die-one 10}}
                    {{#rollTotal() die-one 11}}<span class="w50pc die-1 result-11">{{die-one}}</span>{{/rollTotal() die-one 11}}
                    {{#rollTotal() die-one 12}}<span class="w50pc die-1 result-12">{{die-one}}</span>{{/rollTotal() die-one 12}}
                {{/^rollLess() die-one-size die-two-size}}
            {{/rollLess() roll-adv 0}}
            {{#rollGreater() roll-adv -1}}
                {{#rollTotal() die-one 1}}<span class="w50pc die-1 result-1">{{die-one}}</span>{{/rollTotal() die-one 1}}
                {{#rollTotal() die-one 2}}<span class="w50pc die-1 result-2">{{die-one}}</span>{{/rollTotal() die-one 2}}
                {{#rollTotal() die-one 3}}<span class="w50pc die-1 result-3">{{die-one}}</span>{{/rollTotal() die-one 3}}
                {{#rollTotal() die-one 4}}<span class="w50pc die-1 result-4">{{die-one}}</span>{{/rollTotal() die-one 4}}
                {{#rollTotal() die-one 5}}<span class="w50pc die-1 result-5">{{die-one}}</span>{{/rollTotal() die-one 5}}
                {{#rollTotal() die-one 6}}<span class="w50pc die-1 result-6">{{die-one}}</span>{{/rollTotal() die-one 6}}
                {{#rollTotal() die-one 7}}<span class="w50pc die-1 result-7">{{die-one}}</span>{{/rollTotal() die-one 7}}
                {{#rollTotal() die-one 8}}<span class="w50pc die-1 result-8">{{die-one}}</span>{{/rollTotal() die-one 8}}
                {{#rollTotal() die-one 9}}<span class="w50pc die-1 result-9">{{die-one}}</span>{{/rollTotal() die-one 9}}
                {{#rollTotal() die-one 10}}<span class="w50pc die-1 result-10">{{die-one}}</span>{{/rollTotal() die-one 10}}
                {{#rollTotal() die-one 11}}<span class="w50pc die-1 result-11">{{die-one}}</span>{{/rollTotal() die-one 11}}
                {{#rollTotal() die-one 12}}<span class="w50pc die-1 result-12">{{die-one}}</span>{{/rollTotal() die-one 12}}

                {{#rollGreater() roll-adv 0}}
                    {{#rollTotal() die-one-size die-two-size}}
                        {{#rollTotal() die-one-adv 1}}<span class="w50pc border-4 die-1-adv result-1">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 1}}
                        {{#rollTotal() die-one-adv 2}}<span class="w50pc border-4 die-1-adv result-2">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 2}}
                        {{#rollTotal() die-one-adv 3}}<span class="w50pc border-4 die-1-adv result-3">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 3}}
                        {{#rollTotal() die-one-adv 4}}<span class="w50pc border-4 die-1-adv result-4">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 4}}
                        {{#rollTotal() die-one-adv 5}}<span class="w50pc border-4 die-1-adv result-5">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 5}}
                        {{#rollTotal() die-one-adv 6}}<span class="w50pc border-4 die-1-adv result-6">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 6}}
                        {{#rollTotal() die-one-adv 7}}<span class="w50pc border-4 die-1-adv result-7">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 7}}
                        {{#rollTotal() die-one-adv 8}}<span class="w50pc border-4 die-1-adv result-8">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 8}}
                        {{#rollTotal() die-one-adv 9}}<span class="w50pc border-4 die-1-adv result-9">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 9}}
                        {{#rollTotal() die-one-adv 10}}<span class="w50pc border-4 die-1-adv result-10">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 10}}
                        {{#rollTotal() die-one-adv 11}}<span class="w50pc border-4 die-1-adv result-11">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 11}}
                        {{#rollTotal() die-one-adv 12}}<span class="w50pc border-4 die-1-adv result-12">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 12}}
                    {{/rollTotal() die-one-size die-two-size}}
                    {{#rollLess() die-one-size die-two-size}}
                        {{#rollTotal() die-one-adv 1}}<span class="w50pc border-4 result-1">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 1}}
                        {{#rollTotal() die-one-adv 2}}<span class="w50pc border-4 result-2">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 2}}
                        {{#rollTotal() die-one-adv 3}}<span class="w50pc border-4 result-3">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 3}}
                        {{#rollTotal() die-one-adv 4}}<span class="w50pc border-4 result-4">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 4}}
                        {{#rollTotal() die-one-adv 5}}<span class="w50pc border-4 result-5">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 5}}
                        {{#rollTotal() die-one-adv 6}}<span class="w50pc border-4 result-6">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 6}}
                        {{#rollTotal() die-one-adv 7}}<span class="w50pc border-4 result-7">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 7}}
                        {{#rollTotal() die-one-adv 8}}<span class="w50pc border-4 result-8">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 8}}
                        {{#rollTotal() die-one-adv 9}}<span class="w50pc border-4 result-9">{{die-on-adv}}</span>{{/rollTotal() die-one-adv 9}}
                        {{#rollTotal() die-one-adv 10}}<span class="w50pc border-4 result-10">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 10}}
                        {{#rollTotal() die-one-adv 11}}<span class="w50pc border-4 result-11">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 11}}
                        {{#rollTotal() die-one-adv 12}}<span class="w50pc border-4 result-12">{{die-one-adv}}</span>{{/rollTotal() die-one-adv 12}}                
                    {{/rollLess() die-one-size die-two-size}}
                {{/rollGreater() roll-adv 0}}
            {{/rollGreater() roll-adv -1}}
        </div>
        <div class="template-div w50pc border-23 rollresult">
        {{^critroll}}
            {{#rollLess() roll-adv 0}}
                {{#rollLess() die-one-size die-two-size}}                        
                    {{#rollTotal() die-two 1}}<span class="w50pc die-1 result-1">{{die-two}}</span>{{/rollTotal() die-two 1}}
                    {{#rollTotal() die-two 2}}<span class="w50pc die-1 result-2">{{die-two}}</span>{{/rollTotal() die-two 2}}
                    {{#rollTotal() die-two 3}}<span class="w50pc die-1 result-3">{{die-two}}</span>{{/rollTotal() die-two 3}}
                    {{#rollTotal() die-two 4}}<span class="w50pc die-1 result-4">{{die-two}}</span>{{/rollTotal() die-two 4}}
                    {{#rollTotal() die-two 5}}<span class="w50pc die-1 result-5">{{die-two}}</span>{{/rollTotal() die-two 5}}
                    {{#rollTotal() die-two 6}}<span class="w50pc die-1 result-6">{{die-two}}</span>{{/rollTotal() die-two 6}}
                    {{#rollTotal() die-two 7}}<span class="w50pc die-1 result-7">{{die-two}}</span>{{/rollTotal() die-two 7}}
                    {{#rollTotal() die-two 8}}<span class="w50pc die-1 result-8">{{die-two}}</span>{{/rollTotal() die-two 8}}
                    {{#rollTotal() die-two 9}}<span class="w50pc die-1 result-9">{{die-two}}</span>{{/rollTotal() die-two 9}}
                    {{#rollTotal() die-two 10}}<span class="w50pc die-1 result-10">{{die-two}}</span>{{/rollTotal() die-two 10}}
                    {{#rollTotal() die-two 11}}<span class="w50pc die-1 result-11">{{die-two}}</span>{{/rollTotal() die-two 11}}
                    {{#rollTotal() die-two 12}}<span class="w50pc die-1 result-12">{{die-two}}</span>{{/rollTotal() die-two 12}}
                {{/rollLess() die-one-size die-two-size}}
            {{/rollLess() roll-adv 0}}
            {{#rollGreater() roll-adv -1}}
                {{#rollTotal() die-two 1}}<span class="w50pc die-1 result-1">{{die-two}}</span>{{/rollTotal() die-two 1}}
                {{#rollTotal() die-two 2}}<span class="w50pc die-1 result-2">{{die-two}}</span>{{/rollTotal() die-two 2}}
                {{#rollTotal() die-two 3}}<span class="w50pc die-1 result-3">{{die-two}}</span>{{/rollTotal() die-two 3}}
                {{#rollTotal() die-two 4}}<span class="w50pc die-1 result-4">{{die-two}}</span>{{/rollTotal() die-two 4}}
                {{#rollTotal() die-two 5}}<span class="w50pc die-1 result-5">{{die-two}}</span>{{/rollTotal() die-two 5}}
                {{#rollTotal() die-two 6}}<span class="w50pc die-1 result-6">{{die-two}}</span>{{/rollTotal() die-two 6}}
                {{#rollTotal() die-two 7}}<span class="w50pc die-1 result-7">{{die-two}}</span>{{/rollTotal() die-two 7}}
                {{#rollTotal() die-two 8}}<span class="w50pc die-1 result-8">{{die-two}}</span>{{/rollTotal() die-two 8}}
                {{#rollTotal() die-two 9}}<span class="w50pc die-1 result-9">{{die-two}}</span>{{/rollTotal() die-two 9}}
                {{#rollTotal() die-two 10}}<span class="w50pc die-1 result-10">{{die-two}}</span>{{/rollTotal() die-two 10}}
                {{#rollTotal() die-two 11}}<span class="w50pc die-1 result-11">{{die-two}}</span>{{/rollTotal() die-two 11}}
                {{#rollTotal() die-two 12}}<span class="w50pc die-1 result-12">{{die-two}}</span>{{/rollTotal() die-two 12}}
                {{#rollGreater() roll-adv 0}}
                    {{#rollLess() die-two-size die-one-size}}
                        {{#rollTotal() die-two-adv 1}}<span class="w50pc border-4 result-1">{{die-two-adv}}</span>{{/rollTotal() die-two-adv 1}}
                        {{#rollTotal() die-two-adv 2}}<span class="w50pc border-4 result-2">{{die-two-adv}}</span>{{/rollTotal() die-two-adv 2}}
                        {{#rollTotal() die-two-adv 3}}<span class="w50pc border-4 result-3">{{die-two-adv}}</span>{{/rollTotal() die-two-adv 3}}
                        {{#rollTotal() die-two-adv 4}}<span class="w50pc border-4 result-4">{{die-two-adv}}</span>{{/rollTotal() die-two-adv 4}}
                        {{#rollTotal() die-two-adv 5}}<span class="w50pc border-4 result-5">{{die-two-adv}}</span>{{/rollTotal() die-two-adv 5}}
                        {{#rollTotal() die-two-adv 6}}<span class="w50pc border-4 result-6">{{die-two-adv}}</span>{{/rollTotal() die-two-adv 6}}
                        {{#rollTotal() die-two-adv 7}}<span class="w50pc border-4 result-7">{{die-two-adv}}</span>{{/rollTotal() die-two-adv 7}}
                        {{#rollTotal() die-two-adv 8}}<span class="w50pc border-4 result-8">{{die-two-adv}}</span>{{/rollTotal() die-two-adv 8}}
                        {{#rollTotal() die-two-adv 9}}<span class="w50pc border-4 result-9">{{die-on-adv}}</span>{{/rollTotal() die-two-adv 9}}
                        {{#rollTotal() die-two-adv 10}}<span class="w50pc border-4 result-10">{{die-two-adv}}</span>{{/rollTotal() die-two-adv 10}}
                        {{#rollTotal() die-two-adv 11}}<span class="w50pc border-4 result-11">{{die-two-adv}}</span>{{/rollTotal() die-two-adv 11}}
                        {{#rollTotal() die-two-adv 12}}<span class="w50pc border-4 result-12">{{die-two-adv}}</span>{{/rollTotal() die-two-adv 12}}                
                    {{/rollLess() die-two-size die-one-size}}
                {{/rollGreater() roll-adv 0}}
            {{/rollGreater() roll-adv -1}}
        {{/critroll}}
        {{#critroll}}
            <!-- PHYSICAL CRITS -->        
            {{#rollTotal() critroll 1}}
                <!-- PIERCING -->
                {{#^rollTotal() critrolltype 1}}
                    {{#^rollTotal() critrolltype 4}}
                        {{#rollTotal() die-one 1}}<span class="" data-i18n="crit-pierce-1-name"> Ear torn off</span>{{/rollTotal() die-one 1}}
                        {{#rollTotal() die-one 2}}<span class="" data-i18n="crit-pierce-2-name"> Hand impaled</span>{{/rollTotal() die-one 2}}
                        {{#rollTotal() die-one 3}}<span class="" data-i18n="crit-pierce-3-name"> Pierced eye</span>{{/rollTotal() die-one 3}}
                        {{#rollTotal() die-one 4}}<span class="" data-i18n="crit-pierce-4-name"> Shoulder hit</span>{{/rollTotal() die-one 4}}
                        {{#rollTotal() die-one 5}}<span class="" data-i18n="crit-pierce-5-name"> Bleeding gut</span>{{/rollTotal() die-one 5}}
                        {{#rollTotal() die-one 6}}<span class="" data-i18n="crit-pierce-6-name"> Cracked skull</span>{{/rollTotal() die-one 6}}
                        {{#rollTotal() die-one 7}}<span class="" data-i18n="crit-pierce-7-name"> Punctured lung</span>{{/rollTotal() die-one 7}}
                        {{#rollTotal() die-one 8}}<span class="" data-i18n="crit-pierce-8-name"> Brains blown out</span>{{/rollTotal() die-one 8}}
                        {{#rollTotal() die-one 9}}<span class="" data-i18n="crit-pierce-9-name"> Massive internal organ damage</span>{{/rollTotal() die-one 9}}
                        {{#rollTotal() die-one 10}}<span class="" data-i18n="crit-pierce-10-name"> Pierced heart</span>{{/rollTotal() die-one 10}}
                        {{#rollTotal() die-one 11}}<span class="" data-i18n="crit-pierce-11-name"> Severed leg</span>{{/rollTotal() die-one 11}}
                        {{#rollGreater() die-one 11}}<span class="" data-i18n="crit-pierce-12-name"> Shattered head</span>{{/rollGreater() die-one 11}}
                    {{/^rollTotal() critrolltype 4}}
                {{/^rollTotal() critrolltype 1}}
                <!-- CRUSHING -->
                {{#rollTotal() critrolltype 1}}
                    {{#rollTotal() die-one 1}}<span class="" data-i18n="crit-crush-1-name"> Teeth knocked out</span>{{/rollTotal() die-one 1}}
                    {{#rollTotal() die-one 2}}<span class="" data-i18n="crit-crush-2-name"> Broken nose</span>{{/rollTotal() die-one 2}}
                    {{#rollTotal() die-one 3}}<span class="" data-i18n="crit-crush-3-name"> Broken fingers</span>{{/rollTotal() die-one 3}}
                    {{#rollTotal() die-one 4}}<span class="" data-i18n="crit-crush-4-name"> Gouged eye</span>{{/rollTotal() die-one 4}}
                    {{#rollTotal() die-one 5}}<span class="" data-i18n="crit-crush-5-name"> Cracked ribs</span>{{/rollTotal() die-one 5}}
                    {{#rollTotal() die-one 6}}<span class="" data-i18n="crit-crush-6-name"> Concussion</span>{{/rollTotal() die-one 6}}
                    {{#rollTotal() die-one 7}}<span class="" data-i18n="crit-crush-7-name"> Broken leg</span>{{/rollTotal() die-one 7}}
                    {{#rollTotal() die-one 8}}<span class="" data-i18n="crit-crush-8-name"> Broken arm</span>{{/rollTotal() die-one 8}}
                    {{#rollTotal() die-one 9}}<span class="" data-i18n="crit-crush-9-name"> Internal bleeding</span>{{/rollTotal() die-one 9}}
                    {{#rollTotal() die-one 10}}<span class="" data-i18n="crit-crush-10-name"> Broken neck</span>{{/rollTotal() die-one 10}}
                    {{#rollTotal() die-one 11}}<span class="" data-i18n="crit-crush-11-name"> Shattered pelvis</span>{{/rollTotal() die-one 11}}
                    {{#rollGreater() die-one 11}}<span class="" data-i18n="crit-crush-12-name"> Crushed skull</span>{{/rollGreater() die-one 11}}
                {{/rollTotal() critrolltype 1}}
                {{#rollTotal() critrolltype 4}}
                    {{#rollTotal() die-one 1}}<span class="" data-i18n="crit-crush-1-name"> Teeth knocked out</span>{{/rollTotal() die-one 1}}
                    {{#rollTotal() die-one 2}}<span class="" data-i18n="crit-crush-2-name"> Broken nose</span>{{/rollTotal() die-one 2}}
                    {{#rollTotal() die-one 3}}<span class="" data-i18n="crit-crush-3-name"> Broken fingers</span>{{/rollTotal() die-one 3}}
                    {{#rollTotal() die-one 4}}<span class="" data-i18n="crit-crush-4-name"> Gouged eye</span>{{/rollTotal() die-one 4}}
                    {{#rollTotal() die-one 5}}<span class="" data-i18n="crit-crush-5-name"> Cracked ribs</span>{{/rollTotal() die-one 5}}
                    {{#rollTotal() die-one 6}}<span class="" data-i18n="crit-crush-6-name"> Concussion</span>{{/rollTotal() die-one 6}}
                    {{#rollTotal() die-one 7}}<span class="" data-i18n="crit-crush-7-name"> Broken leg</span>{{/rollTotal() die-one 7}}
                    {{#rollTotal() die-one 8}}<span class="" data-i18n="crit-crush-8-name"> Broken arm</span>{{/rollTotal() die-one 8}}
                    {{#rollTotal() die-one 9}}<span class="" data-i18n="crit-crush-9-name"> Internal bleeding</span>{{/rollTotal() die-one 9}}
                    {{#rollTotal() die-one 10}}<span class="" data-i18n="crit-crush-10-name"> Broken neck</span>{{/rollTotal() die-one 10}}
                    {{#rollTotal() die-one 11}}<span class="" data-i18n="crit-crush-11-name"> Shattered pelvis</span>{{/rollTotal() die-one 11}}
                    {{#rollGreater() die-one 11}}<span class="" data-i18n="crit-crush-12-name"> Crushed skull</span>{{/rollGreater() die-one 11}}
                {{/rollTotal() critrolltype 4}}            
            {{/rollTotal() critroll 1}}
            <!-- STRESS CRITS -->  
            {{#rollTotal() critroll 2}}
                <!-- HUMAN -->
                {{#rollTotal() critrolltype 1}}
                    {{#rollTotal() die-one 1}} <span data-i18n="crit-stress-human-1">TO LIVE IN FEAR.</span> {{/rollTotal() die-one 1}}
                    {{#rollTotal() die-one 2}} <span data-i18n="crit-stress-human-2">TOO BAD SHE WON'T LIVE.</span> {{/rollTotal() die-one 2}}
                    {{#rollTotal() die-one 3}} <span data-i18n="crit-stress-human-3">NO CHOICE, PAL.</span> {{/rollTotal() die-one 3}}
                    {{#rollTotal() die-one 4}} <span data-i18n="crit-stress-human-4">TELL HIM I'M EATING.</span> {{/rollTotal() die-one 4}}
                    {{#rollTotal() die-one 5}} <span data-i18n="crit-stress-human-5">TWICE AS QUIT.</span> {{/rollTotal() die-one 5}}
                    {{#rollGreater() die-one 5}} <span data-i18n="crit-stress-human-6">SHAKES? ME TOO.</span> {{/rollGreater() die-one 5}}
                {{/rollTotal() critrolltype 1}}
                <!-- REPLICANT -->
                {{#rollTotal() critrolltype 2}}
                    {{#rollTotal() die-one 1}} <span data-i18n="crit-stress-rep-1">LET ME TELL YOU ABOUT MY MOTHER.</span> {{/rollTotal() die-one 1}}
                    {{#rollTotal() die-one 2}} <span data-i18n="crit-stress-rep-2">TIME TO DIE.</span> {{/rollTotal() die-one 2}}
                    {{#rollTotal() die-one 3}} <span data-i18n="crit-stress-rep-3">MORE HUMAN THAN HUMAN.</span> {{/rollTotal() die-one 3}}
                    {{#rollTotal() die-one 4}} <span data-i18n="crit-stress-rep-4">WE'RE PHYSICAL.</span> {{/rollTotal() die-one 4}}
                    {{#rollTotal() die-one 5}} <span data-i18n="crit-stress-rep-5">I'VE SEEN THINGS.</span> {{/rollTotal() die-one 5}}
                    {{#rollGreater() die-one 5}} <span data-i18n="crit-stress-rep-6">TWICE AS BRIGHT.</span> {{/rollGreater() die-one 5}}
                {{/rollTotal() critrolltype 2}}
            {{/rollTotal() critroll 2}}
        {{/critroll}}
        </div>
        {{^critroll}}
            <div class="template-div w50pc border-234">
                <span class="successes" data-i18n="successes-colon">Successes: </span>
            </div>
            <div class="template-div w50pc border-23">
                <span class="failures" data-i18n="failures-colon">Failures: </span>
            </div>
            {{#push}}
                {{#^rollGreater() push 0}}
                    <div class="template-div w100pc border-234 push-button" data-i18n="max-push-reached"> Maximum Push reached </div>
                {{/^rollGreater() push 0}}
                {{#rollGreater() push 0}}
                    <div class="template-div w100pc border-24 push-button" data-i18n="push"> Push </div>
                    <div class="template-div w100pc border-234 push-button">  
                        {{#rollLess() roll-adv 0}}
                            {{#rollGreater() die-one-size die-two-size}}
                                <span class="push-link">[1](~{{character-name}}|pushroll_1)</span>   
                            {{/rollGreater() die-one-size die-two-size}}
                            {{#rollTotal() die-one-size die-two-size}}
                                <span class="push-link">[1](~{{character-name}}|pushroll_1)</span>   
                            {{/rollTotal() die-one-size die-two-size}}
                            {{#rollGreater() die-two-size die-one-size}}
                                <span class="push-link">[1](~{{character-name}}|pushroll_2)</span>   
                            {{/rollGreater() die-two-size die-one-size}}  
                        {{/rollLess() roll-adv 0}}

                        {{#rollTotal() roll-adv 0}}   
                            {{#rollGreater() die-one-size 0}}
                                <span class="push-link">[1](~{{character-name}}|pushroll_1)</span>  
                                <span class="push-link">[<span data-i18n="both-u">BOTH</span>](~{{character-name}}|pushroll_12)</span>  
                            {{/rollGreater() die-one-size 0}}
                            <span class="push-link">[2](~{{character-name}}|pushroll_2)</span>   
                        {{/rollTotal() roll-adv 0}}
                        {{#rollGreater() roll-adv 0}}  
                            {{#^rollGreater() die-one-size die-two-size}}
                                <span class="push-link">[1](~{{character-name}}|pushroll_1)</span>  
                                <span class="push-link">[1&2](~{{character-name}}|pushroll_13)</span>  
                                <span class="push-link">[2](~{{character-name}}|pushroll_3)</span>  
                            {{/^rollGreater() die-one-size die-two-size}} 
                            {{#rollGreater() die-one-size die-two-size}}
                                <span class="push-link">[1](~{{character-name}}|pushroll_1)</span>  
                                <span class="push-link">[1&2](~{{character-name}}|pushroll_12)</span>  
                                <span class="push-link">[2](~{{character-name}}|pushroll_2)</span>     
                            {{/rollGreater() die-one-size die-two-size}} 
                            <span class="push-link">[<span data-i18n="all-u">ALL</span>](~{{character-name}}|pushroll_123)</span>  
                            {{#^rollGreater() die-one-size die-two-size}}    
                                <span class="push-link">[1&3](~{{character-name}}|pushroll_12)</span>   
                                <span class="push-link">[2&3](~{{character-name}}|pushroll_23)</span>              
                                <span class="push-link">[3](~{{character-name}}|pushroll_2)</span>    
                            {{/^rollGreater() die-one-size die-two-size}} 
                            {{#rollGreater() die-one-size die-two-size}}    
                                <span class="push-link">[1&3](~{{character-name}}|pushroll_13)</span>   
                                <span class="push-link">[2&3](~{{character-name}}|pushroll_23)</span>              
                                <span class="push-link">[3](~{{character-name}}|pushroll_3)</span>    
                            {{/rollGreater() die-one-size die-two-size}}  
                        {{/rollGreater() roll-adv 0}}    
                    </div>
                {{/rollGreater() push 0}}
            {{/push}}         
        {{/critroll}}

        {{#critroll}}
            {{#rollTotal() critroll 1}}
            <div class="template-div w50pc border-234">            
                <span class="" title="Death save" data-i18n-title="save-title" data-i18n="save-colon">Save: </span>
                <span class="">
                    <!-- PHYSICAL CRITS -->                      
                    <!-- PIERCING -->
                    {{#^rollTotal() critrolltype 1}}
                        {{#^rollTotal() critrolltype 4}}
                            {{#rollLess() die-one 5}} - {{/rollLess() die-one 5}}
                            {{#rollBetween() die-one 5 7}} <span data-i18n="shift">Shift</span> {{/rollBetween() die-one 5 7}}
                            {{#rollTotal() die-one 8}} - {{/rollTotal() die-one 8}}
                            {{#rollTotal() die-one 9}} <span data-i18n="round">Round</span>  {{/rollTotal() die-one 9}}
                            {{#rollTotal() die-one 10}} - {{/rollTotal() die-one 10}}
                            {{#rollTotal() die-one 11}} <span data-i18n="shift">Shift</span> {{/rollTotal() die-one 11}}
                            {{#rollTotal() die-one 12}} - {{/rollTotal() die-one 12}}
                        {{/^rollTotal() critrolltype 4}}
                    {{/^rollTotal() critrolltype 1}}
                    <!-- CRUSHING -->
                    {{#^rollTotal() critrolltype 0}}
                        {{#^rollTotal() critrolltype 2}}
                            {{#^rollTotal() critrolltype 3}}
                                {{#rollLess() die-one 9}} - {{/rollLess() die-one 9}}
                                {{#rollTotal() die-one 9}} <span data-i18n="shift">Shift</span> {{/rollTotal() die-one 9}}
                                {{#rollBetween() die-one 10 11}}  <span data-i18n="round">Round</span> {{/rollBetween() die-one 10 11}}
                                {{#rollTotal() die-one 12}} - {{/rollTotal() die-one 12}}
                            {{/^rollTotal() critrolltype 3}}
                        {{/^rollTotal() critrolltype 2}}
                    {{/^rollTotal() critrolltype 0}}
                </span>
            </div>
            <div class="template-div w50pc border-23">
                <span class="" title="Healing time" data-i18n-title="heal-title" data-i18n="heal-colon">Heal: </span>
                <span class="">
                    <!-- PHYSICAL CRITS -->  
                    <!-- PIERCING -->
                    {{#^rollTotal() critrolltype 1}}
                        {{#^rollTotal() critrolltype 4}}
                            {{#rollLess() die-one 4}} <span data-i18n="week">Week</span> {{/rollLess() die-one 4}}
                            {{#rollTotal() die-one 4}} <span data-i18n="month">Month</span> {{/rollTotal() die-one 4}}
                            {{#rollBetween() die-one 5 6}} <span data-i18n="week">Week</span> {{/rollBetween() die-one 5 6}}
                            {{#rollBetween() die-one 7 8}} <span data-i18n="month">Month</span> {{/rollBetween() die-one 7 8}}
                            {{#rollTotal() die-one 9}} <span data-i18n="week">Week</span> {{/rollTotal() die-one 9}}
                            {{#rollTotal() die-one 10}} <span data-i18n="permanent">Permanent</span> {{/rollTotal() die-one 10}}
                            {{#rollTotal() die-one 11}} <span data-i18n="month">Month</span> {{/rollTotal() die-one 11}}
                            {{#rollTotal() die-one 12}} - {{/rollTotal() die-one 12}}
                        {{/^rollTotal() critrolltype 4}}
                    {{/^rollTotal() critrolltype 1}}
                    <!-- CRUSHING -->
                    {{#^rollTotal() critrolltype 0}}
                        {{#^rollTotal() critrolltype 2}}
                            {{#^rollTotal() critrolltype 3}}
                                {{#rollLess() die-one 3}} <span data-i18n="week">Week</span> {{/rollLess() die-one 3}}
                                {{#rollTotal() die-one 3}} <span data-i18n="month">Month</span> {{/rollTotal() die-one 3}}
                                {{#rollBetween() die-one 4 6}} <span data-i18n="week">Week</span> {{/rollBetween() die-one 4 6}}
                                {{#rollTotal() die-one 7}} <span data-i18n="month">Month</span> {{/rollTotal() die-one 7}}
                                {{#rollTotal() die-one 8}} <span data-i18n="permanent">Permanent</span> {{/rollTotal() die-one 8}}
                                {{#rollTotal() die-one 9}} <span data-i18n="month">Month</span> {{/rollTotal() die-one 9}}
                                {{#rollGreater() die-one 9}} <span data-i18n="permanent">Permanent</span> {{/rollGreater() die-one 9}}
                            {{/^rollTotal() critrolltype 3}}
                        {{/^rollTotal() critrolltype 2}}
                    {{/^rollTotal() critrolltype 0}}  
                <!-- {{/rollTotal() critroll 1}}     -->              
                </span>
            </div>      
            <div class="template-div w100pc border-234 comments">
                <span class="comment">
                    <!-- PIERCING -->
                    {{#^rollTotal() critrolltype 1}}
                        {{#^rollTotal() critrolltype 4}}
                            {{#rollTotal() die-one 1}} <span data-i18n="crit-pierce-1-desc">Disadvantage to all OBSERVATION rolls.</span>  {{/rollTotal() die-one 1}}
                            {{#rollTotal() die-one 2}} <span data-i18n="crit-pierce-2-desc">Disadvantage to FIREARMS and HAND-TO-HAND COMBAT.</span>  {{/rollTotal() die-one 2}}
                            {{#rollTotal() die-one 3}} <span data-i18n="crit-pierce-3-desc">Disadvantage to FIREARMS and OBSERVATION.</span>  {{/rollTotal() die-one 3}}
                            {{#rollTotal() die-one 4}} <span data-i18n="crit-pierce-4-desc">Disadvantage to MOBILITY and FIREARMS rolls.</span>  {{/rollTotal() die-one 4}}
                            {{#rollTotal() die-one 5}} <span data-i18n="crit-pierce-5-desc">Any MOBILITY roll re-opens the wound.</span>  {{/rollTotal() die-one 5}}
                            {{#rollTotal() die-one 6}} <span data-i18n="crit-pierce-6-desc">Disadvantage to OBSERVATION and TECH.</span>  {{/rollTotal() die-one 6}}
                            {{#rollTotal() die-one 7}} <span data-i18n="crit-pierce-7-desc">Disadvantage to STAMINA and MOBILITY.</span>  {{/rollTotal() die-one 7}}
                            {{#rollTotal() die-one 8}} <span data-i18n="crit-pierce-8-desc">Instant death.</span>  {{/rollTotal() die-one 8}}
                            {{#rollTotal() die-one 9}} <span data-i18n="crit-pierce-9-desc">You can't stand upright. Crawling is the only possible mode of movement.</span>  {{/rollTotal() die-one 9}}
                            {{#rollTotal() die-one 10}} <span data-i18n="crit-pierce-10-desc">Instant death.</span>  {{/rollTotal() die-one 10}}
                            {{#rollTotal() die-one 11}} <span data-i18n="crit-pierce-11-desc">You can't stand upright. Crawling is the only possible mode of movement.</span>  {{/rollTotal() die-one 11}}
                            {{#rollGreater() die-one 11}} <span data-i18n="crit-pierce-12-desc">Instant death.</span>  {{/rollGreater() die-one 11}}
                        {{/^rollTotal() critrolltype 4}}
                    {{/^rollTotal() critrolltype 1}}
                    <!-- CRUSHING -->
                    {{#^rollTotal() critrolltype 0}}
                        {{#^rollTotal() critrolltype 2}}
                            {{#^rollTotal() critrolltype 3}}
                            {{#rollTotal() die-one 1}} <span data-i18n="crit-crush-1-desc">Disadvantage to MANIPULATION rolls.</span>  {{/rollTotal() die-one 1}}
                            {{#rollTotal() die-one 2}} <span data-i18n="crit-crush-2-desc">Disadvantage to OBSERVATION rolls.</span>  {{/rollTotal() die-one 2}}
                            {{#rollTotal() die-one 3}} <span data-i18n="crit-crush-3-desc">Disadvantage to FIREARMS and HAND-TO-HAND COMBAT.</span>  {{/rollTotal() die-one 3}}
                            {{#rollTotal() die-one 4}} <span data-i18n="crit-crush-4-desc">Disadvantage to FIREARMS and OBSERVATION.</span>  {{/rollTotal() die-one 4}}
                            {{#rollTotal() die-one 5}} <span data-i18n="crit-crush-5-desc">Disadvantage to MOBILITY rolls.</span> {{/rollTotal() die-one 5}}
                            {{#rollTotal() die-one 6}} <span data-i18n="crit-crush-6-desc">Disadvantage to OBSERVATION and TECH.</span>  {{/rollTotal() die-one 6}}
                            {{#rollTotal() die-one 7}} <span data-i18n="crit-crush-7-desc">You can't stand upright. Crawling is the only possible mode of movement.</span>  {{/rollTotal() die-one 7}}
                            {{#rollTotal() die-one 8}} <span data-i18n="crit-crush-8-desc">One of your arms cannot be used.</span>  {{/rollTotal() die-one 8}}
                            {{#rollTotal() die-one 9}} <span data-i18n="crit-crush-9-desc">Disadvantage to STAMINA and MOBILITY.</span>  {{/rollTotal() die-one 9}}
                            {{#rollTotal() die-one 10}} <span data-i18n="crit-crush-10-desc">You cannot move at all.</span>  {{/rollTotal() die-one 10}}
                            {{#rollTotal() die-one 11}} <span data-i18n="crit-crush-11-desc">You can't stand upright. Crawling is the only possible mode of movement.</span>  {{/rollTotal() die-one 11}}
                            {{#rollGreater() die-one 11}} <span data-i18n="crit-crush-12-desc">Instant death.</span>  {{/rollGreater() die-one 11}}
                            {{/^rollTotal() critrolltype 3}}
                        {{/^rollTotal() critrolltype 2}}
                    {{/^rollTotal() critrolltype 0}}  
                <!-- {{/rollTotal() critroll 1}}   -->
                </span>
            </div>  
            {{/rollTotal() critroll 1}}
            
            {{#rollTotal() critroll 2}}
            <div class="template-div w100pc border-234 comments">
                <span class="comment">
                    <!-- HUMAN -->
                    {{#rollTotal() critrolltype 1}}
                            {{#rollTotal() die-one 1}} <span data-i18n="crit-stress-human-1-desc">You're paralyzed by fear or indecision. You just can't force yourself to do anything
                            at all, even to the point of putting your own life in jeopardy due to your inaction.</span>  {{/rollTotal() die-one 1}}
                            {{#rollTotal() die-one 2}} <span data-i18n="crit-stress-human-2-desc">You break down in despair - roleplay this effect as appropriate for the
                            situation. During the breakdown, you can move to safety, but you can't perform any action that would
                            require a skill roll.</span>  {{/rollTotal() die-one 2}}
                            {{#rollTotal() die-one 3}} <span data-i18n="crit-stress-human-3-desc">You surrender to whatever obstacle you are facing. In combat or conflict, you
                            surrender to your adversary. In other situations, you just give up - see result #2 on this table.</span>  {{/rollTotal() die-one 3}}
                            {{#rollTotal() die-one 4}} <span data-i18n="crit-stress-human-4-desc">You lash out against a friendly or neutral character nearby. This could very well
                            be another PC, and the row could even turn violent. The effect needs to be roleplayed.</span>  {{/rollTotal() die-one 4}}
                            {{#rollTotal() die-one 5}} <span data-i18n="crit-stress-human-5-desc">You can't take it anymore and just leave the scene, to go home, get drunk, get laid, or
                            just wander the streets. You can't actively work on the case or make any skill rolls.</span>  {{/rollTotal() die-one 5}}
                            {{#rollGreater() die-one 5}} <span data-i18n="crit-stress-human-6-desc">You get the shakes, bad ones. You can continue to function, but with a disadvantage
                            to all skill rolls, and no rolls can be pushed.</span>  {{/rollGreater() die-one 5}}
                    {{/rollTotal() critrolltype 1}}
                    <!-- REPLICANT -->
                    {{#rollTotal() critrolltype 2}}
                                {{#rollTotal() die-one 1}} <span data-i18n="crit-stress-rep-1-desc">You must immediately attack the nearest person, friendly
                                or not. You won't stop until you or the target is Broken. After the spree is over, see result #2 on
                                this table. </span> {{/rollTotal() die-one 1}}
                                {{#rollTotal() die-one 2}} <span data-i18n="crit-stress-rep-2-desc">You lose the will to live, and simply collapse on the ground. You just can't force yourself
                                to do anything at all, even to the point of putting your own life in jeopardy due to your inaction. </span> {{/rollTotal() die-one 2}}
                                {{#rollTotal() die-one 3}} <span data-i18n="crit-stress-rep-3-desc">You break down in complete despair - roleplay this effect as appropriate
                                for the situation. During the breakdown, you can move to safety, but you can't perform any action that
                                would require a skill roll.</span>  {{/rollTotal() die-one 3}}
                                {{#rollTotal() die-one 4}} <span data-i18n="crit-stress-rep-4-desc">You perform some act of physical self-harm. It won't be lethal, but will typically
                                inflict one point of damage. If this makes you Broken, roll a D6 Crit Die on the appropriate table.</span>  {{/rollTotal() die-one 4}}
                                {{#rollTotal() die-one 5}} <span data-i18n="crit-stress-rep-5-desc">You feel a strong urge to connect to someone emotionally, to talk to someone. It
                                can be anyone around you. Roleplay this effect as appropriate. You cannot make any skill rolls and you
                                will not leave, unless your life is in immediate danger.</span>  {{/rollTotal() die-one 5}}
                                {{#rollGreater() die-one 5}} <span data-i18n="crit-stress-rep-6-desc">The stress pushes you forward to perform an extraordinary feat. You gain a bonus
                                action that you can perform immediately, breaking the initiative order. You gain an advantage to the
                                roll. After the action, see result #2 above.</span>  {{/rollGreater() die-one 5}}
                    {{/rollTotal() critrolltype 2}}   
                </span>
            </div>  
            {{/rollTotal() critroll 2}}
        {{/critroll}}

        {{#comment}}
        <div class="template-div w100pc border-234 comments">
            <span class="comment">{{comment}}</span>
        </div>
        {{/comment}}
        <!-- <div>
            {{button}}    
        </div> -->
        <!-- <div>
            [Guide](!&#13;/roll [[1d4]] &#64;{target|token_id} &#91;[1d6+&#63;{Bonus|0}]&#93;)
            [Push](~{{character-name}}|push)
            [2D12](~{{character-name}}|/r [[2D12]])
            [Try](!&#13;/r &{template:bladerunner}{{character-name=Test}}{{roll-name=Test roll}}{{pushed=[[1]]}}{{roll-adv=[[1]]}}{{die-one-size=[[6]]}}{{die-two-size=[[8]]}}{{die-one=[[1D6]]}}{{die-one-adv=[[1D6]]}}{{die-two=[[1D8}]]}}{{die-two-adv=[[1D8]]}})
            [Label](!&#13;&#37;{{character-name}}|/roll [[{{push=&{template:bladerunner} {{character-name={{character-name}}}} {{roll-name={{roll-name}} }} {{pushed=[[1]] }} {{roll-adv=[[{{roll-adv}}]] }} {{die-one-size=[[{{die-one}}]]}} {{die-two-size=[[{{die-two}}]]}} {{die-one=[[1D{{die-one}}]] }} {{die-one-adv=[[1D@{{die-one}}]] }} {{die-two=[[1D@{{die-two}}]] }} {{die-two-adv=[[1D@{{die-two}}]] }} }}]])
            [Test](!&#13;&#37;{{character-name}}|@{pushedrollcommand} &{template:bladerunner} {{character-name=@{pushedcharname}}} {{roll-name=@{pushedrollname} }} {{pushed=[[@{pushed}]] }} {{roll-adv=[[@{pushedrolladv}]] }} {{die-one-size=[[@{pusheddieone}]]}} {{die-two-size=[[@{pusheddietwo}]]}} {{die-one=[[1D@{pusheddieone}]] }}  {{die-one-adv=[[1D@{pusheddieone}]] }} {{die-two=[[1D@{pusheddietwo}]] }} {{die-two-adv=[[1D@{pusheddietwo}]] }}})
        </div> -->
        <!-- {{#allprops() }}
        <div class="template-div w100pc">
            <div class="template-div w50pc border-23">{{key}}</div>
            <div class="template-div w50pc border-23">{{value}}</div>             
        </div>
        {{/allprops() }} -->


    </div>
</rolltemplate>


<!--Sheet Workers -->
<script type="text/worker">
      
    /* number and log handling */
    const int = (score, on_error = 0) => parseInt(score) || on_error;
    const float = (score, on_error = 0) => parseFloat(score) || on_error;
    const clog = (text, title = "", color = "green", style = "font-size:12px; font-weight:normal;", headerstyle = "font-size:13px; font-weight:bold;") => {
        let titleStyle = `color:${color}; ${headerstyle} text-decoration:underline;`;
        let textStyle = `color:${color}; ${style}`;
        let output = `%c${title} %c${text}`;
        if (title) {
        console.log(output, titleStyle, textStyle);
        } else {
        output = `%c${text}`;
        console.log(output, textStyle);
        }
    };

    /* Oosh async attribute functions */
    const asw = (() => {
        const setActiveCharacterId = function(charId){
            let oldAcid=getActiveCharacterId();
            let ev = new CustomEvent("message");
            ev.data={"id":"0", "type":"setActiveCharacter", "data":charId};
            self.dispatchEvent(ev);
            return oldAcid;
        };
        const promisifyWorker = (worker, parameters) => {
            let acid=getActiveCharacterId(); 
            let prevAcid=null;               
            return new Promise((res,rej)=>{
                prevAcid=setActiveCharacterId(acid);  
                try {if (worker===0) getAttrs(parameters[0]||[],(v)=>res(v));
                    else if (worker===1) setAttrs(parameters[0]||{}, parameters[1]||{},(v)=>res(v));
                    else if (worker===2) getSectionIDs(parameters[0]||'',(v)=>res(v));
                } catch(err) {rej(console.error(err))}
            }).finally(()=>setActiveCharacterId(prevAcid));
        }
        return {
            getAttrs(attrArray) {return promisifyWorker(0, [attrArray])},
            setAttrs(attrObj, options) {return promisifyWorker(1, [attrObj, options])},
            getSectionIDs(section) {return promisifyWorker(2, [section])},
            setActiveCharacterId,
        }
    })();

    // METHODS FOR PARSED ROLLS
    const rollEscape = {
        chars: { '"': '%quot;', ',': '%comma;', ':': '%colon;', '}': '%rcub;', '{': '%lcub;', },
        escape(str) {
            str = (typeof(str) === 'object') ? JSON.stringify(str) : (typeof(str) === 'string') ? str : null;
            return (str) ? `${str}`.replace(new RegExp(`[${Object.keys(this.chars)}]`, 'g'), (r) => this.chars[r]) : null;
        },
        unescape(str) {
            str = `${str}`.replace(new RegExp(`(${Object.values(this.chars).join('|')})`, 'g'), (r) => Object.entries(this.chars).find(e=>e[1]===r)[0]);
            return JSON.parse(str);
        }
    }
    
	// Helper function to grab player input
	const getQuery = async (queryText) => {
		const rxGrab = /^0\[(.*)\]\s*$/;
		let rollBase = `! {{query1=[[ 0[${queryText}] ]]}}`, // just a [[0]] roll with an inline tag
			queryRoll = await startRoll(rollBase),
			queryResponse = (queryRoll.results.query1.expression.match(rxGrab) || [])[1]; 
		finishRoll(queryRoll.rollId); // you can just let this time out if you want - we're done with it
		return queryResponse;
	};

    /* GiGs 'Super Simple Summarizer' */
    const repeatingSum = (destination, section, fields, multiplier = 1) => {
      if (!Array.isArray(fields)) fields = [fields];
      getSectionIDs(`repeating_${section}`, (idArray) => {
        const attrArray = idArray.reduce((m, id) => [...m, ...fields.map((field) => `repeating_${section}_${id}_${field}`)], []);
        getAttrs(attrArray, (v) => {
          //clog("values of v: " + JSON.stringify(v));
          // getValue: if not a number, returns 1 if it is 'on' (checkbox), otherwise returns 0..
          const getValue = (section, id, field) => float(v[`repeating_${section}_${id}_${field}`]) || (v[`repeating_${section}_${id}_${field}`] === "on" ? 1 : 0);
    
          const sumTotal = idArray.reduce((total, id) => total + fields.reduce((subtotal, field) => subtotal * getValue(section, id, field), 1), 0);
          setAttrs({
            [destination]: sumTotal * multiplier,
          });
        });
      });
    };

    /* Roll buttons to use input values for launching action buttons with %{@{character_name|action}}
    on('sheet:opened change:character_name', function() {
        getAttrs(["character_name"], function(values){
            const actions = ['customroll_action','customrolladv_action','customrolldis_action'
            ];
            const setObj = actions.reduce((accumulator,actionName)=>{
                accumulator[actionName] = `%{${values.character_name}|${actionName.replace(/_/g,'-')}}`;//Update the action call
                return accumulator; //The memo (accumulator in this case) must always be returned when using a reduce function
            },{});
            setAttrs(setObj,{silent:true});//Apply the changes
        });    
    }); */

    // VERSIONING
    // If need for specific data updates with new version then include as a case comparing sheet version with version in the below Switch statement
    on("sheet:opened", () => {
        getAttrs(["sheetversion", "version", "newchar"], (values) => {
            var sheet = float(values.sheetversion),
            actual = float(values.version),
            newchar = int(values.newchar);
            clog(`Versioning; sheet version: ${sheet}, actual: ${actual}, new char: ${newchar}`);

            // Add additional check below, e.g. case newchar != 1 && actual < 2.02
            // In the case statements, call on a separate function to handle data upgrades and other necessary changes
            switch (true) {
                case newchar == 1 :
                    // A new character would always be on the sheet version, no need to bother with upgrades but need to reset the newchar attribute
                    clog(`New character identified. New char: ${newchar}, sheet version: ${sheet}, actual: ${actual}`);
                    setAttrs({
                        version: sheet,
                        newchar: 0,
                        config_notice: 1
                    });
                    break;  
                /*
                case actual < float(4.02) : 
                    clog(`New version upgrade needed. Sheet version: ${sheet}, actual: ${actual}`);
                    upg_4_02();
                    */
                case actual < sheet :
                    // This can be use as example of upgrade handling, use specific versions in the case logic to handle version specific upgrade of attributes, e.g. actual < 2.10 :
                    // Any upgrade handling needs to be done above this one, and may set the actual variable to be same as sheet to avoid doing the below setAttrs twice.
                    clog(`Updating version. Sheet version: ${sheet}, actual: ${actual}`);
                    // Add reference to upgrade function here, if needed, e.g. upgrade_to_2.24() 
                    setAttrs({
                        version: sheet,
                        newchar: 0,
                        config_notice: 1
                    });
                    // In case an upgrade can be followed by further upgrading, then omit the break at this stage to move down the list of cases
                    break;
            }
        });
    });

    /* TAB HANDLING */
    const buttonlist = ["character","timereport"];
    //clog(`Button list: ${buttonlist}`);
    _.each(buttonlist, (button) => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });  
    /* main sheet tabs 
    const main_tabs = {"character":"character","timereport":"timereport"","config":"config"};
    _.mapObject(main_tabs, (main,tab) => {
        on(`clicked:${tab}`, function() {
            //clog(`${tab} button clicked`);
            setAttrs({ 
                sheetTab: main
            });
            //clog(`Sheet tab Set To: ${main}`);
        });
    });*/

    /* SET MAX HEALTH */
    on("change:health_max change:health_mod change:strength change:agility change:charactertype sheet:opened", async () => {
        const attrs = await asw.getAttrs(['strength','agility','health_max','health_mod','charactertype']);
        const replicant = int(attrs['charactertype']) === 2 ? 2 : 0; 
        const health = Math.ceil( ( int(attrs['strength']) + int(attrs['agility'])) / 4 ) + int(attrs['health_mod']) + replicant;
        //clog(`Max health is ${health}`);
        await asw.setAttrs({health_max: health});
    });
    /* SET MAX RESOLVE */
    on("change:resolve_max change:resolve_mod change:intelligence change:empathy change:charactertype sheet:opened", async () => {
        const attrs = await asw.getAttrs(['intelligence','empathy','resolve_max','resolve_mod','charactertype']);
        const replicant = int(attrs['charactertype']) === 2 ? 2 : 0; 
        const resolve = Math.ceil( ( int(attrs['intelligence']) + int(attrs['empathy'])) / 4 ) + int(attrs['resolve_mod']) - replicant;
        //clog(`Max resolve is ${resolve}`);
        await asw.setAttrs({resolve_max: resolve});
    });

    // SET SECRET ROLL 
    on('change:secretrolls sheet:opened', (ev) => {
        getAttrs(['secretrolls', 'rollcommand'], (values) => {
            //clog(`Secret roll update: ${JSON.stringify(ev)}`);
            const s = int(values.secretrolls);
            var r = "/w gm";
            //clog(`Secret rolls (${s}): `+ !( s == "0" || !s ));
            if ( s == "0" || !s ) {
                r = "";
            } 
            setAttrs({
                rollcommand: r
            });
        });
    });
    /***** PARSED ROLLS ************************************************/
    
    // Return the code used in roll template for normal, advantage, or disadvantage based on the name of the action
    const checkAdvantageRoll = (str) => {
        return (str.slice(-3) == "adv" ? 1 : (str.slice(-3) == "dis" ? -1 : 0));
    }

    // The actual parsed roll
    const parsedRoll = async (rollname, dieone, dieoneadv, dieonesize, dietwo, dietwoadv, dietwosize, push, comment, adv = 0 ) => {
        //const rolladv = checkAdvantageRoll(rollaction);
        clog(`Starting parsed roll with Roll: ${rollname}, Die 1: ${dieone}, ${dieoneadv}, ${dieonesize}, Die 2:  ${dietwo}, ${dietwoadv}, ${dietwosize}, Other: ${push}, ${comment}, ${adv}`)
        
        var commentStr = "";
        if ( comment && comment != "" ) {
            commentStr = `{{comment=${comment}}}`;
        }

        let rollBase = `@{rollcommand} &{template:bladerunner} {{roll-adv=[[${adv}]]}} {{die-one-size=[[${dieonesize}]]}} {{die-two-size=[[${dietwosize}]]}} {{die-one=[[${dieone}]]}}  {{die-one-adv=[[${dieoneadv}]]}} {{die-two=[[${dietwo}]]}} {{die-two-adv=[[${dietwoadv}]]}} {{push=[[${push}]]}} {{character-name=@{character_name}}} {{roll-name=${rollname}}} ${commentStr}`;
        let firstRoll = await startRoll(rollBase);

        //    rollValue = firstRoll.results.roll1.result;
        //clog(`First roll data: ${JSON.stringify(firstRoll)}`);
        //clog(`First roll results: ${JSON.stringify(firstRoll.results)}`);
        // Storing all the passthrough data required for the next roll in an Object helps for larger rolls

        /* let rollData = {
            roller: attrs.character_name,
        } */
        const results = firstRoll.results; 
        //clog(`results: ${JSON.stringify(results)}`);
        //clog(`die 1: ${JSON.stringify(results['die-one'])}`);
        //clog(`die 2: ${JSON.stringify(results['die-two'])}`);
        //clog(`die 1 adv: ${JSON.stringify(results['die-one-adv'])}`);
        //clog(`die 2 adv: ${JSON.stringify(results['die-two-adv'])}`);

        const rollnameStr = rollname.startsWith("Push: ") ? rollname : "Push: "+rollname; 

        //clog(`ROll name is now: ${rollnameStr}`);

        clog(`Values for push are: ${rollnameStr}, ${dieone}, ${dietwo}, ${dieoneadv}, ${dietwoadv}, ${dieonesize}, ${dietwosize}, ${adv}, ${push}, ${results['die-one'].result}, ${results['die-one-adv'].result}, ${results['die-two'].result}, ${results['die-two-adv'].result} `);
        //clog(`Push die two advantage: ${JSON.stringify(dietwoadv)}`);
        await asw.setAttrs({
            pushrollname: rollnameStr,
            pushdieone: dieone,
            pushdietwo: dietwo,
            pushdieoneadv: dieoneadv,
            pushdietwoadv: dietwoadv,
            pushdieonesize: dieonesize,
            pushdietwosize: dietwosize,
            pushrolladv: adv,
            push: int(push)-1,
            pushdieoner1: results['die-one'].result,
            pushdieoner2: results['die-one-adv'].result,
            pushdietwor1: results['die-two'].result,
            pushdietwor2: results['die-two-adv'].result
        });

        clog('Finishing roll...');

        // Finish the roll, passing the escaped rollData object into the template as computed::passthroughdata
        // Our roll template then inserts that into [butonlabel](~selected|buttonlink||<computed::passthroughdata>)
        // ~selected allows anyone to click the button with their token selected. Omitting this will cause the button
        // to default to whichever character is active in the sandbox when the button is created
        /**/
        finishRoll(firstRoll.rollId);
    }


    const actions = ['', 'push', 'custom', 'strength', 'handtohand', 'force', 'stamina', 'agility', 'firearms', 'mobility', 'stealth', 
                    'intelligence', 'medicalaid', 'observation', 'tech', 'driving', 'empathy', 'connections', 'insight', 'manipulation',
                    'weapon1cc', 'weapon1rc', 'weapon2cc','weapon2rc', 'weapon3cc', 'weapon3rc',
                    'repeating_weapon:weaponcc', 'repeating_weapon:weaponrc'];
    const actionList = _.reduce(actions, (m,n) => {
        return m + "clicked:"+n+"roll clicked:"+n+"rolladv clicked:"+n+"rolldis clicked:"+n+"rollhelp ";
    });
    //clog(actionList);


    // Sheet rolls handler
    on(actionList, async (ev) => {
        //clog(`Starting first roll`);
        // We'll pretend we've done a getAttrs on the attacker's weapon for all the required values
        // Row ID's must be provided when using action buttons too, we'll skip all of that here though
        //clog(`First event: ${JSON.stringify(ev)}`);
        //clog(`Event name: ${ev.htmlAttributes.name}`);  

        const rollAction = (ev.htmlAttributes.name).slice(4)||""; 
        var rollname = ev.htmlAttributes['data-name']||""; 


        var dieone = "0", dietwo = "0";
        const dieoneData = ev.htmlAttributes['data-die-one']; 
        //clog(`Die one Data: ${dieoneData}`);
        if ( dieoneData !== "0" ) {
            const dieoneStr = (dieoneData.split("@{",2)[1]).split("}")[0]; 
            //clog(`Die one test = ${JSON.stringify(dieoneStr)}`);
            dieone = (await asw.getAttrs([dieoneStr]))[dieoneStr];
        }
        //clog(`Die one = ${dieone}`);
        const dietwoData = ev.htmlAttributes['data-die-two']; 
        //clog(`Die two Data: ${dietwoData}`);
        if ( dietwoData !== "0" ) {
            const dietwoStr = (dietwoData.split("@{",2)[1]).split("}")[0]; 
            //clog(`Die two test = ${JSON.stringify(dietwoStr)}`);
            dietwo = (await asw.getAttrs([dietwoStr]))[dietwoStr];
        }
        //clog(`Die two = ${dietwo}`);
        
        const advtge = ev.htmlAttributes['data-adv']||0; 
        var comment = ev.htmlAttributes['data-comment']||""; 

        //const push = ev.htmlAttributes['data-push']||0; 
        const push = (await asw.getAttrs(['charactertype'])).charactertype;
        clog(`Picked up push amount: ${push}`);

        var repeatingId = '';
        //clog(`Testing sourceAttribute: ${!!(ev.sourceAttribute != undefined)}`);
        //clog(`Testing sourceAttribute: ${!!(ev.sourceAttribute)}`);
        //clog(`Testing sourceAttribute: ${!!(ev.sourceAttribute).startsWith('repeating_weapon')}`);
        if ( ev.sourceAttribute != undefined && (ev.sourceAttribute).startsWith('repeating_weapon') ) {
            repeatingId = (ev.sourceAttribute).split("_")[2];
            //clog(`Repeating weapon id : ${repeatingId}`);           
            const datarepeating = await asw.getAttrs([`repeating_weapon_${repeatingId}_name`, `repeating_weapon_${repeatingId}_comment`]);
            comment = datarepeating[`repeating_weapon_${repeatingId}_comment`];
            rollname = datarepeating[`repeating_weapon_${repeatingId}_name`];
            //clog(`Repeating weapon name : ${rollname}`);
            //clog(`Repeating weapon comment : ${comment}`);
        }

        clog(`Roll action: ${rollAction}, roll name: ${rollname}, Die 1: ${"1D"+dieone}, Die 1 Size: ${dieone}, Die 2: ${"1D"+dietwo}, Die 2 Size: ${dietwo}, Push: ${push}, Advantage: ${advtge}`);

        parsedRoll(rollname, "1D"+dieone, "1D"+dieone, dieone, "1D"+dietwo, "1D"+dietwo, dietwo, push, comment, advtge);
    });

    
    // Pushed roll handler
    on('clicked:pushroll clicked:pushroll_1 clicked:pushroll_12 clicked:pushroll_13 clicked:pushroll_2 clicked:pushroll_23 clicked:pushroll_3 clicked:pushroll_123', async (ev) => {
        clog(`Starting push roll`);
        //clog(`First event: ${JSON.stringify(ev)}`);
        //clog(`Push type: ${(ev.triggerName).split('_')[1]}`);  
        const pushType = (ev.triggerName).split('_')[1];

        const pushedAttrs = await asw.getAttrs(["pushrollname", "pushrollcomment", "pushdieone", "pushdietwo", "pushdieoneadv", "pushdietwoadv", "pushdieonesize", "pushdietwosize", "pushrolladv", "push", "pushdieoner1", "pushdieoner2", "pushdietwor1", "pushdietwor2"]);
        clog(`Pushed Attributes: ${JSON.stringify(pushedAttrs)}`);


        var rollName = pushedAttrs.pushrollname; 
        const dieone = pushedAttrs.pushdieone; 
        const dietwo = pushedAttrs.pushdietwo;
        const dieoneadv = pushedAttrs.pushdieoneadv; 
        const dietwoadv = pushedAttrs.pushdietwoadv;
        const dieonesize = pushedAttrs.pushdieonesize; 
        const dietwosize = pushedAttrs.pushdietwosize;  
        const dieoneres = pushedAttrs.pushdieoner1; 
        const dieoneadvres = pushedAttrs.pushdieoner2; 
        const dietwores = pushedAttrs.pushdietwor1; 
        const dietwoadvres = pushedAttrs.pushdietwor2;
        const advtge = pushedAttrs.pushrolladv; 
        var comment = pushedAttrs.pushrollcomment; 
        const push = int(pushedAttrs.push); 
        const advdie = int(dieonesize) <= int(dietwosize) ? 1 : 2; 

        clog(`Roll name: ${rollName}, Die 1: ${dieone}, Die 1 Size: ${dieonesize}, Die 2: ${dietwo}, Die 2 Size: ${dietwosize}, Push: ${push}, Advantage: ${advtge}`);

        switch (true) {
            case pushType === '1' : {
                    parsedRoll(rollName, "1D"+dieonesize, dieoneadvres, dieonesize, dietwores, dietwoadvres, dietwosize, push, comment, advtge);
                    break;
                }
            case pushType === '2' : {
                    parsedRoll(rollName, dieoneres, dieoneadvres, dieonesize, "1D"+dietwosize, dietwoadvres, dietwosize, push, comment, advtge);
                    break;
                }
            case pushType === '3' && advdie === 1  : {
                    parsedRoll(rollName, dieoneres, "1D"+dieonesize, dieonesize, dietwores, dietwoadvres, dietwosize, push, comment, advtge);
                    break;
                }
            case pushType === '3' && advdie === 2  : {
                    parsedRoll(rollName, dieoneres, dieoneadvres, dieonesize, dietwores, "1D"+dietwosize, dietwosize, push, comment, advtge);
                    break;
                }
            case pushType === '12' : {
                    parsedRoll(rollName, "1D"+dieonesize, dieoneadvres, dieonesize, "1D"+dietwosize, dietwoadvres, dietwosize, push, comment, advtge);
                    break;
                }
            case pushType === '13' && advdie === 1  : {
                    parsedRoll(rollName, "1D"+dieonesize, "1D"+dieonesize, dieonesize, dietwores, dietwoadvres, dietwosize, push, comment, advtge);
                    break;
                }
            case pushType === '13' && advdie === 2  : {
                    parsedRoll(rollName, "1D"+dieonesize, dieoneadvres, dieonesize, dietwores, "1D"+dietwosize, dietwosize, push, comment, advtge);
                    break;
                }
            case pushType === '23' && advdie === 1  : {
                    parsedRoll(rollName, dieoneres, "1D"+dieonesize, dieonesize, "1D"+dietwosize, dietwoadvres, dietwosize, push, comment, advtge);
                    break;
                }
            case pushType === '23' && advdie === 2  : {
                    parsedRoll(rollName, dieoneres, dieoneadvres, dieonesize, "1D"+dietwosize, "1D"+dietwosize, dietwosize, push, comment, advtge);
                    break;
                }
            case pushType === '123' : {
                    parsedRoll(rollName, "1D"+dieonesize, "1D"+dieonesize, dieonesize, "1D"+dietwosize, "1D"+dietwosize, dietwosize, push, comment, advtge);
                    break;
                }
        }
        //parsedRoll(rollName, dieone, dieonesize, dietwo, dietwosize, push, comment, advtge);

    });

</script>

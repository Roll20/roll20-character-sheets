<div class = "sheet">
	<div class="sheet-flex-between">
		<div class="sheet-col-left  sheet-ability-column sheet-thick-border">
			<div class ="sheet-info">
				<h2>Name: </h2>
				<input type="text" class="sheet-bottom-line" name="attr_character_name">
			</div>
			<div class ="sheet-info">
				<h2>Background: </h2>
				<input type="text" class="sheet-bottom-line" name="attr_background">
			</div>
			<div class ="sheet-info">
				<select name="attr_wtype" class="dtype">
					<option value="">Never Whisper Rolls</option>
					<option value="/w gm ">Always Whisper Rolls</option>
				</select>	
			</div>
		</div>
		<div class="sheet-col-right sheet-thick-border">
			<div class="sheet-info-name sheet-ability-column">
				<div class ="sheet-info">
					<h2>Birthsign:</h2>
					<select name="attr_sign" class="dtype">
						<option value="Star">Star (Brave, Reckless)</option>
						<option value="Wheel">Wheel (Industrious, Unimaginative)</option>
						<option value="Acorn">Acorn (Inquisitive, Stubborn)</option>
						<option value="Storm">Storm (Generous, Wrathful)</option>
						<option value="Moon">Moon (Wise, Mysterious)</option>
						<option value="Mother">Mother (Nurturing, Worrying)</option>
					</select>
				</div>
				<div class ="sheet-info">
					<h2>Coat:</h2>
					<input type="text" list="coat_options" class="sheet-bottom-line" name="attr_coat"> 
						<datalist id="coat_options">
							<option value="Solid Chocolate">Solid Chocolate</option>
							<option value="Brindle Chocolate">Brindle Chocolate</option>
							<option value="Patchy Chocolate">Patchy Chocolate</option>
							<option value="Banded Chocolate">Banded Chocolate</option>
							<option value="Marbled Chocolate">Marbled Chocolate</option>
							<option value="Flecked Chocolate">Flecked Chocolate</option>
							<option value="Solid Black">Solid Black</option>
							<option value="Brindle Black">Brindle Black</option>
							<option value="Patchy Black">Patchy Black</option>
							<option value="Banded Black">Banded Black</option>
							<option value="Marbled Black">Marbled Black</option>
							<option value="Flecked Black">Flecked Black</option>
							<option value="Solid White">Solid White</option>
							<option value="Brindle White">Brindle White</option>
							<option value="Patchy White">Patchy White</option>
							<option value="Banded White">Banded White</option>
							<option value="Marbled White">Marbled White</option>
							<option value="Flecked White">Flecked White</option>
							<option value="Solid Tan">Solid Tan</option>
							<option value="Brindle Tan">Brindle Tan</option>
							<option value="Patchy Tan">Patchy Tan</option>
							<option value="Banded Tan">Banded Tan</option>
							<option value="Marbled Tan">Marbled Tan</option>
							<option value="Flecked Tan">Flecked Tan</option>
							<option value="Solid Grey">Solid Grey</option>
							<option value="Brindle Grey">Brindle Grey</option>
							<option value="Patchy Grey">Patchy Grey</option>
							<option value="Banded Grey">Banded Grey</option>
							<option value="Marbled Grey">Marbled Grey</option>
							<option value="Flecked Grey">Flecked Grey</option>
							<option value="Solid Blue">Solid Blue</option>
							<option value="Brindle Blue">Brindle Blue</option>
							<option value="Patchy Blue">Patchy Blue</option>
							<option value="Banded Blue">Banded Blue</option>
							<option value="Marbled Blue">Marbled Blue</option>
							<option value="Flecked Blue">Flecked Blue</option>
						</datalist>
				</div>
				<div class ="sheet-info">
					<h2>Physical: </h2>
					<input type="text" list="look_details" class="sheet-bottom-line" name="attr_detail">
					<datalist id="look_details">
							<option value="Scarred body">Scarred body</option>
							<option value="Corpulent body">Corpulent body</option>
							<option value="Skeletal body">Skeletal body</option>
							<option value="Willowy body">Willowy body</option>
							<option value="Tiny body">Tiny body</option>
							<option value="Massive body">Massive body</option>
							<option value="War paint">War paint</option>
							<option value="Foreign clothes">Foreign clothes</option>
							<option value="Elegant clothes">Elegant clothes</option>
							<option value="Patched clothes">Patched clothes</option>
							<option value="Fashionable clothes">Fashionable clothes</option>
							<option value="Unwashed clothes">Unwashed clothes</option>
							<option value="Missing ear">Missing ear</option>
							<option value="Lumpy face">Lumpy face</option>
							<option value="Beautiful face">Beautiful face</option>
							<option value="Round face">Round face</option>
							<option value="Delicate face">Delicate face</option>
							<option value="Elongated face">Elongated face</option>
							<option value="Groomed fur">Groomed fur</option>
							<option value="Dreadlocks">Dreadlocks</option>
							<option value="Dyed fur">Dyed fur</option>
							<option value="Shaved fur">Shaved fur</option>
							<option value="Frizzy fur">Frizzy fur</option>
							<option value="Silky fur">Silky fur</option>
							<option value="Night black eyes">Night black eyes</option>
							<option value="Eye patch">Eye patch</option>
							<option value="Blood red eyes">Blood red eyes</option>
							<option value="Wise eyes">Wise eyes</option>
							<option value="Sharp eyes">Sharp eyes</option>
							<option value="Luminous eyes">Luminous eyes</option>
							<option value="Cropped tail">Cropped tail</option>
							<option value="Whip-like tail">Whip-like tail</option>
							<option value="Tufted tail">Tufted tail</option>
							<option value="Stubby tail">Stubby tail</option>
							<option value="Prehensile tail">Prehensile tail</option>
							<option value="Curly tail">Curly tail</option>
					</datalist>
				</div>
			</div>
		</div>
	</div>


<div class="sheet-thick-border">
	<div class="sheet-flex-between">
		<div class="sheet-col-left">
			<img name="attr_character_avatar">
		</div>
		<div class="sheet-col-right">
			<div>
				<h3>Ability Scores</h3>
				<div class="sheet-flex sheet-ability-column">
					<div class="sheet-ability">
						<h2>Hit Points</h2>
						<input type="number" class="sheet-ability-value" name="attr_hp" value="6"> /
						<input type="number" class="sheet-ability-value" name="attr_hp_max" value="6">
					</div>
					<div class="sheet-ability">
						<h2>Armour</h2>
						<input type="number" class="sheet-ability-value" name="attr_armour" value="1">
					</div>	
					<div class="sheet-ability">
						<h2>Strength</h2>
						<input type="number" class="sheet-ability-value" name="attr_str" value="10"> /
						<input type="number" class="sheet-ability-value" name="attr_str_max" value="10">
						<button class="sheet-ability-button btn ui-draggable" type="roll" value="@{wtype}&{template:ito-save} {{name=@{character_name}'s Strength Save}} {{success=[[@{str}]]}} {{roll1=[[1d20]]}}" name="roll_StrCheck"/>
					</div>
					<div class="sheet-ability">
						<h2>Dexterity</h2>
						<input type="number" class="sheet-ability-value" name="attr_dex" value="10"> /
						<input type="number" class="sheet-ability-value" name="attr_dex_max" value="10">
						<button class="sheet-ability-button btn ui-draggable" type="roll" value="@{wtype}&{template:ito-save} {{name=@{character_name}'s Dexterity Save}} {{success=[[@{dex}]]}} {{roll1=[[1d20]]}}" name="roll_DexCheck"/>
					</div>
					<div class="sheet-ability">
						<h2>Willpower</h2>
						<input type="number" class="sheet-ability-value" name="attr_wil" value="10"> /
						<input type="number" class="sheet-ability-value" name="attr_wil_max" value="10">
						<button class="sheet-ability-button btn ui-draggable" type="roll" value="@{wtype}&{template:ito-save} {{name=@{character_name}'s Willpower Save}} {{success=[[@{wil}]]}} {{roll1=[[1d20]]}}" name="roll_WilCheck"/>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="sheet-flex-between">
    <div class="sheet-col-left sheet-thick-border">
        <h3>Weapons</h3>
        <div class="sheet-rep-title sheet-flex-between">
            <span class="sheet-weapon-name">Name</span>
            <span class="sheet-damage">Damage</span>
            <span class="sheet-dummy-attack-button"></span>
        </div>
        <fieldset class="repeating_weapons">
            <input type="text" name="attr_weaponname" class="sheet-bottom-line sheet-weapon-name">
            <input type="checkbox" name="attr_Emblem1_checkbox" value="1" >
            <input type="checkbox" name="attr_Emblem2_checkbox" value="1" >
            <input type="checkbox" name="attr_Emblem3_checkbox" value="1" >
            <select name="attr_weapondamage" class="dtype sheet-damage">
                <option value="d4">d4</option>
                <option value="d6">d6</option>
                <option value="d8">d8</option>
                <option value="d10">d10</option>
                <option value="d12">d12</option>
                <option value="d0">N/A</option>
            </select>
            <button class="sheet-attack-button btn ui-draggable" type="roll" value="@{wtype}&{template:default} {{name=@{character_name}'s @{weaponname}}} {{damage=[[@{weapondamage}]]}}" name="roll_Attack"></button>
        </fieldset>
    </div>


    <div class="sheet-col-right sheet-thick-border sheet-equipment">
        <h3>Equipment</h3>
        <fieldset class="repeating_equipment">
             <input type="text" name="attr_itemname" class="sheet-bottom-line sheet-equipment-name">
            <input type="checkbox" name="attr_Emblem1_checkbox" value="1" >
            <input type="checkbox" name="attr_Emblem2_checkbox" value="1" >
            <input type="checkbox" name="attr_Emblem3_checkbox" value="1" >
             <input type="number" name="attr_encumbrance" class="sheet-encumbrance sheet-bottom-line" value="1" step="0.1">
        </fieldset>
        <div class="sheet-top-line sheet-flex-between sheet-encumbrance-total">
          <span class="sheet-equipment-name">Total</span>
          <input type="number" name="attr_encumbrance_total" class="sheet-encumbrance" value="0" readonly="">
        </div>
    </div>
</div>

 <div class="sheet-thick-border">
        <h3>Experience</h3>
        <div class="sheet-flex">
		    <div class="sheet-exp">
                <h2>Pips</h2>
                <input type="number" class="sheet-experiance-value" name="attr_Pips" value="0"> 
            </div>
            <div class="sheet-exp">
                <h2>XP</h2>
                <input type="number" class="sheet-experiance-value" name="attr_XP" value="0"> 
            </div>
            <div class="sheet-exp">
                <h2>Level</h2>
                <input type="number" class="sheet-experiance-value" name="attr_level" value="1"> 
            </div>
			<div class="sheet-exp">
                <h2>Grit</h2>
                <input type="number" class="sheet-experiance-value" name="attr_Grit" value="0">
            </div>
        </div>
    </div>

<div class="sheet-flex-between">
    <div class="sheet-col-left sheet-thick-border">
        <h3>Notes</h3>
        <div class="sheet-flex">
            <textarea name="attr_notes" style="width:97%;height:180px"></textarea>
        </div>
    </div>
    <div class="sheet-col-right sheet-thick-border">
        <h3>Notes 2</h3>
        <div class="sheet-flex">
            <textarea name="attr_notes2" style="width:97%;height:180px"></textarea>
        </div>
    </div>
</div>
</div>


<!-- Sheet workers -->
<script type="text/worker">
// Equipment counter
on('change:repeating_equipment remove:repeating_equipment', () => {
  "use strict";
  getSectionIDs('repeating_equipment', idArray => {
    getAttrs(idArray.map(id => `repeating_equipment_${id}_encumbrance`), v => {
      const total = Object.values(v).reduce((m, w) => (m + (parseFloat(w) || 0)), 0);
      setAttrs({
        encumbrance_total: total
      });
    });
  });
});
</script>

<!--
&{template:ito-save} {{name=Test}} {{success=[[50]]}} {{roll1=[[1d100]]}}
-->
<rolltemplate class="sheet-rolltemplate-ito-save">
    <div class="sheet-template-container">
        <div class="sheet-template-header">{{name}}</div>
        <div class="sheet-template-row">
            <span class="template_label">Target:</span>
            <span class="template_value">{{success}}</span>
        </div>
        <div class="sheet-template-row">
            <span class="template_label">Rolled:</span>
            <span class="template_value">{{roll1}}</span>
        </div>
        {{#rollBetween() roll1 1 success}}
        <div class="sheet-template-success">
            <span>Success</span>
        </div>
        {{/rollBetween() roll1 1 success}}
        {{#rollGreater() roll1 success}}
        <div class="sheet-template-failure">
            <span>Failure</span>
        </div>
        {{/rollGreater() roll1 success}}
    </div>
</rolltemplate>
<div class="logo">
    <a href="https://www.casimages.com/i/21050702522525561517405672.png.html" target="_blank" title="Logo Ynn Pryddein"><img src="https://nsm09.casimages.com/img/2021/05/07//21050702522525561517405672.png" border="0" alt="Logo Ynn Pryddein" /></a>
</div>
<div class="entete">
    <div class="list-entete">
        <span> Nom : 
            <input type="text" placeholder="Nom" name="attr_name" style="width: 43%;"/> 
            <input type="text" placeholder="Signification" name="attr_name_signification" style="width: 43%;"/> 
        </span>
    </div>
    <div class="list-entete">
        <span> Surnom(s) : 
            <input type="text" placeholder="Surnom(s)" name="attr_surnom" style="width: 80%;"/> 
        </span>
    </div>
    <div class="list-entete">      
        <div class="table" style="width: 50%;">
            <div class="table-row"><div class="table-cell">Points Dan : </div>
            <div class="table-cell"><input type="number" name="attr_dan" value="0" min="0" /> / <input type="number" name="attr_dan_max" value="0" min="0" /></div></div>
            <div class="table-row"><div class="table-cell"><b>Vie :</b> </div>
            <div class="table-cell"><input type="number" name="attr_vie" value="0" min="0" /> / <input type="number" name="attr_vie_max" value="0" min="0" /></div></div>
        </div> 
    </div>
    <div class="list-entete">
        Jets de dés : 
        <input type="number" name="attr_dicenumber" value="3" min="1" max="5" /><b> d10 </b> 
        <input type="hidden" name="attr_attRollValue" value="&{template:YnnPryddein} {{nom=@{name}}} {{numberOfDice=@{dicenumber}}} [[ [[3d10]] ]] {{myRoll=$[[0]]}}" />
        <button type="roll" name="roll_attRoll" value="@{attRollValue}"></button>
    </div>
</div>

<a href="https://www.casimages.com/i/21050702423625561517405642.png.html" target="_blank" title="Frise Ynn Pryddein"><img src="https://nsm09.casimages.com/img/2021/05/07//21050702423625561517405642.png" border="0" alt="Frise Ynn Pryddein" /></a>

<div class="box-traits-combat">
    <div class="box-text">
        <h3>Caractéristiques</h3> 
        <div class="table" style="width: 80%;">
            <div class="table-row"><div class="table-cell">Hargne: </div><div class="table-cell"><input type="number" name="attr_hargne" value="0" min="0" /></div>
            <div class="table-cell">Endurance: </div><div class="table-cell"><input type="number" name="attr_endurance" value="0" min="0" /></div>
            <div class="table-cell">Adresse: </div><div class="table-cell"><input type="number" name="attr_adresse" value="0" min="0" /></div>
            <div class="table-cell">Perception: </div><div class="table-cell"><input type="number" name="attr_perception" value="0" min="0" /></div></div>
            <div class="table-row"><div class="table-cell">Intelligence: </div><div class="table-cell"><input type="number" name="attr_intelligence" value="0" min="0" /></div>
            <div class="table-cell">Volonté: </div><div class="table-cell"><input type="number" name="attr_volonte" value="0" min="0" /></div>
            <div class="table-cell">Présence: </div><div class="table-cell"><input type="number" name="attr_presence" value="0" min="0" /></div></div>
        </div>
    </div>

        <div>
            <div class="traits">
                <h3>Vocations</h3>   
                <div class="sheet-repetition">
                    <fieldset class="repeating_noms">            
                       <input type="text" placeholder="Vocation" name="attr_vocation" size="20" /> <input type="number" name="attr_val_vocation" value="0" min="0" /> 
                    </fieldset>
                </div>
            </div>

            <div class="traits">
                <h3>Vertus</h3>   
                <div class="table" style="width: 40%;">
                    <div class="table-row"><div class="table-cell">Honneur:</div><div class="table-cell"> <input type="number" name="attr_honneur" value="0" min="0"/></div></div>
                    <div class="table-row"><div class="table-cell">Loyauté:</div><div class="table-cell"> <input type="number" name="attr_loyaute" value="0" min="0" /></div></div>
                    <div class="table-row"><div class="table-cell">Courage:</div><div class="table-cell"> <input type="number" name="attr_courage" value="0" min="0" /></div></div>
                </div>
            </div>
        </div>
        <div>
            <div class="traits">
                <h3>Traits légendaires</h3> 
                <div class="sheet-repetition">
                    <fieldset class="repeating_trait">            
                        <input type="text" placeholder="trait" name="attr_trait" /> 
                        <input type="number" name="attr_val_trait" value="0" min="0" /> 
                    </fieldset>
                </div>
            </div>
            <div class="traits">
                <h3>Domaines thaumaturgiques</h3>
                <div>
                    <div class="table" style="width: 80%;">
                        <div class="table-row"><div class="table-cell">Points de Magie: </div>
                        <div class="table-cell"><input type="number" name="attr_magie" value="0" min="0" /> / <input type="number" name="attr_magie_max" value="0" min="0" /></div> </div>
                        <div class="table-row"><div class="table-cell">Puissance Magique: </div>
                        <div class="table-cell"><input type="number" name="attr_magie_carac" value="0" min="0" /></div></div>
                    </div>
                </div>
                <div class="sheet-repetition">
                    <fieldset class="repeating_thaumat">            
                        <input type="text" placeholder="domaine" name="attr_thaumat" /> 
                        <input type="number" name="attr_val_thaumat" value="0" min="0" /> 
                    </fieldset>
                </div>
            </div>
        </div>

</div>
<div class="box-traits-combat">
    <h3>Combat</h3>
    <div class="table" style="width: 60%;">
        <div class="table-row"><div class="table-cell"><b>Vie:</b> </div>
        <div class="table-cell"><input type="number" name="attr_vie" value="0" min="0" /> / <input type="number" name="attr_vie_max" value="0" min="0" /></div></div>

        <div class="table-row"><div class="table-cell">Pugilat: </div><div class="table-cell"><input type="number" name="attr_pugilat" value="0" min="0" /></div>
        <div class="table-cell">Mêlée: </div><div class="table-cell"><input type="number" name="attr_melee" value="0" min="0" /></div>
        <div class="table-cell">Tir: </div><div class="table-cell"><input type="number" name="attr_tir" value="0" min="0" /></div></div>

        <div class="table-row"><div class="table-cell">Bonus dégâts:</div><div class="table-cell"> <input type="number" name="attr_bonus_degat_1" value="0" min="0" />, <input type="number" name="attr_bonus_degat_2" value="0" min="0" /></div>
        <div class="table-cell">Toucher:  </div><div class="table-cell"><input type="number" name="attr_volonte" value="0" min="0" /></div>
        <div class="table-cell">Viser: </div><div class="table-cell"><input type="number" name="attr_viser" value="0" min="0" /></div></div>
    </div>
    <div >
        <span class="armes-armures" >
            <div style="width: 90%;">
            <h4>Armes</h4>
            <fieldset class="repeating_arme" >            
               <input type="text" placeholder="Arme" name="attr_arme" style="width: 50%;"/> 
               VU:
                <input type="number" name="attr_val_utilisation" value="0" min="0" /> 
                VD:
                <input type="number" name="attr_val_degat" value="0" min="0" /> 
            </fieldset>
        </div>
        </span>
        <span class="armes-armures">
             <div style="width: 70%;">
                <h4>Armures</h4> 
                <fieldset class="repeating_armure">            
                   <input type="text" placeholder="Armure" name="attr_armure" spellcheck="false" style="width: 70%;"/> 
                    VP: 
                    <input type="number" name="attr_val_protection" value="0" min="0" /> 
                </fieldset>
            </div>
        </span>
    </div>
</div>
<a href="https://www.casimages.com/i/21050702423625561517405642.png.html" target="_blank" title="Frise Ynn Pryddein"><img src="https://nsm09.casimages.com/img/2021/05/07//21050702423625561517405642.png" border="0" alt="Frise Ynn Pryddein" /></a>


<div class="box-text" >
    <h3>Renommée et hauts faits <input type="number" name="attr_val_voc" value="0" min="0" /></h3> 
    <textarea name="attr_renommee_et_hauts_faits" spellcheck="false" style="width: 98%;"></textarea>
</div>

<div class="box-text">
    <h3>Equipement</h3> 
    <textarea name="attr_equipement" spellcheck="false" style="width:98%;"></textarea>
</div>

<div class="box-text">
    <h3>Description et historique</h3>   
    <textarea name="attr_description_et_historique" spellcheck="false" style="width:98%;"></textarea>
</div>

<div class="box-text">
    <h3>Observations & Notes</h3>
    <textarea name="attr_observations_et_notes" spellcheck="false" style="width: 98%;"></textarea>
</div>

<a href="https://www.casimages.com/i/21050702423625561517405642.png.html" target="_blank" title="Frise Ynn Pryddein"><img src="https://nsm09.casimages.com/img/2021/05/07//21050702423625561517405642.png" border="0" alt="Frise Ynn Pryddein" /></a>

<script type="text/worker">
    //Look for a change in the dicenumber
    on("change:dicenumber", function(eventInfo){ 
        //Get the Number of dice and make it an integer (instead of a text string)
        let numberOfDice = parseInt(eventInfo.newValue) || 3; 
        //Construct the first part of the roll template call
        let valueString = "&{template:YnnPryddein} {{nom=@{name}}} {{numberOfDice=@{dicenumber}}} [[ "; 
        //Construct the first part of the myRoll section for the results.
        let rollString = `{{myRoll=`; 
        //Start the loop to add [[1d10]] between the roll template calls, this
        for (let i = 0; i < numberOfDice; i++) { 
            valueString +="[[1d10]] " ; 
            //If the number of dice -1 is less than the current loop iteration, the add a comma after the $[[#]]
            i < numberOfDice -1 ? rollString +="$[[" +i+ "]]," : rollString +="$[[" +i+ "]]"; 
        } 
        //Close out the myRoll template call
        rollString +="}}" ; 
        //Put the two strings together, so you have complete roll button value call
        valueString +="]] " + rollString; 
        //Set the hidden field equal to the complete string
        setAttrs({attRollValue: valueString}); 
    }); 
</script>


<!-- Sheet Worker Scripts -->
<script type="text/worker">
    on("change:name", function() {
        getAttrs(["name"], function(values) {
            setAttrs({character_name: values.name});
        });
    });
</script>

<!-- Template Ynn Pryddein -->
<rolltemplate class="sheet-rolltemplate-YnnPryddein">
  <table>
    <tr>
      <th colspan="2"> {{nom}}  </th>
    </tr>
    <tr>
      <td colspan="2"> Lance <b>{{numberOfDice}}d10 </td>
    </tr>
    <tr>
        <td align="right"><b>Résultat : </b></td>
        <td> 
            {{myRoll}} 
        </td>
    </tr>
    <tr>
    <td> _ </td>
    </tr>
 
  </table>
</rolltemplate>


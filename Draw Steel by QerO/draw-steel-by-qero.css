:root {
    --primary-bg: #f2f1ee;
    --secondary-bg: #faf9f6;
    --header-bg: #1e1e1e;
    --header-text: #eae7df;
    --border-color: #2f2f2f;
    --border-light: #cfc7bb;
    --text-primary: #2b2b2b;
    --text-secondary: #4a4a4a;
    --text-label: #5a5855;
    --btn-primary: #6b7a8f;
    --btn-primary-hover: #556577;
    --btn-secondary: #7a6f64;
    --btn-secondary-hover: #655b52;
    --btn-success: #3a6d4a;
    --btn-success-hover: #2f5a3e;
    --btn-danger: #8c3a3a;
    --btn-danger-hover: #732f2f;
    --input-bg: #fcfbf9;
    --input-border: #9c968a;
    --hover-bg: #ece9e3;
    --checkbox-color: #7a1c1c;
    --readonly-bg: #ece9e3;
}

.charsheet * {
    box-sizing: border-box;
}

.charsheet {
    background: var(--secondary-bg);
    font-family: 'Helvetica Neue', Arial, sans-serif;
    font-size: 13px;
    color: var(--text-primary);
}

input[name="attr_sheet_type"],
input[name="attr_reputations_enabled"],
input[name="attr_coins_enabled"] {
    display: none;
}

.sheet-settings-panel {
    display: none;
    top: 10px;
    z-index: 200;
    margin: 10px 10px 20px 10px;
}

input[name="attr_settings_mode"]:checked ~ .sheet-settings-panel {
    display: block;
}

.sheet-settings-row {
    display: grid;
    grid-template-columns: 180px 1fr;
    gap: 10px 12px;
    align-items: center;
    margin: 8px 0;
}

.sheet-settings-label {
    font-size: 12px;
    font-weight: bold;
    color: var(--text-label);
    text-align: right;
}

.sheet-settings-options {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.sheet-radio-type-character {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    background: var(--secondary-bg);
    border: 2px solid var(--border-color);
    border-radius: 3px;
    cursor: pointer;
    user-select: none;
    transition: background .2s;
}

.sheet-radio-type-character:hover {
    background: var(--hover-bg);
}

.sheet-radio-type-character input[type="radio"] {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
}

input[name="attr_sheet_type"][value="Character"]:checked ~ .sheet-settings-panel label[for="sheet-type-character"],
input[name="attr_sheet_type"][value="Team"]:checked ~ .sheet-settings-panel label[for="sheet-type-team"],
input[name="attr_sheet_type"][value="Monster"]:checked ~ .sheet-settings-panel label[for="sheet-type-monster"] {
    background: var(--header-bg);
    color: var(--header-text);
    border-color: var(--header-bg);
}

.sheet-tab-navigation {
    display: block;
}

.sheet-tab-content {
    display: block;
}

.sheet-party-view {
    display: none;
}

.sheet-monster-view {
    display: none;
}

input[name="attr_sheet_type"][value="Team"]:checked ~ .sheet-tab-navigation {
    display: none;
}

input[name="attr_sheet_type"][value="Team"]:checked ~ .sheet-tab-content {
    display: none;
}

input[name="attr_sheet_type"][value="Team"]:checked ~ .sheet-party-view {
    display: block;
}

input[name="attr_sheet_type"][value="Team"]:checked ~ .sheet-monster-view {
    display: none;
}

input[name="attr_sheet_type"][value="Monster"]:checked ~ .sheet-tab-navigation {
    display: none;
}

input[name="attr_sheet_type"][value="Monster"]:checked ~ .sheet-tab-content {
    display: none;
}

input[name="attr_sheet_type"][value="Monster"]:checked ~ .sheet-party-view {
    display: none;
}

input[name="attr_sheet_type"][value="Monster"]:checked ~ .sheet-monster-view {
    display: block;
}

.sheet-coins-toggle {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    background: var(--secondary-bg);
    border: 2px solid var(--border-color);
    border-radius: 3px;
    cursor: pointer;
    user-select: none;
    transition: background .2s;
}

.sheet-coins-toggle:hover {
    background: var(--hover-bg);
}

.sheet-coins-toggle input[type="checkbox"] {
    width: 16px;
    height: 16px;
    accent-color: var(--checkbox-color);
}

input[name="attr_coins_enabled"]:checked ~ .sheet-settings-panel label[for="coins-enabled"] {
    background: var(--header-bg);
    color: var(--header-text);
    border-color: var(--header-bg);
}

input[name="attr_reputations_enabled"]:checked ~ .sheet-settings-panel label[for="reputation-enabled"] {
    background: var(--header-bg);
    color: var(--header-text);
    border-color: var(--header-bg);
}

.sheet-tab-content .sheet-coins-block {
    display: none;
}

input[name="attr_coins_enabled"]:checked ~ .sheet-tab-content .sheet-coins-block {
    display: block;
}

.sheet-tab-navigation {
    display: flex;
    gap: 2px;
    margin-bottom: 20px;
    border-bottom: 3px solid var(--header-bg);
    background: var(--primary-bg);
    padding: 10px 10px 0 10px;
}

.sheet-tab-button {
    display: none;
}

.sheet-tab-label {
    padding: 8px 14px;
    background: var(--secondary-bg);
    border: 2px solid var(--border-color);
    border-bottom: none;
    border-radius: 3px 3px 0 0;
    cursor: pointer;
    font-weight: 700;
    font-size: 13px;
    text-transform: uppercase;
    color: var(--text-primary);
    transition: all 0.2s ease;
}


.sheet-tab-label:hover {
    background: var(--hover-bg);
}

.sheet-tab1:checked ~ .sheet-tab-navigation label[for="tab-main"],
.sheet-tab2:checked ~ .sheet-tab-navigation label[for="tab-bg"],
.sheet-tab3:checked ~ .sheet-tab-navigation label[for="tab-abil"] {
    background: var(--header-bg);
    color: var(--header-text);
}

.sheet-tab-content {
    padding: 10px;
}

.sheet-tab-pane {
    display: none;
}

.sheet-tab1:checked ~ .sheet-tab-content .sheet-tab1-content,
.sheet-tab2:checked ~ .sheet-tab-content .sheet-tab2-content,
.sheet-tab3:checked ~ .sheet-tab-content .sheet-tab3-content {
    display: block;
}

.sheet-mode-controls {
    position: absolute;
    top: 10px;
    right: 20px;
    z-index: 100;
    display: inline-flex;
    align-items: flex-start;
    gap: 8px;
}

.sheet-edit-toggle {
    height: 28px;
    display: inline-flex;
    align-items: center;
    padding: 6px 6px;
    background: var(--btn-secondary);
    color: white;
    border-radius: 3px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
    transition: background 0.2s;
}

.sheet-edit-toggle:hover {
    background: var(--btn-secondary-hover);
}

.sheet-settings-toggle {
    width: 28px !important;;
    height: 28px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 24px !important;
    padding: 4px 3px;
    background: var(--btn-secondary);
    border-radius: 3px;
    cursor: pointer;
    transition: background 0.2s;
}

.sheet-settings-toggle,
.sheet-settings-toggle * {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
}

.sheet-settings-toggle:hover {
    background: var(--btn-secondary-hover);
}

input[name="attr_edit_mode"]:checked ~ .sheet-mode-controls .sheet-edit-toggle {
    background: var(--btn-danger);
}

input[name="attr_edit_mode"]:checked ~ .sheet-mode-controls .sheet-edit-toggle:hover {
    background: var(--btn-danger-hover);
}

input[name="attr_settings_mode"]:checked ~ .sheet-mode-controls .sheet-settings-toggle {
    background: var(--btn-danger);
}

input[name="attr_settings_mode"]:checked ~ .sheet-mode-controls .sheet-settings-toggle:hover {
    background: var(--btn-danger-hover);
}

.sheet-edit-toggle span {
    display: none;
}

.sheet-edit-toggle::after {
    content: "View Mode";
}

input[name="attr_edit_mode"]:checked ~ .sheet-mode-controls .sheet-edit-toggle::after {
    content: "Edit Mode";
}

input[name="attr_edit_mode"] {
    display: none;
}

input[name="attr_settings_mode"] {
    display: none;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content .sheet-lockable {
    pointer-events: none;
    background: var(--readonly-bg);
    color: var(--text-primary);
    border-color: var(--input-border);
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content .sheet-lockable-condition {
    pointer-events: none;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content .sheet-lockable-like-text {
    pointer-events: none;
    background: transparent;
    border: none;
    box-shadow: none;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content .sheet-hide-when-empty:placeholder-shown {
    display: none;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content textarea.sheet-hide-when-empty:placeholder-shown {
    display: none;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content .repcontrol button,
input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content .repcontrol {
    display: none !important;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content .sheet-ability-grid > label:nth-child(odd):has(+ .sheet-hide-when-empty:placeholder-shown),
input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content .sheet-ability-grid > label:nth-child(odd) + .sheet-hide-when-empty:placeholder-shown {
    display: none !important;
}

.sheet-ability-grid {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 6px 12px;
    align-items: center;
}

.sheet-ability-grid > label {
    justify-self: end;
    font-size: 12px;
    font-weight: bold;
    white-space: nowrap;
}

input[type="text"] {
    border: 1px solid var(--input-border);
    border-radius: 3px;
    padding: 4px 6px;
    font-size: 13px;
    background: var(--input-bg);
    color: var(--text-primary);
    min-height: 28px;
}

input[type="number"] {
    width: 80px !important;
    text-align: center;
    border: 1px solid var(--input-border);
    border-radius: 3px;
    padding: 4px 6px;
    font-size: 13px;
    background: var(--input-bg);
    color: var(--text-primary);
    min-height: 28px;
}

select {
    width: 80px !important;
    text-align: center;
    border: 1px solid var(--input-border);
    border-radius: 3px;
    padding: 4px 6px;
    font-size: 13px;
    background: var(--input-bg);
    color: var(--text-primary);
    min-height: 28px;
}

input[type="checkbox"] {
    width: 16px;
    height: 16px;
    margin-right: 6px;
    vertical-align: middle;
    cursor: pointer;
    accent-color: var(--checkbox-color);
}

textarea {
    border: 1px solid var(--input-border);
    border-radius: 3px;
    padding: 6px 8px;
    font-size: 13px;
    background: var(--input-bg);
    color: var(--text-primary);
    font-family: inherit;
    resize: vertical;
}

button[type="roll"],
button[type="action"] {
    background: var(--btn-primary);
    color: white !important;
    border: none;
    border-radius: 2px;
    padding: 2px 6px !important;
    font-size: 10px !important;
    line-height: 1.2 !important;
    font-weight: 500 !important;
    cursor: pointer;
    transition: background 0.2s;
    min-height: 24px !important;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

button[type="roll"]:hover,
button[type="action"]:hover {
    background: var(--btn-primary-hover);
    color: white !important;
}

button.sheet-whisper-btn {
    background: var(--btn-secondary) !important;
}

.sheet-whisper-btn:hover {
    background: var(--btn-secondary-hover) !important;
}

button[type="roll"]::before {
    display: none !important;
}

.sheet-textarea-notes {
    width: 100%;
    min-height: 200px;
    font-size: 12px;
}

.sheet-top-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 20px;
}

.sheet-middle-container {
    display: grid;
    grid-template-columns: 1fr 260px 1fr;
    gap: 15px;
    margin-bottom: 20px;
}

.sheet-bottom-container {
    display: grid;
    grid-template-columns: 1fr;
    gap: 15px;
    margin-bottom: 20px;
}

.sheet-resources-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    margin-bottom: 20px;
}

.sheet-background-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 20px;
}

.sheet-section {
    background: var(--primary-bg);
    border: 2px solid var(--border-color);
    border-radius: 3px;
    padding: 12px;
    margin-bottom: 12px;
    position: relative;
}

.sheet-section h2 {
    margin: -12px -12px 12px -12px;
    padding: 8px 12px;
    background: var(--header-bg);
    color: var(--header-text);
    font-size: 13px;
    font-weight: 700;
    text-transform: uppercase;
    text-align: center;
    border-radius: 2px 2px 0 0;
    letter-spacing: .5px;
}

.sheet-section h3 {
    font-size: 13px;
    font-weight: bold;
    color: var(--text-primary);
    margin: 15px 0 10px 0;
    padding-bottom: 5px;
    border-bottom: 1px solid var(--border-light);
}

.sheet-section label {
    font-size: 12px;
    font-weight: bold;
    color: var(--text-label);
}

.sheet-basic-resources {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    gap: 15px;
    margin: 15px 0;
    align-items: center;
}

.sheet-coins-block {
    margin-top: -50px;
}

.sheet-info label {
    display: inline-block;
    width: 130px;
    text-align: right;
    margin-right: 10px;
    margin-bottom: 8px;
}

.sheet-info input[type="text"] {
    width: calc(100% - 145px);
    display: inline-block;
}

.sheet-combined-info {
    grid-column: 1 / -1;
}

.sheet-combined-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
}

.sheet-info-left label {
    display: inline-block;
    width: 130px;
    text-align: right;
    margin-right: 10px;
    margin-bottom: 8px;
}

.sheet-info-left input[type="text"] {
    width: calc(100% - 145px);
    display: inline-block;
}

.sheet-victories-container {
    margin-top: 0;
    margin-bottom: 15px;
}

.sheet-info-right .sheet-victories-container h3 {
    font-size: 12px;
    margin: 0 0 10px 0;
    padding-bottom: 5px;
    border-bottom: 1px solid var(--border-light);
}

.sheet-combined-content h3 {
    font-size: 12px;
    font-weight: bold;
    color: var(--text-primary);
    margin: 0 0 10px 0;
    padding-bottom: 5px;
    border-bottom: 1px solid var(--border-light);
}

.sheet-damage-type-row {
    display: grid;
    text-align: center;
    grid-template-columns: 1fr 1fr;
    gap: 5px;
    padding: 5px;
    margin-bottom: 5px;
    align-items: center;
    background: var(--secondary-bg);
    border-radius: 3px;
}

.sheet-damage-value-input {
    width: 80px !important;
    text-align: center;
    margin: 0 auto;
    display: block;
}

.sheet-damage-type-input {
    width: 100%;
}

.sheet-damage-source-input {
    width: 100%;
}

fieldset.repeating_damagetypes {
    border: none;
    padding: 0;
    margin: 0;
}

.repcontrol[data-groupname="repeating_damagetypes"] {
    margin-top: 10px;
}

.sheet-damage-value-input::-webkit-inner-spin-button,
.sheet-damage-value-input::-webkit-outer-spin-button {
    opacity: 1;
    margin-right: 0;
}

.sheet-victories-container {
    margin-bottom: 15px;
}

.sheet-victories-boxes {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 5px;
    padding: 10px;
    background: var(--secondary-bg);
    border-radius: 2px;
}

.sheet-victories-boxes input[type="checkbox"] {
    width: 24px;
    height: 24px;
    margin: 0 auto;
    display: block;
}

.sheet-coins-boxes {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 5px;
    padding: 10px;
    background: var(--secondary-bg);
    border-radius: 2px;
}

.sheet-coins-boxes input[type="checkbox"] {
    width: 24px;
    height: 24px;
    margin: 0;
    display: block;
}

.sheet-char-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    margin-bottom: 10px;
}

.sheet-char-other-rolls-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}

.sheet-char-item {
    text-align: center;
    background: var(--secondary-bg);
    border: 2px solid var(--text-secondary);
    border-radius: 3px;
    padding: 10px;
}

.sheet-char-item label {
    display: block;
    font-size: 11px;
    text-transform: uppercase;
    margin-bottom: 8px;
    color: var(--text-secondary);
    text-align: center;
}

.sheet-char-item input {
    width: 60px !important;
    height: 40px;
    font-size: 18px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 8px;
}

.sheet-button-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    width: 100%;
}

.sheet-roll-option .sheet-button-group {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
}

.sheet-roll-option .sheet-button-group button {
    font-size: 13px;
    padding: 6px 12px;
    min-height: 32px;
    width: 100%;
}

.sheet-roll-option .sheet-button-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    width: 100%;
}

.sheet-params-grid {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
}

.sheet-param-item {
    text-align: center;
}

.sheet-param-item label {
    display: block;
    margin-bottom: 5px;
    font-size: 11px;
    text-transform: uppercase;
}

.sheet-additional-param-item label {
    display: block;
    text-align: center;
    min-width: 80px;
    font-size: 11px;
    text-transform: uppercase;
}

.sheet-additional-param-item select,
.sheet-additional-param-item input {
    width: 80px !important;
    text-align: center;
}

.sheet-param-item input {
    width: 100% !important;
    max-width: 100px;
    margin: 0 0;
    display: block;
}

.sheet-skills-container {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 15px;
}

.sheet-skill-category {
    background: var(--secondary-bg);
    padding: 10px;
    border-radius: 3px;
}

.sheet-skill-category h3 {
    font-size: 12px;
    margin: 0 0 10px 0;
    padding-bottom: 5px;
    border-bottom: 1px solid var(--border-light);
}

.sheet-skill-category label {
    display: block;
    font-size: 11px;
    font-weight: normal;
    padding: 3px 5px;
    margin: 2px 0;
    cursor: pointer;
    border-radius: 3px;
    transition: background 0.2s;
}

.sheet-skill-category label:hover {
    background: var(--hover-bg);
}

.sheet-skill-category input[type="checkbox"] {
    width: 14px;
    height: 14px;
    margin-right: 5px;
}

.sheet-custom-skill-row {
    display: flex;
    align-items: center;
    padding: 3px 5px;
    margin: 2px 0;
    border-radius: 3px;
    transition: background 0.2s;
    width: 100px;
}

.sheet-custom-skill-row:hover {
    background: var(--hover-bg);
}

.sheet-custom-skill-row input[type="checkbox"] {
    width: 14px;
    height: 14px;
    margin-right: 5px;
    flex-shrink: 0;
}

.sheet-custom-skill-name {
    flex: 1;
    width: 80px;
    font-size: 11px !important;
    padding: 1px 3px !important;
    min-height: 18px !important;
    height: 14px !important;
    line-height: 16px !important;
    background: transparent;
    border: 1px solid transparent;
    transition: all 0.2s;
}

.sheet-custom-skill-name:focus,
.sheet-custom-skill-name:not(:placeholder-shown) {
    background: var(--input-bg);
    border-color: var(--input-border);
}

.sheet-skill-category .sheet-custom-skill-row {
    font-weight: normal;
}

.sheet-custom-skill-name::placeholder {
    color: var(--text-secondary);
    opacity: 0.5;
    font-size: 10px;
}

.sheet-stamina-param-item input {
    width: 100% !important;
    margin: 0 auto;
    display: block;
}

.sheet-stamina-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    align-items: center;
    margin-bottom: 15px;
}

.sheet-stamina-grid label {
    text-align: right;
    font-size: 12px;
}

.sheet-stamina-actions-grid {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 8px;
    margin-bottom: 10px;
}

.sheet-stamina-actions-grid input[type="number"] {
    width: 100% !important;
}

.sheet-status-checks {
    display: flex;
    gap: 5px;
    padding: 10px;
    background: var(--secondary-bg);
    border-radius: 2px;
    pointer-events: none;
}

.sheet-status-checks label {
    display: flex;
    align-items: center;
    font-size: 12px;
    cursor: pointer;
}

.sheet-roll-option {
    display: grid;
    grid-template-columns: 30px 1fr;
    align-items: center;
    padding: 8px;
    margin: 5px 0;
    background: var(--secondary-bg);
    border-radius: 2px;
}

.sheet-roll-label {
    font-weight: bold;
    font-size: 12px;
    color: var(--text-primary);
}

.sheet-roll-option {
    align-items: center;
}

.sheet-roll-label {
    font-weight: 600;
    opacity: .9;
}

.sheet-power button[type="roll"] {
    font-size: 10px !important;
    text-transform: uppercase !important;
}

.sheet-heroic .sheet-param-item input,
.sheet-recovery .sheet-param-item input {
    width: 100% !important;
    max-width: 100px;
    margin: 0 auto;
    display: block;
}

.sheet-surges-counter {
    display: flex;
    justify-content: center;
    margin-bottom: 15px;
}

.sheet-surges-counter input {
    width: 100% !important;
    max-width: 200px;
    text-align: center;
    margin: 0 auto;
    display: block;
}

.sheet-surge-actions-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-top: 10px;
}

.sheet-recovery-buttons-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    margin-top: 10px;
}

.sheet-recoveries-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    align-items: center;
    margin-bottom: 10px;
}

.sheet-recoveries-grid label {
    text-align: right;
    font-size: 12px;
    padding-right: 10px;
}

.sheet-recoveries-grid .sheet-param-item {
    display: flex;
    justify-content: center;
}

.sheet-resource-grid {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 10px;
    align-items: center;
    margin-bottom: 10px;
}

.sheet-resource-grid input[type="text"] {
    width: 100%;
}

.sheet-resource-grid .sheet-param-item {
    width: 100px;
}

.sheet-resource-grid .sheet-param-item input {
    width: 100% !important;
}

.sheet-resource-source {
    width: 100%;
    margin-top: 15px;
    font-size: 12px;
    font-style: italic;
    min-height: 30px;
    resize: vertical;
    border: 1px solid var(--input-border);
    border-radius: 3px;
    padding: 4px 6px;
    background: var(--input-bg);
    color: var(--text-primary);
    font-family: inherit;
}

.sheet-potencies .sheet-recoveries-grid {
    display: grid;
    grid-template-columns: 80px 1fr;
    gap: 10px;
    align-items: center;
}

.sheet-potencies input[type="text"] {
    width: 100%;
    max-width: 200px;
}

.sheet-restore-btn,
.sheet-restore-recovery-btn {
    background: var(--btn-success) !important;
}

.sheet-restore-btn:hover,
.sheet-restore-recovery-btn:hover {
    background: var(--btn-success-hover) !important;
}

button[name="act_stam_temp_clear"],
button[name="act_heroic_clear"],
button[name="act_surges_clear"] {
    background: var(--btn-danger) !important;
}

button[name="act_stam_temp_clear"]:hover,
button[name="act_heroic_clear"]:hover,
button[name="act_surges_clear"]:hover {
    background: var(--btn-danger-hover) !important;
}

.sheet-resource-grid-heroic {
    display: grid;
    grid-template-columns: 1fr 50px;
    gap: 10px;
    align-items: center;
    margin-bottom: 10px;
}

.sheet-param-item-small {
    width: 50px;
}

.sheet-param-item-small input {
    width: 100% !important;
}

.sheet-conditions-grid {
    display: grid;
    grid-template-columns: 100px 60px 60px;
    gap: 2px;
    margin: 15px 0;
}

.sheet-condition-header {
    display: contents;
}

.sheet-condition-header span {
    padding: 8px;
    background: var(--header-bg);
    color: var(--header-text);
    text-align: center;
    font-size: 11px;
    font-weight: bold;
    text-transform: uppercase;
}

.sheet-condition-header span:first-child {
    border-radius: 3px 0 0 0;
}

.sheet-condition-header span:last-child {
    border-radius: 0 3px 0 0;
}

.sheet-condition-row {
    display: contents;
    align-content: center;
}

.sheet-condition-row span {
    padding: 6px;
    background: var(--secondary-bg);
    font-size: 11px;
    display: flex;
    align-items: center;
}

.sheet-condition-row .sheet-custom-condition-name {
    padding: 6px !important;
    background: var(--secondary-bg);
    font-size: 11px !important;
    width: 100% !important;
    border: none;
    min-height: auto !important;
    height: auto !important;
    display: flex;
    align-items: center;
    grid-column: 1;
}

.sheet-condition-row .sheet-custom-condition-name:focus {
    background: var(--input-bg);
    outline: 1px solid var(--input-border);
}

.sheet-condition-row .sheet-custom-condition-name::placeholder {
    color: var(--text-secondary);
    opacity: 0.6;
}

.sheet-condition-row input[type="checkbox"] {
    margin: auto auto;
    width: 16px !important;
    height: 16px;
    display: block;
}

.sheet-mod-types-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    margin-bottom: 15px;
    padding: 10px;
    background: var(--secondary-bg);
    border-radius: 3px;
    align-items: center;
}

.sheet-mod-types-grid label {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    font-weight: normal;
    width: auto;
}

.sheet-mod-types-grid input[type="checkbox"] {
    width: 18px;
    height: 18px;
    margin-right: 6px;
}

.sheet-full-width {
    width: 100%;
}

.sheet-modifiers {
    overflow-x: auto;
}

.sheet-mod-equipment,
.sheet-mod-defense {
    display: grid;
    grid-template-columns: 1.5fr 0.5fr 0.5fr 0.5fr;
    gap: 15px;
    margin: 15px 0;
    align-items: center;
}

.sheet-mod-item {
    text-align: center;
    min-width: 0;
}

.sheet-mod-item label {
    display: block;
    font-size: 11px;
    text-transform: uppercase;
    margin-bottom: 5px;
}

.sheet-mod-item input[type="text"] {
    width: 100%;
}

.sheet-mod-item input[type="number"] {
    margin: 0 0;
    display: block;
}

.sheet-damage-tables {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin: 15px 0;
    align-items: center;
}

.sheet-damage-column h3 {
    font-size: 12px;
    text-align: center;
    margin-bottom: 10px;
    border-bottom: 1px solid var(--border-light);
    padding-bottom: 5px;
}

.sheet-damage-column-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    align-items: center;
}

.sheet-damage-column-grid label {
    text-align: center;
    font-size: 11px;
}

.sheet-damage-tables input[type="number"] {
    width: 100% !important;
    min-width: 0 !important;
}

.sheet-base-abilities-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 20px;
}

.sheet-ability-block {
    background: var(--secondary-bg);
    border: 1px solid var(--border-light);
    border-radius: 3px;
    padding: 15px;
    margin: 10px 0;
    min-height: 200px;
}

.sheet-ability-block h3 {
    margin-top: 0;
    font-size: 13px;
    color: var(--text-primary);
    border-bottom: 1px solid var(--border-light);
    padding-bottom: 5px;
    margin-bottom: 10px;
}

.sheet-ability-name {
    width: 100%;
    font-weight: bold;
    margin-bottom: 10px;
    font-size: 14px;
}

.sheet-ability-grid {
    display: grid;
    grid-template-columns: 80px 1fr;
    gap: 6px 10px;
    align-items: center;
    padding: 10px 5px;
}

.sheet-ability-grid label {
    text-align: right;
    font-size: 11px;
    color: var(--text-secondary);
    white-space: nowrap;
}

.sheet-ability-grid input {
    width: 100%;
}

.sheet-cost-input {
    font-weight: bold;
    color: #d9534f;
}

.sheet-repeating-abilities,
.sheet-repeating_triggered,
.sheet-repeating-heroic-abilities {
    margin-bottom: 20px;
}

.sheet-double-ability-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 15px;
}

.sheet-double-ability-row .sheet-ability-block {
    padding: 10px;
}

.sheet-double-ability-row .sheet-ability-name {
    margin-bottom: 8px;
}

.sheet-ability-grid {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 6px 12px;
    align-items: center;
}

.sheet-ability-grid > label {
    grid-column: 1;
    justify-self: end;
    font-size: 12px;
    font-weight: bold;
    white-space: nowrap;
}

.sheet-ability-grid > input,
.sheet-ability-grid > textarea,
.sheet-ability-grid > select {
    grid-column: 2;
}

.sheet-double-ability-row .sheet-textarea-small {
    min-height: 50px;
    margin-top: 8px;
}

.sheet-classfeatures,
.sheet-ancestrytraits,
.sheet-perks,
.sheet-othereffects {
    margin-bottom: 20px;
}

.sheet-culture .sheet-recoveries-grid {
    display: grid;
    grid-template-columns: 120px 1fr;
    gap: 15px;
    align-items: center;
}

.sheet-culture label {
    text-align: right;
    font-size: 12px;
    font-weight: bold;
    line-height: 28px;
}

.sheet-culture input[type="text"] {
    width: 100%;
    max-width: 400px;
}

.sheet-culture textarea {
    width: 100%;
    max-width: 400px;
    min-height: 80px;
}

.sheet-project-grid > * {
    min-width: 0;
}

.sheet-project-grid {
    display: grid;
    gap: 12px;
}

.sheet-project-grid > * {
    min-width: 0;
}

.sheet-project-row {
    display: grid;
    grid-template-columns: 2fr 1.2fr 1.2fr 0.2fr 0.05fr 0.2fr;
    gap: 10px 12px;
    align-items: center;
}

.sheet-project-row > * {
    min-width: 0;
}

.sheet-project-name,
.sheet-project-hero,
.sheet-project-char {
    width: 100%;
}

.sheet-project-name input,
.sheet-project-hero input,
.sheet-project-char input {
    width: 100%;
}

.sheet-textarea-small {
    width: 100%;
    min-height: 60px;
}

.sheet-textarea-medium {
    width: 100%;
    min-height: 100px;
}

.sheet-textarea-large {
    width: 100%;
    min-height: 150px;
}

fieldset.repeating_classfeatures,
fieldset.repeating_ancestrytraits,
fieldset.repeating_perks,
fieldset.repeating_othereffects,
fieldset.repeating_abilities,
fieldset.repeating_heroic,
fieldset.repeating_triggered {
    border: none;
    padding: 0;
    margin: 0;
}

body.sheet-darkmode {
    --primary-bg: #171615;
    --secondary-bg: #121212;
    --header-bg: #0d0d0d;
    --header-text: #e7e2d9;
    --border-color: #3d3a35;
    --border-light: #2a2824;
    --text-primary: #d9d6cf;
    --text-secondary: #b3afa7;
    --text-label: #a6a097;
    --btn-primary: #5c6a7a;
    --btn-primary-hover: #485564;
    --btn-secondary: #6a5b4a;
    --btn-secondary-hover: #564a3b;
    --btn-success: #2f5a3e;
    --btn-success-hover: #254732;
    --btn-danger: #7a3a3a;
    --btn-danger-hover: #642f2f;
    --input-bg: #181818;
    --input-border: #3a3732;
    --hover-bg: #29201d;
    --checkbox-color: #7a1c1c;
    --readonly-bg: #29201d;
}

body.sheet-darkmode .charsheet {
    background: var(--secondary-bg);
    color: var(--text-primary);
}

body.sheet-darkmode input[type="text"],
body.sheet-darkmode input[type="number"],
body.sheet-darkmode textarea,
body.sheet-darkmode select {
    background: var(--input-bg);
    color: var(--text-primary);
    border-color: var(--input-border);
}

body.sheet-darkmode .sheet-section {
    background: var(--primary-bg);
    border-color: var(--border-color);
}

body.sheet-darkmode .sheet-char-item,
body.sheet-darkmode .sheet-ability-block,
body.sheet-darkmode .sheet-roll-option,
body.sheet-darkmode .sheet-project-row,
body.sheet-darkmode .sheet-skill-category,
body.sheet-darkmode .sheet-victories-boxes,
body.sheet-darkmode .sheet-coins-boxes,
body.sheet-darkmode .sheet-status-checks,
body.sheet-darkmode .sheet-mod-types-grid {
    background: var(--secondary-bg);
    border-color: var(--border-color);
}

body.sheet-darkmode .sheet-condition-row span {
    background: var(--secondary-bg);
    color: var(--text-primary);
}

body.sheet-darkmode .sheet-skill-category label:hover,
body.sheet-darkmode .sheet-tab-label:hover {
    background: var(--hover-bg);
}

.sheet-section:first-child {
    margin-top: 0;
}

input:focus,
textarea:focus,
select:focus {
    outline: 2px solid var(--btn-primary);
    outline-offset: 1px;
}

.charsheet {
    background: #f2f1ee;
    color: #2e2a28;
    font-family: "Palatino Linotype", "Book Antiqua", Palatino, Garamond, Georgia, serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

body.sheet-darkmode {
    background: #181a1d;
    color: #e8e4dc;
}

.repcontrol {
    margin-bottom: 10px;
}

.repcontrol button {
    background: var(--btn-secondary) !important;
    color: white !important;
    border: none !important;
    padding: 5px 10px !important;
    font-size: 12px !important;
    border-radius: 2px !important;
}

.repcontrol button:hover {
    background: var(--btn-secondary-hover) !important;
}

.sheet-rolltemplate-default {
    margin-bottom: 5px;
}

.sheet-party-view {
    padding: 10px
}

.sheet-team-info {
    margin-bottom: 20px;
}

.sheet-team-name-row {
    display: grid;
    grid-template-columns: 100px 1fr;
    gap: 10px;
    align-items: center;
    margin-bottom: 20px;
}

.sheet-team-name-row label {
    font-size: 14px;
    font-weight: bold;
    text-align: right;
}

.sheet-team-name-input {
    width: 100%;
    font-size: 16px;
    font-weight: bold;
}

.sheet-team-resources {
    display: grid;
    grid-template-columns: 1fr;
    gap: 30px;
}

input[name="attr_reputations_enabled"]:checked ~ .sheet-party-view .sheet-team-resources {
    grid-template-columns: 1fr 1fr;
}

input[name="attr_reputations_enabled"]:not(:checked) ~ .sheet-party-view .sheet-team-reputation {
    display: none;
}

.sheet-hero-tokens,
.sheet-team-reputation {
    background: var(--secondary-bg);
    padding: 15px;
    border-radius: 3px;
}

.sheet-hero-tokens h3,
.sheet-team-reputation h3 {
    font-size: 13px;
    margin: 0 0 15px 0;
    padding-bottom: 5px;
    border-bottom: 1px solid var(--border-light);
}

.sheet-hero-token-counter {
    display: flex;
    justify-content: center;
    margin-bottom: 15px;
}

.sheet-hero-token-counter input {
    width: 150px !important;
    font-size: 18px;
    font-weight: bold;
}

.sheet-hero-token-actions {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
}

.sheet-reputation-boxes {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    padding: 10px;
    background: var(--primary-bg);
    border-radius: 2px;
    justify-items: center;
}

.sheet-reputation-boxes input[type="checkbox"] {
    width: 32px;
    height: 32px;
    margin: 0;
    display: block;
}

.sheet-faction-relations {
    margin-bottom: 20px;
}

.sheet-faction-item {
    background: var(--secondary-bg);
    border: 1px solid var(--border-light);
    border-radius: 3px;
    padding: 15px;
    margin-bottom: 10px;
}

.sheet-faction-header {
    display: grid;
    grid-template-columns: 1fr 180px;
    width: 100%;
    gap: 10px;
}

.sheet-faction-name,
.sheet-faction-rep {
    vertical-align: middle;
    height: 32px !important;
    width: 100% !important;
}

.sheet-faction-rep {
    width: 180px;
}

.sheet-faction-name {
    width: 100%;
    font-size: 14px;
    font-weight: bold;
}

.sheet-faction-notes {
    width: 100%;
    min-height: 60px;
    font-size: 12px;
    resize: vertical;
}

.sheet-team-notes {
    margin-top: 20px;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-party-view .sheet-lockable {
    pointer-events: none;
    background: var(--readonly-bg);
    color: var(--text-primary);
    border-color: var(--input-border);
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-party-view .sheet-lockable[type="checkbox"] {
    pointer-events: none;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-party-view .repcontrol button,
input[name="attr_edit_mode"]:not(:checked) ~ .sheet-party-view .repcontrol {
    display: none !important;
}

body.sheet-darkmode .sheet-hero-tokens,
body.sheet-darkmode .sheet-team-reputation,
body.sheet-darkmode .sheet-faction-item {
    background: var(--secondary-bg);
    border-color: var(--border-color);
}

body.sheet-darkmode .sheet-reputation-boxes {
    background: var(--primary-bg);
}

body.sheet-darkmode .sheet-faction-rep {
    background: var(--input-bg);
    color: var(--text-primary);
    border-color: var(--input-border);
}

.sheet-party-view .sheet-team-reputation {
    display: none;
}

input[name="attr_reputations_enabled"]:checked ~ .sheet-party-view .sheet-team-reputation {
    display: block;
}

.sheet-monster-view {
    padding: 10px;
}

.sheet-monster-view .sheet-section {
    background: var(--primary-bg);
    border: 2px solid var(--border-color);
    border-radius: 3px;
    padding: 12px;
    margin-bottom: 12px;
    position: relative;
}

.sheet-monster-view .sheet-section h2 {
    margin: -12px -12px 12px -12px;
    padding: 8px 12px;
    background: var(--header-bg);
    color: var(--header-text);
    font-size: 13px;
    font-weight: 700;
    text-transform: uppercase;
    text-align: center;
    border-radius: 2px 2px 0 0;
    letter-spacing: .5px;
}

.sheet-monster-view .sheet-info-left label {
    display: inline-block;
    width: 130px;
    text-align: right;
    margin-right: 10px;
    margin-bottom: 8px;
}

.sheet-monster-view .sheet-info-left input[type="text"] {
    width: calc(100% - 145px);
    display: inline-block;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-monster-view .sheet-lockable {
    pointer-events: none;
    background: var(--readonly-bg);
    color: var(--text-primary);
    border-color: var(--input-border);
}

body.sheet-darkmode .sheet-monster-view .sheet-section {
    background: var(--primary-bg);
    border-color: var(--border-color);
}

.sheet-mod-equipment-kit-only,
.sheet-mod-defense-kit-only,
.sheet-damage-tables {
    display: none;
}

.sheet-modifiers:has(input[name="attr_mod_kit"]:checked) .sheet-mod-equipment-kit-only,
.sheet-modifiers:has(input[name="attr_mod_kit"]:checked) .sheet-mod-defense-kit-only,
.sheet-modifiers:has(input[name="attr_mod_kit"]:checked) .sheet-damage-tables {
    display: grid;
}

.sheet-modifiers label:has(+ textarea[name="attr_modifier_benefits"]) {
    display: block;
    margin-top: 8px;
}

.sheet-modifiers:not(:has(input[name="attr_mod_kit"]:checked)) label:has(+ textarea[name="attr_modifier_benefits"]) {
    margin-top: 18px;
}

.sheet-rolltemplate-drawsteel {
    --rt-header-bg: #1f1f1f;
    --rt-header-text: #ffffff;
    --rt-bg: #f4f2ee;
    --rt-text: #232323;
    --rt-border: #2e2e2e;
    --rt-border-light: #cfcfcf;
    --rt-dice-bg: #fcfbf9;
    --rt-dice-border: #9c968a;

    margin: 4px 0;
    font-family: 'Helvetica Neue', Arial, sans-serif;
    font-size: 13px;
    color: var(--rt-text);
}

.sheet-rolltemplate-drawsteel .sheet-template-container {
    background: var(--rt-bg);
    border: 2px solid var(--rt-border);
    border-radius: 3px;
    overflow: hidden;
}

.sheet-rolltemplate-drawsteel .sheet-template-header {
    background: var(--rt-header-bg);
    color: var(--rt-header-text);
    padding: 8px 12px;
    text-align: center;
    font-weight: 700;
    letter-spacing: .5px;
}

.sheet-rolltemplate-drawsteel .sheet-template-subtitle {
    padding: 8px 12px 6px;
    text-align: left;
    font-weight: 700;
}

.sheet-rolltemplate-drawsteel .sheet-template-roll,
.sheet-rolltemplate-drawsteel .sheet-template-raw {
    padding: 10px 12px;
    font-size: 13px;
    line-height: 1.4;
    text-align: left;
    background: var(--rt-bg);
}

.sheet-rolltemplate-drawsteel .sheet-template-roll + .sheet-template-raw {
    border-top: 1px solid var(--rt-border-light);
}

.sheet-rolltemplate-drawsteel .inlinerollresult {
    font-family: inherit;
    font-weight: 700;
    background: var(--rt-dice-bg) !important;
    border: 1px solid var(--rt-dice-border) !important;
    color: var(--rt-text) !important;
    padding: 2px 6px;
    border-radius: 2px;
}

.sheet-heroic-cost-row {
    display: grid;
    width: 100%;
    gap: 6px;

    grid-template-columns:
        minmax(0, 1fr) max-content minmax(0, 1fr) minmax(0, 1fr);
    align-items: center;
}

.sheet-heroic-spend-btn {
    width: 100% !important;
}

.sheet-ability-grid input[type="number"] {
    width: 100% !important;
    max-width: none !important;
}

.sheet-heroic-spend-btn {
    display: block;
    padding: 4px 8px !important;
    font-size: 11px !important;
}

.sheet-heroic-current {
    background: var(--readonly-bg);
    padding: 4px 8px;
    border-radius: 4px;
    display: inline-block;
    text-align: center;
    min-height: 28px;
    font-size: 13px;
    color: var(--text-primary);
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content .sheet-ability-grid:has(> .sheet-heroic-cost-row > input[type="number"][name$="_cost"]:placeholder-shown) > .sheet-heroic-cost-row,
input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content .sheet-ability-grid:has(> .sheet-heroic-cost-row > input[type="number"][name$="_cost"]:placeholder-shown) > label:nth-of-type(1) {
    display: none !important;
}

.sheet-ability-grid > .sheet-power-row {
    display: grid;
    width: 100%;
    gap: 6px;

    grid-template-columns:
        minmax(0, 1fr) minmax(0, 1fr) minmax(0, 1fr);
    align-items: center;
}

.sheet-power-row > input[type="number"] {
    width: 100% !important;
    max-width: none !important;
}

.sheet-power-roll-btn {
    width: 100% !important;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content .sheet-ability-grid:has(> .sheet-power-row > input[name$="_modifier"].sheet-hide-when-empty:placeholder-shown) > .sheet-power-row,
input[name="attr_edit_mode"]:not(:checked) ~ .sheet-tab-content .sheet-ability-grid:has(> .sheet-power-row > input[name$="_modifier"].sheet-hide-when-empty:placeholder-shown) > label:has(+ .sheet-power-row) {
    display: none !important;
}

.sheet-power-row .sheet-whisper-btn {
    margin-left: 0 !important;
}

.sheet-power-row > input[type="number"],
.sheet-power-row > .sheet-power-roll-btn {
    box-sizing: border-box;
    min-width: 0;
    margin: 0;
    justify-self: stretch;
    width: auto;
}

.sheet-monster-main-container {
    max-width: 100%;
}

.sheet-monster-info-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.sheet-monster-basic label,
.sheet-monster-role label {
    display: inline-block;
    width: 80px;
    text-align: right;
    margin-right: 10px;
    margin-bottom: 8px;
    font-size: 12px;
    font-weight: bold;
    color: var(--text-label);
}

.sheet-monster-information-element {
    margin-bottom: 5px !important;
}

.sheet-monster-basic input,
.sheet-monster-basic input[type="number"],
.sheet-monster-role input,
.sheet-monster-role select {
    width: calc(100% - 155px) !important;
    display: inline-block;
    text-align: left !important;
}

.sheet-monster-stats-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 20px;
}

.sheet-monster-combat-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-bottom: 15px;
}

.sheet-monster-combat-grid input,
.sheet-monster-combat-grid select {
    text-align: center !important;
}

.sheet-monster-combat-grid input[type="number"] {
    width: 100% !important;
}

.sheet-combat-stat label,
.sheet-combat-stat {
    text-align: center;
}

.sheet-combat-stat label {
    display: block;
    font-size: 11px;
    text-transform: uppercase;
    margin-bottom: 5px;
    color: var(--text-secondary);
}

.sheet-combat-stat input,
.sheet-combat-stat select {
    width: 100% !important;
}

.sheet-monster-minion-block {
    margin-top: 15px;
    padding: 10px;
    background: var(--secondary-bg);
    border-radius: 3px;
}

.sheet-monster-minion-block label {
    display: block;
    font-size: 12px;
    font-weight: bold;
    margin-bottom: 5px;
    color: var(--text-label);
}

.sheet-monster-minion-block {
    display: none;
}

input[name="attr_minion_block_visible"][value="1"]:checked ~ .sheet-monster-view .sheet-monster-minion-block {
    display: block;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-monster-view .sheet-hide-when-empty:placeholder-shown {
    display: none !important;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-monster-view textarea.sheet-hide-when-empty:placeholder-shown {
    display: none !important;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-monster-view .sheet-ability-grid > label:nth-child(odd):has(+ .sheet-hide-when-empty:placeholder-shown),
input[name="attr_edit_mode"]:not(:checked) ~ .sheet-monster-view .sheet-ability-grid > label:nth-child(odd) + .sheet-hide-when-empty:placeholder-shown {
    display: none !important;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-monster-view .sheet-ability-grid:has(> .sheet-power-row > input[name$="_bonus"].sheet-hide-when-empty:placeholder-shown) > .sheet-power-row,
input[name="attr_edit_mode"]:not(:checked) ~ .sheet-monster-view .sheet-ability-grid:has(> .sheet-power-row > input[name$="_bonus"].sheet-hide-when-empty:placeholder-shown) > label:has(+ .sheet-power-row) {
    display: none !important;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-monster-view .repcontrol button,
input[name="attr_edit_mode"]:not(:checked) ~ .sheet-monster-view .repcontrol {
    display: none !important;
}

body.sheet-darkmode .sheet-monster-ability-block,
body.sheet-darkmode .sheet-monster-feature-block,
body.sheet-darkmode .sheet-damage-modifier-row,
body.sheet-darkmode .sheet-monster-minion-block {
    background: var(--secondary-bg);
    border-color: var(--border-color);
}

.sheet-monster-view .sheet-section {
    background: var(--primary-bg);
    border: 2px solid var(--border-color);
    border-radius: 3px;
    padding: 12px;
    margin-bottom: 12px;
}

.sheet-monster-view .sheet-ability-block,
.sheet-monster-view .sheet-monster-feature-block {
    background: var(--secondary-bg);
    border: 1px solid var(--border-light);
    border-radius: 3px;
    padding: 15px;
    margin: 10px 0;
}

.sheet-monster-view .sheet-double-ability-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 15px;
}

.sheet-monster-view fieldset.repeating_monsterabilities,
.sheet-monster-view fieldset.repeating_monsterfeatures,
.sheet-monster-view fieldset.repeating_monsterdamagemod {
    border: none;
    padding: 0;
    margin: 0;
}

input[name="attr_edit_mode"]:not(:checked) ~ .sheet-monster-view .sheet-lockable {
    pointer-events: none;
    background: var(--readonly-bg);
    color: var(--text-primary);
    border-color: var(--input-border);
}

.sheet-monster-view .sheet-char-item {
    text-align: center;
    background: var(--secondary-bg);
    border: 2px solid var(--text-secondary);
    border-radius: 3px;
    padding: 10px;
}

.sheet-monster-view .sheet-char-item label {
    display: block;
    font-size: 11px;
    text-transform: uppercase;
    margin-bottom: 8px;
    color: var(--text-secondary);
    text-align: center;
}

.sheet-monster-view .sheet-char-item input {
    width: 60px !important;
    height: 40px;
    font-size: 18px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 8px;
}

.sheet-monster-view .sheet-textarea-medium {
    width: 100%;
    min-height: 80px;
}

.sheet-monster-view .sheet-textarea-notes {
    width: 100%;
    min-height: 150px;
}

.sheet-monster-view .sheet-power-row {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 6px;
    align-items: center;
}

.sheet-monster-view .sheet-power-row input[type="number"] {
    width: 100% !important;
}

.sheet-monster-view h2 {
    margin: -12px -12px 12px -12px;
    padding: 8px 12px;
    background: var(--header-bg);
    color: var(--header-text);
    font-size: 13px;
    font-weight: 700;
    text-transform: uppercase;
    text-align: center;
    border-radius: 2px 2px 0 0;
    letter-spacing: .5px;
}

body.sheet-darkmode .sheet-monster-view .sheet-section {
    background: var(--primary-bg);
    border-color: var(--border-color);
}

body.sheet-darkmode .sheet-monster-view .sheet-char-item {
    background: var(--secondary-bg);
    border-color: var(--border-color);
}

.sheet-monster-view .sheet-roll-option {
    display: grid;
    grid-template-columns: 30px 1fr;
    align-items: center;
    padding: 8px;
    margin: 5px 0;
    background: var(--secondary-bg);
    border-radius: 2px;
}

.sheet-monster-view .sheet-button-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    width: 100%;
}

.sheet-monster-view .sheet-power-roll-btn {
    width: 100% !important;
    padding: 2px 6px !important;
    font-size: 10px !important;
    line-height: 1.2 !important;
    min-height: 24px !important;
}

.sheet-monster-combat select[name="attr_organization"] {
    font-weight: bold;
}

.sheet-info{
    text-align: center;
    padding: 12px;
}


<h1 class = "sheet-heading">ORBITAL BLUES</h1>
<div>
<h2 class = "sheet-subheading">LOW-FI SPACE WESTERN ROLEPLAYING</h2>
    <button type="action" name="act_character" >Character</button>
    <button type="action" name="act_Ship" >Ship</button>
</div>
<div class="sheet-rolltype">
<input type="radio" class="sheet-rolltype sheet-rolltype2" name="attr_rolltype" value="3d6kh2" title="upperhand"/> 
<span class="sheet-rolltype sheet-rolltype2" style="line-height: 40px;">Upper Hand</span>
<input type="radio" class="sheet-rolltype sheet-rolltype1" name="attr_rolltype" value="2d6" title="normal" checked="checked"/> 
<span class="sheet-rolltype sheet-rolltype1" style="line-height: 40px;">Normal</span>
<input type="radio" class="sheet-rolltype sheet-rolltype3" name="attr_rolltype" value="3d6dh1" title="againstodds" /> 
<span class="sheet-rolltype sheet-rolltype3" style="line-height: 40px;">Against the Odds</span>
</div>

<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab"  value="character"/>

<div class="sheet-character">
    <div class ="sheet-2colrow">
        <div class="sheet-col">
            <div>Player Name:<input class="name-field" type="text" placeholder="Your Name" name="attr_player_name"></div>
            <div>Character Name:</td><td><input class="name-field" type="text" placeholder="Their Name" name="attr_character_name"></div>
            <div>Crew:</td><td><input class="crew-field" type="text" placeholder="Their Crew" name="attr_crew_name"></div>
            <div>Soundtrack:</td><td><input class="soundtrack-field" type="text" placeholder="Their Soundtrack" name="attr_soundtrack"></div>
            <div></div>
        </div>
        <div class="sheet-col" id="stats">
            <div class="sheet-stat-field"><h4>Core Stats</h4></div>
            <div class="sheet-stat-field"><button type="roll" value="&{template:ob} {{title=Roll Muscle}} {{subtitle=@{character_name}}} {{Result=[[@{rolltype} + @{muscle}[muscle]]]}}" name="roll_MuscleCheck"></button>MUSCLE:<input class="stat-field" type="number" placeholder="0" name="attr_muscle"></div> 
            <div class="sheet-stat-field"><button type="roll" value="&{template:ob} {{title=Roll Grit}} {{subtitle=@{character_name}}} {{Result=[[@{rolltype} +@{grit}[grit]]]}}" name="roll_GritCheck"></button>GRIT:<input class="stat-field" type="number" placeholder="0" name="attr_grit"></div>
            <div class="sheet-stat-field"><button type="roll" value="&{template:ob} {{title=Roll Savvy}} {{subtitle=@{character_name}}} {{Result=[[@{rolltype} +@{savvy}[savvy]]]}}" name="roll_SavvyCheck"></button>SAVVY:<input class="stat-field" type="number" placeholder="0" name="attr_savvy"></div>
        </div>
    </div>
    <div class ="sheet-3colrow">
        <div class="sheet-col">
            <div class="sheet-cred-field">Credits: Debt:</div>
            <div class="sheet-cred-field"><input class="sheet-cred-field" type="number" placeholder="0" name="attr_credits"><input class="cred-field" type="number" placeholder="0" name="attr_debt"></div>
        </div>
        <div class="sheet-col">
            <div class="sheet-rolls">
                <h4>Other Rolls</h4>
                <button type="roll" value="&{template:ob} {{title=Roll Initiative}} {{subtitle=@{character_name}}} {{Result=[[1d3 + @{savvy}[savvy] &{tracker}]]}} " name="roll_InitiativeCheck">Initiative</button>
                <button type="roll" value="&{template:ob} {{title=Roll Observation}} {{subtitle=@{character_name}}} {{Result=[[2d6]]}}" name="roll_ObservationCheck">Observation</button>
                <button type="roll" value="&{template:ob} {{title=Attack Roll}} {{subtitle=@{character_name}}} {{?{What odds?|Normal,[[1d6]] [[1d6]] [[1d6]] |Upper Hand,[[1d6]] [[1d6]] [[1d6]] [[1d6]] |Against the Odds,[[1d6]] [[1d6]] [[1d6]] [[1d6]]}}} {{Choose 2 = Add Appropriate Stat}} {{Damage = Remaining Die}} {{Upper Hand / Against the Odds = Drop Lowest / Drop Highest}} " name="roll_AttackCheck">Attack</button>
                <button type="roll" value="&{template:ob} {{title=Death Check}} {{subtitle=@{character_name}}} {{Result = [[1d6]]}} {{Note: = Compare result with number of troubles. If less than or equal to this number your story has come to an end.}} " name="roll_DeathCheck">Death</button>
                <button type="roll" value="&{template:ob} {{title=Heaven's Doors}} {{subtitle=@{character_name}}} {{You regain consciousness in [[2d6]] hours.}} {{Gain a new trouble.}}  " name="roll_KnockCheck">Knock on Heaven's Doors</button>
                <button type="roll" value="&{template:ob} {{title=d3}} {{subtitle=@{character_name}}} {{Result = [[1d3]]}} " name="roll_d6">d3</button>
                <button type="roll" value="&{template:ob} {{title=d6}} {{subtitle=@{character_name}}} {{Result = [[1d6]]}} " name="roll_d6">d6</button>
                <button type="roll" value="&{template:ob} {{title=d6}} {{subtitle=@{character_name}}} {{Result = [[2d6]]}} " name="roll_2d6">2d6</button>
            </div>  
        </div>
        <div class="sheet-col">
            <div class="sheet-tracker-field">Heart:<input class="stat-field" type="number" placeholder="0" name="attr_heart"></div>
            <div class="sheet-tracker-field">Blues:<input class="stat-field" type="number" placeholder="0" name="attr_blues"></div>
        </div>
    </div>
    <hr> 
    <div>
        <h3 class="sheet-features-header">TROUBLES & GAMBITS</h3>
            <div class="sheet-2colrow">
                <div class="sheet-col">
                    <fieldset class="repeating_features">
                        <div class="sheet-features">
                            <div class="sheet-2colrow">
                                <div class="sheet-col">
                                    <input type="text" class="feature-type" name="attr_featuretype" placeholder="Type"/>
                                </div>
                                <div class="sheet-col">
                                <input type="text" class="feature-name" name="attr_feature" placeholder="Title" />
                                </div>
                            </div>
                        </div>
                        <div class="sheet-feature_description"><textarea class="feature_description" name="attr_featuredesc" placeholder="Details" style="height:100px;width:500px;min-width:400px;min-height:100px;"></textarea></div>           
                    </fieldset>
                </div>
                <div class="sheet-col">
                    <fieldset class="repeating_features2">
                        <div class="sheet-features">
                            <div class="sheet-2colrow">
                                <div class="sheet-col">
                                    <input type="text" class="feature-type2" name="attr_featuretype2" placeholder="Type"/>
                                </div>
                                <div class="sheet-col">
                                <input type="text" class="feature-name2" name="attr_feature2" placeholder="Title" />
                                </div>
                            </div>
                        </div>
                        <div class="sheet-feature_description"><textarea class="feature_description" name="attr_featuredesc2" placeholder="Details" style="height:100px;width:500px;min-width:400px;min-height:100px;"></textarea></div>           
                    </fieldset>
                </div>
            </div>
    </div>
    <hr>
    <div><h3 class="sheet-equipment-header">EQUIPMENT & MEMENTOS</h3>
        <h4> Standard Items </h4>
        <fieldset class="repeating_sequip">
            <div><button type="roll" value="&{template:ob} {{title=@{character_name} | @{sinvtype}}} {{subtitle=@{sinventorydesc}}} {{?{What odds?|Normal,[[1d6]] [[1d6]] [[1d6]] |Upper Hand,[[1d6]] [[1d6]] [[1d6]] [[1d6]] |Against the Odds,[[1d6]] [[1d6]] [[1d6]] [[1d6]]}}} {{Choose 2 = Add Appropriate Stat}} {{Damage = Remaining Die}} {{Upper Hand / Against the Odds = Drop Lowest / Drop Highest}} " name="roll_AttackCheck"></button>
                <input type="text" class="sheet-inventory-type" name="attr_sinvtype" placeholder="Type" />
                <input type="text" class="sheet-inventory-desc" name="attr_sinventorydesc" placeholder="Details" /></div>           
        </fieldset>
        <h4> Pocket Items </h4>
        <fieldset class="repeating_pequip">
            <div class="sheet-flex-container"><input type="text" class="sheet-inventory-type" name="attr_pinvtype" placeholder="Type" />
                <input type="text" class="sheet-inventory-desc" name="attr_pinventorydesc" placeholder="Details" /></div>           
        </fieldset>
    </div>
</div>

<div class="sheet-ship">
    <div class ="sheet-2colrow">
        <div class="sheet-col">
            <div>Ship Name:<input class="name-field" type="text" placeholder="Ship Name" name="attr_ship_name"></div>
            <div>Crew:<input class="crew-field" type="text" placeholder="Crew" name="attr_crew_name"></div>
            <div>Ship Size:<input class="size-field" type="text" placeholder="Medium" name="attr_ship_size"></div>
            <div>Origin:<input class="origin-field" type="text" placeholder="Origin" name="attr_origin"></div>
            <div>Former Purpose:<input class="origin-field" type="text" placeholder="Mining Ship" name="attr_purpose"></div>
            <div>Chassis:<input class="origin-field" type="text" placeholder="Chassis" name="attr_chassis"></div>
        </div>
        <div class="sheet-col">
            <div class="sheet-stat-field"><h4>Ship Stats</h4></div>
            <div class="sheet-stat-field"><button type="roll" value="&{template:ob} {{color=space}} {{title=Roll Mobility}} {{subtitle=@{ship_name}}} {{Result=[[@{rolltype} +@{mobility}[mobility]]]}}" name="roll_MobilityCheck"></button>MOBILITY:<input class="stat-field" type="number" placeholder="0" name="attr_mobility"></div>
            <div class="sheet-stat-field"><button type="roll" value="&{template:ob} {{color=space}} {{title=Roll Body}} {{subtitle=@{ship_name}}} {{Result=[[@{rolltype} +@{body}[body]]]}}" name="roll_BodyCheck"></button>BODY:<input class="stat-field" type="number" placeholder="0" name="attr_body"></div>
            <div class="sheet-stat-field"><button type="roll" value="&{template:ob} {{color=space}} {{title=Roll Systems}} {{subtitle=@{ship_name}}} {{Result=[[@{rolltype} +@{systems}[systems]]]}}" name="roll_SystemsCheck"></button>SYSTEMS:<input class="stat-field" type="number" placeholder="0" name="attr_systems"></div>
            <div class="sheet-rolls">
                <h4>Other Rolls</h4>
                <button type="roll" value="&{template:ob} {{color=space}} {{title=Roll Initiative}} {{subtitle=@{ship_name}}} {{Result=[[1d3 + @{mobility}[mobility] &{tracker}]]}} " name="roll_InitiativeCheck">Initiative</button>
                <button type="roll" value="&{template:ob} {{color=space}} {{title=Roll Observation}} {{subtitle=@{ship_name}}} {{Result=[[2d6]]}}" name="roll_ObservationCheck">Observation</button>
                <button type="roll" value="&{template:ob} {{color=space}} {{title=Attack Roll}} {{subtitle=@{ship_name}}} {{?{What odds?|Normal,[[1d6]] [[1d6]] [[1d6]] |Upper Hand,[[1d6]] [[1d6]] [[1d6]] [[1d6]] |Against the Odds,[[1d6]] [[1d6]] [[1d6]] [[1d6]]}}} {{Choose 2 = Add Appropriate Stat}} {{Damage = Remaining Die}} {{Upper Hand / Against the Odds = Drop Lowest / Drop Highest}} " name="roll_AttackCheck">Attack</button>
                <div><button type="roll" value="&{template:ob} {{color=space}} {{title=d3}} {{subtitle=@{ship_name}}} {{Result = [[1d3]]}} " name="roll_d6">d3</button>
                <button type="roll" value="&{template:ob} {{color=space}} {{title=d6}} {{subtitle=@{ship_name}}} {{Result = [[1d6]]}} " name="roll_d6">d6</button>
                <button type="roll" value="&{template:ob} {{color=space}} {{title=d6}} {{subtitle=@{ship_name}}} {{Result = [[2d6]]}} " name="roll_2d6">2d6</button></div>
            </div>   
        </div>
    </div>
    <hr> 
    <div><h3 class="ability-header">WEAPONS & FEATURES</h3>
        <h4> Weapons </h4>
        <fieldset class="repeating_weaps">
            <div><button type="roll" value="&{template:ob} {{color=space}} {{title=@{ship_name} | @{weaptype}}} {{subtitle=@{weapdesc}}} {{?{What odds?|Normal,[[1d6]] [[1d6]] [[1d6]] |Upper Hand,[[1d6]] [[1d6]] [[1d6]] [[1d6]] |Against the Odds,[[1d6]] [[1d6]] [[1d6]] [[1d6]]}}} {{Choose 2 = Add Appropriate Stat}} {{Damage = Remaining Die}} {{Upper Hand / Against the Odds = Drop Lowest / Drop Highest}} " name="roll_AttackCheck"></button>
                <input type="text" class="inventory-type" name="attr_weaptype" placeholder="Type" />
                <input type="text" class="inventory-desc" name="attr_weapdesc" placeholder="Details" /></div>           
        </fieldset>
        <h4> Features </h4>
        <fieldset class="repeating_feats">
            <div><input type="text" class="inventory-type" name="attr_invfeattype" placeholder="Type" />
                <input type="text" class="inventory-desc" name="attr_invfeatdesc" placeholder="Details" /></div>           
        </fieldset>
    </div>
</div>

<script type="text/worker">
    const buttonlist = ["character","ship"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });
</script>

<rolltemplate class="sheet-rolltemplate-ob">
    <div class="sheet-container sheet-color-{{color}}">
      <div class="sheet-header">
        {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
        {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
      </div>
      <div class="sheet-content">
        {{#allprops() title subtitle desc color}}
        <div class="sheet-key">{{key}}</div>
        <div class="sheet-value">{{value}}</div>
        {{/allprops() title subtitle desc color}}
        {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
      </div>
    </div>
</rolltemplate>

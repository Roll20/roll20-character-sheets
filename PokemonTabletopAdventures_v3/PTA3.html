<input type="radio" name="attr_tab" class="tab select-trainer" value="1" title="Trainer" checked="checked" />
<span class="tab select-trainer">Trainer</span>
<input type="radio" name="attr_tab" class="tab select-pokemon" value="2" title="Pokemon" />
<span class="tab select-pokemon">Pokémon</span>
<input type="radio" name="attr_tab" class="tab select-hybrid" value="3" title="Hybrid" />
<span class="tab select-hybrid">Hybrid</span>

<p class="logo">
    <img
        src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/PokemonTabletopAdventures_v3/images/PTA3LOGO.png" />
</p>

<div class="tab-trainer">
    <div class="2col-centered">
        <div class="character-name-grid">
            <b>Name</b><input type="text" spellcheck="false" name="attr_character_name" class="top-information" />
            <b>Origin</b><input type="text" spellcheck="false" name="attr_origin" class="top-information" />
            <b>Honors</b><input type="number" name="attr_honor_count" class="top-information" />
            <b>Credits</b><input type="number" name="attr_credits" class="top-information long-number" />
        </div>

        <div class="character-class-grid">
            <b>Class</b><input type="text" spellcheck="false" name="attr_class1" class="top-information" />
            <b>Level</b><input type="number" name="attr_level1" class="top-information" />
            <b>Class</b><input type="text" spellcheck="false" name="attr_class2" class="top-information" />
            <b>Level</b><input type="number" name="attr_level2" class="top-information" />
            <b>Class</b><input type="text" spellcheck="false" name="attr_class3" class="top-information" />
            <b>Level</b><input type="number" name="attr_level3" class="top-information" />
            <b>Class</b><input type="text" spellcheck="false" name="attr_class4" class="top-information" />
            <b>Level</b><input type="number" name="attr_level4" class="top-information" />
        </div>
    </div>
</div>

<div class="tab-pokemon">
    <div class="2col-centered">
        <div class="character-name-grid">
            <b>Name</b><input type="text" spellcheck="false" name="attr_character_name" class="top-information" />
            <b>Species</b><input type="text" spellcheck="false" name="attr_species" class="top-information" />
            <b>Type</b>
            <!-- Formatting note: These inputs should have no whitespace between them -->
            <span><input type="text" spellcheck="false" name="attr_type1" class="half-text top-information" /><input
                    type="text" spellcheck="false" name="attr_type2" class="half-text top-information" /></span>
            <b>Nature</b><input type="text" spellcheck="false" name="attr_nature" class="top-information" />
            <b>Held Item</b><input type="text" spellcheck="false" name="attr_item" class="top-information" />
        </div>

        <div class="character-name-grid">
            <b>Size</b><input type="text" spellcheck="false" name="attr_size" class="top-information" />
            <b>Weight</b><input type="text" spellcheck="false" name="attr_weight" class="top-information" />
            <b>Sex</b><input type="text" spellcheck="false" name="attr_pokemon_sex" class="top-information" />
            <b>Egg Group</b><input type="text" spellcheck="false" name="attr_egg_group" class="top-information" />
            <b>Diet</b><input type="text" spellcheck="false" name="attr_diet" class="top-information" />
        </div>
    </div>
</div>

<div class="tab-hybrid">
    <div class="2col-centered">
        <div class="character-name-grid">
            <b>Name</b><input type="text" spellcheck="false" name="attr_character_name" class="top-information" />
            <b>Species</b><input type="text" spellcheck="false" name="attr_species" class="top-information" />
            <b>Nature</b><input type="text" spellcheck="false" name="attr_nature" class="top-information" />
            <b>Origin</b><input type="text" spellcheck="false" name="attr_origin" class="top-information" />
            <b>Honors</b><input type="number" name="attr_honor_count" class="top-information" />
            <b>Credits</b><input type="number" name="attr_credits" class="top-information long-number" />
        </div>

        <div class="character-name-grid">
            <b>Type</b>
            <!-- Formatting note: These inputs should have no whitespace between them -->
            <span><input type="text" spellcheck="false" name="attr_type1" class="half-text top-information" /><input
                    type="text" spellcheck="false" name="attr_type2" class="half-text top-information" /></span>
            <b>Size / Weight</b>
            <!-- Formatting note: These inputs should have no whitespace between them -->
            <span><input type="text" spellcheck="false" name="attr_size" class="half-text top-information" /><input
                    type="text" spellcheck="false" name="attr_weight" class="half-text top-information" /></span>
            <b>Sex</b><input type="text" spellcheck="false" name="attr_pokemon_sex" class="top-information" />
            <b>Egg Group</b><input type="text" spellcheck="false" name="attr_egg_group" class="top-information" />
            <b>Diet</b><input type="text" spellcheck="false" name="attr_diet" class="top-information" />
            <b>Held Item</b><input type="text" spellcheck="false" name="attr_item" class="top-information" />
        </div>
    </div>
</div>

<br />

<div class="tab-trainer tab-hybrid">
    <div class="character-stat-grid">
        <div class="ball hp-ball">
            <b>Current HP</b><br />
            <input type="number" name="attr_HP" class="stat-ball-color" /><br />
            <input type="number" name="attr_MAXHP" class="stat-ball-color" /><br />
            <p>Max HP</p>
        </div>
        <div class="ball atk-ball">
            <b>Attack</b><br />
            <input type="number" name="attr_ATK" class="stat-ball-color" /><br />
            <input type="number" name="attr_ATKMOD" readonly class="stat-read-ball-color" /><br />
            <p>ATK mod</p>
        </div>
        <div class="ball def-ball">
            <b>Defense</b><br />
            <input type="number" name="attr_DEF" class="stat-ball-color" /><br />
            <input type="number" name="attr_DEFMOD" readonly
                class="stat-read-ball-color tab-pokemon tab-hybrid" /><br />
            <p>DEF mod</p>
        </div>
        <div class="ball spatk-ball">
            <b>Special Attack</b><br />
            <input type="number" name="attr_SPATK" class="stat-ball-color" /><br />
            <input type="number" name="attr_SPATKMOD" readonly class="stat-read-ball-color" /><br />
            <p>SPATK mod</p>
        </div>
        <div class="ball spdef-ball">
            <b>Special Defense</b><br />
            <input type="number" name="attr_SPDEF" class="stat-ball-color" /><br />
            <input type="number" name="attr_SPDEFMOD" readonly class="stat-read-ball-color" /><br />
            <p>SPDEF mod</p>
        </div>
        <div class="ball spd-ball">
            <b>Speed</b><br />
            <input type="number" name="attr_SPD" class="stat-ball-color" /><br />
            <input type="number" name="attr_SPDMOD" readonly class="stat-read-ball-color" /><br />
            <p>SPD mod</p>
        </div>
    </div>
</div>

<div class="tab-pokemon">
    <div class="character-stat-grid">
        <div class="ball hp-ball">
            <b>Current HP</b><br />
            <input type="number" name="attr_HP" class="stat-ball-color" /><br />
            <input type="number" name="attr_MAXHP" class="stat-ball-color" /><br />
            <p>Max HP</p>
        </div>
        <div class="ball atk-ball">
            <b>Attack</b><br />
            <input type="number" name="attr_ATK" class="stat-ball-color" /><br />
            <input type="number" name="attr_ATKMOD" readonly class="stat-read-ball-color" /><br />
            <p>ATK mod</p>
        </div>
        <div class="ball def-ball">
            <b>Defense</b><br />
            <input type="number" name="attr_DEF" class="stat-ball-color" /><br />
        </div>
        <div class="ball spatk-ball">
            <b>Special Attack</b><br />
            <input type="number" name="attr_SPATK" class="stat-ball-color" /><br />
            <input type="number" name="attr_SPATKMOD" readonly class="stat-read-ball-color" /><br />
            <p>SPATK mod</p>
        </div>
        <div class="ball spdef-ball">
            <b>Special Defense</b><br />
            <input type="number" name="attr_SPDEF" class="stat-ball-color" />
        </div>
        <div class="ball spd-ball">
            <b>Speed</b><br />
            <input type="number" name="attr_SPD" class="stat-ball-color" /><br />
            <input type="number" name="attr_SPDMOD" readonly class="stat-read-ball-color" /><br />
            <p>SPD mod</p>
        </div>
    </div>
</div>


<div class="tab-pokemon tab-hybrid">
    <div class="pokemon-extra-stats-grid">
        <p></p>
        <p></p>
        <p></p>
        <p></p>
        <b>Movement</b>
        <span>
            <input type="number" name="attr_movement" readonly class="speed-read-color" />
            <b>ft</b>
        </span>
        <b>Temporary Bonuses</b>
        <b>Attack</b>
        <b>Defense</b>
        <b>Special Attack</b>
        <b>Special Defense</b>
        <b>Speed</b>
        <b></b>
        <input type="number" name="attr_atkbonus" class="attack-color" />
        <input type="number" name="attr_defbonus" class="defense-color" />
        <input type="number" name="attr_spatkbonus" class="spatk-color" />
        <input type="number" name="attr_spdefbonus" class="spdef-color" />
        <input type="number" name="attr_spdbonus" class="speed-color" />
        <b>Contest Stats</b>
        <b>Cool</b>
        <b>Tough</b>
        <b>Beauty</b>
        <b>Clever</b>
        <b>Cute</b>
        <b></b>
        <input type="number" name="attr_cool" class="attack-color" />
        <input type="number" name="attr_tough" class="defense-color" />
        <input type="number" name="attr_beauty" class="spatk-color" />
        <input type="number" name="attr_clever" class="spdef-color" />
        <input type="number" name="attr_cute" class="speed-color" />
    </div>
</div>

<div class="tab-trainer tab-hybrid">
    <br />

    <div class="character-skill-labels">
        <p></p>
        <b>Stat</b>
        <b>Skill Name</b>
        <b>+2</b>
        <b>+5</b>
        <b>Bonus</b>
        <b>Inventory</b>
    </div>

    <div class="2col-centered">
        <div class="character-skills">

            <button type='roll'
                value='&{template:default} {{name=Acrobatics}} {{result=[[1d20+@{SPDMOD}+@{acrobaticstalent1}+@{acrobaticstalent2}+@{acrobatics}}+?{Temporary Bonus|0}]]}}'
                name='roll_acrobaticscheck'></button>
            <input type="number" readonly name="attr_SPDMOD" class="speed-read-color" />
            <p>Acrobatics (SPD)</p>
            <input type="checkbox" name="attr_acrobaticstalent1" value="2" />
            <input type="checkbox" name="attr_acrobaticstalent2" value="3" />
            <input type="number" name="attr_acrobatics" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Athletics}} {{result=[[1d20+@{ATKMOD}+@{athleticstalent1}+@{athleticstalent2}+@{athletics}+?{Temporary Bonus|0}]]}}'
                name='roll_athleticscheck'></button>
            <input type="number" readonly name="attr_ATKMOD" class="attack-read-color" />
            <p>Athletics (ATK)</p>
            <input type="checkbox" name="attr_athleticstalent1" value="2" />
            <input type="checkbox" name="attr_athleticstalent2" value="3" />
            <input type="number" name="attr_athletics" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Bluff/Deception}} {{result=[[1d20+@{SPDEFMOD}+@{blufftalent1}+@{blufftalent2}+@{bluff}+?{Temporary Bonus|0}]]}}'
                name='roll_bluffcheck'></button>
            <input type="number" readonly name="attr_SPDEFMOD" class="spdef-read-color" />
            <p>Bluff/Deception (SPDEF)</p>
            <input type="checkbox" name="attr_blufftalent1" value="2" />
            <input type="checkbox" name="attr_blufftalent2" value="3" />
            <input type="number" name="attr_bluff" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Concentration}} {{result=[[1d20+@{DEFMOD}+@{concentrationtalent1}+@{concentrationtalent2}+@{concentration}+?{Temporary Bonus|0}]]}}'
                name='roll_concentrationcheck'></button>
            <input type="number" readonly name="attr_DEFMOD" class="defense-read-color" />
            <p>Concentration (DEF)</p>
            <input type="checkbox" name="attr_concentrationtalent1" value="2" />
            <input type="checkbox" name="attr_concentrationtalent2" value="3" />
            <input type="number" name="attr_concentration" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Constitution}} {{result=[[1d20+@{DEFMOD}+@{constitutiontalent1}+@{constitutiontalent2}+@{constitution}+?{Temporary Bonus|0}]]}}'
                name='roll_constitutioncheck'></button>
            <input type="number" readonly name="attr_DEFMOD" class="defense-read-color" />
            <p>Constitution (DEF)</p>
            <input type="checkbox" name="attr_constitutiontalent1" value="2" />
            <input type="checkbox" name="attr_constitutiontalent2" value="3" />
            <input type="number" name="attr_constitution" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Diplomacy/Persuasion}} {{result=[[1d20+@{SPDEFMOD}+@{diplomacytalent1}+@{diplomacytalent2}+@{diplomacy}+?{Temporary Bonus|0}]]}}'
                name='roll_diplomacycheck'></button>
            <input type="number" readonly name="attr_SPDEFMOD" class="spdef-read-color" />
            <p>Diplomacy/Persuasion (SPDEF)</p>
            <input type="checkbox" name="attr_diplomacytalent1" value="2" />
            <input type="checkbox" name="attr_diplomacytalent2" value="3" />
            <input type="number" name="attr_diplomacy" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Engineering/Operation}} {{result=[[1d20+@{SPATKMOD}+@{engineeringtalent1}+@{engineeringtalent2}+@{engineering}+?{Temporary Bonus|0}]]}}'
                name='roll_engineeringcheck'></button>
            <input type="number" readonly name="attr_SPATKMOD" class="spatk-read-color" />
            <p>Engineering/Operation (SPATK)</p>
            <input type="checkbox" name="attr_engineeringtalent1" value="2" />
            <input type="checkbox" name="attr_engineeringtalent2" value="3" />
            <input type="number" name="attr_engineering" value="0" />

            <button type='roll'
                value='&{template:default} {{name=History}} {{result=[[1d20+@{SPATKMOD}+@{historytalent1}+@{historytalent2}+@{history}+?{Temporary Bonus|0}]]}}'
                name='roll_historycheck'></button>
            <input type="number" readonly name="attr_SPATKMOD" class="spatk-read-color" />
            <p>History (SPATK)</p>
            <input type="checkbox" name="attr_historytalent1" value="2" />
            <input type="checkbox" name="attr_historytalent2" value="3" />
            <input type="number" name="attr_history" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Insight}} {{result=[[1d20+@{SPDEFMOD}+@{insighttalent1}+@{insighttalent2}+@{insight}+?{Temporary Bonus|0}]]}}'
                name='roll_insightcheck'></button>
            <input type="number" readonly name="attr_SPDEFMOD" class="spdef-read-color" />
            <p>Insight (SPDEF)</p>
            <input type="checkbox" name="attr_insighttalent1" value="2" />
            <input type="checkbox" name="attr_insighttalent2" value="3" />
            <input type="number" name="attr_insight" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Investigate}} {{result=[[1d20+@{SPATKMOD}+@{investigatetalent1}+@{investigatetalent2}+@{investigate}+?{Temporary Bonus|0}]]}}'
                name='roll_investigatecheck'></button>
            <input type="number" readonly name="attr_SPATKMOD" class="spatk-read-color" />
            <p>Investigate (SPATK)</p>
            <input type="checkbox" name="attr_investigatetalent1" value="2" />
            <input type="checkbox" name="attr_investigatetalent2" value="3" />
            <input type="number" name="attr_investigate" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Medicine}} {{result=[[1d20+@{SPATKMOD}+@{medicinetalent1}+@{medicinetalent2}+@{medicine}+?{Temporary Bonus|0}]]}}'
                name='roll_medicinecheck'></button>
            <input type="number" readonly name="attr_SPATKMOD" class="spatk-read-color" />
            <p>Medicine (SPATK)</p>
            <input type="checkbox" name="attr_medicinetalent1" value="2" />
            <input type="checkbox" name="attr_medicinetalent2" value="3" />
            <input type="number" name="attr_medicine" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Nature}} {{result=[[1d20+@{SPATKMOD}+@{naturetalent1}+@{naturetalent2}+@{nature}+?{Temporary Bonus|0}]]}}'
                name='roll_naturecheck'></button>
            <input type="number" readonly name="attr_SPATKMOD" class="spatk-read-color" />
            <p>Nature (SPATK)</p>
            <input type="checkbox" name="attr_naturetalent1" value="2" />
            <input type="checkbox" name="attr_naturetalent2" value="3" />
            <input type="number" name="attr_nature" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Perception}} {{result=[[1d20+@{SPDEFMOD}+@{perceptiontalent1}+@{perceptiontalent2}+@{perception}+?{Temporary Bonus|0}]]}}'
                name='roll_perceptioncheck'></button>
            <input type="number" readonly name="attr_SPDEFMOD" class="spdef-read-color" />
            <p>Perception (SPDEF)</p>
            <input type="checkbox" name="attr_perceptiontalent1" value="2" />
            <input type="checkbox" name="attr_perceptiontalent2" value="3" />
            <input type="number" name="attr_perception" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Perform}} {{result=[[1d20+@{SPDEFMOD}+@{performtalent1}+@{performtalent2}+@{perform}+?{Temporary Bonus|0}]]}}'
                name='roll_performcheck'></button>
            <input type="number" readonly name="attr_SPDEFMOD" class="spdef-read-color" />
            <p>Perform (SPDEF)</p>
            <input type="checkbox" name="attr_performtalent1" value="2" />
            <input type="checkbox" name="attr_performtalent2" value="3" />
            <input type="number" name="attr_perform" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Pokemon Handling}} {{result=[[1d20+@{SPDEFMOD}+@{handlingtalent1}+@{handlingtalent2}+@{handling}+?{Temporary Bonus|0}]]}}'
                name='roll_handlingcheck'></button>
            <input type="number" readonly name="attr_SPDEFMOD" class="spdef-read-color" />
            <p>Pokémon Handling (SPDEF)</p>
            <input type="checkbox" name="attr_handlingtalent1" value="2" />
            <input type="checkbox" name="attr_handlingtalent2" value="3" />
            <input type="number" name="attr_handling" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Programming}} {{result=[[1d20+@{SPATKMOD}+@{programmingtalent1}+@{programmingtalent2}+@{programming}+?{Temporary Bonus|0}]]}}'
                name='roll_programmingcheck'></button>
            <input type="number" readonly name="attr_SPATKMOD" class="spatk-read-color" />
            <p>Programming (SPATK)</p>
            <input type="checkbox" name="attr_programmingtalent1" value="2" />
            <input type="checkbox" name="attr_programmingtalent2" value="3" />
            <input type="number" name="attr_programming" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Sleight of Hand}} {{result=[[1d20+@{SPDMOD}+@{sleightofhandtalent1}+@{sleightofhandtalent2}+@{sleightofhand}+?{Temporary Bonus|0}]]}}'
                name='roll_sleightofhandcheck'></button>
            <input type="number" readonly name="attr_SPDMOD" class="speed-read-color" />
            <p>Sleight of Hand (SPD)</p>
            <input type="checkbox" name="attr_sleightofhandtalent1" value="2" />
            <input type="checkbox" name="attr_sleightofhandtalent2" value="3" />
            <input type="number" name="attr_sleightofhand" value="0" />

            <button type='roll'
                value='&{template:default} {{name=Stealth}} {{result=[[1d20+@{SPDMOD}+@{stealthtalent1}+@{stealthtalent2}+@{stealth}+?{Temporary Bonus|0}]]}}'
                name='roll_stealthcheck'></button>
            <input type="number" readonly name="attr_SPDMOD" class="speed-read-color" />
            <p>Stealth (SPD)</p>
            <input type="checkbox" name="attr_stealthtalent1" value="2" />
            <input type="checkbox" name="attr_stealthtalent2" value="3" />
            <input type="number" name="attr_stealth" value="0" />
        </div>

        <textarea spellcheck="false" name="attr_inventory" class="inventory"
            placeholder="Pokéballs, Berries, Medicine, Accessories, etc."></textarea>

    </div>

    <br />

    <b>Origin Feature</b>
    <div>
        <input type="text" spellcheck="false" name="attr_originfeaturename" placeholder="Feature Name" />
        <textarea spellcheck="false" name="attr_originfeaturedesc" class="2row-textarea"
            placeholder="Feature Description"></textarea>
    </div>

    <b>Class Features</b>
    <fieldset class="repeating_features">
        <input type="text" spellcheck="false" name="attr_classfeaturename" placeholder="Feature Name" />
        <textarea spellcheck="false" name="attr_classfeaturedesc" class="2row-textarea"
            placeholder="Feature Description"></textarea>
    </fieldset>

    <b>Honors</b>
    <textarea spellcheck="false" name="attr_honors"
        placeholder="Gym Badges, Contest Ribbons, Recognitions, etc."></textarea>
</div>

<div class="tab-trainer">
    <b>Owned Pokémon</b>
    <textarea spellcheck="false" name="attr_ownedpokemon" placeholder="All Pokémon owned by this Trainer"></textarea>
</div>

<div class="tab-pokemon tab-hybrid">

    <b>Skills</b>
    <textarea spellcheck="false" name="attr_pokemonskills" class="2row-textarea"
        placeholder="Capabilities to be used both in and out of battle, such as Firestarter, Invisibility, and Telekinetic"></textarea>

    <b>Stat Passives</b>
    <textarea spellcheck="false" name="attr_statpassives" class="2row-textarea"
        placeholder="Passives that affect Pokémon stats, such as Nasty Plot and Play Nice"></textarea>

    <b>Other Passives</b>
    <textarea spellcheck="false" name="attr_otherpassives" class="4row-textarea"
        placeholder="Passives that do not affect stats, such as Cute Charm and Static"></textarea>

    <b>Moves</b>
    <fieldset class="repeating_moves">
        <div class="pokemon-move">
            <div class="pokemon-move-info-grid">
                <input type="text" spellcheck="false" name="attr_move_name" placeholder="Move" />
                <input type="text" spellcheck="false" name="attr_move_range" placeholder="Range" />
                <input type="text" spellcheck="false" name="attr_move_damage" placeholder="Damage" />
                <select name="attr_move_type">
                    <option value="">Type</option>
                    <option value="bug">Bug</option>
                    <option value="dark">Dark</option>
                    <option value="dragon">Dragon</option>
                    <option value="electric">Electric</option>
                    <option value="fairy">Fairy</option>
                    <option value="fighting">Fighting</option>
                    <option value="fire">Fire</option>
                    <option value="flying">Flying</option>
                    <option value="ghost">Ghost</option>
                    <option value="grass">Grass</option>
                    <option value="ground">Ground</option>
                    <option value="ice">Ice</option>
                    <option value="normal">Normal</option>
                    <option value="poison">Poison</option>
                    <option value="psychic">Psychic</option>
                    <option value="rock">Rock</option>
                    <option value="steel">Steel</option>
                    <option value="water">Water</option>
                </select>
                <select name="attr_move_category">
                    <option value="">Category</option>
                    <option value="attack">Attack</option>
                    <option value="spatk">Special Attack</option>
                    <option value="effect">Effect</option>
                </select>
                <select name="attr_move_frequency">
                    <option value="">Frequency</option>
                    <option value="atwill">At-Will</option>
                    <option value="1day">3/day</option>
                    <option value="3day">1/day</option>
                </select>

            </div>
            <textarea spellcheck="false" name="attr_move_effect" placeholder="Additional Effects"
                class="2row-textarea"></textarea>
        </div>
    </fieldset>

</div>

<b>Notes</b>
<textarea spellcheck="false" name="attr_notes"></textarea>

<script type="text/worker">
    on("change:ATK sheet:opened", function() {  
        getAttrs(["ATK"], function(values) {
          let atk = parseInt(values.ATK)||0;
          let atkmod = Math.floor(atk/2);
          setAttrs({                            
            "ATKMOD": atkmod
          });
        });
      });

      on("change:DEF sheet:opened", function() {  
        getAttrs(["DEF"], function(values) {
          let def = parseInt(values.DEF)||0;
          let defmod = Math.floor(def/2);
          setAttrs({                            
            "DEFMOD": defmod
          });
        });
      });

      on("change:SPATK sheet:opened", function() {  
        getAttrs(["SPATK"], function(values) {
          let spatk = parseInt(values.SPATK)||0;
          let spatkmod = Math.floor(spatk/2);
          setAttrs({                            
            "SPATKMOD": spatkmod
          });
        });
      });

      on("change:SPDEF sheet:opened", function() {  
        getAttrs(["SPDEF"], function(values) {
          let spdef = parseInt(values.SPDEF)||0;
          let spdefmod = Math.floor(spdef/2);
          setAttrs({                            
            "SPDEFMOD": spdefmod
          });
        });
      });

      on("change:SPD sheet:opened", function() {  
        getAttrs(["SPD"], function(values) {
          let spd = parseInt(values.SPD)||0;
          let spdmod = Math.floor(spd/2);
          let move = spd*5;
          setAttrs({                            
            "SPDMOD": spdmod,
            "movement": move
          });
        });
      });
      
</script>
<!DOCTYPE html>

<main>
<div class="charsheet">
	<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab" value="character" />
	<div style="display: flex; flex-direction: row; justify-content: space-between;">
		<div class="sheet-tabButton">
			<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab" value="character" />
			<button type="action" class="sheet-tabButton" name="act_character">Character</button>
			<button type="action" class="sheet-tabButton" name="act_action">Action</button>
			<button type="action" class="sheet-tabButton" name="act_animon">Animon</button>
			<button type="action" class="sheet-tabButton" name="act_option">Option</button>
		</div>
		<div>
			<select name="attr_rollWhisperType" style="margin-bottom: 4px;">
				<option value="" selected><span>Show rolls</span></option>
				<option value="?{Whisper?|Public Roll,|Whisper Roll,/w gm }"><span>Ask each time</span></option>
				<option value="/w gm"><span>Always whisper</span></option>
			</select>
		</div>
	</div>

	<div class="sheet-character sheet-tab">
		<section style="
			display: grid;
			grid-template-columns: repeat(2, 1fr);
		">
			<div style="
				display: flex;
				flex-flow: row;
				gap: 5px;
				grid-column: 1 / 3;
			">
				<article style="padding: 16px; flex: 0 0 auto;">
					<h2 style="align-items: center;">Kid</h2>
				</article>
				<article class="sheet-grid sheet-flexContent sheet-kid" style="
					flex: 1 1 auto;
					grid-template-columns: repeat(2, 1fr);
					grid-template-rows: repeat(3, 1fr);
					grid-auto-flow: column;
				">
					<div style="grid-column: 1 / 3; border-bottom: 2px solid var();">
						<h3>Kid Name:</h3>
						<input type="text" name="attr_character_name" placeholder="Character Name" title="Enter the character's name" />
					</div>
					<div>
						<h4>Virtue:</h4>
						<input type="text" name="attr_virtue" placeholder="Virtue" title="Enter the character's virtue" />
					</div>
					<div>
						<h4>Desire:</h4>
						<input type="text" name="attr_desire" placeholder="Desire" title="Enter the character's desire" />
					</div>
					<div>
						<h4>Flaw:</h4>
						<input type="text" name="attr_flaw" placeholder="Flaw" title="Enter the character's flaw" />
					</div>
					<div>
						<h4>Special Item:</h4>
						<input type="text" name="attr_specialItem" placeholder="Special Item" title="Enter the character's special item" />
					</div>
				</article>
			</div>
			<article class="sheet-traits">
				<header>
					<h2>Traits</h2>
				</header>
				<div>
					<div>
						<button type="roll" name="act_roll_trait_logic" value="@{rollWhisperType} &{template:kid} {{kidName=@{character_name}}} {{rollName=Logic}} {{rollTotal=[[ [[@{trait_logic} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
							<span>Logic</span>
						</button>
						<input type="number" name="attr_trait_logic" value="0" />
					</div>
					<div>
						<button type="roll" name="act_roll_trait_reflex" value="@{rollWhisperType} &{template:kid} {{kidName=@{character_name}}} {{rollName=Logic}} {{rollTotal=[[ [[@{trait_reflex} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
							<span>Reflex</span>
						</button>
						<input type="number" name="attr_trait_reflex" value="0" />
					</div>
					<div>
						<button type="roll" name="act_roll_trait_spirit" value="@{rollWhisperType} &{template:kid} {{kidName=@{character_name}}} {{rollName=Spirit}} {{rollTotal=[[ [[@{trait_spirit} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
							<span>Spirit</span>
						</button>
						<input type="number" name="attr_trait_spirit" value="0" />
					</div>
				</div>
			</article>
			<article class="sheet-stamina">
				<header>
					<h2>Stamina</h2>
				</header>
				<div>
					<input type="number" name="attr_stamina" value="0" title="Current stamina" />
					<input type="hidden" name="attr_stamina_max" value="10" />
					<span name="attr_stamina_max"></span>
					<div class="bar"></div>
				</div>
			</article>
			<article class="sheet-harm">
				<header>
					<h3>Harm:</h3>
					<div style="
						gap: 4px;
						padding-right: 6px;
					">
						<h4>Shaken:</h4>
						<input type="checkbox" name="attr_shaken" title="Is the Kid shaken" />
					</div>
				</header>
				<div>
					<div>
						<span>1.</span>
						<input type="text" name="attr_harm_1" placeholder="Harm name" title="First harm name" />
					</div>
					<div>
						<span>2.</span>
						<input type="text" name="attr_harm_2" placeholder="Harm name" title="Second harm name" />
					</div>
					<div class="no-border">
						<span>3.</span>
						<input type="text" name="attr_harm_3" placeholder="Harm name" title="Third harm name" />
					</div>
				</div>
			</article>
			<article class="sheet-kid-type">
				<header>
					<button type="roll" value="@{rollWhisperType} &{template:kid} {{kidName=@{character_name}}} {{rollName=Kid Type}} {{rollTotal=@{kidType_feature}}}">
						<h2>Kid Type:</h2>
					</button>
					<input type="text" name="attr_kidType_name" placeholder="Kid Type" title="Enter the kid's type" />
				</header>
				<div>
					<span>Type Feature:</span>
					<input type="text" name="attr_kidType_feature_name" placeholder="Name" title="Enter the kid's type name" />
				</div>
				<textarea name="attr_kidType_feature" placeholder="Kid type feature" title="Describe the kid's type feature"></textarea>
			</article>
			<article class="sheet-relationships">
				<header>
					<h3>Relationships:</h3>
				</header>
				<fieldset class="repeating_relationship">
					<div class="repeating_relationship_row">
						<div>
							<div class="sheet-folder">
								<input type="checkbox" name="attr_relationship_fold" class="sheet-foldable" checked />
								<span class="sheet-foldable"></span>
							</div>
							<input type="text" name="attr_relationship_target" placeholder="Target" title="Relationship name" />
						</div>
						<input type="hidden" class="sheet-foldable" name="attr_relationship_fold" value="on" />
						<div class="sheet-foldable">
							<textarea name="attr_relationship_description" placeholder="Description" title="Relationship description"></textarea>
						</div>
					</div>
				</fieldset>
			</article>
			<article class="sheet-talents">
				<header>
					<h3>Talents:</h3>
					<h3 style="
						padding-left: 4px;
						border-left: 2px dashed lightgray;
					">Rank:</h3>
				</header>
				<fieldset class="repeating_talent">
					<div class="repeating_talent_row">
						<button type="roll" value="@{rollWhisperType} &{template:kid} {{kidName=@{character_name}}} {{rollName=@{talent_name}}} {{rollTotal=[[ [[@{talent_rank} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}"></button>
						<input type="text" name="attr_talent_name" placeholder="Name" title="Talent's name" />
						<input type="number" name="attr_talent_rank" value="1" title="Talent's rank" />
					</div>
				</fieldset>
			</article>
			<article class="sheet-stuff" >
				<header>
					<h3>Stuff & Ani-Tool:</h3>
				</header>
				<fieldset class="repeating_stuff">
					<div class="repeating_stuff_row">
						<div>
							<div class="sheet-folder">
								<input type="checkbox" name="attr_stuff_fold" class="sheet-foldable" checked />
								<span class="sheet-foldable"></span>
							</div>
							<input type="text" name="attr_stuff_name" placeholder="Name" title="Name of the item" />
							<input type="number" name="attr_stuff_quantity" value="0" title="Item's quantity" />
						</div>
						<input type="hidden" class="sheet-foldable" name="attr_stuff_fold" value="on" />
						<div class="sheet-foldable">
							<textarea name="attr_stuff_description" placeholder="Item description" title="Item description"></textarea>
						</div>
					</div>
				</fieldset>
			</article>
			<article class="sheet-notes">
				<header>
					<h3>Notes</h3>
				</header>
				<fieldset class="repeating_note">
					<div class="repeating_note_row">
						<div>
							<div class="sheet-folder">
								<input type="checkbox" name="attr_note_fold" class="sheet-foldable" checked />
								<span class="sheet-foldable"></span>
							</div>
							<input type="text" name="attr_note_title" placeholder="Title" title="Note title" />
						</div>
						<input type="hidden" class="sheet-foldable" name="attr_note_fold" value="on" />
						<div class="sheet-foldable">
							<textarea name="attr_note" placeholder="Note" title="Note"></textarea>
						</div>
					</div>
				</fieldset>
			</article>
		</section>
	</div>

	<div class="sheet-action">
		<!-- Type feature, Special item, Talents, Flaw, Desire -->
		<div>
			<section>
				<article class="sheet-traits">
					<header>
						<h2>Traits</h2>
					</header>
					<div>
						<div>
							<button type="roll" value="@{rollWhisperType} &{template:kid} {{kidName=@{character_name}}} {{rollName=Logic}} {{rollTotal=[[ [[@{trait_logic} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
								<span>Logic</span>
								<span name="attr_trait_logic"></span>
							</button>
						</div>
						<div>
							<button type="roll" value="@{rollWhisperType} &{template:kid} {{kidName=@{character_name}}} {{rollName=Reflex}} {{rollTotal=[[ [[@{trait_reflex} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
								<span>Reflex</span>
								<span name="attr_trait_reflex"></span>
							</button>
						</div>
						<div>
							<button type="roll" value="@{rollWhisperType} &{template:kid} {{kidName=@{character_name}}} {{rollName=Spirit}} {{rollTotal=[[ [[@{trait_spirit} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
								<span>Spirit</span>
								<span name="attr_trait_spirit"></span>
							</button>
						</div>
					</div>
				</article>
				<article class="sheet-kid-type">
					<header>
						<button type="roll" value="@{rollWhisperType} &{template:kid} {{kidName=@{character_name}}} {{rollName=Kid Type}} {{rollTotal=@{kidType_feature}}}">
							<h2>Kid Type:</h2>
						</button>
						<span name="attr_kidType_name"></span>
					</header>
					<div>
						<span>Type Feature:</span>
						<span name="attr_kidType_feature_name"></span>
					</div>
					<textarea name="attr_kidType_feature" placeholder="Kid type feature" title="Describe the kid's type feature" readonly></textarea>
				</article>
				<article class="sheet-stamina">
					<header>
						<h2>Stamina</h2>
					</header>
					<div>
						<input type="number" name="attr_stamina" value="0" title="Current stamina" />
						<input type="hidden" name="attr_stamina_max" value="10" />
						<span name="attr_stamina_max"></span>
						<div class="bar"></div>
					</div>
				</article>
				<article class="sheet-talents">
					<header>
						<h3>Talents:</h3>
						<h3 style="
							padding-left: 4px;
							border-left: 2px dashed lightgray;
						">Rank:</h3>
					</header>
					<fieldset class="repeating_talent">
						<div class="repeating_talent_row">
							<button type="roll" value="@{rollWhisperType} &{template:kid} {{kidName=@{character_name}}} {{rollName=@{talent_name}}} {{rollTotal=[[ [[@{talent_rank} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}"></button>
							<span name="attr_talent_name" title="Talent's name"></span>
							<button type="roll" value="@{rollWhisperType} &{template:kid} {{kidName=@{character_name}}} {{rollName=@{talent_name}}} {{rollTotal=[[ [[@{talent_rank} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}" title="Talent's rank">
								<span name="attr_talent_rank" style="text-align: center;"></span>
							</button>
						</div>
					</fieldset>
				</article>
			</section>
			<div>
				<section>
					<div style="display: flex; flex-flow: row nowrap; gap: 1em;">
						<article class="sheet-xp">
							<header>
								<h2>XP</h2>
							</header>
							<input type="checkbox" name="attr_xp_1" title="XP 1" />
							<input type="checkbox" name="attr_xp_2" title="XP 2" />
							<input type="checkbox" name="attr_xp_3" title="XP 3" />
							<input type="checkbox" name="attr_xp_4" title="XP 4" />
							<div class="sheet-circle sheet-half">
								<input type="checkbox" name="attr_xp_5" title="XP 5" />
							</div>
							<input type="checkbox" name="attr_xp_6" title="XP 6" />
							<input type="checkbox" name="attr_xp_7" title="XP 7" />
							<input type="checkbox" name="attr_xp_8" title="XP 8" />
							<input type="checkbox" name="attr_xp_9" title="XP 9" />
							<div class="sheet-circle">
								<input type="checkbox" name="attr_xp_10" title="XP 10" />
							</div>
						</article>
						<div style="gap: 1em; display: flex; flex-flow: column nowrap; justify-content: space-evenly;">
							<article class="sheet-bondLevel">
								<header>
									<h2>Bond Level</h2>
								</header>
								<input type="number" name="attr_bondLevel" value="1" />
							</article>
							<article class="sheet-bonds">
								<header>
									<h2>Bond points</h2>
								</header>
								<div>
									<input type="number" name="attr_bondPoints" value="0" />
									<input type="hidden" name="attr_bondPoints_max" value="6" />
									<span name="attr_bondPoints_max"></span>
									<div class="bar"></div>
								</div>
							</article>
							<article class="sheet-strain">
								<header>
									<h2>Bond strain</h2>
								</header>
								<input type="number" name="attr_bondStrain" value="0" />
							</article>
							<article class="sheet-attack-uses">
								<header>
									<h2 title="Single Attack Uses">Sig. Attack Uses</h2>
								</header>
								<div>
									<input type="number" name="attr_sigAttackUses" value="0" />
									<input type="hidden" name="attr_sigAttackUses_max" value="1" />
									<span name="attr_sigAttackUses_max"></span>
									<div class="bar"></div>
								</div>
							</article>
						</div>
					</div>
				</section>
				<section>
					<article class="sheet-harm">
						<header>
							<h3>Harm</h3>
							<div style="
								gap: 4px;
								padding-right: 6px;
							">
								<h4>Shaken:</h4>
								<input type="checkbox" name="attr_shaken" />
							</div>
						</header>
						<div>
							<div>
								<span>1.</span>
								<input type="text" name="attr_harm_1" placeholder="Harm name" />
							</div>
							<div>
								<span>2.</span>
								<input type="text" name="attr_harm_2" placeholder="Harm name" />
							</div>
							<div>
								<span>3.</span>
								<input type="text" name="attr_harm_3" placeholder="Harm name" />
							</div>
						</div>
					</article>
				</section>
			</div>
		</div>
		<section class="sheet-animon-preview">
			<input type="hidden" name="attr_display_animon_evo" value="basic" />
			<button type="action" name="act_animon_devolve">←</button>
			<div>
				<div class="sheet-flex-immutable">
					<article class="sheet-animon-preview" style="justify-content: center; gap: 4px;">
						<h2>Animon</h2>
						<span>(</span><span name="attr_display_animon_evo" class="sheet-stage"></span><span>)</span>
					</article>
					<div>
						<div>
							<article class="sheet-animon-stats">
								<h2>Stats</h2>
								<div>
									<h4 style="border-top-color: transparent;">Heart</h4>
									<input type="hidden" name="attr_display_animon_heart" />
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{display_animon_name}}} {{rollName=Heart}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{display_animon_heart} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<span name="attr_display_animon_heart"></span>
									</button>
								</div>
								<div>
									<h4>Power</h4>
									<input type="hidden" name="attr_display_animon_power" />
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{display_animon_name}}} {{rollName=Power}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{display_animon_power} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<span name="attr_display_animon_power"></span>
									</button>
								</div>
								<div>
									<h4>Agility</h4>
									<input type="hidden" name="attr_display_animon_agility" />
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{display_animon_name}}} {{rollName=Agility}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{display_animon_agility} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<span name="attr_display_animon_agility"></span>
									</button>
								</div>
								<div>
									<h4>Brains</h4>
									<input type="hidden" name="attr_display_animon_brains" />
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{display_animon_name}}} {{rollName=Brains}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{display_animon_brains} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<span name="attr_display_animon_brains"></span>
									</button>
								</div>
							</article>
						</div>
						<div class="sheet-animon-stats">
							<article>
								<h4>HP</h4>
								<span name="attr_display_animon_hp" style="align-content: end;"></span>
								<div style="display: flex; height: 10px;">
									<button type="action" name="act_animon_harm">
										<span>-</span>
									</button>
									<button type="action" name="act_animon_heal">
										<span>+</span>
									</button>
								</div>
							</article>
							<article>
								<h4>Damage</h4>
								<span name="attr_display_animon_damage"></span>
							</article>
							<article>
								<h4>Dodge</h4>
								<input type="hidden" name="attr_display_animon_dodge" />
								<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{display_animon_name}}} {{rollName=Dodge}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{display_animon_dodge} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
									<span name="attr_display_animon_dodge"></span>
								</button>
							</article>
							<article>
								<h4>Initiative</h4>
								<input type="hidden" name="attr_display_animon_initiative" />
								<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{display_animon_name}}} {{rollName=Initiative}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{display_animon_initiative} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
									<span name="attr_display_animon_initiative"></span>
								</button>
							</article>
						</div>
					</div>
				</div>
				<div>
					<div class="sheet-animon-metas">
						<article>
							<h3>Name:</h3>
							<input type="hidden" name="attr_display_animon_name" />
							<span name="attr_display_animon_name"></span>
						</article>
						<article>
							<h3>Nature:</h3>
							<input type="hidden" name="attr_display_animon_nature" />
							<span name="attr_display_animon_nature"></span>
						</article>
						<div>
							<article>
								<h3>Class:</h3>
								<input type="hidden" name="attr_display_animon_class" />
								<span name="attr_display_animon_class"></span>
							</article>
							<article>
								<h3>Element:</h3>
								<input type="hidden" name="attr_display_animon_element" />
								<span name="attr_display_animon_element"></span>
							</article>
						</div>
					</div>
					<article class="sheet-animon-sigattack-table">
						<div style="border: 0;">
							<h2>Signature Attack</h2>
						</div>
						<div>
							<h3>Name:</h3>
							<input type="hidden" name="attr_display_animon_sigAttack_name" />
							<span name="attr_display_animon_sigAttack_name"></span>
						</div>
						<div>
							<h3>Rank:</h3>
							<input type="hidden" name="attr_display_animon_sigAttack_rank" />
							<span name="attr_display_animon_sigAttack_rank"></span>
						</div>
						<div>
							<h3>Element:</h3>
							<input type="hidden" name="attr_display_animon_sigAttack_element" />
							<span name="attr_display_animon_sigAttack_element"></span>
						</div>
						<div>
							<h3>Effect 1:</h3>
							<input type="hidden" name="attr_display_animon_sigAttack_effect1" />
							<span name="attr_display_animon_sigAttack_effect1"></span>
						</div>
						<div>
							<h3>Effect 2:</h3>
							<input type="hidden" name="attr_display_animon_sigAttack_effect2" />
							<span name="attr_display_animon_sigAttack_effect2"></span>
						</div>
						<div>
							<h3>Effect 3:</h3>
							<input type="hidden" name="attr_display_animon_sigAttack_effect3" />
							<span name="attr_display_animon_sigAttack_effect3"></span>
						</div>
					</article>
					<article class="sheet-animon-quality">
						<h3>Qualities:</h3>
						<h3>Rank:</h3>
						<div>
							<h3>1.</h3>
							<input type="hidden" name="attr_display_animon_quality_1" />
							<span name="attr_display_animon_quality_1"></span>
						</div>
						<div>
							<input type="hidden" name="attr_display_animon_quality_1_rank" />
							<span name="attr_display_animon_quality_1_rank"></span>
						</div>
						<div>
							<h3>2.</h3>
							<input type="hidden" name="attr_display_animon_quality_2" />
							<span name="attr_display_animon_quality_2"></span>
						</div>
						<div>
							<input type="hidden" name="attr_display_animon_quality_2_rank" />
							<span name="attr_display_animon_quality_2_rank"></span>
						</div>
					</article>
				</div>
			</div>
			<button type="action" name="act_animon_evolve">→</button>
		</section>
	</div>

	<div class="sheet-animon">
		<section class="sheet-animon-preview sheet-animon-preview-fledgling">
			<div class="sheet-all-row">
				<article class="sheet-animon-preview">
					<h2 class="sheet-stage">Fledgling</h2>
				</article>
				<article>
					<h3>Name:</h3>
					<input type="text" name="attr_fledgling_animon_name" placeholder="Name" />
				</article>
				<article>
					<h3>Nature:</h3>
					<input type="text" name="attr_fledgling_animon_nature" placeholder="Nature" />
				</article>
				<article>
					<h3>Class:</h3>
					<input type="text" name="attr_fledgling_animon_class" placeholder="Class" />
				</article>
				<article>
					<h3>Element:</h3>
					<input type="text" name="attr_fledgling_animon_element" placeholder="Element" />
				</article>
			</div>
			<div class="sheet-fixed-width">
				<article class="sheet-animon-preview-fledgling">
					<h2>Stats</h2>
					<div>
						<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{fledgling_animon_name}}} {{rollName=Heart}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{fledgling_animon_heart} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
							<h3>H</h3>
						</button>
						<input type="number" name="attr_fledgling_animon_heart" value="2" />
					</div>
					<div>
						<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{fledgling_animon_name}}} {{rollName=Power}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{fledgling_animon_power} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
							<h3>P</h3>
						</button>
						<input type="number" name="attr_fledgling_animon_power" value="2" />
					</div>
					<div>
						<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{fledgling_animon_name}}} {{rollName=Agility}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{fledgling_animon_agility} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
							<h3>A</h3>
						</button>
						<input type="number" name="attr_fledgling_animon_agility" value="2" />
					</div>
					<div>
						<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{fledgling_animon_name}}} {{rollName=Brains}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{fledgling_animon_brains} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
							<h3>B</h3>
						</button>
						<input type="number" name="attr_fledgling_animon_brains" value="2" />
					</div>
				</article>
				<article>
					<h3>Max HP</h3>
					<input type="hidden" name="attr_fledgling_animon_hp" value="6" />
					<input type="hidden" name="attr_fledgling_animon_hp_max" value="6" />
					<span name="attr_fledgling_animon_hp_max"></span>
				</article>
				<article>
					<h3>Damage</h3>
					<input type="hidden" name="attr_fledgling_animon_damage" value="2" />
					<span name="attr_fledgling_animon_damage"></span>
				</article>
				<article class="sheet-animon-stats">
					<input type="hidden" name="attr_fledgling_animon_dodge" value="2" />
					<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{fledgling_animon_name}}} {{rollName=Dodge}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{fledgling_animon_dodge} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
						<h3>Dodge</h3>
						<span name="attr_fledgling_animon_dodge"></span>
					</button>
				</article>
				<article class="sheet-animon-stats">
					<input type="hidden" name="attr_fledgling_animon_initiative" value="2" />
					<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{fledgling_animon_name}}} {{rollName=Initiative}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{fledgling_animon_initiative} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
						<h3>Initiative</h3>
						<span name="attr_fledgling_animon_initiative"></span>
					</button>
				</article>
			</div>
			<input type="hidden" name="attr_fledgling_animon_sigAttack_name" value="/" />
			<input type="hidden" name="attr_fledgling_animon_sigAttack_rank" value="/" />
			<input type="hidden" name="attr_fledgling_animon_sigAttack_element" value="/" />
			<input type="hidden" name="attr_fledgling_animon_sigAttack_effect1" value="/" />
			<input type="hidden" name="attr_fledgling_animon_sigAttack_effect2" value="/" />
			<input type="hidden" name="attr_fledgling_animon_sigAttack_effect3" value="/" />
			<input type="hidden" name="attr_fledgling_animon_quality_1" value="/" />
			<input type="hidden" name="attr_fledgling_animon_quality_1_rank" value="/" />
			<input type="hidden" name="attr_fledgling_animon_quality_2" value="/" />
			<input type="hidden" name="attr_fledgling_animon_quality_2_rank" value="/" />
		</section>
		<section class="sheet-animon-preview">
			<div>
				<div class="sheet-flex-immutable">
					<article>
						<h2 class="sheet-stage">Basic</h2>
					</article>
					<div>
						<div>
							<article class="sheet-animon-stats">
								<h2>Stats</h2>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{basic_animon_name}}} {{rollName=Heart}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{basic_animon_heart} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Heart</h3>
									</button>
									<input type="number" name="attr_basic_animon_heart" value="3" />
								</div>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{basic_animon_name}}} {{rollName=Power}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{basic_animon_power} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Power</h3>
									</button>
									<input type="number" name="attr_basic_animon_power" value="3" />
								</div>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{basic_animon_name}}} {{rollName=Agility}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{basic_animon_agility} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Agility</h3>
									</button>
									<input type="number" name="attr_basic_animon_agility" value="3" />
								</div>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{basic_animon_name}}} {{rollName=Brains}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{basic_animon_brains} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Brains</h3>
									</button>
									<input type="number" name="attr_basic_animon_brains" value="3" />
								</div>
							</article>
						</div>
						<div class="sheet-animon-stats">
							<article>
								<h3>HP</h3>
								<div>
									<input type="hidden" name="attr_basic_animon_hp" value="8" />
									<input type="hidden" name="attr_basic_animon_hp_max" value="14" />
									<span name="attr_basic_animon_hp_max"></span>
								</div>
							</article>
							<article>
								<h3>Damage</h3>
								<div>
									<input type="hidden" name="attr_basic_animon_damage" value="6" />
									<span name="attr_basic_animon_damage"></span>
								</div>
							</article>
							<article>
								<input type="hidden" name="attr_basic_animon_dodge" value="3" />
								<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{basic_animon_name}}} {{rollName=Dodge}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{basic_animon_dodge} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
									<h3>Dodge</h3>
									<span name="attr_basic_animon_dodge"></span>
								</button>
							</article>
							<article>
								<input type="hidden" name="attr_basic_animon_initiative" value="3" />
								<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{basic_animon_name}}} {{rollName=Initiative}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{basic_animon_initiative} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
									<h3>Initiative</h3>
									<span name="attr_basic_animon_initiative"></span>
								</button>
							</article>
						</div>
					</div>
				</div>
				<div>
					<div class="sheet-animon-metas">
						<article>
							<h3>Name</h3>
							<input type="text" name="attr_basic_animon_name" placeholder="Name" />
						</article>
						<article>
							<h3>Nature</h3>
							<input type="text" name="attr_basic_animon_nature" placeholder="Nature" />
						</article>
						<div>
							<article>
								<h3>Class</h3>
								<input type="text" name="attr_basic_animon_class" placeholder="Class" />
							</article>
							<article>
								<h3>Element</h3>
								<input type="text" name="attr_basic_animon_element" placeholder="Element" />
							</article>
						</div>
					</div>
					<article class="sheet-animon-sigattack-table">
						<div style="border: 0;">
							<h2>Signature attack</h2>
						</div>
						<div>
							<h3>Name:</h3>
							<input type="text" name="attr_basic_animon_sigAttack_name" placeholder="Name" />
						</div>
						<div>
							<h3>Rank:</h3>
							<input type="number" name="attr_basic_animon_sigAttack_rank" value="0" />
						</div>
						<div>
							<h3>Element:</h3>
							<input type="text" name="attr_basic_animon_sigAttack_element" placeholder="Element" />
						</div>
						<div>
							<h3>Effect 1:</h3>
							<input type="text" name="attr_basic_animon_sigAttack_effect1" placeholder="Effect" />
						</div>
						<div>
							<h3>Effect 2:</h3>
							<input type="text" name="attr_basic_animon_sigAttack_effect2" placeholder="Effect" />
						</div>
						<div>
							<h3>Effect 3:</h3>
							<input type="text" name="attr_basic_animon_sigAttack_effect3" placeholder="Effect" />
						</div>
					</article>
					<article class="sheet-animon-quality">
						<h3>Qualities:</h3>
						<h3>Rank:</h3>
						<div>
							<h3>1.</h3>
							<input type="text" name="attr_basic_animon_quality_1" placeholder="Quality" />
						</div>
						<div>
							<input type="number" name="attr_basic_animon_quality_1_rank" value="1" />
						</div>
						<div>
							<h3>2.</h3>
							<input type="text" name="attr_basic_animon_quality_2" placeholder="Quality" />
						</div>
						<div>
							<input type="number" name="attr_basic_animon_quality_2_rank" value="1" />
						</div>
					</article>
				</div>
			</div>
		</section>
		<section class="sheet-animon-preview">
			<div>
				<div class="sheet-flex-immutable">
					<article>
						<h2 class="sheet-stage">Super</h2>
					</article>
					<div>
						<div>
							<article class="sheet-animon-stats">
								<h2>Stats</h2>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{super_animon_name}}} {{rollName=Heart}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{super_animon_heart} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Heart</h3>
									</button>
									<input type="number" name="attr_super_animon_heart" value="4" />
								</div>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{super_animon_name}}} {{rollName=Power}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{super_animon_power} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Power</h3>
									</button>
									<input type="number" name="attr_super_animon_power" value="4" />
								</div>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{super_animon_name}}} {{rollName=Agility}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{super_animon_agility} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Agility</h3>
									</button>
									<input type="number" name="attr_super_animon_agility" value="3" />
								</div>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{super_animon_name}}} {{rollName=Brains}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{super_animon_brains} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Brains</h3>
									</button>
									<input type="number" name="attr_super_animon_brains" value="3" />
								</div>
							</article>
						</div>
						<div class="sheet-animon-stats">
							<article>
								<h3>HP</h3>
								<div>
									<input type="hidden" name="attr_super_animon_hp" value="26" />
									<input type="hidden" name="attr_super_animon_hp_max" value="26" />
									<span name="attr_super_animon_hp_max"></span>
								</div>
							</article>
							<article>
								<h3>Damage</h3>
								<div>
									<input type="hidden" name="attr_super_animon_damage" value="8" />
									<span name="attr_super_animon_damage"></span>
								</div>
							</article>
							<article>
								<input type="hidden" name="attr_super_animon_dodge" value="3" />
								<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{super_animon_name}}} {{rollName=Dodge}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{super_animon_dodge} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
									<h3>Dodge</h3>
									<span name="attr_super_animon_dodge"></span>
								</button>
							</article>
							<article>
								<input type="hidden" name="attr_super_animon_initiative" value="3" />
								<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{super_animon_name}}} {{rollName=Initiative}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{super_animon_initiative} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
									<h3>Initiative</h3>
									<span name="attr_super_animon_initiative"></span>
								</button>
							</article>
						</div>
					</div>
				</div>
				<div>
					<div class="sheet-animon-metas">
						<article>
							<h3>Name</h3>
							<input type="text" name="attr_super_animon_name" placeholder="Name" />
						</article>
						<article>
							<h3>Nature</h3>
							<input type="text" name="attr_super_animon_nature" placeholder="Nature" />
						</article>
						<div>
							<article>
								<h3>Class</h3>
								<input type="text" name="attr_super_animon_class" placeholder="Class" />
							</article>
							<article>
								<h3>Element</h3>
								<input type="text" name="attr_super_animon_element" placeholder="Element" />
							</article>
						</div>
					</div>
					<article class="sheet-animon-sigattack-table">
						<div style="border: 0;">
							<h2>Signature attack</h2>
						</div>
						<div>
							<h3>Name:</h3>
							<input type="text" name="attr_super_animon_sigAttack_name" placeholder="Name" />
						</div>
						<div>
							<h3>Rank:</h3>
							<input type="number" name="attr_super_animon_sigAttack_rank" value="0" />
						</div>
						<div>
							<h3>Element:</h3>
							<input type="text" name="attr_super_animon_sigAttack_element" placeholder="Element" />
						</div>
						<div>
							<h3>Effect 1:</h3>
							<input type="text" name="attr_super_animon_sigAttack_effect1" placeholder="Effect" />
						</div>
						<div>
							<h3>Effect 2:</h3>
							<input type="text" name="attr_super_animon_sigAttack_effect2" placeholder="Effect" />
						</div>
						<div>
							<h3>Effect 3:</h3>
							<input type="text" name="attr_super_animon_sigAttack_effect3" placeholder="Effect" />
						</div>
					</article>
					<article class="sheet-animon-quality">
						<h3>Qualities:</h3>
						<h3>Rank:</h3>
						<div>
							<h3>1.</h3>
							<input type="text" name="attr_super_animon_quality_1" placeholder="Quality" />
						</div>
						<div>
							<input type="number" name="attr_super_animon_quality_1_rank" value="1" />
						</div>
						<div>
							<h3>2.</h3>
							<input type="text" name="attr_super_animon_quality_2" placeholder="Quality" />
						</div>
						<div>
							<input type="number" name="attr_super_animon_quality_2_rank" value="1" />
						</div>
					</article>
				</div>
			</div>
		</section>
		<section class="sheet-animon-preview">
			<div>
				<div class="sheet-flex-immutable">
					<article>
						<h2 class="sheet-stage">Ultra</h2>
					</article>
					<div>
						<div>
							<article class="sheet-animon-stats">
								<h2>Stats</h2>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{ultra_animon_name}}} {{rollName=Heart}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{ultra_animon_heart} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Heart</h3>
									</button>
									<input type="number" name="attr_ultra_animon_heart" value="4" />
								</div>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{ultra_animon_name}}} {{rollName=Power}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{ultra_animon_power} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Power</h3>
									</button>
									<input type="number" name="attr_ultra_animon_power" value="4" />
								</div>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{ultra_animon_name}}} {{rollName=Agility}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{ultra_animon_agility} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Agility</h3>
									</button>
									<input type="number" name="attr_ultra_animon_agility" value="4" />
								</div>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{ultra_animon_name}}} {{rollName=Brains}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{ultra_animon_brains} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Brains</h3>
									</button>
									<input type="number" name="attr_ultra_animon_brains" value="4" />
								</div>
							</article>
						</div>
						<div class="sheet-animon-stats">
							<article>
								<h3>HP</h3>
								<div>
									<input type="hidden" name="attr_ultra_animon_hp" value="35" />
									<input type="hidden" name="attr_ultra_animon_hp_max" value="35" />
									<span name="attr_ultra_animon_hp_max"></span>
								</div>
							</article>
							<article>
								<h3>Damage</h3>
								<div>
									<input type="hidden" name="attr_ultra_animon_damage" value="12" />
									<span name="attr_ultra_animon_damage"></span>
								</div>
							</article>
							<article>
								<input type="hidden" name="attr_ultra_animon_dodge" value="4" />
								<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{ultra_animon_name}}} {{rollName=Dodge}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{ultra_animon_dodge} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
									<h3>Dodge</h3>
									<span name="attr_ultra_animon_dodge"></span>
								</button>
							</article>
							<article>
								<input type="hidden" name="attr_ultra_animon_initiative" value="4" />
								<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{ultra_animon_name}}} {{rollName=Initiative}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{ultra_animon_initiative} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
									<h3>Initiative</h3>
									<span name="attr_ultra_animon_initiative"></span>
								</button>
							</article>
						</div>
					</div>
				</div>
				<div>
					<div class="sheet-animon-metas">
						<article>
							<h3>Name</h3>
							<input type="text" name="attr_ultra_animon_name" placeholder="Name" />
						</article>
						<article>
							<h3>Nature</h3>
							<input type="text" name="attr_ultra_animon_nature" placeholder="Nature" />
						</article>
						<div>
							<article>
								<h3>Class</h3>
								<input type="text" name="attr_ultra_animon_class" placeholder="Class" />
							</article>
							<article>
								<h3>Element</h3>
								<input type="text" name="attr_ultra_animon_element" placeholder="Element" />
							</article>
						</div>
					</div>
					<article class="sheet-animon-sigattack-table">
						<div style="border: 0;">
							<h2>Signature attack</h2>
						</div>
						<div>
							<h3>Name:</h3>
							<input type="text" name="attr_ultra_animon_sigAttack_name" placeholder="Name" />
						</div>
						<div>
							<h3>Rank:</h3>
							<input type="number" name="attr_ultra_animon_sigAttack_rank" value="0" />
						</div>
						<div>
							<h3>Element:</h3>
							<input type="text" name="attr_ultra_animon_sigAttack_element" placeholder="Element" />
						</div>
						<div>
							<h3>Effect 1:</h3>
							<input type="text" name="attr_ultra_animon_sigAttack_effect1" placeholder="Effect" />
						</div>
						<div>
							<h3>Effect 2:</h3>
							<input type="text" name="attr_ultra_animon_sigAttack_effect2" placeholder="Effect" />
						</div>
						<div>
							<h3>Effect 3:</h3>
							<input type="text" name="attr_ultra_animon_sigAttack_effect3" placeholder="Effect" />
						</div>
					</article>
					<article class="sheet-animon-quality">
						<h3>Qualities:</h3>
						<h3>Rank:</h3>
						<div>
							<h3>1.</h3>
							<input type="text" name="attr_ultra_animon_quality_1" placeholder="Quality" />
						</div>
						<div>
							<input type="number" name="attr_ultra_animon_quality_1_rank" value="1" />
						</div>
						<div>
							<h3>2.</h3>
							<input type="text" name="attr_ultra_animon_quality_2" placeholder="Quality" />
						</div>
						<div>
							<input type="number" name="attr_ultra_animon_quality_2_rank" value="1" />
						</div>
					</article>
				</div>
		</section>
		<section class="sheet-animon-preview">
			<div>
				<div class="sheet-flex-immutable">
					<article>
						<h2 class="sheet-stage">Giga</h2>
					</article>
					<div>
						<div>
							<article class="sheet-animon-stats">
								<h2>Stats</h2>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{giga_animon_name}}} {{rollName=Heart}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{giga_animon_heart} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Heart</h3>
									</button>
									<input type="number" name="attr_giga_animon_heart" value="5" />
								</div>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{giga_animon_name}}} {{rollName=Power}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{giga_animon_power} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Power</h3>
									</button>
									<input type="number" name="attr_giga_animon_power" value="5" />
								</div>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{giga_animon_name}}} {{rollName=Agility}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{giga_animon_agility} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Agility</h3>
									</button>
									<input type="number" name="attr_giga_animon_agility" value="4" />
								</div>
								<div>
									<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{giga_animon_name}}} {{rollName=Brains}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{giga_animon_brains} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
										<h3>Brains</h3>
									</button>
									<input type="number" name="attr_giga_animon_brains" value="4" />
								</div>
							</article>
						</div>
						<div class="sheet-animon-stats">
							<article>
								<h3>HP</h3>
								<div>
									<input type="hidden" name="attr_giga_animon_hp" value="50" />
									<input type="hidden" name="attr_giga_animon_hp_max" value="50" />
									<span name="attr_giga_animon_hp_max"></span>
								</div>
							</article>
							<article>
								<h3>Damage</h3>
								<div>
									<input type="hidden" name="attr_giga_animon_damage" value="20" />
									<span name="attr_giga_animon_damage"></span>
								</div>
							</article>
							<article>
								<input type="hidden" name="attr_giga_animon_dodge" value="4" />
								<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{giga_animon_name}}} {{rollName=Dodge}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{giga_animon_dodge} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
									<h3>Dodge</h3>
									<span name="attr_giga_animon_dodge"></span>
								</button>
							</article>
							<article>
								<input type="hidden" name="attr_giga_animon_initiative" value="4" />
								<button type="roll" value="@{rollWhisperType} &{template:animon} {{animonName=@{giga_animon_name}}} {{rollName=Initiative}} {{kidName=@{character_name}}} {{rollTotal=[[ [[@{giga_animon_initiative} + @{rollPopup_ask}]]d6>@{rollModifier_ask}]]}}">
									<h3>Initiative</h3>
									<span name="attr_giga_animon_initiative"></span>
								</button>
							</article>
						</div>
					</div>
				</div>
				<div>
					<div class="sheet-animon-metas">
						<article>
							<h3>Name</h3>
							<input type="text" name="attr_giga_animon_name" placeholder="Name" />
						</article>
						<article>
							<h3>Nature</h3>
							<input type="text" name="attr_giga_animon_nature" placeholder="Nature" />
						</article>
						<div>
							<article>
								<h3>Class</h3>
								<input type="text" name="attr_giga_animon_class" placeholder="Class" />
							</article>
							<article>
								<h3>Element</h3>
								<input type="text" name="attr_giga_animon_element" placeholder="Element" />
							</article>
						</div>
					</div>
					<article class="sheet-animon-sigattack-table">
						<div style="border: 0;">
							<h2>Signature attack</h2>
						</div>
						<div>
							<h3>Name:</h3>
							<input type="text" name="attr_giga_animon_sigAttack_name" placeholder="Name" />
						</div>
						<div>
							<h3>Rank:</h3>
							<input type="number" name="attr_giga_animon_sigAttack_rank" value="0" />
						</div>
						<div>
							<h3>Element:</h3>
							<input type="text" name="attr_giga_animon_sigAttack_element" placeholder="Element" />
						</div>
						<div>
							<h3>Effect 1:</h3>
							<input type="text" name="attr_giga_animon_sigAttack_effect1" placeholder="Effect" />
						</div>
						<div>
							<h3>Effect 2:</h3>
							<input type="text" name="attr_giga_animon_sigAttack_effect2" placeholder="Effect" />
						</div>
						<div>
							<h3>Effect 3:</h3>
							<input type="text" name="attr_giga_animon_sigAttack_effect3" placeholder="Effect" />
						</div>
					</article>
					<article class="sheet-animon-quality">
						<h3>Qualities:</h3>
						<h3>Rank:</h3>
						<div>
							<h3>1.</h3>
							<input type="text" name="attr_giga_animon_quality_1" placeholder="Quality" />
						</div>
						<div>
							<input type="number" name="attr_giga_animon_quality_1_rank" value="1" />
						</div>
						<div>
							<h3>2.</h3>
							<input type="text" name="attr_giga_animon_quality_2" placeholder="Quality" />
						</div>
						<div>
							<input type="number" name="attr_giga_animon_quality_2_rank" value="1" />
						</div>
					</article>
				</div>
		</section>
	</div>

	<div class="sheet-option">
		<section class="sheet-option-roll">
			<article>
				<h2>Roll type</h2>
				<div>
					<h3>Roll visibility:</h3>
					<select name="attr_rollWhisperType">
						<option value="" selected><span>Show rolls</span></option>
						<option value="?{Whisper?|Public Roll,|Whisper Roll,/w gm }"><span>Ask each time</span></option>
						<option value="/w gm"><span>Always whisper</span></option>
					</select>
				</div>
			</article>
			<article>
				<input type="hidden" name="attr_rollPopup_ask" value="?{Bonus dice|0}" />
				<input type="hidden" name="attr_rollModifier_ask" value="?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}" />
				<h2>Roll popup</h2>
				<div>
					<h3>Hide</h3>
					<div style="display: flex;">
						<input type="checkbox" name="attr_rollPopup" />
					</div>
					<h3>Default bonus dice</h3>
					<input type="number" name="attr_defaultBonusDice" value="0" />
					<h3>Default modifier</h3>
					<select name="attr_rollModifier">
						<option value="6">Double Setback</option>
						<option value="5">Setback</option>
						<option value="4" selected>Normal</option>
						<option value="3">Boost</option>
						<option value="2">Double Boost</option>
					</select>
				</div>
			</article>
		</section>
		<section>
			<article class="sheet-animon-modifiers">
				<h3>/</h3>
				<h3>Fledgling</h3>
				<h3>Basic</h3>
				<h3>Super</h3>
				<h3>Ultra</h3>
				<h3>Giga</h3>

				<h3>Base HP</h3>
				<input type="number" name="attr_HP_fledgling" value="0" />
				<input type="number" name="attr_HP_basic" value="5" />
				<input type="number" name="attr_HP_super" value="10" />
				<input type="number" name="attr_HP_ultra" value="15" />
				<input type="number" name="attr_HP_giga" value="20" />

				<h3>HP Mult.</h3>
				<input type="number" name="attr_HPMultiplier_fledgling" value="3" />
				<input type="number" name="attr_HPMultiplier_basic" value="3" />
				<input type="number" name="attr_HPMultiplier_super" value="4" />
				<input type="number" name="attr_HPMultiplier_ultra" value="5" />
				<input type="number" name="attr_HPMultiplier_giga" value="6" />

				<h3>Base Dmg.</h3>
				<input type="number" name="attr_Damage_fledgling" value="0" />
				<input type="number" name="attr_Damage_basic" value="0" />
				<input type="number" name="attr_Damage_super" value="0" />
				<input type="number" name="attr_Damage_ultra" value="0" />
				<input type="number" name="attr_Damage_giga" value="0" />

				<h3>Dmg. Mult.</h3>
				<input type="number" name="attr_DamageMultiplier_fledgling" value="1" />
				<input type="number" name="attr_DamageMultiplier_basic" value="2" />
				<input type="number" name="attr_DamageMultiplier_super" value="2" />
				<input type="number" name="attr_DamageMultiplier_ultra" value="3" />
				<input type="number" name="attr_DamageMultiplier_giga" value="4" />

				<h3>Dodge</h3>
				<input type="number" name="attr_Dodge_fledgling" value="0" />
				<input type="number" name="attr_Dodge_basic" value="0" />
				<input type="number" name="attr_Dodge_super" value="0" />
				<input type="number" name="attr_Dodge_ultra" value="0" />
				<input type="number" name="attr_Dodge_giga" value="0" />

				<h3>Initiative</h3>
				<input type="number" name="attr_Initiative_fledgling" value="0" />
				<input type="number" name="attr_Initiative_basic" value="0" />
				<input type="number" name="attr_Initiative_super" value="0" />
				<input type="number" name="attr_Initiative_ultra" value="0" />
				<input type="number" name="attr_Initiative_giga" value="0" />

				<h3>Sig. Attack</h3>
				<input type="number" name="attr_SigAttack_fledgling" value="0" />
				<input type="number" name="attr_SigAttack_basic" value="0" />
				<input type="number" name="attr_SigAttack_super" value="0" />
				<input type="number" name="attr_SigAttack_ultra" value="0" />
				<input type="number" name="attr_SigAttack_giga" value="0" />
			</article>
		</section>
	</div>
</div>

<!-- Rolltemplates -->

<rolltemplate class="sheet-rolltemplate-kid">
	<div class="sheet-template-container">
		<div class="sheet-template-header">
			<h2>{{kidName}} {{rollName}}</h2>
		</div>
		<div class="sheet-template-contents">
			<div class="sheet-template-row">
				<span>Total = </span>{{rollTotal}}
			</div>
		</div>
	</div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-animon">
	<div class="sheet-template-container">
		<div class="sheet-template-header">
			<h2>{{animonName}} {{rollName}}</h2>
			<h3>{{kidName}}</h3>
		</div>
		<div class="sheet-template-contents">
			<div class="sheet-template-row">
				<span>Total = </span>{{rollTotal}}
			</div>
		</div>
	</div>
</rolltemplate>

</main>

<script type="text/worker">
	const buttonList = ["character", "action", "animon", "option"];
	buttonList.forEach(button => {
		on(`clicked:${button}`, function() {
			setAttrs({sheetTab: button});
		});
	});

	const animonLevels = ["fledgling", "basic", "super", "ultra", "giga"];
	const maxAttr = [3, 4, 5, 6, 6];
	const maxValues = {
		maxAttr: [3, 4, 5, 6, 6],
		hp: [0, 5, 10, 15, 20],
		hpMult: [3, 3, 4, 5, 6],
		damage: [1, 2, 2, 3, 4],
	};

	on("clicked:animon_evolve clicked:animon_devolve", function(eventInfo) {
		const delta = eventInfo.htmlAttributes.name === "act_animon_evolve" ? 1 : -1;
		getAttrs(["display_animon_evo"], function(values) {
			var output = {};
			const evo = values["display_animon_evo"];
			const newEvo = (animonLevels.indexOf(evo) + delta + animonLevels.length) % animonLevels.length;
			const evoStage = animonLevels[newEvo];

			output["display_animon_evo"] = evoStage;

			setAttrs(output, {silent: false});
		});
	});

	on("change:display_animon_evo", function(eventInfo) {
		const evoStage = eventInfo.newValue;

		var attrs_to_get = [
			`${evoStage}_animon_name`,
			`${evoStage}_animon_nature`,
			`${evoStage}_animon_class`,
			`${evoStage}_animon_element`,
			`${evoStage}_animon_heart`,
			`${evoStage}_animon_power`,
			`${evoStage}_animon_agility`,
			`${evoStage}_animon_brains`,
			`${evoStage}_animon_hp`,
			`${evoStage}_animon_damage`,
			`${evoStage}_animon_dodge`,
			`${evoStage}_animon_initiative`,
			`${evoStage}_animon_sigAttack_name`,
			`${evoStage}_animon_sigAttack_rank`,
			`${evoStage}_animon_sigAttack_element`,
			`${evoStage}_animon_sigAttack_effect1`,
			`${evoStage}_animon_sigAttack_effect2`,
			`${evoStage}_animon_sigAttack_effect3`,
			`${evoStage}_animon_quality_1`,
			`${evoStage}_animon_quality_1_rank`,
			`${evoStage}_animon_quality_2`,
			`${evoStage}_animon_quality_2_rank`
		];

		getAttrs(attrs_to_get, function(values) {
			var output = {};

			const name = values[`${evoStage}_animon_name`];
			const nature = values[`${evoStage}_animon_nature`];
			const animonClass = values[`${evoStage}_animon_class`];
			const element = values[`${evoStage}_animon_element`];
			const heart = values[`${evoStage}_animon_heart`];
			const power = values[`${evoStage}_animon_power`];
			const agility = values[`${evoStage}_animon_agility`];
			const brains = values[`${evoStage}_animon_brains`];
			const hp = values[`${evoStage}_animon_hp`];
			const damage = values[`${evoStage}_animon_damage`];
			const dodge = values[`${evoStage}_animon_dodge`];
			const initiative = values[`${evoStage}_animon_initiative`];
			const sigAttackName = values[`${evoStage}_animon_sigAttack_name`];
			const sigAttackRank = values[`${evoStage}_animon_sigAttack_rank`];
			const sigAttackElement = values[`${evoStage}_animon_sigAttack_element`];
			const sigAttackEffect1 = values[`${evoStage}_animon_sigAttack_effect1`];
			const sigAttackEffect2 = values[`${evoStage}_animon_sigAttack_effect2`];
			const sigAttackEffect3 = values[`${evoStage}_animon_sigAttack_effect3`];
			const quality1 = values[`${evoStage}_animon_quality_1`];
			const quality1Rank = values[`${evoStage}_animon_quality_1_rank`];
			const quality2 = values[`${evoStage}_animon_quality_2`];
			const quality2Rank = values[`${evoStage}_animon_quality_2_rank`];

			output["display_animon_name"] = name;
			output["display_animon_nature"] = nature;
			output["display_animon_class"] = animonClass;
			output["display_animon_element"] = element;
			output["display_animon_heart"] = heart;
			output["display_animon_power"] = power;
			output["display_animon_agility"] = agility;
			output["display_animon_brains"] = brains;
			output["display_animon_hp"] = hp;
			output["display_animon_damage"] = damage;
			output["display_animon_dodge"] = dodge;
			output["display_animon_initiative"] = initiative;
			output["display_animon_sigAttack_name"] = sigAttackName;
			output["display_animon_sigAttack_rank"] = sigAttackRank;
			output["display_animon_sigAttack_element"] = sigAttackElement;
			output["display_animon_sigAttack_effect1"] = sigAttackEffect1;
			output["display_animon_sigAttack_effect2"] = sigAttackEffect2;
			output["display_animon_sigAttack_effect3"] = sigAttackEffect3;
			output["display_animon_quality_1"] = quality1;
			output["display_animon_quality_1_rank"] = quality1Rank;
			output["display_animon_quality_2"] = quality2;
			output["display_animon_quality_2_rank"] = quality2Rank;

			setAttrs(output, {silent: false});
		});
	});

	on("change:display_animon_brains", function(eventInfo) {
		const oldBrains = parseInt(eventInfo.previousValue);
		const newBrains = parseInt(eventInfo.newValue);

		getAttrs(["sigAttackUses"], function(values) {
			var output = {};

			const sigAttackUses = parseInt(values["sigAttackUses"]);
			const missingUses = oldBrains - sigAttackUses;
			const newUses = newBrains - missingUses;

			output["sigAttackUses"] = newUses;
			output["sigAttackUses_max"] = newBrains;

			setAttrs(output, {silent: true});
		});
	});

	animonLevels.forEach((level, index) => {
		on(`change:${level}_animon_heart change:HP_${level} change:HPMultiplier_${level}`, function(eventInfo) {
			getAttrs([`${level}_animon_heart`, `HP_${level}`, `HPMultiplier_${level}`, `${level}_animon_hp`], function(values) {
				var output = {};

				const heart = Math.max(1, Math.min(maxAttr[index], parseInt(values[`${level}_animon_heart`])));

				const bonusHp = parseInt(values[`HP_${level}`]);
				const heartMult = parseInt(values[`HPMultiplier_${level}`]);
				const currentHP = parseInt(values[`${level}_animon_hp`]);

				const maxHp = bonusHp + heart * heartMult;
				const newHp = Math.min(maxHp, currentHP);

				output[`${level}_animon_hp_max`] = maxHp;
				output[`${level}_animon_hp`] = newHp;

				setAttrs(output, {silent: false});
			});
		});

		on(`change:${level}_animon_power change:Damage_${level} change:DamageMultiplier_${level}`, function(eventInfo) {
			getAttrs([`${level}_animon_power`, `Damage_${level}`, `DamageMultiplier_${level}`], function(values) {
				const power = Math.max(1, Math.min(maxAttr[index], parseInt(values[`${level}_animon_power`])));
				const bonusDamage = parseInt(values[`Damage_${level}`]);
				const powerMult = parseInt(values[`DamageMultiplier_${level}`]);
				setAttrs({
					[`${level}_animon_power`]: power,
					[`${level}_animon_damage`]: bonusDamage + power * powerMult
				}, {silent: true});
			});
		});

		on(`change:${level}_animon_agility change:Dodge_${level}`, function(eventInfo) {
			getAttrs([`${level}_animon_agility`, `Dodge_${level}`], function(values) {
				const agility = Math.max(1, Math.min(maxAttr[index], parseInt(values[`${level}_animon_agility`])));
				const bonusDodge = parseInt(values[`Dodge_${level}`]);
				setAttrs({
					[`${level}_animon_agility`]: agility,
					[`${level}_animon_dodge`]: bonusDodge + agility
				}, {silent: true});
			});
		});

		on(`change:${level}_animon_brains change:Initiative_${level}`, function(eventInfo) {
			getAttrs([`${level}_animon_brains`, `Initiative_${level}`], function(values) {
				const brains = Math.max(1, Math.min(maxAttr[index], parseInt(values[`${level}_animon_brains`])));
				const bonusInitiative = parseInt(values[`Initiative_${level}`]);
				setAttrs({
					[`${level}_animon_brains`]: brains,
					[`${level}_animon_initiative`]: bonusInitiative + brains
				}, {silent: true});
			});
		});

		on(`change:${level}_animon_hp`, function(eventInfo) {
			console.log(eventInfo);
			getAttrs(["display_animon_evo"], function(values) {
				const evoStage = values["display_animon_evo"];

				if (evoStage === level) {
					setAttrs({[`display_animon_hp`]: eventInfo.newValue || 0}, {silent: true});
				}
			});
		});

		const attrs_to_get = [
			`${level}_animon_name`,
			`${level}_animon_nature`,
			`${level}_animon_class`,
			`${level}_animon_element`,
			`${level}_animon_heart`,
			`${level}_animon_power`,
			`${level}_animon_agility`,
			`${level}_animon_brains`,
			`${level}_animon_hp`,
			`${level}_animon_damage`,
			`${level}_animon_dodge`,
			`${level}_animon_initiative`,
			`${level}_animon_sigAttack_name`,
			`${level}_animon_sigAttack_rank`,
			`${level}_animon_sigAttack_element`,
			`${level}_animon_sigAttack_effect1`,
			`${level}_animon_sigAttack_effect2`,
			`${level}_animon_sigAttack_effect3`,
			`${level}_animon_quality_1`,
			`${level}_animon_quality_1_rank`,
			`${level}_animon_quality_2`,
			`${level}_animon_quality_2_rank`
		];
		on(attrs_to_get.map(attr => `change:${attr}`).join(" "), function(eventInfo) {
			const attr_to_get = eventInfo.sourceAttribute;
			getAttrs([attr_to_get], function(values) {
				var output = {};
				var attr_to_set = attr_to_get.replace(level, "display");
				output[attr_to_set] = values[attr_to_get];
				setAttrs(output, {silent: true});
			});
		});
	});

	on("change:bondLevel", function(eventInfo) {
		var output = {};

		const bondLevel = parseInt(eventInfo.newValue);
		const bondPointsMax = 5 + bondLevel;
		const staminaMax = 9 + bondLevel;

		output["bondPoints_max"] = bondPointsMax;
		output["stamina_max"] = staminaMax;

		setAttrs(output, {silent: true});
	});

	on("clicked:animon_harm clicked:animon_heal", function(eventInfo) {
		const mod = eventInfo.htmlAttributes.name === "act_animon_harm" ? -1 : 1;
		getAttrs(["display_animon_evo"], function(values) {
			const evoStage = values["display_animon_evo"];
			const attrs_to_get = [`${evoStage}_animon_hp`, `${evoStage}_animon_hp_max`];
			getAttrs(attrs_to_get, function(values) {
				var output = {};

				const hp = parseInt(values[attrs_to_get[0]]);
				const maxHp = parseInt(values[attrs_to_get[1]]);
				const newHp = Math.max(0, Math.min(hp + mod, maxHp));

				output[`${evoStage}_animon_hp`] = newHp;

				setAttrs(output, {silent: false});
			});
		});
	});

	on("change:rollPopup", function(eventInfo) {
		const isHidden = eventInfo.newValue === "on";
		const attrs_to_get = ["defaultBonusDice", "rollModifier"];
		getAttrs(attrs_to_get, function(values) {
			var output = {};
			const bonusDice = parseInt(values["defaultBonusDice"]);
			const roll_modifier = parseInt(values["rollModifier"]);

			const ask = isHidden ? `${bonusDice}` : `?{Bonus dice|${bonusDice}}`;
			const modifier = isHidden ? `${roll_modifier}` : `?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}`;

			output["rollPopup_ask"] = ask;
			output["rollModifier_ask"] = modifier;

			setAttrs(output, {silent: true});
		});
	});

	on("change:defaultBonusDice", function(eventInfo) {
		console.log(eventInfo);
		const bonusDice = parseInt(eventInfo.newValue || 0);
		const attrs_to_get = ["rollPopup"];
		getAttrs(attrs_to_get, function(values) {
			var output = {};

			const ask = values["rollPopup"] === "on" ? `${bonusDice}` : `?{Bonus dice|${bonusDice}}`;

			output["rollPopup_ask"] = ask;
			console.log(output);

			setAttrs(output, {silent: true});
		});
	});

	on("change:rollModifier", function(eventInfo) {
		console.log(eventInfo);
		const modifier = parseInt(eventInfo.newValue || 4);
		const attrs_to_get = ["rollPopup"];
		getAttrs(attrs_to_get, function(values) {
			var output = {};

			const ask = values["rollPopup"] === "on" ? `${modifier}` : `?{Modifier|Normal,4|Double Setback,6|Setback,5|Boost,3|Double Boost,2}`;

			output["rollModifier_ask"] = ask;
			console.log(output);

			setAttrs(output, {silent: true});
		});
	});
</script>

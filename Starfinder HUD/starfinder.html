<div class='starfinder'>
    <input hidden='true' type='text' title='@{npc_init}' name='attr_npc_init' value=''>
    <input hidden='true' type='number' title='@{initiative_npc}' name='attr_initiative_npc'>
    <input hidden='true' type='number' title='@{bab}' name='attr_bab' value='0'>
    <div class='name-container'>
        <img class='header-image' src='https://kurohyou.github.io/Starfinder-Character-Sheet/Starfinder-HUD-Logo-beta.png'>
    </div>
    <div class='nav'>
        <input class='pc' type='radio' title='@{sheet_type_nav}' title='@{sheet_type_nav}' name='attr_sheet_type_nav' value='pc' checked='checked' hidden='true'>
        <input class='npc' type='radio' title='@{sheet_type_nav}' name='attr_sheet_type_nav' value='npc' hidden='true'>
        <input class='ship' type='radio' title='@{sheet_type_nav}' name='attr_sheet_type_nav' value='ship' hidden='true'>
        <div class='pc container'>
            <input class='is-not-caster' title='@{is_caster}' name='attr_is_caster' type='radio' value='0' hidden='true' checked='checked'>
            <label class="tab-button core"><input class="tab-button core" type="radio" title='@{tab_select}' name="attr_tab_select" value="core" checked="checked" hidden='true'><span data-i18n='core'>CORE</span></label>
            <input class='is-caster' title='@{is_caster}' name='attr_is_caster' type='radio' value='1' hidden='true'>
            <label class="tab-button spells"><input class="tab-button spells" type="radio" title='@{tab_select}' name="attr_tab_select" value="spells" hidden='true'><span data-i18n='spells'>SPELLS</span></label>
        </div>
        <div class='npc container'>
            <label class="tab-button npc"><input class="tab-button npc" type="radio" title='@{tab_select}' name="attr_tab_select" value="npc" checked="checked" hidden='true'><span title='@{character_name}' name='attr_character_name'></span></label>
        </div>
        <div class='ship container'>
            <label class="tab-button ship"><input class="tab-button ship" type="radio" title='@{tab_select}' name="attr_tab_select" value="ship" checked="checked" hidden='true'><span title='@{character_name}' name='attr_character_name'></span></label>
        </div>
        <label class="tab-button options"><input class="tab-button options" type="radio" title='@{tab_select}' name="attr_tab_select" value="options" hidden='true'><span class='pictos'>y</span></label>
    </div>
    <!-- Toggles -->
    <input class="container_toggle pc" title='@{npcship_toggle}' name="attr_npcship_toggle" type="radio" hidden='true' value="pc">
    <input class="container_toggle npc" title='@{npcship_toggle}' name="attr_npcship_toggle" type="radio" hidden='true' value="npc">
    <input class="container_toggle ship" title='@{npcship_toggle}' name="attr_npcship_toggle" type="radio" hidden='true' value="ship">
    <input class="container_toggle settings" title='@{npcship_toggle}' name="attr_npcship_toggle" type="radio" hidden='true' value="settings" checked='checked'>
    <!-- Containers -->
    <div class='container settings'>
        <div class='section-container type-container'>
            <h1 class='section label' data-i18n='comms'>COMMS</h1>
            <div class='section always-glow border left'></div>
            <div class='section always-glow border top'></div>
            <div class='section always-glow border right'></div>
            <div class='section always-glow border bottom-left corner'></div>
            <div class='section always-glow border top-right corner'></div>
            <div class='section-container'>
                <div class='gutter'></div>
                <div class='row'>
                    <span class='label' data-i18n='rolls-are'>ROLLS ARE</span>
                    <label class='label'><input type='radio' title='@{whisper_state}' name='attr_whisper_state' value='' checked='checked'> <span class='label' data-i18n='public'>PUBLIC</span></label>
                    <label class='label'><input type='radio' title='@{whisper_state}' name='attr_whisper_state' value='/w gm'> <span class='label' data-i18n='private'>PRIVATE</span></label>
                </div>
                <div class='gutter'></div>
            </div>
            <div class='attribute-container always-glow border left'></div>
            <div class='attribute-container always-glow border top'></div>
            <div class='attribute-container always-glow border right'></div>
            <div class='attribute-container always-glow border bottom'></div>
            <div class='attribute-container always-glow border bottom-left corner'></div>
            <div class='attribute-container always-glow border top-right corner'></div>
        </div>
        <div class='section-container house-container'>
            <h1 class='section label' data-i18n='display-mode'>DISPLAY MODE</h1>
            <div class='section always-glow border left'></div>
            <div class='section always-glow border top'></div>
            <div class='section always-glow border right'></div>
            <div class='section always-glow border bottom-left corner'></div>
            <div class='section always-glow border top-right corner'></div>
            <div class='section-container'>
                <div class='gutter'></div>
                <div class='row'>
                    <label><input type='radio' title='@{sheet_type}' name='attr_sheet_type' value='pc' checked='checked'> <span class='label' data-i18n='pc' >PC</span></label>
                    <label><input type='radio' title='@{sheet_type}' name='attr_sheet_type' value='npc'> <span class='label' data-i18n='npc'>NPC</span></label>
                    <label><input type='radio' title='@{sheet_type}' name='attr_sheet_type' value='ship'> <span class='label' data-i18n='ship'>SHIP</span></label>
                </div>
                <div class='row pcrow pc'>
                    <label><input type='checkbox' title='@{drone}' name='attr_drone' value='1'><span class='label' data-i18n='drone'>DRONE</span></label>
                </div>
                <div class='gutter'></div>
            </div>
            <div class='attribute-container always-glow border left'></div>
            <div class='attribute-container always-glow border top'></div>
            <div class='attribute-container always-glow border right'></div>
            <div class='attribute-container always-glow border bottom'></div>
            <div class='attribute-container always-glow border bottom-left corner'></div>
            <div class='attribute-container always-glow border top-right corner'></div>
        </div>
        <div class='section-container house-container'>
            <h1 class='section label' data-i18n='house-rules'>HOUSE RULES</h1>
            <div class='section always-glow border left'></div>
            <div class='section always-glow border top'></div>
            <div class='section always-glow border right'></div>
            <div class='section always-glow border bottom-left corner'></div>
            <div class='section always-glow border top-right corner'></div>
            <div class='section-container'>
                <div class='gutter'></div>
                <div class='row'>
                    <span class='label' data-i18n='resolve'>RESOLVE</span>
                    <label><input type='radio' title='@{resolve_source}' name='attr_resolve_source' value='key' checked='checked'> <span class='label' data-i18n='key-ability'>KEY ABILITY</span></label>
                    <label><input type='radio' title='@{resolve_source}' name='attr_resolve_source' value='highest'> <span class='label' data-i18n='highest-ability'>HIGHEST ABILITY</span></label>
                </div>
                <div class='row'>
                    <span class='label' data-i18n='buff-stacking'>BUFF STACKING</span>
                </div>
                <textarea class='buff-stack' title='@{stackable_buffs}' name='attr_stackable_buffs'>Circumstance,Luck</textarea>
                <div class='row'>
                    <span class='label' data-i18n='half-specialization-weapons'>HALF SPECIALIZATION WEAPONS</span>
                </div>
                <textarea class='buff-stack' title='@{half_specializations}' name='attr_half_specializations'>Operative,Small Arms,Small Arm</textarea>
                <div class='gutter'></div>
            </div>
            <div class='attribute-container always-glow border left'></div>
            <div class='attribute-container always-glow border top'></div>
            <div class='attribute-container always-glow border right'></div>
            <div class='attribute-container always-glow border bottom'></div>
            <div class='attribute-container always-glow border bottom-left corner'></div>
            <div class='attribute-container always-glow border top-right corner'></div>
        </div>
    </div>
    <div class="container pc">
        <div class='content-container header-content'>
            <input class='hide-tab char-details' title='@{char-tab}' name='attr_char-tab' type='radio' value='char info' checked='checked'><h1 class='section label char-details' data-i18n='character_info'>CHARACTER INFO</h1>
            <div class='char-details border left'></div>
            <div class='char-details border top'></div>
            <div class='char-details border right'></div>
            <div class='char-details border bottom-left corner'></div>
            <div class='char-details border top-right corner'></div>
            <input class='hide-tab class-details' title='@{char-tab}' name='attr_char-tab' type='radio' value='class details'><h1 class='section label class-details' data-i18n='class-details'>CLASS DETAILS</h1>
            <div class='class-details border left'></div>
            <div class='class-details border top'></div>
            <div class='class-details border right'></div>
            <div class='class-details border bottom-left corner'></div>
            <div class='class-details border top-right corner'></div>
            <div class='char-info'>
                <div class='hlabel-container char-name'>
                    <input type="text" title='@{character_name}' name="attr_character_name">
                    <span class="label" data-i18n="char-name-u">CHARACTER NAME</span>
                </div>
                <div class='hlabel-container class-level'>
                    <input type='text' readonly='true' title='@{class&level}' name='attr_class&level' >
                    <span class='label' data-i18n='class-level'>CLASS/LEVEL</span>
                </div>
                <div class='hlabel-container race'>
                    <input type='text' title='@{race}' name='attr_race' >
                    <span class='label' data-i18n='race'>RACE</span>
                </div>
                <div class='hlabel-container race-hp'>
                    <input class='' type='text' title='@{race_hp}' name='attr_race_hp' >
                    <span class='label' data-i18n='hp'>HP</span>
                </div>
                <div class='hlabel-container theme'>
                    <input type='text' title='@{theme}' name='attr_theme' >
                    <span class='label' data-i18n='theme'>THEME</span>
                </div>
                <div class='hlabel-container size'>
                    <select title='@{size}' name='attr_size'>
                        <option value='-4'>FINE</option>
                        <option value='-3'>DIMINUTIVE</option>
                        <option value='-2'>TINY</option>
                        <option value='-1'>SMALL</option>
                        <option value='0'selected='selected'>MEDIUM</option>
                        <option value='1'>LARGE</option>
                        <option value='2'>HUGE</option>
                        <option value='3'>GARGANTUAN</option>
                        <option value='4'>COLOSSAL</option>
                    </select>
                    <span class='label' data-i18n='size'>SIZE</span>
                </div>
                <div class='hlabel-container speed'>
                    <input type='text' title='@{speed}' name='attr_speed' >
                    <span class='label' data-i18n='speed'>SPEED</span>
                </div>
                <div class='hlabel-container gender'>
                    <input type='text' title='@{gender}' name='attr_gender' >
                    <span class='label' data-i18n='gender'>GENDER</span>
                </div>
                <div class='hlabel-container home-world'>
                    <input type='text' title='@{home_world}' name='attr_home_world' >
                    <span class='label' data-i18n='home-world'>HOME WORLD</span>
                </div>
                <div class='hlabel-container alignment'>
                    <input type='text' title='@{alignment}' name='attr_alignment' >
                    <span class='label' data-i18n='alignment'>ALIGNMENT</span>
                </div>
                <div class='hlabel-container deity'>
                    <input type='text' title='@{deity}' name='attr_deity' >
                    <span class='label' data-i18n='deity'>DEITY</span>
                </div>
                <div class='hlabel-container player'>
                    <input type='text' title='@{player}' name='attr_player' >
                    <span class='label' data-i18n='player'>PLAYER</span>
                </div>
                <div class='hlabel-container language'>
                    <input type='text' title='@{language}' name='attr_language' >
                    <span class='label' data-i18n='languages'>LANGUAGES</span>
                </div>
            </div>
            <div class='char-info always-glow border left'></div>
            <div class='char-info always-glow border top'></div>
            <div class='char-info always-glow border right'></div>
            <div class='char-info always-glow border bottom'></div>
            <div class='char-info always-glow border bottom-left corner'></div>
            <div class='char-info always-glow border top-right corner'></div>
            <div class='class-info'>
                <div class='left-gutter'></div>
                <div class='right-gutter'></div>
                <span class='label class-name' data-i18n='class'>CLASS</span>
                <span class='label class-num-level' data-i18n='class-num-level'>LVL</span>
                <span class='label class-health' data-i18n='class-stam'>SP</span>
                <span class='label class-health' data-i18n='hp'>HP</span>
                <span class='label class-bab' data-i18n='bab'>BAB</span>
                <span class='label class-save' data-i18n='fort'>FORT</span>
                <span class='label class-save' data-i18n='ref'>REF</span>
                <span class='label class-save' data-i18n='will'>WILL</span>
                <span class='label class-skills' data-i18n='skills'>SKILLS</span>
                <span class='label class-ability' data-i18n='abi'>ABI</span>
                <span class='label class-spells' data-i18n='spell'>SPELL</span>
                <!-- class 1 -->
                <input class='class-1 class-name' type='text' title='@{class_1_name}' name='attr_class_1_name' placeholder='1st Class'>
                <input class='class-1 class-num-level' type='text' title='@{class_1_level}' name='attr_class_1_level' placeholder='1'>
                <input class='class-1 class-health' type='text' title='@{class_1_sp}' name='attr_class_1_sp' placeholder='4'>
                <input class='class-1 class-health' type='text' title='@{class_1_hp}' name='attr_class_1_hp' placeholder='4'>
                <select class='class-1 class-bab' title='@{class_1_bab}' name='attr_class_1_bab'>
                    <option value='0.5'>1/2</option>
                    <option value='0.75'>3/4</option>
                    <option value='1'>1</option>
                </select>
                <select class='class-1 class-save' title='@{class_1_fort}' name='attr_class_1_fort'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <select class='class-1 class-save' title='@{class_1_ref}' name='attr_class_1_ref'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <select class='class-1 class-save' title='@{class_1_will}' name='attr_class_1_will'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <input class='class-1 class-skills' type='text' title='@{class_1_skills}' name='attr_class_1_skills' placeholder='4'>
                <select class='class-1 class-ability' title='@{class_1_ability}' name='attr_class_1_ability' placeholder='@{class_1_ability}'>
                    <option value='@{strength_mod}'>STR</option>
                    <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                    <option value='@{constitution_mod}'>CON</option>
                    <option value='@{intelligence_mod}'>INT</option>
                    <option value='@{wisdom_mod}'>WIS</option>
                    <option value='@{charisma_mod}'>CHA</option>
                </select>
                <input class='class-1 class-spells' title='@{class_1_spells}' name='attr_class_1_spells' type='checkbox' value='1'>
                <!-- class 2 -->
                <input class='class-2 class-name' type='text' title='@{class_2_name}' name='attr_class_2_name' placeholder='2nd Class'>
                <input class='class-2 class-num-level' type='text' title='@{class_2_level}' name='attr_class_2_level' placeholder='1'>
                <input class='class-2 class-health' type='text' title='@{class_2_sp}' name='attr_class_2_sp' placeholder='4'>
                <input class='class-2 class-health' type='text' title='@{class_2_hp}' name='attr_class_2_hp' placeholder='4'>
                <select class='class-2 class-bab' title='@{class_2_bab}' name='attr_class_2_bab'>
                    <option value='0.5'>1/2</option>
                    <option value='0.75'>3/4</option>
                    <option value='1'>1</option>
                </select>
                <select class='class-2 class-save' title='@{class_2_fort}' name='attr_class_2_fort'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <select class='class-2 class-save' title='@{class_2_ref}' name='attr_class_2_ref'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <select class='class-2 class-save' title='@{class_2_will}' name='attr_class_2_will'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <input class='class-2 class-skills' type='text' title='@{class_2_skills}' name='attr_class_2_skills' placeholder='4'>
                <select class='class-2 class-ability' title='@{class_2_ability}' name='attr_class_2_ability' placeholder='@{class_2_ability}'>
                    <option value='@{strength_mod}'>STR</option>
                    <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                    <option value='@{constitution_mod}'>CON</option>
                    <option value='@{intelligence_mod}'>INT</option>
                    <option value='@{wisdom_mod}'>WIS</option>
                    <option value='@{charisma_mod}'>CHA</option>
                </select>
                <input class='class-2 class-spells' title='@{class_2_spells}' name='attr_class_2_spells' type='checkbox' value='1'>
                <!-- class 3 -->
                <input class='class-3 class-name' type='text' title='@{class_3_name}' name='attr_class_3_name' placeholder='3rd Class'>
                <input class='class-3 class-num-level' type='text' title='@{class_3_level}' name='attr_class_3_level' placeholder='1'>
                <input class='class-3 class-health' type='text' title='@{class_3_sp}' name='attr_class_3_sp' placeholder='4'>
                <input class='class-3 class-health' type='text' title='@{class_3_hp}' name='attr_class_3_hp' placeholder='4'>
                <select class='class-3 class-bab' title='@{class_3_bab}' name='attr_class_3_bab'>
                    <option value='0.5'>1/2</option>
                    <option value='0.75'>3/4</option>
                    <option value='1'>1</option>
                </select>
                <select class='class-3 class-save' title='@{class_3_fort}' name='attr_class_3_fort'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <select class='class-3 class-save' title='@{class_3_ref}' name='attr_class_3_ref'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <select class='class-3 class-save' title='@{class_3_will}' name='attr_class_3_will'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <input class='class-3 class-skills' type='text' title='@{class_3_skills}' name='attr_class_3_skills' placeholder='4'>
                <select class='class-3 class-ability' title='@{class_3_ability}' name='attr_class_3_ability' placeholder='@{class_3_ability}'>
                    <option value='@{strength_mod}'>STR</option>
                    <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                    <option value='@{constitution_mod}'>CON</option>
                    <option value='@{intelligence_mod}'>INT</option>
                    <option value='@{wisdom_mod}'>WIS</option>
                    <option value='@{charisma_mod}'>CHA</option>
                </select>
                <input class='class-3 class-spells' title='@{class_3_spells}' name='attr_class_3_spells' type='checkbox' value='1'>
                <!-- class 4 -->
                <input class='class-4 class-name' type='text' title='@{class_4_name}' name='attr_class_4_name' placeholder='4th Class'>
                <input class='class-4 class-num-level' type='text' title='@{class_4_level}' name='attr_class_4_level' placeholder='1'>
                <input class='class-4 class-health' type='text' title='@{class_4_sp}' name='attr_class_4_sp' placeholder='4'>
                <input class='class-4 class-health' type='text' title='@{class_4_hp}' name='attr_class_4_hp' placeholder='4'>
                <select class='class-4 class-bab' title='@{class_4_bab}' name='attr_class_4_bab'>
                    <option value='0.5'>1/2</option>
                    <option value='0.75'>3/4</option>
                    <option value='1'>1</option>
                </select>
                <select class='class-4 class-save' title='@{class_4_fort}' name='attr_class_4_fort'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <select class='class-4 class-save' title='@{class_4_ref}' name='attr_class_4_ref'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <select class='class-4 class-save' title='@{class_4_will}' name='attr_class_4_will'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <input class='class-4 class-skills' type='text' title='@{class_4_skills}' name='attr_class_4_skills' placeholder='4'>
                <select class='class-4 class-ability' title='@{class_4_ability}' name='attr_class_4_ability' placeholder='@{class_4_ability}'>
                    <option value='@{strength_mod}'>STR</option>
                    <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                    <option value='@{constitution_mod}'>CON</option>
                    <option value='@{intelligence_mod}'>INT</option>
                    <option value='@{wisdom_mod}'>WIS</option>
                    <option value='@{charisma_mod}'>CHA</option>
                </select>
                <input class='class-4 class-spells' title='@{class_4_spells}' name='attr_class_4_spells' type='checkbox' value='1'>
                <!-- class 5 -->
                <input class='class-5 class-name' type='text' title='@{class_5_name}' name='attr_class_5_name' placeholder='5th Class'>
                <input class='class-5 class-num-level' type='text' title='@{class_5_level}' name='attr_class_5_level' placeholder='1'>
                <input class='class-5 class-health' type='text' title='@{class_5_sp}' name='attr_class_5_sp' placeholder='4'>
                <input class='class-5 class-health' type='text' title='@{class_5_hp}' name='attr_class_5_hp' placeholder='4'>
                <select class='class-5 class-bab' title='@{class_5_bab}' name='attr_class_5_bab'>
                    <option value='0.5'>1/2</option>
                    <option value='0.75'>3/4</option>
                    <option value='1'>1</option>
                </select>
                <select class='class-5 class-save' title='@{class_5_fort}' name='attr_class_5_fort'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <select class='class-5 class-save' title='@{class_5_ref}' name='attr_class_5_ref'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <select class='class-5 class-save' title='@{class_5_will}' name='attr_class_5_will'>
                    <option value='poor' data-i18n='poor' selected='selected'>POOR</option>
                    <option value='good' data-i18n='good'>GOOD</option>
                </select>
                <input class='class-5 class-skills' type='text' title='@{class_5_skills}' name='attr_class_5_skills' placeholder='4'>
                <select class='class-5 class-ability' title='@{class_5_ability}' name='attr_class_5_ability' placeholder='@{class_5_ability}'>
                    <option value='@{strength_mod}'>STR</option>
                    <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                    <option value='@{constitution_mod}'>CON</option>
                    <option value='@{intelligence_mod}'>INT</option>
                    <option value='@{wisdom_mod}'>WIS</option>
                    <option value='@{charisma_mod}'>CHA</option>
                </select>
                <input class='class-5 class-spells' title='@{class_5_spells}' name='attr_class_5_spells' type='checkbox' value='1'>
            </div>
            <div class='class-info always-glow border left'></div>
            <div class='class-info always-glow border top'></div>
            <div class='class-info always-glow border right'></div>
            <div class='class-info always-glow border bottom'></div>
            <div class='class-info always-glow border bottom-left corner'></div>
            <div class='class-info always-glow border top-right corner'></div>
        </div>
        <div class='in-play'>
            <input class='hide-tab menu-tab' type='radio' title='@{in-play-tab}' name='attr_in-play-tab' value='menus' checked='checked'><h1 class='section label menu-head menu-tab' data-i18n='menus'>MENUS</h1>
            <div class='menu-tab border left'></div>
            <div class='menu-tab border top'></div>
            <div class='menu-tab border right'></div>
            <div class='menu-tab border bottom-left corner'></div>
            <div class='menu-tab border top-right corner'></div>
            <div class='menus'>
                <button type='roll' title='%{initiative}' name='roll_initiative' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Initiative}} {{r1=[[1d20+@{initiative_ability}[ABILITY]@{npc_init}@{initiative_misc}+[[(@{initiative_ability}[ABILITY]@{npc_init}@{initiative_misc})/100)]][TIE BREAKER]&{tracker}]]}}' data-i18n='initiative'>INITIATIVE</button>
                <button type='roll' title='%{attacks}' name='roll_attacks' value='@{attacks_menu}' data-i18n='attacks'>ATTACKS</button>
                <button type='roll' title='%{saves}' name='roll_saves' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=SAVES}} {{buttons1=[Fort](~@{character_name}|fort) | [Ref](~@{character_name}|ref) | [Will](~@{character_name}|will)}}' data-i18n='saves'>SAVES</button>
                <button type='roll' title='%{abilities}' name='roll_abilities' value='@{abilities_menu}' data-i18n='abilities-u'>ABILITIES</button>
                <button type='roll' title='%{ability_checks}' name='roll_ability_checks' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=ABILITY CHECKS}} {{buttons1=[Strength](~@{character_name}|strength) | [Dexterity](~@{character_name}|dexterity) | [Constitution](~@{character_name}|constitution) | [Intelligence](~@{character_name}|intelligence) | [Wisdom](~@{character_name}|wisdom) | [Charisma](~@{character_name}|charisma)}}' data-i18n='ability_checks'>ABILITY CHECKS</button>
                <button type='roll' title='%{skills}' name='roll_skills' value='@{skills_menu}' data-i18n='skills'>SKILLS</button>
                <input type='text' title='@{attacks_menu}' name='attr_attacks_menu' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{title=ATTACKS}}' hidden='true'>
                <input class='is-caster' title='@{caster_select}' name='attr_caster_select' type='radio' value='1' hidden='true'>
                <div class='spell-button-container spells'>
                    <button type='roll' title='%{spells}' name='roll_spells' value='@{spells_menu}' data-i18n='spells'>SPELLS</button>
                    <input type='text' title='@{spells_menu}' name='attr_spells_menu' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{title=SPELLBOOKS}}' hidden='true'>
                    
                    <input class='class-1 class-spells' title='@{class_1_spells}' name='attr_class_1_spells' type='checkbox' value='1' hidden='true'>
                    <button type='roll' title='%{class_1_spellbook}' name='roll_class_1_spellbook' value='@{class_1_spellbook}'><span class='class-1 class-name' type='text' title='@{class_1_name}' name='attr_class_1_name' value=''></span></button>
                    
                    <input class='class-2 class-spells' title='@{class_2_spells}' name='attr_class_2_spells' type='checkbox' value='1' hidden='true'>
                    <button type='roll' title='%{class_2_spellbook}' name='roll_class_2_spellbook' value='@{class_2_spellbook}'><span class='class-1 class-name' type='text' title='@{class_2_name}' name='attr_class_2_name' value=''></span></button>
                    
                    <input class='class-3 class-spells' title='@{class_3_spells}' name='attr_class_3_spells' type='checkbox' value='1' hidden='true'>
                    <button type='roll' title='%{class_3_spellbook}' name='roll_class_3_spellbook' value='@{class_3_spellbook}'><span class='class-1 class-name' type='text' title='@{class_3_name}' name='attr_class_3_name' value=''></span></button>
                    
                    <input class='class-4 class-spells' title='@{class_4_spells}' name='attr_class_4_spells' type='checkbox' value='1' hidden='true'>
                    <button type='roll' title='%{class_4_spellbook}' name='roll_class_4_spellbook' value='@{class_4_spellbook}'><span class='class-1 class-name' type='text' title='@{class_4_name}' name='attr_class_4_name' value=''></span></button>
                    
                    <input class='class-5 class-spells' title='@{class_5_spells}' name='attr_class_5_spells' type='checkbox' value='1' hidden='true'>
                    <button type='roll' title='%{class_5_spellbook}' name='roll_class_5_spellbook' value='@{class_5_spellbook}'><span class='class-1 class-name' type='text' title='@{class_5_name}' name='attr_class_5_name' value=''></span></button>
                    
                    <input type='text' title='@{class_1_spellbook}' name='attr_class_1_spellbook' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}}' hidden='true'>
                    <input type='text' title='@{class_2_spellbook}' name='attr_class_2_spellbook' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}}' hidden='true'>
                    <input type='text' title='@{class_3_spellbook}' name='attr_class_3_spellbook' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}}' hidden='true'>
                    <input type='text' title='@{class_4_spellbook}' name='attr_class_4_spellbook' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}}' hidden='true'>
                    <input type='text' title='@{class_5_spellbook}' name='attr_class_5_spellbook' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}}' hidden='true'>
                </div>
                <input type='text' title='@{abilities_menu}' name='attr_abilities_menu' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{title=ABILITIES}}' hidden='true'>
                <input type='text' title='@{skills_menu}' name='attr_skills_menu' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{title=SKILLS}}' hidden='true'>
            </div>
            <div class='menus always-glow border left'></div>
            <div class='menus always-glow border top'></div>
            <div class='menus always-glow border right'></div>
            <div class='menus always-glow border bottom'></div>
            <div class='menus always-glow border bottom-left corner'></div>
            <div class='menus always-glow border top-right corner'></div>
            <input class='hide-tab buff-tab' type='radio' title='@{in-play-tab}' name='attr_in-play-tab' value='buffs'><h1 class='section label buff-head buff-tab' data-i18n='buffs'>BUFFS</h1>
            <div class='buff-tab border left'></div>
            <div class='buff-tab border top'></div>
            <div class='buff-tab border right'></div>
            <div class='buff-tab border bottom-left corner'></div>
            <div class='buff-tab border top-right corner'></div>
            <div class='buffs'>
                <fieldset class='repeating_buff'>
                    <input class='filter' type='checkbox' hidden='true' title='@{filter}' name='attr_filter' value='1' checked='checked'>
                    <div class='filter-container buff'>
                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                        <div class='row-options'>
                            <input class='buff-name' type='text' title='@{name}' name='attr_name' placeholder='Haste'>
                            <div class='mod-container'>
                                <span class='label buff-mod' data-i18n='mods'>MODS</span>
                                <textarea class='buff-mod' title='@{mods}' name='attr_mods'placeholder='+X to EAC'></textarea>
                            </div>
                        </div>
                        <div class='display'>
                            <label>
                                <input type='checkbox' title='@{toggle}' name='attr_toggle' value='enabled'>
                                <span class='buff-name label' title='@{name}' name='attr_name'>TEST</span>
                            </label>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class='buffs always-glow border left'></div>
            <div class='buffs always-glow border top'></div>
            <div class='buffs always-glow border right'></div>
            <div class='buffs always-glow border bottom'></div>
            <div class='buffs always-glow border bottom-left corner'></div>
            <div class='buffs always-glow border top-right corner'></div>
        </div>
        <div class=tab-container>
            <input class="tab-button core" hidden='true' type="radio" title='@{tab}' name="attr_tab" value="core" checked="checked">
            <input class="tab-button spells" hidden='true' type="radio" title='@{tab}' name="attr_tab" value="spells">
            <div class='page core'>
                <div class='initiative-container section'>
                    <button class='label' type='roll' title='%{initiative}' name='roll_initiative' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Initiative}} {{r1=[[1d20+@{initiative_ability}[ABILITY]@{npc_init}@{initiative_misc}+[[(@{initiative_ability}[ABILITY]@{npc_init}@{initiative_misc})/100)]][TIE BREAKER]&{tracker}]]}}' data-i18n='initiative' >INITIATIVE</button>
                    <input class='mod-debuff' type='radio' title='@{initiative_change}' name='attr_initiative_change' value='-1' hidden='true'>
                    <input class='mod-normal' type='radio' title='@{initiative_change}' name='attr_initiative_change' value='0' hidden='true' checked='checked'>
                    <input class='mod-buff' type='radio' title='@{initiative_change}' name='attr_initiative_change' value='1' hidden='true'>
                    <span class='mod tot modified-attr' readonly='true' type='text' title='@{initiative}' name='attr_initiative' value='0'>0</span>
                    <span class='arith'>=</span>
                    <select class='label abi' title='@{initiative_ability}' name='attr_initiative_ability'>
                        <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                        <option value='@{strength_mod}'>STR</option>
                        <option value='@{constitution_mod}'>CON</option>
                        <option value='@{intelligence_mod}'>INT</option>
                        <option value='@{wisdom_mod}'>WIS</option>
                        <option value='@{charisma_mod}'>CHA</option>
                    </select>
                    <input hidden='true' type='text' title='@{initiative_misc}' name='attr_initiative_misc' value=''>
                </div>
                <div class='initiative-container always-glow border left'></div>
                <div class='initiative-container always-glow border top'></div>
                <div class='initiative-container always-glow border right'></div>
                <div class='initiative-container always-glow border bottom'></div>
                <div class='initiative-container always-glow border bottom-left corner'></div>
                <div class='initiative-container always-glow border top-right corner'></div>
                <div class='xp-container'>
                    <span class='label' data-i18n='xp'>XP</span>
                    <input type='number' class='currxp' title='@{xp}' name='attr_xp' value=''>
                    <span class='slash'>/</span>
                    <input type='number' class='maxxp' title='@{xp_max}' name='attr_xp_max' value=''>
                </div>
                <div class='section-container attributes'>
                    <h1 class='section label' data-i18n='ability_scores'>ABILITY SCORES</h1>
                    <div class='section always-glow border left'></div>
                    <div class='section always-glow border top'></div>
                    <div class='section always-glow border right'></div>
                    <div class='section always-glow border bottom-left corner'></div>
                    <div class='section always-glow border top-right corner'></div>
                    <div class='attribute-container'>
                        <span class='button'></span>
                        <span class='mod label' data-i18n='mod'>MOD</span>
                        <span class='attr-total-container label' data-i18n='tot'>TOT</span>
                        <span class='label pen' data-i18n='pen'>PEN</span>
                        <span class='label drain' data-i18n='drain'>DRN</span>
                        <button class='button' type='roll' title='%{strength}' name='roll_strength' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Strength}} {{r1=[[1d20+@{strength_mod}]]}}' data-i18n='strength'>STRENGTH</button>
                        <input class='mod' type='text' title='@{strength_mod}' name='attr_strength_mod' readonly='true' value='0'>
                        <div class='attr-total-container'>
                            <input class='base-attr attr' type='number' title='@{strength}' name='attr_strength_base' value='10' >
                            <input class='mod-debuff' type='radio' title='@{strength_change}' name='attr_strength_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{strength_change}' name='attr_strength_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{strength_change}' name='attr_strength_change' value='1' hidden='true'>
                            <span class='modified-attr attr' readonly='true' type='number' title='@{strength}' name='attr_strength' value='10'>10</span>
                        </div>
                        <input class='pen' type='number' title='@{strength_penalty}' name='attr_strength_penalty' value='' >
                        <input class='drain' type='number' title='@{strength_drain}' name='attr_strength_drain' value='' >
                        <button class='button' type='roll' title='%{dexterity}' name='roll_dexterity' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Dexterity}} {{r1=[[1d20+@{dexterity_mod}]]}}' data-i18n='dexterity'>DEXTERITY</button>
                        <input class='mod' type='text' title='@{dexterity_mod}' name='attr_dexterity_mod' readonly='true' value='0'>
                        <div class='attr-total-container'>
                            <input class='base-attr attr' type='number' title='@{dexterity}' name='attr_dexterity_base' value='10' >
                            <input class='mod-debuff' type='radio' title='@{dexterity_change}' name='attr_dexterity_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{dexterity_change}' name='attr_dexterity_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{dexterity_change}' name='attr_dexterity_change' value='1' hidden='true'>
                            <span class='modified-attr attr' readonly='true' type='number' title='@{dexterity}' name='attr_dexterity' value='10'>10</span>
                        </div>
                        <input class='pen' type='number' title='@{dexterity_penalty}' name='attr_dexterity_penalty' value='' >
                        <input class='drain' type='number' title='@{dexterity_drain}' name='attr_dexterity_drain' value='' >
                        <button class='button' type='roll' title='%{constitution}' name='roll_constitution' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Constitution}} {{r1=[[1d20+@{constitution_mod}]]}}' data-i18n='constitution'>CONSTITUTION</button>
                        <input class='mod' type='text' title='@{constitution_mod}' name='attr_constitution_mod' readonly='true' value='0' value='0'>
                        <div class='attr-total-container'>
                            <input class='base-attr attr' type='number' title='@{constitution}' name='attr_constitution_base' value='10' >
                            <input class='mod-debuff' type='radio' title='@{constitution_change}' name='attr_constitution_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{constitution_change}' name='attr_constitution_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{constitution_change}' name='attr_constitution_change' value='1' hidden='true'>
                            <span class='modified-attr attr' readonly='true' type='number' title='@{constitution}' name='attr_constitution' value='10'>10</span>
                        </div>
                        <input class='pen' type='number' title='@{constitution_penalty}' name='attr_constitution_penalty' value='' >
                        <input class='drain' type='number' title='@{constitution_drain}' name='attr_constitution_drain' value='' >
                        <button class='button' type='roll' title='%{intelligence}' name='roll_intelligence' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Intelligence}} {{r1=[[1d20+@{intelligence_mod}]]}}' data-i18n='intelligence'>INTELLIGENCE</button>
                        <input class='mod' type='text' title='@{intelligence_mod}' name='attr_intelligence_mod' readonly='true' value='0'>
                        <div class='attr-total-container'>
                            <input class='base-attr attr' type='number' title='@{intelligence}' name='attr_intelligence_base' value='10' >
                            <input class='mod-debuff' type='radio' title='@{intelligence_change}' name='attr_intelligence_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{intelligence_change}' name='attr_intelligence_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{intelligence_change}' name='attr_intelligence_change' value='1' hidden='true'>
                            <span class='modified-attr attr' readonly='true' type='number' title='@{intelligence}' name='attr_intelligence' value='10'>10</span>
                        </div>
                        <input class='pen' type='number' title='@{intelligence_penalty}' name='attr_intelligence_penalty' value='' >
                        <input class='drain' type='number' title='@{intelligence_drain}' name='attr_intelligence_drain' value='' >
                        <button class='button' type='roll' title='%{wisdom}' name='roll_wisdom' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Wisdom}} {{r1=[[1d20+@{wisdom_mod}]]}}' data-i18n='wisdom'>WISDOM</button>
                        <input class='mod' type='text' title='@{wisdom_mod}' name='attr_wisdom_mod' readonly='true' value='0'>
                        <div class='attr-total-container'>
                            <input class='base-attr attr' type='number' title='@{wisdom}' name='attr_wisdom_base' value='10' >
                            <input class='mod-debuff' type='radio' title='@{wisdom_change}' name='attr_wisdom_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{wisdom_change}' name='attr_wisdom_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{wisdom_change}' name='attr_wisdom_change' value='1' hidden='true'>
                            <span class='modified-attr attr' readonly='true' type='number' title='@{wisdom}' name='attr_wisdom' value='10'>10</span>
                        </div>
                        <input class='pen' type='number' title='@{wisdom_penalty}' name='attr_wisdom_penalty' value='' >
                        <input class='drain' type='number' title='@{wisdom_drain}' name='attr_wisdom_drain' value='' >
                        <button class='button' type='roll' title='%{charisma}' name='roll_charisma' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Charisma}} {{r1=[[1d20+@{charisma_mod}]]}}' data-i18n='charisma'>CHARISMA</button>
                        <input class='mod' type='text' title='@{charisma_mod}' name='attr_charisma_mod' readonly='true' value='0'>
                        <div class='attr-total-container'>
                            <input class='base-attr attr' type='number' title='@{charisma}' name='attr_charisma_base' value='10' >
                            <input class='mod-debuff' type='radio' title='@{charisma_change}' name='attr_charisma_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{charisma_change}' name='attr_charisma_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{charisma_change}' name='attr_charisma_change' value='1' hidden='true'>
                            <span class='modified-attr attr' readonly='true' type='number' title='@{charisma}' name='attr_charisma' value='10'>10</span>
                        </div>
                        <input class='pen' type='number' title='@{charisma_penalty}' name='attr_charisma_penalty' value='' >
                        <input class='drain' type='number' title='@{charisma_drain}' name='attr_charisma_drain' value='' >
                    </div>
                    <div class='attribute-container always-glow border left'></div>
                    <div class='attribute-container always-glow border top'></div>
                    <div class='attribute-container always-glow border right'></div>
                    <div class='attribute-container always-glow border bottom'></div>
                    <div class='attribute-container always-glow border bottom-left corner'></div>
                    <div class='attribute-container always-glow border top-right corner'></div>
                </div>
                <div class='section-container health'>
                    <h1 class='section label' data-i18n='health'>HEALTH</h1>
                    <input class='full-health' type='radio' title='@{health_status}' name='attr_health_status' readonly='true' hidden='true' value='0' checked='checked'>
                    <input class='no-sp' type='radio' title='@{health_status}' name='attr_health_status' value='1' readonly='true' hidden='true'>
                    <input class='no-hp' type='radio' title='@{health_status}' name='attr_health_status' value='2' readonly='true' hidden='true'>
                    <input class='no-rp' type='radio' title='@{health_status}' name='attr_health_status' value='3' readonly='true' hidden='true'>
                    <div class='section always-glow border left'></div>
                    <div class='section always-glow border top'></div>
                    <div class='section always-glow border right'></div>
                    <div class='section always-glow border bottom-left corner'></div>
                    <div class='section always-glow border top-right corner'></div>
                    <div class='health-resolve-container section-container'>
                        <div class='health-container'>
                            <span class='health-label label stamina' data-i18n='sp'>SP</span>
                            <span class='health-label label hp' data-i18n='hp'>HP</span>
                            <span class='health-label label resolve' data-i18n='rp'>RP</span>
                            <span class='health-label label temp' data-i18n='temp-hp'>TMP</span>
                            <input class='current stamina' type='number' title='@{sp}' name='attr_sp' value='0'>
                            <span class='slash stamina'>/</span>
                            <div class='attr-total-container stamina max'>
                                <input class='mod-debuff' type='radio' title='@{sp_change}' name='attr_sp_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{sp_change}' name='attr_sp_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{sp_change}' name='attr_sp_change' value='1' hidden='true'>
                                <span class='max stamina modified-attr' type='number' title='@{sp_max}' name='attr_sp_max' readonly='true' value='0' >0</span>
                            </div>
                            <input class='current hp' type='number' title='@{hp}' name='attr_hp' value='0'>
                            <span class='slash hp'>/</span>
                            <div class='attr-total-container hp max'>
                                <input class='mod-debuff' type='radio' title='@{hp_change}' name='attr_hp_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{hp_change}' name='attr_hp_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{hp_change}' name='attr_hp_change' value='1' hidden='true'>
                                <span class='max hp modified-attr' type='number' title='@{hp_max}' name='attr_hp_max' readonly='true' value='0' title=@{hp|max}>0</span>
                            </div>
                            <input class='current resolve' type='number' title='@{rp}' name='attr_rp' value='0'>
                            <span class='slash resolve'>/</span>
                            <div class='attr-total-container resolve max'>
                                <input class='mod-debuff' type='radio' title='@{rp_change}' name='attr_rp_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{rp_change}' name='attr_rp_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{rp_change}' name='attr_rp_change' value='1' hidden='true'>
                                <span class='max resolve modified-attr' type='number' title='@{rp_max}' name='attr_rp_max' readonly='true' value='0' title=@{rp|max}>0</span>
                            </div>
                            <input class='current temp' type='number' title='@{temp_hp}' name='attr_temp_hp' value='0'>
                            <span class='slash temp'>/</span>
                            <div class='attr-total-container temp max'>
                                <input class='mod-debuff' type='radio' title='@{temp_hp_change}' name='attr_temp_hp_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{temp_hp_change}' name='attr_temp_hp_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{temp_hp_change}' name='attr_temp_hp_change' value='1' hidden='true'>
                                <span class='max temp modified-attr' type='number' title='@{temp_hp_max}' name='attr_temp_hp_max' readonly='true' value='0' title=@{temp_hp|max}>0</span>
                            </div>
                        </div>
                    </div>
                    <div class='section-container always-glow border left'></div>
                    <div class='section-container always-glow border top'></div>
                    <div class='section-container always-glow border right'></div>
                    <div class='section-container always-glow border bottom'></div>
                    <div class='section-container always-glow border bottom-left corner'></div>
                    <div class='section-container always-glow border top-right corner'></div>
                </div>
                <div class='section-container ac'>
                    <h1 class='section label' data-i18n='armorclass'>ARMOR CLASS</h1>
                    <div class='section always-glow border left'></div>
                    <div class='section always-glow border top'></div>
                    <div class='section always-glow border right'></div>
                    <div class='section always-glow border bottom-left corner'></div>
                    <div class='section always-glow border top-right corner'></div>
                    <div class='ac-container section-container'>
                        <span class='ac-type'></span>
                        <span class='label tot' data-i18n='tot'>TOT</span>
                        <span class='label arm' style='font-family:Pictos Three;'>b</span>
                        <span class='label abi' data-i18n='abi'>ABI</span>
                        <span class='label ac-type' data-i18n='eac'>EAC</span>
                        <div class='attr-total-container tot'>
                            <input class='mod-debuff' type='radio' title='@{eac_change}' name='attr_eac_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{eac_change}' name='attr_eac_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{eac_change}' name='attr_eac_change' value='1' hidden='true'>
                            <span class='tot mod modified-attr' readonly='true' title='@{eac}' name='attr_eac' value='10'>10</span>
                        </div>
                        <div class='attr-total-container arm'>
                            <input class='mod-debuff' type='radio' title='@{eac_armor_change}' name='attr_eac_armor_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{eac_armor_change}' name='attr_eac_armor_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{eac_armor_change}' name='attr_eac_armor_change' value='1' hidden='true'>
                            <span class='arm mod modified-attr' readonly='true' title='@{eac_armor}' name='attr_eac_armor' value='0'>0</span>
                        </div>
                        <select class='label abi' title='@{eac_ability}' name='attr_eac_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                        <span class='label ac-type' data-i18n='kac'>KAC</span>
                        <div class='attr-total-container tot'>
                            <input class='mod-debuff' type='radio' title='@{kac_change}' name='attr_kac_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{kac_change}' name='attr_kac_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{kac_change}' name='attr_kac_change' value='1' hidden='true'>
                            <span class='tot mod modified-attr' readonly='true' title='@{kac}' name='attr_kac' value='10'>10</span>
                        </div>
                        <div class='attr-total-container arm'>
                            <input class='mod-debuff' type='radio' title='@{kac_armor_change}' name='attr_kac_armor_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{kac_armor_change}' name='attr_kac_armor_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{kac_armor_change}' name='attr_kac_armor_change' value='1' hidden='true'>
                            <span class='arm mod modified-attr' readonly='true' title='@{kac_armor}' name='attr_kac_armor' value='0'>0</span>
                        </div>
                        <select class='label abi' title='@{kac_ability}' name='attr_kac_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                        <span class='label ac-type' data-i18n='cmd'>CMD</span>
                        <div class='attr-total-container tot'>
                            <input class='mod-debuff' type='radio' title='@{cmd_change}' name='attr_cmd_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{cmd_change}' name='attr_cmd_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{cmd_change}' name='attr_cmd_change' value='1' hidden='true'>
                            <span class='tot mod modified-attr' readonly='true' title='@{cmd}' name='attr_cmd' value='18'>18</span>
                        </div>
                        <span class='arm'></span>
                        <span class='abi'></span>
                        <span class='label dr-span' data-i18n='dr_resist'>DR/RESIST</span>
                        <input class='dr' type='text' title='@{dr}' name='attr_dr' placeholder='5/- Fire 5'>
                        <textarea class='ac-notes' title='@{ac_notes}' name='attr_ac_notes' placeholder='Notes'></textarea>
                    </div>
                    <div class='section-container always-glow border left'></div>
                    <div class='section-container always-glow border top'></div>
                    <div class='section-container always-glow border right'></div>
                    <div class='section-container always-glow border bottom'></div>
                    <div class='section-container always-glow border bottom-left corner'></div>
                    <div class='section-container always-glow border top-right corner'></div>
                </div>
                <div class='section-container saves'>
                    <h1 class='section label' data-i18n='savingthrows'>SAVING THROWS</h1>
                    <div class='section always-glow border left'></div>
                    <div class='section always-glow border top'></div>
                    <div class='section always-glow border right'></div>
                    <div class='section always-glow border bottom-left corner'></div>
                    <div class='section always-glow border top-right corner'></div>
                    <div class='saving-container section-container'>
                        <input hidden='true' type='text' title='@{fort_misc}' name='attr_fort_misc'>
                        <input hidden='true' type='text' title='@{ref_misc}' name='attr_ref_misc'>
                        <input hidden='true' type='text' title='@{will_misc}' name='attr_will_misc'>
                        <!--<button type='roll'></button>-->
                        <span class='label tot' data-i18n='tot'>TOT</span>
                        <span class='label base' data-i18n='base'>BASE</span>
                        <div class='label abi' data-i18n='abi'>ABI</div>
                        <button type='roll' title='%{fort}' name='roll_fort' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Fortitude}} {{r1=[[1d20+@{fort_base}[BASE]+@{fort_ability}[ABILITY]@{fort_misc}]] }} {{notes=@{save_notes}}}' data-i18n='fort' >FORT</button>
                        <div class='attr-total-container'>
                            <input class='mod-debuff' type='radio' title='@{fort_change}' name='attr_fort_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{fort_change}' name='attr_fort_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{fort_change}' name='attr_fort_change' value='1' hidden='true'>
                            <span class='mod tot modified-attr' readonly='true' type='text' title='@{fort}' name='attr_fort' value='0'>0</span>
                        </div>
                        <span class='base mod' readonly='true' title='@{fort_base}' name='attr_fort_base' value='0'>0</span>
                        <select class='label abi' title='@{fort_ability}' name='attr_fort_ability' style='width; .5em;'>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{constitution_mod}' selected='selected'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                        <button type='roll' title='%{ref}' name='roll_ref' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Reflex}} {{r1=[[1d20+@{ref_base}[BASE]+@{ref_ability}[ABILITY]@{ref_misc}]] }} {{notes=@{save_notes}}}' data-i18n='ref' >REF</button>
                        <div class='attr-total-container'>
                            <input class='mod-debuff' type='radio' title='@{ref_change}' name='attr_ref_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{ref_change}' name='attr_ref_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{ref_change}' name='attr_ref_change' value='1' hidden='true'>
                            <span class='mod tot modified-attr' readonly='true' type='text' title='@{ref}' name='attr_ref' value='0'>0</span>
                        </div>
                        <span class='base mod' readonly='true' title='@{ref_base}' name='attr_ref_base' value='0'>0</span>
                        <select class='label abi' title='@{ref_ability}' name='attr_ref_ability' style='width; .5em;'>
                            <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                        <button type='roll' title='%{will}' name='roll_will' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Will}} {{r1=[[1d20+@{will_base}[BASE]+@{will_ability}[ABILITY]@{will_misc}]] }} {{notes=@{save_notes}}}' data-i18n='will' >WILL</button>
                        <div class='attr-total-container'>
                            <input class='mod-debuff' type='radio' title='@{will_change}' name='attr_will_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{will_change}' name='attr_will_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{will_change}' name='attr_will_change' value='1' hidden='true'>
                            <span class='mod tot modified-attr' readonly='true' type='text' title='@{will}' name='attr_will' value='0'>0</span>
                        </div>
                        <span class='base mod' readonly='true' title='@{will_base}' name='attr_will_base' value='0'>0</span>
                        <select class='label abi' title='@{will_ability}' name='attr_will_ability' style='width; .5em;'>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{strength_mod}'>STR</option>
                       <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}' selected='selected'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                        <textarea title='@{save_notes}' name='attr_save_notes' placeholder='Notes'></textarea>
                    </div>
                    <div class='section-container always-glow border left'></div>
                    <div class='section-container always-glow border top'></div>
                    <div class='section-container always-glow border right'></div>
                    <div class='section-container always-glow border bottom'></div>
                    <div class='section-container always-glow border bottom-left corner'></div>
                    <div class='section-container always-glow border top-right corner'></div>
                </div>
                <div class='skills section-container'>
                    <h1 class='section label'><span data-i18n='skills'>SKILLS</span> <span> | </span> <span title='@{skill_points}' name='attr_skill_points' type='number' readonly='true'>0</span> <span>/</span>
                        <input class='mod-debuff' type='radio' title='@{skill_points_change}' name='attr_skill_points_change' value='-1' hidden='true'>
                        <input class='mod-normal' type='radio' title='@{skill_points_change}' name='attr_skill_points_change' value='0' hidden='true' checked='checked'>
                        <input class='mod-buff' type='radio' title='@{skill_points_change}' name='attr_skill_points_change' value='1' hidden='true'>
                        <span class='skills modified-attr' title='@{skill_points_max}' name='attr_skill_points_max' type='number' readonly='true'>0</span>
                    </h1>
                    <div class='section always-glow border left'></div>
                    <div class='section always-glow border top'></div>
                    <div class='section always-glow border right'></div>
                    <div class='section always-glow border bottom-left corner'></div>
                    <div class='section always-glow border top-right corner'></div>
                    <div class='skills-container section-container'>
                        <div class='skill-container'>
                            <span class='label tot' data-i18n='tot'>TOT</span>
                            <span class='label ranks' data-i18n='rnk'>RNK</span>
                            <span class='label class-skill' data-i18n='class-skill'>CS</span>
                            <span class='label abi' data-i18n='abi'>ABI</span>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{acrobatics_show_options}' name="attr_acrobatics_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{acrobatics_misc}' name='attr_acrobatics_misc' value=''>
                                <input class='acp' type='checkbox' title='@{acrobatics_acp}' name='attr_acrobatics_acp' hidden='true' value='1' checked='checked'>
                                <button class='acp' type='roll' title='%{acrobatics}' name='roll_acrobatics' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Acrobatics}}  {{r1=[[1d20+@{acrobatics_ranks}[Ranks]+[[({0,@{acrobatics_ranks}}>1)*@{acrobatics_class_skill}]][CS]+@{acrobatics_ability}[Ability]@{acrobatics_misc}]]}} {{notes=@{acrobatics_description}}}' data-i18n='acrobatics' >ACROBATICS</button>
                                <input class='mod-debuff' type='radio' title='@{acrobatics_change}' name='attr_acrobatics_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{acrobatics_change}' name='attr_acrobatics_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{acrobatics_change}' name='attr_acrobatics_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{acrobatics}' name='attr_acrobatics' value='0'>0</span>
                                <div class='arith-equal'>=</div>
                                <input class='ranks' type='number' title='@{acrobatics_ranks}' name='attr_acrobatics_ranks' value='' >
                                <div class='arith-plus'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{acrobatics_class_skill}' name='attr_acrobatics_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith-plus2'>+</div>
                                <select class='label abi' title='@{acrobatics_ability}' name='attr_acrobatics_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{acrobatics_acp}' name='attr_acrobatics_acp' value='1' checked='checked'>
                                </div>
                                <textarea class='skill-description' title='@{acrobatics_description}' name='attr_acrobatics_description' placeholder='Notes'></textarea>
                                <input title='@{acrobatics_buff_notes}' name='attr_acrobatics_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{athletics_show_options}' name="attr_athletics_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{athletics_misc}' name='attr_athletics_misc' value=''>
                                <input class='acp' type='checkbox' title='@{athletics_acp}' name='attr_athletics_acp' hidden='true' value='1' checked='checked'>
                                <button class='acp' type='roll' title='%{athletics}' name='roll_athletics' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Athletics}}  {{r1=[[1d20+@{athletics_ranks}[RANKS]+[[({0,@{athletics_ranks}}>1)*@{athletics_class_skill}]][CS]+@{athletics_ability}[ABILITY]@{athletics_misc}]]}} {{notes=@{athletics_description}}}' data-i18n='athletics' >ATHLETICS</button>
                                <input class='mod-debuff' type='radio' title='@{athletics_change}' name='attr_athletics_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{athletics_change}' name='attr_athletics_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{athletics_change}' name='attr_athletics_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{athletics}' name='attr_athletics' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{athletics_ranks}' name='attr_athletics_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{athletics_class_skill}' name='attr_athletics_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{athletics_ability}' name='attr_athletics_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}' selected='selected'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{athletics_acp}' name='attr_athletics_acp' value='1' checked='checked'>
                                </div>
                                <textarea class='skill-description' title='@{athletics_description}' name='attr_athletics_description' placeholder='Notes'></textarea>
                                <input title='@{athletics_buff_notes}' name='attr_athletics_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{bluff_show_options}' name="attr_bluff_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{bluff_misc}' name='attr_bluff_misc' value=''>
                                <input class='acp' type='checkbox' title='@{bluff_acp}' name='attr_bluff_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{bluff}' name='roll_bluff' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Bluff}}  {{r1=[[1d20+@{bluff_ranks}[RANKS]+[[({0,@{bluff_ranks}}>1)*@{bluff_class_skill}]][CS]+@{bluff_ability}[ABILITY]@{bluff_misc}]]}} {{notes=@{bluff_description}}}' data-i18n='bluff' >BLUFF </button>
                                <input class='mod-debuff' type='radio' title='@{bluff_change}' name='attr_bluff_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{bluff_change}' name='attr_bluff_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{bluff_change}' name='attr_bluff_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{bluff}' name='attr_bluff' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{bluff_ranks}' name='attr_bluff_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{bluff_class_skill}' name='attr_bluff_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{bluff_ability}' name='attr_bluff_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}' selected='selected'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{bluff_acp}' name='attr_bluff_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{bluff_description}' name='attr_bluff_description' placeholder='Notes'></textarea>
                                <input title='@{bluff_buff_notes}' name='attr_bluff_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{computers_show_options}' name="attr_computers_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{computers_misc}' name='attr_computers_misc' value=''>
                                <input class='acp' type='checkbox' title='@{computers_acp}' name='attr_computers_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{computers}' name='roll_computers' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Computers}}  {{r1=[[1d20+@{computers_ranks}[RANKS]+[[({0,@{computers_ranks}}>1)*@{computers_class_skill}]][CS]+@{computers_ability}[ABILITY]@{computers_misc}]]}} {{notes=@{computers_description}}}' data-i18n='computers' >COMPUTERS</button>
                                <input class='mod-debuff' type='radio' title='@{computers_change}' name='attr_computers_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{computers_change}' name='attr_computers_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{computers_change}' name='attr_computers_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{computers}' name='attr_computers' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{computers_ranks}' name='attr_computers_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{computers_class_skill}' name='attr_computers_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{computers_ability}' name='attr_computers_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}' selected='selected'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{computers_acp}' name='attr_computers_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{computers_description}' name='attr_computers_description' placeholder='Notes'></textarea>
                                <input title='@{computers_buff_notes}' name='attr_computers_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{culture_show_options}' name="attr_culture_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{culture_misc}' name='attr_culture_misc' value=''>
                                <input class='acp' type='checkbox' title='@{culture_acp}' name='attr_culture_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{culture}' name='roll_culture' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Culture}}  {{r1=[[1d20+@{culture_ranks}[RANKS]+[[({0,@{culture_ranks}}>1)*@{culture_class_skill}]][CS]+@{culture_ability}[ABILITY]@{culture_misc}]]}} {{notes=@{culture_description}}}' data-i18n='culture' >CULTURE</button>
                                <input class='mod-debuff' type='radio' title='@{culture_change}' name='attr_culture_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{culture_change}' name='attr_culture_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{culture_change}' name='attr_culture_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{culture}' name='attr_culture' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{culture_ranks}' name='attr_culture_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{culture_class_skill}' name='attr_culture_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{culture_ability}' name='attr_culture_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}' selected='selected'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{culture_acp}' name='attr_culture_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{culture_description}' name='attr_culture_description' placeholder='Notes'></textarea>
                                <input title='@{culture_buff_notes}' name='attr_culture_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{diplomacy_show_options}' name="attr_diplomacy_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{diplomacy_misc}' name='attr_diplomacy_misc' value=''>
                                <input class='acp' type='checkbox' title='@{diplomacy_acp}' name='attr_diplomacy_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{diplomacy}' name='roll_diplomacy' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Diplomacy}}  {{r1=[[1d20+@{diplomacy_ranks}[RANKS]+[[({0,@{diplomacy_ranks}}>1)*@{diplomacy_class_skill}]][CS]+@{diplomacy_ability}[ABILITY]@{diplomacy_misc}]]}} {{notes=@{diplomacy_description}}}' data-i18n='diplomacy' >DIPLOMACY</button>
                                <input class='mod-debuff' type='radio' title='@{diplomacy_change}' name='attr_diplomacy_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{diplomacy_change}' name='attr_diplomacy_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{diplomacy_change}' name='attr_diplomacy_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{diplomacy}' name='attr_diplomacy' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{diplomacy_ranks}' name='attr_diplomacy_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{diplomacy_class_skill}' name='attr_diplomacy_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{diplomacy_ability}' name='attr_diplomacy_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}' selected='selected'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{diplomacy_acp}' name='attr_diplomacy_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{diplomacy_description}' name='attr_diplomacy_description' placeholder='Notes'></textarea>
                                <input title='@{diplomacy_buff_notes}' name='attr_diplomacy_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{disguise_show_options}' name="attr_disguise_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{disguise_misc}' name='attr_disguise_misc' value=''>
                                <input class='acp' type='checkbox' title='@{disguise_acp}' name='attr_disguise_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{disguise}' name='roll_disguise' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Disguise}}  {{r1=[[1d20+@{disguise_ranks}[RANKS]+[[({0,@{disguise_ranks}}>1)*@{disguise_class_skill}]][CS]+@{disguise_ability}[ABILITY]@{disguise_misc}]]}} {{notes=@{disguise_description}}}' data-i18n='disguise' >DISGUISE</button>
                                <input class='mod-debuff' type='radio' title='@{disguise_change}' name='attr_disguise_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{disguise_change}' name='attr_disguise_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{disguise_change}' name='attr_disguise_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{disguise}' name='attr_disguise' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{disguise_ranks}' name='attr_disguise_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{disguise_class_skill}' name='attr_disguise_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{disguise_ability}' name='attr_disguise_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}' selected='selected'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{disguise_acp}' name='attr_disguise_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{disguise_description}' name='attr_disguise_description' placeholder='Notes'></textarea>
                                <input title='@{disguise_buff_notes}' name='attr_disguise_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{engineering_show_options}' name="attr_engineering_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{engineering_misc}' name='attr_engineering_misc' value=''>
                                <input class='acp' type='checkbox' title='@{engineering_acp}' name='attr_engineering_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{engineering}' name='roll_engineering' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Engineering}}  {{r1=[[1d20+@{engineering_ranks}[RANKS]+[[({0,@{engineering_ranks}}>1)*@{engineering_class_skill}]][CS]+@{engineering_ability}[ABILITY]@{engineering_misc}]]}} {{notes=@{engineering_description}}}' data-i18n='engineering' >ENGINEERING</button>
                                <input class='mod-debuff' type='radio' title='@{engineering_change}' name='attr_engineering_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{engineering_change}' name='attr_engineering_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{engineering_change}' name='attr_engineering_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{engineering}' name='attr_engineering' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{engineering_ranks}' name='attr_engineering_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{engineering_class_skill}' name='attr_engineering_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{engineering_ability}' name='attr_engineering_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}' selected='selected'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{engineering_acp}' name='attr_engineering_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{engineering_description}' name='attr_engineering_description' placeholder='Notes'></textarea>
                                <input title='@{engineering_buff_notes}' name='attr_engineering_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{intimidate_show_options}' name="attr_intimidate_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{intimidate_misc}' name='attr_intimidate_misc' value=''>
                                <input class='acp' type='checkbox' title='@{intimidate_acp}' name='attr_intimidate_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{intimidate}' name='roll_intimidate' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Intimidate}}  {{r1=[[1d20+@{intimidate_ranks}[RANKS]+[[({0,@{intimidate_ranks}}>1)*@{intimidate_class_skill}]][CS]+@{intimidate_ability}[ABILITY]@{intimidate_misc}]]}} {{notes=@{intimidate_description}}}' data-i18n='intimidate' >INTIMIDATE</button>
                                <input class='mod-debuff' type='radio' title='@{intimidate_change}' name='attr_intimidate_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{intimidate_change}' name='attr_intimidate_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{intimidate_change}' name='attr_intimidate_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{intimidate}' name='attr_intimidate' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{intimidate_ranks}' name='attr_intimidate_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{intimidate_class_skill}' name='attr_intimidate_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{intimidate_ability}' name='attr_intimidate_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}' selected='selected'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{intimidate_acp}' name='attr_intimidate_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{intimidate_description}' name='attr_intimidate_description' placeholder='Notes'></textarea>
                                <input title='@{intimidate_buff_notes}' name='attr_intimidate_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{life_science_show_options}' name="attr_life_science_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{life_science_misc}' name='attr_life_science_misc' value=''>
                                <input class='acp' type='checkbox' title='@{life_science_acp}' name='attr_life_science_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{life_science}' name='roll_life_science' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Life Science}}  {{r1=[[1d20+@{life_science_ranks}[RANKS]+[[({0,@{life_science_ranks}}>1)*@{life_science_class_skill}]][CS]+@{life_science_ability}[ABILITY]@{life_science_misc}]]}} {{notes=@{life_science_description}}}' data-i18n='life-science' >LIFE SCIENCE</button>
                                <input class='mod-debuff' type='radio' title='@{life_science_change}' name='attr_life_science_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{life_science_change}' name='attr_life_science_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{life_science_change}' name='attr_life_science_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{life_science}' name='attr_life_science' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{life_science_ranks}' name='attr_life_science_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{life_science_class_skill}' name='attr_life_science_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{life_science_ability}' name='attr_life_science_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}' selected='selected'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{life_science_acp}' name='attr_life_science_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{life_science_description}' name='attr_life_science_description' placeholder='Notes'></textarea>
                                <input title='@{life_science_buff_notes}' name='attr_life_science_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{medicine_show_options}' name="attr_medicine_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{medicine_misc}' name='attr_medicine_misc' value=''>
                                <input class='acp' type='checkbox' title='@{medicine_acp}' name='attr_medicine_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{medicine}' name='roll_medicine' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Medicine}}  {{r1=[[1d20+@{medicine_ranks}[RANKS]+[[({0,@{medicine_ranks}}>1)*@{medicine_class_skill}]][CS]+@{medicine_ability}[ABILITY]@{medicine_misc}]]}} {{notes=@{medicine_description}}}' data-i18n='medicine' >MEDICINE </button>
                                <input class='mod-debuff' type='radio' title='@{medicine_change}' name='attr_medicine_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{medicine_change}' name='attr_medicine_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{medicine_change}' name='attr_medicine_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{medicine}' name='attr_medicine' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{medicine_ranks}' name='attr_medicine_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{medicine_class_skill}' name='attr_medicine_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{medicine_ability}' name='attr_medicine_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}' selected='selected'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{medicine_acp}' name='attr_medicine_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{medicine_description}' name='attr_medicine_description' placeholder='Notes'></textarea>
                                <input title='@{medicine_buff_notes}' name='attr_medicine_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{mysticism_show_options}' name="attr_mysticism_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{mysticism_misc}' name='attr_mysticism_misc' value=''>
                                <input class='acp' type='checkbox' title='@{mysticism_acp}' name='attr_mysticism_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{mysticism}' name='roll_mysticism' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Mysticism}}  {{r1=[[1d20+@{mysticism_ranks}[RANKS]+[[({0,@{mysticism_ranks}}>1)*@{mysticism_class_skill}]][CS]+@{mysticism_ability}[ABILITY]@{mysticism_misc}]]}} {{notes=@{mysticism_description}}}' data-i18n='mysticism' >MYSTICISM </button>
                                <input class='mod-debuff' type='radio' title='@{mysticism_change}' name='attr_mysticism_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{mysticism_change}' name='attr_mysticism_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{mysticism_change}' name='attr_mysticism_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{mysticism}' name='attr_mysticism' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{mysticism_ranks}' name='attr_mysticism_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{mysticism_class_skill}' name='attr_mysticism_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{mysticism_ability}' name='attr_mysticism_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}' selected='selected'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{mysticism_acp}' name='attr_mysticism_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{mysticism_description}' name='attr_mysticism_description' placeholder='Notes'></textarea>
                                <input title='@{mysticism_buff_notes}' name='attr_mysticism_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{perception_show_options}' name="attr_perception_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{perception_misc}' name='attr_perception_misc' value=''>
                                <input class='acp' type='checkbox' title='@{perception_acp}' name='attr_perception_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{perception}' name='roll_perception' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Perception}}  {{r1=[[1d20+@{perception_ranks}[RANKS]+[[({0,@{perception_ranks}}>1)*@{perception_class_skill}]][CS]+@{perception_ability}[ABILITY]@{perception_misc}]]}} {{notes=@{perception_description}}}' data-i18n='perception' >PERCEPTION </button>
                                <input class='mod-debuff' type='radio' title='@{perception_change}' name='attr_perception_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{perception_change}' name='attr_perception_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{perception_change}' name='attr_perception_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{perception}' name='attr_perception' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{perception_ranks}' name='attr_perception_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{perception_class_skill}' name='attr_perception_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{perception_ability}' name='attr_perception_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}' selected='selected'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{perception_acp}' name='attr_perception_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{perception_description}' name='attr_perception_description' placeholder='Notes'></textarea>
                                <input title='@{perception_buff_notes}' name='attr_perception_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{physical_science_show_options}' name="attr_physical_science_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{physical_science_misc}' name='attr_physical_science_misc' value=''>
                                <input class='acp' type='checkbox' title='@{physical_science_acp}' name='attr_physical_science_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{physical_science}' name='roll_physical_science' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Physical Science}}  {{r1=[[1d20+@{physical_science_ranks}[RANKS]+[[({0,@{physical_science_ranks}}>1)*@{physical_science_class_skill}]][CS]+@{physical_science_ability}[ABILITY]@{physical_science_misc}]]}} {{notes=@{physical_science_description}}}' data-i18n='physical-science' >PHYSICAL SCIENCE</button>
                                <input class='mod-debuff' type='radio' title='@{physical_science_change}' name='attr_physical_science_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{physical_science_change}' name='attr_physical_science_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{physical_science_change}' name='attr_physical_science_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{physical_science}' name='attr_physical_science' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{physical_science_ranks}' name='attr_physical_science_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{physical_science_class_skill}' name='attr_physical_science_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{physical_science_ability}' name='attr_physical_science_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}' selected='selected'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{physical_science_acp}' name='attr_physical_science_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{physical_science_description}' name='attr_physical_science_description' placeholder='Notes'></textarea>
                                <input title='@{physical_science_buff_notes}' name='attr_physical_science_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{piloting_show_options}' name="attr_piloting_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{piloting_misc}' name='attr_piloting_misc' value=''>
                                <input class='acp' type='checkbox' title='@{piloting_acp}' name='attr_piloting_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{piloting}' name='roll_piloting' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Piloting}}  {{r1=[[1d20+@{piloting_ranks}[RANKS]+[[({0,@{piloting_ranks}}>1)*@{piloting_class_skill}]][CS]+@{piloting_ability}[ABILITY]@{piloting_misc}]]}} {{notes=@{piloting_description}}}' data-i18n='piloting' >PILOTING</button>
                                <input class='mod-debuff' type='radio' title='@{piloting_change}' name='attr_piloting_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{piloting_change}' name='attr_piloting_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{piloting_change}' name='attr_piloting_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{piloting}' name='attr_piloting' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{piloting_ranks}' name='attr_piloting_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{piloting_class_skill}' name='attr_piloting_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{piloting_ability}' name='attr_piloting_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{piloting_acp}' name='attr_piloting_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{piloting_description}' name='attr_piloting_description' placeholder='Notes'></textarea>
                                <input title='@{piloting_buff_notes}' name='attr_piloting_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-fieldset'>
                            <fieldset class='repeating_profession'>
                                <input type='checkbox' hidden='true' title='@{filter}' name='attr_filter' value='1' checked='checked'>
                                <div class='skill-container'>
                                    <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options"><span>y</span>
                                    <div class='display'>
                                        <input hidden='true' title='@{misc}' name='attr_misc' value=''>
                                        <input class='acp' type='checkbox' title='@{acp}' name='attr_acp' hidden='true' value='1'>
                                        <button class='acp' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}}  {{r1=[[1d20+@{ranks}[RANKS]+[[({0,@{ranks}}>1)*@{class_skill}]][CS]+@{ability}[ABILITY]@{misc}]]}} {{notes=@{description}}}' ><span class='profession-name' type='text' title='@{name}' name='attr_name' value='Profession'>Profession</span></button>
                                        <input class='mod-debuff' type='radio' title='@{change}' name='attr_change' value='-1' hidden='true'>
                                        <input class='mod-normal' type='radio' title='@{change}' name='attr_change' value='0' hidden='true' checked='checked'>
                                        <input class='mod-buff' type='radio' title='@{change}' name='attr_change' value='1' hidden='true'>
                                        <input hidden='true' type='text' title='@{profession}' name='attr_profession' value='0'>
                                        <span class='mod tot modified-attr' readonly='true' type='text' title='@{profession}' name='attr_profession' value='0'>0</span>
                                        <div class='arith'>=</div>
                                        <input class='ranks' type='number' title='@{ranks}' name='attr_ranks' value='0'>
                                        <div class='arith'>+</div>
                                        <div class='class-skill'><input type='checkbox' title='@{class_skill}' name='attr_class_skill' checked='checked' value='3'><span class='cs'>3</span></div>
                                        <div class='arith'>+</div>
                                        <select class='label abi' title='@{ability}' name='attr_ability' style='width; .5em;'>
                                            <option value='@{strength_mod}'>STR</option>
                                            <option value='@{dexterity_mod}'>DEX</option>
                                            <option value='@{constitution_mod}'>CON</option>
                                            <option value='@{intelligence_mod}' selected='selected'>INT</option>
                                            <option value='@{wisdom_mod}'>WIS</option>
                                            <option value='@{charisma_mod}'>CHA</option>
                                        </select>
                                    </div>
                                    <div class='row-options'>
                                        <div class='row'>
                                            <input class='scalable-input' type='text' title='@{name}' name='attr_name' value='Profession'>
                                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                                            <input class='acp' type='checkbox' title='@{acp}' name='attr_acp' value='1'>
                                        </div>
                                        <textarea class='skill-description' title='@{description}' name='attr_description' placeholder='Notes'></textarea>
                                        <input title='@{buff_notes}' name='attr_buff_notes' hidden='true'>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{sense_motive_show_options}' name="attr_sense_motive_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{sense_motive_misc}' name='attr_sense_motive_misc' value=''>
                                <input class='acp' type='checkbox' title='@{sense_motive_acp}' name='attr_sense_motive_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{sense_motive}' name='roll_sense_motive' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Sense Motive}}  {{r1=[[1d20+@{sense_motive_ranks}[RANKS]+[[({0,@{sense_motive_ranks}}>1)*@{sense_motive_class_skill}]][CS]+@{sense_motive_ability}[ABILITY]@{sense_motive_misc}]]}} {{notes=@{sense_motive_description}}}' data-i18n='sense-motive' >SENSE MOTIVE</button>
                                <input class='mod-debuff' type='radio' title='@{sense_motive_change}' name='attr_sense_motive_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{sense_motive_change}' name='attr_sense_motive_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{sense_motive_change}' name='attr_sense_motive_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{sense_motive}' name='attr_sense_motive' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{sense_motive_ranks}' name='attr_sense_motive_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{sense_motive_class_skill}' name='attr_sense_motive_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{sense_motive_ability}' name='attr_sense_motive_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}' selected='selected'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{sense_motive_acp}' name='attr_sense_motive_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{sense_motive_description}' name='attr_sense_motive_description' placeholder='Notes'></textarea>
                                <input title='@{sense_motive_buff_notes}' name='attr_sense_motive_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{sleight_of_hand_show_options}' name="attr_sleight_of_hand_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{sleight_of_hand_misc}' name='attr_sleight_of_hand_misc' value=''>
                                <input class='acp' type='checkbox' title='@{sleight_of_hand_acp}' name='attr_sleight_of_hand_acp' hidden='true' value='1' checked='checked'>
                                <button class='acp' type='roll' title='%{sleight_of_hand}' name='roll_sleight_of_hand' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Sleight of Hand}}  {{r1=[[1d20+@{sleight_of_hand_ranks}[RANKS]+[[({0,@{sleight_of_hand_ranks}}>1)*@{sleight_of_hand_class_skill}]][CS]+@{sleight_of_hand_ability}[ABILITY]@{sleight_of_hand_misc}]]}} {{notes=@{sleight_of_hand_description}}}' data-i18n='sleight-of-hand' >SLEIGHT OF HAND</button>
                                <input class='mod-debuff' type='radio' title='@{sleight_of_hand_change}' name='attr_sleight_of_hand_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{sleight_of_hand_change}' name='attr_sleight_of_hand_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{sleight_of_hand_change}' name='attr_sleight_of_hand_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{sleight_of_hand}' name='attr_sleight_of_hand' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{sleight_of_hand_ranks}' name='attr_sleight_of_hand_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{sleight_of_hand_class_skill}' name='attr_sleight_of_hand_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{sleight_of_hand_ability}' name='attr_sleight_of_hand_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{sleight_of_hand_acp}' name='attr_sleight_of_hand_acp' value='1' checked='checked'>
                                </div>
                                <textarea class='skill-description' title='@{sleight_of_hand_description}' name='attr_sleight_of_hand_description' placeholder='Notes'></textarea>
                                <input title='@{sleight_of_hand_buff_notes}' name='attr_sleight_of_hand_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{stealth_show_options}' name="attr_stealth_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{stealth_misc}' name='attr_stealth_misc' value=''>
                                <input class='acp' type='checkbox' title='@{stealth_acp}' name='attr_stealth_acp' hidden='true' value='1' checked='checked'>
                                <button class='acp' type='roll' title='%{stealth}' name='roll_stealth' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Stealth}}  {{r1=[[1d20+@{stealth_ranks}[RANKS]+[[({0,@{stealth_ranks}}>1)*@{stealth_class_skill}]][CS]+@{stealth_ability}[ABILITY]@{stealth_misc}]]}} {{notes=@{stealth_description}}}' data-i18n='stealth' >STEALTH</button>
                                <input class='mod-debuff' type='radio' title='@{stealth_change}' name='attr_stealth_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{stealth_change}' name='attr_stealth_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{stealth_change}' name='attr_stealth_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{stealth}' name='attr_stealth' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{stealth_ranks}' name='attr_stealth_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{stealth_class_skill}' name='attr_stealth_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{stealth_ability}' name='attr_stealth_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{stealth_acp}' name='attr_stealth_acp' value='1' checked='checked'>
                                </div>
                                <textarea class='skill-description' title='@{stealth_description}' name='attr_stealth_description' placeholder='Notes'></textarea>
                                <input title='@{stealth_buff_notes}' name='attr_stealth_buff_notes' hidden='true'>
                            </div>
                        </div>
                        <div class='skill-container'>
                            <input class="show-options" type="checkbox" title='@{survival_show_options}' name="attr_survival_show_options"><span>y</span>
                            <div class='display'>
                                <input hidden='true' title='@{survival_misc}' name='attr_survival_misc' value=''>
                                <input class='acp' type='checkbox' title='@{survival_acp}' name='attr_survival_acp' hidden='true' value='1'>
                                <button class='acp' type='roll' title='%{survival}' name='roll_survival' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Survival}}  {{r1=[[1d20+@{survival_ranks}[RANKS]+[[({0,@{survival_ranks}}>1)*@{survival_class_skill}]][CS]+@{survival_ability}[ABILITY]@{survival_misc}]]}} {{notes=@{survival_description}}}' data-i18n='survival' >SURVIVAL</button>
                                <input class='mod-debuff' type='radio' title='@{survival_change}' name='attr_survival_change' value='-1' hidden='true'>
                                <input class='mod-normal' type='radio' title='@{survival_change}' name='attr_survival_change' value='0' hidden='true' checked='checked'>
                                <input class='mod-buff' type='radio' title='@{survival_change}' name='attr_survival_change' value='1' hidden='true'>
                                <span class='mod tot modified-attr' readonly='true' type='text' title='@{survival}' name='attr_survival' value='0'>0</span>
                                <div class='arith'>=</div>
                                <input class='ranks' type='number' title='@{survival_ranks}' name='attr_survival_ranks' value='' >
                                <div class='arith'>+</div>
                                <div class='class-skill'><input type='checkbox' title='@{survival_class_skill}' name='attr_survival_class_skill' value='3'><span class='cs'>3</span></div>
                                <div class='arith'>+</div>
                                <select class='label abi' title='@{survival_ability}' name='attr_survival_ability' style='width; .5em;'>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}' selected='selected'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                            </div>
                            <div class='row-options'>
                                <div class='row'>
                                    <span class='skill-span label' data-i18n='acp'>ACP</span>
                                    <input class='acp' type='checkbox' title='@{survival_acp}' name='attr_survival_acp' value='1'>
                                </div>
                                <textarea class='skill-description' title='@{survival_description}' name='attr_survival_description' placeholder='Notes'></textarea>
                                <input title='@{suvival_buff_notes}' name='attr_suvival_buff_notes' hidden='true'>
                            </div>
                        </div>
                    </div>
                    <div class='section-container always-glow border left'></div>
                    <div class='section-container always-glow border top'></div>
                    <div class='section-container always-glow border right'></div>
                    <div class='section-container always-glow border bottom'></div>
                    <div class='section-container always-glow border bottom-left corner'></div>
                    <div class='section-container always-glow border top-right corner'></div>
                </div>
                <div class='attacks section-container'>
                    <h1 class='section label' data-i18n='attacks'>ATTACKS</h1>
                    <div class='section always-glow border left'></div>
                    <div class='section always-glow border top'></div>
                    <div class='section always-glow border right'></div>
                    <div class='section always-glow border bottom-left corner'></div>
                    <div class='section always-glow border top-right corner'></div>
                    <div class='weapons section-container'>
                        <fieldset class='repeating_attack'>
                            <input class='filter' type='checkbox' hidden='true' title='@{filter}' name='attr_filter' value='1' checked='checked'>
                            <div class='filter-container attack'>
                                
                                <input type='text' hidden='true' title='@{misc}' name='attr_misc' value=''>
                                <input type='text' hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                
                                <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" value='1' checked="checked"><span>y</span>
                                <div class='row-options'>
                                    <div class='row first-row'>
                                        <span class='label' data-i18n='name-u'>NAME</span>
                                        <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder='Laser Pistol' value=''>
                                        <span class='label' data-i18n='lvl'>LVL</span>
                                        <input class='atk-level' type='text' title='@{level}' name='attr_level' value='0'>
                                    </div>
                                    <div class='row'>
                                        <select class='label proficiency' title='@{proficiency}' name='attr_proficiency'>
                                            <option value='no' data-i18n='Not-Proficient'>NOT PROFICIENT</option>
                                            <option value='yes' data-i18n='proficient' selected='selected'>PROFICIENT</option>
                                            <option value='specialized' data-i18n='specialized'>SPECIALIZED</option>
                                        </select>
                                        <input hidden='true' type='text' title='@{proficiency_value}' name='attr_proficiency_value' value='0'>
                                        <input hidden='true'  type='text' title='@{damage_proficiency_value}' name='attr_damage_proficiency_value' value='0'>
                                        <span class='label' data-i18n='category'>CATEGORY</span>
                                        <input class='weapon-cat scalable-input' type='text' title='@{category}' name='attr_category' placeholder='Longarm' value=''>
                                    </div>
                                    <div class='row'>
                                        <span class='label' data-i18n='atk-u'>ATK</span>
                                        <select class='label atk-ability abi' title='@{ability}' name='attr_ability'>
                                            <option value='0' selected='na' selected='selected'>N/A</option>
                                            <option value='@{strength_mod}'>STR</option>
                                            <option value='@{dexterity_mod}'>DEX</option>
                                            <option value='@{constitution_mod}'>CON</option>
                                            <option value='@{intelligence_mod}'>INT</option>
                                            <option value='@{wisdom_mod}'>WIS</option>
                                            <option value='@{charisma_mod}'>CHA</option>
                                        </select>
                                        <input hidden='true' type='text' title='@{ability}' name='attr_ability' value='0'>
                                        <span class='arith'>+</span>
                                        <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                        <input class='atk-misc misc scalable-input' type='text' title='@{bonus}' name='attr_bonus' placeholder='+@{attr}/2 + ?{Query}' value=''>
                                    </div>
                                    <div class='row'>
                                        <span class='label' data-i18n='rng'>RNG</span>
                                        <input class='atk-range scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft' value=''>
                                        <select class='label atk-range-type' title='@{engagement_range}' name='attr_engagement_range'>
                                            <option value='melee' data-i18n='melee' selected='selected'>MELEE</option>
                                            <option value='ranged' data-i18n='ranged'>RANGED</option>
                                        </select>
                                    </div>
                                    <div class='row'>
                                        <span class='label' data-i18n='dmg'>DMG</span>
                                        <input class='dmg-dice scalable-input' type='text' name=attr_damage_dice placeholder='1d8' value=''><span>+</span>
                                        <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                            <option value='0' selected='selected'>N/A</option>
                                            <option value='@{strength_mod}'>STR</option>
                                            <option value='@{dexterity_mod}'>DEX</option>
                                            <option value='@{constitution_mod}'>CON</option>
                                            <option value='@{intelligence_mod}'>INT</option>
                                            <option value='@{wisdom_mod}'>WIS</option>
                                            <option value='@{charisma_mod}'>CHA</option>
                                        </select>
                                    </div>
                                    <div class='row'>
                                        <span class='label' data-i18n='type'>TYPE</span>
                                        <input class='atk-type scalable-input' type='text' title='@{type}' name='attr_type' placeholder='Fire' value=''>
                                        <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                        <input class='atk-crit scalable-input' type='text' title='@{crit}' name='attr_crit' placeholder='Burn' value=''>
                                    </div>
                                    <div class='row'>
                                        <input class='label scalable-input' data-i18n-placeholder='ammo' title='@{ammo_type}' name='attr_ammo_type' value='' type='text' placeholder='ammo' >
                                        <input title='@{ammo}' name='attr_ammo' type='number' value=''>
                                        <span class='label'>/</span>
                                        <input title='@{ammo_max}' name='attr_ammo_max' type='number' value=''>
                                    </div>
                                    <div class='row'>
                                        <span class='label' data-i18n='usage'>USAGE</span>
                                        <input class='atk-usage scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='1 charge' value=''>
                                        <span class='label' data-i18n='special'>SPECIAL</span>
                                        <input class='atk-special scalable-input' type='text' title='@{special}' name='attr_special' placeholder='heirloom' value=''>
                                    </div>
                                    <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                                    <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                    <div class='field-container'>
                                        <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                        <div class='field row'>
                                            <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                        </div>
                                        <div class='field row'>
                                            <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}' checked='checked'><span class='label'  data-i18n='query'>QUERY</span></label>
                                            <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                            <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0'><span class='label'  data-i18n='never'>NEVER</span></label>
                                        </div>
                                        <div class='field row'>
                                            <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                            <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                        </div>
                                        <div class='field row'>
                                            <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                            <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                        </div>
                                    </div>
                                    <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                    <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                    <div class='row field-container mod-container'>
                                        <input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                        <textarea class='atk-description' title='@{attacher}' name='attr_attacher' ></textarea>
                                    </div>
                                    <div class='row'>
                                        <textarea class='atk-description scalable-input' title='@{description}' name='attr_description' placeholder='Description' value=''></textarea>
                                    </div>
                                </div>
                                <div class='display'>
                                    <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_attack}{{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1name=@{name}}} {{r1=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{misc}@{bonus}]]}} {{damage1type=@{type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit1effect=@{crit}}} {{r2name=@{name}}} {{r2=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+[[@{full_attack_penalty}]][FULL ATTACK]@{misc}@{bonus}]]}} {{damage2type=@{type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit2effect=@{crit}}} {{r3name=@{name}}} {{r3=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+@{full_attack_penalty}[FULL ATTACK]@{misc}@{bonus}]]}} {{damage3type=@{type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit3effect=@{crit}}} {{r4name=@{name}}} {{r4=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+@{full_attack_penalty}[FULL ATTACK]@{misc}@{bonus}]]}} {{damage4type=@{type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit4effect=@{crit}}} {{r5name=@{name}}} {{r5=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+@{full_attack_penalty}[FULL ATTACK]@{misc}@{bonus}]]}} {{damage5type=@{type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit5effect=@{crit}}} {{range=@{range}}} {{ammo_type=@{ammo_type}}} {{curr_ammo=@{ammo}}} {{rightbanner=@{special}}} {{notes=@{description}}} @{attacher}'>
                                        <span class='label' title='@{name}' name='attr_name'></span>
                                        <div class='attr-total-container'>
                                            <input class='mod-debuff' type='radio' title='@{total_change}' name='attr_total_change' value='-1' hidden='true'>
                                            <input class='mod-normal' type='radio' title='@{total_change}' name='attr_total_change' value='0' hidden='true' checked='checked'>
                                            <input class='mod-buff' type='radio' title='@{total_change}' name='attr_total_change' value='1' hidden='true'>
                                            <span class='label modified-attr' title='@{total}' name='attr_total' value='0'>0</span>
                                        </div>
                                        <span class='label'>(</span>
                                        <div class='attr-total-container'>
                                            <input class='mod-debuff' type='radio' title='@{damage_total_change}' name='attr_damage_total_change' value='-1' hidden='true'>
                                            <input class='mod-normal' type='radio' title='@{damage_total_change}' name='attr_damage_total_change' value='0' hidden='true' checked='checked'>
                                            <input class='mod-buff' type='radio' title='@{damage_total_change}' name='attr_damage_total_change' value='1' hidden='true'>
                                            <span class='label modified-attr' title='@{damage_total}' name='attr_damage_total' value='0'>0</span>
                                        </div>
                                        <span class='label' title='@{type}' name='attr_type'></span>
                                        <span class='label'>)</span>
                                    </button>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class='section-container always-glow border left'></div>
                    <div class='section-container always-glow border top'></div>
                    <div class='section-container always-glow border right'></div>
                    <div class='section-container always-glow border bottom'></div>
                    <div class='section-container always-glow border bottom-left corner'></div>
                    <div class='section-container always-glow border top-right corner'></div>
                </div>
                <div class='items section-container'>
                    <h1 class='section label' data-i18n='equipment'>EQUIPMENT</h1>
                    <div class='section always-glow border left'></div>
                    <div class='section always-glow border top'></div>
                    <div class='section always-glow border right'></div>
                    <div class='section always-glow border bottom-left corner'></div>
                    <div class='section always-glow border top-right corner'></div>
                    <div class='equipment section-container'>
                        <input type='radio' title='@{encumber_level}' name='attr_encumber_level' hidden='true' value='0' checked='checked'>
                        <div class='bulk-container carried'>
                            <input class='number scalable-input' title='@{carried_bulk}' name='attr_carried_bulk' readonly='true' value='0'>
                            <span class='label' data-i18n='carried'>CARRIED</span>
                        </div>
                        <input class='encumbered' type='radio' title='@{encumber_level}' name='attr_encumber_level' hidden='true' value='1'>
                        <div class='bulk-container encumber'>
                            <input class='mod-debuff' type='radio' title='@{encumber_bulk_change}' name='attr_encumber_bulk_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{encumber_bulk_change}' name='attr_encumber_bulk_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{encumber_bulk_change}' name='attr_encumber_bulk_change' value='1' hidden='true'>
                            <span class='number modified-attr' name=attr_encumber_bulk readonly='true' value='5'>5</span>
                            <span class='label' data-i18n='encumber'>ENCUMBER</span>
                        </div>
                        <input class='overburdened' type='radio' title='@{encumber_level}' name='attr_encumber_level' hidden='true' value='2'>
                        <div class='bulk-container overburden'>
                            <input class='mod-debuff' type='radio' title='@{overburden_bulk_change}' name='attr_overburden_bulk_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{overburden_bulk_change}' name='attr_overburden_bulk_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{overburden_bulk_change}' name='attr_overburden_bulk_change' value='1' hidden='true'>
                            <span class='number modified-attr' title='@{overburden_bulk}' name='attr_overburden_bulk' readonly='true' value='10'>10</span>
                            <span class='label' data-i18n='over'>OVER</span>
                        </div>
                        <div class='credits-container credits'>
                            <input type='number' title='@{credits}' name='attr_credits' value='0'>
                            <span class='label' data-i18n='credits'>CREDITS</span>
                        </div>
                        <div class='credits-container wealth'>
                            <input type='number' title='@{wealth}' name='attr_wealth' readonly='true' value='0'>
                            <span class='label' data-i18n='wealth'>WEALTH</span>
                        </div>
                        <div class='credits-container upb'>
                            <input type='number' title='@{upb}' name='attr_upb' value='0'>
                            <span class='label' data-i18n='upbs'>UPBs</span>
                        </div>
                        <div class='item-container'>
                            <fieldset class='repeating_item'>
                                <input class='filter' type='checkbox' hidden='true' title='@{filter}' name='attr_filter' value='1' checked='checked'>
                                <div class='filter-container item'>
                                    <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                                    <div class='row-options'>
                                        <div class='row'>
                                            <span class='label' data-i18n='name-u'>NAME</span>
                                            <input class='item-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder='Laser Pistol'>
                                        </div>
                                        <div class='row'>
                                            <select class='item-equip' title='@{equipped}' name='attr_equipped' >
                                                <option value='equipped' selected='selected'>EQUIPPED</option>
                                                <option value='carried'>CARRIED</option>
                                                <option value='not carried'>NOT CARRIED</option>
                                            </select>
                                        </div>
                                        <div class='row'>
                                            <span class='label' data-i18n='num'>NUM</span>
                                            <input class='item-quantity scalable-input' type='text' title='@{quantity}' name='attr_quantity' placeholder='1'>
                                            <span class='label' data-i18n='bulk'>BULK</span>
                                            <input class='item-quantity scalable-input' type='text' title='@{bulk}' name='attr_bulk' placeholder='1'>
                                            <span class='label' data-i18n='cost'>COST</span>
                                            <input class='item-quantity scalable-input' type='text' title='@{cost}' name='attr_cost' placeholder='1'>
                                        </div>
                                        <label><input class='field-tab mods-tab item-mods' type='checkbox' title='@{mods_checkbox}' name='attr_mods_checkbox' value='1' hidden='true'><span class='label field' data-i18n='mods'>MODS</span></label>
                                        <input class='field-tab' type='checkbox' title='@{mods_checkbox}' name='attr_mods_checkbox' value='1' hidden='true'>
                                        <div class='row field-container mod-container'>
                                            <input class='field-tab' type='checkbox' title='@{mods_checkbox}' name='attr_mods_checkbox' value='1' hidden='true'>
                                            <textarea class='field row item-mods scalable-input' type='text' title='@{mods}' name='attr_mods'placeholder='+X to EAC'></textarea>
                                        </div>
                                        <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                        <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                        <div class='row field-container mod-container'>
                                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                            <textarea class='item-description scalable-input' title='@{attacher}' name='attr_attacher' ></textarea>
                                        </div>
                                        <div class='row'>
                                            <textarea class='item-description' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                                        </div>
                                    </div>
                                    <div class='button-description'>
                                        <div class='display'>
                                            <button class='summary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{r1name=Quantity}} {{r1=@{quantity}}} {{r2name=Bulk}} {{r2=@{bulk}}} {{r3name=Value}} {{r3=@{cost}}} {{notes=@{description}}} @{attacher}'><span title='@{name}' name='attr_name'></span></button>
                                        </div>
                                        <span title='@{description}' name='attr_description'></span>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                    <div class='section-container always-glow border left'></div>
                    <div class='section-container always-glow border top'></div>
                    <div class='section-container always-glow border right'></div>
                    <div class='section-container always-glow border bottom'></div>
                    <div class='section-container always-glow border bottom-left corner'></div>
                    <div class='section-container always-glow border top-right corner'></div>
                </div>
                <div class='section-container abilities'>
                    <h1 class='section label' data-i18n='abilities'>ABILITIES</h1>
                    <div class='section always-glow border left'></div>
                    <div class='section always-glow border top'></div>
                    <div class='section always-glow border right'></div>
                    <div class='section always-glow border bottom-left corner'></div>
                    <div class='section always-glow border top-right corner'></div>
                    <div class='abilities-container section-container'>
                        <fieldset class='repeating_ability'><input hidden='true' type='text' title='@{attack_total}' name='attr_attack_total'><input hidden='true' type='text' title='@{damage_total}' name='attr_damage_total'>
                            <input class='filter' type='checkbox' hidden='true' title='@{filter}' name='attr_filter' value='1' checked='checked'>
                            <div class='filter-container ability'>
                               <!--Hidden Ability Attributes -->
                               <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                               <input type='text' hidden='true' title='@{attack_damage_misc}' name='attr_attack_damage_misc' value=''>
                               <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                               <!--Shown Ability Attributes -->
                                <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                                <div class='row-options'>
                                    <div class='row first-row'>
                                        <span class='label' data-i18n='name-u'>NAME</span>
                                        <input class='scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                                        <select class='freq-select' title='@{frequency}' name='attr_frequency'>
                                            <option value='constant' data-i18n='constant' selected='selected'>CONSTANT</option>
                                            <option value='at will' data-i18n='at-will'>AT WILL</option>
                                            <option value='daily limit' data-i18n='x/day'>X/DAY</option>
                                        </select>
                                    </div>
                                    <div class='row'>
                                        <span class='label' data-i18n='source'>SOURCE</span>
                                        <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Operative'>
                                        <select title='@{type}' name='attr_type'>
                                            <option value='EX' data-i18n='ex'>EX</option>
                                            <option value='SU' data-i18n='su'>SU</option>
                                            <option value='SP' data-i18n='sp'>SP</option>
                                        </select>
                                    </div>
                                    <div class='row'>
                                        <span class='label' data-i18n='target'>TARGET</span>
                                        <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                        <span class='label' data-i18n='rng'>RNG</span>
                                        <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                    </div>
                                    <div class='row'>
                                        <span class='label' data-i18n='duration'>DURATION</span>
                                        <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                                    </div>
                                    <div class='row'>
                                        <input type='radio' hidden='true' title='@{uses_freq_dependency}' name='attr_uses_freq_dependency' class='freq-check constant' value='constant' checked='checked'>
                                        <input type='radio' hidden='true' title='@{uses_freq_dependency}' name='attr_uses_freq_dependency' class='freq-check' value='at will'>
                                        <input type='radio' hidden='true' title='@{uses_freq_dependency}' name='attr_uses_freq_dependency' class='freq-check daily-limit' value='daily limit'>
                                        <input class='freq-check daily-limit' type='number' title='@{uses}' name='attr_uses' value='0'>
                                        <span class='freq-check daily-limit label'>/</span>
                                        <div class='attr-total-container freq-check daily-limit'>
                                            <input class='base-attr ability-uses' type='text' title='@{uses_max_base}' name='attr_uses_max_base' value='10' >
                                            <input class='mod-debuff' type='radio' title='@{uses_change}' name='attr_uses_change' value='-1' hidden='true'>
                                            <input class='mod-normal' type='radio' title='@{uses_change}' name='attr_uses_change' value='0' hidden='true' checked='checked'>
                                            <input class='mod-buff' type='radio' title='@{uses_change}' name='attr_uses_change' value='1' hidden='true'>
                                            <span class='modified-attr attr ability-uses' readonly='true' type='text' title='@{uses_max}' name='attr_uses_max' value='10'>10</span>
                                        </div>
                                        <span class='freq-check daily-limit label' data-i18n='_-daily-uses'>Daily Uses</span>
                                    </div>
                                    <input type='radio' hidden='true' title='@{usage_freq_dependency}' name='attr_usage_freq_dependency' class='freq-check constant' value='constant' checked='checked'>
                                    <input type='radio' hidden='true' title='@{usage_freq_dependency}' name='attr_usage_freq_dependency' class='freq-check at-will' value='at will'>
                                    <input type='radio' hidden='true' title='@{usage_freq_dependency}' name='attr_usage_freq_dependency' class='freq-check daily-limit' value='daily limit'>
                                    <div class='row freq-check at-will daily-limit'>
                                        <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                        <input class='scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='move action, 1 resolve point'>
                                    </div>
                                    <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                                    <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                    <div class='field-container'>
                                        <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                        <div class='field row'>
                                            <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                                <option value='0' selected='na' selected='selected'>N/A</option>
                                                <option value='@{strength_mod}'>STR</option>
                                                <option value='@{dexterity_mod}'>DEX</option>
                                                <option value='@{constitution_mod}'>CON</option>
                                                <option value='@{intelligence_mod}'>INT</option>
                                                <option value='@{wisdom_mod}'>WIS</option>
                                                <option value='@{charisma_mod}'>CHA</option>
                                            </select>
                                            <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                            <span class='arith'>+</span>
                                            <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                            <input class='scalable-input' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                        </div>
                                    </div>
                                    <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                                    <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                    <div class='field-container'>
                                        <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                        <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                        <div class='field row'>
                                            <input class='scalable-input' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                            <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                                <option value='0' selected='selected'>N/A</option>
                                                <option value='@{strength_mod}'>STR</option>
                                                <option value='@{dexterity_mod}'>DEX</option>
                                                <option value='@{constitution_mod}'>CON</option>
                                                <option value='@{intelligence_mod}'>INT</option>
                                                <option value='@{wisdom_mod}'>WIS</option>
                                                <option value='@{charisma_mod}'>CHA</option>
                                            </select>
                                            <input type='text' hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                        </div>
                                        <div class='field row'>
                                            <span class='label' data-i18n='type'>TYPE</span>
                                            <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                            <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                            <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                        </div>
                                    </div>
                                    <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                                    <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                    <div class='field-container'>
                                        <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                        <div class='field row'>
                                            <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                        </div>
                                        <div class='field row'>
                                            <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                            <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                            <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                        </div>
                                        <div class='field row'>
                                            <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                            <input class='scalable-input' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                        </div>
                                        <div class='field row'>
                                            <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                            <input class='scalable-input' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                        </div>
                                    </div>
                                    <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                                    <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                    <div class='field-container'>
                                        <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                        <div class='field row'>
                                            <select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                                <option value='0' selected='na' selected='selected'>N/A</option>
                                                <option value='@{strength_mod}'>STR</option>
                                                <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                                <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                                <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                                <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                                <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                            </select>
                                            <span class='label' data-i18n='based-dc_'>Based DC </span>
                                            <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                            <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                            <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                            <input title='@{dc}' name='attr_dc' type='number' value='10' hidden='true'>
                                            <span class='save-dc modified-attr label' title='@{dc}' name='attr_dc' value='10'>10</span>
                                            <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                                <option value='' selected='selected'>-</option>
                                                <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                                <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                                <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                            </select>
                                        </div>
                                        <div class='field row'>
                                            <textarea title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                        </div>
                                        <div class='field row'>
                                            <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                        </div>
                                        <div class='field row'>
                                            <textarea title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                        </div>
                                        <div class='field row'>
                                        </div>
                                    </div>
                                    <label><input class='field-tab mods-tab item-mods' type='checkbox' title='@{mods_checkbox}' name='attr_mods_checkbox' value='1' hidden='true'><span class='label field' data-i18n='mods'>MODS</span></label>
                                    <input class='field-tab' type='checkbox' title='@{mods_checkbox}' name='attr_mods_checkbox' value='1' hidden='true'>
                                    <div class='row field-container mod-container'>
                                        <input class='field-tab' type='checkbox' title='@{mods_checkbox}' name='attr_mods_checkbox' value='1' hidden='true'>
                                        <textarea class='field row scalable-input' type='text' title='@{mods}' name='attr_mods'placeholder='+X to EAC'></textarea>
                                    </div>
                                    <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                    <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                    <div class='row field-container mod-container'>
                                        <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                        <textarea class='field row scalable-input' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                                    </div>
                                    <div class='row'>
                                        <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                                    </div>
                                </div>
                                <div class='display'>
                                    <input type='radio' hidden='true' title='@{toggle_freq_dependency}' name='attr_toggle_freq_dependency' class='freq-check' value='constant' checked='checked'>
                                    <input type='radio' hidden='true' title='@{toggle_freq_dependency}' name='attr_toggle_freq_dependency' class='freq-check at-will' value='at will'>
                                    <input type='radio' hidden='true' title='@{toggle_freq_dependency}' name='attr_toggle_freq_dependency' class='freq-check daily-limit' value='daily limit'>
                                    <input class='freq-check at-will daily-limit' type='checkbox' title='@{toggle}' name='attr_toggle' value='enabled'>
                                    <div class='button-description'>
                                        <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{rightbanner=@{source}}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}} {{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{type}}} {{notes=@{description}}} @{attacher}'>
                                            <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span>
                                        </button>
                                        <span title='@{description}' name='attr_description'></span>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                    <div class='section-container always-glow border left'></div>
                    <div class='section-container always-glow border top'></div>
                    <div class='section-container always-glow border right'></div>
                    <div class='section-container always-glow border bottom'></div>
                    <div class='section-container always-glow border bottom-left corner'></div>
                    <div class='section-container always-glow border top-right corner'></div>
                </div>
            </div>
            <div class='page spells'>
                <div class='column-1'>
                    <div class='section-container spells-per-day-container'>
                        <h1 class='section label' data-i18n='spellclasses'>SPELLCLASSES</h1>
                        <div class='section2'><span class='label' data-i18n='caster-level_'>CASTER LEVEL </span>
                            <input class='mod-debuff' type='radio' title='@{caster_level_change}' name='attr_caster_level_change' value='-1' hidden='true'>
                            <input class='mod-normal' type='radio' title='@{caster_level_change}' name='attr_caster_level_change' value='0' hidden='true' checked='checked'>
                            <input class='mod-buff' type='radio' title='@{caster_level_change}' name='attr_caster_level_change' value='1' hidden='true'>
                            <span class='label modified-attr' title='@{caster_level}' name='attr_caster_level' value='0'>0</span>
                        </div>
                        <div class='section always-glow border left'></div>
                        <div class='section always-glow border top'></div>
                        <div class='section always-glow border right'></div>
                        <div class='section always-glow border bottom-left corner'></div>
                        <div class='section always-glow border top-right corner'></div>
                        <div class='section-container spellclass-details'>
                            <div class='gutter'></div>
                            <!-- Caster 1 -->
                            <input class='class-1 class-spells' title='@{class_1_spells}' name='attr_class_1_spells' type='checkbox' value='1' hidden='true'>
                            <div class='spellclass-container'>
                                <input class='class-1 class-show' title='@{class_1_show}' name='attr_class_1_show' titel='@{class_1_show}' type=checkbox checked='checked' value='1'>
                                <span class='class-1 class-name' title='@{class_1_name}' name='attr_class_1_name' placeholder='1st Class' readonly='true'>1st Class</span>
                                <span class='class-1 class-num-level' title='@{class_1_level}' name='attr_class_1_level' placeholder='1' readonly='true'>5</span>
                                <span class='casting-ability' data-i18n='ability'>ABILITY</span>
                                <select class='class-1 class-ability' title='@{class_1_casting_ability}' name='attr_class_1_casting_ability' >
                                    <option value='@{strength_mod}' selected='selected'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                                <span CLASS='spell-progression' data-i18n='progress'>PROGRESS</span>
                                <select class='class-1 class-spell-progression' title='@{class_1_spell_progression}' name='attr_class_1_spell_progression' >
                                    <option value='half'>HALF</option>
                                    <option value='partial' selected='selected'>PARTIAL</option>
                                    <option value='full_prep'>FULL PREP</option>
                                    <option value='full_spont'>FULL SPONT</option>
                                </select>
                                <input type='radio' class='cantrips-only' title='@{class_1_max_spell}' name='attr_class_1_max_spell' value='0' checked='checked' hidden='true'>
                                <input type='radio' class='spell1' title='@{class_1_max_spell}' name='attr_class_1_max_spell' value='1' hidden='true'>
                                <input type='radio' class='spell2' title='@{class_1_max_spell}' name='attr_class_1_max_spell' value='2' hidden='true'>
                                <input type='radio' class='spell3' title='@{class_1_max_spell}' name='attr_class_1_max_spell' value='3' hidden='true'>
                                <input type='radio' class='spell4' title='@{class_1_max_spell}' name='attr_class_1_max_spell' value='4' hidden='true'>
                                <input type='radio' class='spell5' title='@{class_1_max_spell}' name='attr_class_1_max_spell' value='5' hidden='true'>
                                <input type='radio' class='spell6' title='@{class_1_max_spell}' name='attr_class_1_max_spell' value='6' hidden='true'>
                                <input type='radio' class='spell7' title='@{class_1_max_spell}' name='attr_class_1_max_spell' value='7' hidden='true'>
                                <input type='radio' class='spell8' title='@{class_1_max_spell}' name='attr_class_1_max_spell' value='8' hidden='true'>
                                <input type='radio' class='spell9' title='@{class_1_max_spell}' name='attr_class_1_max_spell' value='9' hidden='true'>
                                <span class='label daily' data-i18n='spells-per-day'>SPELLS PER DAY</span>
                                <span class='label num aspell0'>0</span>
                                <input class='label current aspell0' title='@{class_1_cantrips_per_day}' name='attr_class_1_cantrips_per_day' type='text'><span class='label slash aspell0'>/</span>
                                <input class='label max aspell0' title='@{class_1_cantrips_per_day_max}' name='attr_class_1_cantrips_per_day_max' type='text' type='text'>
                                <span class='label num class-spells-day aspell1'>1</span>
                                <input class='label class-spells-day current aspell1' title='@{class_1_level_1_spells_per_day}' name='attr_class_1_level_1_spells_per_day' type='text'><span class='label class-spells-day slash aspell1'>/</span>
                                <input class='label class-spells-day max aspell1' title='@{class_1_level_1_spells_per_day_max}' name='attr_class_1_level_1_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell2'>2</span>
                                <input class='label class-spells-day current aspell2' title='@{class_1_level_2_spells_per_day}' name='attr_class_1_level_2_spells_per_day' type='text'><span class='label class-spells-day slash aspell2'>/</span>
                                <input class='label class-spells-day max aspell2' title='@{class_1_level_2_spells_per_day_max}' name='attr_class_1_level_2_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell3'>3</span>
                                <input class='label class-spells-day current aspell3' title='@{class_1_level_3_spells_per_day}' name='attr_class_1_level_3_spells_per_day' type='text'><span class='label class-spells-day slash aspell3'>/</span>
                                <input class='label class-spells-day max aspell3' title='@{class_1_level_3_spells_per_day_max}' name='attr_class_1_level_3_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell4'>4</span>
                                <input class='label class-spells-day current aspell4' title='@{class_1_level_4_spells_per_day}' name='attr_class_1_level_4_spells_per_day' type='text'><span class='label class-spells-day slash aspell4'>/</span>
                                <input class='label class-spells-day max aspell4' title='@{class_1_level_4_spells_per_day_max}' name='attr_class_1_level_4_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell5'>5</span>
                                <input class='label class-spells-day current aspell5' title='@{class_1_level_5_spells_per_day}' name='attr_class_1_level_5_spells_per_day' type='text'><span class='label class-spells-day slash aspell5'>/</span>
                                <input class='label class-spells-day max aspell5' title='@{class_1_level_5_spells_per_day_max}' name='attr_class_1_level_5_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell6'>6</span>
                                <input class='label class-spells-day current aspell6' title='@{class_1_level_6_spells_per_day}' name='attr_class_1_level_6_spells_per_day' type='text'><span class='label class-spells-day slash aspell6'>/</span>
                                <input class='label class-spells-day max aspell6' title='@{class_1_level_6_spells_per_day_max}' name='attr_class_1_level_6_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell7'>7</span>
                                <input class='label class-spells-day current aspell7' title='@{class_1_level_7_spells_per_day}' name='attr_class_1_level_7_spells_per_day' type='text'><span class='label class-spells-day slash aspell7'>/</span>
                                <input class='label class-spells-day max aspell7' title='@{class_1_level_7_spells_per_day_max}' name='attr_class_1_level_7_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell8'>8</span>
                                <input class='label class-spells-day current aspell8' title='@{class_1_level_8_spells_per_day}' name='attr_class_1_level_8_spells_per_day' type='text'><span class='label class-spells-day slash aspell8'>/</span>
                                <input class='label class-spells-day max aspell8' title='@{class_1_level_8_spells_per_day_max}' name='attr_class_1_level_8_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell9'>9</span>
                                <input class='label class-spells-day current aspell9' title='@{class_1_level_9_spells_per_day}' name='attr_class_1_level_9_spells_per_day' type='text'><span class='label class-spells-day slash aspell9'>/</span>
                                <input class='label class-spells-day max aspell9' title='@{class_1_level_9_spells_per_day_max}' name='attr_class_1_level_9_spells_per_day_max' type='text'>
                            </div>
                            <!-- Caster 2 -->
                            <input class='class-2 class-spells' title='@{class_2_spells}' name='attr_class_2_spells' type='checkbox' value='1' hidden='true'>
                            <div class='spellclass-container'>
                                <input class='class-2 class-show' title='@{class_2_show}' name='attr_class_2_show' titel='@{class_2_show}' type=checkbox checked='checked' value='1'>
                                <span class='class-2 class-name' title='@{class_2_name}' name='attr_class_2_name' placeholder='1st Class' readonly='true'></span>
                                <span class='class-2 class-num-level' title='@{class_2_level}' name='attr_class_2_level' placeholder='1' readonly='true'></span>
                                <span class='casting-ability' data-i18n='ability'>ABILITY</span>
                                <select class='class-2 class-ability' title='@{class_2_casting_ability}' name='attr_class_2_casting_ability' >
                                    <option value='@{strength_mod}' selected='selected'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                                <span CLASS='spell-progression' data-i18n='progress'>PROGRESS</span>
                                <select class='class-2 class-spell-progression' title='@{class_2_spell_progression}' name='attr_class_2_spell_progression' >
                                    <option value='half'>HALF</option>
                                    <option value='partial' selected='selected'>PARTIAL</option>
                                    <option value='full_prep'>FULL PREP</option>
                                    <option value='full_spont'>FULL SPONT</option>
                                </select>
                                <input type='radio' class='cantrips-only' title='@{class_2_max_spell}' name='attr_class_2_max_spell' value='0' checked='checked' hidden='true'>
                                <input type='radio' class='spell1' title='@{class_2_max_spell}' name='attr_class_2_max_spell' value='1' hidden='true'>
                                <input type='radio' class='spell2' title='@{class_2_max_spell}' name='attr_class_2_max_spell' value='2' hidden='true'>
                                <input type='radio' class='spell3' title='@{class_2_max_spell}' name='attr_class_2_max_spell' value='3' hidden='true'>
                                <input type='radio' class='spell4' title='@{class_2_max_spell}' name='attr_class_2_max_spell' value='4' hidden='true'>
                                <input type='radio' class='spell5' title='@{class_2_max_spell}' name='attr_class_2_max_spell' value='5' hidden='true'>
                                <input type='radio' class='spell6' title='@{class_2_max_spell}' name='attr_class_2_max_spell' value='6' hidden='true'>
                                <input type='radio' class='spell7' title='@{class_2_max_spell}' name='attr_class_2_max_spell' value='7' hidden='true'>
                                <input type='radio' class='spell8' title='@{class_2_max_spell}' name='attr_class_2_max_spell' value='8' hidden='true'>
                                <input type='radio' class='spell9' title='@{class_2_max_spell}' name='attr_class_2_max_spell' value='9' hidden='true'>
                                <span class='label daily' data-i18n='spells-per-day'>SPELLS PER DAY</span>
                                <span class='label num aspell0'>0</span>
                                <input class='label current aspell0' title='@{class_2_cantrips_per_day}' name='attr_class_2_cantrips_per_day' type='text'><span class='label slash aspell0'>/</span>
                                <input class='label max aspell0' title='@{class_2_cantrips_per_day_max}' name='attr_class_2_cantrips_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell1'>1</span>
                                <input class='label class-spells-day current aspell1' title='@{class_2_level_1_spells_per_day}' name='attr_class_2_level_1_spells_per_day' type='text'><span class='label class-spells-day slash aspell1'>/</span>
                                <input class='label class-spells-day max aspell1' title='@{class_2_level_1_spells_per_day_max}' name='attr_class_2_level_1_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell2'>2</span>
                                <input class='label class-spells-day current aspell2' title='@{class_2_level_2_spells_per_day}' name='attr_class_2_level_2_spells_per_day' type='text'><span class='label class-spells-day slash aspell2'>/</span>
                                <input class='label class-spells-day max aspell2' title='@{class_2_level_2_spells_per_day_max}' name='attr_class_2_level_2_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell3'>3</span>
                                <input class='label class-spells-day current aspell3' title='@{class_2_level_3_spells_per_day}' name='attr_class_2_level_3_spells_per_day' type='text'><span class='label class-spells-day slash aspell3'>/</span>
                                <input class='label class-spells-day max aspell3' title='@{class_2_level_3_spells_per_day_max}' name='attr_class_2_level_3_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell4'>4</span>
                                <input class='label class-spells-day current aspell4' title='@{class_2_level_4_spells_per_day}' name='attr_class_2_level_4_spells_per_day' type='text'><span class='label class-spells-day slash aspell4'>/</span>
                                <input class='label class-spells-day max aspell4' title='@{class_2_level_4_spells_per_day_max}' name='attr_class_2_level_4_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell5'>5</span>
                                <input class='label class-spells-day current aspell5' title='@{class_2_level_5_spells_per_day}' name='attr_class_2_level_5_spells_per_day' type='text'><span class='label class-spells-day slash aspell5'>/</span>
                                <input class='label class-spells-day max aspell5' title='@{class_2_level_5_spells_per_day_max}' name='attr_class_2_level_5_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell6'>6</span>
                                <input class='label class-spells-day current aspell6' title='@{class_2_level_6_spells_per_day}' name='attr_class_2_level_6_spells_per_day' type='text'><span class='label class-spells-day slash aspell6'>/</span>
                                <input class='label class-spells-day max aspell6' title='@{class_2_level_6_spells_per_day_max}' name='attr_class_2_level_6_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell7'>7</span>
                                <input class='label class-spells-day current aspell7' title='@{class_2_level_7_spells_per_day}' name='attr_class_2_level_7_spells_per_day' type='text'><span class='label class-spells-day slash aspell7'>/</span>
                                <input class='label class-spells-day max aspell7' title='@{class_2_level_7_spells_per_day_max}' name='attr_class_2_level_7_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell8'>8</span>
                                <input class='label class-spells-day current aspell8' title='@{class_2_level_8_spells_per_day}' name='attr_class_2_level_8_spells_per_day' type='text'><span class='label class-spells-day slash aspell8'>/</span>
                                <input class='label class-spells-day max aspell8' title='@{class_2_level_8_spells_per_day_max}' name='attr_class_2_level_8_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell9'>9</span>
                                <input class='label class-spells-day current aspell9' title='@{class_2_level_9_spells_per_day}' name='attr_class_2_level_9_spells_per_day' type='text'><span class='label class-spells-day slash aspell9'>/</span>
                                <input class='label class-spells-day max aspell9' title='@{class_2_level_9_spells_per_day_max}' name='attr_class_2_level_9_spells_per_day_max' type='text'>
                            </div>
                            <!-- Caster 3 -->
                            <input class='class-3 class-spells' title='@{class_3_spells}' name='attr_class_3_spells' type='checkbox' value='1' hidden='true'>
                            <div class='spellclass-container'>
                                <input class='class-3 class-show' title='@{class_3_show}' name='attr_class_3_show' titel='@{class_3_show}' type=checkbox checked='checked' value='1'>
                                <span class='class-3 class-name' title='@{class_3_name}' name='attr_class_3_name' placeholder='1st Class' readonly='true'></span>
                                <span class='class-3 class-num-level' title='@{class_3_level}' name='attr_class_3_level' placeholder='1' readonly='true'></span>
                                <span class='casting-ability' data-i18n='ability'>ABILITY</span>
                                <select class='class-3 class-ability' title='@{class_3_casting_ability}' name='attr_class_3_casting_ability' >
                                    <option value='@{strength_mod}' selected='selected'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                                <span CLASS='spell-progression' data-i18n='progress'>PROGRESS</span>
                                <select class='class-3 class-spell-progression' title='@{class_3_spell_progression}' name='attr_class_3_spell_progression' >
                                    <option value='half'>HALF</option>
                                    <option value='partial' selected='selected'>PARTIAL</option>
                                    <option value='full_prep'>FULL PREP</option>
                                    <option value='full_spont'>FULL SPONT</option>
                                </select>
                                <input type='radio' class='cantrips-only' title='@{class_3_max_spell}' name='attr_class_3_max_spell' value='0' checked='checked' hidden='true'>
                                <input type='radio' class='spell1' title='@{class_3_max_spell}' name='attr_class_3_max_spell' value='1' hidden='true'>
                                <input type='radio' class='spell2' title='@{class_3_max_spell}' name='attr_class_3_max_spell' value='2' hidden='true'>
                                <input type='radio' class='spell3' title='@{class_3_max_spell}' name='attr_class_3_max_spell' value='3' hidden='true'>
                                <input type='radio' class='spell4' title='@{class_3_max_spell}' name='attr_class_3_max_spell' value='4' hidden='true'>
                                <input type='radio' class='spell5' title='@{class_3_max_spell}' name='attr_class_3_max_spell' value='5' hidden='true'>
                                <input type='radio' class='spell6' title='@{class_3_max_spell}' name='attr_class_3_max_spell' value='6' hidden='true'>
                                <input type='radio' class='spell7' title='@{class_3_max_spell}' name='attr_class_3_max_spell' value='7' hidden='true'>
                                <input type='radio' class='spell8' title='@{class_3_max_spell}' name='attr_class_3_max_spell' value='8' hidden='true'>
                                <input type='radio' class='spell9' title='@{class_3_max_spell}' name='attr_class_3_max_spell' value='9' hidden='true'>
                                <span class='label daily' data-i18n='spells-per-day'>SPELLS PER DAY</span>
                                <span class='label num aspell0'>0</span>
                                <input class='label current aspell0' title='@{class_3_cantrips_per_day}' name='attr_class_3_cantrips_per_day' type='text'><span class='label slash aspell0'>/</span>
                                <input class='label max aspell0' title='@{class_3_cantrips_per_day_max}' name='attr_class_3_cantrips_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell1'>1</span>
                                <input class='label class-spells-day current aspell1' title='@{class_3_level_1_spells_per_day}' name='attr_class_3_level_1_spells_per_day' type='text'><span class='label class-spells-day slash aspell1'>/</span>
                                <input class='label class-spells-day max aspell1' title='@{class_3_level_1_spells_per_day_max}' name='attr_class_3_level_1_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell2'>2</span>
                                <input class='label class-spells-day current aspell2' title='@{class_3_level_2_spells_per_day}' name='attr_class_3_level_2_spells_per_day' type='text'><span class='label class-spells-day slash aspell2'>/</span>
                                <input class='label class-spells-day max aspell2' title='@{class_3_level_2_spells_per_day_max}' name='attr_class_3_level_2_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell3'>3</span>
                                <input class='label class-spells-day current aspell3' title='@{class_3_level_3_spells_per_day}' name='attr_class_3_level_3_spells_per_day' type='text'><span class='label class-spells-day slash aspell3'>/</span>
                                <input class='label class-spells-day max aspell3' title='@{class_3_level_3_spells_per_day_max}' name='attr_class_3_level_3_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell4'>4</span>
                                <input class='label class-spells-day current aspell4' title='@{class_3_level_4_spells_per_day}' name='attr_class_3_level_4_spells_per_day' type='text'><span class='label class-spells-day slash aspell4'>/</span>
                                <input class='label class-spells-day max aspell4' title='@{class_3_level_4_spells_per_day_max}' name='attr_class_3_level_4_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell5'>5</span>
                                <input class='label class-spells-day current aspell5' title='@{class_3_level_5_spells_per_day}' name='attr_class_3_level_5_spells_per_day' type='text'><span class='label class-spells-day slash aspell5'>/</span>
                                <input class='label class-spells-day max aspell5' title='@{class_3_level_5_spells_per_day_max}' name='attr_class_3_level_5_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell6'>6</span>
                                <input class='label class-spells-day current aspell6' title='@{class_3_level_6_spells_per_day}' name='attr_class_3_level_6_spells_per_day' type='text'><span class='label class-spells-day slash aspell6'>/</span>
                                <input class='label class-spells-day max aspell6' title='@{class_3_level_6_spells_per_day_max}' name='attr_class_3_level_6_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell7'>7</span>
                                <input class='label class-spells-day current aspell7' title='@{class_3_level_7_spells_per_day}' name='attr_class_3_level_7_spells_per_day' type='text'><span class='label class-spells-day slash aspell7'>/</span>
                                <input class='label class-spells-day max aspell7' title='@{class_3_level_7_spells_per_day_max}' name='attr_class_3_level_7_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell8'>8</span>
                                <input class='label class-spells-day current aspell8' title='@{class_3_level_8_spells_per_day}' name='attr_class_3_level_8_spells_per_day' type='text'><span class='label class-spells-day slash aspell8'>/</span>
                                <input class='label class-spells-day max aspell8' title='@{class_3_level_8_spells_per_day_max}' name='attr_class_3_level_8_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell9'>9</span>
                                <input class='label class-spells-day current aspell9' title='@{class_3_level_9_spells_per_day}' name='attr_class_3_level_9_spells_per_day' type='text'><span class='label class-spells-day slash aspell9'>/</span>
                                <input class='label class-spells-day max aspell9' title='@{class_3_level_9_spells_per_day_max}' name='attr_class_3_level_9_spells_per_day_max' type='text'>
                            </div>
                            <!-- Caster 4 -->
                            <input class='class-4 class-spells' title='@{class_4_spells}' name='attr_class_4_spells' type='checkbox' value='1' hidden='true'>
                            <div class='spellclass-container'>
                                <input class='class-4 class-show' title='@{class_4_show}' name='attr_class_4_show' titel='@{class_4_show}' type=checkbox checked='checked' value='1'>
                                <span class='class-4 class-name' title='@{class_4_name}' name='attr_class_4_name' placeholder='1st Class' readonly='true'></span>
                                <span class='class-4 class-num-level' title='@{class_4_level}' name='attr_class_4_level' placeholder='1' readonly='true'></span>
                                <span class='casting-ability' data-i18n='ability'>ABILITY</span>
                                <select class='class-4 class-ability' title='@{class_4_casting_ability}' name='attr_class_4_casting_ability' >
                                    <option value='@{strength_mod}' selected='selected'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                                <span CLASS='spell-progression' data-i18n='progress'>PROGRESS</span>
                                <select class='class-4 class-spell-progression' title='@{class_4_spell_progression}' name='attr_class_4_spell_progression' >
                                    <option value='half'>HALF</option>
                                    <option value='partial' selected='selected'>PARTIAL</option>
                                    <option value='full_prep'>FULL PREP</option>
                                    <option value='full_spont'>FULL SPONT</option>
                                </select>
                                <input type='radio' class='cantrips-only' title='@{class_4_max_spell}' name='attr_class_4_max_spell' value='0' checked='checked' hidden='true'>
                                <input type='radio' class='spell1' title='@{class_4_max_spell}' name='attr_class_4_max_spell' value='1' hidden='true'>
                                <input type='radio' class='spell2' title='@{class_4_max_spell}' name='attr_class_4_max_spell' value='2' hidden='true'>
                                <input type='radio' class='spell3' title='@{class_4_max_spell}' name='attr_class_4_max_spell' value='3' hidden='true'>
                                <input type='radio' class='spell4' title='@{class_4_max_spell}' name='attr_class_4_max_spell' value='4' hidden='true'>
                                <input type='radio' class='spell5' title='@{class_4_max_spell}' name='attr_class_4_max_spell' value='5' hidden='true'>
                                <input type='radio' class='spell6' title='@{class_4_max_spell}' name='attr_class_4_max_spell' value='6' hidden='true'>
                                <input type='radio' class='spell7' title='@{class_4_max_spell}' name='attr_class_4_max_spell' value='7' hidden='true'>
                                <input type='radio' class='spell8' title='@{class_4_max_spell}' name='attr_class_4_max_spell' value='8' hidden='true'>
                                <input type='radio' class='spell9' title='@{class_4_max_spell}' name='attr_class_4_max_spell' value='9' hidden='true'>
                                <span class='label daily' data-i18n='spells-per-day'>SPELLS PER DAY</span>
                                <span class='label num aspell0'>0</span>
                                <input class='label current aspell0' title='@{class_4_cantrips_per_day}' name='attr_class_4_cantrips_per_day' type='text'><span class='label slash aspell0'>/</span>
                                <input class='label max aspell0' title='@{class_4_cantrips_per_day_max}' name='attr_class_4_cantrips_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell1'>1</span>
                                <input class='label class-spells-day current aspell1' title='@{class_4_level_1_spells_per_day}' name='attr_class_4_level_1_spells_per_day' type='text'><span class='label class-spells-day slash aspell1'>/</span>
                                <input class='label class-spells-day max aspell1' title='@{class_4_level_1_spells_per_day_max}' name='attr_class_4_level_1_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell2'>2</span>
                                <input class='label class-spells-day current aspell2' title='@{class_4_level_2_spells_per_day}' name='attr_class_4_level_2_spells_per_day' type='text'><span class='label class-spells-day slash aspell2'>/</span>
                                <input class='label class-spells-day max aspell2' title='@{class_4_level_2_spells_per_day_max}' name='attr_class_4_level_2_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell3'>3</span>
                                <input class='label class-spells-day current aspell3' title='@{class_4_level_3_spells_per_day}' name='attr_class_4_level_3_spells_per_day' type='text'><span class='label class-spells-day slash aspell3'>/</span>
                                <input class='label class-spells-day max aspell3' title='@{class_4_level_3_spells_per_day_max}' name='attr_class_4_level_3_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell4'>4</span>
                                <input class='label class-spells-day current aspell4' title='@{class_4_level_4_spells_per_day}' name='attr_class_4_level_4_spells_per_day' type='text'><span class='label class-spells-day slash aspell4'>/</span>
                                <input class='label class-spells-day max aspell4' title='@{class_4_level_4_spells_per_day_max}' name='attr_class_4_level_4_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell5'>5</span>
                                <input class='label class-spells-day current aspell5' title='@{class_4_level_5_spells_per_day}' name='attr_class_4_level_5_spells_per_day' type='text'><span class='label class-spells-day slash aspell5'>/</span>
                                <input class='label class-spells-day max aspell5' title='@{class_4_level_5_spells_per_day_max}' name='attr_class_4_level_5_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell6'>6</span>
                                <input class='label class-spells-day current aspell6' title='@{class_4_level_6_spells_per_day}' name='attr_class_4_level_6_spells_per_day' type='text'><span class='label class-spells-day slash aspell6'>/</span>
                                <input class='label class-spells-day max aspell6' title='@{class_4_level_6_spells_per_day_max}' name='attr_class_4_level_6_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell7'>7</span>
                                <input class='label class-spells-day current aspell7' title='@{class_4_level_7_spells_per_day}' name='attr_class_4_level_7_spells_per_day' type='text'><span class='label class-spells-day slash aspell7'>/</span>
                                <input class='label class-spells-day max aspell7' title='@{class_4_level_7_spells_per_day_max}' name='attr_class_4_level_7_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell8'>8</span>
                                <input class='label class-spells-day current aspell8' title='@{class_4_level_8_spells_per_day}' name='attr_class_4_level_8_spells_per_day' type='text'><span class='label class-spells-day slash aspell8'>/</span>
                                <input class='label class-spells-day max aspell8' title='@{class_4_level_8_spells_per_day_max}' name='attr_class_4_level_8_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell9'>9</span>
                                <input class='label class-spells-day current aspell9' title='@{class_4_level_9_spells_per_day}' name='attr_class_4_level_9_spells_per_day' type='text'><span class='label class-spells-day slash aspell9'>/</span>
                                <input class='label class-spells-day max aspell9' title='@{class_4_level_9_spells_per_day_max}' name='attr_class_4_level_9_spells_per_day_max' type='text'>
                            </div>
                            <!-- Caster 5 -->
                            <input class='class-5 class-spells' title='@{class_5_spells}' name='attr_class_5_spells' type='checkbox' value='1' hidden='true'>
                            <div class='spellclass-container'>
                                <input class='class-5 class-show' title='@{class_5_show}' name='attr_class_5_show' titel='@{class_5_show}' type=checkbox checked='checked' value='1'>
                                <span class='class-5 class-name' title='@{class_5_name}' name='attr_class_5_name' placeholder='1st Class' readonly='true'></span>
                                <span class='class-5 class-num-level' title='@{class_5_level}' name='attr_class_5_level' placeholder='1' readonly='true'></span>
                                <span class='casting-ability' data-i18n='ability'>ABILITY</span>
                                <select class='class-5 class-ability' title='@{class_5_casting_ability}' name='attr_class_5_casting_ability' >
                                    <option value='@{strength_mod}' selected='selected'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                                <span CLASS='spell-progression' data-i18n='progress'>PROGRESS</span>
                                <select class='class-5 class-spell-progression' title='@{class_5_spell_progression}' name='attr_class_5_spell_progression' >
                                    <option value='half'>HALF</option>
                                    <option value='partial' selected='selected'>PARTIAL</option>
                                    <option value='full_prep'>FULL PREP</option>
                                    <option value='full_spont'>FULL SPONT</option>
                                </select>
                                <input type='radio' class='cantrips-only' title='@{class_5_max_spell}' name='attr_class_5_max_spell' value='0' checked='checked' hidden='true'>
                                <input type='radio' class='spell1' title='@{class_5_max_spell}' name='attr_class_5_max_spell' value='1' hidden='true'>
                                <input type='radio' class='spell2' title='@{class_5_max_spell}' name='attr_class_5_max_spell' value='2' hidden='true'>
                                <input type='radio' class='spell3' title='@{class_5_max_spell}' name='attr_class_5_max_spell' value='3' hidden='true'>
                                <input type='radio' class='spell4' title='@{class_5_max_spell}' name='attr_class_5_max_spell' value='4' hidden='true'>
                                <input type='radio' class='spell5' title='@{class_5_max_spell}' name='attr_class_5_max_spell' value='5' hidden='true'>
                                <input type='radio' class='spell6' title='@{class_5_max_spell}' name='attr_class_5_max_spell' value='6' hidden='true'>
                                <input type='radio' class='spell7' title='@{class_5_max_spell}' name='attr_class_5_max_spell' value='7' hidden='true'>
                                <input type='radio' class='spell8' title='@{class_5_max_spell}' name='attr_class_5_max_spell' value='8' hidden='true'>
                                <input type='radio' class='spell9' title='@{class_5_max_spell}' name='attr_class_5_max_spell' value='9' hidden='true'>
                                <span class='label daily' data-i18n='spells-per-day'>SPELLS PER DAY</span>
                                <span class='label num aspell0'>0</span>
                                <input class='label current aspell0' title='@{class_5_cantrips_per_day}' name='attr_class_5_cantrips_per_day' type='text'><span class='label slash aspell0'>/</span>
                                <input class='label max aspell0' title='@{class_5_cantrips_per_day_max}' name='attr_class_5_cantrips_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell1'>1</span>
                                <input class='label class-spells-day current aspell1' title='@{class_5_level_1_spells_per_day}' name='attr_class_5_level_1_spells_per_day' type='text'><span class='label class-spells-day slash aspell1'>/</span>
                                <input class='label class-spells-day max aspell1' title='@{class_5_level_1_spells_per_day_max}' name='attr_class_5_level_1_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell2'>2</span>
                                <input class='label class-spells-day current aspell2' title='@{class_5_level_2_spells_per_day}' name='attr_class_5_level_2_spells_per_day' type='text'><span class='label class-spells-day slash aspell2'>/</span>
                                <input class='label class-spells-day max aspell2' title='@{class_5_level_2_spells_per_day_max}' name='attr_class_5_level_2_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell3'>3</span>
                                <input class='label class-spells-day current aspell3' title='@{class_5_level_3_spells_per_day}' name='attr_class_5_level_3_spells_per_day' type='text'><span class='label class-spells-day slash aspell3'>/</span>
                                <input class='label class-spells-day max aspell3' title='@{class_5_level_3_spells_per_day_max}' name='attr_class_5_level_3_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell4'>4</span>
                                <input class='label class-spells-day current aspell4' title='@{class_5_level_4_spells_per_day}' name='attr_class_5_level_4_spells_per_day' type='text'><span class='label class-spells-day slash aspell4'>/</span>
                                <input class='label class-spells-day max aspell4' title='@{class_5_level_4_spells_per_day_max}' name='attr_class_5_level_4_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell5'>5</span>
                                <input class='label class-spells-day current aspell5' title='@{class_5_level_5_spells_per_day}' name='attr_class_5_level_5_spells_per_day' type='text'><span class='label class-spells-day slash aspell5'>/</span>
                                <input class='label class-spells-day max aspell5' title='@{class_5_level_5_spells_per_day_max}' name='attr_class_5_level_5_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell6'>6</span>
                                <input class='label class-spells-day current aspell6' title='@{class_5_level_6_spells_per_day}' name='attr_class_5_level_6_spells_per_day' type='text'><span class='label class-spells-day slash aspell6'>/</span>
                                <input class='label class-spells-day max aspell6' title='@{class_5_level_6_spells_per_day_max}' name='attr_class_5_level_6_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell7'>7</span>
                                <input class='label class-spells-day current aspell7' title='@{class_5_level_7_spells_per_day}' name='attr_class_5_level_7_spells_per_day' type='text'><span class='label class-spells-day slash aspell7'>/</span>
                                <input class='label class-spells-day max aspell7' title='@{class_5_level_7_spells_per_day_max}' name='attr_class_5_level_7_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell8'>8</span>
                                <input class='label class-spells-day current aspell8' title='@{class_5_level_8_spells_per_day}' name='attr_class_5_level_8_spells_per_day' type='text'><span class='label class-spells-day slash aspell8'>/</span>
                                <input class='label class-spells-day max aspell8' title='@{class_5_level_8_spells_per_day_max}' name='attr_class_5_level_8_spells_per_day_max' type='text'>
                                <span class='label num class-spells-day aspell9'>9</span>
                                <input class='label class-spells-day current aspell9' title='@{class_5_level_9_spells_per_day}' name='attr_class_5_level_9_spells_per_day' type='text'><span class='label class-spells-day slash aspell9'>/</span>
                                <input class='label class-spells-day max aspell9' title='@{class_5_level_9_spells_per_day_max}' name='attr_class_5_level_9_spells_per_day_max' type='text'>
                            </div>
                        </div>
                        <div class='attribute-container always-glow border left'></div>
                        <div class='attribute-container always-glow border top'></div>
                        <div class='attribute-container always-glow border right'></div>
                        <div class='attribute-container always-glow border bottom'></div>
                        <div class='attribute-container always-glow border bottom-left corner'></div>
                        <div class='attribute-container always-glow border top-right corner'></div>
                    </div>
                    <div class='spell-column'>
                        <input type='radio' class='cantrips-only' title='@{char_max_spell}' name='attr_char_max_spell' value='0' checked='checked' hidden='true'>
                        <input type='radio' class='spell1' title='@{char_max_spell}' name='attr_char_max_spell' value='1' hidden='true'>
                        <input type='radio' class='spell1 spell2' title='@{char_max_spell}' name='attr_char_max_spell' value='2' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3' title='@{char_max_spell}' name='attr_char_max_spell' value='3' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3 spell4' title='@{char_max_spell}' name='attr_char_max_spell' value='4' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3 spell4 spell5' title='@{char_max_spell}' name='attr_char_max_spell' value='5' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3 spell4 spell5 spell6' title='@{char_max_spell}' name='attr_char_max_spell' value='6' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3 spell4 spell5 spell6 spell7' title='@{char_max_spell}' name='attr_char_max_spell' value='7' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3 spell4 spell5 spell6 spell7 spell8' title='@{char_max_spell}' name='attr_char_max_spell' value='8' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3 spell4 spell5 spell6 spell7 spell8 spell9' title='@{char_max_spell}' name='attr_char_max_spell' value='9' hidden='true'>
                        <div class='section-container aspell1 class-spells-day'>
                            <h1 class='section label' data-i18n='1st-level'>1st LEVEL</h1>
                            <div class='section always-glow border left'></div>
                            <div class='section always-glow border top'></div>
                            <div class='section always-glow border right'></div>
                            <div class='section always-glow border bottom-left corner'></div>
                            <div class='section always-glow border top-right corner'></div>
                            <div class='section-container'>
                                <fieldset class='repeating_spell'><input hidden='true' type='text' title='@{attack_total}' name='attr_attack_total'><input hidden='true' type='text' title='@{damage_total}' name='attr_damage_total'>
                                    <input class='filter' type='checkbox' hidden='true' title='@{level_1_filter}' name='attr_level_1_filter' value='1'>
                                    <div class='filter-container spell'>
                                        <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                                        <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                                        <div class='row-options'>
                                            <div class='row'>
                                            <span class='label' data-i18n='name-u'>NAME</span>
                                            <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                                            <span class='label' data-i18n='lvl'>LVL</span>
                                            <input class='atk-level' title='@{level}' name='attr_level' type='text' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='source'>SOURCE</span>
                                                <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Operative'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='school'>SCHOOL</span>
                                                <input class='scalable-input' title='@{school}' name='attr_school' type='text' placeholder='abjuration'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='target'>TARGET</span>
                                                <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                                <span class='label' data-i18n='rng'>RNG</span>
                                                <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='duration'>DURATION</span>
                                                <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                                <input class='scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='Standard Action'>
                                            </div>
                                            <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                                            <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                                        <option value='@{strength_mod}' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                                    <span class='arith'>+</span>
                                                    <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                                    <input class='abi-misc' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='rng'>RNG</span>
                                                    <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                                            <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                                <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                                <div class='field row'>
                                                    <input class='abi-dmg-dice' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                                    <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                                        <option value='' selected='selected'>N/A</option>
                                                        <option value='@{strength_mod}'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='type'>TYPE</span>
                                                    <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                                    <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                                    <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                                </div>
                                                <div class='field row'>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                                            <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                                        <option value='@{strength_mod}' data-i18n='str' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                                        <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                                        <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                                        <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                                        <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                                    </select>
                                                    <span class='label' data-i18n='based-dc_'>Based DC </span>
                                                    <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                                    <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                                    <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                                    <input title='@{dc}' name='attr_dc' type='number' value='10' hidden='true'>
                                                    <span class='save-dc modified-attr label' title='@{dc}' name='attr_dc' value='10'>10</span>
                                                    <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                                        <option value='' selected='selected'>-</option>
                                                        <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                                        <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                                        <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                                    </select>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                            <div class='row field-container mod-container'>
                                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                                <textarea class='field row' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                                            </div>
                                            <div class='row'>
                                                <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                                            </div>
                                        </div>
                                        <div class='display'>
                                            <div class='button-description'>
                                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{rightbanner=@{school}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}} {{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{school}}}{{notes=@{description}}} @{attacher}'>
                                                    <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span>
                                                </button>
                                                <span class='' title='@{description}' name='attr_description' placeholder='Description'></span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                                <label class='pseudo-repcontrol spell'>
                                    <input type='checkbox' title='@{create_1st}' name='attr_create_1st' value='1'>
                                    <span>&</span>
                                </label>
                                <select class='compendium-select' title='@{level_1_spell_compendium}' name='attr_level_1_spell_compendium'></select>
                            </div>
                            <div class='attribute-container always-glow border left'></div>
                            <div class='attribute-container always-glow border top'></div>
                            <div class='attribute-container always-glow border right'></div>
                            <div class='attribute-container always-glow border bottom'></div>
                            <div class='attribute-container always-glow border bottom-left corner'></div>
                            <div class='attribute-container always-glow border top-right corner'></div>
                        </div>
                        <div class='section-container aspell4 class-spells-day'>
                            <h1 class='section label' data-i18n='4th-level'>4th LEVEL</h1>
                            <div class='section always-glow border left'></div>
                            <div class='section always-glow border top'></div>
                            <div class='section always-glow border right'></div>
                            <div class='section always-glow border bottom-left corner'></div>
                            <div class='section always-glow border top-right corner'></div>
                            <div class='section-container'>
                                <fieldset class='repeating_spell'><input hidden='true' type='text' title='@{attack_total}' name='attr_attack_total'><input hidden='true' type='text' title='@{damage_total}' name='attr_damage_total'>
                                    <input class='filter' type='checkbox' hidden='true' title='@{level_4_filter}' name='attr_level_4_filter' value='4'>
                                    <div class='filter-container spell'>
                                        <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                                        <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                                        <div class='row-options'>
                                            <div class='row'>
                                            <span class='label' data-i18n='name-u'>NAME</span>
                                            <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                                            <span class='label' data-i18n='lvl'>LVL</span>
                                            <input class='atk-level' title='@{level}' name='attr_level' type='text' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='source'>SOURCE</span>
                                                <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Operative'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='school'>SCHOOL</span>
                                                <input class='scalable-input' title='@{school}' name='attr_school' type='text' placeholder='abjuration'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='target'>TARGET</span>
                                                <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                                <span class='label' data-i18n='rng'>RNG</span>
                                                <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='duration'>DURATION</span>
                                                <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                                <input class='scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='Standard Action'>
                                            </div>
                                            <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                                            <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                                        <option value='@{strength_mod}' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                                    <span class='arith'>+</span>
                                                    <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                                    <input class='abi-misc' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='rng'>RNG</span>
                                                    <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                                            <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                                <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                                <div class='field row'>
                                                    <input class='abi-dmg-dice' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                                    <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                                        <option value='' selected='selected'>N/A</option>
                                                        <option value='@{strength_mod}'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='type'>TYPE</span>
                                                    <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                                    <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                                    <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                                </div>
                                                <div class='field row'>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                                            <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                                        <option value='@{strength_mod}' data-i18n='str' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                                        <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                                        <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                                        <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                                        <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                                    </select>
                                                    <span class='label' data-i18n='based-dc_'>Based DC </span>
                                                    <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                                    <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                                    <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                                    <input title='@{dc}' name='attr_dc' type='number' value='10' hidden='true'>
                                                    <span class='save-dc modified-attr label' title='@{dc}' name='attr_dc' value='10'>10</span>
                                                    <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                                        <option value='' selected='selected'>-</option>
                                                        <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                                        <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                                        <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                                    </select>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                            <div class='row field-container mod-container'>
                                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                                <textarea class='field row' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                                            </div>
                                            <div class='row'>
                                                <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                                            </div>
                                        </div>
                                        <div class='display'>
                                            <div class='button-description'>
                                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{rightbanner=@{school}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}}{{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{school}}}{{notes=@{description}}} @{attacher}'>
                                                    <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span>
                                                </button>
                                                <span class='' title='@{description}' name='attr_description' placeholder='Description'></span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                                <label class='pseudo-repcontrol spell'>
                                    <input type='checkbox' title='@{create_4th}' name='attr_create_4th' value='1'>
                                    <span>&</span>
                                </label>
                                <select class='compendium-select' title='@{level_4_spell_compendium}' name='attr_level_4_spell_compendium'></select>
                            </div>
                            <div class='attribute-container always-glow border left'></div>
                            <div class='attribute-container always-glow border top'></div>
                            <div class='attribute-container always-glow border right'></div>
                            <div class='attribute-container always-glow border bottom'></div>
                            <div class='attribute-container always-glow border bottom-left corner'></div>
                            <div class='attribute-container always-glow border top-right corner'></div>
                        </div>
                        <div class='section-container aspell7 class-spells-day'>
                            <h1 class='section label' data-i18n='7th-level'>7th LEVEL</h1>
                            <div class='section always-glow border left'></div>
                            <div class='section always-glow border top'></div>
                            <div class='section always-glow border right'></div>
                            <div class='section always-glow border bottom-left corner'></div>
                            <div class='section always-glow border top-right corner'></div>
                            <div class='section-container'>
                                <fieldset class='repeating_spell'><input hidden='true' type='text' title='@{attack_total}' name='attr_attack_total'><input hidden='true' type='text' title='@{damage_total}' name='attr_damage_total'>
                                    <input class='filter' type='checkbox' hidden='true' title='@{level_7_filter}' name='attr_level_7_filter' value='7'>
                                    <div class='filter-container spell'>
                                        <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                                        <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                                        <div class='row-options'>
                                            <div class='row'>
                                            <span class='label' data-i18n='name-u'>NAME</span>
                                            <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                                            <span class='label' data-i18n='lvl'>LVL</span>
                                            <input class='atk-level' title='@{level}' name='attr_level' type='text' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='source'>SOURCE</span>
                                                <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Operative'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='school'>SCHOOL</span>
                                                <input class='scalable-input' title='@{school}' name='attr_school' type='text' placeholder='abjuration'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='target'>TARGET</span>
                                                <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                                <span class='label' data-i18n='rng'>RNG</span>
                                                <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='duration'>DURATION</span>
                                                <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                                <input class='scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='Standard Action'>
                                            </div>
                                            <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                                            <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                                        <option value='@{strength_mod}' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                                    <span class='arith'>+</span>
                                                    <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                                    <input class='abi-misc' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='rng'>RNG</span>
                                                    <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                                            <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                                <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                                <div class='field row'>
                                                    <input class='abi-dmg-dice' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                                    <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                                        <option value='' selected='selected'>N/A</option>
                                                        <option value='@{strength_mod}'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='type'>TYPE</span>
                                                    <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                                    <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                                    <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                                </div>
                                                <div class='field row'>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                                            <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                                        <option value='@{strength_mod}' data-i18n='str' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                                        <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                                        <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                                        <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                                        <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                                    </select>
                                                    <span class='label' data-i18n='based-dc_'>Based DC </span>
                                                    <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                                    <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                                    <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                                    <input title='@{dc}' name='attr_dc' type='number' value='10' hidden='true'>
                                                    <span class='save-dc modified-attr label' title='@{dc}' name='attr_dc' value='10'>10</span>
                                                    <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                                        <option value='' selected='selected'>-</option>
                                                        <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                                        <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                                        <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                                    </select>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                            <div class='row field-container mod-container'>
                                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                                <textarea class='field row' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                                            </div>
                                            <div class='row'>
                                                <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                                            </div>
                                        </div>
                                        <div class='display'>
                                            <div class='button-description'>
                                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{rightbanner=@{school}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}}{{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{school}}}{{notes=@{description}}} @{attacher}'>
                                                    <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span>
                                                </button>
                                                <span class='' title='@{description}' name='attr_description' placeholder='Description'></span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                                <label class='pseudo-repcontrol spell'>
                                    <input type='checkbox' title='@{create_7th}' name='attr_create_7th' value='1'>
                                    <span>&</span>
                                </label>
                                <select class='compendium-select' title='@{level_7_spell_compendium}' name='attr_level_7_spell_compendium'></select>
                            </div>
                            <div class='attribute-container always-glow border left'></div>
                            <div class='attribute-container always-glow border top'></div>
                            <div class='attribute-container always-glow border right'></div>
                            <div class='attribute-container always-glow border bottom'></div>
                            <div class='attribute-container always-glow border bottom-left corner'></div>
                            <div class='attribute-container always-glow border top-right corner'></div>
                        </div>
                    </div>
                    <div class='spell-column'>
                        <input type='radio' class='cantrips-only' title='@{char_max_spell_1}' name='attr_char_max_spell_1' value='0' checked='checked' hidden='true'>
                        <input type='radio' class='spell1' title='@{char_max_spell_1}' name='attr_char_max_spell_1' value='1' hidden='true'>
                        <input type='radio' class='spell1 spell2' title='@{char_max_spell_1}' name='attr_char_max_spell_1' value='2' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3' title='@{char_max_spell_1}' name='attr_char_max_spell_1' value='3' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3 spell4' title='@{char_max_spell_1}' name='attr_char_max_spell_1' value='4' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3 spell4 spell5' title='@{char_max_spell_1}' name='attr_char_max_spell_1' value='5' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3 spell4 spell5 spell6' title='@{char_max_spell_1}' name='attr_char_max_spell_1' value='6' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3 spell4 spell5 spell6 spell7' title='@{char_max_spell_1}' name='attr_char_max_spell_1' value='7' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3 spell4 spell5 spell6 spell7 spell8' title='@{char_max_spell_1}' name='attr_char_max_spell_1' value='8' hidden='true'>
                        <input type='radio' class='spell1 spell2 spell3 spell4 spell5 spell6 spell7 spell8 spell9' title='@{char_max_spell_1}' name='attr_char_max_spell_1' value='9' hidden='true'>
                        <div class='section-container aspell2 class-spells-day'>
                            <h1 class='section label' data-i18n='2nd-level'>2nd LEVEL</h1>
                            <div class='section always-glow border left'></div>
                            <div class='section always-glow border top'></div>
                            <div class='section always-glow border right'></div>
                            <div class='section always-glow border bottom-left corner'></div>
                            <div class='section always-glow border top-right corner'></div>
                            <div class='section-container'>
                                <fieldset class='repeating_spell'><input hidden='true' type='text' title='@{attack_total}' name='attr_attack_total'><input hidden='true' type='text' title='@{damage_total}' name='attr_damage_total'>
                                    <input class='filter' type='checkbox' hidden='true' title='@{level_2_filter}' name='attr_level_2_filter' value='2'>
                                    <div class='filter-container spell'>
                                        <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                                        <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                                        <div class='row-options'>
                                            <div class='row'>
                                            <span class='label' data-i18n='name-u'>NAME</span>
                                            <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                                            <span class='label' data-i18n='lvl'>LVL</span>
                                            <input class='atk-level' title='@{level}' name='attr_level' type='text' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='source'>SOURCE</span>
                                                <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Operative'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='school'>SCHOOL</span>
                                                <input class='scalable-input' title='@{school}' name='attr_school' type='text' placeholder='abjuration'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='target'>TARGET</span>
                                                <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                                <span class='label' data-i18n='rng'>RNG</span>
                                                <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='duration'>DURATION</span>
                                                <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                                <input class='scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='Standard Action'>
                                            </div>
                                            <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                                            <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                                        <option value='@{strength_mod}' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                                    <span class='arith'>+</span>
                                                    <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                                    <input class='abi-misc' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='rng'>RNG</span>
                                                    <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                                            <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                                <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                                <div class='field row'>
                                                    <input class='abi-dmg-dice' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                                    <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                                        <option value='' selected='selected'>N/A</option>
                                                        <option value='@{strength_mod}'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='type'>TYPE</span>
                                                    <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                                    <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                                    <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                                </div>
                                                <div class='field row'>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                                            <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                                        <option value='@{strength_mod}' data-i18n='str' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                                        <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                                        <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                                        <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                                        <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                                    </select>
                                                    <span class='label' data-i18n='based-dc_'>Based DC </span>
                                                    <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                                    <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                                    <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                                    <input title='@{dc}' name='attr_dc' type='number' value='10' hidden='true'>
                                                    <span class='save-dc modified-attr label' title='@{dc}' name='attr_dc' value='10'>10</span>
                                                    <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                                        <option value='' selected='selected'>-</option>
                                                        <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                                        <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                                        <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                                    </select>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                            <div class='row field-container mod-container'>
                                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                                <textarea class='field row' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                                            </div>
                                            <div class='row'>
                                                <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                                            </div>
                                        </div>
                                        <div class='display'>
                                            <div class='button-description'>
                                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{rightbanner=@{school}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}}{{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{school}}}{{notes=@{description}}} @{attacher}'>
                                                    <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span>
                                                </button>
                                                <span class='' title='@{description}' name='attr_description' placeholder='Description'></span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                                <label class='pseudo-repcontrol spell'>
                                    <input type='checkbox' title='@{create_2nd}' name='attr_create_2nd' value='1'>
                                    <span>&</span>
                                </label>
                                <select class='compendium-select' title='@{level_2_spell_compendium}' name='attr_level_2_spell_compendium'></select>
                            </div>
                            <div class='attribute-container always-glow border left'></div>
                            <div class='attribute-container always-glow border top'></div>
                            <div class='attribute-container always-glow border right'></div>
                            <div class='attribute-container always-glow border bottom'></div>
                            <div class='attribute-container always-glow border bottom-left corner'></div>
                            <div class='attribute-container always-glow border top-right corner'></div>
                        </div>
                        <div class='section-container aspell5 class-spells-day'>
                            <h1 class='section label' data-i18n='5th-level'>5th LEVEL</h1>
                            <div class='section always-glow border left'></div>
                            <div class='section always-glow border top'></div>
                            <div class='section always-glow border right'></div>
                            <div class='section always-glow border bottom-left corner'></div>
                            <div class='section always-glow border top-right corner'></div>
                            <div class='section-container'>
                                <fieldset class='repeating_spell'><input hidden='true' type='text' title='@{attack_total}' name='attr_attack_total'><input hidden='true' type='text' title='@{damage_total}' name='attr_damage_total'>
                                    <input class='filter' type='checkbox' hidden='true' title='@{level_5_filter}' name='attr_level_5_filter' value='5'>
                                    <div class='filter-container spell'>
                                        <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                                        <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                                        <div class='row-options'>
                                            <div class='row'>
                                            <span class='label' data-i18n='name-u'>NAME</span>
                                            <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                                            <span class='label' data-i18n='lvl'>LVL</span>
                                            <input class='atk-level' title='@{level}' name='attr_level' type='text' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='source'>SOURCE</span>
                                                <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Operative'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='school'>SCHOOL</span>
                                                <input class='scalable-input' title='@{school}' name='attr_school' type='text' placeholder='abjuration'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='target'>TARGET</span>
                                                <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                                <span class='label' data-i18n='rng'>RNG</span>
                                                <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='duration'>DURATION</span>
                                                <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                                <input class='scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='Standard Action'>
                                            </div>
                                            <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                                            <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                                        <option value='@{strength_mod}' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                                    <span class='arith'>+</span>
                                                    <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                                    <input class='abi-misc' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='rng'>RNG</span>
                                                    <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                                            <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                                <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                                <div class='field row'>
                                                    <input class='abi-dmg-dice' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                                    <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                                        <option value='' selected='selected'>N/A</option>
                                                        <option value='@{strength_mod}'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='type'>TYPE</span>
                                                    <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                                    <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                                    <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                                </div>
                                                <div class='field row'>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                                            <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                                        <option value='@{strength_mod}' data-i18n='str' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                                        <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                                        <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                                        <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                                        <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                                    </select>
                                                    <span class='label' data-i18n='based-dc_'>Based DC </span>
                                                    <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                                    <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                                    <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                                    <input title='@{dc}' name='attr_dc' type='number' value='10' hidden='true'>
                                                    <span class='save-dc modified-attr label' title='@{dc}' name='attr_dc' value='10'>10</span>
                                                    <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                                        <option value='' selected='selected'>-</option>
                                                        <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                                        <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                                        <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                                    </select>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                            <div class='row field-container mod-container'>
                                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                                <textarea class='field row' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                                            </div>
                                            <div class='row'>
                                                <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                                            </div>
                                        </div>
                                        <div class='display'>
                                            <div class='button-description'>
                                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{rightbanner=@{school}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}}{{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{school}}}{{notes=@{description}}} @{attacher}'>
                                                    <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span>
                                                </button>
                                                <span class='' title='@{description}' name='attr_description' placeholder='Description'></span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                                <label class='pseudo-repcontrol spell'>
                                    <input type='checkbox' title='@{create_5th}' name='attr_create_5th' value='1'>
                                    <span>&</span>
                                </label>
                                <select class='compendium-select' title='@{level_5_spell_compendium}' name='attr_level_5_spell_compendium'></select>
                            </div>
                            <div class='attribute-container always-glow border left'></div>
                            <div class='attribute-container always-glow border top'></div>
                            <div class='attribute-container always-glow border right'></div>
                            <div class='attribute-container always-glow border bottom'></div>
                            <div class='attribute-container always-glow border bottom-left corner'></div>
                            <div class='attribute-container always-glow border top-right corner'></div>
                        </div>
                        <div class='section-container aspell8 class-spells-day'>
                            <h1 class='section label' data-i18n='8th-level'>8th LEVEL</h1>
                            <div class='section always-glow border left'></div>
                            <div class='section always-glow border top'></div>
                            <div class='section always-glow border right'></div>
                            <div class='section always-glow border bottom-left corner'></div>
                            <div class='section always-glow border top-right corner'></div>
                            <div class='section-container'>
                                <fieldset class='repeating_spell'><input hidden='true' type='text' title='@{attack_total}' name='attr_attack_total'><input hidden='true' type='text' title='@{damage_total}' name='attr_damage_total'>
                                    <input class='filter' type='checkbox' hidden='true' title='@{level_8_filter}' name='attr_level_8_filter' value='8'>
                                    <div class='filter-container spell'>
                                        <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                                        <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                                        <div class='row-options'>
                                            <div class='row'>
                                            <span class='label' data-i18n='name-u'>NAME</span>
                                            <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                                            <span class='label' data-i18n='lvl'>LVL</span>
                                            <input class='atk-level' title='@{level}' name='attr_level' type='text' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='source'>SOURCE</span>
                                                <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Operative'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='school'>SCHOOL</span>
                                                <input class='scalable-input' title='@{school}' name='attr_school' type='text' placeholder='abjuration'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='target'>TARGET</span>
                                                <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                                <span class='label' data-i18n='rng'>RNG</span>
                                                <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='duration'>DURATION</span>
                                                <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                                <input class='scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='Standard Action'>
                                            </div>
                                            <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                                            <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                                        <option value='@{strength_mod}' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                                    <span class='arith'>+</span>
                                                    <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                                    <input class='abi-misc' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='rng'>RNG</span>
                                                    <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                                            <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                                <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                                <div class='field row'>
                                                    <input class='abi-dmg-dice' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                                    <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                                        <option value='' selected='selected'>N/A</option>
                                                        <option value='@{strength_mod}'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='type'>TYPE</span>
                                                    <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                                    <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                                    <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                                </div>
                                                <div class='field row'>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                                            <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                                        <option value='@{strength_mod}' data-i18n='str' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                                        <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                                        <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                                        <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                                        <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                                    </select>
                                                    <span class='label' data-i18n='based-dc_'>Based DC </span>
                                                    <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                                    <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                                    <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                                    <input title='@{dc}' name='attr_dc' type='number' value='10' hidden='true'>
                                                    <span class='save-dc modified-attr label' title='@{dc}' name='attr_dc' value='10'>10</span>
                                                    <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                                        <option value='' selected='selected'>-</option>
                                                        <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                                        <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                                        <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                                    </select>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                            <div class='row field-container mod-container'>
                                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                                <textarea class='field row' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                                            </div>
                                            <div class='row'>
                                                <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                                            </div>
                                        </div>
                                        <div class='display'>
                                            <div class='button-description'>
                                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{rightbanner=@{school}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}}{{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{school}}}{{notes=@{description}}} @{attacher}'>
                                                    <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span>
                                                </button>
                                                <span class='' title='@{description}' name='attr_description' placeholder='Description'></span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                                <label class='pseudo-repcontrol spell'>
                                    <input type='checkbox' title='@{create_8th}' name='attr_create_8th' value='1'>
                                    <span>&</span>
                                </label>
                                <select class='compendium-select' title='@{level_8_spell_compendium}' name='attr_level_8_spell_compendium'></select>
                            </div>
                            <div class='attribute-container always-glow border left'></div>
                            <div class='attribute-container always-glow border top'></div>
                            <div class='attribute-container always-glow border right'></div>
                            <div class='attribute-container always-glow border bottom'></div>
                            <div class='attribute-container always-glow border bottom-left corner'></div>
                            <div class='attribute-container always-glow border top-right corner'></div>
                        </div>
                    </div>
                </div>
                <div class='column-2'>
                    <input type='radio' class='cantrips-only' title='@{char_max_spell_2}' name='attr_char_max_spell_2' value='0' checked='checked' hidden='true'>
                    <input type='radio' class='spell1' title='@{char_max_spell_2}' name='attr_char_max_spell_2' value='1' hidden='true'>
                    <input type='radio' class='spell1 spell2' title='@{char_max_spell_2}' name='attr_char_max_spell_2' value='2' hidden='true'>
                    <input type='radio' class='spell1 spell2 spell3' title='@{char_max_spell_2}' name='attr_char_max_spell_2' value='3' hidden='true'>
                    <input type='radio' class='spell1 spell2 spell3 spell4' title='@{char_max_spell_2}' name='attr_char_max_spell_2' value='4' hidden='true'>
                    <input type='radio' class='spell1 spell2 spell3 spell4 spell5' title='@{char_max_spell_2}' name='attr_char_max_spell_2' value='5' hidden='true'>
                    <input type='radio' class='spell1 spell2 spell3 spell4 spell5 spell6' title='@{char_max_spell_2}' name='attr_char_max_spell_2' value='6' hidden='true'>
                    <input type='radio' class='spell1 spell2 spell3 spell4 spell5 spell6 spell7' title='@{char_max_spell_2}' name='attr_char_max_spell_2' value='7' hidden='true'>
                    <input type='radio' class='spell1 spell2 spell3 spell4 spell5 spell6 spell7 spell8' title='@{char_max_spell_2}' name='attr_char_max_spell_2' value='8' hidden='true'>
                    <input type='radio' class='spell1 spell2 spell3 spell4 spell5 spell6 spell7 spell8 spell9' title='@{char_max_spell_2}' name='attr_char_max_spell_2' value='9' hidden='true'>
                    <div class='section-container aspell0'>
                        <h1 class='section label' data-i18n='cantrips'>CANTRIPS</h1>
                        <div class='section always-glow border left'></div>
                        <div class='section always-glow border top'></div>
                        <div class='section always-glow border right'></div>
                        <div class='section always-glow border bottom-left corner'></div>
                        <div class='section always-glow border top-right corner'></div>
                        <div class='section-container'>
                            <fieldset class='repeating_spell'><input hidden='true' type='text' title='@{attack_total}' name='attr_attack_total'><input hidden='true' type='text' title='@{damage_total}' name='attr_damage_total'>
                                    <input class='filter' type='checkbox' hidden='true' title='@{cantrip_filter}' name='attr_cantrip_filter' value='cantrip'>
                                    <div class='filter-container spell'>
                                        <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                                        <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                                        <div class='row-options'>
                                            <div class='row'>
                                            <span class='label' data-i18n='name-u'>NAME</span>
                                            <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                                            <span class='label' data-i18n='lvl'>LVL</span>
                                            <input class='atk-level' title='@{level}' name='attr_level' type='text' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='source'>SOURCE</span>
                                                <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Operative'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='school'>SCHOOL</span>
                                                <input class='scalable-input' title='@{school}' name='attr_school' type='text' placeholder='abjuration'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='target'>TARGET</span>
                                                <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                                <span class='label' data-i18n='rng'>RNG</span>
                                                <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='duration'>DURATION</span>
                                                <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                                <input class='scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='Standard Action'>
                                            </div>
                                            <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                                            <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                                        <option value='@{strength_mod}' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                                    <span class='arith'>+</span>
                                                    <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                                    <input class='abi-misc' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='rng'>RNG</span>
                                                    <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                                            <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                                <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                                <div class='field row'>
                                                    <input class='abi-dmg-dice' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                                    <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                                        <option value='' selected='selected'>N/A</option>
                                                        <option value='@{strength_mod}'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='type'>TYPE</span>
                                                    <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                                    <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                                    <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                                </div>
                                                <div class='field row'>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                                            <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                                        <option value='@{strength_mod}' data-i18n='str' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                                        <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                                        <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                                        <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                                        <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                                    </select>
                                                    <span class='label' data-i18n='based-dc_'>Based DC </span>
                                                    <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                                    <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                                    <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                                    <input title='@{dc}' name='attr_dc' type='number' value='10' hidden='true'>
                                                    <span class='save-dc modified-attr label' title='@{dc}' name='attr_dc' value='10'>10</span>
                                                    <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                                        <option value='' selected='selected'>-</option>
                                                        <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                                        <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                                        <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                                    </select>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                            <div class='row field-container mod-container'>
                                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                                <textarea class='field row' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                                            </div>
                                            <div class='row'>
                                                <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                                            </div>
                                        </div>
                                        <div class='display'>
                                            <div class='button-description'>
                                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{rightbanner=@{school}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}}{{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{school}}}{{notes=@{description}}} @{attacher}'>
                                                    <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span>
                                                </button>
                                                <span class='' title='@{description}' name='attr_description' placeholder='Description'></span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            <label class='pseudo-repcontrol spell'>
                                <input type='checkbox' title='@{create_cantrip}' name='attr_create_cantrip' value='1'>
                                <span>&</span>
                            </label>
                                <select class='compendium-select' title='@{cantrip_spell_compendium}' name='attr_cantrip_spell_compendium'></select>
                        </div>
                        <div class='attribute-container always-glow border left'></div>
                        <div class='attribute-container always-glow border top'></div>
                        <div class='attribute-container always-glow border right'></div>
                        <div class='attribute-container always-glow border bottom'></div>
                        <div class='attribute-container always-glow border bottom-left corner'></div>
                        <div class='attribute-container always-glow border top-right corner'></div>
                    </div>
                    <div class='section-container aspell3 class-spells-day'>
                        <h1 class='section label' data-i18n='3rd-level'>3rd LEVEL</h1>
                        <div class='section always-glow border left'></div>
                        <div class='section always-glow border top'></div>
                        <div class='section always-glow border right'></div>
                        <div class='section always-glow border bottom-left corner'></div>
                        <div class='section always-glow border top-right corner'></div>
                        <div class='section-container'>
                            <fieldset class='repeating_spell'><input hidden='true' type='text' title='@{attack_total}' name='attr_attack_total'><input hidden='true' type='text' title='@{damage_total}' name='attr_damage_total'>
                                    <input class='filter' type='checkbox' hidden='true' title='@{level_3_filter}' name='attr_level_3_filter' value='3'>
                                    <div class='filter-container spell'>
                                        <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                                        <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                                        <div class='row-options'>
                                            <div class='row'>
                                            <span class='label' data-i18n='name-u'>NAME</span>
                                            <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                                            <span class='label' data-i18n='lvl'>LVL</span>
                                            <input class='atk-level' title='@{level}' name='attr_level' type='text' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='source'>SOURCE</span>
                                                <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Operative'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='school'>SCHOOL</span>
                                                <input class='scalable-input' title='@{school}' name='attr_school' type='text' placeholder='abjuration'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='target'>TARGET</span>
                                                <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                                <span class='label' data-i18n='rng'>RNG</span>
                                                <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='duration'>DURATION</span>
                                                <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                                <input class='scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='Standard Action'>
                                            </div>
                                            <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                                            <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                                        <option value='@{strength_mod}' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                                    <span class='arith'>+</span>
                                                    <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                                    <input class='abi-misc' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='rng'>RNG</span>
                                                    <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                                            <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                                <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                                <div class='field row'>
                                                    <input class='abi-dmg-dice' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                                    <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                                        <option value='' selected='selected'>N/A</option>
                                                        <option value='@{strength_mod}'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='type'>TYPE</span>
                                                    <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                                    <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                                    <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                                </div>
                                                <div class='field row'>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                                            <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                                        <option value='@{strength_mod}' data-i18n='str' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                                        <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                                        <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                                        <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                                        <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                                    </select>
                                                    <span class='label' data-i18n='based-dc_'>Based DC </span>
                                                    <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                                    <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                                    <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                                    <input title='@{dc}' name='attr_dc' type='number' value='10' hidden='true'>
                                                    <span class='save-dc modified-attr label' title='@{dc}' name='attr_dc' value='10'>10</span>
                                                    <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                                        <option value='' selected='selected'>-</option>
                                                        <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                                        <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                                        <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                                    </select>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                            <div class='row field-container mod-container'>
                                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                                <textarea class='field row' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                                            </div>
                                            <div class='row'>
                                                <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                                            </div>
                                        </div>
                                        <div class='display'>
                                            <div class='button-description'>
                                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{rightbanner=@{school}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}}{{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{school}}}{{notes=@{description}}} @{attacher}'>
                                                    <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span>
                                                </button>
                                                <span class='' title='@{description}' name='attr_description' placeholder='Description'></span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            <label class='pseudo-repcontrol spell'>
                                <input type='checkbox' title='@{create_3rd}' name='attr_create_3rd' value='1'>
                                <span>&</span>
                            </label>
                                <select class='compendium-select' title='@{level_3_spell_compendium}' name='attr_level_3_spell_compendium'></select>
                        </div>
                        <div class='attribute-container always-glow border left'></div>
                        <div class='attribute-container always-glow border top'></div>
                        <div class='attribute-container always-glow border right'></div>
                        <div class='attribute-container always-glow border bottom'></div>
                        <div class='attribute-container always-glow border bottom-left corner'></div>
                        <div class='attribute-container always-glow border top-right corner'></div>
                    </div>
                    <div class='section-container aspell6 class-spells-day'>
                        <h1 class='section label' data-i18n='6th-level'>6th LEVEL</h1>
                        <div class='section always-glow border left'></div>
                        <div class='section always-glow border top'></div>
                        <div class='section always-glow border right'></div>
                        <div class='section always-glow border bottom-left corner'></div>
                        <div class='section always-glow border top-right corner'></div>
                        <div class='section-container'>
                            <fieldset class='repeating_spell'><input hidden='true' type='text' title='@{attack_total}' name='attr_attack_total'><input hidden='true' type='text' title='@{damage_total}' name='attr_damage_total'>
                                    <input class='filter' type='checkbox' hidden='true' title='@{level_6_filter}' name='attr_level_6_filter' value='6'>
                                    <div class='filter-container spell'>
                                        <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                                        <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                                        <div class='row-options'>
                                            <div class='row'>
                                            <span class='label' data-i18n='name-u'>NAME</span>
                                            <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                                            <span class='label' data-i18n='lvl'>LVL</span>
                                            <input class='atk-level' title='@{level}' name='attr_level' type='text' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='source'>SOURCE</span>
                                                <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Operative'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='school'>SCHOOL</span>
                                                <input class='scalable-input' title='@{school}' name='attr_school' type='text' placeholder='abjuration'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='target'>TARGET</span>
                                                <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                                <span class='label' data-i18n='rng'>RNG</span>
                                                <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='duration'>DURATION</span>
                                                <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                                <input class='scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='Standard Action'>
                                            </div>
                                            <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                                            <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                                        <option value='@{strength_mod}' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                                    <span class='arith'>+</span>
                                                    <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                                    <input class='abi-misc' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='rng'>RNG</span>
                                                    <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                                            <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                                <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                                <div class='field row'>
                                                    <input class='abi-dmg-dice' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                                    <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                                        <option value='' selected='selected'>N/A</option>
                                                        <option value='@{strength_mod}'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='type'>TYPE</span>
                                                    <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                                    <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                                    <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                                </div>
                                                <div class='field row'>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                                            <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                                        <option value='@{strength_mod}' data-i18n='str' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                                        <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                                        <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                                        <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                                        <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                                    </select>
                                                    <span class='label' data-i18n='based-dc_'>Based DC </span>
                                                    <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                                    <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                                    <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                                    <input title='@{dc}' name='attr_dc' type='number' value='10' hidden='true'>
                                                    <span class='save-dc modified-attr label' title='@{dc}' name='attr_dc' value='10'>10</span>
                                                    <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                                        <option value='' selected='selected'>-</option>
                                                        <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                                        <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                                        <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                                    </select>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                            <div class='row field-container mod-container'>
                                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                                <textarea class='field row' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                                            </div>
                                            <div class='row'>
                                                <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                                            </div>
                                        </div>
                                        <div class='display'>
                                            <div class='button-description'>
                                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{rightbanner=@{school}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}}{{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{school}}}{{notes=@{description}}} @{attacher}'>
                                                    <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span>
                                                </button>
                                                <span class='' title='@{description}' name='attr_description' placeholder='Description'></span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            <label class='pseudo-repcontrol spell'>
                                <input type='checkbox' title='@{create_6th}' name='attr_create_6th' value='1'>
                                <span>&</span>
                            </label>
                                <select class='compendium-select' title='@{level_6_spell_compendium}' name='attr_level_6_spell_compendium'></select>
                        </div>
                        <div class='attribute-container always-glow border left'></div>
                        <div class='attribute-container always-glow border top'></div>
                        <div class='attribute-container always-glow border right'></div>
                        <div class='attribute-container always-glow border bottom'></div>
                        <div class='attribute-container always-glow border bottom-left corner'></div>
                        <div class='attribute-container always-glow border top-right corner'></div>
                    </div>
                    <div class='section-container aspell9 class-spells-day'>
                        <h1 class='section label' data-i18n='9th-level'>9th LEVEL</h1>
                        <div class='section always-glow border left'></div>
                        <div class='section always-glow border top'></div>
                        <div class='section always-glow border right'></div>
                        <div class='section always-glow border bottom-left corner'></div>
                        <div class='section always-glow border top-right corner'></div>
                        <div class='section-container'>
                            <fieldset class='repeating_spell'><input hidden='true' type='text' title='@{attack_total}' name='attr_attack_total'><input hidden='true' type='text' title='@{damage_total}' name='attr_damage_total'>
                                    <input class='filter' type='checkbox' hidden='true' title='@{level_9_filter}' name='attr_level_9_filter' value='9'>
                                    <div class='filter-container spell'>
                                        <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                                        <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                                        <div class='row-options'>
                                            <div class='row'>
                                            <span class='label' data-i18n='name-u'>NAME</span>
                                            <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                                            <span class='label' data-i18n='lvl'>LVL</span>
                                            <input class='atk-level' title='@{level}' name='attr_level' type='text' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='source'>SOURCE</span>
                                                <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Operative'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='school'>SCHOOL</span>
                                                <input class='scalable-input' title='@{school}' name='attr_school' type='text' placeholder='abjuration'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='target'>TARGET</span>
                                                <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                                <span class='label' data-i18n='rng'>RNG</span>
                                                <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                            </div>
                                            <div class='row'>
                                                <span class='label' data-i18n='duration'>DURATION</span>
                                                <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                                            </div>
                                            <div class='row'>
                                                <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                                <input class='scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='Standard Action'>
                                            </div>
                                            <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                                            <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                                        <option value='@{strength_mod}' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                                    <span class='arith'>+</span>
                                                    <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                                    <input class='abi-misc' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='rng'>RNG</span>
                                                    <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                                            <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                                <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                                <div class='field row'>
                                                    <input class='abi-dmg-dice' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                                    <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                                        <option value='' selected='selected'>N/A</option>
                                                        <option value='@{strength_mod}'>STR</option>
                                                        <option value='@{dexterity_mod}'>DEX</option>
                                                        <option value='@{constitution_mod}'>CON</option>
                                                        <option value='@{intelligence_mod}'>INT</option>
                                                        <option value='@{wisdom_mod}'>WIS</option>
                                                        <option value='@{charisma_mod}'>CHA</option>
                                                    </select>
                                                    <input hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='type'>TYPE</span>
                                                    <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                                    <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                                    <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                                </div>
                                                <div class='field row'>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                                            <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                            <div class='field-container'>
                                                <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                                <div class='field row'>
                                                    <select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                                        <option value='@{strength_mod}' data-i18n='str' selected='selected'>STR</option>
                                                        <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                                        <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                                        <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                                        <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                                        <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                                    </select>
                                                    <span class='label' data-i18n='based-dc_'>Based DC </span>
                                                    <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                                    <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                                    <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                                    <input title='@{dc}' name='attr_dc' type='number' value='10' hidden='true'>
                                                    <span class='save-dc modified-attr label' title='@{dc}' name='attr_dc' value='10'>10</span>
                                                    <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                                        <option value='' selected='selected'>-</option>
                                                        <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                                        <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                                        <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                                    </select>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                    <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                                </div>
                                                <div class='field row'>
                                                    <textarea class='' title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                                </div>
                                                <div class='field row'>
                                                </div>
                                            </div>
                                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                            <div class='row field-container mod-container'>
                                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                                <textarea class='field row' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                                            </div>
                                            <div class='row'>
                                                <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                                            </div>
                                        </div>
                                        <div class='display'>
                                            <div class='button-description'>
                                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{rightbanner=@{school}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}}{{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{school}}}{{notes=@{description}}} @{attacher}'>
                                                    <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span>
                                                </button>
                                                <span class='' title='@{description}' name='attr_description' placeholder='Description'></span>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>
                            <label class='pseudo-repcontrol spell'>
                                <input type='checkbox' title='@{create_9th}' name='attr_create_9th' value='1'>
                                <span>&</span>
                            </label>
                                <select class='compendium-select' title='@{level_9_spell_compendium}' name='attr_level_9_spell_compendium'></select>
                        </div>
                        <div class='attribute-container always-glow border left'></div>
                        <div class='attribute-container always-glow border top'></div>
                        <div class='attribute-container always-glow border right'></div>
                        <div class='attribute-container always-glow border bottom'></div>
                        <div class='attribute-container always-glow border bottom-left corner'></div>
                        <div class='attribute-container always-glow border top-right corner'></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container npc">
        <div class='statblock'>
            <div class='statblock-header'>
                <input class='scalable-input char-name' type='text' title='@{character_name}' name='attr_character_name'>
                <span class='cr label' data-i18n='cr'>CR</span>
                <input class='cr' type='text' title='@{cr}' name='attr_cr' value='' placeholder='1/3'>
            </div>
            <div class='row'>
                <span class='xp label' data-i18n='xp'>XP</span>
                <input class='xp' type='number' title='@{xp}' name='attr_xp' placeholder='200'>
            </div>
            <div class='row'>
                <input class='scalable-input' type='text' title='@{race}' name='attr_race' placeholder='RACE & GRAFTS'>
            </div>
            <div class='row'>
                <input class='alignment' type='text' title='@{alignment}' name='attr_alignment' placeholder='NE'>
                <select class='size' title='@{size}' name='attr_size'>
                    <option value='-4'>FINE</option>
                    <option value='-3'>DIMINUTIVE</option>
                    <option value='-2'>TINY</option>
                    <option value='-1'>SMALL</option>
                    <option value='0'selected='selected'>MEDIUM</option>
                    <option value='1'>LARGE</option>
                    <option value='2'>HUGE</option>
                    <option value='3'>GARGANTUAN</option>
                    <option value='4'>COLOSSAL</option>
                </select>
                <input class='scalable-input' type='text' title='@{type_subtype}' name='attr_type_subtype' placeholder='Type (subtype)'>
            </div>
            <div class='row'>
                <button class='label' type='roll' title='%{initiative}' name='roll_initiative' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Initiative}} {{r1=[[1d20+@{initiative_ability}[ABILITY]@{npc_init}@{initiative_misc}+[[(@{initiative_ability}[ABILITY]@{npc_init}@{initiative_misc})/100)]][TIE BREAKER]&{tracker}]]}}' data-i18n='init' >INIT</button>
                <input class='init' type='number' title='@{initiative}' name='attr_initiative' value='0'>
                <input hidden='true' type='text' title='@{initiative_misc}' name='attr_initiative_misc' value=''>
                <span class='senses label' data-i81n='senses'>SENSES</span>
                <input class='senses scalable-input' type='text' title='@{senses}' name='attr_senses' placeholder='Darkvision (60ft)'>
            </div>
            <div class='row'>
                <span class='perception label' data-i18n='perception'>PERCEPTION</span>
                <input class='perception' type='number' title='@{perception}' name='attr_perception' value='0'>
            </div>
            <div class='row'>
                <span class='aura label' data-i18n='aura'>AURA</span>
                <input class='aura scalable-input' type='text' title='@{aura}' name='attr_aura' placeholder='Unnatural Aura (30ft)'>
            </div>
            <div class='statblock-section-header defense-header'>
                <span data-i18n='defense'>DEFENSE</span>
                <div class='hp-rp-container'>
                    <span class='hp' data-i18n='hp'>HP</span>
                    <input class='hp' type='number' title='@{hp}' name='attr_hp' placeholder='20'>
                    <span class='slash'>/</span>
                    <input class='hp' type='number' title='@{hp_max}' name='attr_hp_max' placeholder='20'>
                    <span class='rp' data-18n='rp'>RP</span>
                    <input class='rp' type='number' title='@{rp}' name='attr_rp' value='0'>
                    <span class='slash'>/</span>
                    <input class='rp' type='number' title='@{rp_max}' name='attr_rp_max' value='0'>
                </div>
            </div>
            <div class='row'>
                <span class='npc-ac' data-i18n='eac'>EAC</span>
                <input class='npc-ac' type='number' title='@{eac}' name='attr_eac' value='0'>
                <span class='npc-ac' data-i18n='kac'>KAC</span>
                <input class='npc-ac' type='number' title='@{kac}' name='attr_kac' value='0'>
                <span class='npc-ac' data-i18n='cmd'>CMD</span>
                <input class='npc-ac' type='number' title='@{cmd}' name='attr_cmd' value='0'>
                <input class='npc-ac-notes scalable-input' type='text' title='@{ac_notes}' name='attr_ac_notes' placeholder='AC Notes'>
            </div>
            <div class='row'>
                <button class='npc-save' type='roll' title='%{fort}' name='roll_fort' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Fortitude}} {{r1=[[1d20+@{fort_base}[BASE]+@{fort_ability}[ABILITY]@{fort_misc}]] }} {{notes=@{save_notes}}}' data-i18n='fort' >FORT</button>
                <input class='npc-save' type='number' title='@{fort}' name='attr_fort' value='0'>
                <button class='npc-save' type='roll' title='%{ref}' name='roll_ref' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Ref}} {{r1=[[1d20+@{ref_base}[BASE]+@{ref_ability}[ABILITY]@{ref_misc}]] }} {{notes=@{save_notes}}}' data-i18n='ref' >REF</button>
                <input class='npc-save' type='number' title='@{ref}' name='attr_ref' value='0'>
                <button class='npc-save' type='roll' title='%{will}' name='roll_will' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Will}} {{r1=[[1d20+@{will_base}[BASE]+@{will_ability}[ABILITY]@{will_misc}]] }} {{notes=@{save_notes}}}' data-i18n='will' >WILL</button>
                <input class='npc-save' type='number' title='@{will}' name='attr_will' value='0'>
                <input class='npc-save-notes scalable-input' type='text' title='@{save_notes}' name='attr_save_notes' placeholder='Save Notes'>
            </div>
            <div class='row'>
                <span class='def-abilities' data-i18n='defensive-abilities'>DEFENSIVE ABILITIES</span>
                <input class='def-abilities scalable-input' type='text' title='@{defensive_abilities}' name='attr_defensive_abilities'>
            </div>
            <div class='row'>
                <span class='dr' data-i18n='dr'>DR</span>
                <input class='scalable-input' type='text' title='@{dr}' name='attr_dr'>
                <span class='immunities' data-i18n='immunities'>IMMUNITIES</span>
                <input class='immunities scalable-input' type='text' title='@{immunities}' name='attr_immunities'>
                <span class='sr' data-i18n='sr'>SR</span>
                <input class='sr' type='number' title='@{sr}' name='attr_sr'>
            </div>
            <div class='row'>
                <span class='resistances' data-i18n='resistances'>RESISTANCES</span>
                <input class='resistances scalable-input' type='text' title='@{resistances}' name='attr_resistances'>
                <span class='weaknesses' data-i18n='weaknesses'>WEAKNESSES</span>
                <input class='weaknesses scalable-input' type='text' title='@{weaknesses}' name='attr_weaknesses'>
            </div>
            <div class='statblock-section-header offense-header'>
                <span data-i18n='offense'>OFFENSE</span>
            </div>
            <div class='row'>
                <span data-i18n='speed'>SPEED</span>
                <input class='speed scalable-input' type='text' title='@{speed}' name='attr_speed'>
            </div>
            <div class='attack-row'>
                <span class='attack-label label' data-i18n='melee'>MELEE</span>
                <fieldset class='repeating_attack'>
                    <input class='filter' type='radio' hidden='true' title='@{range_filter}' name='attr_range_filter' value='melee' checked='checked'>
                    <input type='radio' hidden='true' title='@{range_filter}' name='attr_range_filter' value='ranged'>
                    <div class='filter-container attack'>
                        
                        <input type='text' hidden='true' title='@{misc}' name='attr_misc' value=''>
                        <input type='text' hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                        
                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" value='1' checked="checked"><span>y</span>
                        <div class='row-options'>
                            <div class='row'>
                                <span class='label' data-i18n='name-u'>NAME</span>
                                <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder='Laser Pistol' value=''>
                                <span class='label' data-i18n='lvl'>LVL</span>
                                <input class='atk-level' type='text' title='@{level}' name='attr_level' value='0'>
                            </div>
                            <div class='row'>
                                <select class='label proficiency' title='@{proficiency}' name='attr_proficiency'>
                                    <option value='no' data-i18n='Not-Proficient'>NOT PROFICIENT</option>
                                    <option value='yes' data-i18n='proficient' selected='selected'>PROFICIENT</option>
                                    <option value='specialized' data-i18n='specialized'>SPECIALIZED</option>
                                </select>
                                <input hidden='true' type='text' title='@{proficiency_value}' name='attr_proficiency_value' value='0'>
                                <input hidden='true'  type='text' title='@{damage_proficiency_value}' name='attr_damage_proficiency_value' value='0'>
                                <span class='label' data-i18n='category'>CATEGORY</span>
                                <input class='weapon-cat scalable-input' type='text' title='@{category}' name='attr_category' placeholder='Longarm' value=''>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='atk-u'>ATK</span>
                                <select class='label atk-ability abi' title='@{ability}' name='attr_ability'>
                                    <option value='@{strength_mod}' selected='selected'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                                <input hidden='true' type='text' title='@{ability}' name='attr_ability' value='0'>
                                <span class='arith'>+</span>
                                <input type='number' title='@{bab}' name='attr_bab' value='0'>
                                <input class='atk-misc misc scalable-input' type='text' title='@{bonus}' name='attr_bonus' placeholder='+@{attr}/2 + ?{Query}' value=''>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='rng'>RNG</span>
                                <input class='atk-range' type='text' title='@{range}' name='attr_range' placeholder='30 ft' value=''>
                                <select class='label atk-range-type' title='@{engagement_range}' name='attr_engagement_range'>
                                    <option value='melee' data-i18n='melee' selected='selected'>MELEE</option>
                                    <option value='ranged' data-i18n='ranged'>RANGED</option>
                                </select>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='dmg'>DMG</span>
                                <input class='dmg-dice scalable-input' type='text' name=attr_damage_dice placeholder='1d8' value=''><span>+</span>
                                <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                    <option value='' selected='selected'>N/A</option>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                                <input hidden='true' type='text' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                <input class='atk-damage scalable-input' type='text' title='@{damage_bonus}' name='attr_damage_bonus' placeholder='+@{attr}/2 + ?{Query}' value=''>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='type'>TYPE</span>
                                <input class='atk-type scalable-input' type='text' title='@{type}' name='attr_type' placeholder='Fire' value=''>
                                <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                <input class='atk-crit scalable-input' type='text' title='@{crit}' name='attr_crit' placeholder='Burn' value=''>
                            </div>
                            <div class='row'>
                                <input class='label scalable-input' data-i18n-placeholder='ammo' title='@{ammo_type}' name='attr_ammo_type' type='text' placeholder='ammo' >
                                <input title='@{ammo}' name='attr_ammo' type='number' >
                                <span class='label'>/</span>
                                <input title='@{ammo_max}' name='attr_ammo_max' type='number' >
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='usage'>USAGE</span>
                                <input class='atk-usage scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='1 charge' value=''>
                                <span class='label' data-i18n='special'>SPECIAL</span>
                                <input class='atk-special scalable-input' type='text' title='@{special}' name='attr_special' placeholder='heirloom' value=''>
                            </div>
                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                            <div class='field-container'>
                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                <div class='field row'>
                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                </div>
                                <div class='field row'>
                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}' checked='checked'><span class='label'  data-i18n='query'>QUERY</span></label>
                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0'><span class='label'  data-i18n='never'>NEVER</span></label>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                </div>
                            </div>
                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                            <div class='row field-container mod-container'>
                                <input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                <textarea class='atk-description' title='@{attacher}' name='attr_attacher' ></textarea>
                            </div>
                            <div class='row'>
                                <textarea class='atk-description scalable-input' title='@{description}' name='attr_description' placeholder='Description' value=''></textarea>
                            </div>
                        </div>
                        <div class='display'>
                            <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_attack}{{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1name=@{name}}} {{r1=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{misc}@{bonus}]]}} {{damage1type=@{type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit1effect=@{crit}}} {{r2name=@{name}}} {{r2=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+[[@{full_attack_penalty}]][FULL ATTACK]@{misc}@{bonus}]]}} {{damage2type=@{type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit2effect=@{crit}}} {{r3name=@{name}}} {{r3=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+@{full_attack_penalty}[FULL ATTACK]@{misc}@{bonus}]]}} {{damage3type=@{type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit3effect=@{crit}}} {{r4name=@{name}}} {{r4=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+@{full_attack_penalty}[FULL ATTACK]@{misc}@{bonus}]]}} {{damage4type=@{type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit4effect=@{crit}}} {{r5name=@{name}}} {{r5=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+@{full_attack_penalty}[FULL ATTACK]@{misc}@{bonus}]]}} {{damage5type=@{type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit5effect=@{crit}}} {{range=@{range}}} {{ammo_type=@{ammo_type}}} {{curr_ammo=@{ammo}}} {{rightbanner=@{special}}} {{notes=@{description}}} @{attacher}'>
                                <span class='label' title='@{name}' name='attr_name'></span>
                                <div class='attr-total-container'>
                                    <input class='mod-debuff' type='radio' title='@{total_change}' name='attr_total_change' value='-1' hidden='true'>
                                    <input class='mod-normal' type='radio' title='@{total_change}' name='attr_total_change' value='0' hidden='true' checked='checked'>
                                    <input class='mod-buff' type='radio' title='@{total_change}' name='attr_total_change' value='1' hidden='true'>
                                    <span class='label modified-attr' title='@{total}' name='attr_total' value='0'>0</span>
                                </div>
                                <span class='label'>(</span>
                                <div class='attr-total-container'>
                                    <input class='mod-debuff' type='radio' title='@{damage_total_change}' name='attr_damage_total_change' value='-1' hidden='true'>
                                    <input class='mod-normal' type='radio' title='@{damage_total_change}' name='attr_damage_total_change' value='0' hidden='true' checked='checked'>
                                    <input class='mod-buff' type='radio' title='@{damage_total_change}' name='attr_damage_total_change' value='1' hidden='true'>
                                    <span class='label modified-attr' title='@{damage_total}' name='attr_damage_total' value='0'>0</span>
                                </div>
                                <span class='label' title='@{type}' name='attr_type'></span>
                                <span class='label'>),</span>
                            </button>
                        </div>
                    </div>
                </fieldset>
                <label class='pseudo-repcontrol'><input type='checkbox' title='@{create_npcmelee}' name='attr_create_npcmelee' value='melee'><span>&</span></label>
            </div>
            <div class='attack-row'>
                <span class='attack-label label' data-i18n='ranged'>RANGED</span>
                <fieldset class='repeating_attack'>
                    <input type='radio' hidden='true' title='@{range_filter}' name='attr_range_filter' value='melee' checked='checked'>
                    <input class='filter' type='radio' hidden='true' title='@{range_filter}' name='attr_range_filter' value='ranged'>
                    <div class='filter-container attack'>
                        
                        <input type='text' hidden='true' title='@{misc}' name='attr_misc' value=''>
                        <input type='text' hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                        
                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" value='1' checked="checked"><span>y</span>
                        <div class='row-options'>
                            <div class='row'>
                                <span class='label' data-i18n='name-u'>NAME</span>
                                <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder='Laser Pistol' value=''>
                                <span class='label' data-i18n='lvl'>LVL</span>
                                <input class='atk-level' type='text' title='@{level}' name='attr_level' value='0'>
                            </div>
                            <div class='row'>
                                <select class='label proficiency' title='@{proficiency}' name='attr_proficiency'>
                                    <option value='no' data-i18n='Not-Proficient'>NOT PROFICIENT</option>
                                    <option value='yes' data-i18n='proficient' selected='selected'>PROFICIENT</option>
                                    <option value='specialized' data-i18n='specialized'>SPECIALIZED</option>
                                </select>
                                <input hidden='true' type='text' title='@{proficiency_value}' name='attr_proficiency_value' value='0'>
                                <input hidden='true'  type='text' title='@{damage_proficiency_value}' name='attr_damage_proficiency_value' value='0'>
                                <span class='label' data-i18n='category'>CATEGORY</span>
                                <input class='weapon-cat scalable-input' type='text' title='@{category}' name='attr_category' placeholder='Longarm' value=''>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='atk-u'>ATK</span>
                                <select class='label atk-ability abi' title='@{ability}' name='attr_ability'>
                                    <option value='@{strength_mod}' selected='selected'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                                <input hidden='true' type='text' title='@{ability}' name='attr_ability' value='0'>
                                <span class='arith'>+</span>
                                <input type='number' title='@{bab}' name='attr_bab' value='0'>
                                <input class='atk-misc misc scalable-input' type='text' title='@{bonus}' name='attr_bonus' placeholder='+@{attr}/2 + ?{Query}' value=''>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='rng'>RNG</span>
                                <input class='atk-range' type='text' title='@{range}' name='attr_range' placeholder='30 ft' value=''>
                                <select class='label atk-range-type' title='@{engagement_range}' name='attr_engagement_range'>
                                    <option value='melee' data-i18n='melee' selected='selected'>MELEE</option>
                                    <option value='ranged' data-i18n='ranged'>RANGED</option>
                                </select>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='dmg'>DMG</span>
                                <input class='dmg-dice scalable-input' type='text' name=attr_damage_dice placeholder='1d8' value=''><span>+</span>
                                <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                    <option value='' selected='selected'>N/A</option>
                                    <option value='@{strength_mod}'>STR</option>
                                    <option value='@{dexterity_mod}'>DEX</option>
                                    <option value='@{constitution_mod}'>CON</option>
                                    <option value='@{intelligence_mod}'>INT</option>
                                    <option value='@{wisdom_mod}'>WIS</option>
                                    <option value='@{charisma_mod}'>CHA</option>
                                </select>
                                <input hidden='true' type='text' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                <input class='atk-damage scalable-input' type='text' title='@{damage_bonus}' name='attr_damage_bonus' placeholder='+@{attr}/2 + ?{Query}' value=''>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='type'>TYPE</span>
                                <input class='atk-type scalable-input' type='text' title='@{type}' name='attr_type' placeholder='Fire' value=''>
                                <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                <input class='atk-crit scalable-input' type='text' title='@{crit}' name='attr_crit' placeholder='Burn' value=''>
                            </div>
                            <div class='row'>
                                <input class='label scalable-input' data-i18n-placeholder='ammo' title='@{ammo_type}' name='attr_ammo_type' type='text' placeholder='ammo' >
                                <input title='@{ammo}' name='attr_ammo' type='number' >
                                <span class='label'>/</span>
                                <input title='@{ammo_max}' name='attr_ammo_max' type='number' >
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='atk_usage'>USAGE</span>
                                <input class='atk-usage scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='1 charge' value=''>
                                <span class='label' data-i18n='special'>SPECIAL</span>
                                <input class='atk-special scalable-input' type='text' title='@{special}' name='attr_special' placeholder='heirloom' value=''>
                            </div>
                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                            <div class='field-container'>
                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                <div class='field row'>
                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                </div>
                                <div class='field row'>
                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}' checked='checked'><span class='label'  data-i18n='query'>QUERY</span></label>
                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0'><span class='label'  data-i18n='never'>NEVER</span></label>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                </div>
                            </div>
                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                            <div class='row field-container mod-container'>
                                <input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                <textarea class='atk-description' title='@{attacher}' name='attr_attacher' ></textarea>
                            </div>
                            <div class='row'>
                                <textarea class='atk-description scalable-input' title='@{description}' name='attr_description' placeholder='Description' value=''></textarea>
                            </div>
                        </div>
                        <div class='display'>
                            <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_attack}{{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1name=@{name}}} {{r1=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{misc}@{bonus}]]}} {{damage1type=@{type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit1effect=@{crit}}} {{r2name=@{name}}} {{r2=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+[[@{full_attack_penalty}]][FULL ATTACK]@{misc}@{bonus}]]}} {{damage2type=@{type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit2effect=@{crit}}} {{r3name=@{name}}} {{r3=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+@{full_attack_penalty}[FULL ATTACK]@{misc}@{bonus}]]}} {{damage3type=@{type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit3effect=@{crit}}} {{r4name=@{name}}} {{r4=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+@{full_attack_penalty}[FULL ATTACK]@{misc}@{bonus}]]}} {{damage4type=@{type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit4effect=@{crit}}} {{r5name=@{name}}} {{r5=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]+@{proficiency_value}[PROF]+@{full_attack_penalty}[FULL ATTACK]@{misc}@{bonus}]]}} {{damage5type=@{type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]+@{damage_proficiency_value}[SPEC]@{damage_misc}]]}} {{crit5effect=@{crit}}} {{range=@{range}}} {{ammo_type=@{ammo_type}}} {{curr_ammo=@{ammo}}} {{rightbanner=@{special}}} {{notes=@{description}}} @{attacher}'>
                                <span class='label' title='@{name}' name='attr_name'></span>
                                <div class='attr-total-container'>
                                    <input class='mod-debuff' type='radio' title='@{total_change}' name='attr_total_change' value='-1' hidden='true'>
                                    <input class='mod-normal' type='radio' title='@{total_change}' name='attr_total_change' value='0' hidden='true' checked='checked'>
                                    <input class='mod-buff' type='radio' title='@{total_change}' name='attr_total_change' value='1' hidden='true'>
                                    <span class='label modified-attr' title='@{total}' name='attr_total' value='0'>0</span>
                                </div>
                                <span class='label'>(</span>
                                <div class='attr-total-container'>
                                    <input class='mod-debuff' type='radio' title='@{damage_total_change}' name='attr_damage_total_change' value='-1' hidden='true'>
                                    <input class='mod-normal' type='radio' title='@{damage_total_change}' name='attr_damage_total_change' value='0' hidden='true' checked='checked'>
                                    <input class='mod-buff' type='radio' title='@{damage_total_change}' name='attr_damage_total_change' value='1' hidden='true'>
                                    <span class='label modified-attr' title='@{damage_total}' name='attr_damage_total' value='0'>0</span>
                                </div>
                                <span class='label' title='@{type}' name='attr_type'></span>
                                <span class='label'>),</span>
                            </button>
                        </div>
                    </div>
                </fieldset>
                <label class='pseudo-repcontrol'><input type='checkbox' title='@{create_npcranged}' name='attr_create_npcranged' value='ranged'><span>&</span></label>
            </div>
            <div class='row'>
                <span data-i18n='space'>SPACE</span>
                <input class='space' type='text' title='@{space}' name='attr_space' value='5 ft'>
                <span data-i18n='reach'>REACH</span>
                <input class='reach scalable-input' type='text' title='@{reach}' name='attr_reach'>
            </div>
            <div class='row'>
                <span data-i18n='spells-known'>SPELLS KNOWN</span>
                <span data-i18n='(cl'>(CL</span>
                <input class='cl' type='number' title='@{caster_level}' name='attr_caster_level'>
                <span>)</span>
                <fieldset class='repeating_spell'><input hidden='true' type='text' title='@{attack_total}' name='attr_attack_total'><input hidden='true' type='text' title='@{damage_total}' name='attr_damage_total'>
                   <!--Hidden Ability Attributes -->
                    <div class='spell'>
                       <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                       <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                       <!--Shown Ability Attributes -->
                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                        <div class='row-options'>
                            <div class='row'>
                            <span class='label' data-i18n='name-u'>NAME</span>
                            <input class='scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                            <span class='label' data-i18n='lvl'>LVL</span>
                            <input class='atk-level' style='margin-right:30px;' title='@{level}' name='attr_level' type='text' value=''>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='source'>SOURCE</span>
                                <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Operative'>
                            </div>
                                <div class='row'>
                                <span class='label' data-i18n='school'>SCHOOL</span>
                                <input class='scalable-input' title='@{school}' name='attr_school' type='text' placeholder='abjuration'>                                        </div>

                            <div class='row'>
                                <span class='label' data-i18n='target'>TARGET</span>
                                <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                <span class='label' data-i18n='rng'>RNG</span>
                                <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='duration'>DURATION</span>
                                <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                            </div>
                            <div class='row'>
                                <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                <input class='scalable-input' type='text' title='@{usage}' name='attr_usage' placeholder='Standard Action'>
                            </div>
                            <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                            <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                            <div class='field-container'>
                                <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                <div class='field row'>
                                    <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                        <option value='@{strength_mod}' selected='selected'>STR</option>
                                        <option value='@{dexterity_mod}'>DEX</option>
                                        <option value='@{constitution_mod}'>CON</option>
                                        <option value='@{intelligence_mod}'>INT</option>
                                        <option value='@{wisdom_mod}'>WIS</option>
                                        <option value='@{charisma_mod}'>CHA</option>
                                    </select>
                                    <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                    <span class='arith'>+</span>
                                    <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                    <input class='scalable-input' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i18n='rng'>RNG</span>
                                    <input class='atk-range' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                                </div>
                            </div>
                            <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                            <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                            <div class='field-container'>
                                <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                <div class='field row'>
                                    <input class='abi-dmg-dice' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                    <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                        <option value='' selected='selected'>N/A</option>
                                        <option value='@{strength_mod}'>STR</option>
                                        <option value='@{dexterity_mod}'>DEX</option>
                                        <option value='@{constitution_mod}'>CON</option>
                                        <option value='@{intelligence_mod}'>INT</option>
                                        <option value='@{wisdom_mod}'>WIS</option>
                                        <option value='@{charisma_mod}'>CHA</option>
                                    </select>
                                    <input hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i18n='type'>TYPE</span>
                                    <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                    <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                    <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                </div>
                            </div>
                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                            <div class='field-container'>
                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                <div class='field row'>
                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                </div>
                                <div class='field row'>
                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                </div>
                            </div>
                            <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                            <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                            <div class='field-container'>
                                <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'>
                                <div class='field row'>
                                    <!--<select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                        <option value='@{strength_mod}' data-i18n='str' selected='selected'>STR</option>
                                        <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                        <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                        <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                        <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                        <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                    </select>-->
                                    <span class='label' data-i18n='dc'>DC</span>
                                    <div class='attr-total-container'>
                                        <input class='base-attr attr' type='number' title='@{dc_base}' name='attr_dc_base' value='10'>
                                        <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                        <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                        <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                        <input class='modified-attr attr' type='number' title='@{dc}' name='attr_dc' value='10' hidden='true'>
                                        <span class='modified-attr attr' title='@{dc}' name='attr_dc' value='10'>10</span>
                                    </div>
                                    <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                        <option value='' selected='selected'>-</option>
                                        <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                        <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                        <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                    </select>
                                </div>
                                <div class='field row'>
                                    <textarea class='' title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                </div>
                                <div class='field row'>
                                    <textarea class='' title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                </div>
                                <div class='field row'>
                                </div>
                            </div>
                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                            <div class='row field-container mod-container'>
                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                <textarea class='field row' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                            </div>
                            <div class='row'>
                                <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                            </div>
                        </div>
                        <div class='display'>
                            <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{rightbanner=@{school}}} {{title=@{name}}} {{level=[[[[@{level}]]d1cs>2cf>2]]}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}}{{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{school}}}{{notes=@{description}}} @{attacher}'>
                                <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span><span>,</span>
                            </button>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class='statblock-section-header statistics-header'>
                <span data-i18n='statistics'>STATISTICS</span>
            </div>
            <div class='row'>
                <span data-i18n='str'>STR</span>
                <input class='npc-mod' type='text' title='@{strength_mod}' name='attr_strength_mod' value='0' pattern='-?\d+|[-]'>
                <span data-i18n='dex'>DEX</span>
                <input class='npc-mod' type='text' title='@{dexterity_mod}' name='attr_dexterity_mod' value='0' pattern='-?\d+|[-]'>
                <span data-i18n='con'>CON</span>
                <input class='npc-mod' type='text' title='@{constitution_mod}' name='attr_constitution_mod' value='0' pattern='-?\d+|[-]'>
                <span data-i18n='int'>INT</span>
                <input class='npc-mod' type='text' title='@{intelligence_mod}' name='attr_intelligence_mod' value='0' pattern='-?\d+|[-]'>
                <span data-i18n='wis'>WIS</span>
                <input class='npc-mod' type='text' title='@{wisdom_mod}' name='attr_wisdom_mod' value='0' pattern='-?\d+|[-]'>
                <span data-i18n='cha'>CHA</span>
                <input class='npc-mod' type='text' title='@{charisma_mod}' name='attr_charisma_mod' value='0' pattern='-?\d+|[-]'>
            </div>
            <div class='row skills-row'>
                <span data-i18n='skills'>SKILLS</span>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{acrobatics_show_options}' name="attr_acrobatics_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{acrobatics_misc}' name='attr_acrobatics_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{acrobatics_ranks}' name='attr_acrobatics_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{acrobatics_class_skill}' name='attr_acrobatics_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{acrobatics}' name='roll_acrobatics' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Acrobatics}}  {{r1=[[1d20+@{acrobatics_ranks}[Ranks]+[[({0,@{acrobatics_ranks}}>1)*@{acrobatics_class_skill}]][CS]+@{acrobatics_ability}[Ability]@{acrobatics_misc}]]}} {{notes=@{acrobatics_description}}}' data-i18n='acrobatics' >ACROBATICS</button>
                        <input type='text' title='@{acrobatics}' name='attr_acrobatics' value=''>
                        <select class='label abi' title='@{acrobatics_ability}' name='attr_acrobatics_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{acrobatics_acp}' name='attr_acrobatics_acp' value='1' checked='checked'>
                        </div>
                        <textarea class='skill-description' title='@{acrobatics_description}' name='attr_acrobatics_description' placeholder='Notes'></textarea>
                        <input title='@{acrobatics_buff_notes}' name='attr_acrobatics_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{athletics_show_options}' name="attr_athletics_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{athletics_misc}' name='attr_athletics_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{athletics_ranks}' name='attr_athletics_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{athletics_class_skill}' name='attr_athletics_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{athletics}' name='roll_athletics' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Athletics}}  {{r1=[[1d20+@{athletics_ranks}[RANKS]+[[({0,@{athletics_ranks}}>1)*@{athletics_class_skill}]][CS]+@{athletics_ability}[ABILITY]@{athletics_misc}]]}} {{notes=@{athletics_description}}}' data-i18n='athletics' >ATHLETICS</button>
                        <input type='text' title='@{athletics}' name='attr_athletics' value=''>
                        <select class='label abi' title='@{athletics_ability}' name='attr_athletics_ability' style='width; .5em;'>
                            <option value='@{strength_mod}' selected='selected'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{athletics_acp}' name='attr_athletics_acp' value='1' checked='checked'>
                        </div>
                        <textarea class='skill-description' title='@{athletics_description}' name='attr_athletics_description' placeholder='Notes'></textarea>
                        <input title='@{athletics_buff_notes}' name='attr_athletics_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{bluff_show_options}' name="attr_bluff_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{bluff_misc}' name='attr_bluff_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{bluff_ranks}' name='attr_bluff_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{bluff_class_skill}' name='attr_bluff_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{bluff}' name='roll_bluff' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Bluff}}  {{r1=[[1d20+@{bluff_ranks}[RANKS]+[[({0,@{bluff_ranks}}>1)*@{bluff_class_skill}]][CS]+@{bluff_ability}[ABILITY]@{bluff_misc}]]}} {{notes=@{bluff_description}}}' data-i18n='bluff' >BLUFF </button>
                        <input type='text' title='@{bluff}' name='attr_bluff' value=''>
                        <select class='label abi' title='@{bluff_ability}' name='attr_bluff_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}' selected='selected'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{bluff_acp}' name='attr_bluff_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{bluff_description}' name='attr_bluff_description' placeholder='Notes'></textarea>
                        <input title='@{bluff_buff_notes}' name='attr_bluff_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{computers_show_options}' name="attr_computers_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{computers_misc}' name='attr_computers_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{computers_ranks}' name='attr_computers_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{computers_class_skill}' name='attr_computers_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{computers}' name='roll_computers' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Computers}}  {{r1=[[1d20+@{computers_ranks}[RANKS]+[[({0,@{computers_ranks}}>1)*@{computers_class_skill}]][CS]+@{computers_ability}[ABILITY]@{computers_misc}]]}} {{notes=@{computers_description}}}' data-i18n='computers' >COMPUTERS</button>
                        <input type='text' title='@{computers}' name='attr_computers' value=''>
                        <select class='label abi' title='@{computers_ability}' name='attr_computers_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}' selected='selected'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{computers_acp}' name='attr_computers_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{computers_description}' name='attr_computers_description' placeholder='Notes'></textarea>
                        <input title='@{computers_buff_notes}' name='attr_computers_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{culture_show_options}' name="attr_culture_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{culture_misc}' name='attr_culture_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{culture_ranks}' name='attr_culture_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{culture_class_skill}' name='attr_culture_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{culture}' name='roll_culture' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Culture}}  {{r1=[[1d20+@{culture_ranks}[RANKS]+[[({0,@{culture_ranks}}>1)*@{culture_class_skill}]][CS]+@{culture_ability}[ABILITY]@{culture_misc}]]}} {{notes=@{culture_description}}}' data-i18n='culture' >CULTURE</button>
                        <input type='text' title='@{culture}' name='attr_culture' value=''>
                        <select class='label abi' title='@{culture_ability}' name='attr_culture_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}' selected='selected'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{culture_acp}' name='attr_culture_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{culture_description}' name='attr_culture_description' placeholder='Notes'></textarea>
                        <input title='@{culture_buff_notes}' name='attr_culture_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{diplomacy_show_options}' name="attr_diplomacy_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{diplomacy_misc}' name='attr_diplomacy_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{diplomacy_ranks}' name='attr_diplomacy_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{diplomacy_class_skill}' name='attr_diplomacy_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{diplomacy}' name='roll_diplomacy' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Diplomacy}}  {{r1=[[1d20+@{diplomacy_ranks}[RANKS]+[[({0,@{diplomacy_ranks}}>1)*@{diplomacy_class_skill}]][CS]+@{diplomacy_ability}[ABILITY]@{diplomacy_misc}]]}} {{notes=@{diplomacy_description}}}' data-i18n='diplomacy' >DIPLOMACY</button>
                        <input type='text' title='@{diplomacy}' name='attr_diplomacy' value=''>
                        <select class='label abi' title='@{diplomacy_ability}' name='attr_diplomacy_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}' selected='selected'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{diplomacy_acp}' name='attr_diplomacy_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{diplomacy_description}' name='attr_diplomacy_description' placeholder='Notes'></textarea>
                        <input title='@{diplomacy_buff_notes}' name='attr_diplomacy_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{disguise_show_options}' name="attr_disguise_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{disguise_misc}' name='attr_disguise_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{disguise_ranks}' name='attr_disguise_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{disguise_class_skill}' name='attr_disguise_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{disguise}' name='roll_disguise' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Disguise}}  {{r1=[[1d20+@{disguise_ranks}[RANKS]+[[({0,@{disguise_ranks}}>1)*@{disguise_class_skill}]][CS]+@{disguise_ability}[ABILITY]@{disguise_misc}]]}} {{notes=@{disguise_description}}}' data-i18n='disguise' >DISGUISE</button>
                        <input type='text' title='@{disguise}' name='attr_disguise' value=''>
                        <select class='label abi' title='@{disguise_ability}' name='attr_disguise_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}' selected='selected'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{disguise_acp}' name='attr_disguise_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{disguise_description}' name='attr_disguise_description' placeholder='Notes'></textarea>
                        <input title='@{disguise_buff_notes}' name='attr_disguise_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{engineering_show_options}' name="attr_engineering_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{engineering_misc}' name='attr_engineering_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{engineering_ranks}' name='attr_engineering_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{engineering_class_skill}' name='attr_engineering_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{engineering}' name='roll_engineering' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Engineering}}  {{r1=[[1d20+@{engineering_ranks}[RANKS]+[[({0,@{engineering_ranks}}>1)*@{engineering_class_skill}]][CS]+@{engineering_ability}[ABILITY]@{engineering_misc}]]}} {{notes=@{engineering_description}}}' data-i18n='engineering' >ENGINEERING</button>
                        <input type='text' title='@{engineering}' name='attr_engineering' value=''>
                        <select class='label abi' title='@{engineering_ability}' name='attr_engineering_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}' selected='selected'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{engineering_acp}' name='attr_engineering_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{engineering_description}' name='attr_engineering_description' placeholder='Notes'></textarea>
                        <input title='@{engineering_buff_notes}' name='attr_engineering_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{intimidate_show_options}' name="attr_intimidate_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{intimidate_misc}' name='attr_intimidate_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{intimidate_ranks}' name='attr_intimidate_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{intimidate_class_skill}' name='attr_intimidate_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{intimidate}' name='roll_intimidate' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Intimidate}}  {{r1=[[1d20+@{intimidate_ranks}[RANKS]+[[({0,@{intimidate_ranks}}>1)*@{intimidate_class_skill}]][CS]+@{intimidate_ability}[ABILITY]@{intimidate_misc}]]}} {{notes=@{intimidate_description}}}' data-i18n='intimidate' >INTIMIDATE</button>
                        <input type='text' title='@{intimidate}' name='attr_intimidate' value=''>
                        <select class='label abi' title='@{intimidate_ability}' name='attr_intimidate_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}' selected='selected'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{intimidate_acp}' name='attr_intimidate_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{intimidate_description}' name='attr_intimidate_description' placeholder='Notes'></textarea>
                        <input title='@{intimidate_buff_notes}' name='attr_intimidate_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{life_science_show_options}' name="attr_life_science_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{life_science_misc}' name='attr_life_science_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{life_science_ranks}' name='attr_life_science_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{life_science_class_skill}' name='attr_life_science_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{life_science}' name='roll_life_science' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Life Science}}  {{r1=[[1d20+@{life_science_ranks}[RANKS]+[[({0,@{life_science_ranks}}>1)*@{life_science_class_skill}]][CS]+@{life_science_ability}[ABILITY]@{life_science_misc}]]}} {{notes=@{life_science_description}}}' data-i18n='life-science' >LIFE SCIENCE</button>
                        <input type='text' title='@{life_science}' name='attr_life_science' value=''>
                        <select class='label abi' title='@{life_science_ability}' name='attr_life_science_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}' selected='selected'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{life_science_acp}' name='attr_life_science_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{life_science_description}' name='attr_life_science_description' placeholder='Notes'></textarea>
                        <input title='@{life_science_buff_notes}' name='attr_life_science_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{medicine_show_options}' name="attr_medicine_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{medicine_misc}' name='attr_medicine_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{medicine_ranks}' name='attr_medicine_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{medicine_class_skill}' name='attr_medicine_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{medicine}' name='roll_medicine' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Medicine}}  {{r1=[[1d20+@{medicine_ranks}[RANKS]+[[({0,@{medicine_ranks}}>1)*@{medicine_class_skill}]][CS]+@{medicine_ability}[ABILITY]@{medicine_misc}]]}} {{notes=@{medicine_description}}}' data-i18n='medicine' >MEDICINE </button>
                        <input type='text' title='@{medicine}' name='attr_medicine' value=''>
                        <select class='label abi' title='@{medicine_ability}' name='attr_medicine_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}' selected='selected'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{medicine_acp}' name='attr_medicine_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{medicine_description}' name='attr_medicine_description' placeholder='Notes'></textarea>
                        <input title='@{medicine_buff_notes}' name='attr_medicine_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{mysticism_show_options}' name="attr_mysticism_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{mysticism_misc}' name='attr_mysticism_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{mysticism_ranks}' name='attr_mysticism_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{mysticism_class_skill}' name='attr_mysticism_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{mysticism}' name='roll_mysticism' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Mysticism}}  {{r1=[[1d20+@{mysticism_ranks}[RANKS]+[[({0,@{mysticism_ranks}}>1)*@{mysticism_class_skill}]][CS]+@{mysticism_ability}[ABILITY]@{mysticism_misc}]]}} {{notes=@{mysticism_description}}}' data-i18n='mysticism' >MYSTICISM </button>
                        <input type='text' title='@{mysticism}' name='attr_mysticism' value=''>
                        <select class='label abi' title='@{mysticism_ability}' name='attr_mysticism_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}' selected='selected'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{mysticism_acp}' name='attr_mysticism_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{mysticism_description}' name='attr_mysticism_description' placeholder='Notes'></textarea>
                        <input title='@{mysticism_buff_notes}' name='attr_mysticism_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{perception_show_options}' name="attr_perception_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{perception_misc}' name='attr_perception_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{perception_ranks}' name='attr_perception_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{perception_class_skill}' name='attr_perception_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{perception}' name='roll_perception' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Perception}}  {{r1=[[1d20+@{perception_ranks}[RANKS]+[[({0,@{perception_ranks}}>1)*@{perception_class_skill}]][CS]+@{perception_ability}[ABILITY]@{perception_misc}]]}} {{notes=@{perception_description}}}' data-i18n='perception' >PERCEPTION </button>
                        <input type='text' title='@{perception}' name='attr_perception' value=''>
                        <select class='label abi' title='@{perception_ability}' name='attr_perception_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}' selected='selected'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{perception_acp}' name='attr_perception_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{perception_description}' name='attr_perception_description' placeholder='Notes'></textarea>
                        <input title='@{perception_buff_notes}' name='attr_perception_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{physical_science_show_options}' name="attr_physical_science_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{physical_science_misc}' name='attr_physical_science_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{physical_science_ranks}' name='attr_physical_science_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{physical_science_class_skill}' name='attr_physical_science_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{physical_science}' name='roll_physical_science' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Physical Science}}  {{r1=[[1d20+@{physical_science_ranks}[RANKS]+[[({0,@{physical_science_ranks}}>1)*@{physical_science_class_skill}]][CS]+@{physical_science_ability}[ABILITY]@{physical_science_misc}]]}} {{notes=@{physical_science_description}}}' data-i18n='physical-science' >PHYSICAL SCIENCE</button>
                        <input type='text' title='@{physical_science}' name='attr_physical_science' value=''>
                        <select class='label abi' title='@{physical_science_ability}' name='attr_physical_science_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}' selected='selected'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{physical_science_acp}' name='attr_physical_science_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{physical_science_description}' name='attr_physical_science_description' placeholder='Notes'></textarea>
                        <input title='@{physical_science_buff_notes}' name='attr_physical_science_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{piloting_show_options}' name="attr_piloting_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{piloting_misc}' name='attr_piloting_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{piloting_ranks}' name='attr_piloting_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{piloting_class_skill}' name='attr_piloting_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{piloting}' name='roll_piloting' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Piloting}}  {{r1=[[1d20+@{piloting_ranks}[RANKS]+[[({0,@{piloting_ranks}}>1)*@{piloting_class_skill}]][CS]+@{piloting_ability}[ABILITY]@{piloting_misc}]]}} {{notes=@{piloting_description}}}' data-i18n='piloting' >PILOTING</button>
                        <input type='text' title='@{piloting}' name='attr_piloting' value=''>
                        <select class='label abi' title='@{piloting_ability}' name='attr_piloting_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{piloting_acp}' name='attr_piloting_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{piloting_description}' name='attr_piloting_description' placeholder='Notes'></textarea>
                        <input title='@{piloting_buff_notes}' name='attr_piloting_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{sense_motive_show_options}' name="attr_sense_motive_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{sense_motive_misc}' name='attr_sense_motive_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{sense_motive_ranks}' name='attr_sense_motive_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{sense_motive_class_skill}' name='attr_sense_motive_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{sense_motive}' name='roll_sense_motive' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Sense Motive}}  {{r1=[[1d20+@{sense_motive_ranks}[RANKS]+[[({0,@{sense_motive_ranks}}>1)*@{sense_motive_class_skill}]][CS]+@{sense_motive_ability}[ABILITY]@{sense_motive_misc}]]}} {{notes=@{sense_motive_description}}}' data-i18n='sense-motive' >SENSE MOTIVE</button>
                        <input type='text' title='@{sense_motive}' name='attr_sense_motive' value=''>
                        <select class='label abi' title='@{sense_motive_ability}' name='attr_sense_motive_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}' selected='selected'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{sense_motive_acp}' name='attr_sense_motive_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{sense_motive_description}' name='attr_sense_motive_description' placeholder='Notes'></textarea>
                        <input title='@{sense_motive_buff_notes}' name='attr_sense_motive_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{sleight_of_hand_show_options}' name="attr_sleight_of_hand_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{sleight_of_hand_misc}' name='attr_sleight_of_hand_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{sleight_of_hand_ranks}' name='attr_sleight_of_hand_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{sleight_of_hand_class_skill}' name='attr_sleight_of_hand_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{sleight_of_hand}' name='roll_sleight_of_hand' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Sleight of Hand}}  {{r1=[[1d20+@{sleight_of_hand_ranks}[RANKS]+[[({0,@{sleight_of_hand_ranks}}>1)*@{sleight_of_hand_class_skill}]][CS]+@{sleight_of_hand_ability}[ABILITY]@{sleight_of_hand_misc}]]}} {{notes=@{sleight_of_hand_description}}}' data-i18n='sleight-of-hand' >SLEIGHT OF HAND</button>
                        <input type='text' title='@{sleight_of_hand}' name='attr_sleight_of_hand' value=''>
                        <select class='label abi' title='@{sleight_of_hand_ability}' name='attr_sleight_of_hand_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{sleight_of_hand_acp}' name='attr_sleight_of_hand_acp' value='1' checked='checked'>
                        </div>
                        <textarea class='skill-description' title='@{sleight_of_hand_description}' name='attr_sleight_of_hand_description' placeholder='Notes'></textarea>
                        <input title='@{sleight_of_hand_buff_notes}' name='attr_sleight_of_hand_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{stealth_show_options}' name="attr_stealth_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{stealth_misc}' name='attr_stealth_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{stealth_ranks}' name='attr_stealth_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{stealth_class_skill}' name='attr_stealth_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{stealth}' name='roll_stealth' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Stealth}}  {{r1=[[1d20+@{stealth_ranks}[RANKS]+[[({0,@{stealth_ranks}}>1)*@{stealth_class_skill}]][CS]+@{stealth_ability}[ABILITY]@{stealth_misc}]]}} {{notes=@{stealth_description}}}' data-i18n='stealth' >STEALTH</button>
                        <input type='text' title='@{stealth}' name='attr_stealth' value=''>
                        <select class='label abi' title='@{stealth_ability}' name='attr_stealth_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}' selected='selected'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{stealth_acp}' name='attr_stealth_acp' value='1' checked='checked'>
                        </div>
                        <textarea class='skill-description' title='@{stealth_description}' name='attr_stealth_description' placeholder='Notes'></textarea>
                        <input title='@{stealth_buff_notes}' name='attr_stealth_buff_notes' hidden='true'>
                    </div>
                </div>
                <div class='skill-container'>
                    <input class="show-options" type="checkbox" title='@{survival_show_options}' name="attr_survival_show_options"><span>y</span>
                    <div class='display'>
                        <input hidden='true' title='@{survival_misc}' name='attr_survival_misc' value=''>
                        <input class='ranks' type='number' hidden='true' title='@{survival_ranks}' name='attr_survival_ranks' value='0'>
                        <input hidden='true' type='checkbox' title='@{survival_class_skill}' name='attr_survival_class_skill' value='3'>
                        <button class='acp' type='roll' title='%{survival}' name='roll_survival' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Survival}}  {{r1=[[1d20+@{survival_ranks}[RANKS]+[[({0,@{survival_ranks}}>1)*@{survival_class_skill}]][CS]+@{survival_ability}[ABILITY]@{survival_misc}]]}} {{notes=@{survival_description}}}' data-i18n='survival' >SURVIVAL</button>
                        <input type='text' title='@{survival}' name='attr_survival' value=''>
                        <select class='label abi' title='@{survival_ability}' name='attr_survival_ability' style='width; .5em;'>
                            <option value='@{strength_mod}'>STR</option>
                            <option value='@{dexterity_mod}'>DEX</option>
                            <option value='@{constitution_mod}'>CON</option>
                            <option value='@{intelligence_mod}'>INT</option>
                            <option value='@{wisdom_mod}' selected='selected'>WIS</option>
                            <option value='@{charisma_mod}'>CHA</option>
                        </select>
                    </div>
                    <div class='row-options'>
                        <div class='row'>
                            <span class='skill-span label' data-i18n='acp'>ACP</span>
                            <input class='acp' type='checkbox' title='@{survival_acp}' name='attr_survival_acp' value='1'>
                        </div>
                        <textarea class='skill-description' title='@{survival_description}' name='attr_survival_description' placeholder='Notes'></textarea>
                        <input title='@{suvival_buff_notes}' name='attr_suvival_buff_notes' hidden='true'>
                    </div>
                </div>
            </div>
            <div class='row'>
                <span data-i18n='feats'>FEATS</span>
                <input class='scalable-input' type='text' title='@{feats}' name='attr_feats'>
            </div>
            <div class='row'>
                <span data-i18n='languages'>LANGUAGES</span>
                <input class='scalable-input' type='text' title='@{languages}' name='attr_languages'>
            </div>
            <div class='row'>
                <span data-i18n='other-abilities'>OTHER ABILITIES</span>
                <input class='scalable-input' type='text' title='@{other_abilities}' name='attr_other_abilities'>
            </div>
            <div class='row'>
                <span data-i18n='gear'>GEAR</span>
            </div>
            <div class='row'>
                <textarea title='@{gear}' name='attr_gear' type='text' class='scalable-input'></textarea>
            </div>
            <div class='statblock-section-header ecology-header'>
                <span data-i18n='ecology'>ECOLOGY</span>
            </div>
            <div class='row'>
                <span data-i18n='environment'>ENVIRONMENT</span>
            </div>
            <div class='row'>
                <textarea class='scalable-input' type='text' title='@{environment}' name='attr_environment'></textarea>
            </div>
            <div class='row'>
                <span data-i18n='organization'>ORGANIZATION</span>
            </div>
            <div class='row'>
                <textarea class='scalable-input' type='text' title='@{organization}' name='attr_organization'></textarea>
            </div>
            <div class='row'>
                <span data-i18n='tactics'>TACTICS</span>
            </div>
            <div class='row'>
                <textarea class='scalable-input' type='text' title='@{tactics}' name='attr_tactics'></textarea>
            </div>
            <div class='row special-abilities'>
                <div class='statblock-section-header special-abilities-header'>
                    <span data-i18n='special-abilities'>SPECIAL ABILITIES</span>
                </div>
                <fieldset class='repeating_ability'>
                    <input class='filter' type='checkbox' hidden='true' title='@{filter}' name='attr_filter' value='1' checked='checked'>
                    <div class='filter-container ability'>
                       <!--Hidden Ability Attributes -->
                       <input type='text' hidden='true' title='@{attack_misc}' name='attr_attack_misc' value=''>
                       <input type='text' hidden='true' title='@{attack_damage_misc}' name='attr_attack_damage_misc' value=''>
                       <input type='text' hidden='true' title='@{effect_misc}' name='attr_effect_misc' value=''>
                       <!--Shown Ability Attributes -->
                        <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" checked="checked"><span>y</span>
                        <div class='row-options'>
                            <div class='row'>
                                <span class='label' data-i18n='name-u'>NAME</span>
                                <input class='scalable-input' type='text' title='@{name}' name='attr_name' placeholder="Operative's Edge">
                                <select class='freq-select' title='@{frequency}' name='attr_frequency'>
                                    <option value='constant' data-i18n='constant' selected='selected'>CONSTANT</option>
                                    <option value='at will' data-i18n='at-will'>AT WILL</option>
                                    <option value='daily limit' data-i18n='x/day'>X/DAY</option>
                                </select>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='purpose'>PURPOSE</span>
                                <input class='scalable-input' type='text' title='@{source}' name='attr_source' placeholder='Offensive Ability'>
                                <select title='@{type}' name='attr_type'>
                                    <option value='EX' data-i18n='ex'>EX</option>
                                    <option value='SU' data-i18n='su'>SU</option>
                                    <option value='SP' data-i18n='sp'>SP</option>
                                </select>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='target'>TARGET</span>
                                <input class='scalable-input' type='text' title='@{target}' name='attr_target' placeholder='self'>
                                <span class='label' data-i18n='rng'>RNG</span>
                                <input class='scalable-input' type='text' title='@{range}' name='attr_range' placeholder='30 ft'>
                            </div>
                            <div class='row'>
                                <span class='label' data-i18n='duration'>DURATION</span>
                                <input class='scalable-input' type='text' title='@{duration}' name='attr_duration' placeholder='1 round' value=''>
                            </div>
                            <div class='row'>
                                <input type='radio' hidden='true' title='@{uses_freq_dependency}' name='attr_uses_freq_dependency' class='freq-check constant' value='constant' checked='checked'>
                                <input type='radio' hidden='true' title='@{uses_freq_dependency}' name='attr_uses_freq_dependency' class='freq-check' value='at will'>
                                <input type='radio' hidden='true' title='@{uses_freq_dependency}' name='attr_uses_freq_dependency' class='freq-check daily-limit' value='daily limit'>
                                <input class='freq-check daily-limit scalable-input' type='number' title='@{uses}' name='attr_uses' value='0'>
                                <span class='freq-check daily-limit label'>/</span>
                                <div class='attr-total-container freq-check daily-limit'>
                                    <input class='base-attr ability-uses' type='text' title='@{uses_max_base}' name='attr_uses_max_base' value='10' >
                                    <input class='mod-debuff' type='radio' title='@{uses_change}' name='attr_uses_change' value='-1' hidden='true'>
                                    <input class='mod-normal' type='radio' title='@{uses_change}' name='attr_uses_change' value='0' hidden='true' checked='checked'>
                                    <input class='mod-buff' type='radio' title='@{uses_change}' name='attr_uses_change' value='1' hidden='true'>
                                    <span class='modified-attr attr ability-uses' readonly='true' type='text' title='@{uses_max}' name='attr_uses_max' value='10'>10</span>
                                </div>
                                <span class='freq-check daily-limit label' data-i18n='_-daily-uses'>Daily Uses</span>
                            </div>
                            <input type='radio' hidden='true' title='@{usage_freq_dependency}' name='attr_usage_freq_dependency' class='freq-check constant' value='constant' checked='checked'>
                            <input type='radio' hidden='true' title='@{usage_freq_dependency}' name='attr_usage_freq_dependency' class='freq-check at-will' value='at will'>
                            <input type='radio' hidden='true' title='@{usage_freq_dependency}' name='attr_usage_freq_dependency' class='freq-check daily-limit' value='daily limit'>
                            <div class='row freq-check at-will daily-limit'>
                                <span class='label abi-cost' data-i18n='usage'>USAGE</span>
                                <input class='abi-cost' type='text' title='@{usage}' name='attr_usage' placeholder='move action, 1 resolve point'>
                            </div>
                            <label><input class='field-tab atk-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'><span class='field label' data-i18n='atk'>ATK</span></label>
                            <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                            <div class='field-container'>
                                <input class='field-tab' type='checkbox' title='@{attack_checkbox}' name='attr_attack_checkbox' value='1' hidden='true'>
                                <div class='field row'>
                                    <select class='label atk-ability abi' title='@{attack_ability}' name='attr_attack_ability'>
                                        <option value='0' selected='na' selected='selected'>N/A</option>
                                        <option value='@{strength_mod}'>STR</option>
                                        <option value='@{dexterity_mod}'>DEX</option>
                                        <option value='@{constitution_mod}'>CON</option>
                                        <option value='@{intelligence_mod}'>INT</option>
                                        <option value='@{wisdom_mod}'>WIS</option>
                                        <option value='@{charisma_mod}'>CHA</option>
                                    </select>
                                    <input hidden='true' title='@{attack_ability}' name='attr_attack_ability' value='0'>
                                    <span class='arith'>+</span>
                                    <input class='bab' title='@{bab}' name='attr_bab' readonly='true' value='0'>
                                    <input class='abi-misc' type='text' title='@{attack_bonus}' name='attr_attack_bonus' placeholder='+@{attr}/2 + ?{Query}'>
                                </div>
                            </div>
                            <label><input class='field-tab dmg-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'><span class='field label' data-i18n='dmg'>DMG</span></label>
                            <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                            <div class='field-container'>
                                <input hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                                <input class='field-tab' type='checkbox' title='@{damage_checkbox}' name='attr_damage_checkbox' value='1' hidden='true'>
                                <div class='field row'>
                                    <input class='scalable-input' type='text' name=attr_damage_dice placeholder='1d8'><span>+</span>
                                    <select class='label atk-ability abi' title='@{damage_ability}' name='attr_damage_ability'>
                                        <option value='0' selected='selected'>N/A</option>
                                        <option value='@{strength_mod}'>STR</option>
                                        <option value='@{dexterity_mod}'>DEX</option>
                                        <option value='@{constitution_mod}'>CON</option>
                                        <option value='@{intelligence_mod}'>INT</option>
                                        <option value='@{wisdom_mod}'>WIS</option>
                                        <option value='@{charisma_mod}'>CHA</option>
                                    </select>
                                    <input hidden='true' title='@{damage_ability}' name='attr_damage_ability' value='0'>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i18n='type'>TYPE</span>
                                    <input class='scalable-input' type='text' title='@{attack_type}' name='attr_attack_type' placeholder='Fire'>
                                    <span class='label' data-i18n='crit-effect'>CRIT EFFECT</span>
                                    <input class='scalable-input' type='text' title='@{attack_crit}' name='attr_attack_crit' placeholder='Burn'>
                                </div>
                            </div>
                            <label><input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'><span class='label field' data-i18n='additional-attack'>ADDITIONAL ATTACKS</span></label>
                            <input class='field-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                            <div class='field-container'>
                                <input class='field-tab macro-tab' type='checkbox' title='@{full_attack_checkbox}' name='attr_full_attack_checkbox' value='1' hidden='true'>
                                <div class='field row'>
                                    <span data-i18n='roll-full-attack_'>ROLL FULL ATTACK: </span>
                                </div>
                                <div class='field row'>
                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='?{Full Attack|No,0|Yes,1}'><span class='label'  data-i18n='query'>QUERY</span></label>
                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='1'><span class='label' data-i18n='always'>ALWAYS</span></label>
                                    <label><input type='radio' title='@{full_attack_query}' name='attr_full_attack_query' value='0' checked='checked'><span class='label'  data-i18n='never'>NEVER</span></label>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i18n='number-of-attacks:'>NUMBER OF ATTACKS:</span>
                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_number}' name='attr_full_attack_number' value='2'>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i8n='full-attack-penalty:'>ATTACK PENALTY:</span>
                                    <input class='scalable-input attack-num' type='text' title='@{full_attack_penalty}' name='attr_full_attack_penalty' value='-4'>
                                </div>
                            </div>
                            <label><input class='field-tab save-effect-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true'><span class='field label' data-i18n='save-effect'>SAVE EFFECT</span></label>
                            <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true' checked='checked'>
                            <div class='field-container'>
                                <input class='field-tab' type='checkbox' title='@{save_checkbox}' name='attr_save_checkbox' value='1' hidden='true' checked='checked'>
                                <div class='field row'>
                                    <!--<select class='label atk-ability abi' title='@{save_ability}' name='attr_save_ability'>
                                        <option value='@{strength_mod}' data-i18n='str' selected='selected'>STR</option>
                                        <option value='@{dexterity_mod}' data-i18n='dex'>DEX</option>
                                        <option value='@{constitution_mod}' data-i18n='con'>CON</option>
                                        <option value='@{intelligence_mod}' data-i18n='int'>INT</option>
                                        <option value='@{wisdom_mod}' data-i18n='wis'>WIS</option>
                                        <option value='@{charisma_mod}' data-i18n='cha'>CHA</option>
                                    </select>-->
                                    <span class='label' data-i18n='dc'>DC</span>
                                    <div class='attr-total-container'>
                                        <input class='base-attr attr' type='number' title='@{dc_base}' name='attr_dc_base' value='10'>
                                        <input class='mod-debuff' type='radio' title='@{dc_change}' name='attr_dc_change' value='-1' hidden='true'>
                                        <input class='mod-normal' type='radio' title='@{dc_change}' name='attr_dc_change' value='0' hidden='true' checked='checked'>
                                        <input class='mod-buff' type='radio' title='@{dc_change}' name='attr_dc_change' value='1' hidden='true'>
                                        <input class='modified-attr attr' title='@{dc}' name='attr_dc' type='number' value='10' hidden='true'>
                                        <span class='modified-attr attr' title='@{dc}' name='attr_dc' type='number' value='10'>10</span>
                                    </div>
                                    <select class='label save-type' title='@{save_type}' name='attr_save_type'>
                                        <option value='' selected='selected'>-</option>
                                        <option value='FORT' data-i18n='fort-save'>FORT SAVE</option>
                                        <option value='REF' data-i18n='ref-save'>REF SAVE</option>
                                        <option value='WILL' data-i18n='will-save'>WILL SAVE</option>
                                    </select>
                                </div>
                                <div class='field row'>
                                    <textarea class='' title='@{effect}' name='attr_effect' placeholder='Effect on a Failed Save'></textarea>
                                </div>
                                <div class='field row'>
                                    <span class='label' data-i18n='A-Sucessful-Save:'>A Sucessful Save:</span>
                                </div>
                                <div class='field row'>
                                    <textarea class='' title='@{save_effect}' name='attr_save_effect' placeholder='Effect on a Successful Save'></textarea>
                                </div>
                                <div class='field row'>
                                </div>
                            </div>
                            <label><input class='field-tab mods-tab item-mods' type='checkbox' title='@{mods_checkbox}' name='attr_mods_checkbox' value='1' hidden='true'><span class='label field' data-i18n='mods'>MODS</span></label>
                            <input class='field-tab' type='checkbox' title='@{mods_checkbox}' name='attr_mods_checkbox' value='1' hidden='true'>
                            <div class='row field-container mod-container'>
                                <input class='field-tab' type='checkbox' title='@{mods_checkbox}' name='attr_mods_checkbox' value='1' hidden='true' checked='checked'>
                                <textarea class='field row item-mods scalable-input' type='text' title='@{mods}' name='attr_mods' placeholder='+X to EAC'></textarea>
                            </div>
                            <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                            <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                            <div class='row field-container mod-container'>
                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                <textarea class='field row scalable-input' type='text' title='@{attacher}' name='attr_attacher'></textarea>
                            </div>
                            <div class='row'>
                                <textarea class='' title='@{description}' name='attr_description' placeholder='Description'></textarea>
                            </div>
                        </div>
                        <div class='display'>
                            <input type='radio' hidden='true' title='@{toggle_freq_dependency}' name='attr_toggle_freq_dependency' class='freq-check' value='constant' checked='checked'>
                            <input type='radio' hidden='true' title='@{toggle_freq_dependency}' name='attr_toggle_freq_dependency' class='freq-check at-will' value='at will'>
                            <input type='radio' hidden='true' title='@{toggle_freq_dependency}' name='attr_toggle_freq_dependency' class='freq-check daily-limit' value='daily limit'>
                            <input class='freq-check at-will daily-limit' type='checkbox' title='@{toggle}' name='attr_toggle' value='enabled'>
                            <div class='button-description'>
                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{rightbanner=@{source}}} {{saveflag=[[1d@{save_checkbox}]]}} {{activation=@{usage}}} {{duration=@{duration}}} {{targets=@{target}}} {{range=@{range}}} {{savedc=[[@{dc}]]}} {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}}{{fullattack=[[@{full_attack_query}*(@{full_attack_number})]]}} {{r1=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+[[@{full_attack_query}*(@{full_attack_penalty})]][FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage1type=@{attack_type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{attack_crit}}}  {{r2=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage2type=@{attack_type}}} {{damage2=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit2effect=@{attack_crit}}} {{r3=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage3type=@{attack_type}}} {{damage3=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit3effect=@{attack_crit}}} {{r4=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage4type=@{attack_type}}} {{damage4=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit4effect=@{attack_crit}}} {{r5=[[1d20+@{bab}[BAB]+@{attack_ability}[ABILITY]+@{full_attack_penalty}[FULL ATTACK]@{attack_misc}@{attack_bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damage5type=@{attack_type}}} {{damage5=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit5effect=@{attack_crit}}} {{rightbanner=@{type}}} {{notes=@{description}}} @{attacher}'>
                                    <span class='label' title='@{name}' name='attr_name' placeholder='Laser Pistol'>Laser Pistol</span>
                                </button>
                                <span title='@{description}' name='attr_description' placeholder='Description'></span>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
        <div class='creator'>
            <input class='hide-tab in-play-tab menu-tab menu-head' type='radio' title='@{npc_creator_toggle}' name='attr_npc_creator_toggle' value='menus'><h1 class='section label menu-head' data-i18n='menus'>MENUS</h1>
            <input class='hide-tab in-play-tab import-tab import-head' type='radio' title='@{npc_creator_toggle}' name='attr_npc_creator_toggle' value='import'><h1 class='section label import-head' data-i18n='import'>IMPORT</h1>
            <div class='menus in-play'>
                <button type='roll' title='%{initiative}' name='roll_initiative' value='@{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=Initiative}} {{r1=[[1d20+@{initiative_ability}[ABILITY]@{npc_init}@{initiative_misc}+[[(@{initiative_ability}[ABILITY]@{npc_init}@{initiative_misc})/100)]][TIE BREAKER]&{tracker}]]}}' data-i18n='initiative'>INITIATIVE</button>
                <button type='roll' title='%{attacks}' name='roll_attacks' value='@{attacks_menu}' data-i18n='attacks'>ATTACKS</button>
                <button type='roll' title='%{saves}' name='roll_saves' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=SAVES}} {{buttons1=[Fort](~@{character_name}|fort) | [Ref](~@{character_name}|ref) | [Will](~@{character_name}|will)}}' data-i18n='saves'>SAVES</button>
                <button type='roll' title='%{abilities}' name='roll_abilities' value='@{abilities_menu}' data-i18n='abilities-u'>ABILITIES</button>
                <button type='roll' title='%{ability_checks}' name='roll_ability_checks' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=ABILITY CHECKS}} {{buttons1=[Strength](~@{character_name}|strength) | [Dexterity](~@{character_name}|dexterity) | [Constitution](~@{character_name}|constitution) | [Intelligence](~@{character_name}|intelligence) | [Wisdom](~@{character_name}|wisdom) | [Charisma](~@{character_name}|charisma)}}' data-i18n='ability_checks'>ABILITY CHECKS</button>
                <button type='roll' title='%{skills}' name='roll_skills' value='@{skills_menu}' data-i18n='skills'>SKILLS</button>
                <input type='text' title='@{attacks_menu}' name='attr_attacks_menu' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{title=ATTACKS}}' hidden='true'>
                <input class='is-caster' title='@{caster_select}' name='attr_caster_select' type='checkbox' value='1' hidden='true'>
                <div class='spell-button-container spells'>
                    <button type='roll' title='%{spells}' name='roll_spells' value='@{spells_menu}' data-i18n='spells'>SPELLS</button>
                    <input type='text' title='@{spells_menu}' name='attr_spells_menu' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{title=SPELLBOOKS}}' hidden='true'>
                </div>
                <input type='text' title='@{abilities_menu}' name='attr_abilities_menu' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{title=ABILITIES}}' hidden='true'>
                <input type='text' title='@{skills_menu}' name='attr_skills_menu' value='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{title=SKILLS}}' hidden='true'>
            </div>
            <div class='import in-play'>
                <div class='experimental label'>--WARNING-- EXPERIMENTAL FEATURE --WARNING--</div>
                <label class='import-label'><input class='import-checkbox' type='checkbox' title='@{import}' name='attr_import' value='1'><span data-i18n='import'>IMPORT</span></label>
                <label class='export-label'><input class='import-checkbox' type='checkbox' title='@{export}' name='attr_export' value='1'><span data-i18n='export'>EXPORT</span></label>
                <label class='statblock-source'><input class='statblock-source-radio' type='radio' title='@{statblock_source}' name='attr_statblock_source' value='paizo' checked='checked'> <span class='label' data-i18n='paizo-statblock'>PAIZO STATBLOCK</span></label>
                <label class='statblock-source'><input class='statblock-source-radio' type='radio' title='@{statblock_source}' name='attr_statblock_source' value='srd'> <span class='label' data-i18n='srd-statblock'>SRD STATBLOCK</span></label>
                <textarea title='@{statblock}' name='attr_statblock' class='statblock-text' placeholder='Paste statblock here, removing line breaks for lines that have wrapped.'></textarea>
            </div>
        </div>
    </div>
    <div class="container ship">
        <input hidden='true' title='@{attack_query}' name='attr_attack_query' type='text' value='?{Fire at will|No, |Yes,-4}'>
        <div class="starship-type section-container">
            <h1 class='section label' data-i18n='starship-info'>STARSHIP INFO</h1>
            <div class='section always-glow border left'></div>
            <div class='section always-glow border top'></div>
            <div class='section always-glow border right'></div>
            <div class='section always-glow border bottom-left corner'></div>
            <div class='section always-glow border top-right corner'></div>
            <div class='section-container'>
                <div class='top-gutter'></div>
                <div class='label-container ship-name'>
                    <input type="text" title='@{character_name}' name="attr_character_name">
                    <span class="label" data-i18n="starship-name">STARSHIP NAME</span>
                </div>
                <div class='label-container ship-tier'>
                    <input type="text" title='@{ship_tier}' name="attr_ship_tier">
                    <span class="label" data-i18n="tier">TIER</span>
                </div>
                
                <div class='label-container ship-make-model'>
                    <input type="text" title='@{make_model}' name="attr_make_model">
                    <span class="label" data-i18n="make-and-model">MAKE AND MODEL</span>
                </div>
                <div class='label-container ship-size'>
                    <select title='@{size}' name="attr_size">
                        <option value='tiny' data-i18n='tiny' selected='selected'>TINY</option>
                        <option value='small' data-i18n='small'>SMALL</option>
                        <option value='medium' data-i18n='medium'>MEDIUM</option>
                        <option value='large' data-i18n='large'>LARGE</option>
                        <option value='huge' data-i18n='huge'>HUGE</option>
                        <option value='gargantuan' data-i18n='gargantuan'>GARGANTUAN</option>
                        <option value='colossal' data-i18n='colossal'>COLOSSAL</option>
                    </select>
                    <span class="label" data-i18n="size">SIZE</span>
                </div>
                <div class='label-container ship-frame'>
                    <input type="text" title='@{frame}' name="attr_frame">
                    <span class="label" data-i18n="frame">FRAME</span>
                </div>
                <div class='label-container ship-speed'>
                    <input type="number" title='@{speed}' name="attr_speed">
                    <span class="label" data-i18n="speed">SPEED</span>
                </div>
                
                <div class='label-container ship-maneuverability'>
                    <select title='@{maneuverability}' name="attr_maneuverability">
                        <option value='clumsy' data-i18n='clumsy' selected='selected'>CLUMSY</option>
                        <option value='poor' data-i18n='poor'>POOR</option>
                        <option value='average' data-i18n='average'>AVERAGE</option>
                        <option value='good' data-i18n='good'>GOOD</option>
                        <option value='perfect' data-i18n='perfect'>PERFECT</option>
                    </select>
                    <span class="label" data-i18n="maneuverability">MANEUVERABILITY</span>
                </div>
                
                <div class='label-container ship-drift-rating'>
                    <input type="text" title='@{drift_rating}' name="attr_drift_rating">
                    <span class="label" data-i18n="drift-rating">DRIFT RATING</span>
                </div>
                <div class='top-gutter'></div>
            </div>
            <div class='section-container always-glow border left'></div>
            <div class='section-container always-glow border top'></div>
            <div class='section-container always-glow border right'></div>
            <div class='section-container always-glow border bottom'></div>
            <div class='section-container always-glow border bottom-left corner'></div>
            <div class='section-container always-glow border top-right corner'></div>
        </div>
        <div class='crew section-container'>
            <h1 class='section label' data-i18n='crew'>CREW</h1>
            <div class='section always-glow border left'></div>
            <div class='section always-glow border bottom'></div>
            <div class='section always-glow border right'></div>
            <div class='section always-glow border bottom-right corner'></div>
            <div class='section always-glow border top-left corner'></div>
            <div class='section-container'>
                <div class='top-gutter'></div>
                <div class='label-container captain'>
                    <input type="text" title='@{captain}' name="attr_captain">
                    <button type='roll' class="label" data-i18n="captain" value='@{captain_bonus}'>CAPTAIN</button>
                    <input hidden='true' type='text' title='@{captain_bonus}' name='attr_captain_bonus'>
                </div>
                <div class='label-container engineer'>
                    <input type="text" title='@{engineer}' name="attr_engineer">
                    <button type='roll' class="label" data-i18n="engineer" value='@{engineer_bonus}'>ENGINEER</button>
                    <input hidden='true' type='text' title='@{engineer_bonus}' name='attr_engineer_bonus'>
                </div>
                <div class='label-container pilot'>
                    <input type="text" title='@{pilot}' name="attr_pilot">
                    <button type='roll' class="label" data-i18n="pilot" value='@{pilot_bonus}'>PILOT</button>
                    <input hidden='true' type='text' title='@{pilot_bonus}' name='attr_pilot_bonus'>
                </div>
                <div class='label-container science-officer'>
                    <input type="text" title='@{science_officer}' name="attr_science_officer">
                    <button type='roll' class="label" data-i18n="science-officer" value='@{science_officer_bonus}'>SCIENCE OFFICER</button>
                    <input hidden='true' type='text' title='@{science_officer_bonus}' name='attr_science_officer_bonus'>
                </div>
                <div class='label-container gunner'>
                    <input type="text" title='@{gunner}' name="attr_gunner">
                    <input type='text' name='attr_gunner_roll' hidden='true'>
                    <span type='roll' class="label" data-i18n="gunner">GUNNER</span>
                    <input hidden='true' type='text' title='@{gunner_bonus}' name='attr_gunner_bonus'>
                </div>
                <div class='top-gutter'></div>
            </div>
            <div class='section-container always-glow border left'></div>
            <div class='section-container always-glow border top'></div>
            <div class='section-container always-glow border right'></div>
            <div class='section-container always-glow border bottom'></div>
            <div class='section-container always-glow border bottom-right corner'></div>
            <div class='section-container always-glow border top-left corner'></div>
        </div>
        <div class='shields'>
            <div class='hex-container'>
                <div class='hex-row'>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                </div>
                <div class='hex-row'>
                    <div class='hexagon dual-arc'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                </div>
                <div class='hex-row'>
                    <div class='hexagon'></div>
                    <div class='hexagon dual-arc'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon dual-arc'></div>
                    <div class='hexagon'></div>
                </div>
                <div class='hex-row center-container'>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon center-hex dual-arc'>
                        <span class='label'>T</span>
                    </div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                </div>
                <div class='hex-row'>
                    <div class='hexagon'></div>
                    <div class='hexagon dual-arc'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon dual-arc'></div>
                    <div class='hexagon'></div>
                </div>
                <div class='hex-row'>
                    <div class='hexagon dual-arc'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                </div>
                <div class='hex-row'>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                    <div class='hexagon'></div>
                </div>
                <div class='line-left'></div>
                <div class='line-right'></div>
            </div>
            <div class='forward-shield arc-shield'>
                <input type='number' title='@{forward_shields}' name='attr_forward_shields' value='' placeholder='0'>
                <span class='label' data-i18n='forward'>FORWARD</span>
            </div>
            <div class='port-shield arc-shield'>
                <span class='label' data-i18n='port'>PORT</span>
                <input type='number' title='@{port_shields}' name='attr_port_shields' value='' placeholder='0'>
            </div>
            <div class='aft-shield arc-shield'>
                <span class='label' data-i18n='aft'>AFT</span>
                <input type='number' title='@{aft_shields}' name='attr_aft_shields' value='' placeholder='0'>
            </div>
            <div class='starboard-shield arc-shield'>
                <span class='label' data-i18n='starboard'>STARBOARD</span>
                <input type='number' title='@{starboard_shields}' name='attr_starboard_shields' value='' placeholder='0'>
            </div>
        </div>
        <div class='starship-defense section-container'>
            <h1 class='section label' data-i18n='starship-defenses'>DEFENSES</h1>
            <div class='section always-glow border left'></div>
            <div class='section always-glow border top'></div>
            <div class='section always-glow border right'></div>
            <div class='section always-glow border bottom-right corner'></div>
            <div class='section always-glow border top-left corner'></div>
            <div class='section-container'>
                <div class='top-gutter'></div>
                <div class='ac-container'>
                                                                        <span class='total labels' data-i18n='total'>TOTAL</span>                     <span class='piloting labels' data-i18n='piloting'>PILOTING</span>            <span class='armor label'>b</span>
                    <span class='ac row-label' data-i18n='ac'>AC</span> <span class='ac total' type='number' title='@{ac}' name='attr_ac' readonly='true'>0</span><span class='ac equal'>=</span> <input class='piloting ac' type='text' title='@{ship_piloting_ranks}' name='attr_ship_piloting_ranks' value='0'><span class='ac plus'>+</span>  <span class='armor ac' type='number' title='@{ac_armor}' name='attr_ac_armor' readonly='true'>0</span>
                    <span class='tl row-label' data-i18n='tl'>TL</span> <span class='tl total' type='number' title='@{tl}' name='attr_tl' readonly='true'>0</span><span class='tl equal'>=</span> <input class='piloting tl' type='text' title='@{ship_piloting_ranks}' name='attr_ship_piloting_ranks' value='0'><span class='tl plus'>+</span>  <span class='armor tl' type='number' title='@{tl_countermeasures}' name='attr_tl_countermeasures' readonly='true'>0</span>
                </div>
                <div class='hp-container'>
                    <span class='current labels' data-i18n='current'>CURRENT</span><span class='total labels' data-i18n='total'>TOTAL</span>
                    <span class='value row-label' data-i18n='hp'>HP</span> <input class='value current' type='number' title='@{hp}' name='attr_hp'><span class='value slash'>/</span> <input class='value total' type='number' title='@{hp_max}' name='attr_hp_max'>
                </div>
                <div class='threshold-container'>
                    <span class='over-label' data-i18n='thresholds'>THRESHOLDS</span>
                    <span class='labels damage label' data-i18n='damage'>DAMAGE</span><span class='labels critical label' data-i18n='critical'>CRITICAL</span>
                    <input class='value damage' title='@{damage_threshold}' name='attr_damage_threshold' value='0'><input class='value critical' title='@{critical_threshold}' name='attr_critical_threshold' value='' placeholder='10'>
                </div>
                <div class='shields-container'>
                    <span class='label' data-i18n='shield-total'>SHIELD TOTAL</span>
                    <input class='current' type='number' value='0' title='@{shield_total}' name='attr_shield_total'>
                    <span class='label slash'>/</span>
                    <input type='max number' value='0' title='@{shield_total_max}' name='attr_shield_total_max'>
                </div>
                <div class='modifiers-container'>
                    
                </div>
            </div>
            <div class='section-container always-glow border left'></div>
            <div class='section-container always-glow border top'></div>
            <div class='section-container always-glow border right'></div>
            <div class='section-container always-glow border bottom'></div>
            <div class='section-container always-glow border bottom-right corner'></div>
            <div class='section-container always-glow border top-left corner'></div>
        </div>
        <div class='ship-menus section-container'>
            <h1 class='section label' data-i18n='power&computers'>POWER & COMPUTERS</h1>
            <div class='section always-glow border left'></div>
            <div class='section always-glow border bottom'></div>
            <div class='section always-glow border right'></div>
            <div class='section always-glow border bottom-left corner'></div>
            <div class='section always-glow border top-right corner'></div>
            <div class='section-container'>
                <span class='label power' data-i18n='power'>POWER</span>
                <input class='current power' type='number' title='@{ship_pcu}' name='attr_ship_pcu'>
                <span class='slash power'>/</span>
                <input class='max power' type='number' title='@{ship_pcu_max}' name='attr_ship_pcu_max'>
                <span class='label computer' data-i18n='computer'>COMPUTER</span>
                <input class='current computer' type='text' title='@{ship_computer}' name='attr_ship_computer'>
            </div>
            <div class='section-container always-glow border left'></div>
            <div class='section-container always-glow border top'></div>
            <div class='section-container always-glow border right'></div>
            <div class='section-container always-glow border bottom'></div>
            <div class='section-container always-glow border bottom-left corner'></div>
            <div class='section-container always-glow border top-right corner'></div>
        </div>
        <div class='ship-weapons'>
            <div class='forward-weapon section-container'>
                <h1 class='section label' data-i18n='forward'>FORWARD</h1>
                <div class='section always-glow border left'></div>
                <div class='section always-glow border top'></div>
                <div class='section always-glow border right'></div>
                <div class='section always-glow border bottom-left corner'></div>
                <div class='section always-glow border top-right corner'></div>
                <div class='section-container'>
                    <fieldset class='repeating_attack'>
                        <input class='filter' type='radio' hidden='true' title='@{arc}' name='attr_arc' value='forward' checked='checked'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='port'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='aft'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='starboard'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='turret'>
                        <div class='filter-container attack'>
                            <input type='text' hidden='true' title='@{misc}' name='attr_misc' value=''>
                            <input type='text' hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                            <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" value='1' checked="checked"><span>y</span>
                            <div class='row-options'>
                                <div class='row first-row'>
                                    <span class='label' data-i18n='name-u'>NAME</span>
                                    <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder='Laser Cannon' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='type'>TYPE</span>
                                    <select class='label' title='@{type}' name='attr_type'>
                                        <option value='direct-fire' data-i8n='direct-fire' selected='selected'>DIRECT FIRE</option>
                                        <option value='tracking' data-i8n='tracking'>TRACKING</option>
                                    </select>
                                </div>
                                <div>
                                    <span class='label' data-i18n='class'>CLASS</span>
                                    <select class='label proficiency' title='@{class}' name='attr_class'>
                                        <option value='light' data-i8n='light' selected='selected'>LIGHT</option>
                                        <option value='heavy' data-i8n='heavy'>HEAVY</option>
                                        <option value='capital' data-i8n='capital'>CAPITAL</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='rng'>RNG</span>
                                    <select class='label atk-range-type' title='@{range}' name='attr_range'>
                                        <option value='5' data-i18n='short' selected='selected'>SHORT</option>
                                        <option value='10' data-i18n='medium'>MEDIUM</option>
                                        <option value='20' data-i18n='long'>LONG</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='dmg'>DMG</span>
                                    <input class='dmg-dice scalable-input' type='text' name=attr_damage_dice placeholder='1d8' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='arc'>ARC</span>
                                    <select class='atk-type' title='@{arc}' name='attr_arc'>
                                        <option value='forward' data-i18n='forward' selected='selected'>FORWARD</option>
                                        <option value='port' data-i18n='port'>PORT</option>
                                        <option value='aft' data-i18n='aft'>AFT</option>
                                        <option value='starbpoard' data-i18n='starboard' selected='selected'>STARBOARD</option>
                                        <option value='turret' data-i18n='turret'>TURRET</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='pcu'>PCU</span>
                                    <input class='atk-special scalable-input' type='text' title='@{pcu}' name='attr_pcu' placeholder='1' value=''>
                                    <span class='label' data-i18n='bp'>BP</span>
                                    <input class='atk-special scalable-input' type='text' title='@{bp}' name='attr_bp' placeholder='1' value=''>
                                </div>
                                <div class='row'>
                                    <input class='label scalable-input' data-i18n-placeholder='ammo' title='@{ammo_type}' name='attr_ammo_type' value='' type='text' placeholder='ammo' >
                                    <input title='@{ammo}' name='attr_ammo' type='number' value=''>
                                    <span class='label'>/</span>
                                    <input title='@{ammo_max}' name='attr_ammo_max' type='number' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='special'>SPECIAL</span>
                                    <input class='atk-special scalable-input' type='text' title='@{special}' name='attr_special' placeholder='Array' value=''>
                                </div>
                                <div class='row'>
                                    <select class='atk-type' title='@{powered}' name='attr_powered'>
                                        <option class='off' value='OFF' data-i18n='off'>OFF</option>
                                        <option class='on' value='ON' data-i18n='on' selected='selected'>ON</option>
                                    </select>
                                </div>
                                <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                <div class='row field-container mod-container'>
                                    <input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                    <textarea class='atk-description scalable-input' title='@{attacher}' name='attr_attacher' ></textarea>
                                </div>
                                <div class='row'>
                                    <textarea class='atk-description scalable-input' title='@{description}' name='attr_description' placeholder='Description' value=''></textarea>
                                </div>
                            </div>
                            <input hidden='true' name='attr_arc_status' type='text' value=''>
                            <div class='display'>
                                <button class='npcsummary' type='roll' title='%{repeating_attack_$X_ship_roll}' name='roll_ship_roll' value='&{template:sf_ship_attack} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{arc=^{@{arc}}}} {{r1=[[1d20+[[@{gunner_roll}]]@{attack_query}@{computer_query}@{arc_status}@{power_core_status}]]}} {{damage1=[[@{damage_dice}]]}} {{range=@{range} ^{hexes}}} {{class=^{@{class}}}} {{type=^{@{type}}}} {{curr_ammo=@{ammo}}} {{ammo_type=@{ammo_type}}} {{rightbanner=@{special}}} {{notes=@{description}}} @{attacher}'>
                                    <span class='label' title='@{name}' name='attr_name'></span>
                                </button>
                            </div>
                        </div>
                    </fieldset>
                    <label class='pseudo-repcontrol'>
                        <input hidden='true' type='checkbox' title='@{create_forward}' name='attr_create_forward' value='1'>
                        <span>&</span>
                    </label>
                    <input hidden='true' name='attr_computer_query' value='?{Use Computer|No, |Yes,+2}'>
                </div>
                <div class='section-container always-glow border left'></div>
                <div class='section-container always-glow border top'></div>
                <div class='section-container always-glow border right'></div>
                <div class='section-container always-glow border bottom'></div>
                <div class='section-container always-glow border bottom-left corner'></div>
                <div class='section-container always-glow border top-right corner'></div>
            </div>
            <div class='port-weapon section-container'>
                <h1 class='section label' data-i18n='port'>PORT</h1>
                <div class='section always-glow border left'></div>
                <div class='section always-glow border top'></div>
                <div class='section always-glow border right'></div>
                <div class='section always-glow border bottom-left corner'></div>
                <div class='section always-glow border top-right corner'></div>
                <div class='section-container'>
                    <fieldset class='repeating_attack'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='forward' checked='checked'>
                        <input class='filter' type='radio' hidden='true' title='@{arc}' name='attr_arc' value='port'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='aft'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='starboard'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='turret'>
                        <div class='filter-container attack'>
                            <input type='text' hidden='true' title='@{misc}' name='attr_misc' value=''>
                            <input type='text' hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                            <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" value='1' checked="checked"><span>y</span>
                            <div class='row-options'>
                                <div class='row first-row'>
                                    <span class='label' data-i18n='name-u'>NAME</span>
                                    <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder='Laser Cannon' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='type'>TYPE</span>
                                    <select class='label' title='@{type}' name='attr_type'>
                                        <option value='direct-fire' data-i8n='direct-fire' selected='selected'>DIRECT FIRE</option>
                                        <option value='tracking' data-i8n='tracking'>TRACKING</option>
                                    </select>
                                </div>
                                <div>
                                    <span class='label' data-i18n='class'>CLASS</span>
                                    <select class='label proficiency' title='@{class}' name='attr_class'>
                                        <option value='light' data-i8n='light' selected='selected'>LIGHT</option>
                                        <option value='heavy' data-i8n='heavy'>HEAVY</option>
                                        <option value='capital' data-i8n='capital'>CAPITAL</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='rng'>RNG</span>
                                    <select class='label atk-range-type' title='@{range}' name='attr_range'>
                                        <option value='5' data-i18n='short' selected='selected'>SHORT</option>
                                        <option value='10' data-i18n='medium'>MEDIUM</option>
                                        <option value='20' data-i18n='long'>LONG</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='dmg'>DMG</span>
                                    <input class='dmg-dice scalable-input' type='text' name=attr_damage_dice placeholder='1d8' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='arc'>ARC</span>
                                    <select class='atk-type' title='@{arc}' name='attr_arc'>
                                        <option value='forward' data-i18n='forward' selected='selected'>FORWARD</option>
                                        <option value='port' data-i18n='port'>PORT</option>
                                        <option value='aft' data-i18n='aft'>AFT</option>
                                        <option value='starbpoard' data-i18n='starboard' selected='selected'>STARBOARD</option>
                                        <option value='turret' data-i18n='turret'>TURRET</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='pcu'>PCU</span>
                                    <input class='atk-special scalable-input' type='text' title='@{pcu}' name='attr_pcu' placeholder='1' value=''>
                                    <span class='label' data-i18n='bp'>BP</span>
                                    <input class='atk-special scalable-input' type='text' title='@{bp}' name='attr_bp' placeholder='1' value=''>
                                </div>
                                <div class='row'>
                                    <input class='label scalable-input' data-i18n-placeholder='ammo' title='@{ammo_type}' name='attr_ammo_type' value='' type='text' placeholder='ammo' >
                                    <input title='@{ammo}' name='attr_ammo' type='number' value=''>
                                    <span class='label'>/</span>
                                    <input title='@{ammo_max}' name='attr_ammo_max' type='number' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='special'>SPECIAL</span>
                                    <input class='atk-special scalable-input' type='text' title='@{special}' name='attr_special' placeholder='Array' value=''>
                                </div>
                                <div class='row'>
                                    <select class='atk-type' title='@{powered}' name='attr_powered'>
                                        <option class='off' value='OFF' data-i18n='off'>OFF</option>
                                        <option class='on' value='ON' data-i18n='on' selected='selected'>ON</option>
                                    </select>
                                </div>
                                <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                <div class='row field-container mod-container'>
                                    <input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                    <textarea class='atk-description scalable-input' title='@{attacher}' name='attr_attacher' ></textarea>
                                </div>
                                <div class='row'>
                                    <textarea class='atk-description scalable-input' title='@{description}' name='attr_description' placeholder='Description' value=''></textarea>
                                </div>
                            </div>
                            <input hidden='true' name='attr_arc_status' type='text' value=''>
                            <div class='display'>
                                <button class='npcsummary' type='roll' title='%{repeating_attack_$X_ship_roll}' name='roll_ship_roll' value='&{template:sf_ship_attack} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{arc=^{@{arc}}}} {{r1=[[1d20+[[@{gunner_roll}]]@{attack_query}@{computer_query}@{arc_status}@{power_core_status}]]}} {{damage1=[[@{damage_dice}]]}} {{range=@{range} ^{hexes}}} {{class=^{@{class}}}} {{type=^{@{type}}}} {{curr_ammo=@{ammo}}} {{ammo_type=@{ammo_type}}} {{rightbanner=@{special}}} {{notes=@{description}}} @{attacher}'>
                                    <span class='label' title='@{name}' name='attr_name'></span>
                                </button>
                            </div>
                        </div>
                    </fieldset>
                    <label class='pseudo-repcontrol'>
                        <input hidden='true' type='checkbox' title='@{create_port}' name='attr_create_port' value='1'>
                        <span>&</span>
                    </label>
                </div>
                <div class='section-container always-glow border left'></div>
                <div class='section-container always-glow border top'></div>
                <div class='section-container always-glow border right'></div>
                <div class='section-container always-glow border bottom'></div>
                <div class='section-container always-glow border bottom-left corner'></div>
                <div class='section-container always-glow border top-right corner'></div>
            </div>
            <div class='aft-weapon section-container'>
                <h1 class='section label' data-i18n='aft'>AFT</h1>
                <div class='section always-glow border left'></div>
                <div class='section always-glow border top'></div>
                <div class='section always-glow border right'></div>
                <div class='section always-glow border bottom-left corner'></div>
                <div class='section always-glow border top-right corner'></div>
                <div class='section-container'>
                    <fieldset class='repeating_attack'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='forward' checked='checked'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='port'>
                        <input class='filter' type='radio' hidden='true' title='@{arc}' name='attr_arc' value='aft'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='starboard'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='turret'>
                        <div class='filter-container attack'>
                            <input type='text' hidden='true' title='@{misc}' name='attr_misc' value=''>
                            <input type='text' hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                            <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" value='1' checked="checked"><span>y</span>
                            <div class='row-options'>
                                <div class='row first-row'>
                                    <span class='label' data-i18n='name-u'>NAME</span>
                                    <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder='Laser Cannon' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='type'>TYPE</span>
                                    <select class='label' title='@{type}' name='attr_type'>
                                        <option value='direct-fire' data-i8n='direct-fire' selected='selected'>DIRECT FIRE</option>
                                        <option value='tracking' data-i8n='tracking'>TRACKING</option>
                                    </select>
                                </div>
                                <div>
                                    <span class='label' data-i18n='class'>CLASS</span>
                                    <select class='label proficiency' title='@{class}' name='attr_class'>
                                        <option value='light' data-i8n='light' selected='selected'>LIGHT</option>
                                        <option value='heavy' data-i8n='heavy'>HEAVY</option>
                                        <option value='capital' data-i8n='capital'>CAPITAL</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='rng'>RNG</span>
                                    <select class='label atk-range-type' title='@{range}' name='attr_range'>
                                        <option value='5' data-i18n='short' selected='selected'>SHORT</option>
                                        <option value='10' data-i18n='medium'>MEDIUM</option>
                                        <option value='20' data-i18n='long'>LONG</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='dmg'>DMG</span>
                                    <input class='dmg-dice scalable-input' type='text' name=attr_damage_dice placeholder='1d8' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='arc'>ARC</span>
                                    <select class='atk-type' title='@{arc}' name='attr_arc'>
                                        <option value='forward' data-i18n='forward' selected='selected'>FORWARD</option>
                                        <option value='port' data-i18n='port'>PORT</option>
                                        <option value='aft' data-i18n='aft'>AFT</option>
                                        <option value='starbpoard' data-i18n='starboard' selected='selected'>STARBOARD</option>
                                        <option value='turret' data-i18n='turret'>TURRET</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='pcu'>PCU</span>
                                    <input class='atk-special scalable-input' type='text' title='@{pcu}' name='attr_pcu' placeholder='1' value=''>
                                    <span class='label' data-i18n='bp'>BP</span>
                                    <input class='atk-special scalable-input' type='text' title='@{bp}' name='attr_bp' placeholder='1' value=''>
                                </div>
                                <div class='row'>
                                    <input class='label scalable-input' data-i18n-placeholder='ammo' title='@{ammo_type}' name='attr_ammo_type' value='' type='text' placeholder='ammo' >
                                    <input title='@{ammo}' name='attr_ammo' type='number' value=''>
                                    <span class='label'>/</span>
                                    <input title='@{ammo_max}' name='attr_ammo_max' type='number' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='special'>SPECIAL</span>
                                    <input class='atk-special scalable-input' type='text' title='@{special}' name='attr_special' placeholder='Array' value=''>
                                </div>
                                <div class='row'>
                                    <select class='atk-type' title='@{powered}' name='attr_powered'>
                                        <option class='off' value='OFF' data-i18n='off'>OFF</option>
                                        <option class='on' value='ON' data-i18n='on' selected='selected'>ON</option>
                                    </select>
                                </div>
                                <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                <div class='row field-container mod-container'>
                                    <input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                    <textarea class='atk-description scalable-input' title='@{attacher}' name='attr_attacher' ></textarea>
                                </div>
                                <div class='row'>
                                    <textarea class='atk-description scalable-input' title='@{description}' name='attr_description' placeholder='Description' value=''></textarea>
                                </div>
                            </div>
                            <input hidden='true' name='attr_arc_status' type='text' value=''>
                            <div class='display'>
                                <button class='npcsummary' type='roll' title='%{repeating_attack_$X_ship_roll}' name='roll_ship_roll' value='&{template:sf_ship_attack} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{arc=^{@{arc}}}} {{r1=[[1d20+[[@{gunner_roll}]]@{attack_query}@{computer_query}@{arc_status}@{power_core_status}]]}} {{damage1=[[@{damage_dice}]]}} {{range=@{range} ^{hexes}}} {{class=^{@{class}}}} {{type=^{@{type}}}} {{curr_ammo=@{ammo}}} {{ammo_type=@{ammo_type}}} {{rightbanner=@{special}}} {{notes=@{description}}} @{attacher}'>
                                    <span class='label' title='@{name}' name='attr_name'></span>
                                </button>
                            </div>
                        </div>
                    </fieldset>
                    <label class='pseudo-repcontrol'>
                        <input hidden='true' type='checkbox' title='@{create_aft}' name='attr_create_aft' value='1'>
                        <span>&</span>
                    </label>
                </div>
                <div class='section-container always-glow border left'></div>
                <div class='section-container always-glow border top'></div>
                <div class='section-container always-glow border right'></div>
                <div class='section-container always-glow border bottom'></div>
                <div class='section-container always-glow border bottom-left corner'></div>
                <div class='section-container always-glow border top-right corner'></div>
            </div>
            <div class='starboard-weapon section-container'>
                <h1 class='section label' data-i18n='starboard'>STARBOARD</h1>
                <div class='section always-glow border left'></div>
                <div class='section always-glow border top'></div>
                <div class='section always-glow border right'></div>
                <div class='section always-glow border bottom-left corner'></div>
                <div class='section always-glow border top-right corner'></div>
                <div class='section-container'>
                    <fieldset class='repeating_attack'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='forward' checked='checked'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='port'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='aft'>
                        <input class='filter' type='radio' hidden='true' title='@{arc}' name='attr_arc' value='starboard'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='turret'>
                        <div class='filter-container attack'>
                            <input type='text' hidden='true' title='@{misc}' name='attr_misc' value=''>
                            <input type='text' hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                            <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" value='1' checked="checked"><span>y</span>
                            <div class='row-options'>
                                <div class='row first-row'>
                                    <span class='label' data-i18n='name-u'>NAME</span>
                                    <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder='Laser Cannon' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='type'>TYPE</span>
                                    <select class='label' title='@{type}' name='attr_type'>
                                        <option value='direct-fire' data-i8n='direct-fire' selected='selected'>DIRECT FIRE</option>
                                        <option value='tracking' data-i8n='tracking'>TRACKING</option>
                                    </select>
                                </div>
                                <div>
                                    <span class='label' data-i18n='class'>CLASS</span>
                                    <select class='label proficiency' title='@{class}' name='attr_class'>
                                        <option value='light' data-i8n='light' selected='selected'>LIGHT</option>
                                        <option value='heavy' data-i8n='heavy'>HEAVY</option>
                                        <option value='capital' data-i8n='capital'>CAPITAL</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='rng'>RNG</span>
                                    <select class='label atk-range-type' title='@{range}' name='attr_range'>
                                        <option value='5' data-i18n='short' selected='selected'>SHORT</option>
                                        <option value='10' data-i18n='medium'>MEDIUM</option>
                                        <option value='20' data-i18n='long'>LONG</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='dmg'>DMG</span>
                                    <input class='dmg-dice scalable-input' type='text' name=attr_damage_dice placeholder='1d8' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='arc'>ARC</span>
                                    <select class='atk-type' title='@{arc}' name='attr_arc'>
                                        <option value='forward' data-i18n='forward' selected='selected'>FORWARD</option>
                                        <option value='port' data-i18n='port'>PORT</option>
                                        <option value='aft' data-i18n='aft'>AFT</option>
                                        <option value='starbpoard' data-i18n='starboard' selected='selected'>STARBOARD</option>
                                        <option value='turret' data-i18n='turret'>TURRET</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='pcu'>PCU</span>
                                    <input class='atk-special scalable-input' type='text' title='@{pcu}' name='attr_pcu' placeholder='1' value=''>
                                    <span class='label' data-i18n='bp'>BP</span>
                                    <input class='atk-special scalable-input' type='text' title='@{bp}' name='attr_bp' placeholder='1' value=''>
                                </div>
                                <div class='row'>
                                    <input class='label scalable-input' data-i18n-placeholder='ammo' title='@{ammo_type}' name='attr_ammo_type' value='' type='text' placeholder='ammo' >
                                    <input title='@{ammo}' name='attr_ammo' type='number' value=''>
                                    <span class='label'>/</span>
                                    <input title='@{ammo_max}' name='attr_ammo_max' type='number' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='special'>SPECIAL</span>
                                    <input class='atk-special scalable-input' type='text' title='@{special}' name='attr_special' placeholder='Array' value=''>
                                </div>
                                <div class='row'>
                                    <select class='atk-type' title='@{powered}' name='attr_powered'>
                                        <option class='off' value='OFF' data-i18n='off'>OFF</option>
                                        <option class='on' value='ON' data-i18n='on' selected='selected'>ON</option>
                                    </select>
                                </div>
                                <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                <div class='row field-container mod-container'>
                                    <input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                    <textarea class='atk-description scalable-input' title='@{attacher}' name='attr_attacher' ></textarea>
                                </div>
                                <div class='row'>
                                    <textarea class='atk-description scalable-input' title='@{description}' name='attr_description' placeholder='Description' value=''></textarea>
                                </div>
                            </div>
                            <input hidden='true' name='attr_arc_status' type='text' value=''>
                            <div class='display'>
                                <button class='npcsummary' type='roll' title='%{repeating_attack_$X_ship_roll}' name='roll_ship_roll' value='&{template:sf_ship_attack} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{arc=^{@{arc}}}} {{r1=[[1d20+[[@{gunner_roll}]]@{attack_query}@{computer_query}@{arc_status}@{power_core_status}]]}} {{damage1=[[@{damage_dice}]]}} {{range=@{range} ^{hexes}}} {{class=^{@{class}}}} {{type=^{@{type}}}} {{curr_ammo=@{ammo}}} {{ammo_type=@{ammo_type}}} {{rightbanner=@{special}}} {{notes=@{description}}} @{attacher}'>
                                    <span class='label' title='@{name}' name='attr_name'></span>
                                </button>
                            </div>
                        </div>
                    </fieldset>
                    <label class='pseudo-repcontrol'>
                        <input hidden='true' type='checkbox' title='@{create_starboard}' name='attr_create_starboard' value='1'>
                        <span>&</span>
                    </label>
                </div>
                <div class='section-container always-glow border left'></div>
                <div class='section-container always-glow border top'></div>
                <div class='section-container always-glow border right'></div>
                <div class='section-container always-glow border bottom'></div>
                <div class='section-container always-glow border bottom-left corner'></div>
                <div class='section-container always-glow border top-right corner'></div>
            </div>
            <div class='turret-weapon section-container'>
                <h1 class='section label' data-i18n='turret'>TURRET</h1>
                <div class='section always-glow border left'></div>
                <div class='section always-glow border top'></div>
                <div class='section always-glow border right'></div>
                <div class='section always-glow border bottom-left corner'></div>
                <div class='section always-glow border top-right corner'></div>
                <div class='section-container'>
                    <fieldset class='repeating_attack'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='forward' checked='checked'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='port'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='aft'>
                        <input type='radio' hidden='true' title='@{arc}' name='attr_arc' value='starboard'>
                        <input class='filter' type='radio' hidden='true' title='@{arc}' name='attr_arc' value='turret'>
                        <div class='filter-container attack'>
                            <input type='text' hidden='true' title='@{misc}' name='attr_misc' value=''>
                            <input type='text' hidden='true' title='@{damage_misc}' name='attr_damage_misc' value=''>
                            <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" value='1' checked="checked"><span>y</span>
                            <div class='row-options'>
                                <div class='row first-row'>
                                    <span class='label' data-i18n='name-u'>NAME</span>
                                    <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder='Laser Cannon' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='type'>TYPE</span>
                                    <select class='label' title='@{type}' name='attr_type'>
                                        <option value='direct-fire' data-i8n='direct-fire' selected='selected'>DIRECT FIRE</option>
                                        <option value='tracking' data-i8n='tracking'>TRACKING</option>
                                    </select>
                                </div>
                                <div>
                                    <span class='label' data-i18n='class'>CLASS</span>
                                    <select class='label proficiency' title='@{class}' name='attr_class'>
                                        <option value='light' data-i8n='light' selected='selected'>LIGHT</option>
                                        <option value='heavy' data-i8n='heavy'>HEAVY</option>
                                        <option value='capital' data-i8n='capital'>CAPITAL</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='rng'>RNG</span>
                                    <select class='label atk-range-type' title='@{range}' name='attr_range'>
                                        <option value='5' data-i18n='short' selected='selected'>SHORT</option>
                                        <option value='10' data-i18n='medium'>MEDIUM</option>
                                        <option value='20' data-i18n='long'>LONG</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='dmg'>DMG</span>
                                    <input class='dmg-dice scalable-input' type='text' name=attr_damage_dice placeholder='1d8' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='arc'>ARC</span>
                                    <select class='atk-type' title='@{arc}' name='attr_arc'>
                                        <option value='forward' data-i18n='forward' selected='selected'>FORWARD</option>
                                        <option value='port' data-i18n='port'>PORT</option>
                                        <option value='aft' data-i18n='aft'>AFT</option>
                                        <option value='starbpoard' data-i18n='starboard' selected='selected'>STARBOARD</option>
                                        <option value='turret' data-i18n='turret'>TURRET</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='pcu'>PCU</span>
                                    <input class='atk-special scalable-input' type='text' title='@{pcu}' name='attr_pcu' placeholder='1' value=''>
                                    <span class='label' data-i18n='bp'>BP</span>
                                    <input class='atk-special scalable-input' type='text' title='@{bp}' name='attr_bp' placeholder='1' value=''>
                                </div>
                                <div class='row'>
                                    <input class='label scalable-input' data-i18n-placeholder='ammo' title='@{ammo_type}' name='attr_ammo_type' value='' type='text' placeholder='ammo' >
                                    <input title='@{ammo}' name='attr_ammo' type='number' value=''>
                                    <span class='label'>/</span>
                                    <input title='@{ammo_max}' name='attr_ammo_max' type='number' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='special'>SPECIAL</span>
                                    <input class='atk-special scalable-input' type='text' title='@{special}' name='attr_special' placeholder='Array' value=''>
                                </div>
                                <div class='row'>
                                    <select class='atk-type' title='@{powered}' name='attr_powered'>
                                        <option class='off' value='OFF' data-i18n='off'>OFF</option>
                                        <option class='on' value='ON' data-i18n='on' selected='selected'>ON</option>
                                    </select>
                                </div>
                                <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                <div class='row field-container mod-container'>
                                    <input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                    <textarea class='atk-description scalable-input' title='@{attacher}' name='attr_attacher' ></textarea>
                                </div>
                                <div class='row'>
                                    <textarea class='atk-description scalable-input' title='@{description}' name='attr_description' placeholder='Description' value=''></textarea>
                                </div>
                            </div>
                            <input hidden='true' name='attr_arc_status' type='text' value=''>
                            <div class='display'>
                                <button class='npcsummary' type='roll' title='%{repeating_attack_$X_ship_roll}' name='roll_ship_roll' value='&{template:sf_ship_attack} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{arc=^{@{arc}}}} {{r1=[[1d20+[[@{gunner_roll}]]@{attack_query}@{computer_query}@{arc_status}@{power_core_status}]]}} {{damage1=[[@{damage_dice}]]}} {{range=@{range} ^{hexes}}} {{class=^{@{class}}}} {{type=^{@{type}}}} {{curr_ammo=@{ammo}}} {{ammo_type=@{ammo_type}}} {{rightbanner=@{special}}} {{notes=@{description}}} @{attacher}'>
                                    <span class='label' title='@{name}' name='attr_name'></span>
                                </button>
                            </div>
                        </div>
                    </fieldset>
                    <label class='pseudo-repcontrol'>
                        <input hidden='true' type='checkbox' title='@{create_turret}' name='attr_create_turret' value='1'>
                        <span>&</span>
                    </label>
                </div>
                <div class='section-container always-glow border left'></div>
                <div class='section-container always-glow border top'></div>
                <div class='section-container always-glow border right'></div>
                <div class='section-container always-glow border bottom'></div>
                <div class='section-container always-glow border bottom-left corner'></div>
                <div class='section-container always-glow border top-right corner'></div>
            </div>
        </div>
        <div class='bottom-section'>
            
            <div class='systems section-container'>
                <h1 class='section label' data-i18n='systems'>SYSTEMS</h1>
                <div class='section always-glow border left'></div>
                <div class='section always-glow border top'></div>
                <div class='section always-glow border right'></div>
                <div class='section always-glow border bottom-left corner'></div>
                <div class='section always-glow border top-right corner'></div>
                <div class='section-container'>
                    <fieldset class='repeating_system'>
                        <input type='radio' class='filter' title='@{type}' name='attr_type' value='system' hidden='true' checked='checked'>
                        <input type='radio' title='@{type}' name='attr_type' value='expansion' hidden='true'>
                        <div class='filter-container system'>
                            
                            <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" value='1' checked="checked"><span>y</span>
                            <div class='row-options'>
                                <div class='row first-row'>
                                    <span class='label' data-i18n='name-u'>NAME</span>
                                    <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder='Power Core' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='purpose'>PURPOSE</span>
                                    <select class='label' title='@{purpose}' name='attr_purpose'>
                                        <option value='power-core' data-i8n='power-core' selected='selected'>POWER CORE</option>
                                        <option value='thrusters' data-i8n='thrusters'>THRUSTERS</option>
                                        <option value='armor' data-i8n='armor'>ARMOR</option>
                                        <option value='computer' data-i8n='computer'>COMPUTER</option>
                                        <option value='crew-quarters' data-i8n='crew-quarters'>CREW QUARTERS</option>
                                        <option value='countermeasures' data-i8n='countermeasures'>COUNTERMEASURES</option>
                                        <option value='drift-engines' data-i8n='drift-engines'>DRIFT ENGINES</option>
                                        <option value='expansion-bay' data-i8n='expansion-bay'>EXPANSION BAY</option>
                                        <option value='security' data-i8n='security'>SECURITY</option>
                                        <option value='sensors' data-i8n='sensors'>SENSORS</option>
                                        <option value='shields' data-i8n='shields'>SHIELDS</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <select class='atk-type' title='@{powered}' name='attr_powered'>
                                        <option class='off' value='OFF' data-i18n='off'>OFF</option>
                                        <option class='on' value='ON' data-i18n='on' selected='selected'>ON</option>
                                    </select>
                                    <span class='label' data-i18n='pcu'>PCU</span>
                                    <input class='atk-special scalable-input' type='text' title='@{pcu}' name='attr_pcu' placeholder='1' value=''>
                                    <span class='label' data-i18n='bp'>BP</span>
                                    <input class='atk-special scalable-input' type='text' title='@{bp}' name='attr_bp' placeholder='1' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='computer-bonus'>COMPUTER BONUS</span>
                                    <input class='scalable-input' title='@{comp_bonus}' type='text' name='attr_comp_bonus' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='shields'>SHIELDS</span>
                                    <input class='scalable-input' title='@{shields}' type='text' name='attr_shields' value=''>
                                    <span class='label armor'>b</span>
                                    <input class='scalable-input' title='@{armor}' type='text' name='attr_armor' value=''>
                                    <span class='label' data-i18n='tl'>TL</span>
                                    <input class='scalable-input' title='@{countermeasure}' type='text' name='attr_countermeasure' value=''>
                                </div>
                                <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                <div class='row field-container mod-container'>
                                    <input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                    <textarea class='atk-description scalable-input' title='@{attacher}' name='attr_attacher' ></textarea>
                                </div>
                                <div class='row'>
                                    <textarea class='atk-description scalable-input' title='@{description}' name='attr_description' placeholder='Description' value=''></textarea>
                                </div>
                            </div>
                            <div class='display'>
                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_attack}{{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{r1name=@{name}}} {{r1=[[1d20+@{bab}@{attack_query}]]}} {{damage1=[[@{damage_dice}]]}} {{notes=@{description}}} @{attacher}'>
                                    <span class='label' title='@{name}' name='attr_name'></span>
                                </button>
                            </div>
                        </div>
                    </fieldset>
                    <label class='pseudo-repcontrol'>
                        <input hidden='true' type='checkbox' title='@{create_system}' name='attr_create_system' value='1'>
                        <span>&</span>
                    </label>
                </div>
                <div class='section-container always-glow border left'></div>
                <div class='section-container always-glow border top'></div>
                <div class='section-container always-glow border right'></div>
                <div class='section-container always-glow border bottom'></div>
                <div class='section-container always-glow border bottom-left corner'></div>
                <div class='section-container always-glow border top-right corner'></div>
            </div>
            <div class='expansion section-container'>
                <h1 class='section label' data-i18n='expansion-bays'>EXPANSION BAYS</h1>
                <div class='section always-glow border left'></div>
                <div class='section always-glow border top'></div>
                <div class='section always-glow border right'></div>
                <div class='section always-glow border bottom-left corner'></div>
                <div class='section always-glow border top-right corner'></div>
                <div class='section-container'>
                    <fieldset class='repeating_system'>
                        <input type='radio'  title='@{type}' name='attr_type' value='system' hidden='true' checked='checked'>
                        <input type='radio' class='filter' title='@{type}' name='attr_type' value='expansion' hidden='true'>
                        <div class='filter-container system'>
                            
                            <input class="show-options" type="checkbox" title='@{show_options}' name="attr_show_options" value='1' checked="checked"><span>y</span>
                            <div class='row-options'>
                                <div class='row first-row'>
                                    <span class='label' data-i18n='name-u'>NAME</span>
                                    <input class='atk-name scalable-input' type='text' title='@{name}' name='attr_name' placeholder='Power Core' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='purpose'>PURPOSE</span>
                                    <select class='label' title='@{purpose}' name='attr_purpose'>
                                        <option value='power-core' data-i8n='power-core' selected='selected'>POWER CORE</option>
                                        <option value='thrusters' data-i8n='thrusters'>THRUSTERS</option>
                                        <option value='armor' data-i8n='armor'>ARMOR</option>
                                        <option value='computer' data-i8n='computer'>COMPUTER</option>
                                        <option value='crew-quarters' data-i8n='crew-quarters'>CREW QUARTERS</option>
                                        <option value='countermeasures' data-i8n='countermeasures'>COUNTERMEASURES</option>
                                        <option value='drift-engines' data-i8n='drift-engines'>DRIFT ENGINES</option>
                                        <option value='expansion-bay' data-i8n='expansion-bay'>EXPANSION BAY</option>
                                        <option value='security' data-i8n='security'>SECURITY</option>
                                        <option value='sensors' data-i8n='sensors'>SENSORS</option>
                                        <option value='shields' data-i8n='shields'>SHIELDS</option>
                                    </select>
                                </div>
                                <div class='row'>
                                    <select class='atk-type' title='@{powered}' name='attr_powered'>
                                        <option class='off' value='OFF' data-i18n='off'>OFF</option>
                                        <option class='on' value='ON' data-i18n='on' selected='selected'>ON</option>
                                    </select>
                                    <span class='label' data-i18n='pcu'>PCU</span>
                                    <input class='atk-special scalable-input' type='text' title='@{pcu}' name='attr_pcu' placeholder='1' value=''>
                                    <span class='label' data-i18n='bp'>BP</span>
                                    <input class='atk-special scalable-input' type='text' title='@{bp}' name='attr_bp' placeholder='1' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='computer-bonus'>COMPUTER BONUS</span>
                                    <input class='scalable-input' title='@{comp_bonus}' type='text' name='attr_comp_bonus' value=''>
                                </div>
                                <div class='row'>
                                    <span class='label' data-i18n='shields'>SHIELDS</span>
                                    <input class='scalable-input' title='@{shields}' type='text' name='attr_shields' value=''>
                                    <span class='label armor' data-i18n=>b</span>
                                    <input class='scalable-input' title='@{armor}' type='text' name='attr_armor' value=''>
                                    <span class='label' data-i18n='tl'>TL</span>
                                    <input class='scalable-input' title='@{countermeasure}' type='text' name='attr_countermeasure' value=''>
                                </div>
                                <label><input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'><span class='label field' data-i18n='attacher'>ATTACHER</span></label>
                                <input class='field-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                <div class='row field-container mod-container'>
                                    <input class='field-tab macro-tab' type='checkbox' title='@{macro_checkbox}' name='attr_macro_checkbox' value='1' hidden='true'>
                                    <textarea class='atk-description scalable-input' title='@{attacher}' name='attr_attacher' ></textarea>
                                </div>
                                <div class='row'>
                                    <textarea class='atk-description scalable-input' title='@{description}' name='attr_description' placeholder='Description' value=''></textarea>
                                </div>
                            </div>
                            <div class='display'>
                                <button class='npcsummary' type='roll' title='%{roll}' name='roll_roll' value='@{whisper_state}&{template:sf_attack}{{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{r1name=@{name}}} {{r1=[[1d20+@{bab}@{attack_query}]]}} {{damage1=[[@{damage_dice}]]}} {{notes=@{description}}} @{attacher}'>
                                    <span class='label' title='@{name}' name='attr_name'></span>
                                </button>
                            </div>
                        </div>
                    </fieldset>
                    <label class='pseudo-repcontrol'>
                        <input hidden='true' type='checkbox' title='@{create_expansion}' name='attr_create_expansion' value='1'>
                        <span>&</span>
                    </label>
                </div>
                <div class='section-container always-glow border left'></div>
                <div class='section-container always-glow border top'></div>
                <div class='section-container always-glow border right'></div>
                <div class='section-container always-glow border bottom'></div>
                <div class='section-container always-glow border bottom-left corner'></div>
                <div class='section-container always-glow border top-right corner'></div>
            </div>
            <div class='cargo section-container'>
                <h1 class='section label' data-i18n='cargo/passengers'>CARGO/PASSENGERS</h1>
                <div class='section always-glow border left'></div>
                <div class='section always-glow border top'></div>
                <div class='section always-glow border right'></div>
                <div class='section always-glow border bottom-left corner'></div>
                <div class='section always-glow border top-right corner'></div>
                <div class='section-container'>
                    <div class='top-gutter'></div>
                    <textarea title='@{cargo}' name='attr_cargo' data-i18n-placeholder='cargo-placeholder' placeholder='Enter any cargo/passengers being carried here'></textarea>
                    <div class='top-gutter'></div>
                </div>
                <div class='section-container always-glow border left'></div>
                <div class='section-container always-glow border top'></div>
                <div class='section-container always-glow border right'></div>
                <div class='section-container always-glow border bottom'></div>
                <div class='section-container always-glow border bottom-left corner'></div>
                <div class='section-container always-glow border top-right corner'></div>
            </div>
        </div>
        <div class='critical section-container'>
            <h1 class='section label' data-i18n='system-status'>SYSTEM STATUS</h1>
            <div class='section always-glow border left'></div>
            <div class='section always-glow border top'></div>
            <div class='section always-glow border right'></div>
            <div class='section always-glow border bottom-left corner'></div>
            <div class='section always-glow border top-right corner'></div>
            <div class='section-container'>
                <div class='life-support'>
                    <span class='label' data-i18n='life-support-dice-range'>LIFE SUPPORT (1-10)</span>
                    <label class='nominal'><input type='radio' hidden='true' title='@{life_support_status}' name='attr_life_support_status' value='' checked='checked'><span class='label' data-i18n='nominal'>NOMINAL</span></label>
                    <label class='glitch'><input type='radio' hidden='true' title='@{life_support_status}' name='attr_life_support_status' value='-2'><span class='label' data-i18n='glitching'>GLITCHING</span></label>
                    <label class='malfunction'><input type='radio' hidden='true' title='@{life_support_status}' name='attr_life_support_status' value='-4'><span class='label' data-i18n='malfunctioning'>MALFUNCTIONING</span></label>
                    <label class='wreck'><input type='radio' hidden='true' title='@{life_support_status}' name='attr_life_support_status' value='+1d0cf<0cs>1[wrecked]'><span class='label' data-i18n='wrecked'>WRECKED</span></label>
                </div>
                <div class='sensors'>
                    <span class='label' data-i18n='sensors-dice-range'>SENSORS (11-30)</span>
                    <label class='nominal'><input type='radio' hidden='true' title='@{sensors_status}' name='attr_sensors_status' value='' checked='checked'><span class='label' data-i18n='nominal'>NOMINAL</span></label>
                    <label class='glitch'><input type='radio' hidden='true' title='@{sensors_status}' name='attr_sensors_status' value='-2'><span class='label' data-i18n='glitching'>GLITCHING</span></label>
                    <label class='malfunction'><input type='radio' hidden='true' title='@{sensors_status}' name='attr_sensors_status' value='-4'><span class='label' data-i18n='malfunctioning'>MALFUNCTIONING</span></label>
                    <label class='wreck'><input type='radio' hidden='true' title='@{sensors_status}' name='attr_sensors_status' value='+1d0cf<0cs>1[wrecked]'><span class='label' data-i18n='wrecked'>WRECKED</span></label>
                </div>
                <div class='weapon-background'></div>
                <div class='weapons'>
                    <span class='label' data-i18n='weapons-array-dice-range'>WEAPONS ARRAY (31-60)</span>
                </div>
                <div class='engines'>
                    <span class='label' data-i18n='engines-dice-range'>ENGINES (61-80)</span>
                    <label class='nominal'><input type='radio' hidden='true' title='@{engines_status}' name='attr_engines_status' value='' checked='checked'><span class='label' data-i18n='nominal'>NOMINAL</span></label>
                    <label class='glitch'><input type='radio' hidden='true' title='@{engines_status}' name='attr_engines_status' value='-2'><span class='label' data-i18n='glitching'>GLITCHING</span></label>
                    <label class='malfunction'><input type='radio' hidden='true' title='@{engines_status}' name='attr_engines_status' value='-4'><span class='label' data-i18n='malfunctioning'>MALFUNCTIONING</span></label>
                    <label class='wreck'><input type='radio' hidden='true' title='@{engines_status}' name='attr_engines_status' value='+1d0cf<0cs>1[wrecked]'><span class='label' data-i18n='wrecked'>WRECKED</span></label>
                </div>
                <div class='power'>
                    <span class='label' data-i18n='power-core-dice-range'>POWER CORE (81-100)</span>
                    <label class='nominal'><input type='radio' hidden='true' title='@{power_core_status}' name='attr_power_core_status' value='' checked='checked'><span class='label' data-i18n='nominal'>NOMINAL</span></label>
                    <label class='glitch'><input type='radio' hidden='true' title='@{power_core_status}' name='attr_power_core_status' value=' '><span class='label' data-i18n='glitching'>GLITCHING</span></label>
                    <label class='malfunction'><input type='radio' hidden='true' title='@{power_core_status}' name='attr_power_core_status' value='-2'><span class='label' data-i18n='malfunctioning'>MALFUNCTIONING</span></label>
                    <label class='wreck'><input type='radio' hidden='true' title='@{power_core_status}' name='attr_power_core_status' value='-4'><span class='label' data-i18n='wrecked'>WRECKED</span></label>
                </div>
                <div class='weapon-details'>
                    <span class='label nominal' data-i18n='nominal'>NOMINAL</span>
                    <span class='label glitch' data-i18n='glitching'>GLITCHING</span>
                    <span class='label malfunction' data-i18n='malfunctioning'>MALFUNCTIONING</span>
                    <span class='label wreck' data-i18n='wrecked'>WRECKED</span>
                    <div class='status nominal'>
                        <label class='forward'><input type='radio' hidden='true' title='@{forward_weapons_status}' name='attr_forward_weapons_status' value='' checked='checked'><div></div><span class='label' data-i18n='fwd (1)'>FWD (1)</span></label>
                        <label class='starboard'><input type='radio' hidden='true' title='@{starboard_weapons_status}' name='attr_starboard_weapons_status' value='' checked='checked'><div></div><span class='label' data-i18n='stbd (2)'>STBD (2)</span></label>
                        <label class='port'><input type='radio' hidden='true' title='@{port_weapons_status}' name='attr_port_weapons_status' value='' checked='checked'><div></div><span class='label' data-i18n='port (4)'>PORT (4)</span></label>
                        <label class='aft'><input type='radio' hidden='true' title='@{aft_weapons_status}' name='attr_aft_weapons_status' value='' checked='checked'><div></div><span class='label' data-i18n='aft (3)'>AFT (3)</span></label>
                    </div>
                    <div class='status glitch'>
                        <label class='forward'><input type='radio' hidden='true' title='@{forward_weapons_status}' name='attr_forward_weapons_status' value='-2'><div></div><span class='label' data-i18n='fwd (1)'>FWD (1)</span></label>
                        <label class='starboard'><input type='radio' hidden='true' title='@{starboard_weapons_status}' name='attr_starboard_weapons_status' value='-2'><div></div><span class='label' data-i18n='stbd (2)'>STBD (2)</span></label>
                        <label class='port'><input type='radio' hidden='true' title='@{port_weapons_status}' name='attr_port_weapons_status' value='-2'><div></div><span class='label' data-i18n='port (4)'>PORT (4)</span></label>
                        <label class='aft'><input type='radio' hidden='true' title='@{aft_weapons_status}' name='attr_aft_weapons_status' value='-2'><div></div><span class='label' data-i18n='aft (3)'>AFT (3)</span></label>
                    </div>
                    <div class='status malfunction'>
                        <label class='forward'><input type='radio' hidden='true' title='@{forward_weapons_status}' name='attr_forward_weapons_status' value='-4'><div></div><span class='label' data-i18n='fwd (1)'>FWD (1)</span></label>
                        <label class='starboard'><input type='radio' hidden='true' title='@{starboard_weapons_status}' name='attr_starboard_weapons_status' value='-4'><div></div><span class='label' data-i18n='stbd (2)'>STBD (2)</span></label>
                        <label class='port'><input type='radio' hidden='true' title='@{port_weapons_status}' name='attr_port_weapons_status' value='-4'><div></div><span class='label' data-i18n='port (4)'>PORT (4)</span></label>
                        <label class='aft'><input type='radio' hidden='true' title='@{aft_weapons_status}' name='attr_aft_weapons_status' value='-4'><div></div><span class='label' data-i18n='aft (3)'>AFT (3)</span></label>
                    </div>
                    <div class='status wreck'>
                        <label class='forward'><input type='radio' hidden='true' title='@{forward_weapons_status}' name='attr_forward_weapons_status' value='+1d0cf<0cs>1[wrecked]'><div></div><span class='label' data-i18n='fwd (1)'>FWD (1)</span></label>
                        <label class='starboard'><input type='radio' hidden='true' title='@{starboard_weapons_status}' name='attr_starboard_weapons_status' value='+1d0cf<0cs>1[wrecked]'><div></div><span class='label' data-i18n='stbd (2)'>STBD (2)</span></label>
                        <label class='port'><input type='radio' hidden='true' title='@{port_weapons_status}' name='attr_port_weapons_status' value='+1d0cf<0cs>1[wrecked]'><div></div><span class='label' data-i18n='port (4)'>PORT (4)</span></label>
                        <label class='aft'><input type='radio' hidden='true' title='@{aft_weapons_status}' name='attr_aft_weapons_status' value='+1d0cf<0cs>1[wrecked]'><div></div><span class='label' data-i18n='aft (3)'>AFT (3)</span></label>
                    </div>
                </div>
            </div>
            <div class='section-container always-glow border left'></div>
            <div class='section-container always-glow border top'></div>
            <div class='section-container always-glow border right'></div>
            <div class='section-container always-glow border bottom'></div>
            <div class='section-container always-glow border bottom-left corner'></div>
            <div class='section-container always-glow border top-right corner'></div>
        </div>
    </div>
</div>
<div class='rolltemplates' hidden='true'>
    <!-- Roll Template Definitions
    Generic Roll Template
    Macro Text: 
        @{whisper_state}&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title= }} {{r1name= }} {{r1= }} {{notes= }}
    -->
    <rolltemplate class="sheet-rolltemplate-sf_generic">
        {{#title}}
            <div class='generic-header'>
                <div>
                    {{title}}
                </div>
                <div class='header always-glow border-left'></div>
                <div class='header always-glow border-top'></div>
                <div class='header always-glow border-right'></div>
                <div class='header always-glow border-bottom-left corner'></div>
                <div class='header always-glow border-top-right corner'></div>
            </div>
        {{/title}}
        <div class='generic-body'>
            {{#r1}}
                <div class='highlighted split r1name'>
                    {{#r1name}}
                        {{r1name}}
                    {{/r1name}}
                    {{^r1name}}
                        <span data-i18n='check'>CHECK</span>
                    {{/r1name}}
                </div>
                <div class='highlighted split roll'>
                    {{r1}}
                </div>
            {{/r1}}
            {{#r2}}
                <div class='highlighted split r1name'>
                    {{#r2name}}
                        {{r2name}}
                    {{/r2name}}
                    {{^r2name}}
                        <span data-i18n='check'>CHECK</span>
                    {{/r2name}}
                </div>
                <div class='highlighted split roll'>
                    {{r2}}
                </div>
            {{/r2}}
            {{#r3}}
                <div class='highlighted split r1name'>
                    {{#r3name}}
                        {{r3name}}
                    {{/r3name}}
                    {{^r3name}}
                        <span data-i18n='check'>CHECK</span>
                    {{/r3name}}
                </div>
                <div class='highlighted split roll'>
                    {{r3}}
                </div>
            {{/r3}}
            {{#r4}}
                <div class='highlighted split r1name'>
                    {{#r4name}}
                        {{r4name}}
                    {{/r4name}}
                    {{^r4name}}
                        <span data-i18n='check'>CHECK</span>
                    {{/r4name}}
                </div>
                <div class='highlighted split roll'>
                    {{r4}}
                </div>
            {{/r4}}
            {{#r5}}
                <div class='highlighted split r1name'>
                    {{#r5name}}
                        {{r5name}}
                    {{/r5name}}
                    {{^r5name}}
                        <span data-i18n='check'>CHECK</span>
                    {{/r5name}}
                </div>
                <div class='highlighted split roll'>
                    {{r5}}
                </div>
            {{/r5}}
            {{#notes}}
                <div class='highlighted across notes-row'>
                    <span class='notes' data-i18n='notes:'>NOTES:</span><span> {{notes}}</span>
                </div>
            {{/notes}}
            {{#buttons0}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons0}}</span>
                </div>
            {{/buttons0}}
            {{#buttons1}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons1}}</span>
                </div>
            {{/buttons1}}
            {{#buttons2}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons2}}</span>
                </div>
            {{/buttons2}}
            {{#buttons3}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons3}}</span>
                </div>
            {{/buttons3}}
            {{#buttons4}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons4}}</span>
                </div>
            {{/buttons4}}
            {{#buttons5}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons5}}</span>
                </div>
            {{/buttons5}}
            {{#buttons6}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons6}}</span>
                </div>
            {{/buttons6}}
            {{#buttons7}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons7}}</span>
                </div>
            {{/buttons7}}
            {{#buttons8}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons8}}</span>
                </div>
            {{/buttons8}}
            {{#buttons9}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons9}}</span>
                </div>
            {{/buttons9}}
        </div>
        <div class='body always-glow border-left'></div>
        <div class='body always-glow border-top'></div>
        <div class='body always-glow border-right'></div>
        <div class='body always-glow border-bottom'></div>
        <div class='body always-glow border-bottom-left corner'></div>
        <div class='body always-glow border-top-right corner'></div>
        {{#rightbanner}}
            <div class='side-banner right'>
                <div>
                    <span>{{rightbanner}}</span>
                </div>
                <div class='header always-glow border-left'></div>
                <div class='header always-glow border-top'></div>
                <div class='header always-glow border-right'></div>
                <div class='header always-glow border-bottom-left corner'></div>
                <div class='header always-glow border-top-right corner'></div>
            </div>
        {{/rightbanner}}
        {{#name}}
            <div class='generic-footer'>
                <div>
                    {{#characterid}}
                        {{#name}}
                            [{{name}}](https://journal.roll20.net/character/{{characterid}})
                        {{/name}}
                    {{/characterid}}
                    {{^characterid}}
                        {{name}}
                    {{/characterid}}
                </div>
                <div class='footer always-glow border-left'></div>
                <div class='footer always-glow border-bottom'></div>
                <div class='footer always-glow border-right'></div>
                <div class='footer always-glow border-bottom-left corner'></div>
                <div class='footer always-glow border-top-right corner'></div>
            </div>
        {{/name}}
    </rolltemplate>
    <!-- Attack Roll Templates -->
    <!-- Macro Text: 
        @{whisper_state}&{template:sf_attack} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{level=[[@{level}d1]]}} {{r1=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]@{misc}@{bonus}]]}} 
        {{damagetype=@{type}}} {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} 
        {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{crit}}}
        {{targets=}} {{range=}}
        {{notes=@{description}}}
    -->
    <rolltemplate class="sheet-rolltemplate-sf_attack">
        {{#title}}
            <div class='generic-header'>
                <div>
                    {{title}}
                </div>
                <div class='header always-glow border-left'></div>
                <div class='header always-glow border-top'></div>
                <div class='header always-glow border-right'></div>
                <div class='header always-glow border-bottom-left corner'></div>
                <div class='header always-glow border-top-right corner'></div>
            </div>
        {{/title}}
        {{#rollGreater() level 0}}
            <div class='side-banner left'>
                <div>
                    <span data-i18n='level'>LEVEL </span>{{level}}
                </div>
                <div class='header always-glow border-left'></div>
                <div class='header always-glow border-top'></div>
                <div class='header always-glow border-right'></div>
                <div class='header always-glow border-bottom-left corner'></div>
                <div class='header always-glow border-top-right corner'></div>
            </div>
        {{/rollGreater() level 0}}
        <div class='generic-body'>
            <span class='across attack-label' data-i18n='1st-attack'>1st ATTACK</span>
            {{#r1}}
                <div class='highlighted split r1name'>
                    {{#r1name}}
                        {{r1name}}
                    {{/r1name}}
                    {{^r1name}}
                        <span data-i18n='attack'>ATTACK</span>
                    {{/r1name}}
                </div>
                <div class='highlighted split roll'>
                    {{r1}}
                </div>
            {{/r1}}
            {{#damage1}}
                <div class='highlighted split r1name'>
                    {{#damage1type}}
                        {{damage1type}}
                    {{/damage1type}}
                    {{^damage1type}}
                        <span data-i18n='damage'>DAMAGE</span>
                    {{/damage1type}}
                </div>
                <div class='highlighted split roll'>
                    <span>{{damage1}}
                    {{#rollWasCrit() r1}}
                        {{#crit1damage}}
                            +{{crit1damage}}
                        {{/crit1damage}}
                        {{#crit1effect}}
                            <br>+{{crit1effect}}
                        {{/crit1effect}}
                    {{/rollWasCrit() r1}}
                    </span>
                </div>
            {{/damage1}}
            {{#rollGreater() fullattack 1}}
                <span class='across attack-label' data-i18n='2nd-attack'>2nd ATTACK</span>
                {{#r2}}
                    <div class='highlighted split r1name'>
                        {{#r2name}}
                            {{r2name}}
                        {{/r2name}}
                        {{^r2name}}
                            <span data-i18n='attack'>ATTACK</span>
                        {{/r2name}}
                    </div>
                    <div class='highlighted split roll'>
                        {{r2}}
                    </div>
                {{/r2}}
                {{#damage2}}
                    <div class='highlighted split r1name'>
                        {{#damage2type}}
                            {{damage2type}}
                        {{/damage2type}}
                        {{^damage2type}}
                            <span data-i18n='damage'>DAMAGE</span>
                        {{/damage2type}}
                    </div>
                    <div class='highlighted split roll'>
                        <span>{{damage2}}
                            {{#rollWasCrit() r2}}
                                {{#crit2damage}}
                                    +{{crit2damage}}
                                {{/crit2damage}}
                                {{#crit2effect}}
                                    <br>+{{crit2effect}}
                                {{/crit2effect}}
                            {{/rollWasCrit() r2}}
                        </span>
                    </div>
                {{/damage2}}
            {{/rollGreater() fullattack 1}}
            {{#rollGreater() fullattack 2}}
                <span class='across attack-label' data-i18n='3rd-attack'>3rd ATTACK</span>
                {{#r3}}
                    <div class='highlighted split r1name'>
                        {{#r3name}}
                            {{r3name}}
                        {{/r3name}}
                        {{^r3name}}
                            <span data-i18n='attack'>ATTACK</span>
                        {{/r3name}}
                    </div>
                    <div class='highlighted split roll'>
                        {{r3}}
                    </div>
                {{/r3}}
                {{#damage3}}
                    <div class='highlighted split r1name'>
                        {{#damage3type}}
                            {{damage3type}}
                        {{/damage3type}}
                        {{^damage3type}}
                            <span data-i18n='damage'>DAMAGE</span>
                        {{/damage3type}}
                    </div>
                    <div class='highlighted split roll'>
                        <span>{{damage3}}
                            {{#rollWasCrit() r3}}
                                {{#crit3damage}}
                                    +{{crit3damage}}
                                {{/crit3damage}}
                                {{#crit3effect}}
                                    <br>+{{crit3effect}}
                                {{/crit3effect}}
                            {{/rollWasCrit() r3}}
                        </span>
                    </div>
                {{/damage3}}
            {{/rollGreater() fullattack 2}}
            {{#rollGreater() fullattack 3}}
                <span class='across attack-label' data-i18n='4th-attack'>4th ATTACK</span>
                {{#r4}}
                    <div class='highlighted split r1name'>
                        {{#r4name}}
                            {{r4name}}
                        {{/r4name}}
                        {{^r4name}}
                            <span data-i18n='attack'>ATTACK</span>
                        {{/r4name}}
                    </div>
                    <div class='highlighted split roll'>
                        {{r4}}
                    </div>
                {{/r4}}
                {{#damage4}}
                    <div class='highlighted split r1name'>
                        {{#damage4type}}
                            {{damage4type}}
                        {{/damage4type}}
                        {{^damage4type}}
                            <span data-i18n='damage'>DAMAGE</span>
                        {{/damage4type}}
                    </div>
                    <div class='highlighted split roll'>
                        <span>{{damage4}}
                            {{#rollWasCrit() r4}}
                                {{#crit4damage}}
                                    +{{crit4damage}}
                                {{/crit4damage}}
                                {{#crit4effect}}
                                    <br>+{{crit4effect}}
                                {{/crit4effect}}
                            {{/rollWasCrit() r4}}
                        </span>
                    </div>
                {{/damage4}}
            {{/rollGreater() fullattack 3}}
            {{#rollGreater() fullattack 4}}
                <span class='across attack-label' data-i18n='5th-attack'>5th ATTACK</span>
                {{#r5}}
                    <div class='highlighted split r1name'>
                        {{#r5name}}
                            {{r5name}}
                        {{/r5name}}
                        {{^r5name}}
                            <span data-i18n='attack'>ATTACK</span>
                        {{/r5name}}
                    </div>
                    <div class='highlighted split roll'>
                        {{r5}}
                    </div>
                {{/r5}}
                {{#damage5}}
                    <div class='highlighted split r1name'>
                        {{#damage5type}}
                            {{damage5type}}
                        {{/damage5type}}
                        {{^damage5type}}
                            <span data-i18n='damage'>DAMAGE</span>
                        {{/damage5type}}
                    </div>
                    <div class='highlighted split roll'>
                        <span>{{damage5}}
                            {{#rollWasCrit() r5}}
                                {{#crit5damage}}
                                    +{{crit5damage}}
                                {{/crit5damage}}
                                {{#crit5effect}}
                                    <br>+{{crit5effect}}
                                {{/crit5effect}}
                            {{/rollWasCrit() r5}}
                        </span>
                    </div>
                {{/damage5}}
            {{/rollGreater() fullattack 4}}
            <span class='across attack-label'> </span>
            {{#targets}}
                <div class='highlighted split r1name'>
                    <span data-i18n='targets'>TARGETS</span>
                </div>
                <div class='highlighted split roll'>
                    {{targets}}
                </div>
            {{/targets}}
            {{#range}}
                <div class='highlighted split r1name'>
                    <span data-i18n='range'>RANGE</span>
                </div>
                <div class='highlighted split roll'>
                    {{range}}
                </div>
            {{/range}}
            {{#curr_ammo}}
                <div class='highlighted split r1name'>
                    {{^ammo_type}}
                        <span data-i18n='ammo'>AMMO</span>
                    {{/ammo_type}}
                    {{#ammo_type}}
                        {{ammo_type}}
                    {{/ammo_type}}
                </div>
                <div class='highlighted split roll'>
                    {{curr_ammo}}
                </div>
            {{/curr_ammo}}
            {{#notes}}
                <div class='highlighted across notes-row'>
                    <span class='notes' data-i18n='notes:'>NOTES:</span>{{notes}}
                </div>
            {{/notes}}
            {{#buttons0}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons0}}</span>
                </div>
            {{/buttons0}}
            {{#buttons1}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons1}}</span>
                </div>
            {{/buttons1}}
            {{#buttons2}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons2}}</span>
                </div>
            {{/buttons2}}
            {{#buttons3}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons3}}</span>
                </div>
            {{/buttons3}}
            {{#buttons4}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons4}}</span>
                </div>
            {{/buttons4}}
            {{#buttons5}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons5}}</span>
                </div>
            {{/buttons5}}
            {{#buttons6}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons6}}</span>
                </div>
            {{/buttons6}}
            {{#buttons7}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons7}}</span>
                </div>
            {{/buttons7}}
            {{#buttons8}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons8}}</span>
                </div>
            {{/buttons8}}
            {{#buttons9}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons9}}</span>
                </div>
            {{/buttons9}}
        </div>
        <div class='body always-glow border-left'></div>
        <div class='body always-glow border-top'></div>
        <div class='body always-glow border-right'></div>
        <div class='body always-glow border-bottom'></div>
        <div class='body always-glow border-bottom-left corner'></div>
        <div class='body always-glow border-top-right corner'></div>
        {{#rightbanner}}
            <div class='side-banner right'>
                <div>
                    <span>{{rightbanner}}</span>
                </div>
                <div class='header always-glow border-left'></div>
                <div class='header always-glow border-top'></div>
                <div class='header always-glow border-right'></div>
                <div class='header always-glow border-bottom-left corner'></div>
                <div class='header always-glow border-top-right corner'></div>
            </div>
        {{/rightbanner}}
        {{#name}}
            <div class='generic-footer'>
                <div>
                    {{#characterid}}
                        {{#name}}
                            [{{name}}](https://journal.roll20.net/character/{{characterid}})
                        {{/name}}
                    {{/characterid}}
                    {{^characterid}}
                        {{name}}
                    {{/characterid}}
                </div>
                <div class='footer always-glow border-left'></div>
                <div class='footer always-glow border-bottom'></div>
                <div class='footer always-glow border-right'></div>
                <div class='footer always-glow border-bottom-left corner'></div>
                <div class='footer always-glow border-top-right corner'></div>
            </div>
        {{/name}}
    </rolltemplate>
    <!--Ship roll templates
    &{template:sf_ship_attack} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{arc=@{arc}}} {{r1=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]@{misc}@{bonus}]]}} 
    {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{range=@{range} ^{hexes}}} {{class=^{@{class}}}} {{type=^{@{type}}}} {{curr_ammo=@{ammo}}} {{ammo_type=@{ammo_type}}} {{rightbanner=@{special}}} {{notes=@{description}}} @{attacher}
    -->
    <rolltemplate class="sheet-rolltemplate-sf_ship_attack">
        {{#title}}
            <div class='generic-header'>
                <div>
                    {{title}}
                </div>
                <div class='header always-glow border-left'></div>
                <div class='header always-glow border-top'></div>
                <div class='header always-glow border-right'></div>
                <div class='header always-glow border-bottom-left corner'></div>
                <div class='header always-glow border-top-right corner'></div>
            </div>
        {{/title}}
        {{#arc}}
            <div class='side-banner left'>
                <div>
                    {{arc}}
                </div>
                <div class='header always-glow border-left'></div>
                <div class='header always-glow border-top'></div>
                <div class='header always-glow border-right'></div>
                <div class='header always-glow border-bottom-left corner'></div>
                <div class='header always-glow border-top-right corner'></div>
            </div>
        {{/arc}}
        <div class='generic-body'>
            <span class='across attack-label' data-i18n='1st-attack'>1st ATTACK</span>
            {{#r1}}
                <div class='highlighted split r1name'>
                    {{#r1name}}
                        {{r1name}}
                    {{/r1name}}
                    {{^r1name}}
                        <span data-i18n='attack'>ATTACK</span>
                    {{/r1name}}
                </div>
                <div class='highlighted split roll'>
                    {{r1}}
                </div>
            {{/r1}}
            {{#damage1}}
                <div class='highlighted split r1name'>
                    {{#damage1type}}
                        {{damage1type}}
                    {{/damage1type}}
                    {{^damage1type}}
                        <span data-i18n='damage'>DAMAGE</span>
                    {{/damage1type}}
                </div>
                <div class='highlighted split roll'>
                    <span>{{damage1}}
                    {{#rollWasCrit() r1}}
                        {{#crit1damage}}
                            +{{crit1damage}}
                        {{/crit1damage}}
                        {{#crit1effect}}
                            <br>+{{crit1effect}}
                        {{/crit1effect}}
                    {{/rollWasCrit() r1}}
                    </span>
                </div>
            {{/damage1}}
            {{#range}}
                <div class='highlighted split r1name'>
                    <span data-i18n='range'>RANGE</span>
                </div>
                <div class='highlighted split roll'>
                    {{range}}
                </div>
            {{/range}}
            {{#class}}
                <div class='highlighted split r1name'>
                    <span data-i18n='class'>CLASS</span>
                </div>
                <div class='highlighted split roll'>
                    {{class}}
                </div>
            {{/class}}
            {{#type}}
                <div class='highlighted split r1name'>
                    <span data-i18n='type'>TYPE</span>
                </div>
                <div class='highlighted split roll'>
                    {{type}}
                </div>
            {{/type}}
            {{#curr_ammo}}
                <div class='highlighted split r1name'>
                    {{^ammo_type}}
                        <span data-i18n='ammo'>AMMO</span>
                    {{/ammo_type}}
                    {{#ammo_type}}
                        {{ammo_type}}
                    {{/ammo_type}}
                </div>
                <div class='highlighted split roll'>
                    {{curr_ammo}}
                </div>
            {{/curr_ammo}}
            {{#notes}}
                <div class='highlighted across notes-row'>
                    <span class='notes' data-i18n='notes:'>NOTES:</span>{{notes}}
                </div>
            {{/notes}}
            {{#buttons0}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons0}}</span>
                </div>
            {{/buttons0}}
            {{#buttons1}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons1}}</span>
                </div>
            {{/buttons1}}
            {{#buttons2}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons2}}</span>
                </div>
            {{/buttons2}}
            {{#buttons3}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons3}}</span>
                </div>
            {{/buttons3}}
            {{#buttons4}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons4}}</span>
                </div>
            {{/buttons4}}
            {{#buttons5}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons5}}</span>
                </div>
            {{/buttons5}}
            {{#buttons6}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons6}}</span>
                </div>
            {{/buttons6}}
            {{#buttons7}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons7}}</span>
                </div>
            {{/buttons7}}
            {{#buttons8}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons8}}</span>
                </div>
            {{/buttons8}}
            {{#buttons9}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons9}}</span>
                </div>
            {{/buttons9}}
        </div>
        <div class='body always-glow border-left'></div>
        <div class='body always-glow border-top'></div>
        <div class='body always-glow border-right'></div>
        <div class='body always-glow border-bottom'></div>
        <div class='body always-glow border-bottom-left corner'></div>
        <div class='body always-glow border-top-right corner'></div>
        {{#rightbanner}}
            <div class='side-banner right'>
                <div>
                    <span>{{rightbanner}}</span>
                </div>
                <div class='header always-glow border-left'></div>
                <div class='header always-glow border-top'></div>
                <div class='header always-glow border-right'></div>
                <div class='header always-glow border-bottom-left corner'></div>
                <div class='header always-glow border-top-right corner'></div>
            </div>
        {{/rightbanner}}
        {{#name}}
            <div class='generic-footer'>
                <div>
                    {{#characterid}}
                        {{#name}}
                            [{{name}}](https://journal.roll20.net/character/{{characterid}})
                        {{/name}}
                    {{/characterid}}
                    {{^characterid}}
                        {{name}}
                    {{/characterid}}
                </div>
                <div class='footer always-glow border-left'></div>
                <div class='footer always-glow border-bottom'></div>
                <div class='footer always-glow border-right'></div>
                <div class='footer always-glow border-bottom-left corner'></div>
                <div class='footer always-glow border-top-right corner'></div>
            </div>
        {{/name}}
    </rolltemplate>
    <!-- Spell Roll Templates -->
    <!-- @{whisper_state}&{template:sf_spell} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=@{name}}} {{level=[[@{level}d1}} {{activation}} {{duration=}} {{targets=}} {{range=}} {{saveflag=[[1d@{save_checkbox}]]}} {{savedc=[[@{dc}]]}} 
    {{savetype=@{save_type}}} {{effect=@{effect}}} {{saveeffect=@{save_effect}}} {{attackflag=[[1d@{attack_checkbox}]]}} 
    {{r1=[[1d20+@{bab}[BAB]+@{ability}[ABILITY]@{misc}@{bonus}]]}} {{damageflag=[[1d@{damage_checkbox}]]}} {{damagetype=@{type}}} 
    {{damage1=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} 
    {{crit1damage=[[@{damage_dice}+@{damage_ability}[ABILITY]@{damage_misc}]]}} {{crit1effect=@{crit_effect}}} 
    {{notes=@{description}}} -->
    <rolltemplate class="sheet-rolltemplate-sf_spell">
        {{#title}}
            <div class='generic-header'>
                <div>
                    {{title}}
                </div>
                <div class='header always-glow border-left'></div>
                <div class='header always-glow border-top'></div>
                <div class='header always-glow border-right'></div>
                <div class='header always-glow border-bottom-left corner'></div>
                <div class='header always-glow border-top-right corner'></div>
            </div>
        {{/title}}
        {{#rollGreater() level 0}}
            <div class='side-banner left'>
                <div>
                    <span data-i18n='level'>LEVEL </span>{{level}}
                </div>
                <div class='header always-glow border-left'></div>
                <div class='header always-glow border-top'></div>
                <div class='header always-glow border-right'></div>
                <div class='header always-glow border-bottom-left corner'></div>
                <div class='header always-glow border-top-right corner'></div>
            </div>
        {{/rollGreater() level 0}}
        <div class='generic-body'>
            {{#activation}}
                <div class='highlighted split r1name'>
                    <span data-i18n='activation'>ACTIVATION</span>
                </div>
                <div class='highlighted split roll'>
                    {{activation}}
                </div>
            {{/activation}}
            {{#duration}}
                <div class='highlighted split r1name'>
                    <span data-i18n='duration'>DURATION</span>
                </div>
                <div class='highlighted split roll'>
                    {{duration}}
                </div>
            {{/duration}}
            {{#targets}}
                <div class='highlighted split r1name'>
                    <span data-i18n='targets'>TARGETS</span>
                </div>
                <div class='highlighted split roll'>
                    {{targets}}
                </div>
            {{/targets}}
            {{#range}}
                <div class='highlighted split r1name'>
                    <span data-i18n='range'>RANGE</span>
                </div>
                <div class='highlighted split roll'>
                    {{range}}
                </div>
            {{/range}}
            {{#rollGreater() saveflag 0}}
                <div class='highlighted across notes-row'>
                    <span class='notes' data-i18n='full-effect:'>FULL EFFECT:</span> <span>{{effect}}</span>
                </div>
                <div class='highlighted split r1name'>
                    <span class='savetype'>{{savetype}} </span><span data-i18n='_save'> SAVE</span>
                </div>
                <div class='highlighted split roll'>
                    <span data-i18n='dc'>DC</span> <span>{{savedc}}</span>
                </div>
                <div class='highlighted across notes-row'>
                    <span class='notes' data-i18n='save-effect:'>SAVE EFFECT:</span> <span>{{saveeffect}}</span>
                </div>
            {{/rollGreater() saveflag 0}}
            {{#rollGreater() attackflag 0}}
                <span class='across attack-label' data-i18n='1st-attack'>1st ATTACK</span>
                {{#r1}}
                    <div class='highlighted split r1name'>
                        {{#r1name}}
                            {{r1name}}
                        {{/r1name}}
                        {{^r1name}}
                            <span data-i18n='attack'>ATTACK</span>
                        {{/r1name}}
                    </div>
                    <div class='highlighted split roll'>
                        {{r1}}
                    </div>
                {{/r1}}
            {{/rollGreater() attackflag 0}}
            {{#rollGreater() damageflag 0}}
                {{#^rollGreater() attackflag 0}}
                    <span class='across attack-label' data-i18n='1st-attack'>1st ATTACK</span>
                {{/^rollGreater() attackflag 0}}
                {{#damage1}}
                    <div class='highlighted split r1name'>
                        {{#damage1type}}
                            {{damage1type}}
                        {{/damage1type}}
                        {{^damage1type}}
                            <span data-i18n='damage'>DAMAGE</span>
                        {{/damage1type}}
                    </div>
                    <div class='highlighted split roll'>
                        {{damage1}}
                    </div>
                    {{#rollWasCrit() r1}}
                        {{#crit1effect}}
                            <div class='highlighted split r1name'>
                                <span data-i18n='crit-effect'>CRIT EFFECT</span>
                            </div>
                            <div class='highlighted split roll'>
                                {{crit1effect}}
                            </div>
                        {{/crit1effect}}
                        {{#crit1damage}}
                            <div class='highlighted split r1name'>
                                <span data-i18n='crit-damage'>CRIT DAMAGE</span>
                            </div>
                            <div class='highlighted split roll'>
                                {{crit1damage}}
                            </div>
                        {{/crit1damage}}
                    {{/rollWasCrit() r1}}
                {{/damage1}}
            {{/rollGreater() damageflag 0}}
            {{#rollGreater() fullattack 1}}
                <span class='across attack-label' data-i18n='2nd-attack'>2nd ATTACK</span>
                {{#rollGreater() attackflag 0}}
                    {{#r2}}
                        <div class='highlighted split r1name'>
                            {{#r2name}}
                                {{r2name}}
                            {{/r2name}}
                            {{^r2name}}
                                <span data-i18n='attack'>ATTACK</span>
                            {{/r2name}}
                        </div>
                        <div class='highlighted split roll'>
                            {{r2}}
                        </div>
                    {{/r2}}
                {{/rollGreater() attackflag 0}}
                {{#rollGreater() damageflag 0}}
                    {{#damage2}}
                    <div class='highlighted split r1name'>
                        {{#damage2type}}
                            {{damage2type}}
                        {{/damage2type}}
                        {{^damage2type}}
                            <span data-i18n='damage'>DAMAGE</span>
                        {{/damage2type}}
                    </div>
                    <div class='highlighted split roll'>
                        {{damage2}}
                    </div>
                        {{#rollWasCrit() r2}}
                            {{#crit2effect}}
                                <div class='highlighted split r1name'>
                                    <span data-i18n='crit-effect'>CRIT EFFECT</span>
                                </div>
                                <div class='highlighted split roll'>
                                    {{crit2effect}}
                                </div>
                            {{/crit2effect}}
                            {{#crit2damage}}
                                <div class='highlighted split r1name'>
                                    <span data-i18n='crit-damage'>CRIT DAMAGE</span>
                                </div>
                                <div class='highlighted split roll'>
                                    {{crit2damage}}
                                </div>
                            {{/crit2damage}}
                        {{/rollWasCrit() r2}}
                    {{/damage2}}
                {{/rollGreater() damageflag 0}}
            {{/rollGreater() fullattack 1}}
            {{#rollGreater() fullattack 2}}
                <span class='across attack-label' data-i18n='3rd-attack'>3rd ATTACK</span>
                {{#rollGreater() attackflag 0}}
                    {{#r3}}
                        <div class='highlighted split r1name'>
                            {{#r3name}}
                                {{r3name}}
                            {{/r3name}}
                            {{^r3name}}
                                <span data-i18n='attack'>ATTACK</span>
                            {{/r3name}}
                        </div>
                        <div class='highlighted split roll'>
                            {{r3}}
                        </div>
                    {{/r3}}
                {{/rollGreater() attackflag 0}}
                {{#rollGreater() damageflag 0}}
                    {{#damage3}}
                    <div class='highlighted split r1name'>
                        {{#damage3type}}
                            {{damage3type}}
                        {{/damage3type}}
                        {{^damage3type}}
                            <span data-i18n='damage'>DAMAGE</span>
                        {{/damage3type}}
                    </div>
                    <div class='highlighted split roll'>
                        {{damage3}}
                    </div>
                        {{#rollWasCrit() r3}}
                            {{#crit3effect}}
                                <div class='highlighted split r1name'>
                                    <span data-i18n='crit-effect'>CRIT EFFECT</span>
                                </div>
                                <div class='highlighted split roll'>
                                    {{crit3effect}}
                                </div>
                            {{/crit3effect}}
                            {{#crit3damage}}
                                <div class='highlighted split r1name'>
                                    <span data-i18n='crit-damage'>CRIT DAMAGE</span>
                                </div>
                                <div class='highlighted split roll'>
                                    {{crit3damage}}
                                </div>
                            {{/crit3damage}}
                        {{/rollWasCrit() r3}}
                    {{/damage3}}
                {{/rollGreater() damageflag 0}}
            {{/rollGreater() fullattack 2}}
            {{#rollGreater() fullattack 3}}
                <span class='across attack-label' data-i18n='4th-attack'>4th ATTACK</span>
                {{#rollGreater() attackflag 0}}
                    {{#r4}}
                        <div class='highlighted split r1name'>
                            {{#r4name}}
                                {{r4name}}
                            {{/r4name}}
                            {{^r4name}}
                                <span data-i18n='attack'>ATTACK</span>
                            {{/r4name}}
                        </div>
                        <div class='highlighted split roll'>
                            {{r4}}
                        </div>
                    {{/r4}}
                {{/rollGreater() attackflag 0}}
                {{#rollGreater() damageflag 0}}
                    {{#damage4}}
                    <div class='highlighted split r1name'>
                        {{#damage4type}}
                            {{damage4type}}
                        {{/damage4type}}
                        {{^damage4type}}
                            <span data-i18n='damage'>DAMAGE</span>
                        {{/damage4type}}
                    </div>
                    <div class='highlighted split roll'>
                        {{damage4}}
                    </div>
                        {{#rollWasCrit() r4}}
                            {{#crit4effect}}
                                <div class='highlighted split r1name'>
                                    <span data-i18n='crit-effect'>CRIT EFFECT</span>
                                </div>
                                <div class='highlighted split roll'>
                                    {{crit4effect}}
                                </div>
                            {{/crit4effect}}
                            {{#crit4damage}}
                                <div class='highlighted split r1name'>
                                    <span data-i18n='crit-damage'>CRIT DAMAGE</span>
                                </div>
                                <div class='highlighted split roll'>
                                    {{crit4damage}}
                                </div>
                            {{/crit4damage}}
                        {{/rollWasCrit() r4}}
                    {{/damage4}}
                {{/rollGreater() damageflag 0}}
            {{/rollGreater() fullattack 3}}
            {{#rollGreater() fullattack 4}}
                <span class='across attack-label' data-i18n='5th-attack'>5th ATTACK</span>
                {{#rollGreater() attackflag 0}}
                    {{#r5}}
                        <div class='highlighted split r1name'>
                            {{#r5name}}
                                {{r5name}}
                            {{/r5name}}
                            {{^r5name}}
                                <span data-i18n='attack'>ATTACK</span>
                            {{/r5name}}
                        </div>
                        <div class='highlighted split roll'>
                            {{r5}}
                        </div>
                    {{/r5}}
                {{/rollGreater() attackflag 0}}
                {{#rollGreater() damageflag 0}}
                    {{#damage5}}
                    <div class='highlighted split r1name'>
                        {{#damage5type}}
                            {{damage5type}}
                        {{/damage5type}}
                        {{^damage5type}}
                            <span data-i18n='damage'>DAMAGE</span>
                        {{/damage5type}}
                    </div>
                    <div class='highlighted split roll'>
                        {{damage5}}
                    </div>
                        {{#rollWasCrit() r5}}
                            {{#crit5effect}}
                                <div class='highlighted split r1name'>
                                    <span data-i18n='crit-effect'>CRIT EFFECT</span>
                                </div>
                                <div class='highlighted split roll'>
                                    {{crit5effect}}
                                </div>
                            {{/crit5effect}}
                            {{#crit5damage}}
                                <div class='highlighted split r1name'>
                                    <span data-i18n='crit-damage'>CRIT DAMAGE</span>
                                </div>
                                <div class='highlighted split roll'>
                                    {{crit5damage}}
                                </div>
                            {{/crit5damage}}
                        {{/rollWasCrit() r5}}
                    {{/damage5}}
                {{/rollGreater() damageflag 0}}
            {{/rollGreater() fullattack 4}}
            <span class='across attack-label'> </span>
            {{#notes}}
                <div class='highlighted across notes-row'>
                    <span class='notes' data-i18n='notes:'>NOTES:</span> {{notes}}
                </div>
            {{/notes}}
            {{#buttons0}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons0}}</span>
                </div>
            {{/buttons0}}
            {{#buttons1}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons1}}</span>
                </div>
            {{/buttons1}}
            {{#buttons2}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons2}}</span>
                </div>
            {{/buttons2}}
            {{#buttons3}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons3}}</span>
                </div>
            {{/buttons3}}
            {{#buttons4}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons4}}</span>
                </div>
            {{/buttons4}}
            {{#buttons5}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons5}}</span>
                </div>
            {{/buttons5}}
            {{#buttons6}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons6}}</span>
                </div>
            {{/buttons6}}
            {{#buttons7}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons7}}</span>
                </div>
            {{/buttons7}}
            {{#buttons8}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons8}}</span>
                </div>
            {{/buttons8}}
            {{#buttons9}}
                <div class='highlighted across notes-row'>
                    <span>{{buttons9}}</span>
                </div>
            {{/buttons9}}
        </div>
        <div class='body always-glow border-left'></div>
        <div class='body always-glow border-top'></div>
        <div class='body always-glow border-right'></div>
        <div class='body always-glow border-bottom'></div>
        <div class='body always-glow border-bottom-left corner'></div>
        <div class='body always-glow border-top-right corner'></div>
        {{#rightbanner}}
            <div class='side-banner right'>
                <div>
                    <span>{{rightbanner}}</span>
                </div>
                <div class='header always-glow border-left'></div>
                <div class='header always-glow border-top'></div>
                <div class='header always-glow border-right'></div>
                <div class='header always-glow border-bottom-left corner'></div>
                <div class='header always-glow border-top-right corner'></div>
            </div>
        {{/rightbanner}}
        {{#name}}
            <div class='generic-footer'>
                <div>
                    {{#characterid}}
                        {{#name}}
                            [{{name}}](https://journal.roll20.net/character/{{characterid}})
                        {{/name}}
                    {{/characterid}}
                    {{^characterid}}
                        {{name}}
                    {{/characterid}}
                </div>
                <div class='footer always-glow border-left'></div>
                <div class='footer always-glow border-bottom'></div>
                <div class='footer always-glow border-right'></div>
                <div class='footer always-glow border-bottom-left corner'></div>
                <div class='footer always-glow border-top-right corner'></div>
            </div>
        {{/name}}
    </rolltemplate>
</div>
<script type='text/worker'>
    /* ---- BEGIN: TheAaronSheet.js ---- */
    // Github:   https://github.com/shdwjk/TheAaronSheet/blob/master/TheAaronSheet.js
    // By:       The Aaron, Arcane Scriptomancer
    // Contact:  https://app.roll20.net/users/104025/the-aaron
    var TAS = TAS || (function(){
       'use strict';
    
        var version ='0.2.4',
            lastUpdate = 1457098091,
    
            loggingSettings = {
                debug: {
                    key:    'debug',
                    title:  'Starfinder-DEBUG',
                    color: {
                        bgLabel:'#7732A2',
                        label:  '#F2EF40',
                        bgText: '#FFFEB7',
                        text:   '#7732A2'
                    }
                },
                error: {
                    key:    'error',
                    title:  'Starfinder-Error',
                    color: {
                        bgLabel:'#C11713',
                        label:  'white',
                        bgText: '#C11713',
                        text:   'white'
                    }
                },
                warn: {
                    key:    'warn',
                    title:  'Starfinder-Warning',
                    color: {
                        bgLabel:'#F29140',
                        label:  'white',
                        bgText: '#FFD8B7',
                        text:   'black'
                    }
                },
                info: {
                    key:    'info',
                    title:  'Starfinder-Info',
                    color: {
                        bgLabel:'#413FA9',
                        label:  'white',
                        bgText: '#B3B2EB',
                        text:   'black'
                    }
                },
                notice: {
                    key:    'notice',
                    title:  'Starfinder-Notice',
                    color: {
                        bgLabel:'#33C133',
                        label:  'white',
                        bgText: '#ADF1AD',
                        text:   'black'
                    }
                },
                log: {
                    key:    'log',
                    title:  'Starfinder-Log',
                    color: {
                        bgLabel:'#f2f240',
                        label:  'black',
                        bgText: '#ffff90',
                        text:   'black'
                    }
                },
                callstack: {
                    key:    'TAS',
                    title:  'Starfinder-function',
                    color: {
                        bgLabel:'#413FA9',
                        label:  'white',
                        bgText: '#B3B2EB',
                        text:   'black'
                    }
                },
                callstack_async: {
                    key:    'TAS',
                    title:  'Starfinder-ASYNC CALL',
                    color: {
                        bgLabel:'#413FA9',
                        label:  'white',
                        bgText: '#413FA9',
                        text:   'white'
                    }
                },
                TAS: {
                    key:    'TAS',
                    title:  'Starfinder-TAS',
                    color: {
                        bgLabel:'grey',
                        label:  'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)',
                        bgText: 'grey',
                        text:   'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)'
                    }
                }
            },
    
    
            config = {
                debugMode: false,
                logging: {
                    log: true,
                    notice: true,
                    info: true,
                    warn: true,
                    error: true,
                    debug: false
                }
            },
    
            callstackRegistry = [],
    queuedUpdates = {}, //< Used for delaying saves till the last momment.
    
        complexType = function(o){
            switch(typeof o){
                case'string':
                    return'string';
                case'boolean':
                    return'boolean';
                case'number':
                    return (_.isNaN(o) ?'NaN' : (o.toString().match(/\./) ?'decimal' :'integer'));
                case'function':
                    return'function:'+(o.name ? o.name+'()' :'(anonymous)');
                case'object':
                    return (_.isArray(o) ?'array' : (_.isArguments(o) ?'arguments' : ( _.isNull(o) ?'null' :'object')));
                default:
                    return typeof o;
            }
        },
    
    dataLogger = function(primaryLogger,secondaryLogger,data){
            _.each(data,function(m){
                var type = complexType(m);
                switch(type){
                    case'string':
                        primaryLogger(m);
                        break;
                    case'undefined':
                    case'null':
                    case'NaN':
                        primaryLogger('['+type+']');
                        break;
                    case'number':
                    case'not a number':
                    case'integer':
                    case'decimal':
                    case'boolean':
                        primaryLogger('['+type+']:'+m);
                        break;
                    default:
                        primaryLogger('['+type+']:=========================================');
                        secondaryLogger(m);
                        primaryLogger('=========================================================');
                        break;
                }
            });
    },
    
    
        colorLog = function(options){
            var coloredLoggerFunction,
                key = options.key,
                label = options.title ||'TAS',
                lBGColor = (options.color && options.color.bgLabel) ||'blue',
                lTxtColor = (options.color && options.color.label) ||'white',
                mBGColor = (options.color && options.color.bgText) ||'blue',
                mTxtColor = (options.color && options.color.text) ||'white';
    
            coloredLoggerFunction = function(message){
                console.log(
                   '%c'+label+': %c'+message +'',
                   'background-color:'+lBGColor+';color:'+lTxtColor+'; font-weight:bold;',
                   'background-color:'+mBGColor+';color:'+mTxtColor+';'
                ); 
            };
            return function(){
                if('TAS'===key || config.logging[key]){
                   dataLogger(coloredLoggerFunction,function(m){console.log(m);},_.toArray(arguments)); 
                }
            };
        },
    
        logDebug  = colorLog(loggingSettings.debug),
        logError  = colorLog(loggingSettings.error),
        logWarn   = colorLog(loggingSettings.warn),
        logInfo   = colorLog(loggingSettings.info),
        logNotice = colorLog(loggingSettings.notice),
        logLog    = colorLog(loggingSettings.log),
        log       = colorLog(loggingSettings.TAS),
        logCS     = colorLog(loggingSettings.callstack),
        logCSA    = colorLog(loggingSettings.callstack_async),
    
        registerCallstack = function(callstack,label){
            var idx=_.findIndex(callstackRegistry,function(o){
                return (_.difference(o.stack,callstack).length === _.difference(callstack,o.stack).length) &&
                    _.difference(o.stack,callstack).length === 0 &&
                    o.label === label;
            });
            if(-1 === idx){
                idx=callstackRegistry.length;
                callstackRegistry.push({
                    stack: callstack,
                    label: label
                });
            }
            return idx;
        },
    
        setConfigOption = function(options){
            var newconf =_.defaults(options,config);
            newconf.logging=_.defaults(
                (options && options.logging)||{},
                config.logging
            );
            config=newconf;
        },
        
        debugMode = function(){
            config.logging.debug=true;
            config.debugMode = true;
        },
    
        getCallstack = function(){
            var e = new Error('dummy'),
                stack = _.map(_.rest(e.stack.replace(/^[^\(]+?[\n$]/gm,'')
                .replace(/^\s+at\s+/gm,'')
                .replace(/^Object.<anonymous>\s*\(/gm,'{anonymous}()@')
                .split('\n')),function(l){
                    return l.replace(/\s+.*$/,'');
                });
            return stack;
        },
        logCallstackSub = function(cs){
            var matches, csa;
            _.find(cs,function(line){
                matches = line.match(/TAS_valueSTACK_(\d+)/);
                if(matches){
                   csa=callstackRegistry[matches[1]];
                   logCSA('===================='+(csa.label ?'>'+csa.label+' <' :'')+'====================');
                   logCallstackSub(csa.stack);
                   return true;
                } 
                logCS(line);
                return false;
            });
        },
        logCallstack = function(){
            var cs;
            if(config.debugMode){
                cs = getCallstack();
                cs.shift();
                log('==============================> CALLSTACK <==============================');
                logCallstackSub(cs);
                log('=========================================================================');
            }
        },
    
    
        wrapCallback = function (label, callback, context){
            var callstack;
            if('function' === typeof label){
                context=callback;
                callback=label;
                label=undefined;
            }
            if(!config.debugMode){
                return (function(cb,ctx){
                    return function(){
                        cb.apply(ctx||{},arguments);
                    };
                }(callback,context));
            }
            
            callstack = getCallstack();
            callstack.shift();
            
            return (function(cb,ctx,cs,lbl){
                var ctxref=registerCallstack(cs,lbl);
    
                /*jshint -W054 */
                return new Function('cb','ctx','TASlog',
                    "return function TAS_valueSTACK_"+ctxref+"(){"+
                        "TASlog('Entering:'+(cb.name||'(anonymous function)'));"+
                        "cb.apply(ctx||{},arguments);"+
                        "TASlog('Exiting:'+(cb.name||'(anonymous function)'));"+
                    "};")(cb,ctx,log);
                /*jshint +W054 */
            }(callback,context,callstack,label));
        },
    
    
        prepareUpdate = function( attribute, value ){
            queuedUpdates[attribute]=value;
        },
    
        applyQueuedUpdates = function() {
          setAttrs(queuedUpdates);
          queuedUpdates = {};
        },
    
    namesFromArgs = function(args,base){
            return _.chain(args)
                .reduce(function(memo,attr){
                    if('string' === typeof attr) {
                        memo.push(attr);
                    } else if(_.isArray(args) || _.isArguments(args)){
                        memo = namesFromArgs(attr,memo);
                    }
                    return memo;
                },(_.isArray(base) && base) || [])
                .uniq()
                .value();
    },
    
    addId = function(obj,value){
    Object.defineProperty(obj,'id',{
    value: value,
    writeable: false,
    enumerable: false
    });
    },
    
    addProp = function(obj,prop,value,fullname){
    (function(){
                var pname=(_.contains(['S','F','I','D'],prop) ?'_'+prop : prop),
       full_pname = fullname || prop,
                    pvalue=value;
    
                _.each(['S','I','F'],function(p){
                    if( !_.has(obj,p)){
                        Object.defineProperty(obj, p, {
                            value: {},
                            enumerable: false,
                            readonly: true
                        });
                    }
                });
                if( !_.has(obj,'D')){
                    Object.defineProperty(obj,'D', {
                        value: _.reduce(_.range(10),function(m,d){
                                Object.defineProperty(m, d, {
                                    value: {},
                                    enumerable: true,
                                    readonly: true
                                });
                                return m;
                            },{}),
                        enumerable: false,
                        readonly: true
                    });
                }
    
    
                // Raw value
    Object.defineProperty(obj, pname, {
                    enumerable: true,
    set: function(v){
                        if(v!==pvalue) {
                            pvalue=v;
                            prepareUpdate(full_pname,v);
                        }
    },
    get: function(){
    return pvalue;
    }
    });
                
                // string value
    Object.defineProperty(obj.S, pname, {
                    enumerable: true,
    set: function(v){
                        var val=v.toString();
                        if(val !== pvalue) {
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
    },
    get: function(){
    return pvalue.toString();
    }
    });
    
                // int value
    Object.defineProperty(obj.I, pname, {
                    enumerable: true,
    set: function(v){
                        var val=parseInt(v,10) || 0;
                        if(val !== pvalue){
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
    },
    get: function(){
    return parseInt(pvalue,10) || 0;
    }
    });
    
                // float value
    Object.defineProperty(obj.F, pname, {
                    enumerable: true,
    set: function(v){
                        var val=parseFloat(v) || 0;
                        if(val !== pvalue) {
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
    },
    get: function(){
    return parseFloat(pvalue) || 0;
    }
    });
                _.each(_.range(10),function(d){
                    Object.defineProperty(obj.D[d], pname, {
                        enumerable: true,
                        set: function(v){
                            var val=(parseFloat(v) || 0).toFixed(d);
                            if(val !== pvalue){
                                pvalue=val;
                                prepareUpdate(full_pname,val);
                            }
                        },
                        get: function(){
                            return (parseFloat(pvalue) || 0).toFixed(d);
                        }
                    });
                });
    
    }());
    },
   
    repeating = function( section ) {
    return (function(s){
    var sectionName = s,
    attrNames = [],
    fieldNames = [],
    operations = [],
                    after = [],
   
    repAttrs = function TAS_Repeating_Attrs(){
    attrNames = namesFromArgs(arguments,attrNames);
    return this;
    },
    repFields = function TAS_Repeating_Fields(){
    fieldNames = namesFromArgs(arguments,fieldNames);
    return this;
    },
    repReduce = function TAS_Repeating_Reduce(func, initial, final, context) { 
    operations.push({
                        type:'reduce',
                        func: (func && _.isFunction(func) && func) || _.noop,
                        memo: (_.isUndefined(initial) && 0) || initial,
                        final: (final && _.isFunction(final) && final) || _.noop,
                        context: context || {}
                    });
    return this;
    },
    repMap = function TAS_Repeating_Map(func, final, context) {
    operations.push({
                        type:'map',
                        func: (func && _.isFunction(func) && func) || _.noop,
                        final: (final && _.isFunction(final) && final) || _.noop,
                        context: context || {}
                    });
    return this;
    },
                repEach = function TAS_Repeating_Each(func, final, context) {
    operations.push({
                        type:'each',
                        func: (func && _.isFunction(func) && func) || _.noop,
                        final: (final && _.isFunction(final) && final) || _.noop,
                        context: context || {}
                    });
    return this;
                },
                repTap = function TAS_Repeating_Tap(final, context) {
    operations.push({
                        type:'tap',
                        final: (final && _.isFunction(final) && final) || _.noop,
                        context: context || {}
                    });
    return this;
                },
                repAfter = function TAS_Repeating_After(callback,context) {
    after.push({
                        callback: (callback && _.isFunction(callback) && callback) || _.noop,
                        context: context || {}
                    });
    return this;
                },
    repExecute = function TAS_Repeating_Execute(callback,context){
    var rowSet = {},
    attrSet = {},
    fieldIds = [],
    fullFieldNames = [];
    
                    repAfter(callback,context);
    
    // call each operation per row.
    // call each operation's final
    getSectionIDs("repeating_"+sectionName,function(ids){
    fieldIds = ids;
    fullFieldNames = _.reduce(fieldIds,function(memo,id){
    return memo.concat(_.map(fieldNames,function(name){
    return'repeating_'+sectionName+'_'+id+'_'+name;  
    }));
    },[]);
    getAttrs( _.uniq(attrNames.concat(fullFieldNames)), function(values){
    _.each(attrNames,function(aname){
    if(values.hasOwnProperty(aname)){
    addProp(attrSet,aname,values[aname]);
    }
    });
    
    rowSet = _.reduce(fieldIds,function(memo,id){
    var r={};
    addId(r,id);
    _.each(fieldNames,function(name){
    var fn ='repeating_'+sectionName+'_'+id+'_'+name;  
    addProp(r,name,values[fn],fn);
    });
    
    memo[id]=r;
    
    return memo;
    },{});
    
                            _.each(operations,function(op){
                                var res;
                                switch(op.type){
                                    case'tap':
                                        _.bind(op.final,op.context,rowSet,attrSet)();
                                        break;
    
                                    case'each':
                                        _.each(rowSet,function(r){
                                            _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                        });
                                        _.bind(op.final,op.context,rowSet,attrSet)();
                                        break;
    
                                    case'map':
                                        res = _.map(rowSet,function(r){
                                            return _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                        });
                                        _.bind(op.final,op.context,res,rowSet,attrSet)();
                                        break;
    
                                    case'reduce':
                                        res = op.memo;
                                        _.each(rowSet,function(r){
                                            res = _.bind(op.func,op.context,res,r,attrSet,r.id,rowSet)();
                                        });
                                        _.bind(op.final,op.context,res,rowSet,attrSet)();
                                        break;
                                }
                            });
    
                            // finalize attrs
                            applyQueuedUpdates();
                            _.each(after,function(op){
                                _.bind(op.callback,op.context)();
                            });
    });
    });
    };
   
    return {
    attrs: repAttrs,
    attr: repAttrs,
    
    column: repFields,
    columns: repFields,
    field: repFields,
    fields: repFields,
    
    reduce: repReduce,
    inject: repReduce,
    foldl: repReduce,
    
    map: repMap,
    collect: repMap,
    
    each: repEach,
                    forEach: repEach,
    
                    tap: repTap,
                   'do': repTap,
    
    after: repAfter,
    last: repAfter,
    done: repAfter,
    
    execute: repExecute,
    go: repExecute,
    run: repExecute
    };
    }(section));
    },
    
    
        repeatingSimpleSum = function(section, field, destination){
            repeating(section)
                .attr(destination)
                .field(field)
                .reduce(function(m,r){
                    return m + (r.F[field]);
                },0,function(t,r,a){
                    a.S[destination]=t;
                })
                .execute();
        };
    
    console.log('%c..*`*..*`*.  The Aaron Sheet  v'+version+'  .*`*..*`*..','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
    console.log('%c..*`*..*`*.  Last update:'+(new Date(lastUpdate*1000))+'  .*`*..*`*..','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
    
    
        return {
            /* Repeating Sections */
            repeatingSimpleSum: repeatingSimpleSum,
    repeating: repeating,
    
            /* Configuration */
            config: setConfigOption,
    
            /* Debugging */
            callback: wrapCallback,
            callstack: logCallstack,
            debugMode: debugMode,
            _fn: wrapCallback,
    
            /* Logging */
            debug: logDebug,
            error: logError,
            warn: logWarn,
            info: logInfo,
            notice: logNotice,
            log: logLog
        };
    }());
    
    /* ---- END: TheAaronSheet.js ---- */
    /*start starfinder.js*/
    var starfinder = starfinder || (function(){
       'use strict';
        var version = 0.041518422490,
            sheetAttributes = [
                //Class & Character attributes
               'character_name','character_id','bab','character_level','race',
               'class_1_name','class_2_name','class_3_name','class_4_name','class_5_name',
               'class_1_level','class_2_level','class_3_level','class_4_level','class_5_level','class_1_sp','class_2_sp',
               'class_3_sp','class_4_sp','class_5_sp','class_1_hp','class_2_hp','class_3_hp','class_4_hp','class_5_hp',
               'class_1_bab','class_2_bab','class_3_bab','class_4_bab','class_5_bab',
               'class_1_fort','class_2_fort','class_3_fort','class_4_fort','class_5_fort',
               'class_1_ref','class_2_ref','class_3_ref','class_4_ref','class_5_ref',
               'class_1_will','class_2_will','class_3_will','class_4_will','class_5_will',
               'class_1_ability','class_2_ability','class_3_ability','class_4_ability','class_5_ability',
               'class_1_skills','class_2_skills','class_3_skills','class_4_skills','class_5_skills',
               'class_1_casting_ability','class_2_casting_ability','class_3_casting_ability','class_4_casting_ability','class_5_casting_ability',
               'class_1_spells','class_2_spells','class_3_spells','class_4_spells','class_5_spells','is_caster',
               'class_1_spell_progression','class_2_spell_progression','class_3_spell_progression','class_4_spell_progression','class_5_spell_progression',
               'char_max_spell','race_hp','cr',
                //ability score attributes
               'strength','dexterity','constitution','intelligence','wisdom','charisma','strength_penalty','dexterity_penalty','constitution_penalty',
               'strength_base','dexterity_base','constitution_base','intelligence_base','wisdom_base','charisma_base',
               'intelligence_penalty','wisdom_penalty','charisma_penalty','strength_drain','dexterity_drain','constitution_drain','intelligence_drain',
               'wisdom_drain','charisma_drain','strength_mod','dexterity_mod','constitution_mod','intelligence_mod','wisdom_mod','charisma_mod',
                //Initiative attributes
               'initiative_ability','initiative',
                //AC attributes
               'eac','kac','cmd','eac_armor','kac_armor','eac_ability','kac_ability',
                //Save attributess
               'fort','ref','will','fort_base','ref_base','will_base','fort_ability','ref_ability','will_ability',
                //Skill attributes
               'skill_points_max',
               'acrobatics','athletics','bluff','computers','culture','diplomacy','disguise','engineering','intimidate','life_science','medicine','mysticism',
               'perception','physical_science','piloting','sense_motive','sleight_of_hand','stealth','survival','acrobatics_ability','athletics_ability',
               'bluff_ability','computers_ability','culture_ability','diplomacy_ability','disguise_ability','engineering_ability','intimidate_ability',
               'life_science_ability','medicine_ability','mysticism_ability','perception_ability','physical_science_ability','piloting_ability',
               'sense_motive_ability','sleight_of_hand_ability','stealth_ability','survival_ability','acrobatics_ranks','athletics_ranks','bluff_ranks',
               'computers_ranks','culture_ranks','diplomacy_ranks','disguise_ranks','engineering_ranks','intimidate_ranks','life_science_ranks',
               'medicine_ranks','mysticism_ranks','perception_ranks','physical_science_ranks','piloting_ranks','sense_motive_ranks','sleight_of_hand_ranks',
               'stealth_ranks','survival_ranks','acrobatics_class_skill','athletics_class_skill','bluff_class_skill','computers_class_skill',
               'culture_class_skill','diplomacy_class_skill','disguise_class_skill','engineering_class_skill','intimidate_class_skill',
               'life_science_class_skill','medicine_class_skill','mysticism_class_skill','perception_class_skill','physical_science_class_skill',
               'piloting_class_skill','sense_motive_class_skill','sleight_of_hand_class_skill','stealth_class_skill','survival_class_skill',
               'acrobatics_acp','athletics_acp','bluff_acp','computers_acp','culture_acp','diplomacy_acp','disguise_acp','engineering_acp','intimidate_acp','life_science_acp','medicine_acp','mysticism_acp',
               'perception_acp','physical_science_acp','piloting_acp','sense_motive_acp','sleight_of_hand_acp','stealth_acp','survival_acp',
                //Health attributes
               'sp','hp','rp','temp_hp','sp_max','hp_max','rp_max','temp_hp_max',
                //Item attributes
               'wealth','carried_bulk','encumber_bulk','overburden_bulk',
                //sheet setting attributes
               'resolve_source','stackable_buffs','sheet_type','half_specializations','drone'
            ],
            repeatingAttributes = [
                {
                    section:'item',
                    fields:['name','bulk','cost','quantity','mods','equipped']
                },
                {
                    section:'attack',
                    fields:['ability','bonus','damage_dice','damage_ability','damage_bonus','level','bonus',
                           'type','total','damage_total','proficiency','category','range','name','engagement_range','bab']
                },
                {
                    section:'profession',
                    fields:['ranks','class_skill','ability','acp','name']
                },
                {
                    section:'buff',
                    fields:['mods','toggle','range','name']
                },
                {
                    section:'ability',
                    fields:['mods','toggle','frequency','source','uses_max_base','attack_bonus','range','name','attack_ability','damage_ability','attack_type','save_ability','dc_base']
                },
                {
                    section:'spell',
                    fields:['source','attack_bonus','attack_ability','damage_ability','range','name','attack_type','save_ability','level','dc_base']
                },
            ],
            repeatingShipAttributes = [
                {
                    section:'attack',
                    fields:['pcu','bp','powered']
                },
                {
                    section:'system',
                    fields:['pcu','bp','powered','comp_bonus','purpose','shields','armor','countermeasure']
                },
            ],
            skillList=[
               'acrobatics',
               'athletics',
               'bluff',
               'computers',
               'culture',
               'diplomacy',
               'disguise',
               'engineering',
               'intimidate',
               'life_science',
               'medicine',
               'mysticism',
               'profession',
               'perception',
               'physical_science',
               'piloting',
               'sense_motive',
               'sleight_of_hand',
               'stealth',
               'survival'
            ],
            attributeObjs=[
                /*
                {
                    repeating:'section'/false,
                    attr:'attribute_name',
                    numAdds: integer,
                    attrAdds: [],
                    addlBonus: [],
                    ability:'ability_attribute',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:false,
                    attr:'strength',
                    numAdds: 0,
                    attrAdds: ['strength_base','strength_drain','strength_penalty'],
                    multAdds: [1,-1,0.5],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc',
                },
                */
                {
                    repeating:false,
                    attr:'dexterity',
                    numAdds: 0,
                    attrAdds: ['dexterity_base','dexterity_drain'],
                    multAdds: [1,-1],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'constitution',
                    numAdds: 0,
                    attrAdds: ['constitution_base','constitution_drain'],
                    multAdds: [1,-1],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'intelligence',
                    numAdds: 0,
                    attrAdds: ['intelligence_base','intelligence_drain'],
                    multAdds: [1,-1],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'wisdom',
                    numAdds: 0,
                    attrAdds: ['wisdom_base','wisdom_drain'],
                    multAdds: [1,-1],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'charisma',
                    numAdds: 0,
                    attrAdds: ['charisma_base','charisma_drain'],
                    multAdds: [1,-1],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'strength_mod',
                    numAdds: -5,
                    attrAdds: ['strength','strength_penalty'],
                    multAdds: [0.5,0.5],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:false,
                    attr:'dexterity_mod',
                    numAdds: -5,
                    attrAdds: ['dexterity','dexterity_penalty'],
                    multAdds: [0.5,0.5],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:false,
                    attr:'constitution_mod',
                    numAdds: -5,
                    attrAdds: ['constitution','constitution_penalty'],
                    multAdds: [0.5,0.5],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:false,
                    attr:'intelligence_mod',
                    numAdds: -5,
                    attrAdds: ['intelligence','intelligence_penalty'],
                    multAdds: [0.5,0.5],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:false,
                    attr:'wisdom_mod',
                    numAdds: -5,
                    attrAdds: ['wisdom','wisdom_penalty'],
                    multAdds: [0.5,0.5],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:false,
                    attr:'charisma_mod',
                    numAdds: -5,
                    attrAdds: ['charisma','charisma_penalty'],
                    multAdds: [0.5,0.5],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:false,
                    attr:'sp_max',
                    numAdds: 0,
                    attrAdds: ['constitution_mod','class_1_sp','class_2_sp','class_3_sp','class_4_sp','class_5_sp'],
                    multAdds:['character_level','class_1_level','class_2_level','class_3_level','class_4_level','class_5_level'],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change'
                },
                {
                    repeating:false,
                    attr:'hp_max',
                    numAdds: 0,
                    attrAdds: ['class_1_hp','class_2_hp','class_3_hp','class_4_hp','class_5_hp','race_hp'],
                    multAdds:['class_1_level','class_2_level','class_3_level','class_4_level','class_5_level',1],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change'
                },
                {
                    repeating:false,
                    attr:'rp_max',
                    numAdds:0,
                    attrAdds:[],
                    ability:'abi',
                    moddable:'_change'
                },
                {
                    repeating:false,
                    attr:'temp_hp_max',
                    numAdds: 0,
                    attrAdds: [],
                    multAdds:[],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change'
                },
                {
                    attr:'eac_armor',
                    numAdds:0,
                    attrAdds:[],
                    addlBonus: ['armor'],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change'
                },
                {
                    attr:'kac_armor',
                    numAdds:0,
                    attrAdds:[],
                    addlBonus: ['armor'],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change'
                },
                {
                    repeating:false,
                    attr:'eac',
                    numAdds:10,
                    attrAdds:['eac_armor'],
                    multAdds:[1],
                    ability:'eac_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change'
                },
                {
                    repeating:false,
                    attr:'kac',
                    numAdds:10,
                    attrAdds:['kac_armor'],
                    multAdds:[1],
                    ability:'kac_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change'
                },
                {
                    repeating:false,
                    attr:'cmd',
                    numAdds:8,
                    attrAdds:['kac'],
                    multAdds:[1],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change'
                },
                {
                    repeating:false,
                    attr:'fort',
                    numAdds:0,
                    attrAdds:['fort_base'],
                    multAdds:[1],
                    ability:'fort_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'ref',
                    numAdds:0,
                    attrAdds:['ref_base'],
                    multAdds:[1],
                    ability:'ref_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'will',
                    numAdds:0,
                    attrAdds:['will_base'],
                    multAdds:[1],
                    ability:'will_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'initiative',
                    numAdds:0,
                    attrAdds:[],
                    ability:'initiative_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'acrobatics',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['acrobatics_ranks','acrobatics_class_skill'],
                    multAdds:[1,1],
                    ability:'acrobatics_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'athletics',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['athletics_ranks','athletics_class_skill'],
                    multAdds:[1,1],
                    ability:'athletics_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'bluff',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['bluff_ranks','bluff_class_skill'],
                    multAdds:[1,1],
                    ability:'bluff_ability',

                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'computers',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['computers_ranks','computers_class_skill'],
                    multAdds:[1,1],
                    ability:'computers_ability',

                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'culture',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['culture_ranks','culture_class_skill'],
                    multAdds:[1,1],
                    ability:'culture_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'diplomacy',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['diplomacy_ranks','diplomacy_class_skill'],
                    multAdds:[1,1],
                    ability:'diplomacy_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'disguise',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['disguise_ranks','disguise_class_skill'],
                    multAdds:[1,1],
                    ability:'disguise_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'engineering',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['engineering_ranks','engineering_class_skill'],
                    multAdds:[1,1],
                    ability:'engineering_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'intimidate',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['intimidate_ranks','intimidate_class_skill'],
                    multAdds:[1,1],
                    ability:'intimidate_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'life_science',
                    numAdds:0,
                    attrAdds:['life_science_ranks','life_science_class_skill'],
                    multAdds:[1,1],
                    ability:'life_science_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'medicine',
                    numAdds:0,
                    attrAdds:['medicine_ranks','medicine_class_skill'],
                    multAdds:[1,1],
                    ability:'medicine_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'mysticism',
                    numAdds:0,
                    attrAdds:['mysticism_ranks','mysticism_class_skill'],
                    multAdds:[1,1],
                    ability:'mysticism_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'perception',
                    numAdds:0,
                    attrAdds:['perception_ranks','perception_class_skill'],
                    multAdds:[1,1],
                    ability:'perception_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'physical_science',
                    numAdds:0,
                    attrAdds:['physical_science_ranks','physical_science_class_skill'],
                    multAdds:[1,1],
                    ability:'physical_science_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'piloting',
                    numAdds:0,
                    attrAdds:['piloting_ranks','piloting_class_skill'],
                    multAdds:[1,1],
                    ability:'piloting_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:'profession',
                    isSkill:true,
                    attr:'profession',
                    numAdds:0,
                    attrAdds:[],
                    repeatAdds:['ranks','class_skill'],
                    ability:'ability',
                    repeatTextAdds:[],
                    textAdds:[],
                    moddable:'change',
                    rollTime:'misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'sense_motive',
                    numAdds:0,
                    attrAdds:['sense_motive_ranks','sense_motive_class_skill'],
                    multAdds:[1,1],
                    ability:'sense_motive_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'sleight_of_hand',
                    numAdds:0,
                    attrAdds:['sleight_of_hand_ranks','sleight_of_hand_class_skill'],
                    multAdds:[1,1],
                    ability:'sleight_of_hand_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'stealth',
                    numAdds:0,
                    attrAdds:['stealth_ranks','stealth_class_skill'],
                    multAdds:[1,1],
                    ability:'stealth_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'survival',
                    numAdds:0,
                    attrAdds:['survival_ranks','survival_class_skill'],
                    multAdds:[1,1],
                    ability:'survival_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:'attack',
                    attr:'total',
                    numAdds:0,
                    attrAdds:['bab'],
                    multAdds:[1],
                    category:'category',
                    ability:'ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'misc'
                },
                {
                    repeating:'attack',
                    attr:'bab',
                    numAdds:0,
                    attrAdds:['bab'],
                    multAdds:[1],
                    category:'category',
                    ability:'',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:'attack',
                    attr:'damage_total',
                    numAdds:0,
                    attrAdds:[],
                    repeatTextAdds:['damage_dice'],
                    category:'category',
                    ability:'damage_ability',
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'misc'
                },
                {
                    repeating:'ability',
                    attr:'uses_max',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    repeatParseField:['uses_max_base'],
                    moddable:'_change'
                },
                {
                    repeating:'ability',
                    attr:'bab',
                    numAdds:0,
                    attrAdds:['bab'],
                    multAdds:[1],
                    category:'category',
                    ability:'',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:'ability',
                    attr:'attack_total',
                    numAdds:0,
                    attrAdds:['bab'],
                    multAdds:[1],
                    ability:'ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:true,
                    rollTime:'misc'
                },
                {
                    repeating:'ability',
                    attr:'damage_total',
                    numAdds:0,
                    attrAdds:[],
                    repeatTextAdds:['damage_dice'],
                    ability:'damage_ability',
                    repeatAdds:[],
                    textAdds:[],
                    moddable:true,
                    rollTime:'misc'
                },
                {
                    repeating:'ability',
                    attr:'attack_total',
                    numAdds:0,
                    attrAdds:['bab'],
                    multAdds:[1],
                    ability:'attack_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'misc'
                },
                {
                    repeating:'ability',
                    attr:'damage_total',
                    numAdds:0,
                    attrAdds:[],
                    repeatTextAdds:['damage_dice','damage_bonus'],
                    category:'category',
                    ability:'damage_ability',
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'misc'
                },
                {
                    repeating:'ability',
                    attr:'dc',
                    attrAdds:['lvl'],
                    multAdds:[0.5],
                    numAdds:10,
                    ability:'save_ability',
                    moddable:'_change'
                },
                {
                    repeating:'ability',
                    attr:'bab',
                    numAdds:0,
                    attrAdds:['bab'],
                    multAdds:[1],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:'spell',
                    attr:'cantrip_filter',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    repeatParseField:['level'],
                },
                
                {
                    repeating:'spell',
                    attr:'bab',
                    numAdds:0,
                    attrAdds:['bab'],
                    multAdds:[1],
                    category:'category',
                    ability:'',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:'spell',
                    attr:'level_1_filter',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    repeatParseField:['level'],
                },
                {
                    repeating:'spell',
                    attr:'level_2_filter',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    repeatParseField:['level'],
                },
                {
                    repeating:'spell',
                    attr:'level_3_filter',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    repeatParseField:['level'],
                },
                {
                    repeating:'spell',
                    attr:'level_4_filter',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    repeatParseField:['level'],
                },
                {
                    repeating:'spell',
                    attr:'level_5_filter',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    repeatParseField:['level'],
                },
                {
                    repeating:'spell',
                    attr:'level_6_filter',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    repeatParseField:['level'],
                },
                {
                    repeating:'spell',
                    attr:'level_7_filter',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    repeatParseField:['level'],
                },
                {
                    repeating:'spell',
                    attr:'level_8_filter',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    repeatParseField:['level'],
                },
                {
                    repeating:'spell',
                    attr:'level_9_filter',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    repeatParseField:['level'],
                },
                {
                    repeating:'spell',
                    attr:'attack_total',
                    numAdds:0,
                    attrAdds:['bab'],
                    multAdds:[1],
                    ability:'attack_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'misc'
                },
                {
                    repeating:'spell',
                    attr:'damage_total',
                    numAdds:0,
                    attrAdds:[],
                    repeatTextAdds:['damage_dice','damage_bonus'],
                    category:'category',
                    ability:'damage_ability',
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'misc'
                },
                {
                    repeating:'spell',
                    attr:'dc',
                    attrAdds:[],
                    repeatAdds:['level'],
                    numAdds:10,
                    ability:'save_ability',
                    moddable:'_change'
                },
                {
                    repeating:'spell',
                    attr:'bab',
                    numAdds:0,
                    attrAdds:['bab'],
                    multAdds:[1],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                }
            ],
            npcAttributeObjs=[
                /*
                {
                    repeating:'section'/false,
                    attr:'attribute_name',
                    numAdds: integer,
                    attrAdds: [],
                    addlBonus: [],
                    ability:'ability_attribute',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                *//*
                {
                    repeating:false,
                    attr:'strength_mod',
                    numAdds: 0,
                    attrAdds: [],
                    multAdds: [],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:false,
                    attr:'dexterity_mod',
                    numAdds: 0,
                    attrAdds: [],
                    multAdds: [],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:false,
                    attr:'constitution_mod',
                    numAdds: 0,
                    attrAdds: [],
                    multAdds: [],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:false,
                    attr:'intelligence_mod',
                    numAdds: 0,
                    attrAdds: [],
                    multAdds: [],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:false,
                    attr:'wisdom_mod',
                    numAdds: 0,
                    attrAdds: [],
                    multAdds: [],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:false,
                    attr:'charisma_mod',
                    numAdds: 0,
                    attrAdds: [],
                    multAdds: [],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[]
                },*/
                {
                    repeating:false,
                    attr:'temp_hp_max',
                    numAdds: 0,
                    attrAdds: [],
                    multAdds:[],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change'
                },
                /*{
                    repeating:false,
                    attr:'eac',
                    numAdds:10,
                    attrAdds:['eac_armor'],
                    multAdds:[1],
                    ability:'',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change'
                },
                {
                    repeating:false,
                    attr:'kac',
                    numAdds:10,
                    attrAdds:['kac_armor'],
                    multAdds:[1],
                    ability:'',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change'
                },
                {
                    repeating:false,
                    attr:'cmd',
                    numAdds:8,
                    attrAdds:['kac'],
                    multAdds:[1],
                    ability:'',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change'
                },*/
                {
                    repeating:false,
                    attr:'fort_base',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['fort'],
                    multAdds:[1],
                    ability:'fort_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'ref_base',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['ref'],
                    multAdds:[1],
                    ability:'ref_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'will_base',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['will'],
                    multAdds:[1],
                    ability:'will_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'initiative_npc',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['initiative'],
                    multAdds:[1],
                    ability:'initiative_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'acrobatics_ranks',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['acrobatics'],
                    multAdds:[1],
                    ability:'acrobatics_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'athletics_ranks',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['athletics'],
                    multAdds:[1],
                    ability:'athletics_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'bluff_ranks',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['bluff'],
                    multAdds:[1],
                    ability:'bluff_ability',

                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'computers_ranks',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['computers'],
                    multAdds:[1],
                    ability:'computers_ability',

                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'culture_ranks',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['culture'],
                    multAdds:[1],
                    ability:'culture_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'diplomacy_ranks',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['diplomacy'],
                    multAdds:[1],
                    ability:'diplomacy_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'disguise_ranks',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['disguise'],
                    multAdds:[1],
                    ability:'disguise_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'engineering_ranks',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['engineering'],
                    multAdds:[1],
                    ability:'engineering_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'intimidate_ranks',
                    isSkill:true,
                    numAdds:0,
                    attrAdds:['intimidate'],
                    multAdds:[1],
                    ability:'intimidate_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'life_science_ranks',
                    numAdds:0,
                    attrAdds:['life_science'],
                    multAdds:[1],
                    ability:'life_science_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'medicine_ranks',
                    numAdds:0,
                    attrAdds:['medicine'],
                    multAdds:[1],
                    ability:'medicine_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'mysticism_ranks',
                    numAdds:0,
                    attrAdds:['mysticism'],
                    multAdds:[1],
                    ability:'mysticism_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    attr:'perception_ranks',
                    numAdds:0,
                    attrAdds:['perception'],
                    multAdds:[1],
                    ability:'perception_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'physical_science_ranks',
                    numAdds:0,
                    attrAdds:['physical_science'],
                    multAdds:[1],
                    ability:'physical_science_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'piloting_ranks',
                    numAdds:0,
                    attrAdds:['piloting'],
                    multAdds:[1],
                    ability:'piloting_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'sense_motive_ranks',
                    numAdds:0,
                    attrAdds:['sense_motive'],
                    multAdds:[1],
                    ability:'sense_motive_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'sleight_of_hand_ranks',
                    numAdds:0,
                    attrAdds:['sleight_of_hand'],
                    multAdds:[1],
                    ability:'sleight_of_hand_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'stealth_ranks',
                    numAdds:0,
                    attrAdds:['stealth'],
                    multAdds:[1],
                    ability:'stealth_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:false,
                    isSkill:true,
                    attr:'survival_ranks',
                    numAdds:0,
                    attrAdds:['survival'],
                    multAdds:[1],
                    ability:'survival_ability',
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:'attack',
                    attr:'range_filter',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    category:'',
                    ability:'',
                    repeatTextAdds:['engagement_range'],
                    repeatAdds:[],
                    textAdds:[]
                },
                {
                    repeating:'attack',
                    attr:'total',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[1],
                    category:'category',
                    ability:'ability',
                    repeatTextAdds:[],
                    repeatAdds:['bab'],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'misc'
                },
                {
                    repeating:'attack',
                    attr:'damage_total',
                    numAdds:0,
                    attrAdds:[],
                    repeatTextAdds:['damage_dice','damage_bonus'],
                    category:'category',
                    ability:'damage_ability',
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'misc'
                },
                {
                    repeating:'ability',
                    attr:'uses_max',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[],
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    repeatParseField:['uses_max_base'],
                    moddable:'_change'
                },
                {
                    repeating:'ability',
                    attr:'dc',
                    attrAdds:[],
                    multAdds:[],
                    repeatAdds:['dc_base'],
                    numAdds:0,
                    ability:'',
                    moddable:'_change',
                    rollTime:'_misc'
                },
                {
                    repeating:'spell',
                    attr:'attack_total',
                    numAdds:0,
                    attrAdds:[],
                    multAdds:[1],
                    ability:'attack_ability',
                    repeatTextAdds:[],
                    repeatAdds:['bab'],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'misc'
                },
                {
                    repeating:'spell',
                    attr:'damage_total',
                    numAdds:0,
                    attrAdds:[],
                    repeatTextAdds:['damage_dice','damage_bonus'],
                    category:'category',
                    ability:'damage_ability',
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'misc'
                },
                {
                    repeating:'spell',
                    attr:'dc',
                    attrAdds:[],
                    repeatAdds:['dc_base'],
                    numAdds:0,
                    ability:'',
                    rollTime:'_misc'
                },
            ],
            
        esRE = function (s) {
            var escapeForRegexp = /(\\|\/|\[|\]|\(|\)|\{|\}|\?|\+|\*|\||\.|\^|\$)/g;
            return s.replace(escapeForRegexp,"\\$1");
        },
        
        HE = (function(){
            var entities={
                //'' :'&'+'nbsp'+';',
               '*' :'&'+'#42'+';',
               '&' :'&'+'amp'+';',
               '<' :'&'+'lt'+';',
               '>' :'&'+'gt'+';',
                "'" :'&'+'#39'+';',
               '@' :'&'+'#64'+';',
               '{' :'&'+'#123'+';',
               '|' :'&'+'#124'+';',
               '}' :'&'+'#125'+';',
               ',' :'&'+'#44'+';',
               '[' :'&'+'#91'+';',
               ']' :'&'+'#93'+';',
               '"' :'&'+'quot'+';',
               ':' :'&'+'#58'+';',
               '(' :'&'+'#40'+';',
               ')' :'&'+'#41'+';'
                //'-' :'&'+'mdash'+';'
            },
            re=new RegExp('('+_.map(_.keys(entities),esRE).join('|')+')','g');
            return function(s){
                return s.replace(re, function(c){ return entities[c] || c; });
            };
        }()),
        RegisterEventHandlers = function(){
            on('sheet:opened',updateSheet);
            on('change:import change:export',statblockParse);
            on('change:tab_select change:resolve_source change:stackable_buffs change:sheet_type '
            +'change:class_1_name change:class_2_name change:class_3_name change:class_4_name change:class_5_name '
            +'change:class_1_level change:class_2_level change:class_3_level change:class_4_level change:class_5_level '
            +'change:class_1_sp change:class_2_sp change:class_3_sp change:class_4_sp change:class_5_sp '
            +'change:class_1_hp change:class_2_hp change:class_3_hp change:class_4_hp change:class_5_hp '
            +'change:class_1_bab change:class_2_bab change:class_3_bab change:class_4_bab change:class_5_bab '
            +'change:class_1_fort change:class_2_fort change:class_3_fort change:class_4_fort change:class_5_fort '
            +'change:class_1_ref change:class_2_ref change:class_3_ref change:class_4_ref change:class_5_ref '
            +'change:class_1_will change:class_2_will change:class_3_will change:class_4_will change:class_5_will '
            +'change:class_1_skills change:class_2_skills change:class_3_skills change:class_4_skills change:class_5_skills '
            +'change:class_1_ability change:class_2_ability change:class_3_ability change:class_4_ability change:class_5_ability '
            +'change:class_1_spells change:class_2_spells change:class_3_spells change:class_4_spells change:class_5_spells '
            +'change:class_1_spell_progression change:class_2_spell_progression change:class_3_spell_progression change:class_4_spell_progression change:class_5_spell_progression '
            +'change:class_1_casting_ability change:class_2_casting_ability change:class_3_casting_ability change:class_4_casting_ability change:class_5_casting_ability '
            +'change:race_hp change:strength_base change:strength_enhance change:strength_penalty change:strength_drain '
            +'change:dexterity_base change:dexterity_enhance change:dexterity_penalty change:dexterity_drain change:constitution_base '
            +'change:constitution_enhance change:constitution_penalty change:constitution change:intelligence_base change:intelligence_enhance '
            +'change:intelligence_penalty change:intelligence_drain change:wisdom_base change:wisdom_enhance change:wisdom_penalty change:wisdom_drain '
            +'change:charisma_base change:charisma_enhance change:charisma_penalty change:charisma_drain change:eac_ability change:kac_ability '
            +'change:dexterity_mod change:strength_mod change:constitution_mod change:intelligence_mod change:wisdom_mod change:charisma_mod '
            +'change:fort_ability change:fort change:ref_ability change:ref change:will_ability change:will change:initiative_ability change:initiative change:sp change:hp change:rp '
            +'change:acrobatics change:athletics change:bluff change:computers change:culture change:diplomacy change:disguise change:engineering change:intimidate change:life_science change:medicine change:mysticism change:profession change:perception change:physical_science change:piloting change:sense_motive change:sleight_of_hand change:stealth change:survival '
            +'change:acrobatics_ranks change:acrobatics_class_skill change:acrobatics_ability change:acrobatics_acp '
            +'change:athletics_ranks change:athletics_class_skill change:athletics_ability change:athletics_acp '
            +'change:bluff_ranks change:bluff_class_skill change:bluff_ability change:bluff_acp '
            +'change:computers_ranks change:computers_class_skill change:computers_ability change:computers_acp '
            +'change:culture_ranks change:culture_class_skill change:culture_ability change:culture_acp '
            +'change:diplomacy_ranks change:diplomacy_class_skill change:diplomacy_ability change:diplomacy_acp '
            +'change:disguise_ranks change:disguise_class_skill change:disguise_ability change:disguise_acp '
            +'change:engineering_ranks change:engineering_class_skill change:engineering_ability  change:engineering_acp '
            +'change:intimidate_ranks change:intimidate_class_skill change:intimidate_ability  change:intimidate_acp '
            +'change:life_science_ranks change:life_science_class_skill change:life_science_ability  change:life_science_acp '
            +'change:medicine_ranks change:medicine_class_skill change:medicine_ability  change:medicine_acp '
            +'change:mysticism_ranks change:mysticism_class_skill change:mysticism_ability change:mysticism_acp '
            +'change:perception_ranks change:perception_class_skill change:perception_ability change:perception_acp '
            +'change:physical_science_ranks change:physical_science_class_skill change:physical_science_ability change:physical_science_acp '
            +'change:piloting_ranks change:piloting_class_skill change:piloting_ability change:_acp '
            +'change:sense_motive_ranks change:sense_motive_class_skill change:sense_motive_ability change:sense_motive_acp '
            +'change:sleight_of_hand_ranks change:sleight_of_hand_class_skill change:sleight_of_hand_ability change:sleight_of_hand_acp '
            +'change:stealth_ranks change:stealth_class_skill change:stealth_ability change:stealth_acp '
            +'change:survival_ranks change:survival_class_skill change:survival_ability change:survival_acp '
            +'change:repeating_item change:repeating_attack change:repeating_profession change:repeating_buff change:repeating_ability change:repeating_spell '
            +'change:create_cantrip change:create_1st change:create_2nd change:create_3rd change:create_4th change:create_5th change:create_6th change:create_7th change:create_8th change:create_9th '
            +'change:create_npcmelee change:create_npcranged change:stackable_buffs change:half_specializations change:drone '
            +'remove:repeating_item remove:repeating_buff remove:repeating_ability '
            //starship events
            +'change:create_forward change:create_port change:create_aft change:create_starboard change:create_turret '
            +'change:create_system change:create_expansion '
            +'change:gunner change:captain change:engineer change:pilot change:science_officer change:speed change:maneuverability',
            accessStarfinder);
            //ship specific listener
            on('change:ship_piloting_ranks change:repeating_system:shields change:repeating_system:armor change:repeating_system:countermeasure change:repeating_system:purpose change:repeating_system:pcu change:repeating_system:bp change:repeating_system:powered change:repeating_system:comp_bonus change:repeating_attack:pcu change:repeating_attack:bp change:repeating_attack:powered change:ship_computer change:size',()=>{
                getID(JSON.parse(JSON.stringify(repeatingShipAttributes)),shipSystemHandler);
            });
            on('change:forward_shields change:port_shields change:aft_shields change:starboard_shields',shieldHandler);
            
        },
        
        updateSheet = function(event){
            setAttrs({character_sheet:'Starfinder v'+version});
        },
        
        getID = function(cloneRepAttr,callback,sectionAggregate){
            var currSection=cloneRepAttr.shift();
            sectionAggregate = sectionAggregate || [];
            getSectionIDs('repeating_'+currSection.section,(itemIDArr)=>{
                sectionAggregate.push({
                    section:currSection.section,
                    id:itemIDArr,
                    fields:currSection.fields
                });
                if(_.isEmpty(cloneRepAttr)){
                    callback(sectionAggregate);
                }else{
                    getID(cloneRepAttr,callback,sectionAggregate);
                }
            });
        },
        
        accessStarfinder = function (event){
            TAS.log('event: '+JSON.stringify(event));
            var attribute = event.sourceAttribute,
                repeatSec = event.sourceAttribute.match(/repeating_([^_]+)/) ? event.sourceAttribute.match(/repeating_([^_]+)/)[1] : false,
                cloneRepAttr = JSON.parse(JSON.stringify(repeatingAttributes)),
                currSection,
                attributes=[],
                bonuses,
                setObj={},
                useID = (sectionAggregate) => {
                    _.each(sectionAggregate,(section)=>{
                        _.each(section.id,(sid)=>{
                            _.each(section.fields,(f)=>{
                                attributes.push('repeating_'+section.section+'_'+sid+'_'+f);
                            });
                        });
                    });
                    attributes = attributes.concat(sheetAttributes);
                    getAttrs(attributes,(objs)=>{
                        if(attribute.match(/^(?:rp|hp|sp)$/)){
                            healthHandler(objs);
                        }else{
                            if(attribute.match(/frequency/)){
                                setObj[event.sourceAttribute.replace(/frequency/,'toggle_freq_dependency')]=objs[event.sourceAttribute];
                                setObj[event.sourceAttribute.replace(/frequency/,'usage_freq_dependency')]=objs[event.sourceAttribute];
                                setObj[event.sourceAttribute.replace(/frequency/,'uses_freq_dependency')]=objs[event.sourceAttribute];
                            }else if(attribute==='sheet_type'){
                                setObj.sheet_type_nav=event.newValue;
                            }else if (attribute==='drone'){
                                setObj=classLevelHandler(objs);
                            }else{
                                setObj = attribute.match(/class_\d/) ? classHandler(objs,attribute) : attribute.match(/repeating_ability|repeating_spell/) ? abilityHandler(objs,attribute) : {};
                            }
                            if(setObj){
                                if(attribute==='sheet_type'){
                                    if(event.newValue==='npc'){
                                        setObj.whisper_state='/w gm';
                                        setObj.npc_init='+@{initiative_npc}';
                                    }else{
                                        setObj.whisper_state='';
                                        setObj.npc_init='';
                                    }
                                }
                                bonuses=parseBuffs(objs);
                                applyBuffs(objs,bonuses,setObj);
                            }
                        }
                    });
                };
            if(attribute.match(/show_options/)){
                return;
            }
            if(attribute==='tab_select'){
                getAttrs(['tab_select'],(objs)=>{
                    if(objs.tab_select==='options'){
                        setObj.npcship_toggle='settings';
                    }else if(objs.tab_select==='npc'){
                        setObj.npcship_toggle='npc';
                    }else if(objs.tab_select==='ship'){
                        setObj.npcship_toggle='ship';
                    }else{
                        setObj.npcship_toggle='pc';
                        setObj.tab=objs.tab_select;
                    }
                    setAttrs(setObj,{silent:true});
                });
            }else if(attribute.match(/(?:save|attack|mods|damage)_checkbox/)){
                getAttrs([event.sourceAttribute],(objs)=>{
                    setObj[event.sourceAttribute]=objs[event.sourceAttribute];
                    setAttrs(setObj,{silent:true});
                });
            }else if(attribute.match(/create/)){
                let createSwitch = {
                   'cantrip':{section:'_spell_',attrs:['_level','_cantrip_filter'],values:[0,'cantrip']},
                   '1st':{section:'_spell_',attrs:['_level','_level_1_filter'],values:[1,1]},
                   '2nd':{section:'_spell_',attrs:['_level','_level_2_filter'],values:[2,2]},
                   '3rd':{section:'_spell_',attrs:['_level','_level_3_filter'],values:[3,3]},
                   '4th':{section:'_spell_',attrs:['_level','_level_4_filter'],values:[4,4]},
                   '5th':{section:'_spell_',attrs:['_level','_level_5_filter'],values:[5,5]},
                   '6th':{section:'_spell_',attrs:['_level','_level_6_filter'],values:[6,6]},
                   '7th':{section:'_spell_',attrs:['_level','_level_7_filter'],values:[7,7]},
                   '8th':{section:'_spell_',attrs:['_level','_level_8_filter'],values:[8,8]},
                   '9th':{section:'_spell_',attrs:['_level','_level_9_filter'],values:[9,9]},
                   'npcmelee':{section:'_attack_',attrs:['_engagement_range','_range_filter','_ability','_proficiency'],values:['melee','melee','@{strength_mod}','specialized']},
                   'npcranged':{section:'_attack_',attrs:['_engagement_range','_range_filter','_ability','_proficiency'],values:['ranged','ranged','@{dexterity_mod}','specialized']},
                   'forward':{section:'_attack_',attrs:['_arc','_arc_status'],values:['forward','@{forward_weapons_status}']},
                   'port':{section:'_attack_',attrs:['_arc','_arc_status'],values:['port','@{port_weapons_status}']},
                   'aft':{section:'_attack_',attrs:['_arc','_arc_status'],values:['aft','@{aft_weapons_status}']},
                   'starboard':{section:'_attack_',attrs:['_arc','_arc_status'],values:['starboard','@{starboard_weapons_status}']},
                   'turret':{section:'_attack_',attrs:['_arc','_arc_status'],values:['turret','?{'+getTranslationByKey('which-arc')+'|'+getTranslationByKey('forward')+',@{forward_weapons_status}'+'|'+getTranslationByKey('port')+',@{starboard_weapons_status}'+'|'+getTranslationByKey('aft')+',@{aft_weapons_status}'+'|'+getTranslationByKey('starboard')+',@{starboard_weapons_status}}']},
                   'system':{section:'_system_',attrs:['_type'],values:['system']},
                   'expansion':{section:'_system_',attrs:['_type','_purpose'],values:['expansion','expansion-bay']},
                };
                let createTarget=createSwitch[attribute.replace(/create_/,'')];
                let rowID = generateRowID();
                _.each(_.range(createTarget.attrs.length),(n)=>{
                    setObj['repeating'+createTarget.section+rowID+createTarget.attrs[n]]=createTarget.values[n];
                    
                });
                setObj[attribute]=0;
                setAttrs(setObj,{silent:true},()=>{
                    setObj={};
                    getID(cloneRepAttr,useID);
                });
            }else if(attribute.match(/^(?:captain|engineer|pilot|science_officer|speed|maneuverability)$/)){
                if(attribute.match(/speed|maneuverability/)){
                    getAttrs(['pilot'],(p)=>{
                        event.newValue = p.pilot;
                        attribute = 'pilot';
                        shipCrewHandler(event,attribute);
                    });
                }else{
                    shipCrewHandler(event,attribute);
                }
            }else if(attribute.match(/gunner/)){
                shipGunnerHandler();
            }else{
                getID(cloneRepAttr,useID);
            }
        },
        
        weaponry = ['Basic Melee Weapons','Advanced Melee Weapons','Small Arms','Longarms','Heavy Weapons','Sniper Weapons','Grenades','Special Weapons','Solarion Weapon Crystals'],
        
        shieldHandler = function(event){
            var shields = 0,
                setObj={};
                
            getAttrs(['forward_shields','port_shields','aft_shields','starboard_shields'],(shields)=>{
                setObj.shield_total = _.reduce(shields,(memo,s)=>{
                    return memo+=s*1||0;
                },0);
                setAttrs(setObj,{silent:true});
            });
        },
        
        shipSystemHandler = function(sections){
            var attributes = ['size','ship_piloting_ranks'],
                setObj = {},
                ids=[],
                pcu=0,
                pcu_max=0,
                bp=0,
                shield_total=0,
                armor=0,
                countermeasure=0,
                computerMatch,
                computerQuery='?{'+getTranslationByKey('use-computer')+'|'+getTranslationByKey('no')+', |'+getTranslationByKey('yes')+',',
                computer='',
                sizeSwitch = {
                    'tiny':2,
                    'small':1,
                    'medium':0,
                    'large':-1,
                    'huge':-2,
                    'gargantuan':-4,
                    'colossal':-8
                };
            _.each(sections,(section)=>{
                _.each(section.id,(sid)=>{
                    ids.push('repeating_'+section.section+'_'+sid);
                    _.each(section.fields,(f)=>{
                        attributes.push('repeating_'+section.section+'_'+sid+'_'+f);
                    });
                });
            });
            attributes.push('ship_computer');
            getAttrs(attributes,(resources)=>{
                _.each(ids,(i)=>{
                    if(i.match(/attack/)){
                        bp+=resources[i+'_bp']*1||0;
                        if(resources[i+'_powered']==='ON'){
                            pcu+=resources[i+'_pcu']*1||0;
                        }
                    }else if(i.match(/system/)){
                        bp+=resources[i+'_bp']*1||0;
                        if(resources[i+'_powered']==='ON'){
                            armor+=resources[i+'_armor']*1||0;
                            countermeasure+=resources[i+'_countermeasure']*1||0;
                            shield_total+=resources[i+'_shields']*1||0;
                            if(resources[i+'_comp_bonus'].length>1){
                                computer+=(computer.length>1 ?' /' :'')+resources[i+'_comp_bonus'];
                            }
                            if(resources[i+'_purpose']==='power-core'){
                                pcu_max+=resources[i+'_pcu']*1||0;
                            }else{
                                pcu+=resources[i+'_pcu']*1||0;
                            }
                        }
                    }
                });
                computerMatch=computer.match(/\+\d+/);
                if(computerMatch){
                    computerQuery += computerMatch[0]+'}';
                }else{
                    computerQuery ='';
                }
                armor+=sizeSwitch[resources.size]*1||0;
                countermeasure+=sizeSwitch[resources.size]*1||0;
                setObj={
                    ship_pcu_max:pcu_max,
                    ship_pcu:pcu,
                    ship_computer:computer,
                    computer_query:computerQuery,
                    shield_total_max:shield_total,
                    ac_armor:armor,
                    tl_countermeasures:countermeasure,
                    ac:(resources.ship_piloting_ranks*1||0)+armor + 10,
                    tl:(resources.ship_piloting_ranks*1||0)+countermeasure + 10
                };
                setAttrs(setObj,{silent:true});
            });
        },
        
        shipCrewHandler = function(event,attribute){
            var people=event.newValue.split(/\s*,\s*/),
                maneuverSwitch = {
                    'clumsy':'-2',
                    'poor':'-1',
                    'average':'',
                    'good':'+1',
                    'perfect':'+2'
                },
                speedMod = (speed) => {
                    switch(speed){
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                            return '+2';
                            break;
                        case 5:
                        case 6:
                        case 7:
                            return '+1';
                            break;
                        case 8:
                        case 9:
                        case 10:
                            return '';
                            break;
                        case 11:
                        case 12:
                            return '-1';
                            break;
                        default:
                            return '-2';
                            break;
                    }
                },
                crewSwitch = {
                   'engineer':(name,shipName)=>'@{'+name+'|engineering_ranks}[RNK]+[[({0,@{'+name+'|engineering_ranks}}>1) * @{'+name+'|engineering_class_skill}]][CS]+@{'+name+'|engineering_ability}[ABI]@{'+name+'|engineering_misc}',
                   'pilot':(name,shipName,size,maneuver)=>'@{'+name+'|piloting_ranks}[RNK]+[[({0,@{'+name+'|piloting_ranks}}>1) * @{'+name+'|piloting_class_skill}]][CS]+@{'+name+'|piloting_ability}[ABI]'+speedMod(size*1||1)+maneuverSwitch[maneuver]+'@{'+name+'|piloting_misc}@{'+shipName+'|engines_status}@{'+shipName+'|power_core_status}',
                   'science_officer':(name,shipName)=>'@{'+name+'|computers_ranks}[RNK]+[[({0,@{'+name+'|computers_ranks}}>1) * @{'+name+'|computers_class_skill}]][CS]+@{'+name+'|computers_ability}[ABI]@{'+name+'|computers_misc}@{'+shipName+'|sensors_status}@{'+shipName+'|power_core_status}',
                },
                npcCrewSwitch = {
                   'engineer':(name)=>'',
                   'pilot':(name)=>'@{'+name+'|engines_status}',
                   'science_officer':(name)=>'@{'+name+'|sensors_status}',
                   'captain':(name)=>''
                },
                query='{{title='+getTranslationByKey(attribute.replace(/_/g,'-')+'-query')+'}} {{buttons0=',
                matcher='',
                setObj={},
                shipSpeed,shipManeuver,values;
            people=_.map(people,(p)=>{
                matcher = p.match(/((?:\(\d+\)\s+)?[a-z][a-z\s]+[a-z])\s*(?:(?:\+|(?=\-))?(\-?\d+))?/i)||[];
                return{actor:matcher[1],bonus:matcher[2]};
            });
            getAttrs(['character_name','speed','maneuverability'],(name)=>{
                shipSpeed = name.speed;
                shipManeuver = name.maneuverability;
                name=name.character_name;
                _.each(people,(p)=>{
                    if(p.bonus){
                        if(people.length>1){
                            query+=(query.match(/=$/) ?'' :' |')+'['+p.actor.trim()+'](!/&#13;'+HE('&{template:sf_generic} {{name=@{'+name+'|character_name}}} {{characterid=@{'+name+'|character_id}}} {{title=^{'+attribute.replace(/_/g,'-')+'}}} {{r1=[[1d20+'+p.bonus+npcCrewSwitch[attribute](name)+'@{'+name+'power_core_status}@{'+name+'|computer_query}'+(attribute==='pilot' ?'?{'+getTranslationByKey('helm-check')+'|'+getTranslationByKey('no')+', |'+getTranslationByKey('yes')+',&{tracker'+HE('}')+'}' :'')+']]}} {{r1name='+p.actor.trim()+'}}')+')';
                        }else{
                            query=' {{title=^{'+attribute.replace(/_/g,'-')+'}}} {{r1=[[1d20+'+p.bonus+npcCrewSwitch[attribute](name)+'@{power_core_status}@{'+name+'|computer_query}'+(attribute==='pilot' ?'?{'+getTranslationByKey('helm-check')+'|'+getTranslationByKey('no')+', |'+getTranslationByKey('yes')+',&{tracker'+HE('}')+'}' :'')+']]}} {{r1name='+p.actor;
                        }
                    }else{
                        if(people.length>1 && attribute!=='captain'){
                            query+=(query.match(/=$/) ?'' :' |')+'['+p.actor.trim()+'](!/&#13;'+HE('&{template:sf_generic} {{name=@{'+name+'|character_name}}} {{characterid=@{'+name+'|character_id}}} {{title=^{'+attribute.replace(/_/g,'-')+'}}} {{r1=[[1d20+'+crewSwitch[attribute](p.actor.trim(),name,shipSpeed,shipManeuver)+'@{'+name+'|power_core_status}@{'+name+'|computer_query}'+(attribute==='pilot' ?'?{'+getTranslationByKey('helm-check')+'|'+getTranslationByKey('no')+', |'+getTranslationByKey('yes')+',&{tracker'+HE('}')+'}' :'')+']]}} {{r1name='+p.actor+'}}')+')';
                        }else if(people.length===1 && attribute==='captain'){
                            _.each(skillList,(s)=>{
                                if(s!=='profession'){
                                    query+=(query.match(/=$/) ?'' :' |')+'[^{'+s.toLowerCase().replace(/_/g,'-')+'}](!/&#13;'+HE('&{template:sf_generic} {{name=@{'+name+'|character_name}}} {{characterid=@{'+name+'|character_id}}} {{title=^{'+s.toLowerCase().replace(/_/g,'-')+'}}} {{r1=[[1d20+@{'+p.actor.trim()+'|'+s+'_ranks}+'+'@{'+p.actor.trim()+'|'+s+'_ability}@{'+p.actor.trim()+'|'+s+'_misc}@{'+name+'|power_core_status}@{'+name+'|computer_query}]]}} {{r1name='+p.actor+'}}')+')';
                                }
                            });
                        }else if(people.length===1){
                            query=' {{title=^{'+attribute.replace(/_/g,'-')+'}}} {{r1=[[1d20+'+crewSwitch[attribute](p.actor.trim(),name,shipSpeed,shipManeuver)+'@{'+name+'|computer_query}'+(attribute==='pilot' ?'?{'+getTranslationByKey('helm-check')+'|'+getTranslationByKey('no')+', |'+getTranslationByKey('yes')+',&{tracker'+HE('}')+'}' :'')+']]}} {{r1name='+p.actor;
                        }
                    }
                });
                query='&{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}}'+query+'}}';
                setObj[attribute+'_bonus']=query;
                setAttrs(setObj,{silent:true});
            });
            
        },
        
        shipGunnerHandler = function(){
            var setObj={},
                query='?{'+getTranslationByKey('which-gunner')+'|',
                matcher;
            getAttrs(['gunner'],(gunners)=>{
                gunners = _.map(gunners.gunner.split(/\s*,\s*/),(p)=>{
                    matcher = p.match(/((?:\(\d+\)\s+)?[a-z][a-z\s]+[a-z])\s*(?:(?:\+|(?=\-))?(\-?\d+))?/i)||[];
                    return{actor:matcher[1],bonus:matcher[2]};
                });
                if(gunners.length>1){
                    _.each(gunners,(gun)=>{
                        query+=gun.actor+','+(gun.bonus||HE('{')+'@{'+gun.actor+'|piloting_ranks}'+HE(',')+'@{'+gun.actor+'|bab}'+HE('}')+'kh1+@{'+gun.actor+'|dexterity_mod}')+'|';
                    });
                    query+='}';
                }else{
                    query = gunners[0].bonus||'{@{'+gunners[0].actor+'|piloting_ranks},@{'+gunners[0].actor+'|bab}}kh1+@{'+gunners[0].actor+'|dexterity_mod}';
                }
                setObj.gunner_roll=query;
                setAttrs(setObj,{silent:true});
            });
        },
        
        healthHandler = function(attributes){
            var setObj = _.reduce(['sp','hp','rp'],(memo,h)=>{
                memo.health_status+=((attributes[h]*1 <= 0 && attributes[h]*1!==attributes[h+'_max']*1) ? 1 : 0);
                return memo;
            },{health_status:0});
            setAttrs(setObj,{silent:true});
            return undefined;
        },
        
        classHandler = function(attributes,attribute){
            var classVar = attribute.replace(/class_\d_/,''),
                classNum = attribute.replace(/class_(\d)_.+/,'$1'),
                varSwitch = {
                    name:classNameHandler,
                    level:classLevelHandler,
                    sp:classHealthHandler,
                    hp:classHealthHandler,
                    spell_progression:classHealthHandler,
                    bab:classBABHandler,
                    fort:classSaveHandler,
                    ref:classSaveHandler,
                    will:classSaveHandler,
                    spells:classSpellHandler,
                    casting_ability:classAbilityHandler,
                    ability:classAbilityHandler,
                    skills:classHealthHandler
                },
                setObj;
            setObj = varSwitch[classVar](attributes,classVar,classNum);
            return buildMenus(attributes,setObj);
        },
        
        //class attribute handling functions
        classNameHandler = function(attributes){
            var temp,
                classNL = _.reduce([1,2,3,4,5],(memo,n)=>{
                    temp=(attributes['class_'+n+'_name']||'')+((attributes['class_'+n+'_name']&&attributes['class_'+n+'_name']!==''&&attributes['class_'+n+'_level']&&attributes['class_'+n+'_level']!=='') ?'' :'')+(attributes['class_'+n+'_level']||'');
                    memo+=temp.length>0 ? (memo.length>0 ?' /' :'')+temp :'';
                    return memo;
                },'');
                setAttrs({'class&level':classNL},{silent:true});
                return undefined;
        },
        
        classLevelHandler = function(attributes){
            var convertSave = {
                    poor:(lvl)=>attributes.drone*1===1 ? Math.round((lvl - 1)/4) : Math.floor(lvl/3),
                    good:(lvl)=> 2+ (attributes.drone*1===1 ? Math.ceil((lvl*0.75 - 1)/2) : Math.floor(lvl/2))
                },
                temp;
            return _.reduce([1,2,3,4,5],(memo,n)=>{
                memo.character_level=(memo.character_level||0)+(attributes['class_'+n+'_level']*1||0);
                memo.bab+=attributes.drone*1===1 ? Math.ceil((attributes['class_'+n+'_level']*0.75)||0) : Math.floor(attributes['class_'+n+'_bab']*attributes['class_'+n+'_level']||0);
                memo.skill_points_max+=(attributes['class_'+n+'_level']*attributes['class_'+n+'_skills']||0);
                _.each(['fort','ref','will'],(save)=>{
                    memo[save+'_base']+=convertSave[attributes['class_'+n+'_'+save]](attributes['class_'+n+'_level']*1||0);
                });
                temp=(attributes['class_'+n+'_name']||'')+((attributes['class_'+n+'_name']&&attributes['class_'+n+'_name']!==''&&attributes['class_'+n+'_level']&&attributes['class_'+n+'_level']!=='') ?'' :'')+(attributes['class_'+n+'_level']||'');
                memo['class&level']+=temp.length>0 ? (memo['class&level'].length>0 ?' /' :'')+temp :'';
                return memo;
            },{level:0,fort_base:0,ref_base:0,will_base:0,bab:0,'class&level':'',skill_points_max:0});
        },
        
        classHealthHandler = function(){
            return {};
        },
        
        classBABHandler = function(attributes){
            return _.reduce([1,2,3,4,5],(memo,n)=>{
                memo.bab+=Math.floor(attributes['class_'+n+'_bab']*attributes['class_'+n+'_level']||0);
                return memo;
            },{bab:0});
        },
        
        classSaveHandler = function(attributes,save){
            var convertSave = {
                    poor:(lvl)=>Math.floor(lvl/3),
                    good:(lvl)=>lvl>0 ? (Math.floor(lvl/2) + 2) : 0
                },
                memObj={};
                
            memObj[save+'_base']=0;
            return _.reduce([1,2,3,4,5],(memo,n)=>{
                memo[save+'_base']+=convertSave[attributes['class_'+n+'_'+save]](attributes['class_'+n+'_level']*1||0);
                return memo;
            },memObj);
        },
        
        classAbilityHandler = function(attributes,attr,classNum){
            var preClass ='class_'+classNum,
                setObj={},
                repeatingSources = _.filter(_.keys(attributes),(a)=>{return a.match(/repeating_[^_]+_-[^_]+_source/)});
                
            if(attr==='ability'){
                setObj[preClass+'_casting_ability']=attributes[preClass+'_ability'];
            }
            return _.reduce(repeatingSources,(memo,s)=>{
                if((attributes[s]+'').toLowerCase()===(attributes[preClass+'_name']+'').toLowerCase()){
                    memo[s.replace(/source/,'save_ability')]=attributes[preClass+((attr==='casting_ability' && s.match(/spell/)) ?'_casting' :'')+'_ability'];
                }
                return memo;
            },setObj);
        },
        
        classSpellHandler = function(attributes,attr,classNum){
            var setObj = {},
                preClass ='class_'+classNum;
            _.some([1,2,3,4,5],(n)=>{
                if(attributes['class_'+n+'_spells']*1===1){
                    setObj.is_caster = 1;
                    setObj.caster_select = 1;
                    return true;
                }else{
                    setObj.is_caster=0;
                    setObj.caster_select = 0;
                }
            });
            if(attr==='spells' && attributes[preClass+'_spells']*1===1){
                setObj[preClass+'_casting_ability']=attributes[preClass+'_ability'];
            }
            return setObj;
        },
        
        abilityHandler = function(attributes,attr){
            var field = attr.replace(/repeating_(?:spell|ability)_-[^_]+_/,''),
                setObj={};
            
            switch(field){
                case'source':
                    setObj = abilitySourceHandler(attributes,attr);
                    break;
            }
            return setObj;
        },
        
        abilitySourceHandler = function(attributes,attr){
            return _.reduce([1,2,3,4,5],(memo,n)=>{
                if((attributes['class_'+n+'_name']+'').toLowerCase()===(attributes[attr]+'').toLowerCase()){
                    memo[attr.replace(/source/,'save_ability')]=attributes['class_'+n+'_ability'];
                }
                return memo;
            },{});
        },
        
        buildMenus = function(attributes,setObj){
            var sectionIDs,
                preMenu ='/w "@{character_name}" &{template:sf_generic} {{name=@{character_name}}} {{characterid=@{character_id}}} {{title=';
                setObj.attacks_menu=preMenu+'ATTACKS}}';
                setObj.spells_menu=attributes.sheet_type==='pc' ? preMenu+'SPELLBOOKS}} {{buttons1=' : preMenu+'SPELLS}}';
                setObj.ability_checks_menu=preMenu+'ABILITY CHECKS}}';
                setObj.abilities_menu=preMenu+'SPECIAL ABILITIES}}';
                setObj.skills_menu=preMenu+'SKILLS}}';
            //attack menu build
            sectionIDs=_.chain(_.keys(attributes))
                .reduce((m,a)=>{
                    if(a.match(/repeating_attack/)){
                        m.push(a.replace(/repeating_attack_(-[^_]+)_.*/,'$1'));
                    }
                    return m;
                },[])
                .uniq()
                .value();
            let ranged ='{{buttons2=RANGED\n';
            let melee ='{{buttons1=MELEE\n';
            _.each(sectionIDs,(id)=>{
                let preRepeat ='repeating_attack_'+id+'_';
                if((attributes[preRepeat+'engagement_range'])==='ranged'){
                    if(ranged!=='{{buttons2=RANGED\n'){
                        ranged+=' |';
                    }
                    ranged+='['+HE(attributes[preRepeat+'name'])+'](~'+attributes.character_name+'|'+preRepeat+'roll)';
                }else{
                    if(melee!=='{{buttons1=MELEE\n'){
                        melee+=' |';
                    }
                    melee+='['+HE(attributes[preRepeat+'name'])+'](~'+attributes.character_name+'|'+preRepeat+'roll)';
                }
            });
            melee+='}}';
            ranged+='}}';
            setObj.attacks_menu+=melee+''+ranged;
            if(attributes.sheet_type==='pc'){
                //spells menu build
                let spellClassNums = _.filter([1,2,3,4,5],(n)=>{
                    return attributes['class_'+n+'_spells']*1===1;
                });
                _.each(spellClassNums,(n)=>{
                    let preClass ='class_'+n+'_';
                    if(setObj.spells_menu!==preMenu+'SPELLBOOKS}} {{buttons1='){
                        setObj.spells_menu+=' |';
                    }
                    setObj.spells_menu+='['+HE(attributes[preClass+'name']).toUpperCase()+'](~'+attributes.character_name+'|'+preClass+'spellbook)';
                    let spellLevels = setObj[preClass+'max_spell']*1 + 1;
                    let classSpellBook = preMenu+attributes[preClass+'name'].toUpperCase()+' Spells}}';
                    _.each(_.range(spellLevels),(r)=>{
                        let spellLevel ='{{buttons'+r+'='+(r===0 ?'CANTRIPS' :'LEVEL'+r)+' [[0@{'+preClass+(r===0 ?'cantrips' :'level_'+n+'_spells')+'_per_day}]] / [[0@{'+preClass+(r===0 ?'cantrips' :'level_'+n+'_spells')+'_per_day|max}]]\n';
                        sectionIDs=_.chain(_.keys(attributes))
                            .reduce((m,a)=>{
                                if(a.match(/repeating_spell_(-[^_]+)_source/)){
                                    if(attributes[a]===attributes[preClass+'name'] && attributes[a.replace(/source/,'level')]*1===r){
                                        m.push(a.replace(/repeating_spell_(-[^_]+)_.*/,'$1'));
                                    }
                                }
                                return m;
                            },[])
                            .value();
                        _.each(sectionIDs,(id)=>{
                            let preRepeat ='repeating_spell_'+id+'_';
                            if(spellLevel !=='{{buttons'+r+'='+(r===0 ?'CANTRIPS' :'LEVEL'+r)+' [[0@{'+preClass+(r===0 ?'cantrips' :'level_'+n+'_spells')+'_per_day}]] / [[0@{'+preClass+(r===0 ?'cantrips' :'level_'+n+'_spells')+'_per_day|max}]]\n'){
                                spellLevel +=' |';
                            }
                            spellLevel+='['+HE(attributes[preRepeat+'name'])+'](~'+attributes.character_name+'|'+preRepeat+'roll)';
                        });
                        spellLevel+='}}';
                        classSpellBook+=spellLevel.replace(/\n}}/,'}}');
                    });
                    setObj[preClass+'spellbook']=classSpellBook;
                });
                setObj.spells_menu+='}}';
                //abilities menu
                sectionIDs=_.chain(_.keys(attributes))
                    .reduce((m,a)=>{
                        if(a.match(/repeating_ability/)){
                            m.push(a.replace(/repeating_ability_(-[^_]+)_.*/,'$1'));
                        }
                        return m;
                    },[])
                    .uniq()
                    .value();
                let racial_abilities ='{{buttons1=RACIAL\n';
                let feat_abilities ='{{buttons2=FEATS\n';
                let class_abilities = {
                    class_1_abilities:'{{buttons3='+attributes.class_1_name.toUpperCase()+'\n',
                    class_2_abilities:'{{buttons4='+attributes.class_2_name.toUpperCase()+'\n',
                    class_3_abilities:'{{buttons5='+attributes.class_3_name.toUpperCase()+'\n',
                    class_4_abilities:'{{buttons6='+attributes.class_4_name.toUpperCase()+'\n',
                    class_5_abilities:'{{buttons7='+attributes.class_5_name.toUpperCase()+'\n'
                }
                _.each(sectionIDs,(id)=>{
                    let preRepeat ='repeating_ability_'+id+'_';
                    let classNum=0;
                    if((attributes[preRepeat+'source']+'').toLowerCase()===(attributes.race+'').toLowerCase()){
                        if(racial_abilities!=='{{buttons1=RACIAL\n'){
                            racial_abilities+=' |';
                        }
                        racial_abilities+='['+HE(attributes[preRepeat+'name'])+'](~'+attributes.character_name+'|'+preRepeat+'roll)';
                    }else if(_.some([1,2,3,4,5],(n)=>{
                            classNum=n;
                            return (attributes['class_'+n+'_name']+'').toLowerCase()===(attributes[preRepeat+'source']+'').toLowerCase();
                        })){
                        if(class_abilities['class_'+classNum+'_abilities']!=='{{buttons'+(classNum + 2)+'='+attributes['class_'+classNum+'_name']+'\n'){
                            class_abilities['class_'+classNum+'_abilities']+=' |';
                        }
                        class_abilities['class_'+classNum+'_abilities']+='['+HE(attributes[preRepeat+'name'])+'](~'+attributes.character_name+'|'+preRepeat+'roll)';
                    }else{
                        if(feat_abilities!=='{{buttons2=FEATS\n'){
                            feat_abilities+=' |';
                        }
                        feat_abilities+='['+HE(attributes[preRepeat+'name'])+'](~'+attributes.character_name+'|'+preRepeat+'roll)';
                    }
                });
                racial_abilities+='}}';
                feat_abilities +='}}';
                class_abilities = {
                    class_1_abilities:(class_abilities.class_1_abilities+'}}').replace(/\n}}/,''),
                    class_2_abilities:(class_abilities.class_2_abilities+'}}').replace(/\n}}/,''),
                    class_3_abilities:(class_abilities.class_3_abilities+'}}').replace(/\n}}/,''),
                    class_4_abilities:(class_abilities.class_4_abilities+'}}').replace(/\n}}/,''),
                    class_5_abilities:(class_abilities.class_5_abilities+'}}').replace(/\n}}/,'')
                }
                setObj.abilities_menu+=racial_abilities+''+feat_abilities+''+_.reduce(class_abilities,(m,ca)=>{return m+ca},'');
            }else if(attributes.sheet_type==='npc'){
                //spells menu build
                let spellObjs = _.reduce(_.keys(attributes),(memo,k)=>{
                    if(k.match('repeating_spell_-[^_]+_name')){
                        memo.push({
                            name:attributes[k],
                            level:attributes[k.replace(/name/,'level')]*1||0,
                            roll:k.replace(/name/,'roll')
                        });
                    }
                    return memo;
                },[]);
                let spellLevels = {
                    cantrips:'{{buttons0=CANTRIPS',
                    level1:'{{buttons1=LEVEL 1',
                    level2:'{{buttons2=LEVEL 2',
                    level3:'{{buttons3=LEVEL 3',
                    level4:'{{buttons4=LEVEL 4',
                    level5:'{{buttons5=LEVEL 5',
                    level6:'{{buttons6=LEVEL 6',
                    level7:'{{buttons7=LEVEL 7',
                    level8:'{{buttons8=LEVEL 8',
                    level9:'{{buttons9=LEVEL 9'
                }
                _.each(spellObjs,(s)=>{
                    spellLevels[s.level===0 ?'cantrips' :'level'+s.level]+=(spellLevels[s.level===0 ?'cantrips' :'level'+s.level].match(/\n/) ?' |':'\n')+'['+s.name+'](~'+attributes.character_name+'|'+s.roll+')';
                });
                _.each(_.keys(spellLevels),(k)=>{
                    if(spellLevels[k].match(/\n/)){
                        spellLevels[k]+='}}';
                    }else{
                        spellLevels[k]=spellLevels[k].replace(/({{buttons\d=).+/,'$1}}');
                    }
                    setObj.spells_menu+=''+spellLevels[k];
                });
                if(setObj.spells_menu.match(/\n/)){
                    setObj.caster_select=1;
                }
                //abilities menu
                sectionIDs=_.chain(_.keys(attributes))
                    .reduce((m,a)=>{
                        if(a.match(/repeating_ability/)){
                            m.push(a.replace(/repeating_ability_(-[^_]+)_.*/,'$1'));
                        }
                        return m;
                    },[])
                    .uniq()
                    .value();
                let racial_abilities ='{{buttons1=RACIAL\n';
                let feat_abilities ='{{buttons2=FEATS\n';
                let class_abilities = {
                    class_1_abilities:'{{buttons3='+attributes.class_1_name.toUpperCase()+'\n',
                    class_2_abilities:'{{buttons4='+attributes.class_2_name.toUpperCase()+'\n',
                    class_3_abilities:'{{buttons5='+attributes.class_3_name.toUpperCase()+'\n',
                    class_4_abilities:'{{buttons6='+attributes.class_4_name.toUpperCase()+'\n',
                    class_5_abilities:'{{buttons7='+attributes.class_5_name.toUpperCase()+'\n'
                }
                _.each(sectionIDs,(id)=>{
                    let preRepeat ='repeating_ability_'+id+'_';
                    let classNum=0;
                    if((attributes[preRepeat+'source']+'').toLowerCase()===(attributes.race+'').toLowerCase()){
                        if(racial_abilities!=='{{buttons1=RACIAL\n'){
                            racial_abilities+=' |';
                        }
                        racial_abilities+='['+HE(attributes[preRepeat+'name'])+'](~'+attributes.character_name+'|'+preRepeat+'roll)';
                    }else if(_.some([1,2,3,4,5],(n)=>{
                            classNum=n;
                            return (attributes['class_'+n+'_name']+'').toLowerCase()===(attributes[preRepeat+'source']+'').toLowerCase();
                        })){
                        if(class_abilities['class_'+classNum+'_abilities']!=='{{buttons'+(classNum + 2)+'='+attributes['class_'+classNum+'_name']+'\n'){
                            class_abilities['class_'+classNum+'_abilities']+=' |';
                        }
                        class_abilities['class_'+classNum+'_abilities']+='['+HE(attributes[preRepeat+'name'])+'](~'+attributes.character_name+'|'+preRepeat+'roll)';
                    }else{
                        if(feat_abilities!=='{{buttons2=FEATS\n'){
                            feat_abilities+=' |';
                        }
                        feat_abilities+='['+HE(attributes[preRepeat+'name'])+'](~'+attributes.character_name+'|'+preRepeat+'roll)';
                    }
                });
                racial_abilities+='}}';
                feat_abilities +='}}';
                class_abilities = {
                    class_1_abilities:(class_abilities.class_1_abilities+'}}').replace(/\n}}/,''),
                    class_2_abilities:(class_abilities.class_2_abilities+'}}').replace(/\n}}/,''),
                    class_3_abilities:(class_abilities.class_3_abilities+'}}').replace(/\n}}/,''),
                    class_4_abilities:(class_abilities.class_4_abilities+'}}').replace(/\n}}/,''),
                    class_5_abilities:(class_abilities.class_5_abilities+'}}').replace(/\n}}/,'')
                }
                setObj.abilities_menu+=racial_abilities+''+feat_abilities+''+_.reduce(class_abilities,(m,ca)=>{return m+ca},'');
            }
            //skills
            setObj.skills_menu+='{{buttons0=[Perception](~'+attributes.character_name+'|perception)}}'
                +'{{buttons1=PHYSICAL\n[Acrobatics](~'+attributes.character_name+'|acrobatics) | [Athletics](~'+attributes.character_name+'|athletics) | [Piloting](~'+attributes.character_name+'|piloting)}}'
                +'{{buttons2=SOCIAL\n[Bluff](~'+attributes.character_name+'|bluff) | [Diplomacy](~'+attributes.character_name+'|diplomacy) | [Disguise](~'+attributes.character_name+'|disguise) | [Intimidate](~'+attributes.character_name+'|intimidate) | [Sense Motive](~'+attributes.character_name+'|sense_motive)}}'
                +'{{buttons3=THIEVERY\n[Sleight of Hand](~'+attributes.character_name+'|sleight_of_hand) | [Stealth](~'+attributes.character_name+'|stealth)}}'
                +'{{buttons4=KNOWLEDGE\n[Computers](~'+attributes.character_name+'|computers) | [Culture](~'+attributes.character_name+'|culture) | [Engineering](~'+attributes.character_name+'|engineering) | [Life Science](~'+attributes.character_name+'|life_science) | [Medicine](~'+attributes.character_name+'|medicine) | [Mysticism](~'+attributes.character_name+'|mysticism) | [Physical Science](~'+attributes.character_name+'|physical_science) | [Survival](~'+attributes.character_name+'|survival)}}';
            let professionMenu='{{buttons5=PROFESSION\n'
            sectionIDs=_.chain(_.keys(attributes))
                .reduce((m,a)=>{
                    if(a.match(/repeating_profession/)){
                        m.push(a.replace(/repeating_profession_(-[^_]+)_.*/,'$1'));
                    }
                    return m;
                },[])
                .uniq()
                .value();
            _.each(sectionIDs,(id)=>{
                let preRepeat ='repeating_profession_'+id+'_';
                if(professionMenu!=='{{buttons5=PROFESSION\n'){
                    professionMenu+=' |';
                }
                professionMenu+='['+HE(attributes[preRepeat+'name'])+'](~'+attributes.character_name+'|'+preRepeat+'roll)';
            });
            professionMenu+='}}';
            setObj.skills_menu+=professionMenu.replace(/PROFESSION\n}}/,'');
            return setObj;
        },
        
        parseBuffs = function(attributes){
            var modRegex = /((?:\+|\-)?.*?(?=(?:[a-z\s]+)?\s+to\s+))(?:\s+([a-z\s]+))?\s+to\s+([^\n]+)/i,//allow wrapping of equation in ()'s
                buffSplit,buffMatch,buff,buffType,buffed,evalBuff,
                buffFields = _.chain(_.keys(attributes))
                    .filter((k)=>{
                        return k.match(/repeating_(?:item_-[^_]+_mods|buff_-[^_]+_mods|ability_-[^_]+_mods)/);
                    })
                    .filter((k)=>{
                        let typeSwitch = {
                               'item':(p1)=>[p1+'equipped'],
                               'buff':(p1)=>[p1+'toggle'],
                               'ability':(p1)=>[p1+'toggle',p1+'frequency']
                            };
                        let typeMatch = k.match(/(repeating_(item|buff|ability)_-[^_]+_)mods/);
                        return _.some(typeSwitch[typeMatch[2]](typeMatch[1]),(ts)=>{
                            return (attributes[ts]+'').match(/enabled|equipped|constant/);
                        });
                    })
                    .map((k)=>{
                        return attributes[k];
                    })
                    .reject((f)=>{return _.isEmpty(f)})
                    .reduce((memo,f)=>{
                        buffSplit = f.split(/\s*\n\s*/);
                        memo=memo.concat(buffSplit);
                        return memo;
                    },[])
                    .reduce((memo,f)=>{
                        buffMatch = f.match(modRegex);
                        if(buffMatch){
                            buff = buffMatch[1].toLowerCase();
                            buffed = buffMatch[3].toLowerCase().split(/\s+and\s+/);
                            buffType = buffMatch[2] ? buffMatch[2].toLowerCase().replace(/max dex/i,'max_dex') :'untyped';
                            _.each(buffed,(b)=>{
                                if((b==='eac'||b==='kac')&&buffType==='armor'){
                                    b+='_armor';
                                }else if(b==='sp'||b==='rp'||b==='hp'||b.match(/temp[^\s]*\s*hp/)){
                                    b+='_max';
                                }
                                b=b.replace(/\s+/g,'_');
                                if(b.startsWith('category:')){
                                    b=b.replace(/category:_?/,'');
                                    memo.categories[b]=memo.categories[b]||{};
                                    memo.categories[b][buffType]=memo.categories[b][buffType]||[];
                                    memo.categories[b][buffType].push(buff);
                                }else if(b.match(/^(?:ac|armor)$/i)){
                                    memo.eac=memo.eac||{};
                                    memo.eac[buffType]=memo.eac[buffType]||[];
                                    memo.eac[buffType].push(buff);
                                    memo.kac=memo.kac||{};
                                    memo.kac[buffType]=memo.kac[buffType]||[];
                                    memo.kac[buffType].push(buff);
                                }else if(b.match(/^skills?$/i)){
                                    _.each(skillList,(skill)=>{
                                        memo[skill]=memo[skill]||{};
                                        memo[skill][buffType]=memo[skill][buffType]||[];
                                        memo[skill][buffType].push(buff);
                                    });
                                }else if(b==='acp'){
                                    memo[b]=memo[b]||{};
                                    memo[b].acp=memo[b].acp||[];
                                    memo[b].acp.push(buff);
                                }else if(b==='saves'){
                                    _.each(['fort','ref','will'],(save)=>{
                                        memo[save]=memo[save]||{};
                                        memo[save][buffType]=memo[save][buffType]||[];
                                        memo[save][buffType].push(buff);
                                    });
                                }else{
                                    memo[b]=memo[b]||{};
                                    memo[b][buffType]=memo[b][buffType]||[];
                                    memo[b][buffType].push(buff);
                                }
                            });
                        }
                        return memo;
                    },{})
                    .value();
            return buffFields;
        },
        
        starfinderMax = function(){
            if(arguments[0]===true){
                return _.min(_.rest(arguments));
            }else{
                return _.max(_.rest(arguments));
            }
        },
        
        calcBuffs = function(attributes,bonus,setObj){
            var tObj,evalBuff, redAttr = _.reduce(_.keys(bonus),(memo,t)=>{
                tObj = _.reduce(bonus[t],(m,b)=>{
                    evalBuff=(b+'').replace(/(floor|ceil|abs|round|abs)\(/,'Math.$1(').replace(/@{([^}]+)}/,(match,p1)=>{
                        return setObj[p1.toLowerCase()]*1 || attributes[p1.toLowerCase()]*1||'@{'+p1+'}';
                    });
                    try{
                        evalBuff=eval(evalBuff);
                        if(evalBuff>=0){
                            if(t==='armor'){
                                m.armor=starfinderMax(false,m.armor,evalBuff);
                            }else if(t==='max_dex'){
                                m.max_dex=starfinderMax(true,m.max_dex,evalBuff);
                            }else if(_.contains((attributes.stackable_buffs.toLowerCase()+',untyped').split(/\s*(?:,|\n+)\s*/),t.toLowerCase())){
                                m.buff+=evalBuff;
                            }else{
                                m.buff=starfinderMax(false,m.buff,evalBuff);
                            }
                        }else if(evalBuff<0){
                            if(t==='acp'){
                                m.acp=starfinderMax(true,m.acp,evalBuff);
                            }else{
                                m.pen+=evalBuff;
                            }
                        }
                    }catch(err){}
                    if(_.contains((attributes.stackable_buffs.toLowerCase()+',untyped').split(/\s*(?:,|\n+)\s*/),t.toLowerCase())){
                        m.misc+=(m.misc==='' ?'' :'+')+(b+'').replace(/^\+/,'');
                    }else if((b+'').length>0){
                        m.misc+=(m.misc==='' ?'' :',')+'[['+(b+'').replace(/^\+/,'')+']]'
                    }
                    return m;
                },{buff:0,pen:0,misc:'',armor:0,acp:0});
                memo.total+=tObj.buff+tObj.pen+tObj.acp;
                if(_.contains((attributes.stackable_buffs.toLowerCase()+',untyped').split(/\s*(?:,|\n+)\s*/),t.toLowerCase())&&tObj.misc.length>1){
                    memo.misc+='+[['+tObj.misc+']]['+t+']';
                }else{
                    if(tObj.misc.length>1){
                        memo.misc+='+[[{'+tObj.misc+'}k'+(t==='acp' ?'l' :'h')+'1]]['+t+']';
                    }
                }
                memo.armor=starfinderMax(false,memo.armor,tObj.armor);
                if(_.isNumber(tObj.max_dex*1)){
                    memo.max_dex=starfinderMax(true,memo.max_dex,tObj.max_dex);
                }
                return memo;
            },{total:0,misc:'',armor:0});
            return redAttr;
        },
        
        applyBuffs = function(attributes,bonus,setObj){
            var bTotal, sectionIDs, repeatFormat, repeatIDs,armbTotal,rpAbility,specificBonus,abilityMax,
                levelClass=0,
                bonusKeys = _.keys(bonus),
                convertProgress = {
                   'half':(lvl)=>lvl >= 13 ? 4 : lvl >= 10 ? 3 : lvl >= 7 ? 2 : lvl >= 4 ? 1 : 0,
                   'partial':(lvl)=> lvl >= 16 ? 6 : lvl >= 13 ? 5 : lvl >= 10 ? 4 : lvl >= 7 ? 3 : lvl >= 4 ? 2 : lvl >= 1 ? 1 : 0,
                   'full_prep':(lvl)=>Math.min(Math.floor((lvl+ 1)/2),9),
                   'full_spont':(lvl)=>lvl*1===1 ? 1 : Math.floor(lvl/2)
                },
                objSwitch = {
                   'pc':attributeObjs,
                   'npc':npcAttributeObjs,
                   'ship':{}
                };
            //Caster Class buffing
            if((setObj.is_caster||attributes.is_caster)&&setObj.is_caster!==0){
                setObj.caster_level=0;
                setObj=_.reduce([1,2,3,4,5],(memo,n)=>{
                    let preClass='class_'+n;
                    if(attributes[preClass+'_spells']*1===1){
                        memo['caster_level']+=(attributes[preClass+'_level']*1||0);
                        memo[preClass+'_show']=1;
                        memo[preClass+'_max_spell']=convertProgress[attributes[preClass+'_spell_progression']](attributes[preClass+'_level']*1)||0;
                    }else{
                        memo[preClass+'_show']=0;
                        memo[preClass+'_max_spell']=0;
                    }
                    memo.char_max_spell = _.max([memo.char_max_spell,memo[preClass+'_max_spell'],0]);
                    return memo;
                },setObj);
                _.each([1,2],(n)=>{
                    setObj['char_max_spell_'+n]=setObj.char_max_spell;
                });
                bTotal=calcBuffs(attributes,bonus.caster_level,setObj).total;
                if(setObj.caster_level>0){
                    setObj.caster_level+=bTotal;
                    setObj.caster_level_change=bTotal > 0 ? 1 : bTotal < 0 ? -1 : 0;
                }
            }
            //strength handling
            /*
                {
                    repeating:false,
                    attr:'strength',
                    numAdds: 0,
                    attrAdds: ['strength_base','strength_drain','strength_penalty'],
                    multAdds: [1,-1,0.5],
                    addlBonus: [],
                    ability:false,
                    repeatTextAdds:[],
                    repeatAdds:[],
                    textAdds:[],
                    moddable:'_change',
                    rollTime:'_misc',
                },*/
            if(attributes.sheet_type==='pc'){
                specificBonus=calcBuffs(attributes,bonus.strength,setObj);
                bTotal = specificBonus.total;
                setObj.strength = (attributes.strength_base*1||0) - (Math.abs(attributes.strength_drain*1||0)) + bTotal;
                setObj.strength_misc = specificBonus.misc;
                setObj.strength_change = bTotal > 0 ? 1 : (bTotal < 0 ? -1 : 0);
                //Encumbrance
                setObj.carried_bulk = 0;
                setObj.wealth=0;
                setObj = _.reduce(_.keys(attributes),(memo,a)=>{
                    let aMatch =a.match(/repeating_item_-[^_]+_(bulk|cost)/);
                    if(aMatch){
                        if(aMatch[1]==='bulk' && attributes[a.replace(/bulk/,'equipped')]!=='not carried'){
                            memo.carried_bulk = memo.carried_bulk + ((attributes[a]+'').match(/l/i) ? 0.1 : attributes[a]*1||0)*attributes[a.replace(/bulk/,'quantity')]||0;
                        }else if(aMatch[1]==='cost'){
                            memo.wealth=memo.wealth + (attributes[a]*1||0)*attributes[a.replace(/cost/,'quantity')]||0;
                        }
                    }
                    return memo;
                },setObj);
                setObj.carried_bulk=Math.floor(setObj.carried_bulk)||0;
                bTotal=calcBuffs(attributes,bonus.encumber_bulk,setObj).total;
                setObj.encumber_bulk = Math.floor(setObj.strength/2)+bTotal;
                setObj.encumber_bulk_change=bTotal > 0 ? 1 : (bTotal < 0 ? -1 : 0);
                bTotal=calcBuffs(attributes,bonus.overburden_bulk,setObj).total;
                setObj.overburden_bulk = (setObj.strength*1||0)+bTotal;
                setObj.overburden_bulk_change=bTotal > 0 ? 1 : (bTotal < 0 ? -1 : 0);
                setObj.encumber_level = Math.min(Math.floor(setObj.carried_bulk/setObj.encumber_bulk),1)+Math.min(Math.floor(setObj.carried_bulk/setObj.overburden_bulk),1);
                bonus.eac = bonus.eac || {};
                bonus.kac = bonus.kac || {};
                bonus.eac.max_dex = bonus.eac.max_dex || [];
                bonus.kac.max_dex = bonus.kac.max_dex || [];
                bonus.acp = bonus.acp || {acp:[]};
                if(setObj.encumber_level > 0){
                    bonus.acp.acp.push(-5);
                    if(setObj.encumber_level>1){
                        bonus.eac.max_dex.push(0);
                        bonus.kac.max_dex.push(0);
                    }else{
                        bonus.eac.max_dex.push(2);
                        bonus.kac.max_dex.push(2);
                    }
                }
            }
            _.each(objSwitch[attributes.sheet_type],(obj)=>{
                let repeatAddition = obj.repeating ?'repeating_'+obj.repeating+'_' :'';
                let repeatIDs = repeatAddition==='' ? [''] : _.reduce(_.keys(attributes),(memo,k)=>{
                    if(k.match(repeatAddition)){
                        let kMatch = k.match(new RegExp(repeatAddition+'\-[^_]+_'));
                        if(kMatch){
                            if(!_.contains(memo,kMatch[0])){
                                memo.push(kMatch[0]);
                            }
                        }
                    }
                    return memo;
                },[]);
                if(!_.isEmpty(repeatIDs)){
                    setObj = _.reduce(repeatIDs,(memo,id) =>{
                        if(obj.attr==='rp_max'){
                            if(attributes.resolve_source==='key'){
                                rpAbility=_.reduce([1,2,3,4,5],(m,n)=>{
                                    if(attributes['class_'+n+'_level']>0){
                                        m = _.max([m,(setObj[attributes['class_'+n+'_ability'].replace(/@{|}/g,'')]*1||attributes[attributes['class_'+n+'_ability'].replace(/@{|}/g,'')]*1)]);
                                    }
                                    return m;
                                },0);
                            }else{
                                rpAbility=_.max([setObj.strength_mod,setObj.dexterity_mod,setObj.constitution_mod,setObj.intelligence_mod,setObj.wisdom_mod,setObj.charisma_mod,0],(v)=>{return v*1});
                            }
                        }else{
                            rpAbility=0;
                        }
                        bTotal=0;
                        let attributeMod=setObj[(setObj[id+obj.ability]+'').replace(/@{|}/g,'')]*1||setObj[(attributes[id+obj.ability]+'').replace(/@{|}/g,'')]*1||attributes[(attributes[id+obj.ability]+'').replace(/@{|}/g,'')]*1||rpAbility*1;
                        if(obj.moddable){
                            specificBonus = bonus[obj.attr] || {};
                            _.each(bonusKeys,(k)=>{
                                if(k.startsWith(obj.attr+'|')||(k.startsWith('attack')&&obj.attr.match(/(?:attack_|^)total/))||(k.startsWith('damage')&&obj.attr.match(/damage_total/))){
                                    let kSplit = k.replace(/[^|]+\|/,'').split(/\s*,\s*/g);
                                    let objSpec = _.reduce(kSplit,(m,s)=>{
                                        let sSplit = s.split(/:/);
                                        if(sSplit[1]){
                                            m[sSplit[0]]=sSplit[1].replace(/_/g,'');
                                        }
                                        return m;
                                    },{});
                                    if(_.isEmpty(objSpec)||_.every(_.keys(objSpec),(os)=>{return (setObj[id+os] ? (setObj[id+os]+'').toLowerCase()===objSpec[os].toLowerCase() : (attributes[id+os]+'').toLowerCase()===objSpec[os].toLowerCase())})){
                                        _.each(_.keys(bonus[k]),(sk)=>{
                                            specificBonus[sk]=specificBonus[sk] || [];
                                            specificBonus[sk]=specificBonus[sk].concat(bonus[k][sk]);
                                        });
                                    }
                                }
                            });
                            if(attributes[id+(obj.repeating ?'acp' : obj.attr+'_acp')]*1===1){
                                specificBonus.acp=bonus.acp;
                            }
                            specificBonus = calcBuffs(attributes,specificBonus,setObj);
                            if(obj.rollTime){
                                memo[id+obj.attr.replace(/total|profession|_npc/,'')+obj.rollTime]=specificBonus.misc||'';
                            }
                            abilityMax = _.min([attributeMod,specificBonus.max_dex*1]);
                            let abilityDiff = abilityMax - attributeMod;
                            bTotal = specificBonus.total;
                            if(obj.moddable!==true){
                                memo[id+obj.attr.replace(/_max|profession|/,'')+obj.moddable]=(bTotal+abilityDiff) > 0 ? 1 : ((bTotal+abilityDiff) < 0 ? -1 : 0);
                            }
                        }else{
                            abilityMax = attributeMod;
                        }
                        if(attributes.sheet_type==='npc'&&obj.isSkill){
                            abilityMax=abilityMax*-1
                        }
                        let memoNum = _.reduce(obj.repeatParseField,(m,add)=>{
                                    let calculated = calcBuffs(attributes,{untyped:[attributes[id+add]]},setObj).total
                                    return m + calculated;
                                },0)
                                +abilityMax
                                +obj.numAdds
                                +_.reduce(_.range(obj.attrAdds.length),(m,add)=>{
                                    let csMatch = obj.attrAdds[add].match('class_skill');
                                    if(obj.attr==='dc' && obj.attrAdds[add]==='lvl'){
                                        if(obj.repeating==='ability'){
                                            levelClass = _.reduce([1,2,3,4,5],(mem,n)=>{
                                                if(attributes['class_'+n+'_name'].toLowerCase()===attributes[id+'source'].toLowerCase()){
                                                    mem=attributes['class_'+n+'_level']*1||0;
                                                }
                                                if(n===5 && m.length===0){
                                                    mem=attributes.character_level;
                                                }
                                                return mem;
                                            },0);
                                        }
                                    }
                                    if(attributes.sheet_type==='npc' && obj.isSkill){
                                        if(!attributes[obj.attrAdds[add]]*1){
                                            return 0;
                                        }else{
                                            return attributes[obj.attrAdds[add]]*1-rpAbility*1;
                                        }
                                    }else if(!csMatch || attributes[obj.attrAdds[add].replace(/class_skill/,'ranks')]*1>0){
                                        if(obj.attrAdds[add].match(/(?:strength|dexterity|constitution|intelligence|wisdom|charisma)_(?:penalty|drain)/)){
                                            return m-Math.abs(Math.floor((setObj[obj.attrAdds[add]]*1||(setObj[obj.attrAdds[add]]*1===0 ? 0 : (attributes[obj.attrAdds[add]]*1||levelClass||0)))*(obj.multAdds[add]*1||setObj[obj.multAdds[add]]*1||attributes[obj.multAdds[add]]*1||1)));
                                        }else{
                                            return m+Math.floor((setObj[obj.attrAdds[add]]*1||(setObj[obj.attrAdds[add]]*1===0 ? 0 : (attributes[obj.attrAdds[add]]*1||levelClass||0)))*(obj.multAdds[add]*1||setObj[obj.multAdds[add]]*1||attributes[obj.multAdds[add]]*1||1));
                                        }
                                    }else{
                                        return m;
                                    }
                                },0)
                                +_.reduce(obj.repeatAdds,(m,add)=>{
                                    let csMatch = add.match('class_skill');
                                    if(!csMatch || attributes[id+add.replace(/class_skill/,'ranks')]*1>0){
                                        m+=(setObj[id+add]*1||attributes[id+add]*1||0);
                                    }
                                    return m;
                                },0)
                                +bTotal
                                +_.reduce(obj.addlBonus,(m,add)=>{
                                    return m+(specificBonus[add]*1||0);
                                },0)
                                +(attributes.sheet_type==='pc' ? (obj.attr==='total' && attributes[id+'proficiency']==='no' ? -4 : (obj.attr==='damage_total' && attributes[id+'proficiency']==='specialized' ? (_.contains(attributes.half_specializations.toLowerCase().split(/\s*,\s*|\s*(?:,)?\n\s*/),attributes[id+'category'].toLowerCase()) ? Math.floor((setObj.character_level||attributes.character_level)/2) : setObj.character_level*1||attributes.character_level*1):0)) : obj.attr==='damage_total' && attributes[id+'proficiency']==='specialized' ? attributes.cr*1 || 0 : 0);
                        if((obj.repeating==='attack' && obj.attr==='total')||((obj.repeating==='ability'||obj.repeating==='spell')&&obj.attr==='attack_total')){
                            memoNum= memoNum>=0 ?'+'+memoNum : memoNum;
                        }
                        let memoText=_.reduce(obj.repeatTextAdds,(m,add)=>{
                                return m+(setObj[id+add]||attributes[id+add]||'')
                            },'')
                            +_.reduce(obj.textAdds,(m,add)=>{
                                return m+(setObj[add]*1||attributes[add]||'')
                            },'');
                        memo[id+obj.attr]=_.chain([memoText,memoNum])
                            .reject((m)=>{return(!m&&m!==0)||m===''})
                            .value().join(' +').replace(/\s*\+\s*0/,'');
                        if(obj.attr.match(/_filter/) && obj.repeating==='spell'){
                            memo[id+obj.attr]=Math.min(Math.max(memo[id+obj.attr]*1||0,0),9);
                            memo[id+obj.attr]=memo[id+obj.attr]*1===0 ?'cantrip' : memo[id+obj.attr];
                        }else if((obj.attr==='total' || obj.attr==='damage_total')&&obj.repeating==='attack'){
                            if(attributes[id+'proficiency']==='no'){
                                memo[id+'proficiency_value']=-4;
                                memo[id+'damage_proficiency_value']=0;
                            }else if(attributes[id+'proficiency']==='specialized'){
                                if(attributes[id+'category'].match(/small arms|operative/i) && attributes.sheet_type==='pc'){
                                    memo[id+'proficiency_value']=0;
                                    memo[id+'damage_proficiency_value']=Math.floor((setObj.character_level*1||attributes.character_level*1)/2);
                                }else{
                                    memo[id+'damage_proficiency_value']=attributes.sheet_type==='pc' ? setObj.character_level*1||attributes.character_level*1 : attributes.cr*1||0;
                                }
                            }else{
                                memo[id+'proficiency_value']=0;
                                memo[id+'damage_proficiency_value']=0;
                            }
                        }
                        return memo;
                    },setObj);
                }
            });
            if(attributes.sheet_type==='pc'){
                let skillRanks = _.filter(_.keys(attributes),(a)=>{return a.match(/_ranks/)});
                setObj.skill_points=_.reduce(skillRanks,(memo,r)=>{
                    return memo+(attributes[r]*1||0);
                },0);
                bTotal = calcBuffs(attributes,bonus.skill_points_max,setObj).total;
                setObj.skill_points_max = bTotal;
                setObj = _.reduce([1,2,3,4,5],(memo,n)=>{
                    memo.skill_points_max+=(attributes['class_'+n+'_skills']*attributes['class_'+n+'_level']||0)+(setObj.intelligence_mod*attributes['class_'+n+'_level']||0);
                    return memo;
                },setObj);
                setObj.skill_points_change = bTotal > 0 ? 1 : bTotal < 0 ? -1 : 0;
                if(attributes.drone*1===1){
                    setObj.sp_max=0;
                    setObj.hp_max=_.reduce(_.range(1,(setObj.character_level*1||attributes.character_level*1||0) + 1),(memo,l)=>{
                        return memo + 10*(1+Math.floor(l/18));
                    },0);
                    setObj.rp_max=0;
                }else{
                    setObj.rp_max=Math.max((setObj.rp_max*1+Math.max(Math.floor((setObj.character_level*1||attributes.character_level*1||0)/2),1)),1);
                }
                setObj.sp=(attributes.sp*1||0)+((setObj.sp_max*1-attributes.sp_max*1)*1||0);
                setObj.hp=(attributes.hp*1||0)+((setObj.hp_max*1-attributes.hp_max*1)*1||0);
                setObj.rp=(attributes.rp*1||0)+((setObj.rp_max*1-attributes.rp_max*1)*1||0);
                setObj.temp_hp=(attributes.temp_hp*1||0)+(setObj.temp_hp_max*1-attributes.temp_hp_max*1);
            }
            setObj=buildMenus(attributes,setObj);
            setAttrs(setObj,{silent:true});
        },
        
        statblockParse = function(event){
            if(event.sourceType==='sheetworker'){
                return;
            }
            if(event.sourceAttribute==='import'){
                importStatblock();
            }else{
                exportStatblock();
            }
        },
        
        importStatblock = function(){
            var statblockRegex = /(.*?) \(?CR\s*(\d[\/\d]*)\)?\n+XP\s*([^\n]+)\n+(?:([^\n]+)\n+)?(LG|NG|CG|LN|N|CE|LE|NE|CN)\s+([^\s]+)\s+([^\n]+)\n+init\s*[+-]?(\d+);\s*(?:senses\s*([^;]+);\s*)?perception\s*[+-]?(\d+)\n+(?:aura\s+([^\n]+)\n+)?defen[sc]e\s+hp\s*(\d+)(?:\s+rp\s*(\d+))?\n+eac\s*(\d+);\s*kac\s*(\d+)(?:;\s*([^\n]+))?\n+fort\s*[+-]?(\d+);\s*ref\s*[+-]?(\d+);\s*will\s*[+-]?(\d+)(?:;\s*([^\n]+))?\n+(?:(?:defensive abilities\s+([^;]+))?(?:;\s*)?(?:DR\s*([^;]+))?(?:;\s*)?(?:immunities\s*([^;]+))?(?:;\s*)?(?:resistances\s*([^;]+))?(?:;\s*)?(?:SR\s*([^\n]+))?\s+)?(?:weaknesses\s*([^\n]+)\n+)?offen[cs]e\n+speed\s*([^\n]+)\n+(?:melee\s*([^\n]+)\n+)?(?:multiattack\s*([^\n]+)\n+)?(?:ranged\s*([^\n]+)\n+)?(?:(?:space\s*([^;\n]+))?(?:;\s*reach\s*([^\n]+))?\n+)?(?:offensive abilities\s*([^\n]+)\n+)?(?:spell-?like\s+abilities\s*\(cl\s*(\d+)[^)]+\)\n+((?:.|\n)*?(?=\n.*?(?=spells)spells|statistics))\n+)?(?:(.*?)(?=spells)spells\s+known\s*\(cl\s*(\d+)[^)]+\)\n+((?:.|\n)*?(?=statistics)))?statistics\n+str\s*\+?([-]?\d+|[-]);\s*dex\s*\+?([-]?\d+|[-]);\s*con\s*\+?([-]?\d+|[-]);\s*int\s*\+?([-]?\d+|[-]);\s*wis\s*\+?([-]?\d+|[-]);\s*cha\s*\+?([-]?\d+|[-])\n+(?:skills\s*([^\n]+)\n+)?(?:feats\s*([^\n]+)\n+)?(?:languages\s*([^\n]+)\n+)?(?:other abilities\s*([^\n]+)\n+)?(?:gear\s*([^\n]+)\n+)?(?:ecology\n+(?:environment\s+([^\n]+)\n+)?(?:organization\s*([^\n]+)\n+)?)?(?:special abilities\n+((?:.|\n)+))?/i,
                abilityRegex = {
                    33:/([^,\n]+?(?=\s*\([^)]+\)|,|$))\s*(?:\((?:(\d+\-?ft).\s*(line|cone|burst|emanation|spread|cube)?,?)?\s*(?:(\d+d\d+[+\-\d\s]*)\s*(\w+)?,?)?\s*(?:(ref|fort|will|reflex|fortitude)?\s*dc\s*(\d+)\s*(\w+)?,?)?\s*([^)]+)?\))?/,
                    35:/([^,\n]+?(?=\s*\([^)]+\)|,|$))\s*(?:\((?:dc\s*(\d+))?\s*,?\s*(?:(\d)(?:st|th|nd)\s*[\-]\s*level)?\))?/,
                    52:/(.+)\s*\((su|sp|ex)\)\s*([\s\S]+)/,
                },
                sizeConvert = {
                    fine:-4,
                    diminuitive:-3,
                    tiny:-2,
                    small:-1,
                    medium:0,
                    large:1,
                    huge:2,
                    gargantuan:3,
                    colossal:4,
                },
                skillAbilities={
                   'acrobatics':'dexterity_mod',
                   'athletics':'strength_mod',
                   'bluff':'charisma_mod',
                   'computers':'intelligence_mod',
                   'culture':'intelligence_mod',
                   'diplomacy':'charisma_mod',
                   'disguise':'charisma_mod',
                   'engineering':'intelligence_mod',
                   'intimidate':'charisma_mod',
                   'life_science':'intelligence_mod',
                   'medicine':'intelligence_mod',
                   'mysticism':'wisdom_mod',
                   'perception':'wisdom_mod',
                   'physical_science':'intelligence_mod',
                   'piloting':'dexterity_mod',
                   'sense_motive':'wisdom_mod',
                   'sleight_of_hand':'dexterity_mod',
                   'stealth':'dexterity_mod',
                   'survival':'wisdom_mod'
                },
                abilityArr=[],
                attackRegex = /(.+?)\s*([+-]\d+)\s*\(\s*(\d+d\d+)\s*([+-]\d+)?\s*([^;]+)?(?:;\s*critical\s*([^)]+))?\)/i,
                setObj={},
                nsetObj={},
                statblockMatch,melee,ranged,multiattack,rowID,attackMatch,
                cloneRepAttr = JSON.parse(JSON.stringify(repeatingAttributes)),
                removeRows = (rows) =>{
                    _.each(rows,(r)=>{
                        _.each(r.id,(id)=>{
                            removeRepeatingRow('repeating_'+r.section+'_'+id);
                        });
                    });
                    getAttrs(['statblock','statblock_source'],(objs)=>{
                        objs.statblock=objs.statblock.replace(/\s+\n/g,'\n');
                        if(objs.statblock_source==='srd'){
                            objs.statblock=objs.statblock.replace(/(special abilities(?:.|\n)+)(ecology(?:.|\n)+)/i,'$2\n$1');
                        }
                        statblockMatch = objs.statblock.replace(/\s+\n/g,'\n').match(statblockRegex);
                        if(statblockMatch){
                            setObj={
                                character_name:statblockMatch[1]||'',
                                cr:statblockMatch[2]||1,
                                xp:(statblockMatch[3]||'').replace(/,/g,''),
                                race:statblockMatch[4]||'',
                                alignment:statblockMatch[5]||'',
                                size:sizeConvert[(statblockMatch[6]||'').toLowerCase()]||0,
                                type_subtype:statblockMatch[7]||'',
                                initiative:statblockMatch[8]||0,
                                senses:statblockMatch[9]||'',
                                perception:statblockMatch[10]||0,
                                aura:statblockMatch[11]||'',
                                hp_max:statblockMatch[12]||0,
                                rp_max:statblockMatch[13]||0,
                                hp:statblockMatch[12]||0,
                                rp:statblockMatch[13]||0,
                                eac:statblockMatch[14]||0,
                                kac:statblockMatch[15]||0,
                                ac_notes:statblockMatch[16]||'',
                                fort:statblockMatch[17]||0,
                                ref:statblockMatch[18]||0,
                                will:statblockMatch[19]||0,
                                save_notes:statblockMatch[20]||'',
                                defensive_abilities:statblockMatch[21]||'',
                                dr:statblockMatch[22]||'',
                                immunities:statblockMatch[23]||'',
                                resistances:statblockMatch[24]||'',
                                sr:statblockMatch[25]||'',
                                weaknesses:statblockMatch[26]||'',
                                speed:statblockMatch[27]||'',
                                space:statblockMatch[31]||'',
                                reach:statblockMatch[32]||'',
                                caster_level:statblockMatch[37]||0,
                                strength_mod:statblockMatch[39]||0,
                                dexterity_mod:statblockMatch[40]||0,
                                constitution_mod:statblockMatch[41]||0,
                                intelligence_mod:statblockMatch[42]||0,
                                wisdom_mod:statblockMatch[43]||0,
                                charisma_mod:statblockMatch[44]||0,
                                feats:statblockMatch[46]||'',
                                languages:statblockMatch[47]||'',
                                other_abilities:statblockMatch[48]||'',
                                gear:statblockMatch[49],
                                environment:statblockMatch[50]||'',
                                organization:statblockMatch[51]||'',
                            };
                            //Melee attacks: statblockMatch[28]
                            //ranged attacks: statblockMatch[30]
                            _.each([28,30],(n)=>{
                                if(statblockMatch[n]){
                                    melee=statblockMatch[n].split(/\s*,\s*/);
                                    _.each(melee,(m)=>{
                                        rowID ='repeating_attack_'+generateRowID()+'_';
                                        attackMatch = m.match(attackRegex);
                                        if(attackMatch){
                                            setObj[rowID+'show_options']=0;
                                            setObj[rowID+'range_filter']=n===28 ?'melee' :'ranged';
                                            setObj[rowID+'engagement_range']=n===28 ?'melee' :'ranged';
                                            setObj[rowID+'name']=attackMatch[1];
                                            //attack values
                                            setObj[rowID+'ability']=(n===28 ?'@{strength_mod}' :'@{dexterity_mod}');
                                            setObj[rowID+'proficiency_value']=0;
                                            setObj[rowID+'total']=attackMatch[2];
                                            setObj[rowID+'bab']=setObj[rowID+'total'].replace(/\+/,'')*1-(n===28 ? setObj.strength_mod*1||0 : setObj.dexterity_mod*1||0);
                                            //damage values
                                            setObj[rowID+'damage_ability']=(n===28 ?'@{strength_mod}' :'');
                                            setObj[rowID+'proficiency']='specialized';
                                            setObj[rowID+'damage_proficiency_value']=setObj.cr*1||0;
                                            let damageBonus = (attackMatch[4]*1||0)-setObj[rowID+'damage_proficiency_value']-(n===28 ? setObj.strength_mod*1||0 : 0);
                                            setObj[rowID+'damage_dice']=attackMatch[3]+(damageBonus!==0 ? (damageBonus>0 ?'+' :'')+damageBonus :'');
                                            let totDamageBonus = (setObj[rowID+'damage_proficiency_value']*1+(n===28 ? setObj.strength_mod*1||0 : 0));
                                            setObj[rowID+'damage_total']=setObj[rowID+'damage_dice']+(totDamageBonus !== 0 ? (totDamageBonus > 0 ?'+' :'')+totDamageBonus :'');
                                            setObj[rowID+'type']=attackMatch[5];
                                            if(attackMatch[6]){
                                                setObj[rowID+'crit']=attackMatch[6].replace(/((?:\d+d\d+)(?:[+-]\d+)?)/g,'[[$1]]');
                                            }
                                        }
                                    });
                                }
                            });
                            //multiattack: statblockMatch[29] - Need to figure this out
                            
                            //spell handling
                            if(statblockMatch[38]){
                                statblockMatch[38]=statblockMatch[38].match(/\d(?:st|th|nd)\s*\(\d+\/day\)[\-].*$/igm);
                                _.each(statblockMatch[38],(sl)=>{
                                    sl=sl.match(/(\d)(?:st|th|nd)\s*\((\d+)\/day\)[\-](.*)/i);
                                    _.each(sl[3].split(/,/g),(spell)=>{
                                        spell = spell.match(/(.+?(?=\(dc|$))(?:\(dc\s*(\d+)\))?/i);
                                        rowID ='repeating_spell_'+generateRowID()+'_';
                                        setObj[rowID+'level']=sl[1];
                                        setObj[rowID+'name']=spell[1];
                                        setObj[rowID+'dc']=spell[2]*1||10;
                                        setObj[rowID+'dc_base']=spell[2]*1||10;
                                        if(setObj[rowID+'dc']){
                                            setObj[rowID+'save_checkbox']=1;
                                        }
                                        setObj[rowID+'show_options']=0;
                                    });
                                });
                            }
                            
                            //skill handling
                            if(statblockMatch[45]){
                                _.each(statblockMatch[45].trim().toLowerCase().split(/,\s*/),(skill)=>{
                                    let skillMatch = skill.match(/\s?([\w\s]+?)\s*\+?(\-?\d+)/);
                                    if(skillMatch){
                                        if(_.contains(_.keys(skillAbilities),skillMatch[1])){
                                            setObj[skillMatch[1]]=skillMatch[2];
                                            setObj[skillMatch[1]+'_ranks']=skillMatch[2]-setObj[skillAbilities[skillMatch[1]]];
                                        }
                                    }
                                });
                            }
                            setObj['perception_ranks']=(setObj['perception']*1||0)-setObj[skillAbilities['perception']]*1;
                            //ability handling
                            _.each([33,35,52],(n)=>{
                                if(statblockMatch[n]){//offensive abilities
                                    let abilitySplit = /NOSPLKuROhYOUITHERE/;
                                    if(n===35){
                                        abilitySplit = /\n+/;
                                    }else if(n===52){
                                        statblockMatch[n]=statblockMatch[n].replace(/\n+(.+\((?:su|ex|sp)\))/ig,'\nSPLITHERE\n$1');
                                        abilitySplit = /\nSPLITHERE\n/;
                                    }
                                    statblockMatch[n]=statblockMatch[n].split(abilitySplit);
                                    _.each(statblockMatch[n],(abi)=>{
                                        let use = n===35 ? abi.match(/at\s+will|constant|\d+\/day/i) :'undefined';
                                        if(use!==''){
                                            abi = abi.replace(new RegExp(use[0]+'\s*[-]\s*'),'');
                                            use = use[0].match(/\d+\/day/i) ?'daily limit' : use[0].toLowerCase();
                                        }
                                        let oAbil = abi.match(new RegExp(abilityRegex[n],'ig'));
                                        if(oAbil){
                                            _.each(oAbil,(a)=>{
                                                let aMatch = a.match(new RegExp(abilityRegex[n],'i'));
                                                let aObj={};
                                                if(n===33){
                                                    aObj={
                                                        name:aMatch[1].trim(),
                                                        range:aMatch[2],
                                                        shape:aMatch[3],
                                                        damage_dice:aMatch[4],
                                                        damage_type:aMatch[5],
                                                        save_type:aMatch[6],
                                                        dc:aMatch[7],
                                                        save_effect:aMatch[8],
                                                        description:aMatch[9],
                                                        source:'Offensive Ability'
                                                    };
                                                }else if(n===35){
                                                    aObj={
                                                        name:aMatch[1].trim(),
                                                        dc:aMatch[2],
                                                        level:aMatch[3],
                                                        frequency:use==='' ?'constant':use,
                                                        source:'Spell Like Ability'
                                                    };
                                                }else{
                                                    aObj={
                                                        name:aMatch[1].trim(),
                                                        type:aMatch[2],
                                                        description:aMatch[3],
                                                        source:'Special Ability',
                                                        show_options:0
                                                    };
                                                }
                                                if(!_.some(abilityArr,(arr)=>{
                                                    if(arr.name.toLowerCase()===aObj.name.toLowerCase()){
                                                        _.each(_.keys(aObj),(k)=>{
                                                            if(k!=='name'){
                                                                if(k==='description'){
                                                                    arr[k]=((arr[k]||'')+'\n'+(aObj[k]||'')).trim();
                                                                }else{
                                                                    arr[k]=aObj[k];
                                                                }
                                                            }
                                                        });
                                                        return true;
                                                    }
                                                })){
                                                    abilityArr.push(aObj);
                                                }
                                            });
                                        }
                                    });
                                }
                            });
                            _.each(abilityArr,(arr)=>{
                                rowID ='repeating_ability_'+generateRowID()+'_';
                                _.each(_.keys(arr),(k)=>{
                                    if(k==='damage_dice'){
                                        setObj[rowID+'damage_checkbox']=1;
                                    }else if(k==='dc'){
                                        setObj[rowID+'save_checkbox']=1;
                                    }
                                    setObj[rowID+k]=arr[k];
                                });
                            });
                            setObj.npc_creator_toggle='menus';
                        }
                        let setKeys = _.reject(_.keys(setObj),(k)=>{return _.isUndefined(setObj[k])});
                        let trueSetObj = {};
                        _.each(setKeys,(sk)=>{
                            trueSetObj[sk]=setObj[sk];
                        });
                        trueSetObj.import = 0;
                        trueSetObj=buildMenus(setObj,trueSetObj);
                        setAttrs(trueSetObj,{silent:true},(obj)=>{
                            accessStarfinder({sourceAttribute:'bypass'});
                        });
                    });
                };
                
            getID(cloneRepAttr,removeRows);
        },
        exportStatblock = function(){
            setAttrs({character_name:'test','export':0},{silent:true});
        },
        
        bootup = function(){
            TAS.log('Starfinder Character Sheet v'+version+' loaded');
            /*var selectItem = _.reduce(equipment,(m,e)=>{
                return m+='<option value="'+e.name+'" data-i18n="'+e.name.replace(/\s+/g,'_')+'">'+e.name.toUpperCase()+'</option>';
            },'<select title='@{equipment_compendium}' name="attr_equipment_compendium">');
            selectItem+='</select>';
            TAS.log(JSON.stringify(selectItem));*/
        };
        return {
            Bootup: bootup,
            RegisterEventHandlers: RegisterEventHandlers
        };
    }());
    starfinder.Bootup();
    starfinder.RegisterEventHandlers();
    /*end of starfinder.js*/
</script>

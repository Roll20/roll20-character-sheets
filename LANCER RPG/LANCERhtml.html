<script type="text/worker">
    on("sheet:opened change:acc_diff_mod change:frame_sp change:core_hull change:core_agility change:core_systems change:core_engineering change:frame_hull change:frame_agility change:frame_systems change:frame_engineering change:licenselevel change:frame_evasion change:frame_sensors change:frame_edef change:frame_evasion change:frame_targeting change:frame_armor change:frame_speed change:frame_bonus_hp change:frame_bonus_heat change:frame_bonus_repairs change:core_sp change:acc_tab", function() {
    getAttrs(["net_acc","core_hull", "core_agility","core_systems","core_engineering", "core_hp","frame_hull","frame_agility","frame_systems","frame_engineering","licenselevel","frame_evasion","frame_edef","frame_speed","frame_targeting", "frame_armor","frame_sensors","frame_bonus_hp","frame_bonus_heat","frame_bonus_repairs", "frame_sp","core_sp","acc_diff_mod","acc_tab","net_pilot_acc","grit"], function(values) {
        let accval=parseInt(values.acc_diff_mod);
        let net_pilot_acc = parseInt(values.grit);
        let net_acc = 0;
        if (values.acc_tab==="acc")
        {
            net_acc += accval;
        }
        
        if (values.acc_tab==="diff")
        {
            net_acc -= accval;
        }
        
        if(values.acc_tab==="none")
        {
            accval=0;
        }
    
        net_pilot_acc += net_acc;
    
        if (net_acc > -1)
        {
            net_acc = "+"+net_acc.toString();
        }
        
        if (net_pilot_acc > 0)
        {
             net_pilot_acc = "+"+net_acc.toString();
        }
        setAttrs({
            core_hp: parseInt(values.licenselevel) + 10,
            autocalc_hull: parseInt(values.core_hull) + parseInt(values.frame_hull),
            autocalc_agility: parseInt(values.core_agility)+ parseInt(values.frame_agility),
            autocalc_systems: parseInt(values.core_systems,10) + parseInt(values.frame_systems,10),
            autocalc_engineering: parseInt(values.core_engineering,10) + parseInt(values.frame_engineering,10),
            autocalc_evasion: parseInt(values.core_agility)+ parseInt(values.frame_agility)+parseInt(values.frame_evasion) + 8,
            autocalc_edef: parseInt(values.core_systems,10) + parseInt(values.frame_systems,10) + parseInt(values.frame_edef,10) + 8,
            autocalc_targeting: parseInt(values.frame_targeting,10) + Math.floor(parseInt(values.licenselevel,10)/2),
            autocalc_sensors: parseInt(values.core_systems,10) + parseInt(values.frame_sensors,10) + 8,
            autocalc_armor: parseInt(values.frame_armor,10),
            autocalc_speed: Math.ceil( (parseInt(values.frame_agility) + parseInt(values.core_agility)) / 2 ) + 4,
            autocalc_max_hp: parseInt(values.core_hp,10) + (parseInt(values.core_hull,10)+parseInt(values.frame_hull,10))*2 + parseInt(values.frame_bonus_hp),
            autocalc_max_heat: parseInt(values.core_engineering,10) + parseInt(values.frame_engineering,10) + parseInt(values.frame_bonus_heat,10) + 6,
            autocalc_max_repairs: parseInt(values.core_engineering,10) + parseInt(values.frame_engineering,10) + parseInt(values.frame_bonus_repairs,10) + 6,
            frame_max_sp: parseInt(values.core_sp) + parseInt(values.frame_sp),
            net_pilot_acc:net_pilot_acc,
            acc_diff_mod:accval,
            net_acc:net_acc,
            core_sp:Math.floor(parseInt(values.licenselevel)/3)
        });
    });
});
</script>

<div style="background:#ddd;min-height:950px;">
	<!-- Set up the Tabs -->
    <input type="hidden" name="attr_net_pilot_acc" value="0"/>
    <input type="hidden" name="attr_net_acc" value="0"/>
	<input type="radio" class="sheet-tab sheet-tab1" name="attr_core-tab" value="1" title="Pilot Info" checked="checked"/> 
	<span class="tab tab1" style='line-height: 40px;'>PILOT INFO</span>
	<input type="radio" class="sheet-tab sheet-tab2" name="attr_core-tab" value="2" title="Talents" /> 
	<span class="tab tab2" style='line-height: 40px;'>TALENTS</span>
	<input type="radio" class="sheet-tab sheet-tab3" name="attr_core-tab" value="3" title="FRAME" /> 
	<span class="tab tab3" style='line-height: 40px;margin-right:115px'>FRAME</span>
	<input type="radio" class="acc-tab acc-tab1" name="attr_acc_tab" value="acc" title="Accuracy" /> 
	<span class="acc-tab acc-tab1" style='line-height: 40px;'>ACCURACY</span>
	<input type="radio" class="acc-tab acc-tab2" name="attr_acc_tab" value="diff" title="Difficulty" /> 
	<span class="acc-tab acc-tab2" style='line-height: 40px;'>DIFFICULTY</span>
	<input type="radio" class="acc-tab acc-tab2" name="attr_acc_tab" value="none" title="None" /> 
	<span class="acc-tab acc-tab2" style='line-height: 40px;'>NONE</span>
	<input type="number" name="attr_acc_diff_mod" min="0" style="width:45px;height:40px;display:inline;margin-left:3px;text-align:center;font-size:18px;margin-top:2px"/>	
	<!-- End Tab setup -->

	<div class="section-pilot"><!-- Pilot Tab -->   
        <div class="grid-wrapper-outer">
            <div class="grid-wrapper-top">
                <span style="font-size:4em;font-weight:bold">LANCER</span>
                <div class="grid-wrapper-inner">
                    <div class="grid-inner-item">
                        <label>NAME</label><input type="text" name="attr_name" />
                    </div>
                    <div class="grid-inner-item">
                        <label>LEVEL</label><input type="text" name="attr_licenselevel" />
                     </div>
                    <div class="grid-inner-item">
                        <label>PLAYER</label><input type="text" name="attr_player" />
                    </div>
                    <div class="grid-inner-item" style="width:240px;">
                        <label>CALLSIGN</label><input type="text" style="width:90px" name="attr_callsign" />
                    </div>
                    <div class="grid-inner-item" style="width:426px;">
                        <label style="width:250px;">BACKGROUND</label><input type="text" name="attr_background" />
                    </div>
                </div>
            </div>
            <div class="grid-wrapper-main">
                <div style="height:40px;" class="grid-item">
                     <label style ="text-align:center">HP <input type="text" name="attr_pilot-current-hp" class="short"/> / <input type="text" name="attr_pilot-max-hp" class="short" /></label>
                </div>
                
                <div style="height:100px;" class="grid-item">
                   <label>APPEARANCE <textarea value="attr_appearance"></textarea></label>
                </div>
                
                <div style="height:250px;" class="grid-item">  
                    <label>FRIENDS & FOES <textarea value="attr_friends-foes" class="xlong"></textarea></label>
                </div>
                
                <div style="height:480px; position:relative;bottom:210px" class="grid-item">
                    <div class="grid-wrapper-skills">
                        <label class="center"><input type="text" name="attr_acquire" class="short"/></label>
                        <label class="center"><input type="text" name="attr_brawl"class="short" /></label>
                        <button type="roll" class="skill-roll" value="&{template:default}} {{name=ACQUIRE CHECK}} {{ACQUIRE=[[d20cs0cf0+@{acquire}@{acc-tab}@{acc_diff_mod}d6kh1cs0cf0}]] }}" style="width:70px"><span class="skill-roll">ACQUIRE</span></button>
                        <button type="roll" class="skill-roll" value="&{template:default}} {{name=BRAWL CHECK}} {{BRAWL=[[d20cs0cf0+@{brawl}@{acc-tab}@{acc_diff_mod}d6kh1cs0cf0}]] }}" style="width:70px;right:5px"><span class="skill-roll">BRAWL</span></button>
                        <label class="center"><input type="text" name="attr_command"class="short" /></label>
                        <label class="center"><input type="text" name="attr_flash"class="short" /></label>
                        <button type="roll" class="skill-roll" value="&{template:default}} {{name=COMMAND CHECK}} {{COMMAND=[[d20cs0cf0+@{command}@{acc-tab}@{acc_diff_mod}d6kh1cs0cf0}]] }}" style="width:80px"><span class="skill-roll">COMMAND</span></button>
                        <button type="roll" class="skill-roll" value="&{template:default}} {{name=FLASH CHECK}} {{FLASH=[[d20cs0cf0+@{flash}@{acc-tab}@{acc_diff_mod}d6kh1cs0cf0}]] }}" style="width:55px;right:5px"><span class="skill-roll">FLASH</span></button>
                        <label class="center"><input type="text" name="attr_infiltrate"class="short" /></label>
                        <label class="center"><input type="text" name="attr_investigate"class="short" /></label>
                        <button type="roll" class="skill-roll" value="&{template:default}} {{name=INFILTRATE CHECK}} {{INFILTRATE=[[d20cs0cf0+@{infiltrate}@{acc-tab}@{acc_diff_mod}d6kh1cs0cf0}]]  }}" style="width:95px; right:0px"><span class="skill-roll">INFILTRATE</span></button>
                        <button type="roll" class="skill-roll" value="&{template:default}} {{name=INVESTIGATE CHECK}} {{INVESTIGATE=[[d20cs0cf0+@{investigate}@{acc-tab}@{acc_diff_mod}d6kh1cs0cf0}]]  }}" style="width:100px; right:5px"><span class="skill-roll">INVESTIGATE</span></button>
                        <label class="center"><input type="text" name="attr_manuever"class="short" /></label>
                        <label class="center"><input type="text" name="attr_notice"class="short" /></label>
                        <button type="roll" class="skill-roll" value="&{template:default}} {{name=MANEUVER CHECK}} {{MANEUVER=[[d20cs0cf0+@{maneuver}@{acc-tab}@{acc_diff_mod}d6kh1cs0cf0}]]  }}" style="width:88px"><span class="skill-roll">MANEUVER</span></button>
                        <button type="roll" class="skill-roll" value="&{template:default}} {{name=NOTICE CHECK}} {{NOTICE=[[d20cs0cf0+@{notice}@{acc-tab}@{acc_diff_mod}d6kh1cs0cf0}]] }}" style="width:60px;right:4px"><span class="skill-roll">NOTICE</span></button>
                        <label class="center"><input type="text" name="attr_persuade"class="short" /></label>
                        <label class="center"><input type="text" name="attr_survive"class="short" /></label>
                        <button type="roll" class="skill-roll" value="&{template:default}} {{name=PERSUADE CHECK}} {{PERSUADE=[[d20cs0cf0+@{persuade}@{acc-tab}@{acc_diff_mod}d6kh1cs0cf0}]]  }}" style="width:88px"><span class="skill-roll">PERSUADE</span></button>
                        <button type="roll" class="skill-roll" value="&{template:default}} {{name=SURVIVE CHECK}} {{SURVIVE=[[d20cs0cf0+@{survive}@{acc-tab}@{acc_diff_mod}d6kh1cs0cf0}]] }}" style="width:68px;right:5px"><span class="skill-roll">SURVIVE</span></button>
                        <label class="center"><input type="text" name="attr_swindle"class="short" /></label>
                        <label class="center"><input type="text" name="attr_tech"class="short" /></label>
                        <button type="roll" class="skill-roll" value="&{template:default}} {{name=SWINDLE CHECK}} {{SWINDLE=[[d20cs0cf0+@{swindle}@{acc-tab}@{acc_diff_mod}d6kh1cs0cf0}]] }}" style="width:75px;right:5px"><span class="skill-roll">SWINDLE</span></button>
                        <button type="roll" class="skill-roll" value="&{template:default}} {{name=TECH CHECK}} {{TECH=[[d20cs0cf0+@{tech}@{acc-tab}@{acc_diff_mod}d6kh1cs0cf0}]]  }}" style="width:50px;right:5px"><span class="skill-roll">TECH</span></button>
                    </div>
                </div>
                
                <div style="height:140px; position:relative;bottom:150px" class="grid-item">
                      <label> BACKSTORY <textarea value="attr_backstory" class="long"></textarea></label>
                </div>
                
                <div style="height:415px;width:200px" class="grid-flex-item">
                    <label class="flex-label"> LICENSES</label>
                    <fieldset class = "repeating_licenses">
                        <div class="grid-flex-noborder-item" style="height:35px;margin-left:0px;">
                            <div class="grid-frame-flex-item-reverse" style="margin-left:-255px">
                                <input type="text" name="attr_licensename" class="license-name"/>
                            	<input type="radio" class="license license3" name="attr_license-tab" value="3" title="License III" /> 
                            	<span class="license license3" style='border-radius: 0px 5px 5px 0px'>III</span>
                            	<input type="radio" class="license license2" name="attr_license-tab" value="2" title="License II" /> 
                            	<span class="license license2" >II</span>
                            	<input type="radio" class="license license1" name="attr_license-tab" value="1" title="License I"/> 
                            	<span class="license license1" style='border-left:2px solid black; border-radius: 5px 0px 0px 5px'>I</span>
                            </div>
                        </div>
                    </fieldset>
                </div>
                
                <div style="height:40px; position:relative;bottom:210px;text-align:center" class="grid-item">
                    <label> GRIT <input type="text" name="attr_grit" class="short"/> </label> 
                </div>
                
                <div style="height:130px; position:relative;bottom:490px;" class="grid-item">
                        <button type="roll" class="pilot-wep-roll" value="&{template:default}{{name=PILOT ATTACK: @{pilotwep1-name}}} {{ATK=[[d20cs0cf0@{net_pilot_acc}d6kh1cs0cf0]]}}{{DMG=[[@{pilotwep1-damage}]]}} {{RANGE=[[@{pilotwep1-range}]]}}{{TAGS=@{pilotwep1-tags}}}{{NOTE=@{pilotwep1-notes}}}" style="width:70px">
                            <span class="pilot-wep-roll">PILOT WEAPON 1</span></button>                    
                        <div class="grid-wrapper-pilotweps">
                        <div class ="grid-inner-item">
                            <label>NAME <input type="text" name="attr_pilotwep1-name" style="width:90px"\> </label>
                        </div>
                        <div class ="grid-inner-item">
                            <label>RANGE <input type="text" name="attr_pilotwep1-range" style="margin-left:0px" class="short"\> </label>
                        </div>
                        <div class ="grid-inner-item">
                            <label>RARITY <input type="text" name="attr_pilotwep1-rarity" class="short"\> </label>
                        </div>
                        <div class ="grid-inner-item" style="width:220px;">
                            <label>DAMAGE <input type="text" name="attr_pilotwep1-damage" style="width:77px; text-align:center;"\></label>
                        </div>
                        <div class ="grid-inner-item" style="width:250px;">
                            <label>TAGS <input type="text" name="attr_pilotwep1-tags" style="width:173px;"\></label>
                        </div>
                        <div></div> <!-->HAHAHA GUESS WHO FOUND OUT YOU CAN CHEAT GRID LAYOUT WITH EMPTY DIV TAGS, WELCOME TO HELL</-->
                        <div class ="grid-inner-item" style="width:400px;">
                            <label>NOTES <input type="text" name="attr_pilotwep1-notes" style="width:322px;"></label>
                        </div>
                    </div>
                </div>
                
                <div></div>
                
                <div class="grid-item" style="height:220px;position:relative;bottom:300px;">
                    <label style="height:5px;">CORE STATS</label>
                    <div class="core-stat-container">
                        <div class="grid-inner-item">
                            <label>HP <input type="text" name="attr_core_hp" class="core"/></label>
                        </div>
                        <div class="grid-inner-item">
                            <label>SP <input type="text" name="attr_core_sp" class="core"/></label>
                        </div>
                        <div class="grid-inner-item">
                            <label>HUL <input type="text" name="attr_core_hull" class="core"/></label>
                        </div>
                        <div class="grid-inner-item">
                            <label>AGI <input type="text" name="attr_core_agility"class="core"/></label>
                        </div>
                        <div class="grid-inner-item">
                            <label>SYS <input type="text" name="attr_core_systems" class="core"/></label>
                        </div>
                        <div class="grid-inner-item">
                            <label>ENG <input type="text" name="attr_core_engineering" class="core"/></label>
                        </div>
                    </div>
                </div>
                
                <div style="height:130px; position:relative;bottom:490px;" class="grid-item">
                        <button type="roll" class="pilot-wep-roll" value="&{template:default}{{name=PILOT ATTACK: @{pilotwep2-name}}} {{ATK=[[d20cs0cf0@{net_pilot_acc}d6kh1cs0cf0]]}}{{DMG=[[@{pilotwep2-damage}]]}} {{RANGE=[[@{pilotwep2-range}]]}}{{TAGS=@{pilotwep2-tags}}}{{NOTE=@{pilotwep2-notes}}}" style="width:70px">
                            <span class="pilot-wep-roll">PILOT WEAPON 2</span></button>                    
                    <div class="grid-wrapper-pilotweps">
                        <div class ="grid-inner-item">
                            <label>NAME <input type="text" name="attr_pilotwep2-name" style="width:90px"\> </label>
                        </div>
                        <div class ="grid-inner-item">
                            <label>RANGE <input type="text" name="attr_pilotwep2-range" style="margin-left:0px" class="short"\> </label>
                        </div>
                        <div class ="grid-inner-item">
                            <label>RARITY <input type="text" name="attr_pilotwep2-rarity" class="short"\> </label>
                        </div>
                        <div class ="grid-inner-item" style="width:220px;">
                            <label>DAMAGE <input type="text" name="attr_pilotwep2-damage" style="width:77px; text-align:center;"\></label>
                        </div>
                        <div class ="grid-inner-item" style="width:250px;">
                            <label>TAGS <input type="text" name="attr_pilotwep2-tags" style="width:173px;"\></label>
                        </div>
                        <div></div> <!-->HAHAHA GUESS WHO FOUND OUT YOU CAN CHEAT GRID LAYOUT WITH EMPTY DIV TAGS, WELCOME TO HELL</-->
                        <div class ="grid-inner-item" style="width:400px;">
                            <label>NOTES <input type="text" name="attr_pilotwep2-notes" style="width:322px;"></label>
                        </div>
                    </div>
                </div>
                
                <div class="grid-item" style="position:relative;bottom:205px; height:125px;">
                    <label style="display:inline">CORE BONUSES</label>
                    <label class="small">LL3<input type="text" name="attr_corebonus1" class="corebonus"\></label>
                    <label class="small">LL6<input type="text" name="attr_corebonus2" class="corebonus"\></label>
                    <label class="small">LL9<input type="text" name="attr_corebonus3" class="corebonus"\></label>
                    <label class="small">LL12<input type="text" name="attr_corebonus4" class="corebonus"\></label>
                 </div>
                 
                 <div></div>
                 
                 <div style="height:135px; position:relative;bottom:580px;" class="grid-item">
                    <label style="display:inline;height:5px;">CLOTHING AND ARMOR</label>
                    <div class="grid-wrapper-pilotweps">
                        <div class ="grid-inner-item" style="width:190px;">
                            <label>NAME <input type="text" name="attr_armor-name" style="width:110px"\> </label>
                        </div>
                        <div class ="grid-inner-item" style="width:150px;">
                            <label>ARMOR <input type="text" name="attr_pilotarmor-armor" class="short"\> </label>
                        </div>
                        <div class ="grid-inner-item">
                            <label>RARITY <input type="text" name="attr_pilotarmor-rarity" class="short"\></label>
                        </div>
                 
                        <div class ="grid-inner-item">
                            <label>EVASION <input type="text" name="attr_pilotarmor-evasion" style="width:70px;text-align:center"\> </label>
                        </div>
                        <div class ="grid-inner-item" style="width:140px">
                            <label>E-DEF <input type="text" name="attr_pilotarmor-edef"\ style="width:60px;text-align:center"> </label>
                        </div>
                        <div class ="grid-inner-item">
                            <label>SPEED <input type="text" name="attr_pilotarmor-speed" style="width:43px;text-align:center"\> </label>
                        </div>
                        <div class ="grid-inner-item" style="width:400px;">
                            <label>NOTES <input type="text" name="attr_pilotarmor-notes" style="width:322px;"></label>
                        </div>
                    </div>
                </div>
                
                <div></div>
                <div></div>
                
                <div class="grid-item" style="height:125px; width:400px; position:relative;bottom:580px;">
                    <label>GEAR <textarea class="long" name="attr_gear"></textarea></label>
                </div>
                
            </div>
        </div>	
    </div>
	
	<div class="sheet-section-talents"><!-- Talents Tab -->
        <div class="grid-wrapper-outer">
            <div class="grid-wrapper-top">
                <span style="font-size:4em;font-weight:bold">LANCER</span>
                <div class="grid-wrapper-inner">
                    <div class="grid-inner-item">
                        <label>NAME</label><input type="text" name="attr_name" />
                    </div>
                    <div class="grid-inner-item">
                        <label>LEVEL</label><input type="text" name="attr_licenselevel" />
                     </div>
                    <div class="grid-inner-item">
                        <label>PLAYER</label><input type="text" name="attr_player" />
                    </div>
                    <div class="grid-inner-item" style="width:240px;">
                        <label>CALLSIGN</label><input type="text" style="width:90px" name="attr_callsign" />
                    </div>
                    <div class="grid-inner-item" style="width:426px;">
                        <label style="width:250px;">BACKGROUND</label><input type="text" name="attr_background" />
                    </div>
                </div>
            </div>	
        </div>
        <div class="flex-wrapper-main">
            <fieldset class="repeating_talents" >
                <div class="grid-flex-item" style="margin-left:40px;margin-bottom:10px">
                    <div class="grid-wrapper-talents">
                        <label>TALENT <input type="text" name="attr_talent-name" class="mid"/></label>
                        <label>RANK <input type="text" name ="attr_talent-rank" style="margin-top:0px" class="short" /></label>
                    </div>
                    <div class="talent-rank-container">
                        <label>RANK I <textarea class="short" name="attr_talent-rank1-desc"></textarea></label>
                    </div>
                    <div class="talent-rank-container">
                        <label>RANK II <textarea class="short" name="attr_talent-rank2-desc"></textarea></label>
                    </div>
                    <div class="talent-rank-container">
                        <label>RANK III <textarea class="short" name="attr_talent-rank3-desc"></textarea></label>
                    </div>
                </div>
            </fieldset>
        </div>   
    </div>
	
	<div class="sheet-section-frame"> <!-->FRAME Tab<-->
        <div class="grid-wrapper-outer">
            <div class="grid-wrapper-top">
                <span style="font-size:4em;font-weight:bold">LANCER</span>
                <div class="grid-wrapper-inner-frame">
                    <div class="grid-inner-item" style="width:220px;">
                        <label style="margin-right:5px">NAME </label><input type="text" style="width:143px" name="attr_name" />
                    </div>
                    <div class="grid-inner-item" style="margin-left:27px;margin-right:0px;width:165px">
                        <label>LEVEL</label><input type="text" style="width:87px"  name="attr_licenselevel" />
                     </div>
                    <div class="grid-inner-item">
                        <label>PLAYER</label><input type="text" name="attr_player" />
                    </div>
                    <div class="grid-inner-item" style="width:250px;">
                        <label>FRAME</label><input type="text" style="width:60%" name="attr_frame-class" />
                    </div>
                    <div class="grid-inner-item" style="width:220px">
                        <label style="width:60px;margin-left:25px">SIZE</label><input type="text" name="attr_frame-size" class="short" style="width:40px;margin-top:0px" />
                        <label style="width:100px;">SP</label><input type="text" name="attr_frame_sp" class="short" style="width:30px;margin-top:0px" />
                    </div>
                    <div class="grid-inner-item">
                        <label>PAINT</label><input type="text" style="width:130px;" name="attr_frame-paint" />
                    </div>
                </div>
            </div>
        </div>
        <div class="grid-wrapper-frame">
            <div class="grid-item" style="width:100%;height:245px;"> 
                <div class="flex-wrapper-main">
                    <div class="grid-flex-noborder-item" style="width:35px;height:200px;margin-right:15px;text-align:center">
                        <label class="HASE">HUL</label>
                        <label class="HASE"><input type="text" name="attr_frame_hull" class="xshort" /></label>
                        <label class="HASE">AGI</label>
                        <label class="HASE"> <input type="text" name="attr_frame_agility" class="xshort" /></label>
                        <label class="HASE">SYS</label>
                        <label class="HASE"> <input type="text" name="attr_frame_systems" class="xshort" /></label>
                        <label class="HASE">ENG</label>
                        <label class="HASE"> <input type="text" name="attr_frame_engineering" class="xshort" /></label>
                    </div>
                        <div class="flex-wrapper-main" style="width:285px;height:100%;margin-right:10px">
                            <label style="font-size:16px;margin-bottom:0px;">STRUCTURE</label>
                            <div class="grid-frame-flex-item" style="margin-bottom:10px">
                            	<input type="radio" class="structure structure4" name="attr-structure-tab" value="4" title="Structure 4"checked="checked" /> 
                            	<span class="structure structure4" style='line-height: 40px;border-left:2px solid black;border-radius:5px 0px 0px 5px'>4</span>
                            	<input type="radio" class="structure structure3" name="attr-structure-tab" value="3" title="Structure 3" /> 
                            	<span class="structure structure3" style='line-height: 40px;'>3</span>
                            	<input type="radio" class="structure structure2" name="attr-structure-tab" value="2" title="Structure 2" /> 
                            	<span class="structure structure2" style='line-height: 40px;'>2</span>
                            	<input type="radio" class="structure structure1" name="attr-structure-tab" value="1" title="Structure 1" /> 
                            	<span class="structure structure1" style='line-height: 40px;'>1</span>
                            	<input type="radio" class="structure structurecrit" name="attr-structure-tab" value="0" title="Structure Crit"/> 
                            	<span class="structure structurecrit"  style='line-height:40px; border-radius: 0px 5px 5px 0px'>CRIT</span>
                            </div>
                            <label style="font-size:16px;margin-bottom:0px">CORE STRESS</label>
                            <div class="grid-frame-flex-item-reverse">
                            	<input type="radio" class="corestress corestressbreach" name="attr-corestress-tab" value="5" title="Structure Crit"/> 
                            	<span class="corestress corestressbreach" style='line-height:40px; font-size:10px; border-radius:0px 5px 5px 0px'>BREACH</span>
                            	<input type="radio" class="corestress corestress4" name="attr-corestress-tab" value="4" title="Core Stress 4" /> 
                            	<span class="corestress corestress4" style='line-height: 40px;'>3</span>
                            	<input type="radio" class="corestress corestress3" name="attr-corestress-tab" value="3" title="Core Stress 3" /> 
                            	<span class="corestress corestress3" style='line-height: 40px;'>2</span>
                            	<input type="radio" class="corestress corestress2" name="attr-corestress-tab" value="2" title="Core Stress 2" /> 
                            	<span class="corestress corestress2" style='line-height: 40px;'>1</span>
                            	<input type="radio" class="corestress corestress1" name="attr-corestress-tab" value="1" title="Core Stress 1" checked="checked"/> 
                            	<span class="corestress corestress1"  style='line-height: 40px; border-left:2px solid black; border-radius:5px 0px 0px 5px'>0</span>
                            </div>
                            <div class="grid-flex-noborder-item" style="width:155px;">
                                <label style="font-size:15px">HP <input type="text" name="attr_frame_current_hp" class="xshort" style="width:28px;position:relative;top:2px;margin-left:45px;margin-right:0px"/> / <span class="frame-max-autocalcs" name="attr_autocalc_max_hp"></span></label>
                            </div>
                            <div class="grid-flex-noborder-item" style="width:115px;margin-left:7px">
                                <label style="font-size:15px"><input type="text" name="attr_frame_bonus_hp" class="xshort" style="width:28px;position:relative;top:2px;"/> BONUS</label>
                            </div>
                            <div class="grid-flex-noborder-item" style="width:155px">
                                <label style="font-size:15px">HEAT <input type="text" name="attr_frame_current_heat" class="xshort" style="width:28px;position:relative;top:2px;margin-left:26px"/> / <span class="frame-max-autocalcs" name="attr_autocalc_max_heat"></span></label>
                            </div>
                            <div class="grid-flex-noborder-item" style="width:115px;margin-left:7px">
                                <label style="font-size:15px"><input type="text" name="attr_frame_bonus_heat" class="xshort" style="width:28px;position:relative;top:2px;"/> BONUS</label>
                            </div>
                            <div class="grid-flex-noborder-item" style="width:155px;">
                                <label style="font-size:15px">REPAIRS <input type="text" name="attr_frame_current_repairs" class="xshort" style="width:28px;position:relative;top:2px;"/> / <span class="frame-max-autocalcs" name="attr_autocalc_max_repairs"></span><label>
                            </div>
                            <div class="grid-flex-noborder-item" style="width:115px;margin-left:7px">
                                <label style="font-size:15px"><input type="text" name="attr_frame_bonus_repairs" class="xshort" style="width:28px;position:relative;top:2px;"/> BONUS</label>
                            </div>
                        </div>
                        <div class="flex-wrapper-main" style="height:100%;width:180px;margin-left:-18px">
                            <div class="grid-flex-noborder-item" style="height:85px;margin-left:0px;">
                                <label style="margin-top:0px;margin-bottom:0px">OVERCHARGE</label>
                                <div class="grid-frame-flex-item-reverse" style="margin-left:-165px">
                                	<input type="radio" class="overcharge overcharge4" name="attr_overcharge-tab" value="3" title="Overcharge d6+3" /> 
                                	<span class="overcharge overcharge4" style='line-height: 40px; border-radius: 0px 5px 5px 0px;'>d6+3</span>
                                	<input type="radio" class="overcharge overcharge3" name="attr_overcharge-tab" value="2" title="Overcharge d6" /> 
                                	<span class="overcharge overcharge3" style='line-height: 40px;'>d6</span>
                                	<input type="radio" class="overcharge overcharge2" name="attr_overcharge-tab" value="1" title="Overcharge d3" /> 
                                	<span class="overcharge overcharge2" style='line-height: 40px;'>d3</span>
                                	<input type="radio" class="overcharge overcharge1" name="attr_overcharge-tab" value="0" title="Overcharge 1"/> 
                                	<span class="overcharge overcharge1" style='line-height:40px; border-left:2px solid black; border-radius: 5px 0px 0px 5px'>1</span>
                                </div>
                            </div>
                        <div class="grid-flex-noborder-item" style="width:210px;position:relative;bottom:5px;left:5px">
                            <label class="stat-label">ARMOR <input type="text" name="attr_frame_armor" class="short-small"/></label>
                            <label class="stat-label">EVASION <input type="text" name="attr_frame_evasion" class="short-small"/></label>
                            <label class="stat-label">E-DEFENSE <input type="text" name="attr_frame_edef" class="short-small" ></label>
                            <label class="stat-label">SPEED <input type="text" name="attr_frame_speed" class="short-small" /></label>
                            <label class="stat-label">TARGETING <input type="text" name="attr_frame_targeting" class="short-small"/></label>
                            <label class="stat-label">SENSORS <input type="text" name="attr_frame_sensors" class="short-small"/></label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-item" style="width:111.5%;height:245px" > 
                <div style="height:34%;margin-bottom:10px">
                    <label>ULTIMATE PASSIVE <textarea style="height:60px" name="attr_frame-ultimate-passive"></textarea></label>
                </div>
                <div style="height:36%;margin-bottom:20px">
                    <label>ULTIMATE ACTIVE <textarea style="height:75px" name="attr_frame-ultimate-active"></textarea></label>
                </div>
                <div class="grid-flex-noborder-item" style='width:200px'>
                    <label style="height:25px">CORE POWER?<input type="checkbox" name="attr_corepower" value="1" class="corepower corepower" /><span class="corepower"></span></label>
                </div>
            </div>
            <div class="grid-item" style="width:100%;height:210px;padding-left:10px;"> 
                <div class="grid-wrapper-autocalc">
                    <div class="frame-autocalcs" >
                       <button type="roll" value="&{template:default}{{name=HULL CHECK}} {{HULL=[[d20cs0cf0+@{autocalc_hull}@{net_acc}d6kh1cs0cf0]]}}"class="HASE-roll">HULL</button>
                       <span name="attr_autocalc_hull" class="frame-autocalcs"></span>
                       <button type="roll" class="HASE-roll" value="&{template:default}{{name=AGILITY CHECK}} {{HULL=[[d20cs0cf0+@{autocalc_agility}@{net_acc}d6kh1cs0cf0]]}}">AGILITY</button>
                       <span name="attr_autocalc_agility" class="frame-autocalcs"></span>
                       <button type="roll" class="HASE-roll">SYSTEMS</button>
                       <span name="attr_autocalc_systems" class="frame-autocalcs"></span>
                       <button type="roll" class="HASE-roll">ENGINEERING</button>
                       <span name="attr_autocalc_engineering" class="frame-autocalcs"></span>
                       <button disabled type="roll" class="HASE-roll">TARGETING</button>
                       <span name="attr_autocalc_targeting" class="frame-autocalcs"></span>
                    </div>
                   <div class="frame-autocalcs" style="width:33%">
                       <button disabled type="roll" class="HASE-roll">EVASION</button>
                       <span name="attr_autocalc_evasion" class="frame-autocalcs"></span>
                       <button disabled type="roll" class="HASE-roll" style="width:105px;">E-DEFENSE</button>
                       <span name="attr_autocalc_edef" class="frame-autocalcs"></span>
                       <button disabled type="roll" class="HASE-roll">ARMOR</button>
                       <span name="attr_autocalc_armor" class="frame-autocalcs"></span>
                       <button disabled type="roll" class="HASE-roll">SPEED</button>
                       <span name="attr_autocalc_speed" class="frame-autocalcs"></span>
                       <button disabled type="roll" class="HASE-roll">SENSORS</button>
                       <span name="attr_autocalc_sensors" class="frame-autocalcs"></span>
                    </div>
                   <div class="frame-mounts" style="width:100%;height:15%">
                       <div style="margin-bottom:7px">
                        <button type="roll" disabled style="width:85px;right:5px"class="HASE-roll">MAX SP</button>
                        <span name="attr_frame_max_sp" class="frame-autocalcs"></span>
                        </div>
                        <label style="font-size:17px;margin-bottom:0px">MOUNT 1</label>
                        <input type="text" name="attr_mount1"class="mounts"/>
                        <label style="font-size:17px;margin-bottom:0px">MOUNT 2</label>
                        <input type="text" name="attr_mount2" class="mounts"/>
                        <label style="font-size:17px;margin-bottom:0px">MOUNT 3</label>
                        <input type="text" name="attr_mount3" class="mounts"/>
                    </div>
                    <div class="frame-mounts" style="width:100px">
                    </div>
                </div>
            </div>
            <div class="grid-item" style="width:111.5%;padding-left:5px">
                <button type="roll" class="HASE-roll" value="&{template:default}{{name=SYSTEM: @{base-sys-name}}} {{TAGS=@{base-sys-tags}}} {{EFFECT=@{base-sys-effect}}}" style="right:6px;bottom:1px;margin-right:0px;top:1px">SYSTEM</button>
                <input type="text" name="attr_base-sys-name" style="width:198px;position:relative;right:8px;margin-right:0px"/>
                <div style="margin-top:10px; margin-bottom:10px; padding-right:0px;width:105%">
                    <label>TAGS <input type="text" name="attr_base-sys-tags"style="width:160px"/></label>
                    <label style ="position:relative;right:6px">SP<input type="text" name="attr_base-sys-SP" style="width:11%;position:relative;left:6px;text-align:center"/></label>
                </div>
                <label>EFFECT</label>
                <textarea style="height:51%;width:98%;" name="attr_base-sys-effect"></textarea>
            </div>
        </div>
        <div class="flex-wrapper-main" style="width:850px">
            <div class="flex-wrapper-main" style="width:530px">
                <div class="grid-item" style="width:260px;height:190px;margin-top:10px;margin-right:5px">
                    <div style="margin-bottom:10px">
                        <button type="roll" class="HASE-roll" value="&{template:default}{{name=ATTACK: @{base-weapon-name}}} {{ATK=[[d20cs0cf0+@{autocalc_targeting}@{net_acc}d6kh1cs0cf0]]}}{{DMG=[[@{base-weapon-dmg-dice-num}d@{base-weapon-dmg-die}+@{base-weapon-dmg-flat}]] **@{base-weapon-dmg-type}**}} {{RANGE=[[@{base-weapon-range}]]}}{{TAGS=@{base-weapon-tags}}}{{NOTE=@{base-weapon-notes}}}" 
                        style="right:6px;bottom:1px;margin-right:0px;top:1px">WEAPON</button> 
                        <input type="text" name="attr_base-weapon-name" style="position:Relative;right:6px" />
                    </div>
                    <div style="margin-bottom:5px">
                        <label>TYPE <input type="text" name="attr_base-weapon-type" class="short" style="text-align:left"/></label>
                        <label>RANGE <input type="text"name="attr_base-weapon-range"  style="width:25px;text-align:center"/></label>
                    </div>
                    <div style="margin-bottom:5px">
                        <label style="display:inline-block;width:38px;margin:0px">DMG</label><input type="text" name="attr_base-weapon-dmg-dice-num" style="width:20px;text-align:center"/>
                        <select name="attr_base-weapon-dmg-die" class="dmg-type";style="width:65px;margin:0px">
                            <option value="3">d3</option>
                            <option value="6">d6</option>
                            <option value="0">FLAT</option>
                        </select>
                        <label style="display:inline-block;width:10px;margin:0px;position:relative;right:2px;top:2px">+</label><input type="text" name="attr_base-weapon-dmg-flat" style="width:30px;text-align:center;margin:0"/>
                        <select class="dmg-type" name="attr_base-weapon-dmg-type">
                            <option value="KIN">KIN</option>
                            <option value="EXP">EXP</option>
                            <option value="ERG">ERG</option>
                            <option value="HET">HET</option>
                            <option value="BRN">BRN</option>
                        </select>
                    </div>
                    <div style="margin-bottom:5px">
                        <label style="display:inline-block; width:45px">TAGS</label><input name="attr_base-weapon-tags" type="text" style="width:75%" />
                    </div>
                    <label style="display:inline-block; width:45px">NOTE </label><input type="text" name="attr_base-weapon-notes" style="width:75%" />
                </div>
                
                <div class="grid-item" style="width:260px;height:190px;margin-top:10px;margin-right:5px">
                    <div style="margin-bottom:10px">
                        <button type="roll" class="HASE-roll" value="&{template:default}{{name=ATTACK: @{base-weapon2-name}}} {{ATK=[[d20cs0cf0+@{autocalc_targeting}@{net_acc}d6kh1cs0cf0]]}}{{DMG=[[@{base-weapon2-dmg-dice-num}d@{base-weapon2-dmg-die}+@{base-weapon2-dmg-flat}]] **@{base-weapon2-dmg-type}**}} {{RANGE=[[@{base-weapon2-range}]]}}{{TAGS=@{base-weapon2-tags}}}{{NOTE=@{base-weapon2-notes}}}" 
                        style="right:6px;bottom:1px;margin-right:0px;top:1px">WEAPON</button> 
                        <input type="text" name="attr_base-weapon2-name" style="position:Relative;right:6px" />
                    </div>
                    <div style="margin-bottom:5px">
                        <label>TYPE <input type="text" name="attr_base-weapon2-type" class="short" style="text-align:left"/></label>
                        <label>RANGE <input type="text"name="attr_base-weapon2-range"  style="width:25px;text-align:center"/></label>
                    </div>
                    <div style="margin-bottom:5px">
                        <label style="display:inline-block;width:38px;margin:0px">DMG</label><input type="text" name="attr_base-weapon2-dmg-dice-num" style="width:20px;text-align:center"/>
                        <select name="attr_base-weapon2-dmg-die" class="dmg-type";style="width:65px;margin:0px">
                            <option value="3">d3</option>
                            <option value="6">d6</option>
                            <option value="0">FLAT</option>
                        </select>
                        <label style="display:inline-block;width:10px;margin:0px;position:relative;right:2px;top:2px">+</label><input type="text" name="attr_base-weapon2-dmg-flat" style="width:30px;text-align:center;margin:0"/>
                        <select class="dmg-type" name="attr_base-weapon2-dmg-type">
                            <option value="KIN">KIN</option>
                            <option value="EXP">EXP</option>
                            <option value="ERG">ERG</option>
                            <option value="HET">HET</option>
                            <option value="BRN">BRN</option>
                        </select>
                    </div>
                    <div style="margin-bottom:5px">
                        <label style="display:inline-block; width:45px">TAGS</label><input name="attr_base-weapon2-tags" type="text" style="width:75%" />
                    </div>
                    <label style="display:inline-block; width:45px">NOTE </label><input type="text" name="attr_base-weapon2-notes" style="width:75%" />
                </div>
                <fieldset class="repeating_weapons">
                    <div class="grid-item" style="width:260px;margin-top:10px;margin-right:5px">
                        <div style="margin-bottom:10px">
                            <button type="roll" class="HASE-roll" value="" style="right:6px;bottom:1px;margin-right:0px;top:1px">WEAPON</button> 
                            <input type="text" name="attr_weapon-name" style="position:Relative;right:6px" />
                        </div>
                        <div style="margin-bottom:5px">
                            <label>TYPE <input type="text" name="attr_weapon-type" class="short" style="text-align:left"/></label>
                            <label>RANGE <input type="text"name="attr_weapon-range"  style="width:25px;text-align:center"/></label>
                        </div>
                        <div style="margin-bottom:5px">
                            <label style="display:inline-block;width:38px;margin:0px">DMG</label><input type="text" name="attr_weapon-dmg-dice-num" style="width:20px;text-align:center"/>
                            <select class="dmg-type";style="width:65px;margin:0px">
                                <option value="3">d3</option>
                                <option value="6">d6</option>
                                <option value="0">d0</option>
                            </select>
                            <label style="display:inline-block;width:10px;margin:0px;position:relative;right:2px;top:2px">+</label><input type="text" name="attr_weapon-dmg-flat" style="width:30px;text-align:center;margin:0"/>
                            <select class="dmg-type">
                                <option value="0">KIN</option>
                                <option value="1">EXP</option>
                                <option value="2">ERG</option>
                                <option value="3">HET</option>
                                <option value="4">BRN</option>
                            </select>
                        </div>
                        <div style="margin-bottom:5px">
                            <label style="display:inline-block; width:45px">TAGS</label><input name="attr_weapon-tags" type="text" style="width:75%" />
                        </div>
                        <label style="display:inline-block; width:45px">NOTE </label><input type="text" name="attr_weapon-notes" style="width:75%" />
                    </div>
                </fieldset>
            </div>
            <div class="grid-flex-item" style="width:295px;border:0px;background:none;margin-top:5px;">
                <fieldset class="repeating_systems">
                    <div class="grid-item" style="width:104%;height:190px;padding-left:5px;margin-bottom:10px">
                        <button type="roll" class="HASE-roll" value="&{template:default}{{name=SYSTEM: @{sys-name}}} {{TAGS=@{sys-tags}}} {{EFFECT=@{sys-effect}}}" style="right:6px;bottom:1px;margin-right:0px;top:1px">SYSTEM</button>
                        <input type="text" name="attr_sys-name" style="width:198px;position:relative;right:8px;margin-right:0px"/>
                        <div style="margin-top:10px; margin-bottom:10px; padding-right:0px;width:105%">
                            <label>TAGS <input type="text" name="attr_sys-tags"style="width:160px"/></label>
                            <label style ="position:relative;right:6px">SP<input type="text" name="attr_sys-sp" style="width:11%;position:relative;left:6px;text-align:center"/></label>
                        </div>
                        <label>EFFECT</label>
                        <textarea style="height:44%;width:98%;" name="attr_sys-effect"></textarea>
                    </div>
                </fieldset>
            </div>
    </div>
</div>







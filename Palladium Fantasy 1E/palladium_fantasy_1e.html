<div class='background-panel'>
<br>
    <input type="radio" name="attr_tab1" class="sheet-tab sheet-tab1" value="1" title="Basic" checked="checked" /><span title="Basic"></span>
    <input type="radio" name="attr_tab1" class="sheet-tab sheet-tab2" value="2" title="Equipment" /><span title="Equipment"></span>
    <input type="radio" name="attr_tab1" class="sheet-tab sheet-tab3" value="3" title="Skills" /><span title="Skills"></span>
    <input type="radio" name="attr_tab1" class="sheet-tab sheet-tab4" value="4" title="Combat" /><span title="Combat"></span>
    <input type="radio" name="attr_tab1" class="sheet-tab sheet-tab5" value="5" title="Notes" /><span title="Notes"></span>
    
    <div class="sheet-tab-content sheet-tab1">
        <h1>Character Statistics</h1>
        <div class="stats-panel">
            <div class='stats-grid-container' >
                <h5 class='llabel'>Character Name</h5>
                <input class='lstats' type="text" value="" name="attr_character_name"/>
                <div class='space-holder'></div>
                <h4 class='stat' >I.Q.</h4></span>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_iq"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_iq_max"/>
                </div>
                <button class='statdice' type="roll" name='roll_iq_check' value="&{template:custom} {{color=black}} {{title=**@{character_name}**}} {{subtitle=I.Q. Check}} {{Check=[[1d20cs<1cf>20]]|[[1d100cs<1cf>100]]}} {{Target=@{iq}}}" ></button>
                <div class='space-holder'></div>
                <h5 class='rlabel'>Hit Points</h5></span>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_character_hp"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_character_hp_max"/>
                </div>
                <div class='space-holder'></div>
                
                <h5 class='llabel'>True Name</h5>
                <input class='lstats' type="text" value="" name="attr_truename_name"/>
                <div class='space-holder'></div>
                <h4 class='stat'>M.E.</h4>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_me"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_me_max"/>
                </div>
                <button class='statdice' type="roll" name='roll_me_check' value="&{template:custom} {{color=black}} {{title=**@{character_name}**}} {{subtitle=Mental Endurance Check}} {{Check=[[1d20cs<1cf>20]]|[[1d100cs<1cf>100]]}} {{Target=@{me}}}" ></button>
                <div class='space-holder'></div>
                <h5 class='rlabel'>A.R.</h5>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_character_ar"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_character_ar_max"/>
                </div>
                <div class='space-holder'></div>
                
                <h5 class='llabel'>Race</h5>
                <input class='lstats' type="text" value="" name="attr_character_race"/>
                <div class='space-holder'></div>
                <h4 class='stat'>M.A.</h4>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_ma"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_ma_max"/>
                </div>
                <button class='statdice' type="roll" name='roll_ma_check' value="&{template:custom} {{color=black}} {{title=**@{character_name}**}} {{subtitle=Mental Affinity Check}} {{Check=[[1d20cs<1cf>20]]|[[1d100cs<1cf>100]]}} {{Target=@{ma}}}" ></button>
                <div class='space-holder'></div>
                <h5 class='rlabel'>S.D.C.</h5>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_character_sdc"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_character_sdc_max"/>
                </div>
                <div class='space-holder'></div>
                
                <h5 class='llabel'>O.C.C.</h5>
                <input class='lstats' type="text" value="" name="attr_occ" />
                <div class='space-holder'></div>
                <h4 class='stat'>P.S.</h4>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_ps"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_ps_max"/>
                </div>
                <button class='statdice' type="roll" name='roll_ps_check' value="&{template:custom} {{color=black}} {{title=**@{character_name}**}} {{subtitle=Physical Strength Check}} {{Check=[[1d20cs<1cf>20]]|[[1d100cs<1cf>100]]}} {{Target=@{ps}}}" ></button>
                <div class='space-holder'></div>
                <h5 class='rlabel'>Psion Level</h5>
                <input class='statnumber' type='text' value="0" name="attr_psi_level" />
                <div class='space-holder'></div>
                
                <h5 class='llabel'>Level</h5>
                <input class='lstats' type="text" name="attr_level" />
                <div class='space-holder'></div>
                <h4 class='stat'>P.P.</h4>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_pp"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_pp_max"/>
                </div>
                <button class='statdice' type="roll" name='roll_pp_check' value="&{template:custom} {{color=black}} {{title=**@{character_name}**}} {{subtitle=Physical Prowess Check}} {{Check=[[1d20cs<1cf>20]]|[[1d100cs<1cf>100]]}} {{Target=@{pp}}}" ></button>
                <div class='space-holder'></div>
                <h5 class='rlabel'>Psion I.S.P.</h5>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_character_pisp"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_character_pisp_max"/>
                </div>
                <div class='space-holder'></div>
                
                <h5 class='llabel'>Experience</h5>
                <input class='lstats' type="text" name="attr_experience" />
                <div class='space-holder'></div>
                <h4 class='stat'>P.E.</h4>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_pe"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_pe_max"/>
                </div>
                <button class='statdice' type="roll" name='roll_pe_check' value="&{template:custom} {{color=black}} {{title=**@{character_name}**}} {{subtitle=Physical Endurance Check}} {{Check=[[1d20cs<1cf>20]]|[[1d100cs<1cf>100]]}} {{Target=@{pe}}}" ></button>
                <div class='space-holder'></div>
                <h5 class='rlabel'>Heal I.S.P.</h5>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_character_hisp"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_character_hisp_max"/>
                </div>
                <div class='space-holder'></div>
                
                <h5 class='llabel'>Alignment</h5>
                <input class='lstats' type="text" name="attr_alignment" />
                <div class='space-holder'></div>
                <h4 class='stat'>P.B.</h4>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_pb"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_pb_max"/>
                </div>
                <button class='statdice' type="roll" name='roll_pb_check' value="&{template:custom} {{color=black}} {{title=**@{character_name}**}} {{subtitle=Physical Beauty Check}} {{Check=[[1d20cs<1cf>20]]|[[1d100cs<1cf>100]]}} {{Target=@{pb}}}" ></button>
                <div class='space-holder'></div>
                <h5 class='rlabel'>Caster Level</h5>
                <div class='fraction-grid-container'>
                    <input class='minmax' type='text' value="0" name="attr_caster_level" />
                    <div class='divider'></div>
                    <input class='minmax' type='text' value="0" name="attr_caster_level_max" />
                </div>
                <div class='space-holder'></div>
                
                <h5 class='llabel'>Age</h5>
                <input class='lstats' type="text" value="" name="attr_character_age" />
                <div class='space-holder'></div>
                <h4 class='stat'>Spd</h4>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_spd"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_spd_max"/>
                </div>
                <button class='statdice' type="roll" name='roll_spd_check' value="&{template:custom} {{color=black}} {{title=**@{character_name}**}} {{subtitle=Speed Check}} {{Check=[[1d20cs<1cf>20]]|[[1d100cs<1cf>100]]}} {{Target=@{spd}}}" ></button>
                <div class='space-holder'></div>
                <h5 class='rlabel'>Daily Casts</h5>
                <div class='fraction-grid-container'>
                    <input class='minmax' type=text value='' name="attr_character_casts"/>
                    <div class='divider'></div>
                    <input class='minmax' type=text value='' name="attr_character_casts_max"/>
                </div>
                <div class='space-holder'></div>
                
                <h5 class='llabel'>Gender</h5>
                <input class='lstats' type="text" value="" name="attr_character_gender" />
                <div class='space-holder'></div>
                <h5 class='mlabel'>Lift</h5>
                <input class='calc-field' type="text" value="" name="attr_lift" readonly>
                <h6 class='mstats'>lbs</h6>
                <div class='space-holder'></div>
                <h5 class='rlabel'>Spell Str</h5>
                <div class='fraction-grid-container'>
                    <input class='minmax' type='text' value="0" name="attr_spell_strength" />
                    <div class='divider'></div>
                    <input class='minmax' type='text' value="0" name="attr_spell_strength_max" />
                </div>                
                <div class='space-holder'></div>
                
                <h5 class='llabel'>Height</h5>
                <input class='lstats' type="text" value="" name="attr_character_height" />
                <div class='space-holder'></div>
                <h5 class='mlabel'>Carry</h5>
                <input class='calc-field' type="text" value="" name="attr_carry" readonly>
                <h6 class='mstats'>lbs</h6>
                <div class='space-holder'></div>
                <h5 class='rlabel'>Ward Level</h5>
                <input class='statnumber' type='text' value="0" name="attr_ward_level" />
                <div class='space-holder'></div>
                
                <h5 class='llabel'>Weight</h5>
                <input class='lstats' type="text" value="" name="attr_character_weight" />
                <div class='space-holder'></div>
                <h5 class='mlabel'>Carry Max</h5>
                <input class='calc-field' type="text" value="" name="attr_carry_max" readonly>
                <h6 class='mstats'>Min</h6>
                <div class='space-holder'></div>
                <h5 class='rlabel'>Daily Wards</h5>
                <input class='statnumber' type='text' value="" name="attr_ward_casts" />
                <div class='space-holder'></div>
                
                <h5 class='llabel'>Family Origin</h5>
                <input class='lstats' type="text" value="" name="attr_character_familyorigin" />
                <div class='space-holder'></div>
                <h5 class='mlabel'>Run</h5>
                <input class='calc-field' type="text" value="" name="attr_run_mph" readonly>
                <h6 class='mstats'>MPH</h6>
                <div class='space-holder'></div>
                <h5 class='rlabel'>Ward Str</h5>
                <input class='statnumber' type='text' value="0" name="attr_ward_strength" />
                <div class='space-holder'></div>
                
                <h5 class='llabel'>Land of Origin</h5>
                <input class='lstats' type="text" value="" name="attr_character_landorigin" />
                <div class='space-holder'></div>
                <h5 class='mlabel'>Run</h5>
                <input class='calc-field' type="text" value="" name="attr_run_melee" readonly>
                <h6 class='mstats'>Ft/Melee</h6>
                <div class='space-holder'></div>
                <h5 class='rlabel'>Circle Level</h5>
                <input class='statnumber' type='text' value="0" name="attr_circle_level" />
                <div class='space-holder'></div>
                
                <h5 class='llabel'>Native Language</h5>
                <input class='lstats' type="text" value="" name="attr_character_languages" />
                <div class='space-holder'></div>
                <h5 class='mlabel'>Run</h5>
                <input class='calc-field' type="text" value="" name="attr_run_attack" readonly>
                <h6 class='mstats'>Ft/Attack</h6>
                <div class='space-holder'></div>
                <h5 class='rlabel'>Circle Str</h5>
                <input class='statnumber' type='text' value="0" name="attr_circle_strength" />
                <div class='space-holder'></div>
                
                <h5 class='llabel'>Disposition</h5>
                <input class='lstats' type="text" value="" name="attr_character_disposition" />
                <div class='space-holder'></div>
                <h5 class='mlabel'>Max Run</h5>
                <input class='calc-field' type="text" value="" name="attr_run_max" readonly>
                <h6 class='mstats'>Min</h6>
                <div class='space-holder'></div>
                <h5 class='clabel'>Initiative</h5>
                <input class='statnumber' type='text' value="0" name="attr_initiative_mod" />
                <button class='cstats' type="roll" name='roll_initiative' value="&{template:custom} {{color=black}} {{title=**@{character_name}**}} {{subtitle=Initiative}} {{Initiative=[[d20+80+@{initiative_mod}&{tracker}]]}}" ></button>
                
                <h5 class='llabel'>Hostility</h5>
                <input class='lstats' type="text" value="" name="attr_character_hostility" />
                <div class='space-holder'></div>
                <h5 class='mlabel'>Trust/Intim.</h5>
                <input class='calc-field' type="text" value="0" name="attr_invoke_trust" readonly>
                <button class='mstats' type="roll" name='roll_invoke_trust' value="&{template:custom} {{color=black}} {{title=**@{character_name}**}} {{subtitle=Trust or Intimidate Attempt}} {{Skill Check=[[1d100]]}} {{Chance of Success=@{invoke_trust}}}" ></button>               
                <div class='space-holder'></div>
                <h5 class='clabel'>Perception</h5>
                <input class='statnumber' type='text' value="0" name="attr_perception" />
                <button class='cstats' type="roll" name='roll_perception' value="&{template:custom} {{color=yellow}} {{title=**@{character_name}**}} {{subtitle=Perception}} {{Perception=[[d20cs<1cf>20+@{perception}]]}} {{desc=Target equal or below=[[floor((@{iq}+@{me})/2)]]}}" ></button>
                
                <h5 class='llabel'>Insanity</h5>
                <input class='lstats' type="text" value="" name="attr_character_insanity" />    
                <div class='space-holder'></div>
                <h5 class='mlabel'>Charm/Impr.</h5>
                <input class='calc-field' type="text" value="0" name="attr_charm_impress" readonly>
                <button class='mstats' type="roll" name='roll_charm_impress' value="&{template:custom} {{color=black}} {{title=**@{character_name}**}} {{subtitle=Charm or Impress Attempt}} {{Skill Check=[[1d100]]}} {{Chance of Success=@{charm_impress}}}" ></button>
                <div class='space-holder'></div>
                <h5 class='clabel'>Dodge</h5>
                <input class='statnumber' type='text' value="0" name="attr_temp_dodge"/>
                <button class='cstats' type="roll" name='roll_dodge' value="&{template:custom} {{color=grey}} {{title=**@{character_name}**}} {{subtitle=Attempts to Dodge}} {{Dodge=[[1d20+@{hth_dodge}+@{pp_bonus}+?{Mounted?:|No, 0|Yes, @{hth_mountedparrydodge}}+@{temp_dodge}]]}} {{desc=Dodge takes the place of a remaining attack this round.}}" ></button>
            </div>
        </div>
        <div class="leap-panel">
            <h4>Movement</h4>
            <div class='leap-grid-container' >
                <div class='space-holder'></div>
                <h5>Verticle</h5>
                <h5>Horizontal</h5>
                <div class='space-holder'></div>
                <h5>Leaping Distance</h5>
                <input type="number" name="attr_leapup" value="3" />
                <input type="number" name="attr_leapout" value="4" />
                <h6>Feet</h6>
            </div>
        </div>
    	<div class="movement-panel">
            <input type="checkbox" name="attr_addl_movement_toggle" class="sheet-arrow" />
            <h4>Additional Movement</h4>            
            <div class="body">
                <div class='movement-grid-container' >
                    <h5>Movement Type</h5>
                    <h5>Speed</h5>
                    <h5>MPH</h5>
                    <h5>Ft/Melee</h5>
                    <h5>Ft/Attack</h5>
                    <h5>Max Run</h5>
                    <div class='space-holder'></div>
                    <fieldset class="repeating_movement">
                        <div class='movement-grid-container' >
                            <input type="text" value="" name="attr_movement_name" placeholder="Additional Movement Type" />
                            <input type="number" value="" name="attr_movement_spd" />
                            <input type="number" value="" name="attr_movement_mph" />
                            <input type="number" value="" name="attr_movement_ft_melee" />
                            <input type="number" value="" name="attr_movement_ft_attack" />
                            <input type="number" value="" name="attr_movement_at_max" />
                            <h6>minutes</h6>
                        </div>
                    </fieldset>
                </div>
            </div>    
        </div>
    	<div class="melee-attack-panel">
            <input type="checkbox" name="attr_melee_attacks-toggle" class="sheet-arrow" />
            <h4>Melee Attacks</h4>
            <div class="body">
                <div class='mattack-grid-container' >
                    <h5>Weapon</h5>
                    <div class='space-holder'></div>
                    <h5>Strike</h5>
                    <h5>Temp</h5>
                    <div class='space-holder'></div>
                    <h5>Parry</h5>
                    <h5>Temp</h5>
                    <div class='space-holder'></div>
                    <h5>Damage</h5>
                    <h5>Temp</h5>
                    <h5>Notes</h5>
                    <fieldset class="repeating_meleeattacks">
                        <div class='mattack-grid-container' > 
                            <input type="text" value="" name="attr_weapon_attack" placeholder="Weapon Name" />
                            <button type="roll" name='roll_meleeattack' value="&{template:custom} {{color=blue}} {{title=**@{character_name}**}} {{subtitle=attacks with @{weapon_attack}}} {{Attack= [[d20cs>@{hth_critical}+@{weapon_strike}+@{hth_strike}+@{pp_bonus}+@{temp_strike}]]}} {{Damage= [[@{weapon_damage}+@{hth_damage}+@{ps_bonus}+@{temp_damage}]]}} {{desc=@{mattack_reference}}}"></button>
                            <input type="number" value="0" name="attr_weapon_strike" />
                            <input type="number" value="0" name="attr_temp_strike" />
                            <button type="roll" name='roll_meleeparry' value="&{template:custom} {{color=grey}} {{title=**@{character_name}**}} {{subtitle=parries with @{weapon_attack}}} {{Parry= [[d20+@{weapon_parry}+@{hth_parry}+@{pp_bonus}+@{temp_parry}]]}}"></button>
                            <input type="number" value="0" name="attr_weapon_parry" />
                            <input type="number" value="0" name="attr_temp_parry" />
                            <button type="roll" name='roll_meleedamage' value="&{template:custom} {{color=red}} {{title=**@{character_name}**}} {{subtitle=lashes out}} {{@{character_name}'s @{weapon_attack} deals= [[@{weapon_damage}+@{hth_damage}+@{ps_bonus}+@{temp_damage}]]}} {{desc=@{mattack_reference}}}"></button>
                            <input class='damage-dice' type="text" value="" name="attr_weapon_damage" placeholder="xdy+z" />
                            <input type="number" value="0" name="attr_temp_damage" />
                            <input class='mattack-notes' type="text" value="" name="attr_mattack_reference" />
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
        <div class="ranged-attack-panel">
            <input type="checkbox" name="attr_ranged_attacks-toggle" class="sheet-arrow" />
            <h4>Ranged or Magical Attacks</h4>
            <div class="body">
                <div class='rattack-grid-container' >
                    <h5>Weapon</h5>
                    <div class='space-holder'></div>
                    <h5>Strike</h5>
                    <h5>Temp</h5>
                    <div class='space-holder'></div>
                    <h5>Damage</h5>
                    <h5>Temp</h5>
                    <h5>Range</h5>
                    <h5>RoF</h5>
                    <h5>Notes</h5>
                    <fieldset class="repeating_rangedattacks"> 
                        <div class='rattack-grid-container' >
                            <input type="text" value="" name="attr_weapon_attack" placeholder="Weapon Name" />
                            <button type="roll" name='roll_rangedattack' value="&{template:custom} {{color=blue}} {{title=**@{character_name}**}} {{subtitle=attacks with @{weapon_attack}}} {{Attack= [[d20cs>@{hth_ranged_critical}+@{weapon_strike}+@{temp_strike}]]}} {{Damage= [[@{weapon_damage}+@{temp_damage}]]}} {{desc=@{attack_reference}}}"></button>
                            <input type="number" value="0" name="attr_weapon_strike" />
                            <input type="number" value="0" name="attr_temp_strike" />
                            <button type="roll" name='roll_rangeddamage' value="&{template:custom} {{color=red}} {{title=**@{character_name}**}} {{subtitle=hits with @{weapon_attack}}} {{@{character_name}'s @{weapon_attack} deals= [[@{weapon_damage}+@{temp_damage}]]}} {{desc=@{attack_reference}}}"></button>
                            <input class='damage-dice' type="text" value="" name="attr_weapon_damage" placeholder="xdy+z" />
                            <input type="number" value="0" name="attr_temp_damage" />
                            <input type="number" value="" name="attr_weapon_range" />
                            <input type="number" value="1" name="attr_weapon_rate_of_fire" />
                            <input class='rattack-notes' type="text" value="" name="attr_attack_reference" />
                        </div>
                    </fieldset>
                </div>         
            </div>
        </div>
    </div>
    <div class="sheet-tab-content sheet-tab2">
        <h1>Equipment</h1>
        <div class="weapon-inventory-panel">
            <input type="checkbox" name="attr_weapon-toggle" class="sheet-arrow" />
            <h4>Weapons</h4>
            <div class="body">
                <fieldset class="repeating_weapon"> 
                    <div class='weapon-grid-container' >
                        <h5>Weapon</h5>
                        <h5>Weight</h5>
                        <h5>Length</h5>
                        <h5>Damage</h5>
                        <h5>Value</h5>
                        <div class='space-holder'></div>
                        
                        <input type="text" value="" name="attr_weapon_name" placeholder="Weapon Name" />
                        <input class='damage-dice' type="text" value="" name="attr_weapon_weight" />
                        <input class='damage-dice' type="text" value="" name="attr_weapon_length" />
                        <input class='damage-dice' type="text" value="" name="attr_weapon_damage" placeholder="xdy+z" />
                        <input type="number" value="" name="attr_weapon_value" />
                        <div class='space-holder'></div>
                        <textarea wrap="soft" class="weapon-textarea" value="" name="attr_weapon_details" placeholder="Weapon Details" /></textarea>
                    </div>            
                </fieldset>
            </div>
        </div>
        <div class="armor-inventory-panel">
            <input type="checkbox" name="attr_armor-toggle" class="sheet-arrow" />
            <h4>Armor</h4>
            <div class='body'>
                <fieldset class="repeating_armor"> 
                    <div class='armor-grid-container' >
                        <h5>Armor</h5>
                        <h5>A.R.</h5>
                        <h5>S.D.C.</h5>
                        <h5>Weight</h5>
                        <h5>Value</h5>
                        <div class='space-holder'></div>
                        
                        <input type="text" value="" name="attr_armor_name" placeholder="Armor Name" />
                        <input type="number" value="" name="attr_armor_ar" />
                        <input type="number" value="" name="attr_armor_sdc" />
                        <input class='damage-dice' type="text" value="" name="attr_armor_weight" />
                        <input class="sheet-input-center-aligned" type="number" value="" name="attr_armor_value" />
                        <div class='space-holder'></div>
                        <textarea wrap="soft" class='armor-textarea' value="" name="attr_armor_details" placeholder="Armor Details" /></textarea>
                    </div>            
                </fieldset>
            </div>
        </div>
        <div class="gear-inventory-panel">
            <input type="checkbox" name="attr_gear-toggle" class="sheet-arrow" />
            <h4>Gear</h4>
            <div class='body'>
                <fieldset class="repeating_gear"> 
                    <div class='inventory-grid-container' >
                        <h5>Item</h5>
                        <h5>Reference</h5>
                        <h5>Location</h5>
                        <div class='space-holder'></div>
                        
                        <input type="text" value="" name="attr_wealth_name" placeholder="Gear Name" />
                        <input type="text" value="" name="attr_wealth_worth" placeholder="Book and page numbers"/>
                        <input type="text" value="" name="attr_wealth_location" placeholder="Worn, pouch, bank, etc." />
                        <div class='space-holder'></div>
                        <textarea wrap="soft" class='inventory-textarea' value="" name="attr_wealth_details" placeholder="Gear details, if any" /></textarea>
                    </div>            
                </fieldset>
            </div>
        </div>
        <div class="consumable-inventory-panel">
            <input type="checkbox" name="attr_consumable-toggle" class="sheet-arrow" />
            <h4>Consumables</h4>
            <div class="body">
                <fieldset class="repeating_consumables"> 
                    <div class='inventory-grid-container' >
                        <h5>Consumable Item</h5>
                        <h5>Reference</h5>
                        <h5>Location</h5>
                        <div class='space-holder'></div>
                        
                        <input type="text" value="" name="attr_wealth_name" placeholder="Consumable Name" />
                        <input type="text" value="" name="attr_wealth_worth" placeholder="Book and page numbers"/>
                        <input type="text" value="" name="attr_wealth_location" placeholder="Worn, pouch, bank, etc." />
                        <div class='space-holder'></div>
                        <textarea wrap="soft" class='inventory-textarea' value="" name="attr_wealth_details" placeholder="Consumable details, if any" /></textarea>
                    </div>            
                </fieldset>
            </div>
        </div>
        <div class="sheet-tabbed-panel">
            <input type="checkbox" name="attr_wealth-toggle" class="sheet-arrow" />
            <h4>Wealth</h4>
            <div class="body">
                <fieldset class="repeating_wealth"> 
                    <div class='inventory-grid-container' >
                        <h5>Wealth Entry</h5>
                        <h5>Worth</h5>
                        <h5>Location</h5>
                        <div class='space-holder'></div>
                        
                        <input type="text" value="" name="attr_wealth_name" placeholder="Salary, cash, valuable, etc" />
                        <input type="text" value="" name="attr_wealth_worth" placeholder="Value"/>
                        <input type="text" value="" name="attr_wealth_location" placeholder="Wallet, pouch, bank, etc." />
                        <div class='space-holder'></div>
                        <textarea wrap="soft" class='inventory-textarea' value="" name="attr_wealth_details" placeholder="Wealth item details, if any" /></textarea>
                    </div>            
                </fieldset>
            </div>
        </div>
    </div>
    <div class="sheet-tab-content sheet-tab3">
        <h1>Skills</h1>
        <div class='universalrow-grid-container'>
            <button type="roll" name='roll_skill' value="&{template:custom} {{color=green}} {{title=**@{character_name}}} {{subtitle=?{What Skill?|No Reason}}} {{Check=[[1d100]]-@{iq_bonus}}}" ></button> 
            <h5>Universal Skill Roll</h5>
            <input class='bonus-field' type="text" value="" name="attr_iq_bonus" readonly>
            <h5>I.Q. Skill Bonus</h5>
        </div>    
        <div class="occ-skill-panel">
            <input type="checkbox" name="attr_OCC-Skill-toggle" class="sheet-arrow" />
            <h4>Occupational Class Skills</h4>
            <div class="body">
                <div class='skill-grid-container' >
                    <div class='space-holder'></div>
                    <h5>Name</h5>
                    <h5>Rating</h5>
                    <div class='percent-space'></div>
                    <h5>Skill Lvl</h5>
                    <h5>Notes</h5>
                </div>
                <fieldset class="repeating_skillocc">
    	            <div class='skill-grid-container' >
    		            <button type="roll" name='roll_occskill' value="&{template:custom} {{color=green}} {{title=**@{character_name}'s**}} {{subtitle=@{skill_name}}} {{Check=[[d100cs<1cf>100-@{iq_bonus}]]}} {{Skill=@{skill_rating}}} {{desc=@{skill_reference}}}"></button>
    		            <input type="text" value="" name="attr_skill_name" placeholder="Skill name"/>
    		            <input type="number" value="" name="attr_skill_rating" />
    		            <h6>%</h6>
    		            <input type="number" value="1" name="attr_skill_level" />
    		            <input class="skill-notes" type="text" value="" name="attr_skill_reference" />
    	            </div>
                </fieldset>
            </div>
        </div>
        <div class="elective-skill-panel">
            <input type="checkbox" name="attr_Elective-Skill-toggle" class="sheet-arrow" />
            <h4>Elective Skills</h4>
            <div class="body">
                <div class='skill-grid-container' >
                    <div class='space-holder'></div>
                    <h5>Name</h5>
                    <h5>Rating</h5>
                    <div class='percent-space'></div>
                    <h5>Skill Lvl</h5>
                    <h5>Notes</h5>
                </div>
                <fieldset class="repeating_skillelective">
    	            <div class='skill-grid-container' >
    		            <button type="roll" name='roll_electiveskill' value="&{template:custom} {{color=green}} {{title=**@{character_name}'s**}} {{subtitle=@{skill_name}}} {{Check=[[d100cs<1cf>100-@{iq_bonus}]]}} {{Skill=@{skill_rating}}} {{desc=@{skill_reference}}}"></button>
    		            <input type="text" value="" name="attr_skill_name" placeholder="Skill name"/>
    		            <input type="number" value="" name="attr_skill_rating" />
    		            <h6>%</h6>
    		            <input type="number" value="1" name="attr_skill_level" />
    		            <input class="skill-notes" type="text" value="" name="attr_skill_reference" />
    	            </div>
                </fieldset>
            </div>
        </div>
        <div class="secondary-skill-panel">
            <input type="checkbox" name="attr_Secondary-Skill-toggle" class="sheet-arrow" />
            <h4>Secondary Skills</h4>
            <div class="body">
                <div class='skill-grid-container' >
                    <div class='space-holder'></div>
                    <h5>Name</h5>
                    <h5>Rating</h5>
                    <div class='percent-space'></div>
                    <h5>Skill Lvl</h5>
                    <h5>Notes</h5>
                </div>
                <fieldset class="repeating_skillsecondary">
    	            <div class='skill-grid-container' >
    		            <button type="roll" name='roll_secondaryskill' value="&{template:custom} {{color=green}} {{title=**@{character_name}'s**}} {{subtitle=@{skill_name}}} {{Check=[[d100cs<1cf>100-@{iq_bonus}]]}} {{Skill=@{skill_rating}}} {{desc=@{skill_reference}}}"></button>
    		            <input type="text" value="" name="attr_skill_name" placeholder="Skill name"/>
    		            <input type="number" value="" name="attr_skill_rating" />
    		            <h6>%</h6>
    		            <input type="number" value="1" name="attr_skill_level" />
    		            <input class="skill-notes" type="text" value="" name="attr_skill_reference" />
    	            </div>
                </fieldset>
            </div>
        </div>
        <div class="mystic-skill-panel">
            <input type="checkbox" name="attr_Mystic-Skill-toggle" class="sheet-arrow" />
            <h4>Mystic Skills</h4>
            <div class="body">
                <div class='skill-grid-container' >
                    <div class='space-holder'></div>
                    <h5>Name</h5>
                    <h5>Rating</h5>
                    <div class='percent-space'></div>
                    <h5>Skill Lvl</h5>
                    <h5>Notes</h5>
                </div>
                <fieldset class="repeating_skillmystic">
    	            <div class='skill-grid-container' >
    		            <button type="roll" name='roll_mysticskill' value="&{template:custom} {{color=green}} {{title=**@{character_name}'s**}} {{subtitle=@{skill_name}}} {{Check=[[d100cs<1cf>100]]}} {{Skill=@{skill_rating}}} {{desc=@{skill_reference}}}"></button>
    		            <input type="text" value="" name="attr_skill_name" placeholder="Skill name"/>
    		            <input type="number" value="" name="attr_skill_rating" />
    		            <h6>%</h6>
    		            <input type="number" value="1" name="attr_skill_level" />
    		            <input class="skill-notes" type="text" value="" name="attr_skill_reference" />
    	            </div>
                </fieldset>
            </div>
        </div>
    </div>
    <div class="sheet-tab-content sheet-tab4">
        <h1>Combat</h1>
        <div class="melee-proficiency-panel">
            <input type="checkbox" name="attr_melee_weapon-toggle" class="sheet-arrow" />
            <h4>Melee Weapon Proficencies</h4>
            <div class="body">
                <div class='melee-grid-container' >
                    <h5>Weapon</h5>
                    <h5>Skill Lvl</h5>
                    <h5>Strike</h5>
                    <h5>Parry</h5>
                    <h5>Throw</h5>
                    <h5>Range</h5>
                    <fieldset class="repeating_weaponmelee">
                        <div class='melee-grid-container' >
                            <input class="sheet-input-center-aligned" type="text" value="" name="attr_melee_weapon_name" placeholder="Weapon Type" />
                            <input class="sheet-input-center-aligned" type="number" value="1" name="attr_melee_weapon_skill_level" />
                            <input class="sheet-input-center-aligned" type="number" value="0" name="attr_melee_weapon_strike" />
                            <input class="sheet-input-center-aligned" type="number" value="0" name="attr_melee_weapon_parry" />
                            <input class="sheet-input-center-aligned" type="number" value="0" name="attr_melee_weapon_throw" />
                            <input class="sheet-input-center-aligned" type="number" value="0" name="attr_melee_weapon_range" />
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
        <div class="ranged-proficiency-panel">
            <input type="checkbox" name="attr_ranged_weapon-toggle" class="sheet-arrow" />
            <h4>Ranged Weapon Proficencies</h4>
            <div class="body">
                <div class='ranged-grid-container'>
                    <h5>Weapon</h5>
                    <h5>Skill Lvl</h5>
                    <h5>Strike</h5>
                    <h5>RoF</h5>
                    <h5>Range</h5>
                    <fieldset class="repeating_rangedmelee">
                        <div class='ranged-grid-container' >
                            <input class="sheet-input-center-aligned" type="text" value="" name="attr_ranged_weapon_name" placeholder="Weapon Type" />
                            <input class="sheet-input-center-aligned" type="number" value="1" name="attr_ranged_weapon_skill_level" />
                            <input class="sheet-input-center-aligned" type="number" value="0" name="attr_ranged_weapon_strike" />
                            <input class="sheet-input-center-aligned" type="number" value="0" name="attr_ranged_weapon_parry" />
                            <input class="sheet-input-center-aligned" type="number" value="0" name="attr_ranged_weapon_range" />
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>    
        <div class="combat-skill-panel">
            <input type="checkbox" name="attr_combatskill-toggle" class="sheet-arrow" />
            <h4>Hand to Hand Combat Skill</h4>
            <div class="body">
                <div class='combat-grid-container' >
                    <input type="text" class='combat-text' name="attr_combatskill_type" placeholder="Combat Type" />
                    <div class='space-holder'></div>
                    <div class='space-holder'></div>
                    <textarea wrap="soft" class="combat-textarea" value="" placeholder="Style Details" /></textarea>
                </div>
                <div class='bonus-grid-container' >
                    <h5>Combat Skill Level</h5>
                    <input type="number" name="attr_hth_level" value="0" />
                    <div class='space-holder'></div>
                    <h5>Number of Attacks</h5>
                    <input type="number" name="attr_hth_numberattacks" value="1" />
                    <h5>Strike</h5>
                    <input type="number" name="attr_hth_strike" value="0" />
                    <div class='space-holder'></div>
                    <h5>Damage</h5>
                    <input type="number" name="attr_hth_damage" value="0" />
                    <h5>Parry</h5>
                    <input type="number" name="attr_hth_parry" value="0" />
                    <div class='space-holder'></div>
                    <h5>Dodge</h5>
                    <input type="number" name="attr_hth_dodge" value="0" />
                    <h5>Mounted Damage</h5>
                    <input type="number" name="attr_hth_mounteddamage" value="0" />
                    <div class='space-holder'></div>
                    <h5>Charge Damage</h5>
                    <input type="number" name="attr_hth_chargedamage" value="0" />                    
                    <h5>Mounted Parry/Dodge</h5>
                    <input type="number" name="attr_hth_mountedparrydodge" value="0" />
                    <div class='space-holder'></div>
                    <h5>Disarm</h5>
                    <input type="number" name="attr_hth_disarm" value="0" />
                    <h5>Knockout/Stun</h5>
                    <input type="number" name="attr_hth_knockout" value="none" />
                    <div class='space-holder'></div>
                    <h5>Critical Strike</h5>
                    <input type="number" name="attr_hth_critical" value="20" />
                    <h5>Ranged Critical Strike</h5>
                    <input type="number" name="attr_hth_ranged_critical" value="20" />
                    <div class='space-holder'></div>
                    <div class='space-holder'></div>
                    <div class='space-holder'></div>
                    <h5>Physical Prowess Bonus</h5>
                    <input class='bonus-field' type="text" value="" name="attr_pp_bonus" readonly>
                    <div class='space-holder'></div>
                    <h5>Physical Strength Bonus</h5>
                    <input class='bonus-field' type="text" value="" name="attr_ps_bonus" readonly>
                </div>
            </div>
        </div>
        <div class="saving-throw-panel">
            <input type="checkbox" name="attr_saves-toggle" class="sheet-arrow" />
            <h4>Saves</h4>
            <div class="body">
                <div class='saves-grid-container' >
                    <h5 class='underline'>Save Type</h5>
                    <h5 class='underline'>Bonus</h5>
                    <div class='space-holder'></div>
                    <div class='space-holder'></div>
                    <h5 class='underline'>Save Type</h5>
                    <h5 class='underline'>Bonus</h5>
                    <div class='space-holder'></div>
                    <h5>Circle Magic (<input type="number" value="14" name="attr_save_circle-target" />)</h5>
                    <input type="number" value="0" name="attr_save_circle" />
                    <button type="roll" name='roll_circlesave' value="&{template:custom} {{color=brown}} {{title=**@{character_name}**}} {{subtitle=Save vs. Circles}} {{Save=[[d20+@{save_circle}+@{pe_magpois}]]}} {{Target= @{save_circle-target}}}" ></button>
                    <div class='space-holder'></div>
                    <h5>Insanity (<input type="number" value="12" name="attr_save_insanity-target" />)</h5>
                    <input type="number" value="0" name="attr_save_insane" />
                    <button type="roll" name='roll_insanitysave' value="&{template:custom} {{color=brown}} {{title=**@{character_name}**}} {{subtitle=Save vs. Insanity}} {{Save=[[d20+@{save_insane}+@{me_insanity}]]}} {{Target= @{save_insanity-target}}}" ></button>                   
                    
                    <h5>Fume Magic (<input type="number" value="14" name="attr_save_fumes-target" />)</h5>
                    <input type="number" value="0" name="attr_save_fumes" />
                    <button type="roll" name='roll_fumesave' value="&{template:custom} {{color=brown}} {{title=**@{character_name}**}} {{subtitle=Save vs. Fumes}} {{Save=[[d20+@{save_fumes}+@{pe_magpois}]]}} {{Target= @{save_fumes-target}}}" ></button>
                    <div class='space-holder'></div>
                    <h5>Psionics (<input type="number" value="15" name="attr_save_psi-target" />)</h5>
                    <input type="number" value="0" name="attr_save_psi" />
                    <button type="roll" name='roll_psionicsave' value="&{template:custom} {{color=brown}} {{title=**@{character_name}**}} {{subtitle=Save vs. Psionics}} {{Save=[[d20+@{save_psi}+@{me_psionic}]]}} {{Target= @{save_psi-target}}}" ></button>
                    
                    <h5>Spell Magic (<input type="number" value="12" name="attr_save_spells-target" />)</h5>
                    <input type="number" value="0" name="attr_save_spells" />
                    <button type="roll" name='roll_spellsave' value="&{template:custom} {{color=brown}} {{title=**@{character_name}**}} {{subtitle=Save vs. Spells}} {{Save=[[d20+@{save_spells}+@{pe_magpois}]]}} {{Target= @{save_spells-target}}}" ></button>
                    <div class='space-holder'></div>
                    <h5>Soul Drinking (<input type="number" value="14" name="attr_save_souldrink-target" />)</h5>
                    <input type="number" value="0" name="attr_save_souldrinking" />
                    <button type="roll" name='roll_soulsave' value="&{template:custom} {{color=brown}} {{title=**@{character_name}**}} {{subtitle=Save vs. Souldrinking}} {{Save=[[d20+@{save_souldrinking}+@{pe_magpois}]]}} {{Target= @{save_souldrink-target}}}" ></button>
                    
                    <h5>Ward Magic (<input type="number" value="14" name="attr_save_wards-target" />)</h5>
                    <input type="number" value="0" name="attr_save_wards" />
                    <button type="roll" name='roll_wardsave' value="&{template:custom} {{color=brown}} {{title=**@{character_name}**}} {{subtitle=Save vs. Wards}} {{Save=[[d20+@{save_wards}+@{pe_magpois}]]}} {{Target= @{save_wards-target}}}" ></button>
                    <div class='space-holder'></div>
                    <h5>Coma/Death</h5>
                    <input type="number" value="0" name="attr_save_comadeath" />
                    <button type="roll" name='roll_deathsave' value="&{template:custom} {{color=brown}} {{title=**@{character_name}'s**}} {{subtitle=Save vs. Coma/Death}} {{Save 1=[[d100+@{save_comadeath}+@{pe_coma}]]}} {{Save 2=[[d100+@{save_comadeath}+@{pe_coma}]]}} {{Save 3=[[d100+@{save_comadeath}+@{pe_coma}]]}} {{desc=**Roll 3 times each hour and need 2 successes.** Target is 59 with normal treatment, or 31 with magical treatment.}}" ></button>
                    
                    <h5>Poison (<input type="number" value="14" name="attr_save_poison-target" />)</h5>
                    <input type="number" value="0" name="attr_save_poison" />
                    <button type="roll" name='roll_poisonsave' value="&{template:custom} {{color=brown}} {{title=**@{character_name}**}} {{subtitle=Save vs. Poison}} {{Save=[[d20+@{save_poison}+@{pe_magpois}]]}} {{Target= @{save_poison-target}}}" ></button>
                    <div class='space-holder'></div>
                    <div class='space-holder'></div>
                    <div class='space-holder'></div>
                    <div class='space-holder'></div>
                    
                    <h5>PE Save Bonus</h5>
                    <input class='bonus-field' type="text" value="" name="attr_pe_magpois" readonly>
                    <div class='space-holder'></div>
                    <div class='space-holder'></div>
                    <h5>ME Psionic Bonus</h5>
                    <input class='bonus-field' type="text" value="" name="attr_me_psionic" readonly>
                    <div class='space-holder'></div>
                    
                    <h5>PE Coma/Death Bonus</h5>
                    <input class='bonus-field' type="text" value="" name="attr_pe_coma" readonly>
                    <div class='space-holder'></div>
                    <div class='space-holder'></div>
                    <h5>ME Insanity Bonus</h5>
                    <input class='bonus-field' type="text" value="" name="attr_me_insanity" readonly>
                    <div class='space-holder'></div>
                </div>
            </div>
        </div>
    </div>
    <div class="sheet-tab-content sheet-tab5">
        <h1>Notes</h1>
        <div class="note-one-panel">
            <input type="checkbox" name="attr_notes-toggle" class="sheet-arrow" />
            <h4>Notes</h4>
            <div class='body'>
                <fieldset class="repeating_notes"> 
                    <div class='notes-grid-container' >
                        <h4>Notes On</h4>
                        <input type="text" value="" name="attr_notes_title" placeholder="Place, Person, or Topic" />
                        <div class="place-holder"></div>
                        <textarea wrap="soft" class='notes-textarea' value="" name="attr_notes_area" placeholder="Note Details" /></textarea>
                    </div>            
                </fieldset>
            </div>
        </div>
        <div class="note-two-panel">
            <input type="checkbox" name="attr_notes_2-toggle" class="sheet-arrow" />
            <h4>Notes 2</h4>
            <div class='body'>
                <fieldset class="repeating_notes2"> 
                    <div class='second-notes-grid-container' >
                        <h4>Notes On</h4>
                        <input type="text" value="" name="attr_notes_title" placeholder="Place, Person, or Topic" />
                        <div class="place-holder"></div>
                        <textarea wrap="soft" class='notes-textarea' value="" name="attr_notes_area" placeholder="Note Details" /></textarea>
                    </div>            
                </fieldset>
            </div>
        </div>
        <div class="note-three-panel">
            <input type="checkbox" name="attr_notes_3-toggle" class="sheet-arrow" />
            <h4>Notes 3</h4>
            <div class='body'>
                <fieldset class="repeating_notes3"> 
                    <div class='third-notes-grid-container' >
                        <h4>Notes On</h4>
                        <input type="text" value="" name="attr_notes_title" placeholder="Place, Person, or Topic" />
                        <div class="place-holder"></div>
                        <textarea wrap="soft" class='notes-textarea' value="" name="attr_notes_area" placeholder="Note Details" /></textarea>
                    </div>            
                </fieldset>
            </div>
        </div>    
    </div>
</div>
<div style="text-align:center;">
Sheet created by John W. https://app.roll20.net/users/492849/john-w
<br>
With updates by Phillip G. https://app.roll20.net/users/239016/phillip-g
<br>
Adjusted for 1Ed. PFRPG by Kraynic https://app.roll20.net/users/1869955/kraynic
<br>
Roll Template by Jakob https://app.roll20.net/users/726129/jakob
</div>

<script type="text/worker">	
    on("change:iq sheet:opened", function () {
            getAttrs(['iq'], function (values) {
                const iq = parseInt(values['iq'])||0;
                let iq_bonus = 0;
                if(iq > 15) iq_bonus = Math.round(iq -14);
                setAttrs({
                    iq_bonus: iq_bonus
                });
            });
    });
    on("change:me sheet:opened", function () {
        getAttrs(['me'], function (values) {
            const mep = parseInt(values['me'])||0;
            const mei = parseInt(values['me'])||0;
            let me_psionic = 0;
            if (mep > 15) me_psionic = Math.round((mep -15)*.5);
            let me_insanity = 0;
            if (mei > 20) me_insanity = Math.round(mei -17);
            else if (mei > 15) me_insanity = me_insanity;
            setAttrs({
                me_psionic: me_psionic,
                me_insanity: me_insanity
            });
        });
    });
    function maMod(score) {
    	let bonus = 0;
    	if (score >= 30) bonus = 97;
    	else if (score >= 29) bonus = 96;
    	else if (score >= 28) bonus = 94;
    	else if (score >= 27) bonus = 92;
    	else if (score >= 26) bonus = 88;
    	else if (score >= 25) bonus = 84;
    	else if (score >= 16) bonus = Math.floor(score-8)*5;
    	return bonus;
   }; 
	on("change:ma sheet:opened", function () {
        getAttrs(['ma'], function (values) {
            let ma = parseInt(values['ma'])||0;
            let invoke_trust = maMod(ma);
            setAttrs({                            
            	invoke_trust: invoke_trust
            });
        });
    });
    on("change:ps sheet:opened", function () {
            getAttrs(['ps'], function (values) {
                const ps = parseInt(values['ps'])||0;
                const psx20 = ps*20;
                const psx10 = ps*10;
                let ps_bonus = 0;
                if(ps > 15) ps_bonus = Math.round(ps -15);
                setAttrs({
                    lift: psx20,
                    carry: psx10,
                    ps_bonus: ps_bonus
                });
            });
    });
    function ppMod(score) {
    	let bonus = 0;
    	if (score >= 16) bonus = Math.round((score-15)*.5);
    	return bonus;
   }; 
	on("change:pp sheet:opened", function () {
        getAttrs(['pp'], function (values) {
            let pp = parseInt(values['pp'])||0;
            let pp_bonus = ppMod(pp);
            setAttrs({                            
            	pp_bonus: pp_bonus
            });
        });
    });    
    on("change:pe sheet:opened", function () {
        getAttrs(['pe'], function (values) {
            const pe = parseInt(values['pe'])||0;
            const pec = pe;
            const per = pe;
            let pe_magpois = 0;
            if (pe > 15) pe_magpois = Math.round((pe -15)*.5);
            let pe_coma = 0;
            if (pe > 15) pe_coma = Math.round(pe -12);
            else if (pe > 17) pe_coma = Math.round((pe -15)*2);
            setAttrs({
                carry_max: pec,
                run_max: per,
                pe_magpois: pe_magpois,
                pe_coma: pe_coma
            });
        });
    }); 
    function pbMod(score) {
    	let bonus = 0;
    	if (score >= 30) bonus = 92;
    	else if (score >= 27) bonus = (score *3) +3;
    	else if (score >= 16) bonus = Math.floor(score-10)*5;
    	return bonus;
   }; 
	on("change:pb sheet:opened", function () {
        getAttrs(['pb'], function (values) {
            let pb = parseInt(values['pb'])||0;
            let charm_impress = pbMod(pb);
            setAttrs({                            
            	charm_impress: charm_impress
            });
        });
    }); 
    on("change:spd sheet:opened", function () {
        getAttrs(['spd'], function (values) {
            const spd = parseInt(values['spd'])||0;
            const runmel = spd*15;
            const runmil = Math.round(spd*.68);
            setAttrs({
                run_melee: runmel,
                run_mph: runmil
            });
        });
    }); 
	on("change:spd change:hth_numberattacks sheet:opened", function () {
        getAttrs(['spd','hth_numberattacks'], function (values) {
            const spd = parseInt(values['spd'])||0;
            const hth_numberattacks = parseInt(values['hth_numberattacks'])||0;
            const modifier = Math.round((spd/hth_numberattacks)*15); 
            setAttrs({
                run_attack: modifier
            });
        });
    });    
</script>

<rolltemplate class="sheet-rolltemplate-custom">
  <div class="sheet-container sheet-color-{{color}}">
    <div class="sheet-header">
      {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
      {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
    </div>
    <div class="sheet-content">
      {{#allprops() title subtitle desc color}}
      <div class="sheet-key">{{key}}</div>
      <div class="sheet-value">{{value}}</div>
      {{/allprops() title subtitle desc color}}
      {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
    </div>
  </div>
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-menu">
  <div class="sheet-container sheet-color-{{color}}">
    <div class="sheet-header">
      {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
      {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
    </div>
    <div class="sheet-content">
      {{#allprops() title subtitle desc color}}
      <div class="sheet-key">{{key}}</div>
      <div class="sheet-value">{{value}}</div>
      {{/allprops() title subtitle desc color}}
      {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
    </div>
  </div>
</rolltemplate>
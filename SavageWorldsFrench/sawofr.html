<!-- **** SCRIPTS / SHEET WORKERS -->
<script type="text/worker">
/* ---- BEGIN: TheAaronSheet.js ---- */
// Github:   https://github.com/shdwjk/TheAaronSheet/blob/master/TheAaronSheet.js
// By:       The Aaron, Arcane Scriptomancer
// Contact:  https://app.roll20.net/users/104025/the-aaron

var TAS = TAS || (function(){
    'use strict';

    var version = '0.2.4',
        lastUpdate = 1457098091,

        loggingSettings = {
            debug: {
                key:     'debug',
                title:   'DEBUG',
                color: {
                    bgLabel: '#7732A2',
                    label:   '#F2EF40',
                    bgText:  '#FFFEB7',
                    text:    '#7732A2'
                }
            },
            error: {
                key:     'error',
                title:   'Error',
                color: {
                    bgLabel: '#C11713',
                    label:   'white',
                    bgText:  '#C11713',
                    text:    'white'
                }
            },
            warn: {
                key:     'warn',
                title:   'Warning',
                color: {
                    bgLabel: '#F29140',
                    label:   'white',
                    bgText:  '#FFD8B7',
                    text:    'black'
                }
            },
            info: {
                key:     'info',
                title:   'Info',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            notice: {
                key:     'notice',
                title:   'Notice',
                color: {
                    bgLabel: '#33C133',
                    label:   'white',
                    bgText:  '#ADF1AD',
                    text:    'black'
                }
            },
            log: {
                key:     'log',
                title:   'Log',
                color: {
                    bgLabel: '#f2f240',
                    label:   'black',
                    bgText:  '#ffff90',
                    text:    'black'
                }
            },
            callstack: {
                key:     'TAS',
                title:   'function',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            callstack_async: {
                key:     'TAS',
                title:   'ASYNC CALL',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#413FA9',
                    text:    'white'
                }
            },
            TAS: {
                key:     'TAS',
                title:   'TAS',
                color: {
                    bgLabel: 'grey',
                    label:   'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)',
                    bgText:  'grey',
                    text:    'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)'
                }
            }
        },


        config = {
            debugMode: false,
            logging: {
                log: true,
                notice: true,
                info: true,
                warn: true,
                error: true,
                debug: false
            }
        },

        callstackRegistry = [],
        queuedUpdates = {}, //< Used for delaying saves till the last momment.

    complexType = function(o){
        switch(typeof o){
            case 'string':
                return 'string';
            case 'boolean':
                return 'boolean';
            case 'number':
                return (_.isNaN(o) ? 'NaN' : (o.toString().match(/\./) ? 'decimal' : 'integer'));
            case 'function':
                return 'function: '+(o.name ? o.name+'()' : '(anonymous)');
            case 'object':
                return (_.isArray(o) ? 'array' : (_.isArguments(o) ? 'arguments' : ( _.isNull(o) ? 'null' : 'object')));
            default:
                return typeof o;
        }
    },

    dataLogger = function(primaryLogger,secondaryLogger,data){
        _.each(data,function(m){
            var type = complexType(m);
            switch(type){
                case 'string':
                    primaryLogger(m);
                    break;
                case 'undefined':
                case 'null':
                case 'NaN':
                    primaryLogger('['+type+']');
                    break;
                case 'number':
                case 'not a number':
                case 'integer':
                case 'decimal':
                case 'boolean':
                    primaryLogger('['+type+']: '+m);
                    break;
                default:
                    primaryLogger('['+type+']:=========================================');
                    secondaryLogger(m);
                    primaryLogger('=========================================================');
                    break;
            }
        });
    },


    colorLog = function(options){
        var coloredLoggerFunction,
            key = options.key,
            label = options.title || 'TAS',
            lBGColor = (options.color && options.color.bgLabel) || 'blue',
            lTxtColor = (options.color && options.color.label) || 'white',
            mBGColor = (options.color && options.color.bgText) || 'blue',
            mTxtColor = (options.color && options.color.text) || 'white';

        coloredLoggerFunction = function(message){
            console.log(
                '%c '+label+': %c '+message + ' ',
                'background-color: '+lBGColor+';color: '+lTxtColor+'; font-weight:bold;',
                'background-color: '+mBGColor+';color: '+mTxtColor+';'
            );
        };
        return function(){
            if('TAS'===key || config.logging[key]){
               dataLogger(coloredLoggerFunction,function(m){console.log(m);},_.toArray(arguments));
            }
        };
    },

    logDebug  = colorLog(loggingSettings.debug),
    logError  = colorLog(loggingSettings.error),
    logWarn   = colorLog(loggingSettings.warn),
    logInfo   = colorLog(loggingSettings.info),
    logNotice = colorLog(loggingSettings.notice),
    logLog    = colorLog(loggingSettings.log),
    log       = colorLog(loggingSettings.TAS),
    logCS     = colorLog(loggingSettings.callstack),
    logCSA    = colorLog(loggingSettings.callstack_async),

    registerCallstack = function(callstack,label){
        var idx=_.findIndex(callstackRegistry,function(o){
            return (_.difference(o.stack,callstack).length === _.difference(callstack,o.stack).length) &&
                _.difference(o.stack,callstack).length === 0 &&
                o.label === label;
        });
        if(-1 === idx){
            idx=callstackRegistry.length;
            callstackRegistry.push({
                stack: callstack,
                label: label
            });
        }
        return idx;
    },

    setConfigOption = function(options){
        var newconf =_.defaults(options,config);
        newconf.logging=_.defaults(
            (options && options.logging)||{},
            config.logging
        );
        config=newconf;
    },

    debugMode = function(){
        config.logging.debug=true;
        config.debugMode = true;
    },

    getCallstack = function(){
        var e = new Error('dummy'),
            stack = _.map(_.rest(e.stack.replace(/^[^\(]+?[\n$]/gm, '')
            .replace(/^\s+at\s+/gm, '')
            .replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@')
            .split('\n')),function(l){
                return l.replace(/\s+.*$/,'');
            });
        return stack;
    },
    logCallstackSub = function(cs){
        var matches, csa;
        _.find(cs,function(line){
            matches = line.match(/TAS_CALLSTACK_(\d+)/);
            if(matches){
               csa=callstackRegistry[matches[1]];
               logCSA( '===================='+(csa.label ? '> '+csa.label+' <' : '')+'====================');
               logCallstackSub(csa.stack);
               return true;
            }
            logCS(line);
            return false;
        });
    },
    logCallstack = function(){
        var cs;
        if(config.debugMode){
            cs = getCallstack();
            cs.shift();
            log('==============================> CALLSTACK <==============================');
            logCallstackSub(cs);
            log('=========================================================================');
        }
    },


    wrapCallback = function (label, callback, context){
        var callstack;
        if('function' === typeof label){
            context=callback;
            callback=label;
            label=undefined;
        }
        if(!config.debugMode){
            return (function(cb,ctx){
                return function(){
                    cb.apply(ctx||{},arguments);
                };
            }(callback,context));
        }

        callstack = getCallstack();
        callstack.shift();

        return (function(cb,ctx,cs,lbl){
            var ctxref=registerCallstack(cs,lbl);

            /*jshint -W054 */
            return new Function('cb','ctx','TASlog',
                "return function TAS_CALLSTACK_"+ctxref+"(){"+
                    "TASlog('Entering: '+(cb.name||'(anonymous function)'));"+
                    "cb.apply(ctx||{},arguments);"+
                    "TASlog('Exiting: '+(cb.name||'(anonymous function)'));"+
                "};")(cb,ctx,log);
            /*jshint +W054 */
        }(callback,context,callstack,label));
    },


    prepareUpdate = function( attribute, value ){
        queuedUpdates[attribute]=value;
    },

    applyQueuedUpdates = function() {
      setAttrs(queuedUpdates);
      queuedUpdates = {};
    },

    namesFromArgs = function(args,base){
        return _.chain(args)
            .reduce(function(memo,attr){
                if('string' === typeof attr) {
                    memo.push(attr);
                } else if(_.isArray(args) || _.isArguments(args)){
                    memo = namesFromArgs(attr,memo);
                }
                return memo;
            },(_.isArray(base) && base) || [])
            .uniq()
            .value();
    },

    addId = function(obj,value){
        Object.defineProperty(obj,'id',{
            value: value,
            writeable: false,
            enumerable: false
        });
    },

    addProp = function(obj,prop,value,fullname){
        (function(){
            var pname=(_.contains(['S','F','I','D'],prop) ? '_'+prop : prop),
                full_pname = fullname || prop,
                pvalue=value;

            _.each(['S','I','F'],function(p){
                if( !_.has(obj,p)){
                    Object.defineProperty(obj, p, {
                        value: {},
                        enumerable: false,
                        readonly: true
                    });
                }
            });
            if( !_.has(obj,'D')){
                Object.defineProperty(obj, 'D', {
                    value: _.reduce(_.range(10),function(m,d){
                            Object.defineProperty(m, d, {
                                value: {},
                                enumerable: true,
                                readonly: true
                            });
                            return m;
                        },{}),
                    enumerable: false,
                    readonly: true
                });
            }


            // Raw value
            Object.defineProperty(obj, pname, {
                enumerable: true,
                set: function(v){
                    if(v!==pvalue) {
                        pvalue=v;
                        prepareUpdate(full_pname,v);
                    }
                },
                get: function(){
                    return pvalue;
                }
            });

            // string value
            Object.defineProperty(obj.S, pname, {
                enumerable: true,
                set: function(v){
                    var val=v.toString();
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
                },
                get: function(){
                    return pvalue.toString();
                }
            });

            // int value
            Object.defineProperty(obj.I, pname, {
                enumerable: true,
                set: function(v){
                    var val=parseInt(v,10) || 0;
                    if(val !== pvalue){
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
                },
                get: function(){
                    return parseInt(pvalue,10) || 0;
                }
            });

            // float value
            Object.defineProperty(obj.F, pname, {
                enumerable: true,
                set: function(v){
                    var val=parseFloat(v) || 0;
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
                },
                get: function(){
                    return parseFloat(pvalue) || 0;
                }
            });
            _.each(_.range(10),function(d){
                Object.defineProperty(obj.D[d], pname, {
                    enumerable: true,
                    set: function(v){
                        var val=(parseFloat(v) || 0).toFixed(d);
                        if(val !== pvalue){
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
                    },
                    get: function(){
                        return (parseFloat(pvalue) || 0).toFixed(d);
                    }
                });
            });

        }());
    },

    repeating = function( section ) {
        return (function(s){
            var sectionName = s,
                attrNames = [],
                fieldNames = [],
                operations = [],
                after = [],

            repAttrs = function TAS_Repeating_Attrs(){
                attrNames = namesFromArgs(arguments,attrNames);
                return this;
            },
            repFields = function TAS_Repeating_Fields(){
                fieldNames = namesFromArgs(arguments,fieldNames);
                return this;
            },
            repReduce = function TAS_Repeating_Reduce(func, initial, final, context) {
                operations.push({
                    type: 'reduce',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    memo: (_.isUndefined(initial) && 0) || initial,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
                return this;
            },
            repMap = function TAS_Repeating_Map(func, final, context) {
                operations.push({
                    type: 'map',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
                return this;
            },
            repEach = function TAS_Repeating_Each(func, final, context) {
                operations.push({
                    type: 'each',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
                return this;
            },
            repTap = function TAS_Repeating_Tap(final, context) {
                operations.push({
                    type: 'tap',
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
                return this;
            },
            repAfter = function TAS_Repeating_After(callback,context) {
                after.push({
                    callback: (callback && _.isFunction(callback) && callback) || _.noop,
                    context: context || {}
                });
                return this;
            },
            repExecute = function TAS_Repeating_Execute(callback,context){
                var rowSet = {},
                    attrSet = {},
                    fieldIds = [],
                    fullFieldNames = [];

                repAfter(callback,context);

                // call each operation per row.
                // call each operation's final
                getSectionIDs("repeating_"+sectionName,function(ids){
                    fieldIds = ids;
                    fullFieldNames = _.reduce(fieldIds,function(memo,id){
                        return memo.concat(_.map(fieldNames,function(name){
                            return 'repeating_'+sectionName+'_'+id+'_'+name;
                        }));
                    },[]);
                    getAttrs( _.uniq(attrNames.concat(fullFieldNames)), function(values){
                        _.each(attrNames,function(aname){
                            if(values.hasOwnProperty(aname)){
                                addProp(attrSet,aname,values[aname]);
                            }
                        });

                        rowSet = _.reduce(fieldIds,function(memo,id){
                            var r={};
                            addId(r,id);
                            _.each(fieldNames,function(name){
                                var fn = 'repeating_'+sectionName+'_'+id+'_'+name;
                                addProp(r,name,values[fn],fn);
                            });

                            memo[id]=r;

                            return memo;
                        },{});

                        _.each(operations,function(op){
                            var res;
                            switch(op.type){
                                case 'tap':
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;

                                case 'each':
                                    _.each(rowSet,function(r){
                                        _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;

                                case 'map':
                                    res = _.map(rowSet,function(r){
                                        return _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;

                                case 'reduce':
                                    res = op.memo;
                                    _.each(rowSet,function(r){
                                        res = _.bind(op.func,op.context,res,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;
                            }
                        });

                        // finalize attrs
                        applyQueuedUpdates();
                        _.each(after,function(op){
                            _.bind(op.callback,op.context)();
                        });
                    });
                });
            };

            return {
                attrs: repAttrs,
                attr: repAttrs,

                column: repFields,
                columns: repFields,
                field: repFields,
                fields: repFields,

                reduce: repReduce,
                inject: repReduce,
                foldl: repReduce,

                map: repMap,
                collect: repMap,

                each: repEach,
                forEach: repEach,

                tap: repTap,
                'do': repTap,

                after: repAfter,
                last: repAfter,
                done: repAfter,

                execute: repExecute,
                go: repExecute,
                run: repExecute
            };
        }(section));
    },


    repeatingSimpleSum = function(section, field, destination){
        repeating(section)
            .attr(destination)
            .field(field)
            .reduce(function(m,r){
                return m + (r.F[field]);
            },0,function(t,r,a){
                a.S[destination]=t;
            })
            .execute();
    };

    console.log('%c•.¸¸.•*´¨`*•.¸¸.•*´¨`*•.¸  The Aaron Sheet  v'+version+'  ¸.•*´¨`*•.¸¸.•*´¨`*•.¸¸.•','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
    console.log('%c•.¸¸.•*´¨`*•.¸¸.•*´¨`*•.¸  Last update: '+(new Date(lastUpdate*1000))+'  ¸.•*´¨`*•.¸¸.•*´¨`*•.¸¸.•','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');


    return {
        /* Repeating Sections */
        repeatingSimpleSum: repeatingSimpleSum,
        repeating: repeating,

        /* Configuration */
        config: setConfigOption,

        /* Debugging */
        callback: wrapCallback,
        callstack: logCallstack,
        debugMode: debugMode,
        _fn: wrapCallback,

        /* Logging */
        debug: logDebug,
        error: logError,
        warn: logWarn,
        info: logInfo,
        notice: logNotice,
        log: logLog
    };
}());
/* ---- END: TheAaronSheet.js ---- */

// Ouverture de la feuille : correction compétence d'arme.
on('sheet:opened',function(){
    // **** Gestion 1ière ouverture de la fiche pour transition 1.x -> 1.4
    getAttrs(["sheetarmectrl"], function(values) {
        if(values.sheetarmectrl == 0) {
            getAttrs(["joker_de","arme1_comp","arme2_comp","arme3_comp","blessures","fatigue"], function(values) {
                var extra = 0;
                var malusblessures = 0;
                var malusfatigue = 0;
                var chkPossessions = 1;
                if (values.joker_de == "0d4") {
                    extra = 1;
                    chkPossessions = 0;
                }
                if (values.blessures > 3) {
                    malusblessures = 3;
                } else {
                    malusblessures = values.blessures;
                }
                if (values.fatigue > 2) {
                    malusfatigue = 2;
                } else {
                    malusfatigue = values.fatigue;
                }
                setAttrs({
                    arme1_comp_brut: "@{RollBast" + values.arme1_comp + "}",
                    arme2_comp_brut: "@{RollBast" + values.arme2_comp + "}",
                    arme3_comp_brut: "@{RollBast" + values.arme3_comp + "}",
                    extra: extra,
                    pnj: extra,
                    chkPossessions: chkPossessions,
                    templateetat: extra,
                    malusblessures: malusblessures,
                    malusfatigue: malusfatigue
                });
            });
            TAS.repeating('armes')
                .fields('armeD_comp','armeD_comp_brut')
                .reduce(function(m,r){
                    r.S.armeD_comp_brut="@{RollBast" + r.S.armeD_comp + "}";
                    return m;
                })
                .execute();
            setAttrs({sheetarmectrl: 1});
        }
    });
});
// JOKER / PNJ / EXTRA
on("change:joker_de", function() {
    getAttrs(["joker_de","pnj","chkPossessions","templateetat"], function(values) {
        var extra = 0;
        var pnj = 0;
        var possessions = 1;
        var templateetat = 1;
        if (values.joker_de == "0d4") {
            extra = 1;
            pnj = 1;
            possessions = 0;
            templateetat = 0;
        } else {
            extra = 0;
            pnj = values.pnj;
            possessions = values.chkPossessions;
            templateetat = values.templateetat;
        }
        setAttrs({
            extra: extra,
            pnj: pnj,
            chkPossessions: possessions,
            templateetat: templateetat
        });
    });
});
on("change:pnj", function(){
    getAttrs(["pnj"], function(values) {
        if (values.pnj == 1) {
            setAttrs({
                chkPossessions: 0,
                templateetat: 0
            });
        }
    });
});
// BLESSURES et Malus blessure
on("change:blessures", function() {
    getAttrs(["blessures"], function(values) {
        var malusblessures = 0;
        if (values.blessures > 3) {
            malusblessures = 3;
        } else {
            malusblessures = values.blessures;
        }
        setAttrs({
            malusblessures: malusblessures
        });
    });
});
// FATIGUE et Malus blessure
on("change:fatigue", function() {
    getAttrs(["fatigue"], function(values) {
        var malusfatigue = 0;
        if (values.fatigue > 2) {
            malusfatigue = 2;
        } else {
            malusfatigue = values.fatigue;
        }
        setAttrs({
            malusfatigue: malusfatigue
        });
    });
});
// ARMES FIXES
on("change:arme1_comp", function() {
    getAttrs(["arme1_comp"], function(values) {
        setAttrs({
            arme1_comp_rel: "@{relRollBast" + values.arme1_comp + "}",
            arme1_comp_jet: "@{jetRollBast" + values.arme1_comp + "}",
            arme1_comp_brut: "@{RollBast" + values.arme1_comp + "}"
        });
    });
});
on("change:arme2_comp", function() {
    getAttrs(["arme2_comp"], function(values) {
        setAttrs({
            arme2_comp_rel: "@{relRollBast" + values.arme2_comp + "}",
            arme2_comp_jet: "@{jetRollBast" + values.arme2_comp + "}",
            arme2_comp_brut: "@{RollBast" + values.arme2_comp + "}"
        });
    });
});
on("change:arme3_comp", function() {
    getAttrs(["arme3_comp"], function(values) {
        setAttrs({
            arme3_comp_rel: "@{relRollBast" + values.arme3_comp + "}",
            arme3_comp_jet: "@{jetRollBast" + values.arme3_comp + "}",
            arme3_comp_brut: "@{RollBast" + values.arme3_comp + "}"
        });
    });
});
// ARMES DYNAMIQUES
on("change:repeating_armes:armed_comp", function() {
    getAttrs(["repeating_armes_armeD_comp"], function(values) {
        setAttrs({
            repeating_armes_armeD_comp_rel: "@{relRollBast" + values.repeating_armes_armeD_comp + "}",
            repeating_armes_armeD_comp_jet: "@{jetRollBast" + values.repeating_armes_armeD_comp + "}"
            ,repeating_armes_armeD_comp_brut: "@{RollBast" + values.repeating_armes_armeD_comp + "}"
        });
    });
});
// CARACS DÉRIVÉES
//    Charisme
on("change:charisme_base change:charisme_bonus", function() {
    getAttrs(["charisme_base","charisme_bonus"], function(values) {
        setAttrs({
            charisme: parseInt(values.charisme_base) + parseInt(values.charisme_bonus)
        });
    });
});
// Parade
on("change:combat_de change:combat_bonus change:parade_bonus", function() {
    getAttrs(["combat_de","combat_bonus","parade_bonus"], function(values) {
        setAttrs({
            parade_base: 2 + Math.floor( (parseInt(values.combat_de) + parseInt(values.combat_bonus)) / 2),
            parade: parseInt(values.parade_bonus) + 2 + Math.floor( (parseInt(values.combat_de) + parseInt(values.combat_bonus)) / 2)
        });
    });
});
// Résistance
on("change:vigueur_de change:vigueur_bonus change:resistance_bonus", function() {
    getAttrs(["vigueur_de","vigueur_bonus","resistance_bonus"], function(values) {
        setAttrs({
            resistance_base: 2 + Math.floor( (parseInt(values.vigueur_de) + parseInt(values.vigueur_bonus)) / 2),
            resistance: parseInt(values.resistance_bonus) + 2 + Math.floor( (parseInt(values.vigueur_de) + parseInt(values.vigueur_bonus)) / 2)
        });
    });
});
// Affichage / Masquage toutes compétences
on("change:chkAllComp", function() {
    getAttrs(["chkAllComp"], function(values) {
        setAttrs({
            chkArcane: values.chkAllComp,
            chkCombat: values.chkAllComp,
            chkConduite: values.chkAllComp,
            chkConnaissance: values.chkAllComp,
            chkCrochetage: values.chkAllComp,
            chkDiscretion: values.chkAllComp,
            chkEquitation: values.chkAllComp,
            chkEscalade: values.chkAllComp,
            chkIntimidation: values.chkAllComp,
            chkJeu: values.chkAllComp,
            chkLancer: values.chkAllComp,
            chkNatation: values.chkAllComp,
            chkNavigation: values.chkAllComp,
            chkPerception: values.chkAllComp,
            chkPersuasion: values.chkAllComp,
            chkPilotage: values.chkAllComp,
            chkPistage: values.chkAllComp,
            chkRecherche: values.chkAllComp,
            chkReparation: values.chkAllComp,
            chkReseaux: values.chkAllComp,
            chkSarcasme: values.chkAllComp,
            chkSoins: values.chkAllComp,
            chkSurvie: values.chkAllComp,
            chkTir: values.chkAllComp
        });
    });
});
//Inventaire et encombrement
on("change:repeating_equipements:equipqte change:repeating_equipements:equippdsunit", function() {
    getAttrs(["repeating_equipements_equipqte", "repeating_equipements_equippdsunit"], function(values) {
        var qte = parseFloat(values.repeating_equipements_equipqte) || 1.0;
        var pds = parseFloat(values.repeating_equipements_equippdsunit) || 0.0;
        setAttrs({
         repeating_equipements_equippoids: qte*pds
        });
   });
   TAS.repeatingSimpleSum('equipements','equippoids','encombpoids');
});
 on('remove:repeating_equipements',function(){
    TAS.repeatingSimpleSum('equipements','equippoids','encombpoids');
});
on("change:force_de", function() {
    getAttrs(["force_de"], function(values) {
        setAttrs({
            encombmax: parseInt(values.force_de)*2.5
        });
    });
});
on("change:encombpoids change:encombmax", function() {
    getAttrs(["encombmax","encombpoids"], function(values) {
        var lemax = parseInt(values.encombmax) || 1;
        var lepoids = parseInt(values.encombpoids) || 0;
        setAttrs({
            encombrement: Math.floor(lepoids/lemax)
        });
    });
});
on("change:atkcible", function () {
    getAttrs(["atkcible"], function(values){
        var cibleparade = "",
        cibleresistance = "",
        atknom = "";
        if ( values.atkcible == 1) {
            cibleparade = "@{target|parade}";
            cibleresistance = "@{target|resistance}";
            atknom = "@{target|character_name}";
        } else {
            cibleparade = "?{Parade|4}";
            cibleresistance = "?{Résistance|4}";
            atknom = "-";
        }
        setAttrs({
            cibleparade: cibleparade,
            cibleresistance: cibleresistance,
            atknom: atknom
        });
    });
});
</script>
<!-- *** HIDDEN ROLLS ** -->
<div style="display: none;">
    <!-- Gestion de la feuille -->
    <input type="number" hidden name="attr_sheetArmeCtrl" value="0" /> <!-- Transition pour compétences d'arme et jets bruts -->
    <!-- ETAT du Personnage -->
    <input type="number" name="attr_malusblessures" value="0" />
    <input type="number" name="attr_malusfatigue" value="0" />
    <!-- ATTRIBUTS -->
    <input type="text" disabled hidden name="attr_RollAGI" value="{ 1d@{agilite_de}!![Agilité] , @{joker_de}!![Joker] }kh1 + (@{agilite_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollAGI" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Agilité}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{rollAGI} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollAGI" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Agilité}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{rollAGI}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollAME" value="{ 1d@{ame_de}!![Âme] , @{joker_de}!![Joker] }kh1 + (@{ame_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollAME" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Âme}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{rollAME} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollAME" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Âme}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{rollAME}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_RollFOR" value="{ 1d@{force_de}!![Force] , @{joker_de}!![Joker] }kh1 + (@{force_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollFOR" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Force}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{rollFOR} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollFOR" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Force}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{rollFOR}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollINT" value="{ 1d@{intellect_de}!![Intellect] , @{joker_de}!![Joker] }kh1 + (@{intellect_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollINT" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Intellect}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{rollINT} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollINT" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Intellect}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{rollINT}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_RollVIG" value="{ 1d@{vigueur_de}!![Vigueur] , @{joker_de}!![Joker] }kh1 + (@{vigueur_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollVIG" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Vigueur}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{rollVIG} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollVIG" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Vigueur}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{rollVIG}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <!-- BASTON -->
    <input type="text" hidden readonly name="attr_cibleparade" value="@{Target|parade}" />
    <input type="text" hidden readonly name="attr_cibleresistance" value="@{Target|resistance}" />
    <input type="text" hidden readonly name="attr_atknom" value="@{target|character_name}" />

    <input type="text" disabled hidden name="attr_RollBastCombat" value="{ 1d@{combat_de}!![Combat],@{joker_de}!![Joker]}kh1 + (@{combat_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollBastCombat" value="{ floor( ( { @{RollBastCombat} } - (@{cibleparade}[Parade] - 4 ) ) /4), 0d0 }kh1 " />
    <input type="text" disabled hidden name="attr_jetRollBastCombat" value="@{RollBastCombat}" />

    <input type="text" disabled hidden name="attr_RollBastLancer" value="{ 1d@{lancer_de}!![Lancer],@{joker_de}!![Joker]}kh1 + (@{lancer_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] - ?{Portée|Courte,0|Moyenne,2|Longue,4}[Portée] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollBastLancer" value="{ floor( ( { @{rollBastLancer} } ) /4), 0d0 }kh1" />
    <input type="text" disabled hidden name="attr_jetRollBastLancer" value="@{RollBastLancer}" />

    <input type="text" disabled hidden name="attr_RollBastTir" value="{ 1d@{tir_de}!![Tir],?{Dé joker ?|Oui,@{joker_de}!|Non,0d4}[Joker]}kh1 + (@{tir_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] - ?{Portée|Courte,0|Moyenne,2|Longue,4}[Portée] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollBastTir" value="{ floor( ( { @{rollBastTir} } ) /4), 0d0 }kh1" />
    <input type="text" disabled hidden name="attr_jetRollBastTir" value="@{RollBastTir}" />

    <input type="text" disabled hidden name="attr_RollBastForce" value="1d@{force_de}!!+(@{force_bonus})[Dégâts : Force]" />

    <!-- ARMES -->
    <input type="text" disabled hidden name="attr_relRollArmeFixe1" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{arme1_nom}}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{attaque=1}} {{relances=[[ @{arme1_comp_rel} ]]}} {{degatsrel=[[@{relRollArmeFixe1Dgt}]]}} {{degatsrelplus=[[@{relRollArmeFixe1DgtPlus}]]}} {{atkcible=[[@{atkcible}]]}} {{cible=@{atknom}}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}} {{competence=@{arme1_comp}}}" />
    <input type="text" disabled hidden name="attr_jetRollArmeFixe1" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{arme1_nom}}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{attaque=1}} {{jet=[[ @{arme1_comp_jet} ]]}} {{degats=[[@{jetRollArmeFixe1Dgt}]]}} {{degatsplus=[[1d6!!]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}} {{competence=@{arme1_comp}}}" />
    <input type="text" disabled hidden name="attr_jetRollArmeFixe1Dgt" value="@{arme1_dgt_force} + @{arme1_dgt_nbde}d@{arme1_dgt_de}!! + (@{arme1_dgt_bonus})[Dégâts : arme] + (?{Mod. dégâts|0})[Modificateur aux dégâts]" />
    <input type="text" disabled hidden name="attr_relRollArmeFixe1Dgt" value="{ floor( ( @{jetRollArmeFixe1Dgt} - (@{cibleresistance}[Résistance] - 4 ) ) /4), 0d0 }kh1 " />
    <input type="text" disabled hidden name="attr_relRollArmeFixe1DgtPlus" value="{ floor( ( @{jetRollArmeFixe1Dgt}+1d6!! - (@{cibleresistance}[Résistance] - 4 ) ) /4), 0d0 }kh1 " />

    <input type="text" disabled hidden name="attr_relRollArmeFixe2" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{arme2_nom}}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{attaque=1}} {{relances=[[@{arme2_comp_rel}]]}} {{degatsrel=[[@{relRollArmeFixe2Dgt}]]}} {{degatsrelplus=[[@{relRollArmeFixe2DgtPlus}]]}} {{atkcible=[[@{atkcible}]]}} {{cible=@{atknom}}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}} {{competence=@{arme2_comp}}}" />
    <input type="text" disabled hidden name="attr_jetRollArmeFixe2" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{arme2_nom}}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{attaque=1}} {{jet=[[ @{arme2_comp_jet} ]]}} {{degats=[[@{jetRollArmeFixe2Dgt}]]}} {{degatsplus=[[1d6!!]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}} {{competence=@{arme2_comp}}}" />
    <input type="text" disabled hidden name="attr_jetRollArmeFixe2Dgt" value="@{arme2_dgt_force} + @{arme2_dgt_nbde}d@{arme2_dgt_de}!! + (@{arme2_dgt_bonus})[Dégâts : arme] + (?{Mod. dégâts|0})[Modificateur aux dégâts]" />
    <input type="text" disabled hidden name="attr_relRollArmeFixe2Dgt" value="{ floor( ( @{jetRollArmeFixe2Dgt} - (@{cibleresistance}[Résistance] - 4 ) ) /4), 0d0 }kh1 " />
    <input type="text" disabled hidden name="attr_relRollArmeFixe2DgtPlus" value="{ floor( ( @{jetRollArmeFixe2Dgt}+1d6!! - (@{cibleresistance}[Résistance] - 4 ) ) /4), 0d0 }kh1 " />

    <input type="text" disabled hidden name="attr_relRollArmeFixe3" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{arme3_nom}}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{attaque=1}} {{relances=[[@{arme3_comp_rel}]]}} {{degatsrel=[[@{relRollArmeFixe3Dgt}]]}} {{degatsrelplus=[[@{relRollArmeFixe3DgtPlus}]]}} {{atkcible=[[@{atkcible}]]}} {{cible=@{atknom}}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}} {{competence=@{arme3_comp}}}" />
    <input type="text" disabled hidden name="attr_jetRollArmeFixe3" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{arme3_nom}}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{attaque=1}} {{jet=[[ @{arme3_comp_jet} ]]}} {{degats=[[@{jetRollArmeFixe3Dgt}]]}} {{degatsplus=[[1d6!!]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}} {{competence=@{arme3_comp}}}" />
    <input type="text" disabled hidden name="attr_jetRollArmeFixe3Dgt" value="@{arme3_dgt_force} + @{arme3_dgt_nbde}d@{arme3_dgt_de}!! + (@{arme3_dgt_bonus})[Dégâts : arme] + (?{Mod. dégâts|0})[Modificateur aux dégâts]" />
    <input type="text" disabled hidden name="attr_relRollArmeFixe3Dgt" value="{ floor( ( @{jetRollArmeFixe3Dgt} - (@{cibleresistance}[Résistance] - 4 ) ) /4), 0d0 }kh1 " />
    <input type="text" disabled hidden name="attr_relRollArmeFixe3DgtPlus" value="{ floor( ( @{jetRollArmeFixe3Dgt}+1d6!! - (@{cibleresistance}[Résistance] - 4 ) ) /4), 0d0 }kh1 " />

    <!-- COMPETENCES -->
    <input type="text" disabled hidden name="attr_RollIncomp" value="{ 1d4!![Non entraîné],@{joker_de}!![Joker]}kh1 + (-2)[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollIncomp" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Non entraîné}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollIncomp} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollIncomp" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Non entraîné}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollIncomp}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

<input type="text" disabled hidden name="attr_RollArcane" value="{ 1d@{arcane_de}!![@{arcane_nom}],@{joker_de}!![Joker]}kh1 + (@{arcane_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollArcane" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{arcane_nom}}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollArcane} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollArcane" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{arcane_nom}}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollArcane}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_relRollCombat" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Combat}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[@{relRollBastCombat}]]}} {{atkcible=[[@{atkcible}]]}} {{cible=@{atknom}}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollCombat" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Combat}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{jetRollBastCombat}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollConduite" value="{ 1d@{conduite_de}!![Conduite],@{joker_de}!![Joker]}kh1 + (@{conduite_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollConduite" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Conduite}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollConduite} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollConduite" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Conduite}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollConduite}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollConnaissance" value="{ 1d@{connaissance_de}!![@{connaissance_nom}],@{joker_de}!![Joker]}kh1 + (@{connaissance_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollConnaissance" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{connaissance_nom}}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollConnaissance} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollConnaissance" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{connaissance_nom}}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollConnaissance}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_RollCrochetage" value="{ 1d@{crochetage_de}!![Crochetage],@{joker_de}!![Joker]}kh1 + (@{crochetage_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollCrochetage" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Crochetage}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollCrochetage} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollCrochetage" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Crochetage}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollCrochetage}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollDiscretion" value="{ 1d@{discretion_de}!![Discretion],@{joker_de}!![Joker]}kh1 + (@{discretion_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollDiscretion" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Discrétion}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollDiscretion} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollDiscretion" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Discrétion}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollDiscretion}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollEquitation" value="{ 1d@{equitation_de}!![Equitation],@{joker_de}!![Joker]}kh1 + (@{equitation_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollEquitation" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Équitation}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollEquitation} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollEquitation" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Équitation}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollEquitation}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollEscalade" value="{ 1d@{escalade_de}!![Escalade],@{joker_de}!![Joker]}kh1 + (@{escalade_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollEscalade" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Escalade}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollEscalade} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollEscalade" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Escalade}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollEscalade}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollIntimidation" value="{ 1d@{intimidation_de}!![Intimidation],@{joker_de}!![Joker]}kh1 + (@{intimidation_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollIntimidation" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Intimidation}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollIntimidation} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollIntimidation" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Intimidation}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollIntimidation}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_RollJeu" value="{ 1d@{jeu_de}!![Jeu],@{joker_de}!![Joker]}kh1 + (@{jeu_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollJeu" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Jeu}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollJeu} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollJeu" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Jeu}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollJeu}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_relRollLancer" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Lancer}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[@{relRollBastLancer}]]}} {{atkcible=[[@{atkcible}]]}} {{cible=@{atknom}}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollLancer" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Lancer}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{jetRollBastLancer}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollNatation" value="{ 1d@{natation_de}!![Natation],@{joker_de}!![Joker]}kh1 + (@{natation_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollNatation" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Natation}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollNatation} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollNatation" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Natation}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollNatation}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollNavigation" value="{ 1d@{navigation_de}!![Navigation],@{joker_de}!![Joker]}kh1 + (@{navigation_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollNavigation" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Navigation}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollNavigation} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollNavigation" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Navigation}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollNavigation}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollPerception" value="{ 1d@{perception_de}!![Perception],@{joker_de}!![Joker]}kh1 + (@{perception_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollPerception" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Perception}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollPerception} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollPerception" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Perception}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollPerception}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_RollPersuasion" value="{ 1d@{persuasion_de}!![Persuasion],@{joker_de}!![Joker]}kh1 + (@{persuasion_bonus})[Bonus] + @{charisme}[Charisme] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollPersuasion" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Persuasion}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollPersuasion} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{charisme=@{charisme}}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollPersuasion" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Persuasion}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollPersuasion}]]}} {{charisme=@{charisme}}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_RollPilotage" value="{ 1d@{pilotage_de}!![Pilotage],@{joker_de}!![Joker]}kh1 + (@{pilotage_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] - @{encombrement}[Encombrement] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollPilotage" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Pilotage}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollPilotage} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollPilotage" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Pilotage}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollPilotage}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollPistage" value="{ 1d@{pistage_de}!![Pistage],@{joker_de}!![Joker]}kh1 + (@{pistage_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollPistage" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Pistage}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollPistage} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollPistage" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Pistage}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollPistage}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_RollRecherche" value="{ 1d@{recherche_de}!![Trait],@{joker_de}!![Recherche]}kh1 + (@{recherche_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollRecherche" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Recherche}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollRecherche} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollRecherche" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Recherche}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollRecherche}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_RollReparation" value="{ 1d@{reparation_de}!![Réparation],@{joker_de}!![Joker]}kh1 + (@{reparation_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollReparation" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Réparation}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollReparation} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollReparation" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Réparation}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollReparation}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_RollReseaux" value="{ 1d@{reseaux_de}!![Réseaux],@{joker_de}!![Joker]}kh1 + (@{reseaux_bonus})[Bonus] + @{charisme}[Charisme] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollReseaux" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Réseaux}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollReseaux} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{charisme=@{charisme}}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} " />
    <input type="text" disabled hidden name="attr_jetRollReseaux" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Réseaux}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollReseaux}]]}} {{charisme=@{charisme}}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} " />

    <input type="text" disabled hidden name="attr_RollSarcasme" value="{ 1d@{sarcasme_de}!![Sarcasme],@{joker_de}!![Joker]}kh1 + (@{sarcasme_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollSarcasme" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Sarcasme}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollSarcasme} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollSarcasme" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Sarcasme}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollSarcasme}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_RollSoins" value="{ 1d@{soins_de}!![Soins],@{joker_de}!![Joker]}kh1 + (@{soins_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollSoins" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Soins}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollSoins} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollSoins" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Soins}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollSoins}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_RollSurvie" value="{ 1d@{survie_de}!![Survie],@{joker_de}!![Joker]}kh1 + (@{survie_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollSurvie" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Survie}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollSurvie} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollSurvie" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Survie}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollSurvie}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

    <input type="text" disabled hidden name="attr_relRollTir" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Tir}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[@{relRollBastTir}]]}} {{atkcible=[[@{atkcible}]]}} {{cible=@{atknom}}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollTir" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Tir}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{jetRollBastTir}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}}" />

    <input type="text" disabled hidden name="attr_RollTripes" value="{ 1d@{tripes_de}!![Tripes],@{joker_de}!![Joker]}kh1 + (@{tripes_bonus})[Bonus] + (@{trempe})[Trempe] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]" />
    <input type="text" disabled hidden name="attr_relRollTripes" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Tripes}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { @{RollTripes} } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />
    <input type="text" disabled hidden name="attr_jetRollTripes" value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=Tripes}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[@{RollTripes}]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}" />

</div> <!-- *** HIDDEN ROLLS ** -->
<!-- PARAMETRAGES -->
<div class="sheet-fdp"> <!-- FDP -->
    <!-- onglets -->
    <input type="radio" name="attr_chkvie" value="0" class="sheet-onglmain" title="Feuille" checked /><span>Feuille</span>
    <input type="radio" name="attr_chkvie" value="1" class="sheet-onglconfig" title="Configuration" /><span>Configuration</span>
    <span style="display:inline-block;width:150px;text-align: center;color: #888888;font-size: 0.9em;">v1.7 (18/12/2016)</span>
    <!-- Style FdP -->
    <input type="checkbox" name="attr_sheetDead" value="1" class="sheet-chkSheetDead" />
    <!-- paramètres cachés -->
    <input type="checkbox" name="attr_sheetStyle" value="0" class="sheet-chkRolrel" checked="checked" />
    <input type="checkbox" name="attr_sheetStyle" value="1" class="sheet-chkRoljet" />
    <input type="checkbox" name="attr_sheetStyle" value="2" class="sheet-chkRolbrut" />
    <input type="checkbox" name="attr_extra" value="1" class="sheet-persoExtra" />
    <input type="checkbox" name="attr_pnj" value="1" class="sheet-persoPnj" />
    <input type="checkbox" name="attr_chkPossessions" value="1" class="sheet-chkPossessions" checked />
    <!-- Checks pour affichage compétences -->
    <input type="checkbox" name="attr_chkArcane" class="sheet-chkArcane" value="1" checked />
    <input type="checkbox" name="attr_chkCombat" class="sheet-chkCombat" value="1" checked />
    <input type="checkbox" name="attr_chkConduite" class="sheet-chkConduite" value="1" checked />
    <input type="checkbox" name="attr_chkConnaissance" class="sheet-chkConnaissance" value="1" checked />
    <input type="checkbox" name="attr_chkCrochetage" class="sheet-chkCrochetage" value="1" checked />
    <input type="checkbox" name="attr_chkDiscretion" class="sheet-chkDiscretion" value="1" checked />
    <input type="checkbox" name="attr_chkEquitation" class="sheet-chkEquitation" value="1" checked />
    <input type="checkbox" name="attr_chkEscalade" class="sheet-chkEscalade" value="1" checked />
    <input type="checkbox" name="attr_chkIntimidation" class="sheet-chkIntimidation" value="1" checked />
    <input type="checkbox" name="attr_chkJeu" class="sheet-chkJeu" value="1" checked />
    <input type="checkbox" name="attr_chkLancer" class="sheet-chkLancer" value="1" checked />
    <input type="checkbox" name="attr_chkNatation" class="sheet-chkNatation" value="1" checked />
    <input type="checkbox" name="attr_chkNavigation" class="sheet-chkNavigation" value="1" checked />
    <input type="checkbox" name="attr_chkPerception" class="sheet-chkPerception" value="1" checked />
    <input type="checkbox" name="attr_chkPersuasion" class="sheet-chkPersuasion" value="1" checked />
    <input type="checkbox" name="attr_chkPilotage" class="sheet-chkPilotage" value="1" checked />
    <input type="checkbox" name="attr_chkPistage" class="sheet-chkPistage" value="1" checked />
    <input type="checkbox" name="attr_chkRecherche" class="sheet-chkRecherche" value="1" checked />
    <input type="checkbox" name="attr_chkReparation" class="sheet-chkReparation" value="1" checked />
    <input type="checkbox" name="attr_chkReseaux" class="sheet-chkReseaux" value="1" checked />
    <input type="checkbox" name="attr_chkSarcasme" class="sheet-chkSarcasme" value="1" checked />
    <input type="checkbox" name="attr_chkSoins" class="sheet-chkSoins" value="1" checked />
    <input type="checkbox" name="attr_chkSurvie" class="sheet-chkSurvie" value="1" checked />
    <input type="checkbox" name="attr_chkTir" class="sheet-chkTir" value="1" checked />
    <!-- Début réel de la feuille -->
<div class="sheet-main"> <!--- ***  MAIN *** -->
    <div class="sheet-mycol"> <!-- ** COL1 ** -->
        <div class="sheet-colblock"> <!-- TRAITS -->
            <div> <!-- ATTRIBUTS -->
                <div style="text-align: center;"> <!-- JOKER -->
                    <div class="sheet-redtitle1" style="display:inline-block;">TRAITS</div>
                    &nbsp;
                    <div class="sheet-blacktext2">Dé Joker</div>
                    <SELECT name="attr_joker_de" class="sheet-selde sheet-joker">
                        <OPTION value="0d4">&nbsp;- Extra (PNJ)</OPTION>
                        <OPTION value="1d4">&nbsp;d4</OPTION>
                        <OPTION value="1d6" SELECTED>&nbsp;d6</OPTION>
                        <OPTION value="1d8">&nbsp;d8</OPTION>
                        <OPTION value="1d10">d10</OPTION>
                        <OPTION value="1d12">d12</OPTION>
                    </SELECT>
                </div> <!-- FIN JOKER -->
                <div class="sheet-redtitle2">ATTRIBUTS</div>
                <div class="sheet-input"> <!-- AGILITE -->
                    <button type="roll"
                        name="Btrel-Agilite"
                        class="sheet-btRolrel"
                        value="@{relRollAGI}"
                        >AGILITÉ</button>
                    <button type="roll"
                        name="Btjet-Agilite"
                        class="sheet-btRoljet"
                        value="@{jetRollAGI}"
                        >AGILITÉ</button>
                    <button type="roll"
                        name="BtBrut-Agilite"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet d'Agilité
/roll @{RollAGI}"
                        >AGILITÉ</button>
                    <SELECT name="attr_agilite_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_agilite_bonus" value="0"/>
                </div> <!-- FIN AGILITE -->
                <div class="sheet-input"> <!-- AME -->
                    <button type="roll"
                        name="Btrel-Ame"
                        class="sheet-btRolrel"
                        value="@{relRollAME}"
                        >ÂME</button>
                    <button type="roll"
                        name="Btjet-Ame"
                        class="sheet-btRoljet"
                        value="@{jetRollAME}"
                        >ÂME</button>
                    <button type="roll"
                        name="BtBrut-Ame"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet d'Âme
/roll @{RollAME}"
                        >ÂME</button>
                    <SELECT name="attr_ame_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_ame_bonus" value="0" min="0"/>
                </div> <!-- FIN AME -->
                <div class="sheet-input"> <!-- FORCE -->
                    <button type="roll"
                        name="Btrel-Force"
                        class="sheet-btRolrel"
                        value="@{relRollFOR}"
                        >FORCE</button>
                    <button type="roll"
                        name="Btjet-Force"
                        class="sheet-btRoljet"
                        value="@{jetRollFOR}"
                        >FORCE</button>
                    <button type="roll"
                        name="BtBrut-Force"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Force
/roll @{RollFOR}"
                        >FORCE</button>
                    <SELECT name="attr_force_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_force_bonus" value="0" min="0"/>
                </div> <!-- FIN FORCE -->
                <div class="sheet-input"> <!-- INTELLECT -->
                    <button type="roll"
                        name="Btrel-Intellect"
                        class="sheet-btRolrel"
                        value="@{relRollINT}"
                        >INTELLECT</button>
                    <button type="roll"
                        name="Btjet-Intellect"
                        class="sheet-btRoljet"
                        value="@{jetRollINT}"
                        >INTELLECT</button>
                    <button type="roll"
                        name="BtBrut-Intellect"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet d'Intelligence
/roll @{RollINT}"
                        >INTELLECT</button>
                    <SELECT name="attr_intellect_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_intellect_bonus" value="0" min="0" />
                </div> <!-- FIN INTELLECT -->
                <div class="sheet-input"> <!-- VIGUEUR -->
                    <button type="roll"
                        name="Btrel-Vigueur"
                        class="sheet-btRolrel"
                        value="@{relRollVIG}"
                        >VIGUEUR</button>
                    <button type="roll"
                        name="Btjet-Vigueur"
                        class="sheet-btRoljet"
                        value="@{jetRollVIG}"
                        >VIGUEUR</button>
                    <button type="roll"
                        name="BtBrut-Vigueur"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Vigueur
/roll @{RollVIG}"
                        >VIGUEUR</button>
                    <SELECT name="attr_vigueur_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_vigueur_bonus" value="0" min="0" />
                </div> <!-- FIN VIGUEUR -->
            </div> <!-- FIN ATTRIBUTS -->
            <div> <!-- COMPETENCES -->
                <div class="sheet-redtitle2">COMPÉTENCES</div>
                <div class="sheet-input">
                    <button type="roll"
                            name="Btrel-Incomp"
                            class="sheet-btRolrel"
                            value="@{relRollIncomp}"
                            >Non entraîné</button>
                    <button type="roll"
                        name="Btjet-Incomp"
                        class="sheet-btRoljet"
                        value="@{jetRollIncomp}"
                        >Non entraîné</button>
                    <button type="roll"
                        name="BtBrut-Incomp"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet non entraîné
/roll @{RollIncomp}"
                        >Non entraîné</button>
                </div>
                <div class="sheet-input sheet-chkArcane"> <!-- ARCANES -->
                    <button type="roll"
                        name="Btrel-Arcane"
                        class="sheet-btRolrel"
                        value="@{relRollArcane}"
                        >&nbsp;</button>
                    <button type="roll"
                        name="Btjet-Arcane"
                        class="sheet-btRoljet"
                        value="@{jetRollArcane}"
                        >&nbsp;</button>
                    <button type="roll"
                        name="BtBrut-Arcane"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de @{arcane_nom}
/roll @{RollArcane}"
                        >&nbsp;</button>
                    <input type="text" class="sheet-compspe" name="attr_arcane_nom" placeholder="ARCANES" value="ARCANES" title="Nom de la compétence d'Arcanes" />
                    <SELECT class="sheet-attcomptext"  name="attr_arcane_attr"  title="Attribut dont dépend la compétence d'Arcanes">
                        <OPTION value="agilite">(AGI)</OPTION>
                        <OPTION value="ame">(ÂME)</OPTION>
                        <OPTION value="force">(FOR)</OPTION>
                        <OPTION value="intellect" SELECTED>(INT)</OPTION>
                        <OPTION value="vigueur">(VIG)</OPTION>
                    </SELECT>
                    <SELECT name="attr_arcane_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_arcane_bonus" value="-2" min="-2" />
                </div> <!-- FIN ARCANES -->
                <div class="sheet-input sheet-chkCombat"> <!-- COMBAT -->
                    <button type="roll"
                        name="Btrel-Combat"
                        class="sheet-btRolrel"
                        value="@{relRollCombat}"
                        >Combat</button>
                    <button type="roll"
                        name="Btjet-Combat"
                        class="sheet-btRoljet"
                        value="@{jetRollCombat}"
                        >Combat</button>
                    <button type="roll"
                        name="BtBrut-Combat"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Combat
/roll @{RollBastCombat}"
                        >Combat</button>
                    <div class="sheet-attcomptext">AGI</div>
                    <SELECT name="attr_combat_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_combat_bonus" value="-2" min="-2" />
                </div> <!-- FIN COMBAT -->
                <div class="sheet-input sheet-chkConduite"> <!-- CONDUITE -->
                    <button type="roll"
                        name="Btrel-Conduite"
                        class="sheet-btRolrel"
                        value="@{relRollConduite}"
                        >Conduite</button>
                    <button type="roll"
                        name="Btjet-Conduite"
                        class="sheet-btRoljet"
                        value="@{jetRollConduite}"
                        >Conduite</button>
                    <button type="roll"
                        name="BtBrut-Conduite"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Conduite
/roll @{RollConduite}"
                        >Conduite</button>
                    <div class="sheet-attcomptext">AGI</div>
                    <SELECT name="attr_conduite_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_conduite_bonus" value="-2" min="-2" />
                </div> <!-- FIN CONDUITE -->
                <div class="sheet-input sheet-chkConnaissance"> <!-- CONNAISSANCE -->
                    <button type="roll"
                        name="Btrel-Connaissance"
                        class="sheet-btRolrel"
                        value="@{relRollConnaissance}"
                        title="Connaissance"
                        >&nbsp;</button>
                    <button type="roll"
                        name="Btjet-Connaissance"
                        class="sheet-btRoljet"
                        value="@{jetRollConnaissance}"
                        title="Connaissance"
                        >&nbsp;</button>
                    <button type="roll"
                        name="BtBrut-Connaissance"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de @{connaissance_nom}
/roll @{RollConnaissance}"
                        title="Connaissance"
                        >&nbsp;</button>
                    <input type="text" class="sheet-compspe" name="attr_connaissance_nom" placeholder="Connaissance" value="Connaissance" title="Nom de la compétence de Connaissances" />
                    <div class="sheet-attcomptext">INT</div>
                    <SELECT name="attr_connaissance_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_connaissance_bonus" value="-2" min="-2" />
                </div> <!-- FIN CONNAISSANCE -->
                <div class="sheet-input sheet-chkCrochetage"> <!-- CROCHETAGE -->
                    <button type="roll"
                        name="Btrel-Crochetage"
                        class="sheet-btRolrel"
                        value="@{relRollCrochetage}"
                        >Crochetage</button>
                    <button type="roll"
                        name="Btjet-Crochetage"
                        class="sheet-btRoljet"
                        value="@{jetRollCrochetage}"
                        >Crochetage</button>
                    <button type="roll"
                        name="BtBrut-Crochetage"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Crochetage
/roll @{RollCrochetage}"
                        >Crochetage</button>
                    <div class="sheet-attcomptext">AGI</div>
                    <SELECT name="attr_crochetage_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_crochetage_bonus" value="-2" min="-2" />
                </div> <!-- FIN CROCHETAGE -->
                <div class="sheet-input sheet-chkDiscretion"> <!-- DISCRÉTION -->
                    <button type="roll"
                        name="Btrel-Discretion"
                        class="sheet-btRolrel"
                        value="@{relRollDiscretion}"
                        >Discrétion</button>
                    <button type="roll"
                        name="Btjet-Discretion"
                        class="sheet-btRoljet"
                        value="@{jetRollDiscretion}"
                        >Discrétion</button>
                    <button type="roll"
                        name="BtBrut-Discretion"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Discrétion
/roll @{RollDiscretion}"
                        >Discrétion</button>
                    <div class="sheet-attcomptext">AGI</div>
                    <SELECT name="attr_discretion_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_discretion_bonus" value="-2" min="-2" />
                </div> <!-- FIN DISCRÉTION -->
                <div class="sheet-input sheet-chkEquitation"> <!-- ÉQUITATION -->
                    <button type="roll"
                        name="Btrel-Equitation"
                        class="sheet-btRolrel"
                        value="@{relRollEquitation}"
                        >Équitation</button>
                    <button type="roll"
                        name="Btjet-Equitation"
                        class="sheet-btRoljet"
                        value="@{jetRollEquitation}"
                        >Équitation</button>
                    <button type="roll"
                        name="BtBrut-Equitation"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet d'Équitation
/roll @{RollEquitation}"
                        >Équitation</button>
                    <div class="sheet-attcomptext">AGI</div>
                    <SELECT name="attr_equitation_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_equitation_bonus" value="-2" min="-2" />
                </div> <!-- FIN ÉQUITATION -->
                <div class="sheet-input sheet-chkEscalade"> <!-- ESCALADE -->
                    <button type="roll"
                        name="Btrel-Escalade"
                        class="sheet-btRolrel"
                        value="@{relRollEscalade}"
                        >Escalade</button>
                    <button type="roll"
                        name="Btjet-Escalade"
                        class="sheet-btRoljet"
                        value="@{jetRollEscalade}"
                        >Escalade</button>
                    <button type="roll"
                        name="BtBrut-Escalade"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet d'Escalade
/roll @{RollEscalade}"
                        >Escalade</button>
                    <div class="sheet-attcomptext">FOR</div>
                    <SELECT name="attr_escalade_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_escalade_bonus" value="-2" min="-2" />
                </div> <!-- FIN ESCALADE -->
                <div class="sheet-input sheet-chkIntimidation"> <!-- INTIMIDATION -->
                    <button type="roll"
                        name="Btrel-Intimidation"
                        class="sheet-btRolrel"
                        value="@{relRollIntimidation}"
                        >Intimidation</button>
                    <button type="roll"
                        name="Btjet-Intimidation"
                        class="sheet-btRoljet"
                        value="@{jetRollIntimidation}"
                        >Intimidation</button>
                    <button type="roll"
                        name="BtBrut-Intimidation"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet d'Initmidation
/roll @{RollIntimidation}"
                        >Intimidation</button>
                    <div class="sheet-attcomptext">ÂME</div>
                    <SELECT name="attr_intimidation_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_intimidation_bonus" value="-2" min="-2" />
                </div> <!-- FIN INTIMIDATION -->
                <div class="sheet-input sheet-chkJeu"> <!-- JEU -->
                    <button type="roll"
                        name="Btrel-Jeu"
                        class="sheet-btRolrel"
                        value="@{relRollJeu}"
                        >Jeu</button>
                    <button type="roll"
                        name="Btjet-Jeu"
                        class="sheet-btRoljet"
                        value="@{jetRollJeu}"
                        >Jeu</button>
                    <button type="roll"
                        name="BtBrut-Jeu"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Jeu
/roll @{RollJeu}"
                        >Jeu</button>
                    <div class="sheet-attcomptext">INT</div>
                    <SELECT name="attr_jeu_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_jeu_bonus" value="-2" min="-2" />
                </div> <!-- FIN JEU -->
                <div class="sheet-input sheet-chkLancer"> <!-- LANCER -->
                    <button type="roll"
                        name="Btrel-Lancer"
                        class="sheet-btRolrel"
                        value="@{relRollLancer}"
                        >Lancer</button>
                    <button type="roll"
                        name="Btjet-Lancer"
                        class="sheet-btRoljet"
                        value="@{jetRollLancer}"
                        >Lancer</button>
                    <button type="roll"
                        name="BtBrut-Lancer"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Lancer
/roll @{RollBastLancer}"
                        >Lancer</button>
                    <div class="sheet-attcomptext">AGI</div>
                    <SELECT name="attr_lancer_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_lancer_bonus" value="-2" min="-2" />
                </div> <!-- FIN LANCER -->
                <div class="sheet-input sheet-chkNatation"> <!-- NATATION -->
                    <button type="roll"
                        name="Btrel-Natation"
                        class="sheet-btRolrel"
                        value="@{relRollNatation}"
                        >Natation</button>
                    <button type="roll"
                        name="Btjet-Natation"
                        class="sheet-btRoljet"
                        value="@{jetRollNatation}"
                        >Natation</button>
                    <button type="roll"
                        name="BtBrut-Natation"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Natation
/roll @{RollNatation}"
                        >Natation</button>
                    <div class="sheet-attcomptext">AGI</div>
                    <SELECT name="attr_natation_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_natation_bonus" value="-2" min="-2" />
                </div> <!-- FIN NATATION -->
                <div class="sheet-input sheet-chkNavigation"> <!-- NAVIGATION -->
                    <button type="roll"
                        name="Btrel-Navigation"
                        class="sheet-btRolrel"
                        value="@{relRollNavigation}"
                        >Navigation</button>
                    <button type="roll"
                        name="Btjet-Navigation"
                        class="sheet-btRoljet"
                        value="@{jetRollNavigation}"
                        >Navigation</button>
                    <button type="roll"
                        name="BtBrut-Navigation"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Navigation
/roll @{RollNavigation}"
                        >Navigation</button>
                    <div class="sheet-attcomptext">AGI</div>
                    <SELECT name="attr_navigation_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_navigation_bonus" value="-2" min="-2" />
                </div> <!-- FIN NAVIGATION -->
                <div class="sheet-input sheet-chkPerception"> <!-- PERCEPTION -->
                    <button type="roll"
                        name="Btrel-Perception"
                        class="sheet-btRolrel"
                        value="@{relRollPerception}"
                        >Perception</button>
                    <button type="roll"
                        name="Btjet-Perception"
                        class="sheet-btRoljet"
                        value="@{jetRollPerception}"
                        >Perception</button>
                    <button type="roll"
                        name="BtBrut-Perception"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Perception
/roll @{RollPerception}"
                        >Perception</button>
                    <div class="sheet-attcomptext">INT</div>
                    <SELECT name="attr_perception_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_perception_bonus" value="-2" min="-2" />
                </div> <!-- FIN PERCEPTION -->
                <div class="sheet-input sheet-chkPersuasion"> <!-- PERSUASION -->
                    <button type="roll"
                        name="Btrel-Persuasion"
                        class="sheet-btRolrel"
                        value="@{relRollPersuasion}"
                        >Persuasion</button>
                    <button type="roll"
                        name="Btjet-Persuasion"
                        class="sheet-btRoljet"
                        value="@{jetRollPersuasion}"
                        >Persuasion</button>
                    <button type="roll"
                        name="BtBrut-Persuasion"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Persuasion
/roll @{RollPersuasion}"
                        >Persuasion</button>
                    <div class="sheet-attcomptext">ÂME</div>
                    <SELECT name="attr_persuasion_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_persuasion_bonus" value="-2" min="-2" />
                </div> <!-- FIN PERSUASION -->
                <div class="sheet-input sheet-chkPilotage"> <!-- PILOTAGE -->
                    <button type="roll"
                        name="Btrel-Pilotage"
                        class="sheet-btRolrel"
                        value="@{relRollPilotage}"
                        >Pilotage</button>
                    <button type="roll"
                        name="Btjet-Pilotage"
                        class="sheet-btRoljet"
                        value="@{jetRollPilotage}"
                        >Pilotage</button>
                    <button type="roll"
                        name="BtBrut-Pilotage"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Pilotage
/roll @{RollPilotage}"
                        >Pilotage</button>
                    <div class="sheet-attcomptext">AGI</div>
                    <SELECT name="attr_pilotage_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_pilotage_bonus" value="-2" min="-2" />
                </div> <!-- FIN PILOTAGE -->
                <div class="sheet-input sheet-chkPistage"> <!-- PISTAGE -->
                    <button type="roll"
                        name="Btrel-Pistage"
                        class="sheet-btRolrel"
                        value="@{relRollPistage}"
                        >Pistage</button>
                    <button type="roll"
                        name="Btjet-Pistage"
                        class="sheet-btRoljet"
                        value="@{jetRollPistage}"
                        >Pistage</button>
                    <button type="roll"
                        name="BtBrut-Pistage"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Pistage
/roll @{RollPistage}"
                        >Pistage</button>
                    <div class="sheet-attcomptext">INT</div>
                    <SELECT name="attr_pistage_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_pistage_bonus" value="-2" min="-2" />
                </div> <!-- FIN PISTAGE -->
                <div class="sheet-input sheet-chkRecherche"> <!-- RECHERCHE -->
                    <button type="roll"
                        name="Btrel-Recherche"
                        class="sheet-btRolrel"
                        value="@{relRollRecherche}"
                        >Recherche</button>
                    <button type="roll"
                        name="Btjet-Recherche"
                        class="sheet-btRoljet"
                        value="@{jetRollRecherche}"
                        >Recherche</button>
                    <button type="roll"
                        name="BtBrut-Recherche"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Recherche
/roll @{RollRecherche}"
                        >Recherche</button>
                    <div class="sheet-attcomptext">INT</div>
                    <SELECT name="attr_recherche_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_recherche_bonus" value="-2" min="-2" />
                </div> <!-- FIN RECHERCHE -->
                <div class="sheet-input sheet-chkReparation"> <!-- RÉPARATION -->
                    <button type="roll"
                        name="Btrel-Reparation"
                        class="sheet-btRolrel"
                        value="@{relRollReparation}"
                        >Réparation</button>
                    <button type="roll"
                        name="Btjet-Reparation"
                        class="sheet-btRoljet"
                        value="@{jetRollReparation}"
                        >Réparation</button>
                    <button type="roll"
                        name="BtBrut-Reparation"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Réparation
/roll @{RollReparation}"
                        >Réparation</button>
                    <div class="sheet-attcomptext">INT</div>
                    <SELECT name="attr_reparation_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_reparation_bonus" value="-2" min="-2" />
                </div> <!-- FIN RÉPARATION -->
                <div class="sheet-input sheet-chkReseaux"> <!-- RÉSEAUX -->
                    <button type="roll"
                        name="Btrel-Reseaux"
                        class="sheet-btRolrel"
                        value="@{relRollReseaux}"
                        >Réseaux</button>
                    <button type="roll"
                        name="Btjet-Reseaux"
                        class="sheet-btRoljet"
                        value="@{jetRollReseaux}"
                        >Réseaux</button>
                    <button type="roll"
                        name="BtBrut-Reseaux"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Réseaux
/roll @{RollReseaux}"
                        >Réseaux</button>
                    <div class="sheet-attcomptext">INT</div>
                    <SELECT name="attr_reseaux_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_reseaux_bonus" value="-2" min="-2" />
                </div> <!-- FIN RÉSEAUX -->
                <div class="sheet-input sheet-chkSarcasme"> <!-- SARCASME -->
                    <button type="roll"
                        name="Btrel-Sarcasme"
                        class="sheet-btRolrel"
                        value="@{relRollSarcasme}"
                        >Sarcasme</button>
                    <button type="roll"
                        name="Btjet-Sarcasme"
                        class="sheet-btRoljet"
                        value="@{jetRollSarcasme}"
                        >Sarcasme</button>
                    <button type="roll"
                        name="BtBrut-Sarcasme"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Sarcasme
/roll @{RollSarcasme}"
                        >Sarcasme</button>
                    <div class="sheet-attcomptext">INT</div>
                    <SELECT name="attr_sarcasme_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_sarcasme_bonus" value="-2" min="-2" />
                </div> <!-- FIN SARCASME -->
                <div class="sheet-input sheet-chkSoins"> <!-- SOINS -->
                    <button type="roll"
                        name="Btrel-Soins"
                        class="sheet-btRolrel"
                        value="@{relRollSoins}"
                        >Soins</button>
                    <button type="roll"
                        name="Btjet-Soins"
                        class="sheet-btRoljet"
                        value="@{jetRollSoins}"
                        >Soins</button>
                    <button type="roll"
                        name="BtBrut-Soins"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Soins
/roll @{RollSoins}"
                        >Soins</button>
                    <div class="sheet-attcomptext">INT</div>
                    <SELECT name="attr_soins_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_soins_bonus" value="-2" min="-2" />
                </div> <!-- FIN SOINS -->
                <div class="sheet-input sheet-chkSurvie"> <!-- SURVIE -->
                    <button type="roll"
                        name="Btrel-Survie"
                        class="sheet-btRolrel"
                        value="@{relRollSurvie}"
                        >Survie</button>
                    <button type="roll"
                        name="Btjet-Survie"
                        class="sheet-btRoljet"
                        value="@{jetRollSurvie}"
                        >Survie</button>
                    <button type="roll"
                        name="BtBrut-Survie"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Survie
/roll @{RollSurvie}"
                        >Survie</button>
                    <div class="sheet-attcomptext">INT</div>
                    <SELECT name="attr_survie_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_survie_bonus" value="-2" min="-2" />
                </div> <!-- FIN SURVIE -->
                <div class="sheet-input sheet-chkTir"> <!-- TIR -->
                    <button type="roll"
                        name="Btrel-Tir"
                        class="sheet-btRolrel"
                        value="@{relRollTir}"
                        >Tir</button>
                    <button type="roll"
                        name="Btjet-Tir"
                        class="sheet-btRoljet"
                        value="@{jetRollTir}"
                        >Tir</button>
                    <button type="roll"
                        name="BtBrut-Tir"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Tir
/roll @{RollBastTir}"
                        >Tir</button>
                    <div class="sheet-attcomptext">AGI</div>
                    <SELECT name="attr_tir_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_tir_bonus" value="-2" min="-2" />
                </div> <!-- FIN TIR -->
                <div class="sheet-input sheet-SheetDead"> <!-- TRIPES -->
                    <button type="roll"
                        name="Btrel-Tripes"
                        class="sheet-btRolrel"
                        value="@{relRollTripes}"
                        >Tripes</button>
                    <button type="roll"
                        name="Btjet-Tripes"
                        class="sheet-btRoljet"
                        value="@{jetRollTripes}"
                        >Tripes</button>
                    <button type="roll"
                        name="BtBrut-Tripes"
                        class="sheet-btRolbrut"
                        value="/em @{character_name} fait un jet de Tripes
/roll @{RollTripes}"
                        >Tripes</button>
                    <div class="sheet-attcomptext">ÂME</div>
                    <SELECT name="attr_tripes_de" class="sheet-selde">
                        <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                        <OPTION value="6">&nbsp;d6</OPTION>
                        <OPTION value="8">&nbsp;d8</OPTION>
                        <OPTION value="10">d10</OPTION>
                        <OPTION value="12">d12</OPTION>
                    </SELECT>
                    +<input type="number" class="sheet-selde" name="attr_tripes_bonus" value="-2" min="-2" />
                </div> <!-- FIN TRIPES -->
                <fieldset class="repeating_competences"> <!-- COMPETENCE (S) LIBRE(S) -->
                    <div class="sheet-input">
                        <button type="roll"
                            name="Btrel-Competence"
                            class="sheet-btRolrel"
                            value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{comp_nom}}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{relances=[[  { floor( ( { { 1d@{comp_de}!![@{comp_nom}],@{joker_de}!![Joker]}kh1 + (@{comp_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur] } ) /(?{Difficulté|4})[Difficulté]), 0d0 }kh1 ]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}"
                            >&nbsp;</button>
                        <button type="roll"
                            name="Btjet-Competence"
                            class="sheet-btRoljet"
                            value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{comp_nom}}} {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{jet=[[{ 1d@{comp_de}!![@{comp_nom}],@{joker_de}!![Joker]}kh1 + (@{comp_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}}"
                            >&nbsp;</button>
                        <button type="roll"
                            name="BtBrut-Competence"
                            class="sheet-btRolbrut"
                            value="/em @{character_name} fait un jet de @{comp_nom}
/roll { 1d@{comp_de}!![@{comp_nom}],@{joker_de}!![Joker]}kh1 + (@{comp_bonus})[Bonus] - @{malusblessures}[Blessures] - @{malusfatigue}[Fatigue] + (?{Modificateur|0})[Modificateur]"
                            >&nbsp;</button>
                        <input type="text" class="sheet-compspe" name="attr_comp_nom" placeholder="Compétence" title="Nom de la compétence" />
                        <SELECT class="sheet-attcomptext"  name="attr_comp_att"  title="Attribut dont dépend la compétence">
                            <OPTION value="agilite" SELECTED>(AGI)</OPTION>
                            <OPTION value="ame">(ÂME)</OPTION>
                            <OPTION value="force">(FOR)</OPTION>
                            <OPTION value="intellect">(INT)</OPTION>
                            <OPTION value="vigueur">(VIG)</OPTION>
                        </SELECT>
                        <SELECT name="attr_comp_de" class="sheet-selde">
                            <OPTION value="4" SELECTED>&nbsp;d4</OPTION>
                            <OPTION value="6">&nbsp;d6</OPTION>
                            <OPTION value="8">&nbsp;d8</OPTION>
                            <OPTION value="10">d10</OPTION>
                            <OPTION value="12">d12</OPTION>
                        </SELECT>
                        +<input type="number" class="sheet-selde" name="attr_comp_bonus" value="0" />
                    </div>
                </fieldset> <!-- COMPETENCE (S) LIBRE(S) -->
            </div> <!-- FIN COMPETENCES -->
        </div> <!-- FIN TRAITS -->
    </div> <!-- ** END COL1 ** -->
    <div class="sheet-mycol"> <!-- ** COL2 ** -->
        <div style="text-align:center;width:100%;">
            <div class="sheet-SheetSaWo" style="text-align:center;">
                <img style="width: 200px;" src="https://www.peginc.com/wp-content/uploads/2013/02/SW_LOGO_24bit.png" />
            </div>
            <div class="sheet-SheetDead" style="text-align:center;">
                <img style="width: 265px;" src="https://www.peginc.com/wp-content/uploads/2013/02/DL.png" />
            </div>
        </div>
        <div class="sheet-colblock"> <!-- DEGATS -->
            <div style="text-align: left;">
                <div class="sheet-redtitle1" style="display: inline-block;">D&Eacute;G&Acirc;TS</div>
                <div class="redtitle3" style="text-align: right;width:100px;">SECOUÉ : </div>
                <input type="checkbox" class="sheet-secoue" name="attr_secoue" value='1' title="Secoué" /><span></span>
            </div>
            <div style="height: 30px;">
                <div class="redtitle3" style="width:80px;">BLESSURES</div>
                <input type="radio" class="sheet-blessure" name="attr_blessures" value="0" title="Pas de blessure" checked /><span>0</span>
                <input type="radio" class="sheet-blessure" name="attr_blessures" value="1" title="Une blessure" /><span>1</span>
                <input type="radio" class="sheet-blessure sheet-noextra" name="attr_blessures" value="2" title="Deux blessures" /><span class="sheet-noextra">2</span>
                <input type="radio" class="sheet-blessure sheet-noextra" name="attr_blessures" value="3" title="Trois blessures" /><span class="sheet-noextra">3</span>
                <input type="radio" class="sheet-blessure sheet-noextra" name="attr_blessures" value="4" title="État critique" /><span  class="sheet-noextra" style="font-family: pictos;font-weight:bold;font-size:2em;">Y</span>
            </div>
            <div style="height: 30px;">
                <div class="sheet-redtitle3" style="width:80px;">FATIGUE</div>
                <input type="radio" class="sheet-blessure" name="attr_fatigue" value="0" title="Pas de de fatigue" checked /><span>0</span>
                <input type="radio" class="sheet-blessure" name="attr_fatigue" value="1" title="Un niveau de Fatigue" /><span>1</span>
                <input type="radio" class="sheet-blessure" name="attr_fatigue" value="2" title="Deux niveaux de Fatigue" /><span>2</span>
                <input type="radio" class="sheet-blessure" name="attr_fatigue" value="3" title="État critique" /><span style="font-family: pictos;font-weight:bold;font-size:2em;">Y</span>
            </div>
        </div> <!-- FIN DEGATS -->
        <div class="sheet-colblock"> <!-- Carac dérivées -->
            <div class="sheet-redtitle1">CARAC. D&Eacute;RIV&Eacute;ES</div>
            <div class="sheet-input">
                <div class="sheet-comptext">ALLURE</div>
                <input type="number" name="attr_allure_base" value="6" title="Valeur d'allure de base" />
                +<input type="number" name="attr_allure_bonus" value="0" title="Bonus d'allure"/>
                =<input type="number" name="attr_allure" value="[[@{allure_base}+(@{allure_bonus})-@{blessures}]]" title="allure totale" disabled />
            </div>
            <div class="sheet-input">
                <div class="sheet-comptext">CHARISME</div>
                <input type="number" name="attr_charisme_base" value="0" title="Valeur de charisme de base" />
                +<input type="number" name="attr_charisme_bonus" value="0" title="Bonus de charisme"/>
                =<input type="number" name="attr_charisme" value="0" title="Charisme totale" readonly />
            </div>
            <div class="sheet-input">
                <div class="sheet-comptext">PARADE</div>
                <input type="number" name="attr_parade_base" value="3" title="Valeur de parade de base" readonly />
                +<input type="number" name="attr_parade_bonus" value="0" title="Bonus de parade"/>
                =<input type="number" name="attr_parade" value="3" title="Parade totale" readonly />
            </div>
            <div class="sheet-input">
                <div class="sheet-comptext">R&Eacute;SISTANCE</div>
                <input type="number" name="attr_resistance_base" value="4" title="Valeur de Résistance de base" readonly />
                +<input type="number" name="attr_resistance_bonus" value="0" title="Armure (torse) et autres bonus de vigueur"/>
                =<input type="number" name="attr_resistance" value="4" title="Résistance totale" readonly />
            </div>
            <div class="sheet-input sheet-SheetDead">
                <div class="sheet-comptext">TREMPE</div>
                <input type="number" name="attr_trempe_base" value="0" title="Valeur de Trempe de base (Rang)" />
                +<input type="number" name="attr_trempe_bonus" value="0" title="Bonus de Trempe"/>
                =<input type="number" name="attr_trempe" value="[[@{trempe_base}+(@{trempe_bonus})]]" title="Trempe totale" disabled />
            </div>
            <div class="sheet-input">
                <div class="sheet-comptext">Pts POUVOIR</div>
                <input type="number" name="attr_pointspouvoir" value="0" title="Points de Pouvoir courants" />
                /
                <input type="number" name="attr_pointspouvoir_max" value="0" title="Points de Pouvoir maximum"/>
            </div>
        </div> <!-- FIN Carac dérivées -->
        <div class="sheet-colblock sheet-chkPossessions"> <!-- EQUIPEMENT -->
            <div class="sheet-redtitle1">POSSESSIONS</div>
            <div class="sheet-redtitle2" style="display: inline-block;">ARGENT</div>
            <input type="checkbox" name="attr_argentdisplay" class="sheet-dispcheck" title="Agrandir/Réduire la description" /><span>s</span>
            <textarea name="attr_argent" class="sheet-textdesc" style="width: 185px;" placeholder="Argent & Richesses" title="Argent & Richesses"></textarea>
            <div class="sheet-input">
                <div class="sheet-blacktext2">Encombrement maximum :&nbsp;</div>
                <input type="number" name="attr_encombmax" value="10" readonly />
                kg
            </div>
            <div class="sheet-input">
                <div class="sheet-blacktext2">Encombrement :&nbsp;</div>
                <input type="number" name="attr_encombpoids" min="0" value="0" title="Poids total porté en kg" readonly />
                &nbsp;Malus&nbsp;:
                <input type="number" name="attr_encombrement" value="0" title="Malus d'encombrement à tous les jets d’Agilité et de Force, ainsi qu’à tous les jets de Compétences liées à ces deux Attributs" readonly />
            </div>
            <div>
                <div class="sheet-redtitle2" style="display: inline-block;width: 140px;">&Eacute;QUIPEMENT</div>
                <div class="sheet-blacktext1" style="width: 35px;">Qté</div>
                <div class="sheet-blacktext1" style="width: 35px;">Poids</div>
                <div class="sheet-blacktext1" style="width: 35px;">Tot.</div>
            </div>
            <fieldset class="repeating_equipements">
                <div class="sheet-input">
                    <input type="text" style="width: 145px;" name="attr_equipnom" placeholder="&Eacute;quipement" title="Nom de l'équipement" />
                    <input type="number" style="width: 35px;" name="attr_equipqte" value="1" min="0" title="Quantité" />
                    <input type="number" style="width: 35px;" name="attr_equippdsunit" value="0" min="0" title="Poids unitaire" />
                    <input type="text" style="width: 35px;text-align:right" name="attr_equippoids" value="0" min="0" title="Poids total de l'équipement" readonly />
                </div>
            </fieldset>
        </div><!-- FIN EQUIPEMENT -->
    </div> <!-- ** END COL2 ** -->
    <div class="sheet-mycol"> <!-- ** COL3 ** -->
        <div class="sheet-colblock sheet-nopnj">
            <div class="sheet-redtitle1">PERSONNAGE</div>
            <div class="sheet-input"><input type="text" name="attr_character_name" class="sheet-charname" placeholder="Nom" /></div>
            <div class="sheet-input"><div class="sheet-blacktext1" style="width:60px;">Pseudo :&nbsp;</div><input type="text" name="attr_pseudo" style="width:205px;" /></div>
            <div class="sheet-redtitle1">DESCRIPTION</div>
            <div class="sheet-input">
                <div class="sheet-blacktext1" style="width:50px;">Taille :&nbsp;</div><input type="text" name="attr_taille" style="width:70px;" />
                <div class="sheet-blacktext1" style="width:50px;">Poids :&nbsp;</div><input type="text" name="attr_poids" style="width:70px;" />
            </div>
            <div class="sheet-input">
                <div class="sheet-blacktext1" style="width:50px;">Sexe :&nbsp;</div><input type="text" name="attr_sexe" style="width:70px;" />
                <div class="sheet-blacktext1" style="width:50px;">Âge :&nbsp;</div><input type="text" name="attr_age" style="width:70px;" />
            </div>
            <div class="sheet-blacktext1">Signes particuliers : </div>
            <div class="sheet-input">
                <input type="checkbox" name="attr_signedisplay" class="sheet-dispcheck" title="Agrandir/Réduire la description" /><span>s</span>
                <textarea name="attr_signe" class="sheet-textdesc" style="width: 246px;" placeholder="Signes particuliers" title="Signes particuliers"></textarea>
            </div>
        </div>
        <div class="sheet-colblock sheet-pnj">
            <div class="sheet-redtitle1 sheet-extra">PNJ (Extra)</div>
            <div class="sheet-redtitle1 sheet-noextra">PNJ (Joker)</div>
            <div class="sheet-input"><input type="text" name="attr_character_name" class="sheet-charname" placeholder="Nom" /></div>
            <div class="sheet-input">
                <div class="sheet-blacktext1" style="width:50px;">Taille :&nbsp;</div><input type="text" name="attr_taille" style="width:70px;" />
            </div>
        </div>
        <div class="sheet-colblock">
            <div class="sheet-redtitle1 sheet-nopnj">ATOUTS</div>
            <div class="sheet-redtitle1 sheet-pnj">ATOUTS / APTITUDES (+)</div>
            <fieldset class="repeating_atouts"> <!-- ATOUTS -->
                <div class="sheet-input">
                    <input type="checkbox" name="attr_atoutdisplay" class="sheet-dispcheck" title="Agrandir/Réduire la description" /><span>s</span>
                    <textarea name="attr_atout" class="sheet-textdesc" style="width: 244px;" placeholder="Atout" title="Atout"></textarea>
                </div>
            </fieldset>
            <div class="sheet-redtitle2 sheet-nopnj">HANDICAPS</div>
            <div class="sheet-redtitle2 sheet-pnj">HANDICAPS / APTITUDES (-)</div>
            <fieldset class="repeating_handicaps"> <!-- ATOUTS -->
                <div class="sheet-input">
                    <input type="checkbox" name="attr_handicapdisplay" class="sheet-dispcheck" title="Agrandir/Réduire la description" /><span>s</span>
                    <textarea name="attr_handicap" class="sheet-textdesc" style="width: 244px;" placeholder="Handicap" title="Handicap"></textarea>
                </div>
            </fieldset>
        </div>
        <div class="sheet-colblock sheet-nopnj">
            <div style="text-align: center;">
                <div class="sheet-redtitle1" style="display: inline-block;">PROGRESSION</div>
                <div class="sheet-blacktext2">XP</div>
                <input type="number" name="attr_xp" min="0" value="0" title="Points d'expérience non dépensés" />
            </div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">5</div><input type="text" style="width:195px;" name="attr_progres05" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">10</div><input type="text" style="width:195px;" name="attr_progres10" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">15</div><input type="text" style="width:195px;" name="attr_progres15" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">Aguerri</div><input type="text" style="width:195px;" name="attr_progres20" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">25</div><input type="text" style="width:195px;" name="attr_progres25" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">30</div><input type="text" style="width:195px;" name="attr_progres30" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">35</div><input type="text" style="width:195px;" name="attr_progres35" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">Vétéran</div><input type="text" style="width:195px;" name="attr_progres40" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">45</div><input type="text" style="width:195px;" name="attr_progres45" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">50</div><input type="text" style="width:195px;" name="attr_progres50" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">55</div><input type="text" style="width:195px;" name="attr_progres55" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">Héroïque</div><input type="text" style="width:195px;" name="attr_progres60" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">65</div><input type="text" style="width:195px;" name="attr_progres65" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">70</div><input type="text" style="width:195px;" name="attr_progres70" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">75</div><input type="text" style="width:195px;" name="attr_progres75" /></div>
            <div class="sheet-input"><div class="sheet-blacktext2" style="width:70px;">Légendaire</div><input type="text" style="width:195px;" name="attr_progres80" /></div>
        </div>
    </div> <!-- ** END COL3 ** -->
    <div class="sheet-colblock"> <!-- ** ARMES ** -->
        <div>
            <div class="sheet-redtitle1" style="display: inline-block;width: 150px;">ARMES</div>
            <div class="sheet-redtitle3" style="width: 60px;">Compét.</div>
            <div class="sheet-redtitle3" style="width: 145px;">Dégâts</div>
            <div class="sheet-redtitle3" style="width: 98px;">Portée</div>
            <div class="sheet-redtitle3" style="width: 35px;">CdT</div>
            <div class="sheet-redtitle3" style="width: 80px;">Munitions</div>
            <div class="sheet-redtitle3" style="width: 35px;">PA</div>
            <div class="sheet-redtitle3" style="width: 150px;">Notes</div>
        </div>
        <div class="sheet-input"> <!-- ARME FIXE 1 -->
            <button type="roll"
                name="Btrel-Arme1"
                class="sheet-btRolrel"
                value="@{relRollArmeFixe1}"
                title="Arme N°1"
                >&nbsp;</button>
            <button type="roll"
                name="Btjet-Arme1"
                class="sheet-btRoljet"
                value="@{jetRollArmeFixe1}"
                title="Arme N°1"
                >&nbsp;</button>
            <button type="roll"
                name="BtBrut-Arme1"
                class="sheet-btRolbrut"
                value="/em @{character_name} attaque avec @{arme1_nom}:
/roll @{arme1_comp_brut}
Dégâts :
/roll @{jetRollArmeFixe1Dgt}
Dégâts supplémentaires si relance : [[1d6!!]]"
                title="Arme N°1"
                >&nbsp;</button>
            <input type="text" class="sheet-compspe"  name="attr_arme1_nom" placeholder="Nom de l'arme n°1" title="Nom de l'arme n°1" />
            <SELECT name="attr_arme1_comp" style="width: 55px;margin-left:3px;margin-right:3px;" title="Compétence utilisée avec cette arme">
                <OPTION value="0" SELECTED> - Choisir une compétence :</OPTION>
                <OPTION value="Combat">Combat</OPTION>
                <OPTION value="Lancer">Lancer</OPTION>
                <OPTION value="Tir">Tir</OPTION>
            </SELECT>
            <input type="hidden" name="attr_arme1_comp_rel" value="0" />
            <input type="hidden" name="attr_arme1_comp_jet" value="0" />
            <input type="hidden" name="attr_arme1_comp_brut" value="0" />
            <SELECT name="attr_arme1_dgt_force" style="width:35px;" title="Application de la Force aux dégâts (Combat et Lancer)">
                <OPTION value="@{RollBastForce}" SELECTED>FORCE</OPTION>
                <OPTION value="0d4">_</OPTION>
            </SELECT>+<input name="attr_arme1_dgt_nbde" style="width:30px;" type="number" value="1" min="0" title="Nombre de dés de dégâts" />
            <SELECT name="attr_arme1_dgt_de" class="sheet-selde" title="Dé de dégâts">
                <OPTION value="4" SELECTED>d4</OPTION>
                <OPTION value="6">d6</OPTION>
                <OPTION value="8">d8</OPTION>
                <OPTION value="10">d10</OPTION>
                <OPTION value="12">d12</OPTION>
            </SELECT>+<input name="attr_arme1_dgt_bonus" style="width:30px;margin-right:3px;" type="number" value="0" title="Bonus aux dégâts" />
            <input name="attr_arme1_portee" type="text" style="width:100px;margin-right:3px;" placeholder="Portée" title="Portée de l'arme" />
            <input name="attr_arme1_cdt" type="number" style="width:30px;margin-right:3px;" value="0" min="0" title="Cadence de Tir" />
            <input name="attr_arme1_mun" type="number" style="width:40px;" value="0" min="0" title="Munitions courantes" />/<input name="attr_arme1_mun_max" type="number" style="width:40px;margin-right:3px;" value="0" min="0" title="Munitions maximum" />
            <input name="attr_arme1_pa" type="number" style="width:30px;margin-right:3px;" value="0" min="0" title="Pénétration d'Armure" />
            <input type="checkbox" name="attr_arme1display" class="sheet-dispcheck" title="Agrandir/Réduire la description" /><span>s</span>
            <textarea name="attr_arme1_notes" class="sheet-textdesc" style="width: 171px;" placeholder="Notes" title="Notes sur l'arme"></textarea>
        </div> <!-- FIN ARME FIXE 1 -->
        <div class="sheet-input"> <!-- ARME FIXE 2 -->
            <button type="roll"
                name="Btrel-Arme2"
                class="sheet-btRolrel"
                value="@{relRollArmeFixe2}"
                title="Attaque Arme n°2"
                >&nbsp;</button>
            <button type="roll"
                name="Btjet-Arme2"
                class="sheet-btRoljet"
                value="@{jetRollArmeFixe2}"
                title="Attaque Arme n°2"
                >&nbsp;</button>
            <button type="roll"
                name="BtBrut-Arme2"
                class="sheet-btRolbrut"
                value="/em @{character_name} Attaque avec @{arme2_nom}:
/roll @{arme2_comp_brut}
Dégâts :
/roll @{jetRollArmeFixe2Dgt}
Dégâts supplémentaires si relance : [[1d6!!]]"
                title="Attaque Arme n°2"
                >&nbsp;</button>
            <input type="text" class="sheet-compspe"  name="attr_arme2_nom" placeholder="Nom de l'arme n°2" title="Nom de l'arme n°2" />
            <SELECT name="attr_arme2_comp" style="width: 55px;margin-left:3px;margin-right:3px;" title="Compétence utilisée avec cette arme">
                <OPTION value="0" SELECTED> - Choisir une compétence :</OPTION>
                <OPTION value="Combat">Combat</OPTION>
                <OPTION value="Lancer">Lancer</OPTION>
                <OPTION value="Tir">Tir</OPTION>
            </SELECT>
            <input type="hidden" name="attr_arme2_comp_rel" value="0" />
            <input type="hidden" name="attr_arme2_comp_jet" value="0" />
            <input type="hidden" name="attr_arme2_comp_brut" value="0" />
            <SELECT name="attr_arme2_dgt_force" style="width:35px;" title="Application de la Force aux dégâts (Combat et Lancer)">
                <OPTION value="@{RollBastForce}" SELECTED>FORCE</OPTION>
                <OPTION value="0d4">_</OPTION>
            </SELECT>+<input name="attr_arme2_dgt_nbde" style="width:30px;" type="number" value="1" min="0" title="Nombre de dés de dégâts" />
            <SELECT name="attr_arme2_dgt_de" class="sheet-selde" title="Dé de dégâts">
                <OPTION value="4" SELECTED>d4</OPTION>
                <OPTION value="6">d6</OPTION>
                <OPTION value="8">d8</OPTION>
                <OPTION value="10">d10</OPTION>
                <OPTION value="12">d12</OPTION>
            </SELECT>+<input name="attr_arme2_dgt_bonus" style="width:30px;margin-right:3px;" type="number" value="0" title="Bonus aux dégâts" />
            <input name="attr_arme2_portee" type="text" style="width:100px;margin-right:3px;" placeholder="Portée" title="Portée de l'arme" />
            <input name="attr_arme2_cdt" type="number" style="width:30px;margin-right:3px;" value="0" min="0" title="Cadence de Tir" />
            <input name="attr_arme2_mun" type="number" style="width:40px;" value="0" min="0" title="Munitions courantes" />/<input name="attr_arme2_mun_max" type="number" style="width:40px;margin-right:3px;" value="0" min="0" title="Munitions maximum" />
            <input name="attr_arme2_pa" type="number" style="width:30px;margin-right:3px;" value="0" min="0" title="Pénétration d'Armure" />
            <input type="checkbox" name="attr_arme2display" class="sheet-dispcheck" title="Agrandir/Réduire la description" /><span>s</span>
            <textarea name="attr_arme2_notes" class="sheet-textdesc" style="width: 171px;" placeholder="Notes" title="Notes sur l'arme"></textarea>
        </div> <!-- FIN ARME FIXE 2 -->
        <div class="sheet-input"> <!-- ARME FIXE 3 -->
            <button type="roll"
                name="Btrel-Arme3"
                class="sheet-btRolrel"
                value="@{relRollArmeFixe3}"
                title="Attaque Arme n°3"
                >&nbsp;</button>
            <button type="roll"
                name="Btjet-Arme3"
                class="sheet-btRoljet"
                value="@{jetRollArmeFixe3}"
                title="Attaque Arme n°3"
                >&nbsp;</button>
            <button type="roll"
                name="BtBrut-Arme3"
                class="sheet-btRolbrut"
                value="/em @{character_name} Attaque avec @{arme3_nom}:
/roll @{arme3_comp_brut}
Dégâts :
/roll @{jetRollArmeFixe3Dgt}
Dégâts supplémentaires si relance : [[1d6!!]]"
                title="Attaque Arme n°3"
                >&nbsp;</button>
            <input type="text" class="sheet-compspe"  name="attr_arme3_nom" placeholder="Nom de l'arme n°3" title="Nom de l'arme n°3" />
            <SELECT name="attr_arme3_comp" style="width: 55px;margin-left:3px;margin-right:3px;" title="Compétence utilisée avec cette arme">
                <OPTION value="0" SELECTED> - Choisir une compétence :</OPTION>
                <OPTION value="Combat">Combat</OPTION>
                <OPTION value="Lancer">Lancer</OPTION>
                <OPTION value="Tir">Tir</OPTION>
            </SELECT>
            <input type="hidden" name="attr_arme3_comp_rel" value="0" />
            <input type="hidden" name="attr_arme3_comp_jet" value="0" />
            <input type="hidden" name="attr_arme3_comp_brut" value="0" />
            <SELECT name="attr_arme3_dgt_force" style="width:35px;" title="Application de la Force aux dégâts (Combat et Lancer)">
                <OPTION value="@{RollBastForce}" SELECTED>FORCE</OPTION>
                <OPTION value="0d4">_</OPTION>
            </SELECT>+<input name="attr_arme3_dgt_nbde" style="width:30px;" type="number" value="1" min="0" title="Nombre de dés de dégâts" />
            <SELECT name="attr_arme3_dgt_de" class="sheet-selde" title="Dé de dégâts">
                <OPTION value="4" SELECTED>d4</OPTION>
                <OPTION value="6">d6</OPTION>
                <OPTION value="8">d8</OPTION>
                <OPTION value="10">d10</OPTION>
                <OPTION value="12">d12</OPTION>
            </SELECT>+<input name="attr_arme3_dgt_bonus" style="width:30px;margin-right:3px;" type="number" value="0" title="Bonus aux dégâts" />
            <input name="attr_arme3_portee" type="text" style="width:100px;margin-right:3px;" placeholder="Portée" title="Portée de l'arme" />
            <input name="attr_arme3_cdt" type="number" style="width:30px;margin-right:3px;" value="0" min="0" title="Cadence de Tir" />
            <input name="attr_arme3_mun" type="number" style="width:40px;" value="0" min="0" title="Munitions courantes" />/<input name="attr_arme3_mun_max" type="number" style="width:40px;margin-right:3px;" value="0" min="0" title="Munitions maximum" />
            <input name="attr_arme3_pa" type="number" style="width:30px;margin-right:3px;" value="0" min="0" title="Pénétration d'Armure" />
            <input type="checkbox" name="attr_arme3display" class="sheet-dispcheck" title="Agrandir/Réduire la description" /><span>s</span>
            <textarea name="attr_arme3_notes" class="sheet-textdesc" style="width: 171px;" placeholder="Notes" title="Notes sur l'arme"></textarea>
        </div> <!-- FIN ARME FIXE 3 -->
        <fieldset class="repeating_armes">
            <div class="sheet-input"> <!-- ARME DYNAMIQUE -->
                <button type="roll"
                    name="Btrel-ArmeD"
                    class="sheet-btRolrel"
                    value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{armeD_nom}}}  {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{attaque=1}} {{relances=[[ @{armeD_comp_rel} ]]}} {{degatsrel=[[ { floor( ( @{armeD_dgt_force} + @{armeD_dgt_nbde}d@{armeD_dgt_de}!!+(@{armeD_dgt_bonus})[Dégâts : arme]  + (?{Mod. dégâts|0})[Modificateur aux dégâts] - (@{cibleresistance}[Résistance] - 4 ) ) /4), 0d0 }kh1 ]]}} {{degatsrelplus=[[ { floor( ( @{armeD_dgt_force} + @{armeD_dgt_nbde}d@{armeD_dgt_de}!!+(@{armeD_dgt_bonus})[Dégâts : arme] + 1d6!!  + (?{Mod. dégâts|0})[Modificateur aux dégâts] - (@{cibleresistance}[Résistance] - 4 ) ) /4), 0d0 }kh1 ]]}} {{atkcible=[[@{atkcible}]]}} {{cible=@{atknom}}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}} {{competence=@{armeD_comp}}}"
                    title="Attaque"
                    >&nbsp;</button>
                <button type="roll"
                    name="Btjet-ArmeD"
                    class="sheet-btRoljet"
                    value="&{template:sawo} {{etat=[[@{templateetat}]]}} {{name=@{armeD_nom}}}  {{perso=@{character_name}}} {{secoue=[[@{secoue}]]}} {{attaque=1}} {{jet=[[ @{armeD_comp_jet} ]]}} {{degats=[[  @{armeD_dgt_force} + @{armeD_dgt_nbde}d@{armeD_dgt_de}!!+(@{armeD_dgt_bonus})[Dégâts : arme] + (?{Mod. dégâts|0})[Modificateur aux dégâts] ]]}} {{degatsplus=[[1d6!!]]}} {{blessures=[[@{blessures}]]}} {{fatigue=[[@{fatigue}]]}} {{encombrement=[[@{encombrement}]]}} {{competence=@{armeD_comp}}}"
                    title="Attaque"
                    >&nbsp;</button>
                <button type="roll"
                    name="BtBrut-ArmeD"
                    class="sheet-btRolbrut"
                value="/em @{character_name} Attaque avec @{armeD_nom}:
/roll @{armeD_comp_brut}
Dégâts :
/roll @{armeD_dgt_force} + @{armeD_dgt_nbde}d@{armeD_dgt_de}!!+(@{armeD_dgt_bonus})[Dégâts : arme] + (?{Mod. dégâts|0})[Modificateur aux dégâts]
Dégâts supplémentaires si relance : [[1d6!!]]"
                    title="Attaque"
                    >&nbsp;</button>
                <input type="text" class="sheet-compspe"  name="attr_armeD_nom" placeholder="Nom de l'arme" title="Nom de l'arme" />
                <SELECT name="attr_armeD_comp" style="width: 55px;margin-left:3px;margin-right:3px;" title="Compétence utilisée avec cette arme">
                    <OPTION value="0" SELECTED> - Choisir une compétence :</OPTION>
                    <OPTION value="Combat">Combat</OPTION>
                    <OPTION value="Lancer">Lancer</OPTION>
                    <OPTION value="Tir">Tir</OPTION>
                </SELECT>
                <input type="hidden" name="attr_armeD_comp_rel" value="0" />
                <input type="hidden" name="attr_armeD_comp_jet" value="0" />
                <input type="hidden" name="attr_armeD_comp_brut" value="0" />
                <SELECT name="attr_armeD_dgt_force" style="width:35px;" title="Application de la Force aux dégâts (Combat et Lancer)">
                    <OPTION value="@{RollBastForce}" SELECTED>FORCE</OPTION>
                    <OPTION value="0d4">_</OPTION>
                </SELECT>+<input name="attr_armeD_dgt_nbde" style="width:30px;" type="number" value="1" min="0" title="Nombre de dés de dégâts" />
                <SELECT name="attr_armeD_dgt_de" class="sheet-selde" title="Dé de dégâts">
                    <OPTION value="4" SELECTED>d4</OPTION>
                    <OPTION value="6">d6</OPTION>
                    <OPTION value="8">d8</OPTION>
                    <OPTION value="10">d10</OPTION>
                    <OPTION value="12">d12</OPTION>
                </SELECT>+<input name="attr_armeD_dgt_bonus" style="width:30px;margin-right:3px;" type="number" value="0" title="Bonus aux dégâts" />
                <input name="attr_armeD_portee" type="text" style="width:100px;margin-right:3px;" placeholder="Portée" title="Portée de l'arme" />
                <input name="attr_armeD_cdt" type="number" style="width:30px;margin-right:3px;" value="0" min="0" title="Cadence de Tir" />
                <input name="attr_armeD_mun" type="number" style="width:40px;" value="0" min="0" title="Munitions courantes" />/<input name="attr_armeD_mun_max" type="number" style="width:40px;margin-right:3px;" value="0" min="0" title="Munitions maximum" />
                <input name="attr_armeD_pa" type="number" style="width:30px;margin-right:3px;" value="0" min="0" title="Pénétration d'Armure" />
                <input type="checkbox" name="attr_armeDdisplay" class="sheet-dispcheck" title="Agrandir/Réduire la description" /><span>s</span>
                <textarea name="attr_armeD_notes" class="sheet-textdesc" style="width: 171px;" placeholder="Notes" title="Notes sur l'arme"></textarea>
            </div> <!-- FIN ARME DYNAMIQUE -->
        </fieldset>
    </div> <!-- ** FIN ARMES ** -->
    <div class="sheet-colblock"> <!-- ** POUVOIRS ** -->
        <div>
            <div class="sheet-redtitle1" style="display: inline-block;width: 220px;">POUVOIRS</div>
            <div class="sheet-redtitle3" style="width: 35px;">Rang</div>
            <div class="sheet-redtitle3" style="width: 26px;">PP</div>
            <div class="sheet-redtitle3" style="width: 100px;">Portée</div>
            <div class="sheet-redtitle3" style="width: 100px;">Durée</div>
            <div class="sheet-redtitle3" style="width: 200px;">Effets</div>
        </div>
         <fieldset class="repeating_pouvoirs">
            <div class="sheet-input"> <!-- POUVOIR DYNAMIQUE -->
                <button type="roll" class="sheet-btDesc"
                    value="&{template:sawo} {{name=@{pouv_nom}}} {{perso=@{character_name}}} {{pouvoir=1}} {{pp=@{pouv_pp}}} {{portee=@{pouv_portee}}} {{duree=@{pouv_duree}}} {{description=@{pouv_effets}}}"
                ></button>
                <input type="text" name="attr_pouv_nom" style="width: 200px;font-weight:bold;" placeholder="Nom du pouvoir" title="Nom du pouvoir" />
                <SELECT name="attr_pouv_rang" style="width: 30px;margin-left:3px;margin-right:3px;" title="Rang d'accès à ce pouvoir">
                    <OPTION value="N" SELECTED>N - Novice</OPTION>
                    <OPTION value="A">A - Aguerri</OPTION>
                    <OPTION value="V">V - Vétéran</OPTION>
                    <OPTION value="H">H - Héroïque</OPTION>
                    <OPTION value="L">L - Légendaire</OPTION>
                </SELECT>
                <input name="attr_pouv_pp" type="number" style="width:30px;" value="0" min="0" title="Coût en Points de Pouvoir" />
                <input name="attr_pouv_portee" type="text" style="width:100px;margin-right:3px;" placeholder="Portée" title="Portée de l'arme" />
                <input name="attr_pouv_duree" type="text" style="width:100px;margin-right:3px;" placeholder="Durée" title="Durée du pouvoir" />
                <input type="checkbox" name="attr_pouvoirdisplay" class="sheet-dispcheck" title="Agrandir/Réduire la description" /><span>s</span>
                <textarea name="attr_pouv_effets" class="sheet-textdesc" style="width: 300px;" placeholder="Effets du pouvoir" title="Effets du pouvoir"></textarea>
            </div> <!-- FIN POUVOIR DYNAMIQUE -->
        </fieldset>
   </div> <!-- ** FIN POUVOIRS ** -->
   <div class="sheet-colblock"> <!-- ** NOTES/DIVERS ** -->
        <div class="sheet-redtitle1" style="display: inline-block;width: 220px;">NOTES</div>
        <textarea name="attr_divnotes" placeholder="Notes / Divers"></textarea>

   </div> <!-- ** FIN NOTES/DIVERS ** -->
</div> <!-- FIN MAIN -->
<!-- CONFIGURATION -->
<div class="sheet-configuration">
    <div class="sheet-2colrow">
        <div class="sheet-col">
            <div class="sheet-conftitre">STYLE VISUEL</div>
            <div class="sheet-row">
                <input type="checkbox" name="attr_pnj" value="1" class="sheet-chkSkill" title="Ce personnage est un PNJ. Pour en faire un Extra (et donc automatiquement un PNJ), sélectionnez le dé Joker à '- Extra (PNJ)'" /><span>Personnage Non Joueur</span>
                <input type="checkbox" name="attr_chkPossessions" value="1" class="sheet-chkSkill" title="Afficher ou masquer la section 'Possessions' : richesse, équipement etc." checked /><span>Afficher les possessions</span>
            </div>
            <div class="sheet-row">
                <input type="checkbox" name="attr_sheetDead" value="1" class="sheet-chkSkill" title="Couleurs et logo Deadlands Reloaded" /><span>Deadlands Reloaded</span>
           </div>
        </div>
        <div class="sheet-col">
            <div class="sheet-conftitre">JETS</div>
            <div class="sheet-confcat">Niveau de détail :</div>
            <input type="radio" name="attr_sheetStyle" value="0" class="sheet-styleRolrel" checked="checked" title="Style de jet par template, montrant succès et relances" /><span>Succès+Relances</span>
            <input type="radio" name="attr_sheetStyle" value="1" class="sheet-styleRoljet" title="Style de jet par template, montrant le total des jets" /><span>Total des Jets</span>
            <input type="radio" name="attr_sheetStyle" value="2" class="sheet-styleRolbrut" title="Style de jet 'macro', sans  template, montrant les jets bruts" /><span>Jets bruts</span>
            <div class="sheet-optionEtat">Templates :</div>
            <input type="checkbox" name="attr_templateetat" class="sheet-optionEtat" value="1" title="Afficher l'état du personnage dans les templates de jet" checked /><span class="sheet-optionEtat">Etats</span>
            <div class="sheet-optionCible">Attaques :</div>
            <input type="checkbox" name="attr_atkcible"  class="sheet-optionCible" value="1" title="Utiliser les pions cibles lors des attaques pour déterminer le seuil de réussite via la résistance de la cible etc." checked /><span class="sheet-optionCible">Cible</span>
        </div>
    </div>
    <div class="sheet-2colrow">
        <div class="sheet-col">
            <div class="sheet-conftitre">AFFICHAGE DES COMPETENCES</div>
            <div class="sheet-row" style="text-align: center;"><input type="checkbox" name="attr_chkAllComp" value="1" class="sheet-chkSkill" title="Afficher/Masquer toutes les compétence" checked /><span>Toutes</span></div>
            <input type="checkbox" name="attr_chkArcane" value="1" class="sheet-chkSkill" checked /><span>Arcane</span>
            <input type="checkbox" name="attr_chkCombat" value="1" class="sheet-chkSkill" checked /><span>Combat</span>
            <input type="checkbox" name="attr_chkConduite" value="1" class="sheet-chkSkill" checked /><span>Conduite</span>
            <input type="checkbox" name="attr_chkConnaissance" value="1" class="sheet-chkSkill" checked /><span>Connaissance</span>
            <input type="checkbox" name="attr_chkCrochetage" value="1" class="sheet-chkSkill" checked /><span>Crochetage</span>
            <input type="checkbox" name="attr_chkDiscretion" value="1" class="sheet-chkSkill" checked /><span>Discrétion</span>
            <input type="checkbox" name="attr_chkEquitation" value="1" class="sheet-chkSkill" checked /><span>Équitation</span>
            <input type="checkbox" name="attr_chkEscalade" value="1" class="sheet-chkSkill" checked /><span>Escalade</span>
            <input type="checkbox" name="attr_chkIntimidation" value="1" class="sheet-chkSkill" checked /><span>Intimidation</span>
            <input type="checkbox" name="attr_chkJeu" value="1" class="sheet-chkSkill" checked /><span>Jeu</span>
            <input type="checkbox" name="attr_chkLancer" value="1" class="sheet-chkSkill" checked /><span>Lancer</span>
            <input type="checkbox" name="attr_chkNatation" value="1" class="sheet-chkSkill" checked /><span>Natation</span>
            <input type="checkbox" name="attr_chkNavigation" value="1" class="sheet-chkSkill" checked /><span>Navigation</span>
            <input type="checkbox" name="attr_chkPerception" value="1" class="sheet-chkSkill" checked /><span>Perception</span>
            <input type="checkbox" name="attr_chkPersuasion" value="1" class="sheet-chkSkill" checked /><span>Persuasion</span>
            <input type="checkbox" name="attr_chkPilotage" value="1" class="sheet-chkSkill" checked /><span>Pilotage</span>
            <input type="checkbox" name="attr_chkPistage" value="1" class="sheet-chkSkill" checked /><span>Pistage</span>
            <input type="checkbox" name="attr_chkRecherche" value="1" class="sheet-chkSkill" checked /><span>Recherche</span>
            <input type="checkbox" name="attr_chkReparation" value="1" class="sheet-chkSkill" checked /><span>Réparation</span>
            <input type="checkbox" name="attr_chkReseaux" value="1" class="sheet-chkSkill" checked /><span>Réseaux</span>
            <input type="checkbox" name="attr_chkSarcasme" value="1" class="sheet-chkSkill" checked /><span>Sarcasme</span>
            <input type="checkbox" name="attr_chkSoins" value="1" class="sheet-chkSkill" checked /><span>Soins</span>
            <input type="checkbox" name="attr_chkSurvie" value="1" class="sheet-chkSkill" checked /><span>Survie</span>
            <input type="checkbox" name="attr_chkTir" value="1" class="sheet-chkSkill" checked /><span>Tir</span>
        </div>
        <div class="sheet-col">

        </div>
    </div>
</div>
</div> <!-- FIN FDP -->
<!-- *** TEMPLATES ** -->
<rolltemplate class="sheet-rolltemplate-sawo">
    {{#perso}}
        <table>
           <tr>
                <td style="text-align: center;">
                    {{#pouvoir}}Pouvoir de{{/pouvoir}}
                    <b>{{perso}}</b>
                    {{#attaque}}attaque{{/attaque}}
                    {{^pouvoir}}
                        {{^attaque}}fait un jet{{/attaque}}
                    {{/pouvoir}}
                </td>
            </tr>
            {{#cible}}
                {{#rollTotal() atkcible 1}}
                    <tr>
                        <td style="text-align: center;">
                            {{^attaque}}contre{{/attaque}}
                            <b>{{cible}}</b>
                        </td>
                    </tr>
                {{/rollTotal() atkcible 1}}
            {{/cible}}
        </table>
    {{/perso}}
    <table>
        <tr>
            <th colspan="2">
                {{name}}
                {{#competence}}({{competence}}){{/competence}}
            </th>
        </tr>
        {{#relances}}
            {{#rollLess() relances 1}}
                <tr>
                    <td class="sheet-info" style="text-align: left;font-weight: bold;color: red;">{{#attaque}}Attaque : {{/attaque}}Échec</td>
                    <td style="text-align: center;">{{relances}}</td>
                </tr>
            {{/rollLess() relances 1}}
            {{#rollTotal() relances 1}}
                <tr>
                    <td class="sheet-info" style="text-align: left;font-weight: bold;color: green;">{{#attaque}}Attaque : {{/attaque}}Succès sans relance</td>
                    <td style="text-align: center;">{{relances}}</td>
                </tr>
                {{#attaque}}
                    {{#rollLess() degatsrel 1}}
                        <tr>
                            <td class="sheet-info" style="text-align: left;font-weight: bold;color: red;">Pas de Dégât</td>
                            <td style="text-align: center;">{{degatsrel}}</td>
                        </tr>
                    {{/rollLess() degatsrel 1}}
                    {{#rollTotal() degatsrel 1}}
                        <tr>
                            <td class="sheet-info" style="text-align: left;font-weight: bold;color: green;">Dégâts : Succès sans relance</td>
                            <td style="text-align: center;">{{degatsrel}}</td>
                        </tr>
                    {{/rollTotal() degatsrel 1}}
                    {{#rollGreater() degatsrel 1}}
                        <tr>
                            <td class="sheet-info" style="text-align: left;font-weight: bold;color: green;">Dégâts : Succès+relance(s)</td>
                            <td style="text-align: center;">{{degatsrel}}</td>
                        </tr>
                    {{/rollGreater() degatsrel 1}}
                {{/attaque}}
            {{/rollTotal() relances 1}}
            {{#rollGreater() relances 1}}
                <tr>
                    <td class="sheet-info" style="text-align: left;font-weight: bold;color: green;">{{#attaque}}Attaque : {{/attaque}}Succès+Relance(s)</td>
                    <td style="text-align: center;">{{relances}}</td>
                </tr>
                {{#attaque}}
                    {{#rollLess() degatsrelplus 1}}
                        <tr>
                            <td class="sheet-info" style="text-align: left;font-weight: bold;color: red;">Pas de Dégât</td>
                            <td style="text-align: center;">{{degatsrelplus}}</td>
                        </tr>
                    {{/rollLess() degatsrelplus 1}}
                    {{#rollTotal() degatsrelplus 1}}
                        <tr>
                            <td class="sheet-info" style="text-align: left;font-weight: bold;color: green;">Dégâts(+1d6) : Succès sans relance</td>
                            <td style="text-align: center;">{{degatsrelplus}}</td>
                        </tr>
                    {{/rollTotal() degatsrelplus 1}}
                    {{#rollGreater() degatsrelplus 1}}
                        <tr>
                            <td class="sheet-info" style="text-align: left;font-weight: bold;color: green;">Dégâts(+1d6) : Succès+relance(s)</td>
                            <td style="text-align: center;">{{degatsrelplus}}</td>
                        </tr>
                    {{/rollGreater() degatsrelplus 1}}
                {{/attaque}}
            {{/rollGreater() relances 1}}
        {{/relances}}
        {{#jet}}
            <tr>
                <td class="sheet-info" style="text-align: left;font-weight: bold;">Jet : </td>
                <td>{{jet}}</td>
            </tr>
            {{#degats}}
                <tr>
                    <td class="sheet-info" style="text-align: left;font-weight: bold">Dégâts : </td>
                    <td>{{degats}}</td>
                </tr>
                <tr>
                    <td class="sheet-info" style="text-align: right;font-weight: bold">+1d6 si relance : </td>
                    <td>{{degatsplus}}</td>
                </tr>
            {{/degats}}
        {{/jet}}
        {{#pouvoir}}
            <tr>
                <td style="text-align: right; padding-right: 4px;">PP</td>
                <td class="sheet-info" style="width:100%;text-align:left; font-weight: bold;">{{pp}}</td>
            </tr>
            <tr>
                <td style="text-align: right; padding-right: 4px;">Portée</td>
                <td class="sheet-info" style="width:100%;text-align:left; font-weight: bold;">{{portee}}</td>
            </tr>
            <tr>
                <td style="text-align: right; padding-right: 4px;">Durée</td>
                <td class="sheet-info" style="width:100%;text-align:left; font-weight: bold;">{{duree}}</td>
            </tr>
            <tr>
                <td colspan="2">
                    <div class="jetdesc">{{description}}</div>
                </td>
            </tr>
        {{/pouvoir}}
    </table>
    {{#rollTotal() etat 1}}
        <table style="border-top:none;">
            <tr><td colspan="2" style="text-align: center;">État de {{perso}}</td></tr>
            {{#rollTotal() blessures 0}}
                {{#rollTotal() fatigue 0}}
                    {{#rollTotal() secoue 0}}
                        <td class="sheet-info" style="text-align: center;" colspan="2">Normal</td>
                    {{/rollTotal() secoue 0}}
                {{/rollTotal() fatigue 0}}
            {{/rollTotal() blessures 0}}
            {{#rollTotal() secoue 1}}
                <tr class="sheet-septpl">
                    <td class="sheet-info" style="text-align: center;" colspan="2">Secoué</td>
                </tr>
            {{/rollTotal() secoue 1}}
            {{#rollGreater() blessures 0}}
                <tr class="sheet-septpl">
                    <td class="sheet-info">
                        Blessures
                    </td>
                    <td style="text-align: center;">
                        {{blessures}}
                        {{#rollTotal() blessures 4}}
                            <span style="text-align: center;color: red;">(État critique)</span>
                        {{/rollTotal() blessures 4}}
                    </td>
                </tr>
            {{/rollGreater() blessures 0}}
            {{#rollGreater() fatigue 0}}
                <tr class="sheet-septpl">
                    <td class="sheet-info">Fatigue</td>
                    {{#rollTotal() fatigue 1}}
                        <td style="text-align: center;">Fatigué</td>
                    {{/rollTotal() fatigue 1}}
                    {{#rollTotal() fatigue 2}}
                        <td style="text-align: center;">Epuisé</td>
                    {{/rollTotal() fatigue 2}}
                    {{#rollTotal() fatigue 3}}
                        <td style="text-align: center;color: red;">État Critique</td>
                    {{/rollTotal() fatigue 3}}
                </tr>
            {{/rollGreater() fatigue 0}}
            {{#rollGreater() encombrement 0}}
                <tr class="sheet-septpl">
                    <td style="text-align: right;">{{encombrement}}</td>
                    <td class="sheet-info">Encombrement</td>
                </tr>
            {{/rollGreater() encombrement 0}}
        </table>
    {{/rollTotal() etat 1}}
</rolltemplate>

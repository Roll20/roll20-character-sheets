<!-- BEGIN SHEET -->
<input name="attr_SetupDone" style="display: none;" type="text" value="0">
<input name="attr_tab1" title="Main"   class="sheet-tab sheet-tab1" type="radio" checked="checked" value="1"><span class="sheet-tabSpan" title="Main"></span>
<input name="attr_tab1" title="Skills" class="sheet-tab sheet-tab2" type="radio" value="2"><span class="sheet-tabSpan" title="Skills"></span>
<input name="attr_tab1" title="Notes"  class="sheet-tab sheet-tab3" type="radio" value="3"><span class="sheet-tabSpan" title="Notes"></span>
 
  <input class="sheet-skill-toggle" type="hidden" name="attr_sheet_skill_toggles"/>
  <input accept="Category" name="attr_drop_category" type="hidden"/>
  <input accept="Name" name="attr_drop_name" type="hidden"/>
  <input accept="data" name="attr_drop_data" type="hidden"/>
  <input accept="Content" name="attr_drop_content" type="hidden"/>
<!--- Main (Tab 1) start -->
<div class="sheet-tab-content sheet-tab1" style='width:864px'>

	<!-- Configuration Complications - player must select between options and cannot, therefore, be automated -->
	<!-- Sealed until TKG permission -->
	<!--
	<div class='sheet-cdiv' style='display: inline-block; vertical-align: top; border: 0px solid brown; margin: -8px 0px 0px 0px' >
		<input class="sheet-HideConfig" type="checkbox" checked name="attr_is_config" title='Configuration &quot;Complications&quot;' /><span class="sheet-is-config"></span>
		<div class="sheet-config" style='padding: 2px; background-color: rgb(234, 221, 202); background-image: none;'>
			<button type="action" style='height: 14px; margin: -6px 0px 0px 0px; padding: none; border: 0px solid black; color: white; background-color: rgba(238, 75, 43, 1.0);' title="Roll 2d10+25 for each STAT and 2d10+10 for each SAVE" id="allAttributes" name="act_allAttributes">Roll Attributes</button> 
			<label style='font-size: 12px'> Points:</label><input type='text' style='width: 36px; height: 18px; text-align: center; margin: -2px 0px 0px -6px' name='attr_totalPoints' />
			<label style='font-size: 12px'> Skills:</label><input type='text' style='width: 226px; height: 18px; text-align: center; margin: -2px 0px 0px -6px' name='attr_initialSkills' />
			<div style=' margin: -12px 0px 0px -4px; border: 0px solid black;'>
				<button type="action" name="act_trinket" title="Roll 1d100 for Trinket" style='height: 18px; width: 50px; font-size: 1.1em; margin: 0px 0px 0px 0px; padding: none; border: 0px solid black; color: DarkRed; background: transparent;'>Trinket:</button> 
				<input type='text' style='width: 384px; height: 18px; text-align: center; margin: 0px 0px 0px 0px' name='attr_trinket' />
			</div>
			<button type="action" name="act_patch" title="Roll 1d100 for Patch" style='height: 18px; width: 50px; font-size: 1.1em; margin: -10px 0px 0px -4px; padding: none; border: 0px solid black; color: DarkRed; background: transparent;'>Patch:</button> 
			<input type='text' style='width: 384px; height: 18px; text-align: center; color: black; background: white;' name='attr_patchDecal' />
		</div>
	</div>
	-->
	<div style="height: 59px"></div> <!-- Remove when TKG approved-->
	<!-- Mothership, Player Name --> 
	<div style='display: inline-block; vertical-align: top; width: 400px; height: 450px; z-index: 1; margin: -24px 0px 0px 42px; border: 0px solid black'>
		<div style='display: inline-block; vertical-align: top; width: 400px; height: 136px; margin: 0px 0px 0px 0px; border: 4px solid black; border-radius: 20px; background: transparent'>
			<label data-i18n="mothership 1e"  style="height: 50px; width: 386px; text-align: center; font-family: Monoton; font-size: 32px; font-weight: 400; text-transform: uppercase; border: 0px solid purple; margin: 26px 0px 0px 0px;"></label>
			<div style='display: inline-block; vertical-align: top; height: 30px; width: 386px; margin: -34px 0px 0px 0px; border: 0px solid green;'>
				<label data-i18n="fansheet"  style="height: 30px; width: 386px; text-align: center; color: red; font-family: Rubik Wet Paint; font-size: 22px; font-weight: 600; text-transform: uppercase; border: 0px solid purple; margin: 0px 0px 0px 0px;" title="Do NOT contact Tuesday Knight Games about this sheet &#013; as they have stated that they DO NOT support Roll20 &#013; or any other VTT other than their own"></label>
			</div>
			<label data-i18n="player name" style="display: inline-block; vertical-align: top; height: 14px; width: 100px; text-align: left; font-family: Montserrat; font-size: 12px; font-weight: 600; text-transform: uppercase; background: white; border: 0px solid purple; margin: 6px 0px 0px 12px;"></label>
			<input type='text' name="attr_player" style='width: 272px; height: 44px; text-align: center; font-size: 1.8em; font-weight: bold; border: 0px solid green; border-radius: 0px 0px 20px 0px; background: transparent; margin: -6px 0px 0px 0px;' spellcheck="false" value='' />
		</div>
		<!-- Character, Background, Bio, XP --> 
	<div style='display: inline-block; vertical-align: top; width: 400px; height: 294px; background: black; border: 4px solid black; border-radius: 20px; margin: 10px 0px 0px 0px;'>
		<label data-i18n="personal details"  style="height: 26px; width: 386px; color: white; text-align: center; font-family: Montserrat; font-size: 18px; font-weight: 600; text-transform: uppercase; border: 0px solid purple; padding: 14px 0px 0px 0px;"></label>

		<div style='display: inline-block; vertical-align: top; width: 186px; height: 240px; margin: -4px 0px 0px 0px; border: 0px solid red;'>
			<img name="attr_character_avatar" title="ID Photograph: 170w x 230h pixels" style="width: 170px; height: 228px; border: 0px solid black; background: white; margin: 0px 0px 0px 12px;"> 
		</div>
		<div style='display: inline-block; vertical-align: top; width: 200px; height: 240px; margin: -6px 0px 0px 2px; border: 0px solid yellow;'>
		<label data-i18n="character name" style="display: inline-block; vertical-align: top; height: 14px; width: 200px; text-align: left; font-family: Montserrat; font-size: 12px; font-weight: 600; text-transform: capitalize; color: white; background: transparent; border: 0px solid purple; margin: -2px 0px 0px 2px;"></label>
		<input type='text' name="attr_character_name" style='width: 185px; height: 40px; text-align: center; font-size: 1.8em; font-weight: bold; border: 0px solid red; border-radius: 10px; background: white; margin: -4px 0px 0px 0px;'  />

		<label data-i18n="pronouns" style="display: inline-block; vertical-align: top; height: 14px; width: 200px; text-align: left; font-family: Montserrat; font-size: 12px; font-weight: 600; text-transform: capitalize; color: white; background: transparent; border: 0px solid purple; margin: 2px 0px 0px 2px;"></label>
		<input type='text' name="attr_pronouns"  style='width: 185px; height: 40px; text-align: center; border: 0px solid purple; border-radius: 10px; background: white; margin: 2px 0px 0px 0px; font-size: 1.6em; font-weight: bold;'  spellcheck="false" title='Pronouns' value='' /> 

		<input type='hidden' name="attr_statLessened" title="Android has -10 to a Stat" value='0'/>
		<input type='hidden' name="attr_statIncreased" title="Scientist has +5 to a Stat" value='0'/>

		<label data-i18n="class" style="display: inline-block; vertical-align: top; height: 14px; width: 200px; text-align: left; font-family: Montserrat; font-size: 12px; font-weight: 600; text-transform: capitalize; color: white; background: transparent; border: 0px solid purple; margin: -2px 0px 0px 2px;"></label>
		<input type='text'  name='attr_class' value="" title='Classes: Marine, Android, Scientist, Teamster or Custom' list="class" style="color:Navy; width: 185px; height: 40px; text-align: center; border: 0px solid red; border-radius: 10px; font-size: 1.8em; font-weight: bold; margin: -2px 0px 0px 0px; background: white;" spellcheck="false" />
		<datalist id="class">
			<option class='sheet-summ-skill' type="text" data-i18n="Custom" style="text-transform: capitalize; color:Black"></option>
			<option class='sheet-summ-skill' type="text" data-i18n="Marine" style="text-transform: capitalize; color:SaddleBrown" ></option> 
			<option class='sheet-summ-skill' type="text" data-i18n="Android" style="text-transform: capitalize; color:Crimson"></option> 
			<option class='sheet-summ-skill' type="text" data-i18n="Scientist" style="text-transform: capitalize; color:SkyBlue"></option> 
			<option class='sheet-summ-skill' type="text" data-i18n="Teamster" style="text-transform: capitalize; color:MediumBlue"></option>
		</datalist>

		<label data-i18n="high score" style="display: inline-block; vertical-align: top; height: 14px; width: 200px; text-align: left; font-family: Montserrat; font-size: 12px; font-weight: 600; text-transform: capitalize; color: white; background: transparent; border: 0px solid purple; margin: -2px 0px 0px 2px;"></label>
		<input type='text' name="attr_high_score"style='width: 185px; height: 40px; text-align: center; border: 0px solid purple; border-radius: 10px; background: white; margin: -2px 0px 0px 0px; font-size: 1.6em; font-weight: bold;' title='High Score: number of sessions, perhaps, but also used as trigger guard for Class change, must be zero' value='' /> 
		</div>
	</div>
	</div>
	<!-- Skills -->
	<div style='display: inline-block; vertical-align: top; width: 392px; height: 312px; margin: -24px 0px 0px 8px; border: 4px solid black; border-radius: 20px;'>
		<label data-i18n="skills"  style="height: 30px; width: 386px; text-align: center; font-family: Montserrat; font-size: 22px; font-weight: 600; text-transform: uppercase; border: 0px solid purple; padding: 10px 0px 0px 0px;"></label>
		<input type="text" name="attr_skill1" style='width: 390px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.8em; font-weight: bold;     margin: -20px 0px 0px 2px; background: white;' title='Skill' value=''>		
		<input type='text' name="attr_skill2" style='width: 390px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.8em; font-weight: bold; background: white; margin: 0px 0px 0px 2px;'     title='Skill' value='' /> 
		<input type="text" name="attr_skill3" style='width: 390px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.8em; font-weight: bold;     margin: 0px 0px 0px 2px; background: white;' title='Skill' value='' />		
		<input type='text' name="attr_skill4" style='width: 390px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.8em; font-weight: bold; background: white; margin: 0px 0px 0px 2px;'     title='Skill' value='' /> 
		<input type="text" name="attr_skill5" style='width: 390px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.8em; font-weight: bold;     margin: 0px 0px 0px 2px; background: white;' title='Skill' value='' />		
		<input type='text' name="attr_skill6" style='width: 390px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.8em; font-weight: bold; background: white; margin: 0px 0px 0px 2px;'     title='Skill' value='' /> 
		<input type="text" name="attr_skill7" style='width: 390px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.8em; font-weight: bold;     margin: 0px 0px 0px 2px; background: white;' title='Skill' value='' />		

		<label data-i18n="skill training" style="display: inline-block; vertical-align: top; height: 14px; width: 350px; text-align: left; font-family: Montserrat; font-size: 12px; font-weight: 600; text-transform: uppercase; background: white; border: 0px solid purple; margin: 6px 0px 0px 30px;"></label>
		
		<div style="display: inline-block; vertical-align: top; height: 40px; width: 174px; margin: 8px 0px 0px 16px; border: 0px solid blue">
			<label data-i18n="in progress" style="height: 14px; width: 56px; text-align: left; font-family: Montserrat; font-size: 9px; font-weight: 600; text-transform: capitalize; border: 0px solid purple; margin: 6px 0px 0px 0px;"></label>
			<input type="text" name="attr_skillInProg" style='width: 100px; height: 30px; text-align: center; border: 2px solid black; font-size: 1.5em; font-weight: bold;  margin: 0px 0px 0px -2px; background: transparent;' title='Skill being Trained' value='' >		
		</div>
		<div  style="display: inline-block; vertical-align: top; height: 40px; width: 194px; margin: 8px 0px 0px 0px; border: 0px solid green">
			<label data-i18n="time remaining" style="height: 14px; width: 80px; text-align: left; font-family: Montserrat; font-size: 9px; font-weight: 600; text-transform: capitalize; border: 0px solid purple; margin: 6px 0px 0px 0px;"></label>
			<input type="text" name="attr_skillTime" style='display: inline-block; vertical-align: top; width: 100px; height: 30px; text-align: center; border: 2px solid black; font-size: 1.5em; font-weight: bold;  margin: 0px 0px 0px -2px; background: white;' title='Skill progress' value='' >		
		</div>
	</div>
	<!-- Stats -->
	<div style='display: inline-block; vertical-align: top; width: 406px; height: 154px; background: LightGray; margin: 12px 0px 0px 42px; border: 0px solid LightGray; border-radius: 20px;'>
		<label data-i18n="stats"  style="height: 30px; width: 398px; text-align: center; font-family: Montserrat; font-size: 20px; font-weight: 600; text-transform: uppercase; border: 0px solid purple; padding: 12px 0px 0px 0px;"></label>
		<input class="circular-input" type='text' name='attr_strength'  style='width: 64px; height: 64px; margin: -6px 0px 0px 26px; text-align: center; font-weight: bold; font-size: 3em; border: 4px solid black; background: white' title='Holding airlocks closed, carrying fallen comrades, climbing, pushing, jumping.' value='' />
		<input class="circular-input" type='text' name='attr_speed'     style='width: 64px; height: 64px; margin: -6px 0px 0px 29px; text-align: center; font-weight: bold; font-size: 3em; border: 4px solid black; background: white' title='Getting out of the cargo bay before the blast doors close, acting before someone (or something) else, running away.' value='' />
		<input class="circular-input" type='text' name='attr_intellect' style='width: 64px; height: 64px; margin: -6px 0px 0px 29px; text-align: center; font-weight: bold; font-size: 3em; border: 4px solid black; background: white' title='Recalling your training and experience under duress, thinking through difficult problems, inventing or fixing things.' value='' />
		<input class="circular-input" type='text' name='attr_combat'    style='width: 64px; height: 64px; margin: -6px 0px 0px 29px; text-align: center; font-weight: bold; font-size: 3em; border: 4px solid black; background: white' title='Fighting for your life.' value='' />

		<div class="ms-mainstat__label" style='display: inline-block; vertical-align: top'>
			<button data-i18n="strength" name="roll_strcheck" type="roll" style="width: 96px; height: 18px; border: 0px solid black; color: black; font-family: Montserrat; font-size: 17px; font-weight: 600; text-transform: uppercase; background: transparent !important; margin: 2px 0px 0px 6px;" value="&amp;{template:ms} {{name=strength}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[@{strength}+?{Modifier?|0}]]}}" title="Strength Roll"></button>
		</div>

		<div  style='display: inline-block; vertical-align: top margin: 0px 0px 0px -8px'>
			<button data-i18n="speed"  name="roll_speedcheck" type="roll" style="width: 72px; height: 18px; border: 0px solid black; color: black; font-family: Montserrat; font-size: 17px; font-weight: 600; text-transform: uppercase; background: transparent; margin: 2px 0px 0px 2px;" value="&amp;{template:ms} {{name=speed}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[@{speed}+?{Modifier?|0}]]}}" title="Speed Roll"></button>
		</div>
		<div class="ms-mainstat__label" style='display: inline-block; vertical-align: top; margin: 0px 0px 0px -10px'>
			<button data-i18n="intellect" class="sheet-textButton" name="roll_intcheck" type="roll" style="width: 90px; height: 18px; border: 0px solid black; color: black; font-family: Montserrat; font-size: 17px; font-weight: 600; text-transform: uppercase; background: transparent; margin: 2px 0px 0px 12px;" value="&amp;{template:ms} {{name=intellect}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[@{intellect}+?{Modifier?|0}]]}}" title="Intellect Roll"></button>
		</div>
		<div class="ms-mainstat__label" style='display: inline-block; vertical-align: top; margin: 0px 0px 0px -4px'>
			<button data-i18n="combat" class="sheet-textButton" name="roll_combatcheck" type="roll" style="width: 80px; height: 18px; border: 0px solid black; color: black; font-family: Montserrat; font-size: 17px; font-weight: 600; text-transform: uppercase; background: transparent; margin: 2px 0px 0px 8px;" value="&amp;{template:ms} {{name=combat}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[@{combat}+?{Modifier?|0}]]}}" title="Combat Roll"></button>
		</div>
	</div>
	<!-- Equipment -->
	<div style='display: inline-block; vertical-align: top; height: 486px; width: 396px; margin: -282px 0px 0px 452px; border: 4px solid black; border-radius: 20px;'>
		<label data-i18n="equipment"  style="height: 30px; width: 386px; text-align: center; box-sizing: border-box; font-family: Montserrat; font-size: 22px; font-weight: 600; text-transform: uppercase; border: 0px solid purple; padding: 10px 0px 0px 0px;"></label>
		<input type="text" name="attr_equip1"  style='width: 394px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.2em; font-weight: bold; margin: -8px 0px 0px 2px; background: white;' title='Equipment Slot 1' value='' >		
		<input type='text' name="attr_equip2"  style='width: 394px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 2px; background: white;' title='Equipment Slot 2' value='' /> 
		<input type="text" name="attr_equip3"  style='width: 394px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 2px; background: white;' title='Equipment Slot 3' value='' >		
		<input type='text' name="attr_equip4"  style='width: 394px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 2px; background: white;' title='Equipment Slot 4' value='' /> 
		<input type="text" name="attr_equip5"  style='width: 394px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 2px; background: white;' title='Equipment Slot 5' value='' >		
		<input type='text' name="attr_equip6"  style='width: 394px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 2px; background: white;' title='Equipment Slot 6' value='' /> 
		<input type="text" name="attr_equip7"  style='width: 394px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 2px; background: white;' title='Equipment Slot 7' value='' >		
		<input type="text" name="attr_equip8"  style='width: 394px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 2px; background: white;' title='Equipment Slot 8' value='' >		
		<input type='text' name="attr_equip9"  style='width: 394px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 2px; background: white;' title='Equipment Slot 9' value='' /> 
		<input type="text" name="attr_equip10" style='width: 394px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 2px; background: white;' title='Equipment Slot 10' value='' >		
		<input type='text' name="attr_equip11" style='width: 394px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 2px; background: white;' title='Equipment Slot 11' value='' /> 
		<input type="text" name="attr_equip12" style='width: 394px; height: 30px; text-align: center; border-bottom: 2px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 2px; background: white;' title='Equipment Slot 12' value='' >		

		<div style="display: inline-block; vertical-align: top; height: 80px; width: 174px; margin: 2px 0px 0px 16px; border: 0px solid blue">
			<label data-i18n="armor points" style="display: inline-block; vertical-align: top; height: 14px; width: 120px; text-align: center; font-family: Montserrat; font-size: 12px; font-weight: 600; text-transform: uppercase; background: white; border: 0px solid purple; margin: 2px 0px 0px 28px;"></label>
			<input type="text" name="attr_armor" style='width: 166px; height: 54px; text-align: center; border: 3px solid black; font-size: 2.2em; font-weight: bold; border-radius: 22px; margin: 4px 0px 0px 6px; background: transparent;' title='Armor Points' value='' >		
		</div>
		<div style="display: inline-block; vertical-align: top; height: 80px; width: 174px; margin: 2px 0px 0px 16px; border: 0px solid blue">
			<label data-i18n="credits" style="display: inline-block; vertical-align: top; height: 14px; width: 120px; text-align: center; font-family: Montserrat; font-size: 12px; font-weight: 600; text-transform: uppercase; background: white; border: 0px solid purple; margin: 2px 0px 0px 18px;"></label>
			<input type="text" name="attr_credits"   style='width: 166px; height: 54px; text-align: center; border: 3px solid black; font-size: 2.2em; font-weight: bold; border-radius: 22px; margin: 4px 0px 0px 0px; background: transparent;' title='Credits' value='' >		
		</div>
	</div>
	<!-- Saves -->
	<div style='display: inline-block; vertical-align: top;; width: 406px; height: 150px; background: LightGray; margin: -202px 0px 0px 42px; border: 0px solid gray; border-radius: 20px;'>
		<label data-i18n="saves"  style="height: 30px; width: 398px; text-align: center; font-family: Montserrat; font-size: 20px; font-weight: 600; text-transform: uppercase; border: 0px solid purple; padding: 12px 0px 0px 0px;"></label>
		<input class="circular-input" type='text' name='attr_sanity'  style='width: 64px; height: 64px; margin: -6px 0px 0px 74px; text-align: center; font-weight: bold; font-size: 3em; border: 4px solid black; background: white' title='Rationalize logical inconsistencies in the universe, make sense out of chaos, detect illusions and mimicry, cope with Stress.' value='' />
		<input class="circular-input" type='text' name='attr_fear'    style='width: 64px; height: 64px; margin: -6px 0px 0px 29px; text-align: center; font-weight: bold; font-size: 3em; border: 4px solid black; background: white' title='Maintain a level head while struggling with fear, loneliness, depression, and other emotional surges.' value='' />
		<input class="circular-input" type='text' name='attr_body' style='width: 64px; height: 64px; margin: -6px 0px 0px 29px; text-align: center; font-weight: bold; font-size: 3em; border: 4px solid black; background: white' title='Employ quick reflexes and resist hunger, disease, or organisms that might try and invade your insides.' value='' />
		<button class="sheet-textButton" data-i18n="sanity" name="roll_sancheck"  type="roll" style="width: 78px; height: 18px; color: black; font-family: Montserrat; font-size: 17px; font-weight: 600; text-transform: uppercase; border: 0px solid black; background: transparent; margin: 0px 0px 0px 66px;" value="&amp;{template:ms} {{name=sanity}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[@{sanity}+?{Modifier?|0}]]}}" title="Sanity Roll"></button>
		<button class="sheet-textButton" data-i18n="fear" name="roll_fearcheck" type="roll" style="width: 74px; height: 18px; color: black; font-family: Montserrat; font-size: 17px; font-weight: 600; text-transform: uppercase; border: 0px solid black; background: transparent; margin: 0px 0px 0px 10px;"   value="&amp;{template:ms} {{name=fear}}   {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[@{fear}+?{Modifier?|0}]]}}" title="Fear Roll"></button>
		<button class="sheet-textButton" data-i18n="body" name="roll_bodycheck" type="roll" style="width: 74px; height: 18px; color: black; font-family: Montserrat; font-size: 17px; font-weight: 600; text-transform: uppercase; border: 0px solid black; background: transparent; margin: 0px 0px 0px 14px;"   value="&amp;{template:ms} {{name=body}}   {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[@{body}+?{Modifier?|0}]]}}" title="Body Roll"></button>
	</div>

	<!-- Status Report -->
	<div style='display: inline-block; vertical-align: top; width: 400px; height: 310px; margin: -56px 0px 0px 42px; border: 3px solid black; border-radius: 20px; background: white;'>

		<label data-i18n="status report"  style="height: 30px; width: 398px; text-align: center; color: black; font-family: Montserrat; font-size: 20px; font-weight: 600; text-transform: uppercase; border: 0px solid purple; padding: 12px 0px 0px 0px;"></label>
		<label data-i18n="health" style="display: inline-block; vertical-align: top; height: 14px; width: 60px; text-align: center; font-family: Montserrat; font-size: 12px; font-weight: 600; text-transform: uppercase; background: white; border: 0px solid purple; margin: -6px 0px 0px 50px;"></label>
		<label data-i18n="wounds" style="display: inline-block; vertical-align: top; height: 14px; width: 60px; text-align: center; font-family: Montserrat; font-size: 12px; font-weight: 600; text-transform: uppercase; background: white; border: 0px solid purple; margin: -6px 0px 0px 44px;"></label>
		<label data-i18n="stress" style="display: inline-block; vertical-align: top; height: 14px; width: 60px; text-align: center; font-family: Montserrat; font-size: 12px; font-weight: 600; text-transform: uppercase; background: white; border: 0px solid purple; margin: -6px 0px 0px 44px;"></label>

		<input type='text' name="attr_health"    style='width: 110px; height: 36px; text-align: center;   font-size: 2em; font-weight: bold; border: 3px solid black; border-radius: 22px; background: transparent; margin: -8px 0px 0px 30px; padding-right: 55px' value='' />
		<input type='text' name="attr_healthMax" style='width:  55px; height: 36px; text-align: center; font-size: 2em; font-weight: bold; border: 3px solid black; border-radius: 0px 22px 22px 0px; background: transparent; margin: -8px 0px 0px -60px;'  />
		<input type='text' name="attr_wounds"    style='width: 110px; height: 36px; text-align: center; font-size: 2em; font-weight: bold; border: 3px solid black; border-radius: 22px; background: transparent; margin: -8px 0px 0px 4px; padding-right: 55px' value='0' />
		<input type='text' name="attr_woundsMax" style='width:  55px; height: 36px; text-align: center; font-size: 2em; font-weight: bold; border: 3px solid black; border-radius: 0px 22px 22px 0px; background: transparent; margin: -8px 0px 0px -60px;' value='2'  />
		<input type='text' name="attr_stress"    style='width: 110px; height: 36px; text-align: center;   font-size: 2em; font-weight: bold; border: 3px solid black; border-radius: 22px; background: transparent; margin: -8px 0px 0px 4px; padding-right: 55px' value='2' />
		<input type='text' name="attr_stressMin" style='width:  55px; height: 36px; text-align: center; font-size: 2em; font-weight: bold; border: 3px solid black; border-radius: 0px 22px 22px 0px; background: transparent; margin: -8px 0px 0px -60px;'  />

		<label data-i18n="current" style="display: inline-block; vertical-align: top; height: 10px; width: 36px; text-align: center; font-family: Montserrat; font-size: 8px; font-weight: 600; text-transform: capitalize; background: white; color: gray; border: 0px solid purple; margin: 0px 0px 0px 34px;"></label>
		<label data-i18n="maximum" style="display: inline-block; vertical-align: top; height: 10px; width: 36px; text-align: center; font-family: Montserrat; font-size: 8px; font-weight: 600; text-transform: capitalize; background: white; color: gray; border: 0px solid purple; margin: 0px 0px 0px 4px;"></label>
		<label data-i18n="current" style="display: inline-block; vertical-align: top; height: 10px; width: 36px; text-align: center; font-family: Montserrat; font-size: 8px; font-weight: 600; text-transform: capitalize; background: white; color: gray; border: 0px solid purple; margin: 0px 0px 0px 14px;"></label>
		<label data-i18n="maximum" style="display: inline-block; vertical-align: top; height: 10px; width: 36px; text-align: center; font-family: Montserrat; font-size: 8px; font-weight: 600; text-transform: capitalize; background: white; color: gray; border: 0px solid purple; margin: 0px 0px 0px 2px;"></label>
		<label data-i18n="current" style="display: inline-block; vertical-align: top; height: 10px; width: 36px; text-align: center; font-family: Montserrat; font-size: 8px; font-weight: 600; text-transform: capitalize; background: white; color: gray; border: 0px solid purple; margin: 0px 0px 0px 14px;"></label>
		<label data-i18n="maximum" style="display: inline-block; vertical-align: top; height: 10px; width: 36px; text-align: center; font-family: Montserrat; font-size: 8px; font-weight: 600; text-transform: capitalize; background: white; color: gray; border: 0px solid purple; margin: 0px 0px 0px 2px;"></label>


		<input type='hidden' name="attr_traumaResponse" title="Until location on sheet can be determined"/>

		<!-- Condition -->
		<label data-i18n="conditions"  style="height: 24px; width: 402px; text-align: center; color: black; font-family: Montserrat; font-size: 20px; font-weight: 600; text-transform: uppercase; border: 0px solid purple; padding: 8px 0px 0px 0px;"></label>
		<input type="text" name="attr_condition1"  style='width: 400px; height: 32px; text-align: center; border: 1px solid gray; font-size: 1.2em; font-weight: bold;     margin: -10px 0px 0px 0px; background: white;' title='Condition Slot 1' value='' />		
		<input type='text' name="attr_condition2"  style='width: 400px; height: 32px; text-align: center; border: 1px solid gray; background: white; margin: 0px 0px 0px 0px; font-size: 1.2em; font-weight: bold;'     title='Condition Slot 2' value='' /> 
		<input type="text" name="attr_condition3"  style='width: 400px; height: 32px; text-align: center; border: 1px solid gray; font-size: 1.2em; font-weight: bold;     margin: 0px 0px 0px 0px; background: white;' title='Condition Slot 3' value='' />		
		<input type='text' name="attr_condition4"  style='width: 400px; height: 32px; text-align: center; border: 1px solid gray; background: white; margin: 0px 0px 0px 0px; font-size: 1.2em; font-weight: bold;'     title='Condition Slot 4' value='' /> 
		<input type="text" name="attr_condition5"  style='width: 400px; height: 32px; text-align: center; border: 1px solid gray; border-radius: 0px 0px 22px 22px; font-size: 1.2em; font-weight: bold;  margin: 0px 0px 0px 0px; background: white;' title='Condition Slot 5' value='' />		

	</div>
	<!-- Weapons -->
	<div style='display: inline-block; vertical-align: top; width: 398px; height: 260px; margin: -262px 0px 0px 452px; border: 3px solid black; border-radius: 20px;'>

		<label data-i18n="weapons"  style="height: 26px; width: 398px; text-align: center; color: black; font-family: Montserrat; font-size: 20px; font-weight: 600; text-transform: uppercase; border: 0px solid purple; padding: 12px 0px 0px 0px;"></label>

		<fieldset class='repeating_weapons'>
			<button  type="roll" style="width: 170px; height: 24px; text-align: center; margin: 0px 0px 0px 7px; background: white; border: 1px solid red;" title="Attack Roll" value="&amp;{template:ms} {{name=@{attack_name}}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[@{combat}]]}} {{damage=[[@{attack_damage}]]}}"><span name="attr_attack_name" type="text"></span></button>
			<select name="attr_attack_type" style="width: 90px; height: 30px; text-align: center; display: inline-block; vertical-align: top; border: 1px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px -2px;" >
				<option data-i18n="Ranged"></option>
				<option data-i18n="Melee"></option>
			</select>
			<input  data-i18n-value="damage" name="attr_attack_damage" type="text" title="Weapon Damage" style="width: 84px; height: 30px; text-align: center; display: inline-block; vertical-align: top; border: 1px solid black; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px -2px;"/>
			<label   style="height: 20px; width: 4px; text-align: center; color: LightGray; font-family: Pictos; font-size: 10px; border: 0px solid purple; margin: -4px 0px 0px 4px;">y</label>

			<input class="sheet-ExtendWeapon" type="checkbox" checked name="attr_attack_settings" style="; margin: 0px 0px 0px -12px;" title='More Options' /><span class="sheet-weapon-config"></span>
			<div class="sheet-weapon-config" style='padding: 2px; background: rgb(228, 228, 228); margin: 0px 0px 0px 7px;'>
				<label data-i18n="Weapon" style="width: 55px; height: 24px; text-align: left; text-transform: capitalize; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 0px;"></label>
				<input type="text" name="attr_attack_name" title="Weapon Name" style='width: 170px; height: 24px; text-align: center; display: inline-block; vertical-align: top; border: 1px solid black; font-size: 1.2em; font-weight: bold;' value='' >		
				<label data-i18n="shots" style="width: 42px; height: 24px; text-align: left; text-transform: capitalize; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 10px;"></label>
				<input name="attr_shots" type="text" title="Ammunition" style='width: 45px; height: 24px; text-align: center;'/>
				<label data-i18n="wounds" style="width: 50px; height: 24px; text-align: center; text-transform: capitalize; font-size: 1.2em; font-weight: bold; margin: 0px 0px 0px 0px;"></label>
				<input name="attr_wounds" type="text" title="Weapon Damage Type" style='width: 130px; height: 24px; text-align: center;'/>
				<label data-i18n="range" style="width: 45px; height: 24px; text-align: center; text-transform: capitalize; font-size: 1.2em; font-weight: bold; border: 0px solid green"></label>
				<select name="attr_range" style="width: 100px; height: 24px; text-align: center; display: inline-block; vertical-align: top; font-size: 1.2em; font-weight: bold; padding: 0px 0px 0px 6px; margin: 0px 0px 0px -2px;" >
					<option data-i18n="Adjacent"></option>
					<option data-i18n="Close"></option>
					<option data-i18n="Long"></option>
					<option data-i18n="Extreme"></option>
				</select>
				<label data-i18n="special" style="width: 70px; height: 16px; text-align: left; text-transform: capitalize; font-size: 1.2em; font-weight: bold; margin: -14px 0px 0px 0px; border: 0px solid blue;"></label>
				<textarea name="attr_notes" title="Notes" style='width: 346px; height: 40px;'></textarea>
			</div>
		</fieldset>
	</div>
	
	<!-- Trauma Response -->
	<div style='display: inline-block; vertical-align: top; width: 868px; margin: 0px 0px 0px 4px; border: 0px solid brown;'>
		<label data-i18n="trauma response:" style="width: 154px; height: 30px; text-align: left; text-transform: uppercase; font-size: 1.1em; font-weight: bold;padding: 6px 0px 0px 0px; border: 0px solid blue;"></label>
		<input  type='text' name='attr_traumaResponse'  style='width: 690px; height: 30px; text-align: center; font-weight: bold; font-size: 1.2em; display: inline-block; vertical-align: top; border: 0px solid red; color: white; background: black; border-radius: 2rem;' title='Class based Trauma Response' value='' />
	
<!--	<button type="action" name="act_panic" data-i18n="panic!" style="width: 100px; height: 30px; text-transform: uppercase; border-radius: 2rem; border: 3px solid black; background: red; color: white; margin: 15px 0px 0px 4px; font-size: 1.4em;" title="Panic Check. Both Normal and Advantage/Disadvantage rolled at same time."></button>-->
		<button type="action" name="act_panic" data-i18n="panic!" style="width: 100px; height: 30px; text-transform: uppercase; border-radius: 2rem; border: 3px solid black; background: red; color: white; margin: 0px 0px 0px 4px; font-size: 1.4em;" title="Panic Check"></button>
		<div style="display: inline-block; vertical-align: top;">
			<input style="width: 30px;  height: 30px; text-align: center; font-size: 1.2em; font-weight: bold; border-radius: 2rem; border: 3px solid black;"name="attr_panicRoll1" readonly>
			<input style="width: 690px; height: 30px; text-align: center; font-size: 1.2em; font-weight: bold; border-radius: 4rem; border: 4px solid black;"name="attr_panicEffect1" readonly>
		</div>
		<button type="action" name="act_panic2" data-i18n="panic!!" style="width: 100px; height: 30px; text-transform: uppercase; border-radius: 2rem; border: 3px solid black; background: red; color: white; margin: 2px 0px 0px 4px; font-size: 1.4em;" title="Panic Check requiring Advantage or Disadvantage"></button>
		<div style="display: inline-block; vertical-align: top;margin: -35px 0px 0px 124px; border: 0px solid black;" >
			<input style="width: 30px;  height: 30px; text-align: center; font-size: 1.2em; font-weight: bold; border-radius: 2rem; border: 3px solid black;"name="attr_panicRoll2" readonly>
			<input style="width: 690px; height: 30px; text-align: center; font-size: 1.2em; font-weight: bold; border-radius: 5rem; border: 4px solid black;"name="attr_panicEffect2" readonly>
		</div>
	</div>
	
</div> <!-- end Main (Tab 1) -->
<br>
<!--- Skills (Tab 2) start -->
<!-- <div class="equipment sheet-tab2" style='width: 872px; max-width: 872px; height: 1030px; margin: 2px 0 0 1px; padding: 0px; border: 0px dashed red> -->
<div class="sheet-tab-content sheet-tab2" style='background: white; width: 872px; max-width: 872px; height: 1030px;  margin: 2px 0 0 1px; padding: 0px; border: 0px dashed red'>
<!--- Tab 2 start --> 
	<!--<div style="height:20px; width: 846px: margin: 0px 0px 0px 0px; border: 1px solid purple; background: white"></div>-->
	<!-- <div style="margin: 0px 0px 0px 25px;"> -->
		<input type='hidden' name="attr_skilltotal"  title="Total Skill Points" value='0'/>
		<input type='hidden' name="attr_skilltrained" title="Total Trained Skills" value='0'/>
		<input type='hidden' name="attr_skillexpert" title="Total Expert Skills" value='0'/>
		<input type='hidden' name="attr_skillmaster" title="Total Master Skills" value='0'/>
		<input type='hidden' name="attr_skillpointsunused" title="Skill Points Unused" value='0'/>


		<div style="display: inline-block; vertical-align: top; height: 50px; width: 220px; background: LightGray; margin: 4px 0px 0px 15px; padding: 8px 0px 0px 10px; border: 0px dashed black;">
			<label class="sheet-tooltip" data-i18n="trained skills" data-i18n-title="trained defn" style="height: 20px; width: 200px; text-transform: uppercase; font-family: Montserrat; font-size: 22px; font-weight: 600; border: 0px solid red; margin: 0px 0px 0px 0px;">
				<span class="sheet-tooltip-text">
					You’ve received standard training in this area equivalent to a bachelor's degree or on-the-job training for a couple years.
				</span>
			</label>
			<label data-i18n="(+10 bonus)" style="height: 18px; width:190px; text-transform: uppercase; font-family: Montserrat; font-size: 18px; font-weight: 600; color: Gray;  border: 0px solid blue;"></label>
		</div>
		<div style="display: inline-block; vertical-align: top; height: 50px; width: 220px; background: LightGray; margin: 4px 0px 0px 45px; padding: 8px 0px 0px 10px; border: 0px dashed black;">
			<label class="sheet-tooltip" data-i18n="expert skills" data-i18n-title="expert defn" style="height: 20px; width: 200px; text-transform: uppercase; font-family: Montserrat; font-size: 22px; font-weight: 600; border: 0px solid red; margin: 0px 0px 0px 0px;">
				<span class="sheet-tooltip-text">
					You have the equivalent of a doctorate or many years of experience.
				</span>
			</label>
			<label data-i18n="(+15 bonus)" style="height: 18px; width:190px; text-transform: uppercase; font-family: Montserrat; font-size: 18px; font-weight: 600; color: Gray;  border: 0px solid blue;"></label>
		</div>
		<div style="display: inline-block; vertical-align: top; height: 50px; width: 220px; background: LightGray; margin: 4px 0px 0px 75px; padding: 8px 0px 0px 10px; border: 0px dashed black;">
			<label class="sheet-tooltip" data-i18n="master skills" data-i18n-title="master defn" style="height: 20px; width: 200px; text-transform: uppercase; font-family: Montserrat; font-size: 22px; font-weight: 600; border: 0px solid red; margin: 0px 0px 0px 0px;">
				<span class="sheet-tooltip-text sheet-tooltip-text-left">
					You are one of the luminaries of this field and are aware of cutting edge techniques or highly specialized and niche information.
				</span>
			</label>
			<label data-i18n="(+20 bonus)" style="height: 18px; width:190px; text-transform: uppercase; font-family: Montserrat; font-size: 18px; font-weight: 600; color: Gray;  border: 0px solid blue;"></label>
		</div>



<!--
		<div style="display: inline-block; vertical-align: top; height: 50px; width: 220px; background: LightGray; margin: 4px 0px 0px 15px; padding: 8px 0px 0px 10px; border: 1px dashed black;">
			<label style="height: 20px; width: 200px; text-transform: uppercase; font-family: Montserrat; font-size: 22px; font-weight: 600; border: 1px solid red; margin: 0px 0px 0px 0px;" data-i18n="trained skills">
			</label> 
			<div class="tooltip" >
				<span class="tooltip tooltip-text" data-i18n="trained defn">
					!--You’ve received standard training in this area equivalent to a bachelor's degree or on-the-job training for a couple years.--
				</span>
			</div>

			<label data-i18n="(+10 bonus)" style="height: 18px; width:190px; text-transform: uppercase; font-family: Montserrat; font-size: 18px; font-weight: 600; color: Gray;  border: 0px solid blue;"></label>
		</div>
		<div style="display: inline-block; vertical-align: top; height: 50px; width: 220px; background: LightGray; margin: 4px 0px 0px 45px; padding: 8px 0px 0px 10px; border: 0px dashed black;">
			<label class="sheet-tooltip"  style="height: 20px; width: 200px; text-transform: uppercase; font-family: Montserrat; font-size: 22px; font-weight: 600; border: 0px solid red; margin: 0px 0px 0px 0px;">EXPERT SKILLS
				<span class="sheet-tooltip-text" style="text-transform: none" >
					You have the equivalent of a doctorate or many years of experience.
				</span>
			</label>
			<label data-i18n="(+15 bonus)" style="height: 18px; width:190px; text-transform: uppercase; font-family: Montserrat; font-size: 18px; font-weight: 600; color: Gray;  border: 0px solid blue;"></label>
		</div>
		<div style="display: inline-block; vertical-align: top; height: 50px; width: 220px; background: LightGray; margin: 4px 0px 0px 75px; padding: 8px 0px 0px 10px; border: 0px dashed black;">
			<label class="sheet-tooltip" data-i18n="master skills" style="height: 20px; width: 200px; text-transform: uppercase; font-family: Montserrat; font-size: 22px; font-weight: 600; border: 0px solid red; margin: 0px 0px 0px 0px;">
				<span class="sheet-tooltip-text sheet-tooltip-text-left">
					You are one of the luminaries of this field and are aware of cutting edge techniques or highly specialized and niche information.
				</span>
			</label>
			<label data-i18n="(+20 bonus)" style="height: 18px; width:190px; text-transform: uppercase; font-family: Montserrat; font-size: 18px; font-weight: 600; color: Gray;  border: 0px solid blue;"></label>
		</div>
-->
		<label  style="display: inline-block; vertical-align: top; text-align: left; height: 21px; width:182px;  font-size: 1.2em; font-weight: bold; border-radius: 2rem; border: 3px solid black; background: black; color: white; padding: 2px 0px 0px 6px; margin: 6px 0px 0px 640px;" title="Total skill point cost.&#13;- Trained: cost 1 point&#13;- Expert: cost 2 points&#13;- Master: cost 3 points">SKILL POINTS
		<input type="text" name="attr_skilltotal" style="width: 70px; height: 22px; text-align: center; font-size: 1.4em; font-weight: bold; border-radius: 2rem; border: 0px solid black; background: white; color: black; margin: -1px 0px 0px 0px; font-size: 1.4em;" title="Total Skill Points">
		</label>
<!--
		<label class="sheet-tooltip" style="height: 21px; width:182px; border: 0px solid red; display: inline-block; vertical-align: top; text-align: left; font-size: 1.2em; font-weight: bold; border-radius: 2rem; border: 3px solid black; background: black; color: white; padding: 2px 0px 0px 6px; margin: 25px 0px 0px 630px;">SKILL POINTS
		<input type="text" name="attr_skilltotal" style="width: 70px; height: 22px; text-align: center; font-size: 1.4em; font-weight: bold; border-radius: 2rem; border: 0px solid black; background: white; color: black; margin: -1px 0px 0px 0px; font-size: 1.4em;" title="Total Skill Points">

		<span class="sheet-tooltip-text sheet-tooltip-text-left">
          <ul>
            <li> <strong class="ms-tooltip__label" data-i18n="trained skills"></strong><span>&nbsp</span><span data-i18n="cost 1 point"></span></li>
            <li> <strong class="ms-tooltip__label" data-i18n="expert skills"></strong><span>&nbsp</span><span data-i18n="cost 2 points"></span></li>
            <li> <strong class="ms-tooltip__label" data-i18n="master skills"></strong><span>&nbsp</span><span data-i18n="cost 3 points"></span></li>
          </ul><span data-i18n="To take an Expert or Master skill you must first take one of its prerequisite skills"></span>
		</span>
		</label>
-->
		
	<!-- </div> -->
	<div style='display: inline-block; vertical-align: top; width: 850px; margin: 2px 0px 0px 10px; border: 0px solid orange;'>
		<div style='display: inline-block; vertical-align: top; width: 150px; height: 800px; margin: 6px 0px 0px 5px; border: 0px solid red;'>

			<input class="round" name="attr_linguistics" type="checkbox" title="Linguistics" value='1'/>
			<button data-i18n="linguistics" class="skill-label" style="margin: none" type="roll" value="&amp;{template:ms} {{name=linguistics}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{linguistics}]]+?{Modifier?|0}]]}}" title="The study of languages (alive, dead, and undiscovered)"></button>
			<input class="round" name="attr_zoology" type="checkbox" title="Zoology" style="margin:22px 0px 0px 0px;" value='1'/>
			<button data-i18n="zoology" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=zoology}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{zoology}]]+?{Modifier?|0}]]}}" title="The study of animal life."></button>

			<input class="round" name="attr_botany" type="checkbox" title="Botany" style="margin:74px 0px 0px 0px;" value='1'/>
			<button data-i18n="botany" name="attr_zoology" class="skill-label" style="margin:72px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=botany}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{botany}]]+?{Modifier?|0}]]}}" data-i18n-title="The study of plant life."></button>
			<input class="round" name="attr_geology" type="checkbox" title="Geology" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="geology" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=geology}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{geology}]]+?{Modifier?|0}]]}}" title="The study of the solid features of any terrestrial planet or its satellites."></button>
			<input class="round" name="attr_industrialEquipment" type="checkbox" title="Industrial Equipment" style="margin:22px 0px 0px 0px;" value='1'/>
			<button data-i18n="industrial equipment" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=industrial equipment}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{industrialEquipment}]]+?{Modifier?|0}]]}}" title="The safe and proper use of heavy machinery and tools (exosuits, forklifts, drills, breakers, laser cutters, etc.)."></button>

			<input class="round" name="attr_juryRigging" type="checkbox" title="Jury-Rigging" style="margin:20px 0px 0px 0px;" value='1'/>
			<button data-i18n="jury-rigging" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=jury-rigging}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{juryRigging}]]+?{Modifier?|0}]]}}" title="Makeshift repair, using only the tools and materials at hand."></button>
			<input class="round" name="attr_chemistry" type="checkbox" title="Chemistry" style="margin:20px 0px 0px 0px;" value='1'/>
			<button data-i18n="chemistry" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=chemistry}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{chemistry}]]+?{Modifier?|0}]]}}" title="The study of matter and its chemical elements and compounds."></button>
			<input class="round" name="attr_computers" type="checkbox" title="Computers" style="margin:20px 0px 0px 0px;" value='1'/>
			<button data-i18n="computers" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=computers}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{computers}]]+?{Modifier?|0}]]}}" title="Fluent use of computers and their networks."></button>

			<input class="round" name="attr_zero_g" type="checkbox" title="Zero-G" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="zero_g" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=zero-g}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{zero_g}]]+?{Modifier?|0}]]}}" title="Practice and know-how of working in a vacuum, orientation, vaccsuit operation, etc."></button>
			<input class="round" name="attr_mathematics" type="checkbox" title="Mathematics" style="margin:24px 0px 0px 0px;" value='1'/>
			<button data-i18n="mathematics" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=mathematics}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{mathematics}]]+?{Modifier?|0}]]}}" title="The study of numbers, quantity, and space."></button>
			<input class="round" name="attr_art" type="checkbox" title="Art" style="margin:26px 0px 0px 0px;" value='1'/>
			<button data-i18n="art" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=art}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{art}]]+?{Modifier?|0}]]}}" title="The expression or application of a species’ creative ability and imagination."></button>
			<input class="round" name="attr_archeology" type="checkbox" title="Archeology" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="archeology" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=archeology}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{archeology}]]+?{Modifier?|0}]]}}" title="Ancient cultures and artifacts."></button>
			<input class="round" name="attr_theology" type="checkbox" title="Theology" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="theology" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=theology}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{theology}]]+?{Modifier?|0}]]}}" title="The study of the divine or devotion to a religion."></button>

			<input class="round" name="attr_militaryTraining" type="checkbox" title="Military Training" style="margin:20px 0px 0px 0px;" value='1'/>
			<button data-i18n="military training" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=military training}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{militaryTraining}]]+?{Modifier?|0}]]}}" title="Basic training provided to all military personnel."></button>
			<input class="round" name="attr_rimwise" type="checkbox" title="Rimwise" style="margin:16px 0px 0px 0px;" value='1'/>
			<button data-i18n="rimwise" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=rimwise}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{rimwise}]]+?{Modifier?|0}]]}}" title="Practical knowledge and know-how regarding outer Rim colonies, their customs, and the seedier parts of the galaxy."></button>
			<input class="round" name="attr_athletics" type="checkbox" title="Athletics" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="athletics" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=athletics}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[10*@{athletics}]]+?{Modifier?|0}]]}}" title="Physical fitness, sports, and games."></button>
		</div>
		<div style='display: inline-block; vertical-align: top; width: 150px; height: 800px; margin: 6px 0px 0px 169px; border: 0px solid green;'>

			<input class="round" name="attr_psychology" type="checkbox" title="Psychology" value='1'/>
			<button data-i18n="psychology" class="skill-label" style="margin: none" type="roll" value="&amp;{template:ms} {{name=psychology}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{psychology}]]+?{Modifier?|0}]]}}" title="The study of behavior and the human mind.&#10;PREREQUISITE: Linguistics, Zoology"></button>
			<input class="round" name="attr_pathology" type="checkbox" title="Pathology" style="margin:24px 0px 0px 0px;" value='1'/>
			<button data-i18n="pathology" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=pathology}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{pathology}]]+?{Modifier?|0}]]}}" title="Study of the causes and effects of diseases.&#10;PREREQUISITE: Zoology, Botany"></button>

			<input class="round" name="attr_medicine" type="checkbox" title="Medicine" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="field medicine" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=field medicine}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{medicine}]]+?{Modifier?|0}]]}}" title="Emergency medical care and treatment.&#10;PREREQUISITE: Zoology"></button>
			<input class="round" name="attr_ecology" type="checkbox" title="Ecology" style="margin:24px 0px 0px 0px;" value='1'/>
			<button data-i18n="ecology" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=ecology}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{ecology}]]+?{Modifier?|0}]]}}" title="The study of organisms and how they relate to their environment.&#10;PREREQUISITE: Botany, Geology"></button>
			<input class="round" name="attr_asteroidMining" type="checkbox" title="Asteroid Mining" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="asteroid mining" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=asteroid mining}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{asteroidMining}]]+?{Modifier?|0}]]}}" title="Training in the tools and procedures used for mining asteroids.&#10;PREREQUISITE: Geology, Industrial Equiment"></button>

			<input class="round" name="attr_mechanicalRepair" type="checkbox" title="Mechanical Repair" style="margin:24px 0px 0px 0px;" value='1'/>
			<button data-i18n="mechanical repair" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=mechanical repair}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{mechanicalRepair}]]+?{Modifier?|0}]]}}" title="Fixing broken machines.&#10;PREREQUISITE: Industrial Equiment, Jury-Rigging"></button>
			<input class="round" name="attr_explosives" type="checkbox" title="Explosives" style="margin:21px 0px 0px 0px;" value='1'/>
			<button data-i18n="explosives" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=explosives}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{explosives}]]+?{Modifier?|0}]]}}" title="Design and effective use of explosive devices (bombs, grenades, shells, land mines, etc.).&#10;PREREQUISITE: Jury-Rigging, Chemistry, Military Training"></button>
			<input class="round" name="attr_pharmacology" type="checkbox" title="Pharmacology" style="margin:22px 0px 0px 0px;" value='1'/>
			<button data-i18n="pharmacology" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=pharmacology}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{pharmacology}]]+?{Modifier?|0}]]}}" title="Study of drugs and medication.&#10;PREREQUISITE: Chemistry"></button>

			<input class="round" name="attr_hacking" type="checkbox" title="Hacking" style="margin:20px 0px 0px 0px;" value='1'/>
			<button data-i18n="hacking" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=hacking}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{hacking}]]+?{Modifier?|0}]]}}" title="Unauthorized access to computer systems and networks.&#10;PREREQUISITE: Computers"></button>
			<input class="round" name="attr_piloting" type="checkbox" title="Piloting" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="piloting" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=piloting}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{piloting}]]+?{Modifier?|0}]]}}" title="Operation and control of aircraft, spacecraft, and other vehicles.&#10;PREREQUISITE: Zero-G"></button>
			<input class="round" name="attr_physics" type="checkbox" title="Physics" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="physics" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=physics}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{physics}]]+?{Modifier?|0}]]}}" title="Study of matter, motion, energy, and their effects in space and time.&#10;PREREQUISITE: Mathematics"></button>
			
			<input class="round" name="attr_mysticism" type="checkbox" title="Mysticism" style="margin:24px 0px 0px 0px;" value='1'/>
			<button data-i18n="mysticism" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=mysticism}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{mysticism}]]+?{Modifier?|0}]]}}" title="Spiritual apprehension of hidden knowledge.&#10;PREREQUISITE: Art, Archeology, Theology"></button>
			<input class="round" name="attr_wildernessSurvival" type="checkbox" title="Wilderness Survival" style="margin:64px 0px 0px 0px;" value='1'/>
			<button data-i18n="wilderness survival"  class="skill-label" style="margin: 72px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=wilderness survival}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{wildernessSurvival}]]+?{Modifier?|0}]]}}" title="Applicable know-how regarding the basic necessities of life (food, water, shelter) in a natural environment.&#10;PREREQUISITE: Botany, Military Training"></button>
			<input class="round" name="attr_firearms" type="checkbox" title="Firearms" style="margin:16px 0px 0px 0px;" value='1'/>
			<button data-i18n="firearms" class="skill-label" style="margin:22px 0px 0px 0px;"  type="roll" value="&amp;{template:ms} {{name=firearms}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{firearms}]]+?{Modifier?|0}]]}}" title="Safe and effective use of guns.&#10;PREREQUISITE: Military Training, Rimwise"></button>
			
			<input class="round" name="attr_handToHandCombat" type="checkbox" title="Hand-To-Hand Combat" style="margin:12px 0px 0px 0px;" value='1'/>
			<button data-i18n="hand-to-hand combat" class="skill-label" style="margin:22px 0px 0px 0px;"  type="roll" value="&amp;{template:ms} {{name=hand-to-hand combat}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[15*@{handToHandCombat}]]+?{Modifier?|0}]]}}" title="Melee fighting, brawling, martial arts, etc.&#10;PREREQUISITE: Military Training, Rimwise, Athletics"></button>
		</div>
		<div style='display: inline-block; vertical-align: top; width: 150px; height: 800px; margin: 6px 0px 0px 156px; border: 0px solid blue;'>

			<input class="round" name="attr_sophonology" type="checkbox" title="Sophontology" value='1'/>
			<button data-i18n="sophontology" class="skill-label" style="margin: none;" type="roll" value="&amp;{template:ms} {{name=sophontology}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[20*@{sophonology}]]+?{Modifier?|0}]]}}" title="The study of the behavior and mind of inhuman entities.&#10;PREREQUISITE: Psychology"></button>
			<input class="round" name="attr_exobiology" type="checkbox" title="Exobiology" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="exobiology" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=exobiology}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[20*@{exobiology}]]+?{Modifier?|0}]]}}" title="The study of and search for intelligent alien life.&#10;PREREQUISITE: Pathology"></button>

			<input class="round" name="attr_surgery" type="checkbox" title="Surgery" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="surgery" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=surgery}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[20*@{surgery}]]+?{Modifier?|0}]]}}" title="Manually operate on living or dead biological subjects&#10;PREREQUISITE: Pathology, Field Medicine"></button>
			<input class="round" name="attr_planetology" type="checkbox" title="Planetology" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="planetology" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=planetology}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[20*@{planetology}]]+?{Modifier?|0}]]}}" title="Study of planets and other celestial bodies.&#10;PREREQUISITE: Ecology, Asteroid Mining"></button>
			<input class="round" name="attr_robotics" type="checkbox" title="Robotics" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="robotics" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=robotics}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[20*@{robotics}]]+?{Modifier?|0}]]}}" title="Design, maintenance, and operation of robots, drones, and androids.&#10;PREREQUISITE: Mechanical Repair"></button>

			<input class="round" name="attr_engineering" type="checkbox" title="Engineering" style="margin:24px 0px 0px 0px;" value='1'/>
			<button data-i18n="engineering" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=engineering}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[20*@{engineering}]]+?{Modifier?|0}]]}}" title="The design, building, and use of engines, machines, and structures.&#10;PREREQUISITE: Mechanical Repair"></button>
			<input class="round" name="attr_cybernetics" type="checkbox" title="Cybernetics" style="margin:25px 0px 0px 0px;" value='1'/>
			<button data-i18n="cybernetics" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=cybernetics}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[20*@{cybernetics}]]+?{Modifier?|0}]]}}" title="The physical and neural interfaces between organisms and machines.&#10;PREREQUISITE: Mechanical Repair"></button>
			
			<input class="round" name="attr_artificialIntelligence" type="checkbox" title="Artificial Intelligence" style="margin:63px 0px 0px 0px;" value='1'/>
			<button data-i18n="artificial intelligence" class="skill-label" style="margin:64px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=artificial intelligence}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[20*@{artificialIntelligence}]]+?{Modifier?|0}]]}}" title="The study of intelligence as demonstrated by machines.&#10;PREREQUISITE: Hacking"></button>

			<input class="round" name="attr_hyperspace" type="checkbox" title="Hyperspace" style="margin:68px 0px 0px 0px;" value='1'/>
			<button data-i18n="hyperspace" class="skill-label" style="margin:68px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=hyperspace}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[20*@{hyperspace}]]+?{Modifier?|0}]]}}" title="Faster-than-light travel.&#10;PREREQUISITE: Piloting, Physics, Mysticism"></button>
			<input class="round" name="attr_xenoesotericism" type="checkbox" title="Xenoesotericism" style="margin:26px 0px 0px 0px;" value='1'/>
			<button data-i18n="xenoesotericism" class="skill-label" style="margin:22px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=xenoesotericism}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[20*@{xenoesotericism}]]+?{Modifier?|0}]]}}" title="Obscure beliefs, mysticism, and religion regarding non-human entities.&#10;PREREQUISITE: Mysticism"></button>

			<input class="round" name="attr_command" type="checkbox" title="Command" style="margin:122px 0px 0px 0px;" value='1'/>
			<button data-i18n="command" class="skill-label" style="margin:122px 0px 0px 0px;" type="roll" value="&amp;{template:ms} {{name=command}} {{character_name=@{character_name}}} {{roll=[[1d100-1cs1cf99]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100-1cs1cf99}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+[[20*@{command}]]+?{Modifier?|0}]]}}" title="Leadership, management, and authority.&#10;PREREQUISITE: Piloting, Firearms"></button>
		</div>
		<!--
		<div style='display: inline-block; vertical-align: top; width: 850px; height: 180px; background: white; margin: 10px 0px 0px 10px; border: 1px solid blue;'>
		</div>
		-->
	</div>
</div> <!-- end Tab 2 -->

<!--- Notes (Tab 3) start -->
<div class="sheet-tab-content sheet-tab3" style='background: white; background-image:none; width: 871px; max-width: 871px; height: 800px; margin: 2px 0 0 1px; padding: 0px'>
	<!-- eventually hope to find the two image problem's solution -->
	<div style='background: white; width: 851px; max-width: 861px; height: 1190px; margin: 3px 0px 0px 0px; padding: 0px'> 

		<div>
			<label  data-i18n="mission log" style="height: 30px; width: 860px; background: white; text-align: left; text-transform: uppercase; font-size: 1.8em; font-weight: bold; border: 1px solid black; padding: 8px 0px 0px 6px; margin:0px 0px 0px 0px;"></label> 
			<textarea style="height: 270px; min-height: 200px; width: 851px; min-width: 850px; minlength: 80; maxlength: 160; text-align: left; font-size: 1.4em; font-weight: bold; padding: 0px 0px 0px 6px; margin:-3px 0px 0px 0px;" name="attr_missionLog"></textarea>
		</div>

		<div>
			<label data-i18n="personal log" style="height: 30px; width: 860px; background: white; text-align: left; text-transform: uppercase; font-size: 1.8em; font-weight: bold; border: 1px solid black; padding: 8px 0px 0px 6px; margin:-6px 0px 0px 0px;"> Personal Log</label> 
			<textarea style="height: 270px; min-height: 200px; width: 851px; min-width: 850px; minlength: 80; maxlength: 160; text-align: left; font-size: 1.4em; font-weight: bold; padding: 0px 0px 0px 6px; margin:-4px 0px 0px 0px;" name="attr_personalLog"></textarea>
		</div>

		<div>
			<label data-i18n="personal diary (encrypted)" style="height: 30px; width: 860px; background: white; text-align: left; text-transform: uppercase; font-size: 1.8em; font-weight: bold; border: 1px solid black; padding: 8px 0px 0px 6px; margin:-6px 0px 0px 0px;"> Personal Diary (encrypted)</label> 
			<textarea style="height: 480px; min-height: 400px; width: 851px; min-width: 850px; minlength: 80; maxlength: 160; text-align: left; font-size: 1.4em; font-weight: bold; padding: 0px 0px 0px 6px; margin:-4px 0px 0px 0px;" name="attr_personalDiary"></textarea>
		</div>
	</div>
</div> <!-- end Tab 3 -->
<!--- Fight (Tab 4) start -->
<div class="sheet-tab-content sheet-tab4" style='background-color: white; background-image:none; width: 841px; max-width: 841px; height: 1180px; margin: 2px 0 0 1px; padding: 0px; background: none;'>
<!--- Tab 4 start -->
</div><!-- end Tab 4 -->


<!-- Roll Templates -->
<rolltemplate class="sheet-rolltemplate-ms">
  <div class="sheet-ms-container">
    {{#name}}
		<h1>{{name}} </h1>
    {{/name}}
    {{#character_name}}
		<h2  style="color: black">{{character_name}} </h2>
	{{/character_name}}
    {{#roll}}
		<div class="sheet-ms-roll">
			<div class="sheet-ms-roll__roll">{{roll}}</div> {{#rollGreater() roll2 0}}
			<div class="sheet-ms-roll__roll2">{{roll2}}</div> {{/rollGreater() roll2 0}}
		</div>
		{{#target}}
			<div class="sheet-ms-target">
			<div class="sheet-ms-target__label" data-i18n="target:"></div>
			<div class="sheet-ms-target__value">{{target}}</div>
			</div>
		{{/target}}
		{{#rollTotal() roll2 0}}
			{{#rollLess() roll target}}
				<div class="sheet-ms-target">
				<div class="sheet-ms-target__label" data-i18n="result:"></div>
				<div class="sheet-ms-target__value">Pass</div>
				</div>
			{{/rollLess() roll target}}
			{{#^rollLess() roll target}}
				<div class="sheet-ms-target">
				<div class="sheet-ms-target__label" data-i18n="result:"></div>
				<div class="sheet-ms-target__value">Fail</div>
				</div>
				<h3  style="color: black">*Gain 1 Stress*</h3>
			{{/^rollLess() roll target}}
		{{/rollTotal() roll2 0}}
    {{/roll}}
    {{#damage}}
    <div class="sheet-ms-damage">
      <div class="sheet-ms-damage__label" data-i18n="damage:"></div>
      <div class="sheet-ms-damage__value">{{damage}}</div>
    </div>{{/damage}}

	{{#notes}}
	<h2 style="border-top: 2px solid gray; color: black"> Effect 1</h2>
    <div class="sheet-ms-damage__label">{{notes}}</div>{{/notes}}
	{{#notes2}}
	<h2 style="color: black">Effect 2</h2>
	<div class="sheet-ms-damage__label">{{notes2}}</div>{{/notes2}}
<!--
	{{#rollTotal() panic1flag 1}}
	<h2 style="border-top: 2px solid gray; color: black"> Effect 1</h2>
    <div class="sheet-ms-damage__label">{{notes}}</div>{{/rollTotal() panic1flag 1}}
	{{#rollTotal() panic2flag 1}}
	<h2 style="color: black">Effect 2</h2>
	<div class="sheet-ms-damage__label">{{notes2}}</div>{{/rollTotal() panic2flag 1}}
-->
  </div>
</rolltemplate>
<!--
<rolltemplate class="sheet-rolltemplate-panic">
  <div class="sheet-ms-container">{{#name}}
    <h1>{{name}} </h1>{{/name}}
    {{#character_name}}
    <h2>{{character_name}} </h2>{{/character_name}}
    {{#roll}}
    <div class="sheet-ms-roll">
      <div class="sheet-ms-roll__roll">{{computed::roll}}</div>
      <div class="sheet-ms-roll__roll2">{{computed::roll2}}</div>
    </div>{{#target}}
    <div class="sheet-ms-target">
      <div class="sheet-ms-target__label" data-i18n="target:"></div>
      <div class="sheet-ms-target__value">{{target}}</div>
    </div>{{/target}}
    {{/roll}}
    {{#damage}}
    <div class="sheet-ms-damage">
      <div class="sheet-ms-damage__label" data-i18n="damage:"></div>
      <div class="sheet-ms-damage__value">{{damage}}</div>
    </div>{{/damage}}
    {{#notes}}
    <div class="sheet-ms-notes">{{[[notes]]}}</div>{{/notes}}
	{{#notes2}}
    <div class="sheet-ms-notes">{{[[notes2]]}}</div>{{/notes2}}
  </div>
</rolltemplate>	
-->

<!-- SHEET WORKERS -->
<script type="text/worker">

// FUNCTIONS

const advantageToggle = (newValue) => {

}

const toggleSkill = (source, newValue) => {

    getAttrs(["sheet_skill_toggles"], values => {

        const existingValue = values["sheet_skill_toggles"].trim();
        const valueList = existingValue.split(" ")
        const unlocks = skillList[source].unlocks || [];

        let updateAttr = "";
    
        if (newValue === "0") {

            unlocks.forEach(item => valueList.splice(valueList.indexOf(item), 1));

            updateAttr = valueList.join(" ");

        } else if (newValue === "on") {
    
            updateAttr = existingValue + " ";
    
            if (unlocks === []) return;
            
            unlocks.forEach(unlock => updateAttr += `${unlock} `);

        }
            
        setAttrs({sheet_skill_toggles:updateAttr}); 
    });

}

const addItem = (new_value, previous_value, source, source_type) => {
    if (new_value === previous_value || new_value !== "Weapon" || source_type !== "player") return;

    console.log(source_type)

    const repeating_length = "repeating_equipment_".length;
    const repeating_id_length = 20;
    const repeating_id = source.substring(repeating_length, repeating_length + repeating_id_length);
    const repeating_equipment_prefix = `repeating_equipment_${repeating_id}`;
    const new_repeating_id = generateRowID();
    const repeating_attacks_prefix = `repeating_attacks_${new_repeating_id}`;

    const requestAttrs = [`${repeating_equipment_prefix}_equipment_name`,`${repeating_equipment_prefix}_equipment_type`];

    getAttrs(requestAttrs, values => {
        const updateAttrs = {};

        updateAttrs[`${repeating_attacks_prefix}_attack_name`] = values[`${repeating_equipment_prefix}_equipment_name`];
        updateAttrs[`${repeating_attacks_prefix}_attack_linkedid`] = repeating_id;

        setAttrs(updateAttrs);

    });
}

    
const parseJSON = (string) => {
    try {
        return JSON.parse(string);
    } catch {
        return false;
    }
};

const capitalizeString = (string) => {
    string = string.replace(/_/g, " ");

    [" ",":","(","/","-"].forEach(seperator => {
        string = string.split(seperator).map(
            word => `${word.slice(0,1).toUpperCase()}${word.slice(1,word.length)}`
        ).join(seperator);
    });

    return string;
}

const dropHandler = (values) => {
    const name = values.drop_name;
    const data = JSON.parse(values.drop_data) || {};
    const category = values.drop_category;

    console.log(data);

    if (name === ""|| typeof data === "" || typeof category === "") return console.warn("No drag and drop data found.");

    switch (category) {
        case "Classes": 
            handleClassDrop(name, data);
            break;
        case "Items":
            handleItemDrop(name, data);
            break;
        case "Mercenaries": 
            handleMercenaryDrop(name, data);
            break;
        case "Ships":
            handleShipDrop(name, data);
            break;
        case "Ship Weapons": 
            handleShipWeaponDrop(name, data);
            break;
        default:
            console.warn("Could not distinguish category from drop.")
            break;
    }

}

const handleItemDrop = (name, data) => {
    const id = generateRowID();        
    const address = `repeating_equipment_${id}_equipment`;

    let updateAttrs = {};

    updateAttrs[`${address}_name`] = name;
    updateAttrs[`${address}_notes`] = data.Description || "";

    if (data.Damage) {
        const attack_id = generateRowID();
        const attack_address = `repeating_attacks_${id}_attack`

        updateAttrs[`${address}_type`] = "Weapon";
        updateAttrs[`${address}_linkedid`] = attack_id;
        
        updateAttrs[`${attack_address}_linkedid`] = id;
        updateAttrs[`${attack_address}_name`] = name;
        updateAttrs[`${attack_address}_damage`] = data.Damage;
        updateAttrs[`${attack_address}_critical_damage`] = data["Critical Damage"] || "";
        updateAttrs[`${attack_address}_critical_effect`] = data["Critical Effect"] || "-";

        let combined_string = (data.Description) ? `${data.Description} ` : ``;
        combined_string += (data.Special) ? `${data.Special} ` : ``;

        updateAttrs[`${attack_address}_notes`] = combined_string;

        const range = JSON.parse(data.Range) || {};

        if (range && range.CQC !== "Yes") {
            updateAttrs[`${attack_address}_type`] = "Ranged";

            updateAttrs[`${attack_address}_shots`] = data.Shots;
            updateAttrs[`${attack_address}_ammunition`] = data.Ammunition;

            updateAttrs[`${attack_address}_range_s`] = range.Short;
            updateAttrs[`${attack_address}_range_m`] = range.Medium || "-";
            updateAttrs[`${attack_address}_range_l`] = range.Long || "-";

        } else {
            updateAttrs[`${attack_address}_type`] = "Melee";      
        }
    } else if (data["Armor Save"]) {
        updateAttrs[`${address}_type`] = "Armor";
        updateAttrs[`${address}_armor_bonus`] = data["Armor Save"];
    } else {
        updateAttrs[`${address}_type`] = "Gear";
    }

    setAttrs(updateAttrs);

}

const handleClassDrop = (name, data) => {
    setAttrs({class:name});
    if (name) toggleClass(name,"","player");
}

const handleMercenaryDrop = () => {
    console.warn("Mercenary drop not yet supported.");
}

const handleMonsterDrop = () => {
    console.warn("Monster drop not yet supported.");
}

const handleShipDrop = (name, data) => {
    const modules_raw = data["Required Modules"].split(",").map(item => item.trim());
    const modules_parsed = {};
    const updateAttrs = {};

    modules_raw.forEach(module => modules_parsed[module.toLowerCase().replace(/[^a-z ]/g,"").trim().replace(/ /g,"_")] = parseInt(module.replace(/[^0-9]/g,"")) || 0);

    console.log(modules_parsed);

    updateAttrs["ship_class"] = name;
    updateAttrs["ship_passengers"] = ((modules_parsed.barracks || 0) * 12) + modules_parsed.living_quarters || 1;
    updateAttrs["life_support"] = modules_parsed.life_support || 1;
    updateAttrs["ship_officers"] = modules_parsed.living_quarters || 0;
    updateAttrs["ship_armor_modules"] = modules_parsed.armor || 0;
    updateAttrs["ship_jumpdrive_modules"] = modules_parsed.jump_drive || 0;
    updateAttrs["ship_computer_modules"] = modules_parsed.computer || 0;
    updateAttrs["ship_galley"] = modules_parsed.galley || "";
    updateAttrs["ship_weapon_mounts"] = modules_parsed.weapon_mount || 0;
    updateAttrs["ship_medbays"] = modules_parsed.medical_bays || 0;
    updateAttrs["ship_cyropods"] = (modules_parsed.cryochamber * 4) || 0;
    updateAttrs["ship_living_quarters"] = modules_parsed.living_quarters || 0;
    updateAttrs["ship_barracks"] = modules_parsed.barracks || 0;
    updateAttrs["ship_cargoholds"] = modules_parsed.cargo_hold || 0;
    updateAttrs["ship_sciencelabs"] = modules_parsed.science_lab || 0;
    updateAttrs["ship_thrusters"] = modules_parsed.thrusters || 0;
    updateAttrs["ship_engine"] = modules_parsed.engine || 0;
    
    console.log(updateAttrs);
    setAttrs(updateAttrs);    
}

const handleShipWeaponDrop = () => {

}
const skillList = {
    "linguistics":{
        unlocks: ["sophontology"]
    },
    "biology":{
        unlocks: ["genetics","psychology"]
    },
    "first_aid": {
        unlocks: ["pathology"]
    },
    "hydroponics": {
        unlocks: ["botany"]
    },
    "geology": {
        unlocks: ["planetology","asteroid_mining"]
    },
    "zero-g": {
        unlocks: ["asteroid_mining"]
    },
    "scavenging": {
        unlocks: ["asteroid_mining","jury_rigging"]
    },
    "heavy_machinery": {
        unlocks: ["asteroid_mining","engineering"]
    },
    "computers": {
        unlocks: ["engineering","hacking"]
    },
    "mechanical_repair": {
        unlocks: ["engineering", "jury_rigging", "vehicle_specialization"]
    },
    "driving": {
        unlocks: ["vehicle_specialization"]
    },
    "piloting": {
        unlocks: ["vehicle_specialization","astrogation"]
    },
    "mathematics": {
        unlocks: ["physics"]
    },
    "art": {
        unlocks: ["mysticism"]
    },
    "archaeology": {
        unlocks: ["mysticism"]
    },
    "theology": {
        unlocks: ["mysticism"]
    },
    "military_training": {
        unlocks: ["tactics","gunnery","firearms","explosives","close-quarters_combat"]
    },
    "rimwise": {
        unlocks: ["firearms","close-quarters_combat"]
    },
    "athletics": {
        unlocks: ["close-quarters_combat"]
    },
    "chemistry": {
        unlocks: ["explosives"]
    },
    "psychology": {
        unlocks: ["sophontology"]
    },
    "genetics": {
        unlocks: ["xenobiology"]
    },
    "pathology": {
        unlocks: ["xenobiology","surgery"]
    },
    "botany": {
        unlocks: ["xenobiology"]
    },
    "planetology": {
        unlocks: []
    },
    "asteroid_mining" : {
        unlocks: []
    },
    "jury_rigging": {
        unlocks: ["cybernetics"]
    },
    "engineering": {
        unlocks: ["cybernetics","robotics","artificial_intelligence"]
    },
    "hacking": {
        unlocks: ["artificial_intelligence"]
    },
    "vehicle_specialization": {
        unlocks: ["command"]
    },
    "astrogation": {
        unlocks: ["hyperspace"]
    },
    "physics": {
        unlocks: ["hyperspace"]
    },
    "mysticism": {
        unlocks: ["xenoesotericism", "hyperspace"]
    },
    "tactics": {
        unlocks: ["command"]
    },
    "gunnery": {
        unlocks: ["weapon_specialization"]
    },
    "firearms": {
        unlocks: ["weapon_specialization"]
    },
    "close-quarters_combat": {
        unlocks: ["weapon_specialization"]
    },
    "explosives": {
        unlocks: ["weapon_specialization"]
    },
    "sophontology": {},
    "xenobiology": {},
    "surgery": {},
    "cybernetics": {},
    "robotics": {},
    "artificial_intelligence": {},
    "command": {},
    "hyperspace": {},
    "xenoesotericism": {},
    "weapon_specialization": {}
};
// EVENT HANDLERS
const skillArray = Object.keys(skillList);
skillArray.forEach(skill => on(`change:${skill}`, eventInfo => toggleSkill(skill, eventInfo.newValue)));

on(`change:repeating_equipment:equipment_type`, eventInfo => addItem(eventInfo.newValue, eventInfo.previousValue, eventInfo.sourceAttribute, eventInfo.sourceType));


on("change:drop_name", (eventInfo) => {
    getAttrs(["drop_name", "drop_content", "drop_data", "drop_category"], (values) => {
        dropHandler(values);
    });
});


/* Global variable to represent Tuesday Knight Games' permission */
let TKGApproved = 0;

	on('sheet:opened',function(){

		getAttrs(["setupDone"], function(pvalue) {
			console.log("hello there");

			let SetupDone=parseInt(pvalue.setupDone);
			console.log("setupdone: "+SetupDone );
			console.log("TKGApproved: "+TKGApproved );

 			if (SetupDone==0){
				console.log("do setup");
				setAttrs({setupDone:1});
			}

		});
	})

		function incTalent(section,skill){
		 getSectionIDs(section, function(idArray) {
			var found = false;
			if (idArray.length > 0) {
				var fields = [];
				_.each(idArray, function(currentID) {
					fields.push(section+"_" + currentID + "_skill");
				});
				getAttrs(fields, function(values) {
					_.each(idArray, function(currentID, i) {
						var curSkill = values[section+"_" + idArray[i] + "_skill"];
						if (curSkill === skill){
							found = true;
						}
					});
					if (!found) {
						//console.log(skill+""+section+" add !!!!!!!!!!!");
						addTalent(section,skill);
					}
				});
			}
			else{
				addTalent(section,skill);
			}
		});
	}


		function incCarried(section,item){
		 getSectionIDs(section, function(idArray) {
			var found = false;
			if (idArray.length > 0) {
				var fields = [];
				_.each(idArray, function(currentID) {
					fields.push(section+"_" + currentID + "_carried");
				});
				getAttrs(fields, function(values) {
					_.each(idArray, function(currentID, i) {
						var curItem = values[section+"_" + idArray[i] + "_carried"];
						if (curItem === carried){
							found = true;
						}
					});
					if (!found) {
						//console.log(item+""+section+" add !!!!!!!!!!!");
						addCarried(section,item);
					}
				});
			}
			else{
				addCarried(section,item);
			}
		});
	}
	
	
		function incSkill(section,skill,value){
		 getSectionIDs(section, function(idArray) {
			var found = false;
			if (idArray.length > 0) {
				var fields = [];
				_.each(idArray, function(currentID) {
					fields.push(section+"_" + currentID + "_skill");
					fields.push(section+"_" + currentID + "_skillValue");
				});
				getAttrs(fields, function(values) {
					_.each(idArray, function(currentID, i) {
						var curSkill = values[section+"_" + idArray[i] + "_skill"];
						if (curSkill === skill){
							found = true;
						}
					});
					if (!found) {
						//console.log(skill+""+section+" add !!!!!!!!!!!");
						addSkill(section,skill,value);
					}
				});
			}
			else{
				addSkill(section,skill,value);
			}

		});
	}


	function addTalent(section,talent){
			var id=getId();
			var setObj = {};
			setObj[section+"_"+id+'_skill']=talent;
			//console.log(" addTalent section " + section + " skill: " + talent);
			setAttrs(setObj);
	}


	function addCarried(section,carried){
			var id=getId();
			var setObj = {};
			setObj[section+"_"+id+'_carried']=carried;
			//console.log(" addCarried section " + section + " carried: " + carried);
			setAttrs(setObj);
	}


	function addSkill(section,skill,value){
			var id=getId();
			var setObj = {};
			setObj[section+"_"+id+'_skill']=skill;
			setAttrs(setObj);
			setObj[section+"_"+id+'_skillValue']=value;
			//console.log("!!!!!!!!! skill value: "+value);
			setAttrs(setObj);
	}
	
	function addWeapon(section,name,range,damage,ammo){
			var id=getId();
			var setObj = {};
			setObj[section+"_"+id+'_attack_name']=name;
			setAttrs(setObj);
			setObj[section+"_"+id+'_attack_type']=range;
			setAttrs(setObj);
			setObj[section+"_"+id+'_attack_damage']=damage;
			setAttrs(setObj);
			setObj[section+"_"+id+'_shots']=ammo;
			setAttrs(setObj);
			console.log("  addWeapon name: "+name+" range: " + range + " damage: " + damage +  " ammo: " + ammo);
	}

	function getId(){
		const sattrs = {};
		const createdIDs = [];
		var retId = 0;
		if (createdIDs.length==0){
			retId = generateRowID();
			createdIDs.push(retId);
		}
		var checkit = true;
		  while (checkit==true) {
			let newID = generateRowID();
			//console.log("Newid "+newID);
			if (!createdIDs.includes(newID)) {
			  newrowid = newID;
			  //console.log("newrowid "+newID);
			  createdIDs.push(newrowid);
			  checkit=false;
			}
		  }
			  retId = newrowid;

		return retId;
	}
	
	function clearSection(section){
		getSectionIDs(section, function(idarray) {
			for(var i=0; i < idarray.length; i++) {
				removeRepeatingRow(section + "_" + idarray[i]);
			}
		});
	}
	

on('clicked:allAttributes',  function() {
// This routine is a quick way for GMs to roll NPCs
	
	getAttrs(['strength','speed','intellect','combat','sanity','fear', 'body','totalPoints'], function (values) {
		let Strength = parseInt(values.strength) || 0;
		let Speed = parseInt(values.speed) || 0;
		let Intellect = parseInt(values.intellect) || 0;
		let Combat = parseInt(values.combat) || 0;
		let Sanity = parseInt(values.sanity) || 0;
		let Fear = parseInt(values.fear) || 0;
		let Body = parseInt(values.body) || 0;
		let TotalPoints = parseInt(values.totalPoints) || 0;
		let Health =  Math.floor((Math.random() * 10) + 1) + 10;
		let Credits = Math.floor((Math.random() * 10) + 1) + Math.floor((Math.random() * 10) + 1) + 10;		

		
		if (TotalPoints > 0) {
			console.log(" Already rolled Stats and Saves, total = " + TotalPoints + " and should end, but player is always right - rerolling" );
		} 
		
		const StatNames = ["Strength", "Speed", "Intellect", "Combat" ];
		const StatValues = ["0", "0", "0", "0" ];
		
		for (let i = 0; i < StatNames.length; i++) {
			let value = Math.floor((Math.random() * 10) + 1) + Math.floor((Math.random() * 10) + 1) + 25;
			StatValues[i] = String(value);
			console.log("  " + StatNames[i] + " = " + StatValues[i]);
		};	
		
		const SaveNames = ["Sanity", "Fear", "Body" ];
		const SaveValues = ["0", "0", "0" ];
		
		for (let i = 0; i < SaveNames.length; i++) {
			let value = Math.floor((Math.random() * 10) + 1) + Math.floor((Math.random() * 10) + 1) + 10;
			SaveValues[i] = String(value);
			console.log("  " + SaveNames[i] + " = " + SaveValues[i]);
		};	

		let total = Strength + Speed + Intellect + Combat + Sanity + Fear + Body  ;
		console.log(" total = " + total );


        setAttrs({
			strength : String(StatValues[0]),  
			speed : String(StatValues[1]),  
			intellect : String(StatValues[2]),  
			combat : String(StatValues[3]),  
			sanity : String(SaveValues[0]),
			fear: String(SaveValues[1]),
			body: String(SaveValues[2]),
			healthMax: String(Health),
			health: String(Health),
			credits: String(Credits),
			totalPoints : total			
         });
	});
});


on("clicked:trinket", function() {
	getAttrs(['trinket'], function (values) {
		const TrinketTable = [
					"Manual: PANIC: Harbinger of Catastrophe",
					"Pendant: Shell Fragments Suspended in Plastic",
					"Coffee Cup, Chipped, reads: HAPPINESS IS MANDATORY",
					"Antique Company Scrip (Asteroid Mine)",
					"Pamphlet: Zen and the Art of Cargo Arrangement",
					"Manual: Moonshining With Gun Oil & Fuel",
					"Manual: SURVIVAL: Eat Soup With a Knife",
					"Pair of Shot Glasses (Spent Shotgun Shells)",
					"Miniature Chess Set, Bone, Pieces Missing",
					"Desiccated Husk Doll",
					"Key (Childhood Home)",
					"Gyroscope, Bent, Tin",
					"Pressed Alien Flower (common)",
					"Dog Tags (Heirloom)",
					"Faded Green Poker Chip",
					"Necklace of Shell Casings",
					"Token: “Is Your Morale Improving?”",
					"Ukulele",
					"Corroded Android Logic Core",
					"Pamphlet: The Relic of Flesh",
					"Spray Paint",
					"Pamphlet: Signs of Parasitical Infection",
					"Pamphlet: The Indifferent Stars",
					"Wanted Poster, Weathered",
					"Manual: Treat Your Rifle Like A Lady",
					"Calendar: Military Battles",
					"Locket, Hair Braid",
					"Bone Knife",
					"Manual: Rich Captain, Poor Captain",
					"Sculpture of a Rat (Gold)",
					"Calendar: Alien Pin-Up Art",
					"Campaign Poster (Home Planet)",
					"Blanket, Fire Retardant",
					"Rejected Application (Colony Ship)",
					"Preserved Insectile Aberration",
					"Hooded Parka, Fleece-Lined",
					"Holographic Serpentine Dancer",
					"Titanium Toothpick",
					"BB Gun",
					"Snake Whiskey",
					"Gloves, Leather (Xenomorph Hide)",
					"Flint Hatchet",
					"Medical Container, Purple Powder",
					"Smut (Seditious): The Captain, Ordered",
					"Pendant: Two Astronauts form a Skull",
					"Pills: Male Enhancement, Shoddy",
					"Towel, Slightly Frayed",
					"Rubik's Cube",
					"Casino Playing Cards",
					"Brass Knuckles",
					"Stress Ball, reads: Zero Stress in Zero G",
					"Lagomorph Foot",
					"Fuzzy Handcuffs",
					"Sputnik Pin",
					"Moonstone Ring",
					"Journal of Grudges",
					"Ushanka",
					"Manual: Mining Safety and You",
					"Stylized Cigarette Case",
					"Trucker Cap, Mesh, Grey Alien Logo",
					"Pamphlet: Against Human Simulacra",
					"Ball of Assorted Gauge Wire",
					"Menthol Balm",
					"Animal Skull, 3 Eyes, Curled Horns",
					"Spanner",
					"Pith Helmet",
					"Bartender’s Certification (Expired)",
					"Switchblade, Ornamental",
					"10m x 10m Tarp",
					"Bunraku Puppet",
					"Powdered Xenomorph Horn",
					"I Ching, Missing Sticks",
					"Prospecting Mug, Dented",
					"Bonsai Tree, Potted",
					"Kukri",
					"Eerie Mask",
					"Golf Club (Putter)",
					"Trench Shovel",
					"Ultrablack Marble",
					"Trilobite Fossil",
					"Shiv, Sharpened Butter Knife",
					"Ivory Dice",
					"Pamphlet: A Lover In Every Port",
					"Taxidermied Cat",
					"Tarot Cards, Worn, Pyrite Gilded Edges",
					"Patched Overalls, Personalized",
					"Pamphlet: Interpreting Sheep Dreams",
					"Bag of Assorted Teeth",
					"Fleshy Thing Sealed in a Murky Jar",
					"Faded Photograph, A Windswept Heath",
					"Ashes (A Relative)",
					"Spiked Bracelet",
					"Opera Glasses",
					"DNR Beacon Necklace",
					"Harmonica",
					"Pamphlet: Android Overlords",
					"Cigarettes (GrinninSkull)",
					"Pictorial Pornography, Dog-eared, Well-thumbed",
					"Interstellar Compass,",
					"Pills: Areca Nut Always Points to Homeworld"	
					];


		let Trinket = values.trinket;
		let Roll = Math.floor(Math.random() * 100);
		let NewTrinket = TrinketTable[Roll];

		console.log("   Trinket Roll: " + Roll);
		console.log("   Old: "+ Trinket);
		console.log("   New: "+ NewTrinket);
		setAttrs({ trinket: NewTrinket});
	});
});



on("clicked:patch", function() {
	getAttrs(['patchDecal'], function (values) {
		const PatchTable = [
					"“I’m Not A Rocket Scientist / But You’re An Idiot”",
					"“I Like My Tools Clean / And My Lovers Dirty”",
					"“All Out of Fucks To Give” (Astronaut with Turned Out Pockets)",
					"Medic Patch (Skull and Crossbones over Cross)",
					"“The Louder You Scream the Faster I Come” (Nurse Pin-Up)",
					"“Travel To Distant Places / Meet Unusual Things / Get Eaten”",
					"“Don’t Run You’ll Only Die Tired” Backpatch",
					"HMFIC (Head Mother Fucker In Charge)",
					"BOHICA (Bend Over Here It Comes Again)",
					"Red Shirt Logo",
					"Dove in Crosshairs",
					"“I Am My Brother’s Keeper”",
					"Blood Type (Reference Patch)",
					"Chibi Cthulhu",
					"“Mama Tried”",
					"“Do I LOOK Like An Expert?”",
					"“Welcome to the DANGER ZONE”",
					"Black Widow Spider",
					"Biohazard Symbol",
					"Skull and Crossed Wrenches",
					"“My Other Ride Married You”",
					"Mr. Yuck",
					"Pin-Up Model (Succubus)",
					"“One Size Fits All” (Grenade)",
					"Nuclear Symbol",
					"“DILLIGAF?”",
					"Grim Reaper Backpatch",
					"“Eat The Rich”",
					"“DRINK / FIGHT / FUCK”",
					"отъебись (“Fuck Off,” Russian)",
					"“Be Sure: Doubletap”",
					"“Work Hard / Party Harder”",
					"“Smooth Operator”",
					"Flame Emoji",
					"Mudflap Girl",
					"Atom Symbol",
					"Smiley Face (Glow in the Dark)", 
					"Fun Meter (reads: Bad Time)",
					"“For Science!”",
					"“Smile: Big Brother is Watching”",
					"“GAME OVER” (Bride & Groom)",
					"“Actually, I AM A Rocket Scientist”",
					"Jolly Roger",
					"Heart",
					"“Help Wanted”",
					"Viking Skull",
					"“IMPROVE / ADAPT / OVERCOME”",
					"Princess",
					"“APEX PREDATOR” (Sabertooth Skull)",
					"“SUCK IT UP”",
					"“NOMAD”",
					"Pin-Up Model (Ace of Spades)",
					"“Cowboy Up” (Crossed Revolvers)",
					"“GOOD BOY”",
					"Queen of Hearts",
					"“Troubleshooter”" ,
					"Dice (Snake Eyes)",
					"Security Guard",
					"NASA Logo",
					"“#1 Worker”",
					"“LONER”",
					"Crossed Hammers with Wings",
					"“Good” (Brain)",
					"“Front Towards Enemy” (Claymore Mine)",
					"“Keep Well Lubricated”",
					"“Bad Bitch”",
					"Pin-Up Model (Riding Missile)",
					"Soviet Hammer & Sickle",
					"“Too Pretty To Die”",
					"FUBAR",
					"“Plays Well With Others”", 
					"“Fuck Forever” (Roses)",
					"“I’m A (Love) Machine”" ,
					"“Live Free and Die”",
					"Icarus",
					"Pin-Up Model (Mechanic)",
					"“IF I’M RUNNING KEEP UP” Backpatch",
					"”Girl’s Best Friend” (Diamond)",
					"“HELLO MY NAME IS:”",
					"“Meat Bag”",
					"Risk of Electrocution Symbol",
					"“Powered By Coffee”",
					"“I Am Not A Robot”",
					"Inverted Cross",
					"“Take Me To Your Leader” (UFO)",
					"Red Gear",
					"“Do You Sign My Paychecks?” Backpatch",
					"“DO YOUR JOB”",
					"“I Can’t Fix Stupid”",
					"“I ♥ Myself”",
					"“Take My Life (Please)”",
					"“Space IS My Home” (Sad Astronaut)",
					"Double Cherry",
					"“Upstanding Citizen”",
					"All Seeing Eye",
					"“Volunteer”",
					"“Allergic To Bullshit” (Medical Style Patch)",
					"“Solve Et Coagula” (Baphomet)",
					"Poker Hand: Dead Man’s Hand (Aces Full Of Eights)", 
					"“Fix Me First” (Caduceus)",
					"End of the Line"
					];
		let Patch = values.patch;
		let Roll = Math.floor(Math.random() * 100);
		let NewPatch = PatchTable[Roll];

		console.log("   Patch Roll: " + Roll);
		console.log("   Old: "+ Patch);
		console.log("   New: "+ NewPatch);
		setAttrs({ patchDecal: NewPatch});
	});
});

on("clicked:panic", function() {
// value="&amp;{template:ms} {{name=panic effect}} {{character_name=@{character_name}}} {{roll=[[@{panicRoll1}]]}} {{roll2=[[@{panicRoll2}]]}} {{target=[[@{stress}]]}} {{notes=@{panicEffect1}}} {{notes2=@{panicEffect1}}}"
	getAttrs(['stress'], function (values) {
		const Effect = ["ADRENALINE RUSH. [+] on all rolls for the next 2d10 minutes. Reduce Stress by 1d5.",
					"NERVOUS. Gain 1 Stress.",
					"JUMPY. Gain 1 Stress. All Close crewmembers gain 2 Stress.",
					"OVERWHELMED. [-] on all rolls for the next 1d10 minutes. Increase Minimum Stress by 1.",
					"COWARD. Gain a new Condition: You must make a Fear Save to engage in violence, otherwise you flee.",
					"FRIGHTENED. Gain a new Condition: When encountering what frightened you, make a Fear Save [-] or gain 1d5 Stress.",
					"NIGHTMARES. Gain a new Condition: Sleep is difficult, gain [-] on Rest Saves.",
					"LOSS OF CONFIDENCE. Gain a new Condition: Choose one Skill and lose that Skill’s bonus.",
					"DEFLATED. Gain a new Condition: Whenever a Close crewmember fails a Save, gain 1 Stress.",
					"DOOMED. Gain a new Condition: You feel cursed and unlucky. All Critical Successes are instead Critical Failures.",
					"SUSPICIOUS. For the next week, whenever someone joins the crew (even if they only left for a short period of time), make a Fear Save or gain 1 Stress.",
					"HAUNTED. Gain a new Condition: Something starts visiting the character at night. In their dreams. Out of the corner of their eye. And soon it will start making demands.",
					"DEATH WISH. For the next 24 hours, whenever encountering a stranger or known enemy, make a Sanity Save or immediately attack them.",
					"PROPHETIC VISION. Character immediately experiences an intense hallucination or vision of an impending terror or horrific event. Increase Minimum Stress by 2.",
					"CATATONIC. Become unresponsive and unmoving for 2d10 minutes. Reduce Stress by 1d10.",
					"RAGE. [+] on all Damage rolls for the next 1d10 hours. All crewmembers gain 1 Stress.",
					"SPIRALING. Gain a new Condition: Panic Checks are at [-].",
					"COMPOUNDING PROBLEMS. Roll twice on this table. Increase your Minimum Stress by 1.",
					"HEART ATTACK / SHORT CIRCUIT (ANDROIDS). Reduce Maximum Wounds by 1. Gain [-] on all rolls for 1d10 hours. Increase Minimum Stress by 1.",
					"RETIRE. Roll up a new character to play."];


		let Stress = values.stress;
		let intStress = parseInt(Stress) || 0;
		console.log("   Panic Check: stress " + Stress);
		let Roll1 = Math.floor(Math.random() * 20);
		
		let PanicEffect1 = "None";
		if (Roll1 < Stress) {
			PanicEffect1 = Effect[Roll1]; }

		console.log("   Panic Check: stress " + Stress + " Roll1 " + Roll1);
/*		setAttrs({ panicRoll1: String(Roll1+1), panicRoll2: String(Roll2+1), panicEffect1: PanicEffect1, panicEffect2: PanicEffect2}); */
		setAttrs({ panicRoll1: String(Roll1+1), panicRoll2: "", panicEffect1: PanicEffect1, panicEffect2: ""});

		startRoll("&{template:ms} {{name=panic}} {{character_name=@{character_name}}} {{roll=[[@{panicRoll1}]]}} {{target=[[@{stress}]]}} {{notes=@{panicEffect1}}}", (results) => {

			const computed = Roll1+1;
			
           finishRoll(
                results.rollId,
                {
                    roll: computed,
                }
            );
        });
	});
});




on("clicked:panic2", function() {
	getAttrs(['stress'], function (values) {
		const Effect = ["ADRENALINE RUSH. [+] on all rolls for the next 2d10 minutes. Reduce Stress by 1d5.",
					"NERVOUS. Gain 1 Stress.",
					"JUMPY. Gain 1 Stress. All Close crewmembers gain 2 Stress.",
					"OVERWHELMED. [-] on all rolls for the next 1d10 minutes. Increase Minimum Stress by 1.",
					"COWARD. Gain a new Condition: You must make a Fear Save to engage in violence, otherwise you flee.",
					"FRIGHTENED. Gain a new Condition: When encountering what frightened you, make a Fear Save [-] or gain 1d5 Stress.",
					"NIGHTMARES. Gain a new Condition: Sleep is difficult, gain [-] on Rest Saves.",
					"LOSS OF CONFIDENCE. Gain a new Condition: Choose one Skill and lose that Skill’s bonus.",
					"DEFLATED. Gain a new Condition: Whenever a Close crewmember fails a Save, gain 1 Stress.",
					"DOOMED. Gain a new Condition: You feel cursed and unlucky. All Critical Successes are instead Critical Failures.",
					"SUSPICIOUS. For the next week, whenever someone joins the crew (even if they only left for a short period of time), make a Fear Save or gain 1 Stress.",
					"HAUNTED. Gain a new Condition: Something starts visiting the character at night. In their dreams. Out of the corner of their eye. And soon it will start making demands.",
					"DEATH WISH. For the next 24 hours, whenever encountering a stranger or known enemy, make a Sanity Save or immediately attack them.",
					"PROPHETIC VISION. Character immediately experiences an intense hallucination or vision of an impending terror or horrific event. Increase Minimum Stress by 2.",
					"CATATONIC. Become unresponsive and unmoving for 2d10 minutes. Reduce Stress by 1d10.",
					"RAGE. [+] on all Damage rolls for the next 1d10 hours. All crewmembers gain 1 Stress.",
					"SPIRALING. Gain a new Condition: Panic Checks are at [-].",
					"COMPOUNDING PROBLEMS. Roll twice on this table. Increase your Minimum Stress by 1.",
					"HEART ATTACK / SHORT CIRCUIT (ANDROIDS). Reduce Maximum Wounds by 1. Gain [-] on all rolls for 1d10 hours. Increase Minimum Stress by 1.",
					"RETIRE. Roll up a new character to play."];


		let Stress = values.stress;
		let intStress = parseInt(Stress) || 0;
		console.log("   Panic Check: stress " + Stress);
		let Roll1 = Math.floor(Math.random() * 20);
		let Roll2 = Math.floor(Math.random() * 20);
		
		let PanicEffect1 = "None";
		if (Roll1 < Stress) {
			PanicEffect1 = Effect[Roll1]; }
		let PanicEffect2 = "None";
		if (Roll2 < Stress) {
			PanicEffect2 = Effect[Roll2]; }
		console.log("   Panic Check: stress " + Stress + " Roll1 " + Roll1 +  " Roll2 " + Roll2);
		setAttrs({ panicRoll1: String(Roll1+1), panicRoll2: String(Roll2+1), panicEffect1: PanicEffect1, panicEffect2: PanicEffect2});

		startRoll("&{template:ms} {{name=panic}} {{character_name=@{character_name}}} {{roll=[[@{panicRoll1}]]}} {{roll2=[[@{panicRoll2}]]}} {{target=[[@{stress}]]}} {{notes=@{panicEffect1}}} {{notes2=@{panicEffect2}}}", (results) => {
			const computed = Roll1+1;
			
           finishRoll(
                results.rollId,
                {
                    roll: computed,
                }
            );
        });
	});
});


	function marineLoadout(){
		let Equipment1 = "";
		let Equipment2 = "";
		let Equipment3 = "";
		let AP = "0";
		clearSection("repeating_weapons");
		
		let Roll1 = Math.floor(Math.random() * 10);
		switch (Roll1) {
			case 0:
				Equipment1 = "Tank Top and Camo Pants";
				AP = "1";
				Equipment2 = "Stimpak (x5)";
				addWeapon("repeating_weapons","Combat Knife","Melee","1d5","N/A");
				break;
			case 1: 
				Equipment1 = "Advanced Battle Dress";
				AP = "10";
				addWeapon("repeating_weapons","Flamethrower","Ranged","2d10","4 shots");
				addWeapon("repeating_weapons","Boarding Axe","Melee","2d10","N/A");
				break;
			case 2: 
				Equipment1 = "Standard Battle Dress";
				AP = "7";
				Equipment2 = "Rucksack";
				Equipment3 = "Camping Gear";
				addWeapon("repeating_weapons","Combat Shotgun","Melee","4d10","4 rounds");
				break;
			case 3: 
				Equipment1 = "Standard Battle Dress";
				AP = "7";
				Equipment2 = "Infrared Goggles";
				addWeapon("repeating_weapons","Pulse Rifle","Ranged","3d10","3 mags(5)");
				break;
			case 4: 
				Equipment1 = "Standard Battle Dress";
				AP = "7";
				Equipment2 = "Binoculars";
				Equipment3 = "Personal Locator";
				addWeapon("repeating_weapons","Smart Rifle","Ranged","4d10","3 mags(3)");
				break;
			case 5: 
				Equipment1 = "Standard Battle Dress";
				AP = "7";
				Equipment2 = "MRE (x7)";
				addWeapon("repeating_weapons","SMG","Ranged","2d10","3 mags(5)");
				break;
			case 6: 
				Equipment1 = "Fatigues";
				AP = "2";
				Equipment2 = "Dog (pet), Leash, Tennis Ball";
				addWeapon("repeating_weapons","Combat Shotgun","Ranged","4d10","2 rounds");
				break;
			case 7: 
				Equipment1 = "Fatigues";
				AP = "2";
				addWeapon("repeating_weapons","Revolver","Ranged","1d10+1","12 rounds");
				addWeapon("repeating_weapons","Frag Grenade","Ranged","3d10","1");
				break;
			case 8: 
				Equipment1 = "Dress Uniform";
				AP = "1";
				Equipment2 = "Challenge Coin";
				addWeapon("repeating_weapons","Revolver","Ranged","1d10+1","12 rounds");
				break;
			case 9: 
				Equipment1 = "Advanced Battle Dress";
				AP = "10";
				Equipment2 = "";
				addWeapon("repeating_weapons","General-Purpose Machine Gun","Ranged","4d10","1 can");
				break;
			default: 
				Equipment1 = "Advanced Battle Dress";
				AP = "10";
				Equipment2 = "";
				addWeapon("repeating_weapons","General-Purpose Machine Gun","Ranged","4d10","1 can");
				break;
		};
		console.log(" Marine Loadout: " + Roll1 + " Equipment1: " + Equipment1 + " AP: " + AP);
		setAttrs({
			equip1: Equipment1,
			equip2: Equipment2,
			equip3: Equipment3,
			armor: AP			
         });
	}



	function androidLoadout(){
		let Equipment1 = "";
		let Equipment2 = "";
		let Equipment3 = "";
		let AP = "0";
		clearSection("repeating_weapons");
		
		let Roll1 = Math.floor(Math.random() * 10);
		switch (Roll1) {
			case 0:
				Equipment1 = "Vaccsuit";
				AP = "3";
				Equipment2 = "Infrared Goggles";
				Equipment3 = "Mylar Blanket";
				addWeapon("repeating_weapons","Smart Rifle","Ranged","4d10","2 mags(3)");
				break;
			case 1: 
				Equipment1 = "Vaccsuit";
				AP = "3";
				Equipment2 = "Long-range Comms";
				Equipment3 = "Satchel";
				addWeapon("repeating_weapons","Revolver","Ranged","1d10+1","12 rounds");
				break;
			case 2: 
				Equipment1 = "Hazard Suit";
				AP = "5";
				Equipment2 = "Defibrillator, First Aid Kit";
				Equipment3 = "Flashlight";
				addWeapon("repeating_weapons","Revolver","Ranged","1d10+1","6 rounds")
				break;
			case 3: 
				Equipment1 = "Hazard Suit";
				AP = "5";
				Equipment2 = "Sample Collection Kit";
				Equipment3 = "Screwdriver (as Assorted Tools)";
				addWeapon("repeating_weapons","Foam Gun","Ranged","1","2 charges");
				break;
			case 4: 
				Equipment1 = "Standard Battle Dress";
				AP = "7";
				Equipment2 = "Paracord (100m)";
				addWeapon("repeating_weapons","Tranq Pistol","Ranged","1d5","3 shots");
				break;
			case 5: 
				Equipment1 = "Standard Crew Attire";
				AP = "1";
				Equipment2 = "Small Pet (organic)";
				addWeapon("repeating_weapons","Stun Baton","Melee","1d5","N/A");
				break;
			case 6: 
				Equipment1 = "Standard Crew Attire";
				AP = "1";
				Equipment2 = "Bioscanner";
				addWeapon("repeating_weapons","Scalpel","Melee","1d5","N/A");
				break;
			case 7: 
				Equipment1 = "Standard Crew Attire";
				AP = "1";
				addWeapon("repeating_weapons","Frag Grenade","Ranged","3d10","1");
				addWeapon("repeating_weapons","Scalpel","Melee","1d5","N/A");
				break;
			case 8: 
				Equipment1 = "Manufacturer Supplied Attire";
				AP = "1";
				Equipment2 = "Jump-9 Ticket (destination blank)";
				break;
			case 9: 
				Equipment1 = "Corporate Attire";
				AP = "1";
				Equipment2 = "VIP Corporate Key Card";
				break;
			default: 
				Equipment1 = "Corporate Attire";
				AP = "1";
				Equipment2 = "VIP Corporate Key Card";
				break;
		};
		console.log(" Android Loadout: " + Roll1 + " Equipment1: " + Equipment1 + " AP: " + AP);
		setAttrs({
			equip1: Equipment1,
			equip2: Equipment2,
			equip3: Equipment3,
			armor: AP			
         });
	}



	function scientistLoadout(){
		let Equipment1 = "";
		let Equipment2 = "";
		let Equipment3 = "";
		let Equipment4 = "";
		let AP = "0";
		clearSection("repeating_weapons");
		
		let Roll1 = Math.floor(Math.random() * 10);
		switch (Roll1) {
			case 0:
				Equipment1 = "Hazard Suit";
				AP = "5";
				Equipment2 = "Bioscanner";
				Equipment3 = "Sample Collection Kit";
				addWeapon("repeating_weapons","Tranq Pistol","Ranged","1d5","3 shots");
				//addWeapon("repeating_weapons","Smart Rifle","Ranged","4d10","2 mags(3)");
				break;
			case 1: 
				Equipment1 = "Hazard Suit";
				AP = "5";
				Equipment2 = "Stimpak";
				Equipment3 = "Electronic Tool Set";
				addWeapon("repeating_weapons","Flamethrower","Ranged","2d10","4 shots");
				break;
			case 2: 
				Equipment1 = "Vaccsuit";
				AP = "3";
				Equipment2 = "Sample Collection Kit";
				Equipment3 = "Flashlight";
				Equipment4 = "Lab Rat (pet)";
				addWeapon("repeating_weapons","Rigging Gun","Ranged","1d10","1 shot");
				//addWeapon("repeating_weapons","Foam Gun","Ranged","1","2 charges");
				//addWeapon("repeating_weapons","Revolver","Ranged","1d10+1","6 rounds")
				break;
			case 3: 
				Equipment1 = "Vaccsuit";
				AP = "3";
				Equipment2 = "Foldable Stretcher";
				Equipment3 = "First Aid Kit";
				Equipment4 = "Radiation Pills (x5)";
				addWeapon("repeating_weapons","Foam Gun","Ranged","1","2 charges");
				break;
			case 4: 
				Equipment1 = "Lab Coat";
				AP = "1";
				Equipment2 = "Screwdriver (as Assorted Tools)";
				Equipment3 = "Medscanner";
				Equipment4 = "Vaccine (1 dose)";
				//addWeapon("repeating_weapons","Tranq Pistol","Ranged","1d5","3 shots");
				break;
			case 5: 
				Equipment1 = "Lab Coat";
				AP = "1";
				Equipment2 = "Cybernetic Diagnostic Scanner";
				Equipment3 = "Portable Computer Terminal";
				//addWeapon("repeating_weapons","Stun Baton","Melee","1d5","N/A");
				break;
			case 6: 
				Equipment1 = "Scrubs";
				AP = "1";
				Equipment2 = "Automed (x5)";
				Equipment3 = "Oxygen Tank with Filter Mask";
				addWeapon("repeating_weapons","Scalpel","Melee","1d5","N/A");
				break;
			case 7: 
				Equipment1 = "Scrubs";
				AP = "1";
				Equipment2 = "Mylar Blanket";
				Equipment3 = "First Aid Kit";
				addWeapon("repeating_weapons","Vial of Acid","Ranged","5d10","1");
				//addWeapon("repeating_weapons","Scalpel","Melee","1d5","N/A");
				break;
			case 8: 
				Equipment1 = "Standard Crew Attire";
				AP = "1";
				Equipment2 = "Cybernetic Diagnostic Scanner";
				Equipment3 = "Duct Tape";
				addWeapon("repeating_weapons","Utility Knife (as Scalpel)","Melee","1d5","N/A");
				break;
			case 9: 
				Equipment1 = "Civilian Clothes";
				AP = "1";
				Equipment2 = "Briefcase";
				Equipment3 = "Prescription Pad";
				addWeapon("repeating_weapons","Fountain Pen (Poison Injector)","Melee","2d10+5","N/A");
				break;
			default: 
				Equipment1 = "Civilian Clothes";
				AP = "1";
				Equipment2 = "Briefcase";
				Equipment3 = "Prescription Pad";
				addWeapon("repeating_weapons","Fountain Pen (Poison Injector)","Melee","2d10+5","N/A");
				break;
		};
		console.log(" Scientist Loadout: " + Roll1 + " Equipment1: " + Equipment1 + " AP: " + AP);
		setAttrs({
			equip1: Equipment1,
			equip2: Equipment2,
			equip3: Equipment3,
			equip4: Equipment4,
			armor: AP			
         });
	}



	function teamsterLoadout(){
		let Equipment1 = "";
		let Equipment2 = "";
		let Equipment3 = "";
		let Equipment4 = "";
		let AP = "0";
		clearSection("repeating_weapons");
		
		let Roll1 = Math.floor(Math.random() * 10);
		switch (Roll1) {
			case 0:
				Equipment1 = "Vaccsuit";
				AP = "3";
				Equipment2 = "Patch Kit (x3)";
				Equipment3 = "Toolbelt with Assorted Tools";
				addWeapon("repeating_weapons","Laser Cutter","Ranged","1d100","1 battery(6)");
				//addWeapon("repeating_weapons","Smart Rifle","Ranged","4d10","2 mags(3)");
				break;
			case 1: 
				Equipment1 = "Vaccsuit";
				AP = "3";
				Equipment2 = "Crowbar";
				Equipment3 = "Flashlight";
				addWeapon("repeating_weapons","Revolver","Ranged","1d10+1","6 rounds")
				break;
			case 2: 
				Equipment1 = "Vaccsuit";
				AP = "3";
				Equipment2 = "Shovel";
				Equipment3 = "Salvage Drone";
				addWeapon("repeating_weapons","Rigging Gun","Ranged","1d10","1 shot");
				//addWeapon("repeating_weapons","Foam Gun","Ranged","1","2 charges");
				//addWeapon("repeating_weapons","Revolver","Ranged","1d10+1","6 rounds")
				break;
			case 3: 
				Equipment1 = "Hazard Suit";
				AP = "5";
				Equipment2 = "Spanner";
				Equipment3 = "Camping Gear";
				Equipment4 = "Water Filtration Device";
				addWeapon("repeating_weapons","Vibechete","Melee","3d10(AA)","N/A");
				break;
			case 4: 
				Equipment1 = "Heavy Duty Work Clothes";
				AP = "2";
				Equipment2 = "Cigarettes";
				addWeapon("repeating_weapons","Explosives & Detonator","Ranged","1d5","3 shots");
				break;
			case 5: 
				Equipment1 = "Heavy Duty Work Clothes";
				AP = "2";
				Equipment2 = "Paracord (100m)";
				Equipment3 = "Salvage Drone";
				Equipment3 = "Drill (as Assorted Tools)";
				break;
			case 6: 
				Equipment1 = "Standard Crew Attire";
				AP = "1";
				Equipment2 = "Extension Cord (20m)";
				Equipment3 = "Cat (pet)";
				addWeapon("repeating_weapons","Combat Shotgun","Ranged","4d10","4 rounds");
				break;
			case 7: 
				Equipment1 = "Standard Crew Attire";
				AP = "1";
				Equipment2 = "Head Lamp";
				Equipment3 = "Toolbelt with Assorted Tools";
				Equipment4 = "Lunch Box";
				addWeapon("repeating_weapons","Nail Gun","Ranged","1d5","32");
				//addWeapon("repeating_weapons","Scalpel","Melee","1d5","N/A");
				break;
			case 8: 
				Equipment1 = "Standard Crew Attire";
				AP = "1";
				Equipment2 = "Water Filtration Device";
				Equipment3 = "Personal Locator";
				Equipment4 = "Subsurface Scanner";
				addWeapon("repeating_weapons","Flare Gun","Ranged","1d5","2");
				break;
			case 9: 
				Equipment1 = "Lounge Wear";
				AP = "1";
				Equipment2 = "Stimpak";
				Equipment3 = "Six Pack of Beer";
				addWeapon("repeating_weapons","Crowbar","Melee","1d5","N/A");
				break;
			default: 
				Equipment1 = "Lounge Wear";
				AP = "1";
				Equipment2 = "Stimpak";
				Equipment3 = "Six Pack of Beer";
				addWeapon("repeating_weapons","Crowbar","Melee","1d5","N/A");
				break;
		};
		console.log(" Scientist Loadout: " + Roll1 + " Equipment1: " + Equipment1 + " AP: " + AP);
		setAttrs({
			equip1: Equipment1,
			equip2: Equipment2,
			equip3: Equipment3,
			equip4: Equipment4,
			armor: AP			
         });
	}






	

on("change:class", function(eventInfo) {
		let NewClass = eventInfo.newValue;
		let OldClass = eventInfo.previousValue;
		let Source = eventInfo.sourceAttribute;
	console.log(" =-=-=- Class Change: " + NewClass + " from " + OldClass + " source " + Source);
	if (TKGApproved == 0) {
		console.log(" class change automation sealed until TKGApproved");
		return;
	}
	
	getAttrs(['high_score','class','strength','speed','intellect','combat','sanity','fear', 'body','totalPoints','woundsMax','traumaResponse','statLessened','statIncreased'], function (values) {
		/* A trigger guard - high_score - so sheet info is not overwritten BY ACCIDENT */
		let HighScore = parseInt(values.high_score) || 0;
		if (HighScore != 0) {
			console.log(" Aborting to prevent previous Class from being overwritten");
			return;
		}
		let Class = values.class;
		let Strength = parseInt(values.strength) || 0;
		let Speed = parseInt(values.speed) || 0;
		let Intellect = parseInt(values.intellect) || 0;
		let Combat = parseInt(values.combat) || 0;
		let Sanity = parseInt(values.sanity) || 0;
		let Fear = parseInt(values.fear) || 0;
		let Body = parseInt(values.body) || 0;
		let TotalPoints = parseInt(values.totalPoints) || 0;
		let TraumaResponse = values.traumaResponse;
		let StatLessened = parseInt(values.statLessened) || 0;
		let StatIncreased = parseInt(values.statIncreased) || 0;
		let WoundsMax = 2;
		if (typeof woundsMax === 'undefined') { 
			console.log('woundsMax was undefined'); 
		} else {
			WoundsMax = parseInt(woundsMax) || 0;
		}
		let LessenedStat = "";
		let IncreasedStat = "";
		let MilitaryTraining = '0';
		let Athletics = '0';
		let Linguistics = '0';
		let Computers = '0';
		let Mathematics = '0';
		let IndustrialEquipment = '0';
		let Zero_G = '0';
		let Bonus = "";
		let Skill1 = "";
		let Skill2 = "";
		let Skill3 = "";
		let Skill4 = "";
		let Equipment1 = "";
		let Equipment2 = "";
		let Equipment3 = "";
		let Equipment4 = "";
		let Weapon1 = "";
		let Weapon2 = "";

		
		console.log("  Stat Lessended: " + StatLessened + " StatIncreased: " + StatIncreased);
		
		switch (OldClass) {
			case "Marine": 
				Combat -= 10;
				Body -= 10;
				Fear -= 20;
				WoundsMax -= 1;
				MilitaryTraining = '0';
				Athletics = '0';
				break;
			case "Android": 
				Intellect -= 20;
				switch (StatLessened) {
					case 1: Strength += 10; break;
					case 2: Speed += 10; break;
					case 3: Combat += 10; break;
					default: console.log(" Unable to rollback Andriod Lessened value: " + StatLessened);
				}
				StatLessened = 0;				
				Fear -= 60;
				WoundsMax -= 1;
				Linguistics = '0';
				Computers = '0';
				Mathematics = '0';
				break;
			case "Scientist": 
				Intellect -= 10;
				switch (StatIncreased) {
					case 1: Strength -= 5; break;
					case 2: Speed -= 5; break;
					case 3: Combat -= 5; break;
					default: console.log(" Unable to rollback Scientist Increased value: " + StatIncreased);
				}
				StatIncreased = 0;				
				Sanity -= 30;
				break;
			case "Teamster": 
				Strength -= 5;
				Speed -= 5;
				Intellect -= 5;
				Combat -= 5;
				
				Sanity -= 10;
				Fear -= 10;
				Body -= 10;
				IndustrialEquipment = '0';
				Zero_G = '0';
				break;
			case "Custom":
				console.log(" Custom case - Rollback Class does not exist: " + String(OldClass));
				break;
			
			default:
				console.log(" Default case - Rollback Class should not exist: " + String(OldClass));
		}
		
		console.log("****** Class Change to " + Class + " ****");
		switch (String(Class)) {
			case "Marine": 
				Combat += 10;
				Body += 10;
				Fear += 20;
				WoundsMax += 1;
				MilitaryTraining = '1';
				Skill1 = "Military Training (T)";
				Athletics = '1';
				Skill2 = "Athletics (T)";
				Bonus = '2 Trained Skills OR 1 Expert Skill';
				Skill3 = Bonus;
				TraumaResponse = "WHENEVER YOU PANIC, EVERY CLOSE FRIENDLY PLAYER MUST MAKE A FEAR SAVE";
				marineLoadout();
				break;
			case "Android": 
				Intellect += 20;
				StatLessened = Math.floor((Math.random() * 3) + 1);
				if (StatLessened == 1) { Strength -= 10; LessenedStat = "Strength"; }
				else if (StatLessened == 2) { Speed -= 10; LessenedStat = "Speed"; }
				else { Combat -= 10; LessenedStat = "Combat"; }
				console.log ("Lessended Stat was " + LessenedStat); 
				Fear += 60;
				WoundsMax += 1;
				Linguistics = '1';
				Skill1 = "Linguistics (T)";
				Computers = '1';
				Skill2 = "Computers (T)";
				Mathematics = '1';
				Skill3 = "Mathematics (T)";
				Bonus = '2 Trained Skills OR 1 Expert Skill';
				Skill4 = Bonus;
				TraumaResponse = "FEAR SAVES MADE BY CLOSE FRIENDLY PLAYERS ARE AT DISADVANTAGE";
				androidLoadout();
				break;
			case "Scientist": 
				Intellect += 10;
				StatIncreased = Math.floor((Math.random() * 3) + 1);
				if (StatIncreased == 1) { Strength += 5; IncreasedStat = "Strength"; }
				else if (StatIncreased == 2) { Speed += 5; IncreasedStat = "Speed"; }
				else { Combat += 5; IncreasedStat = "Combat"; }
				console.log ("Increased Stat was " + IncreasedStat); 
				Sanity += 30;
				Bonus = '1 Master with prerequisites + 1 Trained Skill';
				Skill1 = Bonus;
				TraumaResponse = "WHENEVER YOU FAIL A SANITY SAVE, ALL CLOSE FRIENDLY PLAYERS GAIN 1 STRESS";
				scientistLoadout();
				break;
			case "Teamster": 
				Strength += 5;
				Speed += 5;
				Intellect += 5;
				Combat += 5;
				
				Sanity += 10;
				Fear += 10;
				Body += 10;
				IndustrialEquipment = '1';
				Skill1 = "Industrial Equipment (T)";
				Zero_G = '1';
				Skill2 = "Zero-G (T)";
				Bonus = '1 Trained Skill and 1 Expert Skill';
				Skill3 = Bonus;
				TraumaResponse = "ONCE PER SESSION, YOU MAY TAKE ADVANTAGE ON A PANIC CHECK";
				teamsterLoadout();
				break;
			case "Custom":
				TraumaResponse = " CUSTOM ";
				console.log(" Custom case " + String(Class));
				break;
			default:
				console.log(" Default case - Class should not exist: " + String(Class));
		}
		// Sanity check
		if ( WoundsMax < 2) { WoundsMax = 2;}
console.log(" Class " + Class + " Bonus " + Bonus);	
console.log(" After: Lessened " + StatLessened + " Increased " + StatIncreased);		
		setAttrs({
			strength: Strength,
			speed: Speed,
			intellect: Intellect,
			combat: Combat,
				
			sanity:	Sanity,
			fear: Fear,
			body: Body,
			woundsMax: WoundsMax,
			traumaResponse: TraumaResponse,
			statLessened: StatLessened,
			statIncreased: StatIncreased,
			militaryTraining: MilitaryTraining,
			athletics: Athletics,
			linguistics: Linguistics,
			computers: Computers,
			mathematics: Mathematics,
			industrialEquipment: IndustrialEquipment,
			zero_g: Zero_G,
			skill1: Skill1,
			skill2: Skill2,
			skill3: Skill3,
			skill4: Skill4,
			initialSkills: Bonus			
         });
	});
});	
	// GiGs bumper guard for repeating sections
	on("change:repeating_weapons", function() {
		let limit = 7;
		console.log(" Guard repeating weapons from overflow. Limit: " + limit);
		section = "repeating_weapons";
		getSectionIDs(section, function(idarray) {
			for(var i=limit; i < idarray.length; i++) {
				console.log(" Deleting repeating weapons row: " + i + "\n");
				removeRepeatingRow(section + "_" + idarray[i]);
			}
		});
	});
	on("change:repeating_equipment", function() {
		let limit = 12;
		console.log(" Guard repeating equipment from overflow. Limit: " + limit);
		section = "repeating_equipment";
		getSectionIDs(section, function(idarray) {
			for(var i=limit; i < idarray.length; i++) {
				console.log(" Deleting repeating equipment row: " + i + "\n");
				removeRepeatingRow(section + "_" + idarray[i]);
			}
		});
	});	
	
/* 		<input type='hidden' name="attr_skilltotal"  title="Total Skill Points" value='0'/>
		<input type='hidden' name="attr_skilltrained" title="Total Trained Skills" value='0'/>
		<input type='hidden' name="attr_skillexpert" title="Total Expert Skills" value='0'/>
		<input type='hidden' name="attr_skillmaster" title="Total Master Skills" value='0'/>
		<input type='hidden' name="attr_skillpointsunused" title="Skill Points Unused" value='0'/>

linguistics, zoology, botany, geology, industrialEquipment, juryRigging, chemistry, computers, zero_g, mathematics, art, archeology, theology, militaryTraining, rimwise, athletics

psychology, pathology, medicine, ecology, asteroidMining, mechanicalRepair, explosives, pharmacology, hacking, piloting, physics, mysticism, wildernessSurvival, firearms, handToHandCombat
	
sophonology, exobiology, surgery, planetology, robotics, engineering, cybernetics, artificialIntelligence, hyperspace, xenoesotericism, command


 change:linguistics change:zoology change:botany change:geology change:industrialEquipment change:juryRigging change:chemistry change:computers change:zero_g change:mathematics change:art change:archeology change:theology change:militaryTraining change:rimwise change:athletics

 change:psychology change:pathology change:medicine change:ecology change:asteroidMining change:mechanicalRepair change:explosives change:pharmacology change:hacking change:piloting change:physics change:mysticism change:wildernessSurvival change:firearms change:handToHandCombat
	
 change:sophonology change:exobiology change:surgery change:planetology change:robotics change:engineering change:cybernetics change:artificialIntelligence change:hyperspace change:xenoesotericism change:command

'linguistics', 'zoology', 'botany', 'geology', 'industrialEquipment', 'juryRigging', 'chemistry', 'computers', 'zero_g', 'mathematics', 'art', 'archeology', 'theology', 'militaryTraining', 'rimwise', 'athletics'

'psychology', 'pathology', 'medicine', 'ecology', 'asteroidMining', 'mechanicalRepair', 'explosives', 'pharmacology', 'hacking', 'piloting', 'physics', 'mysticism', 'wildernessSurvival', 'firearms', 'handToHandComba'
	
'sophonology', 'exobiology', 'surgery', 'planetology', 'robotics', 'engineering', 'cybernetics', 'artificialIntelligence', 'hyperspace', 'xenoesotericism', 'command'


*/
	on("change:linguistics change:zoology change:botany change:geology change:industrialEquipment change:juryRigging change:chemistry change:computers change:zero_g change:mathematics change:art change:archeology change:theology change:militaryTraining change:rimwise change:athletics", function(eventInfo) {
		let NewLevel = eventInfo.newValue;
		let OldLevel = eventInfo.previousValue;
		if  (!(OldLevel == 0 || OldLevel == 1)) {
			console.log("  OldLevel = " + OldLevel + " problably undefined, resetting to 0");
			OldLevel = 0;
		}
		let Skill = eventInfo.sourceAttribute;
		console.log(" =-=-=- Trained Skill Change: " + Skill + " now " + NewLevel + " from " + OldLevel);
		getAttrs(['skilltrained','skillpointsunused', 'linguistics', 'zoology', 'botany', 'geology', 'industrialEquipment', 'juryRigging', 'chemistry', 'computers', 'zero_g', 'mathematics', 'art', 'archeology', 'theology', 'militaryTraining', 'rimwise', 'athletics'], function (values) {
			let Skilltrained = parseInt(values.skilltrained)||0;
			let Skillpointsunused = parseInt(values.skillpointsunused)||0;
			
			let Linguistics = parseInt(values.linguistics)||0;
			let Zoology = parseInt(values.zoology)||0;
			let Botany = parseInt(values.botany)||0;
			let Geology = parseInt(values.geology)||0;
			let IndustrialEquipment = parseInt(values.industrialEquipment)||0;
			let JuryRigging = parseInt(values.juryRigging)||0;
			let Chemistry = parseInt(values.chemistry)||0;
			let Computers = parseInt(values.computers)||0;
			let Zero_g = parseInt(values.zero_g)||0;
			let Mathematics = parseInt(values.mathematics)||0;
			let Art = parseInt(values.art)||0;
			let Archeology = parseInt(values.archeology)||0;
			let Theology = parseInt(values.theology)||0;
			let MilitaryTraining = parseInt(values.militaryTraining)||0;
			let Rimwise = parseInt(values.rimwise)||0;
			let Athletics = parseInt(values.athletics)||0;
			let NewSkillsTrained = Linguistics + Zoology + Botany + Geology + IndustrialEquipment + JuryRigging + Chemistry + Computers + Zero_g + Mathematics + Art + Archeology + Theology + MilitaryTraining + Rimwise + Athletics;

			console.log("  Skilltrained: " + Skilltrained + " NewSkillsTrained " + NewSkillsTrained + " Skillpointsunused " + Skillpointsunused);
			if (NewLevel > OldLevel) {
				if (Skillpointsunused > 0)
					Skillpointsunused -= 1;
				Skilltrained += 1;
			} else {
				Skillpointsunused += 1;
				Skilltrained -= 1;
			}
			console.log("  Skilltrained: " + Skilltrained + " NewSkillsTrained " + NewSkillsTrained + " Skillpointsunused " + Skillpointsunused);

			setAttrs({
				skilltrained : NewSkillsTrained,  
				skillpointsunused : Skillpointsunused  
			});
		});
	});

	on("change:psychology change:pathology change:medicine change:ecology change:asteroidMining change:mechanicalRepair change:explosives change:pharmacology change:hacking change:piloting change:physics change:mysticism change:wildernessSurvival change:firearms change:handToHandCombat", function(eventInfo) {
		let NewLevel = eventInfo.newValue;
		let OldLevel = eventInfo.previousValue;
		let Skill = eventInfo.sourceAttribute;
		console.log(" =-=-=- Master Skill Change: " + Skill + " now " + NewLevel + " from " + OldLevel);
		getAttrs(['skillexpert','skillpointsunused', 'psychology', 'pathology', 'medicine', 'ecology', 'asteroidMining', 'mechanicalRepair', 'explosives', 'pharmacology', 'hacking', 'piloting', 'physics', 'mysticism', 'wildernessSurvival', 'firearms', 'handToHandCombat'], function (values) {
			let Skillexpert = parseInt(values.skillexpert)||0;
			let Skillpointsunused = parseInt(values.skillpointsunused)||0;
			
			let Psychology = parseInt(values.psychology)||0;
			let Pathology = parseInt(values.pathology)||0;
			let Medicine = parseInt(values.medicine)||0;
			let Ecology = parseInt(values.ecology)||0;
			let AsteroidMining = parseInt(values.asteroidMining)||0;
			let MechanicalRepair = parseInt(values.mechanicalRepair)||0;
			let Explosives = parseInt(values.explosives)||0;
			let Pharmacology = parseInt(values.pharmacology)||0;
			let Hacking = parseInt(values.hacking)||0;
			let Piloting = parseInt(values.piloting)||0;
			let Physics = parseInt(values.physics)||0;
			let Mysticism = parseInt(values.mysticism)||0;
			let WildernessSurvival = parseInt(values.wildernessSurvival)||0;
			let Firearms = parseInt(values.firearms)||0;
			let HandToHandCombat = parseInt(values.handToHandCombat)||0;

			let NewSkillsExpert = Psychology + Pathology + Medicine + Ecology + AsteroidMining + MechanicalRepair + Explosives + Pharmacology + Hacking + Piloting + Physics + Mysticism + WildernessSurvival + Firearms + HandToHandCombat;
			
			console.log("  SkillExpert: " + Skillexpert + " NewSkillsExpert " + NewSkillsExpert + " Skillpointsunused " + Skillpointsunused);
			
			if (NewLevel > OldLevel) {
				if (Skillpointsunused > 0)
					Skillpointsunused -= 3;
				Skillexpert += 1;
			} else {
				Skillpointsunused += 3;
				Skillexpert -= 1;
			}
			console.log("  Skillexpert: " + Skillexpert + " NewSkillsExpert " + NewSkillsExpert + " Skillpointsunused " + Skillpointsunused);
			

			setAttrs({
				skillexpert : NewSkillsExpert,  
				skillpointsunused : Skillpointsunused  
			});
		});
	});	

	on("change:sophonology change:exobiology change:surgery change:planetology change:robotics change:engineering change:cybernetics change:artificialIntelligence change:hyperspace change:xenoesotericism change:command", function(eventInfo) {
		let NewLevel = eventInfo.newValue;
		let OldLevel = eventInfo.previousValue;
		let Skill = eventInfo.sourceAttribute;
		console.log(" =-=-=- Master Skill Change: " + Skill + " now " + NewLevel + " from " + OldLevel);
		getAttrs(['skillmaster','skillpointsunused', 'sophonology', 'exobiology', 'surgery', 'planetology', 'robotics', 'engineering', 'cybernetics', 'artificialIntelligence', 'hyperspace', 'xenoesotericism', 'command'], function (values) {
			let Skillmaster = parseInt(values.skillmaster)||0;
			let Skillpointsunused = parseInt(values.skillpointsunused)||0;
			

			let Sophonology = parseInt(values.sophonology)||0;
			let Exobiology = parseInt(values.exobiology)||0;
			let Surgery = parseInt(values.surgery)||0;
			let Planetology = parseInt(values.planetology)||0;
			let Robotics = parseInt(values.robotics)||0;
			let Engineering = parseInt(values.engineering)||0;
			let Cybernetics = parseInt(values.cybernetics)||0;
			let ArtificialIntelligence = parseInt(values.artificialIntelligence)||0;
			let Hyperspace = parseInt(values.hyperspace)||0;
			let Xenoesotericism = parseInt(values.xenoesotericism)||0;
			let Command = parseInt(values.command)||0;

			let NewSkillsMaster = Sophonology + Exobiology + Surgery + Planetology + Robotics + Engineering + Cybernetics + ArtificialIntelligence + Hyperspace + Xenoesotericism + Command;

			console.log("  SkillMaster: " + Skillmaster + " NewSkillsMaster " + NewSkillsMaster + " Skillpointsunused " + Skillpointsunused);
			
			if (NewLevel > OldLevel) {
				if (Skillpointsunused > 0)
					Skillpointsunused -= 3;
				Skillmaster += 1;
			} else {
				Skillpointsunused += 3;
				Skillmaster -= 1;
			}
			console.log("  Skillmaster: " + Skillmaster + " NewSkillsMaster " + NewSkillsMaster + " Skillpointsunused " + Skillpointsunused);

			setAttrs({
				skillmaster : NewSkillsMaster,  
				skillpointsunused : Skillpointsunused  
			});
		});
	});	
	
	on("change:skilltrained change:skillexpert change:skillmaster", function(eventInfo) {
		let NewLevel = eventInfo.newValue;
		let OldLevel = eventInfo.previousValue;
		let Class = eventInfo.sourceAttribute;
		console.log(" =-=-=- Skill Point TotalChange: " + Class + " now " + NewLevel + " from " + OldLevel);
		getAttrs(['skilltrained','skillexpert','skillmaster'], function (values) {
			let Skilltrained = parseInt(valuubes.skilltrained)||0;
			let Skillexpert = parseInt(values.skillexpert)||0;
			let Skillmaster = parseInt(values.skillmaster)||0;
			
			let Skillpoints = Skilltrained + (Skillexpert * 2) + (Skillmaster * 3);
			console.log(" =-=-=- Skillpoints: " + Skillpoints + " Trained " + Skilltrained + " Expert " + Skillexpert + " Master " + Skillmaster);

			setAttrs({
				skilltotal : Skillpoints
			});
		});
	});
</script>

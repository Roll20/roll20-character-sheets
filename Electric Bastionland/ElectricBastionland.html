<div class="bastionland-background">
  <div class="bastionland-wrapper">
    <!-- <h1 data-i18n="bastionland_title"></h1> -->
    <img src="https://i.imgur.com/r2ek889.png" />
    <div class="bastionland-header">
      <div class="bastionland-header__grid">
        <div class="bastionland-header__item gridcolumn__six">
          <div class="bastionland-header__label" data-i18n="character_name"></div>
          <input class="bastionland-header__input" name="attr_character_name" type="text" />
        </div>
        <div class="bastionland-header__tinyitem gridcolumn__one">
          <div class="bastionland-header__label" data-i18n="failed_career_number"></div>
          <input class="bastionland-header__tinyinput" name="attr_failed_career_number" type="text" />
        </div>
        <div class="bastionland-header__item gridcolumn__five">
          <div class="bastionland-header__label" data-i18n="failed_career"></div>
          <input class="bastionland-header__input" name="attr_failed_career" type="text" />
        </div>
        <div class="bastionland-header__item gridcolumn__twelve">
          <div class="bastionland-header__label" data-i18n="debtors"></div>
          <input class="bastionland-header__input" name="attr_debtors" type="text" />
        </div>
      </div>
    </div>
    <!-- <div class="bastionland-nav">
      <label class="bastionland-nav__item">
        <input class="bastionland-nav__hide" type="radio" name="attr_nav" value="arms" />
        <div class="bastionland-nav__label" data-i18n="arms"></div>
      </label>
      <label class="bastionland-nav__item">
        <input class="bastionland-nav__hide" type="radio" name="attr_nav" value="inventory" />
        <div class="bastionland-nav__label" data-i18n="inventory"></div>
      </label>
    </div> -->
    <input class="bastionland-nav__hide" type="hidden" name="attr_nav" />
    <div class="bastionland-body">
      <div class="bastionland-body__stats">
        
        <div class="bastionland-stat">
          <div class="bastionland-stat__header">
            <div class="bastionland-stat__title" data-i18n="hit_protection"></div>
          </div>
          <div class="bastionland-stat__body">
            <!-- hp -->
            <div class="bastionland-hp gridcolumn__two" data-i18n-title="hp_description">
              <button class="bastionland-skill__noroll" data-i18n="current_hp" type="roll" value=""></button>
              <div class="bastionland-hp__value">
                <input name="attr_hp" type="number" min="0" max="18" />
              </div>
              <div class="bastionland-stat__separator" data-i18n="stat_separator"></div>
              <div class="bastionland-hp__value">
                <input class="bastionland-hp__value" name="attr_hp_max" type="number" min="0" max="18" />
              </div>
            </div>
            <!-- impaired -->  
            <div class="bastionland-effects" data-i18n-title="impaired_description">
              <label class="bastionland-skill__noroll">
                <span class="bastionland-status" data-i18n="impaired"></span>
                <input class="bastionland-status" type="checkbox" name="attr_impaired" value="1" />
              </label>
            </div>
            <!-- blank  -->
            <div class="bastionland-skill" data-i18n-title="armour_description">
            </div>
            <!-- deprived  -->
            <div class="bastionland-effects" data-i18n-title="deprived_description">
              <label class="bastionland-skill__noroll">
                <span class="bastionland-status" data-i18n="deprived"></span>
                <input class="bastionland-status" type="checkbox" name="attr_deprived" value="1" />
              </label>
            </div> 
            <!-- armour  -->
            <div class="bastionland-skill" data-i18n-title="armour_description">
              <button class="bastionland-skill__noroll" data-i18n="armour" type="roll" value=""></button>
              <div class="bastionland-skill__value">
                <input name="attr_armour" type="number" min="0" max="3" />
              </div>
            </div>
          </div>
        </div>

        <div class="grid__border gridrow__five">
        </div>

        <div class="gridcolumn__two gridrow__five">
          <!-- arms -->
          <div class="bastionland-stat--arms">
            <div class="bastionland-stat__header">
              <div class="bastionland-stat__title" data-i18n="arms"></div>
            </div>
            <div class="collapsible-item">
              <fieldset class="repeating_arms">
                <div class="fieldset-item">
                  <div class="checkbox-cog">
                    <input type="checkbox" name="attr_options-flag" checked="checked" /><span></span>
                    <span class="toggle-icon"></span>
                  </div>
                  <input type="checkbox" name="attr_options-flag" checked="checked" hidden class="toggle" />
                  <div class="toggle-checked">
                    <div class="form">
                      <div class="form-header" data-i18n="arm_edit"></div>
                      <div class="form-body">
                        <!-- TODO Group Specific Classes -->
                        <div class="form-group">
                          <div class="gridcolumn__eight">
                            <label data-i18n="arm_name"></label>
                            <input type="text" name="attr_arm_name" data-i18n-placeholder="arm_name" />
                          </div>
                          <div class="gridcolumn__two">
                            <label data-i18n="arm_damage"></label>
                            <select name="attr_arm_damage">
                              <option value="d4">d4</option>
                              <option value="d6">d6</option>
                              <option value="d8">d8</option>
                              <option value="d10">d10</option>
                              <option value="d12">d12</option>
                            </select>
                          </div>
                          <div class="gridcolumn__two">
                            <label data-i18n="cost"></label>
                            <input type="number" name="attr_arm_cost" min="0" max="any" />
                          </div>
                        </div>
                        <div class="form-group">
                          <div class="gridcolumn__four">
                            <label data-i18n="arm_type"></label>
                            <select name="attr_arm_type">
                              <option data-i18n="equipment_type_crude_weapon"></option>
                              <option data-i18n="equipment_type_hand_weapon"></option>
                              <option data-i18n="equipment_type_field_weapon"></option>
                              <option data-i18n="equipment_type_noble_weapon"></option>
                              <option data-i18n="equipment_type_power_weapon"></option>
                              <option data-i18n="equipment_type_shock_gun"></option>
                              <option data-i18n="equipment_type_barrage_artillery"></option>
                              <option data-i18n="equipment_type_heavy_gun"></option>
                              <option data-i18n="equipment_type_prototype_weapon"></option>
                              <option data-i18n="equipment_type_explosive"></option>
                            </select>
                          </div>
                          <div class="gridcolumn__two">
                            <p></p>
                            <div class="bastionland-effects" data-i18n-title="bulky_description">
                              <label class="bastionland-skill__noroll">
                                <span class="" data-i18n="bulky"></span>
                                <input class="" type="checkbox" name="attr_arm_bulky" value="1" />
                              </label>
                            </div>
                          </div> 
                          <div class="gridcolumn__two">
                            <p></p>
                            <div class="bastionland-effects" data-i18n-title="blast_description">
                              <label class="bastionland-skill__noroll">
                                <span class="" data-i18n="blast"></span>
                                <input class="" type="checkbox" name="attr_arm_blast" value="1" />
                              </label>
                            </div>
                          </div>
                          <div class="gridcolumn__four">
                            <label data-i18n="tag"></label>
                            <input type="text" name="attr_arm_special" />
                          </div>
                        </div>
                        <!-- <div class="form-group">
                          <div class="gridcolumn__twelve">
                            <label data-i18n="item_description"></label>
                            <textarea data-i18n-placeholder="item_description" name="attr_arm_desc"></textarea>
                          </div>
                        </div> -->
                      </div>
                    </div>
                  </div>
                  <div class="toggle-unchecked">
                    <div class="bastionland-item">
                      <button type="roll" class="bastionland-attack" value="&amp;{template:electricbastionland} {{name=@{arm_name}}} {{character_name=@{character_name}}} {{blast=@{arm_blast}}} {{arm_type=@{arm_type}}} {{attack=[[{1@{arm_damage}+?{Bonus|none,0|d6|d8|d10|d12}}kh1*(1-@{impaired})+(1d4*(@{impaired}))]]}} ">
                        <div class="bastionland-attack__name gridcolumn__four">
                          <span name="attr_arm_name"></span>
                        </div>
                        <div class="bastionland-attack__type gridcolumn__three">
                          <span name="attr_arm_type"></span>
                        </div>
                        <!-- <div class="bastionland-attack__tag">
                          <span name="attr_arm_bulky"></span>
                        </div>
                        <div class="bastionland-attack__tag">
                          <span name="attr_arm_blast"></span>
                        </div>
                        <div class="bastionland-attack__type gridcolumn__two">
                          <span name="attr_arm_special"></span>
                        </div> -->
                      </button>
                      <select name="attr_arm_damage">
                        <option value="d4">d4</option>
                        <option value="d6">d6</option>
                        <option value="d8">d8</option>
                        <option value="d10">d10</option>
                        <option value="d12">d12</option>
                      </select>
                    </div>
                  </div>
                </div>
              </fieldset>
            </div>
          </div>
          
          <hr />

          <!-- inventory -->
          <div class="bastionland-stat--inventory">
            <div class="bastionland-stat__header">
              <div class="bastionland-stat__title" data-i18n="inventory"></div>
            </div>
            <div class="collapsible-item">
              <fieldset class="repeating_inventory">
                <div class="fieldset-item">
                  <div class="checkbox-cog">
                    <input type="checkbox" name="attr_options-flag" checked="checked" /><span></span>
                    <span class="toggle-icon"></span>
                  </div>
                  <input type="checkbox" name="attr_options-flag" checked="checked" hidden class="toggle" />
                  <div class="toggle-checked">
                    <div class="form">
                      <div class="form-header" data-i18n="item_edit"></div>
                      <div class="form-body">
                        <div class="form-group">
                          <div class="gridcolumn__nine">
                            <label data-i18n="item_name"></label>
                            <input type="text" name="attr_item_name" />
                          </div>
                          <div class="gridcolumn__one">
                            <label data-i18n="item_quantity"></label>
                            <input type="number" name="attr_item_qty" min="0" />
                          </div>
                          <div class="gridcolumn__two">
                            <label data-i18n="worth"></label>
                            <input type="number" name="attr_item_worth" min="0" max="any"11 />
                          </div>
                        </div>
                        <div class="form-group">
                          <div class="gridcolumn__two">
                            <p></p>
                            <div class="bastionland-effects" data-i18n-title="">
                              <label class="bastionland-skill__noroll">
                                <span class="" data-i18n="treasure"></span>
                                <input class="" type="checkbox" name="attr_item_treasure" value="1" />
                              </label>
                            </div>
                          </div> 
                          <div class="gridcolumn__ten">
                            <label data-i18n="item_type"></label>
                            <select name="attr_item_type">
                              <option data-i18n="inventory_type_general"></option>
                              <option data-i18n="inventory_type_tool"></option>
                              <option data-i18n="inventory_type_animal"></option>
                              <option data-i18n="inventory_type_servant"></option>
                              <option data-i18n="inventory_type_service"></option>
                              <option data-i18n="inventory_type_luxury"></option>
                              <option data-i18n="inventory_type_property"></option>
                              <option data-i18n="inventory_type_other"></option>
                            </select>
                              <!-- 
                              <div class="bastionland-effects" data-i18n-title="">
                              <input type="radio" id="inventory_type_general" name="attr_item_type" value="general">
                              <label for="inventory_type_general" data-i18n="inventory_type_general">general</label>
                              <input type="radio" id="inventory_type_tool" name="attr_item_type" value="tool">
                              <label for="inventory_type_tool" data-i18n="inventory_type_tool">tool</label>
                              <input type="radio" id="inventory_type_animal" name="attr_item_type" value="animal">
                              <label for="inventory_type_animal" data-i18n="inventory_type_animal">animal</label>
                              <input type="radio" id="inventory_type_servant" name="attr_item_type" value="servant">
                              <label for="inventory_type_servant" data-i18n="inventory_type_servant">servant</label>
                              <input type="radio" id="inventory_type_service" name="attr_item_type" value="service">
                              <label for="inventory_type_service" data-i18n="inventory_type_service">service</label>
                              <input type="radio" id="inventory_type_luxury" name="attr_item_type" value="luxury">
                              <label for="inventory_type_luxury" data-i18n="inventory_type_luxury">luxury</label>
                              <input type="radio" id="inventory_type_property" name="attr_item_type" value="property">
                              <label for="inventory_type_property" data-i18n="inventory_type_property">property</label>
                              <input type="radio" id="inventory_type_other" name="attr_item_type" value="other">
                              <label for="inventory_type_other" data-i18n="inventory_type_other">other</label>
                            </div> -->
                          </div>
                          <!-- <div class="gridcolumn__two">
                            <label data-i18n="tags"></label>
                            <input type="text" name="attr_item_tag" />
                          </div> -->
                        </div>
                        <div class="form-group">
                          <div class="gridcolumn__twelve">
                            <label data-i18n="item_description"></label>
                            <textarea data-i18n-placeholder="item_placeholder" name="attr_item_desc"></textarea>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="toggle-unchecked">
                    <div class="bastionland-item">
                      <div class="bastionland-inventory">
                        <div class="bastionland-inventory__name gridcolumn__four">
                          <span name="attr_item_name"></span>
                        </div>
                        <div class="bastionland-inventory__type gridcolumn__four">
                          <span name="attr_item_type"></span>
                        </div>
                        <!-- <div class="bastionland-inventory__worth gridcolumn__one">
                          <span name="attr_item_worth"></span>
                        </div>
                        <div class="bastionland-inventory__tag gridcolumn__one">
                          <span name="attr_item_treasure"></span>
                        </div> -->
                      </div>
                      <input type="number" name="attr_item_qty" min="0" />
                    </div>
                  </div>
                </div>
              </fieldset>
            </div>
          </div>
        </div>

        <!-- ability scores -->
        <div class="bastionland-stat">
          <div class="bastionland-stat__header">
            <div class="bastionland-stat__title" data-i18n="dice_rolls"></div>
          </div>
          <div class="bastionland-stat__body"">
            <!-- strength -->
            <div class="bastionland-hp gridcolumn__two" data-i18n-title="strength_description">
              <button class="bastionland-skill__name" data-i18n="strength" type="roll" value="&amp;{template:electricbastionland} {{name=^{save_strength}}} {{character_name=@{character_name}}} {{save=[[@{strength}]]}} {{roll=[[1d20cs1cf20]]}}"></button>
              <div class="bastionland-skill__value">
                <input name="attr_strength" type="number" min="0" max="18" />
              </div>
              <div class="bastionland-stat__separator" data-i18n="stat_separator"></div>
              <div class="bastionland-hp__value">
                <input class="bastionland-hp__value" name="attr_strength_max" type="number" min="0" max="18" />
              </div>
            </div>
            <!-- dexterity -->
            <div class="bastionland-hp gridcolumn__two" data-i18n-title="dexterity_description">
                <button class="bastionland-skill__name" data-i18n="dexterity" type="roll" value="&amp;{template:electricbastionland} {{name=^{save_dexterity}}} {{character_name=@{character_name}}} {{save=[[@{dexterity}]]}} {{roll=[[1d20cs1cf20]]}}"></button>
                <div class="bastionland-skill__value">
                  <input name="attr_dexterity" type="number" min="0" max="18" />
                </div>
                <div class="bastionland-stat__separator" data-i18n="stat_separator"></div>
                <div class="bastionland-hp__value">
                  <input class="bastionland-hp__value" name="attr_dexterity_max" type="number" min="0" max="18" />
                </div>
              </div>
              <!-- charisma -->
              <div class="bastionland-hp gridcolumn__two" data-i18n-title="charisma_description">
                <button class="bastionland-skill__name" data-i18n="charisma" type="roll" value="&amp;{template:electricbastionland} {{name=^{save_charisma}}} {{character_name=@{character_name}}} {{save=[[@{charisma}]]}} {{roll=[[1d20cs1cf20]]}}"></button>
                <div class="bastionland-skill__value">
                  <input name="attr_charisma" type="number" min="0" max="18" />
                </div>
                <div class="bastionland-stat__separator" data-i18n="stat_separator"></div>
                <div class="bastionland-hp__value">
                  <input class="bastionland-hp__value" name="attr_charisma_max" type="number" min="0" max="18" />
                </div>
              </div>
              <!-- luck -->
              <div class="bastionland-luck gridcolumn__two" data-i18n-title="luck_description">
                <button class="bastionland-skill__name" data-i18n="luck" type="roll" value="&amp;{template:electricbastionland} {{name=^{luck}}} {{character_name=@{character_name}}} {{luck=1}} {{roll=[[1d6]]}}"></button>
              </div>
          </div>
        </div>

        <!-- new pounds -->
        <div class="bastionland-stat">
          <div class="bastionland-stat__header">
            <div class="bastionland-stat__title" data-i18n="new_pounds"></div>
          </div>
          <div class="bastionland-stat__body"">
            <div class="bastionland-newpounds gridcolumn__two">
              <button class="bastionland-skill__noroll" data-i18n="wallet" data-i18n-title="wallet_description" type="roll" value=""></button>
              <div class="bastionland-newpounds__value">
                <input name="attr_new_pounds" type="number" min="0" max="any" />
              </div>
            </div>
            <div class="bastionland-newpounds gridcolumn__two">
              <button class="bastionland-skill__noroll" data-i18n="shared_debt" data-i18n-title="shared_debt_description" type="roll" value=""></button>
              <div class="bastionland-newpounds__value">
                <input name="attr_shared_debt" type="number" min="0" max="any" />
              </div>
            </div>
          </div>
        </div>

        <!-- intentionally left blank -->
        <!-- <div class="bastionland-skill">
        </div> -->
      </div>

      <hr />

      <!-- specials from failed career -->
      <div class="bastionland-body__gift">
        <!-- special -->
        <div class="bastionland-body__col">
          <div class="bastionland-people">
            <div class="bastionland-people__header" data-i18n="special"></div>
            <div class="bastionland-thing">
              <div class="bastionland-special__item">
                <input class="bastionland-special__input" data-i18n-placeholder="special_from_loose_change" name="attr_special_loose_change" type="text" />
              </div>
            </div>
            <div class="bastionland-thing">
              <div class="bastionland-special__item">
                <input class="bastionland-special__input" data-i18n-placeholder="special_from_hit_protection" name="attr_special_hit_protection" type="text" />
              </div>
            </div>
            <fieldset class="repeating_specials">
              <div class="bastionland-thing">
                <div class="bastionland-special__item">
                  <input class="bastionland-special__input" data-i18n-placeholder="special_from_repeating" name="attr_special_repeating" type="text" />
                </div>
              </div>
            </fieldset>
          </div>
        </div>
      </div>
      <hr />
      <div class="bastionland-body__misc">
        <!-- scars -->
        <div class="bastionland-body__col">
          <div class="bastionland-people">
            <div class="bastionland-people__header bastionland-infoavailable" data-i18n="scars" data-i18n-title="scar_description"></div>
            <div class="collapsible-item">
              <fieldset class="repeating_scars">
                <div class="fieldset-item">
                  <div class="checkbox-cog">
                    <input type="checkbox" name="attr_options-flag" checked="checked" /><span></span>
                    <span class="toggle-icon"></span>
                  </div>
                  <input type="checkbox" name="attr_options-flag" checked="checked" hidden class="toggle" />
                  <div class="toggle-checked">
                  <div class="form">
                    <div class="form-header" data-i18n="scar_edit"></div>
                    <div class="form-body">
                    <div class="form-group">
                      <div class="gridcolumn__twelve">
                        <label data-i18n="scar_name"></label>
                        <input type="text" name="attr_scars_name" data-i18n-placeholder="scar_name" />
                      </div> 
                    </div>
                    <div class="form-group">
                      <div class="gridcolumn__twelve">
                        <label data-i18n="item_description"></label>
                        <textarea data-i18n-placeholder="scar_damage_caused" name="attr_scars_description"></textarea>
                      </div> </div>
                    </div>
                  </div>
                  </div>
                  <div class="toggle-unchecked">
                    <div class="bastionland-scar__item">
                      <input class="bastionland-people__input" data-i18n-placeholder="scars_name" name="attr_scars_name" type="text" />
                    </div>
                  </div>
                </div>
              </fieldset>
            </div>
          </div>
        </div>
        <!-- people along the way -->
        <div class="bastionland-body__col">
          <div class="bastionland-people">
            <div class="bastionland-people__header bastionland-infoavailable" data-i18n="people_along_the_way" data-i18n-title="people_along_the_way_description"></div>
            <div class="collapsible-item">
              <fieldset class="repeating_people">
                <div class="fieldset-item">
                  <div class="checkbox-cog">
                    <input type="checkbox" name="attr_options-flag" checked="checked" /><span></span>
                    <span class="toggle-icon"></span>
                  </div>
                  <input type="checkbox" name="attr_options-flag" checked="checked" hidden class="toggle" />
                  <div class="toggle-checked">
                  <div class="form">
                    <div class="form-header" data-i18n="people_edit"></div>
                    <div class="form-body">
                      <div class="form-group">
                        <div class="gridcolumn__twelve">
                          <label data-i18n="name"></label>
                          <input type="text" name="attr_people_name" data-i18n-placeholder="people_name" />
                        </div>
                      </div>
                      <div class="form-group">
                        <div class="gridcolumn__twelve">
                          <label data-i18n="item_description"></label>
                          <textarea data-i18n-placeholder="people_placeholder" name="attr_people_description"></textarea>
                        </div>
                      </div>
                    </div>
                  </div>
                  </div>
                  <div class="toggle-unchecked">
                    <div class="bastionland-people__item bastionland-people__icon">
                      <input class="bastionland-people__input" data-i18n-placeholder="people_name" name="attr_people_name" type="text" />
                    </div>
                  </div>
                </div>
              </fieldset>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr />
    <div class="bastionland-body__notes">
      <div class="bastionland-people__header" data-i18n="notes"></div>
      <textarea name="attr_move_notes" class="textarea-fix"></textarea>
    </div>
  </div>
</div>
<rolltemplate class="sheet-rolltemplate-electricbastionland">
  <div class="bastionland-roll-container">

    {{#character_name}}
    <h2>{{character_name}} 
    {{#save}}<span data-i18n="rolls"></span>{{/save}}
    {{#attack}}<span data-i18n="attacks_with"></span>{{/attack}}
    {{#luck}}<span data-i18n="tests"></span>{{/luck}}
    </h2>
    {{/character_name}}

    <div class="bastionland-roll-body">

      {{#name}}
      <h1>{{name}}</h1>
      {{/name}}

      <!-- <caption>{{name}}</caption>
      {{#allprops() attack}}
         <div>{{key}}</div><div>{{value}}</div>
      {{/allprops() attack}} -->

      {{#save}}
      <div class="bastionland-roll-save">
        <div class="bastionland-roll-target">
          <span class="bastionland-roll-target-label" data-i18n="target"></span>
        </div>
        <div class="bastionland-roll-target">
          <span class="bastionland-roll-target-value">{{save}}</span>
        </div>
        <div class="bastionland-roll-result">
          <span class="bastionland-roll-result-label" data-i18n="roll"></span>
        </div>
        <div class="bastionland-roll-result">
          <span class="bastionland-roll-result-value">{{roll}}</span>
        </div>
        <div class="bastionland-roll-text">
          {{#rollWasFumble() roll }}
            <span class="bastionland-roll-result-value" data-i18n="roll_critical"></span>
          {{/rollWasFumble() roll }}
          {{#rollWasCrit() roll }}
            <span class="bastionland-roll-result-value" data-i18n="roll_critical"></span>
          {{/rollWasCrit() roll }}
          {{#rollGreater() roll save }}
            <span class="bastionland-roll-result-value" data-i18n="roll_fail"></span>
          {{/rollGreater() roll save }}
          {{#^rollGreater() roll save }}
            <span class="bastionland-roll-result-value" data-i18n="roll_success"></span>
          {{/^rollGreater() roll save }}
        </div>
      </div>
      {{/save}}

      {{#attack}}
      <div class="bastionland-roll-text">
          <span class="bastionland-roll-result-value">{{arm_type}}</span>
      </div>

      <p></p>

      <div class="bastionland-roll-save">
        <div class="bastionland-roll-result">
          <span class="bastionland-roll-result-label" data-i18n="damage"></span>
        </div>
        <div class="bastionland-roll-result">
          <span class="bastionland-roll-result-value">{{attack}}</span>
        </div>
      </div>
      {{/attack}}

      {{#luck}}
      <div class="bastionland-roll-save">
        <div class="bastionland-roll-target">
          {{#^rollLess() roll 4}}
          <span class="bastionland-roll-target-label" data-i18n="normal"></span>
          {{/^rollLess() roll 4}}
          {{#rollBetween() roll 2 3}}
          <span class="bastionland-roll-target-label" data-i18n="warning_uncommon"></span>
          {{/rollBetween() roll 2 3}}
          {{#rollWasFumble() roll}}
          <span class="bastionland-roll-target-label" data-i18n="crisis_rare"></span>
          {{/rollWasFumble() roll}}
        </div>
        <div class="bastionland-roll-result">
          <span class="bastionland-roll-result-value">{{roll}}</span>
        </div>
        
        <div class="bastionland-roll-blast">
          {{#^rollLess() roll 4}}
          <span class="bastionland-roll-result-value" data-i18n="normal_description"></span>
          {{/^rollLess() roll 4}}
          {{#rollBetween() roll 2 3}}
          <span class="bastionland-roll-result-value" data-i18n="warning_uncommon_description"></span>
          {{/rollBetween() roll 2 3}}
          {{#rollWasFumble() roll}}
          <span class="bastionland-roll-result-value" data-i18n="crisis_rare_description"></span>
          {{/rollWasFumble() roll}}
        </div>
      </div>
      {{/luck}}

      <!-- <div class="bastionland-roll-result">
        <div class="bastionland-roll-result-roll">

          {{#damage}}
          <strong data-i18n="damage"></strong>
          {{/damage}}

        </div>

        {{#tag1}}
        <div class="bastionland-roll-result-luck">
          <strong data-i18n="tags"></strong>
          <div>{{tag1}}</div>
          <div>{{tag2}}</div>
        </div>
        {{/tag1}}

      </div> -->
      <!-- <div class="bastionland-roll-tag">
        <div class="bastionland-roll-ace" data-i18n="Ace"></div>
        <div class="bastionland-roll-ace" data-i18n="Ace"></div>
        <div class="bastionland-roll-stroke" data-i18n="Stroke of Luck"></div>
        <div class="bastionland-roll-catastrophe" data-i18n="Catastrophe"></div>
      </div> -->
    </div>
  </div>
</rolltemplate>
<script type="text/worker">
  const updateBonuses = () => {
      const array = ["hp", "strength","dexterity","charisma"];

      getAttrs(array, values => {
          array.forEach(item => updateBonus(item, values[item]));
      });
  }

  const updateBonus = (stat, current_value) => {
    const max_value = getAttrs

    if (current_value > max_value)
    {
      const updateAttrs = {};
      updateAttrs[`${stat}`] = max_value;
    }

    setAttrs(updateAttrs);

    console.log(updateAttrs);
  }

  /* TODO: Stop values from increasing past _max
  ["hp", "strength","dexterity","charisma"].forEach(item => on(`change:${item}`, eventInfo => updateBonus(item, eventInfo.newValue)));
   on(`sheet:opened`, eventInfo => updateBonuses())
  */
</script>





 <div class="container compendium-drop-target npcs">
    <div class="temp-select"><!-- Remove this DIV later -->
       <i><span data-i18n="temp">Temporary Sheet Selector</span></i><br />
        <select class="type-toggle" name="attr_sheet_type">
            <option value="pc" data-i18n="PC">PC</option>
            <option value="npc" data-i18n="PC-n">NPC</option>
            <option value="ship" data-i18n="Spaceship">Spaceship</option>
            <option value="npc-ship" data-i18n="Spaceship-n">NPC Spaceship</option>
        </select>
    </div>
    <input class="type-toggle" name="attr_sheet_type" type="hidden" value="pc" />
    
    <!--~:+:~ Start of the PC Sheet ~:+:~-->
    <div class="pc npc">
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Burn%20Bryte%20by%20Roll20/images/Logo.png" alt="Burn Bryte" />
        <div class="pc-hide char-info">
            <div class="char-section"><input type="text" name="attr_character_name" placeholder="Character name" title="@{character_name}" /><label data-i18n="name">Name</label></div>
            <div class="char-section"><input type="text" name="attr_species" placeholder="Species" title="@{species}" /><label data-i18n="species">Species</label></div>
            <div class="char-section"><input type="text" name="attr_culture" placeholder="Culture" title="@{culture}" /><label data-i18n="culture">Culture</label></div>
            <div class="char-section"><input type="text" name="attr_culture_border" placeholder="Border" title="@{culture_border}" /><label data-i18n="border">Border</label></div>
            <div class="char-section"><input type="text" name="attr_culture_diversity" placeholder="Diversity" title="@{culture_diversity}" /><label data-i18n="culture-d">Diversity</label></div>
            <div class="char-section"><input type="text" name="attr_culture_economic" placeholder="Economic status" title="@{culture_economic}" /><label data-i18n="culture-e">Economic Status</label></div>
            <div class="char-section"><input type="text" name="attr_culture_population"placeholder="Population density" title="@{culture_population}" /><label data-i18n="culture-p">Population Density</label></div>
        </div>
        <div class="npc-hide char-info">
            <div class="char-section"><input type="text" name="attr_character_name" placeholder="Character name" title="@{character_name}" /><label data-i18n="name">Name</label></div>
            <div class="char-section"><input type="text" name="attr_challenge_level" placeholder="Challenge level" title="@{challenge_level}" /><label data-i18n="challenge-l">Challenge Level</label></div>
            <div class="char-section"><input type="text" name="attr_size" placeholder="Size" title="@{size}" value="1" placeholder="1" /><label data-i18n="size">Size</label></div>
        </div>
        <!--~:+:~ Row with Movement/Health/Conditions ~:+:~-->
        <div class="status-row">
            <div class="npc-hide status-section">
                <select name="attr_npc_initiative">
                    <option value="d4" data-i18n="d4">d4</option>
                    <option value="d6" data-i18n="d6">d6</option>
                    <option value="d8" data-i18n="d8">d8</option>
                    <option value="d10" data-i18n="d10">d10</option>
                    <option value="d12" data-i18n="d12">d12</option>
                </select>
                <button type="roll" name="roll_ship" value="&{template:bbrtye} {{matches=[[2@{npc_initiative}]]}} {{name=initiative (@{npc_initiative})}} {{character=@{character_name}}}" data-i18n="initiative">Initiative</button>
            </div>
            <div class="status-section"><input type="text" name="attr_movement_speed" placeholder="5 Squares" title="@{movement_speed}" /><label data-i18n="movement-s">Movement Speed</label></div>
            <div class="status-section">
                <input type="number" name="attr_health_level" min="0" placeholder="0" /> / 
                <input type="number" name="attr_health_level_max" min="0" value="3" placeholder="3" />
                <label data-i18n="health-l">Health Levels</label>
            </div>
            <div class="status-section">
                <div class="condition-heart condition-heart-minor"><input type="checkbox" name="attr_condition_positive_minor" value="positive minor"  /><span>k</span><span>+</span></div>
                <div class="condition-heart condition-heart-moderate"><input type="checkbox" name="attr_condition_positive_moderate" value="positive moderate"  /><span>k</span><span>+</span></div>
                <div class="condition-heart condition-heart-significant"><input type="checkbox" name="attr_condition_positive_significant" value="positive significant" /><span>k</span><span>+</span></div>
                <div class="condition-heart condition-heart-significant"><input type="checkbox" name="attr_condition_negative_significant" value="negative significant"  /><span>k</span><span>-</span></div>
                <div class="condition-heart condition-heart-moderate"><input type="checkbox" name="attr_condition_negative_moderate" value="negative moderate"  /><span>k</span><span>-</span></div>
                <div class="condition-heart condition-heart-minor"><input type="checkbox" name="attr_condition_negative_minor" value="negative minor" /><span>k</span><span>-</span></div>
                <label class="conditions-label" data-i18n="conditions">Conditions</label>
            </div>
        </div>
        <!--~:+:~ Row for Nova Points & Turn Actions ~:+:~-->
        <div class="nova-row">
            <div class="pc-hide nova-section">
                <div class="nova-section-row">
                    <label data-i18n="nova-p">Nova Points:</label>
                    <input type="number" name="attr_nova_points" min="0" value="0" title=@{nova_points} />
                   <div class="nova-init pc-hide">
                        <div class="section-heading"><label title="Initiative toggle data-i18n="init-toggle"">Initiative Toggle</label></div>
                        <input type="hidden" name="attr_initiative" value="mt" />
                        <div class="square"><input class="radio-header-init" type="checkbox" name="attr_initiative_toggle" value="mt" /><div class="box-check">3</div></div>
                    </div>
                </div>
                <div class="nova-section-row">
                    <input class="radio-header-dice" type="checkbox" name="attr_dice_used" value="1" title="Reset checkboxes" />
                    <div class="section-heading"><label data-i18n="dice-u">Dice Used:</label></div>
                    <div class="square"><input type="checkbox" name="attr_d4" value="1" /><div class="box-check">3</div></div><label data-i18n="d4" style="text-transform: capitalize;">D4</label>
                    <div class="square"><input type="checkbox" name="attr_d6" value="1" /><div class="box-check">3</div></div><label data-i18n="d6" style="text-transform: capitalize;">D6</label>
                    <div class="square"><input type="checkbox" name="attr_d8" value="1" /><div class="box-check">3</div></div><label data-i18n="d8" style="text-transform: capitalize;">D8</label>
                    <div class="square"><input type="checkbox" name="attr_d10" value="1" /><div class="box-check">3</div></div><label data-i18n="d10" style="text-transform: capitalize;">D10</label>
                    <div class="square"><input type="checkbox" name="attr_d12" value="1" /><div class="box-check">3</div></div><label data-i18n="d12" style="text-transform: capitalize;">D12</label>
                </div>
            </div>
            <div class="nova-section">
                <div class="nova-section-row">
                    <input type="hidden" name="attr_complexity" value="@{action}" />
                    <input class="radio-header-turn" type="radio" name="attr_action" value="?{Complexity|2}" title="Query for complexity" />
                    <div class="section-heading"><label data-i18n="current-t">Current Turn Actions:</label></div>
                    <div class="square"><input type="radio" name="attr_action" value="2" title="Complexity 2" checked="checked" /><div class="box-check">3</div></div>
                    <div class="square"><input type="radio" name="attr_action" value="3" title="Complexity 3" /><div class="box-check">3</div></div>
                    <div class="square"><input type="radio" name="attr_action" value="4" title="Complexity 4" /><div class="box-check">3</div></div>
                    <div class="square"><input type="radio" name="attr_action" value="5" title="Complexity 5" /><div class="box-check">3</div></div>
                    <div class="square"><input type="radio" name="attr_action" value="6" title="Complexity 6" /><div class="box-check">3</div></div>
                    <div class="square"><input type="radio" name="attr_action" value="7" title="Complexity 7" /><div class="box-check">3</div></div>
                    <div class="square"><input type="radio" name="attr_action" value="8" title="Complexity 8" /><div class="box-check">3</div></div>
                </div>
                <div class="nova-section-row">
                    <input class="radio-header-action" type="radio" name="attr_success" value="0" />
                    <div class="section-heading"><label data-i18n="successful-a" title="Reset checkboxes">Successful Actions:</label></div>
                    <div class="square"><input type="radio" name="attr_success" value="1" /><div class="box-check">3</div></div>
                    <div class="square"><input type="radio" name="attr_success" value="2" /><div class="box-check">3</div></div>
                    <div class="square"><input type="radio" name="attr_success" value="3" /><div class="box-check">3</div></div>
                    <div class="square square-dashed"><input type="radio" name="attr_success" value="4" /><div class="box-check">3</div></div>
                    <div class="square square-dashed"><input type="radio" name="attr_success" value="5" /><div class="box-check">3</div></div>
                    <div class="square square-dashed"><input type="radio" name="attr_success" value="6" /><div class="box-check">3</div></div>
                </div>
            </div>
        </div>
        <!--~:+:~ The check boxes for Dice Rolling to earn Nova Points ~:+:~-->
        <br />
        <!--~:+:~ Skills section ~:+:~-->
        <div class="skill-row">
            <input class="condition-triggers" name="attr_conditions" type="hidden" value="" />
            <!--~:+:~ Mental Skills section ~:+:~-->
            <div class="skill-section">
                <input class="condition-triggers" type="hidden" name="attr_condition_mental" value="" />
                <div class="npc-hide"><input type="number" name="attr_mental" value="" /></div>
                <div class="condition-heart">
                    <input class="condition-triggers" type="checkbox" name="attr_condition_mental" value="positive" />
                    <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                </div>
                <div class="condition-heart">
                    <input class="condition-triggers" type="checkbox" name="attr_condition_mental" value="negative" />
                    <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                </div>
                <h3 data-i18n="mental">Mental</h3>
                <!--~:+:~ Computers skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_computers" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_computers" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_computers" value="&{template:bbrtye} {{matches=[[@{complexity}d@{computers}@{initiative}]]}} {{name=Computers (d@{computers})}} {{character=@{character_name}}}">
                        <label data-i18n="computers">Computers: </label>
                    </button>
                    <select name="attr_computers" title="@{computers}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                         <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_computers" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                <!--~:+:~ Engineering skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_engineering" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_engineering" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_engineering" value="&{template:bbrtye} {{matches=[[@{complexity}d@{engineering}@{initiative}]]}} {{name=Engineering (d@{engineering})}} {{character=@{character_name}}}">
                        <label data-i18n="engineering">Engineering: </label>
                    </button>
                    <select name="attr_engineering" title="@{engineering}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                         <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_engineering" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                 </div>
                <!--~:+:~ Medicine skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_medicine" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_medicine" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_medicine" value="&{template:bbrtye} {{matches=[[@{complexity}d@{medicine}@{initiative}]]}} {{name=Medicine (d@{medicine})}} {{character=@{character_name}}}">
                        <label data-i18n="medicine">Medicine: </label>
                    </button>
                    <select name="attr_medicine" title="@{medicine}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                       <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_medicine" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                <!--~:+:~ Knowledge skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_knowledge" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_knowledge" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_knowledge" value="&{template:bbrtye} {{matches=[[@{complexity}d@{knowledge}@{initiative}]]}} {{name=knowledge (d@{knowledge})}} {{character=@{character_name}}}">
                        <label data-i18n="knowledge">Knowledge: </label>
                    </button>
                    <select name="attr_knowledge" title="@{knowledge}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_knowledge" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                <!--~:+:~ Perception skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_perception" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_perception" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_perception" value="&{template:bbrtye} {{matches=[[@{complexity}d@{perception}@{initiative}]]}} {{name=perception (d@{perception})}} {{character=@{character_name}}}">
                        <label data-i18n="perception">Perception: </label>
                    </button>
                    <select name="attr_perception" title="@{perception}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_perception" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                <!--~:+:~ Streetwise skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_streetwise" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_streetwise" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_streetwise" value="&{template:bbrtye} {{matches=[[@{complexity}d@{streetwise}@{initiative}]]}} {{name=streetwise (d@{streetwise})}} {{character=@{character_name}}}">
                        <label data-i18n="streetwise">Streetwise: </label>
                    </button>
                    <select name="attr_streetwise" title="@{streetwise}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_streetwise" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
            </div>
            <!--~:+:~ Physical Skills section ~:+:~-->
            <div class="skill-section">
                <input class="condition-triggers" type="hidden" name="attr_condition_physical" value="" />
                <div class="npc-hide"><input type="number" name="attr_physical" value="" /></div>
                <div class="condition-heart">
                    <input class="condition-triggers" type="checkbox" name="attr_condition_physical" value="positive" />
                    <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                </div>
                <div class="condition-heart">
                    <input class="condition-triggers" type="checkbox" name="attr_condition_physical" value="negative" />
                    <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                </div>
                <h3 data-i18n="physical">Physical</h3>
                <!--~:+:~ Athletics skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_athletics" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_athletics" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_athletics" value="&{template:bbrtye} {{matches=[[@{complexity}d@{athletics}@{initiative}]]}} {{name=athletics (d@{athletics})}} {{character=@{character_name}}}">
                        <label data-i18n="athletics">Athletics: </label>
                    </button>
                    <select name="attr_athletics" title="@{athletics}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_athletics" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                <!--~:+:~ Melee skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_melee" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_melee" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_melee" value="&{template:bbrtye} {{matches=[[@{complexity}d@{melee}@{initiative}]]}} {{name=melee (d@{melee})}} {{character=@{character_name}}}">
                        <label data-i18n="melee">Melee: </label>
                    </button>
                    <select name="attr_melee" title="@{melee}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_melee" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                 <!--~:+:~ Power skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_power" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_power" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_power" value="&{template:bbrtye} {{matches=[[@{complexity}d@{power}@{initiative}]]}} {{name=power (d@{power})}} {{character=@{character_name}}}">
                        <label data-i18n="power">Power: </label>
                    </button>
                    <select name="attr_power" title="@{power}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_power" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                 <!--~:+:~ Ranged skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_ranged" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_ranged" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_ranged" value="&{template:bbrtye} {{name=Ranged Roll}} {{character=@{character_name}}} {{matches=[[@{complexity}d@{ranged}@{initiative}]]}} {{name=power (d@{ranged})}} {{character=@{character_name}}}">
                        <label data-i18n="ranged">Ranged: </label>
                    </button>
                    <select name="attr_ranged" title="@{ranged}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_ranged" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                 <!--~:+:~ Skullduggery skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_skullduggery" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_skullduggery" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_skullduggery" value="&{template:bbrtye} {{matches=[[@{complexity}d@{skullduggery}@{initiative}]]}} {{name=skullduggery (d@{skullduggery})}} {{character=@{character_name}}}">
                        <label data-i18n="skullduggery">Skullduggery: </label>
                    </button>
                    <select name="attr_skullduggery" title="@{skullduggery}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_skullduggery" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                <!--~:+:~ Stealth skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_stealth" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_stealth" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_stealth" value="&{template:bbrtye} {{matches=[[@{complexity}d@{stealth}@{initiative}]]}} {{name=stealth (d@{stealth})}} {{character=@{character_name}}}">
                        <label data-i18n="stealth">Stealth: </label>
                    </button>
                    <select name="attr_stealth" title="@{stealth}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_stealth" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
            </div>
            <!--~:+:~ Social Skills section ~:+:~-->
            <div class="skill-section">
                <input class="condition-triggers" type="hidden" name="attr_condition_social" value="" />
                <div class="npc-hide"><input type="number" name="attr_social" value="" /></div>
                <div class="condition-heart">
                    <input class="condition-triggers" type="checkbox" name="attr_condition_social" value="positive" />
                    <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                </div>
                <div class="condition-heart">
                    <input class="condition-triggers" type="checkbox" name="attr_condition_social" value="negative" />
                    <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                </div>
                <h3 data-i18n="social">Social</h3>
                <!--~:+:~ Deceive skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_deceive" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_deceive" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_deceive" value="&{template:bbrtye} {{matches=[[@{complexity}d@{deceive}@{initiative}]]}} {{name=deceive (d@{deceive})}} {{character=@{character_name}}}">
                        <label data-i18n="deceive">Deceive: </label>
                    </button>
                    <select name="attr_deceive" title="@{deceive}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_deceive" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                <!--~:+:~ Decorum skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_decorum" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_decorum" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_decorum" value="&{template:bbrtye} {{matches=[[@{complexity}d@{decorum}@{initiative}]]}} {{name=decorum (d@{decorum})}} {{character=@{character_name}}}">
                        <label data-i18n="decorum">Decorum: </label>
                    </button>
                    <select name="attr_decorum" title="@{decorum}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_decorum" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                <!--~:+:~ Emapthy skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_empathy" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_empathy" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_empathy" value="&{template:bbrtye} {{matches=[[@{complexity}d@{empathy}@{initiative}]]}} {{name=empathy (d@{empathy})}} {{character=@{character_name}}}">
                        <label data-i18n="empathy">Empathy: </label>
                    </button>
                    <select name="attr_empathy" title="@{empathy}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_empathy" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                 <!--~:+:~ Perform skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_perform" value="" />
                    <input type="hidden" name="attr_perform_roll" value="?{Complexity|2}d@{perform}" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_perform" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_perform" value="&{template:bbrtye} {{matches=[[@{complexity}d@{perform}@{initiative}]]}} {{name=perform (d@{perform})}} {{character=@{character_name}}}">
                        <label data-i18n="perform">Perform: </label>
                    </button>
                    <select name="attr_perform" title="@{perform}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_perform" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                 <!--~:+:~ Presence skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_presence" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_presence" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_presence" value="&{template:bbrtye} {{matches=[[@{complexity}d@{presence}@{initiative}]]}} {{name=presence (d@{presence})}} {{character=@{character_name}}}">
                        <label data-i18n="presence">Presence: </label>
                    </button>
                    <select name="attr_presence" title="@{presence}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_presence" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
                 <!--~:+:~ suave skill ~:+:~-->
                <div class="skill">
                    <input class="condition-triggers" type="hidden" name="attr_condition_suave" value="" />
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_suave" value="positive" />
                            <span>k</span><span>+</span><!--~:+:~ Positive Heart ~:+:~-->
                        </div>
                    </div>
                    <button type="roll" name="roll_suave" value="&{template:bbrtye} {{matches=[[@{complexity}d@{suave}@{initiative}]]}} {{name=Suave (d@{suave})}} {{character=@{character_name}}}">
                        <label data-i18n="suave">suave: </label>
                    </button>
                    <select name="attr_suave" title="@{suave}">
                        <option value="4" selected="selected" data-i18n="d4">d4</option>
                        <option value="6" data-i18n="d6">d6</option>
                        <option value="8" data-i18n="d8">d8</option>
                        <option value="10" data-i18n="d10">d10</option>
                        <option value="12" data-i18n="d12">d12</option>
                    </select>
                    <div class="skill-heart-container">
                        <div class="condition-heart">
                            <input class="condition-triggers" type="checkbox" name="attr_condition_suave" value="negative" />
                            <span>k</span><span>-</span><!--~:+:~ Negative Heart ~:+:~-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--~:+:~ Story Path, Special Abilities & Items section ~:+:~-->
        <div class="spec-row">
            <!--~:+:~ Story Path section ~:+:~-->
            <div class="pc-hide story-section">
                <h3 data-i18n="story-p">Story Path:</h3>
                <div class="repeating-container">
                    <fieldset class="repeating_story">
                        <input type="checkbox" class="settings-flag" name="attr_act_flag" checked="checked" /><span>i</span>
                        <div class="settings">
                            <input type="text" name="attr_story" placeholder="Create Masterpiece" /><label data-i18n="story-p">Story Path</label><br />
                            <label data-i18n="description">Description</label>
                            <textarea name="attr_story_path" placeholder="Story path description"></textarea>
                            <hr />
                            <div class="story-event">
                                <label data-i18n="event-1">Event 1</label><input type="text" name="attr_event_1" placeholder="Event name" /><br />
                                <label data-i18n="how-to-c">How to complete</label><textarea name="attr_event_1_howto" placeholder="How to complete the event"></textarea>
                                <label data-i18n="reward">Reward</label><textarea name="attr_event_1_reward" placeholder="Event rewards"></textarea>
                            </div>
                            <hr />
                            <div class="story-event">
                                <label data-i18n="event-2">Event 2</label><input type="text" name="attr_event_2" placeholder="Event name" /><br />
                                <label data-i18n="how-to-c">How to complete</label><textarea name="attr_event_2_howto" placeholder="How to complete the event"></textarea>
                                <label data-i18n="reward">Reward</label><textarea name="attr_event_2_reward" placeholder="Event rewards"></textarea>
                            </div>
                            <hr />
                            <div class="story-event">
                                <label data-i18n="event-3">Event 3</label><input type="text" name="attr_event_3" placeholder="Event name" /><br />
                                <label data-i18n="how-to-c">How to complete</label><textarea name="attr_event_3_howto" placeholder="How to complete the event"></textarea>
                                <label data-i18n="reward">Reward</label><textarea name="attr_event_3_reward" placeholder="Event rewards"></textarea>
                            </div>
                            <hr />
                            <div class="story-event">
                                <label data-i18n="event-4">Event 4</label><input type="text" name="attr_event_4" placeholder="Event name" /><br />
                                <label data-i18n="how-to-c">How to complete</label><textarea name="attr_event_4_howto" placeholder="How to complete the event"></textarea>
                                <label data-i18n="reward">Reward</label><textarea name="attr_event_4_reward" placeholder="Event rewards"></textarea>
                            </div>
                            <hr />
                            <div class="story-event">
                                <label data-i18n="event-5">Event 5</label><input type="text" name="attr_event_5" placeholder="Event name" /><br />
                                <label data-i18n="how-to-c">How to complete</label><textarea name="attr_event_5_howto" placeholder="How to complete the event"></textarea>
                                <label data-i18n="reward">Reward</label><textarea name="attr_event_5_reward" placeholder="Event rewards"></textarea>
                            </div>
                        </div>
                        <div class="display">
                            <input class="display-flag" type="checkbox" name="attr_story_flag">
                            <h4><span name="attr_story"></span></h4>
                            <div class="details">
                                <span name="attr_story_path"></span>
                                <hr />
                            </div>
                            <div class="story-event">
                                <input class="display-flag" type="checkbox" name="attr_display_flag_event_1">
                                <label data-i18n="event-1">Event 1:</label><div class="story-act"><span name="attr_event_1"></span></div>
                                <div class="square"><input type="checkbox" name="attr_event_1_checkbox" /><div class="box-check">3</div></div>
                                <div class="details">
                                    <div><h4 data-i18n="how-to-c">How to complete </h4><span name="attr_event_1_howto"></span></div>
                                    <div><h4 data-i18n="reward">Reward </h4><span name="attr_event_1_reward"></span></div>
                                </div>
                                <hr />
                            </div>
                            <div class="story-event">
                                <input class="display-flag" type="checkbox" name="attr_display_flag_event_2">
                                <label data-i18n="event-2">Event 2:</label><div class="story-act"><span name="attr_event_2"></span></div>
                                <div class="square"><input type="checkbox" name="attr_event_2_checkbox" /><div class="box-check">3</div></div>
                                <div class="details">
                                    <div><h4 data-i18n="how-to-c">How to complete </h4><span name="attr_event_2_howto"></span></div>
                                    <div><h4 data-i18n="reward">Reward </h4><span name="attr_event_2_reward"></span></div>
                                </div>
                                <hr />
                            </div>
                            <div class="story-event">
                                <input class="display-flag" type="checkbox" name="attr_display_flag_event_3">
                                <label data-i18n="event-3">Event 3:</label><div class="story-act"><span name="attr_event_3"></span></div>
                                <div class="square"><input type="checkbox" name="attr_event_3_checkbox" /><div class="box-check">3</div></div>
                                <div class="details">
                                    <h4 data-i18n="how-to-c">How to complete </h4><span name="attr_event_3_howto"></span>
                                    <h4 data-i18n="reward">Reward </h4><span name="attr_event_3_reward"></span>
                                </div>
                                <hr />
                            </div>
                            <div class="story-event">
                                <input class="display-flag" type="checkbox" name="attr_display_flag_event_4">
                                <label data-i18n="event-4">Event 4:</label><div class="story-act"><span name="attr_event_4"></span></div>
                                <div class="square"><input type="checkbox" name="attr_event_4_checkbox" /><div class="box-check">3</div></div>
                                <div class="details">
                                    <h4 data-i18n="how-to-c">How to complete </h4><span name="attr_event_4_howto"></span>
                                    <h4 data-i18n="reward">Reward </h4><span name="attr_event_4_reward"></span>
                                </div>
                                <hr />
                            </div>
                            <div class="story-event">
                                <input class="display-flag" type="checkbox" name="attr_display_flag_event_5">
                                <label data-i18n="event-5">Event 5:</label><div class="story-act"><span name="attr_event_5"></span></div>
                                <div class="square"><input type="checkbox" name="attr_event_5_checkbox" /><div class="box-check">3</div></div>
                                <div class="details">
                                    <h4 data-i18n="how-to-c">How to complete </h4><span name="attr_event_5_howto"></span>
                                    <h4 data-i18n="reward">Reward </h4><span name="attr_event_5_reward"></span>
                                </div>
                                <hr />
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
            <!--~:+:~ Attacks section ~:+:~-->
            <div class="npc-hide special-section">
                <h3 data-i18n="attacks">Attacks</h3>
                <div class="repeating-container">
                    <fieldset class="repeating_attacks">
                        <input type="checkbox" class="settings-flag" name="attr_attacks_flag" checked="checked" /><span>i</span>
                        <div class="settings">
                            <input type="text" name="attr_attack" placeholder="Attack name" data-i18n="attack" /><label>Attack</label>
                            <select name="attr_type">
                                <option value="Mental" data-i18n="mental">Mental</option>
                                <option value="Physical" data-i18n="physical">Physical</option>
                                <option value="Social" data-i18n="social">Social</option>
                            </select><label>Type</label>
                            <input type="text" name="attr_complexity" placeholder="Complexity" /><label data-i18n="complexity">Complexity</label>
                            <input type="text" name="attr_range" placeholder="Range" /><label data-i18n="range">Range</label>
                            <label data-i18n="on-h">On hit</label>
                            <textarea name="attr_details"></textarea>
                        </div>
                        <div class="display">
                            <input class="display-flag" type="checkbox" name="attr_display_flag">
                            <div class="repeat-row">
                                <b><span name="attr_attack"></span></b>
                            </div>
                            <div class="repeat-row details">
                                <b><span data-i18n="type">Type </span></b><span name="attr_type"></span><br/>
                                <b><span data-i18n="complexity">Complexity </span></b><span name="attr_complexity"></span><br/>
                                <b><span data-i18n="range">Range </span></b><span name="attr_range"></span><br />
                                <b><span data-i18n="on-h">On hit </span></b><span name="attr_details"></span>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
            <!--~:+:~ Special Abilities section ~:+:~-->
            <div class="special-section">
                <h3 data-i18n="special-a">Special Abilities</h3>
                <div class="repeating-container">
                    <fieldset class="repeating_abilities">
                        <input type="checkbox" class="settings-flag" name="attr_special_ability_flag" checked="checked" /><span>i</span>
                        <div class="settings">
                            <input type="text" name="attr_ability" placeholder="Ability name" /><label data-i18n="ability-n">Special Ability Name</label>
                            <input type="text" name="attr_prerequisite" placeholder="Ability prerequisite" /><label data-i18n="ability-p">Special Ability Prerequisite</label>
                            <label data-i18n="description">Description</label>
                            <textarea name="attr_description"></textarea>
                        </div>
                        <div class="display">
                            <input class="display-flag" type="checkbox" name="attr_display_flag">
                            <div class="repeat-row">
                                <b><span name="attr_ability"></span></b><br />
                                <i><span name="attr_prerequisite"></span></i>
                            </div>
                            <div class="repeat-row details">
                                <span name="attr_description"></span>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <h3 class="pc-hide" data-i18n="special-n">Nova Abilities</h3>
                <div class="pc-hide repeating-container">
                    <fieldset class="repeating_nova">
                        <input type="checkbox" class="settings-flag" name="attr_special_ability_flag" checked="checked" /><span>i</span>
                        <div class="settings">
                            <input type="text" name="attr_ability" placeholder="Ability name" /><label data-i18n="ability-n-n">Nova Ability Name</label>
                            <input type="text" name="attr_prerequisite" placeholder="Ability prerequisite" /><label data-i18n="ability-n-p">Nova Ability Prerequisite</label>
                            <label data-i18n="description">Description</label>
                            <textarea name="attr_description"></textarea>
                        </div>
                        <div class="display">
                            <input class="display-flag" type="checkbox" name="attr_display_flag">
                            <div class="repeat-row">
                                <b><span name="attr_ability"></span></b><br />
                                <i><span name="attr_prerequisite"></span></i>
                            </div>
                            <div class="repeat-row details">
                                <span name="attr_description"></span>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="special-section">
            <!--~:+:~ Items section ~:+:~-->
                <h3 data-i18n="equipment">Equipment</h3>
                <div class="repeat-row" style="text-align: center">
                    <input type="number" name="attr_shield_health_level" min="0" placeholder="0"" /> / 
                    <input type="number" name="attr_shield_health_level_max" min="0" placeholder="3"" />
                    <label data-i18n="health-s" style="text-align: center; width: auto;">Shield Health Levels</label>
                </div>
                <div class="repeating-container">
                    <fieldset class="repeating_items">
                        <input type="checkbox" class="settings-flag" name="attr_items_flag" checked="checked" /><span>i</span>
                        <div class="settings">
                            <div class="repeat-row">
                                <input type="text" name="attr_item" placeholder="Personal Shield Generator" /><label data-i18n="item-n">Item Name</label>
                            </div>
                            <div class="repeat-row">
                                <input type="text" name="attr_type" placeholder="Armor" /><label data-i18n="item-t">Item Type</label>
                            </div>
                            <div class="repeat-row">
                                <input type="number" name="attr_health" min="0" value="" placeholder="3" /><span> / </span>
                                <input type="number" name="attr_health_max" min="0" value="0" placeholder="3" /><br />
                                <label data-i18n="charge-h">Charges or Health</label>
                            </div>
                            <div class="repeat-row">
                                <input type="text" name="attr_qualities" value="none" placeholder="" /><label data-i18n="qualities">Qualities</label>
                            </div>
                            <label data-i18n="description">Description</label>
                            <textarea name="attr_description"></textarea>
                        </div>
                        <div class="display">
                            <input class="display-flag" type="checkbox" name="attr_display_flag">
                            <input class="item-health-hider" type="hidden" name="attr_health_max" value="0" />
                            <div class="repeat-row">
                                <b><span name="attr_item"></span></b><br/>
                                <i><span name="attr_type"></span></i>
                            </div>
                            <div class="repeat-row health-row">
                                <input type="number" name="attr_health" min="0" value="@{health_max}" placeholder="3" />
                                <span>/</span>
                                <span name="attr_health_max"></span>
                            </div>
                            <div class="repeat-row details">
                                <div style="width: 100%;"><b><span data-i18n="qualities">Qualities: </span></b><span name="attr_qualities"></span></div>
                                <span name="attr_description"></span>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </div><!-- End of PC Sheet -->

    <!--~:+:~ Start of the Ship Sheet ~:+:~-->
    <div class="ship">
        <div class="char-info">
            <img src="https://raw.githubusercontent.com/clevett/Epoch-Nova/master/Logo.png" alt="Burn Bryte" />
        </div>
        <!--~:+:~ Row with Movement/Health/Conditions ~:+:~-->
        <div class="status-row">
            <div class="status-section"><input type="number" name="attr_unsealed_argent" min="0" placeholder="0" title="@{unsealed_argent}"><label data-i18n="unsealed-a">Unsealed Argent</label></div>
            <div class="status-section">
                <input type="number" name="attr_health_level" min="0" placeholder="0" title="@{health_level}" /> / 
                <input type="number" name="attr_health_level_max" min="0" value="3" placeholder="3" title="@{health_level_max}" /><label data-i18n="mi">MI Health Levels</label>
            </div>
            <div class="status-section"><input type="number" name="attr_livability" min="0" placeholder="1" title="@{livability}"><label data-i18n="livability">Livability</label></div>
            <div class="status-section"><input type="number" name="attr_sealed_argent" min="0" placeholder="0" title="@{sealed_argent}"><label data-i18n="sealed-a">Sealed Argent</label></div>
        </div>
        <div class="repeating-container modules">
            <h3 data-i18n="ship-mod">Ship Modules</h3>
            <fieldset class="repeating_modules">
                <input type="checkbox" class="settings-flag" name="attr_modules_flag" checked="checked" /><span>i</span>
                <div class="settings">
                    <input type="text" name="attr_name" placeholder="Digital Airlock Controls"><label data-i18n="name">Name</label>
                    <input type="text" name="attr_size" placeholder="1 x 1" /><label data-i18n="size">Size</label>
                    <label data-i18n="effect">Effect</label>
                    <textarea name="attr_effect"></textarea>
                </div>
                <div class="display">
                    <input class="display-flag" type="checkbox" name="attr_display_flag">
                    <div class="repeat-row">
                        <b><span name="attr_name"></span></b><br />
                        <i><span name="attr_combat_data"></span><i>
                    </div>
                    <div class="repeat-row details">
                        <span name="attr_size"></span><br />
                        <span name="attr_effect"></span>
                    </div>
                </div>
            </fieldset>
        </div>
    </div><!-- End of Ship Sheet -->

    <!--~:+:~ Start of the NPC Ship Sheet ~:+:~-->
    <div class="npc-ship">
        <img src="https://raw.githubusercontent.com/clevett/Epoch-Nova/master/Logo.png" alt="Burn Bryte" />
        <div class="char-info">
            <div class="char-section"><input type="text" name="attr_character_name" placeholder="Character name" title="@{character_name}" /><label data-i18n="name">Name</label></div>
            <div class="char-section"><input type="text" name="attr_challenge_level" placeholder="Challenge level" title="@{challenge_level}" /><label data-i18n="challenge-l">Challenge Level</label></div>
            <div class="char-section"><input type="text" name="attr_size" placeholder="Size" title="@{size}" /><label data-i18n="size">Size</label></div>
        </div>
        <!--~:+:~ Row with Movement/Health/Conditions ~:+:~-->
        <div class="status-row">
            <div class="status-section"><input type="number" name="attr_speed" placeholder="0" title="@{speed}"><label data-i18n="speed">Speed</label></div>
            <div class="status-section">
                <input type="number" name="attr_health_level" min="0" placeholder="0" title="@{health_level}" /> / 
                <input type="number" name="attr_health_level_max" min="0" value="3" placeholder="3" title="@{health_level_max}" /><br />
                <label data-i18n="mi">MI Health Levels</label>
            </div>
        </div>
        <!--~:+:~ Allied Ships Section ~:+:~-->
         <div class="skill-row">
            <div class="skill-section">
                <h3 data-i18n="allied-s">Allied Ship</h3>
                <div class="skill">
                    <button type="roll" name="roll_ship" value="&{template:bbrtye} {{matches=[[?{Complexity|2}d(@{power_level})mt]]}} {{name=ship (@{power_level}d)}} {{character=@{character_name}}}">
                        <label data-i18n="power-l">Power Level: </label>
                    </button>                    
                    <select name="attr_power_level" title="@{power_level}">
                        <option value="4" data-i18n="ship-m">Minion Ship: d4</option>
                        <option value="6" data-i18n="ship-w">Weak Ship: d6</option>
                        <option value="8" data-i18n="ship-s">Standard Ship: d8</option>
                        <option value="10" data-i18n="ship-f">Formidable Ship: d10</option>
                        <option value="12" data-i18n="ship-e">Epic Ship: d12</option>
                    </select>
                </div>
            </div>
        </div>
        <!--~:+:~ Attacks & Speciali Abilities Section ~:+:~-->
        <div class="spec-row">
            <!--~:+:~ Attacks section ~:+:~-->
            <div class="special-section">
                <h3 data-i18n="attacks">Attacks</h3>
                <div class="repeating-container">
                    <fieldset class="repeating_attacks">
                        <input type="checkbox" class="settings-flag" name="attr_attacks_flag" checked="checked" /><span>i</span>
                        <div class="settings">
                            <input type="text" name="attr_attack" placeholder="Attack name" /><label data-i18n="attack">Attack</label>
                            <input type="text" name="attr_range" placeholder="Range" /><label data-i18n="range">Range</label>
                            <label data-i18n="on-h">On hit</label>
                            <textarea name="attr_details"></textarea>
                        </div>
                        <div class="display">
                            <input class="display-flag" type="checkbox" name="attr_display_flag">
                            <div class="repeat-row">
                                <b><span name="attr_attack"></span></b>
                            </div>
                            <div class="repeat-row details">
                                <span><b data-i18n="range">Range </b></span><span name="attr_range" style="margin-left: 5px;"></span><br />
                                <span><b data-i18n="on-h">On Hit </b></span><span name="attr_details" style="margin-left: 5px;"></span>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
            <!--~:+:~ Special Abilities section ~:+:~-->
            <div class="special-section">
                <h3 data-i18n="special-a">Special Abilities</h3>
                <div class="repeating-container">
                    <fieldset class="repeating_abilities">
                        <input type="checkbox" class="settings-flag" name="attr_special_ability_flag" checked="checked" /><span>i</span>
                        <div class="settings">
                            <input type="text" name="attr_ability" placeholder="Ability name" /><label data-i18n="ability-n">Ability Name</label>
                            <label data-i18n="notes"sche>Notes</label>
                            <textarea name="attr_details"></textarea>
                        </div>
                        <div class="display">
                            <input class="display-flag" type="checkbox" name="attr_display_flag">
                            <div class="repeat-row">
                                <b><span name="attr_ability"></span></b>
                            </div>
                            <div class="repeat-row details">
                                <span name="attr_details"></span>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </div>

<div class="footer">Copyright  2018 The Orr Group, LLC. All rights reserved. </div>

    <!-- COMPENDIUM DROP CATCHERS -->
    <input type="hidden" name="attr_drop_category" accept="Category">
    <input type="hidden" name="attr_drop_name" accept="Name">
    <input type="hidden" name="attr_drop_data" accept="data">
    <input type="hidden" name="attr_drop_content" accept="Content">

    <!-- COMPENDIUM DROP CATCHERS -->

</div><!-- End of Sheet Container Section -->

<!--:+:~ Roll Template for rolling without Focus ~:+:~-->
<div class="rolltemplates">
    <rolltemplate class="sheet-rolltemplate-bbrtye">
        <div class="roll-container">
            <div class="roll-body">
                <div class="roll-result">
                    {{#matches}}{{matches}}{{/matches}}
                </div>
                <div class="roll-name">
                    {{#name}}{{name}}{{/name}}
                </div>
                <div class="roll-character">
                    {{#character}}{{character}}{{/character}}
                </div>
            </div>
        </div>
    </rolltemplate>
</div>

<!--Sheet Worker-->
<script type="text/worker">

//Conditions flags are triggered
on("change:condition_positive_moderate change:condition_negative_moderate change:condition_positive_minor change:condition_negative_minor change:condition_positive_significant change:condition_negative_significant", function() {
    getAttrs(["condition_positive_minor", "condition_positive_moderate", "condition_positive_significant", "condition_negative_minor", "condition_negative_moderate", "condition_negative_significant","conditions", "condition_mental", "condition_physical", "condition_social"], function(v){
        const currentConditions = [v.condition_positive_minor, v.condition_positive_moderate, v.condition_positive_significant, v.condition_negative_minor, v.condition_negative_moderate, v.condition_negative_significant];
        const oldConditions = (v.conditions);
        let newConditions = [];
        let conditionFlags = [];

        _.each(currentConditions, function(cond) {
            if (cond != 0) {
                newConditions.push(cond);
            };
        });

        if (newConditions.includes("positive significant") && newConditions.includes("negative significant")) {
            conditionFlags.push("significantNull");
        } else if (newConditions.includes("positive significant")) {
            conditionFlags.push("significant+");
        } else if (newConditions.includes("negative significant")) {
            conditionFlags.push("significant-");
        };

        if (newConditions.includes("positive minor")) {
            conditionFlags.push("minor+");
        };

        if (newConditions.includes("negative minor")) {
            conditionFlags.push("minor-");
        };

        if (newConditions.includes("positive moderate")) {
            conditionFlags.push("moderate+");
        };

        if (newConditions.includes("negative moderate")) {
            conditionFlags.push("moderate-");
        };

        setAttrs({
            conditions: conditionFlags
        });
    });
});

// NPC!!! 
//Dice updates based on Mental Score
on("change:mental", function() {
    getAttrs(["mental"], function (v) {
        const mental = parseInt(v.mental) || 0;
        const skills = ["computers", "engineering", "medicine", "knowledge", "perception", "streetwise"];
        let die = (mental * 2);
        let newSkills = [];

        let newDice = (die >= 4 && die <= 12) ? die : (die > 12) ? 12 : 4;

        _.each(skills, function(skill) {
            newSkills[skill] = newDice;
        });

        setAttrs(newSkills);
    });
});


on("change:physical", function() {
    getAttrs(["physical"], function (v) {
        const physical = parseInt(v.physical) || 0;
        const skills = ["athletics", "melee", "power", "ranged", "skullduggery", "stealth"];
        let die = (physical * 2);
        let newSkills = [];

        let newDice = (die >= 4 && die <= 12) ? die : (die > 12) ? 12 : 4;

        _.each(skills, function(skill) {
            newSkills[skill] = newDice;
        });

        setAttrs(newSkills);
    });
});

on("change:social", function() {
    getAttrs(["social"], function (v) {
        const social = parseInt(v.social) || 0;
        const skills = ["deceive", "decorum", "empathy", "perform", "presence", "suave"];
        let die = (social * 2);
        let newSkills = [];

        let newDice = (die >= 4 && die <= 12) ? die : (die > 12) ? 12 : 4;

        _.each(skills, function(skill) {
            newSkills[skill] = newDice;
        });

        setAttrs(newSkills);
    });
});

//Conditions for NPCs
//on("change:condition_positive_significant", function() {
//    getAttrs(["condition_positive_significant", "mental", "physical", "social"], function(v) {
//        const condition = (v.condition_positive_significant);
//        let men = parseInt(v.mental) || 0;
//        let phy = parseInt(v.physical) || 0;
//        let soc = parseInt(v.social) || 0;
//
//        let newMental = (condition != 0) ? men + 1 : men - 1;
//        let newPhysical = (condition != 0) ? phy + 1 : phy - 1;
//        let newSocial = (condition != 0) ? soc + 1 : soc - 1;
//
//        setAttrs({mental: newMental});
//        setAttrs({physical: newPhysical});
//        setAttrs({social: newSocial});
//    });
//});

//on("change:condition_negative_significant", function() {
//    getAttrs(["condition_negative_significant", "mental", "physical", "social"], function(v) {
//        const condition = (v.condition_negative_significant);
//        let men = parseInt(v.mental) || 0;
//        let phy = parseInt(v.physical) || 0;
//        let soc = parseInt(v.social) || 0;
//
//        let newMental = (condition != 0) ? men - 1 : men + 1;
//        let newPhysical = (condition != 0) ? phy - 1 : phy + 1;
//        let newSocial = (condition != 0) ? soc - 1 : soc + 1;
//
//        setAttrs({mental: newMental});
//        setAttrs({physical: newPhysical});
//        setAttrs({social: newSocial});
//    });
//});

//Initiative Toggle
on("change:initiative_toggle", function() {
    getAttrs(["initiative_toggle"], function(v) {
        const toggle = (v.initiative_toggle);

        (toggle != "mt") ? setAttrs({initiative: "mt"}) : setAttrs({initiative: " "});

    });
});

//Reset the checkmarks for Novapoint dice
on("change:dice_used", function() {
    let dice = ["d4", "d6", "d8", "d10", "d12"];
    let resetDice = [];

    _.each(dice, function(die) {
       resetDice[die] = 0;
    });

    setAttrs(resetDice);
});

//Compedium Drop
on("change:drop_category", function(eventinfo) {
    var eventinfo = (eventinfo.newValue);
    handle_drop(eventinfo);
});

var handle_drop = function(eventinfo) {
    var update = {};
    var id = generateRowID();

    getAttrs(["drop_name", "drop_data", "drop_content"], function(v) {
        try {
            pagedata = JSON.parse(v.drop_data);
        } catch(e) {
            pagedata = v.drop_data;
        };

        var page = {
            name: v.drop_name,
            data: pagedata,
            content: v.drop_content
        };

        var category = page.data["Category"];

        if (category === "Culture") {
            (page.data["Type"] === "Borders") ? update["culture_border"] = page.name : 
            (page.data["Type"] === "Diversity") ? update["culture_diversity"] = page.name :
            (page.data["Type"] === "Economic Status") ? update["culture_economic"] = page.name :
            update["culture_population"] = page.name;
        };

        if (category === "Lore") {
            if (page.data["data-Type"] === "Culture") {
                update["culture"] = page.name;
            };
        };

        if (category === "Species") {update["species"] = page.name;};

        if (category === "Story Paths") {
            update["repeating_story_" + id + "_story"] = page.name;
            update["repeating_story_" + id + "_story_path"] = page.data["Description"];
            update["repeating_story_" + id + "_act_flag"] = "false";

            var eventArray = JSON.parse(page.data["data-Events"]);

            update["repeating_story_" + id + "_event_1"] = eventArray[0].Name;
            update["repeating_story_" + id + "_event_1_howto"] = eventArray[0].Completion;
            update["repeating_story_" + id + "_event_1_reward"] = eventArray[0].Reward;

            update["repeating_story_" + id + "_event_2"] = eventArray[1].Name;
            update["repeating_story_" + id + "_event_2_howto"] = eventArray[1].Completion;
            update["repeating_story_" + id + "_event_2_reward"] = eventArray[1].Reward;

            update["repeating_story_" + id + "_event_3"] = eventArray[2].Name;
            update["repeating_story_" + id + "_event_3_howto"] = eventArray[2].Completion;
            update["repeating_story_" + id + "_event_3_reward"] = eventArray[2].Reward;

            update["repeating_story_" + id + "_event_4"] = eventArray[3].Name;
            update["repeating_story_" + id + "_event_4_howto"] = eventArray[3].Completion;
            update["repeating_story_" + id + "_event_4_reward"] = eventArray[3].Reward;

            update["repeating_story_" + id + "_event_5"] = eventArray[4].Name;
            update["repeating_story_" + id + "_event_5_howto"] = eventArray[4].Completion;
            
            (eventArray[4]["Reward 1"] != "" && eventArray[4]["Reward 2"] != "" && eventArray[4]["Reward 3"] != "") ?
                update["repeating_story_" + id + "_event_5_reward"] = eventArray[4]["Reward 1"] + ", " + eventArray[4]["Reward 2"]  + ", " + eventArray[4]["Reward 3"] :
            (eventArray[4]["Reward 1"] != "" && eventArray[4]["Reward 2"] != "") ?
                update["repeating_story_" + id + "_event_5_reward"] = eventArray[4]["Reward 1"] + ", " + eventArray[4]["Reward 2"] :
                update["repeating_story_" + id + "_event_5_reward"] = eventArray[4]["Reward 1"];
        };

        if (category === "Special Abilities") {
            update["repeating_abilities_" + id + "_ability"] = page.name + " (" + page.data["Type"] + ")";
            update["repeating_abilities_" + id + "_description"] = page.data["Description"];
            update["repeating_abilities_" + id + "_special_ability_flag"] = "false";

            var preqArray = (page.data["data-Prerequisites"] === "" || page.data["data-Prerequisites"] === undefined) ? "" : JSON.parse(page.data["data-Prerequisites"]);

            (preqArray != "" && page.data["Species"] != "") ? update["repeating_abilities_" + id + "_prerequisite"] = preqArray[0].Prerequisite + ", " + page.data["Species"] :
            (preqArray != "") ? update["repeating_abilities_" + id + "_prerequisite"] = preqArray[0].Prerequisite :
                update["repeating_abilities_" + id + "_prerequisite"] = page.data["Species"];
        };

        if (category === "Nova Abilities") {
            update["repeating_nova_" + id + "_ability"] = page.name + " (" + page.data["Type"] + ")";
            update["repeating_nova_" + id + "_description"] = page.data["Description"];
             update["repeating_nova_" + id + "_special_ability_flag"] = "false";

            var preqArray = (page.data["data-Prerequisites"] === "" || page.data["data-Prerequisites"] === undefined) ? "" : JSON.parse(page.data["data-Prerequisites"]);

            (preqArray != "" && page.data["Species"] != "") ? update["repeating_nova_" + id + "_prerequisite"] = preqArray[0].Prerequisite + ", " + page.data["Species"] :
            (preqArray != "") ? update["repeating_nova_" + id + "_prerequisite"] = preqArray[0].Prerequisite :
                update["repeating_nova_" + id + "_prerequisite"] = page.data["Species"];
        };

        if (category === "Equipment") {
            update["repeating_items_" + id + "_item"] = page.name;
            update["repeating_items_" + id + "_items_flag"] = "false";

            (page.data["Item Subcategory"] === undefined || page.data["Item Subcategory"] === "") ? 
                update["repeating_items_" + id + "_type"] = page.data["Item Category"] : 
                update["repeating_items_" + id + "_type"] = page.data["Item Category"] + ", " + page.data["Item Subcategory"];

           (page.data["data-Charges"] === undefined || page.data["data-Charges"] === "") ?
                update["repeating_items_" + id + "_health"] = 0 :
                update["repeating_items_" + id + "_health"] = page.data["data-Charges"];   

           (page.data["data-Charges"] === undefined || page.data["data-Charges"] === "") ?
                update["repeating_items_" + id + "_health_max"] = 0 :
                update["repeating_items_" + id + "_health_max"] = page.data["data-Charges"];   

            update["repeating_items_" + id + "_description"] = page.data["Description"];
            update["repeating_items_" + id + "_qualities"] = page.data["Qualities"];
        };

        if (category === "Ship Modules") {
            update["repeating_modules_" + id + "_name"] = page.name;
            update["repeating_modules_" + id + "_size"] = page.data["Size"];

            if (page.data["data-Effect"]) {update["repeating_modules_" + id + "_effect"] = page.data["data-Effect"];};
            
            var range = (page.data["data-Range"] === undefined || page.data["data-Range"] === "") ? "" : page.data["data-Range"] + ", ";
            var angle = (page.data["data-Angles"] === undefined || page.data["data-Angles"] === "") ? "" : page.data["data-Angles"] + ", ";
            var damage = (page.data["data-Damage"] === undefined || page.data["data-Damage"] === "") ? "" : page.data["data-Damage"] + " damage";

            if (range != "" || angle != "" || damage != "") {update["repeating_modules_" + id + "_combat_data"] = range + angle + damage;};
        };

        if (category === "NPCs") {
            update["sheet_type"] = "npc";
            update["character_name"] = page.name;
            update["challenge_level"] = page.data["Challenge"];
            update["health_level"] = page.data["Health Levels"];
            update["health_level_max"] = page.data["Health Levels"];
            update["npc_initiative"] = page.data["Initiative"];
            update["mental"] = page.data["Mental Score"];
            update["physical"] = page.data["Physical Score"];
            update["social"] = page.data["Social Score"];
            update["movement_speed"] = page.data["Speed"];
            update["size"] = page.data["Size"];
            update["shield_health_level"] = page.data["Shield Health Levels"];
            update["shield_health_level_max"] = page.data["Shield Health Levels"];

            var abilityArray = JSON.parse(page.data["data-Ability"]);
            abilityArray.forEach(function(ability) {
                var id = generateRowID();
                update["repeating_abilities_" + id + "_ability"] = ability.Ability;
                update["repeating_abilities_" + id + "_description"] = ability.Description;
                update["repeating_abilities_" + id + "_special_ability_flag"] = "false";
            });

            var attackArray = JSON.parse(page.data["data-Attacks"]);
            attackArray.forEach(function(attack) {
                var id = generateRowID();
                update["repeating_attacks_" + id + "_attack"] = attack.Attack;
                update["repeating_attacks_" + id + "_complexity"] = attack.Complexity;
                update["repeating_attacks_" + id + "_details"] = attack.Hit;
                update["repeating_attacks_" + id + "_range"] = attack.Range;
                update["repeating_attacks_" + id + "_type"] = attack.Type;
                update["repeating_attacks_" + id + "_attacks_flag"] = "false";
            });

            if (page.data["data-Equipment"]) {
                var equipmentArray = JSON.parse(page.data["data-Equipment"]);

                getCompendiumPage(equipmentArray, function(items) {
                    makeItem(items);
                });
            };

            var makeItem = function(items) {
                var newItem = {};

                if (items.length > 1) {
                    _.each(items, function(item) {
                        var id = generateRowID();

                        newItem["repeating_items_" + id + "_item"] = item["name"];
                        newItem["repeating_items_" + id + "_items_flag"] = "false";

                        (item.data["Item Subcategory"] === undefined || item.data["Item Subcategory"] === "") ? 
                            newItem["repeating_items_" + id + "_type"] = item.data["Item Category"] : 
                            newItem["repeating_items_" + id + "_type"] = item.data["Item Category"] + ", " + item.data["Item Subcategory"];

                        (item.data["data-Charges"] === undefined || item.data["data-Charges"] === "") ?
                            newItem["repeating_items_" + id + "_health"] = 0 :
                            newItem["repeating_items_" + id + "_health"] = item.data["data-Charges"];

                        (item.data["data-Charges"] === undefined || item.data["data-Charges"] === "") ?
                            newItem["repeating_items_" + id + "_health_max"] = 0 :
                            newItem["repeating_items_" + id + "_health_max"] = item.data["data-Charges"];   

                        (item.data["Description"] === undefined || item.data["Description"] === "") ? console.log("no Description") : newItem["repeating_items_" + id + "_description"] = item.data["Description"];
                        (item.data["Qualities"] === undefined || item.data["Qualities"] === "") ? console.log("no Qualities") : newItem["repeating_items_" + id + "_qualities"] = item.data["Qualities"];
                    });
                } else {

                    newItem["repeating_items_" + id + "_item"] = items["name"];
                    newItem["repeating_items_" + id + "_items_flag"] = "false";

                    (items.data["Item Subcategory"] === undefined || items.data["Item Subcategory"] === "") ? 
                        newItem["repeating_items_" + id + "_type"] = items.data["Item Category"] : 
                        newItem["repeating_items_" + id + "_type"] = items.data["Item Category"] + ", " + items.data["Item Subcategory"];

                    (items.data["data-Charges"] === undefined || items.data["data-Charges"] === "") ?
                        newItem["repeating_items_" + id + "_health"] = 0 :
                        newItem["repeating_items_" + id + "_health"] = items.data["data-Charges"];

                    (items.data["data-Charges"] === undefined || items.data["data-Charges"] === "") ?
                        newItem["repeating_items_" + id + "_health_max"] = 0 :
                        newItem["repeating_items_" + id + "_health_max"] = items.data["data-Charges"];   

                    (items.data["Description"] === undefined || items.data["Description"] === "") ? console.log("no Description") : newItem["repeating_items_" + id + "_description"] = items.data["Description"];
                    (items.data["Qualities"] === undefined || items.data["Qualities"] === "") ? console.log("no Qualities") : newItem["repeating_items_" + id + "_qualities"] = items.data["Qualities"];

                };

                setAttrs(newItem);
            };
        };

        setAttrs(update);

        {cleanup_drop_fields()};
    });
};

var cleanup_drop_fields = function() {
    var update = [];
    update["drop_category"] = "";
    update["drop_name"] = "";
    update["drop_data"] = "";
    update["drop_content"] = "";

    setAttrs(update);
};

on("sheet:compendium-drop", function() {
    getAttrs(["size", "health_level_max", "health_level", "shield_health_level", "shield_health_level_max"], function(v) {
        var default_attr = {};
        default_attr["width"] = 70;
        default_attr["height"] = 70;

        if(v["size"]) {
            var squarelength = 70;
            if(v["size"].includes("or")) {

                var setwidth = !isNaN(v["size"][0]) ? v["size"][0] : 1;
                var setheight = !isNaN(v["size"][0]) ? v["size"][0] : 1;
                default_attr["width"] = setwidth * squarelength;
                default_attr["height"] = setheight * squarelength;
            }
            else {
                default_attr["width"] = squarelength * v["size"]
                default_attr["height"] = squarelength * v["size"]
            };
        };

        default_attr["bar1_value"] = v.health_level;
        default_attr["bar1_max"] = v.health_level_max;
        default_attr["bar2_value"] = v.shield_health_level;
        default_attr["bar2_max"] = v.shield_health_level_max;

        setDefaultToken(default_attr);
    });
});
</script>
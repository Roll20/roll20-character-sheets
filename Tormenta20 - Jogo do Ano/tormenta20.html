<div class="navegacao">
    <label class="switch sheet-pj">
        <input id="cstype" class="hiddenelement" type="radio" name="attr_cstype" value="0" checked>
        <span class="slider round" data-i18n="player_charactersheet">Ficha Jogador</span>
    </label>
    <label class="switch sheet-npj sheet-hiddenelement">
        <input id="cstype" class="hiddenelement" type="radio" name="attr_cstype" value="1">
        <span class="slider round" data-i18n="menace_charactersheet">Ficha Ameaça</span>
    </label>
    <label class="switch sheet-domains sheet-hiddenelement">
        <input id="cstype" class="hiddenelement" type="radio" name="attr_cstype" value="3">
        <span class="slider round" data-i18n="dominios">Domínios</span>
    </label>
    <label class="switch sheet-mod sheet-hiddenelement">
        <input id="cstype" class="hiddenelement" type="radio" name="attr_cstype" value="2">
        <span class="slider round" data-i18n="global_charactersheet">Modificadores Globais</span>
    </label>
</div>
<div class="main">
    <div class="left-container">
        <div class="header-info">
            <div class="input-with-text-bellow char-name">
                <input name="attr_character_name" type="text"  spellcheck="false"  value="">
                <span data-i18n="nome">Nome do Personagem</span>
            </div>
            <div class="input-with-text-bellow char-player">
                <input name="attr_playername" type="text" spellcheck="false" value=""/>
                <span data-i18n="jogador">Jogador</span>
            </div>
            <div class="input-with-text-bellow">
                <input name="attr_trace" type="text" spellcheck="false" value=""/>
                <span data-i18n="raca">Raça</span>
            </div>
            <div class="input-with-text-bellow">
                <input name="attr_torigin" type="text" spellcheck="false" value=""/>
                <span data-i18n="origem">Origem</span>
            </div>
            <div class="input-with-text-bellow">
                <input name="attr_tlevel" type="text" spellcheck="false" value=""/>
                <span data-i18n="classe_nivel">Classe & Nível</span>
            </div>
            <div class="input-with-text-bellow sheet-hiddenelement sheet-ghanor-level">
                <div class="total-level">                    
                    <input name="attr_charnivel" maxlength="3" type="text" spellcheck="false" value="1"/>
                    <span data-i18n="nivel_personagem">Nível do Personagem</span>                    
                </div>
            </div> 
        </div>
        
        <div class="character-attributes">
            <!-- Força -->
            <div class="outer-container-negative-corner">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner sheet-attribute-center">
                        <!-- Conteudo aqui -->
                        <button tabindex="-1" type="roll" name="roll_for" value="&{template:t20}{{character=@{character_name}}}{{rollname=Força}}{{theroll=[[1d20+@{for_mod}]]}}" class="button-title-attribute" data-i18n="mod_forca">FOR</button>
                        <input name="attr_for" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{for_mod}" />
                        <span class="sheet-span-fake-mod" name="attr_fakefor" title="@{for_fake}"></span> 
                        
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            <!-- Destreza -->
            <div class="outer-container-negative-corner">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner sheet-attribute-center">
                        <button tabindex="-1" type="roll" name="roll_des" value="&{template:t20}{{character=@{character_name}}}{{rollname=Destreza}}{{theroll=[[1d20+@{des_mod}]]}}" class="button-title-attribute" data-i18n="mod_destreza">DES</button>
                        <input name="attr_des" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{des_mod}" />
                        <span class="sheet-span-fake-mod" name="attr_fakedes" title="@{des_fake}"></span>

                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            <!-- Constituição -->
            <div class="outer-container-negative-corner">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner sheet-attribute-center">
                        <button tabindex="-1" type="roll" name="roll_con" value="&{template:t20}{{character=@{character_name}}}{{rollname=Constituição}}{{theroll=[[1d20+@{con_mod}]]}}" class="button-title-attribute" data-i18n="mod_constituicao">CON</button>
                        <input name="attr_con" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{con_mod}" />
                        <span class="sheet-span-fake-mod" name="attr_fakecon" title="@{con_fake}"></span>    

                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            <!-- Inteligência -->
            <div class="outer-container-negative-corner">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner sheet-attribute-center">
                        <button tabindex="-1" type="roll" name="roll_int" value="&{template:t20}{{character=@{character_name}}}{{rollname=Inteligência}}{{theroll=[[1d20+@{int_mod}]]}}" class="button-title-attribute" data-i18n="mod_inteligencia">INT</button>
                        <input name="attr_int" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{int_mod}" />
                        <span class="sheet-span-fake-mod" name="attr_fakeint" title="@{int_fake}"></span>
                            
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            <!-- Sabedoria -->
            <div class="outer-container-negative-corner">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner sheet-attribute-center">
                        <button tabindex="-1" type="roll" name="roll_sab" value="&{template:t20}{{character=@{character_name}}}{{rollname=Sabedoria}}{{theroll=[[1d20+@{sab_mod}]]}}" class="button-title-attribute" data-i18n="mod_sabedoria">SAB</button>
                        <input name="attr_sab" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{sab_mod}" />
                        <span class="sheet-span-fake-mod" name="attr_fakesab" title="@{sab_fake}"></span>
                            
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            <!-- Carisma -->
            <div class="outer-container-negative-corner">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner sheet-attribute-center">
                        <button tabindex="-1" type="roll" name="roll_car" value="&{template:t20}{{character=@{character_name}}}{{rollname=Carisma}}{{theroll=[[1d20+@{car_mod}]]}}" class="button-title-attribute" data-i18n="mod_carisma">CAR</button>
                        <input name="attr_car" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{car_mod}" />
                        <span class="sheet-span-fake-mod" name="attr_fakecar" title="@{car_fake}"></span>
                            
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
        </div> 

        <div class="sheet-global-columns">
            <div class="sheet-left-icons">
                <span class="sheet-attack-span hiddenelement" name="attr_attackicon" title="Ataque" data-i18n-title="spam-attack"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/punch.png" class="sheet-attack-icon hiddenelement"  title="Ataque" data-i18n-title="spam-attack"/>
                
                <span class="sheet-damage-span hiddenelement" name="attr_damageicon" title="Dano" data-i18n-title="spam-damage"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/explosion.png" class="sheet-damage-icon hiddenelement" title="Dano" data-i18n-title="spam-damage"/>
                
                <span class="sheet-roll-span hiddenelement" name="attr_rollicon" title="Rolagem" data-i18n-title="spam-roll"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/numerology.png" class="sheet-roll-icon hiddenelement" title="Rolagem" data-i18n-title="spam-roll"/>
                
                <span class="sheet-skills-span hiddenelement" name="attr_skillsicon" title="Perícias" data-i18n-title="spam-skills"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/skills.png" class="sheet-skills-icon hiddenelement" title="Perícias" data-i18n-title="spam-skills"/>
                
                <span class="sheet-resist-span hiddenelement" name="attr_resistsicon" title="Resistências" data-i18n-title="resistance"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/resistence.png" class="sheet-resist-icon hiddenelement" title="Resistências" data-i18n-title="resistencias"/>
                
                <span class="sheet-defense-span hiddenelement" name="attr_defenseicon" title="Defesa" data-i18n-title="spam-defense"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/antivirus.png" class="sheet-defense-icon hiddenelement" title="Defesa" data-i18n-title="spam-defense"/>
                
                <span class="sheet-armor-span hiddenelement" name="attr_armoricon" title="Armadura" data-i18n-title="spam-armor"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/armor.png" class="sheet-armor-icon hiddenelement" title="Armadura" data-i18n-title="spam-armor"/>
                
                <span class="sheet-shield-span hiddenelement" name="attr_shieldicon" title="Escudo" data-i18n-title="spam-shield"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/shield.png" class="sheet-shield-icon hiddenelement" title="Escudo" data-i18n-title="spam-shield"/>
            </div>
            <div class="sheet-right-icons">
                <button class="round sheet-global-color" data-i18n="player_eraseglobal" type="action" name="act_eraseglobal">Limpar Globais</button>
            </div>            
        </div>

        <div class="pseudo-attributes">
            <!-- Pontos de Vida -->
            <div class="container-negative-corner container-pvs-mps">
                <div class="inside-negative-corner">
                    <div class="box-title" data-i18n="pontos_de_vida">
                        Pontos de Vida
                    </div>
                    <div class="content-centered border-right">
                        <input name="attr_vidatotal" type="text" spellcheck="false" maxlength="4" class="" value="0">
                    </div>
                    <div class="content-centered">
                        <input name="attr_vida" type="text" spellcheck="false" maxlength="4" class="" value="0">
                    </div>
                    <div class="content-centered border-left">
                        <input name="attr_vidatemp" type="text" spellcheck="false" maxlength="4" class="" value="0">
                    </div>
                    <div class="content-centered smaller-text" data-i18n="pv_maximos">Máximos</div>
                    <div class="content-centered smaller-text" data-i18n="pv_atuais">Atuais</div>
                    <div class="content-centered smaller-text" data-i18n="Pv_temporarios">Temporários</div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
            <!-- Pontos de Mana -->
            <div class="container-negative-corner container-pvs-mps">
                <div class="inside-negative-corner">
                    <div class="box-title" data-i18n="pontos_de_mana">
                        Pontos de Mana
                    </div>
                    <div class="content-centered border-right">
                        <input name="attr_manatotal" type="text" spellcheck="false" maxlength="4" class="" value="0">
                    </div>
                    <div class="content-centered">
                        <input name="attr_mana" type="text" spellcheck="false" maxlength="4" class="" value="0">
                    </div>
                    <div class="content-centered border-left">
                        <input name="attr_manatemp" type="text" spellcheck="false" maxlength="4" class="" value="0">
                    </div>
                    <div class="content-centered smaller-text" data-i18n="pm_maximos">Máximos</div>
                    <div class="content-centered smaller-text" data-i18n="pm_atuais">Atuais</div>
                    <div class="content-centered smaller-text" data-i18n="pm_temporarios">Temporários</div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div>

        <div class="attacks-container">
            <div class="inside">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner">
                        <!-- <div class="default-title">Ataques</div> -->
                        <div class="attacksgrid">
                            <div></div>
                            <div class="grid-title" data-i18n="nome_do_ataque">Nome do Ataque</div>
                            <div class="small-title" data-i18n="bonus_ataque">Bônus de Ataque</div>
                            <div class="small-title" data-i18n="dano">Dano</div>
                            <div class="small-title" data-i18n="dano_extra">Dano Extra</div>
                            <div class="small-title" data-i18n="dado_extra">Dados Extra</div>
                            <div class="small-title" data-i18n="critico">Crítico</div>
                        </div>
                            <!-- Ataques -->
                            <fieldset class="repeating_attacks"> 
                                <div class="attacksgrid">
                                    <button type="roll" name="roll_attack" class="buttonrollataque dado-simples" value="&{template:t20-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[1d20cs>@{margemcriticoataque}+[[@{ataquepericia}]]+@{bonusataque}+@{ataquetemp}]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}+@{dadoextraataque}+@{danotemp}+@{rolltemp}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{dadoextraataque}+@{modatributodano}+@{danoextraataque}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}">T</button> 
                                    <input name="attr_nomeataque" type="text" spellcheck="false" class="" value="">
                                    <input name="attr_bonusataque" type="text" spellcheck="false" class="" value="0">
                                    <input name="attr_danoataque" type="text" spellcheck="false" class="" value="0">
                                    <input name="attr_danoextraataque" type="text" spellcheck="false" class="" value="0">
                                    <input name="attr_dadoextraataque" type="text" spellcheck="false" class="" value="0">
                                    <div class="containercritico">
                                        <input name="attr_margemcriticoataque" type="text" spellcheck="false" class="margem" value="20">
                                        <span class="divisor"><b>/</b>x</span>
                                        <input name="attr_multiplicadorcriticoataque" type="text" spellcheck="false" class="multiplicador" value="2">
                                    </div>
                                    <input type="hidden" name="attr_danocriticoataque" value="0" readonly="1">

                                    <div class="moreinfo">
                                        <input type="checkbox" class="hiddencheckbox">
                                        <span class="hiddencheckboxcover"></span>
                                        <div class="containermoreinfo">
                                            <!-- <div class="containerdescrataque">
                                                <div class="title">Descrição</div>
                                                <textarea name="attr_proficiencias"></textarea>
                                            </div> -->
                                            <div class="inputtextbellow descricao">
                                                <input name="attr_ataquedescricao" type="text" spellcheck="false" value=""/>
                                                <span class="title" data-i18n="descricao_macros">Descrição / Macros</span>
                                            </div>
                                            <div class="inputtextbellow sheet-pericialuta">
                                                <select name="attr_ataquepericia">
                                                    <option value="@{atuacaototal}+@{condicaomodataquecc}+@{condicaomodataque}">Atuação</option>
                                                    <option value="@{lutatotal}+@{condicaomodataquecc}+@{condicaomodataque}" selected="">Luta</option>
                                                    <option value="@{pontariatotal}+@{condicaomodataquedis}+@{condicaomodataque}">Pontaria</option>
                                                </select>
                                                <span class="title" data-i18n="pericia_utilizada">Perícia utilizada</span>
                                            </div>
                                            <div class="inputtextbellow sheet-tipodano">
                                                <input name="attr_ataquetipodedano" type="text" spellcheck="false" value=""/>
                                                <span class="title" data-i18n="tipo_de_dano">Tipo de Dano</span>
                                            </div>
                                            <div class="inputtextbellow sheet-alcance">
                                                <input name="attr_ataquealcance" type="text" spellcheck="false" value=""/>
                                                <span class="title" data-i18n="alcance">Alcance</span>
                                            </div>
                                            
                                            <div class="inputtextbellow">
                                                <select name="attr_modatributodano">
                                                    <option value="0" selected="">Nenhum</option>
                                                    <option value="@{for_mod}" data-i18n="forca">Força</option>
                                                    <option value="@{des_mod}" data-i18n="destreza">Destreza</option>
                                                    <option value="@{con_mod}" data-i18n="constituicao">Constituição</option>
                                                    <option value="@{int_mod}" data-i18n="inteligencia">Inteligência</option>
                                                    <option value="@{sab_mod}" data-i18n="sabedoria">Sabedoria</option>
                                                    <option value="@{car_mod}" data-i18n="carisma">Carisma</option>
                                                </select>
                                                <span class="title" data-i18n="atributo_no_dano">Atributo no Dano</span>
                                            </div>

                                            <div class="inputtextbellow">
                                                <select name="attr_tipocritico">
                                                    <option value="" selected="">Nenhum</option>
                                                    <option value="dilacerante" data-i18n="dilacerante">Dilacerante</option>
                                                    <option value="lancinante" data-i18n="lancinante">Lacerante</option>
                                                </select>
                                                <span class="title" data-i18n="tipo_critico">Crítico</span>
                                            </div>

                                            <div class="inputtextbellow ataque_rolagens sheet-tiporolagemum">
                                                <button type="roll" name="roll_failure" class="buttonrollataque buttonrollerro dado" value="&{template:t20-error-chance}{{character=@{character_name}}}{{errorroll=[[1d100]]}}" style="margin: auto !important;">KK</button>                                               
                                                <span class="title" data-i18n="chanceDeErro">Chance de Erro</span>
                                            </div>
                                            <div class="inputtextbellow ataque_rolagens sheet-tiporolagemdois">
                                                <button type="roll" name="roll_attack_best" class="buttonrollataque dado" value="&{template:t20-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[2d20kh1cs>@{margemcriticoataque}+[[@{ataquepericia}]]+@{bonusataque}+@{ataquetemp}]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}+@{dadoextraataque}+@{danotemp}+@{rolltemp}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{modatributodano}+@{danoextraataque}+@{dadoextraataque}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}" style="margin: auto !important;">TT</button>                                               
                                                <span class="title" data-i18n="melhorDado">Melhor Dado</span>
                                            </div>
                                            <div class="inputtextbellow ataque_rolagens sheet-tiporolagemtres">
                                                <button type="roll" name="roll_attack_worst" class="buttonrollataque dado" value="&{template:t20-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[2d20kl1cs>@{margemcriticoataque}+[[@{ataquepericia}]]+@{bonusataque}+@{ataquetemp}]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}+@{dadoextraataque}+@{danotemp}+@{rolltemp}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{modatributodano}+@{danoextraataque}+@{dadoextraataque}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}" style="margin: auto !important;">tt</button>
                                                <span class="title" data-i18n="piorDado">Pior Dado</span>
                                            </div>    

                                            
                                        </div>
                                        <!-- <div class="bottomline"></div> -->
                                    </div>
                                </div> 
                                
                                
                            </fieldset>

                            <!-- Ataques -->


                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            
        </div>
        <div class="defense-and-proeficience-container">
            <div class="container-defense-armor-shield">
                <div class="container-negative-corner container-defense">
                    <div class="inside-negative-corner">
                        <div class="grid-title" data-i18n="defesa">Defesa</div>
                        <div></div>
                        <div></div>
                        <div></div>
                        <div class="small-title">
                            <select class="select_mod_defesa" name="attr_modatributodefesa">
                                <option value="for_mod" data-i18n="mod_forca">For</option>
                                <option value="des_mod" selected data-i18n="mod_destreza">Des</option>
                                <option value="con_mod" data-i18n="mod_constituicao">Con</option>
                                <option value="int_mod" data-i18n="mod_inteligencia">Int</option>
                                <option value="sab_mod" data-i18n="mod_sabedoria">Sab</option>
                                <option value="car_mod" data-i18n="mod_carisma">Car</option>
                            </select>
                        </div>
                        <div></div>
                        <div class="small-title" data-i18n="bonus_armadura">Bônus de Armadura</div>
                        <div></div>
                        <div class="small-title" data-i18n="bonus_escudo">Bônus de Escudo</div>
                        <div></div>
                        <div class="small-title" data-i18n="bonus_defesa_outros">Outros</div>
                        
                        <div>
                            <input name="attr_defesafake" disabled="true" value="@{defesatotal}" maxlength="5" type="text" spellcheck="false" title="@{defesatotal}">
                            <!--<input name="attr_defesacaidofake" disabled="true" value="@{defesatotalcaido}" maxlength="3" type="text" spellcheck="false" title="Defesa contra Ataques A distância" data-i18n-title="input-shovedefense" class="sheet-defesacaido-color sheet-hiddenelement">-->
                        </div>
                        <div class="signal">=</div>
                        <div class="big-signal">10</div>
                        <div class="signal">+</div>
                        <select name="attr_defesaatributo">
                            <option value="0" data-i18n="def_des_no">Não</option>
                            <option value="1" selected data-i18n="def_des_yes">Sim</option>
                        </select>
                        <div class="signal">+</div>
                        <div>
                            <input name="attr_defesaarmadura" type="text" spellcheck="false" value="@{armaduradefesa1}+@{defesaarmaduratemp}" disabled="true">
                        </div>
                        <div class="signal">+</div>
                        <div>
                            <input name="attr_defesaescudo" type="text" spellcheck="false" value="@{armaduradefesa2}+@{defesaescudotemp}" disabled="true">
                        </div>
                        <div class="signal">+</div>
                        <div>
                            <input name="attr_defesaoutros" type="text" spellcheck="false" value="0">
                        </div>
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
                <span class="sheet-defesacaido-color sheet-hiddenelement" data-i18n="shovedefense">-5 Defesa contra Ataques Corpo à Corpo. +5 de Defesa contra Ataques à Distância.</span>
                <div class="container-negative-corner container-armor-shield">
                    <div class="inside-negative-corner">
                        <div class="grid-title" data-i18n="armadura_escudo">Armadura & Escudo</div>
                        <div class="small-title"data-i18n="defesa">Defesa</div>
                        <div class="small-title" data-i18n="penalidade">Penalidade</div>
                        <div>
                            <input name="attr_armadura1" type="text" spellcheck="false" value="Armadura">
                        </div>
                        <div>
                            <input name="attr_armaduradefesa1" type="text" spellcheck="false" value="0">
                        </div>
                        <div>
                            <input name="attr_armadurapenalidade1" type="text" spellcheck="false" value="0">
                        </div>
                        <div>
                            <input name="attr_armadura2" type="text" spellcheck="false" value="Escudo">
                        </div>
                        <div>
                            <input name="attr_armaduradefesa2" type="text" spellcheck="false" value="0">
                        </div>
                        <div>
                            <input name="attr_armadurapenalidade2" type="text" spellcheck="false" value="0">
                        </div>
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
            <div class="box-proficiencies">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner">
                        <div class="default-title" data-i18n="proeficiencia_outras_caracteristicas">
                            Proficiências e outras características
                        </div>
                        <div class="content-centered">
                            <textarea name="attr_proficiencias"></textarea>
                        </div>
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="size-and-move-container">
            <div class="container-negative-corner container-size">
                <div class="inside-negative-corner">
                    <div class="default-title" data-i18n="tamanho">
                        Tamanho
                    </div>
                    <div>
                        <select name="attr_tamanho">
                            <option value="0" selected="" data-i18n="medio">Médio</option>
                            <option value="5" data-i18n="minusculo">Minúsculo</option>
                            <option value="2" data-i18n="pequeno">Pequeno</option>
                            <option value="-2" data-i18n="grande">Grande</option>
                            <option value="-5" data-i18n="enorme">Enorme</option>
                            <option value="-10" data-i18n="colossal">Colossal</option>
                        </select>
                    </div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
            <div class="container-negative-corner container-move">
                <div class="inside-negative-corner">
                    <div class="default-title" data-i18n="deslocamento">
                        Deslocamento
                    </div>
                    <div >
                        <input name="attr_deslocamento" type="text" spellcheck="false" value="">
                    </div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div>
        <div class="powers-and-abilities">
            <div class="container-negative-corner">
                <div class="inside-negative-corner">
                    <div class="default-title" data-i18n="habilidades_poderes_gerais">
                        Habilidades e Poderes Gerais
                    </div>
                    <div class="content-grid">
                        <div class="container-reapeater">
                            <fieldset class="repeating_abilities">
                                <div class="container-ability-power">
                                    <button type="roll" name="roll_ability" class="buttonshowinfo" value="&{template:t20-info}{{infoname=@{nameability}}}{{description=@{abilitydescription}}}">q</button>
                                    <input name="attr_nameability" type="text" spellcheck="false" value=""/>
                                    <input type="checkbox" class="hiddencheckbox">
                                    <span class="hiddencheckboxcover">W</span>
                                    <div class="extra">
                                        <textarea name="attr_abilitydescription"></textarea>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
    
                        <div class="container-reapeater">
                            <fieldset class="repeating_powers">
                                <div class="container-ability-power">
                                    <button type="roll" name="roll_power" class="buttonshowinfo" value="&{template:t20-info}{{infoname=@{namepower}}}{{description=@{powerdescription}}}">q</button>
                                    <input name="attr_namepower" type="text" spellcheck="false" value=""/>
                                    <input type="checkbox" class="hiddencheckbox">
                                    <span class="hiddencheckboxcover">W</span>
                                    <div class="extra">
                                        <textarea name="attr_powerdescription"></textarea>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div>
        <div class="spells">
            <div class="container-negative-corner">
                <div class="inside-negative-corner">
                    <div class="default-title" data-i18n="magias">
                        Magias
                    </div>
                    <div class="sheet-container-cd-magia">
                        <div>
                            <span>CD</span>
                        </div>
                        <div>
                            <input name="attr_cdtotal" spellcheck="false" title="@{cdtotal}" type="text" value="@{metade_do_nivel}+@{cdequips}+@{cdpoderes}+@{cdoutros}+10+@{cdatributo}" data-formula="@{metade_do_nivel}+@{cdequips}+@{cdpoderes}+@{cdoutros}+10+@{cdatributo}" disabled="true">
                        </div>
                        <div class="signal">=</div>
                        <div class="big-signal"><span>10</span></div>
                        <div class="signal">+</div>
                        <div>
                            <select name="attr_cdatributo">
                                <option value="@{for_mod} + @{condicaoperfisico}" data-i18n="mod_forca">FOR</option>
                                <option value="@{des_mod} + @{condicaoperfisico}" data-i18n="mod_destreza">DES</option>
                                <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                                <option value="@{int_mod} + @{condicaopermental}" selected data-i18n="mod_inteligencia">INT</option>
                                <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                                <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR*</option>
                            </select>
                        </div>
                        <div class="signal">+</div>
                        <div class="input-with-text-bellow">
                            <input name="attr_cdequips" type="text" spellcheck="false" value="0">
                            <span data-i18n="equip">Equip.</span>
                        </div>
                        <div class="signal">+</div>
                        <div class="input-with-text-bellow">
                            <input name="attr_cdpoderes" type="text" spellcheck="false" value="0">
                            <span data-i18n="poder">Poderes</span>
                        </div>
                        <div class="signal">+</div>
                        <div class="input-with-text-bellow">
                            <input name="attr_cdoutros" type="text" spellcheck="false" value="0">
                            <span data-i18n="bonus_defesa_outros">Outros</span>
                        </div>
                    </div>
                    <div class="content-grid">
                        <div class="spellcolumn">
                            <div class="cicloheader">
                                <div class="ciclo-title" data-i18n="primeiro_circulo">1º Círculo</div>
                                <div class="ciclo-cost" data-i18n="primeiro_custo">1 PM</div>
                            </div>
                            <div class="sheet-containerspelllist">
                                <fieldset class="repeating_spells1">
                                    
                                    <div class="container-single-spell">
                                        <button type="roll" name="roll_spell1" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{spelltipo}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=[[@{cdtotal}+@{spellcd}]]}}">T</button>
                                        <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                        <input type="checkbox" class="hiddencheckbox">
                                        <span class="hiddencheckboxcover">W</span>
                                        <div class="extra">
                                            <span data-i18n="tipo_magia">Tipo</span>
                                            <input name="attr_spelltipo" type="text" spellcheck="false" value=""/>
                                            <span class="cd" data-i18n="cd_magia">Especialista</span>
                                            <input class="cd" name="attr_spellcd" type="checkbox" spellcheck="false" value="2"/>

                                            <span data-i18n="execucao_magia">Execução</span>
                                            <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alcance_magia">Alcance</span>
                                            <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="duracao_magia">Duração</span>
                                            <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                            <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="resistencia_magia">Resistência</span>
                                            <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>

                                            <span class="fullline" data-i18n="descricao_magia">Descrição</span>
                                            <textarea class="fullline" name="attr_spelldescription"></textarea>
                                        </div>
                                    </div>



                                </fieldset>
                            </div>
                            

                            <div class="cicloheader">
                                <div class="ciclo-title" data-i18n="terceiro_circulo">3º Círculo</div>
                                <div class="ciclo-cost" data-i18n="terceiro_custo">6 PM</div>
                            </div>
                            <div class="sheet-containerspelllist">
                                <fieldset class="repeating_spells3">
                                    <div class="container-single-spell">
                                        <button type="roll" name="roll_spell3" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{spelltipo}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=[[@{cdtotal}+@{spellcd}]]}}">T</button>
                                        <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                        <input type="checkbox" class="hiddencheckbox">
                                        <span class="hiddencheckboxcover">W</span>
                                        <div class="extra">
                                            <span data-i18n="tipo_magia">Tipo</span>
                                            <input name="attr_spelltipo" type="text" spellcheck="false" value=""/>
                                            <span class="cd" data-i18n="cd_magia">Especialista</span>
                                            <input class="cd" name="attr_spellcd" type="checkbox" spellcheck="false" value="2"/>

                                            <span data-i18n="execucao_magia">Execução</span>
                                            <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alcance_magia">Alcance</span>
                                            <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="duracao_magia">Duração</span>
                                            <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                            <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="resistencia_magia">Resistência</span>
                                            <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>

                                            <span class="fullline" data-i18n="descricao_magia">Descrição</span>
                                            <textarea class="fullline" name="attr_spelldescription"></textarea>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                            <div class="cicloheader">
                                <div class="ciclo-title" data-i18n="quinto_circulo">5º Círculo</div>
                                <div class="ciclo-cost" data-i18n="quinto_custo">15 PM</div>
                            </div>
                            <div class="sheet-containerspelllist">
                                <fieldset class="repeating_spells5">
                                    <div class="container-single-spell">
                                        <button type="roll" name="roll_spell5" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{spelltipo}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=[[@{cdtotal}+@{spellcd}]]}}">T</button>
                                        <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                        <input type="checkbox" class="hiddencheckbox">
                                        <span class="hiddencheckboxcover">W</span>
                                        <div class="extra">
                                            <span data-i18n="tipo_magia">Tipo</span>
                                            <input name="attr_spelltipo" type="text" spellcheck="false" value=""/>
                                            <span class="cd" data-i18n="cd_magia">Especialista</span>
                                            <input class="cd" name="attr_spellcd" type="checkbox" spellcheck="false" value="2"/>

                                            <span data-i18n="execucao_magia">Execução</span>
                                            <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alcance_magia">Alcance</span>
                                            <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="duracao_magia">Duração</span>
                                            <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                            <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="resistencia_magia">Resistência</span>
                                            <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>

                                            <span class="fullline" data-i18n="descricao_magia">Descrição</span>
                                            <textarea class="fullline" name="attr_spelldescription"></textarea>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <div class="spellcolumn">
                            <div class="cicloheader">
                                <div class="ciclo-title" data-i18n="segundo_circulo">2º Círculo</div>
                                <div class="ciclo-cost" data-i18n="segundo_custo">3 PM</div>
                            </div>
                            <div class="sheet-containerspelllist">
                                <fieldset class="repeating_spells2">
                                    <div class="container-single-spell">
                                        <button type="roll" name="roll_spell2" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{spelltipo}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=[[@{cdtotal}+@{spellcd}]]}}">T</button>
                                        <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                        <input type="checkbox" class="hiddencheckbox">
                                        <span class="hiddencheckboxcover">W</span>
                                        <div class="extra">
                                            <span data-i18n="tipo_magia">Tipo</span>
                                            <input name="attr_spelltipo" type="text" spellcheck="false" value=""/>
                                            <span class="cd" data-i18n="cd_magia">Especialista</span>
                                            <input class="cd" name="attr_spellcd" type="checkbox" spellcheck="false" value="2"/>

                                            <span data-i18n="execucao_magia">Execução</span>
                                            <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alcance_magia">Alcance</span>
                                            <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="duracao_magia">Duração</span>
                                            <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                            <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="resistencia_magia">Resistência</span>
                                            <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>

                                            <span class="fullline" data-i18n="descricao_magia">Descrição</span>
                                            <textarea class="fullline" name="attr_spelldescription"></textarea>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                            <div class="cicloheader">
                                <div class="ciclo-title" data-i18n="quarto_circulo">4º Círculo</div>
                                <div class="ciclo-cost" data-i18n="quarto_custo">10 PM</div>
                            </div>
                            <div class="sheet-containerspelllist">
                                <fieldset class="repeating_spells4">
                                    <div class="container-single-spell">
                                        <button type="roll" name="roll_spell4" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{spelltipo}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=[[@{cdtotal}+@{spellcd}]]}}">T</button>
                                        <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                        <input type="checkbox" class="hiddencheckbox">
                                        <span class="hiddencheckboxcover">W</span>
                                        <div class="extra">
                                            <span data-i18n="tipo_magia">Tipo</span>
                                            <input name="attr_spelltipo" type="text" spellcheck="false" value=""/>
                                            <span class="cd" data-i18n="cd_magia">Especialista</span>
                                            <input class="cd" name="attr_spellcd" type="checkbox" spellcheck="false" value="2"/>

                                            <span data-i18n="execucao_magia">Execução</span>
                                            <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alcance_magia">Alcance</span>
                                            <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="duracao_magia">Duração</span>
                                            <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                            <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                            <span data-i18n="resistencia_magia">Resistência</span>
                                            <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>

                                            <span data-i18n="descricao_magia" class="fullline">Descrição</span>
                                            <textarea class="fullline" name="attr_spelldescription"></textarea>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                            
                        </div>
                    </div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div>
        
    </div> 
    
    <div class="right-container">
        <div class="logo-level">
            <div class="container-logo">
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/master/Tormenta20%20-%20Jogo%20do%20Ano/Tormenta20Logo.png" class="logo-tormenta"/>
            </div>
            <div class="container-logo-ghanor sheet-hiddenelement">
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/A-Lenda-de-Ghanor/A%20Lenda%20de%20Ghanor/LendaDeGhanor.png" class="logo-ghanor"/>
            </div>
            <div class="deityAndLevel">
                <div class="input-with-text-bellow">
                    <div class="total-level">                    
                        <input name="attr_charnivel" maxlength="3" type="text" spellcheck="false" value="1"/>
                        <span data-i18n="nivel_personagem">Nível do Personagem</span>                    
                    </div>
                </div>
                <div class="input-with-text-bellow">
                    <input name="attr_divindade" type="text" spellcheck="false" value=""/>
                    <span data-i18n="divindade">Divindade</span>
                </div>                
            </div>
        </div>
        <div class="skills-container">
            <div class="container-negative-corner">
                <div class="inside-negative-corner">
                    <div class="skill-grid-template header">
                        <div class="grid-title pericias-titulo" data-i18n="pericias">Perícias</div>
                        <div></div>
                        <div class="grid-title" data-i18n="pericias_total">Total</div>
                        <div></div>
                        <!-- <div class="small-title">1/2 do Nível</div>
                        <div></div> -->
                        <div class="small-title" data-i18n="pericias_atributo">Atributo</div>
                        <div></div>
                        <div class="small-title" data-i18n="pericias_treino">Treino</div>
                        <div></div>
                        <div class="small-title" data-i18n="pericias_outros">Outros</div>
                    </div>
                    <div class="skill-grid-template skill-list">
                        <!-- Acrobacia -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_acrobacia_treinada" title="@{acrobacia_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_acrobacia" value="&{template:t20}{{character=@{character_name}}}{{rollname=Acrobacia}}{{theroll=[[1d20+[[@{acrobaciatotal}]]]]}}" class="skill-button">
                                <span class="sup-penalidade" data-i18n="acrobacia">Acrobacia</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total first" name="attr_acrobaciatotal" maxlength="2" type="text" spellcheck="false" title="@{acrobaciatotal}" value="@{metade_do_nivel} + @{periciatemp} + @{rolltemp} + @{condicaopericia} + @{acrobaciaatributo2} + @{acrobaciatreino} + @{acrobaciaoutros} -1 * @{penalidades_armadura} -1 * @{penalidades_armadura_carga}" disabled="true">
                        <div class="signal">=</div>
                        <!-- <input name="attr_acrobacianivel" type="text" spellcheck="false" value="@{metade_do_nivel}" disabled="true">
                        <div class="signal">+</div> -->
                        <select name="attr_acrobaciaatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_acrobaciatreino" type="text" spellcheck="false" maxlength="3" title="@{acrobaciatreino}" value="@{bonus_treino}*@{acrobacia_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_acrobaciaoutros" maxlength="3" type="text" spellcheck="false" title="@{acrobaciaoutros}" value="0">
                        <!-- Adestramento -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_adestramento_treinada" title="@{adestramento_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll"  name="roll_adestramento" value="&{template:t20}{{character=@{character_name}}}{{rollname=Adestramento}}{{theroll=[[1d20+[[@{adestramentototal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="adestramento">Adestramento</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_adestramentototal" maxlength="2" type="text" spellcheck="false" title="@{adestramentototal}" value="@{metade_do_nivel} + @{periciatemp} + @{rolltemp} + @{condicaopericia} + @{adestramentoatributo2} + @{adestramentotreino} + @{adestramentooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_adestramentoatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" selected data-i18n="mod_carisma">CAR*</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_adestramentotreino" type="text" spellcheck="false" maxlength="3" title="@{adestramentotreino}" value="@{bonus_treino}*@{adestramento_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_adestramentooutros" maxlength="3" type="text" spellcheck="false" title="@{adestramentooutros}" value="0">

                        <!-- Atletismo -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_atletismo_treinada" title="@{atletismo_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll"  name="roll_atletismo" value="&{template:t20}{{character=@{character_name}}}{{rollname=Atletismo}}{{theroll=[[1d20+[[@{atletismototal}]]]]}}" class="skill-button">
                                <span data-i18n="atletismo">Atletismo</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_atletismototal" maxlength="2" type="text" spellcheck="false" title="@{atletismototal}" value="@{metade_do_nivel} + @{condicaopericia} + @{atletismoatributo2} + @{atletismotreino} + @{atletismooutros} + @{periciatemp}+@{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_atletismoatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" selected data-i18n="mod_forca">FOR*</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_atletismotreino" type="text" spellcheck="false" maxlength="3" title="@{atletismotreino}" value="@{bonus_treino}*@{atletismo_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_atletismooutros" maxlength="3" type="text" spellcheck="false" title="@{atletismooutros}" value="0">

                        <!-- Atuação-->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_atuacao_treinada" title="@{atuacao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_atuacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Atuação}}{{theroll=[[1d20+[[@{atuacaototal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="atuacao">Atuação</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_atuacaototal" maxlength="2" type="text" spellcheck="false" title="@{atuacaototal}" value="@{metade_do_nivel} + @{condicaopericia} + @{atuacaoatributo2} + @{atuacaotreino} + @{atuacaooutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_atuacaoatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" selected data-i18n="mod_carisma">CAR*</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_atuacaotreino" type="text" spellcheck="false" maxlength="3" title="@{atuacaotreino}" value="@{bonus_treino}*@{atuacao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_atuacaooutros" maxlength="3" type="text" spellcheck="false" title="@{atuacaooutros}" value="0">

                        <!-- Cavalgar -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_cavalgar_treinada" title="@{cavalgar_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_cavalgar" value="&{template:t20}{{character=@{character_name}}}{{rollname=Cavalgar}}{{theroll=[[1d20+[[@{cavalgartotal}]]]]}}" class="skill-button">
                                <span data-i18n="cavalgar">Cavalgar</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_cavalgartotal" maxlength="2" type="text" spellcheck="false" title="@{cavalgartotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{cavalgaratributo2} + @{cavalgartreino} + @{cavalgaroutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_cavalgaratributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_cavalgartreino" type="text" spellcheck="false" maxlength="3" title="@{cavalgartreino}" value="@{bonus_treino}*@{cavalgar_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_cavalgaroutros" maxlength="3" type="text" spellcheck="false" title="@{cavalgaroutros}" value="0">

                        <!-- Conhecimento -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_conhecimento_treinada" title="@{conhecimento_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_conhecimento" value="&{template:t20}{{character=@{character_name}}}{{rollname=Conhecimento}}{{theroll=[[1d20+[[@{conhecimentototal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="conhecimento">Conhecimento</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_conhecimentototal" maxlength="2" type="text" spellcheck="false" title="@{conhecimentototal}" value="@{metade_do_nivel} + @{condicaopericia} + @{conhecimentoatributo2} + @{conhecimentotreino} + @{conhecimentooutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_conhecimentoatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_conhecimentotreino" type="text" spellcheck="false" maxlength="3" title="@{conhecimentotreino}" value="@{bonus_treino}*@{conhecimento_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_conhecimentooutros" maxlength="3" type="text" spellcheck="false" title="@{conhecimentooutros}" value="0">

                        <!-- Cura -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_cura_treinada" title="@{cura_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_cura" value="&{template:t20}{{character=@{character_name}}}{{rollname=Cura}}{{theroll=[[1d20+[[@{curatotal}]]]]}}" class="skill-button">
                                <span data-i18n="cura">Cura</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_curatotal" maxlength="2" type="text" spellcheck="false" title="@{curatotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{curaatributo2} + @{curatreino} + @{curaoutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_curaatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" selected data-i18n="mod_sabedoria">SAB*</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_curatreino" type="text" spellcheck="false" maxlength="3" title="@{curatreino}" value="@{bonus_treino}*@{cura_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_curaoutros" maxlength="3" type="text" spellcheck="false" title="@{curaoutros}" value="0">

                        <!-- Diplomacia -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_diplomacia_treinada" title="@{diplomacia_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_diplomacia" value="&{template:t20}{{character=@{character_name}}}{{rollname=Diplomacia}}{{theroll=[[1d20+[[@{diplomaciatotal}]]]]}}" class="skill-button">
                                <span data-i18n="diplomacia">Diplomacia</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_diplomaciatotal" maxlength="2" type="text" spellcheck="false" title="@{diplomaciatotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{diplomaciaatributo2} + @{diplomaciatreino} + @{diplomaciaoutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_diplomaciaatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" selected data-i18n="mod_carisma">CAR*</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_diplomaciatreino" type="text" spellcheck="false" maxlength="3" title="@{diplomaciatreino}" value="@{bonus_treino}*@{diplomacia_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_diplomaciaoutros" maxlength="3" type="text" spellcheck="false" title="@{diplomaciaoutros}" value="0">

                        <!-- Enganação -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_enganacao_treinada" title="@{enganacao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_enganacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Enganação}}{{theroll=[[1d20+[[@{enganacaototal}]]]]}}" class="skill-button">
                                <span data-i18n="enganacao">Enganação</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_enganacaototal" maxlength="2" type="text" spellcheck="false" title="@{enganacaototal}" value="@{metade_do_nivel} + @{condicaopericia} + @{enganacaoatributo2} + @{enganacaotreino} + @{enganacaooutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_enganacaoatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" selected data-i18n="mod_carisma">CAR*</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_enganacaotreino" type="text" spellcheck="false" maxlength="3" title="@{enganacaotreino}" value="@{bonus_treino}*@{enganacao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_enganacaooutros" maxlength="3" type="text" spellcheck="false" title="@{enganacaooutros}" value="0">

                        <!-- Fortitude -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_fortitude_treinada" title="@{fortitude_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_fortitude" value="&{template:t20}{{character=@{character_name}}}{{rollname=Fortitude}}{{theroll=[[1d20+[[@{fortitudetotal}]]]]}}" class="skill-button">
                                <span data-i18n="fortitude">Fortitude</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_fortitudetotal" maxlength="2" type="text" spellcheck="false" title="@{fortitudetotal}" value="@{metade_do_nivel} + @{resistemp} + @{condicaopericia} + @{fortitudeatributo2} + @{fortitudetreino} + @{fortitudeoutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_fortitudeatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" selected data-i18n="mod_constituicao">CON*</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_fortitudetreino" type="text" spellcheck="false" maxlength="3" title="@{fortitudetreino}" value="@{bonus_treino}*@{fortitude_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_fortitudeoutros" maxlength="3" type="text" spellcheck="false" title="@{fortitudeoutros}" value="0">

                        <!-- Furtividade -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_furtividade_treinada" title="@{furtividade_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_furtividade" value="&{template:t20}{{character=@{character_name}}}{{rollname=Furtividade}}{{theroll=[[1d20+[[@{furtividadetotal}]]]]}}" class="skill-button">
                                <span class="sup-penalidade" data-i18n="furtividade">Furtividade</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_furtividadetotal" maxlength="2" type="text" spellcheck="false" title="@{furtividadetotal}" value="@{metade_do_nivel} + @{tamanho} + @{condicaopericia} + @{periciatemp} + @{rolltemp} + @{furtividadeatributo2} + @{furtividadetreino} + @{furtividadeoutros} -1 * @{penalidades_armadura} -1 * @{penalidades_armadura_carga}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_furtividadeatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_furtividadetreino" type="text" spellcheck="false" maxlength="3" title="@{furtividadetreino}" value="@{bonus_treino}*@{furtividade_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_furtividadeoutros" maxlength="3" type="text" spellcheck="false" title="@{furtividadeoutros}" value="0">

                        <!-- Guerra -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_guerra_treinada" title="@{guerra_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_guerra" value="&{template:t20}{{character=@{character_name}}}{{rollname=Guerra}}{{theroll=[[1d20+[[@{guerratotal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="guerra">Guerra</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_guerratotal" maxlength="2" type="text" spellcheck="false" title="@{guerratotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{guerraatributo2} + @{guerratreino} + @{guerraoutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_guerraatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_guerratreino" type="text" spellcheck="false" maxlength="3" title="@{guerratreino}" value="@{bonus_treino}*@{guerra_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_guerraoutros" maxlength="3" type="text" spellcheck="false" title="@{guerraoutros}" value="0">


                        <!-- Iniciativa -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_iniciativa_treinada" title="@{iniciativa_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_iniciativa" value="&{template:t20}{{character=@{character_name}}}{{rollname=Iniciativa}}{{theroll=[[1d20+[[@{iniciativatotal}]] &{tracker}]]}}" class="skill-button">
                                <span data-i18n="iniciativa">Iniciativa</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_iniciativatotal" maxlength="2" type="text" spellcheck="false" title="@{iniciativatotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{iniciativaatributo2} + @{iniciativatreino} + @{iniciativaoutros} + @{periciatemp} + @{rolltemp} + @{condicaoiniciativa}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_iniciativaatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_iniciativatreino" type="text" spellcheck="false" maxlength="3" title="@{iniciativatreino}" value="@{bonus_treino}*@{iniciativa_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_iniciativaoutros" maxlength="3" type="text" spellcheck="false" title="@{iniciativaoutros}" value="0">

                        <!-- Intimidação -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_intimidacao_treinada" title="@{intimidacao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_intimidacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Intimidação}}{{theroll=[[1d20+[[@{intimidacaototal}]]]]}}" class="skill-button">
                                <span data-i18n="intimidacao">Intimidação</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_intimidacaototal" maxlength="2" type="text" spellcheck="false" title="@{intimidacaototal}" value="@{metade_do_nivel} + @{condicaopericia} + @{intimidacaoatributo2} + @{intimidacaotreino} + @{intimidacaooutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_intimidacaoatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" selected data-i18n="mod_carisma">CAR*</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_intimidacaotreino" type="text" spellcheck="false" maxlength="3" title="@{intimidacaotreino}" value="@{bonus_treino}*@{intimidacao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_intimidacaooutros" maxlength="3" type="text" spellcheck="false" title="@{intimidacaooutros}" value="0">

                        <!-- Intuição -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_intuicao_treinada" title="@{intuicao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_intuicao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Intuição}}{{theroll=[[1d20+[[@{intuicaototal}]]]]}}" class="skill-button">
                                <span data-i18n="intuicao">Intuição</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_intuicaototal" maxlength="2" type="text" spellcheck="false" title="@{intuicaototal}" value="@{metade_do_nivel} + @{condicaopericia} + @{intuicaoatributo2} + @{intuicaotreino} + @{intuicaooutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_intuicaoatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" selected data-i18n="mod_sabedoria">SAB*</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_intuicaotreino" type="text" spellcheck="false" maxlength="3" title="@{intuicaotreino}" value="@{bonus_treino}*@{intuicao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_intuicaooutros" maxlength="3" type="text" spellcheck="false" title="@{intuicaooutros}" value="0">

                        <!-- Investigação -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_investigacao_treinada" title="@{investigacao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_investigacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Investigação}}{{theroll=[[1d20+[[@{investigacaototal}]]]]}}" class="skill-button">
                                <span data-i18n="investigacao">Investigação</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_investigacaototal" maxlength="2" type="text" spellcheck="false" title="@{investigacaototal}" value="@{metade_do_nivel} + @{condicaopericia} + @{investigacaoatributo2} + @{investigacaotreino} + @{investigacaooutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_investigacaoatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_investigacaotreino" type="text" spellcheck="false" maxlength="3" title="@{investigacaotreino}" value="@{bonus_treino}*@{investigacao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_investigacaooutros" maxlength="3" type="text" spellcheck="false" title="@{investigacaooutros}" value="0">

                        <!-- Jogatina -->
                        <div class="signal skill-t20">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_jogatina_treinada" title="@{jogatina_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name skill-t20">
                            <button type="roll" name="roll_jogatina" value="&{template:t20}{{character=@{character_name}}}{{rollname=Jogatina}}{{theroll=[[1d20+[[@{jogatinatotal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="jogatina">Jogatina</span>
                            </button>
                        </div>
                        <div class="signal skill-t20"></div>
                        <input class="total last skill-t20" name="attr_jogatinatotal" maxlength="2" type="text" spellcheck="false" title="@{jogatinatotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{jogatinaatributo2} + @{jogatinatreino} + @{jogatinaoutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal skill-t20">=</div>
                        <select name="attr_jogatinaatributo2" class="skill-t20">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" selected data-i18n="mod_carisma">CAR*</option>
                        </select>
                        <div class="signal skill-t20">+</div>
                        <input class="skill-t20" name="attr_jogatinatreino" type="text" spellcheck="false" maxlength="3" title="@{jogatinatreino}" value="@{bonus_treino}*@{jogatina_treinada}" disabled="true">
                        <div class="signal skill-t20">+</div>
                        <input class="skill-t20" name="attr_jogatinaoutros" maxlength="3" type="text" spellcheck="false" title="@{jogatinaoutros}" value="0">

                        <!-- Ladinagem -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_ladinagem_treinada" title="@{ladinagem_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_ladinagem" value="&{template:t20}{{character=@{character_name}}}{{rollname=Ladinagem}}{{theroll=[[1d20+[[@{ladinagemtotal}]]]]}}" class="skill-button">
                                <span class="sup-treinada-penalidade" data-i18n="ladinagem">Ladinagem</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_ladinagemtotal" maxlength="2" type="text" spellcheck="false" title="@{ladinagemtotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{periciatemp} + @{rolltemp} + @{ladinagematributo2} + @{ladinagemtreino} + @{ladinagemoutros} -1 * @{penalidades_armadura} -1 * @{penalidades_armadura_carga}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_ladinagematributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_ladinagemtreino" type="text" spellcheck="false" maxlength="3" title="@{ladinagemtreino}" value="@{bonus_treino}*@{ladinagem_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_ladinagemoutros" maxlength="3" type="text" spellcheck="false" title="@{ladinagemoutros}" value="0">

                        <!-- Luta -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_luta_treinada" title="@{luta_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_luta" value="&{template:t20}{{character=@{character_name}}}{{rollname=Luta}}{{theroll=[[1d20+[[@{lutatotal}]]]]}}" class="skill-button">
                                <span data-i18n="luta">Luta</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_lutatotal" maxlength="2" type="text" spellcheck="false" title="@{lutatotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{lutaatributo2} + @{lutatreino} + @{lutaoutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_lutaatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" selected data-i18n="mod_forca">FOR*</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_lutatreino" type="text" spellcheck="false" maxlength="3" title="@{lutatreino}" value="@{bonus_treino}*@{luta_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_lutaoutros" maxlength="3" type="text" spellcheck="false" title="@{lutaoutros}" value="0">

                        <!-- Misticismo -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_misticismo_treinada" title="@{misticismo_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_misticismo" value="&{template:t20}{{character=@{character_name}}}{{rollname=Misticismo}}{{theroll=[[1d20+[[@{misticismototal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="misticismo">Misticismo</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_misticismototal" maxlength="2" type="text" spellcheck="false" title="@{misticismototal}" value="@{metade_do_nivel} + @{condicaopericia} + @{periciatemp} + @{rolltemp} + @{misticismoatributo2} + @{misticismotreino} + @{misticismooutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_misticismoatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_misticismotreino" type="text" spellcheck="false" maxlength="3" title="@{misticismotreino}" value="@{bonus_treino}*@{misticismo_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_misticismooutros" maxlength="3" type="text" spellcheck="false" title="@{misticismooutros}" value="0">

                        <!-- Nobreza -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_nobreza_treinada" title="@{nobreza_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_nobreza" value="&{template:t20}{{character=@{character_name}}}{{rollname=Nobreza}}{{theroll=[[1d20+[[@{nobrezatotal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="nobreza">Nobreza</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_nobrezatotal" maxlength="2" type="text" spellcheck="false" title="@{nobrezatotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{nobrezaatributo2} + @{nobrezatreino} + @{nobrezaoutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_nobrezaatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_nobrezatreino" type="text" spellcheck="false" maxlength="3" title="@{nobrezatreino}" value="@{bonus_treino}*@{nobreza_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_nobrezaoutros" maxlength="3" type="text" spellcheck="false" title="@{nobrezaoutros}" value="0">

                        <!-- Ofício -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_oficio_treinada" title="@{oficio_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="oficio">
                            <button type="roll" name="roll_oficio1" name="roll_oficio1" value="&{template:t20}{{character=@{character_name}}}{{rollname=Ofício @{oficionome}}}{{theroll=[[1d20+[[@{oficiototal}]]]]}}" class="skill-button">
                                <span data-i18n="oficio">Ofício</span>
                            </button>
                            <input class="nome-oficio" name="attr_oficionome" type="text" spellcheck="false">
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_oficiototal" maxlength="2" type="text" spellcheck="false" title="@{oficiototal}" value="@{metade_do_nivel} + @{condicaopericia} + @{oficioatributo2} + @{oficiotreino} + @{oficiooutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_oficioatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_oficiotreino" type="text" spellcheck="false" maxlength="3" title="@{oficiotreino}" value="@{bonus_treino}*@{oficio_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_oficiooutros" maxlength="3" type="text" spellcheck="false" title="@{oficiooutros}" value="0">

                        <!-- Ofício 2 -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_oficio2_treinada" title="@{oficio2_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="oficio">
                            <button type="roll" name="roll_oficio2" value="&{template:t20}{{character=@{character_name}}}{{rollname=Ofício @{oficio2nome}}}{{theroll=[[1d20+[[@{oficio2total}]]]]}}" class="skill-button">
                                <span data-i18n="oficio">Ofício</span>
                            </button>
                            <input class="nome-oficio" name="attr_oficio2nome" type="text" spellcheck="false">
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_oficio2total" maxlength="2" type="text" spellcheck="false" title="@{oficio2total}" value="@{metade_do_nivel} + @{condicaopericia} + @{oficio2atributo2} + @{oficio2treino} + @{oficio2outros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_oficio2atributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" selected data-i18n="mod_inteligencia">INT*</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_oficio2treino" type="text" spellcheck="false" maxlength="3" title="@{oficio2treino}" value="@{bonus_treino}*@{oficio2_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_oficio2outros" maxlength="3" type="text" spellcheck="false" title="@{oficio2outros}" value="0">

                        <!-- Percepção -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_percepcao_treinada" title="@{percepcao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_percepcao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Percepção}}{{theroll=[[1d20+[[@{percepcaototal}]]]]}}" class="skill-button">
                                <span data-i18n="percepcao">Percepção</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_percepcaototal" maxlength="2" type="text" spellcheck="false" title="@{percepcaototal}" value="@{metade_do_nivel} + @{condicaopericia} + @{percepcaoatributo2} + @{percepcaotreino} + @{percepcaooutros} + @{periciatemp} + @{rolltemp} + @{condicaopercepcao}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_percepcaoatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" selected data-i18n="mod_sabedoria">SAB*</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_percepcaotreino" type="text" spellcheck="false" maxlength="3" title="@{percepcaotreino}" value="@{bonus_treino}*@{percepcao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_percepcaooutros" maxlength="3" type="text" spellcheck="false" title="@{percepcaooutros}" value="0">

                        <!-- Pilotagem -->
                        <div class="signal skill-t20">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_pilotagem_treinada" title="@{pilotagem_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name skill-t20">
                            <button type="roll" name="roll_pilotagem" value="&{template:t20}{{character=@{character_name}}}{{rollname=Pilotagem}}{{theroll=[[1d20+[[@{pilotagemtotal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="pilotagem">Pilotagem</span>
                            </button>
                        </div>
                        <div class="signal skill-t20"></div>
                        <input class="total last skill-t20" name="attr_pilotagemtotal" maxlength="2" type="text" spellcheck="false" title="@{pilotagemtotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{pilotagematributo2} + @{pilotagemtreino} + @{pilotagemoutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal skill-t20">=</div>
                        <select class="skill-t20" name="attr_pilotagematributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal skill-t20">+</div>
                        <input class="skill-t20" name="attr_pilotagemtreino" type="text" spellcheck="false" maxlength="3" title="@{pilotagemtreino}" value="@{bonus_treino}*@{pilotagem_treinada}" disabled="true">
                        <div class="signal skill-t20">+</div>
                        <input class="skill-t20" name="attr_pilotagemoutros" maxlength="3" type="text" spellcheck="false" title="@{pilotagemoutros}" value="0">
                        
                        <!-- Pontaria -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_pontaria_treinada" title="@{pontaria_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_pontaria" value="&{template:t20}{{character=@{character_name}}}{{rollname=Pontaria}}{{theroll=[[1d20+[[@{pontariatotal}]]]]}}" class="skill-button">
                                <span data-i18n="pontaria">Pontaria</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_pontariatotal" maxlength="2" type="text" spellcheck="false" title="@{pontariatotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{pontariaatributo2} + @{pontariatreino} + @{pontariaoutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_pontariaatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_pontariatreino" type="text" spellcheck="false" maxlength="3" title="@{pontariatreino}" value="@{bonus_treino}*@{pontaria_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_pontariaoutros" maxlength="3" type="text" spellcheck="false" title="@{pontariaoutros}" value="0">

                        <!-- Reflexos -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_reflexos_treinada" title="@{reflexos_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_reflexos" value="&{template:t20}{{character=@{character_name}}}{{rollname=Reflexos}}{{theroll=[[1d20+[[@{reflexostotal}]]]]}}" class="skill-button">
                                <span data-i18n="reflexos">Reflexos</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_reflexostotal" maxlength="2" type="text" spellcheck="false" title="@{reflexostotal}" value="@{metade_do_nivel} + @{resistemp} + @{condicaoreflexo} + @{condicaopericia} + @{reflexosatributo2} + @{reflexostreino} + @{reflexosoutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_reflexosatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" selected data-i18n="mod_destreza">DES*</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_reflexostreino" type="text" spellcheck="false" maxlength="3" title="@{reflexostreino}" value="@{bonus_treino}*@{reflexos_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_reflexosoutros" maxlength="3" type="text" spellcheck="false" title="@{reflexosoutros}" value="0">

                        <!-- Religião -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_religiao_treinada" title="@{religiao_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_religiao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Religião}}{{theroll=[[1d20+[[@{religiaototal}]]]]}}" class="skill-button">
                                <span class="sup-treinada" data-i18n="religiao">Religião</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_religiaototal" maxlength="2" type="text" spellcheck="false" title="@{religiaototal}" value="@{metade_do_nivel} + @{condicaopericia} + @{religiaoatributo2} + @{religiaotreino} + @{religiaooutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_religiaoatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" selected data-i18n="mod_sabedoria">SAB*</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_religiaotreino" type="text" spellcheck="false" maxlength="3" title="@{religiaotreino}" value="@{bonus_treino}*@{religiao_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_religiaooutros" maxlength="3" type="text" spellcheck="false" title="@{religiaooutros}" value="0">

                        <!-- Sobrevivência -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_sobrevivencia_treinada" title="@{sobrevivencia_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_sobrevivencia" value="&{template:t20}{{character=@{character_name}}}{{rollname=Sobrevivência}}{{theroll=[[1d20+[[@{sobrevivenciatotal}]]]]}}" class="skill-button">
                                <span data-i18n="sobrevivencia">Sobrevivência</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_sobrevivenciatotal" maxlength="2" type="text" spellcheck="false" title="@{sobrevivenciatotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{periciatemp} + @{rolltemp} + @{sobrevivenciaatributo2} + @{sobrevivenciatreino} + @{sobrevivenciaoutros}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_sobrevivenciaatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" selected data-i18n="mod_sabedoria">SAB*</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_sobrevivenciatreino" type="text" spellcheck="false" maxlength="3" title="@{sobrevivenciatreino}" value="@{bonus_treino}*@{sobrevivencia_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_sobrevivenciaoutros" maxlength="3" type="text" spellcheck="false" title="@{sobrevivenciaoutros}" value="0">

                        <!-- Vontade -->
                        <div class="signal">
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_vontade_treinada" title="@{vontade_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                        </div>
                        <div class="skill-name">
                            <button type="roll" name="roll_vontade" value="&{template:t20}{{character=@{character_name}}}{{rollname=Vontade}}{{theroll=[[1d20+[[@{vontadetotal}]]]]}}" class="skill-button">
                                <span data-i18n="vontade">Vontade</span>
                            </button>
                        </div>
                        <div class="signal"></div>
                        <input class="total last" name="attr_vontadetotal" maxlength="2" type="text" spellcheck="false" title="@{vontadetotal}" value="@{metade_do_nivel} + @{resistemp} + @{condicaopericia} + @{vontadeatributo2} + @{vontadetreino} + @{vontadeoutros} + @{periciatemp} + @{rolltemp}" disabled="true">
                        <div class="signal">=</div>
                        <select name="attr_vontadeatributo2">
                            <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_forca">FOR</option>
                            <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                            <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                            <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                            <option value="@{sab_mod} + @{condicaopermental}" selected data-i18n="mod_sabedoria">SAB*</option>
                            <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                        </select>
                        <div class="signal">+</div>
                        <input name="attr_vontadetreino" type="text" spellcheck="false" maxlength="3" title="@{vontadetreino}" value="@{bonus_treino}*@{vontade_treinada}" disabled="true">
                        <div class="signal">+</div>
                        <input name="attr_vontadeoutros" maxlength="3" type="text" spellcheck="false" title="@{vontadeoutros}" value="0">

                        <!-- Repeating -->
                        <fieldset class="repeating_skills">
                            <div class="signal">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_periciaextratreinada" title="@{pericia_treinada}" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>                            
                            <div class="skill-name"> 
                                <button type="roll" name="roll_pericia" value="&{template:t20}{{character=@{character_name}}}{{rollname=@{periciaextra}}}{{theroll=[[1d20+[[@{periciaextratotal}]]]]}}" class="skill-button">
                                    <span class="sheet-buttondicefont">T</span>
                                </button>
                                <input name="attr_periciaextra" type="text" spellcheck="false" value="" class="sheet-nome-oficio-extra"/>
                            </div>
                            <div class="signal"></div>
                            <input class="total last" name="attr_periciaextratotal" maxlength="2" type="text" spellcheck="false" title="@{periciaextratotal}" value="@{metade_do_nivel} + @{condicaopericia} + @{periciatemp} + @{rolltemp} + @{periciaextraatributo2} + @{periciaextratreino} + @{periciaextraoutros}" disabled="true">
                            <div class="signal">=</div>
                            <select name="attr_periciaextraatributo2">
                                <option value="@{for_mod} + @{condicaoperfisico} + @{condicaocego}" selected data-i18n="mod_forca">FOR</option>
                                <option value="@{des_mod} + @{condicaoperfisico} + @{condicaocego}" data-i18n="mod_destreza">DES</option>
                                <option value="@{con_mod} + @{condicaoperfisico}" data-i18n="mod_constituicao">CON</option>
                                <option value="@{int_mod} + @{condicaopermental}" data-i18n="mod_inteligencia">INT</option>
                                <option value="@{sab_mod} + @{condicaopermental}" data-i18n="mod_sabedoria">SAB*</option>
                                <option value="@{car_mod} + @{condicaopermental}" data-i18n="mod_carisma">CAR</option>
                            </select>
                            <div class="signal">+</div>
                            <input name="attr_periciaextratreino" type="text" spellcheck="false" maxlength="3" title="@{periciaextratreino}" value="@{bonus_treino}*@{periciaextratreinada}" disabled="true">
                            <div class="signal">+</div>
                            <input name="attr_periciaextraoutros" maxlength="3" type="text" spellcheck="false" title="@{periciaextraoutros}" value="0">    
                        </fieldset>

                        <div class="legenda-pericias">
                            <i>+</i> <span data-i18n="penalidade_armadura">Penalidade de Armadura</span> 
                            <i>*</i> <span data-i18n="somente_treinada">Somente Treinada</span>
                        </div>

                    </div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div>
        <div class="equipment-container">
            <div class="container-negative-corner">
                <div class="inside-negative-corner">
                    <div class="grid-equipment">
                        <div class="small-title" data-i18n="vestido">Vestido</div>
                        <div class="small-title" data-i18n="quantidade">QTD.</div>
                        <div class="grid-title" data-i18n="equipamentos">Equipamentos</div>
                        <div class="small-title" data-i18n="espaco">Espaços</div>
                    </div>
                    
                    <fieldset class="repeating_equipment">
                        <div class="grid-equipment">                            
                            <label class="fake-checkbox">
                                <input type="checkbox" name="attr_sobrevivencia_treinada" title="@{sobrevivencia_treinada}" value="1">
                                <div class="fake-checkbox-status"></div>
                            </label>
                            <input name="attr_equipquantity" type="text" spellcheck="false" value="1">
                            <input name="attr_equipname" type="text" spellcheck="false" value="">
                            <input name="attr_equipslot" type="text" spellcheck="false" value="0" >
                        </div>
                    </fieldset>
                    <div class="container-money">
                        <span data-i18n="tibares">T$:</span>
                        <input name="attr_ts" type="text" spellcheck="false" value="0">    
                        <span data-i18n="tibares_ouro">TO:</span>
                        <input name="attr_to" type="text" spellcheck="false" value="0">  
                    </div>
                    <div class="container-money">
                        <span class="cargaspan" data-i18n="carga">Espaços:</span>
                        <input class="cargainput" name="attr_carga" type="text" spellcheck="false" value="0" readonly="1">      
                        <span class="cargaspan" data-i18n="extraslot">E.Extra:</span>
                        <input class="cargainput" name="attr_extraslot" type="text" spellcheck="false" value="0">      
                    </div>
                    <div class="container-money">
                        <span data-i18n="climite">E.Limite:</span>
                        <input class="cargalimite" name="attr_limite" type="text" spellcheck="false" value="@{limite}" readonly="1">
                        <span data-i18n="cmaxima">E.Máxima:</span>
                        <input class="cargamaxima" name="attr_maxima" type="text" spellcheck="false" value="@{maxima}" readonly="1">     
                    </div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div>
        <!-- <div class="charnotes-container">
            <div class="container-negative-corner">
                <div class="inside-negative-corner">
                    <div class="default-title">
                        Anotações
                    </div>
                    <div class="content-centered">
                        <textarea name="attr_charnotes"></textarea>
                    </div>
                    <div class="corner top-left"></div>
                    <div class="corner top-right"></div>
                    <div class="corner bottom-left"></div>
                    <div class="corner bottom-right"></div>
                </div>
            </div>
        </div> -->
    </div> 

    <div class="charnotes-container">
        <div class="container-negative-corner">
            <div class="inside-negative-corner">
                <div class="default-title" data-i18n="anotacoes">
                    Anotações
                </div>
                <div class="content-centered">
                    <textarea name="attr_charnotes"></textarea>
                </div>
                <div class="corner top-left"></div>
                <div class="corner top-right"></div>
                <div class="corner bottom-left"></div>
                <div class="corner bottom-right"></div>
            </div>
        </div>
    </div>

    <!--Menace-->
    <div class="menace-container">
        <div class="container-logo">
            <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/master/Tormenta20%20-%20Jogo%20do%20Ano/Tormenta20Logo.png" class="logo-tormenta"/>
        </div>
        <div class="container-logo-ghanor sheet-hiddenelement">
            <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/A-Lenda-de-Ghanor/A%20Lenda%20de%20Ghanor/LendaDeGhanor.png" class="logo-ghanor sheet-hiddenelement"/>
        </div>
        <div class="sheet-global-columns">
            <div class="sheet-left-icons">
                <span class="sheet-attack-span hiddenelement" name="attr_attackicon" title="Ataque" data-i18n-title="spam-attack"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/punch.png" class="sheet-attack-icon hiddenelement"  title="Ataque" data-i18n-title="spam-attack"/>
                <span class="sheet-damage-span hiddenelement" name="attr_damageicon" title="Dano" data-i18n-title="spam-damage"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/explosion.png" class="sheet-damage-icon hiddenelement" title="Dano" data-i18n-title="spam-damage"/>
                <span class="sheet-roll-span hiddenelement" name="attr_rollicon" title="Rolagem" data-i18n-title="spam-roll"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/numerology.png" class="sheet-roll-icon hiddenelement" title="Rolagem" data-i18n-title="spam-roll"/>
                <span class="sheet-skills-span hiddenelement" name="attr_skillsicon" title="Perícias" data-i18n-title="spam-skills"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/skills.png" class="sheet-skills-icon hiddenelement" title="Perícias" data-i18n-title="spam-skills"/>
                
                <span class="sheet-resist-span hiddenelement" name="attr_resistsicon" title="Resistências" data-i18n-title="resistance"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/resistence.png" class="sheet-resist-icon hiddenelement" title="Resistências" data-i18n-title="resistencias"/>
                
                <span class="sheet-defense-span hiddenelement" name="attr_defenseicon" title="Defesa" data-i18n-title="spam-defense"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/antivirus.png" class="sheet-defense-icon hiddenelement" title="Defesa" data-i18n-title="spam-defense"/>
                <span class="sheet-armor-span hiddenelement" name="attr_armoricon" title="Armadura" data-i18n-title="spam-armor"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/armor.png" class="sheet-armor-icon hiddenelement" title="Armadura" data-i18n-title="spam-armor"/>
                <span class="sheet-shield-span hiddenelement" name="attr_shieldicon" title="Escudo" data-i18n-title="spam-shield"></span>
                <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/t20-goty-menace-character-sheet/Tormenta20%20-%20Jogo%20do%20Ano/icons/shield.png" class="sheet-shield-icon hiddenelement" title="Escudo" data-i18n-title="spam-shield"/>
            </div>
            <div class="sheet-right-icons">
                <button class="round sheet-global-color" data-i18n="player_eraseglobal" type="action" name="act_eraseglobal">Limpar Globais</button>
            </div>            
        </div>
        <div class="menace-header">
            <div class="name-div">
                <input name="attr_menace_name" type="text" spellcheck="false" value="@{character_name}" placeholder="Nome" class="sheet-menace-name" data-i18n-placeholde="menace-name">
            </div>
            <div class="menace-nd">
                <span>ND</span><span name="attr_menace_nd" placeholder="ND" class="sheet-menace-nd" ></span>
            </div>
        </div>
        <div class="menace-creature-type">
            <input name="attr_menace_type_size" type="text" spellcheck="false" placeholder="Tipo(Criatura) Tamanho(Papel)" class="sheet-menace-creature" data-i18n-placeholde="menace-type">
        </div>
        <div class="menace-base-info">
            <div>
                <button type="roll" name="roll_iniciativa" value="&{template:t20}{{character=@{character_name}}}{{rollname=Iniciativa}}{{theroll=[[1d20+[[@{iniciativatotal}]]]]}}" class="skill-button">
                    <span data-i18n="iniciativa">Iniciativa</span><span name="attr_menace_init" value="@{iniciativatotal}" class="infos"></span>
                </button>,
                <button type="roll" name="roll_percepcao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Percepção}}{{theroll=[[1d20+[[@{percepcaototal}]]]]}}" class="skill-button">
                    <span data-i18n="percepcao">Percepção</span><span name="attr_menace_percep" value="@{percepcaototal}" class="infos"></span> 
                </button>
                <input type="text" class="menace-perception" name="attr_menace_perception" placeholder="Percepção da Criatura" data-i18n-placeholde="menace-perception">
            </div>
            <div>
                <span data-i18n="defesa">Defesa</span><span name="attr_menace_defense" value="@{defesatotal}" class="infos"></span>,
                <button type="roll" name="roll_fort" value="&{template:t20}{{character=@{character_name}}}{{rollname=Fortitude}}{{theroll=[[1d20+[[@{fortitudetotal}]]]]}}" class="skill-button">
                    <span data-i18n="fort">Fort</span><span name="attr_menace_fortitude" value="@{fortitudetotal}" class="infos"></span>
                </button>, 
                <button type="roll" name="roll_ref" value="&{template:t20}{{character=@{character_name}}}{{rollname=Reflexo}}{{theroll=[[1d20+[[@{reflexostotal}]]]]}}" class="skill-button">
                    <span data-i18n="refl">Ref</span><span name="attr_menace_reflex" value="@{reflexostotal}" class="infos"></span>
                </button>, 
                <button type="roll" name="roll_vont" value="&{template:t20}{{character=@{character_name}}}{{rollname=Vontade}}{{theroll=[[1d20+[[@{vontadetotal}]]]]}}" class="skill-button">    
                    <span data-i18n="von">Von</span><span name="attr_menace_will" value="@{vontadetotal}" class="infos"></span> 
                </button>
                <textarea type="text" class="menace-resistence" name="attr_menace_resist" placeholder="Resistências da Criatura" data-i18n-placeholde="menace-resistence"></textarea>
            </div>
            <div>
                <span data-i18n="pontos_de_vida">Pontos de Vida</span><span name="attr_menace_hp" class="menace-desloc-vida infos" value="@{vida_max}"></span>
            </div>
            <div>
                <span data-i18n="deslocamento">Deslocamento</span><input type="text" name="attr_menace_desloc" class="menace-desloc-vida infos" placeholder="Deslocamentos Criatura">
            </div>
        </div>
        <div class="menace-rolls">
            <div class="menace-mana-points">
                <span class="menace-mana" data-i18n="pontos_de_mana">Pontos de Mana</span><span class="menace-mana infos" name="attr_menace_mp" value="@{mana_max}" ></span>
            </div>
            <div class="menace-attacks">
                <span class="melee" data-i18n="melee">Corpo a Corpo </span>  
                <fieldset class="repeating_menacemelee sheet-melee">
                    <button type="roll" name="roll_attack" value="&{template:t20-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[1d20cs>@{margemcriticoataque}+[[@{ataquepericia}]]+@{bonusataque}+@{ataquetemp}]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}+@{dadoextraataque}+@{danotemp}+@{rolltemp}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{modatributodano}+@{danoextraataque}+@{dadoextraataque}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}">
                        <span class="melee infos" name="attr_melee_list"></span>
                    </button>
                    <span  name="attr_meleedescription" class="infos"></span>
                    <input name="attr_nomeataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_bonusataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_danoataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_danoextraataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_dadoextraataque"  type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_margemcriticoataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_multiplicadorcriticoataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_danocriticoataque" type="hidden" value="" readonly="1">
                    <input name="attr_ataquepericia" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_ataquetipodedano" type="hidden" spellcheck="false" value="" readonly="1"/>
                    <input name="attr_modatributodano" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_ataquedescricao" type="hidden" spellcheck="false" class="" value="" readonly="1">
                </fieldset>
                <span class="distance" data-i18n="distance">À Distância</span>
                <fieldset class="repeating_menacedistance sheet-distance">                    
                    <button type="roll" name="roll_attack" value="&{template:t20-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[1d20cs>@{margemcriticoataque}+[[@{ataquepericia}]]+@{bonusataque}+@{ataquetemp}]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}+@{dadoextraataque}+@{danotemp}+@{rolltemp}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{modatributodano}+@{danoextraataque}+@{dadoextraataque}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}">
                        <span class="distance infos" name="attr_distance_list"></span>
                    </button>
                    <span  name="attr_distancedescription" class="infos"></span>
                    <input name="attr_nomeataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_bonusataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_danoataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_danoextraataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_dadoextraataque"  type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_margemcriticoataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_multiplicadorcriticoataque" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_danocriticoataque" type="hidden" value="" readonly="1">
                    <input name="attr_ataquepericia" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_ataquetipodedano" type="hidden" spellcheck="false" value="" readonly="1"/>
                    <input name="attr_modatributodano" type="hidden" spellcheck="false" class="" value="" readonly="1">
                    <input name="attr_ataquedescricao" type="hidden" spellcheck="false" class="" value="" readonly="1">
                </fieldset>
            </div>
            <div class="menace-powers">
                <fieldset class="repeating_menaceabilities">
                    <div class="container-menace-ability-power">
                        <button type="roll" name="roll_ability" class="buttonshowinfo" value="&{template:t20-info}{{infoname=@{menacenameabilityinput}}}{{description=@{menaceabilitydescriptioninput}}}">
                            <span name="attr_menacenameability"></span>
                        </button>
                        <span name="attr_menaceabilitydescription" class="infos"></span>
                        <input name="attr_menacenameabilityinput"type="hidden" readonly="1"/>
                        <input name="attr_menaceabilitydescriptioninput"type="hidden" readonly="1"/>
                    </div>
                </fieldset>
            </div>            
            <div class="menace-spells">
                <fieldset class="repeating_menacespells">
                    <div class="container-menace-ability-power">
                        <button type="roll" name="roll_ability" class="buttonshowinfo" value="&{template:t20-info}{{infoname=@{menacenamespellsinput}}}{{description=@{menaceaspellsdescriptioninput}}}">
                            <span name="attr_menacenamespells"></span>
                        </button>
                        <span name="attr_menaceaspellsdescription" class="infos"></span>
                        <input name="attr_menacenamespellsinput"type="hidden" readonly="1"/>
                        <input name="attr_menaceaspellsdescriptioninput"type="hidden" readonly="1"/>
                    </div>
                </fieldset>
            </div>           
        </div>
        <div class="menace-attributes">
            <button type="roll" name="roll_menace_for" value="&{template:t20}{{character=@{character_name}}}{{rollname=Força}}{{theroll=[[1d20+[[@{for_mod}]]]]}}" class="skill-button">    
                <span data-i18n="mod_forca">For</span><span name="attr_menace_for" value="@{for_mod}" class="infos"></span>
            </button>, 
            <button type="roll" name="roll_menace_des" value="&{template:t20}{{character=@{character_name}}}{{rollname=Destreza}}{{theroll=[[1d20+[[@{des_mod}]]]]}}" class="skill-button">    
                <span data-i18n="mod_destreza">Des</span><span name="attr_menace_des" value="@{des_mod}" class="infos"></span>
            </button>, 
            <button type="roll" name="roll_menace_con" value="&{template:t20}{{character=@{character_name}}}{{rollname=Constituição}}{{theroll=[[1d20+[[@{con_mod}]]]]}}" class="skill-button">    
                <span data-i18n="mod_constituicao">Con</span><span name="attr_menace_con" value="@{con_mod}" class="infos"></span>
            </button>, 
            <button type="roll" name="roll_menace_int" value="&{template:t20}{{character=@{character_name}}}{{rollname=Inteligência}}{{theroll=[[1d20+[[@{int_mod}]]]]}}" class="skill-button">    
                <span data-i18n="mod_inteligencia">Int</span><span name="attr_menace_int" value="@{int_mod}" class="infos"></span>
            </button>, 
            <button type="roll" name="roll_menace_sab" value="&{template:t20}{{character=@{character_name}}}{{rollname=Sabedoria}}{{theroll=[[1d20+[[@{sab_mod}]]]]}}" class="skill-button">    
                <span data-i18n="mod_sabedoria">Sab</span><span name="attr_menace_sab" value="@{sab_mod}" class="infos"></span>
            </button>, 
            <button type="roll" name="roll_menace_car" value="&{template:t20}{{character=@{character_name}}}{{rollname=Carisma}}{{theroll=[[1d20+[[@{car_mod}]]]]}}" class="skill-button">    
                <span data-i18n="mod_carisma">Car</span><span name="attr_menace_car" value="@{car_mod}" class="infos"></span>
            </button>
        </div>
        <div class="menace-skills">
            <span data-i18n="pericias">Perícias</span> 
            <button type="roll" name="roll_menace_acrobacia" value="&{template:t20}{{character=@{character_name}}}{{rollname=Acrobacia}}{{theroll=[[1d20+[[@{acrobaciatotal}]]]]}}" class="skill-button">
                <span  data-i18n="acrobacia" class="span-menace infos menace-acrobacia">Acrobacia</span><span class="menace-acrobacia infos" name="attr_menace_acrobaciatotal" value="@{acrobaciatotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_adestramento" value="&{template:t20}{{character=@{character_name}}}{{rollname=Adestramento}}{{theroll=[[1d20+[[@{adestramentototal}]]]]}}" class="skill-button">
                <span  data-i18n="adestramento" class="span-menace infos menace-adestramento">Adestramento</span><span class="menace-adestramento infos"  name="attr_menace_adestramentototal" value="@{adestramentototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_atletismo" value="&{template:t20}{{character=@{character_name}}}{{rollname=Atletismo}}{{theroll=[[1d20+[[@{atletismototal}]]]]}}" class="skill-button">    
                <span  data-i18n="atletismo" class="span-menace infos menace-atletismo">Atletismo</span><span class="menace-atletismo infos"  name="attr_menace_atletismototal" value="@{atletismototal}" ></span>
            </button> 
            <button type="roll" name="roll_menace_atuacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Atuação}}{{theroll=[[1d20+[[@{atuacaototal}]]]]}}" class="skill-button">    
                <span  data-i18n="atuacao" class="span-menace infos menace-atuacao">Atuação</span><span class="menace-atuacao infos"  name="attr_menace_atuacaototal" value="@{atuacaototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_cavalgar" value="&{template:t20}{{character=@{character_name}}}{{rollname=Cavalgar}}{{theroll=[[1d20+[[@{cavalgartotal}]]]]}}" class="skill-button">    
                <span  data-i18n="cavalgar" class="span-menace infos menace-cavalgar">Cavalgar</span><span class="menace-cavalgar infos"  name="attr_menace_cavalgartotal" value="@{cavalgartotal}"  ></span>
            </button> 
            <button type="roll" name="roll_menace_conhecimento" value="&{template:t20}{{character=@{character_name}}}{{rollname=Conhecimento}}{{theroll=[[1d20+[[@{conhecimentototal}]]]]}}" class="skill-button">    
                <span  data-i18n="conhecimento" class="span-menace infos menace-conhecimento">Conhecimento</span><span class="menace-conhecimento infos"  name="attr_menace_conhecimentototal" value="@{conhecimentototal}" ></span>
            </button> 
            <button type="roll" name="roll_menace_cura" value="&{template:t20}{{character=@{character_name}}}{{rollname=Cura}}{{theroll=[[1d20+[[@{curatotal}]]]]}}" class="skill-button">    
                <span  data-i18n="cura" class="span-menace infos menace-cura">Cura</span><span class="menace-cura infos"  name="attr_menace_curatotal" value="@{curatotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_diplomacia" value="&{template:t20}{{character=@{character_name}}}{{rollname=Diplomacia}}{{theroll=[[1d20+[[@{diplomaciatotal}]]]]}}" class="skill-button">    
                <span  data-i18n="diplomacia" class="span-menace infos menace-diplomacia">Diplomacia</span><span class="menace-diplomacia infos"  name="attr_menace_diplomaciatotal" value="@{diplomaciatotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_enganacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Enganação}}{{theroll=[[1d20+[[@{enganacaototal}]]]]}}" class="skill-button">    
                <span  data-i18n="enganacao" class="span-menace infos menace-enganacao">Enganação</span><span class="menace-enganacao infos"  name="attr_menace_enganacaototal" value="@{enganacaototal}" ></span>
            </button> 
            <button type="roll" name="roll_menace_furtividade" value="&{template:t20}{{character=@{character_name}}}{{rollname=Furtividade}}{{theroll=[[1d20+[[@{furtividadetotal}]]]]}}" class="skill-button">    
                <span  data-i18n="furtividade" class="span-menace infos menace-furtividade">Furtividade</span><span class="menace-furtividade infos"  name="attr_menace_furtividadetotal" value="@{furtividadetotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_guerra" value="&{template:t20}{{character=@{character_name}}}{{rollname=Guerra}}{{theroll=[[1d20+[[@{guerratotal}]]]]}}" class="skill-button">    
                <span  data-i18n="guerra" class="span-menace infos menace-guerra">Guerra</span><span class="menace-guerra infos"  name="attr_menace_guerratotal" value="@{guerratotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_intimidacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Intimidação}}{{theroll=[[1d20+[[@{intimidacaototal}]]]]}}" class="skill-button">    
                <span  data-i18n="intimidacao" class="span-menace infos menace-intimidacao">Intimidação</span><span class="menace-intimidacao infos"  name="attr_menace_intimidacaototal" value="@{intimidacaototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_intuicao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Intuição}}{{theroll=[[1d20+[[@{intuicaototal}]]]]}}" class="skill-button">    
                <span  data-i18n="intuicao" class="span-menace infos menace-intuicao">Intuição</span><span class="menace-intuicao infos"  name="attr_menace_intuicaototal" value="@{intuicaototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_investigacao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Investigação}}{{theroll=[[1d20+[[@{investigacaototal}]]]]}}" class="skill-button">    
                <span  data-i18n="investigacao" class="span-menace infos menace-investigacao">Investigação</span><span class="menace-investigacao infos"  name="attr_menace_investigacaototal" value="@{investigacaototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_jogatina" value="&{template:t20}{{character=@{character_name}}}{{rollname=Jogatina}}{{theroll=[[1d20+[[@{jogatinatotal}]]]]}}" class="skill-button">    
                <span  data-i18n="jogatina" class="span-menace infos menace-jogatina">Jogatina</span><span class="menace-jogatina infos"  name="attr_menace_jogatinatotal" value="@{jogatinatotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_ladinagem" value="&{template:t20}{{character=@{character_name}}}{{rollname=Ladinagem}}{{theroll=[[1d20+[[@{ladinagemtotal}]]]]}}" class="skill-button">    
                <span  data-i18n="ladinagem" class="span-menace infos menace-ladinagem">Ladinagem</span><span class="menace-ladinagem infos"  name="attr_menace_ladinagemtotal" value="@{ladinagemtotal}"></span>
            </button> 
            <button type="roll" name="roll_menace_misticismo" value="&{template:t20}{{character=@{character_name}}}{{rollname=Misticismo}}{{theroll=[[1d20+[[@{misticismototal}]]]]}}" class="skill-button">    
                <span  data-i18n="misticismo" class="span-menace infos menace-misticismo">Misticismo</span><span class="menace-misticismo infos"  name="attr_menace_misticismototal" value="@{misticismototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_nobreza" value="&{template:t20}{{character=@{character_name}}}{{rollname=Nobreza}}{{theroll=[[1d20+[[@{nobrezatotal}]]]]}}" class="skill-button">    
                <span  data-i18n="nobreza" class="span-menace infos menace-nobreza">Nobreza</span><span class="menace-nobreza infos"  name="attr_menace_nobrezatotal" value="@{nobrezatotal}" ></span>
            </button> 
            <button type="roll" name="roll_menace_oficio" value="&{template:t20}{{character=@{character_name}}}{{rollname=Ofício}}{{theroll=[[1d20+[[@{oficiototal}]]]]}}" class="skill-button">    
                <span  data-i18n="oficio" class="span-menace infos menace-oficio">Ofício</span><span class="menace-oficio infos"  name="attr_menace_oficiototal" value="@{oficiototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_pilotagem" value="&{template:t20}{{character=@{character_name}}}{{rollname=Pilotagem}}{{theroll=[[1d20+[[@{pilotagemtotal}]]]]}}" class="skill-button">
                <span  data-i18n="pilotagem" class="span-menace infos menace-pilotagem">Pilotagem</span><span class="menace-pilotagem infos"  name="attr_menace_pilotagemtotal" value="@{pilotagemtotal}" ></span>
            </button> 
            <button type="roll" name="roll_menace_religiao" value="&{template:t20}{{character=@{character_name}}}{{rollname=Religião}{{theroll=[[1d20+[[@{religiaototal}]]]]}}" class="skill-button">    
                <span  data-i18n="religiao" class="span-menace infos menace-religiao">Religião</span><span class="menace-religiao infos"  name="attr_menace_religiaototal" value="@{religiaototal}"></span>
            </button> 
            <button type="roll" name="roll_menace_sobrevivencia" value="&{template:t20}{{character=@{character_name}}}{{rollname=Sobrevivência}}{{theroll=[[1d20+[[@{sobrevivenciatotal}]]]]}}" class="skill-button">    
                <span  data-i18n="sobrevivencia" class="span-menace infos menace-sobrevivencia">Sobrevivência</span><span class="menace-sobrevivencia infos" name="attr_menace_sobrevivenciatotal" value="@{sobrevivenciatotal}"></span>
            </button>     
        </div>
        <div class="menace-treasures">
            <span data-i18n="equipamentos">Equipamento</span><span class="menace-treasure">
                <span name="attr_menace_treasure" class="infos"></span>
            </span><br/>
            <span data-i18n="tesouro">Tesouro</span><textarea name="attr_menace_treasures" class="infos"></textarea>
        </div>
    </div>
    <!--Domínios-->
    <div class="domains-container">
        <div class="domain-header">
            <div class="sheet-left-global-container">
                <div class="domain-header-info">
                    <div class="input-with-text-bellow char-name">
                        <input name="attr_domain_name" type="text"  spellcheck="false"  value="">
                        <span data-i18n="dominio">Domínio</span>
                    </div>
                    <div class="input-with-text-bellow sheet-regent-player">
                        <input name="regente" type="text" spellcheck="false" value=""/>
                        <span data-i18n="regente">Regente</span>
                    </div>
                    <div class="input-with-text-bellow sheet-domain-level">
                        <input name="attr_domainlevel" type="text" spellcheck="false" value=""/>
                        <span data-i18n="nivel_personagem">Nível</span>
                    </div>
                </div>
            </div>
            <div class="sheet-right-global-container">
                <div class="logo-level">
                    <div class="container-logo">
                        <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/master/Tormenta20%20-%20Jogo%20do%20Ano/Tormenta20Logo.png" class="logo-tormenta"/>
                    </div>
                    <div class="container-logo-ghanor sheet-hiddenelement">
                        <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/A-Lenda-de-Ghanor/A%20Lenda%20de%20Ghanor/LendaDeGhanor.png" class="logo-ghanor sheet-hiddenelement"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="domain-terrain">
            <div class="input-with-text-bellow">
                <input name="attr_terrain" type="text" spellcheck="false" value=""/>
                <span data-i18n="terreno">Terreno</span>
            </div>
            <div class="input-with-text-bellow">
                <input name="attr_maxdomain" maxlength="3" type="text" spellcheck="false" value=""/>
                <span data-i18n="nivel_dominio">Nível Máximo</span>
            </div>            
            <div class="input-with-text-bellow">
                <div class="total-level">                    
                    <input name="attr_magicpotential" maxlength="3" type="text" spellcheck="false" value=""/>
                    <span data-i18n="potencial_magico">Potêncial Mágico</span>                    
                </div>
            </div> 
        </div>
        <div class="domain-court">
            <div class="court-container">
                <div class="sheet-span-middle">
                    <div>
                        <span class="sheet-span-court" data-i18n="corte">Corte</span>
                    </div>
                </div>
                <div class="sheet-court-level-container">
                    <div>
                        <label>
                            <input id="courtlv" type="radio" name="attr_court" value="0" checked>
                            <span class="court_span" data-i18n="court_inexistente">Inexistente</span>
                            <span class="court_description" data-i18n="court_inexistente_desc">Manutenção 0LO</span><br>
                            <span class="court_sub_desc" data-i18n="court_inexistente_sub_desc">-2 em ações de domínio</span>
                        </label>
                    </div>
                    <div>
                        <label>
                            <input id="courtlv" type="radio" name="attr_court" value="1">
                            <span class="court_span" data-i18n="court_pobre">Pobre</span>
                            <span class="court_description" data-i18n="court_pobre_desc">Manutenção 0LO</span><br>
                            <span class="court_sub_desc" data-i18n="court_pobre_sub_desc">-2 em ações de domínio</span>
                        </label>
                    </div>
                    <div>
                        <label>
                            <input id="courtlv" type="radio" name="attr_court" value="2">
                            <span class="court_span" data-i18n="court_comum">Comum</span>
                            <span class="court_description" data-i18n="court_comum_desc">Manutenção 0LO</span><br>
                            <span class="court_sub_desc" data-i18n="court_comum_sub_desc">-2 em ações de domínio</span>
                        </label>
                    </div>
                    <div>
                        <label>
                            <input id="courtlv" type="radio" name="attr_court" value="3">
                            <span class="court_span" data-i18n="court_rica">Rica</span>
                            <span class="court_description" data-i18n="court_rica_desc">Manutenção 0LO</span><br>
                            <span class="court_sub_desc" data-i18n="court_rica_sub_desc">-2 em ações de domínio</span>
                        </label>
                    </div>
                </div>
                <div class="sheet-council-container">
                    <div class="sheet-counchil-header">
                        <span data-i18n="conselheiro">Conselheiro</span>
                        <span data-i18n="pericia">Perícia</span>
                    </div>
                    <div class="sheet-council-input">
                        <fieldset class="repeating_council">
                            <div class="sheet-grid-council">                           
                                <input name="attr_councelor" type="text" spellcheck="false" value="">
                                <input name="attr_councelorskill" type="text" spellcheck="false" value="">
                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>
            <div class="popularity-container">
                <div class="sheet-span-middle">
                    <div>
                        <span class="sheet-span-court" data-i18n="popularidade">Popularidade</span>
                    </div>
                </div>
                <div class="sheet-popularity-level-container">
                    <div>
                        <label>
                            <input id="courtpopularit" type="radio" name="attr_popularity" value="0" checked>
                            <span class="court_span" data-i18n="court_adorado">Adorado</span><br>
                            <span class="court_description" data-i18n="court_adorado_desc">+2 em ações de domínio</span>
                        </label>
                    </div>
                    <div>
                        <label>
                            <input id="courtpopularit" type="radio" name="attr_popularity" value="1">
                            <span class="court_span" data-i18n="court_impopular">Impopular</span><br>
                            <span class="court_description" data-i18n="court_impopular_desc">-2 em ações de domínio</span>
                        </label>
                    </div>
                    <div>
                        <label>
                            <input id="courtpopularit" type="radio" name="attr_popularity" value="2">
                            <span class="court_span" data-i18n="court_popular">Popular</span><br>
                            <span class="court_description" data-i18n="court_popular_desc">+1 em ações de domínio</span>
                        </label>
                    </div>
                    <div>
                        <label>
                            <input id="courtpopularit" type="radio" name="attr_popularity" value="3">
                            <span class="court_span" data-i18n="court_odiado">Odiado</span><br>
                            <span class="court_description" data-i18n="court_odiado_desc">-5 em ações de domínio e pode sofrer uma revolta</span>
                        </label>
                    </div>
                    <div>
                        <label>
                            <input id="courtpopularit" type="radio" name="attr_popularity" value="4">
                            <span class="court_span" data-i18n="court_tolerado">Tolerado</span>
                            <span class="court_description" data-i18n="court_tolerado_desc">Sem modificador</span>
                        </label>
                    </div>
                </div>
                <div class="sheet-fortification-container">
                    <span>Fortificação</span>
                    <textarea name="attr_fortificacao"></textarea>
                </div>
            </div>
            <div>
                <div class="buildings-container">
                    <div class="container-negative-corner">
                        <div class="inside-negative-corner">
                            <div class="grid-buildings">
                                <div class="grid-title" data-i18n="construcoes">Construções</div>
                                <div class="small-title" data-i18n="custo">Custo</div>
                                <div class="small-title" data-i18n="beneficio">Benefício</div>
                            </div>
                            
                            <fieldset class="repeating_buildings">
                                <div class="sheet-grid-buildings-body">                            
                                    <input name="attr_buildingname" type="text" spellcheck="false" value="">
                                    <input name="attr_buildingcost" type="text" spellcheck="false" value="">
                                    <input name="attr_buildingdesc" type="text" spellcheck="false" value="" >
                                </div>
                            </fieldset>
                           
                            <div class="corner top-left"></div>
                            <div class="corner top-right"></div>
                            <div class="corner bottom-left"></div>
                            <div class="corner bottom-right"></div>
                        </div>
                    </div>
                </div>
                <div class="troop-container">
                    <div class="container-negative-corner">
                        <div class="inside-negative-corner">
                            <div class="grid-troop">
                                <div class="grid-title" data-i18n="tropas">Tropas</div>
                                <div class="small-title" data-i18n="quantidade">Quantidade</div>
                                <div class="small-title" data-i18n="manutencao">Manutenção</div>
                                <div class="small-title" data-i18n="poder">Poder</div>
                                <div class="small-title" data-i18n="deslocamento">Deslocamento</div>
                                <div class="small-title" data-i18n="defesa">Defesa</div>
                                <div class="small-title" data-i18n="dano">Dano</div>
                            </div>
                            
                            <fieldset class="repeating_troop">
                                <div class="grid-troop">                            
                                    <input name="attr_tropsname" type="text" spellcheck="false" value="">
                                    <input name="attr_tropsquant" type="text" spellcheck="false" value="">
                                    <input name="attr_tropsmanut" type="text" spellcheck="false" value="">
                                    <input name="attr_tropspower" type="text" spellcheck="false" value="" >
                                    <input name="attr_tropsmove" type="text" spellcheck="false" value="">
                                    <input name="attr_tropsdefense" type="text" spellcheck="false" value="">
                                    <input name="attr_tropsdamage" type="text" spellcheck="false" value="">
                                </div>
                            </fieldset>
                            
                            <div class="corner top-left"></div>
                            <div class="corner top-right"></div>
                            <div class="corner bottom-left"></div>
                            <div class="corner bottom-right"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            
    </div>
    <!--Global-->
    <div class="global-container">       
        <div class="sheet-left-global-container">
            <div class="header-global">
                <div class="sheet-header-position">
                    <h1 data-i18n="global_charactersheet" class="sheet-global-title">Modificadores Globais</h1>
                </div>
                <div class="sheet-right-icons sheet-header-button-position">
                    <button class="round sheet-global-color" data-i18n="player_eraseglobal" type="action" name="act_eraseglobal">Limpar Globais</button>
                </div> 
            </div>            
            <div class="global-rolls">
                    <div class="attacks-container">
                        <div class="inside">
                            <div class="container-negative-corner">
                                <div class="inside-negative-corner">
                                    <!-- <div class="default-title">Ataques</div> -->
                                    <div class="attacksgrid">    
                                        <div class="small-title" data-i18n="rolagem">Rolagens</div>                                    
                                        <div class="small-title" data-i18n="bonus_ataque">Ataque</div>                                        
                                        <div class="small-title" data-i18n="pericias">Perícias</div>
                                        <div class="small-title" data-i18n="resistencias">Resistências</div>
                                        <div class="small-title" data-i18n="dano">Dano</div>
                                    </div> 
                                    <div class="attacksgrid">
                                        <input name="attr_rolltemp" type="text" spellcheck="false" class="" value="0">
                                        <input name="attr_ataquetemp" type="text" spellcheck="false" class="" value="0">                                        
                                        <input name="attr_periciatemp" type="text" spellcheck="false" class="" value="0">
                                        <input name="attr_resistemp" type="text" spellcheck="false" class="" value="0">
                                        <input name="attr_danotemp" type="text" spellcheck="false" class="" value="0">
                                    </div>                                  
            
                                    <div class="corner top-left"></div>
                                    <div class="corner top-right"></div>
                                    <div class="corner bottom-left"></div>
                                    <div class="corner bottom-right"></div>
                                </div>
                            </div>
                        </div>                
                    </div>
            </div>
            <div class="global-rolls">
                    <div class="defense-container">
                        <div class="inside">
                            <div class="container-negative-corner">
                                <div class="inside-negative-corner">
                                    <!-- <div class="default-title">Ataques</div> -->
                                    <div class="defensegrid">                                        
                                        <div class="grid-title" data-i18n="defesa">Defesa</div>
                                        <div class="small-title" data-i18n="bonus_armadura">Bônus de Armadura</div>
                                        <div class="small-title" data-i18n="bonus_escudo">Bônus de Escudo</div>
                                        <div class="small-title" data-i18n="bonus_defesa_outros">Outros</div>
                                    </div> 
                                    <div class="defensegrid">
                                        <input name="attr_defesafaketemp" maxlength="3" type="text" spellcheck="false" title="" value="0">
                                        <input name="attr_defesaarmaduratemp" maxlength="3" type="text" spellcheck="false" value="0">
                                        <input name="attr_defesaescudotemp" maxlength="3" type="text" spellcheck="false" value="0">
                                        <input name="attr_defesaoutrostemp" maxlength="3" type="text" spellcheck="false" value="0">
                                    </div>                                  
            
                                    <div class="corner top-left"></div>
                                    <div class="corner top-right"></div>
                                    <div class="corner bottom-left"></div>
                                    <div class="corner bottom-right"></div>
                                </div>
                            </div>
                        </div>                
                    </div>
            </div>                
        </div>
        <div class="sheet-right-global-container">
            <div class="logo-level">
                <div class="container-logo">
                    <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/master/Tormenta20%20-%20Jogo%20do%20Ano/Tormenta20Logo.png" class="logo-tormenta"/>
                </div>
                <div class="container-logo-ghanor sheet-hiddenelement">
                    <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/A-Lenda-de-Ghanor/A%20Lenda%20de%20Ghanor/LendaDeGhanor.png" class="logo-ghanor sheet-hiddenelement"/>
                </div>
            </div>
            <div class="character-attributes">
                <!-- Força -->
                <div class="outer-container-negative-corner">
                    <div class="container-negative-corner">
                        <div class="inside-negative-corner">
                            <!-- Conteudo aqui -->
                            <span class="button-title-attribute" data-i18n="mod_forca">FOR</span>
                            <input name="attr_fortemp" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{fortemp}" value="0" />
                            
                            <div class="corner top-left"></div>
                            <div class="corner top-right"></div>
                            <div class="corner bottom-left"></div>
                            <div class="corner bottom-right"></div>
                        </div>
                    </div>
                </div>
                <!-- Destreza -->
                <div class="outer-container-negative-corner">
                    <div class="container-negative-corner">
                        <div class="inside-negative-corner">
                            <span class="button-title-attribute" data-i18n="mod_destreza">DES</span>
                            <input name="attr_destemp" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{destemp}" value="0" />
                                
                            <div class="corner top-left"></div>
                            <div class="corner top-right"></div>
                            <div class="corner bottom-left"></div>
                            <div class="corner bottom-right"></div>
                        </div>
                    </div>
                </div>
                <!-- Constituição -->
                <div class="outer-container-negative-corner">
                    <div class="container-negative-corner">
                        <div class="inside-negative-corner">
                            <span class="button-title-attribute" data-i18n="mod_constituicao">CON</span>
                            <input name="attr_contemp" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{contemp}" value="0" />
                                
                            <div class="corner top-left"></div>
                            <div class="corner top-right"></div>
                            <div class="corner bottom-left"></div>
                            <div class="corner bottom-right"></div>
                        </div>
                    </div>
                </div>
                <!-- Inteligência -->
                <div class="outer-container-negative-corner">
                    <div class="container-negative-corner">
                        <div class="inside-negative-corner">
                            <span class="button-title-attribute" data-i18n="mod_inteligencia">INT</span>
                            <input name="attr_inttemp" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{inttemp}" value="0" />
                                
                            <div class="corner top-left"></div>
                            <div class="corner top-right"></div>
                            <div class="corner bottom-left"></div>
                            <div class="corner bottom-right"></div>
                        </div>
                    </div>
                </div>
                <!-- Sabedoria -->
                <div class="outer-container-negative-corner">
                    <div class="container-negative-corner">
                        <div class="inside-negative-corner">
                            <span class="button-title-attribute" data-i18n="mod_sabedoria">SAB</span>
                            <input name="attr_sabtemp" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{sabtemp}" value="0" />
                                
                            <div class="corner top-left"></div>
                            <div class="corner top-right"></div>
                            <div class="corner bottom-left"></div>
                            <div class="corner bottom-right"></div>
                        </div>
                    </div>
                </div>
                <!-- Carisma -->
                <div class="outer-container-negative-corner">
                    <div class="container-negative-corner">
                        <div class="inside-negative-corner">
                            <span class="button-title-attribute" data-i18n="mod_carisma">CAR</span>
                            <input name="attr_cartemp" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{cartemp}" value="0" />
                                
                            <div class="corner top-left"></div>
                            <div class="corner top-right"></div>
                            <div class="corner bottom-left"></div>
                            <div class="corner bottom-right"></div>
                        </div>
                    </div>
                </div>
            </div> 
        </div>        
    </div>
    <div class="global-container-conditions">
        <div class="global-conditions">
            <div class="condition-container">
                <div class="container-negative-corner">
                    <div class="inside-negative-corner">
                        <div class="sheet-condition-grid-template header">
                            <div class="grid-title pericias-titulo" data-i18n="condicoes">Condições</div>
                            <div class="grid-title" data-i18n="descricao_magia">Descricão</div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Abalado -->
                            <div class="Abalado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_abalado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="abalado">Abalado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="abalado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo.</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Agarrado -->
                            <div class="Agarrado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_agarrado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="agarrado">Agarrado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="agarrado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Alquebrado -->
                            <div class="Alquebrado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_alquebrado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="alquebrado">Alquebrado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="alquebrado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Apavorado -->
                            <div class="Apavorado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_apavorado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="apavorado">Apavorado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="apavorado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Atordoado -->
                            <div class="Atordoado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_atordoado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="atordoado">Atordoado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="atordoado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Caído -->
                            <div class="Caído">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_caido" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="caido">Caído</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="caido_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Cego -->
                            <div class="Cego">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_cego" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="cego">Cego</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="cego_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Confuso -->
                            <div class="Confuso">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_confuso" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="confuso">Confuso</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="confuso_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Desabilitado -->
                            <div class="Debilitado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_debilitado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="debilitado">Desabilitado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="debilitado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Desprevenido -->
                            <div class="Desprevenido">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_desprevenido" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="desprevenido">Desprevenido</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="desprevenido_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Doente -->
                            <div class="Doente">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_doente" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="doente">Doente</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="doente_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Em Chamas -->
                            <div class="Em Chama">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_emchama" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="emchama">Em Chama</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="emchamas_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Enfeitiçado -->
                            <div class="Enfeitiçado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_enfeiticado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="enfeiticado">Enfeitiçado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="enfeiticado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Enjoado -->
                            <div class="Enjoado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_enjoado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="enjoado">Enjoado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="enjoado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Enredado -->
                            <div class="Enredado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_enreado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="enreado">Enredado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="enreado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Envenenado -->
                            <div class="Envenenado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_envenenado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="envenenado">Envenenado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="envenenado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Esmorecido -->
                            <div class="Esmorecido">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_esmorecido" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="esmorecido">Esmorecido</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="esmorecido_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Exausto -->
                            <div class="Exausto">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_exausto" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="exausto">Exausto</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="exausto_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Fascinado -->
                            <div class="Fascinado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_fascinado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="fascinado">Fascinado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="fascinado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Fatigado -->
                            <div class="Fatigado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_fatigado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="fatigado">Fatigado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="fatigado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Fraco -->
                            <div class="Fraco">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_fraco" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="fraco">Fraco</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="fraco_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Frustrado -->
                            <div class="Frustrado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_frustrado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="frustrado">Frustrado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="frustrado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Imóvel -->
                            <div class="Imóvel">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_imovel" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="imovel">Imóvel</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="imovel_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Inconsciente -->
                            <div class="Inconsciente">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_inconsciente" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="inconsciente">Inconsciente</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="inconsciente_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Indefeso -->
                            <div class="Indefeso">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_indefeso" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="indefeso">Indefeso</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="indefeso_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Lento -->
                            <div class="Lento">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_lento" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="lento">Lento</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="lento_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Ofuscado -->
                            <div class="Ofuscado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_ofuscado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="ofuscado">Ofuscado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="ofuscado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Paralizado -->
                            <div class="Paralizado">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_paralizado" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="paralizado">Paralizado</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="paralizado_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Pasmo -->
                            <div class="Pasmo">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_pasmo" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="pasmo">Pasmo</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="pasmo_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Petrificação -->
                            <div class="Petrificação">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_petrificacao" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="petrificacao">Petrificação</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="petrificacao_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Sangrando -->
                            <div class="Sangrando">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_sangrando" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="sangrando">Sangrando</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="sangrando_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>                            
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Surdo -->
                            <div class="Surdo">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_surdo" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="surdo">Surdo</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="surdo_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Surpreendido -->
                            <div class="Surpreendido">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_surpreendido" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="surpreendido">Surpreendido</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="surpreendido_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>
                        <div class="sheet-condition-grid-template skill-list">
                            <!-- Vulnerável -->
                            <div class="Vulnerável">
                                <label class="fake-checkbox">
                                    <input type="checkbox" name="attr_vulneravel" title="" value="1">
                                    <div class="fake-checkbox-status"></div>
                                </label>
                            </div>
                            <div class="skill-name">
                                <span class="sup-penalidade" data-i18n="vulneravel">Vulnerável</span>
                            </div>
                            <div class="condition-description">
                                <span data-i18n="vulneravel_descricao">-2 perícia. Abalado novamente = Apavorado. Medo</span>
                            </div>
                        </div>

                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="hide-author">        
        <span>FICHA OFICIAL BY JAMBO EDITORA</span>
    </div>
    

</div>
<!-- Bonus de Treino -->
<input type="hidden" name="attr_bonus_treino" value="0" readonly="1">
<input type="hidden" name="attr_penalidades_armadura" value="0" readonly="1">
<input type="hidden" name="attr_penalidades_armadura_carga" value="0" readonly="1">
<input type="hidden" name="attr_metade_do_nivel" value="floor(@{charnivel}/2)">
<!-- <input name="attr_character_name" type="hidden" spellcheck="false"> -->
<input name="attr_charname" type="hidden" spellcheck="false" value=""/>
<input type="hidden" name="attr_vida_max" value="@{vidatotal} + @{vidatemp}" readonly/>
<input type="hidden" name="attr_mana_max" value="@{manatotal} + @{manatemp}" readonly/>
<input name="attr_defesatotal" maxlength="5" type="hidden" value="10" spellcheck="false">
<input name="attr_defesatotalcaido" maxlength="5" type="hidden" value="@{defesatotal}+5" spellcheck="false">
<!--Penalidades-->
<input type="hidden" name="attr_condicaomodataquecc" value="0" readonly="1">
<input type="hidden" name="attr_condicaomodataquedis" value="0" readonly="1">
<input type="hidden" name="attr_condicaomodataque" value="0" readonly="1">
<input type="hidden" name="attr_condicaoperfisico" value="0" readonly="1">
<input type="hidden" name="attr_condicaopermental" value="0" readonly="1">
<input type="hidden" name="attr_condicaoresistencia" value="0" readonly="1">
<input type="hidden" name="attr_condicaopercepcao" value="0" readonly="1">
<input type="hidden" name="attr_condicaoiniciativa" value="0" readonly="1">
<input type="hidden" name="attr_condicaodefesa" value="0" readonly="1">
<input type="hidden" name="attr_condicaocego" value="0" readonly="1">
<input type="hidden" name="attr_condicaoreflexo" value="0" readonly="1">
<!--Mods-->
<input type="hidden" name="attr_ficha_monstro" value="1" readonly="1">
<input type="hidden" name="attr_ficha_modificadores" value="1" readonly="1">
<input type="hidden" name="attr_ficha_dominio" value="0" readonly="1">
<input type="hidden" name="attr_game_system" value="tormenta20jda" readonly="1">


<!-- ROLL TEMPLATES -->

<rolltemplate class="sheet-rolltemplate-t20">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            <div class="roll-title">
                {{character}}
            </div>
            <div class="roll-result">
                {{theroll}}
            </div>
            <div class="roll-name">
                <span>{{rollname}}</span>
            </div>
        </div>
    </div>
</rolltemplate>


<rolltemplate class="sheet-rolltemplate-t20-attack">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            {{#character}}
            <div class="roll-title">
                {{character}}
            </div>
            {{/character}}
            <div class="attack-title">
                {{attackname}}
            </div>

            <div>
                <div class="roll">
                    {{attackroll}}
                </div>
                <div class="roll-label">
                    Ataque
                </div>
            </div>
            <div class="divisor"><span></span></div>
            <div>
                {{#^rollWasCrit() attackroll}}
                    <div class="roll">
                        {{damageroll}}
                    </div>
                    <div class="roll-label">
                        Dano
                    </div>
                {{/^rollWasCrit() attackroll}}
                {{#rollWasCrit() attackroll}}
                    <div class="roll">
                        {{criticaldamageroll}}
                    </div>
                    <div class="roll-label">
                        Dano <span class="crit"> (Crítico)</span>
                    </div>
                {{/rollWasCrit() attackroll}}
            </div>

            {{#typeofdamage}}
            <div class="tipo-dano">
                {{typeofdamage}}
            </div>
            {{/typeofdamage}}

            {{#description}}
            <div class="descricao">
                {{description}}
            </div>
            {{/description}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-t20-error-chance">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            <div class="roll-title">
                {{character}}
            </div>
            <div class="roll-result">
                {{errorroll}}
            </div>
            <div class="roll-name">
                <span>Chance de Erro</span>
            </div>
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-t20-info">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            <div class="roll-title">
                {{infoname}}
            </div>
            {{#description}}
            <div class="descricao">
                {{description}}
            </div>
            {{/description}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-spell">
    <div class="sheet-spell-container">
        <div class="spellbox">
            <div class="roll-title">
                {{character}}
            </div>
            <div class="spell-name">
                {{spellname}}
            </div>
            <div class="spell-grid">
                {{#type}}
                <div class="spell-atribute">
                    <span>Tipo: </span>{{type}}
                </div>
                {{/type}}

                {{#execution}}
                <div class="spell-atribute">
                    <span>Execução: </span>{{execution}}
                </div>
                {{/execution}}

                {{#duration}}
                <div class="spell-atribute">
                    <span>Duração: </span>{{duration}}
                </div>
                {{/duration}}

                {{#range}}
                <div class="spell-atribute">
                    <span>Alcance: </span>{{range}}
                </div>
                {{/range}}

                {{#targetarea}}
                <div class="spell-atribute">
                    <span>Alvo/Área: </span>{{targetarea}}
                </div>
                {{/targetarea}}

                {{#resistance}}
                <div class="spell-atribute">
                    <span>Resistência: </span>{{resistance}} {{#cd}}(CD{{cd}}){{/cd}}
                </div>
                {{/resistance}}

                {{#description}}
                <div class="descricao">
                    {{description}}
                </div>
                {{/description}}
            </div>
        </div>
    </div>
</rolltemplate>


<rolltemplate class="sheet-rolltemplate-custom">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            <div class="roll-title">
                {{name}}
            </div>
            {{#secondname}}
            <div class="secondname">
                {{secondname}}
            </div>
            {{/secondname}}
            {{#theroll}}
                <div class="props">
                    <div class="content"><b>{{rollname}}</b> {{theroll}}</div>
                </div>
            {{/theroll}}
            {{#rollWasCrit() theroll}}
                {{#ifcritical}}
                    <div class="props">
                        <div class="content"><b>{{criticalname}}</b> {{ifcritical}}</div>
                    </div>
                {{/ifcritical}}
            {{/rollWasCrit() theroll}}
            {{#^rollWasCrit() theroll}}
                {{#ifcriticalerror}}
                    {{#rollWasFumble() theroll}}
                        {{#ifcriticalerror}}
                            <div class="props">
                                <div class="content"><b>{{criticalname}}</b> {{ifcriticalerror}}</div>
                            </div>
                        {{/ifcriticalerror}}
                    {{/rollWasFumble() theroll}}

                    {{#^rollWasFumble() theroll}}
                        {{#notcritical}}
                            <div class="props">
                                <div class="content"><b>{{criticalname}}</b> {{notcritical}}</div>
                            </div>
                        {{/notcritical}}
                    {{/^rollWasFumble() theroll}}
                {{/ifcriticalerror}}

                {{#^ifcriticalerror}}
                    {{#notcritical}}
                        <div class="props">
                            <div class="content"><b>{{criticalname}}</b> {{notcritical}}</div>
                        </div>
                    {{/notcritical}}
                {{/^ifcriticalerror}}


            {{/^rollWasCrit() theroll}}
            <div class="props">
                {{#allprops() name criticalname ifcritical ifcriticalerror description notcritical theroll rollname secondname}}
                   <div class="content"><b>{{key}}</b> {{value}}</div>
                {{/allprops() name criticalname ifcritical ifcriticalerror description notcritical theroll rollname secondname}}
            </div>
            {{#description}}
                <div class="descricao">
                    {{description}}
                </div>
            {{/description}}
        </div>
    </div>
</rolltemplate>



<script type="text/worker">
    // Stat mods
   ['for', 'des', 'con', 'int', 'sab', 'car'].forEach(stat => {
        on(`sheet:opened change:${stat} change:fortemp change:destemp change:contemp change:inttemp change:sabtemp change:cartemp`, function(){
            getAttrs([stat, "fortemp", "destemp", "contemp", "inttemp", "sabtemp", "cartemp", "fakefor", "fakedes", "fakecon", "fakeint", "fakesab", "fakecar",], function(v){
                let mod = isNaN(parseInt(v[stat])) ? 0 : v[stat];
                let modtemp = isNaN(parseInt(v[`${stat}temp`])) ? 0 : v[`${stat}temp`];
                mod = parseInt(mod) + parseInt(modtemp);

                let faketemp = " "
                
                if(parseInt(modtemp) < 0){
                    faketemp = modtemp;                 
                }
                if(parseInt(modtemp) > 0){
                    faketemp = "+" + modtemp;
                }               
                                
                setAttrs({
                    [`${stat}_mod`]: mod 
                });
                setAttrs({
                    [`fake${stat}`]: faketemp 
                });
                setAttrs({
                    [`menace_${stat}`]: mod 
                });


                if(stat == 'for'){                    
                    repeatingSumModified("carga","equipment",["equipquantity","equipslot"], "");   
                }
            }); 
        });
    });

    on(`sheet:opened`, function(){
        getAttrs([
            "game_system", "ficha_monstro", "ficha_modificadores", "ficha_dominio"
        ], function(v){
            if(v.game_system == 'ghanor'){
                //Esconde Tormenta
                $20('.sheet-deityAndLevel').addClass('sheet-hiddenelement');
                $20('.sheet-logo-tormenta').addClass('sheet-hiddenelement');
                $20('.sheet-skill-t20').addClass('sheet-hiddenelement');
                $20('.sheet-header-info').addClass('sheet-header-info-ghanor');
                $20('.sheet-container-logo').addClass('sheet-hiddenelement');
                
                //Apresenta Ghanor
                $20('.sheet-domains').removeClass('sheet-hiddenelement');
                $20('.sheet-ghanor-level').removeClass('sheet-hiddenelement');
                $20('.sheet-logo-ghanor').removeClass('sheet-hiddenelement'); 
                $20('.sheet-main .sheet-input-with-text-bellow.sheet-char-player-ghanor').removeClass('sheet-hiddenelement');
                $20('.sheet-container-logo-ghanor').removeClass('sheet-hiddenelement');
                $20('.sheet-char-player').addClass('sheet-char-player-ghanor');
                $20('.sheet-header-global').addClass('sheet-header-global-ghanor');
                
                //Troca de Cores                
                $20('.sheet-global-color').addClass('ghanor-color-background');
                $20('input:focus + .sheet-slider').addClass('ghanor-color-background');  

                $20('.sheet-menace-header span').addClass('ghanor-color');
                $20('.sheet-menace-container input').addClass('ghanor-color'); 
                $20('.sheet-menace-base-info span').addClass('ghanor-color');
                $20('.sheet-menace-rolls span').addClass('ghanor-color'); 
                $20('.sheet-menace-attributes span').addClass('ghanor-color');
                $20('.sheet-menace-skills span').addClass('ghanor-color');  
                $20('.sheet-menace-treasures span').addClass('ghanor-color'); 
                $20('.sheet-global-title').addClass('ghanor-color'); 

                $20('.sheet-menace-base-info').addClass('sheet-menace-base-info-ghanor'); 
                $20('.sheet-menace-attributes').addClass('sheet-menace-attributes-ghanor');
                $20('.sheet-menace-base-info').removeClass('sheet-menace-base-info'); 
                $20('.sheet-menace-attributes').removeClass('sheet-menace-attributes');

                $20('.sheet-inside-negative-corner').addClass('ghanor-color-border-2');
                $20('.sheet-corner').addClass('sheet-container-negative-corner-ghanor');
                $20('.sheet-global-container .sheet-character-attributes').addClass('sheet-character-attributes-ghanor');
            } else {
                $20('.sheet-span-court').addClass('sheet-background-tormenta');
                $20('.sheet-fortification-container span').addClass('sheet-background-tormenta');
                $20('.sheet-fortification-container textarea').addClass('sheet-border-tormenta');
            }
            console.log(v.ficha_dominio, v.ficha_modificadores, v.ficha_monstro);

            if(v.game_system == 'tormenta20jda'){
                if(v.ficha_dominio == 1){
                    $20('.sheet-domains').removeClass('sheet-hiddenelement');
                }
            }

            if(v.ficha_modificadores == 1){
                $20('.sheet-mod').removeClass('sheet-hiddenelement');
            }

            if(v.ficha_monstro == 1){
                $20('.sheet-npj').removeClass('sheet-hiddenelement');
            }
        });
    });

    on(`sheet:opened change:rolltemp change:ataquetemp change:danotemp change:resistemp change:periciatemp change:defesafaketemp change:defesaarmaduratemp change:defesaescudotemp change:defesaoutrostemp change:fortemp change:destemp change:contemp change:inttemp change:sabtemp change:cartemp change:abalado change:agarrado change:alquebrado change:apavorado change:atordoado change:caido change:cego change:confuso change:debilitado  change:desprevenido change:doente change:emchama change:enfeiticado change:enjoado change:enreado change:envenenado change:esmorecido change:exausto change:fascinado change:fatigado change:fraco change:frustrado change:imovel change:inconsciente change:indefeso change:lento change:ofuscado change:paralizado change:pasmo change:petrificacao change:sangrando change:surdo change:surpreendido change:vulneravel`, function(){
        getAttrs([
                "abalado","agarrado","alquebrado","apavorado","atordoado","caido","cego","confuso","debilitado","desprevenido","doente","emchama","enfeiticado","enjoado","enreado",
                "envenenado","esmorecido","exausto","fascinado","fatigado","fraco","frustrado","imovel","inconsciente","indefeso","lento","ofuscado","paralizado","pasmo","petrificacao",
                "sangrando","surdo","surpreendido","vulneravel", "desafesaoutrostemp",
                "rolltemp", "ataquetemp", "periciatemp", "danotemp", "resistemp", "defesafaketemp", "defesaarmaduratemp", "defesaescudotemp", "defesaoutrostemp", 
                "fortemp", "destemp", "contemp", "inttemp", "sabtemp", "cartemp"
            ], function(v){

            let ataque = ataque_cc = ataque_dis = 0;
            let pericia = pericia_fisica = pericia_mental = cego = 0;    
            let percepcao = 0;
            let iniciativa = 0;
            let reflexo = 0;
            let defesa = 0;
            let show_global = false;

            if(v.abalado == 1){ pericia = -2; show_global = true;}
            if(v.agarrado == 1){ ataque = -2; setAttrs({"desprevenido": 1, "imovel": 1});  show_global = true;}
            if(v.atordoado == 1){ setAttrs({"desprevenido": 1});  show_global = true;}            
            if(v.enreado == 1){ setAttrs({"lento":1, "vulneravel":1}); ataque = -2;  show_global = true;}            
            if(v.exausto == 1){ setAttrs({"debilitado": 1, "lento": 1, "vulneravel":1});  show_global = true;}            
            if(v.fatigado == 1){ setAttrs({"fraco": 1, "vulneravel":1});  show_global = true;}
            if(v.fraco == 1){ pericia_fisica = -2;  show_global = true;}
            if(v.frustrado == 1){ pericia_mental = -2;  show_global = true;}
            if(v.inconsciente == 1){ setAttrs({"indefeso":1});  show_global = true;}
            if(v.ofuscado == 1){ ataque = percepcao = -2;  show_global = true;}
            if(v.paralizado == 1){ setAttrs({"imovel":1, "indefeso": 1 });  show_global = true;}
            if(v.petrificacao == 1){ setAttrs({"inconsciente":1});  show_global = true;}            
            if(v.surpreendido == 1){ setAttrs({"desprevenido":1});  show_global = true;}
            if(v.vulneravel == 1){ defesa = -2;  show_global = true; }
            if(v.surdo == 1){ iniciativa = -5;  show_global = true;}
            if(v.apavorado == 1){ pericia = -5;  show_global = true;}
            if(v.fascinado == 1){ percepcao = -5;  show_global = true;}            
            if(v.cego == 1){ cego = -5; setAttrs({"desprevenido": 1, "lento": 1});  show_global = true;}
            if(v.debilitado  == 1){ pericia_fisica = -5;  show_global = true;}
            if(v.esmorecido == 1){ pericia_mental = -5;  show_global = true;}
            if(v.desprevenido == 1){ defesa = reflexo = -5;  show_global = true;}
            if(v.indefeso == 1){ setAttrs({"desprevenido":1}); defesa = -10;  show_global = true;}   
            if(v.alquebrado == 1) { show_global = true; }
            if(v.confuso == 1) { show_global = true; }
            if(v.emchama == 1) { show_global = true; }
            if(v.doente == 1) { show_global = true; } 
            if(v.enfeiticado == 1) { show_global = true; }
            if(v.enjoado == 1) { show_global = true; }
            if(v.envenenado == 1) { show_global = true; }
            if(v.imovel == 1) { show_global = true; }
            if(v.lento == 1) { show_global = true; }
            if(v.imovel == 1) { show_global = true; }
            if(v.sangrando == 1){ show_global = true; }         

            if (parseInt(ataque)  < parseInt(ataque_cc)){ ataque_cc = 0; }
            if (parseInt(ataque)  < parseInt(ataque_dis)){ ataque_dis = 0 }
            if (parseInt(pericia) < parseInt(pericia_fisica)) { pericia_fisica = 0; }
            if (parseInt(pericia) < parseInt(pericia_mental)) { pericia_mental = 0; }
            if (parseInt(pericia) < parseInt(percepcao)) { percepcao = 0; }
            if (parseInt(pericia) < parseInt(iniciativa)) { iniciativa = 0; }
            if (parseInt(pericia) < parseInt(reflexo)) { reflexo = 0; }
            if (parseInt(pericia) < parseInt(cego) || parseInt(pericia_fisica) < parseInt(cego)) { cego = 0; }
            if (parseInt(pericia) < parseInt(ataque)) { ataque = 0; }    

            $20('.sheet-defesacaido-color').addClass('sheet-hiddenelement');    
            if(v.caido == 1){ ataque_cc -= 5; $20('.sheet-defesacaido-color').removeClass('sheet-hiddenelement'); show_global = true;  }

            let global_array = [
                [v.rolltemp, '.sheet-roll-span', '.sheet-roll-icon'],
                [parseInt(v.ataquetemp) + parseInt(ataque), '.sheet-attack-span', '.sheet-attack-icon'],
                [parseInt(v.periciatemp) + parseInt(pericia), '.sheet-skills-span', '.sheet-skills-icon' ],
                [parseInt(v.danotemp), '.sheet-damage-span', '.sheet-damage-icon'],
                [parseInt(v.defesafaketemp) +  parseInt(v.defesaoutrostemp) + parseInt(defesa), '.sheet-defense-span', '.sheet-defense-icon'],
                [v.defesaarmaduratemp, '.sheet-armor-span', '.sheet-armor-icon'],
                [v.defesaescudotemp, '.sheet-shield-span', '.sheet-shield-icon'],
                [parseInt(v.resistemp), '.sheet-resist-span', '.sheet-resist-icon']
            ];      

            for(i = 0; i <= 7; i++){
                if(parseInt(global_array[i][0]) != 0){
                    $20(global_array[i][1]).removeClass('sheet-hiddenelement');
                    $20(global_array[i][2]).removeClass('sheet-hiddenelement');
                    show_global = true;
                }

                if(parseInt(global_array[i][0]) == 0){
                    global_array[i][0] = "";
                    $20(global_array[i][1]).addClass('sheet-hiddenelement');
                    $20(global_array[i][2]).addClass('sheet-hiddenelement');
                }

                if(parseInt(global_array[i][0]) > 0){
                    global_array[i][0] = "+" + global_array[i][0];
                }               
            } 
            
            if(                 
                parseInt(v.fortemp) != 0 || parseInt(v.destemp) != 0 || parseInt(v.contemp) != 0 ||
                parseInt(v.inttemp) != 0 || parseInt(v.sabtemp) != 0 || parseInt(v.cartemp) != 0 ||
                show_global
            ) {
                $20('.sheet-global-color').removeClass('sheet-hiddenelement');
            } else {
                $20('.sheet-global-color').addClass('sheet-hiddenelement');
            }  


            setAttrs({
                "condicaomodataquecc": ataque_cc, 
                "condicaomodataquedis": ataque_dis, 
                "condicaomodataque": ataque, 
                "condicaoperfisico": pericia_fisica, 
                "condicaopermental": pericia_mental, 
                "condicaopericia": pericia,
                "condicaopercepcao": percepcao, 
                "condicaoiniciativa": iniciativa, 
                "condicaodefesa": defesa, 
                "condicaoreflexo": reflexo,
                "condicaocego": cego,
                "rollicon": global_array[0][0],
                "attackicon": global_array[1][0],
                "skillsicon": global_array[2][0],   
                "damageicon": global_array[3][0],
                "defenseicon": global_array[4][0],  
                "armoricon": global_array[5][0],  
                "shieldicon": global_array[6][0], 
                "resistsicon": global_array[7][0]
            });

        });
    });    

    //Trigger CalculoPesoMoeda
    on("sheet:opened change:ts", function(e){
        repeatingSumModified("carga","equipment",["equipquantity","equipslot"], ""); 
    });
    on("sheet:opened change:to", function(e){
        repeatingSumModified("carga","equipment",["equipquantity","equipslot"], ""); 
    });
    on("sheet:opened change:extraslot", function(e){
        repeatingSumModified("carga","equipment",["equipquantity","equipslot"], ""); 
    });
    
    //Bonus em perícia por nível
    on("sheet:opened change:charnivel", function(e){
        getAttrs(["charnivel"], function(v){
            let nivel = parseInt(v.charnivel);
            let bonusnivel = 0;
            if(nivel >= 15){
                bonusnivel = 6;
            }else if(nivel >= 7){
                bonusnivel = 4;
            }else{
                bonusnivel = 2;
            }
            setAttrs({
                "bonus_treino": bonusnivel 
            });
        }); 
    });

    //Penalidades de Armadura:
    on("sheet:opened change:armadurapenalidade1 change:armadurapenalidade2", function(e){
        getAttrs(["armadurapenalidade1", "armadurapenalidade2"], function(v){
            let penalidade1 = isNaN(v.armadurapenalidade1) ? 0 : v.armadurapenalidade1;
            let penalidade2 = isNaN(v.armadurapenalidade2) ? 0 : v.armadurapenalidade2;

            let total = parseInt(penalidade1) + parseInt(penalidade2);            
            setAttrs({
                "penalidades_armadura": total
            });
        }); 
    });

    //Calculando o dano de um acerto critico
    on("change:repeating_attacks:danoataque change:repeating_attacks:multiplicadorcriticoataque change:repeating_attacks:danoextraataque change:repeating_attacks:tipocritico change:repeating_attacks:modatributodano", function() {
        getAttrs([
        "repeating_attacks_danoataque",
        "repeating_attacks_multiplicadorcriticoataque",
        "repeating_attacks_tipocritico",
        "repeating_attacks_danoextraataque",
        "repeating_attacks_modatributodano",
        "danotemp", "rolltemp", 
        "for_mod", "des_mod", "con_mod", "int_mod", "sab_mod", "car_mod"
        ], function(v) {
            let dano = '';
            
            if(typeof v.repeating_attacks_danoataque === 'string'){
                dano = v.repeating_attacks_danoataque;
            }else{
                dano = v.repeating_attacks_danoataque.toString();
            }

            let multiplicador = parseInt(v.repeating_attacks_multiplicadorcriticoataque) - 1;
            let resultado = dano;
            let lancinante = 0;
            
            for(let i=0; i < multiplicador; i++){
                resultado = resultado + " + " + dano;
            }

            resultado = resultado + " + " +  parseInt(v.danotemp) + " + " +  parseInt(v.rolltemp);

            if(v.repeating_attacks_tipocritico == "dilacerante"){
                resultado = resultado + " + " + 10;
            }

            if(v.repeating_attacks_tipocritico == "lancinante"){
                let modattribute = 0;
                let flat = 0;
                if(parseInt(v[stripTag(v.repeating_attacks_modatributodano)])){
                    modattribute = parseInt(v[stripTag(v.repeating_attacks_modatributodano)]);
                }
                               
                for(let i=0; i < multiplicador; i++){
                    lancinante = lancinante + " + " + 
                        v.repeating_attacks_danoextraataque;
                }

                flat = ((parseInt(modattribute) + parseInt(v.danotemp) + parseInt(v.rolltemp)) * parseInt(multiplicador));

                lancinante = lancinante + " + " + flat;
               
                resultado = resultado + " + " + lancinante;
            }            

            console.log("Resultado:"+resultado);
                        
            setAttrs({
                "repeating_attacks_danocriticoataque": resultado
            });
        });
    });

    on("change:rolltemp change:danotemp", function(){
        getSectionIDs("attacks", function(idarray) {
            for(var i=0; i < idarray.length; i++) {
                let repeating_attacks = "repeating_attacks_" + idarray[i] + "_danoataque";
                getAttrs([repeating_attacks], function(v){
                    console.log(v[repeating_attacks]);
                    console.log(repeating_attacks);
                    
                    setAttrs({
                        [repeating_attacks]: v[repeating_attacks] + " "
                    });
                    setAttrs({
                        [repeating_attacks]: v[repeating_attacks]
                    });
                });
            }
         });
    });
    
    //Importador:
    on("sheet:opened", function(e){
        setAttrs({
            "created_by_linki": ""
        });
    });
    on("change:created_by_linki", function(e){
        "use strict";
        getAttrs(["created_by_linki"], function(v){
            try{
                if(!!v.created_by_linki){
                    let data = JSON.parse(v.created_by_linki);
                    if(!!data){
                        let newrowid = generateRowID();
                        newrowid = newrowid.replace(/_/g, "Z");
                        let toadd = {};

                        Object.keys(data).forEach(function(objkey){
                            toadd["repeating_attacks_" + newrowid + "_" + objkey] = data[objkey];
                        });
                        setAttrs(toadd);
                    }
                }
            }catch(e){
                console.error("ops!", e);
            }finally {
                setAttrs({
                    "created_by_linki": ""
                });
            }
        }); 
    });

    //Repeating Sum [https://wiki.roll20.net/RepeatingSum]
    const repeatingSumModified = (destination,section, fields, appendText = '', multiplier = 1) => {
        if (!Array.isArray(fields)) fields = [fields];
        getSectionIDs(`repeating_${section}`, idArray => {
            const attrArray = idArray.reduce( (m,id) => [...m, ...(fields.map(field => `repeating_${section}_${id}_${field}`))],[]);

            let pesoMoeda = 0;
            let slotExtra = 0;
            getAttrs(["ts", "to", "extraslot"], function(v){
                let tibar = parseInt(v.ts);
                let tibouro = parseInt(v.to);
                slotExtra = parseInt(v.extraslot)
                pesoMoeda = Math.floor((tibar + tibouro)/1000);                
            }); 

            getAttrs(["for", ...attrArray], v => {
                //console.log("===== values of v: "+ JSON.stringify(v) +" =====");
                    // getValue: if not a number, returns 1 if it is 'on' (checkbox), otherwise returns 0..
                const getValue = (section, id,field) => parseFloat(v[`repeating_${section}_${id}_${field}`]) || (v[`repeating_${section}_${id}_${field}`] === 'on' ? 1 : 0); 
                const sumTotal = idArray.reduce((total, id) => total + fields.reduce((subtotal,field) => subtotal * getValue(section, id,field),1),0);
                
                let for_mod = parseInt(v.for);

                let cargalimit = for_mod > 0 ? 10 + (2 * for_mod) :  10 + parseInt(for_mod);
                cargalimit += slotExtra;
                let cargamax = cargalimit * 2;
                                            
                let setObj = {}

                let finalTotal = (sumTotal * multiplier) + pesoMoeda;

                finalTotal = finalTotal.toString() + appendText;

                setObj['penalidades_armadura_carga'] = 0;

                setObj[destination] = finalTotal;

                setObj['limite'] = cargalimit;
                setObj['maxima'] = cargamax;
                
                if(sumTotal * multiplier > cargalimit){
                    setObj['penalidades_armadura_carga'] = 5;

                    setObj[destination] = finalTotal + "!" ;
                }

                setAttrs(setObj);
            });
        });
    };

    //Calculando carga e seus efeitos:
    on('sheet:opened change:repeating_equipment remove:repeating_equipment', function() {
        repeatingSumModified("carga","equipment",["equipquantity","equipslot"], "");        
    });

    /* // Usar para adicionar uma arma ao criar a ficha
    getSectionIDs('repeating_foo', idArray => {
        log(idArray.length); // logs number of repeating rows within repeating_foo
    });
    */


    //Calculando Defesa Total:
    on("sheet:opened change:condicaodefesa change:defesaoutrostemp change:defesaarmaduratemp change:defesaescudotemp change:defesafaketemp change:defesaatributo change:armaduradefesa1 change:armaduradefesa2 change:defesaoutros change:for_mod change:des_mod change:con_mod change:int_mod change:sab_mod change:car_mod change:modatributodefesa change:caido", function(e){
        getAttrs(["condicaodefesa", "defesafaketemp", "defesaoutrostemp", "defesaarmaduratemp", "defesaescudotemp", "defesaatributo", "armaduradefesa1", "armaduradefesa2", "defesaoutros", "for_mod", "des_mod", "con_mod", "int_mod", "sab_mod", "car_mod", "modatributodefesa", "caido"], function(v){
            let total = 10;

            //Armadura
            if(!isNaN(v.armaduradefesa1)){
                total = total + parseInt(v.armaduradefesa1) + parseInt(v.defesaarmaduratemp);
            }
            //Escudo
            if(!isNaN(v.armaduradefesa2)){
                total = total + parseInt(v.armaduradefesa2) + parseInt(v.defesaescudotemp);
            }
            //Outros
            if(!isNaN(v.defesaoutros)){
                total = total + parseInt(v.defesaoutros) + parseInt(v.defesaoutrostemp);
            }
            //Mod de Atributo
            let modAttributo = parseInt(v[`${v.modatributodefesa}`]);

            if(!isNaN(modAttributo) && v.defesaatributo == '1'){             
                total = total + modAttributo;
            }

            if(!isNaN(v.condicaodefesa)){
                total = total + parseInt(v.condicaodefesa);
            }

            if(!isNaN(v.defesafaketemp)){
                total = total + parseInt(v.defesafaketemp);
            }
            
            setAttrs({
                "defesatotal": total,
                "menace_defense": total
            });
        }); 
    });

    const convertToND = (charnivel) => {
        if (charnivel == '.3'){
            return '1/4';
        }
        if (charnivel == '.5'){
            return '1/2';
        }
        return charnivel
    }

    on("clicked:eraseglobal", function(){    
        getAttrs(["rolltemp", "ataquetemp", "periciatemp", "danotemp", "defesafaketemp", "defesaarmaduratemp", "defesaescudotemp", "defesaoutrostemp",
            "fortemp", "destemp", "contemp", "inttemp", "sabtemp", "cartemp",
        ], function(v){ 
            setAttrs({
                "rolltemp": 0, "ataquetemp": 0,"periciatemp": 0, "resistemp":0, "danotemp": 0,"defesafaketemp": 0,  "defesaoutrostemp": 0,  
                "defesaarmaduratemp": 0, "defesaescudotemp": 0,  
                "fortemp": 0,  "destemp": 0,  "contemp": 0,  "inttemp": 0,  "sabtemp": 0,  "cartemp": 0, "abalado": 0,
                "agarrado": 0,"alquebrado": 0,"apavorado": 0,"atordoado": 0,"caido": 0,"cego": 0,"confuso": 0,
                "debilitado": 0,"desprevenido": 0,"doente": 0,"emchama": 0,"enfeiticado": 0,"enjoado": 0,
                "enreado": 0,"envenenado": 0,"esmorecido": 0,"exausto": 0,"fascinado": 0,"fatigado": 0,
                "fraco": 0,"frustrado": 0,"imovel": 0,"inconsciente": 0,"indefeso": 0,"lento": 0,
                "ofuscado": 0,"paralizado": 0,"pasmo": 0,"petrificacao": 0,"sangrando": 0,
                "surdo": 0,"surpreendido": 0,"vulneravel": 0, "alquebrado": 0
            });
        });
    });

    //Troca entre a ficha de ameaças e a ficha de jogador
    on("sheet:opened change:cstype change:resistemp", function(e){
        getAttrs(["cstype", "game_system"], function(v){
            let switch_selector = 'sheet-switch-selected';
            if(v.game_system == 'ghanor'){
                switch_selector = 'sheet-switch-selected-ghanor';
            }

            if (v.cstype == 0) {
                $20('.sheet-left-container').removeClass('sheet-hiddenelement');
                $20('.sheet-right-container').removeClass('sheet-hiddenelement');
                $20('.sheet-charnotes-container').removeClass('sheet-hiddenelement');
    
                $20('.sheet-menace-container').addClass('sheet-hiddenelement');
                $20('.sheet-global-container').addClass('sheet-hiddenelement');
                $20('.sheet-global-container-conditions').addClass('sheet-hiddenelement');
                $20('.sheet-domains-container').addClass('sheet-hiddenelement');
    
                $20('.sheet-pj').addClass(switch_selector);
                $20('.sheet-npj').removeClass(switch_selector);
                $20('.sheet-mod').removeClass(switch_selector);
                $20('.sheet-domains').removeClass(switch_selector);
    
            }
    
            if (v.cstype == 1){
                $20('.sheet-left-container').addClass('sheet-hiddenelement');
                $20('.sheet-right-container').addClass('sheet-hiddenelement');
                $20('.sheet-charnotes-container').addClass('sheet-hiddenelement');
    
                $20('.sheet-menace-container').removeClass('sheet-hiddenelement');
                $20('.sheet-global-container').addClass('sheet-hiddenelement');
                $20('.sheet-global-container-conditions').addClass('sheet-hiddenelement');
                $20('.sheet-domains-container').addClass('sheet-hiddenelement');
    
                $20('.sheet-pj').removeClass(switch_selector);
                $20('.sheet-npj').addClass(switch_selector);
                $20('.sheet-mod').removeClass(switch_selector);
                $20('.sheet-domains').removeClass(switch_selector);
            }               
    
            if (v.cstype == 2){
                $20('.sheet-left-container').addClass('sheet-hiddenelement');
                $20('.sheet-right-container').addClass('sheet-hiddenelement');
                $20('.sheet-charnotes-container').addClass('sheet-hiddenelement');
    
                $20('.sheet-menace-container').addClass('sheet-hiddenelement');
                $20('.sheet-global-container').removeClass('sheet-hiddenelement');   
                $20('.sheet-global-container-conditions').removeClass('sheet-hiddenelement');
                $20('.sheet-domains-container').addClass('sheet-hiddenelement');
                
                $20('.sheet-pj').removeClass(switch_selector);
                $20('.sheet-npj').removeClass(switch_selector);
                $20('.sheet-mod').addClass(switch_selector);
                $20('.sheet-domains').removeClass(switch_selector);

            }
    
            if (v.cstype == 3){
                $20('.sheet-left-container').addClass('sheet-hiddenelement');
                $20('.sheet-right-container').addClass('sheet-hiddenelement');
                $20('.sheet-charnotes-container').addClass('sheet-hiddenelement');

                $20('.sheet-menace-container').addClass('sheet-hiddenelement');
                $20('.sheet-global-container').addClass('sheet-hiddenelement');   
                $20('.sheet-global-container-conditions').addClass('sheet-hiddenelement');
                $20('.sheet-domains-container').removeClass('sheet-hiddenelement');
                    
                $20('.sheet-pj').removeClass(switch_selector);
                $20('.sheet-npj').removeClass(switch_selector);
                $20('.sheet-mod').removeClass(switch_selector);
                $20('.sheet-domains').addClass(switch_selector);
            }

                
        });
        
        getAttrs(["character_name", "vida_max", "manatotal", "manatemp", "charnivel", "bonus_treino", 
                "iniciativaatributo2", "percepcaoatributo2", "fortitudeatributo2", "reflexosatributo2", "vontadeatributo2",
                "iniciativa_treinada", "percepcao_treinada", "fortitude_treinada", "reflexos_treinada", "vontade_treinada",
                "iniciativaoutros", "percepcaooutros", "fortitudeoutros", "reflexosoutros", "vontadeoutros",
                "for_mod", "des_mod", "int_mod", "sab_mod", "con_mod", "car_mod",
                "condicaopericia", "periciatemp", "rolltemp", "condicaoiniciativa", "condicaopercepcao",
                "condicaoreflexo", "resistemp", 
                "condicaoperfisico", "condicaopermental", "condicaocego", "condicaomodataquedis"   
            ], function(v){
    
            let setObj = {};
            setObj['menace_name'] = v.character_name;
            setObj['menace_hp'] = v.vida_max;
            let mana_total = parseInt(v.manatotal) ? parseInt(v.manatotal) : 0;
            let mana_temp  = parseInt(v.manatemp) ? parseInt(v.manatemp) : 0;
            setObj['menace_mp'] = mana_total + mana_temp;
            setObj['menace_nd'] = convertToND(v.charnivel);
            
    
            let metade_nivel = Math.floor(Number.parseFloat(v.charnivel)/2);
            let splitAttr = stripTag(v.iniciativaatributo2).split("+");
            let attrSum = 0;
            
            for(let i=0; i < splitAttr.length; i++){                    
                attrSum += parseInt(v[`${stripTag(splitAttr[i].trim())}`]);      
            }
                
            let atribute = parseInt(v.condicaopericia) + parseInt(v.periciatemp) + parseInt(v.rolltemp) + parseInt(v.condicaoiniciativa) + parseInt(metade_nivel) + parseInt(attrSum) + (parseInt(v.bonus_treino) * parseInt(v.iniciativa_treinada)) + parseInt(v.iniciativaoutros);
            setObj['menace_init'] = atribute > 0 ? "+" + atribute : atribute;

            splitAttr = stripTag(v.percepcaoatributo2).split("+");
            attrSum = 0;
            
            for(let i=0; i < splitAttr.length; i++){                    
                attrSum += parseInt(v[stripTag(splitAttr[i].trim())]);            
            }
            
            atribute = parseInt(v.condicaopericia) + parseInt(v.periciatemp) + parseInt(v.rolltemp) + parseInt(v.condicaopercepcao) + parseInt(metade_nivel) + parseInt(attrSum) + (parseInt(v.bonus_treino) * parseInt(v.percepcao_treinada)) + parseInt(v.percepcaooutros); 
            setObj['menace_percep'] = atribute > 0 ? "+" + atribute : atribute;

            splitAttr = stripTag(v.fortitudeatributo2).split("+");
            attrSum = 0;
            
            for(let i=0; i < splitAttr.length; i++){                    
                attrSum += parseInt(v[stripTag(splitAttr[i].trim())]);            
            }
            
            atribute = parseInt(v.resistemp) + parseInt(v.condicaopericia) + parseInt(v.periciatemp) + parseInt(v.rolltemp) + parseInt(metade_nivel) + parseInt(attrSum) + (parseInt(v.bonus_treino) * parseInt(v.fortitude_treinada)) + parseInt(v.fortitudeoutros);            
            setObj['menace_fortitude'] = atribute > 0 ? "+" + atribute : atribute; 

            splitAttr = stripTag(v.reflexosatributo2).split("+");
            attrSum = 0;
            
            for(let i=0; i < splitAttr.length; i++){                    
                attrSum += parseInt(v[stripTag(splitAttr[i].trim())]); 
                
                console.log(splitAttr[i] + stripTag(splitAttr[i]) + v[stripTag(splitAttr[i].trim())])                 
            }
                                   
            atribute = parseInt(v.resistemp) + parseInt(v.condicaopericia) + parseInt(v.periciatemp) + parseInt(v.rolltemp) + parseInt(metade_nivel) + parseInt(attrSum) + (parseInt(v.bonus_treino) * parseInt(v.reflexos_treinada)) + parseInt(v.reflexosoutros);      
            setObj['menace_reflex'] = atribute > 0 ? "+" + atribute : atribute; 

            splitAttr = stripTag(v.vontadeatributo2).split("+");
            attrSum = 0;
            
            for(let i=0; i < splitAttr.length; i++){                    
                attrSum += parseInt(v[stripTag(splitAttr[i].trim())]);    
                
                console.log(splitAttr[i] + stripTag(splitAttr[i]) + v[stripTag(splitAttr[i].trim())])              
            }
                        
            atribute = parseInt(v.resistemp) + parseInt(v.condicaoreflexo) + parseInt(v.condicaopericia) + parseInt(v.periciatemp) + parseInt(v.rolltemp) + parseInt(metade_nivel) + parseInt(attrSum) + (parseInt(v.bonus_treino) * parseInt(v.vontade_treinada)) + parseInt(v.vontadeoutros);            
            setObj['menace_will'] = atribute > 0 ? "+" + atribute : atribute; 
    
            if (v.mana_max <= 0){
                    $20('.sheet-menace-mana').addClass('sheet-hiddenelement');   
            } else {
                    $20('.sheet-menace-mana').removeClass('sheet-hiddenelement');
            }
    
            setAttrs(setObj);
        });
                
        [
            'acrobacia','adestramento','atletismo','atuacao','cavalgar','conhecimento','cura','diplomacia',
            'enganacao','furtividade','guerra','intimidacao','intuicao','investigacao','jogatina','ladinagem',
            'misticismo','nobreza','oficio','oficio2','pilotagem','religiao','sobrevivencia'
        ].forEach(skill => {                          
            getAttrs([
                `${skill}_treinada`, `menace-${skill}`, `${skill}atributo2`, `${skill}outros`, 'bonus_treino',
                'charnivel', "for_mod", "des_mod", "int_mod", "sab_mod", "con_mod", "car_mod",
                "periciatemp", "rolltemp", "condicaopericia", "condicaomodataquecc", "condicaomodataque",
                "condicaoperfisico", "condicaopermental", "condicaocego", "condicaomodataquedis"         
            ], function(x){  
                let setObj = {};
                let splitAttr = stripTag(x[`${skill}atributo2`]).split("+");
                let attrSum = 0;
                
                for(let i=0; i < splitAttr.length; i++){                    
                    attrSum += parseInt(x[stripTag(splitAttr[i].trim())]);            
                }
                
                let metade_nivel = Math.floor(Number.parseFloat(x.charnivel)/2);
                let total_skill = parseInt(x.periciatemp) + parseInt(x.rolltemp) + parseInt(x.condicaopericia) + 
                    parseInt(metade_nivel) + attrSum + 
                    (parseInt(x.bonus_treino) * parseInt(x[`${skill}_treinada`])) + parseInt(x[`${skill}outros`]);
    
                setObj[`menace_${skill}total`] = total_skill > 0 ? "+" + total_skill : total_skill;
    
                setAttrs(setObj);
                
                if(parseInt(x[`${skill}_treinada`]) == 1){                    
                    $20(`.sheet-menace-${skill}`).removeClass('sheet-hiddenelement');  
                } else {
                    $20(`.sheet-menace-${skill}`).addClass('sheet-hiddenelement');  
                }
            });                            
        });       
    
    });

    const sumAttr = (valAttr, list) => {
        let splitAttr = stripTag(v.iniciativaatributo2).split("+");
        let attrSum = 0;
        
        for(let i=0; i < splitAttr.length; i++){                    
            attrSum += parseInt(v[`${stripTag(splitAttr[i].trim())}`]);      
        }
    }

    const calcAtaqueFim = (charnivel, atributo, bonus_treino, treino, outros) => { 
        atributo = atributo ? atributo : 0;       
        return Math.floor(Number.parseFloat(charnivel)/2)  + parseInt(atributo) + (parseInt(bonus_treino)*parseInt(treino)) + parseInt(outros);
    }
    
    
    const stripTag = (tag) => { 
            let clean_tag = tag.replace('@{','').replace('}','').replace('+@{condicaomodataquecc}+@{condicaomodataque}','')
                .replace('+@{condicaomodataquedis}+@{condicaomodataque}','').trim(); 
            return clean_tag;
        } 

    const createDice = () => {
        return '<button type="roll" name="roll_attack" class="buttonrollataque dado-simples" value="">T</button>'                    
    }

    const createAttack = (ataque_fim, bonus, dano, dano_extra, dado_extra, margem, critico ) => {
        let ataque_total = (ataque_fim + parseInt(bonus));
        ataque_total = ataque_total > 0 ? "+" + ataque_total : " -" + ataque_total; 

        let critico_final = (parseInt(margem) < 20 || critico > 2) ? ", " : '';
        critico_final = (parseInt(margem) < 20) ? critico_final + margem : critico_final;
        critico_final = (parseInt(margem) < 20 && critico > 2) ? critico_final + "/" : critico_final
        critico_final = (critico > 2) ? critico_final + 'x' + critico : critico_final;

        let dado_fim = dado_extra != "" ? "+" + dado_extra : "";

        return ataque_total + " (" + dano +  "+" + dano_extra + dado_fim + critico_final + ")";
    }


    const createSpells = (circle) => {
        getSectionIDs(`repeating_spells${circle}`, (idarray) => {            
            getAttrs(
                idarray.map((id) => `repeating_spells${circle}_${id}_namespell`)
                .concat(idarray.map((id) => `repeating_spells${circle}_${id}_spelldescription`)),
            (v) => {    
                idarray.forEach(
                    (id) => {
                        let newrowattrs = {};
                        let rowId = generateRowID();
                        newrowattrs[`repeating_menacespells_${rowId}_menacenamespells`] = v[`repeating_spells${circle}_${id}_namespell`]; 
                        newrowattrs[`repeating_menacespells_${rowId}_menaceaspellsdescription`] = v[`repeating_spells${circle}_${id}_spelldescription`];
                        newrowattrs[`repeating_menacespells_${rowId}_menacenamespellsinput`] = v[`repeating_spells${circle}_${id}_namespell`]; 
                        newrowattrs[`repeating_menacespells_${rowId}_menaceaspellsdescriptioninput`] = v[`repeating_spells${circle}_${id}_spelldescription`];

                        setAttrs(newrowattrs);
                    }
                ); 
            });
        });
    }

    const eraseRepeatingRow = (repeatingRow) => {
        getSectionIDs(repeatingRow, function(idarray) {
            for(var i=0; i < idarray.length; i++) {
                removeRepeatingRow(repeatingRow +"_"+ idarray[i]);
            }
        });
    }

    on('sheet:opened change:repeating_abilities remove:repeating_abilities change:repeating_powers remove:repeating_powers', () => {
        eraseRepeatingRow("repeating_menaceabilities");
        
        getSectionIDs('repeating_abilities', (idarray) => {        
            getAttrs(idarray.map((id) => `repeating_abilities_${id}_nameability`)
                .concat(idarray.map((id) => `repeating_abilities_${id}_abilitydescription`)
            ), (v) => {    
                idarray.forEach(
                    (id) => {
                        let newrowattrs = {};
                        let rowId = generateRowID();
                        newrowattrs[`repeating_menaceabilities_${rowId}_menacenameability`] = v[`repeating_abilities_${id}_nameability`]; 
                        newrowattrs[`repeating_menaceabilities_${rowId}_menaceabilitydescription`] = v[`repeating_abilities_${id}_abilitydescription`];
                        newrowattrs[`repeating_menaceabilities_${rowId}_menacenameabilityinput`] = v[`repeating_abilities_${id}_nameability`]; 
                        newrowattrs[`repeating_menaceabilities_${rowId}_menaceabilitydescriptioninput`] = v[`repeating_abilities_${id}_abilitydescription`];

                        setAttrs(newrowattrs);
                    }
                );                
            });
        });

        getSectionIDs('repeating_powers', (idarray) => {
            getAttrs(
                idarray.map((id) => `repeating_powers_${id}_namepower`)
                .concat(idarray.map((id) => `repeating_powers_${id}_powerdescription`)
                ), (v) => {
                    idarray.forEach(
                        (id) => {
                            let newrowattrs = {};
                            let rowId = generateRowID();
                            newrowattrs[`repeating_menaceabilities_${rowId}_menacenameability`] =  v[`repeating_powers_${id}_namepower`]; 
                            newrowattrs[`repeating_menaceabilities_${rowId}_menaceabilitydescription`] =  v[`repeating_powers_${id}_powerdescription`];
                            newrowattrs[`repeating_menaceabilities_${rowId}_menacenameabilityinput`] =  v[`repeating_powers_${id}_namepower`]; 
                            newrowattrs[`repeating_menaceabilities_${rowId}_menaceabilitydescriptioninput`] =  v[`repeating_powers_${id}_powerdescription`];

                            setAttrs(newrowattrs);
                        }
                    );                     
            });
        });
    });

    on('sheet:opened change:repeating_spells1 remove:repeating_spells1 change:repeating_spells2 remove:repeating_spells2 change:repeating_spells3 remove:repeating_spells3 change:repeating_spells4 remove:repeating_spells4 change:repeating_spells5 remove:repeating_spells5', () => {
        eraseRepeatingRow("repeating_menacespells");
        ['1','2','3','4','5'].forEach((x) => createSpells(x));        
    });

    on('sheet:opened change:repeating_equipment remove:repeating_equipment', () => {
        getSectionIDs('repeating_equipment', (idarray) => {
            getAttrs(
                idarray.map((id) => `repeating_equipment_${id}_equipquantity`)
                    .concat(idarray.map((id) => `repeating_equipment_${id}_equipname`)),
                (v) => {
                    let equip = idarray.map((id) => v[`repeating_equipment_${id}_equipname`]).join(', ');
                setAttrs({menace_treasure: equip});
            });
        });
    });

    on('sheet:opened change:cstype clicked:eraseglobal', () => {
        eraseRepeatingRow("repeating_menacemelee");
        eraseRepeatingRow("repeating_menacedistance");

        getSectionIDs('repeating_attacks', (idarray) => {
            getAttrs(
                [   'charnivel', 'bonus_treino',
                    'lutaatributo2', 'luta_treinada', 'lutaoutros',
                    'pontariaatributo2', 'pontaria_treinada', 'pontariaoutros',
                    'atuacaoatributo2', 'atuacao_treinada', 'atuacaooutros',
                    'for_mod', 'des_mod', 'con_mod', 'int_mod', 'sab_mod', 'car_mod', 'character_name',
                    "condicaomodataquecc", "condicaomodataquedis", "condicaomodataque", 
                    "rolltemp", "ataquetemp", "danotemp", "periciatemp"
                ]
                            .concat(idarray.map((id) => `repeating_attacks_${id}_modatributodano`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_nomeataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_bonusataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_danoataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_danoextraataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_dadoextraataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_danocriticoataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_margemcriticoataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_multiplicadorcriticoataque`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_ataquetipodedano`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_ataquedescricao`))
                            .concat(idarray.map((id) => `repeating_attacks_${id}_ataquepericia`))                            
                , (values) => {
                    $20('.sheet-melee').addClass('sheet-hiddenelement');
                    $20('.sheet-distance').addClass('sheet-hiddenelement');
                                                        
                    idarray.forEach(
                        (id) => {
                            let tagPericia = stripTag(values[`repeating_attacks_${id}_ataquepericia`]).replace('total','');                          
                            let newrowattrs = {};
                            let rowId = generateRowID();        
                            let ataqueaTributo = stripTag(values[`${tagPericia}atributo2`]).split(' ')[0]; 
                            
                                            
                            let ataque_fim = calcAtaqueFim(values['charnivel'], values[ataqueaTributo], values['bonus_treino'], values[`${tagPericia}_treinada`], values[`${tagPericia}outros`]);
                            
                            let menace_attack = '';
                            let menace_list = '';
                            let menace_attackdescription = '';

                            ataque_fim = parseInt(ataque_fim) + parseInt(values.rolltemp) + parseInt(values.ataquetemp) + parseInt(values.condicaomodataque) + parseInt(values.periciatemp);                            

                            if ( tagPericia == 'luta' || tagPericia == 'atuacao' ){
                                $20('.sheet-melee').removeClass('sheet-hiddenelement');  
                                menace_attack = 'repeating_menacemelee' ;
                                menace_list = 'melee_list'
                                menace_description = 'meleedescription';
                                ataque_fim = ataque_fim + parseInt(values.condicaomodataquecc);
                            } else {
                                $20('.sheet-distance').removeClass('sheet-hiddenelement');
                                menace_attack = 'repeating_menacedistance' ;   
                                menace_list = 'distance_list';
                                menace_description = 'distancedescription';   
                                ataque_fim = ataque_fim + parseInt(values.condicaomodataquedis);                                                                                                                        
                            } 
                            
                            newrowattrs[`${menace_attack}_${rowId}_${menace_list}`] = values[`repeating_attacks_${id}_nomeataque`];    

                            newrowattrs[`${menace_attack}_${rowId}_${menace_description}`] = createAttack(ataque_fim, values[`repeating_attacks_${id}_bonusataque`],
                                    values[`repeating_attacks_${id}_danoataque`], values[`repeating_attacks_${id}_dadoextraataque`], 
                                    parseInt(values[`repeating_attacks_${id}_danoextraataque`]) + parseInt(values.danotemp),
                                    values[`repeating_attacks_${id}_margemcriticoataque`], values[`repeating_attacks_${id}_multiplicadorcriticoataque`]); 
                                
                            
                            newrowattrs[`${menace_attack}_${rowId}_nomeataque`] = values[`repeating_attacks_${id}_nomeataque`];
                            newrowattrs[`${menace_attack}_${rowId}_bonusataque`] = values[`repeating_attacks_${id}_bonusataque`];
                            newrowattrs[`${menace_attack}_${rowId}_danoataque`] = values[`repeating_attacks_${id}_danoataque`];
                            newrowattrs[`${menace_attack}_${rowId}_danoextraataque`] = parseInt(values[`repeating_attacks_${id}_danoextraataque`]) + parseInt(values.rolltemp) + parseInt(values.danotemp);
                            newrowattrs[`${menace_attack}_${rowId}_dadoextraataque`] = values[`repeating_attacks_${id}_dadoextraataque`];
                            newrowattrs[`${menace_attack}_${rowId}_margemcriticoataque`] = values[`repeating_attacks_${id}_margemcriticoataque`];
                            newrowattrs[`${menace_attack}_${rowId}_multiplicadorcriticoataque`] = values[`repeating_attacks_${id}_multiplicadorcriticoataque`];
                            newrowattrs[`${menace_attack}_${rowId}_danocriticoataque`]= values[`repeating_attacks_${id}_danocriticoataque`];
                            newrowattrs[`${menace_attack}_${rowId}_ataquepericia`] = values[`repeating_attacks_${id}_ataquepericia`];
                            newrowattrs[`${menace_attack}_${rowId}_ataquetipodedano`] = values[`repeating_attacks_${id}_ataquetipodedano`];
                            newrowattrs[`${menace_attack}_${rowId}_modatributodano`] = values[`repeating_attacks_${id}_modatributodano`];
                            newrowattrs[`${menace_attack}_${rowId}_ataquedescricao`] = values[`repeating_attacks_${id}_ataquedescricao`];

                            setAttrs(newrowattrs);
                        }                     
                    );
            });
        });
    });


    //Compatibilidade para o nome (FAZ O BOTÃO DE EDITAR A FICHA SUMIR)
    /*on("sheet:opened", function(e){
        getAttrs(["charname"], function(v){
            
            if(v.charname != '' || v.charname.length < 1){
                let newname = v.charname;            
                setAttrs({
                    "character_name": newname
                });
            }
        }); 
    });*/

    ['vida', 'mana'].forEach(max => {
        on(`change:${max}total change:${max}temp`, () => {
            getAttrs([`${max}total`, `${max}temp`], v => {
                const temp = +v[`${max}temp`] || 0;
                const total = +v[`${max}total`] || 0;
                setAttrs({
                    [`${max}_max`]: temp + total
                });
            });
        });
    });

</script>
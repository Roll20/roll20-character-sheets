<!-- updated Jan 12 2016 - plexsoup -->


<div class="sheet-TavernTalesSheetBody">
	<h3>Tavern Tales (1.0)</h3>
	
	<div class="sheet-TavernTalesHideableSection"> <!-- Info -->

		<input type="checkbox" name="attr_InfoSectionToggle" class="sheet-hiddenSectionToggle" checked="checked"/><span>Info</span>

		<div class="sheet-logo">
			<div class="sheet-TavernTalesColumn">


				<p>Character Name: <input type="text" class="TTcharacterName" name="attr_CharacterName"/></p>
				<p>Background: <textarea class="TTbioDesc" name="attr_CharacterBackground" rows="2"></textarea></p>

				<div>
					<table class="sheet-TTXPTreasureTable">
						<tr><th></th><th>Earned</th><th>Spent</th><th>Remaining</th></tr>
						<tr>
							<th>XP</th>
							<td><input type="number" name="attr_XPEarned" value=0 /></td> 
							<td><input type="number" name="attr_totalXPSpent" value="(@{statXPSpent} + @{totalTraitXPSpent})" disabled="true" /></td>
							<td><input type="number" name="attr_XPRemaining" value="(@{XPEarned}-@{totalXPSpent})" disabled="true" /></td>
						</tr>

						<tr>
							<th>Treasure</th>
							<td><input type="number" name="attr_TreasureEarned" /></td> 
							<td><input type="number" name="attr_TreasureSpent" /></td> 
							<td><input type="number" name="attr_TreasureRemaining" value="(@{TreasureEarned}-@{TreasureSpent})" disabled="true" /></td>
						</tr>
					</table>
				</div>
				
			</div>
			
			<div class="sheet-TavernTalesColumn">

				<img src="http://i.imgur.com/ox9PmdD.png" />
				<!-- <img src="http://i.imgur.com/1ZKy6mc.jpg" /> -->
				
				<p>Tavern Tales was created by Dabney Bailey. For information, see www.taverntalesrpg.com or reddit.com/r/taverntales.</p>
				
				
			</div>
			

			
		</div>
		
	</div>

<!--
				 .                 .            
			   .o8               .o8            
	 .oooo.o .o888oo  .oooo.   .o888oo  .oooo.o 
	d88(  "8   888   `P  )88b    888   d88(  "8 
	`"Y88b.    888    .oP"888    888   `"Y88b.  
	o.  )88b   888 . d8(  888    888 . o.  )88b 
	8""888P'   "888" `Y888""8o   "888" 8""888P' 

-->

		
	<div class="sheet-TavernTalesHideableSection"> <!-- Stats, Defenses, Conditions -->

        <input type="checkbox" name="attr_StatsSectionToggle" class="sheet-hiddenSectionToggle" checked="checked"/><span>Attributes, Defenses, Conditions</span>

        <div class="sheet-Attributes">
		
			<div class="sheet-TavernTalesColumn">
		
				<div class="sheet-rollTabs">
				

					<h3><span class="sheet-traitXP">XP: <input type="number" name="attr_statXPSpent" value=0 /></span>Stats</h3>
					<table class="sheet-TTStatsTable">
						<tr>
							<th> </th><th> </th><th class="sheet-fineprint">Decreased</th><th>Normal</th><th>Increased</th>
						</tr>
						<tr>
							<th>Brawn: </th>

							<td>
								<input type="number" name="attr_brawn" />
							</td>
							<td>
								<button type='roll'  style="background-color:darkred"
									value='&{template:TTRoll} {{name=Decreased Brawn Test}} {{result=[[@{decreasedRollTemplate} + @{Brawn}]]}} {{lowerLimit=[[@{lowerLimit}]]}} {{upperLimit=[[@{upperLimit}]]}} {{rollDescription=Rolling @{diceType} Brawn}} {{notes=?{What are you trying to achieve} }} {{characterName=@{CharacterName}}}'
									name='roll_DecreasedBrawn'/>
							</td>


							<td>
								<button type='roll'  style="background-color:grey"
									value='&{template:TTRoll} {{name=Normal Brawn Test}} {{result=[[@{normalRollTemplate} + @{Brawn}]]}} {{lowerLimit=[[@{lowerLimit}]]}} {{upperLimit=[[@{upperLimit}]]}} {{rollDescription=Rolling @{diceType} Brawn}} {{notes=?{What are you trying to achieve} }} {{characterName=@{CharacterName}}}'
									name='roll_DecreasedBrawn'/>
							</td>

							<td>
								<button type='roll'  style="background-color:lightgreen"
									value='&{template:TTRoll} {{name=Increased Brawn Test}} {{result=[[@{increasedRollTemplate} + @{Brawn}]]}} {{lowerLimit=[[@{lowerLimit}]]}} {{upperLimit=[[@{upperLimit}]]}} {{rollDescription=Rolling @{diceType} Brawn}} {{notes=?{What are you trying to achieve} }} {{characterName=@{CharacterName}}}'
									name='roll_DecreasedBrawn'/>
							</td>						
						</tr>


						
						<tr>
						  <th>Mind: </th>
						  <td><input type="number" name="attr_mind" /></td>
							<td>
								<button type='roll'  style="background-color:darkred"
									value='&{template:TTRoll} {{name=Decreased Mind Test}} {{result=[[@{decreasedRollTemplate} + @{Mind}]]}} {{lowerLimit=[[@{lowerLimit}]]}} {{upperLimit=[[@{upperLimit}]]}} {{rollDescription=Rolling @{diceType} Mind}} {{notes=?{What are you trying to achieve} }} {{characterName=@{CharacterName}}}'
									name='roll_DecreasedMind'/>
							</td>


							<td>
								<button type='roll'  style="background-color:grey"
									value='&{template:TTRoll} {{name=Normal Mind Test}} {{result=[[@{normalRollTemplate} + @{Mind}]]}} {{lowerLimit=[[@{lowerLimit}]]}} {{upperLimit=[[@{upperLimit}]]}} {{rollDescription=Rolling @{diceType} Mind}} {{notes=?{What are you trying to achieve} }} {{characterName=@{CharacterName}}}'
									name='roll_DecreasedMind'/>
							</td>

							<td>
								<button type='roll'  style="background-color:lightgreen"
									value='&{template:TTRoll} {{name=Increased Mind Test}} {{result=[[@{increasedRollTemplate} + @{Mind}]]}} {{lowerLimit=[[@{lowerLimit}]]}} {{upperLimit=[[@{upperLimit}]]}} {{rollDescription=Rolling @{diceType} Mind}} {{notes=?{What are you trying to achieve} }} {{characterName=@{CharacterName}}}'
									name='roll_DecreasedMind'/>
							</td>
						</tr>

						<tr>
						  <th>Finesse: </th>
						  <td><input type="number" name="attr_finesse" /></td>						  
							<td>
								<button type='roll'  style="background-color:darkred"
									value='&{template:TTRoll} {{name=Decreased Finesse Test}} {{result=[[@{decreasedRollTemplate} + @{Finesse}]]}} {{lowerLimit=[[@{lowerLimit}]]}} {{upperLimit=[[@{upperLimit}]]}} {{rollDescription=Rolling @{diceType} Finesse}} {{notes=?{What are you trying to achieve} }} {{characterName=@{CharacterName}}}'
									name='roll_DecreasedFinesse'/>
							</td>


							<td>
								<button type='roll'  style="background-color:grey"
									value='&{template:TTRoll} {{name=Normal Finesse Test}} {{result=[[@{normalRollTemplate} + @{Finesse}]]}} {{lowerLimit=[[@{lowerLimit}]]}} {{upperLimit=[[@{upperLimit}]]}} {{rollDescription=Rolling @{diceType} Finesse}} {{notes=?{What are you trying to achieve} }} {{characterName=@{CharacterName}}}'
									name='roll_DecreasedFinesse'/>
							</td>

							<td>
								<button type='roll'  style="background-color:lightgreen"
									value='&{template:TTRoll} {{name=Increased Finesse Test}} {{result=[[@{increasedRollTemplate} + @{Finesse}]]}} {{lowerLimit=[[@{lowerLimit}]]}} {{upperLimit=[[@{upperLimit}]]}} {{rollDescription=Rolling @{diceType} Finesse}} {{notes=?{What are you trying to achieve} }} {{characterName=@{CharacterName}}}'
									name='roll_DecreasedFinesse'/>
							</td>
						</tr>

						<tr>
						  <th>Spirit: </th>
						  <td><input type="number" name="attr_spirit" /></td>
							<td>
								<button type='roll'  style="background-color:darkred"
									value='&{template:TTRoll} {{name=Decreased Spirit Test}} {{result=[[@{decreasedRollTemplate} + @{Spirit}]]}} {{lowerLimit=[[@{lowerLimit}]]}} {{upperLimit=[[@{upperLimit}]]}} {{rollDescription=Rolling @{diceType} Spirit}} {{notes=?{What are you trying to achieve} }} {{characterName=@{CharacterName}}}'
									name='roll_DecreasedSpirit'/>
							</td>


							<td>
								<button type='roll'  style="background-color:grey"
									value='&{template:TTRoll} {{name=Normal Spirit Test}} {{result=[[@{normalRollTemplate} + @{Spirit}]]}} {{lowerLimit=[[@{lowerLimit}]]}} {{upperLimit=[[@{upperLimit}]]}} {{rollDescription=Rolling @{diceType} Spirit}} {{notes=?{What are you trying to achieve} }} {{characterName=@{CharacterName}}}'
									name='roll_DecreasedSpirit'/>
							</td>

							<td>
								<button type='roll'  style="background-color:lightgreen"
									value='&{template:TTRoll} {{name=Increased Spirit Test}} {{result=[[@{increasedRollTemplate} + @{Spirit}]]}} {{lowerLimit=[[@{lowerLimit}]]}} {{upperLimit=[[@{upperLimit}]]}} {{rollDescription=Rolling @{diceType} Spirit}} {{notes=?{What are you trying to achieve} }} {{characterName=@{CharacterName}}}'
									name='roll_DecreasedSpirit'/>
							</td>
						</tr>
					</table>
					
				</div>


			</div>

			<div class="sheet-TavernTalesColumn">
			
				<div class="sheet-TTConditions">
					<h3>Defenses</h3>
					<fieldset class="repeating_defenses">
						<input type="checkbox" class="sheet-TTcheckbox" name="attr_defenseChecked" />
						<input type="text" class="sheet-TTitemDesc" name="attr_defenseName" />
					</fieldset>			
					
					<h3>Conditions</h3>
					<fieldset class="repeating_conditions">
						<input type="checkbox" class="sheet-TTcheckbox" name="attr_conditionChecked" />
						<input type="text" class="sheet-TTitemDesc" name="attr_conditionName" />
					</fieldset>				
					
				</div>
			
			
			</div>
			
			
        </div>

	</div>



		
<!--

		.                       o8o      .            
	  .o8                       `"'    .o8            
	.o888oo oooo d8b  .oooo.   oooo  .o888oo  .oooo.o 
	  888   `888""8P `P  )88b  `888    888   d88(  "8 
	  888    888      .oP"888   888    888   `"Y88b.  
	  888 .  888     d8(  888   888    888 . o.  )88b 
	  "888" d888b    `Y888""8o o888o   "888" 8""888P' 
													  
-->												  

		
	<div class="sheet-TavernTalesHideableSection"> <!-- Traits -->
        <input type="checkbox" name="attr_traitsSectionToggle" class="sheet-hiddenSectionToggle" checked="checked"/><span>Traits</span>
		
		<div class="sheet-rollTabs">
		

			<input type="radio" name="traitTabs" value="Combat" class="sheet-tab sheet-tab-combat" id="sheet-traitsTabCombat" title="Combat" />
			<input type="radio" name="traitTabs" value="Exploration" class="sheet-tab sheet-tab-exploration" id="sheet-traitsTabExploration" title="Exploration" />
			<input type="radio" name="traitTabs" value="Interaction" class="sheet-tab sheet-tab-interaction" id="sheet-traitsTabInteraction" title="Interaction" />
			<input type="radio" name="traitTabs" value="General" class="sheet-tab sheet-tab-general" id="sheet-traitsTabGeneral" title="General" />
			<input type="radio" name="traitTabs" value="All" class="sheet-tab sheet-tab-all" id="sheet-traitsTabAll" checked="checked" title="All" />					


			<div class="sheet-traitsTabCombatContent">
				<div class="sheet-traits">
					<h3 class="sheet-TavernTalesHeader"><span class="sheet-traitXP">XP: <input type="number" name="attr_combatTraitsXPSpent" value=0 /></span>Combat Traits</h3>
					<h4 class="sheet-TTitemName">Name</h4><h4 class="sheet-TTitemDesc">Description</h4>
					
					<fieldset class="repeating_CombatTraits">

					  <textarea class="sheet-TTtraitName" name="attr_CombatTraitName" rows="2"></textarea>
					  <textarea class="sheet-TTtraitDesc" name="attr_CombatTraitDescription" rows="2"></textarea>

					</fieldset>
				</div>
			</div>

			<div class="sheet-traitsTabExplorationContent">
				<div class="sheet-traits">
					<h3 class="sheet-TavernTalesHeader"><span class="sheet-traitXP">XP: <input type="number" name="attr_explorationTraitsXPSpent" value=0 /></span>Exploration Traits</h3>							
					<h4 class="sheet-TTitemName">Name</h4><h4 class="sheet-TTitemDesc">Description</h4>
					<fieldset class="repeating_ExplorationTraits">
					  <textarea class="sheet-TTtraitName" name="attr_ExplorationTraitName" rows="2"></textarea>
					  <textarea class="sheet-TTtraitDesc" name="attr_ExplorationTraitDescription" rows="2"></textarea>
					</fieldset>				
				</div>
			</div>

			<div class="sheet-traitsTabInteractionContent">

				<div class="sheet-traits">
					<h3 class="sheet-TavernTalesHeader"><span class="sheet-traitXP">XP: <input type="number" name="attr_interactionTraitsXPSpent" value=0 /></span>Interaction Traits</h3>
					<h4 class="sheet-TTitemName">Name</h4><h4 class="sheet-TTitemDesc">Description</h4>
					<fieldset class="repeating_InteractionTraits">
					  <textarea class="sheet-TTtraitName" name="attr_InteractionTraitName" rows="2"></textarea>
					  <textarea class="sheet-TTtraitDesc" name="attr_InteractionTraitDescription" rows="2"></textarea>
					</fieldset>
				</div>
					
			</div>
			

			<div class="sheet-traitsTabGeneralContent">

				<div class="sheet-traits">
					<h3><span class="sheet-traitXP">XP: <input type="number" name="attr_generalTraitsXPSpent" value=0 /></span>General Traits</h3>
					<h4 class="sheet-TTitemName">Name</h4><h4 class="sheet-TTitemDesc">Description</h4>
					<fieldset class="repeating_GeneralTraits">
					  <textarea class="sheet-TTtraitName" name="attr_GeneralTraitName" rows="2"></textarea>
					  <textarea class="sheet-TTtraitDesc" name="attr_GeneralTraitDescription" rows="2"></textarea>
					</fieldset>
				</div>							
			</div>
								
			
			
			<div class="sheet-traitsTabAllContent">
				
				<div class="sheet-traits">
					<h2><span class="sheet-traitXP">XP: <input type="number" name="attr_totalTraitXPSpent" disabled="true" value="(@{combatTraitsXPSpent} + @{explorationTraitsXPSpent} + @{interactionTraitsXPSpent} + @{generalTraitsXPSpent})" /></span>All Traits</h2>
					<h3><span class="sheet-traitXP">XP: <input type="number" name="attr_combatTraitsXPSpent" value=0 /></span>Combat</h3>
					<h4 class="sheet-TTitemName">Name</h4><h4 class="sheet-TTitemDesc">Description</h4>

					<fieldset class="repeating_CombatTraits">
						<textarea class="sheet-TTtraitName" name="attr_CombatTraitName" rows="2"></textarea>
						<textarea class="sheet-TTtraitDesc" name="attr_CombatTraitDescription" rows="2"></textarea>
					</fieldset>

					<h3><span class="sheet-traitXP">XP: <input type="number" name="attr_explorationTraitsXPSpent" value=0 /></span>Exploration</h3>							
					<h4 class="sheet-TTitemName">Name</h4><h4 class="sheet-TTitemDesc">Description</h4>
					<fieldset class="repeating_ExplorationTraits">
						<textarea class="sheet-TTtraitName" name="attr_ExplorationTraitName" rows="2"></textarea>
						<textarea class="sheet-TTtraitDesc" name="attr_ExplorationTraitDescription" rows="2"></textarea>
					</fieldset>

					<h3><span class="sheet-traitXP">XP: <input type="number" name="attr_interactionTraitsXPSpent" value=0 /></span>Interaction</h3>
					<h4 class="sheet-TTitemName">Name</h4><h4 class="sheet-TTitemDesc">Description</h4>
					<fieldset class="repeating_InteractionTraits">
					  <textarea class="sheet-TTtraitName" name="attr_InteractionTraitName" rows="2"></textarea>
					  <textarea class="sheet-TTtraitDesc" name="attr_InteractionTraitDescription" rows="2"></textarea>
					</fieldset>


					<h3><span class="sheet-traitXP">XP: <input type="number" name="attr_generalTraitsXPSpent" value=0 /></span>General</h3>
					<h4 class="sheet-TTitemName">Name</h4><h4 class="sheet-TTitemDesc">Description</h4>
					<fieldset class="repeating_GeneralTraits">
					  <textarea class="sheet-TTtraitName" name="attr_GeneralTraitName" rows="2"></textarea>
					  <textarea class="sheet-TTtraitDesc" name="attr_GeneralTraitDescription" rows="2"></textarea>
					</fieldset>
					
				</div>	
	
			</div>		

			<input type="checkbox" class="sheet-hiddenSectionToggle" checked="checked"/><span>Traits</span>

		

		
		</div>
	</div>
	
<!--

                                  o8o             
                                  `"'             
 .ooooo.   .ooooo oo oooo  oooo  oooo  oo.ooooo.  
d88' `88b d88' `888  `888  `888  `888   888' `88b 
888ooo888 888   888   888   888   888   888   888 
888    .o 888   888   888   888   888   888   888 
`Y8bod8P' `V8bod888   `V88V"V8P' o888o  888bod8P' 
                888.                    888       
                8P'                    o888o      
                "                                 

-->
	  


	<div class="sheet-TavernTalesHideableSection"> <!-- Equipment -->
		<input type="checkbox" name="attr_equipmentSectionToggle" class="sheet-hiddenSectionToggle" checked="checked"/>
			<span>Equipment</span>
		<div class="sheet-equipment">

			<div class="sheet-Weapons">
				<h3>Weapons</h3>
				<h4 class="sheet-TTitemName">Name</h4><h4 class="sheet-TTitemDesc">Details</h4>
				<fieldset class="repeating_weapons">
					<input type="text" class="sheet-TTitemName" name="attr_WeaponName" />
					<input type="text" class="sheet-TTitemDesc" name="attr_weaponKeywords" />
				</fieldset>

			</div>

			<div class="sheet-Armor">
				<h3>Armor</h3>
				<h4 class="sheet-TTitemName">Name</h4><h4 class="sheet-TTitemDesc">Details</h4>

				<fieldset class="repeating_armor">
					<input type="text" class="sheet-TTitemName" name="attr_ArmorName" />
					<input type="text" class="sheet-TTitemDesc" name="attr_armorKeywords" />
				</fieldset>

			</div>

			<div class="sheet-MiscEquipment">
				<h3>Misc Equipment</h3>
				<h4 class="sheet-TTitemName">Name</h4><h4 class="sheet-TTitemDesc">Details</h4>

				<fieldset class="repeating_miscEquipment">
					<input type="text" class="sheet-TTitemName" name="attr_EquipmentName" />
					<input type="text" class="sheet-TTitemDesc" name="attr_equipmentDescription" />
				</fieldset>


			</div>		
			<div class="repeating_treasure">
				<h3>Treasure</h3>
				<h4 class="sheet-TTitemName">Name</h4><h4 class="sheet-TTitemDesc">Details</h4>
				<fieldset class="repeating_treasure">
					<input type="text" class="sheet-TTitemName" name="attr_treasureUnits"/>
					<input type="text" class="sheet-TTitemDesc" name="attr_treasureDescription" />
				</fieldset>
			</div>
		</div>
	</div>

	<div class="sheet-TavernTalesHideableSection">
		<input type="checkbox" name="attr_deprecatedVersionSectionToggle" class="sheet-hiddenSectionToggle"/><span>TT 0.90 damage, health, defence stats (deprecated)</span>

		<div class="sheet-TavernTalesDeprecatedStats">

			<div class="sheet-combatDamage">
				<input type="number" name="attr_currentDamageDice" value="1"/> 
				d <select name="attr_currentDamageDieType" class="sheet-dieTypeSelect" value="8">
				  <option value="6">6</option>
				  <option value="8">8</option>
				</select>
				
				+ 
				<select name="attr_currentDamageModifierAttribute" style="width:100px;">
					<option value="@{Brawn}" selected="selected">Brawn</option>
					<option value="@{Finesse}">Finesse</option>
					<option value="@{Mind}">Mind</option>
					<option value="@{Spirit}">Spirit</option>
				</select>
				<button type='roll' value='/roll @{currentDamageDice}d@{currentDamageDieType} + @{currentDamageModifierAttribute} for damage'> Damage</button>
			</div>

			<div class="sheet-defense"> 
				<p>
					Tough: <input type="number" name="attr_toughness" />
					MaxLife: <input type="number" name="attr_life_max" value="@{toughness}*4" />
					Soak: <input type="number" name="attr_soak" />
					HP: <input type="number" name="attr_life" />
				</p>
				<p>
					Block: <input type="number" name="attr_block" />
					Advantage: <input type="number" name="attr_advantage" />
				</p>
			</div>
			
			<div class="sheet-traits">
				<h3>Traits (Name, Description, Type)</h3>
				<fieldset class="repeating_Traits">
					<!-- <input type="text" class="sheet-TTtraitName" name="attr_TraitName" /> -->
					<!-- <input type="text" class="sheet-TTtraitDesc" name="attr_TraitDescription" /> -->
					<textarea class="sheet-TTtraitName" name="attr_TraitName" rows="2"></textarea>
					<textarea class="sheet-TTtraitDesc" name="attr_TraitDescription" rows="2"></textarea>

					<!--
					<select class="sheet-TTTraitType" name="attr_TraitType" value="Combat">
						<option value="Combat">C</option>
						<option value="Exploration">E</option>
						<option value="Interaction">I</option>
					</select>
					-->
				</fieldset>
					
			
			</div>
	
		</div>
	
	</div>

	<div class="sheet-TavernTalesHideableSection"> <!-- Personality -->

	<input type="checkbox" name="attr_personalitySectionToggle" class="sheet-hiddenSectionToggle"/><span>Personality (optional)</span>

		<div class="sheet-Personality">

		  <div class="sheet-BeliefsInstinctsAndGoals">
			  <p class="sheet-TTBIGTitles">Belief: <input type="text" class="sheet-TTBIGs" name="attr_Belief"></p>
			  <p class="sheet-TTBIGTitles">Instinct: <input type="text" class="sheet-TTBIGs" name="attr_Instinct"></p>
			  <p class="sheet-TTBIGTitles">Goal: <input type="text" class="sheet-TTBIGs" name="attr_Goal"></p>
			  <p class="sheet-TTBIGTitles">Stress Reliever: <input type="text" class="sheet-TTBIGs" name="attr_StressReliever"></p>
			  <p class="sheet-TTBIGTitles">Vice: <input type="text" class="sheet-TTBIGs" name="attr_Vice"></p>
		  </div> <!-- sheet-BeliefsInstinctsAndGoals -->



		</div>
	</div>

    <div class="sheet-TavernTalesHideableSection"> <!-- Contacts -->

		<input type="checkbox" name="attr_contactsSectionToggle" class="sheet-hiddenSectionToggle"/><span>Contacts (optional)</span>

		<div class="sheet-Contacts">

			<h3>Contact (name, description and relationship)</h3>
			<fieldset class="repeating_contacts">
				<input type="text" class="sheet-TTitemName" name="attr_contactName"/>
				<input type="text" class="sheet-TTitemDesc" name="attr_contactDescription" />
			</fieldset>

        </div>
    </div>
	  
	  


	<div class="sheet-TavernTalesHideableSection"> <!-- Optional Rules -->
		<input type="checkbox" class="sheet-hiddenSectionToggle"/><span>Dice Mechanics (behind the scenes)</span>
		<div class="sheet-optionalRules">
			<div class="sheet-TavernTalesColumn">
				<h3>Target Numbers</h3>
				<p>The default difficulty is as follows: 
				<ul>
					<li>Rolling 8 or more gets a good tale</li>
					<li>Rolling 13 or less gets a bad tale</li>
				</ul>
				<p>These target number (DCs) are fairly easy to hit. If you want a much harder game, consider setting them to 10 and 15</p>
				<p>Lower Margin: <input type="number" name="attr_lowerLimit" value="8" /> Roll this value or higher to get a Good Tale</p>
				<p>Upper Margin: <input type="number" name="attr_upperLimit" value="13" /> Roll this value or lower to get a Bad Tale</p>
				<p>Make sure these fields are not empty. If you're not sure, set them to 8, 13.</p>
			</div>
			
			<div class="sheet-TavernTalesColumn">
				<h3>Dice Type</h3>
				<p>
					Set your Roll type: 3d20 or 2d10 
					<select name="attr_diceType">
						<option label="3d20" value="3d20" selected="selected">
						<option label="2d10" value="2d10">
					</select>
				</p>


				

				<p>Decreased: <input type="text" name="attr_decreasedRollTemplate" value="3d20kl1"></p>
				<p>Normal: <input type="text" name="attr_normalRollTemplate" value="{{3d20dl1}dh1}"></p>
				<p>Increased: <input type="text" name="attr_increasedRollTemplate" value="3d20kh1"></p>
			</div>
		</div>
	</div>

</div> <!-- sheet-TavernTalesSheetBody -->


<!--


                             o8o                 .   
                             `"'               .o8   
 .oooo.o  .ooooo.  oooo d8b oooo  oo.ooooo.  .o888oo 
d88(  "8 d88' `"Y8 `888""8P `888   888' `88b   888   
`"Y88b.  888        888      888   888   888   888   
o.  )88b 888   .o8  888      888   888   888   888 . 
8""888P' `Y8bod8P' d888b    o888o  888bod8P'   "888" 
                                   888               
                                  o888o              
								  
-->


<!-- Note regarding triangle numbers: (the sum of all numbers up to N) = N * (N+1)/2 -->

<script type="text/worker">

	var autoCalculate;
	
	var calcXPCost = function (value) {
		return value * (Math.abs(value)+1)/2;
	};

	var updateTraitXPCost = function () {
		// console.log("updating trait XP costs...");
		var combatTraitsXPCost;
		var interactionTraitsXPCost;
		var explorationTraitsXPCost;
		
		
		getSectionIDs("repeating_CombatTraits", function(idarray) {
			var numCombatTraits = idarray.length;
			combatTraitsXPCost = calcXPCost(numCombatTraits);
			setAttrs({combatTraitsXPSpent: combatTraitsXPCost});
		});
		getSectionIDs("repeating_InteractionTraits", function(idarray) {
			var numInteractionTraits = idarray.length;
			interactionTraitsXPCost = calcXPCost(numInteractionTraits);
			setAttrs({interactionTraitsXPSpent: interactionTraitsXPCost});
		});
		getSectionIDs("repeating_ExplorationTraits", function(idarray) {
			var numExplorationTraits = idarray.length;
			explorationTraitsXPCost = calcXPCost(numExplorationTraits);
			setAttrs({explorationTraitsXPSpent: explorationTraitsXPCost});
		});
		getSectionIDs("repeating_GeneralTraits", function(idarray) {
			var numGeneralTraits = idarray.length;
			generalTraitsXPCost = calcXPCost(numGeneralTraits);
			setAttrs({generalTraitsXPSpent: generalTraitsXPCost});
		});
		
		var totalTraitXPCost = combatTraitsXPCost + interactionTraitsXPCost + explorationTraitsXPCost;
		// console.log("finished updating trait XP costs: " + totalTraitXPCost);
		
		getAttrs(["combatTraitsXPSpent", "interactionTraitsXPSpent", "explorationTraitsXPSpent", "generalTraitsXPSpent"], function(values) {
			var totalTraitXPCost = values.combatTraitsXPSpent + values.interactionTraitsXPSpent + values.explorationTraitsXPSpent + values.generalTraitsXPSpent;
			setAttrs({totalTraitXPSpent: totalTraitXPCost});
		});
		
	};

	var updateStatXPCost = function () {
		getAttrs(["brawn", "mind", "finesse", "spirit"],function(values) { 
			// console.log("updating stat XP costs...");
			// Stats
			var BrawnXPCost = calcXPCost(values.brawn);
			var FinesseXPCost = calcXPCost(values.finesse);
			var MindXPCost = calcXPCost(values.mind);
			var SpiritXPCost = calcXPCost(values.spirit);
			var statXPCost = BrawnXPCost + FinesseXPCost + MindXPCost + SpiritXPCost;
			console.log("Stat XP Cost: " + statXPCost);
			setAttrs({statXPSpent: statXPCost});
			console.log("finished updating stat XP costs.");
			
		});
	};

	var updateTotalXPCost = function () {
		getAttrs(["statXPSpent", "combatTraitsXPSpent", "interactionTraitsXPSpent", "explorationTraitsXPSpent", "generalTraitsXPSpent"], function(values) {
			// console.log("updating total XP Cost...");
			setAttrs({totalXPSpent: values.statXPSpent + values.combatTraitsXPSpent + values.interactionTraitsXPSpent + values.explorationTraitsXPSpent + values.generalTraitsXPSpent});
			// console.log("finished updating total XP Cost.");
		});
		
	};
	
	var updateAllXP = function () {
			
		updateTraitXPCost();
		updateStatXPCost();
		// updateTotalXPCost();
	
	};
	
	on('sheet:opened',function() {
		
		updateAllXP();
	});

	on("change:repeating_CombatTraits change:repeating_ExplorationTraits change:repeating_InteractionTraits change:repeating_GeneralTraits", function() {
		// update all the traits
		updateTraitXPCost();
	});
	
	on("change:brawn change:finesse change:mind change:spirit", function() {
		// update all the traits
		updateStatXPCost();
	});



	
	on("change:diceType", function() {

	   getAttrs(["diceType"], function(values) {
			if (values.diceType == "3d20") {
			  setAttrs({
				  decreasedRollTemplate: "3d20kl1",
				  normalRollTemplate: "{3d20dl1}dh1",
				  increasedRollTemplate: "3d20kh1"
			  });						
			} else if (values.diceType == "2d10") {
				setAttrs({
					decreasedRollTemplate: "3d10kl2",
					normalRollTemplate: "2d10",
					increasedRollTemplate: "3d10kh2"
				});
			}

	   });
	});			
</script>
	
			
<!--

		ooooooooo.             oooo  oooo           
		`888   `Y88.           `888  `888           
		 888   .d88'  .ooooo.   888   888   .oooo.o 
		 888ooo88P'  d88' `88b  888   888  d88(  "8 
		 888`88b.    888   888  888   888  `"Y88b.  
		 888  `88b.  888   888  888   888  o.  )88b 
		o888o  o888o `Y8bod8P' o888o o888o 8""888P' 	 

 -->



<rolltemplate class="sheet-rolltemplate-TTRoll">
	<div class="sheet-rollContent">
		{{#name}}
			<div class="sheet-rollHeader">{{name}}</div>
		{{/name}}
		
		<div class="sheet-rollBody">
			{{#rollDescription}}
				<div class="sheet-rollDescription sheet-fineprint">{{characterName}} {{rollDescription}} for</div>
			{{/rollDescription}}

			{{#notes}}
				<div class="sheet-rollNotes">"{{notes}}"</div>
			{{/notes}}		
			

			{{#lowerLimit}}
				<div class="sheet-rollLimits">Lower Margin: {{lowerLimit}}</div>
			{{/lowerLimit}}
			{{#upperLimit}}
				<div class="sheet-rollLimits">Upper Margin: {{upperLimit}}</div>
			{{/upperLimit}}
		</div>
		
		<div class="sheet-rollFooter">

			{{#result}}
				Result: 
				
				{{#rollLess() result lowerLimit}}
					<span class="sheet-sadRollResult">{{result}} Bad</span>		
				{{/rollLess() result lowerLimit}}
				
				{{#rollBetween() result lowerLimit upperLimit}}
					<span class="sheet-exciting">{{result}}<br/> Good &amp; Bad</span>
				{{/rollBetween() result lowerLimit upperLimit}}

				{{#rollGreater() result upperLimit}}
					<span class="sheet-happyRollResult">{{result}} Good</span>
				{{/rollGreater() result upperLimit}}					
			
			{{/result}}
		</div>
	</div>
</rolltemplate>



<!-- PLAYER CHARACTER SHEET -->
<div class="container pc compendium-drop-target">
  <!-- required for drag and drop from compendium -->
  <input accept="Category" name="attr_drop_category" type="hidden"/>
  <input accept="Name" name="attr_drop_name" type="hidden"/>
  <input accept="data" name="attr_drop_data" type="hidden"/>

	<input type="hidden" value="1.73.0" name="attr_version-name">
	<input type="hidden" class="gamelock" name="attr_gamelock" value="cthulhu-awakens"> <!-- Changing this sets the sheet to only one setting or "custom" -->

	<input class="hiddencheckbox dragon-age-button" type="checkbox" name="attr_game" value="dragon-age" checked="checked">
	<input class="hiddencheckbox fantasy-age-button" type="checkbox" name="attr_game" value="fantasy-age">
	<input class="hiddencheckbox fantasy-age-core-button" type="checkbox" name="attr_game" value="fantasy-age-core">
	<input class="hiddencheckbox titansgrave-button" type="checkbox" name="attr_game" value="titansgrave">
	<input class="hiddencheckbox blue-rose-button" type="checkbox" name="attr_game" value="blue-rose">
	<input class="hiddencheckbox the-expanse-button" type="checkbox" name="attr_game" value="the-expanse">
	<input class="hiddencheckbox modern-age-button" type="checkbox" name="attr_game" value="modern-age">
	<input class="hiddencheckbox threefold-button" type="checkbox" name="attr_game" value="threefold">
	<input class="hiddencheckbox world-of-lazarus-button" type="checkbox" name="attr_game" value="world-of-lazarus">
	<input class="hiddencheckbox fifth-season-button" type="checkbox" name="attr_game" value="fifth-season">
	<input class="hiddencheckbox cthulhu-awakens-button" type="checkbox" name="attr_game" value="cthulhu-awakens">

	<input class="hiddencheckbox black-color-checkbox" type="checkbox" name="attr_color" value="black" checked="checked">
	<input class="hiddencheckbox red-color-checkbox" type="checkbox" name="attr_color" value="red">
	<input class="hiddencheckbox teal1-color-checkbox" type="checkbox" name="attr_color" value="teal1">
	<input class="hiddencheckbox teal2-color-checkbox" type="checkbox" name="attr_color" value="teal2">
	<input class="hiddencheckbox blue1-color-checkbox" type="checkbox" name="attr_color" value="blue1">
	<input class="hiddencheckbox blue2-color-checkbox" type="checkbox" name="attr_color" value="blue2">
	<input class="hiddencheckbox orange-color-checkbox" type="checkbox" name="attr_color" value="orange">
	<input class="hiddencheckbox threefold-color-checkbox" type="checkbox" name="attr_color" value="threefold">
	<input class="hiddencheckbox green-color-checkbox" type="checkbox" name="attr_color" value="green">
	<input class="hiddencheckbox lazarus-color-checkbox" type="checkbox" name="attr_color" value="lazarus">
	<input class="hiddencheckbox stars-color-checkbox" type="checkbox" name="attr_color" value="stars">
	<input class="hiddencheckbox rainbow-color-checkbox" type="checkbox" name="attr_color" value="rainbow">
	<input class="hiddencheckbox dragon-color-checkbox" type="checkbox" name="attr_color" value="dragon">

	<input type="checkbox" class="hiddencheckbox aim-checkbox" name="attr_aim-select" value="1">
	<input type="checkbox" class="hiddencheckbox stunts2-checkbox" name="attr_stunts2-select" value="1">
	<input type="checkbox" class="hiddencheckbox health-fortune-checkbox" name="attr_health-fortune-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox mana-section-checkbox" name="attr_mana-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox initiative-section-checkbox" name="attr_initiative-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox exp-section-checkbox" name="attr_exp-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox fatigue-section-checkbox" name="attr_fatigue-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox fear-section-checkbox" name="attr_fear-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox horror-section-checkbox" name="attr_horror-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox conviction-section-checkbox" name="attr_conviction-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox corruption-section-checkbox" name="attr_corruption-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox power-list-checkbox" name="attr_power-list-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox talent-list-checkbox" name="attr_talent-list-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox spell-list-checkbox" name="attr_spell-list-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox ammo-col-checkbox" name="attr_ammo-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox equipment-section-checkbox" name="attr_equipment-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox money-section-checkbox" name="attr_money-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox legacy-money-checkbox" name="attr_legacy-money-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox income-section-checkbox" name="attr_income-toggle" value="1">
	<input type="checkbox" class="hiddencheckbox conditions-section-checkbox" name="attr_conditions-toggle" value="1">

	<input class="hiddencheckbox whisper-toggle-checkbox" type="checkbox" name="attr_wtype" value="@{whisper-toggle}">

	<input class="hiddencheckbox aim-none-checkbox" type="checkbox" name="attr_aim-select" value="0">
	<input class="hiddencheckbox aim-toggle-checkbox" type="checkbox" name="attr_aim-select" value="@{aim-toggle}">
	<input class="hiddencheckbox aim-prompt-checkbox" type="checkbox" name="attr_aim-select" value="?{Using the Aim action|Yes, @{aim-value}|No, 0}">
	<input class="hiddencheckbox aim-always-checkbox" type="checkbox" name="attr_aim-select" value="@{aim-value}">

	<input type="hidden" value="" name="attr_stunts2-code">
	<input class="hiddencheckbox stunts2-none-checkbox" type="checkbox" name="attr_stunts2-select" value="0">
	<input class="hiddencheckbox stunts2-toggle-checkbox" type="checkbox" name="attr_stunts2-select" value="@{stunts2-toggle}">
	<input class="hiddencheckbox stunts2-prompt-checkbox" type="checkbox" name="attr_stunts2-select" value="?{Using the 2nd Stunt Die|Yes, d6|No, 0}">
	<input class="hiddencheckbox stunts2-always-checkbox" type="checkbox" name="attr_stunts2-select" value="d6">

	<input class="tab-button tab-whisper" type="checkbox" name="attr_whisper-toggle" value="/w gm "><span data-i18n="whisper-u">WHISPER</span>
	<input class="tab-button tab-aim" type="checkbox" name="attr_aim-toggle" value="@{aim-value}"><span data-i18n="aim-u">AIM</span>
	<input class="tab-button tab-stunts2" type="checkbox" name="attr_stunts2-toggle" value="d6"><span data-i18n="reroll-u">REROLL</span>

	<input class="tab-button tab1" type="radio" name="attr_tab" value="1" checked="checked"><span data-i18n="character-u">CHARACTER</span>
	<input class="tab-button tab2" type="radio" name="attr_tab" value="2"><span data-i18n="persona-u">PERSONA</span>
	<input class="tab-button tab3" type="radio" name="attr_tab" value="3"><span data-i18n="class-u" class="class-tab-span">CLASS</span><span data-i18n="qualities-u" class="qualities-tab-span">QUALITIES</span>
	<input class="tab-button tab4" type="radio" name="attr_tab" value="4"><span data-i18n="talents-u">TALENTS</span>
	<input class="tab-button tab5" type="radio" name="attr_tab" value="5"><span data-i18n="focuses-u">FOCUSES</span>
	<input class="tab-button tab6" type="radio" name="attr_tab" value="6"><span data-i18n="magic-u" class="magic-tab-span">MAGIC</span><span data-i18n="arcana-u" class="arcana-tab-span">ARCANA</span><span class="extraordinary-tab-span" data-i18n="extraordinary-u">EXTRAORDINARY</span><span data-i18n="psychic-u" class="psychic-tab-span">PSYCHIC</span>
	<input class="tab-button tab8" type="radio" name="attr_tab" value="8"><span data-i18n="alienation-u">ALIENATION</span>
	<input class="tab-button tab7" type="radio" name="attr_tab" value="7"><span style="font-family: pictos">y</span>

	<button name="act_dice-roller" class="floating-dice-roller" type="action" data-i18n-title="main-roll-button-title" title="This is the roll-builder. You can click it, answer four questions, and then it will roll the dice for you."></button>

	<!-- HEADER -->
	<div class="page tab1 tab2 tab3 tab4 tab5 tab6 tab7 tab8">
		<div class="header">
			<div class="name-container dragon-age-selected">
				<img src="http://i.imgur.com/mIWakqc.png" style="width: 207px;height: 40px;margin-left:23px;" alt="Dragon Age">
				<input type="text" name="attr_character_name">
				<span data-i18n="char-name-u">CHARACTER NAME</span>
			</div>
			<div class="name-container fantasy-age-selected fantasy-age-core-selected">
				<img src="http://i.imgur.com/O3vrAHe.png" style="width: 229px;height: 40px;margin-left:10px;" alt="Fantasy AGE">
				<input type="text" name="attr_character_name">
				<span data-i18n="char-name-u">CHARACTER NAME</span>
			</div>
			<div class="name-container titansgrave-selected">
				<img src="http://i.imgur.com/PzyyWUe.png" style="width: 102px;height: 40px;margin-left:70px;" alt="Titansgrave">
				<input type="text" name="attr_character_name">
				<span data-i18n="char-name-u">CHARACTER NAME</span>
			</div>
			<div class="name-container blue-rose-selected">
				<img src="http://i.imgur.com/DXARIqr.png" style="width: 175px;height: 40px;margin-left:40px;" alt="Blue Rose">
				<input type="text" name="attr_character_name">
				<span data-i18n="char-name-u">CHARACTER NAME</span>
			</div>
			<div class="name-container the-expanse-selected">
				<img src="https://i.imgur.com/UeRkQfG.png" style="width: 175px;height: 40px;margin-left:40px;" alt="The Expanse">
				<input type="text" name="attr_character_name">
				<span data-i18n="char-name-u">CHARACTER NAME</span>
			</div>
			<div class="name-container modern-age-selected">
				<img src="https://i.imgur.com/NO0qlu8.png" style="width: 175px;height: 40px;margin-left:40px;" alt="Modern AGE">
				<input type="text" name="attr_character_name">
				<span data-i18n="char-name-u">CHARACTER NAME</span>
			</div>
			<div class="name-container threefold-selected">
				<img src="https://i.imgur.com/L7nEs5V.png" style="width: 175px;height: 40px;margin-left:40px;" alt="Threefold">
				<input type="text" name="attr_character_name">
				<span data-i18n="char-name-u">CHARACTER NAME</span>
			</div>
			<div class="name-container world-of-lazarus-selected">
				<img src="https://i.imgur.com/6lraK01.png" style="width: 175px;height: 40px;margin-left:40px;" alt="World of Lazarus">
				<input type="text" name="attr_character_name">
				<span data-i18n="char-name-u">CHARACTER NAME</span>
			</div>
			<div class="name-container fifth-season-selected">
				<img src="https://imgur.com/6V2HgyI.png" style="width: 185px;height: 40px;margin-left:30px;" alt="Modern AGE">
				<input type="text" name="attr_character_name">
				<span data-i18n="char-name-u">CHARACTER NAME</span>
			</div>
			<div class="name-container cthulhu-awakens-selected">
				<img src="https://imgur.com/BF3GPxC.png" style="width: 155px;height: 40px;margin-left:50px;" alt="Cthulhu Awakens">
				<input type="text" name="attr_character_name">
				<span data-i18n="char-name-u">CHARACTER NAME</span>
			</div>
		</div>
	</div>
	<div class="page tab1">
		<div class="header">
			<div class="header-info">
				<div class="top dragon-age-selected fantasy-age-selected titansgrave-selected">
					<div class="info-container">
						<select class="character class" name="attr_class" style="width: 96px;">
							<option value="Mage" data-i18n="mage">Mage</option>
							<option value="Rogue" data-i18n="rogue">Rogue</option>
							<option value="Warrior" data-i18n="warrior">Warrior</option>
						</select>
						<span data-i18n="class-u">CLASS</span>
					</div>
					<div class="info-container">
						<input type="number" class="class-level" name="attr_level" value="1" style="width: 36px;">
						<span data-i18n="level-u">LEVEL</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_race" style="width: 120px;">
						<span data-i18n="race-u">RACE</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_social-class" style="width: 108px;">
						<span data-i18n="social-class-u">SOCIAL CLASS</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_background" style="width: 120px;">
						<span data-i18n="background-u">BACKGROUND</span>
					</div>
				</div>
				<div class="top fantasy-age-core-selected">
					<div class="info-container">
						<select class="character class" name="attr_class" style="width: 96px;">
							<option value="Envoy" data-i18n="envoy">Envoy</option>
							<option value="Mage" data-i18n="mage">Mage</option>
							<option value="Rogue" data-i18n="rogue">Rogue</option>
							<option value="Warrior" data-i18n="warrior">Warrior</option>
						</select>
						<span data-i18n="class-u">CLASS</span>
					</div>
					<div class="info-container">
						<input type="number" class="class-level" name="attr_level" value="1" style="width: 36px;">
						<span data-i18n="level-u">LEVEL</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_race" style="width: 120px;">
						<span data-i18n="ancestry-u">ANCESTRY</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_social-class" style="width: 108px;">
						<span data-i18n="social-class-u">SOCIAL CLASS</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_background" style="width: 120px;">
						<span data-i18n="background-u">BACKGROUND</span>
					</div>
				</div>
				<div class="top blue-rose-selected">
					<div class="info-container">
						<select class="character class" name="attr_class" style="width: 124px;">
							<option value="Adept" data-i18n="adept">Adept</option>
							<option value="Expert" data-i18n="expert">Expert</option>
							<option value="Warrior" data-i18n="warrior">Warrior</option>
						</select>
						<span data-i18n="class-u">CLASS</span>
					</div>
					<div class="info-container">
						<input type="number" class="class-level" name="attr_level" value="1" style="width: 36px;">
						<span data-i18n="level-u">LEVEL</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_race" style="width: 160px;">
						<span data-i18n="race-u">RACE</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_background" style="width: 160px;">
						<span data-i18n="background-u">BACKGROUND</span>
					</div>
				</div>
				<div class="top the-expanse-selected">
					<div class="info-container">
						<input type="number" class="class-level" name="attr_level" value="1" style="padding-top: 5px; width: 36px;">
						<span data-i18n="level-u">LEVEL</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_origin" style="width: 60px;">
						<span data-i18n="origin-u">ORIGIN</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_social-class" style="width: 96px;">
						<span data-i18n="social-class-u">SOCIAL CLASS</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_background" style="width: 96px;">
						<span data-i18n="background-u">BACKGROUND</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_profession" style="width: 96px;">
						<span data-i18n="profession-u">PROFESSION</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_drive" style="width: 96px;">
						<span data-i18n="drive-u">DRIVE</span>
					</div>
				</div>
				<div class="top mod-selected">
					<div class="info-container">
						<input type="number" class="class-level" name="attr_level" value="1" style="width: 36px;">
						<span data-i18n="level-u">LEVEL</span>
					</div>
					<div class="info-container">
						<select type="text" name="attr_social-class" style="width: 92px;">
							<option value="Outsider" data-i18n="outsider">Outsider</option>
							<option value="Lower Class" data-i18n="lower-class">Lower Class</option>
							<option value="Middle Class" data-i18n="middle-class">Middle Class</option>
							<option value="Upper Class" data-i18n="upper-class">Upper Class</option>
						</select>
						<span data-i18n="social-class-u">SOCIAL CLASS</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_background" style="width: 118px;">
						<span data-i18n="background-u">BACKGROUND</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_profession" style="width: 118px;">
						<span data-i18n="profession-u">PROFESSION</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_drive" style="width: 118px;">
						<span data-i18n="drive-u">DRIVE</span>
					</div>
				</div>
				<div class="bottom old-age-selected fantasy-age-core-selected the-expanse-selected modern-age-selected fifth-season-selected cthulhu-awakens-selected">
					<div class="info-container">
						<input type="text" name="attr_age" style="width: 120px;">
						<span data-i18n="age-u">AGE</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_gender" style="width: 120px;">
						<span data-i18n="gender-u">GENDER</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_height" style="width: 120px;">
						<span data-i18n="height-u">HEIGHT</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_weight" style="width: 120px;">
						<span data-i18n="weight-u">WEIGHT</span>
					</div>
				</div>
				<div class="bottom threefold-selected">
					<div class="info-container">
						<input type="text" name="attr_ancestry" style="width: 96px;">
						<span data-i18n="ancestry-u">ANCESTRY</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_age" style="width: 96px;">
						<span data-i18n="age-u">AGE</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_gender" style="width: 96px;">
						<span data-i18n="gender-u">GENDER</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_height" style="width: 96px;">
						<span data-i18n="height-u">HEIGHT</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_weight" style="width: 96px;">
						<span data-i18n="weight-u">WEIGHT</span>
					</div>
				</div>
				<div class="bottom world-of-lazarus-selected">
					<div class="info-container">
						<input type="text" name="attr_family" style="width: 96px;">
						<span data-i18n="family-u">FAMILY/ALLEGIANCE</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_age" style="width: 96px;">
						<span data-i18n="age-u">AGE</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_gender" style="width: 96px;">
						<span data-i18n="gender-u">GENDER</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_height" style="width: 96px;">
						<span data-i18n="height-u">HEIGHT</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_weight" style="width: 96px;">
						<span data-i18n="weight-u">WEIGHT</span>
					</div>
				</div>
				<div class="bottom blue-rose-selected">
					<div class="info-container">
						<input type="text" name="attr_calling" style="width: 160px;">
						<span data-i18n="calling-u">CALLING</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_destiny" style="width: 160px;">
						<span data-i18n="destiny-u">DESTINY</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_fate" style="width: 160px;">
						<span data-i18n="fate-u">FATE</span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="page tab2">
		<div class="header">
			<div class="header-info">
				<div class="top old-age-selected fantasy-age-core-selected the-expanse-selected">
					<div class="info-container">
						<input type="text" name="attr_eyes" style="padding-top: 5px; width: 160px;">
						<span data-i18n="eye-u">EYES</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_skin" style="width: 160px;">
						<span data-i18n="skin-u">SKIN</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_hair" style="width: 160px;">
						<span data-i18n="hair-u">HAIR</span>
					</div>
				</div>
				<div class="top blue-rose-selected">
					<div class="info-container">
						<input type="text" name="attr_age" style="width: 120px;margin-top:5px;">
						<span data-i18n="age-u">AGE</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_gender" style="width: 120px;">
						<span data-i18n="gender-u">GENDER</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_height" style="width: 120px;">
						<span data-i18n="height-u">HEIGHT</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_weight" style="width: 120px;">
						<span data-i18n="weight-u">WEIGHT</span>
					</div>
				</div>
				<div class="top mod-selected">
					<div class="info-container">
						<input type="number" class="class-level" name="attr_level" value="1" style="width: 36px;">
						<span data-i18n="level-u">LEVEL</span>
					</div>
					<div class="info-container">
						<select type="text" name="attr_social-class" style="width: 96px;">
							<option value="Outsider" data-i18n="outsider">Outsider</option>
							<option value="Lower Class" data-i18n="lower-class">Lower Class</option>
							<option value="Middle Class" data-i18n="middle-class">Middle Class</option>
							<option value="Upper Class" data-i18n="upper-class">Upper Class</option>
						</select>
						<span data-i18n="social-class-u">SOCIAL CLASS</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_background" style="width: 114px;">
						<span data-i18n="background-u">BACKGROUND</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_profession" style="width: 114px;">
						<span data-i18n="profession-u">PROFESSION</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_drive" style="width: 114px;">
						<span data-i18n="drive-u">DRIVE</span>
					</div>
				</div>
				<div class="bottom">
					<div class="info-container">
						<input type="text" name="attr_languages" style="width: 480px;">
						<span data-i18n="languages-u">LANGUAGES</span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="page tab3 tab4 tab5 tab6 tab7 tab8">
		<div class="header">
			<div class="header-info">
				<div class="top dragon-age-selected fantasy-age-selected titansgrave-selected">
					<div class="info-container">
						<select class="character class" name="attr_class" style="width: 96px;">
							<option value="Mage" data-i18n="mage">Mage</option>
							<option value="Rogue" data-i18n="rogue">Rogue</option>
							<option value="Warrior" data-i18n="warrior">Warrior</option>
						</select>
						<span data-i18n="class-u">CLASS</span>
					</div>
					<div class="info-container">
						<input type="number" class="class-level" name="attr_level" value="1" style="width: 36px;">
						<span data-i18n="level-u">LEVEL</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_race" style="width: 120px;">
						<span data-i18n="race-u">RACE</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_social-class" style="width: 108px;">
						<span data-i18n="social-class-u">SOCIAL CLASS</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_background" style="width: 120px;">
						<span data-i18n="background-u">BACKGROUND</span>
					</div>
				</div>
				<div class="top fantasy-age-core-selected">
					<div class="info-container">
						<select class="character class" name="attr_class" style="width: 96px;">
							<option value="Envoy" data-i18n="envoy">Envoy</option>
							<option value="Mage" data-i18n="mage">Mage</option>
							<option value="Rogue" data-i18n="rogue">Rogue</option>
							<option value="Warrior" data-i18n="warrior">Warrior</option>
						</select>
						<span data-i18n="class-u">CLASS</span>
					</div>
					<div class="info-container">
						<input type="number" class="class-level" name="attr_level" value="1" style="width: 36px;">
						<span data-i18n="level-u">LEVEL</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_race" style="width: 120px;">
						<span data-i18n="ancestry-u">ANCESTRY</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_social-class" style="width: 108px;">
						<span data-i18n="social-class-u">SOCIAL CLASS</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_background" style="width: 120px;">
						<span data-i18n="background-u">BACKGROUND</span>
					</div>
				</div>
				<div class="top blue-rose-selected">
					<div class="info-container">
						<select class="character class" name="attr_class" style="width: 124px;">
							<option value="Adept" data-i18n="adept">Adept</option>
							<option value="Expert" data-i18n="expert">Expert</option>
							<option value="Warrior" data-i18n="warrior">Warrior</option>
						</select>
						<span data-i18n="class-u">CLASS</span>
					</div>
					<div class="info-container">
						<input type="number" class="class-level" name="attr_level" value="1" style="width: 36px;">
						<span data-i18n="level-u">LEVEL</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_race" style="width: 160px;">
						<span data-i18n="race-u">RACE</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_background" style="width: 160px;">
						<span data-i18n="background-u">BACKGROUND</span>
					</div>
				</div>
				<div class="top the-expanse-selected">
					<div class="info-container">
						<input type="number" class="class-level" name="attr_level" value="1" style="width: 36px;">
						<span data-i18n="level-u">LEVEL</span>
					</div>
					<div class="info-container">
						<select class="character origin" name="attr_origin" style="width: 60px;">
							<option value="Belter" data-i18n="belter">Belter</option>
							<option value="Earther" data-i18n="earther">Earther</option>
							<option value="Martian" data-i18n="martian">Martian</option>
						</select>
						<span data-i18n="origin-u">ORIGIN</span>
					</div>
					<div class="info-container">
						<select type="text" name="attr_social-class" style="width: 96px;">
							<option value="Outsider" data-i18n="outsider">Outsider</option>
							<option value="Lower Class" data-i18n="lower-class">Lower Class</option>
							<option value="Middle Class" data-i18n="middle-class">Middle Class</option>
							<option value="Upper Class" data-i18n="upper-class">Upper Class</option>
						</select>
						<span data-i18n="social-class-u">SOCIAL CLASS</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_background" style="width: 96px;">
						<span data-i18n="background-u">BACKGROUND</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_profession" style="width: 96px;">
						<span data-i18n="profession-u">PROFESSION</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_drive" style="width: 96px;">
						<span data-i18n="drive-u">DRIVE</span>
					</div>
				</div>
				<div class="top mod-selected">
					<div class="info-container">
						<input type="number" class="class-level" name="attr_level" value="1" style="width: 36px;">
						<span data-i18n="level-u">LEVEL</span>
					</div>
					<div class="info-container">
						<select type="text" name="attr_social-class" style="width: 96px;">
							<option value="Outsider" data-i18n="outsider">Outsider</option>
							<option value="Lower Class" data-i18n="lower-class">Lower Class</option>
							<option value="Middle Class" data-i18n="middle-class">Middle Class</option>
							<option value="Upper Class" data-i18n="upper-class">Upper Class</option>
						</select>
						<span data-i18n="social-class-u">SOCIAL CLASS</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_background" style="width: 114px;">
						<span data-i18n="background-u">BACKGROUND</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_profession" style="width: 114px;">
						<span data-i18n="profession-u">PROFESSION</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_drive" style="width: 114px;">
						<span data-i18n="drive-u">DRIVE</span>
					</div>
				</div>
				<div class="bottom">
					<div class="info-container">
						<input type="text" name="attr_specialization1" style="width: 140px;">
						<span data-i18n="specialization1-u">SPECIALIZATION 1</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_specialization1-degree" style="width: 97px;">
						<span data-i18n="specialization1-degree-u">DEGREE</span>
					</div>
					<div class="info-container" style="width: 3px;">
					</div>
					<div class="info-container">
						<input type="text" name="attr_specialization2" style="width: 140px;">
						<span data-i18n="specialization2-u">SPECIALIZATION 2</span>
					</div>
					<div class="info-container">
						<input type="text" name="attr_specialization2-degree" style="width: 97px;">
						<span data-i18n="specialization1-degree-u">DEGREE</span>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- CHARACTER TAB -->
	<div class="page tab1">
		<div class="body">
			<!-- Abilities -->
			<div class="col col-left-character-tab">
				<div class="abilities-table">
					<!-- Accuracy -->
					<div class="second-gen-selected the-expanse-selected mod-selected ability-accuracy">
						<div class="ability-container">
							<div class="col left-ability-container">
								<div class="section-name focuses-section">
									<div class="col ability-name">
										<button class="abilities-buttons" name="act_accuracy_check" type="action" data-i18n="accuracy-u">ACCURACY</button>
									</div>
									<div class="col primary-checkbox">
										<input type="checkbox" name="attr_primary_accuracy"/><span></span>
									</div>
								</div>
								<div class="ability-focus-list">
									<fieldset class="repeating_accuracy-focus">
										<input type="hidden" name="attr_focusname">
										<input type="hidden" name="attr_focusbonus" value="2">
										<button class="focus-buttons" name="act_focus-check" type="action"><span name="attr_focusname"></span><span> (</span><span name="attr_focusbonus"></span><span>)</span></button><span class="focus-comma">,</span>
									</fieldset>
								</div>
							</div>
							<div class="col right-ability-container">
								<input type="number" name="attr_accuracy" value="0">
							</div>
						</div>
					</div>
					<!-- Communication -->
					<div class="ability-container ability-communication">
						<div class="col left-ability-container">
							<div class="section-name focuses-section">
								<div class="col ability-name">
									<button class="abilities-buttons" name="act_communication_check" type="action" data-i18n="communication-u">COMMUNICATION</button>
								</div>
								<div class="col primary-checkbox">
									<input type="checkbox" name="attr_primary_communication"/><span></span>
								</div>
							</div>
							<div class="ability-focus-list">
								<fieldset class="repeating_communication-focus">
									<input type="hidden" name="attr_focusname">
									<input type="hidden" name="attr_focusbonus" value="2">
									<button class="focus-buttons" name="act_focus-check" type="action"><span name="attr_focusname"></span><span> (</span><span name="attr_focusbonus"></span><span>)</span></button><span class="focus-comma">,</span>
								</fieldset>
							</div>
						</div>
						<div class="col right-ability-container">
							<input type="number" name="attr_communication" value="0">
						</div>
					</div>
					<!-- Constitution -->
					<div class="ability-container ability-constitution">
						<div class="col left-ability-container">
							<div class="section-name focuses-section">
								<div class="col ability-name">
									<button class="abilities-buttons" name="act_constitution_check" type="action" data-i18n="constitution-u">CONSTITUTION</button>
								</div>
								<div class="col primary-checkbox">
									<input type="checkbox" name="attr_primary_constitution"/><span></span>
								</div>
							</div>
							<div class="ability-focus-list">
								<fieldset class="repeating_constitution-focus">
									<input type="hidden" name="attr_focusname">
									<input type="hidden" name="attr_focusbonus" value="2">
									<button class="focus-buttons" name="act_focus-check" type="action"><span name="attr_focusname"></span><span> (</span><span name="attr_focusbonus"></span><span>)</span></button><span class="focus-comma">,</span>
								</fieldset>
							</div>
						</div>
						<div class="col right-ability-container">
							<input type="number" name="attr_constitution" value="0">
						</div>
					</div>
					<!-- Cunning -->
					<div class="ability-container dragon-age-selected ability-cunning">
						<div class="col left-ability-container">
							<div class="section-name focuses-section">
								<div class="col ability-name">
									<button class="abilities-buttons" name="act_cunning_check" type="action" data-i18n="cunning-u">CUNNING</button>
								</div>
								<div class="col primary-checkbox">
									<input type="checkbox" name="attr_primary_cunning"/><span></span>
								</div>
							</div>
							<div class="ability-focus-list">
								<fieldset class="repeating_cunning-focus">
									<input type="hidden" name="attr_focusname">
									<input type="hidden" name="attr_focusbonus" value="2">
									<button class="focus-buttons" name="act_focus-check" type="action"><span name="attr_focusname"></span><span> (</span><span name="attr_focusbonus"></span><span>)</span></button><span class="focus-comma">,</span>
								</fieldset>
							</div>
						</div>
						<div class="col right-ability-container">
							<input type="number" name="attr_cunning" value="0">
						</div>
					</div>
					<!-- Dexterity -->
					<div class="ability-container ability-dexterity">
						<div class="col left-ability-container">
							<div class="section-name focuses-section">
								<div class="col ability-name half-ability-name">
									<button class="abilities-buttons" name="act_dexterity_check" type="action" data-i18n="dexterity-u">DEXTERITY</button>
								</div>
								<div class="col ability-name half-ability-name">
									<button class="initiative-section" name="act_initiative_check" type="action"><span style="display:inline" data-i18n="initiative"></span><span style="display:inline"> (</span><span style="display:inline" name="attr_init-bonus"></span><span style="display:inline">)</span></button>
								</div>
								<div class="col primary-checkbox">
									<input type="checkbox" name="attr_primary_dexterity"/><span></span>
								</div>
							</div>
							<div class="ability-focus-list">
								<fieldset class="repeating_dexterity-focus">
									<input type="hidden" name="attr_focusname">
									<input type="hidden" name="attr_focusbonus" value="2">
									<button class="focus-buttons" name="act_focus-check" type="action"><span name="attr_focusname"></span><span> (</span><span name="attr_focusbonus"></span><span>)</span></button><span class="focus-comma">,</span>
								</fieldset>
							</div>
						</div>
						<div class="col right-ability-container">
							<input type="number" name="attr_dexterity" value="0">
						</div>
						<input type="hidden" name="attr_initiative" value="0">
					</div>
					<!-- Fighting -->
					<div class="ability-container second-gen-selected the-expanse-selected mod-selected ability-fighting">
						<div class="col left-ability-container">
							<div class="section-name focuses-section">
								<div class="col ability-name">
									<button class="abilities-buttons" name="act_fighting_check" type="action" data-i18n="fighting-u">FIGHTING</button>
								</div>
								<div class="col primary-checkbox">
									<input type="checkbox" name="attr_primary_fighting"/><span></span>
								</div>
							</div>
							<div class="ability-focus-list">
								<fieldset class="repeating_fighting-focus">
									<input type="hidden" name="attr_focusname">
									<input type="hidden" name="attr_focusbonus" value="2">
									<button class="focus-buttons" name="act_focus-check" type="action"><span name="attr_focusname"></span><span> (</span><span name="attr_focusbonus"></span><span>)</span></button><span class="focus-comma">,</span>
								</fieldset>
							</div>
						</div>
						<div class="col right-ability-container">
							<input type="number" name="attr_fighting" value="0">
						</div>
					</div>
					<!-- Intelligence -->
					<div class="ability-container second-gen-selected the-expanse-selected mod-selected ability-intelligence">
						<div class="col left-ability-container">
							<div class="section-name focuses-section">
								<div class="col ability-name">
									<button class="abilities-buttons" name="act_intelligence_check" type="action" data-i18n="intelligence-u">INTELLIGENCE</button>
								</div>
								<div class="col primary-checkbox">
									<input type="checkbox" name="attr_primary_intelligence"/><span></span>
								</div>
							</div>
							<div class="ability-focus-list">
								<fieldset class="repeating_intelligence-focus">
									<input type="hidden" name="attr_focusname">
									<input type="hidden" name="attr_focusbonus" value="2">
									<button class="focus-buttons" name="act_focus-check" type="action"><span name="attr_focusname"></span><span> (</span><span name="attr_focusbonus"></span><span>)</span></button><span class="focus-comma">,</span>
								</fieldset>
							</div>
						</div>
						<div class="col right-ability-container">
							<input type="number" name="attr_intelligence" value="0">
						</div>
					</div>
					<!-- Magic -->
					<div class="ability-container dragon-age-selected ability-magic">
						<div class="col left-ability-container">
							<div class="section-name focuses-section">
								<div class="col ability-name">
									<button class="abilities-buttons" name="act_magic_check" type="action" data-i18n="magic-u">MAGIC</button>
								</div>
								<div class="col primary-checkbox">
									<input type="checkbox" name="attr_primary_magic"/><span></span>
								</div>
							</div>
							<div class="ability-focus-list">
								<fieldset class="repeating_magic-focus">
									<input type="hidden" name="attr_focusname">
									<input type="hidden" name="attr_focusbonus" value="2">
									<button class="focus-buttons" name="act_focus-check" type="action"><span name="attr_focusname"></span><span> (</span><span name="attr_focusbonus"></span><span>)</span></button><span class="focus-comma">,</span>
								</fieldset>
							</div>
						</div>
						<div class="col right-ability-container">
							<input type="number" name="attr_magic" value="0">
						</div>
					</div>
					<!-- Perception -->
					<div class="ability-container ability-perception">
						<div class="col left-ability-container">
							<div class="section-name focuses-section">
								<div class="col ability-name">
									<button class="abilities-buttons" name="act_perception_check" type="action" data-i18n="perception-u">PERCEPTION</button>
								</div>
								<div class="col primary-checkbox">
									<input type="checkbox" name="attr_primary_perception"/><span></span>
								</div>
							</div>
							<div class="ability-focus-list">
								<fieldset class="repeating_perception-focus">
									<input type="hidden" name="attr_focusname">
									<input type="hidden" name="attr_focusbonus" value="2">
									<button class="focus-buttons" name="act_focus-check" type="action"><span name="attr_focusname"></span><span> (</span><span name="attr_focusbonus"></span><span>)</span></button><span class="focus-comma">,</span>
								</fieldset>
							</div>
						</div>
						<div class="col right-ability-container">
							<input type="number" name="attr_perception" value="0">
						</div>
					</div>
					<!-- Strength -->
					<div class="ability-container ability-strength">
						<div class="col left-ability-container">
							<div class="section-name focuses-section">
								<div class="col ability-name">
									<button class="abilities-buttons" name="act_strength_check" type="action" data-i18n="strength-u">STRENGTH</button>
								</div>
								<div class="col primary-checkbox">
									<input type="checkbox" name="attr_primary_strength"/><span></span>
								</div>
							</div>
							<div class="ability-focus-list">
								<fieldset class="repeating_strength-focus">
									<input type="hidden" name="attr_focusname">
									<input type="hidden" name="attr_focusbonus" value="2">
									<button class="focus-buttons" name="act_focus-check" type="action"><span name="attr_focusname"></span><span> (</span><span name="attr_focusbonus"></span><span>)</span></button><span class="focus-comma">,</span>
								</fieldset>
							</div>
						</div>
						<div class="col right-ability-container">
							<input type="number" name="attr_strength" value="0">
						</div>
					</div>
					<!-- Willpower -->
					<div class="ability-container ability-willpower">
						<div class="col left-ability-container">
							<div class="section-name focuses-section">
								<div class="col ability-name">
									<button class="abilities-buttons" name="act_willpower_check" type="action" data-i18n="willpower-u">WILLPOWER</button>
								</div>
								<div class="col primary-checkbox">
									<input type="checkbox" name="attr_primary_willpower"/><span></span>
								</div>
							</div>
							<div class="ability-focus-list">
								<fieldset class="repeating_willpower-focus">
									<input type="hidden" name="attr_focusname">
									<input type="hidden" name="attr_focusbonus" value="2">
									<button class="focus-buttons" name="act_focus-check" type="action"><span name="attr_focusname"></span><span> (</span><span name="attr_focusbonus"></span><span>)</span></button><span class="focus-comma">,</span>
								</fieldset>
							</div>
						</div>
						<div class="col right-ability-container">
							<input type="number" name="attr_willpower" value="0">
						</div>
					</div>
				</div>
			</div>
			<div class="col col-right-character-tab">
				<!-- HEALTH & other boxes -->
				<div class="row">
					<div class="section sectionfourth health">
						<div class="section-name health-section character-section-name">
							<span data-i18n="health-u">HEALTH</span>
						</div>
						<div class="section-name fortune-section character-section-name">
							<span data-i18n="fortune-u">FORTUNE</span>
						</div>
						<input type="number" name="attr_health">
						<div class="maximum-input">
							<span data-i18n="max">Max</span>
							<input type="number" name="attr_health_max">
						</div>
					</div>
					<div class="section sectionfourth mana-section">
						<div class="section-name dragon-age-selected character-section-name">
							<span data-i18n="mana-u">MANA</span>
						</div>
						<div class="section-name second-gen-selected character-section-name">
							<span data-i18n="magic-points-u">MAGIC POINTS</span>
						</div>
						<div class="section-name modern-age-selected character-section-name">
							<span data-i18n="power-points-u">POWER POINTS</span>
						</div>
						<div class="section-name threefold-selected character-section-name">
							<span data-i18n="kanna-u">KANNA</span>
						</div>
						<input type="number" name="attr_mana">
						<div class="maximum-input">
							<span data-i18n="max">Max</span>
							<input type="number" name="attr_mana_max">
						</div>
					</div>
					<div class="section sectiontwofourths experience-points-section">
						<div class="section-name character-section-name">
							<span data-i18n="experience-points-u">EXPERIENCE POINTS</span>
						</div>
						<input type="number" name="attr_experience-points">
						<div class="maximum-input">
							<span data-i18n="next">Next</span>
							<input type="number" name="attr_experience-points-next">
						</div>
					</div>
					<!--
					<div class="section sectionfourth initiative-section">
						<div class="section-name character-section-name">
							<button class="abilities-buttons" data-i18n="initiative-u" name="act_initiative_check" type="action">INITIATIVE</button>
						</div>
						<input type="number" name="attr_init" disabled="true" >
						<div class="maximum-input">
							<span data-i18n="adjust">Adjust</span>
							<input type="number" name="attr_init-bonus" value="0">
						</div>
					</div>
					-->
					<div class="section sectionfourth fatigue-section">
						<div class="section-name character-section-name">
							<span data-i18n="fatigue-u">FATIGUE</span>
						</div>
						<input type="number" name="attr_fatigue" title="@{fatigue}" value="0" min="0" max="4">
						<div>
							<select class="fatigue-full" name="attr_fatigue">
								<option value="0" data-i18n="none">None</option>
								<option value="1" data-i18n="winded">Winded</option>
								<option value="2" data-i18n="tired">Tired</option>
								<option value="3" data-i18n="exhausted">Exhausted</option>
								<option value="4" data-i18n="dying">Dying</option>
							</select>
						</div>
					</div>
					<div class="section sectionfourth fear-section">
						<div class="section-name character-section-name">
							<span data-i18n="fear-u">FEAR</span>
						</div>
						<input type="number" name="attr_fear" value="0" min="0" max="5">
						<div>
							<select class="fear-full" name="attr_fear">
								<option value="0" data-i18n="none">None</option>
								<option value="1" data-i18n="nervous">Nervous</option>
								<option value="2" data-i18n="anxious">Anxious</option>
								<option value="3" data-i18n="watchful">Watchful</option>
								<option value="4" data-i18n="afraid">Afraid</option>
								<option value="5" data-i18n="terrified">Terrified</option>
							</select>
						</div>
						<input type="hidden" name="attr_fear-perception" value="0">
						<input type="hidden" name="attr_fear-intelligence" value="0">
						<input type="hidden" name="attr_fear-initiative" value="0">
						<input type="hidden" name="attr_fear-accuracy" value="0">
						<input type="hidden" name="attr_fear-fighting" value="0">
					</div>
					<div class="section sectionfourth horror-section">
						<div class="section-name character-section-name">
							<span data-i18n="horror-u">HORROR</span>
						</div>
						<input type="number" name="attr_horror" value="0" min="0" max="5">
						<div>
							<select class="horror-full" name="attr_horror">
								<option value="0" data-i18n="none">None</option>
								<option value="1" data-i18n="unsettled">Unsettled</option>
								<option value="2" data-i18n="shocked">Shocked</option>
								<option value="3" data-i18n="appalled">Appalled</option>
								<option value="4" data-i18n="overwhelmed">Overwhelmed</option>
								<option value="5" data-i18n="shattered">Shattered</option>
							</select>
						</div>
					</div>
					<div class="section sectionfourth conviction-section">
						<div class="section-name character-section-name">
							<span data-i18n="conviction-u">CONVICTION</span>
						</div>
						<input type="number" name="attr_conviction" value="3">
						<div class="maximum-input">
							<span data-i18n="max">Max</span>
							<input type="number" name="attr_conviction_max" value="3" title="@{conviction_max}">
						</div>
					</div>
					<div class="section sectionfourth corruption-section">
						<div class="section-name character-section-name">
							<span data-i18n="corruption-u">CORRUPTION</span>
						</div>
						<input type="number" name="attr_corruption">
					</div>
					<div class="section sectionfourth income-section">
						<div class="section-name">
							<div class="no-the-expanse-selected">
								<button class="abilities-buttons" data-i18n="resources-u" name="act_resources_check" type="action">RESOURCES</button>
							</div>
							<div class="the-expanse-selected">
								<button class="abilities-buttons" data-i18n="income-u" name="act_income_check" type="action">INCOME</button>
							</div>
						</div>
						<div class="income-score">
							<input type="number" name="attr_income" value="0" title="Income">
						</div>
						<div class="maximum-input">
							<span data-i18n="max">Max</span>
							<input type="number" name="attr_income_max" value="3" title="@{income_max}">
						</div>
					</div>
					<div class="section sectionfull speed-defense-armor-container no-mod-selected">
						<div class="section-name speed-defense-armor-name">
							<div class="col">
								<span data-i18n="speed-u">SPEED</span>
							</div>
							<div class="col">
								<span data-i18n="defense-u">DEFENSE</span>
							</div>
							<div class="col">
								<span data-i18n="armor-u">ARMOR</span>
							</div>
						</div>
						<div>
							<div class="col">
								<div class="speed-defense-score">
									<input type="hidden" name="attr_speed_value" value="0" />
									<input type="number" name="attr_speed" disabled="true" value="@{speed_value}" />
								</div>
								<div class="maximum-input">
									<span data-i18n="base">Base</span>
									<input type="number" value="10" name="attr_base-speed">
								</div>
							</div>
							<div class="col">
								<div class="speed-defense-score">
									<input type="hidden" name="attr_defense_value" value="10" />
									<input type="number" name="attr_defense" disabled="true" value="@{defense_value}" />
								</div>
								<div class="maximum-input">
									<span data-i18n="shield">Shield</span>
									<input type="number" value="0" name="attr_shield-bonus">
								</div>
							</div>
							<div class="col">
								<div class="speed-defense-score">
									<input type="number" name="attr_armor" value="0">
								</div>
								<div class="maximum-input">
									<span data-i18n="Penalty">Penalty</span>
									<input type="number" name="attr_armor-penalty" value="0">
								</div>
							</div>
						</div>
					</div>
					<!-- Circles for Speed / Defense / Armor -->
					<div class="section sectionfull sdaat-container mod-selected">
						<div class="sdaat-i" data-i18n="i-for-impact" title="Impact">i</div>
						<div class="sdaat-b" data-i18n="b-for-ballistic" title="Ballistic">b</div>
						<div class="section-name sdaat-name">
							<div class="col">
								<span data-i18n="speed-u">SPEED</span>
							</div>
							<div class="col">
								<span data-i18n="defense-u">DEFENSE</span>
							</div>
							<div class="col">
								<span data-i18n="toughness-u">TOUGHNESS</span>
							</div>
							<div class="col-double">
								<span data-i18n="armor-u">ARMOR</span>
							</div>
						</div>
						<div class="sdaat-scores">
							<div class="col">
								<div class="sdaat-score">
									<input type="hidden" name="attr_speed_value" value="0" />
									<input type="number" name="attr_speed" disabled="true" value="@{speed_value}" />
								</div>
								<div class="maximum-input">
									<span data-i18n="base">Base</span>
									<input type="number" value="10" name="attr_base-speed">
								</div>
							</div>
							<div class="col">
								<div class="sdaat-score">
									<input type="hidden" name="attr_defense_value" value="10" />
									<input type="number" name="attr_defense" disabled="true" value="@{defense_value}" />
								</div>
								<div class="maximum-input">
									<span data-i18n="shield">Shield</span>
									<input type="number" value="0" name="attr_shield-bonus">
								</div>
							</div>
							<div class="col">
								<div class="sdaat-score">
									<input type="number" name="attr_toughness" value="0">
								</div>
								<div class="maximum-input">
									<select type="text" name="attr_mode">
										<option data-i18n="gritty">Gritty</option>
										<option data-i18n="pulp">Pulp</option>
										<option data-i18n="cinematic" selected=true>Cinematic</option>
									</select>
								</div>
							</div>
							<div class="col">
								<div class="sdaat-score">
									<input type="number" name="attr_armor" value="0">
								</div>
							</div>
							<div class="col">
								<div class="sdaat-score">
									<input type="number" name="attr_armor-b" value="0">
								</div>
								<div class="maximum-input">
									<span data-i18n="Penalty">Penalty</span>
									<input type="number" name="attr_armor-penalty" value="0">
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- CONDITIONS -->
				<div class="row">
					<div class="section sectionfull condition-container conditions-section">
						<div class="section-name">
							<div class="col conditions">
								<span data-i18n="conditions-u">CONDITIONS</span>
							</div>
						</div>
						<div class="col sectiononethird">
							<div class="condition-checkbox"><input type="checkbox" name="attr_blinded-condition"><span data-i18n="blinded">Blinded</span></div>
						</div>
						<div class="col sectiononethird second-gen-selected cthulhu-awakens-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_confused-condition"><span data-i18n="confused">Confused</span></div>
						</div>
						<div class="col sectiononethird">
							<div class="condition-checkbox"><input type="checkbox" name="attr_deafened-condition"><span data-i18n="deafened">Deafened</span></div>
						</div>
						<div class="col sectiononethird second-gen-selected mod-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_defenseless-condition"><span data-i18n="defenseless">Defenseless</span></div>
						</div>
						<div class="col sectiononethird the-expanse-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_dying-select"><span data-i18n="dying">Dying</span></div>
						</div>
						<div class="col sectiononethird the-expanse-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_fatigue" value="3"><span data-i18n="exhausted">Exhausted</span></div>
						</div>
						<div class="col sectiononethird the-expanse-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_fatigue" value="2"><span data-i18n="fatigued">Fatigued</span></div>
						</div>
						<div class="col sectiononethird the-expanse-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_freefalling-condition"><span data-i18n="freefalling">Free Falling</span></div>
						</div>
						<div class="col sectiononethird second-gen-selected fifth-season-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_frightened-condition"><span data-i18n="frightened">Frightened</span></div>
						</div>
						<div class="col sectiononethird">
							<div class="condition-checkbox"><input type="checkbox" name="attr_helpless-select"><span data-i18n="helpless">Helpless</span></div>
						</div>
						<div class="col sectiononethird no-cthulhu-awakens-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_hindered-select"><span data-i18n="hindered">Hindered</span></div>
						</div>
						<div class="col sectiononethird second-gen-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_influenced-condition"><span data-i18n="influenced">Influenced</span></div>
						</div>
						<div class="col sectiononethird fortune-section">
							<div class="condition-checkbox"><input type="checkbox" name="attr_injured-select"><span data-i18n="injured">Injured</span></div>
						</div>
						<div class="col sectiononethird cthulhu-awakens-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_maimed-condition"><span data-i18n="maimed">Maimed</span></div>
						</div>
						<div class="col sectiononethird">
							<div class="condition-checkbox"><input type="checkbox" name="attr_prone-select"><span data-i18n="prone">Prone</span></div>
						</div>
						<div class="col sectiononethird the-expanse-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_restrained-select"><span data-i18n="restrained">Restrained</span></div>
						</div>
						<div class="col sectiononethird second-gen-selected cthulhu-awakens-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_scarred-condition"><span data-i18n="scarred">Scarred</span></div>
						</div>
						<div class="col sectiononethird second-gen-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_slowed-condition"><span data-i18n="slowed">Slowed</span></div>
						</div>
						<div class="col sectiononethird second-gen-selected fifth-season-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_stunned-condition"><span data-i18n="stunned">Stunned</span></div>
						</div>
						<div class="col sectiononethird">
							<div class="condition-checkbox"><input type="checkbox" name="attr_unconscious-select"><span data-i18n="unconscious">Unconscious</span></div>
						</div>
						<div class="col sectiononethird fortune-section">
							<div class="condition-checkbox"><input type="checkbox" name="attr_wounded-select"><span data-i18n="wounded">Wounded</span></div>
						</div>
						<div class="col sectiontwothirds cthulhu-awakens-selected">
							<div class="condition-checkbox"><input type="checkbox" name="attr_disadvantaged-condition"><span data-i18n="general-disadvantage">General Disadvantage</span></div>
						</div>
					</div>
				</div>
				<!-- ATTACKS -->
				<div class="row">
					<div class="section sectionfull attack-container">
						<div class="section-name">
							<div class="col repeatingcol col-attack-name">
								<span data-i18n="attack-u">ATTACK</span>
							</div>
							<div class="col repeatingcol col-attack-range">
								<span data-i18n="range-u">RANGE</span>
							</div>
							<div class="col repeatingcol col-attack-reload">
								<span data-i18n="reload-u">RELOAD</span>
							</div>
							<div class="col repeatingcol col-ammo">
								<span data-i18n="#-sign">#</span>
							</div>
							<div class="col repeatingcol col-attackdice">
								<span data-i18n="roll-u">ROLL</span>
							</div>
							<div class="col repeatingcol col-attack-damage">
								<span data-i18n="damage-u">DAMAGE</span>
							</div>
						</div>
						<fieldset class="repeating_attack-list">
							<div class="col repeatingcol col-attack-name">
								<input type="text" name="attr_attack-name">
							</div>
							<div class="col repeatingcol col-attack-range">
								<input type="text" name="attr_range">
							</div>
							<div class="col repeatingcol col-attack-reload">
								<input type="text" name="attr_reload">
							</div>
							<div class="col repeatingcol col-ammo">
								<input type="number" name="attr_ammo">
							</div>
							<div class="col repeatingcol col-attackdice">
								<input type="text" name="attr_attackroll" value="+0">
								<button name="act_attackdice" type="action"></button>
							</div>
							<div class="col repeatingcol col-attack-damage">
								<input type="text" placeholder="2d6+1" name="attr_attack-damage">
								<button type="action" name="act_weapondamage"></button>
							</div>
						</fieldset>
						<div class="col-weapon-groups">
							<input type="text" data-i18n-placeholder="weapon_groups" placeholder="Weapon groups" name="attr_weapon-groups">
						</div>
					</div>
				</div>
				<!-- SHORT CLASS POWERS -->
				<div class="row">
					<div class="section sectionfull power-short-container">
						<div class="section-name">
							<div class="col repeatingcol power-short-name old-age-selected fantasy-age-core-selected">
								<span data-i18n="class-power-u">CLASS POWER</span>
							</div>
							<div class="col repeatingcol power-short-name mod-selected blue-rose-selected the-expanse-selected">
								<span data-i18n="quality-u">QUALITY</span>
							</div>
							<div class="col repeatingcol power-short-description">
								<span data-i18n="short-description-u">SHORT DESCRIPTION</span>
							</div>
						</div>
						<fieldset class="repeating_power">
							<div class="col repeatingcol power-short-name">
								<input type="text" name="attr_powername">
							</div>
							<div class="col repeatingcol power-short-description">
								<textarea name="attr_shortpowerdescription"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
				<!-- SHORT TALENTS -->
				<div class="row">
					<div class="section sectionfull talent-short-container">
						<div class="section-name">
							<div class="col repeatingcol power-short-name">
								<span data-i18n="talents-u">TALENTS</span>
							</div>
							<div class="col repeatingcol power-short-description">
								<span data-i18n="description-u">DESCRIPTION</span>
							</div>
						</div>
						<fieldset class="repeating_talent">
							<input type="hidden" class="degree-select" name="attr_talentdegree" value="1">
							<div class="col repeatingcol talent-name">
								<input type="text" name="attr_powername"> (<span data-i18n="novice-u">NOVICE</span>)
							</div>
							<div class="col repeatingcol power-short-description">
								<textarea name="attr_talent1description"></textarea>
							</div>
							<div class="col repeatingcol talent-name degree2">
								<input type="text" name="attr_powername">
								<div class="old-age-selected blue-rose-selected">
									(<span data-i18n="journeyman-u">JOURNEYMAN</span>)
								</div>
								<div class="fantasy-age-core-selected mod-selected the-expanse-selected">
									(<span data-i18n="expert-u">EXPERT</span>)
								</div>
							</div>
							<div class="col repeatingcol power-short-description degree2">
								<textarea name="attr_talent2description"></textarea>
							</div>
							<div class="col repeatingcol talent-name degree3">
								<input type="text" name="attr_powername"> (<span data-i18n="master-u">MASTER</span>)
							</div>
							<div class="col repeatingcol power-short-description degree3">
								<textarea name="attr_talent3description"></textarea>
							</div>
							<div class="col repeatingcol talent-name degree4">
								<input type="text" name="attr_powername"> (<span data-i18n="grandmaster-u">GRANDMASTER</span>)
							</div>
							<div class="col repeatingcol power-short-description degree4">
								<textarea name="attr_talent4description"></textarea>
							</div>
							<div class="col repeatingcol talent-name degree5">
								<input type="text" name="attr_powername"> (<span data-i18n="apex-u">APEX</span>)
							</div>
							<div class="col repeatingcol power-short-description degree5">
								<textarea name="attr_talent5description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
				<!-- SHORT SPELLS -->
				<div class="row">
					<div class="spell-short-divtohide">
						<div class="section sectionfull spell-short-container old-age-selected fantasy-age-core-selected">
							<div class="section-name">
								<div class="col repeatingcol spell-short-name">
									<span data-i18n="spell-name-u">SPELL NAME</span>
								</div>
								<div class="col repeatingcol spell-short-description">
									<span data-i18n="short-description-u">SHORT DESCRIPTION</span>
								</div>
							</div>
							<fieldset class="repeating_spell">
								<input type="hidden" name="attr_spell-name">
								<input type="hidden" name="attr_spell-focus-bonus" value="0">
								<input type="hidden" name="attr_spell-tn">
								<input type="hidden" name="attr_spell-spellpower">
								<div class="col repeatingcol spell-short-name">
									<button class="spell-magic-buttons" name="act_main-spell-check" type="action"><span name="attr_spell-name"></span></button>
								</div>
								<div class="col repeatingcol spell-short-description">
									<textarea name="attr_short-spell-description"></textarea>
								</div>
							</fieldset>
						</div>
						<div class="section sectionfull spell-short-container blue-rose-selected">
							<div class="section-name">
								<div class="col repeatingcol spell-short-name">
									<span data-i18n="arcanum-name-u">ARCANUM NAME</span>
								</div>
								<div class="col repeatingcol spell-short-description">
									<span data-i18n="short-description-u">SHORT DESCRIPTION</span>
								</div>
							</div>
							<fieldset class="repeating_spell">
								<input type="hidden" name="attr_spell-name">
								<input type="hidden" name="attr_spell-ability">
								<input type="hidden" name="attr_spell-focus-bonus" value="0">
								<input type="hidden" name="attr_spell-tn">
								<input type="hidden" name="attr_spell-fatigue">
								<div class="col repeatingcol spell-short-name">
									<button class="spell-magic-buttons" name="act_alternate-spell-check" type="action"><span name="attr_spell-name"></span></button>
								</div>
								<div class="col repeatingcol spell-short-description">
									<textarea name="attr_short-spell-description"></textarea>
								</div>
							</fieldset>
						</div>
						<div class="section sectionfull spell-short-container modern-age-selected">
							<div class="section-name">
								<div class="col repeatingcol spell-short-name"><span data-i18n="extraordinary-u">EXTRAORDINARY</span></div>
								<div class="col repeatingcol spell-short-description">
									<span data-i18n="short-description-u">SHORT DESCRIPTION</span>
								</div>
							</div>
							<fieldset class="repeating_spell">
								<input type="hidden" name="attr_spell-name">
								<input type="hidden" name="attr_spell-ability">
								<input type="hidden" name="attr_spell-focus-bonus" value="0">
								<input type="hidden" name="attr_spell-tn">
								<input type="hidden" name="attr_spell-fatigue">
								<input type="hidden" name="attr_spell-mp-cost">
								<input type="checkbox" class="hiddencheckbox spell-method-uses-fatigue" name="attr_spell-method" value="fatigue">
								<input type="checkbox" class="hiddencheckbox spell-method-uses-points" name="attr_spell-method" value="points">
								<div class="col repeatingcol spell-short-name">
									<button class="spell-magic-buttons spell-uses-fatigue" name="act_alternate-spell-check" type="action"><span name="attr_spell-name"></span></button>
									<button class="spell-magic-buttons spell-uses-points" name="act_main-spell-check" type="action"><span name="attr_spell-name"></span></button>
								</div>
								<div class="col repeatingcol spell-short-description"> <textarea name="attr_short-spell-description"></textarea> </div>
							</fieldset>
						</div>
						<div class="section sectionfull spell-short-container threefold-selected">
							<div class="section-name">
								<div class="col repeatingcol spell-short-name"><span data-i18n="arcana/psychic-u">ARCANA/PSYCHIC</span></div>
								<div class="col repeatingcol spell-short-description">
									<span data-i18n="short-description-u">SHORT DESCRIPTION</span>
								</div>
							</div>
							<fieldset class="repeating_spell">
								<input type="hidden" name="attr_spell-name">
								<input type="hidden" name="attr_spell-ability">
								<input type="hidden" name="attr_spell-focus-bonus" value="0">
								<input type="hidden" name="attr_spell-tn">
								<input type="hidden" name="attr_spell-fatigue">
								<input type="hidden" name="attr_spell-mp-cost">
								<input type="checkbox" class="hiddencheckbox spell-method-uses-fatigue" name="attr_spell-method" value="fatigue">
								<input type="checkbox" class="hiddencheckbox spell-method-uses-points" name="attr_spell-method" value="points">
								<div class="col repeatingcol spell-short-name">
									<button class="spell-magic-buttons spell-uses-fatigue" name="act_alternate-spell-check" type="action"><span name="attr_spell-name"></span></button>
									<button class="spell-magic-buttons spell-uses-points" name="act_main-spell-check" type="action"><span name="attr_spell-name"></span></button>
								</div>
								<div class="col repeatingcol spell-short-description"><textarea name="attr_short-spell-description"></textarea></div>
							</fieldset>
						</div>
						<div class="section sectionfull spell-short-container cthulhu-awakens-selected">
							<div class="section-name">
								<div class="col repeatingcol spell-short-name">
									<span data-i18n="psychic-discipline-u">PSYCHIC DISCIPLINE</span>
								</div>
								<div class="col repeatingcol spell-short-description">
									<span data-i18n="short-description-u">SHORT DESCRIPTION</span>
								</div>
							</div>
							<fieldset class="repeating_spell">
								<input type="hidden" name="attr_spell-name">
								<input type="hidden" name="attr_spell-ability">
								<input type="hidden" name="attr_spell-focus-bonus" value="0">
								<input type="hidden" name="attr_spell-tn">
								<input type="hidden" name="attr_spell-fatigue">
								<div class="col repeatingcol spell-short-name">
									<button class="spell-magic-buttons" name="act_alternate-spell-check" type="action"><span name="attr_spell-name"></span></button>
								</div>
								<div class="col repeatingcol spell-short-description">
									<textarea name="attr_short-spell-description"></textarea>
								</div>
							</fieldset>
						</div>
					</div>
				</div>
				<!-- EQUIPMENT -->
				<div class="row">
					<div class="section sectionfull equipment-section">
						<div class="section-name">
							<div class="col repeatingcol equipment-name">
								<span data-i18n="equipment-name-u">EQUIPMENT NAME</span>
							</div>
							<div class="col repeatingcol equipment-quantity">
								<span data-i18n="quantity-u">QUANTITY</span>
							</div>
							<div class="col repeatingcol equipment-description">
								<span data-i18n="description-u">DESCRIPTION</span>
							</div>
						</div>
						<fieldset class="repeating_equipment">
							<div class="col repeatingcol equipment-name">
								<input type="text" name="attr_equipment-name">
							</div>
							<div class="col repeatingcol equipment-quantity">
								<input type="text" name="attr_equipment-quantity">
							</div>
							<div class="col repeatingcol equipment-description">
								<textarea name="attr_equipment-description"></textarea>
							</div>
						</fieldset>
						<div class="legacy-money-section">
							<div>
								<div class="money-score">
									<input type="number" data-i18n-placeholder="cp-u" data-i18n-title="cp-u" name="attr_cp" placeholder="CP" data-i18n="cp-u" title="CP">
								</div>
								<div class="money-score">
									<input type="number" name="attr_sp" data-i18n-placeholder="sp-u" data-i18n-title="sp-u" placeholder="SP" data-i18n="sp-u" title="SP">
								</div>
								<div class="money-score">
									<input type="number" name="attr_gp" data-i18n-placeholder="gp-u" data-i18n-title="gp-u" placeholder="GP" data-i18n="gp-u" title="GP">
								</div>
							</div>
							<div class="section-name">
								<button type="action" class="legacy-money-import-button" title="You have gold, silver, and copper from the original money system. Click this to import your coins into the new currency system" name="act_legacymoneyimport">
									<span data-i18n="import-to-currency-u">IMPORT TO CURRENCY</span>
								</button>
							</div>
						</div>
						<!-- <div class="section sectionfull resource-section">
								<div class="col repeatingcol col-income-text">
									<span class="money-label">Base Income:</span>
								</div>
								<div class="col repeatingcol col-income-num">
									<input class="income-score" type="number" name="attr_base_income" placeholder="0" title="Base Income">
								</div>
								<div class="col repeatingcol col-income-text">
									<span class="money-label">Current Income:</span>
								</div>
								<div class="col repeatingcol col-income-num">
									<input class="income-score" type="number" name="attr_income" placeholder="0" title="Current Income">
								</div>
								<div class="col repeatingcol">
									<button class="abilities-buttons" data-i18n="income-u" name="act_income_check" type="action">INCOME</button>
								</div>
						</div> -->
					</div>
				</div>
				<!-- MONEY -->
				<div class="row">
					<div class="money-section">
						<div class="section sectionfull money-repeats">
							<div class="section-name">
								<span data-i18n="currency-u">CURRENCY</span>
							</div>
							<fieldset class="repeating_money">
								<div class="money-container">
									<div class="money-score"><input type="text" name="attr_moneyamount"></div>
									<div class="money-name"> <input type="text" name="attr_moneyname"></div>
								</div>
							</fieldset>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- PERSONA TAB -->
	<div class="page tab2">
		<div class="body">
			<input type="hidden" class="personalock" name="attr_persona-labels" value="locked" />
			<div class="col left-persona">
				<div class="section persona-section">
					<div class="section-name persona-section-name personalocked">
						<span data-i18n="goals-u">GOALS</span>
					</div>
					<div class="section-name persona-section-name personaunlocked">
						<input type="text" name="attr_goals_title" value="GOALS?">
					</div>
					<div class="textbox">
						<textarea name="attr_goals" style="min-height: 300px; height: 300px;"></textarea>
					</div>
				</div>
				<div class="section persona-section">
					<div class="section-name persona-section-name personalocked">
						<span data-i18n="honorifics-titles-and-memberships-u">HONORIFICS, TITLES AND MEMBERSHIPS</span>
					</div>
					<div class="section-name persona-section-name personaunlocked">
						<input type="text" name="attr_honorifics_titles_and_memberships_title" value="HONORIFICS, TITLES AND MEMBERSHIPS?">
					</div>
					<div class="textbox">
						<textarea name="attr_honorifics_titles_and_memberships" style="min-height: 250px; height: 250px;"></textarea>
					</div>
				</div>
			</div>
			<div class="col right-persona">
				<div class="section persona-section">
					<div class="section-name persona-section-name personalocked">
						<div class="cthulhu-awakens-selected">
							<span data-i18n="bonds-u">BONDS</span>
						</div>
						<div class="no-cthulhu-awakens-selected">
							<span data-i18n="relationships-u">RELATIONSHIPS</span>
						</div>

					</div>
					<div class="section-name persona-section-name personaunlocked">
						<input type="text" name="attr_relationships_title" value="RELATIONSHIPS?">
					</div>
					<div class="textbox">
						<textarea name="attr_relationships" style="min-height: 300px; height: 300px;"></textarea>
					</div>
				</div>
				<div class="section persona-section">
					<div class="section-name persona-section-name personalocked">
						<span data-i18n="character-appearance-u">CHARACTER APPEARANCE</span>
					</div>
					<div class="section-name persona-section-name personaunlocked">
						<input type="text" name="attr_character_appearance_title" value="CHARACTER APPEARANCE?">
					</div>
					<div class="textbox">
						<textarea name="attr_character_appearance" style="min-height: 250px; height: 250px;"></textarea>
					</div>
				</div>
			</div>
			<div class="col section persona-section">
				<div class="section persona-section">
					<div class="section-name persona-section-name personalocked">
						<span data-i18n="char-notes-u">CHARACTER NOTES</span>
					</div>
					<div class="section-name persona-section-name personaunlocked">
						<input type="text" name="attr_character_notes_title" value="CHARACTER NOTES?">
					</div>
					<div class="textbox">
						<textarea name="attr_character_notes" style="min-height: 200px; height: 200px;"></textarea>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- CLASS POWERS TAB -->
	<div class="page tab3">
		<div class="body">
			<div class="power-container">
				<fieldset class="repeating_power">
					<div class="section-name power-section-name">
						<input type="text" data-i18n-placeholder="ancestry_class_power_name" placeholder="Ancestry or Class Power name" name="attr_powername">
					</div>
					<div class="power-stats">
						<div class="row row-power-type-source">
							<div class="col col1">
								<span data-i18n="type-or-level:-u">TYPE OR LEVEL:</span>
								<input type="text" name="attr_powertype">
							</div>
							<div class="col col1">
								<span data-i18n="SOURCE:-u">SOURCE:</span>
								<input type="text" name="attr_powersource">
							</div>
						</div>
						<div class="row row-shortpowerdescription">
							<span data-i18n="short-desc.:-u">SHORT DESC.:</span>
							<textarea name="attr_shortpowerdescription"></textarea>
						</div>
						<div class="row row-fullpowerdescription">
							<span data-i18n="description:-u">DESCRIPTION:</span>
							<textarea name="attr_fullpowerdescription"></textarea>
						</div>
					</div>
				</fieldset>
			</div>
		</div>
	</div>

	<!-- TALENTS TAB -->
	<div class="page tab4">
		<div class="body">
			<div class="talent-container">
				<fieldset class="repeating_talent">
					<div class="section-name talent-section-name">
						<input type="text" data-i18n-placeholder="talent_spec_name" placeholder="Talent or Specialization name" name="attr_powername">
					</div>
					<div class="talent-stats">
						<input type="hidden" class="degree-select" name="attr_talentdegree" value="1">
						<input type="checkbox" class="hiddencheckbox degreecheckbox" name="attr_aftermasterycheckbox" unchecked>
						<div class="row row-talent-degree-source">
							<div class="col col1">
								<div class="old-age-selected blue-rose-selected">
									<span data-i18n="specialization1-degree-u">DEGREE</span><span>: </span>
									<select class="degree-select" name="attr_talentdegree" title="How far have you progressed in this Talent or Specialization?">
										<option value="1" data-i18n="novice-u">NOVICE</option>
										<option value="2" data-i18n="journeyman-u">JOURNEYMAN</option>
										<option value="3" data-i18n="master-u">MASTER</option>
									</select>
								</div>
								<div class="fantasy-age-core-selected the-expanse-selected">
									<span data-i18n="specialization1-degree-u">DEGREE</span><span>: </span>
									<select class="degree-select" name="attr_talentdegree" title="How far have you progressed in this Talent or Specialization?">
										<option value="1" data-i18n="novice-u">NOVICE</option>
										<option value="2" data-i18n="expert-u">EXPERT</option>
										<option value="3" data-i18n="master-u">MASTER</option>
									</select>
								</div>
								<div class="mod-selected">
									<span data-i18n="specialization1-degree-u">DEGREE</span><span>: </span>
									<select class="degree-select justthree" name="attr_talentdegree" title="How far have you progressed in this Talent or Specialization?">
										<option value="1" data-i18n="novice-u">NOVICE</option>
										<option value="2" data-i18n="expert-u">EXPERT</option>
										<option value="3" data-i18n="master-u">MASTER</option>
									</select>
									<select class="degree-select aftermastery" name="attr_talentdegree" title="How far have you progressed in this Talent or Specialization?">
										<option value="1" data-i18n="novice-u">NOVICE</option>
										<option value="2" data-i18n="expert-u">EXPERT</option>
										<option value="3" data-i18n="master-u">MASTER</option>
										<option value="4" data-i18n="grandmaster-u">GRANDMASTER</option>
										<option value="5" data-i18n="apex-u">APEX</option>
									</select>
									<span>+2</span>
									<input type="checkbox" class="degreecheckbox" name="attr_aftermasterycheckbox" unchecked>
								</div>
							</div>
							<div class="col col1">
								<span data-i18n="SOURCE:-u">SOURCE:</span>
								<input type="text" name="attr_talentsource">
							</div>
						</div>
						<div class="row row-shortpowerdescription">
							<span data-i18n="description:-u">DESCRIPTION:</span>
							<textarea name="attr_talentdescription"></textarea>
						</div>
						<div class="row row-fullpowerdescription">
							<div class="col sectiononethird">
								<span data-i18n="novice-u">NOVICE</span><span>:</span>
								<textarea name="attr_talent1description"></textarea>
							</div>
							<div class="col sectiononethird">
								<div class="degree2 old-age-selected blue-rose-selected"><span data-i18n="journeyman-u">JOURNEYMAN</span><span>:</span></div>
								<div class="degree2 fantasy-age-core-selected mod-selected the-expanse-selected"><span data-i18n="expert-u">EXPERT</span><span>:</span></div>
								<textarea class="degree2" name="attr_talent2description"></textarea>
							</div>
							<div class="col sectiononethird">
								<span class="degree3" data-i18n="master-u">MASTER</span><span class="degree3">:</span>
								<textarea class="degree3" name="attr_talent3description"></textarea>
							</div>
							<div class="aftermastery">
								<div class="col sectiononethird">
									<span class="degree4" data-i18n="grandmaster-u">GRANDMASTER</span><span class="degree4">:</span>
									<textarea class="degree4" name="attr_talent4description"></textarea>
								</div>
								<div class="col sectiononethird">
									<span class="degree5" data-i18n="apex-u">APEX</span><span class="degree5">:</span>
									<textarea class="degree5" name="attr_talent5description"></textarea>
								</div>
							</div>
						</div>
					</div>
				</fieldset>
			</div>
		</div>
	</div>

	<!-- FOCUSES TAB -->
	<div class="page tab5">
		<div class="body">
			<div class="col">
				<div class="focus-section second-gen-selected the-expanse-selected mod-selected ability-accuracy">
					<div class="section-name focus-section-name">
						<span data-i18n="accuracy-u">ACCURACY</span>
					</div>
					<div class="focus-container">
						<fieldset class="repeating_accuracy-focus">
							<div class="row">
								<span data-i18n="focus:-u">FOCUS:</span>
								<input type="text" title="Focus name" name="attr_focusname">
								<input type="number" data-i18n-title="focus_bonus_title" title="Focus bonus (0, 2, 3, etc.)" name="attr_focusbonus" value="2">
								<button class="focus-buttons" name="act_focus-check" type="action"></button>
							</div>
							<div class="row">
								<textarea name="attr_focusdescription" data-i18n-placeholder="description" placeholder="Description" title="Description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
				<div class="focus-section ability-communication">
					<div class="section-name focus-section-name">
						<span data-i18n="communication-u">COMMUNICATION</span>
					</div>
					<div class="focus-container">
						<fieldset class="repeating_communication-focus">
							<div class="row">
								<span data-i18n="focus:-u">FOCUS:</span>
								<input type="text" title="Focus name" name="attr_focusname">
								<input type="number" data-i18n-title="focus_bonus_title" title="Focus bonus (0, 2, 3, etc.)" value="2" name="attr_focusbonus">
								<button class="focus-buttons" name="act_focus-check" type="action"></button>
							</div>
							<div class="row">
								<textarea name="attr_focusdescription" data-i18n-placeholder="description" placeholder="Description" title="Description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
				<div class="focus-section">
					<div class="section-name focus-section-name ability-constitution">
						<span data-i18n="constitution-u">CONSTITUTION</span>
					</div>
					<div class="focus-container">
						<fieldset class="repeating_constitution-focus">
							<div class="row">
								<span data-i18n="focus:-u">FOCUS:</span>
								<input type="text" title="Focus name" name="attr_focusname">
								<input type="number" data-i18n-title="focus_bonus_title" title="Focus bonus (0, 2, 3, etc.)" value="2" name="attr_focusbonus">
								<button class="focus-buttons" name="act_focus-check" type="action"></button>
							</div>
							<div class="row">
								<textarea name="attr_focusdescription" data-i18n-placeholder="description" placeholder="Description" title="Description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
				<div class="focus-section dragon-age-selected ability-cunning">
					<div class="section-name focus-section-name">
						<span data-i18n="cunning-u">CUNNING</span>
					</div>
					<div class="focus-container">
						<fieldset class="repeating_cunning-focus">
							<div class="row">
								<span data-i18n="focus:-u">FOCUS:</span>
								<input type="text" title="Focus name" name="attr_focusname">
								<input type="number" data-i18n-title="focus_bonus_title" title="Focus bonus (0, 2, 3, etc.)" value="2" name="attr_focusbonus">
								<button class="focus-buttons" name="act_focus-check" type="action"></button>
							</div>
							<div class="row">
								<textarea name="attr_focusdescription" data-i18n-placeholder="description" placeholder="Description" title="Description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
			</div>
			<div class="col">
				<div class="focus-section ability-dexterity">
					<div class="section-name focus-section-name">
						<span data-i18n="dexterity-u">DEXTERITY</span>
					</div>
					<div class="focus-container">
						<div class="initiative-focus">
							<span data-i18n="focus:-u">FOCUS:</span>  <span class="focusnamespan" data-i18n="initiative">Initiative</span>
							<input type="number" data-i18n-title="initiative_adjustment" value="0" name="attr_init-bonus">
							<button class="focus-buttons" name="act_initiative_check" type="action"></button>
							<span data-i18n="initiative_description"></span>
						</div>
						<fieldset class="repeating_dexterity-focus">
							<div class="row">
								<span data-i18n="focus:-u">FOCUS:</span>
								<input type="text" title="Focus name" name="attr_focusname">
								<input type="number" data-i18n-title="focus_bonus_title" title="Focus bonus (0, 2, 3, etc.)" value="2" name="attr_focusbonus">
								<button class="focus-buttons" name="act_focus-check" type="action"></button>
							</div>
							<div class="row">
								<textarea name="attr_focusdescription" data-i18n-placeholder="description" placeholder="Description" title="Description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
				<div class="focus-section second-gen-selected the-expanse-selected mod-selected ability-fighting">
					<div class="section-name focus-section-name">
						<span data-i18n="fighting-u">FIGHTING</span>
					</div>
					<div class="focus-container">
						<fieldset class="repeating_fighting-focus">
							<div class="row">
								<span data-i18n="focus:-u">FOCUS:</span>
								<input type="text" title="Focus name" name="attr_focusname">
								<input type="number" data-i18n-title="focus_bonus_title" title="Focus bonus (0, 2, 3, etc.)" value="2" name="attr_focusbonus">
								<button class="focus-buttons" name="act_focus-check" type="action"></button>
							</div>
							<div class="row">
								<textarea name="attr_focusdescription" data-i18n-placeholder="description" placeholder="Description" title="Description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
				<div class="focus-section second-gen-selected the-expanse-selected mod-selected ability-intelligence">
					<div class="section-name focus-section-name">
						<span data-i18n="intelligence-u">INTELLIGENCE</span>
					</div>
					<div class="focus-container">
						<fieldset class="repeating_intelligence-focus">
							<div class="row">
								<span data-i18n="focus:-u">FOCUS:</span>
								<input type="text" title="Focus name" name="attr_focusname">
								<input type="number" data-i18n-title="focus_bonus_title" title="Focus bonus (0, 2, 3, etc.)" value="2" name="attr_focusbonus">
								<button class="focus-buttons" name="act_focus-check" type="action"></button>
							</div>
							<div class="row">
								<textarea name="attr_focusdescription" data-i18n-placeholder="description" placeholder="Description" title="Description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
				<div class="focus-section dragon-age-selected ability-magic">
					<div class="section-name focus-section-name">
						<span data-i18n="magic-u">MAGIC</span>
					</div>
					<div class="focus-container">
						<fieldset class="repeating_magic-focus">
							<div class="row">
								<span data-i18n="focus:-u">FOCUS:</span>
								<input type="text" title="Focus name" name="attr_focusname">
								<input type="number" data-i18n-title="focus_bonus_title" title="Focus bonus (0, 2, 3, etc.)" value="2" name="attr_focusbonus">
								<button class="focus-buttons" name="act_focus-check" type="action"></button>
							</div>
							<div class="row">
								<textarea name="attr_focusdescription" data-i18n-placeholder="description" placeholder="Description" title="Description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
				<div class="focus-section dragon-age-selected ability-perception">
					<div class="section-name focus-section-name">
						<span data-i18n="perception-u">PERCEPTION</span>
					</div>
					<div class="focus-container">
						<fieldset class="repeating_perception-focus">
							<div class="row">
								<span data-i18n="focus:-u">FOCUS:</span>
								<input type="text" title="Focus name" name="attr_focusname">
								<input type="number" data-i18n-title="focus_bonus_title" title="Focus bonus (0, 2, 3, etc.)" value="2" name="attr_focusbonus">
								<button class="focus-buttons" name="act_focus-check" type="action"></button>
							</div>
							<div class="row">
								<textarea name="attr_focusdescription" data-i18n-placeholder="description" placeholder="Description" title="Description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
			</div>
			<div class="col">
				<div class="focus-section second-gen-selected the-expanse-selected mod-selected ability-perception">
					<div class="section-name focus-section-name">
						<span data-i18n="perception-u">PERCEPTION</span>
					</div>
					<div class="focus-container">
						<fieldset class="repeating_perception-focus">
							<div class="row">
								<span data-i18n="focus:-u">FOCUS:</span>
								<input type="text" title="Focus name" name="attr_focusname">
								<input type="number" data-i18n-title="focus_bonus_title" title="Focus bonus (0, 2, 3, etc.)" value="2" name="attr_focusbonus">
								<button class="focus-buttons" name="act_focus-check" type="action"></button>
							</div>
							<div class="row">
								<textarea name="attr_focusdescription" data-i18n-placeholder="description" placeholder="Description" title="Description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
				<div class="focus-section ability-strength">
					<div class="section-name focus-section-name">
						<span data-i18n="strength-u">STRENGTH</span>
					</div>
					<div class="focus-container">
						<fieldset class="repeating_strength-focus">
							<div class="row">
								<span data-i18n="focus:-u">FOCUS:</span>
								<input type="text" title="Focus name" name="attr_focusname">
								<input type="number" data-i18n-title="focus_bonus_title" title="Focus bonus (0, 2, 3, etc.)" value="2" name="attr_focusbonus">
								<button class="focus-buttons" name="act_focus-check" type="action"></button>
							</div>
							<div class="row">
								<textarea name="attr_focusdescription" data-i18n-placeholder="description" placeholder="Description" title="Description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
				<div class="focus-section ability-willpower">
					<div class="section-name focus-section-name">
						<span data-i18n="willpower-u">WILLPOWER</span>
					</div>
					<div class="focus-container">
						<fieldset class="repeating_willpower-focus">
							<div class="row">
								<span data-i18n="focus:-u">FOCUS:</span>
								<input type="text" title="Focus name" name="attr_focusname">
								<input type="number" data-i18n-title="focus_bonus_title" title="Focus bonus (0, 2, 3, etc.)" value="2" name="attr_focusbonus">
								<button class="focus-buttons" name="act_focus-check" type="action"></button>
							</div>
							<div class="row">
								<textarea name="attr_focusdescription" data-i18n-placeholder="description" placeholder="Description" title="Description"></textarea>
							</div>
						</fieldset>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- SPELLS TAB -->
	<div class="page tab6">
		<div class="body">
			<div class="spell-container dragon-age-selected">
				<fieldset class="repeating_spell">
					<div class="section-name spell-section-name">
						<input type="text" placeholder="Name" name="attr_spell-name">
					</div>
					<div class="spell-stats">
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row row-spell-school">
									<span data-i18n="school:-u">SCHOOL:</span>
								</div>
								<div class="row">
									<span data-i18n="type:-u">TYPE:</span>
								</div>
								<div class="row">
									<span data-i18n="mana-cost:-u">MANA COST:</span>
								</div>
							</div>
							<div class="col">
								<div class="row row-spell-school">
									<input type="text" name="attr_spell-school">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-type">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-mp-cost">
								</div>
							</div>
						</div>
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row">
									<span data-i18n="cast-time:-u">CAST TIME:</span>
								</div>
								<div class="row">
									<span data-i18n="test-tn:-u">TEST TN:</span>
								</div>
								<div class="row">
									<span data-i18n="test:-u">TEST:</span>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<input type="text" name="attr_spell-cast-time">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-tn">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-test">
								</div>
							</div>
						</div>
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row">
									<span data-i18n="spellpower:-u">SPELLPOWER:</span>
								</div>
								<div class="row">
									<span data-i18n="focus-bonus:-u">FOCUS BONUS:</span>
								</div>
								<div class="row">
									<span data-i18n="cast-spell:-u">CAST SPELL:</span>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<input type="text" name="attr_spell-spellpower">
								</div>
								<div class="row">
									<input type="number" value="0" name="attr_spell-focus-bonus">
								</div>
								<div class="row">
									<button class="spell-magic-buttons" name="act_main-spell-check" type="action"></button>
								</div>
							</div>
						</div>
					</div>
					<div class="spell-descriptions">
						<div class="row row-short-spell-description">
							<span data-i18n="short-desc.:-u">SHORT DESC.:</span>
							<textarea name="attr_short-spell-description"></textarea>
						</div>
						<div class="row row-full-spell-description">
							<span data-i18n="description:-u">DESCRIPTION:</span>
							<textarea name="attr_full-spell-description"></textarea>
						</div>
					</div>
				</fieldset>
			</div>
			<div class="spell-container fantasy-age-selected fantasy-age-core-selected titansgrave-selected">
				<fieldset class="repeating_spell">
					<div class="section-name spell-section-name">
						<input type="text" placeholder="Name" name="attr_spell-name">
					</div>
					<div class="spell-stats">
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row row-spell-school">
									<span data-i18n="arcana:-u">ARCANA:</span>
								</div>
								<div class="row">
									<span data-i18n="type:-u">TYPE:</span>
								</div>
								<div class="row">
									<span data-i18n="mp-cost:-u">MP COST:</span>
								</div>
							</div>
							<div class="col">
								<div class="row row-spell-school">
									<input type="text" name="attr_spell-school">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-type">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-mp-cost">
								</div>
							</div>
						</div>
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row">
									<span data-i18n="cast-time:-u">CAST TIME:</span>
								</div>
								<div class="row">
									<span data-i18n="test-tn:-u">TEST TN:</span>
								</div>
								<div class="row">
									<span data-i18n="test:-u">TEST:</span>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<input type="text" name="attr_spell-cast-time">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-tn">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-test">
								</div>
							</div>
						</div>
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row">
									<span data-i18n="spellpower:-u">SPELLPOWER:</span>
								</div>
								<div class="row">
									<span data-i18n="focus-bonus:-u">FOCUS BONUS:</span>
								</div>
								<div class="row">
									<span data-i18n="cast-spell:-u">CAST SPELL:</span>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<input type="text" name="attr_spell-spellpower">
								</div>
								<div class="row">
									<input type="number" value="0" name="attr_spell-focus-bonus">
								</div>
								<div class="row">
									<button class="spell-magic-buttons" name="act_main-spell-check" type="action"></button>
								</div>
							</div>
						</div>
					</div>
					<div class="spell-descriptions">
						<div class="row row-short-spell-description">
							<span data-i18n="short-desc.:-u">SHORT DESC.:</span>
							<textarea name="attr_short-spell-description"></textarea>
						</div>
						<div class="row row-full-spell-description">
							<span data-i18n="description:-u">DESCRIPTION:</span>
							<textarea name="attr_full-spell-description"></textarea>
						</div>
					</div>
				</fieldset>
			</div>
			<div class="spell-container blue-rose-selected">
				<fieldset class="repeating_spell">
					<div class="section-name spell-section-name">
						<input type="text" placeholder="Name" name="attr_spell-name">
					</div>
					<div class="spell-stats">
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row row-spell-talent">
									<span data-i18n="talent:-u">TALENT:</span>
								</div>
								<div class="row">
									<span data-i18n="time:-u">TIME:</span>
								</div>
								<div class="row">
									<span data-i18n="test-tn:-u">TEST TN:</span>
								</div>
							</div>
							<div class="col">
								<div class="row row-spell-talent">
									<input type="text" name="attr_spell-talent">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-time">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-tn">
								</div>
							</div>
						</div>
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row">
									<span data-i18n="test:-u">TEST:</span>
								</div>
								<div class="row">
									<span data-i18n="resistance:-u">RESISTANCE:</span>
								</div>
								<div class="row">
									<span data-i18n="fatigue-tn:-u">FATIGUE TN:</span>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<input type="text" name="attr_spell-test">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-resistance">
								</div>
								<div class="row">
									<span class="spell-uses-fatigue">
										<input type="text" name="attr_spell-fatigue">
										<button class="spell-magic-buttons" name="act_fatigue-check" type="action"></button>
									</span>
								</div>
							</div>
						</div>
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row">
									<span data-i18n="ability:-u">ABILITY:</span>
								</div>
								<div class="row">
									<span data-i18n="focus-bonus:-u">FOCUS BONUS:</span>
								</div>
								<div class="row">
									<span data-i18n="cast-spell:-u">CAST SPELL:</span>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<select class="spell-ability" name="attr_spell-ability">
										<option value="communication" data-i18n="communication">Communication</option>
										<option value="intelligence" data-i18n="intelligence">Intelligence</option>
										<option value="perception" data-i18n="perception">Perception</option>
										<option value="willpower" data-i18n="willpower">Willpower</option>
									</select>
								</div>
								<div class="row">
									<input type="number" value="0" name="attr_spell-focus-bonus">
								</div>
								<div class="row">
									<button class="spell-magic-buttons" name="act_alternate-spell-check" type="action"></button>
								</div>
							</div>
						</div>
					</div>
					<div class="spell-descriptions">
						<div class="row row-short-spell-description">
							<span data-i18n="short-desc.:-u">SHORT DESC.:</span>
							<textarea name="attr_short-spell-description"></textarea>
						</div>
						<div class="row row-full-spell-description">
							<span data-i18n="description:-u">DESCRIPTION:</span>
							<textarea name="attr_full-spell-description"></textarea>
						</div>
					</div>
				</fieldset>
			</div>
			<div class="spell-container cthulhu-awakens-selected">
				<fieldset class="repeating_spell">
					<div class="section-name spell-section-name">
						<input type="text" placeholder="Name" name="attr_spell-name">
					</div>
					<div class="spell-stats">
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row row-spell-talent">
									<span data-i18n="discipline:-u">DISCIPLINE:</span>
								</div>
								<div class="row">
									<span data-i18n="type:-u">TYPE:</span>
								</div>
								<div class="row">
									<span data-i18n="test-tn:-u">TEST TN:</span>
								</div>
							</div>
							<div class="col">
								<div class="row row-spell-talent">
									<input type="text" name="attr_spell-talent">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-type">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-tn">
								</div>
							</div>
						</div>
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row">
									<span data-i18n="time:-u">TIME:</span>
								</div>
								<div class="row">
									<span data-i18n="resistance:-u">RESISTANCE:</span>
								</div>
								<div class="row">
									<span data-i18n="price-tn:-u">PRICE TN:</span>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<input type="text" name="attr_spell-time">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-resistance">
								</div>
                <!-- TODO Can we delete the next div? CA doesn't seem to use fatigue, or is it PRICE TN? -->
								<div class="row">
									<span class="spell-uses-fatigue">
										<input type="text" name="attr_spell-fatigue">
										<button class="spell-magic-buttons" name="act_fatigue-check" type="action"></button>
									</span>
								</div>
							</div>
						</div>
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row">
									<span data-i18n="psych-force:-u">PSYCH FORCE:</span>
								</div>
								<div class="row">
									<span data-i18n="focus-bonus:-u">FOCUS BONUS:</span>
								</div>
								<div class="row">
									<span data-i18n="cast-spell:-u">CAST SPELL:</span>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<input type="text" name="attr_spell-spellpower">
								</div>
								<div class="row">
									<input type="number" value="0" name="attr_spell-focus-bonus">
								</div>
								<div class="row">
									<button class="spell-magic-buttons" name="act_alternate-spell-check" type="action"></button>
								</div>
							</div>
						</div>
					</div>
					<div class="spell-descriptions">
						<div class="row row-short-spell-description">
							<span data-i18n="short-desc.:-u">SHORT DESC.:</span>
							<textarea name="attr_short-spell-description"></textarea>
						</div>
						<div class="row row-full-spell-description">
							<span data-i18n="description:-u">DESCRIPTION:</span>
							<textarea name="attr_full-spell-description"></textarea>
						</div>
					</div>
				</fieldset>
			</div>
			<div class="spell-container modern-age-selected">
				<fieldset class="repeating_spell">
					<input type="checkbox" value="points" name="attr_spell-method" class="hiddencheckbox spell-method-uses-points">
					<input type="checkbox" value="fatigue" name="attr_spell-method" class="hiddencheckbox spell-method-uses-fatigue">
					<div class="section-name spell-section-name">
						<input type="text" placeholder="Name" name="attr_spell-name">
						<select class="spell-method" name="attr_spell-method">
							<option value="points" data-i18n="power-points">Power Points</option>
							<option value="fatigue" data-i18n="fatigue">Fatigue</option>
						</select>
					</div>
					<div class="spell-stats">
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row row-spell-talent">
									<span data-i18n="talent:-u">TALENT:</span>
								</div>
								<div class="row">
									<span data-i18n="time:-u">TIME:</span>
								</div>
								<div class="row">
									<span data-i18n="test-tn:-u">TEST TN:</span>
								</div>
							</div>
							<div class="col">
								<div class="row row-spell-talent">
									<input type="text" name="attr_spell-talent">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-time">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-tn">
								</div>
							</div>
						</div>
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row">
									<span data-i18n="test:-u">TEST:</span>
								</div>
								<div class="row">
									<span data-i18n="resistance:-u">RESISTANCE:</span>
								</div>
								<div class="row">
									<span class="spell-uses-fatigue" data-i18n="fatigue-tn:-u">FATIGUE TN:</span>
									<span class="spell-uses-points" data-i18n="power-cost:-u">POWER COST:</span>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<input type="text" name="attr_spell-test">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-resistance">
								</div>
								<div class="row">
									<span class="spell-uses-fatigue">
										<input type="text" name="attr_spell-fatigue">
										<button class="spell-magic-buttons" name="act_fatigue-check" type="action"></button>
									</span>
									<span class="spell-uses-points">
										<input type="text" name="attr_spell-mp-cost">
									</span>
								</div>
							</div>
						</div>
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row">
									<span data-i18n="ability:-u">ABILITY:</span>
								</div>
								<div class="row">
									<span data-i18n="focus-bonus:-u">FOCUS BONUS:</span>
								</div>
								<div class="row">
									<span data-i18n="use-power:-u">USE POWER:</span>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<select class="spell-ability" name="attr_spell-ability">
										<option value="accuracy" data-i18n="accuracy">Accuracy</option>
										<option checked=true value="communication" data-i18n="communication">Communication</option>
										<option value="constitution" data-i18n="constitution">Constitution</option>
										<option value="dexterity" data-i18n="dexterity">Dexterity</option>
										<option value="fighting" data-i18n="fighting">Fighting</option>
										<option value="intelligence" data-i18n="intelligence">Intelligence</option>
										<option value="perception" data-i18n="perception">Perception</option>
										<option value="strength" data-i18n="strength">Strength</option>
										<option value="willpower" data-i18n="willpower">Willpower</option>
									</select>
								</div>
								<div class="row">
									<input type="number" value="0" name="attr_spell-focus-bonus">
								</div>
								<div class="row">
									<span class="spell-uses-fatigue">
										<button class="spell-magic-buttons" name="act_alternate-spell-check" type="action"></button>
									</span>
									<span class="spell-uses-points">
										<button class="spell-magic-buttons" name="act_main-spell-check" type="action"></button>
									</span>
								</div>
							</div>
						</div>
					</div>
					<div class="spell-descriptions">
						<div class="row row-short-spell-description"> <span data-i18n="short-desc.:-u">SHORT DESC.:</span> <textarea name="attr_short-spell-description"></textarea>
						</div>
						<div class="row row-full-spell-description"> <span data-i18n="description:-u">DESCRIPTION:</span> <textarea name="attr_full-spell-description"></textarea>
						</div>
					</div>
				</fieldset>
			</div>
			<div class="spell-container threefold-selected">
				<fieldset class="repeating_spell">
					<input type="checkbox" value="points" name="attr_spell-method" class="hiddencheckbox spell-method-uses-points">
					<input type="checkbox" value="fatigue" name="attr_spell-method" class="hiddencheckbox spell-method-uses-fatigue">
					<div class="section-name spell-section-name">
						<input type="text" placeholder="Name" name="attr_spell-name">
						<select class="spell-method" name="attr_spell-method">
							<option value="points" data-i18n="arcana">Arcana</option>
							<option value="fatigue" data-i18n="psychic">Psychic</option>
						</select>
					</div>
					<div class="spell-stats">
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row row-spell-talent">
									<span data-i18n="talent:-u">TALENT:</span>
								</div>
								<div class="row">
									<span data-i18n="time:-u">TIME:</span>
								</div>
								<div class="row">
									<span data-i18n="test-tn:-u">TEST TN:</span>
								</div>
							</div>
							<div class="col">
								<div class="row row-spell-talent">
									<input type="text" name="attr_spell-talent">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-time">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-tn">
								</div>
							</div>
						</div>
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row">
									<span data-i18n="test:-u">TEST:</span>
								</div>
								<div class="row">
									<span data-i18n="resistance:-u">RESISTANCE:</span>
								</div>
								<div class="row">
									<span class="spell-uses-fatigue" data-i18n="fatigue-tn:-u">FATIGUE TN:</span>
									<span class="spell-uses-points" data-i18n="kanna-cost:-u">KANNA COST:</span>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<input type="text" name="attr_spell-test">
								</div>
								<div class="row">
									<input type="text" name="attr_spell-resistance">
								</div>
								<div class="row">
									<span class="spell-uses-fatigue">
										<input type="text" name="attr_spell-fatigue">
										<button class="spell-magic-buttons" name="act_fatigue-check" type="action"></button>
									</span>
									<span class="spell-uses-points"> <input type="text" name="attr_spell-mp-cost"> </span>
								</div>
							</div>
						</div>
						<div class="col col-spell-stats">
							<div class="col">
								<div class="row">
									<span data-i18n="ability:-u">ABILITY:</span>
								</div>
								<div class="row">
									<span data-i18n="focus-bonus:-u">FOCUS BONUS:</span>
								</div>
								<div class="row">
									<span class="spell-uses-points" data-i18n="cast-spell:-u">CAST SPELL:</span>
									<span class="spell-uses-fatigue" data-i18n="use-power:-u">USE POWER:</span>
								</div>
							</div>
							<div class="col">
								<div class="row">
									<select class="spell-ability" name="attr_spell-ability">
										<option value="accuracy" data-i18n="accuracy">Accuracy</option>
										<option checked=true value="communication" data-i18n="communication">Communication</option>
										<option value="constitution" data-i18n="constitution">Constitution</option>
										<option value="dexterity" data-i18n="dexterity">Dexterity</option>
										<option value="fighting" data-i18n="fighting">Fighting</option>
										<option value="intelligence" data-i18n="intelligence">Intelligence</option>
										<option value="perception" data-i18n="perception">Perception</option>
										<option value="strength" data-i18n="strength">Strength</option>
										<option value="willpower" data-i18n="willpower">Willpower</option>
									</select>
								</div>
								<div class="row">
									<input type="number" value="0" name="attr_spell-focus-bonus">
								</div>
								<div class="row">
									<div class="spell-uses-fatigue">
										<button class="spell-magic-buttons" name="act_alternate-spell-check" type="action"></button>
									</div>
									<div class="spell-uses-points">
										<button class="spell-magic-buttons" name="act_main-spell-check" type="action"></button>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="spell-descriptions">
						<div class="row row-short-spell-description"> <span data-i18n="short-desc.:-u">SHORT DESC.:</span> <textarea name="attr_short-spell-description"></textarea>
						</div>
						<div class="row row-full-spell-description"> <span data-i18n="description:-u">DESCRIPTION:</span> <textarea name="attr_full-spell-description"></textarea>
						</div>
					</div>
				</fieldset>
			</div>
			<div class="the-expanse-selected">
				<span data-i18n="the-expanse-rpg-does-not-support-magical-powers"><i>The Expanse RPG</i> does not support magical powers.</span>
			</div>
			<div class="world-of-lazarus-selected">
				<span><i>The World of Lazarus RPG</i> does not support magical powers.</span>
			</div>
		</div>
	</div>

	<!-- ALIENATION TAB -->
	<div class="page tab8 alienation-page">

    <div class="alienation">
      <div class="subheader section-name">
        ALIENATION
      </div>

      <div class="row-header">
        SOURCES
      </div>
      <div class="alienation-title">
        ENLIGHTENMENT
      </div>
      <div class="alienation-title">
        TERROR
      </div>
      <div class="alienation-title">
        MISC MOD
      </div>
      <div class="alienation-title">
        TEST
      </div>
      <div class="alienation-title">
        TN MOD
      </div>

      <div class="row-header">
        ENTITIES
      </div>
      <div>
        <input type="text" name="attr_entities_enlightenment">
      </div>
      <div>
        <input type="text" name="attr_entities_terror">
      </div>
      <div>
        <input type="text" name="attr_entities_misc_mod">
      </div>
      <div>
        <button name="act_alienation-entities-test" class="" type="action"></button>
      </div>
      <div>
        <input type="text" name="attr_entities_tn_mod">
      </div>

      <div class="row-header">
        VISITATIONS
      </div>
      <div>
        <input type="text" name="attr_visitations_enlightenment">
      </div>
      <div>
        <input type="text" name="attr_visitations_terror">
      </div>
      <div>
        <input type="text" name="attr_visitations_focus">
      </div>
      <div>
        <button name="act_alienation-visitations-test" class="" type="action"></button>
      </div>
      <div>
        <input type="text" name="attr_visitations_tn_mod">
      </div>

      <div class="row-header">
        PHENOMENA
      </div>
      <div>
        <input type="text" name="attr_phenomena_enlightenment">
      </div>
      <div>
        <input type="text" name="attr_phenomena_terror">
      </div>
      <div>
        <input type="text" name="attr_phenomena_focus">
      </div>
      <div>
        <button name="act_alienation-phenomena-test" class="" type="action"></button>
      </div>
      <div>
        <input type="text" name="attr_phenomena_tn_mod">
      </div>

      <div class="row-header">
        REVELATIONS
      </div>
      <div>
        <input type="text" name="attr_revelations_enlightenment">
      </div>
      <div>
        <input type="text" name="attr_revelations_terror">
      </div>
      <div>
        <input type="text" name="attr_revelations_focus">
      </div>
      <div>
        <button name="act_alienation-revelations-test" class="" type="action"></button>
      </div>
      <div>
        <input type="text" name="attr_revelations_tn_mod">
      </div>

    </div>

    <div class="distortions">
      <div class="subheader section-name">
        PERMANENT DISTORTIONS
      </div>
      <div>
        <input type="text" name="attr_distortions1">
      </div>
      <div>
        <input type="text" name="attr_distortions2">
      </div>
      <div>
        <input type="text" name="attr_distortions3">
      </div>
      <div>
        <input type="text" name="attr_distortions4">
      </div>
      <div>
        <input type="text" name="attr_distortions5">
      </div>
    </div>

    <div class="dangerous-texts">
      <div class="subheader section-name">
        DANGEROUS TEXTS
      </div>

      <fieldset class="repeating_dangeroustexts">
        <div class="subheader nameheader">
          <input type="text" name="attr_text_name" placeholder="Name">
        </div>

        <div>
          LANGUAGES
        </div>
        <div>
          <input type="text" name="attr_languages">
        </div>
        <div>
          DECIPHER
        </div>
        <div class="decipher-input">
          <input type="text" name="attr_decipher">
        </div>
        <div>
          DECIPHER TEST
        </div>
        <div class="deciphertest-ability">
          <select name="attr_deciphertest_ability" >
            <option value="" disabled selected>Choose ability</option>
            <option value="Accuracy">Accuracy</option>
            <option value="Communication">Communication</option>
            <option value="Constitution">Constitution</option>
            <option value="Dexterity">Dexterity</option>
            <option value="Fighting">Fighting</option>
            <option value="Intelligence">Intelligence</option>
            <option value="Perception">Perception</option>
            <option value="Strength">Strength</option>
            <option value="Willpower">Willpower</option>
          </select>
        </div>
        <div class="deciphertest-focus">
          <input type="text" name="attr_deciphertest_focus" placeholder="Focus">
        </div>
        <div class="deciphertest-tn">
          <input type="number" name="attr_deciphertest_tn" placeholder="TN">
        </div>
        <div class="deciphertest-roll">
          <button name="act_dangeroustexts-deciphertest" class="" type="action"></button>
        </div>
        <div>
          ALIENATION TEST
        </div>
        <div>
          <select name="attr_alienation_test_type" >
            <option value="" disabled selected>Choose</option>
            <option value="Entities">Entities</option>
            <option value="Visitations">Visitations</option>
            <option value="Phenomena">Phenomena</option>
            <option value="Revelations">Revelations</option>
          </select>
        </div>
        <div>
          <input type="number" name="attr_alienation_test_tn" placeholder="TN">
        </div>
        <div>
          <button name="act_dangeroustexts-alienationtest" class="" type="action"></button>
        </div>

        <div class="attr-header">
          PRAXIS
        </div>
        <div class="attr-header praxis-header">
          ELDRITCH WORKINGS
        </div>
        <div class="artifice-label praxis-label">
          ARTIFICE
        </div>
        <div class="artifice-input praxis-input">
          <input type="text" name="attr_artifice_workings">
        </div>
        <div class="geometry-label praxis-label">
          GEOMETRY
        </div>
        <div class="geometry-input praxis-input">
          <input type="text" name="attr_geometry_workings">
        </div>
        <div class="morphics-label praxis-label">
          MORPHICS
        </div>
        <div class="morphics-input praxis-input">
          <input type="text" name="attr_morphics_workings">
        </div>
        <div class="ontics-label praxis-label">
          ONTICS
        </div>
        <div class="ontics-input praxis-input">
          <input type="text" name="attr_ontics_workings">
        </div>
        <div class="outsiders-label praxis-label">
          OUTSIDERS
        </div>
        <div class="outsiders-input praxis-input">
          <input type="text" name="attr_outsiders_workings">
        </div>
      </fieldset>

    </div>

    <div class="artifacts">
      <div class="subheader section-name">
        ARTIFACTS
      </div>

      <fieldset class="repeating_artifacts">
        <div class="subheader nameheader">
          <input type="text" name="attr_artifact_name" placeholder="Name">
        </div>
        <div class="alienation-test-label">
          ALIENATION TEST
        </div>
        <div>
          <select name="attr_alienation_test_type" >
            <option value="" disabled selected>Choose</option>
            <option value="Entities">Entities</option>
            <option value="Visitations">Visitations</option>
            <option value="Phenomena">Phenomena</option>
            <option value="Revelations">Revelations</option>
          </select>
        </div>
        <div>
          <input type="number" name="attr_alienation_test_tn" placeholder="TN">
        </div>
        <div>
          <button name="act_artifacts-alienationtest" class="" type="action"></button>
        </div>
        <div class="activation-label">
          ACTIVATION
        </div>
        <div class="activation-input">
          <input type="text" name="attr_activation">
        </div>
        <div>
          EFFECTS
        </div>
        <textarea name="attr_effects" rows="4">
        </textarea>
        <div>
          CONSEQUENCES
        </div>
        <div class="consequences-input">
          <input type="text" name="attr_consequences">
        </div>
      </fieldset>

    </div>

    <div class="eldritch-workings">
      <div class="subheader section-name">
        ELDRITCH WORKINGS
      </div>

      <fieldset class="repeating_eldritchworkings">

        <div class="subheader nameheader">
          <input type="text" name="attr_eldritch_working_name" placeholder="Name">
        </div>

        <div class="generic-name">
          <input type="text" name="attr_generic_name" placeholder="Generic name">
        </div>
        <div class="praxis">
          <input type="text" name="attr_praxis" placeholder="Praxis">
        </div>
        <div>
          ALIENATION TEST
        </div>
        <div>
          <select name="attr_alienation_test_type" >
            <option value="" disabled selected>Choose</option>
            <option value="Entities">Entities</option>
            <option value="Visitations">Visitations</option>
            <option value="Phenomena">Phenomena</option>
            <option value="Revelations">Revelations</option>
          </select>
        </div>
        <div>
          <input type="number" name="attr_alienation_test_tn" placeholder="TN">
        </div>
        <div>
          <button name="act_eldritchworkings-alienationtest" class="" type="action"></button>
        </div>
        <div class="interval">
          <input type="text" name="attr_interval" placeholder="Interval">
        </div>


        <div class="rotetests-header attr-header">
          ROTE TESTS
        </div>
        <div class="rotetest-ability">
          <select name="attr_rotetest1_ability" >
            <option value="" disabled selected>Choose ability</option>
            <option value="Accuracy">Accuracy</option>
            <option value="Communication">Communication</option>
            <option value="Constitution">Constitution</option>
            <option value="Dexterity">Dexterity</option>
            <option value="Fighting">Fighting</option>
            <option value="Intelligence">Intelligence</option>
            <option value="Perception">Perception</option>
            <option value="Strength">Strength</option>
            <option value="Willpower">Willpower</option>
          </select>
        </div>
        <div class="rotetest-focus">
          <input type="text" name="attr_rotetest1_focus" placeholder="Focus">
        </div>
        <div class="rotetest-tn">
          <input type="number" name="attr_rotetest1_tn" placeholder="TN" value="15">
        </div>
        <div class="rotetest-roll">
          <button name="act_eldritchworkings-rotetest1" class="" type="action"></button>
        </div>
        <div class="rotetest-ability">
          <select name="attr_rotetest2_ability" >
            <option value="" disabled selected>Choose ability</option>
            <option value="Accuracy">Accuracy</option>
            <option value="Communication">Communication</option>
            <option value="Constitution">Constitution</option>
            <option value="Dexterity">Dexterity</option>
            <option value="Fighting">Fighting</option>
            <option value="Intelligence">Intelligence</option>
            <option value="Perception">Perception</option>
            <option value="Strength">Strength</option>
            <option value="Willpower">Willpower</option>
          </select>
        </div>
        <div class="rotetest-focus">
          <input type="text" name="attr_rotetest2_focus" placeholder="Focus">
        </div>
        <div class="rotetest-tn">
          <input type="number" name="attr_rotetest2_tn" placeholder="TN" value="15">
        </div>
        <div class="rotetest-roll">
          <button name="act_eldritchworkings-rotetest2" class="" type="action"></button>
        </div>
        <div class="rotetest-ability">
          <select name="attr_rotetest3_ability" >
            <option value="" disabled selected>Choose ability</option>
            <option value="Accuracy">Accuracy</option>
            <option value="Communication">Communication</option>
            <option value="Constitution">Constitution</option>
            <option value="Dexterity">Dexterity</option>
            <option value="Fighting">Fighting</option>
            <option value="Intelligence">Intelligence</option>
            <option value="Perception">Perception</option>
            <option value="Strength">Strength</option>
            <option value="Willpower">Willpower</option>
          </select>
        </div>
        <div class="rotetest-focus">
          <input type="text" name="attr_rotetest3_focus" placeholder="Focus">
        </div>
        <div class="rotetest-tn">
          <input type="number" name="attr_rotetest3_tn" placeholder="TN" value="15">
        </div>
        <div class="rotetest-roll">
          <button name="act_eldritchworkings-rotetest3" class="" type="action"></button>
        </div>

        <div class="trappings-header attr-header">
          TRAPPINGS
        </div>
        <div class="trapping-name trapping1">
          <input type="text" name="attr_trappings1">
        </div>
        <div class="trapping-checkbox trapping1">
          <input type="checkbox" name="attr_trappings1_checked">
        </div>
        <div class="trapping-name trapping2">
          <input type="text" name="attr_trappings2">
        </div>
        <div class="trapping-checkbox trapping2">
          <input type="checkbox" name="attr_trappings2_checked">
        </div>
        <div class="trapping-name trapping3">
          <input type="text" name="attr_trappings3">
        </div>
        <div class="trapping-checkbox trapping3">
          <input type="checkbox" name="attr_trappings3_checked">
        </div>

        <div class="attr-header">
          EFFECT
        </div>
        <div class="description attr-header-spacing">
          <input type="text" name="attr_effect" placeholder="Description">
        </div>
        <div>
          <select name="attr_effect_ability" >
            <option value="" disabled selected>Choose ability</option>
            <option value="Accuracy">Accuracy</option>
            <option value="Communication">Communication</option>
            <option value="Constitution">Constitution</option>
            <option value="Dexterity">Dexterity</option>
            <option value="Fighting">Fighting</option>
            <option value="Intelligence">Intelligence</option>
            <option value="Perception">Perception</option>
            <option value="Strength">Strength</option>
            <option value="Willpower">Willpower</option>
          </select>
        </div>
        <div>
          <input type="text" name="attr_effect_focus" placeholder="Focus">
        </div>
        <div>
          <input type="number" name="attr_effect_tn" placeholder="TN">
        </div>
        <div>
          <button name="act_eldritchworkings-effect" class="" type="action"></button>
        </div>
        <div class="place-right">
          DAMAGE
        </div>
        <div>
          <input type="text" name="attr_effect_damage" placeholder="?d6">
        </div>
        <div>
          <button type="action" name="act_eldritchworkings-effectdamage"></button>
        </div>


        <div class="attr-header">
          MAGISTER EFFECT
        </div>
        <div class="description attr-header-spacing">
          <input type="text" name="attr_magister_effect" placeholder="Description">
        </div>
        <div>
          <select name="attr_magister_effect_ability" >
            <option value="" disabled selected>Choose ability</option>
            <option value="Accuracy">Accuracy</option>
            <option value="Communication">Communication</option>
            <option value="Constitution">Constitution</option>
            <option value="Dexterity">Dexterity</option>
            <option value="Fighting">Fighting</option>
            <option value="Intelligence">Intelligence</option>
            <option value="Perception">Perception</option>
            <option value="Strength">Strength</option>
            <option value="Willpower">Willpower</option>
          </select>
        </div>
        <div>
          <input type="text" name="attr_magister_effect_focus" placeholder="Focus">
        </div>
        <div>
          <input type="number" name="attr_magister_effect_tn" placeholder="TN">
        </div>
        <div>
          <button name="act_eldritchworkings-magistereffect" class="" type="action"></button>
        </div>
        <div class="place-right">
          DAMAGE
        </div>
        <div>
          <input type="text" name="attr_magister_effect_damage" placeholder="?d6">
        </div>
        <div>
          <button type="action" name="act_eldritchworkings-magistereffectdamage"></button>
        </div>

        <div class="attr-header">
          DOOM
        </div>
        <div class="description attr-header-spacing">
          <input type="text" name="attr_doom" placeholder="Description">
        </div>
        <div>
          <select name="attr_doom_ability" >
            <option value="" disabled selected>Choose ability</option>
            <option value="Accuracy">Accuracy</option>
            <option value="Communication">Communication</option>
            <option value="Constitution">Constitution</option>
            <option value="Dexterity">Dexterity</option>
            <option value="Fighting">Fighting</option>
            <option value="Intelligence">Intelligence</option>
            <option value="Perception">Perception</option>
            <option value="Strength">Strength</option>
            <option value="Willpower">Willpower</option>
          </select>
        </div>
        <div>
          <input type="text" name="attr_doom_focus" placeholder="Focus">
        </div>
        <div>
          <input type="number" name="attr_doom_tn" placeholder="TN">
        </div>
        <div>
          <button name="act_eldritchworkings-doom" class="" type="action"></button>
        </div>
        <div class="place-right">
          DAMAGE
        </div>
        <div>
          <input type="text" name="attr_doom_damage" placeholder="?d6">
        </div>
        <div>
          <button type="action" name="act_eldritchworkings-doomdamage"></button>
        </div>

      </fieldset>

    </div>

  </div>

	<!-- OPTIONS TAB -->
	<div class="page tab7">
		<div class="body">
			<div class="col col-options">
				<!-- System Select -->
				<div class="section small-section">
					<div class="section-name">
						<span data-i18n="game-system-u">GAME SYSTEM</span>
					</div>
					<div class="gameunlocked">
						<select class="game-select" name="attr_game" title="This determines the stats displayed on the sheet and the system logo.">
							<option value="dragon-age" title="Dragon Age RPG" data-i18n="dragon-age">Dragon Age</option>
							<option value="fantasy-age" title="Fantasy AGE RPG" data-i18n="fantasy-age-basic">Fantasy AGE Basic</option>
							<!--option value="fantasy-age-core" title="Fantasy AGE RPG" data-i18n="fantasy-age-core">Fantasy AGE Core</option-->
							<option value="titansgrave" title="Titansgrave, a Fantasy AGE setting" data-i18n="titansgrave">Titansgrave</option>
							<option value="blue-rose" title="The Blue Rose RPG" data-i18n="blue-rose">Blue Rose</option>
							<option value="the-expanse" title="The Expanse RPG" data-i18n="the-expanse">The Expanse</option>
							<option value="modern-age" title="The Modern AGE RPG" data-i18n="modern-age">Modern AGE</option>
							<option value="threefold" title="Threefold, a Modern AGE setting" data-i18n="threefold">Threefold</option>
							<option value="world-of-lazarus" title="World of Lazarus, a Modern AGE setting" data-i18n="world-of-lazarus">World of Lazarus</option>
							<option value="fifth-season" title="Fifth Season RPG" data-i18n="fifth-season">Fifth Season</option>
							<option value="cthulhu-awakens" title="Cthulhu Awakens RPG" data-i18n="cthulhu-awakens">Cthulhu Awakens</option>
						</select>
					</div>
					<div class="gamelocked">
						<select class="the-expanse-selected" name="attr_game" title="This determines the stats displayed on the sheet and the system logo.">
							<option value="the-expanse" title="The Expanse RPG" data-i18n="the-expanse">The Expanse</option>
						</select>
						<select class="fantasy-age-selected" name="attr_game" title="This determines the stats displayed on the sheet and the system logo.">
							<option value="fantasy-age" title="Fantasy AGE RPG" data-i18n="fantasy-age-basic">Fantasy AGE Basic</option>
						</select>
						<select class="fantasy-age-core-selected" name="attr_game" title="This determines the stats displayed on the sheet and the system logo.">
							<option value="fantasy-age" title="Fantasy AGE RPG" data-i18n="fantasy-age-basic">Fantasy AGE Basic</option>
							<option value="fantasy-age-core" title="Fantasy AGE RPG" data-i18n="fantasy-age-core">Fantasy AGE Core</option>
						</select>
						<select class="fifth-season-selected" name="attr_game" title="This determines the stats displayed on the sheet and the system logo.">
							<option value="fifth-season" title="Fifth Season RPG" data-i18n="fifth-season">Fifth Season</option>
						</select>
						<select class="cthulhu-awakens-selected" name="attr_game" title="This determines the stats displayed on the sheet and the system logo.">
							<option value="cthulhu-awakens" title="Cthulhu Awakens RPG" data-i18n="cthulhu-awakens">Cthulhu Awakens</option>
						</select>
					</div>
				</div>
				<!-- Color Select -->
				<div class="section small-section">
					<div class="section-name">
						<span data-i18n="color-selection-u">COLOR SELECTION</span>
					</div>
					<div>
						<select class="color-select" name="attr_color">
						<optgroup class="color-select-original" label="Classic Colors">
								<option value="black" data-i18n="black">Black</option>
								<option value="blue1" data-i18n="blue-1">Blue 1</option>
								<option value="blue2" data-i18n="blue-2">Blue 2</option>
								<option value="red" data-i18n="red">Red</option>
								<option value="teal1" data-i18n="teal-1">Teal 1</option>
								<option value="teal2" data-i18n="teal-2">Teal 2</option>
							</optgroup>
							<optgroup class="color-select-fancy" label="Stylish Skins">
								<option value="dragon" data-i18n="dragonscale-red">Dragonscale Red</option>
								<option value="stars" data-i18n="expansive-starfield">Expansive Starfield</option>
								<option value="lazarus" data-i18n="lazarus-blue">Lazarus Blue</option>
								<option value="orange" data-i18n="modern-orange">Modern Orange</option>
								<option value="rainbow" data-i18n="proud-rainbow">Proud Rainbow</option>
								<option value="green" data-i18n="ronin-green">Ronin Green</option>
								<option value="threefold" data-i18n="threefold-color">Threefold Blend</option>
							</optgroup>
						</select>
					</div>
				</div>
				<!-- Roll Options -->
				<div class="section larger-section">
					<div class="section-name">
						<span data-i18n="rolls-u">ROLLS</span>
					</div>
					<!-- Should the character name be included every time it rolls? -->
					<div class="row">
						<div class="col select-text">
							<span data-i18n="show-the-character-name-in-roll-results">Show the character name in roll results</span>
						</div>
						<div class="col select-drop">
							<select name="attr_char-name-option">
								<option value="@{character_name} &#124; " data-i18n="show">Show</option>
								<option value=" " data-i18n="hide">Hide</option>
							</select>
						</div>
					</div>
					<!-- Do your rolls go to everyone or just the GM? -->
					<div class="row">
						<div class="col select-text">
							<span data-i18n="whisper-rolls-to-gm">Whisper rolls to GM</span>
						</div>
						<div class="col select-drop">
							<select name="attr_wtype">
								<option value="" data-i18n="never-whisper-roll">Never Whisper Rolls</option>
								<option value="@{whisper-toggle}" data-i18n="toggle">Toggle</option>
								<option value="?{@{whisper}?|@{public_roll},|@{whisper_roll},/w gm }" data-i18n="query-whisper-roll">Query Whisper</option>
								<option value="/w gm " data-i18n="always-whisper-roll">Always Whisper Rolls</option>
							</select>
						</div>
					</div>
					<!-- How often does this character use "Aim", and How much does "Aim" add to your rolls? -->
					<div class="row">
						<div class="col aim-toggle-text">
							<span data-i18n="aim-value-default">Aim Value</span>
						</div>
						<div class="col aim-value-field">
							<input type="number" name="attr_aim-value" value="1">
						</div>
						<div class="col"></div>
						<div class="col select-text">
							<span data-i18n="add-aim-to-attack">Add Aim to Attack</span>
						</div>
						<div class="col select-drop">
							<select name="attr_aim-select">
								<option value="0" data-i18n="never-use-aim">Never use Aim</option>
								<option value="@{aim-toggle}" data-i18n="toggle">Toggle</option>
								<option value="?{Using the Aim action|Yes, @{aim-value}|No, 0}" data-i18n="prompt-for-aim">Prompt for Aim</option>
								<option value="@{aim-value}" data-i18n="always-use-aim">Always use Aim</option>
							</select>
						</div>
					</div>
					<!-- Reroll Stunt Die (based on Fantasy AGE pg71 "chosen of fate") -->
					<div class="row">
						<div class="col select-text">
							<span data-i18n="reroll-stunt-die">Reroll the Stunt Die</span>
						</div>
						<div class="col select-drop">
							<select name="attr_stunts2-select">
								<option value="0" data-i18n="never-reroll-stunt">Never Reroll Stunt Die</option>
								<option value="@{stunts2-toggle}" data-i18n="toggle">Toggle</option>
								<option value="?{Reroll Stunt Die|Yes, d6|No, 0}" data-i18n="prompt-for-stunt-reroll">Prompt for Stunt Reroll</option>
								<option value="d6" data-i18n="always-reroll-stunt">Always Reroll Stunt Die</option>
							</select>
						</div>
					</div>
					<!-- Add a tiebreaker to Initiative -->
					<div class="row">
						<div class="col select-text">
							<span data-i18n="add-tiebreaker-to-initiative-rolls">Add Tiebreaker to Initiative rolls</span>
						</div>
						<div class="col select-drop">
							<select name="attr_initiative-tiebreaker">
								<option value="0" data-i18n="no">No</option>
								<option value="1" data-i18n="yes">Yes</option>
							</select>
						</div>
					</div>
					<!-- Should Armor Penalty apply to Dexterity Rolls? -->
					<div class="row">
						<div class="col select-text">
							<span data-i18n="apply-armor-penalty-to-dexterity-rolls">Apply Armor Penalty to Dexterity rolls</span>
						</div>
						<div class="col select-drop">
							<select name="attr_armor-penalty-for-dex">
								<option value="0" data-i18n="no">No</option>
								<option value="@{armor-penalty}" data-i18n="yes">Yes</option>
							</select>
						</div>
					</div>
				</div>
			</div>
			<div class="col col-options">
				<!-- Show/Hide Options -->
				<div class="section larger-section gameunlocked">
					<div class="section-name">
						<span data-i18n="sections-u">CHARACTER TAB SECTIONS</span>
					</div>
					<!-- Show/Hide HEALTH/FORTUNE -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="replace-health-with-fortune">Replace Health with Fortune</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_health-fortune-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide INITIATIVE -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="show-the-initiative-focus">Show the Initiative focus</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_initiative-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide MP/KANNA/PP -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span class="no-mod-selected" data-i18n="show-the-mana/magic-points-section">Show the Mana/Magic Points section</span>
							<span class="modern-age-selected world-of-lazarus-selected cthulhu-awakens-selected fifth-season-selected" data-i18n="show-the-power-points-section">Show the Power Points section</span>
							<span class="threefold-selected" data-i18n="show-the-kanna-section">Show the Kanna section</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_mana-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide XP -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="show-the-experience-points-section">Show the Experience Points section</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_exp-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide FATIGUE -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="show-the-fatigue-section">Show the Fatigue section</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_fatigue-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide FEAR -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="show-the-fear-section">Show the Fear section</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_fear-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide HORROR -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="show-the-horror-section">Show the Horror section</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_horror-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide CONVICTION -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="show-the-conviction-section">Show the Conviction section</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_conviction-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide CORRUPTION -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="show-the-corruption-section">Show the Corruption section</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_corruption-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide AMMO -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="show-the-ammo-column">Show the Ammo column</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_ammo-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide CLASS/QUALITIES -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="show-the-class-list">Show the Class Power list in the Character tab</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_power-list-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide TALENTS -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="show-the-talent-list">Show the Talent list in the Character tab</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_talent-list-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide MAGIC/PSYCHIC/ARCANA -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span class="modern-age-selected world-of-lazarus-selected fifth-season-selected" data-i18n="show-the-extraordinary-powers-list">Show the Extraordinary Powers list in the Character tab</span>
							<span class="threefold-selected" data-i18n="show-the-arcana/psychic-list">Show the Arcana/Psychic list in the Character tab</span>
							<span class="cthulhu-awakens-selected" data-i18n="show-the-psychic-list">Show the Psychic list in the Character tab</span>
							<span class="no-mod-selected" data-i18n="show-the-spell/arcana-list">Show the Spell/Arcana list in the Character tab</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_spell-list-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide EQUIPMENT -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="show-the-equipment-section">Show the Equipment section</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_equipment-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide MONEY -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text toggle-for-money-section">
							<span data-i18n="show-the-money/currency-section">Show the Money/Currency section</span>
						</div>
						<div class="col list-toggle-checkbox toggle-for-money-section">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_money-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide INCOME/RESOURCES -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span class="the-expanse-selected fifth-season-selected" data-i18n="show-the-income-section">Show the Income section</span>
							<span class="no-the-expanse-selected" data-i18n="show-the-resources-section">Show the Resources section</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_income-toggle"><span></span>
						</div>
					</div>
					<!-- Show/Hide CONDITIONS -->
					<div class="row list-toggle-container">
						<div class="col list-toggle-text">
							<span data-i18n="show-the-conditions-section">Show the Conditions section</span>
						</div>
						<div class="col list-toggle-checkbox">
							<input type="checkbox" value="1" class="list-checkbox" name="attr_conditions-toggle"><span></span>
						</div>
					</div>
					<div class="section-name autoconfig">
						<div class="autoconfig">
							<button type="action" class="autoconfigure-button" title="Auto-configure the settings above based on your game selection" name="act_autoconfigure"><span data-i18n="auto-configure-all-u">AUTO-CONFIGURE ALL</span></button>
						</div>
					</div>
				</div>
				<div class="larger-section gamelocked">
					<div class="section-name">
						<span data-i18n="about-u">ABOUT</span>
					</div>
					<span class="about fantasy-age-selected fantasy-age-core-selected">
						<p>The Green Ronin-official Roll20 character sheet for Fantasy AGE RPG.
							Based on the AGE System sheet by Olivier L.-L., Zach Hall, Cadera Spindrift,
							and theDissilent and utilizing the TotalRolled for AGE API script by
							Joshua Casserino, Olivier L.-L., and theDissilent, with much appreciation
							from Green Ronin.</p>
						<p>If you find any bugs, please tell us about them at: https://forms.monday.com/forms/b3ede9f34e9eab8dd2aab4c4b0914a15?r=use1</p>
						<p>Fantasy AGE RPG is 2015 Green Ronin Publishing, LLC.</p>
					</span>
					<span class="about the-expanse-selected">
						<p>The Green Ronin-official Roll20 character sheet for The Expanse RPG.
							Based on the AGE System sheet by Olivier L.-L., Zach Hall, Cadera Spindrift,
							and theDissilent and utilizing the TotalRolled for AGE API script by
							Joshua Casserino, Olivier L.-L., and theDissilent, with much appreciation
							from Green Ronin.</p>
						<p>If you find any bugs, please tell us about them at: https://forms.monday.com/forms/b3ede9f34e9eab8dd2aab4c4b0914a15?r=use1</p>
						<p>The Expanse RPG is 2019 Green Ronin Publishing, LLC.</p>
						<p>The Expanse is  2011-2020 Daniel Abraham and Ty Franck.</p>
					</span>
					<span class="about fifth-season-selected">
						<p>The Green Ronin-official Roll20 character sheet for Fifth Season RPG.
							Based on the AGE System sheet by Olivier L.-L., Zach Hall, Cadera Spindrift,
							and theDissilent and utilizing the TotalRolled for AGE API script by
							Joshua Casserino, Olivier L.-L., and theDissilent, with much appreciation
							from Green Ronin.</p>
						<p>If you find any bugs, please tell us about them at: https://forms.monday.com/forms/b3ede9f34e9eab8dd2aab4c4b0914a15?r=use1</p>
						<p>Fifth Season RPG is 2022 Green Ronin Publishing, LLC.</p>
						<p>Fifth Season is  2015-2022 N. K. Jemisin.</p>
					</span>
					<span class="about cthulhu-awakens-selected">
						<p>The Green Ronin-official Roll20 character sheet for Cthulhu Awakens RPG.
							Based on the AGE System sheet by Olivier L.-L., Zach Hall, Cadera Spindrift,
							and theDissilent and utilizing the TotalRolled for AGE API script by
							Joshua Casserino, Olivier L.-L., theDissilent and Richard Gould,
              with much appreciation from Green Ronin.</p>
						<p>If you find any bugs, please tell us about them at: https://forms.monday.com/forms/b3ede9f34e9eab8dd2aab4c4b0914a15?r=use1</p>
						<p>Cthulhu Awakens RPG is 2023 Green Ronin Publishing, LLC.</p>
					</span>
				</div>
				<span class="version-name">
					<span data-i18n="version">Version</span>
					<span name="attr_version-name"></span>
				</span>
			</div>
		</div>
	</div>

  <div class="compendium_drop_notification">
    <div class="text">Drop compendium item here</div>
  </div>
	<!-- END OF PC SHEET -->
</div>

<rolltemplate class="sheet-rolltemplate-age-roller">
	<div class="sheet-age-roller-container">

		{{#color-black}} <div class="sheet-age-roller-title sheet-age-roller-color-black">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div> {{/color-black}}
		{{#color-red}} <div class="sheet-age-roller-title sheet-age-roller-color-red">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div> {{/color-red}}
		{{#color-blue1}} <div class="sheet-age-roller-title sheet-age-roller-color-blue1">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div> {{/color-blue1}}
		{{#color-blue2}} <div class="sheet-age-roller-title sheet-age-roller-color-blue2">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div> {{/color-blue2}}
		{{#color-teal1}} <div class="sheet-age-roller-title sheet-age-roller-color-teal1">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div> {{/color-teal1}}
		{{#color-teal2}} <div class="sheet-age-roller-title sheet-age-roller-color-teal2">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div> {{/color-teal2}}
		{{#color-green}} <div class="sheet-age-roller-title sheet-age-roller-color-green">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div> {{/color-green}}
		{{#color-orange}} <div class="sheet-age-roller-title sheet-age-roller-color-orange">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div> {{/color-orange}}
		{{#color-stars}}<div class="sheet-age-roller-title sheet-age-roller-color-stars">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div>{{/color-stars}}
		{{#color-threefold}}<div class="sheet-age-roller-title sheet-age-roller-color-threefold">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div>{{/color-threefold}}
		{{#color-lazarus}}<div class="sheet-age-roller-title sheet-age-roller-color-lazarus">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div>{{/color-lazarus}}
		{{#color-rainbow}}<div class="sheet-age-roller-title sheet-age-roller-color-rainbow">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div>{{/color-rainbow}}
		{{#color-dragon}}<div class="sheet-age-roller-title sheet-age-roller-color-dragon">{{#player}}{{player}}{{/player}}{{#desc}}{{desc}}{{/desc}} </div>{{/color-dragon}}

		{{#drama}}
			<div class="sheet-age-roller-result">
				<span class="sheet-die-face">
					{{#rollTotal() die1 1}}a{{/rollTotal() die1 1}}
					{{#rollTotal() die1 2}}b{{/rollTotal() die1 2}}
					{{#rollTotal() die1 3}}c{{/rollTotal() die1 3}}
					{{#rollTotal() die1 4}}d{{/rollTotal() die1 4}}
					{{#rollTotal() die1 5}}e{{/rollTotal() die1 5}}
					{{#rollTotal() die1 6}}f{{/rollTotal() die1 6}}
				</span>
				<span class="sheet-die-face">
					{{#rollTotal() die2 1}}a{{/rollTotal() die2 1}}
					{{#rollTotal() die2 2}}b{{/rollTotal() die2 2}}
					{{#rollTotal() die2 3}}c{{/rollTotal() die2 3}}
					{{#rollTotal() die2 4}}d{{/rollTotal() die2 4}}
					{{#rollTotal() die2 5}}e{{/rollTotal() die2 5}}
					{{#rollTotal() die2 6}}f{{/rollTotal() die2 6}}
				</span>
				{{#color-black}} <span class="sheet-die-face sheet-die-face-drama sheet-color-black"> {{/color-black}}
				{{#color-red}} <span class="sheet-die-face sheet-die-face-drama sheet-color-red"> {{/color-red}}
				{{#color-blue1}} <span class="sheet-die-face sheet-die-face-drama sheet-color-blue1"> {{/color-blue1}}
				{{#color-blue2}} <span class="sheet-die-face sheet-die-face-drama sheet-color-blue2"> {{/color-blue2}}
				{{#color-teal1}} <span class="sheet-die-face sheet-die-face-drama sheet-color-teal1"> {{/color-teal1}}
				{{#color-teal2}} <span class="sheet-die-face sheet-die-face-drama sheet-color-teal2"> {{/color-teal2}}
				{{#color-orange}} <span class="sheet-die-face sheet-die-face-drama sheet-color-orange"> {{/color-orange}}
				{{#color-green}} <span class="sheet-die-face sheet-die-face-drama sheet-color-green"> {{/color-green}}
				{{#color-threefold}} <span class="sheet-die-face sheet-die-face-drama sheet-color-threefold"> {{/color-threefold}}
				{{#color-lazarus}} <span class="sheet-die-face sheet-die-face-drama sheet-color-lazarus"> {{/color-lazarus}}
				{{#color-stars}} <span class="sheet-die-face sheet-die-face-drama sheet-color-stars"> {{/color-stars}}
				{{#color-rainbow}} <span class="sheet-die-face sheet-die-face-drama sheet-color-rainbow"> {{/color-rainbow}}
				{{#color-dragon}} <span class="sheet-die-face sheet-die-face-drama sheet-color-dragon"> {{/color-dragon}}

					{{#rollTotal() drama 1}}a{{/rollTotal() drama 1}}
					{{#rollTotal() drama 2}}b{{/rollTotal() drama 2}}
					{{#rollTotal() drama 3}}c{{/rollTotal() drama 3}}
					{{#rollTotal() drama 4}}d{{/rollTotal() drama 4}}
					{{#rollTotal() drama 5}}e{{/rollTotal() drama 5}}
					{{#rollTotal() drama 6}}f{{/rollTotal() drama 6}}

					{{#^rollTotal() drama2 0}}<span style="color: #983fae">
						<span class="sheet-die-seperator">|</span>
						{{#rollTotal() drama2 1}}a{{/rollTotal() drama2 1}}
						{{#rollTotal() drama2 2}}b{{/rollTotal() drama2 2}}
						{{#rollTotal() drama2 3}}c{{/rollTotal() drama2 3}}
						{{#rollTotal() drama2 4}}d{{/rollTotal() drama2 4}}
						{{#rollTotal() drama2 5}}e{{/rollTotal() drama2 5}}
						{{#rollTotal() drama2 6}}f{{/rollTotal() drama2 6}}
					</span>{{/^rollTotal() drama2 0}}
				</span>
			</div>
		{{/drama}}

		{{#mod}}
			<div class="sheet-age-roller-line">
				<div class="sheet-age-roller-col1 sheet-age-roller-ability">
					{{#ability}}{{ability}}{{/ability}}
				</div>
				<div class="sheet-age-roller-col2 sheet-age-roller-mod">
					{{#rollGreater() mod 0}}+{{/rollGreater() mod 0}}{{mod}}
				</div>
			</div>
		{{/mod}}

		{{#damage}}
			<div class="sheet-age-roller-line">
				<div class="sheet-age-roller-col1">
					<span data-i18n="damage">Damage</span>{{#damagedice}}: {{damagedice}}{{/damagedice}}
				</div>
				<div class="sheet-age-roller-col2">
					{{damage}}
				</div>
			</div>
		{{/damage}}

		{{#^rollTotal() aimcheck 0}}
			<div class="sheet-age-roller-line">
				<div class="sheet-age-roller-col1">
					Aim
				</div>
				<div class="sheet-age-roller-col2">
					{{aimcheck}}
				</div>
			</div>
		{{/^rollTotal() aimcheck 0}}

		{{#extramod1}}
			{{#^rollTotal() extramod1 0}}
				<div class="sheet-age-roller-line">
					<div class="sheet-age-roller-col1">
						{{#extramod1-name}}{{extramod1-name}}{{/extramod1-name}}
					</div>
					<div class="sheet-age-roller-col2">
						{{#rollGreater() extramod1 0}}+{{/rollGreater() extramod1 0}}{{extramod1}}
					</div>
				</div>
			{{/^rollTotal() extramod1 0}}
		{{/extramod1}}

		{{#extramod2}}
			{{#^rollTotal() extramod2 0}}
				<div class="sheet-age-roller-line">
					<div class="sheet-age-roller-col1">
						{{#extramod2-name}}{{extramod2-name}}{{/extramod2-name}}
					</div>
					<div class="sheet-age-roller-col2">
						{{#rollGreater() extramod2 0}}+{{/rollGreater() extramod2 0}}{{extramod2}}
					</div>
				</div>
			{{/^rollTotal() extramod2 0}}
		{{/extramod2}}

		{{#extramod3}}
			{{#^rollTotal() extramod3 0}}
				<div class="sheet-age-roller-line">
					<div class="sheet-age-roller-col1">
						{{#extramod3-name}}{{extramod3-name}}{{/extramod3-name}}
					</div>
					<div class="sheet-age-roller-col2">
						{{#rollGreater() extramod3 0}}+{{/rollGreater() extramod3 0}}{{extramod3}}
					</div>
				</div>
			{{/^rollTotal() extramod3 0}}
		{{/extramod3}}

		{{#extramod4}}
			{{#^rollTotal() extramod4 0}}
				<div class="sheet-age-roller-line">
					<div class="sheet-age-roller-col1">
						{{#extramod4-name}}{{extramod4-name}}{{/extramod4-name}}
					</div>
					<div class="sheet-age-roller-col2">
						{{#rollGreater() extramod4 0}}+{{/rollGreater() extramod4 0}}{{extramod4}}
					</div>
				</div>
			{{/^rollTotal() extramod4 0}}
		{{/extramod4}}

		{{#rollGreater() fatigue 0}}
			<div class="sheet-age-roller-line">
				<div class="sheet-age-roller-col1">
					<span data-i18n="fatigue">Fatigue</span>
				</div>
				<div class="sheet-age-roller-col2">
					{{#fatigue}}
						-{{fatigue}}
					{{/fatigue}}
				</div>
			</div>
		{{/rollGreater() fatigue 0}}

		{{#tiebreaker}}
			{{#^rollTotal() tiebreaker 0}}
				<div class="sheet-age-roller-line">
					<div class="sheet-age-roller-col1">
						<span data-i18n="stunt_die">Stunt Die</span> * 0.1
					</div>
					<div class="sheet-age-roller-col2">
						+0.{{drama}}
					</div>
				</div>
				<div class="sheet-age-roller-line">
					<div class="sheet-age-roller-col1">
						{{ability}} * 0.01
					</div>
					<div class="sheet-age-roller-col2">
						{{#rollGreater() mod 0}}+{{/rollGreater() mod 0}}{{tiebreaker2}}
					</div>
				</div>
			{{/^rollTotal() tiebreaker 0}}
		{{/tiebreaker}}

		{{#total}}
			<div class="sheet-age-roller-total sheet-age-roller-line">
				<span class="sheet-age-roller-col1" data-i18n="total">Total</span>
				<span class="sheet-age-roller-col2">{{computed::total}}</span>
			</div>
		{{/total}}

		{{#tn}}
			<div class="sheet-age-roller-line sheet-age-roller-tn">
				<span class="sheet-age-roller-col1" data-i18n="target_number">
					Target Number
				</span>
				<span class="sheet-age-roller-col2">
					{{tn}}
				</span>
			</div>
		{{/tn}}

		{{#note1}}
			<div class="sheet-age-roller-line sheet-age-roller-tn">
				<span class="sheet-age-roller-col1">
					{{note1-name}}
				</span>
				<span class="sheet-age-roller-col2">
					{{note1}}
				</span>
			</div>
		{{/note1}}

		{{#note2}}
			<div class="sheet-age-roller-line sheet-age-roller-tn">
				<span class="sheet-age-roller-col1">
					{{note2-name}}
				</span>
				<span class="sheet-age-roller-col2">
					{{note2}}
				</span>
			</div>
		{{/note2}}

		{{#note3}}
			<div class="sheet-age-roller-line sheet-age-roller-tn">
				<span class="sheet-age-roller-col1">
					{{note3-name}}
				</span>
				<span class="sheet-age-roller-col2">
					{{note3}}
				</span>
			</div>
		{{/note3}}

		{{#note4}}
			<div class="sheet-age-roller-line sheet-age-roller-tn">
				<span class="sheet-age-roller-col1">
					{{note4-name}}
				</span>
				<span class="sheet-age-roller-col2">
					{{note4}}
				</span>
			</div>
		{{/note4}}

		{{#note5}}
			<div class="sheet-age-roller-line sheet-age-roller-tn">
				<span class="sheet-age-roller-col1">
					{{note5-name}}
				</span>
				<span class="sheet-age-roller-col2">
					{{note5}}
				</span>
			</div>
		{{/note5}}

		{{#note6}}
			<div class="sheet-age-roller-line sheet-age-roller-tn">
				<span class="sheet-age-roller-col1">
					{{note6-name}}
				</span>
				<span class="sheet-age-roller-col2">
					{{note6}}
				</span>
			</div>
		{{/note6}}

		{{#rollTotal() die1 die2}}
			{{^drama2}}
				<div class="sheet-age-roller-line sheet-age-roller-stunt">
					<span class="sheet-age-roller-stunt-dice-label sheet-age-roller-col1" data-i18n="stunt_points">Stunt Points</span><span class="sheet-age-roller-stunt-dice sheet-age-roller-col2">{{drama}}</span>
				</div>
			{{/drama2}}
			{{#rollTotal() drama2 0}}
				<div class="sheet-age-roller-line sheet-age-roller-stunt">
					<span class="sheet-age-roller-stunt-dice-label sheet-age-roller-col1" data-i18n="stunt_points">Stunt Points</span><span class="sheet-age-roller-stunt-dice sheet-age-roller-col2">{{drama}}</span>
				</div>
			{{/rollTotal() drama2 0}}
			{{#^rollTotal() drama2 0}}
				<div class="sheet-age-roller-line sheet-age-roller-stunt">
					<span class="sheet-age-roller-stunt-dice-label sheet-age-roller-col1" data-i18n="stunt_points">Stunt Points</span><span class="sheet-age-roller-stunt-dice sheet-age-roller-col2">{{drama}} or {{drama2}}</span>
				</div>
			{{/^rollTotal() drama2 0}}
		{{/rollTotal() die1 die2}}

		{{#rollTotal() die1 drama}}
			{{^drama2}}
				<div class="sheet-age-roller-line sheet-age-roller-stunt">
					<span class="sheet-age-roller-stunt-dice-label sheet-age-roller-col1" data-i18n="stunt_points">Stunt Points</span><span class="sheet-age-roller-stunt-dice sheet-age-roller-col2">{{drama}}</span>
				</div>
			{{/drama2}}
			{{#rollTotal() drama2 0}}
				<div class="sheet-age-roller-line sheet-age-roller-stunt">
					<span class="sheet-age-roller-stunt-dice-label sheet-age-roller-col1" data-i18n="stunt_points">Stunt Points</span><span class="sheet-age-roller-stunt-dice sheet-age-roller-col2">{{drama}}</span>
				</div>
			{{/rollTotal() drama2 0}}
			{{#^rollTotal() drama2 0}}
				<div class="sheet-age-roller-line sheet-age-roller-stunt">
					<span class="sheet-age-roller-stunt-dice-label sheet-age-roller-col1" data-i18n="stunt_points">Stunt Points</span><span class="sheet-age-roller-stunt-dice sheet-age-roller-col2">{{drama}} or {{drama2}}</span>
				</div>
			{{/^rollTotal() drama2 0}}
		{{/rollTotal() die1 drama}}

		{{#rollTotal() die2 drama}}
			{{^drama2}}
				<div class="sheet-age-roller-line sheet-age-roller-stunt">
					<span class="sheet-age-roller-stunt-dice-label sheet-age-roller-col1" data-i18n="stunt_points">Stunt Points</span><span class="sheet-age-roller-stunt-dice sheet-age-roller-col2">{{drama}}</span>
				</div>
			{{/drama2}}
			{{#rollTotal() drama2 0}}
				<div class="sheet-age-roller-line sheet-age-roller-stunt">
					<span class="sheet-age-roller-stunt-dice-label sheet-age-roller-col1" data-i18n="stunt_points">Stunt Points</span><span class="sheet-age-roller-stunt-dice sheet-age-roller-col2">{{drama}}</span>
				</div>
			{{/rollTotal() drama2 0}}
			{{#^rollTotal() drama2 0}}
				<div class="sheet-age-roller-line sheet-age-roller-stunt">
					<span class="sheet-age-roller-stunt-dice-label sheet-age-roller-col1" data-i18n="stunt_points">Stunt Points</span><span class="sheet-age-roller-stunt-dice sheet-age-roller-col2">{{drama}} or {{drama2}}</span>
				</div>
			{{/^rollTotal() drama2 0}}
		{{/rollTotal() die2 drama}}
	</div>
</rolltemplate>

<!-- Strings translations for Roll Queries-->
<div style="display: none;">
	<span data-i18n="ability">Ability</span>
	<span data-i18n="ability_value">Ability Value (field 1 of 4)</span>
	<span data-i18n="focus_value">Focus (field 2 of 4)</span>
	<span data-i18n="additional_modifier">Additional modifier (field 3 of 4)</span>
	<span data-i18n="additional_modifier2">Additional modifier</span>
	<span data-i18n="ability_score">Ability Score</span>
	<span data-i18n="roll_description">Roll description (field 4 of 4, optional)</span>
	<span data-i18n="die_roll">Die Roll</span>
	<span data-i18n="focus">Focus</span>
	<span data-i18n="cunning">Cunning</span>
	<span data-i18n="magic">Magic</span>
	<span data-i18n="magic_arcana_focus">Magic Arcana Focus</span>
	<span data-i18n="spellcasting_ability">Spellcasting Ability</span>
	<span data-i18n="psychic_ability">Psychic Ability</span>
	<span data-i18n="ability_focus">Ability Focus</span>
	<span data-i18n="arcana_focus">Arcana Focus</span>
	<span data-i18n="psychic_focus">Psychic Focus</span>
	<span data-i18n="fatigue_check_for">Fatigue Check for</span>
	<span data-i18n="price_check_for">Price Check for</span>
	<span data-i18n="each_fatiguing_spell">Each Fatiguing spell this Encounter</span>
	<span data-i18n="fear_label">Fear</span>
	<span data-i18n="armor_penalty">Armor Penalty</span>
	<span data-i18n="initiative_adjustment">Initiative Adjustment</span>
	<span data-i18n="initiative">Initiative</span>
	<span data-i18n="resources_label">Resources</span>
	<span data-i18n="income_label">Income</span>
	<span data-i18n="attack_bonus_label">Attack Bonus</span>
	<span data-i18n="magic_arcana_focus">Magic Arcana Focus</span>
	<span data-i18n="spellpower_label">Spellpower</span>
	<span data-i18n="fatigue_tn_label">Fatigue TN</span>
	<span data-i18n="price_tn_label">Price TN</span>
	<span data-i18n="kanna_cost_label">Kanna Cost</span>
	<span data-i18n="power_cost_label">Power Cost</span>
	<span data-i18n="plus_one_tn">+1 TN</span>
	<span data-i18n="public_roll">Public Roll</span>
	<span data-i18n="whisper_roll">Whisper Roll</span>
	<span data-i18n="whisper">Whisper</span>
</div>

<script type="text/worker">

  /* ---- BEGIN: TheAaronSheet.js ---- */
  // Github:   https://github.com/shdwjk/TheAaronSheet/blob/master/TheAaronSheet.js
  // By:       The Aaron, Arcane Scriptomancer
  // Contact:  https://app.roll20.net/users/104025/the-aaron

  var TAS = TAS || (function(){
      'use strict';

      var version = '0.2.5',
          lastUpdate = 1504710542,

          loggingSettings = {
              debug: {
                  key:     'debug',
                  title:   'DEBUG',
                  color: {
                      bgLabel: '#7732A2',
                      label:   '#F2EF40',
                      bgText:  '#FFFEB7',
                      text:    '#7732A2'
                  }
              },
              error: {
                  key:     'error',
                  title:   'Error',
                  color: {
                      bgLabel: '#C11713',
                      label:   'white',
                      bgText:  '#C11713',
                      text:    'white'
                  }
              },
              warn: {
                  key:     'warn',
                  title:   'Warning',
                  color: {
                      bgLabel: '#F29140',
                      label:   'white',
                      bgText:  '#FFD8B7',
                      text:    'black'
                  }
              },
              info: {
                  key:     'info',
                  title:   'Info',
                  color: {
                      bgLabel: '#413FA9',
                      label:   'white',
                      bgText:  '#B3B2EB',
                      text:    'black'
                  }
              },
              notice: {
                  key:     'notice',
                  title:   'Notice',
                  color: {
                      bgLabel: '#33C133',
                      label:   'white',
                      bgText:  '#ADF1AD',
                      text:    'black'
                  }
              },
              log: {
                  key:     'log',
                  title:   'Log',
                  color: {
                      bgLabel: '#f2f240',
                      label:   'black',
                      bgText:  '#ffff90',
                      text:    'black'
                  }
              },
              callstack: {
                  key:     'TAS',
                  title:   'function',
                  color: {
                      bgLabel: '#413FA9',
                      label:   'white',
                      bgText:  '#B3B2EB',
                      text:    'black'
                  }
              },
              callstack_async: {
                  key:     'TAS',
                  title:   'ASYNC CALL',
                  color: {
                      bgLabel: '#413FA9',
                      label:   'white',
                      bgText:  '#413FA9',
                      text:    'white'
                  }
              },
              TAS: {
                  key:     'TAS',
                  title:   'TAS',
                  color: {
                      bgLabel: 'grey',
                      label:   'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)',
                      bgText:  'grey',
                      text:    'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)'
                  }
              }
          },


          config = {
              debugMode: false,
              logging: {
                  log: true,
                  notice: true,
                  info: true,
                  warn: true,
                  error: true,
                  debug: false
              }
          },

          callstackRegistry = [],
      queuedUpdates = {}, //< Used for delaying saves till the last moment.

      complexType = function(o){
          switch(typeof o){
              case 'string':
                  return 'string';
              case 'boolean':
                  return 'boolean';
              case 'number':
                  return (_.isNaN(o) ? 'NaN' : (o.toString().match(/\./) ? 'decimal' : 'integer'));
              case 'function':
                  return 'function: '+(o.name ? o.name+'()' : '(anonymous)');
              case 'object':
                  return (_.isArray(o) ? 'array' : (_.isArguments(o) ? 'arguments' : ( _.isNull(o) ? 'null' : 'object')));
              default:
                  return typeof o;
          }
      },

    dataLogger = function(primaryLogger,secondaryLogger,data){
          _.each(data,function(m){
              var type = complexType(m);
              switch(type){
                  case 'string':
                      primaryLogger(m);
                      break;
                  case 'undefined':
                  case 'null':
                  case 'NaN':
                      primaryLogger('['+type+']');
                      break;
                  case 'number':
                  case 'not a number':
                  case 'integer':
                  case 'decimal':
                  case 'boolean':
                      primaryLogger('['+type+']: '+m);
                      break;
                  default:
                      primaryLogger('['+type+']:=========================================');
                      secondaryLogger(m);
                      primaryLogger('=========================================================');
                      break;
              }
          });
    },


      colorLog = function(options){
          var coloredLoggerFunction,
              key = options.key,
              label = options.title || 'TAS',
              lBGColor = (options.color && options.color.bgLabel) || 'blue',
              lTxtColor = (options.color && options.color.label) || 'white',
              mBGColor = (options.color && options.color.bgText) || 'blue',
              mTxtColor = (options.color && options.color.text) || 'white';

          coloredLoggerFunction = function(message){
              /* eslint-disable no-console */
              console.log(
                  '%c '+label+': %c '+message + ' ',
                  'background-color: '+lBGColor+';color: '+lTxtColor+'; font-weight:bold;',
                  'background-color: '+mBGColor+';color: '+mTxtColor+';'
              );
              /* eslint-enable no-console */
          };
          return function(){
              if('TAS'===key || config.logging[key]){
                  /* eslint-disable no-console */
                 dataLogger(coloredLoggerFunction,function(m){console.log(m);},_.toArray(arguments));
                  /* eslint-enable no-console */
              }
          };
      },

      logDebug  = colorLog(loggingSettings.debug),
      logError  = colorLog(loggingSettings.error),
      logWarn   = colorLog(loggingSettings.warn),
      logInfo   = colorLog(loggingSettings.info),
      logNotice = colorLog(loggingSettings.notice),
      logLog    = colorLog(loggingSettings.log),
      log       = colorLog(loggingSettings.TAS),
      logCS     = colorLog(loggingSettings.callstack),
      logCSA    = colorLog(loggingSettings.callstack_async),

      registerCallstack = function(callstack,label){
          var idx=_.findIndex(callstackRegistry,function(o){
              return (_.difference(o.stack,callstack).length === _.difference(callstack,o.stack).length) &&
                  _.difference(o.stack,callstack).length === 0 &&
                  o.label === label;
          });
          if(-1 === idx){
              idx=callstackRegistry.length;
              callstackRegistry.push({
                  stack: callstack,
                  label: label
              });
          }
          return idx;
      },

      setConfigOption = function(options){
          var newconf =_.defaults(options,config);
          newconf.logging=_.defaults(
              (options && options.logging)||{},
              config.logging
          );
          config=newconf;
      },

      isDebugMode = function(){
          return config.debugMode;
      },

      debugMode = function(){
          config.logging.debug=true;
          config.debugMode = true;
      },

      getCallstack = function(){
          var e = new Error('dummy'),
              stack = _.map(_.rest(e.stack.replace(/^[^(]+?[\n$]/gm, '')
              .replace(/^\s+at\s+/gm, '')
              .replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@')
              .split('\n')),function(l){
                  return l.replace(/\s+.*$/,'');
              });
          return stack;
      },
      logCallstackSub = function(cs){
          var matches, csa;
          _.find(cs,function(line){
              matches = line.match(/TAS_CALLSTACK_(\d+)/);
              if(matches){
                 csa=callstackRegistry[matches[1]];
                 logCSA( '===================='+(csa.label ? '> '+csa.label+' <' : '')+'====================');
                 logCallstackSub(csa.stack);
                 return true;
              }
              logCS(line);
              return false;
          });
      },
      logCallstack = function(){
          var cs;
          if(config.debugMode){
              cs = getCallstack();
              cs.shift();
              log('==============================> CALLSTACK <==============================');
              logCallstackSub(cs);
              log('=========================================================================');
          }
      },


      wrapCallback = function (label, callback, context){
          var callstack;
          if('function' === typeof label){
              context=callback;
              callback=label;
              label=undefined;
          }
          if(!config.debugMode){
              return (function(cb,ctx){
                  return function(){
                      cb.apply(ctx||{},arguments);
                  };
              }(callback,context));
          }

          callstack = getCallstack();
          callstack.shift();

          return (function(cb,ctx,cs,lbl){
              var ctxref=registerCallstack(cs,lbl);

              /*jshint -W054 */
              return new Function('cb','ctx','TASlog',
                  "return function TAS_CALLSTACK_"+ctxref+"(){"+
                      "var start,end;"+
                      "TASlog('Entering: '+(cb.name||'(anonymous function)'));"+
                      "start=_.now();"+
                      "cb.apply(ctx||{},arguments);"+
                      "end=_.now();"+
                      "TASlog('Exiting: '+(cb.name||'(anonymous function)')+' :: '+(end-start)+'ms elapsed');"+
                  "};")(cb,ctx,log);
              /*jshint +W054 */
          }(callback,context,callstack,label));
      },


      prepareUpdate = function( attribute, value ){
          queuedUpdates[attribute]=value;
      },

      applyQueuedUpdates = function() {
        setAttrs(queuedUpdates);
        queuedUpdates = {};
      },

    namesFromArgs = function(args,base){
          return _.chain(args)
              .reduce(function(memo,attr){
                  if('string' === typeof attr) {
                      memo.push(attr);
                  } else if(_.isArray(args) || _.isArguments(args)){
                      memo = namesFromArgs(attr,memo);
                  }
                  return memo;
              },(_.isArray(base) && base) || [])
              .uniq()
              .value();
    },

    addId = function(obj,value){
      Object.defineProperty(obj,'id',{
        value: value,
        writable: false,
        enumerable: false
      });
    },

    addProp = function(obj,prop,value,fullname){
      (function(){
              var pname=(_.contains(['S','F','I','D'],prop) ? '_'+prop : prop),
                  full_pname = fullname || prop,
                  pvalue=value;

              _.each(['S','I','F'],function(p){
                  if( !_.has(obj,p)){
                      Object.defineProperty(obj, p, {
                          value: {},
                          enumerable: false,
                          readonly: true
                      });
                  }
              });
              if( !_.has(obj,'D')){
                  Object.defineProperty(obj, 'D', {
                      value: _.reduce(_.range(10),function(m,d){
                              Object.defineProperty(m, d, {
                                  value: {},
                                  enumerable: true,
                                  readonly: true
                              });
                              return m;
                          },{}),
                      enumerable: false,
                      readonly: true
                  });
              }


              // Raw value
        Object.defineProperty(obj, pname, {
                  enumerable: true,
          set: function(v){
                      if(v!==pvalue) {
                          pvalue=v;
                          prepareUpdate(full_pname,v);
                      }
          },
          get: function(){
            return pvalue;
          }
        });

              // string value
        Object.defineProperty(obj.S, pname, {
                  enumerable: true,
          set: function(v){
                      var val=v.toString();
                      if(val !== pvalue) {
                          pvalue=val;
                          prepareUpdate(full_pname,val);
                      }
          },
          get: function(){
            return pvalue.toString();
          }
        });

              // int value
        Object.defineProperty(obj.I, pname, {
                  enumerable: true,
          set: function(v){
                      var val=parseInt(v,10) || 0;
                      if(val !== pvalue){
                          pvalue=val;
                          prepareUpdate(full_pname,val);
                      }
          },
          get: function(){
            return parseInt(pvalue,10) || 0;
          }
        });

              // float value
        Object.defineProperty(obj.F, pname, {
                  enumerable: true,
          set: function(v){
                      var val=parseFloat(v) || 0;
                      if(val !== pvalue) {
                          pvalue=val;
                          prepareUpdate(full_pname,val);
                      }
          },
          get: function(){
            return parseFloat(pvalue) || 0;
          }
        });
              _.each(_.range(10),function(d){
                  Object.defineProperty(obj.D[d], pname, {
                      enumerable: true,
                      set: function(v){
                          var val=(parseFloat(v) || 0).toFixed(d);
                          if(val !== pvalue){
                              pvalue=val;
                              prepareUpdate(full_pname,val);
                          }
                      },
                      get: function(){
                          return (parseFloat(pvalue) || 0).toFixed(d);
                      }
                  });
              });

      }());
    },

    repeating = function( section ) {
      return (function(s){
        var sectionName = s,
          attrNames = [],
          fieldNames = [],
          operations = [],
                  after = [],

        repAttrs = function TAS_Repeating_Attrs(){
          attrNames = namesFromArgs(arguments,attrNames);
          return this;
        },
        repFields = function TAS_Repeating_Fields(){
          fieldNames = namesFromArgs(arguments,fieldNames);
          return this;
        },
        repReduce = function TAS_Repeating_Reduce(func, initial, final, context) {
          operations.push({
                      type: 'reduce',
                      func: (func && _.isFunction(func) && func) || _.noop,
                      memo: (_.isUndefined(initial) && 0) || initial,
                      final: (final && _.isFunction(final) && final) || _.noop,
                      context: context || {}
                  });
          return this;
        },
        repMap = function TAS_Repeating_Map(func, final, context) {
          operations.push({
                      type: 'map',
                      func: (func && _.isFunction(func) && func) || _.noop,
                      final: (final && _.isFunction(final) && final) || _.noop,
                      context: context || {}
                  });
          return this;
        },
              repEach = function TAS_Repeating_Each(func, final, context) {
          operations.push({
                      type: 'each',
                      func: (func && _.isFunction(func) && func) || _.noop,
                      final: (final && _.isFunction(final) && final) || _.noop,
                      context: context || {}
                  });
          return this;
              },
              repTap = function TAS_Repeating_Tap(final, context) {
          operations.push({
                      type: 'tap',
                      final: (final && _.isFunction(final) && final) || _.noop,
                      context: context || {}
                  });
          return this;
              },
              repAfter = function TAS_Repeating_After(callback,context) {
          after.push({
                      callback: (callback && _.isFunction(callback) && callback) || _.noop,
                      context: context || {}
                  });
          return this;
              },
        repExecute = function TAS_Repeating_Execute(callback,context){
          var rowSet = {},
            attrSet = {},
            fieldIds = [],
            fullFieldNames = [];

                  repAfter(callback,context);

          // call each operation per row.
          // call each operation's final
          getSectionIDs("repeating_"+sectionName,function(ids){
            fieldIds = ids;
            fullFieldNames = _.reduce(fieldIds,function(memo,id){
              return memo.concat(_.map(fieldNames,function(name){
                return 'repeating_'+sectionName+'_'+id+'_'+name;
              }));
            },[]);
            getAttrs( _.uniq(attrNames.concat(fullFieldNames)), function(values){
              _.each(attrNames,function(aname){
                if(values.hasOwnProperty(aname)){
                  addProp(attrSet,aname,values[aname]);
                }
              });

              rowSet = _.reduce(fieldIds,function(memo,id){
                var r={};
                addId(r,id);
                _.each(fieldNames,function(name){
                  var fn = 'repeating_'+sectionName+'_'+id+'_'+name;
                  addProp(r,name,values[fn],fn);
                });

                memo[id]=r;

                return memo;
              },{});

                          _.each(operations,function(op){
                              var res;
                              switch(op.type){
                                  case 'tap':
                                      _.bind(op.final,op.context,rowSet,attrSet)();
                                      break;

                                  case 'each':
                                      _.each(rowSet,function(r){
                                          _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                      });
                                      _.bind(op.final,op.context,rowSet,attrSet)();
                                      break;

                                  case 'map':
                                      res = _.map(rowSet,function(r){
                                          return _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                      });
                                      _.bind(op.final,op.context,res,rowSet,attrSet)();
                                      break;

                                  case 'reduce':
                                      res = op.memo;
                                      _.each(rowSet,function(r){
                                          res = _.bind(op.func,op.context,res,r,attrSet,r.id,rowSet)();
                                      });
                                      _.bind(op.final,op.context,res,rowSet,attrSet)();
                                      break;
                              }
                          });

                          // finalize attrs
                          applyQueuedUpdates();
                          _.each(after,function(op){
                              _.bind(op.callback,op.context)();
                          });
            });
          });
        };

        return {
          attrs: repAttrs,
          attr: repAttrs,

          column: repFields,
          columns: repFields,
          field: repFields,
          fields: repFields,

          reduce: repReduce,
          inject: repReduce,
          foldl: repReduce,

          map: repMap,
          collect: repMap,

          each: repEach,
                  forEach: repEach,

                  tap: repTap,
                  'do': repTap,

          after: repAfter,
          last: repAfter,
          done: repAfter,

          execute: repExecute,
          go: repExecute,
          run: repExecute
        };
      }(section));
    },


      repeatingSimpleSum = function(section, field, destination){
          repeating(section)
              .attr(destination)
              .field(field)
              .reduce(function(m,r){
                  return m + (r.F[field]);
              },0,function(t,r,a){
                  a.S[destination]=t;
              })
              .execute();
      };

      /* eslint-disable no-console */
    console.log('%c..*`*..*`*.  The Aaron Sheet  v'+version+'  .*`*..*`*..','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
    console.log('%c..*`*..*`*.  Last update: '+(new Date(lastUpdate*1000))+'  .*`*..*`*..','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
      /* eslint-enable no-console */


      return {
          /* Repeating Sections */
          repeatingSimpleSum: repeatingSimpleSum,
      repeating: repeating,

          /* Configuration */
          config: setConfigOption,

          /* Debugging */
          callback: wrapCallback,
          callstack: logCallstack,
          debugMode: debugMode,
          isDebugMode: isDebugMode,
          _fn: wrapCallback,

          /* Logging */
          debug: logDebug,
          error: logError,
          warn: logWarn,
          info: logInfo,
          notice: logNotice,
          log: logLog
      };
  }());

  /* ---- END: TheAaronSheet.js ---- */

  console.log("Loading script(s)");

	/*config Roll Queries translations */
	on("sheet:opened", function(eventInfo){
		setAttrs({
			public_roll: getTranslationByKey("public_roll"),
			whisper_roll: getTranslationByKey("whisper_roll"),
			whisper: getTranslationByKey("whisper"),
			fighting_label: getTranslationByKey("fighting"),
			income_label: getTranslationByKey("income_label"),
			accuracy_label: getTranslationByKey("accuracy"),
			communication_label: getTranslationByKey("communication"),
			constitution_label: getTranslationByKey("constitution"),
			dexterity_label: getTranslationByKey("dexterity"),
			perception_label: getTranslationByKey("perception"),
			strength_label: getTranslationByKey("strength"),
			willpower_label: getTranslationByKey("willpower"),
			intelligence_label: getTranslationByKey("intelligence"),
			cunning_label: getTranslationByKey("cunning"),
			none: getTranslationByKey("none"),
			plus_one_tn: getTranslationByKey("plus_one_tn"),
			power_cost_label: getTranslationByKey("power_cost_label"),
			kanna_cost_label: getTranslationByKey("kanna_cost_label"),
			fatigue_tn_label: getTranslationByKey("fatigue_tn_label"),
			price_tn_label: getTranslationByKey("price_tn_label"),
			ability: getTranslationByKey("ability"),
			ability_value: getTranslationByKey("ability_value"),
			focus_value: getTranslationByKey("focus_value"),
			additional_modifier: getTranslationByKey("additional_modifier"),
			additional_modifier2: getTranslationByKey("additional_modifier2"),
			ability_score: getTranslationByKey("ability_score"),
			roll_description: getTranslationByKey("roll_description"),
			die_roll: getTranslationByKey("die_roll"),
			focus: getTranslationByKey("focus"),
			magic_label: getTranslationByKey("magic"),
			magic_arcana_focus: getTranslationByKey("magic_arcana_focus"),
			spellcasting_ability: getTranslationByKey("spellcasting_ability"),
			psychic_ability: getTranslationByKey("psychic_ability"),
			ability_focus: getTranslationByKey("ability_focus"),
			arcana_focus: getTranslationByKey("arcana_focus"),
			psychic_focus: getTranslationByKey("psychic_focus"),
			fatigue_check_for: getTranslationByKey("fatigue_check_for"),
			price_check_for: getTranslationByKey("price_check_for"),
			each_fatiguing_spell: getTranslationByKey("each_fatiguing_spell"),
			fear_label: getTranslationByKey("fear_label"),
			armor_penalty: getTranslationByKey("armor_penalty"),
			initiative_adjustment: getTranslationByKey("initiative_adjustment"),
			initiative: getTranslationByKey("initiative"),
			resources_label: getTranslationByKey("resources"),
			attack_bonus_label: getTranslationByKey("attack_bonus_label"),
			magic_arcana_focus: getTranslationByKey("magic_arcana_focus"),
			spellpower_label: getTranslationByKey("spellpower_label")
		});
	});

	on('clicked:dice-roller', function(v) {
		startRoll("@{wtype}&{template:age-roller} {{color-@{color}=1}} {{total=[[?{@{ability_value}|0} + ?{@{focus_value}|@{none}, 0|+2, 2|+3, 3} - @{fatigue} + ?{@{additional_modifier}|0} ]]}} {{mod=?{@{ability_value}|0}}} {{ability=@{ability_score}}} {{desc=?{@{roll_description}|@{die_roll}}}} {{fatigue=[[@{fatigue}]]}} {{extramod3=[[?{@{additional_modifier}|0}]]}} {{extramod3-name=@{additional_modifier2}}} {{extramod2=[[?{@{focus_value}|@{none}, 0|+2, 2|+3, 3}]]}} {{extramod2-name=@{focus}}} {{player=@{char-name-option}}} {{die1=[[1d6]]}} {{die2=[[1d6]]}} {{drama=[[1d6]]}} {{drama2=[[@{stunts2-select}]]}}", (results) => {
			const total = results.results.die1.result + results.results.die2.result + results.results.drama.result + results.results.total.result
			finishRoll(results.rollId,{total: total});
		});
	});

	on('clicked:initiative_check', (info) => {
		getAttrs(["initiative-tiebreaker"], function(v) {
			let total = 0;
			startRoll("@{wtype}&{template:age-roller} {{color-@{color}=1}} {{total=[[@{dexterity} + @{init-bonus} + @{armor-penalty-for-dex} + @{fear-initiative} - @{fatigue}]]}} {{mod=[[@{dexterity}]]}} {{ability=@{dexterity_label}}} {{extramod1=[[@{init-bonus}]]}} {{extramod1-name=@{initiative_adjustment}}} {{extramod2=[[@{armor-penalty-for-dex}]]}} {{extramod2-name=@{armor_penalty}}} {{extramod3=[[@{fear-initiative}]]}} {{extramod3-name=@{fear_label} @{fear}}} {{desc=@{initiative}}} {{fatigue=[[@{fatigue}]]}} {{tiebreaker=[[@{initiative-tiebreaker}]]}} {{tiebreaker2=[[@{dexterity}/100)]]}} {{player=@{char-name-option}}} {{die1=[[1d6]]}} {{die2=[[1d6]]}} {{drama=[[1d6]]}} {{drama2=[[@{stunts2-select}]]}}", (results) => {
				total = results.results.die1.result + results.results.die2.result + results.results.drama.result + results.results.total.result
				if (v["initiative-tiebreaker"] === "1") {total = Math.round((results.results.die1.result + results.results.die2.result + (results.results.drama.result * 1.1) + results.results.total.result + results.results.tiebreaker2.result) * 100) / 100};
				finishRoll(results.rollId,{total: total});
				startRoll(`!&{template:default} [[${total} &{tracker}]]`, (results) => {finishRoll(results.rollId);});
			});
		});
	});

	on('clicked:repeating_attack-list:attackdice', (info) => {
		getAttrs(["repeating_attack-list_attack-name", "repeating_attack-list_attackroll"], function(v) {
			startRoll(`@{wtype}&{template:age-roller} {{color-@{color}=1}} {{total=[[${v["repeating_attack-list_attackroll"]} + @{aim-select} - @{fatigue}]]}} {{mod=${v["repeating_attack-list_attackroll"]}}} {{ability=@{attack_bonus_label}}} {{aimcheck=[[@{aim-select}]]}} {{desc=${v["repeating_attack-list_attack-name"]}}} {{fatigue=[[@{fatigue}]]}} {{player=@{char-name-option}}} {{die1=[[1d6]]}} {{die2=[[1d6]]}} {{drama=[[1d6]]}} {{drama2=[[@{stunts2-select}]]}}`, (results) => {
				const total = results.results.die1.result + results.results.die2.result + results.results.drama.result + results.results.total.result
				finishRoll(results.rollId,{total: total});
			});
		});
	});

	on('clicked:repeating_attack-list:weapondamage', (info) => {
		getAttrs(["repeating_attack-list_attack-name", "repeating_attack-list_attack-damage"], function(v) {
			startRoll(`@{wtype}&{template:age-roller} {{color-@{color}=1}} {{damagedice=${v["repeating_attack-list_attack-damage"]}}} {{damage=[[${v["repeating_attack-list_attack-damage"]}+0]]}} {{desc=${v["repeating_attack-list_attack-name"]}}} {{player=@{char-name-option}}} {{simple}}`, (results) => {
				finishRoll(results.rollId);
			});
		});
	});

	function ability_check(ability, thisfocusn, thisfocusv, morenotes, tn, evenmorenotes, miscMods) {
		getAttrs([`${ability}_label`, "perception_label", "intelligence_label", "accuracy_label", "fighting_label", "dexterity_label"], function(v) {
			let thismodv = `0`;
			let abilitylabel = v[`${ability}_label`];
			if (ability === "resources") {ability = "income";};
			if (abilitylabel === v.perception_label) {thismodv = `@{fear-perception}`;};
			if (abilitylabel === v.intelligence_label) {thismodv = `@{fear-intelligence}`;};
			if (abilitylabel === v.accuracy_label) {thismodv = `@{fear-accuracy}`;};
			if (abilitylabel === v.fighting_label) {thismodv = `@{fear-fighting}`;};
			let thismod = `{{extramod2=[[${thismodv}]]}} {{extramod2-name=@{fear_label} @{fear}}}`;
			if (abilitylabel === v.dexterity_label) {
				thismodv = `@{armor-penalty-for-dex}`;
				thismod = `{{extramod2=[[@{armor-penalty-for-dex}]]}} {{extramod2-name=@{armor_penalty}}}`;
			};
			let thisdesc = `{{desc=${abilitylabel}}}`;
			let thistotal = `{{total=[[@{${ability}} - @{fatigue} + ${thismodv}]]}}`;
      let bonus = isNaN(parseInt(miscMods, 10)) ? 0 : parseInt(miscMods, 10);
			if (thisfocusv > 0) {
				thisdesc = `{{desc=${abilitylabel} (${thisfocusn})}}`;
        thistotal = `{{total=[[@{${ability}} + ${thisfocusv} - @{fatigue} + ${thismodv} + ${bonus}]]}} {{extramod1=[[${thisfocusv}]]}} {{extramod1-name=${thisfocusn} @{focus}}}`;
			};
			if (morenotes) {thisdesc = morenotes;};
      var tnText = "";
      if (tn) {
        tnText = `{{tn=${tn}}}`;
      }
      var roll = `@{wtype}&{template:age-roller} {{color-@{color}=1}} {{mod=@{${ability}}}} {{ability=${abilitylabel}}} ${thisdesc} ${thistotal} ${thismod} ${tnText} {{fatigue=[[@{fatigue}]]}} {{player=@{char-name-option}}} {{die1=[[1d6]]}} {{die2=[[1d6]]}} {{drama=[[1d6]]}} {{drama2=[[@{stunts2-select}]]}} ${evenmorenotes}`;
			console.log(roll);
      startRoll(roll, (results) => {
				const total = results.results.die1.result + results.results.die2.result + results.results.drama.result + results.results.total.result
				finishRoll(results.rollId,{total: total});
			});
		});
	}

	on('clicked:accuracy_check', function(v) {ability_check("accuracy")});
	on('clicked:communication_check', function(v) {ability_check("communication")});
	on('clicked:constitution_check', function(v) {ability_check("constitution")});
	on('clicked:cunning_check', function(v) {ability_check("cunning")});
	on('clicked:dexterity_check', function(v) {ability_check("dexterity")});
	on('clicked:fighting_check', function(v) {ability_check("fighting")});
	on('clicked:intelligence_check', function(v) {ability_check("intelligence")});
	on('clicked:magic_check', function(v) {ability_check("magic")});
	on('clicked:perception_check', function(v) {ability_check("perception")});
	on('clicked:strength_check', function(v) {ability_check("strength")});
	on('clicked:willpower_check', function(v) {ability_check("willpower")});

	on('clicked:repeating_accuracy-focus:focus-check', (info) => {getAttrs(["repeating_accuracy-focus_focusname", "repeating_accuracy-focus_focusbonus"], function(v) {ability_check("accuracy", v["repeating_accuracy-focus_focusname"], v["repeating_accuracy-focus_focusbonus"])});});
	on('clicked:repeating_communication-focus:focus-check', (info) => {getAttrs(["repeating_communication-focus_focusname", "repeating_communication-focus_focusbonus"], function(v) {ability_check("communication", v["repeating_communication-focus_focusname"], v["repeating_communication-focus_focusbonus"])});});
	on('clicked:repeating_constitution-focus:focus-check', (info) => {getAttrs(["repeating_constitution-focus_focusname", "repeating_constitution-focus_focusbonus"], function(v) {ability_check("constitution", v["repeating_constitution-focus_focusname"], v["repeating_constitution-focus_focusbonus"])});});
	on('clicked:repeating_cunning-focus:focus-check', (info) => {getAttrs(["repeating_cunning-focus_focusname", "repeating_cunning-focus_focusbonus"], function(v) {ability_check("cunning", v["repeating_cunning-focus_focusname"], v["repeating_cunning-focus_focusbonus"])});});
	on('clicked:repeating_dexterity-focus:focus-check', (info) => {getAttrs(["repeating_dexterity-focus_focusname", "repeating_dexterity-focus_focusbonus"], function(v) {ability_check("dexterity", v["repeating_dexterity-focus_focusname"], v["repeating_dexterity-focus_focusbonus"])});});
	on('clicked:repeating_fighting-focus:focus-check', (info) => {getAttrs(["repeating_fighting-focus_focusname", "repeating_fighting-focus_focusbonus"], function(v) {ability_check("fighting", v["repeating_fighting-focus_focusname"], v["repeating_fighting-focus_focusbonus"])});});
	on('clicked:repeating_intelligence-focus:focus-check', (info) => {getAttrs(["repeating_intelligence-focus_focusname", "repeating_intelligence-focus_focusbonus"], function(v) {ability_check("intelligence", v["repeating_intelligence-focus_focusname"], v["repeating_intelligence-focus_focusbonus"])});});
	on('clicked:repeating_magic-focus:focus-check', (info) => {getAttrs(["repeating_magic-focus_focusname", "repeating_magic-focus_focusbonus"], function(v) {ability_check("magic", v["repeating_magic-focus_focusname"], v["repeating_magic-focus_focusbonus"])});});
	on('clicked:repeating_perception-focus:focus-check', (info) => {getAttrs(["repeating_perception-focus_focusname", "repeating_perception-focus_focusbonus"], function(v) {ability_check("perception", v["repeating_perception-focus_focusname"], v["repeating_perception-focus_focusbonus"])});});
	on('clicked:repeating_strength-focus:focus-check', (info) => {getAttrs(["repeating_strength-focus_focusname", "repeating_strength-focus_focusbonus"], function(v) {ability_check("strength", v["repeating_strength-focus_focusname"], v["repeating_strength-focus_focusbonus"])});});
	on('clicked:repeating_willpower-focus:focus-check', (info) => {getAttrs(["repeating_willpower-focus_focusname", "repeating_willpower-focus_focusbonus"], function(v) {ability_check("willpower", v["repeating_willpower-focus_focusname"], v["repeating_willpower-focus_focusbonus"])});});

  function focusFinder(ability, focusName, callback) {
    TAS.repeating(`${ability.toLowerCase()}-focus`)
       .fields('focusname', 'focusbonus')
       .reduce(function(memo, row, attrSet, id, rowSet) {
         console.log('RowSet has keys: '+_.keys(rowSet).join(', '));
         console.log('AttrSet has keys: '+_.keys(attrSet).join(', '));
         console.log("Rowset: ", rowSet);
         console.log("Row: ", row);
         const name = row["focusname"];
         const bonus = row["focusbonus"];
         console.log("name :", name, " bonus :", bonus);
         // if name is focusName, use as memo
         if (name && focusName && name.toLowerCase() === focusName.toLowerCase()) {
           console.log("found focusName");
           memo = bonus;
         }
         return memo;
       }, 0, function(memo, rowSet, attrSet) {
         // if memo is present, use that as courage
         // otherwise use some defaults
         var bonus = 0;
         if (memo) {
           bonus = memo;
         }
         console.log("Using bonus: ", bonus);
         callback(ability, focusName, bonus);
       })
       .execute();
  }

  function alienationCheck(alienationTestType, tn) {
    var alienationSlug = alienationTestType.toLowerCase();
    var focusName;
    var map = {
      "Entities": "Courage",
      "Visitations": "Faith",
      "Phenomena": "Morale",
      "Revelations": "Self-Discipline"
    }
    focusName = map[alienationTestType];
    getAttrs([`${alienationSlug}_misc_mod`,`${alienationSlug}_tn_mod`,], function(attrs) {
      var miscMod = parseInt(attrs[`${alienationSlug}_misc_mod`], 10);
      var tnMod = parseInt(attrs[`${alienationSlug}_tn_mod`], 10);
      if (!isNaN(tnMod) && !isNaN(tn)) {
        tn += tnMod;
      }
      focusFinder("willpower", focusName, function(ability, focusName, focusBonus) {
        var otherModsText = '';
        var otherMods = 0;
        if (!isNaN(miscMod)) {
          otherMods += miscMod;
          otherModsText += `{{extramod3-name=Misc Mod}} {{extramod3=${miscMod}}} `;
        }
        if (!isNaN(tnMod)) {
          otherModsText += `{{note2-name=TN Mod}} {{note2=${tnMod}}} `;
        }
        ability_check(ability,
                      focusName,
                      focusBonus,
                      `{{desc=Alienation: ${alienationTestType}}}`,
                      tn,
                      otherModsText,
                      otherMods)
      });
    });
  }

  on('clicked:alienation-entities-test', () => {
    alienationCheck("Entities");
  });
  on('clicked:alienation-visitations-test', () => {
    alienationCheck("Visitations");
  });
  on('clicked:alienation-phenomena-test', () => {
    alienationCheck("Phenomena");
  });
  on('clicked:alienation-revelations-test', () => {
    alienationCheck("Revelations");
  });

  function abilityCheckFromAttrNames(repeating_section, attr_ability, attr_focus, attr_tn) {
    const attrNames = [`repeating_${repeating_section}_${attr_ability}`, `repeating_${repeating_section}_${attr_focus}`, `repeating_${repeating_section}_${attr_tn}`];
    console.log("AttrNames: ", attrNames);
    getAttrs(attrNames, function(attrs) {
    console.log("Attrs: ", attrs);
      var ability = attrs[`repeating_${repeating_section}_${attr_ability}`];
      var focus = attrs[`repeating_${repeating_section}_${attr_focus}`];
      var tn = attrs[`repeating_${repeating_section}_${attr_tn}`];
      console.log("Ability: ", ability, "Focus: ", focus, "TN: ", tn);
      focusFinder(ability, focus, function(ability, focus, bonus) {
        console.log("BOnus!: ", bonus);
        ability_check(ability, focus, bonus, undefined, tn);
      });
    });
  }

  on('clicked:repeating_dangeroustexts:dangeroustexts-deciphertest', (e) => {
    abilityCheckFromAttrNames("dangeroustexts", "deciphertest_ability", "deciphertest_focus", "deciphertest_tn");
  });
  on('clicked:repeating_dangeroustexts:dangeroustexts-alienationtest', (e) => {
    getAttrs(["repeating_dangeroustexts_alienation_test_type", "repeating_dangeroustexts_alienation_test_tn"], function(attrs) {
      var alienationTestType = attrs["repeating_dangeroustexts_alienation_test_type"];
      var tn = attrs["repeating_dangeroustexts_alienation_test_tn"];
      alienationCheck(alienationTestType, tn);
    });
  });

  on('clicked:repeating_artifacts:artifacts-alienationtest', (e) => {
    getAttrs(["repeating_artifacts_alienation_test_type", "repeating_artifacts_alienation_test_tn"], function(attrs) {
      var alienationTestType = attrs["repeating_artifacts_alienation_test_type"];
      var tn = attrs["repeating_artifacts_alienation_test_tn"];
      alienationCheck(alienationTestType, tn);
    });
  });

  function eldritchWorkingsRotetest(index) {
    abilityCheckFromAttrNames("eldritchworkings",
                              `rotetest${index}_ability`,
                              `rotetest${index}_focus`,
                              `rotetest${index}_tn`);
  }

  on('clicked:repeating_eldritchworkings:eldritchworkings-rotetest1', (e) => {
    eldritchWorkingsRotetest(1);
  });
  on('clicked:repeating_eldritchworkings:eldritchworkings-rotetest2', (e) => {
    eldritchWorkingsRotetest(2);
  });
  on('clicked:repeating_eldritchworkings:eldritchworkings-rotetest3', (e) => {
    eldritchWorkingsRotetest(3);
  });
  on('clicked:repeating_eldritchworkings:eldritchworkings-effect', (e) => {
    abilityCheckFromAttrNames("eldritchworkings", "effect_ability", "effect_focus", "effect_tn");
  });
	on('clicked:repeating_eldritchworkings:eldritchworkings-effectdamage', (info) => {
		getAttrs(["repeating_eldritchworkings_effect_damage", "repeating_eldritchworkings_eldritch_working_name"], function(attrs) {
      const damage = attrs["repeating_eldritchworkings_effect_damage"];
      const name = attrs["repeating_eldritchworkings_eldritch_working_name"];
			startRoll(`@{wtype}&{template:age-roller} {{color-@{color}=1}} {{damagedice=${damage}}} {{damage=[[${damage}+0]]}} {{desc=${name} Effect}} {{player=@{char-name-option}}} {{simple}}`, (results) => {
				finishRoll(results.rollId);
			});
		});
	});
  on('clicked:repeating_eldritchworkings:eldritchworkings-magistereffect', (e) => {
    abilityCheckFromAttrNames("eldritchworkings", "magister_effect_ability", "magister_effect_focus", "magister_effect_tn");
  });
	on('clicked:repeating_eldritchworkings:eldritchworkings-magistereffectdamage', (info) => {
		getAttrs(["repeating_eldritchworkings_magister_effect_damage", "repeating_eldritchworkings_eldritch_working_name"], function(attrs) {
      const damage = attrs["repeating_eldritchworkings_magister_effect_damage"];
      const name = attrs["repeating_eldritchworkings_eldritch_working_name"];
			startRoll(`@{wtype}&{template:age-roller} {{color-@{color}=1}} {{damagedice=${damage}}} {{damage=[[${damage}+0]]}} {{desc=${name} Magister Effect}} {{player=@{char-name-option}}} {{simple}}`, (results) => {
				finishRoll(results.rollId);
			});
		});
	});
  on('clicked:repeating_eldritchworkings:eldritchworkings-doom', (e) => {
    abilityCheckFromAttrNames("eldritchworkings", "doom_ability", "doom_focus", "doom_tn");
  });
	on('clicked:repeating_eldritchworkings:eldritchworkings-doomdamage', (info) => {
		getAttrs(["repeating_eldritchworkings_doom_damage", "repeating_eldritchworkings_eldritch_working_name"], function(attrs) {
      const damage = attrs["repeating_eldritchworkings_doom_damage"];
      const name = attrs["repeating_eldritchworkings_eldritch_working_name"];
			startRoll(`@{wtype}&{template:age-roller} {{color-@{color}=1}} {{damagedice=${damage}}} {{damage=[[${damage}+0]]}} {{desc=${name} Doom}} {{player=@{char-name-option}}} {{simple}}`, (results) => {
				finishRoll(results.rollId);
			});
		});
	});
  on('clicked:repeating_eldritchworkings:eldritchworkings-alienationtest', (e) => {
    getAttrs(["repeating_eldritchworkings_alienation_test_type", "repeating_eldritchworkings_alienation_test_tn"], function(attrs) {
      var alienationTestType = attrs["repeating_eldritchworkings_alienation_test_type"];
      var tn = attrs["repeating_eldritchworkings_alienation_test_tn"];
      alienationCheck(alienationTestType, tn);
    });
  });


	on('clicked:income_check', function(v) {ability_check("income")});
	on('clicked:resources_check', function(v) {ability_check("resources")});

	on('clicked:repeating_spell:fatigue-check', (info) => {getAttrs(["game", "repeating_spell_spell-talent", "repeating_spell_spell-focus-bonus", "repeating_spell_spell-name", "repeating_spell_spell-fatigue"], function(v) {
		let thisnote = `{{desc=@{fatigue_check_for} ${v["repeating_spell_spell-name"]}}} {{note1=@{plus_one_tn}}} {{note1-name=@{each_fatiguing_spell}}}`;
		if (v.game === "cthulhu-awakens") {thisnote = `{{desc=@{price_check_for} ${v["repeating_spell_spell-name"]}}}`};
		ability_check("willpower", v["repeating_spell_spell-talent"], v["repeating_spell_spell-focus-bonus"], `{{tn=${v["repeating_spell_spell-fatigue"]}}} ${thisnote}`)});});

	on('clicked:repeating_spell:alternate-spell-check', (info) => {getAttrs(["game", "repeating_spell_spell-ability", "repeating_spell_spell-talent", "repeating_spell_spell-focus-bonus", "repeating_spell_spell-name", "repeating_spell_spell-tn", "repeating_spell_spell-fatigue"], function(v) {
		let thisability = v["repeating_spell_spell-ability"];
		let thisfocusname = v["repeating_spell_spell-talent"];
		let thisnote = `{{note1=${v["repeating_spell_spell-fatigue"]}}} {{note1-name=@{fatigue_tn_label}}}`;
		if (v.game === "cthulhu-awakens") {thisability = "willpower"; thisnote = `{{note1=${v["repeating_spell_spell-fatigue"]}}} {{note1-name=@{price_tn_label}}}`};
		ability_check(thisability, thisfocusname, v["repeating_spell_spell-focus-bonus"], `{{desc=${v["repeating_spell_spell-name"]}}} {{tn=${v["repeating_spell_spell-tn"]}}} ${thisnote}`)});});

	on('clicked:repeating_spell:main-spell-check', (info) => {getAttrs(["game", "repeating_spell_spell-ability", "repeating_spell_spell-school", "repeating_spell_spell-talent", "repeating_spell_spell-focus-bonus", "repeating_spell_spell-name", "repeating_spell_spell-tn", "repeating_spell_spell-mp-cost", "repeating_spell_spell-spellpower"], function(v) {
		let thisability = v["repeating_spell_spell-ability"];
		let thisfocusname = v["repeating_spell_spell-talent"];
		let thisnote = `{{note1=${v["repeating_spell_spell-spellpower"]}}} {{note1-name=@{spellpower_label}}}`;
		if (v.game === "dragon-age") {thisability = "magic"; thisfocusname = v["repeating_spell_spell-school"];};
		if (v.game === "fantasy-age" || v.game === "titansgrave") {thisability = "intelligence"; thisfocusname = v["repeating_spell_spell-school"];};
		if (v.game === "modern-age") {thisnote = `{{note1=${v["repeating_spell_spell-mp-cost"]}}} {{note1-name=@{power_cost_label}}}`};
		if (v.game === "threefold") {thisnote = `{{note1=${v["repeating_spell_spell-mp-cost"]}}} {{note1-name=@{kanna_cost_label}}}`};
		ability_check(thisability, thisfocusname, v["repeating_spell_spell-focus-bonus"], `{{desc=${v["repeating_spell_spell-name"]}}} {{tn=${v["repeating_spell_spell-tn"]}}} ${thisnote}`)
	});});

	on("change:fear", function(event) {
		console.log("Fear changed");
		getAttrs(["fear"], function(v) {
			switch(v.fear) {
				case "0":
				setAttrs({
					"fear-perception": 0,
					"fear-intelligence": 0,
					"fear-initiative": 0,
					"fear-accuracy": 0,
					"fear-fighting": 0
				}); // setAttrs
				break;
				case "1":
				setAttrs({
					"fear-perception": 1,
					"fear-intelligence": -1,
					"fear-initiative": 0,
					"fear-accuracy": 0,
					"fear-fighting": 0
				}); // setAttrs
				break;
				case "2":
				setAttrs({
					"fear-perception": 1,
					"fear-intelligence": -1,
					"fear-initiative": 1,
					"fear-accuracy": -1,
					"fear-fighting": -1
				}); // setAttrs
				break;
				case "3":
				setAttrs({
					"fear-perception": 2,
					"fear-intelligence": -2,
					"fear-initiative": 1,
					"fear-accuracy": -1,
					"fear-fighting": -1
				}); // setAttrs
				break;
				case "4":
				setAttrs({
					"fear-perception": 2,
					"fear-intelligence": -2,
					"fear-initiative": 2,
					"fear-accuracy": -2,
					"fear-fighting": -2
				}); // setAttrs
				break;
				case "5":
				setAttrs({
					"fear-perception": 2,
					"fear-intelligence": -2,
					"fear-initiative": 2,
					"fear-accuracy": -2,
					"fear-fighting": -2
				}); // setAttrs
				break;
				default:
				console.log("Error: unknown value for fear");
			}; // case
		}); // getAttrs
	}); // change:fear

	function setting_setup(lock, setting, defaultcolor) {
		let output = {
			"initiative-toggle": 1,
			"fear-toggle": 0,
			"horror-toggle": 0,
			"power-list-toggle": 1,
			"talent-list-toggle": 1,
			"equipment-toggle": 1,
		};
		if (lock !== "custom") {
			output["gamelock"] = setting;
			output["game"] = setting;
		};
		switch(setting) {
			case "dragon-age":
				output["health-fortune-toggle"] = 0;
				output["mana-toggle"] = 1;
				output["fatigue-toggle"] = 0;
				output["exp-toggle"] = 1;
				output["conviction-toggle"] = 0;
				output["corruption-toggle"] = 0;
				output["ammo-toggle"] = 1;
				output["spell-list-toggle"] = 1;
				output["money-toggle"] = 1;
				output["income-toggle"] = 0;
				output["conditions-toggle"] = 0;
				output["color"] = "red";
				break;
			case "fantasy-age":
				output["health-fortune-toggle"] = 0;
				output["mana-toggle"] = 1;
				output["fatigue-toggle"] = 0;
				output["exp-toggle"] = 1;
				output["conviction-toggle"] = 0;
				output["corruption-toggle"] = 0;
				output["ammo-toggle"] = 1;
				output["spell-list-toggle"] = 1;
				output["money-toggle"] = 1;
				output["income-toggle"] = 0;
				output["conditions-toggle"] = 0;
				output["color"] = "green";
				break;
			case "fantasy-age-core":
				output["health-fortune-toggle"] = 0;
				output["mana-toggle"] = 1;
				output["fatigue-toggle"] = 0;
				output["exp-toggle"] = 1;
				output["conviction-toggle"] = 0;
				output["corruption-toggle"] = 0;
				output["ammo-toggle"] = 1;
				output["spell-list-toggle"] = 1;
				output["money-toggle"] = 1;
				output["income-toggle"] = 0;
				output["conditions-toggle"] = 1;
				output["color"] = "green";
				break;
			case "titansgrave":
				output["health-fortune-toggle"] = 0;
				output["mana-toggle"] = 1;
				output["fatigue-toggle"] = 0;
				output["exp-toggle"] = 0;
				output["conviction-toggle"] = 0;
				output["corruption-toggle"] = 0;
				output["ammo-toggle"] = 1;
				output["spell-list-toggle"] = 1;
				output["money-toggle"] = 1;
				output["income-toggle"] = 0;
				output["conditions-toggle"] = 0;
				output["color"] = "teal1";
				break;
			case "blue-rose":
				output["health-fortune-toggle"] = 0;
				output["mana-toggle"] = 0;
				output["fatigue-toggle"] = 1;
				output["exp-toggle"] = 0;
				output["conviction-toggle"] = 1;
				output["corruption-toggle"] = 1;
				output["ammo-toggle"] = 0;
				output["spell-list-toggle"] = 1;
				output["money-toggle"] = 0;
				output["income-toggle"] = 0;
				output["conditions-toggle"] = 0;
				output["color"] = "blue2";
				break;
			case "the-expanse":
				output["health-fortune-toggle"] = 1;
				output["mana-toggle"] = 0;
				output["fatigue-toggle"] = 0;
				output["exp-toggle"] = 0;
				output["conviction-toggle"] = 0;
				output["corruption-toggle"] = 0;
				output["ammo-toggle"] = 1;
				output["spell-list-toggle"] = 0;
				output["money-toggle"] = 0;
				output["income-toggle"] = 1;
				output["conditions-toggle"] = 1;
				output["color"] = "stars";
				break;
			case "modern-age":
				output["health-fortune-toggle"] = 0;
				output["mana-toggle"] = 1;
				output["fatigue-toggle"] = 1;
				output["exp-toggle"] = 1;
				output["conviction-toggle"] = 0;
				output["corruption-toggle"] = 0;
				output["ammo-toggle"] = 1;
				output["spell-list-toggle"] = 1;
				output["money-toggle"] = 0;
				output["income-toggle"] = 1;
				output["conditions-toggle"] = 0;
				output["color"] = "orange";
				break;
			case "world-of-lazarus":
				output["health-fortune-toggle"] = 0;
				output["mana-toggle"] = 0;
				output["fatigue-toggle"] = 0;
				output["exp-toggle"] = 1;
				output["conviction-toggle"] = 0;
				output["corruption-toggle"] = 0;
				output["ammo-toggle"] = 1;
				output["spell-list-toggle"] = 0;
				output["money-toggle"] = 0;
				output["income-toggle"] = 1;
				output["conditions-toggle"] = 0;
				output["color"] = "lazarus";
				break;
			case "threefold":
				output["health-fortune-toggle"] = 0;
				output["mana-toggle"] = 1;
				output["fatigue-toggle"] = 1;
				output["exp-toggle"] = 1;
				output["conviction-toggle"] = 0;
				output["corruption-toggle"] = 0;
				output["ammo-toggle"] = 1;
				output["spell-list-toggle"] = 1;
				output["money-toggle"] = 0;
				output["income-toggle"] = 1;
				output["conditions-toggle"] = 0;
				output["color"] = "threefold";
				break;
			case "cthulhu-awakens":
				output["health-fortune-toggle"] = 0;
				output["mana-toggle"] = 0;
				output["fatigue-toggle"] = 0;
				output["exp-toggle"] = 1;
				output["conviction-toggle"] = 0;
				output["corruption-toggle"] = 0;
				output["ammo-toggle"] = 1;
				output["spell-list-toggle"] = 1;
				output["money-toggle"] = 1;
				output["income-toggle"] = 0;
				output["conditions-toggle"] = 1;
				output["color"] = "red";
				break;
			case "fifth-season":
				output["health-fortune-toggle"] = 1;
				output["mana-toggle"] = 0;
				output["fatigue-toggle"] = 0;
				output["exp-toggle"] = 1;
				output["conviction-toggle"] = 0;
				output["corruption-toggle"] = 0;
				output["ammo-toggle"] = 1;
				output["spell-list-toggle"] = 0;
				output["money-toggle"] = 1;
				output["income-toggle"] = 0;
				output["conditions-toggle"] = 1;
				output["color"] = "black";
				break;
			default:
			console.log("wait what happened");
		}; // case
		if (defaultcolor) {output["color"] = defaultcolor;};
		setAttrs(output);
	};

	on("clicked:autoconfigure", function(event) {
		getAttrs(["game"], function(v) {
			setting_setup("custom", v.game)
		}); // getAttrs
	});

	on("sheet:opened", function(event) {
		getAttrs(["gamelock", "game", "color"], function(v) {
			if (v.gamelock !== "custom") {
				setting_setup(v.gamelock, v.gamelock, v.color)
			};
		});
	});

	on("change:game", function(event) {
		getAttrs(["gamelock", "game", "color"], function(v) {
			if (v.gamelock !== "custom") {
				setting_setup(v.gamelock, v.game, v.color)
			};
		});
	});

	on("sheet:opened", function(event) {
		getSectionIDs("repeating_spell", spellsarray => {
			const fieldnames = [];
			spellsarray.forEach(id => {
				fieldnames.push(`repeating_spell_${id}_spell-ability-score`)
			});
			getAttrs(["cp", "sp", "gp", "fortune", "fortune_max", "base_income", ...fieldnames], function(v) {
				let output = {};
				let cp = parseInt(v.cp,10)||0;
				let sp = parseInt(v.sp,10)||0;
				let gp = parseInt(v.gp,10)||0;
				if(cp != 0 || sp != 0 || gp != 0) {
					console.log("Hey there's legacy money in there");
					output["legacy-money-toggle"] = 1;
				} // if
				spellsarray.forEach(id => {
					let thisscore = v[`repeating_spell_${id}_spell-ability-score`];
					if(thisscore && thisscore.substr(0,2) == "@{") {
						output[`repeating_spell_${id}_spell-ability`] = thisscore.substr(2, thisscore.length-3);
						output[`repeating_spell_${id}_spell-ability-score`] = "";
					} // if
				}); // forEach
				if (v.fortune > 0 || v.fortune_max > 0) {
					output["health"] = v.fortune;
					output["health_max"] = v.fortune_max;
					output["fortune"] = 0;
					output["fortune_max"] = 0;
				};
				if (v.base_income > 0) {
					output["income_max"] = v.base_income;
					output["base_income"] = 0;
				};
				setAttrs(output);
			}); // getAttrs
		}); // getSectionIDs
	}); // sheet opened

console.log("!!!! Setting up drop handler");
  on("change:drop_data", function(event_info) {
    console.log("Got drop: ", event_info);
    getAttrs(["drop_category", "drop_name","drop_data"], values => {
      const {drop_name, drop_data, drop_category} = values;
      if (drop_category === "" || drop_name === "" || drop_data === "") {
        return
      };
      var dropDataParsed = JSON.parse(drop_data);
      dropDataParsed["name"] = drop_name;
      console.log("drop_category: ", drop_category, "drop_name: ", drop_name, "DropDataParsed: ", dropDataParsed);
      const specializationToAttrs = {
        "name": "powername",
        "Description": "talentdescription",
        "Novice": "talent1description",
        "Expert": "talent2description",
        "Master": "talent3description",
        "Grandmaster": "talent4description",
        "Apex": "talent5description"
      };
      const talentToAttrs = {
        "name": "powername",
        "Description": "talentdescription",
        "Novice": "talent1description",
        "Expert": "talent2description",
        "Master": "talent3description"
      };
      const focusToAttrs = {
        "name": "focusname",
        "Description": "focusdescription"
      };
      const psychicDisciplineToAttrs = {
        "name": "spell-name",
        "Discipline": "spell-talent",
        "Type": "spell-type",
        "Requirement": "", // TODO
        "Time": "spell-time",
        "Power Test": "spell-tn",
        "Price Test": "spell-fatigue",
        "Resist": "spell-resistance",
        "Short Description": "short-spell-description",
        "Description": "full-spell-description",
        "Damage": "" // TODO
      };
      const backgroundToAttrs = {
        "name": "background",
        "Social Class": "social-class"
      };
      const professionToAttrs = {
        "name": "profession"
      };
      const gearToAttrs = {
        "name": "equipment-name",
        "Description": "equipment-description"
      };
      const weaponToAttrs = {
        "name": "attack-name",
        "Range": "range",
        "Reload": "reload",
        "Damage": "attack-damage"
      }
      const eldritchWorkingToAttrs = {
        "name": "eldritch_working_name",
        "Generic Name": "generic_name",
        "Alienation Test Type": "alienation_test_type",
        "Alienation Test TN": "alienation_test_tn",
        "Praxis": "praxis",
        "Interval": "interval",
        "Rote Test 1 Ability": "rotetest1_ability",
        "Rote Test 1 Focus": "rotetest1_focus",
        "Rote Test 1 TN": "rotetest1_tns",
        "Rote Test 2 Ability": "rotetest2_ability",
        "Rote Test 2 Focus": "rotetest2_focus",
        "Rote Test 2 TN": "rotetest2_tns",
        "Rote Test 3 Ability": "rotetest3_ability",
        "Rote Test 3 Focus": "rotetest3_focus",
        "Rote Test 3 TN": "rotetest3_tns",
        "Trappings 1": "trappings1",
        "Trappings 2": "trappings2",
        "Trappings 3": "trappings3",
        "Effect Description": "effect",
        "Effect Ability": "effect_ability",
        "Effect Focus": "effect_focus",
        "Effect TN": "effect_tn",
        "Effect Damage": "effect_damage",
        "Magister Effect Description": "magister_effect",
        "Magister Effect Ability": "magister_effect_ability",
        "Magister Effect Focus": "magister_effect_focus",
        "Magister Effect TN": "magister_effect_tn",
        "Magister Effect Damage": "magister_effect_damage",
        "Doom Description": "doom",
        "Doom Ability": "doom_ability",
        "Doom Focus": "doom_focus",
        "Doom TN": "doom_tn",
        "Doom Damage": "doom_damage"
      };
      const artifactToAttrs = {
        "name": "artifact_name",
        "Alienation Test Type": "alienation_test_type",
        "Alienation Test TN": "alienation_test_tn",
        "Activation": "activation",
        "Effects": "effects",
        "Consequences": "consequences"
      };
      const dangerousTextToAttrs = {
        "name": "text_name",
        "Language": "languages",
        "Decipher": "decipher",
        "Decipher Ability": "deciphertest_ability",
        "Decipher Focus": "deciphertest_focus",
        "Decipher TN": "deciphertest_tn",
        "Alienation Test Type": "alienation_test_type",
        "Alienation Test TN": "alienation_test_tn",
        "Artifice Workings": "artifice_workings",
        "Geometry Workings": "geometry_workings",
        "Morphics Workings": "morphics_workings",
        "Ontics Workings": "ontics_workings",
        "Outsiders Workings": "outsiders_workings"
      };
      const socialClassToAttrs = {
        "name": "social-class"
      };

      var newAttrs = {};
      if (drop_category === "Dangerous Texts") {
        var newRowId = generateRowID();
        newAttrs = _.inject(dangerousTextToAttrs, function(attrs, attr_name, compendium_name) {
          attrs[`repeating_dangeroustexts_${newRowId}_${attr_name}`] = dropDataParsed[compendium_name];
          return attrs;
        }, {});
      }
      if (drop_category === "Eldritch Workings") {
        var newRowId = generateRowID();
        newAttrs = _.inject(eldritchWorkingToAttrs, function(attrs, attr_name, compendium_name) {
          attrs[`repeating_eldritchworkings_${newRowId}_${attr_name}`] = dropDataParsed[compendium_name];
          return attrs;
        }, {});
      }
      if (drop_category === "Artifacts") {
        var newRowId = generateRowID();
        newAttrs = _.inject(artifactToAttrs, function(attrs, attr_name, compendium_name) {
          attrs[`repeating_artifacts_${newRowId}_${attr_name}`] = dropDataParsed[compendium_name];
          return attrs;
        }, {});
      }
      if (drop_category === "Specializations") {
        var newRowId = generateRowID();
        newAttrs = _.inject(specializationToAttrs, function(attrs, attr_name, compendium_name) {
          attrs[`repeating_talent_${newRowId}_${attr_name}`] = dropDataParsed[compendium_name];
          return attrs;
        }, {});
      }
      if (drop_category === "Talents") {
        var newRowId = generateRowID();
        newAttrs = _.inject(talentToAttrs, function(attrs, attr_name, compendium_name) {
          attrs[`repeating_talent_${newRowId}_${attr_name}`] = dropDataParsed[compendium_name];
          return attrs;
        }, {});
      }
      if (drop_category === "Psychic Disciplines") {
        var newRowId = generateRowID();
        newAttrs = _.inject(psychicDisciplineToAttrs, function(attrs, attr_name, compendium_name) {
          attrs[`repeating_spell_${newRowId}_${attr_name}`] = dropDataParsed[compendium_name];
          return attrs;
        }, {});
      }
      if (drop_category === "Equipment") {
        var newRowId = generateRowID();
        newAttrs = _.inject(gearToAttrs, function(attrs, attr_name, compendium_name) {
          attrs[`repeating_equipment_${newRowId}_${attr_name}`] = dropDataParsed[compendium_name] || "";
          return attrs;
        }, {});
      }
      if (drop_category === "Weapons") {
        var newRowId = generateRowID();
        newAttrs = _.inject(weaponToAttrs, function(attrs, attr_name, compendium_name) {
          attrs[`repeating_attack-list_${newRowId}_${attr_name}`] = dropDataParsed[compendium_name];
          return attrs;
        }, {});
      }
      if (drop_category === "Backgrounds") {
        // TODO also increment ability
        newAttrs = _.inject(backgroundToAttrs, function(attrs, attr_name, compendium_name) {
          attrs[attr_name] = dropDataParsed[compendium_name];
          return attrs;
        }, {});
      }
      if (drop_category === "Social Classes") {
        newAttrs = _.inject(socialClassToAttrs, function(attrs, attr_name, compendium_name) {
          attrs[attr_name] = dropDataParsed[compendium_name];
          return attrs;
        }, {});
      }
      if (drop_category === "Professions" || drop_category === "Eldritch Professions") {
        // TODO also increment health, bonds or resources
        newAttrs = _.inject(professionToAttrs, function(attrs, attr_name, compendium_name) {
          attrs[attr_name] = dropDataParsed[compendium_name];
          return attrs;
        }, {});
      }
      if (drop_category === "Focuses") {
        var newRowId = generateRowID();
        var repeatingSection = dropDataParsed["Ability"].toLowerCase();
        newAttrs = _.inject(focusToAttrs, function(attrs, attr_name, compendium_name) {
          attrs[`repeating_${repeatingSection}-focus_${newRowId}_${attr_name}`] = dropDataParsed[compendium_name];
          return attrs;
        }, {});
      }
      Object.keys(newAttrs).forEach(key => newAttrs[key] === undefined ? delete newAttrs[key] : {});
      newAttrs["drop_category"] = "";
      newAttrs["drop_name"] = "";
      newAttrs["drop_data"] = "";
      console.log("New attrs: ", newAttrs);
      setAttrs(newAttrs);
    });
  });

	on("clicked:legacymoneyimport", function(event) {
		console.log("Clicked!");
		getAttrs(["cp", "sp", "gp"], function(v) {
			console.log(`Converting ${v.cp} cp, ${v.sp} sp, ${v.gp} gp`);
			let setObj = {};
			let cp = parseInt(v.cp,10)||0;
			let sp = parseInt(v.sp,10)||0;
			let gp = parseInt(v.gp,10)||0;
			let id = generateRowID();
			setObj[`repeating_money_${id}_moneyname`] = "gp";
			setObj[`repeating_money_${id}_moneyamount`] = gp;
			id = generateRowID();
			setObj[`repeating_money_${id}_moneyname`] = "sp";
			setObj[`repeating_money_${id}_moneyamount`] = sp;
			id = generateRowID();
			setObj[`repeating_money_${id}_moneyname`] = "cp";
			setObj[`repeating_money_${id}_moneyamount`] = cp;
			setObj.GP = 0;
			setObj.SP = 0;
			setObj.CP = 0;
			setObj["legacy-money-toggle"] = 0;
			setAttrs(setObj);
		}); // getAttrs
	}); // on clicked

	on("sheet:opened change:dexterity change:shield-bonus change:armor-penalty change:base-speed", function(event) {
		// calculated values so we can use them over tokens
		getAttrs(["dexterity", "shield-bonus", "base-speed", "armor-penalty"], function(v) {
			let setObj = {};
			let dexterity = parseInt(v.dexterity, 10) || 0;
			let shield_bonus = parseInt(v["shield-bonus"], 10) || 0;
			let base_speed = parseInt(v["base-speed"], 10) || 0;
			let armor_penalty = parseInt(v["armor-penalty"], 10) || 0;

			setObj.defense_value = 10 + dexterity + shield_bonus;
			setObj.speed_value = base_speed + dexterity + armor_penalty;

			setAttrs(setObj);
		}); // getAttrs
	}); // on opened/changes

	console.log("Script load complete");
</script>


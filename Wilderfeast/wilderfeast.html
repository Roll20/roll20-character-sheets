
<div class="wf">
  <div class="wf__wrapper">
    <input name="attr_version" value="1.0" type="hidden"/>
    <input name="attr_sheet" value="wilder" type="hidden"/>
    <input name="attr_style" value="mighty" type="hidden"/>
    <input name="attr_skill" value="assurance" type="hidden"/>
    <input name="attr_hp_mod" value="0" type="hidden"/>
    <input name="attr_advantage" value="0" type="hidden"/>
    <h1 class="wf__title"><span data-i18n="wilderfeast">Wilderfeast</span></h1>
    <div class="wf__sheet-toggle">
      <label data-i18n="sheet">Sheet</label>
      <select name="attr_sheet">
        <option value="wilder" data-i18n="wilder">Wilder</option>
        <option value="pack" data-i18n="pack">Pack</option>
        <option value="area" data-i18n="area">Area</option>
      </select>
    </div>
    <main class="wilder">
      <div class="wf__header wf-navy">
        <div class="wf-input">
          <label data-i18n="character_name">Name</label>
          <input name="attr_character_name" type="text" data-i18n-placeholder="name_placeholder" placeholder="Name"/>
        </div>
        <div class="wf-input">
          <label data-i18n="pronouns">Pronouns</label>
          <input name="attr_pronouns" type="text" data-i18n-placeholder="pronouns_placeholder" placeholder="Pronouns"/>
        </div>
        <div class="wf-input">
          <label data-i18n="specialty">Specialty</label>
          <input name="attr_specialty" type="text" data-i18n-placeholder="specialty_placeholder" placeholder="Specialty"/>
        </div>
      </div>
      <div class="wf__body">
        <div class="wf-container wf-orange col-span-2 wf__styles">
          <h3 class="wf-heading" data-i18n="styles">Styles</h3>
          <div class="wf__style">
            <div class="wf-input--style">
              <label for="mighty">
                <input name="attr_style" id="mighty" type="radio" value="mighty"/><span data-i18n="mighty">mighty</span>
              </label>
            </div>
            <div class="wf-input">
              <label class="sr-only" data-i18n="mighty_value">mighty value</label>
              <input name="attr_mighty" type="number" value="1" min="1" max="5" placeholder="1"/>
            </div>
          </div>
          <div class="wf__style">
            <div class="wf-input--style">
              <label for="precise">
                <input name="attr_style" id="precise" type="radio" value="precise"/><span data-i18n="precise">precise</span>
              </label>
            </div>
            <div class="wf-input">
              <label class="sr-only" data-i18n="precise_value">precise value</label>
              <input name="attr_precise" type="number" value="1" min="1" max="5" placeholder="1"/>
            </div>
          </div>
          <div class="wf__style">
            <div class="wf-input--style">
              <label for="swift">
                <input name="attr_style" id="swift" type="radio" value="swift"/><span data-i18n="swift">swift</span>
              </label>
            </div>
            <div class="wf-input">
              <label class="sr-only" data-i18n="swift_value">swift value</label>
              <input name="attr_swift" type="number" value="1" min="1" max="5" placeholder="1"/>
            </div>
          </div>
          <div class="wf__style">
            <div class="wf-input--style">
              <label for="tricky">
                <input name="attr_style" id="tricky" type="radio" value="tricky"/><span data-i18n="tricky">tricky</span>
              </label>
            </div>
            <div class="wf-input">
              <label class="sr-only" data-i18n="tricky_value">tricky value</label>
              <input name="attr_tricky" type="number" value="1" min="1" max="5" placeholder="1"/>
            </div>
          </div>
        </div>
        <div class="wf-container wf-navy col-span-4 wf__skills">
          <h3 class="wf-heading" data-i18n="skills">Skills</h3>
          <div class="wf-skill wf-input">
            <label for="assurance">
              <input name="attr_skill" id="assurance" type="radio" value="assurance"/><span data-i18n="assurance">assurance</span>
              <input name="attr_assurance" type="number" min="0" max="5" placeholder="0"/>
            </label>
          </div>
          <div class="wf-skill wf-input">
            <label for="display">
              <input name="attr_skill" id="display" type="radio" value="display"/><span data-i18n="display">display</span>
              <input name="attr_display" type="number" min="0" max="5" placeholder="0"/>
            </label>
          </div>
          <div class="wf-skill wf-input">
            <label for="shot">
              <input name="attr_skill" id="shot" type="radio" value="shot"/><span data-i18n="shot">shot</span>
              <input name="attr_shot" type="number" min="0" max="5" placeholder="0"/>
            </label>
          </div>
          <div class="wf-skill wf-input">
            <label for="call">
              <input name="attr_skill" id="call" type="radio" value="call"/><span data-i18n="call">call</span>
              <input name="attr_call" type="number" min="0" max="5" placeholder="0"/>
            </label>
          </div>
          <div class="wf-skill wf-input">
            <label for="grab">
              <input name="attr_skill" id="grab" type="radio" value="grab"/><span data-i18n="grab">grab</span>
              <input name="attr_grab" type="number" min="0" max="5" placeholder="0"/>
            </label>
          </div>
          <div class="wf-skill wf-input">
            <label for="strike">
              <input name="attr_skill" id="strike" type="radio" value="strike"/><span data-i18n="strike">strike</span>
              <input name="attr_strike" type="number" min="0" max="5" placeholder="0"/>
            </label>
          </div>
          <div class="wf-skill wf-input">
            <label for="craft">
              <input name="attr_skill" id="craft" type="radio" value="craft"/><span data-i18n="craft">craft</span>
              <input name="attr_craft" type="number" min="0" max="5" placeholder="0"/>
            </label>
          </div>
          <div class="wf-skill wf-input">
            <label for="hoard">
              <input name="attr_skill" id="hoard" type="radio" value="hoard"/><span data-i18n="hoard">hoard</span>
              <input name="attr_hoard" type="number" min="0" max="5" placeholder="0"/>
            </label>
          </div>
          <div class="wf-skill wf-input">
            <label for="study">
              <input name="attr_skill" id="study" type="radio" value="study"/><span data-i18n="study">study</span>
              <input name="attr_study" type="number" min="0" max="5" placeholder="0"/>
            </label>
          </div>
          <div class="wf-skill wf-input">
            <label for="cure">
              <input name="attr_skill" id="cure" type="radio" value="cure"/><span data-i18n="cure">cure</span>
              <input name="attr_cure" type="number" min="0" max="5" placeholder="0"/>
            </label>
          </div>
          <div class="wf-skill wf-input">
            <label for="search">
              <input name="attr_skill" id="search" type="radio" value="search"/><span data-i18n="search">search</span>
              <input name="attr_search" type="number" min="0" max="5" placeholder="0"/>
            </label>
          </div>
          <div class="wf-skill wf-input">
            <label for="traversal">
              <input name="attr_skill" id="traversal" type="radio" value="traversal"/><span data-i18n="traversal">traversal</span>
              <input name="attr_traversal" type="number" min="0" max="5" placeholder="0"/>
            </label>
          </div>
        </div>
        <div class="wf-container wf-black col-span-6 wf__dice-tray">
          <div class="wf__actions grid">
            <div class="empty"></div>
            <div><span data-i18n="select_style_skill">Select a STYLE and SKILL.</span></div>
            <button class="wf-action" name="act_focus_up" type="action"><img src="https://raw.githubusercontent.com/morgdalaine/wilderfeast/refs/heads/main/assets/d8.svg"/><span data-i18n="focus_up">FOCUS UP</span><img src="https://raw.githubusercontent.com/morgdalaine/wilderfeast/refs/heads/main/assets/d8.svg"/></button>
            <div><span data-i18n="choose_action_die_focus">Add a d8 Action Die to your dice pool.</span></div>
            <button class="wf-action--wild" name="act_go_wild" type="action"><img src="https://raw.githubusercontent.com/morgdalaine/wilderfeast/refs/heads/main/assets/d20.svg"/><span data-i18n="go_wild">GO WILD</span><img src="https://raw.githubusercontent.com/morgdalaine/wilderfeast/refs/heads/main/assets/d20.svg"/></button>
            <div><span data-i18n="choose_action_die_wild">Choose one of your TRAITS and describe how it helps you in this situation. Then, remove 1 Style Die and replace it with a d20 Action Die.</span></div>
          </div>
        </div>
        <div class="wf-container wf-black col-span-2 wf__stamina">
          <h3 class="wf-heading" data-i18n="stamina">Stamina</h3>
          <div class="wf-input--valuemax">
            <div class="wf-input">
              <label data-i18n="current">Current</label>
              <input name="attr_hp" placeholder="0" min="0" type="number"/>
            </div>
            <div class="wf-input">
              <label data-i18n="max">Max</label>
              <input name="attr_hp_max" placeholder="0" min="0" type="number"/>
            </div>
          </div>
        </div>
        <div class="wf-container wf-red col-span-4 wf__conditions grid">
          <h3 class="wf-heading" data-i18n="conditions">Conditions</h3>
          <div class="wf-input">
            <label>
              <input name="attr_burned" type="checkbox"/><span data-i18n="burned">Burned</span>
            </label>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_caught" type="checkbox"/><span data-i18n="caught">Caught</span>
            </label>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_confused" type="checkbox"/><span data-i18n="confused">Confused</span>&nbsp;<span>X</span>
            </label>
            <input name="attr_confused_level" type="number" min="1" placeholder="1"/>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_discordant" type="checkbox"/><span data-i18n="discordant">Discordant</span>
            </label>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_expanded" type="checkbox"/><span data-i18n="expanded">Expanded</span>
            </label>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_exposed" type="checkbox"/><span data-i18n="exposed">Exposed</span>
            </label>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_fatigued" type="checkbox"/><span data-i18n="fatigued">Fatigued</span>&nbsp;<span>X</span>
            </label>
            <input name="attr_fatigued_level" type="number" min="1" placeholder="1"/>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_frightened" type="checkbox"/><span data-i18n="frightened">Frightened</span>&nbsp;<span>X</span>
            </label>
            <input name="attr_frightened_level" type="number" min="1" placeholder="1"/>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_invigorated" type="checkbox"/><span data-i18n="invigorated">Invigorated</span>&nbsp;<span>X</span>
            </label>
            <input name="attr_invigorated_level" type="number" min="1" placeholder="1"/>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_hidden" type="checkbox"/><span data-i18n="hidden">Hidden</span>
            </label>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_poisoned" type="checkbox"/><span data-i18n="poisoned">Poisoned</span>&nbsp;<span>X</span>
            </label>
            <input name="attr_poisoned_level" type="number" min="1" placeholder="1"/>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_rehabilitating" type="checkbox"/><span data-i18n="rehabilitating">Rehabilitating</span>&nbsp;<span>X</span>
            </label>
            <input name="attr_rehabilitating_level" type="number" min="1" max="6" placeholder="1"/>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_rested" type="checkbox"/><span data-i18n="rested">Rested</span>&nbsp;<span>X</span>
            </label>
            <input name="attr_rested_level" type="number" min="1" placeholder="1"/>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_stunned" type="checkbox"/><span data-i18n="stunned">Stunned</span>&nbsp;<span>X</span>
            </label>
            <input name="attr_stunned_level" type="number" min="1" placeholder="1"/>
          </div>
          <div class="wf-input">
            <label>
              <input name="attr_wounded" type="checkbox"/><span data-i18n="wounded">Wounded</span>&nbsp;<span>X</span>
            </label>
            <input name="attr_wounded_level" type="number" min="1" max="3" placeholder="1"/>
          </div>
        </div>
        <div class="wf-container wf-black col-span-3 wf__tool_techniques">
          <h3 class="wf-heading" data-i18n="tools_and_techniques">Tools & Techniques</h3>
          <div class="wf-tool">
            <div class="wf-invisible">
              <div class="wf-input inline">
                <label data-i18n="tool">Tool</label>
                <input name="attr_tool" type="text"/>
              </div>
              <div class="wf-input inline">
                <label data-i18n="range">Range</label>
                <input name="attr_range" type="text"/>
              </div>
            </div>
            <div class="wf-tool__durability">
              <h4 class="wf-heading" data-i18n="durability">Durability</h4>
              <div class="wf-input wf-black">
                <label data-i18n="current">Current</label>
                <input name="attr_tool_durability" placeholder="0" min="0" type="number"/>
              </div>
              <div class="wf-input wf-black">
                <label data-i18n="max">Max</label>
                <input name="attr_tool_durability_max" placeholder="0" min="0" type="number"/>
              </div>
            </div>
            <div class="wf-input wf-black col-span-2">
              <label data-i18n="details">Details</label>
              <textarea name="attr_tool_details" data-i18n-placeholder="tool_details_placeholder" placeholder="Details..."></textarea>
            </div>
          </div>
          <h4 class="wf-heading" data-i18n="techniques">Techniques</h4>
          <fieldset class="repeating_techniques">
            <div class="wf-technique grid grid-cols-2">
              <div class="wf-input">
                <label data-i18n="technique_name">Name</label>
                <input name="attr_tech_name" type="text" data-i18n-placeholder="tech_name_placeholder" placeholder="Technique"/>
              </div>
              <div class="wf-input">
                <label data-i18n="technique_cost">Cost</label>
                <input name="attr_tech_cost" type="text" data-i18n-placeholder="tech_cost_placeholder" placeholder="Passive"/>
              </div>
              <div class="wf-input col-span-2">
                <label data-i18n="technique_details">Details</label>
                <textarea name="attr_tech_details" data-i18n-placeholder="tech_details_placeholder" placeholder="Details..."></textarea>
              </div>
            </div>
          </fieldset>
        </div>
        <div class="wf-container wf-green col-span-3 wf__traits">
          <h3 class="wf-heading" data-i18n="traits">Traits</h3>
          <div class="wf-trait--default"><span><strong data-i18n="grit">Grit</strong>&nbsp;<em data-i18n="grit_cost">(Cost: 1 Success)</em>&nbsp;<span data-i18n="grit_details">Increase [A] by 1.</span></span></div>
          <div class="wf-trait--default"><span><strong data-i18n="insight">Insight</strong>&nbsp;<em data-i18n="insight_cost">(Cost: 1 Success)</em>&nbsp;<span data-i18n="insight_details">Establish a detail about the situation.</span></span></div>
          <fieldset class="repeating_traits">
            <div class="wf-trait grid grid-cols-2">
              <div class="wf-input">
                <label data-i18n="trait_name">Name</label>
                <input name="attr_trait_name" type="text" data-i18n-placeholder="trait_name_placeholder" placeholder="Trait"/>
              </div>
              <div class="wf-input">
                <label data-i18n="trait_cost">Cost</label>
                <input name="attr_trait_cost" type="text" data-i18n-placeholder="trait_cost_placeholder" placeholder="Passive"/>
              </div>
              <div class="wf-input col-span-2">
                <label data-i18n="trait_details">Details</label>
                <textarea name="attr_trait_details" data-i18n-placeholder="trait_details_placeholder" placeholder="Details..."></textarea>
              </div>
            </div>
          </fieldset>
        </div>
        <div class="wf-container wf-black col-span-4 wf__you-are grid grid-cols-2">
          <div class="wf-input inline col-span-2">
            <label data-i18n="you_are">You Are</label>
            <input name="attr_you_are" type="text"/>
          </div>
          <div class="wf-input inline col-span-2">
            <label data-i18n="but_struggle_to_be">But You Struggle to Be</label>
            <input name="attr_but_struggle_to_be" type="text"/>
          </div>
          <div class="wf-input col-span-2">
            <label data-i18n="monstrous_acquaintance">Monstrous Acquaintance</label>
            <textarea name="attr_monstrous_acquaintance" data-i18n-placeholder="monstrous_acquaintance_placeholder" placeholder="Monstrous Acquaintance..."></textarea>
          </div>
          <div class="wf-input">
            <label data-i18n="staple">Staple</label>
            <input name="attr_staple" type="text"/>
          </div>
          <div class="wf-input">
            <label data-i18n="spice">Spice</label>
            <input name="attr_spice" type="text"/>
          </div>
        </div>
        <div class="wf-container wf-navy col-span-2 wf__portrait"><img name="attr_character_avatar" data-i18n-title="character_avatar" title="Despite everything, it's still you."/></div>
        <div class="wf-container wf-navy col-span-6 wf__background grid grid-cols-2">
          <h3 class="wf-heading" data-i18n="three_course_background">3 Course Background</h3>
          <div class="wf-input">
            <label data-i18n="upbringing">Upbringing</label>
            <textarea name="attr_upbringing" data-i18n-placeholder="upbringing_placeholder" placeholder="What is the meal that defines your childhood?"></textarea>
          </div>
          <div class="wf-input">
            <label data-i18n="initiation">Initiation</label>
            <textarea name="attr_initiation" data-i18n-placeholder="initiation_placeholder" placeholder="What is the meal that made you a wilder?"></textarea>
          </div>
          <div class="wf-input">
            <label data-i18n="ambition">Ambition</label>
            <textarea name="attr_ambition" data-i18n-placeholder="ambition_placeholder" placeholder="What is the meal you want to eat most?"></textarea>
          </div>
          <div class="wf-input">
            <label data-i18n="connection">Connection</label>
            <textarea name="attr_connection" data-i18n-placeholder="connection_placeholder" placeholder="The two of you share a bond over this dish."></textarea>
          </div>
        </div>
        <div class="wf-container wf-green col-span-6 wf__notes">
          <h3 class="wf-heading" data-i18n="notes">Notes</h3>
          <fieldset class="repeating_notes">
            <div class="wf-note">
              <div class="wf-input">
                <label data-i18n="note_name">Title</label>
                <input name="attr_note_name" type="text" data-i18n-placeholder="note_name_placeholder" placeholder="Note Title"/>
              </div>
              <div class="wf-input">
                <label data-i18n="note_details">Details...</label>
                <textarea name="attr_note_details" data-i18n-placeholder="note_details_placeholder" placeholder="Details..."></textarea>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
    </main>
    <main class="pack">
      <div class="wf__header wf-navy">
        <div class="wf-input">
          <label data-i18n="pack_name">Pack Name</label>
          <input name="attr_character_name" type="text" data-i18n-placeholder="pack_name_placeholder" placeholder="Pack Name"/>
        </div>
        <div class="wf-input">
          <label data-i18n="members">Members</label>
          <input name="attr_members" type="text" data-i18n-placeholder="members_placeholder" placeholder="Members"/>
        </div>
        <div class="wf-input--valuemax">
          <label class="text-center" data-i18n="harmony">Harmony</label>
          <div class="wf-input">
            <label data-i18n="current">Current</label>
            <input name="attr_harmony" placeholder="0" min="0" type="number"/>
          </div>
          <div class="wf-input">
            <label data-i18n="max">Max</label>
            <input name="attr_harmony_max" placeholder="0" min="0" type="number"/>
          </div>
        </div>
      </div>
      <div class="wf__body">
        <div class="wf-container wf-orange col-span-3 wf__ingredients">
          <h3 class="wf-heading" data-i18n="ingredients">Ingredients</h3>
          <fieldset class="repeating_ingredients">
            <div class="wf-ingredient">
              <div class="wf-input">
                <label data-i18n="ingredient_name">Name</label>
                <input name="attr_ingredient_name" type="text" data-i18n-placeholder="ingredient_name_placeholder" placeholder="Ingredient"/>
              </div>
              <div class="wf-input text-center">
                <label data-i18n="ingredient_quantity">Qty.</label>
                <input name="attr_ingredient_quantity" type="number" data-i18n-placeholder="ingredient_quantity_placeholder" min="0" value="1" placeholder="0"/>
              </div>
              <div class="wf-input col-span-2">
                <label data-i18n="ingredient_effects">Effects</label>
                <input name="attr_ingredient_effects" type="text" data-i18n-placeholder="ingredient_effects_placeholder" placeholder="Effects..."/>
              </div>
            </div>
          </fieldset>
        </div>
        <div class="wf-container wf-navy col-span-3 wf__den">
          <h3 class="wf-heading" data-i18n="den">Den</h3>
          <fieldset class="repeating_monsters">
            <div class="wf-monster">
              <div class="wf-input">
                <label data-i18n="monster_name">Monster</label>
                <input name="attr_monster_name" type="text" data-i18n-placeholder="monster_name_placeholder" placeholder="Name"/>
              </div>
              <div class="wf-input text-center">
                <label data-i18n="monster_rehab">Rehab</label>
                <input name="attr_monster_rehab" type="number" data-i18n-placeholder="monster_rehab_placeholder" min="1" value="1" placeholder="0"/>
              </div>
              <div class="wf-input col-span-2">
                <label data-i18n="monster_location">Location</label>
                <input name="attr_monster_location" type="text" data-i18n-placeholder="monster_location_placeholder" placeholder="Location..."/>
              </div>
            </div>
          </fieldset>
        </div>
        <div class="wf-container wf-green col-span-6 wf__notes">
          <h3 class="wf-heading" data-i18n="notes">Notes</h3>
          <fieldset class="repeating_notes">
            <div class="wf-note">
              <div class="wf-input">
                <label data-i18n="note_name">Title</label>
                <input name="attr_note_name" type="text" data-i18n-placeholder="note_name_placeholder" placeholder="Note Title"/>
              </div>
              <div class="wf-input">
                <label data-i18n="note_details">Details...</label>
                <textarea name="attr_note_details" data-i18n-placeholder="note_details_placeholder" placeholder="Details..."></textarea>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
    </main>
    <main class="area">
      <div class="wf__header wf-navy">
        <div class="wf-input">
          <label data-i18n="area_name">Area Name</label>
          <input name="attr_character_name" type="text" data-i18n-placeholder="area_name_placeholder" placeholder="Area Name"/>
        </div>
      </div>
      <div class="wf__body">
        <div class="wf-container col-span-6 wf__portrait"><img name="attr_character_avatar" data-i18n-title="character_avatar" title="Despite everything, it's still you."/></div>
        <div class="wf-container wf-green col-span-3 wf__traits">
          <h3 class="wf-heading" data-i18n="traits">Traits</h3>
          <fieldset class="repeating_traits">
            <div class="wf-trait">
              <div class="wf-input">
                <label data-i18n="trait_name">Name</label>
                <input name="attr_trait_name" type="text" data-i18n-placeholder="trait_name_placeholder" placeholder="Trait"/>
              </div>
              <div class="wf-input col-span-2">
                <label data-i18n="trait_details">Details</label>
                <textarea name="attr_trait_details" data-i18n-placeholder="trait_details_placeholder" placeholder="Details..."></textarea>
              </div>
            </div>
          </fieldset>
        </div>
        <div class="wf-container wf-navy col-span-3 wf__communities">
          <h3 class="wf-heading" data-i18n="communities">Communities</h3>
          <fieldset class="repeating_communities">
            <div class="wf-community grid grid-cols-2">
              <div class="wf-input">
                <label data-i18n="community_name">Community</label>
                <input name="attr_community_name" type="text" data-i18n-placeholder="community_name_placeholder" placeholder="Community"/>
              </div>
              <div class="wf-input--valuemax">
                <label class="text-center" data-i18n="hp">Health</label>
                <div class="wf-input">
                  <label data-i18n="current">Current</label>
                  <input name="attr_hp" placeholder="0" min="0" type="number"/>
                </div>
                <div class="wf-input">
                  <label data-i18n="max">Max</label>
                  <input name="attr_hp_max" placeholder="0" min="0" type="number"/>
                </div>
              </div>
              <div class="wf-input col-span-2">
                <label data-i18n="community_details">Details</label>
                <textarea name="attr_community_details" data-i18n-placeholder="community_details_placeholder" placeholder="Details..."></textarea>
              </div>
            </div>
          </fieldset>
        </div>
        <div class="wf-container wf-orange col-span-3 wf__forages">
          <h3 class="wf-heading" data-i18n="forages">Forages</h3>
          <fieldset class="repeating_forages">
            <div class="wf-forage grid grid-cols-2">
              <div class="wf-input">
                <label data-i18n="forage_name">Forage</label>
                <input name="attr_forage_name" type="text" data-i18n-placeholder="forage_name_placeholder" placeholder="Forage"/>
              </div>
              <div class="wf-input">
                <label data-i18n="forage_style">Style</label>
                <input name="attr_forage_style" type="text" data-i18n-placeholder="forage_style_placeholder" placeholder="Style"/>
              </div>
              <div class="wf-input col-span-2">
                <label data-i18n="forage_details">Details</label>
                <textarea name="attr_forage_details" data-i18n-placeholder="forage_details_placeholder" placeholder="Details..."></textarea>
              </div>
            </div>
          </fieldset>
        </div>
        <div class="wf-container wf-navy col-span-3 wf__travels">
          <h3 class="wf-heading" data-i18n="travels">Travels</h3>
          <fieldset class="repeating_travels">
            <div class="wf-travel grid grid-cols-2">
              <div class="wf-input">
                <label data-i18n="travel_name">Travel</label>
                <input name="attr_travel_name" type="text" data-i18n-placeholder="travel_name_placeholder" placeholder="Travel"/>
              </div>
              <div class="wf-input">
                <label data-i18n="travel_style">Style</label>
                <input name="attr_travel_style" type="text" data-i18n-placeholder="travel_style_placeholder" placeholder="Style"/>
              </div>
              <div class="wf-input col-span-2">
                <label data-i18n="travel_details">Details</label>
                <textarea name="attr_travel_details" data-i18n-placeholder="travel_details_placeholder" placeholder="Details..."></textarea>
              </div>
            </div>
          </fieldset>
        </div>
        <div class="wf-container wf-green col-span-6 wf__notes">
          <h3 class="wf-heading" data-i18n="notes">Notes</h3>
          <fieldset class="repeating_notes">
            <div class="wf-note">
              <div class="wf-input">
                <label data-i18n="note_name">Title</label>
                <input name="attr_note_name" type="text" data-i18n-placeholder="note_name_placeholder" placeholder="Note Title"/>
              </div>
              <div class="wf-input">
                <label data-i18n="note_details">Details...</label>
                <textarea name="attr_note_details" data-i18n-placeholder="note_details_placeholder" placeholder="Details..."></textarea>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
    </main>
    <footer class="wf__version"><span data-i18n="version">Version</span>&nbsp;<span name="attr_version"></span></footer>
  </div>
</div>
<rolltemplate class="sheet-rolltemplate-action">
  <div class="sheet-wf-wrapper">
    <div class="sheet-wf-header">{{#character_name}}
      <div class="sheet-wf-character-name"><span>{{character_name}}</span></div>{{/character_name}}{{#wild}}
      <div class="sheet-wf-go-wild"><span data-i18n="goes_wild">Goes&#10;Wild</span></div>{{/wild}}{{#focus}}
      <div class="sheet-wf-focus-up"><span data-i18n="focuses_up">Focuses&#10;Up</span></div>{{/focus}}
      <div class="sheet-wf-circumstance">{{#rollBetween() question 1 1}}<span data-i18n="advantage">Advantage!</span>{{/rollBetween() question 1 1}}{{#rollBetween() question -1 -1}}<span data-i18n="disadvantage">Disadvantage!</span>{{/rollBetween() question -1 -1}}
      </div>
      <div class="sheet-wf-style-and-skill"><span class="sheet-wf-header--style">{{style}}</span>&nbsp;<span class="sheet-wf-header--skill">{{skill}}</span></div>
    </div>
    <div class="sheet-wf-dice-tray">
      <div class="sheet-wf-style">{{#rollBetween() question 1 1}}
        <div class="sheet-wf-style__roll--advantage">{{#roll_style1}}{{#rollBetween() roll_style1 1 1}}<span class="sheet-wf-style__face-1">{{roll_style1}}</span>{{/rollBetween() roll_style1 1 1}}{{#rollBetween() roll_style1 2 2}}<span class="sheet-wf-style__face-2">{{roll_style1}}</span>{{/rollBetween() roll_style1 2 2}}{{#rollBetween() roll_style1 3 3}}<span class="sheet-wf-style__face-3">{{roll_style1}}</span>{{/rollBetween() roll_style1 3 3}}{{#rollBetween() roll_style1 4 4}}<span class="sheet-wf-style__face-4">{{roll_style1}}</span>{{/rollBetween() roll_style1 4 4}}{{#rollBetween() roll_style1 5 5}}<span class="sheet-wf-style__face-5">{{roll_style1}}</span>{{/rollBetween() roll_style1 5 5}}{{#rollBetween() roll_style1 6 20}}<span class="sheet-wf-style__face-6">{{roll_style1}}</span>{{/rollBetween() roll_style1 6 20}}{{/roll_style1}}{{#roll_style2}}{{#rollBetween() roll_style2 1 1}}<span class="sheet-wf-style__face-1">{{roll_style2}}</span>{{/rollBetween() roll_style2 1 1}}{{#rollBetween() roll_style2 2 2}}<span class="sheet-wf-style__face-2">{{roll_style2}}</span>{{/rollBetween() roll_style2 2 2}}{{#rollBetween() roll_style2 3 3}}<span class="sheet-wf-style__face-3">{{roll_style2}}</span>{{/rollBetween() roll_style2 3 3}}{{#rollBetween() roll_style2 4 4}}<span class="sheet-wf-style__face-4">{{roll_style2}}</span>{{/rollBetween() roll_style2 4 4}}{{#rollBetween() roll_style2 5 5}}<span class="sheet-wf-style__face-5">{{roll_style2}}</span>{{/rollBetween() roll_style2 5 5}}{{#rollBetween() roll_style2 6 20}}<span class="sheet-wf-style__face-6">{{roll_style2}}</span>{{/rollBetween() roll_style2 6 20}}{{/roll_style2}}{{#roll_style3}}{{#rollBetween() roll_style3 1 1}}<span class="sheet-wf-style__face-1">{{roll_style3}}</span>{{/rollBetween() roll_style3 1 1}}{{#rollBetween() roll_style3 2 2}}<span class="sheet-wf-style__face-2">{{roll_style3}}</span>{{/rollBetween() roll_style3 2 2}}{{#rollBetween() roll_style3 3 3}}<span class="sheet-wf-style__face-3">{{roll_style3}}</span>{{/rollBetween() roll_style3 3 3}}{{#rollBetween() roll_style3 4 4}}<span class="sheet-wf-style__face-4">{{roll_style3}}</span>{{/rollBetween() roll_style3 4 4}}{{#rollBetween() roll_style3 5 5}}<span class="sheet-wf-style__face-5">{{roll_style3}}</span>{{/rollBetween() roll_style3 5 5}}{{#rollBetween() roll_style3 6 20}}<span class="sheet-wf-style__face-6">{{roll_style3}}</span>{{/rollBetween() roll_style3 6 20}}{{/roll_style3}}{{#roll_style4}}{{#rollBetween() roll_style4 1 1}}<span class="sheet-wf-style__face-1">{{roll_style4}}</span>{{/rollBetween() roll_style4 1 1}}{{#rollBetween() roll_style4 2 2}}<span class="sheet-wf-style__face-2">{{roll_style4}}</span>{{/rollBetween() roll_style4 2 2}}{{#rollBetween() roll_style4 3 3}}<span class="sheet-wf-style__face-3">{{roll_style4}}</span>{{/rollBetween() roll_style4 3 3}}{{#rollBetween() roll_style4 4 4}}<span class="sheet-wf-style__face-4">{{roll_style4}}</span>{{/rollBetween() roll_style4 4 4}}{{#rollBetween() roll_style4 5 5}}<span class="sheet-wf-style__face-5">{{roll_style4}}</span>{{/rollBetween() roll_style4 5 5}}{{#rollBetween() roll_style4 6 20}}<span class="sheet-wf-style__face-6">{{roll_style4}}</span>{{/rollBetween() roll_style4 6 20}}{{/roll_style4}}{{#roll_style5}}{{#rollBetween() roll_style5 1 1}}<span class="sheet-wf-style__face-1">{{roll_style5}}</span>{{/rollBetween() roll_style5 1 1}}{{#rollBetween() roll_style5 2 2}}<span class="sheet-wf-style__face-2">{{roll_style5}}</span>{{/rollBetween() roll_style5 2 2}}{{#rollBetween() roll_style5 3 3}}<span class="sheet-wf-style__face-3">{{roll_style5}}</span>{{/rollBetween() roll_style5 3 3}}{{#rollBetween() roll_style5 4 4}}<span class="sheet-wf-style__face-4">{{roll_style5}}</span>{{/rollBetween() roll_style5 4 4}}{{#rollBetween() roll_style5 5 5}}<span class="sheet-wf-style__face-5">{{roll_style5}}</span>{{/rollBetween() roll_style5 5 5}}{{#rollBetween() roll_style5 6 20}}<span class="sheet-wf-style__face-6">{{roll_style5}}</span>{{/rollBetween() roll_style5 6 20}}{{/roll_style5}}{{#roll_style6}}{{#rollBetween() roll_style6 1 1}}<span class="sheet-wf-style__face-1">{{roll_style6}}</span>{{/rollBetween() roll_style6 1 1}}{{#rollBetween() roll_style6 2 2}}<span class="sheet-wf-style__face-2">{{roll_style6}}</span>{{/rollBetween() roll_style6 2 2}}{{#rollBetween() roll_style6 3 3}}<span class="sheet-wf-style__face-3">{{roll_style6}}</span>{{/rollBetween() roll_style6 3 3}}{{#rollBetween() roll_style6 4 4}}<span class="sheet-wf-style__face-4">{{roll_style6}}</span>{{/rollBetween() roll_style6 4 4}}{{#rollBetween() roll_style6 5 5}}<span class="sheet-wf-style__face-5">{{roll_style6}}</span>{{/rollBetween() roll_style6 5 5}}{{#rollBetween() roll_style6 6 20}}<span class="sheet-wf-style__face-6">{{roll_style6}}</span>{{/rollBetween() roll_style6 6 20}}{{/roll_style6}}{{#roll_style7}}{{#rollBetween() roll_style7 1 1}}<span class="sheet-wf-style__face-1">{{roll_style7}}</span>{{/rollBetween() roll_style7 1 1}}{{#rollBetween() roll_style7 2 2}}<span class="sheet-wf-style__face-2">{{roll_style7}}</span>{{/rollBetween() roll_style7 2 2}}{{#rollBetween() roll_style7 3 3}}<span class="sheet-wf-style__face-3">{{roll_style7}}</span>{{/rollBetween() roll_style7 3 3}}{{#rollBetween() roll_style7 4 4}}<span class="sheet-wf-style__face-4">{{roll_style7}}</span>{{/rollBetween() roll_style7 4 4}}{{#rollBetween() roll_style7 5 5}}<span class="sheet-wf-style__face-5">{{roll_style7}}</span>{{/rollBetween() roll_style7 5 5}}{{#rollBetween() roll_style7 6 20}}<span class="sheet-wf-style__face-6">{{roll_style7}}</span>{{/rollBetween() roll_style7 6 20}}{{/roll_style7}}{{#roll_style8}}{{#rollBetween() roll_style8 1 1}}<span class="sheet-wf-style__face-1">{{roll_style8}}</span>{{/rollBetween() roll_style8 1 1}}{{#rollBetween() roll_style8 2 2}}<span class="sheet-wf-style__face-2">{{roll_style8}}</span>{{/rollBetween() roll_style8 2 2}}{{#rollBetween() roll_style8 3 3}}<span class="sheet-wf-style__face-3">{{roll_style8}}</span>{{/rollBetween() roll_style8 3 3}}{{#rollBetween() roll_style8 4 4}}<span class="sheet-wf-style__face-4">{{roll_style8}}</span>{{/rollBetween() roll_style8 4 4}}{{#rollBetween() roll_style8 5 5}}<span class="sheet-wf-style__face-5">{{roll_style8}}</span>{{/rollBetween() roll_style8 5 5}}{{#rollBetween() roll_style8 6 20}}<span class="sheet-wf-style__face-6">{{roll_style8}}</span>{{/rollBetween() roll_style8 6 20}}{{/roll_style8}}{{#roll_style9}}{{#rollBetween() roll_style9 1 1}}<span class="sheet-wf-style__face-1">{{roll_style9}}</span>{{/rollBetween() roll_style9 1 1}}{{#rollBetween() roll_style9 2 2}}<span class="sheet-wf-style__face-2">{{roll_style9}}</span>{{/rollBetween() roll_style9 2 2}}{{#rollBetween() roll_style9 3 3}}<span class="sheet-wf-style__face-3">{{roll_style9}}</span>{{/rollBetween() roll_style9 3 3}}{{#rollBetween() roll_style9 4 4}}<span class="sheet-wf-style__face-4">{{roll_style9}}</span>{{/rollBetween() roll_style9 4 4}}{{#rollBetween() roll_style9 5 5}}<span class="sheet-wf-style__face-5">{{roll_style9}}</span>{{/rollBetween() roll_style9 5 5}}{{#rollBetween() roll_style9 6 20}}<span class="sheet-wf-style__face-6">{{roll_style9}}</span>{{/rollBetween() roll_style9 6 20}}{{/roll_style9}}{{#roll_style10}}{{#rollBetween() roll_style10 1 1}}<span class="sheet-wf-style__face-1">{{roll_style10}}</span>{{/rollBetween() roll_style10 1 1}}{{#rollBetween() roll_style10 2 2}}<span class="sheet-wf-style__face-2">{{roll_style10}}</span>{{/rollBetween() roll_style10 2 2}}{{#rollBetween() roll_style10 3 3}}<span class="sheet-wf-style__face-3">{{roll_style10}}</span>{{/rollBetween() roll_style10 3 3}}{{#rollBetween() roll_style10 4 4}}<span class="sheet-wf-style__face-4">{{roll_style10}}</span>{{/rollBetween() roll_style10 4 4}}{{#rollBetween() roll_style10 5 5}}<span class="sheet-wf-style__face-5">{{roll_style10}}</span>{{/rollBetween() roll_style10 5 5}}{{#rollBetween() roll_style10 6 20}}<span class="sheet-wf-style__face-6">{{roll_style10}}</span>{{/rollBetween() roll_style10 6 20}}{{/roll_style10}}
        </div>{{/rollBetween() question 1 1}}{{#rollBetween() question 0 0}}
        <div class="sheet-wf-style__roll">{{#roll_style1}}{{#rollBetween() roll_style1 1 1}}<span class="sheet-wf-style__face-1">{{roll_style1}}</span>{{/rollBetween() roll_style1 1 1}}{{#rollBetween() roll_style1 2 2}}<span class="sheet-wf-style__face-2">{{roll_style1}}</span>{{/rollBetween() roll_style1 2 2}}{{#rollBetween() roll_style1 3 3}}<span class="sheet-wf-style__face-3">{{roll_style1}}</span>{{/rollBetween() roll_style1 3 3}}{{#rollBetween() roll_style1 4 4}}<span class="sheet-wf-style__face-4">{{roll_style1}}</span>{{/rollBetween() roll_style1 4 4}}{{#rollBetween() roll_style1 5 5}}<span class="sheet-wf-style__face-5">{{roll_style1}}</span>{{/rollBetween() roll_style1 5 5}}{{#rollBetween() roll_style1 6 20}}<span class="sheet-wf-style__face-6">{{roll_style1}}</span>{{/rollBetween() roll_style1 6 20}}{{/roll_style1}}{{#roll_style2}}{{#rollBetween() roll_style2 1 1}}<span class="sheet-wf-style__face-1">{{roll_style2}}</span>{{/rollBetween() roll_style2 1 1}}{{#rollBetween() roll_style2 2 2}}<span class="sheet-wf-style__face-2">{{roll_style2}}</span>{{/rollBetween() roll_style2 2 2}}{{#rollBetween() roll_style2 3 3}}<span class="sheet-wf-style__face-3">{{roll_style2}}</span>{{/rollBetween() roll_style2 3 3}}{{#rollBetween() roll_style2 4 4}}<span class="sheet-wf-style__face-4">{{roll_style2}}</span>{{/rollBetween() roll_style2 4 4}}{{#rollBetween() roll_style2 5 5}}<span class="sheet-wf-style__face-5">{{roll_style2}}</span>{{/rollBetween() roll_style2 5 5}}{{#rollBetween() roll_style2 6 20}}<span class="sheet-wf-style__face-6">{{roll_style2}}</span>{{/rollBetween() roll_style2 6 20}}{{/roll_style2}}{{#roll_style3}}{{#rollBetween() roll_style3 1 1}}<span class="sheet-wf-style__face-1">{{roll_style3}}</span>{{/rollBetween() roll_style3 1 1}}{{#rollBetween() roll_style3 2 2}}<span class="sheet-wf-style__face-2">{{roll_style3}}</span>{{/rollBetween() roll_style3 2 2}}{{#rollBetween() roll_style3 3 3}}<span class="sheet-wf-style__face-3">{{roll_style3}}</span>{{/rollBetween() roll_style3 3 3}}{{#rollBetween() roll_style3 4 4}}<span class="sheet-wf-style__face-4">{{roll_style3}}</span>{{/rollBetween() roll_style3 4 4}}{{#rollBetween() roll_style3 5 5}}<span class="sheet-wf-style__face-5">{{roll_style3}}</span>{{/rollBetween() roll_style3 5 5}}{{#rollBetween() roll_style3 6 20}}<span class="sheet-wf-style__face-6">{{roll_style3}}</span>{{/rollBetween() roll_style3 6 20}}{{/roll_style3}}{{#roll_style4}}{{#rollBetween() roll_style4 1 1}}<span class="sheet-wf-style__face-1">{{roll_style4}}</span>{{/rollBetween() roll_style4 1 1}}{{#rollBetween() roll_style4 2 2}}<span class="sheet-wf-style__face-2">{{roll_style4}}</span>{{/rollBetween() roll_style4 2 2}}{{#rollBetween() roll_style4 3 3}}<span class="sheet-wf-style__face-3">{{roll_style4}}</span>{{/rollBetween() roll_style4 3 3}}{{#rollBetween() roll_style4 4 4}}<span class="sheet-wf-style__face-4">{{roll_style4}}</span>{{/rollBetween() roll_style4 4 4}}{{#rollBetween() roll_style4 5 5}}<span class="sheet-wf-style__face-5">{{roll_style4}}</span>{{/rollBetween() roll_style4 5 5}}{{#rollBetween() roll_style4 6 20}}<span class="sheet-wf-style__face-6">{{roll_style4}}</span>{{/rollBetween() roll_style4 6 20}}{{/roll_style4}}{{#roll_style5}}{{#rollBetween() roll_style5 1 1}}<span class="sheet-wf-style__face-1">{{roll_style5}}</span>{{/rollBetween() roll_style5 1 1}}{{#rollBetween() roll_style5 2 2}}<span class="sheet-wf-style__face-2">{{roll_style5}}</span>{{/rollBetween() roll_style5 2 2}}{{#rollBetween() roll_style5 3 3}}<span class="sheet-wf-style__face-3">{{roll_style5}}</span>{{/rollBetween() roll_style5 3 3}}{{#rollBetween() roll_style5 4 4}}<span class="sheet-wf-style__face-4">{{roll_style5}}</span>{{/rollBetween() roll_style5 4 4}}{{#rollBetween() roll_style5 5 5}}<span class="sheet-wf-style__face-5">{{roll_style5}}</span>{{/rollBetween() roll_style5 5 5}}{{#rollBetween() roll_style5 6 20}}<span class="sheet-wf-style__face-6">{{roll_style5}}</span>{{/rollBetween() roll_style5 6 20}}{{/roll_style5}}{{#roll_style6}}{{#rollBetween() roll_style6 1 1}}<span class="sheet-wf-style__face-1">{{roll_style6}}</span>{{/rollBetween() roll_style6 1 1}}{{#rollBetween() roll_style6 2 2}}<span class="sheet-wf-style__face-2">{{roll_style6}}</span>{{/rollBetween() roll_style6 2 2}}{{#rollBetween() roll_style6 3 3}}<span class="sheet-wf-style__face-3">{{roll_style6}}</span>{{/rollBetween() roll_style6 3 3}}{{#rollBetween() roll_style6 4 4}}<span class="sheet-wf-style__face-4">{{roll_style6}}</span>{{/rollBetween() roll_style6 4 4}}{{#rollBetween() roll_style6 5 5}}<span class="sheet-wf-style__face-5">{{roll_style6}}</span>{{/rollBetween() roll_style6 5 5}}{{#rollBetween() roll_style6 6 20}}<span class="sheet-wf-style__face-6">{{roll_style6}}</span>{{/rollBetween() roll_style6 6 20}}{{/roll_style6}}{{#roll_style7}}{{#rollBetween() roll_style7 1 1}}<span class="sheet-wf-style__face-1">{{roll_style7}}</span>{{/rollBetween() roll_style7 1 1}}{{#rollBetween() roll_style7 2 2}}<span class="sheet-wf-style__face-2">{{roll_style7}}</span>{{/rollBetween() roll_style7 2 2}}{{#rollBetween() roll_style7 3 3}}<span class="sheet-wf-style__face-3">{{roll_style7}}</span>{{/rollBetween() roll_style7 3 3}}{{#rollBetween() roll_style7 4 4}}<span class="sheet-wf-style__face-4">{{roll_style7}}</span>{{/rollBetween() roll_style7 4 4}}{{#rollBetween() roll_style7 5 5}}<span class="sheet-wf-style__face-5">{{roll_style7}}</span>{{/rollBetween() roll_style7 5 5}}{{#rollBetween() roll_style7 6 20}}<span class="sheet-wf-style__face-6">{{roll_style7}}</span>{{/rollBetween() roll_style7 6 20}}{{/roll_style7}}{{#roll_style8}}{{#rollBetween() roll_style8 1 1}}<span class="sheet-wf-style__face-1">{{roll_style8}}</span>{{/rollBetween() roll_style8 1 1}}{{#rollBetween() roll_style8 2 2}}<span class="sheet-wf-style__face-2">{{roll_style8}}</span>{{/rollBetween() roll_style8 2 2}}{{#rollBetween() roll_style8 3 3}}<span class="sheet-wf-style__face-3">{{roll_style8}}</span>{{/rollBetween() roll_style8 3 3}}{{#rollBetween() roll_style8 4 4}}<span class="sheet-wf-style__face-4">{{roll_style8}}</span>{{/rollBetween() roll_style8 4 4}}{{#rollBetween() roll_style8 5 5}}<span class="sheet-wf-style__face-5">{{roll_style8}}</span>{{/rollBetween() roll_style8 5 5}}{{#rollBetween() roll_style8 6 20}}<span class="sheet-wf-style__face-6">{{roll_style8}}</span>{{/rollBetween() roll_style8 6 20}}{{/roll_style8}}{{#roll_style9}}{{#rollBetween() roll_style9 1 1}}<span class="sheet-wf-style__face-1">{{roll_style9}}</span>{{/rollBetween() roll_style9 1 1}}{{#rollBetween() roll_style9 2 2}}<span class="sheet-wf-style__face-2">{{roll_style9}}</span>{{/rollBetween() roll_style9 2 2}}{{#rollBetween() roll_style9 3 3}}<span class="sheet-wf-style__face-3">{{roll_style9}}</span>{{/rollBetween() roll_style9 3 3}}{{#rollBetween() roll_style9 4 4}}<span class="sheet-wf-style__face-4">{{roll_style9}}</span>{{/rollBetween() roll_style9 4 4}}{{#rollBetween() roll_style9 5 5}}<span class="sheet-wf-style__face-5">{{roll_style9}}</span>{{/rollBetween() roll_style9 5 5}}{{#rollBetween() roll_style9 6 20}}<span class="sheet-wf-style__face-6">{{roll_style9}}</span>{{/rollBetween() roll_style9 6 20}}{{/roll_style9}}{{#roll_style10}}{{#rollBetween() roll_style10 1 1}}<span class="sheet-wf-style__face-1">{{roll_style10}}</span>{{/rollBetween() roll_style10 1 1}}{{#rollBetween() roll_style10 2 2}}<span class="sheet-wf-style__face-2">{{roll_style10}}</span>{{/rollBetween() roll_style10 2 2}}{{#rollBetween() roll_style10 3 3}}<span class="sheet-wf-style__face-3">{{roll_style10}}</span>{{/rollBetween() roll_style10 3 3}}{{#rollBetween() roll_style10 4 4}}<span class="sheet-wf-style__face-4">{{roll_style10}}</span>{{/rollBetween() roll_style10 4 4}}{{#rollBetween() roll_style10 5 5}}<span class="sheet-wf-style__face-5">{{roll_style10}}</span>{{/rollBetween() roll_style10 5 5}}{{#rollBetween() roll_style10 6 20}}<span class="sheet-wf-style__face-6">{{roll_style10}}</span>{{/rollBetween() roll_style10 6 20}}{{/roll_style10}}
        </div>{{/rollBetween() question 0 0}}{{#rollBetween() question -1 -1}}
        <div class="sheet-wf-style__roll--disadvantage">{{#roll_style1}}{{#rollBetween() roll_style1 1 1}}<span class="sheet-wf-style__face-1">{{roll_style1}}</span>{{/rollBetween() roll_style1 1 1}}{{#rollBetween() roll_style1 2 2}}<span class="sheet-wf-style__face-2">{{roll_style1}}</span>{{/rollBetween() roll_style1 2 2}}{{#rollBetween() roll_style1 3 3}}<span class="sheet-wf-style__face-3">{{roll_style1}}</span>{{/rollBetween() roll_style1 3 3}}{{#rollBetween() roll_style1 4 4}}<span class="sheet-wf-style__face-4">{{roll_style1}}</span>{{/rollBetween() roll_style1 4 4}}{{#rollBetween() roll_style1 5 5}}<span class="sheet-wf-style__face-5">{{roll_style1}}</span>{{/rollBetween() roll_style1 5 5}}{{#rollBetween() roll_style1 6 20}}<span class="sheet-wf-style__face-6">{{roll_style1}}</span>{{/rollBetween() roll_style1 6 20}}{{/roll_style1}}{{#roll_style2}}{{#rollBetween() roll_style2 1 1}}<span class="sheet-wf-style__face-1">{{roll_style2}}</span>{{/rollBetween() roll_style2 1 1}}{{#rollBetween() roll_style2 2 2}}<span class="sheet-wf-style__face-2">{{roll_style2}}</span>{{/rollBetween() roll_style2 2 2}}{{#rollBetween() roll_style2 3 3}}<span class="sheet-wf-style__face-3">{{roll_style2}}</span>{{/rollBetween() roll_style2 3 3}}{{#rollBetween() roll_style2 4 4}}<span class="sheet-wf-style__face-4">{{roll_style2}}</span>{{/rollBetween() roll_style2 4 4}}{{#rollBetween() roll_style2 5 5}}<span class="sheet-wf-style__face-5">{{roll_style2}}</span>{{/rollBetween() roll_style2 5 5}}{{#rollBetween() roll_style2 6 20}}<span class="sheet-wf-style__face-6">{{roll_style2}}</span>{{/rollBetween() roll_style2 6 20}}{{/roll_style2}}{{#roll_style3}}{{#rollBetween() roll_style3 1 1}}<span class="sheet-wf-style__face-1">{{roll_style3}}</span>{{/rollBetween() roll_style3 1 1}}{{#rollBetween() roll_style3 2 2}}<span class="sheet-wf-style__face-2">{{roll_style3}}</span>{{/rollBetween() roll_style3 2 2}}{{#rollBetween() roll_style3 3 3}}<span class="sheet-wf-style__face-3">{{roll_style3}}</span>{{/rollBetween() roll_style3 3 3}}{{#rollBetween() roll_style3 4 4}}<span class="sheet-wf-style__face-4">{{roll_style3}}</span>{{/rollBetween() roll_style3 4 4}}{{#rollBetween() roll_style3 5 5}}<span class="sheet-wf-style__face-5">{{roll_style3}}</span>{{/rollBetween() roll_style3 5 5}}{{#rollBetween() roll_style3 6 20}}<span class="sheet-wf-style__face-6">{{roll_style3}}</span>{{/rollBetween() roll_style3 6 20}}{{/roll_style3}}{{#roll_style4}}{{#rollBetween() roll_style4 1 1}}<span class="sheet-wf-style__face-1">{{roll_style4}}</span>{{/rollBetween() roll_style4 1 1}}{{#rollBetween() roll_style4 2 2}}<span class="sheet-wf-style__face-2">{{roll_style4}}</span>{{/rollBetween() roll_style4 2 2}}{{#rollBetween() roll_style4 3 3}}<span class="sheet-wf-style__face-3">{{roll_style4}}</span>{{/rollBetween() roll_style4 3 3}}{{#rollBetween() roll_style4 4 4}}<span class="sheet-wf-style__face-4">{{roll_style4}}</span>{{/rollBetween() roll_style4 4 4}}{{#rollBetween() roll_style4 5 5}}<span class="sheet-wf-style__face-5">{{roll_style4}}</span>{{/rollBetween() roll_style4 5 5}}{{#rollBetween() roll_style4 6 20}}<span class="sheet-wf-style__face-6">{{roll_style4}}</span>{{/rollBetween() roll_style4 6 20}}{{/roll_style4}}{{#roll_style5}}{{#rollBetween() roll_style5 1 1}}<span class="sheet-wf-style__face-1">{{roll_style5}}</span>{{/rollBetween() roll_style5 1 1}}{{#rollBetween() roll_style5 2 2}}<span class="sheet-wf-style__face-2">{{roll_style5}}</span>{{/rollBetween() roll_style5 2 2}}{{#rollBetween() roll_style5 3 3}}<span class="sheet-wf-style__face-3">{{roll_style5}}</span>{{/rollBetween() roll_style5 3 3}}{{#rollBetween() roll_style5 4 4}}<span class="sheet-wf-style__face-4">{{roll_style5}}</span>{{/rollBetween() roll_style5 4 4}}{{#rollBetween() roll_style5 5 5}}<span class="sheet-wf-style__face-5">{{roll_style5}}</span>{{/rollBetween() roll_style5 5 5}}{{#rollBetween() roll_style5 6 20}}<span class="sheet-wf-style__face-6">{{roll_style5}}</span>{{/rollBetween() roll_style5 6 20}}{{/roll_style5}}{{#roll_style6}}{{#rollBetween() roll_style6 1 1}}<span class="sheet-wf-style__face-1">{{roll_style6}}</span>{{/rollBetween() roll_style6 1 1}}{{#rollBetween() roll_style6 2 2}}<span class="sheet-wf-style__face-2">{{roll_style6}}</span>{{/rollBetween() roll_style6 2 2}}{{#rollBetween() roll_style6 3 3}}<span class="sheet-wf-style__face-3">{{roll_style6}}</span>{{/rollBetween() roll_style6 3 3}}{{#rollBetween() roll_style6 4 4}}<span class="sheet-wf-style__face-4">{{roll_style6}}</span>{{/rollBetween() roll_style6 4 4}}{{#rollBetween() roll_style6 5 5}}<span class="sheet-wf-style__face-5">{{roll_style6}}</span>{{/rollBetween() roll_style6 5 5}}{{#rollBetween() roll_style6 6 20}}<span class="sheet-wf-style__face-6">{{roll_style6}}</span>{{/rollBetween() roll_style6 6 20}}{{/roll_style6}}{{#roll_style7}}{{#rollBetween() roll_style7 1 1}}<span class="sheet-wf-style__face-1">{{roll_style7}}</span>{{/rollBetween() roll_style7 1 1}}{{#rollBetween() roll_style7 2 2}}<span class="sheet-wf-style__face-2">{{roll_style7}}</span>{{/rollBetween() roll_style7 2 2}}{{#rollBetween() roll_style7 3 3}}<span class="sheet-wf-style__face-3">{{roll_style7}}</span>{{/rollBetween() roll_style7 3 3}}{{#rollBetween() roll_style7 4 4}}<span class="sheet-wf-style__face-4">{{roll_style7}}</span>{{/rollBetween() roll_style7 4 4}}{{#rollBetween() roll_style7 5 5}}<span class="sheet-wf-style__face-5">{{roll_style7}}</span>{{/rollBetween() roll_style7 5 5}}{{#rollBetween() roll_style7 6 20}}<span class="sheet-wf-style__face-6">{{roll_style7}}</span>{{/rollBetween() roll_style7 6 20}}{{/roll_style7}}{{#roll_style8}}{{#rollBetween() roll_style8 1 1}}<span class="sheet-wf-style__face-1">{{roll_style8}}</span>{{/rollBetween() roll_style8 1 1}}{{#rollBetween() roll_style8 2 2}}<span class="sheet-wf-style__face-2">{{roll_style8}}</span>{{/rollBetween() roll_style8 2 2}}{{#rollBetween() roll_style8 3 3}}<span class="sheet-wf-style__face-3">{{roll_style8}}</span>{{/rollBetween() roll_style8 3 3}}{{#rollBetween() roll_style8 4 4}}<span class="sheet-wf-style__face-4">{{roll_style8}}</span>{{/rollBetween() roll_style8 4 4}}{{#rollBetween() roll_style8 5 5}}<span class="sheet-wf-style__face-5">{{roll_style8}}</span>{{/rollBetween() roll_style8 5 5}}{{#rollBetween() roll_style8 6 20}}<span class="sheet-wf-style__face-6">{{roll_style8}}</span>{{/rollBetween() roll_style8 6 20}}{{/roll_style8}}{{#roll_style9}}{{#rollBetween() roll_style9 1 1}}<span class="sheet-wf-style__face-1">{{roll_style9}}</span>{{/rollBetween() roll_style9 1 1}}{{#rollBetween() roll_style9 2 2}}<span class="sheet-wf-style__face-2">{{roll_style9}}</span>{{/rollBetween() roll_style9 2 2}}{{#rollBetween() roll_style9 3 3}}<span class="sheet-wf-style__face-3">{{roll_style9}}</span>{{/rollBetween() roll_style9 3 3}}{{#rollBetween() roll_style9 4 4}}<span class="sheet-wf-style__face-4">{{roll_style9}}</span>{{/rollBetween() roll_style9 4 4}}{{#rollBetween() roll_style9 5 5}}<span class="sheet-wf-style__face-5">{{roll_style9}}</span>{{/rollBetween() roll_style9 5 5}}{{#rollBetween() roll_style9 6 20}}<span class="sheet-wf-style__face-6">{{roll_style9}}</span>{{/rollBetween() roll_style9 6 20}}{{/roll_style9}}{{#roll_style10}}{{#rollBetween() roll_style10 1 1}}<span class="sheet-wf-style__face-1">{{roll_style10}}</span>{{/rollBetween() roll_style10 1 1}}{{#rollBetween() roll_style10 2 2}}<span class="sheet-wf-style__face-2">{{roll_style10}}</span>{{/rollBetween() roll_style10 2 2}}{{#rollBetween() roll_style10 3 3}}<span class="sheet-wf-style__face-3">{{roll_style10}}</span>{{/rollBetween() roll_style10 3 3}}{{#rollBetween() roll_style10 4 4}}<span class="sheet-wf-style__face-4">{{roll_style10}}</span>{{/rollBetween() roll_style10 4 4}}{{#rollBetween() roll_style10 5 5}}<span class="sheet-wf-style__face-5">{{roll_style10}}</span>{{/rollBetween() roll_style10 5 5}}{{#rollBetween() roll_style10 6 20}}<span class="sheet-wf-style__face-6">{{roll_style10}}</span>{{/rollBetween() roll_style10 6 20}}{{/roll_style10}}
        </div>{{/rollBetween() question -1 -1}}
      </div>
      <div class="sheet-wf-action sheet-wf-action--{{action_is}}">{{#rollBetween() roll_action 1 4}}<span class="sheet-wf-action__roll--partial">{{roll_action}}</span><span class="sheet-wf-action__result" data-i18n="success_partial">Partial Success</span>{{/rollBetween() roll_action 1 4}}{{#rollBetween() roll_action 5 7}}<span class="sheet-wf-action__roll">{{roll_action}}</span><span class="sheet-wf-action__result" data-i18n="success_standard">Standard Success</span>{{/rollBetween() roll_action 5 7}}{{#rollBetween() roll_action 8 20}}<span class="sheet-wf-action__roll--critical">{{roll_action}}</span><span class="sheet-wf-action__result" data-i18n="success_critical">Critical Success</span>{{/rollBetween() roll_action 8 20}}
      </div>
    </div>
  </div>
</rolltemplate>
<div style="display: none"><span data-i18n="action">Action</span>
</div>
<script type="text/worker">
  const STYLES = ["mighty", "precise", "swift", "tricky"];
const SKILLS = [
  "assurance",
  "display",
  "shot",
  "call",
  "grab",
  "strike",
  "craft",
  "hoard",
  "study",
  "cure",
  "search",
  "traversal",
];

const CONDITIONS = [
  { label: "Burned", name: "burned" },
  { label: "Caught", name: "caught" },
  { label: "Confused", name: "confused", min: 1 },
  { label: "Discordant", name: "discordant" },
  { label: "Expanded", name: "expanded" },
  { label: "Exposed", name: "exposed" },
  { label: "Fatigued", name: "fatigued", min: 1 },
  { label: "Frightened", name: "frightened", min: 1 },
  { label: "Invigorated", name: "invigorated", min: 1 },
  { label: "Hidden", name: "hidden" },
  { label: "Poisoned", name: "poisoned", min: 1 },
  { label: "Rehabilitating", name: "rehabilitating", min: 1, max: 6 },
  { label: "Rested", name: "rested", min: 1 },
  { label: "Stunned", name: "stunned", min: 1 },
  { label: "Wounded", name: "wounded", min: 1, max: 3 },
];
const CONDITIONS_REQUEST = CONDITIONS.flatMap((c) => [c.name, `${c.name}_level`]);

const MAX_FIELDS = ["hp", "tool_durability", "harmony"];
  // Handle conditions that affect other rolls
for (const condition of CONDITIONS) {
  on(`change:${condition.name} change:${condition.name}_level`, (eventInfo) => {
    getAttrs(CONDITIONS_REQUEST, (attributes) => {
      const state = attributes[condition.name];
      const level = state === "on" ? Number(attributes[`${condition.name}_level`]) : 0;

      switch (condition.name) {
        case "fatigued":
          setAttrs({ hp_mod: -1 * level }, { silent: true });
          break;

        default:
          break;
      }
    });
  });
}

// Handle attributes with an underscore_max attribute
for (const field of MAX_FIELDS) {
  on(`change:${field}`, (eventInfo) => {
    if (eventInfo.sourceType !== "player") return;

    getAttrs([field, `${field}_max`, `${field}_mod`], (attributes) => {
      const current = Number(attributes[field]);
      const max = Number(attributes[`${field}_max`]);
      const mod = Number(attributes[`${field}_mod`]) || 0;

      if (current > max + mod) {
        setAttrs({ [field]: max + mod }, { silent: true });
      }
    });
  });
}
  on("clicked:focus_up", async (eventInfo) => {
  rollAction();
});
on("clicked:go_wild", async (eventInfo) => {
  rollAction(true);
});

/**
 *
 * @param {string} template name of rolltemplate to use
 * @param {object} properties key value pairs
 * @param {function} callback startRoll callback function; should include `finishRoll()`
 */
const makeRoll = async (template, properties, callback) => {
  const rollstring = createRollString(template, properties);
  await startRoll(rollstring, callback);
};

/**
 * Create roll string including whisper, template, and roll properties
 * @param {string} template name of rolltemplate to use
 * @param {object} properties key value pairs
 * @returns finished roll string
 */
const createRollString = (template, properties) => {
  const props = Object.entries(properties)
    .map(([key, val]) => `{{${key}=${val}}}`)
    .join("");

  // return `@{wtype}&{template:${template}}${props}`;
  return `&{template:${template}}${props}`;
};

const rollAction = async (wild = false) => {
  getAttrs(
    ["style", "skill", "advantage", ...STYLES, ...SKILLS, ...CONDITIONS_REQUEST],
    (attributes) => {
      const styleName = attributes.style;
      const skillName = attributes.skill;
      const style = Number(attributes[styleName]) ?? 0;
      const skill = Number(attributes[skillName]) ?? 0;

      console.debug(attributes);
      const properties = {};

      const dic = {};
      dic.action = getTranslationByKey("action") || "Action";
      dic.frightened = getTranslationByKey("frightened") || "Frightened";

      properties.character_name = "@{character_name}";
      properties.style = `^{${styleName}}`;
      properties.skill = `^{${skillName}} (+${skill})`;

      const action_is = wild ? "wild" : "focus";
      properties[action_is] = action_is;
      properties.action_is = action_is;

      properties.question = "[[?{Circumstances|Normal,0|Advantage,1|Disadvantage,-1}]]";

      const dice = style - (wild ? 1 : 0);
      for (const key of Array.from(Array(dice).keys(), (k) => k + 1)) {
        properties[`roll_style${key}`] = "[[1d6]]";
      }

      const frightenedLevel =
        attributes.frightened === "on" ? Number(attributes.frightened_level) : 0;
      const frightenedMod =
        frightenedLevel > 0 ? `+ ${-1 * frightenedLevel}[${dic.frightened}]` : "";
      properties.roll_action = `[[1d${wild ? 20 : 8}[${dic.action}] ${frightenedMod}]]`;

      makeRoll("action", properties, ({ rollId, results }) => {
        finishRoll(rollId, results);

        // const answer = Number(results.question.result);
        // const circumstance = answer > 0 ? "advantage" : answer < 0 ? "disadvantage" : "";
        // finishRoll(rollId, {
        //   [circumstance]: true,
        // });
      });
    }
  );
};

</script>
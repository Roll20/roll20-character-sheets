<!-- Logo-->
<img src="https://github.com/lelajcorson/Aces-and-Eights-Character-Sheet/blob/master/logo.jpg?raw=true"/>

<!--Bio-->
<div class = "bio">
    <div class = "name"> 
        <label>Name</label><input type = "text" name = "attr_character_name"/> 
    </div>
 
    <div class = "handedness">
        <label>Handedness</label><input type = "text" name = "attr_character_handedness"/>
    </div>
    
    <div class = "nationality"> 
        <label>Nationality</label><input type = "text" name = "attr_character_nationality"/>
    </div>
    
    <div class = "race">
        <label>Race</label><input type = "text" name = "attr_race"/>
    </div>
    
    <div class = "profession">
        <label>Profession</label><input type = "text" name = "attr_profession"/>
    </div>
    
    <div class = "gender">
        <label>Gender</label><input type = "text" name = "attr_gender"/>
    </div>
    
    <div class = "BPs"> 
        <label>BPs</label><input type = "number" name = "attr_BPs"/>
    </div>
    
    <div class = "age">
        <label>Age</label><input type = "number" name = "attr_age"/>
    </div>
    
    <div class = "height">
        <label>Height</label><input type = "text" name = "attr_height"/>
    </div>
    
    <div class = "weight">
        <label>Weight</label><input type = "text" name = "attr_weight"/>
    </div>
</div>

<hr/>

<div>
    <button type="action" name="act_character">Character</button>
    <button type="action" name="act_weapons">Weapons</button>
    <button type = "action" name = "act_bio2">Bio/Other Info</button>
    <button type = "action" name = "act_horses">Horses</button>
</div>

<input type='hidden' class='tabstoggle' name='attr_sheetTab'  value='character'/>
    
<div class = "character">
    <div class = "grid">
        
        <div class = "abilities_header">
            <div>
                <h1>ABILITIES</h1> 
            </div>
        </div>
        
        <input type="checkbox" class="toggle-show-2e" name = "attr_2e" value = "1"/><span>Use 2nd Edition Abilities</span>
        
        <!--Abilities 1st Edition-->
        <div class = "abilities_1e">
            <div>
                <label class = "ability_label_large">STR</label>
            </div>
            <div>
                <input type = "text" name = "attr_str"/>
            </div>
            <div class = "mod_grid">
                <label class = "small_label">Damage Mod</label>
                <input type = "text" name = "attr_str_mod"/>
            </div>
            <div>
                <label class = "ability_label_large">INT</label>
            </div>
            <div>
                <input type = "text" name = "attr_int"/>
            </div>
            <div class = "mod_grid">
                <label class = "small_label">Skill Learning Mod</label>
                <input type = "text" name = "attr_int_mod"/>
            </div>
            <div>
                <label class = "ability_label_large">WIS</label>
            </div>
            <div>
                <input type = "text" name = "attr_wis"/>
            </div>
            <div class = "mod_grid">
                <label class = "small_label">Skill Learning Mod</label>
                <input type = "text" name = "attr_wis_mod"/>
            </div>
            <div>
                <label class = "ability_label_large">DEX</label>
            </div>
            <div>
                <input type = "text" name = "attr_dex"/>
            </div>
            <div class = "mod_grid">
                <label class = "small_label">To-hit Mod</label>
                <input type = "text" name = "attr_dex_mod"/>
            </div>
            <div>
                <label class = "ability_label_large">CON</label>
            </div>
            <div>
                <input type = "text" name = "attr_con"/>
            </div>
            <div class = "mod_grid">
                <label class = "small_label">Hit Point Mod</label>
                <input type = "text" name = "attr_con_mod"/>
            </div>
            <div>
                <label class = "ability_label_large">LKS</label>
            </div>
            <div>
                <input type = "text" name = "attr_lks"/>
            </div>
            <div class = "mod_grid">
                <label class = "small_label">Rep/Fame Mod</label>
                <input type = "text" name = "attr_lks_mod"/>
            </div>
            <div>
                <label class = "ability_label_large">CHA</label>
            </div>
            <div>
                <input type = "text" name = "attr_cha"/>
            </div>
            <div class = "mod_grid">
                <label class = "small_label">Skill Learning Mod</label>
                <input type = "text" name = "attr_cha_mod"/>
            </div>
            <div>
                <label class = "ability_label_large">REP</label>
            </div>
            <div>
                <input type = "text" name = "attr_rep"/>
            </div>
            <div class = "mod_grid">
                <label class = "small_label">Rep Points</label>
                <input type = "text" name = "attr_rep_points"/>
            </div>
            <div>
                <label class = "ability_label_large">FAME</label>
            </div>
            <div>
                <input type = "text" name = "attr_fame"/>
            </div>
            <div class = "mod_grid">
                <label class = "small_label">Fame Category</label>
                <textarea name = "attr_fame_category" class = "fame_category"></textarea>
            </div>
        </div>

        
        
        <!--Abilities 2nd Edition-->
        <div class = "abilities_2e">
            <input type="checkbox" class="toggle-show-mods" name = "attr_show_str" value = "1"/>
            <div>
                <label class = "ability_label_large">STR</label>
            </div>
            <div>
                <input type = "text" name = "attr_str"/>
            </div>
            <div></div>
            <div class = "mod_line">
                <div>
                    <label class = "small_label">Damage Modifier</label>
                    <input type = "text" name = "attr_str_mod2"/>
                </div>
                
                <div>
                    <label class = "small_label">Feat of Strength</label>
                    <input type = "text" name = "attr_str_feat"/>
                </div>
            </div>
            <input type="checkbox" class="toggle-show-mods" name = "attr_show_int" value = "1"/>
            <div>
                <label class = "ability_label_large">INT</label>
            </div>
            <div>
                <input type = "text" name = "attr_int"/>
            </div>
            <div></div>
            <div class = "mod_line">
                <div>
                    <label class = "small_label">Accuracy Modifier</label>
                    <input type = "text" name = "attr_int_mod2"/>
                </div>
            </div>
            <input type="checkbox" class="toggle-show-mods" name = "attr_show_wis" value = "1"/>
            <div>
                <label class = "ability_label_large">WIS</label>
            </div>
            <div>
                <input type = "text" name = "attr_wis"/>
            </div>
            <div></div>
            <div class = "mod_line">
                <div>
                    <label class = "small_label">Speed Modifier</label>
                    <input type = "text" name = "attr_wis_mod2"/>
                </div>
            </div>
            <input type="checkbox" class="toggle-show-mods" name = "attr_show_dex" value = "1"/>
            <div>
                <label class = "ability_label_large">DEX</label>
            </div>
            <div>
                <input type = "text" name = "attr_dex"/>
            </div>
            <div></div>
            <div class = "mod_line">
                <div>
                    <label class = "small_label">Speed Modifier</label>
                    <input type = "text" name = "attr_dex_mod1"/>
                </div>
                <div>
                    <label class = "small_label">Accuracy Modifier</label>
                    <input type = "text" name = "attr_dex_mod2"/>
                </div>
                <div>
                    <label class = "small_label">Feat of Agility</label>
                    <input type = "text" name = "attr_dex_mod3"/>
                </div>
            </div>
            <input type="checkbox" class="toggle-show-mods" name = "attr_show_con" value = "1"/>
            <div>
                <label class = "ability_label_large">CON</label>
            </div>
            <div>
                <input type = "text" name = "attr_con"/>
            </div>
            <div></div>
            <div class = "mod_line">
                <div>
                    <label class = "small_label">Healing Adj</label>
                    <input type = "text" name = "attr_con_mod2"/>
                </div>
            </div>
            <div></div>
            <!--<input type="checkbox" class="toggle-show-mods" name = "attr_show_lks" value = "1"/>-->
            <div>
                <label class = "ability_label_large">LKS</label>
            </div>
            <div>
                <input type = "text" name = "attr_lks"/>
            </div>
            <div></div>
            <input type="checkbox" class="toggle-show-mods" name = "attr_show_cha" value = "1"/>
            <div>
                <label class = "ability_label_large">CHA</label>
            </div>
            <div>
                <input type = "text" name = "attr_cha"/>
            </div>
            <div></div>
            <div class = "mod_line">
                <div>
                    <label class = "small_label">Maximum Compatriots</label>
                    <input type = "text" name = "attr_cha_mod2"/>
                </div>
            </div>
            <input type="checkbox" class="toggle-show-mods" name = "attr_show_rep" value = "1"/>
            <div>
                <label class = "ability_label_large">REP</label>
            </div>
            <div>
                <input type = "text" name = "attr_rep"/>
            </div>
            <div></div>
            <div class = "mod_line">
                <div>
                   <label class = "small_label">Rep. Cat.</label>
                    <input type = "text" name = "attr_rep_points2" class = "fame_rep_category"/> 
                </div>
            </div>
            <input type="checkbox" class="toggle-show-mods" name = "attr_show_fame" value = "1"/>
            <div>
                <label class = "ability_label_large">FAME</label>
            </div>
            <div>
                <input type = "text" name = "attr_fame2"/>
            </div>
            <div></div>
            <div class = "mod_line">
                <div>
                    <label class = "small_label">Fame Cat.</label>
                    <input type = "text" name = "attr_fame_category2" class = "fame_rep_category"></input>
                </div>
            </div>
        </div>

        
        <!--Hit Points-->
        <div class = "HP_grid">
            <div class = "HP_header">
                <label class = "grid_header">HIT POINTS</label>
            </div>
            
            <div>
                <input type = "text" name = "attr_current_hp" class = "current_hp"/>
                <label class = "hp_dash">/</label>
                <input type = "text" name = "attr_hp_max">
            </div>
        </div>
        
        <!--Money-->
        <div class = "money_grid">
            <label class = "grid_header">MONEY</label>
            <input type = "text" name = "attr_money"/>
        </div>
        
        <!--Skills--> 
        <div class = "skills_grid">
            <div class = "skills_header">
                <label>S</label> 
                <label>K</label>
                <label>I</label>
                <label>L</label>
                <label>L</label>
                <label>S</label>
            </div>
            
            <div class = "skills_text_grid">
                <label>Skill Name</label> 
                <label>Tallies</label> 
                <label>Mastery %</label>
            </div>
            
            <div>
                <fieldset class = "repeating_skills">
                    <input type = "text" class = "skill_name" name = "attr_skill_name"/>
                    <input type = "number" class = "skill_tallies" name = "attr_skill_tallies"/>
                    <input type = "text" class = "skill_mastery" name = "attr_skill_mastery"/>
                    <button class = "skills_button" type = "roll" value = "&{template:skills} {{roll=[[1d100]]}} {{mastery=@{skill_mastery}}}{{name=@{skill_name}}}"></button>
                </fieldset>
            </div>
        </div>
        
        <!--Items-->
        <div class = "items_grid">
            <label class = "grid_header">ITEMS</label>
            <textarea name = "attr_items" id = "itemsInput"></textarea>
        </div>
    </div>
    <div class = "other_notes">
        <h1>OTHER NOTES</h1>
        <textarea class = "big_box" name = "attr_random_stuff"></textarea>
    </div>
</div>

<div class = "weapons">
    <!--Accuracy and Speed-->
    <input type = "checkbox" class = "toggle-calc" name = "attr_calc" value = "1">
    <span class = "calc_span">Autocalculate Speed and Accuracy Modifiers</span>
    
    <div class = "acc_speed">
        <div><label class = "grid_header">SPEED</label></div>
        <div><input class = "speed_acc_total_input" type = "number" name = "attr_speed"></div>
        <input type="checkbox" class="toggle-show"/>
        <div>
            <span>Show Speed Modifiers</span>
            <div class = "speed_mods">
                <fieldset class = "repeating_speedmods">
                    <input type = "text" class = "speed_acc_description" name = "attr_speed_mod_type" placeholder = "Description">
                    <input type = "number" class = "speed_acc_mod" name = "attr_speed_mod" placeholder = "Mod">
                </fieldset>    
            </div> 
        </div>
        <div><label class = "grid_header">ACCURACY</label></div>
        <div><input class = "speed_acc_total_input" type = "number" name = "attr_acc" value = "@{accmods_0}"></div>
        <input type="checkbox" class="toggle-show-acc"/>
        <div>
            <span>Show Accuracy Modifiers</span>
            <div class = "acc_mods">
                <fieldset class = "repeating_accmods">
                    <input type = "text" class = "speed_acc_description" name = "attr_acc_mod_type" placeholder = "Description">
                    <input type = "number" class = "speed_acc_mod" name = "attr_acc_mod" placeholder = "Mod">
                </fieldset>    
            </div> 
        </div>
    </div>
        
    <hr>
        
    <!--Weapons-->
    <fieldset class = "repeating_weapons">
        <div class = "weapons_bio">
            <div>
                <label>Weapon</label>   
            </div>
            <div>
               <input type = "text" name = "attr_weapon_type"> 
            </div>
            <div>
                <label>Draw Speed</label>  
            </div>
            <div>
                <input type = "number" name = "attr_weapon_draw_speed">    
            </div>
            <div>
                <label>Accuracy</label>
            </div>
            <div>
               <input type = "number" name = "attr_weapon_accuracy"> 
            </div>
            <div>
                <label>Damage/Shot</label> 
            </div>
            <div>
                <input type = "text" class = "damage_per_shot" name = "attr_weapon_damage">
            </div>
            <div>
                <label>Reload Speed</label> 
            </div>
            <div>
                <input type = "text" name = "attr_weapon_reload_speed" class = "reload_speed">
            </div>
            <div>
                <label>Shots Fired</label> 
            </div>
            <div>
                <input type = "number" name = "attr_weapon_shots_fired">
            </div>
            <div>
                <label>Other Details</label>    
            </div>
            <div>
                <input type = "text" name = "attr_weapon_details">
            </div>
        </div>
        
        <div class = "weapons_range">
            <div class = "range_label">
                <label>Range</label>
            </div>
            <div>
                <label>5'</label> <input type = "text" name = "attr_range_5">
            </div>
            <div>
                <label>10'</label> <input type = "text" name = "attr_range_10">
            </div>
            <div>
                <label>15'</label> <input type = "text" name = "attr_range_15">
            </div>
            <div>
                <label>20'</label> <input type = "text" name = "attr_range_20">
            </div>
            <div>
                <label>25'</label> <input type = "text" name = "attr_range_25">
            </div>
            <div>
                <label>30'</label> <input type = "text" name = "attr_range_30">
            </div>
            <div>
                <label>40'</label> <input type = "text" name = "attr_range_40">
            </div>
            <div>
                <label>50'</label> <input type = "text" name = "attr_range_50">
            </div>
            <div>
                <label>70'</label> <input type = "text" name = "attr_range_70">
            </div>
            <div>
                <label>90'</label> <input type = "text" name = "attr_range_90">
            </div>
            <div>
                <label>120'</label> <input type = "text" name = "attr_range_120">
            </div>
            <div>
                <label>150'</label> <input type = "text" name = "attr_range_150">
            </div>
            <div>
                <label>200'</label> <input type = "text" name = "attr_range_200">
            </div>
            <div>
                <button class = "weapons_button" type = "roll" value = "&{template:attack} {{roll=[[1d20 + @{acc} + ?{Range|5 Feet, @{range_5}|
                10 Feet, @{range_10}|15 Feet, @{range_10}|20 Feet, @{range_20}|25 Feet, @{range_25}|30 Feet, @{range_30}|40 Feet, @{range_40}|
                50 Feet, @{range_50}|70 Feet, @{range_70}|90 Feet, @{range_90}|120 Feet, @{range_120}|150 Feet, @{range_150}|200 Feet, @{range_200}|
                250 Feet, @{range_250}|300 Feet, @{range_300}|350 Feet, @{range_350}|400 Feet, @{range_400}|450 Feet, @{range_450}|500 Feet, @{range_500}|
                600 Feet, @{range_600}|700 Feet, @{range_700}|800 Feet, @{range_800}|900 Feet, @{range_900}|1000 Feet, @{range_1000}|1250 Feet, @{range_1250}|
                1500 Feet, @{range_1500}} + ?{Aiming|None, 0|Steady Aim Pistol, 3|Fire Deliberately Pistol, 4|
                Careful Aim Pistol, 7|Fire Deliberately Rifle, 4|Careful Aim Rifle, 7}]]}} {{damage=[[@{weapon_damage} + @{str_mod}]]}} {{weapon=@{weapon_type}}}"
                >Attack</button>
                <button class = "weapons_button" type = "roll" value = "&{template:damage} {{damage=[[(@{weapon_damage}) * ?{Number of Shots|1, 1|2, 2|3, 3|4, 4|5, 5|
                6, 6|7, 7|8, 8|9, 9|10, 10} + @{str_mod}]]}} {{weapon=@{weapon_type}}}">Damage</button> 
            </div>
            <div>
                <label>250'</label> <input type = "text" name = "attr_range_250">
            </div>
            <div>
                <label>300'</label> <input type = "text" name = "attr_range_300">
            </div>
            <div>
                <label>350'</label> <input type = "text" name = "attr_range_350">
            </div>
            <div>
                <label>400'</label> <input type = "text" name = "attr_range_400">
            </div>
            <div>
                <label>450'</label> <input type = "text" name = "attr_range_450">
            </div>
            <div>
                <label>500'</label> <input type = "text" name = "attr_range_500">
            </div>
            <div>
                <label>600'</label> <input type = "text" name = "attr_range_600">
            </div>
            <div>
                <label>700'</label> <input type = "text" name = "attr_range_700">
            </div>
            <div>
                <label>800'</label> <input type = "text" name = "attr_range_800">
            </div>
            <div>
                <label>900'</label> <input type = "text" name = "attr_range_900">
            </div>
            <div>
                <label>1000'</label> <input type = "text" name = "attr_range_1000">
            </div>
            <div>
                <label>1250'</label> <input type = "text" name = "attr_range_1250">
            </div>
            <div>
                <label>1500'</label> <input type = "text" name = "attr_range_1500">
            </div>
        </div>
        <hr>
    </fieldset>
</div>

<!--Bio/Other Info Page-->
<div class = "bio2">
    <div class = "talents">
        <div class = "bio2_grid">
            <div class = "bio2_talents">
               <h1 class = "grid_header">TALENTS</h1> 
               <div>
                   <input type = "text" name = "attr_talent1">
                   <input type = "text" name = "attr_talent2">
                   <input type = "text" name = "attr_talent3">
                   <input type = "text" name = "attr_talent4">
                   <input type = "text" name = "attr_talent5">
                   <input type = "text" name = "attr_talent6">
               </div>
            </div>
            <div class = "bio2_quirks">
                <h1 class = "grid_header">QUIRKS & FLAWS</h1>
                <div>
                   <input type = "text" name = "attr_quirk1">
                   <input type = "text" name = "attr_quirk2">
                   <input type = "text" name = "attr_quirk3">
                   <input type = "text" name = "attr_quirk4">
                   <input type = "text" name = "attr_quirk5">
                   <input type = "text" name = "attr_quirk6">
               </div>
            </div>
            <div class = "bio2_personal_goals">
                <h1 class = "grid_header">PERSONAL GOALS</h1>
                <div>
                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" placeholder = "Goal" name = "attr_goal1">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" placeholder= "BPs" name = "attr_goal_bp_1">
                        </div>
                    </div>
                    
                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal2">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp2">
                        </div>
                    </div>

                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal3">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp3">
                        </div>
                    </div>
                    
                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal4">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp4">
                        </div>
                    </div>

                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal5">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp5">
                        </div>
                    </div>
                    
                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal6">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp6">
                        </div>
                    </div>
                    
                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal7">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp7">
                        </div>
                    </div>
                    
                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal8">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp8">
                        </div>
                    </div>
                    
                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal9">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp9">
                        </div>
                    </div>
                    
                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal10">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp10">
                        </div>
                    </div>
                    
                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal11">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp11">
                        </div>
                    </div>
                    
                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal12">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp13">
                        </div>
                    </div>
                    
                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal14">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp15">
                        </div>
                    </div>
                    
                    <div class = "flex">
                        <div>
                            <input type = "text" class = "goal" name = "attr_goal16">    
                        </div>
                        <div>
                            <input type = "text" class = "goal_BPs" name = "attr_goal_bp16">
                        </div>
                    </div>
                </div> 
            </div>
            
            <div class = "bio2_profession">
                <h1 class = "grid_header">PROFESSION PATHS</h1>
                <div class = "flex">
                    <div>
                        <input type = "text" class = "prof" placeholder = "Profession Milestone" name = "attr_prof1">    
                    </div>
                    <div>
                        <input type = "text" class = "prof_BPs" placeholder = "BPs" name = "attr_goal_prof_bp1">
                    </div>
                </div>
            
                <div class = "flex">
                    <div>
                        <input type = "text" class = "prof" name = "attr_prof2">    
                    </div>
                    <div>
                        <input type = "text" class = "prof_BPs" name = "attr_goal_prof_bp2">
                    </div>
                </div>
                
                <div class = "flex">
                    <div>
                        <input type = "text" class = "prof" name = "attr_prof3">    
                    </div>
                    <div>
                        <input type = "text" class = "prof_BPs" name = "attr_goal_prof_bp3">
                    </div>
                </div>
                
                <div class = "flex">
                    <div>
                        <input type = "text" class = "prof" name = "attr_prof4">    
                    </div>
                    <div>
                        <input type = "text" class = "prof_BPs" name = "attr_goal_prof_bp4">
                    </div>
                </div>
                
                <div class = "flex">
                    <div>
                        <input type = "text" class = "prof" name = "attr_prof5">    
                    </div>
                    <div>
                        <input type = "text" class = "prof_BPs" name = "attr_goal_prof_bp5">
                    </div>
                </div>
                
                <div class = "flex">
                    <div>
                        <input type = "text" class = "prof" name = "attr_prof6">    
                    </div>
                    <div>
                        <input type = "text" class = "prof_BPs" name = "attr_goal_prof_bp6">
                    </div>
                </div>
            </div>
            
            <div class = "personality">
                <h1 class = "grid_header">PERSONALITY</h1>
                <textarea class = "personality_text" name = "attr_personality"></textarea>
            </div>
            
            <div class = "backstory">
                <h1 class = "grid_header">BACKSTORY/FAMILY</h1>
                <textarea class = "backstory_text" name = "attr_backstory"></textarea>
            </div>
            
            <div class = "wounds">
                <h1 class = "grid_header">WOUNDS</h1>
                <fieldset class = "repeating_wounds">
                    <div class = "flex">
                        <input class = "wounds_points" type = "text" placeholder = "points" name = "attr_wounds_points">
                        <label class = "wounds_in">in</label>
                        <input class = "wounds_location" type = "text" placeholder = "location" name = "attr_wounds_location">
                        <label>; heals in</label>
                        <input class = "wounds_days" type = "text" placeholder = "days" name = "attr_wounds_days"> 
                    </div>
                </fieldset>
            </div>
            
            <div class = "notes">
                <h1 class = "grid_header">OTHER NOTES</h1>
                <textarea class = "notes_text" name = "notes"></textarea>
            </div>
        </div>
    </div>
</div>

<div class = "horses">
    <fieldset class = "repeating_horse">
        <hr>
        <div class = "bio">
            <div class = "name"> 
                <label>Name</label><input type = "text" name = "attr_horse_name"/> 
            </div>
         
            <div class = "breed">
                <label>Breed</label><input type = "text" name = "attr_horse_breed"/>
            </div>
            
            <div class = "vices"> 
                <label>Vices</label><input type = "text" name = "attr_horse_vices"/>
            </div>
            
            <div class = "markings">
                <label>Markings</label><input type = "text" name = "attr_horse_markings"/>
            </div>
            
            <div class = "horse_gender">
                <label>Gender</label><input type = "text" name = "attr_horse_gender"/>
            </div>
            
            <div class = "age"> 
                <label>Age</label><input type = "number" name = "attr_horse_age"/>
            </div>
            
            <div class = "horse_height">
                <label>Height</label><input type = "text" name = "attr_horse_age"/>
            </div>
            
            <div class = "personality">
                <label>Personality</label><input type = "text" name = "attr_horse_personality"/>
            </div>
            
            <div class = "color">
                <label>Color</label><input type = "text" name = "attr_horse_color"/>
            </div>
            
             <div class = "horse_HP">
                <label>HP</label><input type = "text" name = "attr_horse_HP_current"><label>/</label><input type = "text" name = "attr_horse_HP_max">
            </div>
        </div>
        
        <div class = "horse_stats">
            <div class = "horse_headers_flex">
                <h1 class = "header">STATS</h1>
                <h1>NOTES/TACK</h1>
            </div>
            <div class = "horse_grid">
                <div class = "horse_stats_grid">
                    <div>
                        <label>Short Speed</label><input type = text name = "attr_horse_short_speed">
                    </div>
                    
                    <div>
                        <label>Med Speed</label><input type = text name = "attr_horse_med_speed"> 
                    </div>
                    
                    <div>
                        <label>Long Speed</label><input type = text name = "attr_horse_long_speed"> 
                    </div>
                     
                    <div>
                        <label>Agility</label></label><input type = text name = "attr_horse_agility"> 
                    </div>
                    
                    <div>
                        <label>Endurance</label></label><input type = text name = "attr_horse_endurance"> 
                    </div>
                    
                    <div>
                        <label>Horse Sense</label></label><input type = text name = "attr_horse_endurance">
                    </div>
                    
                    <div>
                        <label>Temperment</label></label><input type = text name = "attr_horse_temperment"> 
                    </div>
                    
                    <div>
                        <label>Trainability</label></label><input type = text name = "attr_horse_trainability"> 
                    </div>
                    
                    <div>
                        <label>Mettle</label></label><input type = text name = "attr_horse_mettle">
                    </div>
                    
                    <div>
                        <label>Soundness</label></label><input type = text name = "attr_horse_soundness"> 
                    </div>
                    
                    <div>
                        <label>Strength</label></label><input type = text name = "attr_horse_strength">
                    </div>
                </div>
                
                <div>
                    <textarea class = "horse_tack"></textarea>
                </div>
            </div>
        </div>
    </fieldset>
</div>


<rolltemplate class="sheet-rolltemplate-skills">
    <div class = "sheet-roll_grid">
        <div class="sheet-roll_numbers">
            <span>{{roll}}</span>
        </div>
        
        <div class = "sheet-roll_numbers">
            <span>{{mastery}}</span>
        </div>
        
        <div class="sheet-roll_labels">
            <span>Roll</span>
        </div>
        
        <div class = "sheet-roll_labels">
            <span>Mastery</span>
        </div>
        
        <div class="sheet-roll_name">
            <span>{{name}}</span>
        </div>    
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-attack">
    <div class = "sheet-roll_grid">
        <div class="sheet-roll_numbers">
            <span>{{roll}}</span>
        </div>
        
        <div class = "sheet-roll_numbers">
            <span>{{damage}}</span>
        </div>
        
        <div class="sheet-roll_labels">
            <span>Roll</span>
        </div>
        
        <div class = "sheet-roll_labels">
            <span>Damage</span>
        </div>
        
        <div class="sheet-roll_name">
            <span>{{weapon}}</span>
        </div>    
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-damage">
    <div class = "sheet-roll_numbers">
        <span>{{damage}}</span>
    </div>
    
    <div class = "sheet-roll_labels">
        <span>Damage</span>
    </div>
    
    <div class="sheet-roll_name">
        <span>{{weapon}}</span>
    </div>    
</rolltemplate>

<script type="text/worker">
    const buttonlist = ["character","weapons", "bio2", "horses"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });
</script>

<script type = "text/worker">
    /* ===== PARAMETERS ==========
    destinations = the name of the attribute that stores the total quantity
        can be a single attribute, or an array: ['total_cost', 'total_weight']
        If more than one, the matching fields must be in the same order. 
    section = name of repeating fieldset, without the repeating_
    fields = the name of the attribute field to be summed
        destination and fields both can be a single attribute: 'weight'
        or an array of attributes: ['weight','number','equipped']
    */
    
    /*Author: GiGs(G-G-G on github), with help from The Aaron, inspired by a script created by Finderski.
    I found the repeatingSum function at this link: https://wiki.roll20.net/RepeatingSum and copied it directly from there. The credit for it goes to the authors above
    */
    const repeatingSum = (destinations, section, fields) => {
        if (!Array.isArray(destinations)) destinations = [destinations.replace(/\s/g, '').split(',')];
        if (!Array.isArray(fields)) fields = [fields.replace(/\s/g, '').split(',')];
        getSectionIDs(`repeating_${section}`, idArray => {
            const attrArray = idArray.reduce((m, id) => [...m, ...(fields.map(field => `repeating_${section}_${id}_${field}`))], []);
            getAttrs([...attrArray], v => {
                const getValue = (section, id, field) => v[`repeating_${section}_${id}_${field}`] === 'on' ? 1 : parseFloat(v[`repeating_${section}_${id}_${field}`]) || 0;
                const commonMultipliers = (fields.length <= destinations.length) ? [] : fields.splice(destinations.length, fields.length - destinations.length);
                const output = {};
                destinations.forEach((destination, index) => {
                    output[destination] = idArray.reduce((total, id) => total + getValue(section, id, fields[index]) * commonMultipliers.reduce((subtotal, mult) => subtotal * getValue(section, id, mult), 1), 0);
                });
                setAttrs(output);
            }); 
        }); 
    };
    
    var change = true;
    
    
    
    on('change:repeating_speedmods:speed_mod remove:repeating_speedmods', function() {
        if(change === true){
            repeatingSum("speed","speedmods","speed_mod");
    	    console.log("updating...");
        }
    	
    });
    
    on('change:repeating_accmods:acc_mod remove:repeating_accmods', function() {
        if(change === true){
            repeatingSum("acc","accmods","acc_mod");
    	    console.log("updating...");
        }
    	
    });
    
    
    on("change:calc sheet:opened", function () {
        getAttrs(["calc"], function(values) {
            function updateCalc(callback){
                let checked = parseInt(values.calc)||0;
                
                if(checked === 1) {
        	        change = true;
                }
                else{
                    change = false;
                }
                console.log(checked);
                console.log(change);
                
                callback();
            }
            
            function updateMods(){
                console.log("calling updateMods");
                
                if(change){
                    repeatingSum("acc","accmods","acc_mod");
                    repeatingSum("speed","speedmods","speed_mod");
            	    console.log("updating calc one..."); 
                }
                
            }
            
            //updateCalc();
            updateCalc(updateMods);
        });
        
    });
</script>






<input name="attr_version" type="hidden" value="1">
<input name="attr_malusMag" type="hidden" value="0">
<input name="attr_malusPhy" type="hidden" value="0">
<input name="attr_KADFeu" type="hidden" value="0">
<input name="attr_KADTerre" type="hidden" value="0">
<input name="attr_KADAir" type="hidden" value="0">
<input name="attr_KADLune" type="hidden" value="0">
<input name="attr_KADEau" type="hidden" value="0">
<div class="container"><img class="logo" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Nephilim-Legende/img/logo.PNG" alt="logo">
  <div class="menuTop">
    <label class="sapience"><span>Points de Sapience</span>
      <input name="attr_sapience" type="number" value="0">
    </label>
    <div class="options">
      <label>
        <input type="checkbox" name="attr_options" value="1"><span></span>
      </label>
      <input name="attr_options" type="hidden" value="1">
      <div>
        <label>
          <select name="attr_nature" title="Nature ?">
            <option value="nephilim" selected>Nephilim</option>
            <option value="humain">Humain</option>
            <option value="selenim">Selenim</option>
          </select>
        </label>
        <label>
          <input name="attr_gm" value="/w gm" type="checkbox"><span title="Jets privés"></span>
        </label>
        <label>
          <input name="attr_initiative_variable" value="1d6" type="checkbox"><span title="Initiative variable"></span>
        </label>
        <label>
          <input name="attr_practice_magie" type="checkbox"><span title="Pratique la magie"></span>
        </label>
        <label>
          <input name="attr_practice_kabb" type="checkbox"><span title="Pratique la kabbale"></span>
        </label>
        <label>
          <input name="attr_practice_alch" type="checkbox"><span title="Pratique l'alchimie"></span>
        </label>
        <label>
          <input name="attr_practice_necro" type="checkbox"><span title="Pratique la nécro."></span>
        </label>
        <label>
          <input name="attr_practice_kabnoire" type="checkbox"><span title="Kabbale noire"></span>
        </label>
        <label>
          <input name="attr_practice_imago" type="checkbox"><span title="Imago"></span>
        </label>
        <label>
          <input name="attr_view_arcadia" type="checkbox"><span title="Arcadia"></span>
        </label>
      </div>
    </div>
  </div>
  <input class="magie" name="attr_practice_magie" type="hidden" value="0">
  <input class="kabbale" name="attr_practice_kabb" type="hidden" value="0">
  <input class="alchimie" name="attr_practice_alch" type="hidden" value="0">
  <input class="arcadia" name="attr_view_arcadia" type="hidden" value="0">
  <input class="nature" name="attr_nature" type="hidden" value="nephilim">
  <input class="necro" name="attr_practice_necro" type="hidden" value="0">
  <input class="kabnoire" name="attr_practice_kabnoire" type="hidden" value="0">
  <input class="imago" name="attr_practice_imago" type="hidden" value="0">
  <div class="menu">
    <label>
      <input name="attr_tab" value="1" type="radio"><span title="Nephilim"></span>
    </label>
    <label>
      <input name="attr_tab" value="11" type="radio"><span title="Selenim"></span>
    </label>
    <label>
      <input name="attr_tab" value="2" type="radio"><span title="Simulacre"></span>
    </label>
    <label>
      <input name="attr_tab" value="3" type="radio"><span title="Epoques d'incarnation"></span>
    </label>
    <label>
      <input name="attr_tab" value="4" type="radio"><span title="Combat"></span>
    </label>
    <label>
      <input name="attr_tab" value="10" type="radio"><span title="Arcadia"></span>
    </label>
    <label>
      <input name="attr_tab" value="5" type="radio"><span title="Magie"></span>
    </label>
    <label>
      <input name="attr_tab" value="6" type="radio"><span title="Kabbale"></span>
    </label>
    <label>
      <input name="attr_tab" value="7" type="radio"><span title="Alchimie"></span>
    </label>
    <label>
      <input name="attr_tab" value="8" type="radio"><span title="Contructs"></span>
    </label>
    <label>
      <input name="attr_tab" value="12" type="radio"><span title="Nécromancie"></span>
    </label>
    <label>
      <input name="attr_tab" value="13" type="radio"><span title="Kabbale noire"></span>
    </label>
    <label>
      <input name="attr_tab" value="14" type="radio"><span title="Imago"></span>
    </label>
    <label>
      <input name="attr_tab" value="9" type="radio"><span title="Fraternité"></span>
    </label>
  </div>
  <input class="menu" name="attr_tab" type="hidden" value="1">
  <div class="tab1">
    <div class="col">
      <label class="headerName"><span>Nom</span>
        <input name="attr_character_name" type="text" value="">
      </label>
      <div class="metamorphe">
        <div>
          <h1>Métamorphe</h1>
          <input name="attr_metamorphe" type="number" value="0">
        </div>
        <div class="textInput" metamorphose_name></div><span>Métamorphose</span><span>Permanent</span>
        <fieldset class="repeating_metamorphose">
          <label><span></span>
            <input name="attr_metamorphose_desc" type="text" value="">
          </label>
          <label>
            <input name="attr_permanent" type="checkbox"><span></span>
          </label>
        </fieldset>
      </div>
      <div class="degreMetamorphe">
        <h1>Degré de métamorphe actif</h1>
        <div>
          <select name="attr_KaDominant">
            <option value="" selected>Ka dominant : aucun</option>
            <option value="Feu">Ka dominant : Feu</option>
            <option value="Terre">Ka dominant : Terre</option>
            <option value="Air">Ka dominant : Air</option>
            <option value="Lune">Ka dominant : Lune</option>
            <option value="Eau">Ka dominant : Eau</option>
          </select>
        </div>
        <input name="attr_dMeta" type="hidden" value="0">
        <label>
          <input name="attr_degreMetamorphe" value="1" type="checkbox"><span title="1"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="2" type="checkbox"><span title="2"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="3" type="checkbox"><span title="3"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="4" type="checkbox"><span title="4"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="5" type="checkbox"><span title="5"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="6" type="checkbox"><span title="6"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="7" type="checkbox"><span title="7"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="8" type="checkbox"><span title="8"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="9" type="checkbox"><span title="9"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="10" type="checkbox"><span title="10"></span>
        </label>
      </div>
    </div>
    <div class="2colT1">
      <div class="kaElement">
        <button name="roll_kafeu" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{jet=[[1d100]]}} {{ka=Ka-Feu}} {{seuil=[[(@{kafeu}+(?{Bonus/Malus ?|0}+@{KADFeu})-@{malusMag})*10]]}}"><span>Ka-Feu</span>
        </button>
        <input name="attr_kafeu" type="number" value="1" min="1">
        <button name="roll_katerre" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{jet=[[1d100]]}} {{ka=Ka-Terre}} {{seuil=[[(@{katerre}+(?{Bonus/Malus ?|0}+@{KADTerre})-@{malusMag})*10]]}}"><span>Ka-Terre</span>
        </button>
        <input name="attr_katerre" type="number" value="1" min="1">
        <button name="roll_kaair" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{jet=[[1d100]]}} {{ka=Ka-Air}} {{seuil=[[(@{kaair}+(?{Bonus/Malus ?|0}+@{KADAir})-@{malusMag})*10]]}}"><span>Ka-Air</span>
        </button>
        <input name="attr_kaair" type="number" value="1" min="1">
        <button name="roll_kalune" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{jet=[[1d100]]}} {{ka=Ka-Lune}} {{seuil=[[(@{kalune}+(?{Bonus/Malus ?|0}+@{KADLune})-@{malusMag})*10]]}}"><span>Ka-Lune</span>
        </button>
        <input name="attr_kalune" type="number" value="1" min="1">
        <button name="roll_kaeau" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{jet=[[1d100]]}} {{ka=Ka-Eau}} {{seuil=[[(@{kaeau}+(?{Bonus/Malus ?|0}+@{KADEau})-@{malusMag})*10]]}}"><span>Ka-Eau</span>
        </button>
        <input name="attr_kaeau" type="number" value="1" min="1">
      </div>
    </div>
    <div class="nephilimPhrase"><span>Votre Nephilim en une phrase:</span>
      <div class="autoex autoex24">
        <textarea name="attr_en_une_phrase"></textarea><span name="attr_en_une_phrase"></span>
      </div>
    </div>
    <div class="col2">
      <div class="chutes">
        <h1>Chutes</h1>
        <div>
          <div>
            <h2>Khaiba</h2>
            <input name="attr_kaiba" type="hidden" value="">
            <label>
              <input name="attr_kaiba" value="" type="radio"><span title="0"></span>
            </label>
            <label>
              <input name="attr_kaiba" value="" type="radio"><span title="1"></span>
            </label>
            <label>
              <input name="attr_kaiba" value="" type="radio"><span title="2"></span>
            </label>
            <label>
              <input name="attr_kaiba" value="" type="radio"><span title="3"></span>
            </label>
            <label>
              <input name="attr_kaiba" value="" type="radio"><span title="4"></span>
            </label>
            <label>
              <input name="attr_kaiba" value="" type="radio"><span title="5"></span>
            </label>
            <label>
              <input name="attr_kaiba" value="" type="radio"><span title="6"></span>
            </label>
            <label>
              <input name="attr_kaiba" value="" type="radio"><span title="7"></span>
            </label>
            <label>
              <input name="attr_kaiba" value="" type="radio"><span title="8"></span>
            </label>
            <label>
              <input name="attr_kaiba" value="" type="radio"><span title="9"></span>
            </label>
            <label>
              <input name="attr_kaiba" value="" type="radio"><span title="10"></span>
            </label>
          </div>
          <input name="attr_kaiba_form" type="text" value="">
        </div>
        <div>
          <div>
            <h2>Ombre</h2>
            <input name="attr_ombre" type="hidden" value="">
            <label>
              <input name="attr_ombre" value="" type="radio"><span title="0"></span>
            </label>
            <label>
              <input name="attr_ombre" value="" type="radio"><span title="1"></span>
            </label>
            <label>
              <input name="attr_ombre" value="" type="radio"><span title="2"></span>
            </label>
            <label>
              <input name="attr_ombre" value="" type="radio"><span title="3"></span>
            </label>
            <label>
              <input name="attr_ombre" value="" type="radio"><span title="4"></span>
            </label>
            <label>
              <input name="attr_ombre" value="" type="radio"><span title="5"></span>
            </label>
            <label>
              <input name="attr_ombre" value="" type="radio"><span title="6"></span>
            </label>
            <label>
              <input name="attr_ombre" value="" type="radio"><span title="7"></span>
            </label>
            <label>
              <input name="attr_ombre" value="" type="radio"><span title="8"></span>
            </label>
            <label>
              <input name="attr_ombre" value="" type="radio"><span title="9"></span>
            </label>
            <label>
              <input name="attr_ombre" value="" type="radio"><span title="10"></span>
            </label>
          </div>
        </div>
        <div>
          <div>
            <h2>Narcose</h2>
            <input name="attr_narcose" type="hidden" value="">
            <label>
              <input name="attr_narcose" value="" type="radio"><span title="0"></span>
            </label>
            <label>
              <input name="attr_narcose" value="" type="radio"><span title="1"></span>
            </label>
            <label>
              <input name="attr_narcose" value="" type="radio"><span title="2"></span>
            </label>
            <label>
              <input name="attr_narcose" value="" type="radio"><span title="3"></span>
            </label>
            <label>
              <input name="attr_narcose" value="" type="radio"><span title="4"></span>
            </label>
            <label>
              <input name="attr_narcose" value="" type="radio"><span title="5"></span>
            </label>
            <label>
              <input name="attr_narcose" value="" type="radio"><span title="6"></span>
            </label>
            <label>
              <input name="attr_narcose" value="" type="radio"><span title="7"></span>
            </label>
            <label>
              <input name="attr_narcose" value="" type="radio"><span title="8"></span>
            </label>
            <label>
              <input name="attr_narcose" value="" type="radio"><span title="9"></span>
            </label>
            <label>
              <input name="attr_narcose" value="" type="radio"><span title="10"></span>
            </label>
          </div>
        </div>
      </div>
    </div>
    <div class="col2">
      <div class="adoption">
        <div>
          <h1>Adoption</h1>
          <input name="attr_simu-attr_arc_degre" type="number" value="0">
        </div>
        <div class="autoex autoex40">
          <textarea name="attr_arc_name"></textarea><span name="attr_arc_name"></span>
        </div>
      </div>
      <div class="stase">
        <div>
          <h1>Stase</h1>
          <input name="attr_simu-attr_stase_degre" type="number" value="0">
        </div>
        <div class="autoex autoex40">
          <textarea name="attr_stase_name"></textarea><span name="attr_stase_name"></span>
        </div>
      </div>
    </div>
  </div>
  <div class="tab2">
    <div class="simulacreTitre">
      <h1>Simulacre</h1>
      <div class="simulacreIdentite1">
        <label><span>Nom</span>
          <input name="attr_simu_name" type="text" value="">
        </label>
        <label><span>Ka-Soleil</span>
          <input name="attr_simu-kasoleil" type="number" value="0">
        </label>
      </div>
      <div class="simulacreIdentite2">
        <label><span>Genre</span>
          <input name="attr_simu_genre" type="text" value="">
        </label>
        <label><span>Âge</span>
          <input name="attr_simu_age" type="number" value="0">
        </label>
      </div>
    </div>
    <div class="simulacreVecus">
      <label>Vécu principal</label>
      <input name="attr_simu_vecu" type="text" value="" placeholder="Vécu">
      <input name="attr_simu-vecu-nbr" type="number" value="0">
      <input class="nature" name="attr_nature" type="hidden" value="nephilim">
      <select name="attr_approche1">
        <option value="{{seuil=[[(@{simu-vecu-nbr}+0+?{Bonus/Malus ?|0}-@{malusPhy})*10]]}} {{approche=Aucune approche}}" selected>Aucune approche</option>
        <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr}+@{kafeu}+?{Bonus/Malus ?|0}+@{KADFeu}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Feu}}">Approche de Feu</option>
        <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr}+@{kaair}+?{Bonus/Malus ?|0}+@{KADAir}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche d'Air}}">Approche d'Air</option>
        <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr}+@{kaeau}+?{Bonus/Malus ?|0}+@{KADEau}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche d'Eau}}">Approche d'Eau</option>
        <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr}+@{katerre}+?{Bonus/Malus ?|0}+@{KADTerre}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Terre}}">Approche de Terre</option>
        <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr}+@{kalune}+?{Bonus/Malus ?|0}+@{KADLune}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Lune}}">Approche de Lune</option>
        <option class="hideNephilim hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr}+@{simu-kasoleil}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche Solaire}}">Approche solaire</option>
        <option class="hideNephilim hideHumain" value="{{seuil=[[(@{simu-vecu-nbr}+@{kaln}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Ka Lune Noire}}">Approche de KLN</option>
      </select>
      <button name="roll_vecu" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{vecu=@{simu_vecu}}} {{jet=[[1d100]]}} @{approche1}">
      </button>
    </div>
    <div class="simulacreVecus">
      <label>Vécu d’Initié</label>
      <input name="attr_simu_vecu2" type="text" value="" placeholder="Vécu">
      <input name="attr_simu-vecu-nbr2" type="number" value="0">
      <input class="nature" name="attr_nature" type="hidden" value="nephilim">
      <select name="attr_approche2">
        <option value="{{seuil=[[(@{simu-vecu-nbr2}+0+?{Bonus/Malus ?|0}-@{malusPhy})*10]]}} {{approche=Aucune approche}}" selected>Aucune approche</option>
        <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr22}+@{kafeu}+?{Bonus/Malus ?|0}+@{KADFeu}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Feu}}">Approche de Feu</option>
        <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr22}+@{kaair}+?{Bonus/Malus ?|0}+@{KADAir}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche d'Air}}">Approche d'Air</option>
        <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr22}+@{kaeau}+?{Bonus/Malus ?|0}+@{KADEau}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche d'Eau}}">Approche d'Eau</option>
        <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr22}+@{katerre}+?{Bonus/Malus ?|0}+@{KADTerre}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Terre}}">Approche de Terre</option>
        <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr22}+@{kalune}+?{Bonus/Malus ?|0}+@{KADLune}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Lune}}">Approche de Lune</option>
        <option class="hideNephilim hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr2}+@{simu-kasoleil}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche Solaire}}">Approche solaire</option>
        <option class="hideNephilim hideHumain" value="{{seuil=[[(@{simu-vecu-nbr2}+@{kaln}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Ka Lune Noire}}">Approche de KLN</option>
      </select>
      <button name="roll_vecu2" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{vecu=@{simu_vecu2}}} {{jet=[[1d100]]}} @{approche2}">
      </button>
    </div>
    <div class="col2">
      <div class="simulacreDescription">
        <h1>Description</h1>
        <div class="autoex autoex40">
          <textarea name="attr_simu-descr"></textarea><span name="attr_simu-descr"></span>
        </div>
      </div>
      <div class="simulacreProches">
        <h1>Proches</h1>
        <div class="autoex autoex40">
          <textarea name="attr_simu-proches"></textarea><span name="attr_simu-proches"></span>
        </div>
      </div>
    </div>
    <div class="col2">
      <div class="simulacreRessources">
        <label>
          <h1>Ressources et possessions notables</h1>
          <input name="attr_simu_ressources_value" type="number" value="0">
        </label>
        <div class="autoex autoex24">
          <textarea name="attr_simu-ress"></textarea><span name="attr_simu-ress"></span>
        </div>
      </div>
      <input class="nature" name="attr_nature" type="hidden" value="nephilim">
      <div class="degreMetamorphe">
        <h1>Degré de métamorphe actif</h1>
        <input name="attr_dMeta" type="hidden" value="0">
        <label>
          <input name="attr_degreMetamorphe" value="1" type="checkbox"><span title="1"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="2" type="checkbox"><span title="2"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="3" type="checkbox"><span title="3"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="4" type="checkbox"><span title="4"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="5" type="checkbox"><span title="5"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="6" type="checkbox"><span title="6"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="7" type="checkbox"><span title="7"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="8" type="checkbox"><span title="8"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="9" type="checkbox"><span title="9"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="10" type="checkbox"><span title="10"></span>
        </label>
      </div>
      <div class="equipement">
        <h1>Équipements</h1>
        <fieldset class="repeating_equipements">
          <div class="autoex autoex22">
            <textarea name="attr_equipement"></textarea><span name="attr_equipement"></span>
          </div>
        </fieldset>
      </div>
    </div>
  </div>
  <div class="tab3">
    <div class="degreMetamorphe">
      <h1>Degré de métamorphe actif</h1>
      <input name="attr_dMeta" type="hidden" value="0">
      <label>
        <input name="attr_degreMetamorphe" value="1" type="checkbox"><span title="1"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="2" type="checkbox"><span title="2"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="3" type="checkbox"><span title="3"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="4" type="checkbox"><span title="4"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="5" type="checkbox"><span title="5"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="6" type="checkbox"><span title="6"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="7" type="checkbox"><span title="7"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="8" type="checkbox"><span title="8"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="9" type="checkbox"><span title="9"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="10" type="checkbox"><span title="10"></span>
      </label>
    </div>
    <div class="epoquesIncarnation">
      <h1>Époques d’incarnation</h1>
      <h1>Vécus passés</h1>
      <h1>Effets Mnémos</h1>
      <input class="nature" name="attr_nature" type="hidden" value="nephilim">
      <fieldset class="repeating_epoques-incarnation">
        <div>
          <label>
            <input name="attr_expandEpoque" value="1" type="checkbox" checked><span></span>
          </label>
          <select name="attr_epoque">
            <option value="rien"></option>
            <option value="chute-atlantide">La Chute de l'Atlantide, Jadis</option>
            <option disabled>--- Guerres Élémentaires ---</option>
            <option value="deluge">Le Déluge, -10000 </option>
            <option value="premiers-dieux">Les premiers dieux, -9000</option>
            <option value="premiers-peuple">Le premier peuple, -8000</option>
            <option value="premiere-cite">La première cité, -7000</option>
            <option value="premiers-megalithes">Les premiers mégalithes, -5000</option>
            <option disabled>--- Compacts Secrets ---</option>
            <option value="thuatha-danann">Les Tuatha de Danann, -4000</option>
            <option value="mahabharata">Le Mahabharata, -3000</option>
            <option value="guerre-dieux">La guerre des Dieux, -2800</option>
            <option value="seigneurs-nuit">Les Seigneurs de la Nuit, -2500</option>
            <option value="labyrinthe-minos">Le labyrinthe de Minos, -2000</option>
            <option value="reve-akhenathon">Le rêve d'Akhenaton, -1350</option>
            <option value="chute-troie">La Chute de Troie, -1200</option>
            <option disabled>--- Hermétisme ---</option>
            <option value="regne-salomon">Le règne de Salomon, -970</option>
            <option value="empire-perse">L'empire perse, -700</option>
            <option value="roi-monde">Les rois du Monde, -600</option>
            <option value="empire-babylone">L'empire de Babylone, -580</option>
            <option value="siecle-or-athenien">Le siècle d'or athénien, -461</option>
            <option value="empire-lexandre">L'empire d'Alexandre, -350</option>
            <option value="empire-carthage">L'empire de Carthage, -150</option>
            <option value="empire-rome">L'empire de Rome, -50</option>
            <option disabled>--- Guerres secrètes ---</option>
            <option value="incident-jesus">L'incident Jésus, 30</option>
            <option value="arthuriades">Les Arthuriades, 450</option>
            <option value="renaissance-carolingienne">La renaissance carolingienne, 800</option>
            <option value="revelation-alchimique">La Révélation alchimique, An Mil</option>
            <option value="croisades">Les croisades, XIIe</option>
            <option value="buchers-cathares">Les bûchers cathares, XIIIe</option>
            <option value="chute-temple">La chute du Temple, XIVe</option>
            <option value="empire-serbe">L'Empire serbe, 1346</option>
            <option value="guerre-cent-ans">La guerre de Cent Ans, 1412</option>
            <option value="chute-grenade">La chute de Grenade, 1492</option>
            <option disabled>--- Nouveaux Mondes ---</option>
            <option value="arcanes-renaissance">Les arcanes de la Renaissance, XVIe</option>
            <option value="secret-porte">Les secrets de la Sublime Porte, XVIe</option>
            <option value="londre-elisabethain">Le Londres élisabéthain, 1559</option>
            <option value="prague-rodolphienne">La Prague rodolphienne, 1576-1612</option>
            <option value="cour-roi-soleil">La cour du Roi-Soleil, 1650-1715</option>
            <option value="conspiration-revolution">Les conspirations de la Révolution, 1770-1850</option>
            <option value="vapeurs-victoriennes">Les vapeurs victoriennes, 1837-1901</option>
            <option disabled>--- Grand Réveil ---</option>
            <option value="secession-viennoise">La Sécession viennoise, 1890 - 1910</option>
            <option value="anness-folles">Les années folles, 1918 - 1930</option>
            <option value="annees-noires">Les années noires, 1934 - 1945</option>
            <option value="guerre-froide">La guerre froide, 1950 - 1990</option>
            <option value="eveil">L'Eveil, 1992 - 1990</option>
            <option value="chroniques-apocalypse">Les Chroniques de l'Apocalypse, 2000 - 2012</option>
            <option disabled>--- Autres ---</option>
            <option value="arcadia">Arcadia, De nos jours</option>
            <option value="perso">Personnalisé</option>
          </select>
          <input name="attr_epoque" type="hidden" value="0">
          <input class="perso" name="attr_epoque_perso" type="text" value="">
          <input name="attr_expandEpoque" type="hidden" value="1">
          <div class="autoex autoex24">
            <textarea name="attr_epoque_description"></textarea><span name="attr_epoque_description"></span>
          </div>
        </div>
        <div>
          <label>
            <input name="attr_expandVecus" value="1" type="checkbox" checked><span></span>
          </label>
          <input name="attr_vecu" type="text" value="">
          <input name="attr_degres_vecu_passe" type="number" value="0">
          <input name="attr_expandVecus" type="hidden" value="1">
          <div class="autoex autoex24">
            <textarea name="attr_vecu_description"></textarea><span name="attr_vecu_description"></span>
          </div>
          <input name="attr_effectiveMnemos" type="hidden" value="@{degres_mnemos1}+@{degres_mnemos2}">
          <select name="attr_approche">
            <option value="{{seuil=[[(@{degres_vecu_passe}+0+?{Bonus/Malus ?|0}-@{malusPhy}+@{effectiveMnemos})*10]]}} {{approche=Aucune approche}}" selected>Aucune approche</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{degres_vecu_passe}+@{kafeu}+?{Bonus/Malus ?|0}+@{KADFeu}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche de Feu}}">Approche de Feu</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{degres_vecu_passe}+@{kaair}+?{Bonus/Malus ?|0}+@{KADAir}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche d'Air}}">Approche d'Air</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{degres_vecu_passe}+@{kaeau}+?{Bonus/Malus ?|0}+@{KADEau}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche d'Eau}}">Approche d'Eau</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{degres_vecu_passe}+@{katerre}+?{Bonus/Malus ?|0}+@{KADTerre}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche de Terre}}">Approche de Terre</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{degres_vecu_passe}+@{kalune}+?{Bonus/Malus ?|0}+@{KADLune}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche de Lune}}">Approche de Lune</option>
            <option class="hideNephilim hideSelenim" value="{{seuil=[[(@{degres_vecu_passe}+@{simu-kasoleil}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche Solaire}}">Approche solaire</option>
            <option class="hideNephilim hideHumain" value="{{seuil=[[(@{degres_vecu_passe}+@{kaln}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche de Ka Lune Noire}}">Approche de KLN</option>
          </select>
          <input name="attr_effectiveRoll" type="hidden" value="@{gm} &amp;{template:base} {{name=@{character_name}}} {{vecu=@{vecu}}} {{jet=[[1d100]]}} @{approche}">
          <button name="roll_vecu" type="roll" value="@{effectiveRoll}">
          </button>
        </div>
        <div>
          <div>
            <label>
              <input name="attr_expandMnemos1" value="1" type="checkbox"><span></span>
            </label>
            <label class="checkSign">
              <input class="checkSign" name="attr_use_mnemos1" type="checkbox"><span></span>
            </label>
            <input name="attr_mnemos1" type="text" value="">
            <input name="attr_degres_mnemos1" type="number" value="0">
            <input name="attr_expandMnemos1" type="hidden" value="1">
            <div class="autoex autoex24">
              <textarea name="attr_mnemos_description1"></textarea><span name="attr_mnemos_description1"></span>
            </div>
          </div>
          <div>
            <label>
              <input name="attr_expandMnemos2" value="1" type="checkbox"><span></span>
            </label>
            <label class="checkSign">
              <input class="checkSign" name="attr_use_mnemos2" type="checkbox"><span></span>
            </label>
            <input name="attr_mnemos2" type="text" value="">
            <input name="attr_degres_mnemos2" type="number" value="0">
            <input name="attr_expandMnemos2" type="hidden" value="1">
            <div class="autoex autoex24">
              <textarea name="attr_mnemos_description2"></textarea><span name="attr_mnemos_description2"></span>
            </div>
          </div>
        </div>
      </fieldset>
    </div>
    <div class="col2">
      <div class="quetesEsoteriques">
        <h1>Quêtes ésotériques</h1>
        <fieldset class="repeating_quetes-eso">
          <select name="attr_quete_eso">
            <option value=""></option>
            <option value="Arcadia">Arcadia</option>
            <option value="Arcane XXI">Arcane XXI</option>
            <option value="Arche d'Alliance">Arche d'Alliance</option>
            <option value="Atalante Fugitive">Atalante Fugitive</option>
            <option value="Champs Polemoka">Champs Polemoka</option>
            <option value="Cité des Vertiges">Cité des Vertiges</option>
            <option value="Exode Sidéral">Exode Sidéral</option>
            <option value="Hyperborée">Hyperborée</option>
            <option value="Jérusalem Céleste">Jérusalem Céleste</option>
            <option value="Le Sentier d'Or">Le Sentier d'Or</option>
            <option value="Porte Noire">Porte Noire</option>
            <option value="Quête du Graal">Quête du Graal</option>
            <option value="Rex Mundi">Rex Mundi</option>
            <option value="Table d'Émeraude">Table d'Émeraude</option>
            <option value="Toison d'Or">Toison d'Or</option>
            <option value="Trésor des Templiers">Trésor des Templiers</option>
            <option value="0">Personnalisé</option>
          </select>
          <input name="attr_quete_eso_degres" type="number" value="">
          <input name="attr_quete_eso" type="hidden" value="">
          <button name="roll_roll_quetesEsoteriques" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{vecu=@{quete_eso}}} {{jet=[[1d100]]}} {{@{quete_eso}=@{quete_eso}}} {{vecuP=@{quete_eso_perso}}} {{special=special}} {{seuil=[[(@{quete_eso_degres}+?{Bonus/Malus ?|0})*10]]}}">
          </button>
          <input name="attr_quete_eso_perso" type="text" value="">
        </fieldset>
      </div>
    </div>
    <div class="col2">
      <div class="savoirsEsoteriques">
        <h1>Savoirs ésotériques</h1>
        <fieldset class="repeating_savoir-eso">
          <select name="attr_savoir_eso">
            <option value="0">-- Savoir --</option>
            <option value="666">666</option>
            <option value="Akasha">Akasha</option>
            <option value="Ar-Kaim">Ar-Kaim</option>
            <option value="Arcanes Majeurs">Arcanes Majeurs</option>
            <option value="Architectonique">Architectonique</option>
            <option value="Bohémiens">Bohémiens</option>
            <option value="Champs Magiques">Champs Magiques</option>
            <option value="Cousins">Cousins</option>
            <option value="Drakaon">Drakaon</option>
            <option value="Effets-Dragons">Effets-Dragons</option>
            <option value="Histoire Invisible">Histoire Invisible</option>
            <option value="Kaim">Kaim</option>
            <option value="Lune Noire">Lune Noire</option>
            <option value="Mystères">Mystères</option>
            <option value="Nephilim">Nephilim</option>
            <option value="Orichalque">Orichalque</option>
            <option value="Révélation">Révélation</option>
            <option value="Rose+Croix">Rose+Croix</option>
            <option value="Sciences Occultes">Sciences Occultes</option>
            <option value="Selenim">Selenim</option>
            <option value="Synarchie">Synarchie</option>
            <option value="Templiers">Templiers</option>
            <option value="0">Personnalisé</option>
          </select>
          <input name="attr_savoir_eso_degres" type="number" value="0">
          <input name="attr_savoir_eso" type="hidden" value="">
          <button name="roll_roll_savoirsEsoteriques" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{vecu=@{savoir_eso}}} {{jet=[[1d100]]}} {{vecuP=@{savoir_eso_perso}}} {{special=special}} {{seuil=[[(@{savoir_eso_degres}+?{Bonus/Malus ?|0})*10]]}}">
          </button>
          <input name="attr_savoir_eso_perso" type="text" value="">
        </fieldset>
      </div>
    </div>
  </div>
  <div class="tab4">
    <input class="nature" name="attr_nature" type="hidden" value="nephilim">
    <div class="col">
      <div class="actionsAttributs">
        <h1>Actions et attributs</h1>
        <div>
          <input name="attr_nature" type="hidden" value="nephilim">
          <button class="hideHumain hideSelenim" name="roll_initiative" type="roll" value="@{gm} &{template:initiative} {{name=@{character_name}}} {{jet=[[ [[@{kaeau}*2]]+@{initiative_variable} &{tracker}]]}}"><span>Initiative</span>
          </button>
          <button class="hideNephilim hideSelenim" name="roll_initiative" type="roll" value="@{gm} &{template:initiative} {{name=@{character_name}}} {{jet=[[ [[@{simu-kasoleil}]]+@{initiative_variable} &{tracker}]]}}"><span>Initiative</span>
          </button>
          <button class="hideNephilim hideHumain" name="roll_initiative" type="roll" value="@{gm} &{template:initiative} {{name=@{character_name}}} {{jet=[[ [[@{kaln}]]+@{initiative_variable} &{tracker}]]}}"><span>Initiative</span>
          </button>
          <input class="hideHumain hideSelenim" name="attr_init" type="number" value="@{kaeau}*2" disabled>
          <input class="hideNephilim hideSelenim" name="attr_init" type="number" value="@{simu-kasoleil}" disabled>
          <input class="hideNephilim hideHumain" name="attr_init" type="number" value="@{kaln}" disabled>
        </div>
        <label><span>Récupération</span>
          <input class="hideHumain hideSelenim" name="attr_recup" type="number" value="11-@{katerre}" disabled>
          <input class="hideNephilim hideSelenim" name="attr_recup" type="number" value="11-@{simu-kasoleil" disabled>
          <input class="hideHumain hideNephilim" name="attr_recup" type="number" value="11-@{kaln}" disabled>
        </label>
        <label><span>Mouvement</span>
          <input class="hideHumain hideSelenim" name="attr_mouv" type="number" value="@{kaeau}*2" disabled>
          <input class="hideNephilim hideSelenim" name="attr_mouv" type="number" value="@{simu-kasoleil}" disabled>
          <input class="hideHumain hideNephilim" name="attr_mouv" type="number" value="@{kaln}" disabled>
        </label>
        <label><span>Bonus de dommages</span>
          <input name="attr_bonus-dom" type="number" value="0" readonly>
        </label>
        <label><span>Perspicacité</span>
          <input name="attr_persp" type="number" value="11-@{kaair}" disabled>
        </label>
        <label><span>Voile</span>
          <input name="attr_voile" type="number" value="0" readonly>
        </label>
      </div>
    </div>
    <div class="col">
      <div class="dommagesPhysiques">
        <h1>Dommages physiques</h1>
        <div>
          <input name="attr_katerre" type="hidden" value="0">
          <label><span>1</span>
            <input name="attr_dom1" type="checkbox" value="1"><span></span>
          </label>
          <label><span>2</span>
            <input name="attr_dom2" type="checkbox" value="2"><span></span>
          </label>
          <label><span>3</span>
            <input name="attr_dom3" type="checkbox" value="3"><span></span>
          </label>
          <label><span>1</span>
            <input name="attr_dom4" type="checkbox" value="4"><span></span>
          </label>
          <label><span>1</span>
            <input name="attr_dom5" type="checkbox" value="5"><span></span>
          </label>
        </div><span>Conséquences</span>
        <div><span>Mineure</span><span>-2</span>
          <label>
            <input name="attr_cons-min" type="checkbox"><span title=""></span>
          </label>
          <input name="attr_cons-min-desc" type="text" value="">
        </div>
        <div><span>Sérieuse</span><span>-4</span>
          <label>
            <input name="attr_cons-ser" type="checkbox"><span title=""></span>
          </label>
          <input name="attr_cons-ser-desc" type="text" value="">
        </div>
        <div><span>Grave</span><span>-6</span>
          <label>
            <input name="attr_cons-gra" type="checkbox"><span title=""></span>
          </label>
          <input name="attr_cons-gra-desc" type="text" value="">
        </div>
      </div>
    </div>
    <div class="col">
      <div class="dommagesMagiques">
        <h1>Dommages magiques</h1>
        <div>
          <input name="attr_dom-mag" type="hidden" value="0">
          <label><span>1</span>
            <input name="attr_dom-mag1" type="checkbox" value="1"><span></span>
          </label>
          <label><span>2</span>
            <input name="attr_dom-mag1" type="checkbox" value="2"><span></span>
          </label>
          <label><span>3</span>
            <input name="attr_dom-mag1" type="checkbox" value="3"><span></span>
          </label>
        </div><span>Conséquences</span>
        <div><span>Mineure</span><span>-2</span>
          <label>
            <input name="attr_cons-mag-min" type="checkbox"><span title=""></span>
          </label>
          <input name="attr_cons-mag-min-desc" type="text" value="">
        </div>
        <div><span>Sérieuse</span><span>-4</span>
          <label>
            <input name="attr_cons-mag-ser" type="checkbox"><span title=""></span>
          </label>
          <input name="attr_cons-mag-ser-desc" type="text" value="">
        </div>
        <div><span>Grave</span><span>-6</span>
          <label>
            <input name="attr_cons-mag-gra" type="checkbox"><span title=""></span>
          </label>
          <input name="attr_cons-mag-gra-desc" type="text" value="">
        </div>
      </div>
    </div>
    <div class="degreMetamorphe">
      <h1>Degré de métamorphe actif</h1>
      <input name="attr_dMeta" type="hidden" value="0">
      <label>
        <input name="attr_degreMetamorphe" value="1" type="checkbox"><span title="1"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="2" type="checkbox"><span title="2"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="3" type="checkbox"><span title="3"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="4" type="checkbox"><span title="4"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="5" type="checkbox"><span title="5"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="6" type="checkbox"><span title="6"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="7" type="checkbox"><span title="7"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="8" type="checkbox"><span title="8"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="9" type="checkbox"><span title="9"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="10" type="checkbox"><span title="10"></span>
      </label>
    </div>
    <div class="simulacreVecus">
      <h1>Simulacre</h1>
      <h1>Vécus contemporains</h1>
      <h1></h1>
      <div>
        <div>
          <label>Vécu principal</label>
        </div>
        <div>
          <input name="attr_simu_vecu" type="text" value="" placeholder="Vécu">
          <input name="attr_simu-vecu-nbr" type="number" value="0">
        </div>
        <div>
          <input class="nature" name="attr_nature" type="hidden" value="nephilim">
          <select name="attr_approche">
            <option value="{{seuil=[[(@{simu-vecu-nbr}+0+?{Bonus/Malus ?|0}-@{malusPhy})*10]]}} {{approche=Aucune approche}}" selected>Aucune approche</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr}+@{kafeu}+?{Bonus/Malus ?|0}+@{KADFeu}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Feu}}">Approche de Feu</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr}+@{kaair}+?{Bonus/Malus ?|0}+@{KADAir}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche d'Air}}">Approche d'Air</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr}+@{kaeau}+?{Bonus/Malus ?|0}+@{KADEau}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche d'Eau}}">Approche d'Eau</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr}+@{katerre}+?{Bonus/Malus ?|0}+@{KADTerre}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Terre}}">Approche de Terre</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr}+@{kalune}+?{Bonus/Malus ?|0}+@{KADLune}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Lune}}">Approche de Lune</option>
            <option class="hideNephilim hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr}+@{simu-kasoleil}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche Solaire}}">Approche solaire</option>
            <option class="hideNephilim hideHumain" value="{{seuil=[[(@{simu-vecu-nbr}+@{kaln}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Ka Lune Noire}}">Approche de KLN</option>
          </select>
          <button name="roll_vecu" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{vecu=@{simu_vecu}}} {{jet=[[1d100]]}} @{approche}">
          </button>
        </div>
      </div>
      <div>
        <div>
          <label>Vécu secondaire</label>
        </div>
        <div>
          <input name="attr_simu_vecu2" type="text" value="" placeholder="Vécu">
          <input name="attr_simu-vecu-nbr2" type="number" value="0">
        </div>
        <div>
          <input class="nature" name="attr_nature" type="hidden" value="nephilim">
          <select name="attr_approche2">
            <option value="{{seuil=[[(@{simu-vecu-nbr2}+0+?{Bonus/Malus ?|0}-@{malusPhy})*10]]}} {{approche=Aucune approche}}" selected>Aucune approche</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr22}+@{kafeu}+?{Bonus/Malus ?|0}+@{KADFeu}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Feu}}">Approche de Feu</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr22}+@{kaair}+?{Bonus/Malus ?|0}+@{KADAir}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche d'Air}}">Approche d'Air</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr22}+@{kaeau}+?{Bonus/Malus ?|0}+@{KADEau}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche d'Eau}}">Approche d'Eau</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr22}+@{katerre}+?{Bonus/Malus ?|0}+@{KADTerre}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Terre}}">Approche de Terre</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr22}+@{kalune}+?{Bonus/Malus ?|0}+@{KADLune}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Lune}}">Approche de Lune</option>
            <option class="hideNephilim hideSelenim" value="{{seuil=[[(@{simu-vecu-nbr2}+@{simu-kasoleil}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche Solaire}}">Approche solaire</option>
            <option class="hideNephilim hideHumain" value="{{seuil=[[(@{simu-vecu-nbr2}+@{kaln}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag})*10]]}} {{approche=Approche de Ka Lune Noire}}">Approche de KLN</option>
          </select>
          <button name="roll_vecu2" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{vecu=@{simu_vecu2}}} {{jet=[[1d100]]}} @{approche2}">
          </button>
        </div>
      </div>
    </div>
    <div class="epoquesIncarnation">
      <h1>Époques d’incarnation</h1>
      <h1>Vécus passés</h1>
      <h1>Effets Mnémos</h1>
      <input class="nature" name="attr_nature" type="hidden" value="nephilim">
      <fieldset class="repeating_epoques-incarnation">
        <div>
          <label>
            <input name="attr_expandEpoque" value="1" type="checkbox" checked><span></span>
          </label>
          <select name="attr_epoque">
            <option value="rien"></option>
            <option value="chute-atlantide">La Chute de l'Atlantide, Jadis</option>
            <option disabled>--- Guerres Élémentaires ---</option>
            <option value="deluge">Le Déluge, -10000 </option>
            <option value="premiers-dieux">Les premiers dieux, -9000</option>
            <option value="premiers-peuple">Le premier peuple, -8000</option>
            <option value="premiere-cite">La première cité, -7000</option>
            <option value="premiers-megalithes">Les premiers mégalithes, -5000</option>
            <option disabled>--- Compacts Secrets ---</option>
            <option value="thuatha-danann">Les Tuatha de Danann, -4000</option>
            <option value="mahabharata">Le Mahabharata, -3000</option>
            <option value="guerre-dieux">La guerre des Dieux, -2800</option>
            <option value="seigneurs-nuit">Les Seigneurs de la Nuit, -2500</option>
            <option value="labyrinthe-minos">Le labyrinthe de Minos, -2000</option>
            <option value="reve-akhenathon">Le rêve d'Akhenaton, -1350</option>
            <option value="chute-troie">La Chute de Troie, -1200</option>
            <option disabled>--- Hermétisme ---</option>
            <option value="regne-salomon">Le règne de Salomon, -970</option>
            <option value="empire-perse">L'empire perse, -700</option>
            <option value="roi-monde">Les rois du Monde, -600</option>
            <option value="empire-babylone">L'empire de Babylone, -580</option>
            <option value="siecle-or-athenien">Le siècle d'or athénien, -461</option>
            <option value="empire-lexandre">L'empire d'Alexandre, -350</option>
            <option value="empire-carthage">L'empire de Carthage, -150</option>
            <option value="empire-rome">L'empire de Rome, -50</option>
            <option disabled>--- Guerres secrètes ---</option>
            <option value="incident-jesus">L'incident Jésus, 30</option>
            <option value="arthuriades">Les Arthuriades, 450</option>
            <option value="renaissance-carolingienne">La renaissance carolingienne, 800</option>
            <option value="revelation-alchimique">La Révélation alchimique, An Mil</option>
            <option value="croisades">Les croisades, XIIe</option>
            <option value="buchers-cathares">Les bûchers cathares, XIIIe</option>
            <option value="chute-temple">La chute du Temple, XIVe</option>
            <option value="empire-serbe">L'Empire serbe, 1346</option>
            <option value="guerre-cent-ans">La guerre de Cent Ans, 1412</option>
            <option value="chute-grenade">La chute de Grenade, 1492</option>
            <option disabled>--- Nouveaux Mondes ---</option>
            <option value="arcanes-renaissance">Les arcanes de la Renaissance, XVIe</option>
            <option value="secret-porte">Les secrets de la Sublime Porte, XVIe</option>
            <option value="londre-elisabethain">Le Londres élisabéthain, 1559</option>
            <option value="prague-rodolphienne">La Prague rodolphienne, 1576-1612</option>
            <option value="cour-roi-soleil">La cour du Roi-Soleil, 1650-1715</option>
            <option value="conspiration-revolution">Les conspirations de la Révolution, 1770-1850</option>
            <option value="vapeurs-victoriennes">Les vapeurs victoriennes, 1837-1901</option>
            <option disabled>--- Grand Réveil ---</option>
            <option value="secession-viennoise">La Sécession viennoise, 1890 - 1910</option>
            <option value="anness-folles">Les années folles, 1918 - 1930</option>
            <option value="annees-noires">Les années noires, 1934 - 1945</option>
            <option value="guerre-froide">La guerre froide, 1950 - 1990</option>
            <option value="eveil">L'Eveil, 1992 - 1990</option>
            <option value="chroniques-apocalypse">Les Chroniques de l'Apocalypse, 2000 - 2012</option>
            <option disabled>--- Autres ---</option>
            <option value="arcadia">Arcadia, De nos jours</option>
            <option value="perso">Personnalisé</option>
          </select>
          <input name="attr_epoque" type="hidden" value="0">
          <input class="perso" name="attr_epoque_perso" type="text" value="">
          <input name="attr_expandEpoque" type="hidden" value="1">
          <div class="autoex autoex24">
            <textarea name="attr_epoque_description"></textarea><span name="attr_epoque_description"></span>
          </div>
        </div>
        <div>
          <label>
            <input name="attr_expandVecus" value="1" type="checkbox" checked><span></span>
          </label>
          <input name="attr_vecu" type="text" value="">
          <input name="attr_degres_vecu_passe" type="number" value="0">
          <input name="attr_expandVecus" type="hidden" value="1">
          <div class="autoex autoex24">
            <textarea name="attr_vecu_description"></textarea><span name="attr_vecu_description"></span>
          </div>
          <input name="attr_effectiveMnemos" type="hidden" value="@{degres_mnemos1}+@{degres_mnemos2}">
          <select name="attr_approche">
            <option value="{{seuil=[[(@{degres_vecu_passe}+0+?{Bonus/Malus ?|0}-@{malusPhy}+@{effectiveMnemos})*10]]}} {{approche=Aucune approche}}" selected>Aucune approche</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{degres_vecu_passe}+@{kafeu}+?{Bonus/Malus ?|0}+@{KADFeu}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche de Feu}}">Approche de Feu</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{degres_vecu_passe}+@{kaair}+?{Bonus/Malus ?|0}+@{KADAir}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche d'Air}}">Approche d'Air</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{degres_vecu_passe}+@{kaeau}+?{Bonus/Malus ?|0}+@{KADEau}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche d'Eau}}">Approche d'Eau</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{degres_vecu_passe}+@{katerre}+?{Bonus/Malus ?|0}+@{KADTerre}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche de Terre}}">Approche de Terre</option>
            <option class="hideHumain hideSelenim" value="{{seuil=[[(@{degres_vecu_passe}+@{kalune}+?{Bonus/Malus ?|0}+@{KADLune}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche de Lune}}">Approche de Lune</option>
            <option class="hideNephilim hideSelenim" value="{{seuil=[[(@{degres_vecu_passe}+@{simu-kasoleil}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche Solaire}}">Approche solaire</option>
            <option class="hideNephilim hideHumain" value="{{seuil=[[(@{degres_vecu_passe}+@{kaln}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag}+@{effectiveMnemos})*10]]}} {{approche=Approche de Ka Lune Noire}}">Approche de KLN</option>
          </select>
          <input name="attr_effectiveRoll" type="hidden" value="@{gm} &amp;{template:base} {{name=@{character_name}}} {{vecu=@{vecu}}} {{jet=[[1d100]]}} @{approche}">
          <button name="roll_vecu" type="roll" value="@{effectiveRoll}">
          </button>
        </div>
        <div>
          <div>
            <label>
              <input name="attr_expandMnemos1" value="1" type="checkbox"><span></span>
            </label>
            <label class="checkSign">
              <input class="checkSign" name="attr_use_mnemos1" type="checkbox"><span></span>
            </label>
            <input name="attr_mnemos1" type="text" value="">
            <input name="attr_degres_mnemos1" type="number" value="0">
            <input name="attr_expandMnemos1" type="hidden" value="1">
            <div class="autoex autoex24">
              <textarea name="attr_mnemos_description1"></textarea><span name="attr_mnemos_description1"></span>
            </div>
          </div>
          <div>
            <label>
              <input name="attr_expandMnemos2" value="1" type="checkbox"><span></span>
            </label>
            <label class="checkSign">
              <input class="checkSign" name="attr_use_mnemos2" type="checkbox"><span></span>
            </label>
            <input name="attr_mnemos2" type="text" value="">
            <input name="attr_degres_mnemos2" type="number" value="0">
            <input name="attr_expandMnemos2" type="hidden" value="1">
            <div class="autoex autoex24">
              <textarea name="attr_mnemos_description2"></textarea><span name="attr_mnemos_description2"></span>
            </div>
          </div>
        </div>
      </fieldset>
    </div>
    <div class="col2">
      <div class="armes">
        <h1>Armes de mêlée</h1><span>Type</span><span>Dommages</span>
        <fieldset class="repeating_poss-arme">
          <input name="attr_poss-arme-nom" type="text" value="">
          <input name="attr_poss-arme-degre" type="number" value="0">
        </fieldset>
      </div>
      <div class="artefacts">
        <h1>Artefacts</h1>
        <fieldset class="repeating_posse-artefact-eso">
          <input name="attr_poss-artefact-name" type="text" value="">
          <select name="attr_poss-artefact-ka">
            <option value="0">-- Ka-élément --</option>
            <option value="kaair">Air</option>
            <option value="kaeau">Eau</option>
            <option value="kafeu">Feu</option>
            <option value="kalune">Lune</option>
            <option value="katerre">Terre</option>
          </select>
          <input name="attr_poss-artefact-score" type="number" value="0">
          <div class="autoex autoex22">
            <textarea name="attr_poss-artefact-def"></textarea><span name="attr_poss-artefact-def"></span>
          </div>
        </fieldset>
      </div>
      <div class="alchimie">
        <h1>Objets d'alchimie synthétisés</h1>
        <fieldset class="repeating_objets-alchimie">
          <div class="autoex autoex22">
            <textarea name="attr_objets"></textarea><span name="attr_objets"></span>
          </div>
        </fieldset>
      </div>
    </div>
    <div class="col2">
      <div class="armes armesFeu">
        <h1>Armes à feu</h1><span>Type</span><span>Dommages</span>
        <fieldset class="repeating_poss-arme-feu">
          <input name="attr_poss-arme-nom" type="text" value="">
          <input name="attr_poss-arme-degre" type="number" value="0">
        </fieldset>
      </div>
      <div class="armures">
        <h1>Armures</h1><span>Type</span><span>Protection</span>
        <fieldset class="repeating_poss-protec">
          <input name="attr_poss-protec-nom" type="text" value="">
          <input name="attr_poss-protec-degre" type="number" value="0">
        </fieldset>
      </div>
    </div>
  </div>
  <div class="tab5">
    <h1 class="titreMagie">Magie</h1>
    <div class="col40">
      <div class="cercleMagie cercleMagie1">
        <label>
          <h1>1er Cercle - Basse Magie</h1>
          <input name="attr_mag-basse-degre" type="number" value="0">
        </label>
      </div>
      <div class="cercleMagie cercleMagie2 cercleMargin">
        <label>
          <h1>2e Cercle - Haute Magie</h1>
          <input name="attr_mag-haute-degre" type="number" value="0">
        </label>
      </div>
      <div class="cercleMagie cercleMagie3 cercleMargin">
        <label>
          <h1>3e Cercle - Grand Secret</h1>
          <input name="attr_mag-secret-degre" type="number" value="0">
        </label>
      </div>
    </div>
    <div class="col60">
      <div class="vIEL">
        <h1>Voie Initiatique</h1>
        <select name="attr_mag-voie">
          <option value="0" selected></option>
          <option value="sentier-sinueux">Sentier sinueux</option>
          <option value="spirale-elevation">Spirale d'élévation</option>
          <option value="principe-egarants">Principes égarants</option>
          <option value="labyrinthe-ame">Labyrinthe schématique</option>
          <option value="dedale-ame">Dédale de l'âme</option>
        </select>
      </div>
      <div class="vIEL">
        <h1>Étape Labyrinthique</h1>
        <select name="attr_mag-etape">
          <option value="0" selected></option>
          <option value="porche">Porche</option>
          <option value="carrefour">Carrefour</option>
          <option value="coeur">Coeur</option>
          <option value="fil">Fil</option>
          <option value="epreuve">Épreuve</option>
        </select>
      </div>
    </div>
    <div class="degreMetamorphe">
      <h1>Degré de métamorphe actif</h1>
      <input name="attr_dMeta" type="hidden" value="0">
      <label>
        <input name="attr_degreMetamorphe" value="1" type="checkbox"><span title="1"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="2" type="checkbox"><span title="2"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="3" type="checkbox"><span title="3"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="4" type="checkbox"><span title="4"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="5" type="checkbox"><span title="5"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="6" type="checkbox"><span title="6"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="7" type="checkbox"><span title="7"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="8" type="checkbox"><span title="8"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="9" type="checkbox"><span title="9"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="10" type="checkbox"><span title="10"></span>
      </label>
    </div>
    <input name="attr_mag-secret-degre" type="hidden" value="0">
    <div class="gsDomains col60">
      <h1>Domaines</h1>
      <div class="vIEL">
        <select name="attr_mag-gs-dom1">
          <option value="0" selected></option>
          <option value="comprendre">Comprendre</option>
          <option value="controler">Contrôler</option>
          <option value="creer">Créer</option>
          <option value="detruire">Détruire</option>
          <option value="transformer">Transformer</option>
        </select>
        <select name="attr_mag-gs-dom2">
          <option value="0" selected></option>
          <option value="comprendre">Comprendre</option>
          <option value="controler">Contrôler</option>
          <option value="creer">Créer</option>
          <option value="detruire">Détruire</option>
          <option value="transformer">Transformer</option>
        </select>
      </div>
    </div>
    <div class="gsMaillons">
      <h1>
        <div>Maillons</div>
        <div>
          <input name="attr_magSecretCurrentLinks" type="number" value="" readonly>&nbsp;/&nbsp;
          <input name="attr_magSecretAllowedLinks" type="number" value="">
        </div>
      </h1>
      <div class="repeating-maillon-wrapper">
        <fieldset class="repeating_maillon">
          <input name="attr_maillon" type="text" value="">
        </fieldset>
      </div>
    </div>
    <div class="sorts">
      <h1>Sorts</h1><span>Nom du sort</span><span>Ka</span><span>Cercle</span><span>Degré</span><span>Portée</span><span>Durée</span><span title="Appris">A</span><span title="Tatoué">T</span><span title="Sur Focus">F</span><span></span>
      <fieldset class="repeating_mag-sort">
        <label>
          <input name="attr_expand" value="1" type="checkbox" checked><span></span>
        </label>
        <input name="attr_mag-sort-nom" type="text" value="">
        <select name="attr_mag-sort-ka">
          <option value="0"></option>
          <option value="kaair">Air</option>
          <option value="kaeau">Eau</option>
          <option value="kafeu">Feu</option>
          <option value="kalune">Lune</option>
          <option value="katerre">Terre</option>
        </select>
        <select name="attr_mag-sort-cercle">
          <option value="0"></option>
          <option value="mag-basse-degre">1er</option>
          <option value="mag-haute-degre">2ème</option>
          <option value="mag-secret-degre">3ème</option>
        </select>
        <input name="attr_mag-sort-degre" type="number" value="0">
        <input name="attr_mag-sort-portee" type="text" value="">
        <input name="attr_mag-sort-duree" type="text" value="">
        <label>
          <input name="attr_mag-sort-a" type="checkbox" value="1"><span title="Appris"></span>
        </label>
        <label>
          <input name="attr_mag-sort-t" type="checkbox" value="1"><span title="Tatoué"></span>
        </label>
        <label>
          <input name="attr_mag-sort-f" type="checkbox" value="1"><span title="Sur Focus"></span>
        </label>
        <button name="roll_sheet-simu-roll-vecu" type="roll" value="&{template:sort} {{name=@{character_name}}} {{nom_sort=@{mag-sort-nom}}} {{descrip_sort=@{mag-sort-desc}}} {{porte_sort=@{mag-sort-portee}}} {{duree_sort=@{mag-sort-duree}}} {{degre=@{mag-sort-degre}}} {{jet=[[1d100]]}} {{seuil=[[(?{Bonus/malus ?|0}[ Bonus, malus, vécus, etc. ]+@{mag-sort-current}[ Cerce + Ka - Degré ])*10]]}}">
        </button>
        <input name="attr_expand" type="hidden" value="1">
        <div>
          <label><span>Voie</span>
            <select class="sheet-mag-sort-voie" name="attr_mag-sort-voie">
              <option value="0" selected></option>
              <option value="sentier-sinueux">Sentier sinueux</option>
              <option value="spirale-elevation">Spirale d'élévation</option>
              <option value="principe-egarants">Principes égarants</option>
              <option value="labyrinthe-ame">Labyrinthe schématique</option>
              <option value="dedale-ame">Dédale de l'âme</option>
            </select>
          </label>
          <label><span>Étape</span>
            <select name="attr_mag-sort-etape">
              <option value="0" selected></option>
              <option value="porche">Porche</option>
              <option value="carrefour">Carrefour</option>
              <option value="coeur">Coeur</option>
              <option value="fil">Fil</option>
              <option value="epreuve">Épreuve</option>
            </select>
          </label>
          <label><span>Difficulté</span>
            <input name="attr_mag-sort-current" type="number" value="0" readonly>
          </label>
          <label><span>Page</span>
            <input name="attr_mag-sort-page" type="number" value="0">
          </label>
          <div class="autoex autoex22">
            <textarea name="attr_mag-sort-desc" placeholder="Description"></textarea><span name="attr_mag-sort-desc"></span>
          </div>
        </div>
      </fieldset>
    </div>
  </div>
  <div class="tab6">
    <h1 class="titreKabbale">Kabbale</h1>
    <div class="col2">
      <div class="cercleArbreKabbale"><span>3° Cercle</span><span>2° Cercle</span><span>1° Cercle</span></div>
      <div class="colArbreKabbaleR">
        <div class="arbreKabbale">
          <label class="kether"><span>Kether</span>
            <input name="attr_kheter" type="number" value="0">
          </label>
          <label class="binah"><span>Binah</span>
            <input name="attr_binah" type="number" value="0">
          </label>
          <label class="hokmah"><span>Hokmah</span>
            <input name="attr_hokmah" type="number" value="0">
          </label>
          <label class="chesed"><span>Chesed</span>
            <input name="attr_chesed" type="number" value="0">
          </label>
          <label class="geburah"><span>Geburah</span>
            <input name="attr_geburah" type="number" value="0">
          </label>
          <label class="tiphereth"><span>Tiphereth</span>
            <input name="attr_tiphereth" type="number" value="0">
          </label>
          <label class="netzach"><span>Netzach</span>
            <input name="attr_netzach" type="number" value="0">
          </label>
          <label class="hod"><span>Hod</span>
            <input name="attr_hod" type="number" value="0">
          </label>
          <label class="yesod"><span>Yesod</span>
            <input name="attr_yesod" type="number" value="0">
          </label>
          <label class="malkuth"><span>Malkut</span>
            <input name="attr_malkut" type="number" value="0">
          </label>
        </div>
      </div>
    </div>
    <div class="col2">
      <div class="kMonde">
        <h1>Monde</h1>
        <select name="attrt_kabb-monde">
          <option value="0"></option>
          <option value="sohar">Sohar</option>
          <option value="zakai">Zakai</option>
          <option value="pachad">Pachad</option>
          <option value="meborack">Meborack</option>
          <option value="aresh">Aresh</option>
        </select>
      </div>
      <div class="kOrdonnance">
        <h1>Ordonnances</h1>
        <fieldset class="repeating_kabb-ord">
          <input name="attr_kabb-ord-degré" type="number" value="1" title="Degré">
          <input name="attr_kabb-ord-nom" type="text" value="">
          <label>
            <input name="kabb-ord-respect" type="checkbox" title="Respecté ?"><span></span>
          </label>
        </fieldset>
      </div>
      <div class="degreMetamorphe">
        <h1>Degré de métamorphe actif</h1>
        <input name="attr_dMeta" type="hidden" value="0">
        <label>
          <input name="attr_degreMetamorphe" value="1" type="checkbox"><span title="1"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="2" type="checkbox"><span title="2"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="3" type="checkbox"><span title="3"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="4" type="checkbox"><span title="4"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="5" type="checkbox"><span title="5"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="6" type="checkbox"><span title="6"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="7" type="checkbox"><span title="7"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="8" type="checkbox"><span title="8"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="9" type="checkbox"><span title="9"></span>
        </label>
        <label>
          <input name="attr_degreMetamorphe" value="10" type="checkbox"><span title="10"></span>
        </label>
      </div>
    </div>
    <input name="attr_ordonnanceBonus" type="hidden" value="0">
    <div class="invocations">
      <h1>Invocations</h1><span>Nom de l'invocation</span><span>Séphira</span><span>Ka</span><span>Degré</span><span>Portée</span><span>Durée</span><span>Visible</span><span title="Appris">A</span><span title="Tatoué">T</span><span title="Sur Focus">F</span><span></span>
      <fieldset class="repeating_kabb-invoc">
        <label>
          <input name="attr_expand" checked type="checkbox" value="1"><span></span>
        </label>
        <input name="attr_kabb-invoc-nom" type="text" value="">
        <select name="attr_kabb-invoc-sephira">
          <option value="0"></option>
          <option value="malkut">Malkut</option>
          <option value="yesod">Yesod</option>
          <option value="hod">Hod</option>
          <option value="netzah">Netzah</option>
          <option value="tiphereth">Tiphereth</option>
          <option value="geburah">Geburah</option>
          <option value="chesed">Chesed</option>
          <option value="binah">Binah</option>
          <option value="hokmah">Hokmah</option>
          <option value="kheter">Kether</option>
        </select>
        <select name="attr_kabb-invoc-ka">
          <option value="0"></option>
          <option value="kaair">Air</option>
          <option value="kaeau">Eau</option>
          <option value="kafeu">Feu</option>
          <option value="kalune">Lune</option>
          <option value="katerre">Terre</option>
        </select>
        <input name="attr_kabb-invoc-degre" type="number" value="0">
        <input name="attr_kabb-invoc-portee" type="text" value="">
        <input name="attr_kabb-invoc-duree" type="text" value="">
        <div>
          <label>
            <input name="kabb-invoc-visible" type="checkbox"><span></span>
          </label>
        </div>
        <label>
          <input name="kabb-invoc-a" type="checkbox" title="Appris"><span title="1"></span>
        </label>
        <label>
          <input name="kabb-invoc-t" type="checkbox" title="Tatoué"><span title="1"></span>
        </label>
        <label>
          <input name="kabb-invoc-f" type="checkbox" title="Sur Focus"><span title="1"></span>
        </label>
        <button name="roll_simu-roll-vecu" title="Invocation" type="roll" value="&{template:invocation} {{name=@{character_name}}} {{nom_creature=@{kabb-invoc-nom}}} {{descrip_sort=@{kabb-invoc-desc}}} {{portee_sort@{kabb-invoc-portee}}} {{duree_sort=@{kabb-invoc-duree}}} {{degre=@{kabb-invoc-degre}}} {{jet=[[1d100]]}} {{seuil=[[(?{Bonus / malus ?|0}[ Bonus, malus, vécus, etc. ]+@{kabb-invoc-current}[ Kabbale + Ka + Ordonnances ])*10]]}}">
        </button>
        <button name="roll_simu-roll-opposition" title="Nouer un pacte" type="roll" value="&{template:opposition} {{name=@{character_name}}} {{creature=@{kabb-invoc-nom}}} {{jet=[[1d100]]}} {{seuil=[[(?{Bonus / malus ?|0}[Bonus, malus, vécus, etc.]+[[@{kabb-invoc-current}]][Kabbale + Ka)*10 ]]}} {{jet_creature=[[1d100]]}} {{degre=[[@{kabb-invoc-degre}[Degré]*10 ]]}}">
        </button>
        <input name="attr_expand" type="hidden" value="1">
        <div>
          <label>
            <select name="atr_kabb-invoc-monde">
              <option value="0"></option>
              <option value="sohar">Sohar</option>
              <option value="zakai">Zakai</option>
              <option value="pachad">Pachad</option>
              <option value="meborack">Meborack</option>
              <option value="aresh">Aresh</option>
            </select>
          </label>
          <label><span>Difficulté</span>
            <input name="attr_kabb-invoc-current" type="number" value="0" readonly>
          </label>
          <select name="attr_pacteConclu">
            <option value="1" selected>Première invocation</option>
            <option value="2">Pacte conclu</option>
          </select>
          <label><span>Page</span>
            <input name="attr_kabb-invoc-page" type="number" value="0">
          </label>
          <div class="autoex autoex22">
            <textarea name="attr_kabb-invoc-desc" placeholder="Description"></textarea><span name="attr_kabb-invoc-desc"></span>
          </div>
        </div>
      </fieldset>
    </div>
  </div>
  <div class="tab7">
    <h1 class="titreAlchimie">Alchimie</h1>
    <div class="col2">
      <div class="oeuvres">
        <label><span>Œuvre<br/>au noir</span>
          <input name="attr_alch-oeuvre-noir" type="number" value="0">
        </label>
        <label><span>Œuvre<br/>au blanc</span>
          <input name="attr_alch-oeuvre-blanc" type="number" value="0">
        </label>
        <label><span>Œuvre<br/>au rouge</span>
          <input name="attr_alch-oeuvre-rouge" type="number" value="0">
        </label>
      </div>
      <label class="alchimieVoie"><span>Voie initiatique</span>
        <select name="attr_alch-voie">
          <option value="0"></option>
          <option value="breve">Voie brève</option>
          <option value="seche">Voie sèche</option>
          <option value="humide">Voie humide</option>
          <option value="royale">Voie royale</option>
          <option value="pagirie">Spagyrie</option>
        </select>
      </label>
      <div class="alchimieSConstruct">
        <h1>Constructs utilisables</h1>
        <label>
          <input name="attr_sCornue" value="1" type="checkbox" checked><span title="Cornue"></span>
        </label>
        <label>
          <input name="attr_sAthanor" value="1" type="checkbox" checked><span title="Athanor"></span>
        </label>
        <label>
          <input name="attr_sAludel" value="1" type="checkbox" checked><span title="Aludel"></span>
        </label>
        <label>
          <input name="attr_sForge" value="1" type="checkbox" checked><span title="Forge ou Creuset"></span>
        </label>
        <label>
          <input name="attr_sAlambic" value="1" type="checkbox" checked><span title="Alambic"></span>
        </label>
      </div>
    </div>
    <div class="col2">
      <div class="materiaePrimae">
        <h1>Jauge de Materiae Primae</h1>
        <div><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Nephilim-Legende/img/Feu.png" alt="Feu">
          <label>
            <input name="attr_alch-mp-feu" type="number" value="0"><span>/</span>
            <input name="attr_alch-mp-feu-max" type="number" value="0">
          </label>
        </div>
        <div><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Nephilim-Legende/img/Air.png" alt="Air">
          <label>
            <input name="attr_alch-mp-air" type="number" value="0"><span>/</span>
            <input name="attr_alch-mp-air-max" type="number" value="0">
          </label>
        </div>
        <div><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Nephilim-Legende/img/Terre.png" alt="Terre">
          <label>
            <input name="attr_alch-mp-terre" type="number" value="0"><span>/</span>
            <input name="attr_alch-mp-terre-max" type="number" value="0">
          </label>
        </div>
        <div><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Nephilim-Legende/img/Eau.png" alt="Eau">
          <label>
            <input name="attr_alch-mp-eau" type="number" value="0"><span>/</span>
            <input name="attr_alch-mp-eau-max" type="number" value="0">
          </label>
        </div>
        <div><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Nephilim-Legende/img/Lune.png" alt="Lune">
          <label>
            <input name="attr_alch-mp-lune" type="number" value="0"><span>/</span>
            <input name="attr_alch-mp-lune-max" type="number" value="0">
          </label>
        </div>
      </div>
    </div>
    <div class="formules">
      <h1>Formules</h1><span>Nom de la formule</span><span>Substance</span><span>Ka</span><span>Ka</span><span>Aire d'effet</span><span>Durée</span><span title="Appris">A</span><span title="Tatoué">T</span><span title="Sur Focus">F</span><span></span>
      <fieldset class="repeating_alch-form">
        <label>
          <input name="attr_expand" type="checkbox" checked value="1"><span></span>
        </label>
        <input name="attr_alch-form-nom" type="text" value="">
        <select class="sheet-alch-form-subs" name="attr_alch-form-subs">
          <option selected value="0"></option>
          <option value="alch-athanor">Poudre (Athanor)</option>
          <option value="alch-creuset">Métal (Creuset)</option>
          <option value="alch-cornue">Ambre (Cornue)</option>
          <option value="alch-alambic">Liqueur (Alambic)</option>
          <option value="alch-aludel">Vapeur (Aludel)</option>
        </select>
        <select name="attr_alch-form-ka-1">
          <option value="0"></option>
          <option value="kaair">Air</option>
          <option value="kaeau">Eau</option>
          <option value="kafeu">Feu</option>
          <option value="kalune">Lune</option>
          <option value="katerre">Terre</option>
        </select>
        <select name="attr_alch-form-ka-2">
          <option value="0"></option>
          <option value="kaair">Air</option>
          <option value="kaeau">Eau</option>
          <option value="kafeu">Feu</option>
          <option value="kalune">Lune</option>
          <option value="katerre">Terre</option>
        </select>
        <input name="attr_alch-form-portee" type="text" value="">
        <input name="attr_alch-form-duree" type="text" value="">
        <label>
          <input name="alch-form-a" type="checkbox" title="Appris" value="1"><span></span>
        </label>
        <label>
          <input name="alch-form-t" type="checkbox" title="Tatoué" value="1"><span></span>
        </label>
        <label>
          <input name="alch-form-f" type="checkbox" title="Sur Focus" value="1"><span></span>
        </label>
        <button name="roll_simu-roll-vecu" type="roll" value="&{template:formule} {{name=@{character_name}}} {{nom_formule=@{alch-form-nom}}} {{nb_materia=@{alch-form-degre}}} {{jet=[[1d100]]}} {{seuil=[[(?{Bonus / malus ?|0}[Bonus, malus, vécus, etc.]+@{alch-form-current}[Oeuvre + Ka-Élément du Construct - Degré])*10]]}} {{aire_formule=@{alch-form-portee}}} {{duree_formule=@{alch-form-duree}}} {{description_formule=@{alch-form-desc}}}">
        </button>
        <input name="attr_expand" type="hidden" value="1">
        <div>
          <label><span>Art occulte</span>
            <select name="attr_alch-form-art">
              <option value="0"></option>
              <option value="alch-oeuvre-noir">Oeuvre au noir</option>
              <option value="alch-oeuvre-blanc">Oeuvre au blanc</option>
              <option value="alch-oeuvre-rouge">Oeuvre au rouge</option>
            </select>
          </label>
          <label><span>Degré</span>
            <input name="attr_alch-form-degre" type="number" value="0">
          </label>
          <label><span>Difficulté</span>
            <input name="attr_alch-form-current" type="number" value="0" readonly>
          </label>
          <label><span>page</span>
            <input name="attr_alch-form-page" type="number" value="0">
          </label>
          <div class="autoex autoex22">
            <textarea name="attr_alch-form-desc"></textarea><span name="attr_alch-form-desc"></span>
          </div>
        </div>
      </fieldset>
    </div>
  </div>
  <div class="tab8">
    <div class="constructs">
      <h1>Laboratoire et constructs</h1>
      <input class="cornue" name="attr_sCornue" type="hidden" value="1">
      <input class="athanor" name="attr_sAthanor" type="hidden" value="1">
      <input class="aludel" name="attr_sAludel" type="hidden" value="1">
      <input class="forge" name="attr_sForge" type="hidden" value="1">
      <input class="alambic" name="attr_sAlambic" type="hidden" value="1">
      <div class="cornue"><span>Ka-Feu</span>
        <input name="attr_alch-cornue-kafeu" type="number" value="0"><span>Ka-Terre</span>
        <input name="attr_alch-cornue-katerre" type="number" value="0"><span>Ka-Air</span>
        <input name="attr_alch-cornue-kaair" type="number" value="0"><span>Ka-Lune</span>
        <input name="attr_alch-cornue-kalune" type="number" value="0"><span>Cornue<span>(ambres)</span></span><span>Ka-Eau</span>
        <input name="attr_alch-cornue-kaeau" type="number" value="0">
      </div>
      <div class="athanor"><span>Ka-Feu</span>
        <input name="attr_alch-athanor-kafeu" type="number" value="0"><span>Ka-Terre</span>
        <input name="attr_alch-athanor-katerre" type="number" value="0"><span>Ka-Air</span>
        <input name="attr_alch-athanor-kaair" type="number" value="0"><span>Ka-Lune</span>
        <input name="attr_alch-athanor-kalune" type="number" value="0"><span>Athanor<span>(poudres)</span></span><span>Ka-Eau</span>
        <input name="attr_alch-athanor-kaeau" type="number" value="0">
      </div>
      <div class="aludel"><span>Ka-Feu</span>
        <input name="attr_alch-aludel-kafeu" type="number" value="0"><span>Ka-Terre</span>
        <input name="attr_alch-aludel-katerre" type="number" value="0"><span>Ka-Air</span>
        <input name="attr_alch-aludel-kaair" type="number" value="0"><span>Ka-Lune</span>
        <input name="attr_alch-aludel-kalune" type="number" value="0"><span>Aludel<span>(Vapeurs)</span></span><span>Ka-Eau</span>
        <input name="attr_alch-aludel-kaeau" type="number" value="0">
      </div>
      <div class="forge"><span>Ka-Feu</span>
        <input name="attr_alch-creuset-kafeu" type="number" value="0"><span>Ka-Terre</span>
        <input name="attr_alch-creuset-katerre" type="number" value="0"><span>Ka-Air</span>
        <input name="attr_alch-creuset-kaair" type="number" value="0"><span>Ka-Lune</span>
        <input name="attr_alch-creuset-kalune" type="number" value="0"><span>Forge ou Creuset<span>(métaux)</span></span><span>Ka-Eau</span>
        <input name="attr_alch-creuset-kaeau" type="number" value="0">
      </div>
      <div class="alambic"><span>Ka-Feu</span>
        <input name="attr_alch-alambic-kafeu" type="number" value="0"><span>Ka-Terre</span>
        <input name="attr_alch-alambic-katerre" type="number" value="0"><span>Ka-Air</span>
        <input name="attr_alch-alambic-kaair" type="number" value="0"><span>Ka-Lune</span>
        <input name="attr_alch-alambic-kalune" type="number" value="0"><span>Alambic<span>(liqueurs)</span></span><span>Ka-Eau</span>
        <input name="attr_alch-alambic-kaeau" type="number" value="0">
      </div>
    </div>
  </div>
  <div class="tab9">
    <div class="fraternite">
      <h1>Fraternité</h1>
      <div class="col2">
        <label>
          <h1>Nom</h1>
          <input name="attr_frat-nom" type="text" value="">
        </label>
      </div>
      <div class="col2">
        <div>
          <h1>Quête / Savoir ésotérique</h1>
          <input name="attr_frat-quete" type="text" value="">
          <input name="attr_frat-quete-score" type="number" value="0" min="0">
        </div>
      </div>
      <h1>Alliés</h1>
      <fieldset class="repeating_frat-ress-allies">
        <div class="autoex autoex22">
          <textarea name="attr_frat-ress-allies"></textarea><span name="attr_frat-ress-allies"></span>
        </div>
      </fieldset>
      <h1>Ressources</h1>
      <fieldset class="repeating_frat-ress-propr">
        <div class="autoex autoex22">
          <textarea name="attr_frat-ress-propr"></textarea><span name="attr_frat-ress-propr"></span>
        </div>
      </fieldset>
      <h1>Refuges</h1>
      <fieldset class="repeating_frat-ress-refuge">
        <div class="autoex autoex22">
          <textarea name="attr_frat-ress-refuge"></textarea><span name="attr_frat-ress-refuge"></span>
        </div>
      </fieldset>
    </div>
  </div>
  <div class="tab10">
    <div class="degreMetamorphe">
      <h1>Degré de métamorphe actif</h1>
      <input name="attr_dMeta" type="hidden" value="0">
      <label>
        <input name="attr_degreMetamorphe" value="1" type="checkbox"><span title="1"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="2" type="checkbox"><span title="2"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="3" type="checkbox"><span title="3"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="4" type="checkbox"><span title="4"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="5" type="checkbox"><span title="5"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="6" type="checkbox"><span title="6"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="7" type="checkbox"><span title="7"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="8" type="checkbox"><span title="8"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="9" type="checkbox"><span title="9"></span>
      </label>
      <label>
        <input name="attr_degreMetamorphe" value="10" type="checkbox"><span title="10"></span>
      </label>
    </div>
    <div class="arcadia">
      <div>
        <h1>Arcadia</h1>
        <input class="nature" name="attr_nature" type="hidden" value="nephilim">
        <select name="attr_approche">
          <option value="0+?{Bonus/Malus ?|0})*10]]}} {{approche=Aucune approche}}" selected>Aucune approche</option>
          <option class="hideHumain hideSelenim" value="@{kafeu}+?{Bonus/Malus ?|0}+@{KADFeu}-@{malusMag})*10]]}} {{approche=Approche de Feu}}">Approche de Feu</option>
          <option class="hideHumain hideSelenim" value="@{kaair}+?{Bonus/Malus ?|0}+@{KADAir}-@{malusMag})*10]]}} {{approche=Approche d'Air}}">Approche d'Air</option>
          <option class="hideHumain hideSelenim" value="@{kaeau}+?{Bonus/Malus ?|0}+@{KADEau}-@{malusMag})*10]]}} {{approche=Approche d'Eau}}">Approche d'Eau</option>
          <option class="hideHumain hideSelenim" value="@{katerre}+?{Bonus/Malus ?|0}+@{KADTerre}-@{malusMag})*10]]}} {{approche=Approche de Terre}}">Approche de Terre</option>
          <option class="hideHumain hideSelenim" value="@{kalune}+?{Bonus/Malus ?|0}+@{KADLune}-@{malusMag})*10]]}} {{approche=Approche de Lune}}">Approche de Lune</option>
          <option class="hideNephilim hideSelenim" value="@{simu-kasoleil}+?{Bonus/Malus ?|0}+@{simu-kasoleil}-@{malusMag})*10]]}} {{approche=Approche solaire}}">Approche solaire</option>
          <option class="hideHumain hideNephilim" value="@{kaln}+?{Bonus/Malus ?|0}+@{kaln}-@{malusMag})*10]]}} {{approche=Approche de KLN}}">Approche de KLN</option>
        </select>
      </div><span>Vécu Arcadien</span><span>Quartier</span><span>Quadrant</span><span>Intime</span><span>Passages</span><span>Clé</span>
      <fieldset class="repeating_arcadia">
        <div>
          <input name="attr_vecuArcadien" type="text" value="">
          <input name="attr_vecuArcadienScore" type="number" value="0">
        </div>
        <div class="autoex autoex22">
          <textarea name="attr_quartier"></textarea><span name="attr_quartier"></span>
        </div>
        <div class="autoex autoex22">
          <textarea name="attr_quadrant"></textarea><span name="attr_quadrant"></span>
        </div>
        <div>
          <label>
            <input name="intime" type="checkbox" value="1"><span></span>
          </label>
        </div>
        <div class="autoex autoex22">
          <textarea name="attr_passages"></textarea><span name="attr_passages"></span>
        </div>
        <div class="autoex autoex22">
          <textarea name="attr_cle"></textarea><span name="attr_cle"></span>
        </div>
        <button name="roll_vecu" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{vecu=@{vecuArcadien}}} {{jet=[[1d100]]}} {{seuil=[[(@{vecuArcadienScore}-@{malusPhy}+@{approche})*10]]}}">
        </button>
      </fieldset>
    </div>
    <div class="titre">
      <h1>Titre</h1>
      <input name="attr_titre" type="text" value="">
    </div>
  </div>
  <div class="tab11">
    <div class="col">
      <label class="headerName"><span>Nom</span>
        <input name="attr_character_name" type="text" value="">
      </label>
      <div class="selenimPhrase"><span>Votre Selenim en une phrase :</span>
        <div class="autoex autoex24">
          <textarea name="attr_en_une_phrase"></textarea><span name="attr_en_une_phrase"></span>
        </div>
      </div>
      <div class="noyauCompetence">
        <label><span>Pavane</span>
          <div>
            <input name="attr_pavane" type="number" value="3">
            <button name="roll_pavane" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{jet=[[1d100]]}} {{approche=Aucune approche}} {{vecu=Pavane}} {{seuil=[[(@{pavane}+?{Bonus/Malus ?|0}-@{malusMag})*10]]}}">
            </button>
          </div>
        </label>
        <label>
          <input name="attr_approcheKLN" title="Approche de KLN" type="checkbox" value="1"><span>Changement de peau</span>
          <div>
            <input name="attr_chmtPeau" type="number" value="1">
            <button name="roll_chmtPeau" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{jet=[[1d100]]}} {{vecu=Changement de peau}} {{approche=Aucune approche}} {{seuil=[[(@{chmtPeau}+?{Bonus/Malus ?|0}-@{malusPhy})*10]]}}">
            </button>
            <button name="roll_chmtPeau" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{jet=[[1d100]]}} {{vecu=Changement de peau}} {{approche=Approche de KLN}} {{seuil=[[(@{chmtPeau}+@{kaln}+?{Bonus/Malus ?|0}-@{malusPhy}-@{malusMag})*10]]}}">
            </button>
          </div>
        </label>
      </div>
      <div class="chutes">
        <h1>Chutes</h1>
        <div>
          <div>
            <h2>Effet Ahasvérus</h2>
            <input name="attr_ahasverus" type="hidden" value="">
            <label>
              <input name="attr_ahasverus" value="" type="radio"><span title="0"></span>
            </label>
            <label>
              <input name="attr_ahasverus" value="" type="radio"><span title="1"></span>
            </label>
            <label>
              <input name="attr_ahasverus" value="" type="radio"><span title="2"></span>
            </label>
            <label>
              <input name="attr_ahasverus" value="" type="radio"><span title="3"></span>
            </label>
            <label>
              <input name="attr_ahasverus" value="" type="radio"><span title="4"></span>
            </label>
            <label>
              <input name="attr_ahasverus" value="" type="radio"><span title="5"></span>
            </label>
            <label>
              <input name="attr_ahasverus" value="" type="radio"><span title="6"></span>
            </label>
            <label>
              <input name="attr_ahasverus" value="" type="radio"><span title="7"></span>
            </label>
            <label>
              <input name="attr_ahasverus" value="" type="radio"><span title="8"></span>
            </label>
            <label>
              <input name="attr_ahasverus" value="" type="radio"><span title="9"></span>
            </label>
            <label>
              <input name="attr_ahasverus" value="" type="radio"><span title="10"></span>
            </label>
          </div>
          <input name="attr_ahasverus_form" type="text" value="">
        </div>
      </div>
    </div>
    <div class="2colT1">
      <div class="noyau">
        <button name="roll_kanoyau" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{jet=[[1d100]]}} {{ka=Noyau de KLN}} {{seuil=[[@{kaln}+?{Bonus/Malus ?|0}-@{malusMag})*10]]}}"><span>Noyau</span>
        </button>
        <input name="attr_kaln" type="number" value="1" min="1">
        <button name="roll_kareserve" type="roll" value="@{gm} &{template:base} {{name=@{character_name}}} {{jet=[[1d100]]}} {{ka=KLN total}} {{seuil=[[@{kaln}+@{reserve}+?{Bonus/Malus ?|0}-@{malusMag})*10]]}}"><span>Réserve</span>
        </button>
        <input name="attr_reserve" type="number" value="0" min="0">
        <button name="roll_kareservemax" type="roll"><span>Max</span></button>
        <input name="attr_reserveMax" type="number" value="0" min="0">
      </div>
    </div>
  </div>
  <div class="tab12">
    <div class="titleNecro">
      <h1>Nécromancie</h1>
      <input name="attr_necromancie" type="number" value="0">
      <label><span>Réserve</span>
        <input name="attr_reserve" type="number" value="">
      </label>
    </div>
    <div class="rites">
      <h1>Rites</h1><span>Nom du Rite</span><span>Voie</span><span>Coût</span><span>Durée</span><span title="Appris">A</span><span title="Tatoué">T</span><span title="Sur Focus">F</span><span></span>
      <fieldset class="repeating_rites">
        <label>
          <input name="attr_expand" type="checkbox" checked value="1"><span></span>
        </label>
        <input name="attr_nom" type="text" value="">
        <select name="attr_voie">
          <option selected value="0"></option>
          <option value="apaisement">Apaisement</option>
          <option value="communication">Communication</option>
          <option value="controler">Contrôle</option>
        </select>
        <input name="attr_cout" type="number" value="0">
        <input name="attr_duree" type="text" value="">
        <label>
          <input name="rite_a" type="checkbox" value="1"><span></span>
        </label>
        <label>
          <input name="rite_t" type="checkbox" value="1"><span></span>
        </label>
        <label>
          <input name="rite_f" type="checkbox" value="1"><span></span>
        </label>
        <button name="roll_rite_roll" type="roll" value="@{gm} &{template:rite} {{name=@{character_name}}} {{nom_rite=@{nom}}} {{jet=[[1d100]]}} {{seuil=[[((@{necromancie}+?{Bonus/Malus ?|0}-@{malusMag})*10)]]}} {{duree_sort=@{duree}}} {{descrip_sort=@{rite_description}}}">
        </button>
        <input name="attr_expand" type="hidden" value="1">
        <div class="autoex autoex22">
          <textarea name="attr_rite_description"></textarea><span name="attr_rite_description"></span>
        </div>
      </fieldset>
    </div>
  </div>
  <div class="tab13">
    <div class="titleKabbNoire">
      <h1>Kabbale noire</h1>
      <input name="attr_kabbNoire" type="number" value="0">
      <label><span>Réserve</span>
        <input name="attr_reserve" type="number" value="">
      </label>
    </div>
    <div class="entites">
      <h1>Entités</h1><span>Nom de l’Entité</span><span>Degré</span><span>Dmg.</span><span>Protec.</span><span>Entropie</span><span>Contrôle</span><span title="Appris">A</span><span title="Tatoué">T</span><span title="Sur Focus">F</span><span></span><span></span>
      <fieldset class="repeating_entities">
        <label>
          <input name="attr_expand" type="checkbox" value="1"><span></span>
        </label>
        <input name="attr_nom" type="text" value="">
        <input name="attr_degre" type="number" value="0">
        <input name="attr_dom" type="text" value="">
        <input name="attr_protec" type="text" value="">
        <input name="attr_entropie" type="text" value="">
        <label>
          <input name="controle" type="checkbox" value="1"><span></span>
        </label>
        <label>
          <input name="entite_a" type="checkbox" value="1"><span></span>
        </label>
        <label>
          <input name="entite_t" type="checkbox" value="1"><span></span>
        </label>
        <label>
          <input name="entite_f" type="checkbox" value="1"><span></span>
        </label>
        <button name="roll_invoc" type="roll" value="@{gm} &{template:invocation} {{name=@{character_name}}} {{jet=[[1d100]]}} {{nom_creature=@{nom}}} {{seuil=[[(@{kabbNoire}+?{Bonus/Malus ?|0}-@{malusMag})*10]]}} {{degre=@{degre}}} {{descrip_sort=@{ent_description}}}">
        </button>
        <button name="roll_controle" type="roll" value="@{gm} &{template:opposition} {{name=@{character_name}}} {{creature=@{nom}}} {{jet=[[1d100]]}} {{seuil=[[@{kaln}+?{Bonus/Malus ?|0}-@{malusMag})*10]]}} {{jet_creature=[[1d100]]}} {{degre=[[@{degre}*10]]}} {{entite=1}}">
        </button>
        <input name="attr_expand" type="hidden" value="1">
        <div class="autoex autoex24">
          <textarea name="attr_ent_description" placeholder="Description"></textarea><span name="attr_ent_description"></span>
        </div>
      </fieldset>
    </div>
  </div>
  <div class="tab14">
    <div class="titleImago">
      <h1>Imago</h1>
      <label><span>Réserve</span>
        <input name="attr_reserve" type="number" value="">
      </label>
    </div>
    <div class="nephilimPhrase"><span>Description de l’Imago</span>
      <div class="autoex autoex24">
        <textarea name="attr_imago_descr"></textarea><span></span>
      </div>
    </div>
    <div class="aspects">
      <h1>Aspects</h1><span>Nom de l’aspect</span><span>Coût</span><span>KLN investi</span><span>Durée</span><span>Actif ?</span>
      <fieldset class="repeating_aspects">
        <label>
          <input name="attr_expand" type="checkbox" value="1"><span></span>
        </label>
        <input name="attr_nom" type="text" value="">
        <input name="attr_cout" type="number" value="0">
        <input name="attr_investi" type="number" value="0">
        <input name="attr_duree" type="text" value="">
        <label>
          <input name="controle" type="checkbox" value="1"><span></span>
        </label>
        <input name="attr_expand" type="hidden" value="1">
        <div class="autoex autoex24">
          <textarea name="attr_aspect_description" placeholder="Description"></textarea><span name="attr_aspect_description"></span>
        </div>
      </fieldset>
    </div>
  </div><rolltemplate class="sheet-rolltemplate-base">
	<h1>{{name}}</h1>
	{{#mnemos1}}
		<h2>{{mnemos1}}</h2>
	{{/mnemos1}}
	{{#mnemos2}}
		<h2>{{mnemos2}}</h2>
	{{/mnemos2}}
	{{#approche}}
		<div>
			<span>Mobilise son expérience de :</span>
			<span>{{vecu}}</span>
			<span>{{approche}}</span>
		</div>
	{{/approche}}
	{{#special}}
		<div>
			<span>Mobilise son expérience de :</span>
			<span>{{vecuP}}</span>
			<span>{{approche}}</span>
		</div>
	{{/special}}
	{{#ka}}
		<div>
			<span>Utilise son :</span>
			<span>{{ka}}</span>
		</div>
	{{/ka}}
	<div>
		<span>Résultat</span>
		<span>{{jet}}</span><span>({{seuil}})</span>
		{{#^rollTotal() jet 100}}
			{{#rollBetween() jet 1 seuil}}
				{{#^rollTotal() jet 11}}
					{{#^rollTotal() jet 22}}
						{{#^rollTotal() jet 33}}
							{{#^rollTotal() jet 44}}
								{{#^rollTotal() jet 55}}
									{{#^rollTotal() jet 66}}
										{{#^rollTotal() jet 77}}
											{{#^rollTotal() jet 88}}
												{{#^rollTotal() jet 99}}
													<span class="success">Réussite</span>
												{{/^rollTotal() jet 99}}
											{{/^rollTotal() jet 88}}
										{{/^rollTotal() jet 77}}
									{{/^rollTotal() jet 66}}
								{{/^rollTotal() jet 55}}
							{{/^rollTotal() jet 44}}
						{{/^rollTotal() jet 33}}
					{{/^rollTotal() jet 22}}
				{{/^rollTotal() jet 11}}
				{{#rollTotal() jet 11}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 11}}
				{{#rollTotal() jet 22}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 22}}
				{{#rollTotal() jet 33}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 33}}
				{{#rollTotal() jet 44}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 44}}
				{{#rollTotal() jet 55}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 55}}
				{{#rollTotal() jet 66}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 66}}
				{{#rollTotal() jet 77}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 77}}
				{{#rollTotal() jet 88}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 88}}
				{{#rollTotal() jet 99}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 99}}
			{{/rollBetween() jet 1 seuil}}
			{{#rollGreater() jet seuil}}
				{{#^rollTotal() jet 100}}
					{{#^rollTotal() jet 11}}
						{{#^rollTotal() jet 22}}
							{{#^rollTotal() jet 33}}
								{{#^rollTotal() jet 44}}
									{{#^rollTotal() jet 55}}
										{{#^rollTotal() jet 66}}
											{{#^rollTotal() jet 77}}
												{{#^rollTotal() jet 88}}
													{{#^rollTotal() jet 99}}
														<span class="fail">Échec</span>
													{{/^rollTotal() jet 99}}
												{{/^rollTotal() jet 88}}
											{{/^rollTotal() jet 77}}
										{{/^rollTotal() jet 66}}
									{{/^rollTotal() jet 55}}
								{{/^rollTotal() jet 44}}
							{{/^rollTotal() jet 33}}
						{{/^rollTotal() jet 22}}
					{{/^rollTotal() jet 11}}
				{{/^rollTotal() jet 100}}
				{{#rollTotal() jet 11}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 11}}
				{{#rollTotal() jet 22}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 22}}
				{{#rollTotal() jet 33}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 33}}
				{{#rollTotal() jet 44}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 44}}
				{{#rollTotal() jet 55}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 55}}
				{{#rollTotal() jet 66}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 66}}
				{{#rollTotal() jet 77}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 77}}
				{{#rollTotal() jet 88}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 88}}
				{{#rollTotal() jet 99}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 99}}
			{{/rollGreater() jet seuil}}
		{{/^rollTotal() jet 100}}
		{{#rollTotal() jet 100}}
			<span class="fail">Maladresse</span>
		{{/rollTotal() jet 100}}
	</div>
</rolltemplate><rolltemplate class="sheet-rolltemplate-sort">
	<h1>{{name}}</h1>
	<div>
		<span>Lance le sort :</span>
		<span>{{nom_sort}}</span><span>({{degre}})</span>
	</div>
	<div>
		<span>Résultat</span>
		<span>{{jet}}</span><span>({{seuil}})</span>
		{{#^rollTotal() jet 100}}
			{{#rollBetween() jet 1 seuil}}
				{{#^rollTotal() jet 11}}
					{{#^rollTotal() jet 22}}
						{{#^rollTotal() jet 33}}
							{{#^rollTotal() jet 44}}
								{{#^rollTotal() jet 55}}
									{{#^rollTotal() jet 66}}
										{{#^rollTotal() jet 77}}
											{{#^rollTotal() jet 88}}
												{{#^rollTotal() jet 99}}
													<span class="success">Réussite</span>
												{{/^rollTotal() jet 99}}
											{{/^rollTotal() jet 88}}
										{{/^rollTotal() jet 77}}
									{{/^rollTotal() jet 66}}
								{{/^rollTotal() jet 55}}
							{{/^rollTotal() jet 44}}
						{{/^rollTotal() jet 33}}
					{{/^rollTotal() jet 22}}
				{{/^rollTotal() jet 11}}
				{{#rollTotal() jet 11}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 11}}
				{{#rollTotal() jet 22}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 22}}
				{{#rollTotal() jet 33}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 33}}
				{{#rollTotal() jet 44}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 44}}
				{{#rollTotal() jet 55}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 55}}
				{{#rollTotal() jet 66}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 66}}
				{{#rollTotal() jet 77}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 77}}
				{{#rollTotal() jet 88}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 88}}
				{{#rollTotal() jet 99}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 99}}
			{{/rollBetween() jet 1 seuil}}
			{{#rollGreater() jet seuil}}
				{{#^rollTotal() jet 100}}
					{{#^rollTotal() jet 11}}
						{{#^rollTotal() jet 22}}
							{{#^rollTotal() jet 33}}
								{{#^rollTotal() jet 44}}
									{{#^rollTotal() jet 55}}
										{{#^rollTotal() jet 66}}
											{{#^rollTotal() jet 77}}
												{{#^rollTotal() jet 88}}
													{{#^rollTotal() jet 99}}
														<span class="fail">Échec</span>
													{{/^rollTotal() jet 99}}
												{{/^rollTotal() jet 88}}
											{{/^rollTotal() jet 77}}
										{{/^rollTotal() jet 66}}
									{{/^rollTotal() jet 55}}
								{{/^rollTotal() jet 44}}
							{{/^rollTotal() jet 33}}
						{{/^rollTotal() jet 22}}
					{{/^rollTotal() jet 11}}
				{{/^rollTotal() jet 100}}
				{{#rollTotal() jet 11}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 11}}
				{{#rollTotal() jet 22}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 22}}
				{{#rollTotal() jet 33}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 33}}
				{{#rollTotal() jet 44}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 44}}
				{{#rollTotal() jet 55}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 55}}
				{{#rollTotal() jet 66}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 66}}
				{{#rollTotal() jet 77}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 77}}
				{{#rollTotal() jet 88}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 88}}
				{{#rollTotal() jet 99}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 99}}
			{{/rollGreater() jet seuil}}
		{{/^rollTotal() jet 100}}
		{{#rollTotal() jet 100}}
			<span class="fail">Maladresse</span>
		{{/rollTotal() jet 100}}
	</div>
	<div>
		<span>Portée : </span><span>{{portee_sort}}</span>
		<span>Durée : </span><span>{{duree_sort}}</span>
		<span>{{descrip_sort}}</span>
	</div>
</rolltemplate><rolltemplate class="sheet-rolltemplate-invocation">
	<h1>{{name}}</h1>
	<div>
		<span>Invoque :</span>
		<span>{{nom_creature}}</span><span>({{degre}})</span>
	</div>
	<div>
		<span>Résultat</span>
		<span>{{jet}}</span><span>({{seuil}})</span>
		{{#^rollTotal() jet 100}}
			{{#rollBetween() jet 1 seuil}}
				{{#^rollTotal() jet 11}}
					{{#^rollTotal() jet 22}}
						{{#^rollTotal() jet 33}}
							{{#^rollTotal() jet 44}}
								{{#^rollTotal() jet 55}}
									{{#^rollTotal() jet 66}}
										{{#^rollTotal() jet 77}}
											{{#^rollTotal() jet 88}}
												{{#^rollTotal() jet 99}}
													<span class="success">Réussite</span>
												{{/^rollTotal() jet 99}}
											{{/^rollTotal() jet 88}}
										{{/^rollTotal() jet 77}}
									{{/^rollTotal() jet 66}}
								{{/^rollTotal() jet 55}}
							{{/^rollTotal() jet 44}}
						{{/^rollTotal() jet 33}}
					{{/^rollTotal() jet 22}}
				{{/^rollTotal() jet 11}}
				{{#rollTotal() jet 11}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 11}}
				{{#rollTotal() jet 22}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 22}}
				{{#rollTotal() jet 33}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 33}}
				{{#rollTotal() jet 44}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 44}}
				{{#rollTotal() jet 55}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 55}}
				{{#rollTotal() jet 66}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 66}}
				{{#rollTotal() jet 77}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 77}}
				{{#rollTotal() jet 88}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 88}}
				{{#rollTotal() jet 99}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 99}}
			{{/rollBetween() jet 1 seuil}}
			{{#rollGreater() jet seuil}}
				{{#^rollTotal() jet 100}}
					{{#^rollTotal() jet 11}}
						{{#^rollTotal() jet 22}}
							{{#^rollTotal() jet 33}}
								{{#^rollTotal() jet 44}}
									{{#^rollTotal() jet 55}}
										{{#^rollTotal() jet 66}}
											{{#^rollTotal() jet 77}}
												{{#^rollTotal() jet 88}}
													{{#^rollTotal() jet 99}}
														<span class="fail">Échec</span>
													{{/^rollTotal() jet 99}}
												{{/^rollTotal() jet 88}}
											{{/^rollTotal() jet 77}}
										{{/^rollTotal() jet 66}}
									{{/^rollTotal() jet 55}}
								{{/^rollTotal() jet 44}}
							{{/^rollTotal() jet 33}}
						{{/^rollTotal() jet 22}}
					{{/^rollTotal() jet 11}}
				{{/^rollTotal() jet 100}}
				{{#rollTotal() jet 11}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 11}}
				{{#rollTotal() jet 22}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 22}}
				{{#rollTotal() jet 33}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 33}}
				{{#rollTotal() jet 44}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 44}}
				{{#rollTotal() jet 55}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 55}}
				{{#rollTotal() jet 66}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 66}}
				{{#rollTotal() jet 77}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 77}}
				{{#rollTotal() jet 88}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 88}}
				{{#rollTotal() jet 99}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 99}}
			{{/rollGreater() jet seuil}}
		{{/^rollTotal() jet 100}}
		{{#rollTotal() jet 100}}
			<span class="fail">Maladresse</span>
		{{/rollTotal() jet 100}}
	</div>
	<div>
		{{^portee_sort}}<span>Portée : </span><span>{{portee_sort}}</span>{{/portee_sort}}
		{{^duree_sort}}<span>Durée : </span><span>{{duree_sort}}</span>{{/duree_sort}}
		<span>{{descrip_sort}}</span>
	</div>
</rolltemplate><rolltemplate class="sheet-rolltemplate-opposition">
	<h1>{{name}}</h1>
	<div>
		{{^entite}}
			<span>Vous nouez un pacte avec :</span>
		{{/entite}}
		{{#entite}}
			<span>Tente de contrôler :</span>
		{{/entite}}
		<span>{{creature}}</span>
	</div>
	<div>
		<div>
			<span>{{name}}</span>
			<span>{{jet}}</span>
			{{#rollBetween() jet 1 seuil}}
				{{#^rollTotal() jet 11}}
					{{#^rollTotal() jet 22}}
						{{#^rollTotal() jet 33}}
							{{#^rollTotal() jet 44}}
								{{#^rollTotal() jet 55}}
									{{#^rollTotal() jet 66}}
										{{#^rollTotal() jet 77}}
											{{#^rollTotal() jet 88}}
												{{#^rollTotal() jet 99}}
													<span class="success">Réussite</span>
												{{/^rollTotal() jet 99}}
											{{/^rollTotal() jet 88}}
										{{/^rollTotal() jet 77}}
									{{/^rollTotal() jet 66}}
								{{/^rollTotal() jet 55}}
							{{/^rollTotal() jet 44}}
						{{/^rollTotal() jet 33}}
					{{/^rollTotal() jet 22}}
				{{/^rollTotal() jet 11}}

				{{#rollTotal() jet 11}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 11}}
				{{#rollTotal() jet 22}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 22}}
				{{#rollTotal() jet 33}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 33}}
				{{#rollTotal() jet 44}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 44}}
				{{#rollTotal() jet 55}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 55}}
				{{#rollTotal() jet 66}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 66}}
				{{#rollTotal() jet 77}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 77}}
				{{#rollTotal() jet 88}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 88}}
				{{#rollTotal() jet 99}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 99}}
			{{/rollBetween() jet 1 seuil}}

			{{#rollGreater() jet seuil}}
				{{#^rollTotal() jet 100}}
					{{#^rollTotal() jet 11}}
						{{#^rollTotal() jet 22}}
							{{#^rollTotal() jet 33}}
								{{#^rollTotal() jet 44}}
									{{#^rollTotal() jet 55}}
										{{#^rollTotal() jet 66}}
											{{#^rollTotal() jet 77}}
												{{#^rollTotal() jet 88}}
													{{#^rollTotal() jet 99}}
														<span class="fail">Échec</span>
													{{/^rollTotal() jet 99}}
												{{/^rollTotal() jet 88}}
											{{/^rollTotal() jet 77}}
										{{/^rollTotal() jet 66}}
									{{/^rollTotal() jet 55}}
								{{/^rollTotal() jet 44}}
							{{/^rollTotal() jet 33}}
						{{/^rollTotal() jet 22}}
					{{/^rollTotal() jet 11}}
				{{/^rollTotal() jet 100}}
				{{#rollTotal() jet 11}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 11}}
				{{#rollTotal() jet 22}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 22}}
				{{#rollTotal() jet 33}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 33}}
				{{#rollTotal() jet 44}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 44}}
				{{#rollTotal() jet 55}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 55}}
				{{#rollTotal() jet 66}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 66}}
				{{#rollTotal() jet 77}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 77}}
				{{#rollTotal() jet 88}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 88}}
				{{#rollTotal() jet 99}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 99}}
			{{/rollGreater() jet seuil}}
			{{#rollTotal() jet 100}}
				<span class="fail">Maladresse</span>
			{{/rollTotal() jet 100}}
		</div>
		<span>vs</span>
		<div>
			<span>{{creature}}</span>
			<span>{{jet_creature}}</span>
			{{#rollBetween() jet_creature 1 degre}}
				{{#^rollTotal() jet_creature 11}}
					{{#^rollTotal() jet_creature 22}}
						{{#^rollTotal() jet_creature 33}}
							{{#^rollTotal() jet_creature 44}}
								{{#^rollTotal() jet_creature 55}}
									{{#^rollTotal() jet_creature 66}}
										{{#^rollTotal() jet_creature 77}}
											{{#^rollTotal() jet_creature 88}}
												{{#^rollTotal() jet_creature 99}}
													<span class="success">Réussite</span>
												{{/^rollTotal() jet_creature 99}}
											{{/^rollTotal() jet_creature 88}}
										{{/^rollTotal() jet_creature 77}}
									{{/^rollTotal() jet_creature 66}}
								{{/^rollTotal() jet_creature 55}}
							{{/^rollTotal() jet_creature 44}}
						{{/^rollTotal() jet_creature 33}}
					{{/^rollTotal() jet_creature 22}}
				{{/^rollTotal() jet_creature 11}}

				{{#rollTotal() jet_creature 11}}
					<span class="success">Critique</span>
				{{/rollTotal() jet_creature 11}}
				{{#rollTotal() jet_creature 22}}
					<span class="success">Critique</span>
				{{/rollTotal() jet_creature 22}}
				{{#rollTotal() jet_creature 33}}
					<span class="success">Critique</span>
				{{/rollTotal() jet_creature 33}}
				{{#rollTotal() jet_creature 44}}
					<span class="success">Critique</span>
				{{/rollTotal() jet_creature 44}}
				{{#rollTotal() jet_creature 55}}
					<span class="success">Critique</span>
				{{/rollTotal() jet_creature 55}}
				{{#rollTotal() jet_creature 66}}
					<span class="success">Critique</span>
				{{/rollTotal() jet_creature 66}}
				{{#rollTotal() jet_creature 77}}
					<span class="success">Critique</span>
				{{/rollTotal() jet_creature 77}}
				{{#rollTotal() jet_creature 88}}
					<span class="success">Critique</span>
				{{/rollTotal() jet_creature 88}}
				{{#rollTotal() jet_creature 99}}
					<span class="success">Critique</span>
				{{/rollTotal() jet_creature 99}}
			{{/rollBetween() jet_creature 1 degre}}

			{{#rollGreater() jet_creature degre}}
				{{#^rollTotal() jet_creature 100}}
					{{#^rollTotal() jet_creature 11}}
						{{#^rollTotal() jet_creature 22}}
							{{#^rollTotal() jet_creature 33}}
								{{#^rollTotal() jet_creature 44}}
									{{#^rollTotal() jet_creature 55}}
										{{#^rollTotal() jet_creature 66}}
											{{#^rollTotal() jet_creature 77}}
												{{#^rollTotal() jet_creature 88}}
													{{#^rollTotal() jet_creature 99}}
														<span class="fail">Échec</span>
													{{/^rollTotal() jet_creature 99}}
												{{/^rollTotal() jet_creature 88}}
											{{/^rollTotal() jet_creature 77}}
										{{/^rollTotal() jet_creature 66}}
									{{/^rollTotal() jet_creature 55}}
								{{/^rollTotal() jet_creature 44}}
							{{/^rollTotal() jet_creature 33}}
						{{/^rollTotal() jet_creature 22}}
					{{/^rollTotal() jet_creature 11}}
				{{/^rollTotal() jet_creature 100}}
				{{#rollTotal() jet_creature 11}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet_creature 11}}
				{{#rollTotal() jet_creature 22}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet_creature 22}}
				{{#rollTotal() jet_creature 33}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet_creature 33}}
				{{#rollTotal() jet_creature 44}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet_creature 44}}
				{{#rollTotal() jet_creature 55}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet_creature 55}}
				{{#rollTotal() jet_creature 66}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet_creature 66}}
				{{#rollTotal() jet_creature 77}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet_creature 77}}
				{{#rollTotal() jet_creature 88}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet_creature 88}}
				{{#rollTotal() jet_creature 99}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet_creature 99}}
			{{/rollGreater() jet_creature degre}}
			{{#rollTotal() jet_creature 100}}
				<span class="fail">Maladresse</span>
			{{/rollTotal() jet_creature 100}}
		</div>
		<div>
			<span>Vainqueur</span>
			{{#rollBetween() jet 1 seuil}}
				{{#^rollBetween() jet_creature 1 degre}}
					<span class="success">{{name}}</span>
				{{/^rollBetween() jet_creature 1 degre}}
				{{#rollBetween() jet_creature 1 degre}}
					{{#rollGreater() jet jet_creature}}
						{{#rollBetween() jet_creature 1 21}}
							{{#^rollTotal() jet_creature 11}}
								{{#^rollTotal() jet 11}}
									{{#^rollTotal() jet 22}}
										{{#^rollTotal() jet 33}}
											{{#^rollTotal() jet 44}}
												{{#^rollTotal() jet 55}}
													{{#^rollTotal() jet 66}}
														{{#^rollTotal() jet 77}}
															{{#^rollTotal() jet 88}}
																{{#^rollTotal() jet 99}}
																	<span class="success">{{name}}</span>
																{{/^rollTotal() jet 99}}
															{{/^rollTotal() jet 88}}
														{{/^rollTotal() jet 77}}
													{{/^rollTotal() jet 66}}
												{{/^rollTotal() jet 55}}
											{{/^rollTotal() jet 44}}
										{{/^rollTotal() jet 33}}
									{{/^rollTotal() jet 22}}
								{{/^rollTotal() jet 11}}
							{{/^rollTotal() jet_creature 11}}
						{{/rollBetween() jet_creature 1 21}}

						{{#rollBetween() jet_creature 22 32}}
							{{#^rollTotal() jet_creature 22}}
								{{#^rollTotal() jet 11}}
									{{#^rollTotal() jet 22}}
										{{#^rollTotal() jet 33}}
											{{#^rollTotal() jet 44}}
												{{#^rollTotal() jet 55}}
													{{#^rollTotal() jet 66}}
														{{#^rollTotal() jet 77}}
															{{#^rollTotal() jet 88}}
																{{#^rollTotal() jet 99}}
																	<span class="success">{{name}}</span>
																{{/^rollTotal() jet 99}}
															{{/^rollTotal() jet 88}}
														{{/^rollTotal() jet 77}}
													{{/^rollTotal() jet 66}}
												{{/^rollTotal() jet 55}}
											{{/^rollTotal() jet 44}}
										{{/^rollTotal() jet 33}}
									{{/^rollTotal() jet 22}}
								{{/^rollTotal() jet 11}}
							{{/^rollTotal() jet_creature 22}}
						{{/rollBetween() jet_creature 22 32}}

						{{#rollBetween() jet_creature 33 43}}
							{{#^rollTotal() jet_creature 33}}
								{{#^rollTotal() jet 11}}
									{{#^rollTotal() jet 22}}
										{{#^rollTotal() jet 33}}
											{{#^rollTotal() jet 44}}
												{{#^rollTotal() jet 55}}
													{{#^rollTotal() jet 66}}
														{{#^rollTotal() jet 77}}
															{{#^rollTotal() jet 88}}
																{{#^rollTotal() jet 99}}
																	<span class="success">{{name}}</span>
																{{/^rollTotal() jet 99}}
															{{/^rollTotal() jet 88}}
														{{/^rollTotal() jet 77}}
													{{/^rollTotal() jet 66}}
												{{/^rollTotal() jet 55}}
											{{/^rollTotal() jet 44}}
										{{/^rollTotal() jet 33}}
									{{/^rollTotal() jet 22}}
								{{/^rollTotal() jet 11}}
							{{/^rollTotal() jet_creature 33}}
						{{/rollBetween() jet_creature 33 43}}

						{{#rollBetween() jet_creature 44 54}}
							{{#^rollTotal() jet_creature 44}}
								{{#^rollTotal() jet 11}}
									{{#^rollTotal() jet 22}}
										{{#^rollTotal() jet 33}}
											{{#^rollTotal() jet 44}}
												{{#^rollTotal() jet 55}}
													{{#^rollTotal() jet 66}}
														{{#^rollTotal() jet 77}}
															{{#^rollTotal() jet 88}}
																{{#^rollTotal() jet 99}}
																	<span class="success">{{name}}</span>
																{{/^rollTotal() jet 99}}
															{{/^rollTotal() jet 88}}
														{{/^rollTotal() jet 77}}
													{{/^rollTotal() jet 66}}
												{{/^rollTotal() jet 55}}
											{{/^rollTotal() jet 44}}
										{{/^rollTotal() jet 33}}
									{{/^rollTotal() jet 22}}
								{{/^rollTotal() jet 11}}
							{{/^rollTotal() jet_creature 44}}
						{{/rollBetween() jet_creature 44 54}}

						{{#rollBetween() jet_creature 55 65}}
							{{#^rollTotal() jet_creature 55}}
								{{#^rollTotal() jet 11}}
									{{#^rollTotal() jet 22}}
										{{#^rollTotal() jet 33}}
											{{#^rollTotal() jet 44}}
												{{#^rollTotal() jet 55}}
													{{#^rollTotal() jet 66}}
														{{#^rollTotal() jet 77}}
															{{#^rollTotal() jet 88}}
																{{#^rollTotal() jet 99}}
																	<span class="success">{{name}}</span>
																{{/^rollTotal() jet 99}}
															{{/^rollTotal() jet 88}}
														{{/^rollTotal() jet 77}}
													{{/^rollTotal() jet 66}}
												{{/^rollTotal() jet 55}}
											{{/^rollTotal() jet 44}}
										{{/^rollTotal() jet 33}}
									{{/^rollTotal() jet 22}}
								{{/^rollTotal() jet 11}}
							{{/^rollTotal() jet_creature 55}}
						{{/rollBetween() jet_creature 55 65}}

						{{#rollBetween() jet_creature 66 76}}
							{{#^rollTotal() jet_creature 66}}
								{{#^rollTotal() jet 11}}
									{{#^rollTotal() jet 22}}
										{{#^rollTotal() jet 33}}
											{{#^rollTotal() jet 44}}
												{{#^rollTotal() jet 55}}
													{{#^rollTotal() jet 66}}
														{{#^rollTotal() jet 77}}
															{{#^rollTotal() jet 88}}
																{{#^rollTotal() jet 99}}
																	<span class="success">{{name}}</span>
																{{/^rollTotal() jet 99}}
															{{/^rollTotal() jet 88}}
														{{/^rollTotal() jet 77}}
													{{/^rollTotal() jet 66}}
												{{/^rollTotal() jet 55}}
											{{/^rollTotal() jet 44}}
										{{/^rollTotal() jet 33}}
									{{/^rollTotal() jet 22}}
								{{/^rollTotal() jet 11}}
							{{/^rollTotal() jet_creature 66}}
						{{/rollBetween() jet_creature 66 76}}

						{{#rollBetween() jet_creature 77 87}}
							{{#^rollTotal() jet_creature 77}}
								{{#^rollTotal() jet 11}}
									{{#^rollTotal() jet 22}}
										{{#^rollTotal() jet 33}}
											{{#^rollTotal() jet 44}}
												{{#^rollTotal() jet 55}}
													{{#^rollTotal() jet 66}}
														{{#^rollTotal() jet 77}}
															{{#^rollTotal() jet 88}}
																{{#^rollTotal() jet 99}}
																	<span class="success">{{name}}</span>
																{{/^rollTotal() jet 99}}
															{{/^rollTotal() jet 88}}
														{{/^rollTotal() jet 77}}
													{{/^rollTotal() jet 66}}
												{{/^rollTotal() jet 55}}
											{{/^rollTotal() jet 44}}
										{{/^rollTotal() jet 33}}
									{{/^rollTotal() jet 22}}
								{{/^rollTotal() jet 11}}
							{{/^rollTotal() jet_creature 77}}
						{{/rollBetween() jet_creature 77 87}}

						{{#rollBetween() jet_creature 88 98}}
							{{#^rollTotal() jet_creature 88}}
								{{#^rollTotal() jet 11}}
									{{#^rollTotal() jet 22}}
										{{#^rollTotal() jet 33}}
											{{#^rollTotal() jet 44}}
												{{#^rollTotal() jet 55}}
													{{#^rollTotal() jet 66}}
														{{#^rollTotal() jet 77}}
															{{#^rollTotal() jet 88}}
																{{#^rollTotal() jet 99}}
																	<span class="success">{{name}}</span>
																{{/^rollTotal() jet 99}}
															{{/^rollTotal() jet 88}}
														{{/^rollTotal() jet 77}}
													{{/^rollTotal() jet 66}}
												{{/^rollTotal() jet 55}}
											{{/^rollTotal() jet 44}}
										{{/^rollTotal() jet 33}}
									{{/^rollTotal() jet 22}}
								{{/^rollTotal() jet 11}}
							{{/^rollTotal() jet_creature 88}}
						{{/rollBetween() jet_creature 88 98}}
					{{/rollGreater() jet jet_creature}}

					{{#rollTotal() jet 11}}
						{{#^rollTotal() jet_creature 22}}
							{{#^rollTotal() jet_creature 33}}
								{{#^rollTotal() jet_creature 44}}
									{{#^rollTotal() jet_creature 55}}
										{{#^rollTotal() jet_creature 66}}
											{{#^rollTotal() jet_creature 77}}
												{{#^rollTotal() jet_creature 88}}
													{{#^rollTotal() jet_creature 99}}
														<span class="success">{{name}}</span>
													{{/^rollTotal() jet_creature 99}}
												{{/^rollTotal() jet_creature 88}}
											{{/^rollTotal() jet_creature 77}}
										{{/^rollTotal() jet_creature 66}}
									{{/^rollTotal() jet_creature 55}}
								{{/^rollTotal() jet_creature 44}}
							{{/^rollTotal() jet_creature 33}}
						{{/^rollTotal() jet_creature 22}}
					{{/rollTotal() jet 11}}

					{{#rollTotal() jet 22}}
						{{#^rollTotal() jet_creature 33}}
							{{#^rollTotal() jet_creature 44}}
								{{#^rollTotal() jet_creature 55}}
									{{#^rollTotal() jet_creature 66}}
										{{#^rollTotal() jet_creature 77}}
											{{#^rollTotal() jet_creature 88}}
												{{#^rollTotal() jet_creature 99}}
													<span class="success">{{name}}</span>
												{{/^rollTotal() jet_creature 99}}
											{{/^rollTotal() jet_creature 88}}
										{{/^rollTotal() jet_creature 77}}
									{{/^rollTotal() jet_creature 66}}
								{{/^rollTotal() jet_creature 55}}
							{{/^rollTotal() jet_creature 44}}
						{{/^rollTotal() jet_creature 33}}
					{{/rollTotal() jet 22}}

					{{#rollTotal() jet 33}}
						{{#^rollTotal() jet_creature 44}}
							{{#^rollTotal() jet_creature 55}}
								{{#^rollTotal() jet_creature 66}}
									{{#^rollTotal() jet_creature 77}}
										{{#^rollTotal() jet_creature 88}}
											{{#^rollTotal() jet_creature 99}}
												<span class="success">{{name}}</span>
											{{/^rollTotal() jet_creature 99}}
										{{/^rollTotal() jet_creature 88}}
									{{/^rollTotal() jet_creature 77}}
								{{/^rollTotal() jet_creature 66}}
							{{/^rollTotal() jet_creature 55}}
						{{/^rollTotal() jet_creature 44}}
					{{/rollTotal() jet 33}}

					{{#rollTotal() jet 44}}
						{{#^rollTotal() jet_creature 55}}
							{{#^rollTotal() jet_creature 66}}
								{{#^rollTotal() jet_creature 77}}
									{{#^rollTotal() jet_creature 88}}
										{{#^rollTotal() jet_creature 99}}
											<span class="success">{{name}}</span>
										{{/^rollTotal() jet_creature 99}}
									{{/^rollTotal() jet_creature 88}}
								{{/^rollTotal() jet_creature 77}}
							{{/^rollTotal() jet_creature 66}}
						{{/^rollTotal() jet_creature 55}}
					{{/rollTotal() jet 44}}

					{{#rollTotal() jet 55}}
						{{#^rollTotal() jet_creature 66}}
							{{#^rollTotal() jet_creature 77}}
								{{#^rollTotal() jet_creature 88}}
									{{#^rollTotal() jet_creature 99}}
										<span class="success">{{name}}</span>
									{{/^rollTotal() jet_creature 99}}
								{{/^rollTotal() jet_creature 88}}
							{{/^rollTotal() jet_creature 77}}
						{{/^rollTotal() jet_creature 66}}
					{{/rollTotal() jet 55}}

					{{#rollTotal() jet 66}}
						{{#^rollTotal() jet_creature 77}}
							{{#^rollTotal() jet_creature 88}}
								{{#^rollTotal() jet_creature 99}}
									<span class="success">{{name}}</span>
								{{/^rollTotal() jet_creature 99}}
							{{/^rollTotal() jet_creature 88}}
						{{/^rollTotal() jet_creature 77}}
					{{/rollTotal() jet 66}}

					{{#rollTotal() jet 77}}
						{{#^rollTotal() jet_creature 88}}
							{{#^rollTotal() jet_creature 99}}
								<span class="success">{{name}}</span>
							{{/^rollTotal() jet_creature 99}}
						{{/^rollTotal() jet_creature 88}}
					{{/rollTotal() jet 77}}

					{{#rollTotal() jet 88}}
						{{#^rollTotal() jet_creature 99}}
							<span class="success">{{name}}</span>
						{{/^rollTotal() jet_creature 99}}
					{{/rollTotal() jet 88}}

					{{#rollTotal() jet 99}}
							<span class="success">{{name}}</span>
					{{/rollTotal() jet 99}}
				{{/rollBetween() jet_creature 1 degre}}
			{{/rollBetween() jet 1 seuil}}

			{{#rollBetween() jet_creature 1 degre}}
				{{#^rollBetween() jet 1 seuil}}
					<span class="success">{{creature}}</span>
				{{/^rollBetween() jet 1 seuil}}
				{{#rollGreater() jet_creature jet}}
					{{#rollBetween() jet 1 21}}
						{{#^rollTotal() jet 11}}
							{{#^rollTotal() jet_creature 11}}
								{{#^rollTotal() jet_creature 22}}
									{{#^rollTotal() jet_creature 33}}
										{{#^rollTotal() jet_creature 44}}
											{{#^rollTotal() jet_creature 55}}
												{{#^rollTotal() jet_creature 66}}
													{{#^rollTotal() jet_creature 77}}
														{{#^rollTotal() jet_creature 88}}
															{{#^rollTotal() jet_creature 99}}
																<span class="success">{{creature}}</span>
															{{/^rollTotal() jet_creature 99}}
														{{/^rollTotal() jet_creature 88}}
													{{/^rollTotal() jet_creature 77}}
												{{/^rollTotal() jet_creature 66}}
											{{/^rollTotal() jet_creature 55}}
										{{/^rollTotal() jet_creature 44}}
									{{/^rollTotal() jet_creature 33}}
								{{/^rollTotal() jet_creature 22}}
							{{/^rollTotal() jet_creature 11}}
						{{/^rollTotal() jet 11}}
					{{/rollBetween() jet 1 21}}

					{{#rollBetween() jet 22 32}}
						{{#^rollTotal() jet 22}}
							{{#^rollTotal() jet_creature 11}}
								{{#^rollTotal() jet_creature 22}}
									{{#^rollTotal() jet_creature 33}}
										{{#^rollTotal() jet_creature 44}}
											{{#^rollTotal() jet_creature 55}}
												{{#^rollTotal() jet_creature 66}}
													{{#^rollTotal() jet_creature 77}}
														{{#^rollTotal() jet_creature 88}}
															{{#^rollTotal() jet_creature 99}}
																<span class="success">{{creature}}</span>
															{{/^rollTotal() jet_creature 99}}
														{{/^rollTotal() jet_creature 88}}
													{{/^rollTotal() jet_creature 77}}
												{{/^rollTotal() jet_creature 66}}
											{{/^rollTotal() jet_creature 55}}
										{{/^rollTotal() jet_creature 44}}
									{{/^rollTotal() jet_creature 33}}
								{{/^rollTotal() jet_creature 22}}
							{{/^rollTotal() jet_creature 11}}
						{{/^rollTotal() jet 22}}
					{{/rollBetween() jet 22 32}}

					{{#rollBetween() jet 33 43}}
						{{#^rollTotal() jet 33}}
							{{#^rollTotal() jet_creature 11}}
								{{#^rollTotal() jet_creature 22}}
									{{#^rollTotal() jet_creature 33}}
										{{#^rollTotal() jet_creature 44}}
											{{#^rollTotal() jet_creature 55}}
												{{#^rollTotal() jet_creature 66}}
													{{#^rollTotal() jet_creature 77}}
														{{#^rollTotal() jet_creature 88}}
															{{#^rollTotal() jet_creature 99}}
																<span class="success">{{creature}}</span>
															{{/^rollTotal() jet_creature 99}}
														{{/^rollTotal() jet_creature 88}}
													{{/^rollTotal() jet_creature 77}}
												{{/^rollTotal() jet_creature 66}}
											{{/^rollTotal() jet_creature 55}}
										{{/^rollTotal() jet_creature 44}}
									{{/^rollTotal() jet_creature 33}}
								{{/^rollTotal() jet_creature 22}}
							{{/^rollTotal() jet_creature 11}}
						{{/^rollTotal() jet 33}}
					{{/rollBetween() jet 33 43}}

					{{#rollBetween() jet 44 54}}
						{{#^rollTotal() jet 44}}
							{{#^rollTotal() jet_creature 11}}
								{{#^rollTotal() jet_creature 22}}
									{{#^rollTotal() jet_creature 33}}
										{{#^rollTotal() jet_creature 44}}
											{{#^rollTotal() jet_creature 55}}
												{{#^rollTotal() jet_creature 66}}
													{{#^rollTotal() jet_creature 77}}
														{{#^rollTotal() jet_creature 88}}
															{{#^rollTotal() jet_creature 99}}
																<span class="success">{{creature}}</span>
															{{/^rollTotal() jet_creature 99}}
														{{/^rollTotal() jet_creature 88}}
													{{/^rollTotal() jet_creature 77}}
												{{/^rollTotal() jet_creature 66}}
											{{/^rollTotal() jet_creature 55}}
										{{/^rollTotal() jet_creature 44}}
									{{/^rollTotal() jet_creature 33}}
								{{/^rollTotal() jet_creature 22}}
							{{/^rollTotal() jet_creature 11}}
						{{/^rollTotal() jet 44}}
					{{/rollBetween() jet 44 54}}

					{{#rollBetween() jet 55 65}}
						{{#^rollTotal() jet 55}}
							{{#^rollTotal() jet_creature 11}}
								{{#^rollTotal() jet_creature 22}}
									{{#^rollTotal() jet_creature 33}}
										{{#^rollTotal() jet_creature 44}}
											{{#^rollTotal() jet_creature 55}}
												{{#^rollTotal() jet_creature 66}}
													{{#^rollTotal() jet_creature 77}}
														{{#^rollTotal() jet_creature 88}}
															{{#^rollTotal() jet_creature 99}}
																<span class="success">{{creature}}</span>
															{{/^rollTotal() jet_creature 99}}
														{{/^rollTotal() jet_creature 88}}
													{{/^rollTotal() jet_creature 77}}
												{{/^rollTotal() jet_creature 66}}
											{{/^rollTotal() jet_creature 55}}
										{{/^rollTotal() jet_creature 44}}
									{{/^rollTotal() jet_creature 33}}
								{{/^rollTotal() jet_creature 22}}
							{{/^rollTotal() jet_creature 11}}
						{{/^rollTotal() jet 55}}
					{{/rollBetween() jet 55 65}}

					{{#rollBetween() jet 66 76}}
						{{#^rollTotal() jet 66}}
							{{#^rollTotal() jet_creature 11}}
								{{#^rollTotal() jet_creature 22}}
									{{#^rollTotal() jet_creature 33}}
										{{#^rollTotal() jet_creature 44}}
											{{#^rollTotal() jet_creature 55}}
												{{#^rollTotal() jet_creature 66}}
													{{#^rollTotal() jet_creature 77}}
														{{#^rollTotal() jet_creature 88}}
															{{#^rollTotal() jet_creature 99}}
																<span class="success">{{creature}}</span>
															{{/^rollTotal() jet_creature 99}}
														{{/^rollTotal() jet_creature 88}}
													{{/^rollTotal() jet_creature 77}}
												{{/^rollTotal() jet_creature 66}}
											{{/^rollTotal() jet_creature 55}}
										{{/^rollTotal() jet_creature 44}}
									{{/^rollTotal() jet_creature 33}}
								{{/^rollTotal() jet_creature 22}}
							{{/^rollTotal() jet_creature 11}}
						{{/^rollTotal() jet 66}}
					{{/rollBetween() jet 66 76}}

					{{#rollBetween() jet 77 87}}
						{{#^rollTotal() jet 77}}
							{{#^rollTotal() jet_creature 11}}
								{{#^rollTotal() jet_creature 22}}
									{{#^rollTotal() jet_creature 33}}
										{{#^rollTotal() jet_creature 44}}
											{{#^rollTotal() jet_creature 55}}
												{{#^rollTotal() jet_creature 66}}
													{{#^rollTotal() jet_creature 77}}
														{{#^rollTotal() jet_creature 88}}
															{{#^rollTotal() jet_creature 99}}
																<span class="success">{{creature}}</span>
															{{/^rollTotal() jet_creature 99}}
														{{/^rollTotal() jet_creature 88}}
													{{/^rollTotal() jet_creature 77}}
												{{/^rollTotal() jet_creature 66}}
											{{/^rollTotal() jet_creature 55}}
										{{/^rollTotal() jet_creature 44}}
									{{/^rollTotal() jet_creature 33}}
								{{/^rollTotal() jet_creature 22}}
							{{/^rollTotal() jet_creature 11}}
						{{/^rollTotal() jet 77}}
					{{/rollBetween() jet 77 87}}

					{{#rollBetween() jet 88 98}}
						{{#^rollTotal() jet 88}}
							{{#^rollTotal() jet_creature 11}}
								{{#^rollTotal() jet_creature 22}}
									{{#^rollTotal() jet_creature 33}}
										{{#^rollTotal() jet_creature 44}}
											{{#^rollTotal() jet_creature 55}}
												{{#^rollTotal() jet_creature 66}}
													{{#^rollTotal() jet_creature 77}}
														{{#^rollTotal() jet_creature 88}}
															{{#^rollTotal() jet_creature 99}}
																<span class="success">{{creature}}</span>
															{{/^rollTotal() jet_creature 99}}
														{{/^rollTotal() jet_creature 88}}
													{{/^rollTotal() jet_creature 77}}
												{{/^rollTotal() jet_creature 66}}
											{{/^rollTotal() jet_creature 55}}
										{{/^rollTotal() jet_creature 44}}
									{{/^rollTotal() jet_creature 33}}
								{{/^rollTotal() jet_creature 22}}
							{{/^rollTotal() jet_creature 11}}
						{{/^rollTotal() jet 88}}
					{{/rollBetween() jet 88 98}}
				{{/rollGreater() jet_creature jet}}

				{{#rollTotal() jet_creature 11}}
					{{#^rollTotal() jet 22}}
						{{#^rollTotal() jet 33}}
							{{#^rollTotal() jet 44}}
								{{#^rollTotal() jet 55}}
									{{#^rollTotal() jet 66}}
										{{#^rollTotal() jet 77}}
											{{#^rollTotal() jet 88}}
												{{#^rollTotal() jet 99}}
													<span class="success">{{creature}}</span>
												{{/^rollTotal() jet 99}}
											{{/^rollTotal() jet 88}}
										{{/^rollTotal() jet 77}}
									{{/^rollTotal() jet 66}}
								{{/^rollTotal() jet 55}}
							{{/^rollTotal() jet 44}}
						{{/^rollTotal() jet 33}}
					{{/^rollTotal() jet 22}}
				{{/rollTotal() jet_creature 11}}

				{{#rollTotal() jet_creature 22}}
					{{#^rollTotal() jet 33}}
						{{#^rollTotal() jet 44}}
							{{#^rollTotal() jet 55}}
								{{#^rollTotal() jet 66}}
									{{#^rollTotal() jet 77}}
										{{#^rollTotal() jet 88}}
											{{#^rollTotal() jet 99}}
												<span class="success">{{creature}}</span>
											{{/^rollTotal() jet 99}}
										{{/^rollTotal() jet 88}}
									{{/^rollTotal() jet 77}}
								{{/^rollTotal() jet 66}}
							{{/^rollTotal() jet 55}}
						{{/^rollTotal() jet 44}}
					{{/^rollTotal() jet 33}}
				{{/rollTotal() jet_creature 22}}

				{{#rollTotal() jet_creature 33}}
					{{#^rollTotal() jet 44}}
						{{#^rollTotal() jet 55}}
							{{#^rollTotal() jet 66}}
								{{#^rollTotal() jet 77}}
									{{#^rollTotal() jet 88}}
										{{#^rollTotal() jet 99}}
											<span class="success">{{creature}}</span>
										{{/^rollTotal() jet 99}}
									{{/^rollTotal() jet 88}}
								{{/^rollTotal() jet 77}}
							{{/^rollTotal() jet 66}}
						{{/^rollTotal() jet 55}}
					{{/^rollTotal() jet 44}}
				{{/rollTotal() jet_creature 33}}

				{{#rollTotal() jet_creature 44}}
					{{#^rollTotal() jet 55}}
						{{#^rollTotal() jet 66}}
							{{#^rollTotal() jet 77}}
								{{#^rollTotal() jet 88}}
									{{#^rollTotal() jet 99}}
										<span class="success">{{creature}}</span>
									{{/^rollTotal() jet 99}}
								{{/^rollTotal() jet 88}}
							{{/^rollTotal() jet 77}}
						{{/^rollTotal() jet 66}}
					{{/^rollTotal() jet 55}}
				{{/rollTotal() jet_creature 44}}

				{{#rollTotal() jet_creature 55}}
					{{#^rollTotal() jet 66}}
						{{#^rollTotal() jet 77}}
							{{#^rollTotal() jet 88}}
								{{#^rollTotal() jet 99}}
									<span class="success">{{creature}}</span>
								{{/^rollTotal() jet 99}}
							{{/^rollTotal() jet 88}}
						{{/^rollTotal() jet 77}}
					{{/^rollTotal() jet 66}}
				{{/rollTotal() jet_creature 55}}

				{{#rollTotal() jet_creature 66}}
					{{#^rollTotal() jet 77}}
						{{#^rollTotal() jet 88}}
							{{#^rollTotal() jet 99}}
								<span class="success">{{creature}}</span>
							{{/^rollTotal() jet 99}}
						{{/^rollTotal() jet 88}}
					{{/^rollTotal() jet 77}}
				{{/rollTotal() jet_creature 66}}

				{{#rollTotal() jet_creature 77}}
					{{#^rollTotal() jet 88}}
						{{#^rollTotal() jet 99}}
							<span class="success">{{creature}}</span>
						{{/^rollTotal() jet 99}}
					{{/^rollTotal() jet 88}}
				{{/rollTotal() jet_creature 77}}

				{{#rollTotal() jet_creature 88}}
					{{#^rollTotal() jet 99}}
						<span class="success">{{creature}}</span>
					{{/^rollTotal() jet 99}}
				{{/rollTotal() jet_creature 88}}

				{{#rollTotal() jet_creature 99}}
					<span class="success">{{creature}}</span>
				{{/rollTotal() jet_creature 99}}

			{{/rollBetween() jet_creature 1 degre}}
			{{#rollGreater() jet_creature degre}}
				{{#rollGreater() jet seuil}}
					<span class="fail">Aucun</span>
				{{/rollGreater() jet seuil}}
			{{/rollGreater() jet_creature degre}}
		</div>
	</div>
</rolltemplate><rolltemplate class="sheet-rolltemplate-formule">
	<h1>{{name}}</h1>
	<div>
		<span>Transmute la substance :</span>
		<span>{{nom_formule}}</span>
	</div>
	<div>
		<span>Résultat</span>
		<span>{{jet}}</span><span>({{seuil}})</span>
		{{#^rollTotal() jet 100}}
			{{#rollBetween() jet 1 seuil}}
				{{#^rollTotal() jet 11}}
					{{#^rollTotal() jet 22}}
						{{#^rollTotal() jet 33}}
							{{#^rollTotal() jet 44}}
								{{#^rollTotal() jet 55}}
									{{#^rollTotal() jet 66}}
										{{#^rollTotal() jet 77}}
											{{#^rollTotal() jet 88}}
												{{#^rollTotal() jet 99}}
													<span class="success">Réussite</span>
												{{/^rollTotal() jet 99}}
											{{/^rollTotal() jet 88}}
										{{/^rollTotal() jet 77}}
									{{/^rollTotal() jet 66}}
								{{/^rollTotal() jet 55}}
							{{/^rollTotal() jet 44}}
						{{/^rollTotal() jet 33}}
					{{/^rollTotal() jet 22}}
				{{/^rollTotal() jet 11}}
				{{#rollTotal() jet 11}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 11}}
				{{#rollTotal() jet 22}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 22}}
				{{#rollTotal() jet 33}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 33}}
				{{#rollTotal() jet 44}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 44}}
				{{#rollTotal() jet 55}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 55}}
				{{#rollTotal() jet 66}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 66}}
				{{#rollTotal() jet 77}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 77}}
				{{#rollTotal() jet 88}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 88}}
				{{#rollTotal() jet 99}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 99}}
			{{/rollBetween() jet 1 seuil}}
			{{#rollGreater() jet seuil}}
				{{#^rollTotal() jet 100}}
					{{#^rollTotal() jet 11}}
						{{#^rollTotal() jet 22}}
							{{#^rollTotal() jet 33}}
								{{#^rollTotal() jet 44}}
									{{#^rollTotal() jet 55}}
										{{#^rollTotal() jet 66}}
											{{#^rollTotal() jet 77}}
												{{#^rollTotal() jet 88}}
													{{#^rollTotal() jet 99}}
														<span class="fail">Échec</span>
													{{/^rollTotal() jet 99}}
												{{/^rollTotal() jet 88}}
											{{/^rollTotal() jet 77}}
										{{/^rollTotal() jet 66}}
									{{/^rollTotal() jet 55}}
								{{/^rollTotal() jet 44}}
							{{/^rollTotal() jet 33}}
						{{/^rollTotal() jet 22}}
					{{/^rollTotal() jet 11}}
				{{/^rollTotal() jet 100}}
				{{#rollTotal() jet 11}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 11}}
				{{#rollTotal() jet 22}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 22}}
				{{#rollTotal() jet 33}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 33}}
				{{#rollTotal() jet 44}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 44}}
				{{#rollTotal() jet 55}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 55}}
				{{#rollTotal() jet 66}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 66}}
				{{#rollTotal() jet 77}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 77}}
				{{#rollTotal() jet 88}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 88}}
				{{#rollTotal() jet 99}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 99}}
			{{/rollGreater() jet seuil}}
		{{/^rollTotal() jet 100}}
		{{#rollTotal() jet 100}}
			<span class="fail">Maladresse</span>
		{{/rollTotal() jet 100}}
	</div>
	<div>
		<span>Aire d'effet : </span><span>{{aire_formule}}</span>
		<span>Durée : </span><span>{{duree_formule}}</span>
		<span>Cela utilise <span>{{nb_materia}} Materia Primae</span> par élément </span>
		<span>{{description_formule}}</span>
	</div>
</rolltemplate><rolltemplate class="sheet-rolltemplate-initiative">
	<h1>{{name}}</h1>
	<div>
		<span>Initiative</span>
		<span>{{jet}}</span>
	</div>
</rolltemplate><rolltemplate class="sheet-rolltemplate-rite">
	<h1>{{name}}</h1>
	<div>
		<span>Exécute le rite :</span>
		<span>{{nom_rite}}</span>
	</div>
	<div>
		<span>Résultat</span>
		<span>{{jet}}</span><span>({{seuil}})</span>
		{{#^rollTotal() jet 100}}
			{{#rollBetween() jet 1 seuil}}
				{{#^rollTotal() jet 11}}
					{{#^rollTotal() jet 22}}
						{{#^rollTotal() jet 33}}
							{{#^rollTotal() jet 44}}
								{{#^rollTotal() jet 55}}
									{{#^rollTotal() jet 66}}
										{{#^rollTotal() jet 77}}
											{{#^rollTotal() jet 88}}
												{{#^rollTotal() jet 99}}
													<span class="success">Réussite</span>
												{{/^rollTotal() jet 99}}
											{{/^rollTotal() jet 88}}
										{{/^rollTotal() jet 77}}
									{{/^rollTotal() jet 66}}
								{{/^rollTotal() jet 55}}
							{{/^rollTotal() jet 44}}
						{{/^rollTotal() jet 33}}
					{{/^rollTotal() jet 22}}
				{{/^rollTotal() jet 11}}
				{{#rollTotal() jet 11}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 11}}
				{{#rollTotal() jet 22}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 22}}
				{{#rollTotal() jet 33}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 33}}
				{{#rollTotal() jet 44}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 44}}
				{{#rollTotal() jet 55}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 55}}
				{{#rollTotal() jet 66}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 66}}
				{{#rollTotal() jet 77}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 77}}
				{{#rollTotal() jet 88}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 88}}
				{{#rollTotal() jet 99}}
					<span class="success">Critique</span>
				{{/rollTotal() jet 99}}
			{{/rollBetween() jet 1 seuil}}
			{{#rollGreater() jet seuil}}
				{{#^rollTotal() jet 100}}
					{{#^rollTotal() jet 11}}
						{{#^rollTotal() jet 22}}
							{{#^rollTotal() jet 33}}
								{{#^rollTotal() jet 44}}
									{{#^rollTotal() jet 55}}
										{{#^rollTotal() jet 66}}
											{{#^rollTotal() jet 77}}
												{{#^rollTotal() jet 88}}
													{{#^rollTotal() jet 99}}
														<span class="fail">Échec</span>
													{{/^rollTotal() jet 99}}
												{{/^rollTotal() jet 88}}
											{{/^rollTotal() jet 77}}
										{{/^rollTotal() jet 66}}
									{{/^rollTotal() jet 55}}
								{{/^rollTotal() jet 44}}
							{{/^rollTotal() jet 33}}
						{{/^rollTotal() jet 22}}
					{{/^rollTotal() jet 11}}
				{{/^rollTotal() jet 100}}
				{{#rollTotal() jet 11}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 11}}
				{{#rollTotal() jet 22}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 22}}
				{{#rollTotal() jet 33}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 33}}
				{{#rollTotal() jet 44}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 44}}
				{{#rollTotal() jet 55}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 55}}
				{{#rollTotal() jet 66}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 66}}
				{{#rollTotal() jet 77}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 77}}
				{{#rollTotal() jet 88}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 88}}
				{{#rollTotal() jet 99}}
					<span class="fail">Maladresse</span>
				{{/rollTotal() jet 99}}
			{{/rollGreater() jet seuil}}
		{{/^rollTotal() jet 100}}
		{{#rollTotal() jet 100}}
			<span class="fail">Maladresse</span>
		{{/rollTotal() jet 100}}
	</div>
	<div>
		<span>Durée : </span><span>{{duree_sort}}</span>
		<span>{{descrip_sort}}</span>
	</div>
</rolltemplate>
</div>
<script type="text/worker">
  
on("sheet:opened change:degreMetamorphe change:KaDominant", function()
{
    getAttrs(["degreMetamorphe", "KaDominant"], function(values)
    {
        var KAD = values["KaDominant"];
        var degre = parseInt(values["degreMetamorphe"], 10)||0;

        if(KAD == "Feu")
        {
            setAttrs({
                KADFeu: degre,
                KADTerre: 0,
                KADAir: 0,
                KADLune: 0,
                KADEau: 0
            });
        }

        if(KAD == "Terre")
        {
            setAttrs({
                KADFeu: 0,
                KADTerre: degre,
                KADAir: 0,
                KADLune: 0,
                KADEau: 0
            });
        }

        if(KAD == "Air")
        {
            setAttrs({
                KADFeu: 0,
                KADTerre: 0,
                KADAir: degre,
                KADLune: 0,
                KADEau: 0
            });
        }

        if(KAD == "Lune")
        {
            setAttrs({
                KADFeu: 0,
                KADTerre: 0,
                KADAir: 0,
                KADLune: degre,
                KADEau: 0
            });
        }

        if(KAD == "Eau")
        {
            setAttrs({
                KADFeu: 0,
                KADTerre: 0,
                KADAir: 0,
                KADLune: 0,
                KADEau: degre
            });
        }
    });
});

on("sheet:opened", function() {
    getAttrs(["version"], function(value)
    {
        var version = value["version"];

        if(version < 2)
        {
            getSectionIDs("repeating_epoques-incarnation", function(idarray)
            {
                _.each(idarray,function(id)
                {
                    getAttrs(["repeating_epoques-incarnation_"+id+"_epoque", "repeating_epoques-incarnation_"+id+"_vecus-passe1", "repeating_epoques-incarnation_"+id+"_degres_vecu_passe1", "repeating_epoques-incarnation_"+id+"_vecus-passe2", "repeating_epoques-incarnation_"+id+"_degres_vecu_passe2"], function (v)
                    {
                        var epoque = v["repeating_epoques-incarnation_"+id+"_epoque"];
                        var vecus1 = v["repeating_epoques-incarnation_"+id+"_vecus-passe1"];
                        var vecus2 = v["repeating_epoques-incarnation_"+id+"_vecus-passe2"];
                        var vecusD1 = v["repeating_epoques-incarnation_"+id+"_degres_vecu_passe1"];
                        var vecusD2 = v["repeating_epoques-incarnation_"+id+"_degres_vecu_passe2"];

                        setAttrs({
                            ["repeating_epoques-incarnation_"+id+"_vecu"]: vecus1,
                            ["repeating_epoques-incarnation_"+id+"_degres_vecu_passe"]: vecusD1
                        });

                        console.log(epoque);
                        console.log(vecus1);
                        console.log(vecusD1);
                        console.log(vecus2);
                        console.log(vecusD2);

                        var newrowid = generateRowID();
                        var newrowattrs = {};
                        newrowattrs["repeating_epoques-incarnation_" + newrowid + "_epoque"] = epoque;
                        newrowattrs["repeating_epoques-incarnation_" + newrowid + "_vecu"] = vecus2;
                        newrowattrs["repeating_epoques-incarnation_" + newrowid + "_degres_vecu_passe"] = vecusD2;
                        setAttrs(newrowattrs);
                    });

                });
            });

            getSectionIDs("repeating_quetes-eso", function(idarray)
            {
                _.each(idarray,function(id)
                {
                    getAttrs(["repeating_quetes-eso_"+id+"_quete_eso"], function (v)
                    {
                        var quete = v["repeating_quetes-eso_"+id+"_quete_eso"];
                        var result;

                        if(quete == "0")
                            result = "";
                        else if(quete == "arcadia")
                            result = "Arcadia";
                        else if(quete == "arcane-xxi")
                            result = "Arcane XXI";
                        else if(quete == "arche-alliance")
                            result = "Arche d'Alliance";
                        else if(quete == "atalante-fugitive")
                            result = "Atalante Fugitive";
                        else if(quete == "champs-polemoka")
                            result = "Champ Polemoka fugitive";
                        else if(quete == "cite-vertiges")
                            result = "Cité des Vertiges";
                        else if(quete == "exode-sideral")
                            result = "Exode sidéral";
                        else if(quete == "hyperborée")
                            result = "Hyperborée";
                        else if(quete == "jerusalem-celest")
                            result = "Jérusalem Céleste";
                        else if(quete == "sentier-or")
                            result = "Le Sentier d'Or";
                        else if(quete == "porte-noire")
                            result = "Porte Noire";
                        else if(quete == "graal")
                            result = "Quête du Graal";
                        else if(quete == "rex-mundi")
                            result = "Rex Mundi";
                        else if(quete == "table-emeraude")
                            result = "Table d'Émeraude";
                        else if(quete == "toison-or")
                            result = "Toison d'Or";
                        else if(quete == "tresor-templiers")
                            result = "Trésor des Templiers";

                        setAttrs({
                            ["repeating_quetes-eso_"+id+"_quete_eso"]: result
                        });
                    });

                });
            });

            getSectionIDs("repeating_savoir-eso", function(idarray)
            {
                _.each(idarray,function(id)
                {
                    getAttrs(["repeating_savoir-eso_"+id+"_savoir_eso"], function (v)
                    {
                        var savoir = v["repeating_savoir-eso_"+id+"_savoir_eso"];
                        var result;

                        if(savoir == "0")
                            result = "";
                        else if(savoir == "666")
                            result = "666";
                        else if(savoir == "akasha")
                            result = "Akasha";
                        else if(savoir == "ar-kaim")
                            result = "Ar-Kaim";
                        else if(savoir == "arcanes-majeur")
                            result = "Arcanes Majeurs";
                        else if(savoir == "bohemiens")
                            result = "Bohémiens";
                        else if(savoir == "champs-magiques")
                            result = "Champs Magiques";
                        else if(savoir == "cousins")
                            result = "Cousins";
                        else if(savoir == "drakaon")
                            result = "Drakaon";
                        else if(savoir == "effets-dragons")
                            result = "Effets-Dragons";
                        else if(savoir == "histoire-invisible")
                            result = "Histoire Invisible";
                        else if(savoir == "kaim")
                            result = "Kaim";
                        else if(savoir == "lune-noire")
                            result = "Lune Noire";
                        else if(savoir == "mystères")
                            result = "Mystères";
                        else if(savoir == "nephilim")
                            result = "Nephilim";
                        else if(savoir == "orichalque")
                            result = "Orichalque";
                        else if(savoir == "révélation")
                            result = "Révélation";
                        else if(savoir == "rose-croix")
                            result = "Rose+Croix";
                        else if(savoir == "sciences-occultes")
                            result = "Sciences Occultes";
                        else if(savoir == "selenim")
                            result = "Selenim";
                        else if(savoir == "synarchie")
                            result = "Synarchie";
                        else if(savoir == "templiers")
                            result = "Templiers";

                        setAttrs({
                            ["repeating_savoir-eso_"+id+"_savoir_eso"]: result
                        });
                    });

                });
            });

            setAttrs({
                ["version"]: "2"
            });
        }
    });
});

on("change:kafeu change:kalune sheet:opened", function()
{
    getAttrs([
    "kafeu", "kalune"
    ], function(values)
    {

        var kaFeu = parseInt(values["kafeu"], 10)||0;
        var kaLune = parseInt(values["kalune"], 10)||0;
        var bonusDom = 0;
        var voile = 0;

        if(kaFeu >= 5 && kaFeu < 10)
            bonusDom = 1;
        else if(kaFeu >= 10)
            bonusDom = 2;

        if(kaLune >= 5 && kaLune < 10)
            voile = 1;
        else if(kaLune >= 10)
            voile = 2;


        setAttrs({
            ["bonus-dom"]: bonusDom,
            ["voile"]: voile
        });
    });
});

on("change:cons-min change:cons-ser change:cons-gra change:cons-mag-min change:cons-mag-ser change:cons-mag-gra sheet:opened", function()
{
    getAttrs([
    "cons-min", "cons-ser", "cons-gra",
    "cons-mag-min", "cons-mag-ser", "cons-mag-gra"
    ], function(values)
    {
        const phyM = values["cons-min"];
        const phyS = values["cons-ser"];
        const phyG = values["cons-gra"];

        const magM = values["cons-mag-min"];
        const magS = values["cons-mag-ser"];
        const magG = values["cons-mag-gra"];

        var totalPhy = 0;
        var totalMag = 0;

        if(phyM == "on")
            totalPhy += 2;
        if(phyS == "on")
            totalPhy += 4;
        if(phyG == "on")
            totalPhy += 6;

        if(magM == "on")
            totalMag += 2;
        if(magS == "on")
            totalMag += 4;
        if(magG == "on")
            totalMag += 6;

        setAttrs({
            ["malusMag"]: totalMag,
            ["malusPhy"]: totalPhy
        });
    });
});
on("change:repeating_mag-sort:mag-sort-ka change:repeating_mag-sort:mag-sort-degre change:repeating_mag-sort:mag-sort-cercle change:kaeau change:kafeu change:katerre change:kaair change:kalune change:mag-basse-degre change:mag-haute-degre change:mag-secret-degre change:KADFeu change:KADEau change:KADTerre change:KADAir change:KADLune change:malusMag sheet:opened", function()
{
    getSectionIDs("repeating_mag-sort", function(idarray)
    {
        _.each(idarray,function(id)
        {
            getAttrs([
            "repeating_mag-sort_"+id+"_mag-sort-ka", "repeating_mag-sort_"+id+"_mag-sort-degre", "repeating_mag-sort_"+id+"_mag-sort-cercle",
            "kaeau", "kafeu", "katerre", "kaair", "kalune", "KADFeu", "KADEau", "KADTerre", "KADAir", "KADLune",
            "mag-basse-degre", "mag-haute-degre", "mag-secret-degre", "malusMag"
            ], function(values) {

                var KADF = parseInt(values["KADFeu"], 10)||0;
                var KADE = parseInt(values["KADEau"], 10)||0;
                var KADT = parseInt(values["KADTerre"], 10)||0;
                var KADA = parseInt(values["KADAir"], 10)||0;
                var KADL = parseInt(values["KADLune"], 10)||0;

                var malusMag = parseInt(values["malusMag"], 10)||0;

                var ka_element = values["repeating_mag-sort_"+id+"_mag-sort-ka"];
                var ka_element_value = parseInt(values[ka_element], 10)||0;

                var mag_voie = values["repeating_mag-sort_"+id+"_mag-sort-cercle"];
                var mag_voie_value = parseInt(values[mag_voie], 10)||0;

                var degre = parseInt(values["repeating_mag-sort_"+id+"_mag-sort-degre"], 10)||0;

                var metamorphose = 0;

                if(ka_element == "kaair")
                    metamorphose = KADA;

                if(ka_element == "kafeu")
                    metamorphose = KADF;

                if(ka_element == "kaeau")
                    metamorphose = KADE;

                if(ka_element == "katerre")
                    metamorphose = KADT;

                if(ka_element == "kalune")
                    metamorphose = KADL;

                var total = (ka_element_value + mag_voie_value + metamorphose - malusMag) - degre;

                setAttrs({
                    ["repeating_mag-sort_"+id+"_mag-sort-current"]: total
                });
            });
        });
    });

});

on("change:repeating_kabb-invoc:kabb-invoc-ka change:repeating_kabb-invoc:kabb-invoc-sephira change:kaeau change:kafeu change:katerre change:kaair change:kalune change:malkut change:yesod change:hod change:netzah change:tiphereth change:chesed change:geburah change:binah change:hokmah change:kheter change:ordonnanceBonus change:KADFeu change:KADEau change:KADTerre change:KADAir change:KADLune change:malusMag sheet:opened", function()
{
    getSectionIDs("repeating_kabb-invoc", function(idarray)
    {
        console.log("Metamorphose");
        _.each(idarray,function(id)
        {
            getAttrs([
            "repeating_kabb-invoc_"+id+"_kabb-invoc-ka", "repeating_kabb-invoc_"+id+"_kabb-invoc-sephira",
            "kaeau", "kafeu", "katerre", "kaair", "kalune", "KADFeu", "KADEau", "KADTerre", "KADAir", "KADLune",
            "malkut", "yesod", "hod", "netzah", "tiphereth", "chesed", "geburah", "binah", "hokmah", "kheter", "ordonnanceBonus", "malusMag"
            ], function(values) {

                var KADF = parseInt(values["KADFeu"], 10)||0;
                var KADE = parseInt(values["KADEau"], 10)||0;
                var KADT = parseInt(values["KADTerre"], 10)||0;
                var KADA = parseInt(values["KADAir"], 10)||0;
                var KADL = parseInt(values["KADLune"], 10)||0;

                var malusMag = parseInt(values["malusMag"], 10)||0;

                var ka_element = values["repeating_kabb-invoc_"+id+"_kabb-invoc-ka"];
                var ka_element_value = parseInt(values[ka_element], 10)||0;

                var kabb_sephira = values["repeating_kabb-invoc_"+id+"_kabb-invoc-sephira"];
                var kabb_sephira_value = parseInt(values[kabb_sephira], 10)||0;

                var ordonnance = parseInt(values["ordonnanceBonus"], 10)||0;

                var metamorphose = 0;

                if(ka_element == "kaair")
                    metamorphose = KADA;

                if(ka_element == "kafeu")
                    metamorphose = KADF;

                if(ka_element == "kaeau")
                    metamorphose = KADE;

                if(ka_element == "katerre")
                    metamorphose = KADT;

                if(ka_element == "kalune")
                    metamorphose = KADL;

                console.log("Metamorphose : "+metamorphose);

                var total = (ka_element_value + kabb_sephira_value + ordonnance + metamorphose - malusMag);

                setAttrs({
                    ["repeating_kabb-invoc_"+id+"_kabb-invoc-current"]: total
                });
            });
        });
    });
});

on("change:repeating_alch-form:alch-form-art change:repeating_alch-form:alch-form-ka-1 change:repeating_alch-form:alch-form-ka-2 change:repeating_alch-form:alch-form-subs change:repeating_alch-form:alch-form-degre change:repeating_alch-form:alch-oeuvre-noir change:repeating_alch-form:alch-oeuvre-blanc change:repeating_alch-form:alch-oeuvre-rouge change:kaeau change:kafeu change:katerre change:kaair change:kalune change:alch-athanor-kafeu change:alch-athanor-kaeau change:alch-athanor-katerre change:alch-athanor-kalune change:alch-athanor-kaair change:alch-aludel-kafeu change:alch-aludel-kaeau change:alch-aludel-katerre change:alch-aludel-kalune change:alch-aludel-kaair change:alch-alambic-kafeu change:alch-alambic-kaeau change:alch-alambic-katerre change:alch-alambic-kalune change:alch-alambic-kaair change:alch-cornue-kafeu change:alch-cornue-kaeau change:alch-cornue-katerre change:alch-cornue-kalune change:alch-cornue-kaair change:alch-creuset-kafeu change:alch-creuset-kaeau change:alch-creuset-katerre change:alch-creuset-kalune change:alch-creuset-kaair change:alch-oeuvre-noir change:alch-oeuvre-blanc change:alch-oeuvre-rouge sheet:opened", function()
{
    getSectionIDs("repeating_alch-form", function(idarray)
    {
        _.each(idarray,function(id)
        {
            getAttrs([
            "repeating_alch-form_"+id+"_alch-form-art", "repeating_alch-form_"+id+"_alch-form-ka-1", "repeating_alch-form_"+id+"_alch-form-ka-2", "repeating_alch-form_"+id+"_alch-form-subs", "repeating_alch-form_"+id+"_alch-form-degre",
            "kaeau", "kafeu", "katerre", "kaair", "kalune",
            "alch-oeuvre-noir", "alch-oeuvre-blanc", "alch-oeuvre-rouge",
            "alch-athanor-kafeu", "alch-athanor-kaeau", "alch-athanor-katerre", "alch-athanor-kalune", "alch-athanor-kaair",
            "alch-aludel-kafeu", "alch-aludel-kaeau", "alch-aludel-katerre", "alch-aludel-kalune", "alch-aludel-kaair",
            "alch-alambic-kafeu", "alch-alambic-kaeau", "alch-alambic-katerre", "alch-alambic-kalune", "alch-alambic-kaair",
            "alch-cornue-kafeu", "alch-cornue-kaeau", "alch-cornue-katerre", "alch-cornue-kalune", "alch-cornue-kaair",
            "alch-creuset-kafeu", "alch-creuset-kaeau", "alch-creuset-katerre", "alch-creuset-kalune", "alch-creuset-kaair"
            ], function(values)
            {

                // On récupère la valeur de la substance qui correspondt à l'id du construct
                var construct = values["repeating_alch-form_"+id+"_alch-form-subs"];
                var ka_element1 = values["repeating_alch-form_"+id+"_alch-form-ka-1"];
                var ka_element2 = values["repeating_alch-form_"+id+"_alch-form-ka-2"];

                // On construit l'id du ka concerné du construct sous la forme : "contruct-kaelement". Cela permet de récupérer la bonne valeur
                var ka_element_value1 = parseInt(values[construct + "-" + ka_element1], 10)||0;
                var ka_element_value2 = parseInt(values[construct + "-" + ka_element2], 10)||0;

                var alch_oeuvre = values["repeating_alch-form_"+id+"_alch-form-art"];
                var alch_oeuvre_value = parseInt(values[alch_oeuvre], 10)||0;
                var degre = parseInt(values["repeating_alch-form_"+id+"_alch-form-degre"], 10)||0;

                var totalKa = 0;

                if(alch_oeuvre == "alch-oeuvre-blanc")
                {
                    if(ka_element1 != "0" && ka_element2 != "0")
                        totalKa = Math.min(ka_element_value1, ka_element_value2);
                    else if(ka_element1 == "0" && ka_element2 != "0")
                        totalKa = ka_element_value2;
                    else if(ka_element1 != "0" && ka_element2 == "0")
                        totalKa = ka_element_value1;
                }
                else
                    totalKa = ka_element_value1 + ka_element_value2;

                var total = (totalKa + alch_oeuvre_value) - degre;

                setAttrs({
                    ["repeating_alch-form_"+id+"_alch-form-current"]: total
                });


            });
        });
    });
});

on("remove:repeating_kabb-ord change:repeating_kabb-ord change:repeating_kabb-ord:kabb-ord-respect sheet:opened", function()
{

    var total = 0;

    setAttrs({
        ordonnanceBonus: 0
    });

    getSectionIDs("repeating_kabb-ord", function(idarray)
    {
        _.each(idarray,function(id)
        {
            getAttrs([
            "repeating_kabb-ord_"+id+"_kabb-ord-respect"
            ], function(values)
            {
                var ordonnanceR = values["repeating_kabb-ord_"+id+"_kabb-ord-respect"];

                if(ordonnanceR != "on")
                    total += 1;

                setAttrs({
                    ordonnanceBonus: total
                });
            });
        });
    });


});

on("sheet:opened change:repeating_savoir-eso", function()
{
    getSectionIDs("repeating_savoir-eso", function(idarray)
    {
        _.each(idarray,function(id)
        {
            getAttrs([
            "repeating_savoir-eso_"+id+"_savoir_eso"
            ], function(values)
            {
                const savoir = values["repeating_savoir-eso_"+id+"_savoir_eso"];
                var result = "";

                if(savoir == "0")
                    result = "";
                else
                    result = savoir;

                console.log(result);

                setAttrs({
                    ["repeating_savoir-eso_"+id+"_savoir_eso_perso"]: result
                });
            });
        });
    });
});

on("sheet:opened change:repeating_quetes-eso", function()
{
    getSectionIDs("repeating_quetes-eso", function(idarray)
    {
        _.each(idarray,function(id)
        {
            getAttrs([
            "repeating_quetes-eso_"+id+"_quete_eso"
            ], function(values)
            {
                const quete = values["repeating_quetes-eso_"+id+"_quete_eso"];
                var result = "";

                if(quete == "0")
                    result = "";
                else
                    result = quete;

                console.log(result);

                setAttrs({
                    ["repeating_quetes-eso_"+id+"_quete_eso_perso"]: result
                });
            });
        });
    });
});

on("sheet:opened change:repeating_metamorphose remove:repeating_metamorphose", function()
{
    getSectionIDs("repeating_metamorphose", function(idarray)
    {
        var length = idarray.length;

        getAttrs([
        "degreMetamorphe"
        ], function(values)
        {
            const meta = values["degreMetamorphe"];
            if(meta > length)
            {
                setAttrs({
                    dMeta: length,
                    degreMetamorphe:0
                });
            }

            setAttrs({
                dMeta: length
            });

            console.log("Meta : "+meta);
        });
    });
});

on("change:mag-secret-degre sheet:opened", function()
{
    getAttrs(["mag-secret-degre"], function(values) {
        let degre = parseInt(values["mag-secret-degre"],10)||0;
        let allowedLinks = 0;
        switch (degre) {
            case 2: allowedLinks = 4; break;
            case 3: allowedLinks = 5; break;
            case 4: allowedLinks = 6; break;
            case 5: allowedLinks = 8; break;
            case 6: allowedLinks = 10; break;
            case 7: allowedLinks = 12; break;
            case 8: allowedLinks = 14; break;
            case 9: allowedLinks = 16; break;
            case 10: allowedLinks = 20; break;
            default: allowedLinks = 0;
        }
        setAttrs({
            magSecretAllowedLinks: allowedLinks
        });
    });
});

on("change:repeating_maillon remove:repeating_maillon sheet:opened", function()
{
    getSectionIDs("repeating_maillon", function(idarray) {
        setAttrs({
            magSecretCurrentLinks: idarray.length
        })
    });
});

on("change:repeating_epoques-incarnation:use_mnemos1 change:repeating_epoques-incarnation:use_mnemos2 sheet:opened", function(data)
{
    console.log("Dés-activer le Mnemos")
    getSectionIDs("repeating_epoques-incarnation", function(idarray) {
        _.each(idarray, function(id) {
            getAttrs(["repeating_epoques-incarnation_"+id+"_use_mnemos1", "repeating_epoques-incarnation_"+id+"_use_mnemos2"], function(values) {
                console.log("Je suis dans la boucle !");
                let useMnemos1 = values["repeating_epoques-incarnation_"+id+"_use_mnemos1"] == 'on';
                let useMnemos2 = values["repeating_epoques-incarnation_"+id+"_use_mnemos2"] == 'on'
                console.log("Mémos 1 " + useMnemos1 + "; Mnémos 2 " + useMnemos2);

                let effectiveMnemos = "";
                effectiveMnemos += useMnemos1 ? "@{degres_mnemos1}+" : "0+";
                effectiveMnemos += useMnemos2 ? "@{degres_mnemos2}" : "0";
                console.log("Effective mnemos: " + effectiveMnemos);

                let effectiveRoll = "@{gm} &{template:base} {{name=@{character_name}}} {{vecu=@{vecu}}} {{jet=[[1d100]]}} @{approche}"
                if (useMnemos1) {
                    effectiveRoll += " {{mnemos1=@{mnemos1}}}";
                }
                if (useMnemos2) {
                    effectiveRoll += " {{mnemos2=@{mnemos2}}}";
                }
                console.log("Effective roll: " + effectiveRoll);

                setAttrs({
                    ["repeating_epoques-incarnation_"+id+"_effectiveMnemos"]: effectiveMnemos,
                    ["repeating_epoques-incarnation_"+id+"_effectiveRoll"]: effectiveRoll
                });
            });
        });
    });
});
</script>
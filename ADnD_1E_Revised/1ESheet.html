<input type="hidden" name="attr_old_character" value="0"> <input type="checkbox" name="attr_background" value="1" class="background-selection hidden" checked="checked"> <input type="checkbox" name="attr_background" value="2" class="background-selection hidden"> <input type="checkbox" name="attr_background" value="3" class="background-selection hidden"> <input type="checkbox" name="attr_background" value="4" class="background-selection hidden"> <input type="checkbox" name="attr_background" value="5" class="background-selection hidden"> <input type="checkbox" name="attr_background" value="6" class="background-selection hidden"> <input type="checkbox" name="attr_background" value="7" class="background-selection hidden"> <input type="hidden" name="attr_is_npc" value="0" class="is-npc"> <input type="hidden" name="attr_toggle_npc" value="0" class="toggle-npc"> <input type="checkbox" name="attr_toggle_costs" value="1" class="toggle-costs hidden"> <input type="checkbox" name="attr_toggle_caster2" value="1" class="toggle-caster2 hidden" checked="checked"> <input type="checkbox" name="attr_toggle_thief_skills" value="1" class="toggle-thief-skills hidden" checked="checked"> <input type="checkbox" name="attr_toggle_spells" value="1" class="toggle-spells hidden"> <input type="checkbox" name="attr_toggle_nwp" value="1" class="toggle-nwp hidden" checked="checked"> <input type="checkbox" name="attr_toggle_exceptional" value="1" class="toggle-exceptional hidden" checked="checked"> <input type="checkbox" name="attr_toggle_comeliness" value="1" class="toggle-comeliness hidden" checked="checked"> <input type="checkbox" name="attr_toggle_multiclass" value="1" class="toggle-multiclass hidden" checked="checked"> <input type="checkbox" name="attr_toggle_psionics" value="1" class="toggle-psionics hidden" checked="checked"> <input type="checkbox" name="attr_toggle_macros" value="1" class="toggle-macros hidden" checked="checked"> <input type="checkbox" name="attr_toggle_single_column_attributes" class="toggle-single-column-attributes hidden" value="1" checked="checked"> <input type="checkbox" name="attr_toggle_single_column_abilities" class="toggle-single-column-abilities hidden" value="1" checked="checked"> <input type="checkbox" name="attr_toggle_single_column_notes" class="toggle-single-column-notes hidden" value="1" checked="checked"> <input type="checkbox" name="attr_toggle_single_column_spells" class="toggle-single-column-spells hidden" value="1" checked="checked"> <input type="checkbox" name="attr_toggle_critdamage" class="toggle-critdamage hidden" value="1"> <input type="checkbox" name="attr_toggle_lbs" class="toggle-lbs hidden" value="1"><div class="background"><div class="wrapper"><section class="top-header"><section class="npc-toggle npc-tabs"><input type="radio" name="attr_toggle_npc" value="0" class="toggle-npc tab-hidden tab" title="Player Character" checked="checked"><span class="tab"></span> <input type="radio" name="attr_toggle_npc" value="1" class="toggle-npc tab-hidden tab" title="Non-Player Character/Monster"><span class="tab">Monster</span> <input type="radio" name="attr_toggle_npc" value="99" class="toggle-npc tab-hidden tab" title="Sheet Settings"><span class="material-icons custom-btn-nav"></span></section><section class="announcements-box"><div class="sheet-type text-small"><span class="friend-foe"><span class="inline-label" title="@{is_foe} | Indicates that the sheet is either a friend or foe. This option is purely visual and has no impact on the sheet."><input type="radio" class="width-smallest is-friend" name="attr_is_foe" value="0"><span></span> <input type="radio" class="width-smallest is-foe" name="attr_is_foe" value="1" checked="checked"><span></span> </span></span><span class="pc-npc"><span class="inline-label" title="@{is_npc} | Indicates that the sheet is either a PC or NPC/Monster. Choosing NPC/Monster will reveal an additional NPC/Monster page."><input type="radio" class="width-smallest is-pc" name="attr_is_npc" value="0" checked="checked"><span></span> <input type="radio" class="width-smallest is-npc" name="attr_is_npc" value="1"><span></span></span></span></div><input type="checkbox" class="sect-show" name="attr_toggle_announcements" value="1" title="Open to read about important sheet changes." checked="checked"> <span class="header announcements-title">i</span><span class="material-icons"></span><div class="sect announcements"><input type="checkbox" class="sect-show" name="attr_toggle_announcements" value="1" title="Open to read about important sheet changes." checked="checked"><span class="material-icons"></span><h4>Important Sheet Announcements</h4><h5 class="right two-columns span-all"><span class="left"><span>v<span name="attr_sheet_version"> </span><span class="right">â€¢ 2/18/26'</span></span></span></h5><ul><h5>Latest</h5><li>Added a print option to the sheet. Adjusting sub-sections, resizing text boxes, etc. as needed will help produce a better end-result. I have hidden elements that would only apply to the VTT as well as other adjustments to help the sheet be "print-friendly". Click the printer icon at the top left corner of the character journal to preview. Ensure to toggle "background graphics" from the advanced print settings to see how it effects the preview.</li><li>Updated how the to-Hit and weapon vs armor type table data is posted with attacks.</li><li>Added an "Ask" option to the sheet whisper settings. Rolls will include a query to whisper the roll or not when choosing the "Ask" option. DM sees all...</li><li>Manually changing "Current Encumbrance" in the Carrying Capacity section will also adjust movement "Speed" accordingly. Further adjusting any item weight or reloading the sheet will recalc and undo any temp encumbrance and speed changes. Similarly, you may also override adjusted speed temporarily.</li><li>Sync is now enabled by default for HP max and AC. These options can still be changed per-sheet an/or per-game by the game's creator using the game's default sheet settings. This update only effects new sheets going forward.</li><li>Updated Total HP(ie HP max) calcs for multi-class characters. "HP Total" will show HP as a decimal if multi-classing, and will round up for any partial/fractional HP that is >= 0.5 The "Partial HP" field has now been hidden but will still include any fractional HP. ie @{hitpoints_remainder_total}</li><li>Small adjustments on the NPC/Monster page to prevent overflowing elements at small window sizes.</li><li>Refactoring done for the majority of sheetworkers. Converted the callback-based Roll20 functions to async/await versions.</li><li>Some refactoring done in the sheetworker that keeps Armor Details and repeating_equipment Armor in sync. Includes a one-time update to check and set 'repeating_equipment_$X_equipment_sync_armor_flag' attribute.</li><li>Added a "lock" icon next to the armor type dropdown selector in the equipment armor sub-section. This is just a visual indicator if the item is currently synced with an Armor Details row.</li><li>Hiding Multi-Class fields has been set as the default for new sheets. These options can still be changed per-sheet or per-game by the game creator using the game's default sheet settings. This update only effects new sheets going forward.</li><li>Updated the Pick Pockets roll to not require a selected token.</li><br><h5>Recent/Previous</h5><li>Fixed a glitch introduced in the last update with the Equipment sorting buttons displaying askew when viewed in FF.</li><li>Added title text to Armor Details item name that gives some explanation on how Armor Details and Equipment|Armor interact.</li><li>Fixed armor row columns display/alignment if armor is marked as "magical" and Equipment tab was filtered to show "Magic" items only.</li><li>Adding a new equipment item will check the current Equipment tab and set the equipment type to match.</li><li>Added a couple sorting options to Equipment. Sort AZ and Sort by Location, then Item AZ. Includes an "Undo" option that will restore the previous natural order.</li><li>Added a couple sorting options to Spells. Sort AZ and Sort by Level, then Spell AZ. Includes an "Undo" option that will restore the previous natural order.</li><li>Update to Spells; adding new spells will automatically set a Spell's caster class and level based on the current Caster and Spell Level tabs selected. example; If the current Spell Tab is set to show "3rd" level spells and a new spell is added "+", entering a spell name will trigger the sheet to set the Spell's level to "3". If the tab is set to "All" or if the Spell's level has already been set, the Spell's level will not be changed. If the spell is added using an API mod, the Spell's level will not be changed. Caster Class selected acts similarly.</li><li>"Spell Lvl" is now shown with the Spell Name and #Memorized/Prepared. Hidden when the Spell details is expanded.</li><li>Made a correction with the Spell Level Tab behavior when editing a Spell's Level while showing "All" levels. Tab would incorrectly change the Spell Level Tab to match the new Spell Level. Expected behavior is to stay on "All".</li><li>Updated the Thief Skills Dex and Race auto-fill option. Expanded the Dex Thief skill adjustments up to DEX 25.</li><li>Updated dependencies used to bundle the sheet. Impacts dev environment only.</li><li>Updated title text on max fields from '..._max' to '...|max'. Macros and token bars need to use '...|max'</li><li>Added "Roll Template Color" selector to the sheet's default settings options.</li><li>Updated the 'Equipment|Weapon|+Add' button to set all default weapon values for the attack row instead of just those synced from the Equipment's row. Fixes default hit-table info not being posted to chat (unless the selector was manually set) if the attack was created using the Equipment button.</li><li>Added a very subtle linear-gradient background(top transparent to bottom light gray) to a few sections to help introduce a little contrast between sections.</li><li>Fixed Equipment tabs for Carried|Not Carried|Mount|All not filtering.</li><li>Updated sheetworker logic used when creating new repeating rows. Allows API mods to detect the default values.</li><li>Updated the NWP title-text, inverting the +/- appropriately so it makes sense. Added an additional option in the NWP row dropdown to include a "vs Base" (which will give a roll-time query to enter a base/target value) to accommodate anyone that is using OA's version of NWP.</li><li>Open Doors changed from percentage roll to d6 (or larger die for demi-god level STR values).</li><li>Added additional logic to auto-fill bonus languages as per PHB. Previously the sheet only auto-filled Humans. This update will only effect new characters going forward. @{bonuslanguages} will remain unchanged for existing characters unless Race or INT are changed.</li><li>Added setting the NWP default values using sheetworkers upon row creation to help with API attribute recognition. ie ScriptCards. Also added a "Val." column to show the current value of the Ability selected.</li><li>Added a "Magical" column and checkbox to equipment. Check this box if an item has magical properties. Items that are checked will also be displayed when the "Magic" tab is selected regardless of their type category.</li><li>Added options to autofill Thief Skills racial and Dex modifiers.</li><li>Added an option to the Thief Skills to sync to a class. Base value will continue to auto-adjust whenever the class level changes.</li><li>Added an option to the Attack Matrix/THAC0 section to sync to-Hit values to a class. Table data will continue to auto-adjust whenever the class level changes. Multi/Dual-class characters should choose the most favorable class. Class names entered on the sheet need to match one of the core 1e classes in order for this option to work.</li><li>Added an option to use a 5% progression based to-Hit table for Fighters. (DMG p74) Use 5% checkbox added to Settings|Misc. Options and inside the Attack/THAC0 Matrix window.</li><li>Attack/THACO Matrix section has been updated so that it's opened/closed state will remain persistent. It will be open by default on new sheets.</li><li>Removed the character_name validation warning for the use of commas within a character's name.</li></ul><h5><span class="inline-label"><button type="roll" class="url-roll" title="Post this link to chat." value="[Roll20 Wiki Link](https://wiki.roll20.net/ADnD_1st_Edition_Character_sheet#Past_Updates)"><span>Past Updates...</span></button></span></h5></div></section></section><section class="header-box"><div class="heading-box"><input type="checkbox" name="attr_character_name_error" class="hidden toggle-input-error" value="1" checked="checked"> <input type="text" class="width-fill border text-large" name="attr_character_name" title="@{character_name} | NOTE: Including non-alpha-numeric characters 'may' break sheet rolls/macros. Specifically ')', ']', '}', or '|'." placeholder="Character Name"> <label class="inline-label"><span>Race:</span> <input type="text" class="width-fill" name="attr_race" title="@{race}" placeholder="Description"></label> <label class="inline-label"><span>Alignment:</span> <input type="text" class="width-fill" name="attr_alignment" title="@{alignment}" placeholder="Description"></label> <label class="inline-label left" title="Expand/Hide Class Details" style="max-width: calc(100% + 5px);"><input type="checkbox" class="sect-show" name="attr_class_details_show" value="1" checked="checked"> <span class="material-icons gear-nav" title="Expand/Hide Class Details" style="left: -1em;"></span></label> <label class="inline-label"><span>Class:</span> <input type="text" name="attr_class" title="@{class}" placeholder="Class"> <span class="toggle-multiclass">Lvl:</span> <input type="text" class="toggle-multiclass width-smaller" name="attr_level" title="@{level}" value="0"></label> <label class="inline-label toggle-multiclass"><span>Class:</span> <input type="text" name="attr_secondclass" title="@{secondclass}" placeholder="Class"> <span>Lvl:</span> <input type="text" class="width-smaller" name="attr_level_2" title="@{level_2}" value="0"></label> <label class="inline-label toggle-multiclass"><span>Class:</span> <input type="text" name="attr_thirdclass" title="@{thirdclass}" placeholder="Class"> <span>Lvl:</span> <input type="text" class="width-smaller" name="attr_level_3" title="@{level_3}" value="0"></label> <label class="inline-label toggle-multiclass-swap"><span>Lvl:</span> <input type="text" class="width-smaller" name="attr_level" title="@{level}" value="0"> <span>XP:</span> <input type="text" class="width-medium" name="attr_xp" title="@{xp}" value="0"> <span class="inline-label"><input type="checkbox" name="attr_xp_bonus" title="@{xp_bonus} | XP bonus applies. Primary ability threshold met or exceeded for the class." value="1"> <span>10%</span></span></label></div><div class="logo-box center"><span class="span-all normalmode">&nbsp; </span><span class="span-all darkmode">&nbsp; </span><span class="span-two two-columns"><label><span class="text-large left">HP</span> <span class="heart"><input type="text" class="heart-input" name="attr_hitpoints" title="@{hitpoints} | Current Hit Points." value="0"> </span><span>/</span> <input type="text" class="width-smaller" name="attr_hitpoints_max" title="@{hitpoints|max} | Maximum Hit Points. No Damage. See Class Details to adjust." value="0" style="height: 2em;"> <span class="sync-lock" title="@{sync_hp_flag} | Let the sheet sync Total HP max from Class Details."><input type="checkbox" name="attr_sync_hp_flag" value="1" checked="checked"> <span></span></span></label> <label><span class="text-large">AC</span> <span class="shield"><input type="text" class="shield-input" name="attr_armorclass" title="@{armorclass} | Best AC. See Armor Details to adjust." value="10"> </span><span class="sync-lock" title="@{sync_ac_flag} | Let the sheet sync Total AC from Armor Details with AC ( @{armorclass} )."><input type="checkbox" name="attr_sync_ac_flag" value="1" checked="checked"> <span></span></span></label> <span class="class-details"><input type="checkbox" class="sect-show" name="attr_class_details_show" value="1" checked="checked"> <span class="subheader">Class Details</span><span class="material-icons"></span> </span><span class="armor-details"><input type="checkbox" class="sect-show" name="attr_armor_details_show" value="1" checked="checked"> <span class="subheader">Armor Details</span><span class="material-icons"></span> </span></span><span class="ac-columns"><label class="label-under" title="@{armorclass_shieldless} | Best AC without a Shield bonus."><input type="text" class="readonly-span width-smaller" name="attr_armorclass_shieldless" title="@{armorclass_shieldless} | Best AC without a Shield bonus." value="0"> <span class="text-medium">Shieldless</span></label> <label class="label-under" title="@{armorclass_rear} | Best AC without a Dex bonus."><input type="text" class="readonly-span width-smaller" name="attr_armorclass_rear" title="@{armorclass_rear} | Best AC without a Dex bonus." value="0"> <span class="text-medium">Rear</span></label> <label class="label-under" title="@{armorclass_rating} | Best Armor Rating"><input type="text" class="readonly-span width-smaller" name="attr_armorclass_rating" value="-"> <span class="text-medium">AR</span></label></span></div><div class="portrait-box"><input type="hidden" class="toggle-avatar" name="attr_sheet_image" value="1"><div class="image-avatar" name="attr_sheet_image_url" title="Send image to chat."><img name="attr_character_avatar"> <button type="action" name="act_postimage" class="image-link"></button></div></div></section><section class="class-box"><input type="checkbox" class="sect-show" name="attr_class_details_show" value="1" checked="checked"><div class="sect header">CLASS DETAILS</div><span class="sect material-icons"></span><div class="sect border"><span class="class-columns column-header"><span>Class</span> <span>Lvl</span> <span>HD</span> <span>HP/Level</span> <span></span> <span>HP+Con</span> <span></span> <span>XP</span> <span>Next Level</span> <span>+10%</span> </span><span class="class-columns"><input type="text" class="width-fill" name="attr_class" title="@{class}" placeholder="Class"> <input type="text" class="width-smaller" name="attr_level" title="@{level}" value="0"> <input type="text" class="width-medium" name="attr_hitdice" title="@{hitdice}" value="" placeholder="1d6"> <textarea class="width-medium-plus" name="attr_hitpoints_1_tracked" title="@{hitpoints_1_tracked} | Track rolled HP + CON adjustments per level." placeholder="Track HP 1 hp+con 2 hp+con 3 hp+con etc."></textarea> <span class="text-large">=</span> <input type="checkbox" class="hidden toggle-input-error" name="attr_hitpoints_1_class_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_hitpoints_1_class" title="@{hitpoints_1_class} | Enter a running total of HP+CON." value="0"> <span></span> <input type="text" class="width-medium" name="attr_xp" title="@{xp}" value="0"> <input type="text" class="width-medium" name="attr_xp_next" title="@{xp_next}" value="0"> <input type="checkbox" name="attr_xp_bonus" title="@{xp_bonus} | XP bonus applies. Primary ability threshold met or exceeded for the class." value="1"> </span><span class="class-columns toggle-multiclass"><input type="text" class="width-fill" name="attr_secondclass" title="@{secondclass}" placeholder="2rd class"> <input type="text" class="width-smaller" name="attr_level_2" title="@{level_2}" value="0"> <input type="text" class="width-medium" name="attr_hitdice_2" title="@{hitdice_2}" value="" placeholder="1d6"> <textarea class="width-medium-plus" name="attr_hitpoints_2_tracked" title="@{hitpoints_2_tracked} | Track rolled HP + CON adjustments per level." placeholder="Track HP 1 hp+con 2 hp+con 3 hp+con etc."></textarea> <span class="text-large">=</span> <input type="checkbox" class="hidden toggle-input-error" name="attr_hitpoints_2_class_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_hitpoints_2_class" title="@{hitpoints_2_class} | Enter a running total of HP+CON." value="0"> <span></span> <input type="text" class="width-medium" name="attr_xp_2" title="@{xp_2}" value="0"> <input type="text" class="width-medium" name="attr_xp_2_next" title="@{xp_2_next}" value="0"> <input type="checkbox" name="attr_xp_2_bonus" title="@{xp_2_bonus} | XP bonus applies." value="1"> </span><span class="class-columns toggle-multiclass"><input type="text" class="width-fill" name="attr_thirdclass" title="@{thirdclass}" placeholder="3rd class"> <input type="text" class="width-smaller" name="attr_level_3" title="@{level_3}" value="0"> <input type="text" class="width-medium" name="attr_hitdice_3" title="@{hitdice_3}" value="" placeholder="1d6"> <textarea class="width-medium-plus" name="attr_hitpoints_3_tracked" title="@{hitpoints_3_tracked} | Track rolled HP + CON adjustments per level." placeholder="Track HP 1 hp+con 2 hp+con 3 hp+con etc."></textarea> <span class="text-large">=</span> <input type="checkbox" class="hidden toggle-input-error" name="attr_hitpoints_3_class_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_hitpoints_3_class" title="@{hitpoints_3_class} | Enter a running total of HP+CON." value="0"> <span></span> <input type="text" class="width-medium" name="attr_xp_3" title="@{xp_3}" value="0"> <input type="text" class="width-medium" name="attr_xp_3_next" title="@{xp_3_next}" value="0"> <input type="checkbox" name="attr_xp_3_bonus" title="@{xp_3_bonus} | XP bonus applies." value="1"></span><hr class="toggle-multiclass"><span class="class-columns"><label title="@{toggle_multiclass} | Hides additional class fields."><span>Hide Multi-Class:</span> <input type="checkbox" name="attr_toggle_multiclass" value="1" checked="checked"></label> <label></label> <label class="label-under-small" title="@{hitdice_total} | Track total/effective Hit Dice for Spell effects and XP. Single class = level. Multi-class = highest level + 1. Three classes = highest level +2."><input type="text" class="width-small" name="attr_hitdice_total" value="0"> <span>Total HD</span></label> <span class="hp-calc-columns" style="margin-left: -10%;"><label class="label-under toggle-multiclass" title="@{hitpoints_class_total} | Uses the total HP+Con from table above." style="margin-left: 44%;"><input type="text" class="width-small" name="attr_hitpoints_class_total" value="0" readonly="readonly"> <span>Total</span></label> <label></label> <label class="label-under-small toggle-multiclass"><input type="text" class="width-small" name="attr_hp_quotient" title="@{hp_quotient}" value="0" readonly="readonly"> <span>/Classes</span></label> <label class="text-large toggle-multiclass">=</label> <label class="label-under" title="@{hitpoints_total} | fractional HP included for mult-class characters. Max Hit Points is rounded up."><input type="text" class="width-small" name="attr_hitpoints_total" value="0" readonly="readonly"> <span>TOTAL HP</span></label> <span></span><input type="number" class="hidden width-auto" name="attr_hitpoints_remainder_total" value="0" step=".01"> <label class="sync-lock" title="@{sync_hp_flag} | Let the sheet sync Total HP max from Class Details."><span class="center nowrap">Sync HP:</span> <input type="checkbox" name="attr_sync_hp_flag" value="1" checked="checked"> <span></span></label></span></span></div></section><section class="armor-box"><input type="checkbox" class="sect-show" name="attr_armor_details_show" value="1" checked="checked"><div class="sect header">ARMOR DETAILS</div><span class="sect material-icons"></span><input type="hidden" name="attr_unarmored_row_id" value="0"> <input type="hidden" name="attr_armortype1_row_id" value="0"> <input type="hidden" name="attr_armortype2_row_id" value="0"> <input type="hidden" name="attr_armorshield_row_id" value="0"> <input type="hidden" name="attr_armorhelmet_row_id" value="0"> <input type="hidden" name="attr_armorother1_row_id" value="0"> <input type="hidden" name="attr_armorother2_row_id" value="0"> <input type="hidden" name="attr_armorother3_row_id" value="0"> <input type="hidden" name="attr_armorother4_row_id" value="0"> <input type="hidden" name="attr_armorother5_row_id" value="0"> <input type="hidden" name="attr_armorother6_row_id" value="0"> <input type="hidden" name="attr_armordetails_array" value="0"> <input type="hidden" name="attr_armor_weight" value="0"> <input type="hidden" name="attr_unarmored_weight" value="0"> <input type="hidden" name="attr_armortype2_weight" value="0"> <input type="hidden" name="attr_armorshield_weight" value="0"> <input type="hidden" name="attr_armorhelmet_weight" value="0"> <input type="hidden" name="attr_armor_cost" value="0"> <input type="hidden" name="attr_unarmored_cost" value="0"> <input type="hidden" name="attr_armortype2_cost" value="0"> <input type="hidden" name="attr_armorshield_cost" value="0"> <input type="hidden" name="attr_armorhelmet_cost" value="0"><div class="sect border linear-background"><span class="armor-columns column-header"><span>Armor Type</span> <span title="Only worn items are included in the AC calculations below.">In Use</span> <span>Name</span> <span title="Armor Class">AC</span> <span title="Armor Rating for weapon vs armor adjustments.">AR</span> <span title="Magical Bonuses to AC.">Magic</span> <span title="Misc adjustments to AC.">Misc</span> <span title="Items in use are carried, but items not in use can still be carried.">Carried</span> <span title="Armor Bulk affects movement.">Bulk</span> </span><span class="armor-columns"><label class="stack-text"><span>UnArmored Base</span></label> <input type="checkbox" name="attr_unarmored_worn" value="1" title="@{unarmored_worn}" checked="checked"> <input type="text" class="width-fill" name="attr_unarmored" value="" title="@{unarmored} | Use for Unarmored, Clothing, Natural Armor, etc. NOTE: Adding a new item to Armor Details will also add a new Armor item to Equipment. Similarly, Armor items can be added to the Armor Details list from Equipment|Armor using the '+Add' button. (expand row's sub-section)" placeholder="non-armor"> <select name="attr_unarmored_ac" title="@{unarmored_ac} | Enter the actual AC value for this item."><option value="10" selected="selected">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option></select> <select name="attr_unarmored_base" title="@{unarmored_base} | Enter the actual AR value for this item."><option value="10" selected="selected">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option><option value="-">-</option></select> <span></span> <span></span> <input type="checkbox" name="attr_unarmored_carried" value="1" title="@{unarmored_carried} | In use/worn cannot be un-carried." checked="checked"> <select class="width-fill" name="attr_unarmored_bulk" title="@{unarmored_bulk}"><option value="0" selected="selected">n/a</option><option value="1">non-Bulky 12"</option><option value="2">Fairly 9"</option><option value="3">Bulky 6"</option></select> </span><span class="armor-columns"><label><span>Armor 1</span></label> <input type="checkbox" name="attr_armortype_worn" title="@{armortype_worn}" value="1" checked="checked"> <input type="text" class="width-fill" name="attr_armortype" title="@{armortype} | NOTE: Adding a new item to Armor Details will also add a new Armor item to Equipment. Similarly, Armor items can be added to the Armor Details list from Equipment|Armor using the '+Add' button. (expand row's sub-section)" placeholder="Description"> <select name="attr_armortype_ac" title="@{armortype_ac} | Enter the actual AC value for this item."><option value="10" selected="selected">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option><option class="hidden" value="-1">-1</option><option class="hidden" value="-2">-2</option><option class="hidden" value="-3">-3</option><option class="hidden" value="-4">-4</option><option class="hidden" value="-5">-5</option><option class="hidden" value="-6">-6</option><option class="hidden" value="-7">-7</option><option class="hidden" value="-8">-8</option><option class="hidden" value="-9">-9</option><option class="hidden" value="-10">-10</option></select> <select name="attr_armortype_base" title="@{armortype_base} | Enter the actual AR value for this item."><option value="10" selected="selected">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option></select> <input type="checkbox" class="hidden toggle-input-error" name="attr_armortype_magic_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armortype_magic" value="0" title="@{armortype_magic} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <span></span> <input type="checkbox" name="attr_armortype_carried" value="1" title="@{armortype_carried} | In use/worn cannot be un-carried." checked="checked"> <select class="width-fill" name="attr_armortype_bulk" title="@{armortype_bulk}"><option value="0" selected="selected">n/a</option><option value="1">non-Bulky 12"</option><option value="2">Fairly 9"</option><option value="3">Bulky 6"</option></select> </span><span class="armor-columns"><label><span>Armor 2</span></label> <input type="checkbox" name="attr_armortype2_worn" title="@{armortype2_worn}" value="1"> <input type="text" class="width-fill" name="attr_armortype2" title="@{armortype2} | NOTE: Adding a new item to Armor Details will also add a new Armor item to Equipment. Similarly, Armor items can be added to the Armor Details list from Equipment|Armor using the '+Add' button. (expand row's sub-section)" placeholder="Description"> <select name="attr_armortype2_ac" title="@{armortype2_ac} | Enter the actual AC value for this item."><option value="10" selected="selected">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option></select> <select name="attr_armortype2_base" title="@{armortype2_base} | Enter the actual AR value for this item."><option value="10" selected="selected">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option></select> <input type="checkbox" class="hidden toggle-input-error" name="attr_armortype2_magic_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armortype2_magic" value="0" title="@{armortype2_magic} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <span></span> <input type="checkbox" name="attr_armortype2_carried" value="1" title="@{armortype2_carried} | In use/worn cannot be un-carried." checked="checked"> <select class="width-fill" name="attr_armortype2_bulk" title="@{armortype2_bulk}"><option value="0" selected="selected">n/a</option><option value="1">non-Bulky 12"</option><option value="2">Fairly 9"</option><option value="3">Bulky 6"</option></select> </span><span class="armor-columns"><label><span>Shield</span></label> <input type="checkbox" name="attr_armorshield_worn" title="@{armorshield_worn}" value="1"> <input type="text" class="width-fill" name="attr_armorshield" title="@{armorshield} | NOTE: Adding a new item to Armor Details will also add a new Armor item to Equipment. Similarly, Armor items can be added to the Armor Details list from Equipment|Armor using the '+Add' button. (expand row's sub-section)" placeholder="Description"> <select name="attr_armorshield_ac" title="@{armorshield_ac} | ie +2 lowers AC by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <select name="attr_armorshield_base" title="@{armorshield_base} | ie +2 lowers AR by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorshield_magic_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorshield_magic" value="0" title="@{armorshield_magic} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorshield_mod_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorshield_mod" value="0" title="@{armorshield_mod} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <input type="checkbox" name="attr_armorshield_carried" value="1" title="@{armorshield_carried} | In use/worn cannot be un-carried." checked="checked"> <select class="width-fill" name="attr_armorshield_bulk" title="@{armorshield_bulk}"><option value="0" selected="selected">n/a</option><option value="1">non-Bulky 12"</option><option value="2">Fairly 9"</option><option value="3">Bulky 6"</option></select> </span><span class="armor-columns"><label><span>Helm</span></label> <input type="checkbox" name="attr_armorhelmet_worn" title="@{armorhelmet_worn}" value="1"> <input type="text" class="width-fill" name="attr_armorhelmet" title="@{armorhelmet} | NOTE: Adding a new item to Armor Details will also add a new Armor item to Equipment. Similarly, Armor items can be added to the Armor Details list from Equipment|Armor using the '+Add' button. (expand row's sub-section)" placeholder="Description"> <select name="attr_armorhelmet_ac" title="@{armorhelmet_ac} | Other than Magic Bonuses, Helms do not impact Total AC calculations."><option value="10" selected="selected">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option></select> <span></span> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorhelmet_magic_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorhelmet_magic" value="0" title="@{armorhelmet_magic} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <span></span> <span></span> <span></span> </span><span class="armor-columns" style="margin-bottom: -.25em;"><label><span>Other</span></label> <input type="checkbox" name="attr_armorother_worn" title="@{armorother_worn}" value="1"> <input type="text" class="width-fill" name="attr_armorother" title="@{armorother} | NOTE: Adding a new item to Armor Details will also add a new Armor item to Equipment. Similarly, Armor items can be added to the Armor Details list from Equipment|Armor using the '+Add' button. (expand row's sub-section)" placeholder="Description"> <select name="attr_armorother_ac" title="@{armorother_ac} | Enter the actual AC value for this item."><option value="10" selected="selected">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option></select> <select name="attr_armorother_base" title="@{armorother_base} | Enter the actual AR value for this item."><option value="10" selected="selected">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option></select> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorother_magic_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorother_magic" value="0" title="@{armorother_magic} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorother_mod_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorother_mod" value="0" title="@{armorother_mod} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <span></span> <span class="span-all" style="margin-bottom: -.5em; padding-left:.5em;"><input type="checkbox" class="sect-show more" title="@{armorother-show}" name="attr_armorother_show" value="1"> <span style="top: -6px;position: relative;">More</span><span class="material-icons" style="padding-bottom: 6px;"></span> </span></span><input type="checkbox" class="sect-show hidden" name="attr_armorother_show" value="1"> <span class="sect armor-columns"><label><span>Other</span></label> <input type="checkbox" name="attr_armorother2_worn" title="@{armorother2_worn}" value="1"> <input type="text" class="width-fill" name="attr_armorother2" title="@{armorother2} | NOTE: Adding a new item to Armor Details will also add a new Armor item to Equipment. Similarly, Armor items can be added to the Armor Details list from Equipment|Armor using the '+Add' button. (expand row's sub-section)" placeholder="Description"> <select name="attr_armorother2_ac" title="@{armorother2_ac} | ie +2 lowers AC by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <select name="attr_armorother2_base" title="@{armorother2_base} | ie +2 lowers AR by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorother2_magic_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorother2_magic" value="0" title="@{armorother2_magic} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorother2_mod_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorother2_mod" value="0" title="@{armorother2_mod} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <span></span> <span></span> </span><span class="sect armor-columns"><label><span>Other</span></label> <input type="checkbox" name="attr_armorother3_worn" title="@{armorother3_worn}" value="1"> <input type="text" class="width-fill" name="attr_armorother3" title="@{armorother3} | NOTE: Adding a new item to Armor Details will also add a new Armor item to Equipment. Similarly, Armor items can be added to the Armor Details list from Equipment|Armor using the '+Add' button. (expand row's sub-section)" placeholder="Description"> <select name="attr_armorother3_ac" title="@{armorother3_ac} | ie +2 lowers AC by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <select name="attr_armorother3_base" title="@{armorother3_base} | ie +2 lowers AR by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorother3_magic_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorother3_magic" value="0" title="@{armorother3_magic} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorother3_mod_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorother3_mod" value="0" title="@{armorother3_mod} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <span></span> </span><span class="sect armor-columns"><label><span>Other</span></label> <input type="checkbox" name="attr_armorother4_worn" title="@{armorother4_worn}" value="1"> <input type="text" class="width-fill" name="attr_armorother4" title="@{armorother4} | NOTE: Adding a new item to Armor Details will also add a new Armor item to Equipment. Similarly, Armor items can be added to the Armor Details list from Equipment|Armor using the '+Add' button. (expand row's sub-section)" placeholder="Description"> <select name="attr_armorother4_ac" title="@{armorother4_ac} | ie +2 lowers AC by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <select name="attr_armorother4_base" title="@{armorother4_base} | ie +2 lowers AR by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorother4_magic_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorother4_magic" value="0" title="@{armorother4_magic} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorother4_mod_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorother4_mod" value="0" title="@{armorother4_mod} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <span></span> </span><span class="sect armor-columns"><label><span>Other</span></label> <input type="checkbox" name="attr_armorother5_worn" title="@{armorother5_worn}" value="1"> <input type="text" class="width-fill" name="attr_armorother5" title="@{armorother5} | NOTE: Adding a new item to Armor Details will also add a new Armor item to Equipment. Similarly, Armor items can be added to the Armor Details list from Equipment|Armor using the '+Add' button. (expand row's sub-section)" placeholder="Description"> <select name="attr_armorother5_ac" title="@{armorother5_ac} | ie +2 lowers AC by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <select name="attr_armorother5_base" title="@{armorother5_base} | ie +2 lowers AR by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorother5_magic_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorother5_magic" value="0" title="@{armorother5_magic} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorother5_mod_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorother5_mod" value="0" title="@{armorother5_mod} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <span></span> <span></span> </span><span class="sect armor-columns"><label><span>Other</span></label> <input type="checkbox" name="attr_armorother6_worn" title="@{armorother6_worn}" value="1"> <input type="text" class="width-fill" name="attr_armorother6" title="@{armorother6} | NOTE: Adding a new item to Armor Details will also add a new Armor item to Equipment. Similarly, Armor items can be added to the Armor Details list from Equipment|Armor using the '+Add' button. (expand row's sub-section)" placeholder="Description"> <select name="attr_armorother6_ac" title="@{armorother6_ac} | ie +2 lowers AC by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <select name="attr_armorother6_base" title="@{armorother6_base} | ie +2 lowers AR by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorother6_magic_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorother6_magic" value="0" title="@{armorother6_magic} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <input type="checkbox" class="hidden toggle-input-error" name="attr_armorother6_mod_error" value="1" checked="checked"> <input type="text" class="width-small" name="attr_armorother6_mod" value="0" title="@{armorother6_mod} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <span></span> <span></span> </span><span class="armor-columns"><span class="span-three"></span> <label class="readonly-span-textonly" title="In Use/Best AC"><span><span name="attr_armorclass_base_used"></span> <input type="text" class="hidden" name="attr_armorclass_base_used" value="0" readonly="readonly"> </span><span>/</span> <span><span name="attr_armorclass_base_best"></span> <input type="text" class="hidden" name="attr_armorclass_base_best" value="0" readonly="readonly"></span></label> <label class="readonly-span-textonly" title="In Use/Best AR"><span><span name="attr_armorclass_rating_used"></span> <input type="text" class="hidden" name="attr_armorclass_rating_used" value="0" readonly="readonly"> </span><span>/</span> <span><span name="attr_armorclass_rating_best"></span> <input type="text" class="hidden" name="attr_armorclass_rating_best" value="0" readonly="readonly"></span></label> <label class="readonly-span-textonly" title="In Use/Total Magic"><span><span name="attr_armorclass_magic_with_shield"></span> <input type="text" class="hidden" name="attr_armorclass_magic_with_shield" value="0" readonly="readonly"> </span><span>/</span> <span><span name="attr_armorclass_magic_total"></span> <input type="text" class="hidden" name="attr_armorclass_magic_total" value="0" readonly="readonly"></span></label> <label class="readonly-span-textonly" title="In Use/Total Misc."><span><span name="attr_armorclass_mod_with_shield"></span> <input type="text" class="hidden" name="attr_armorclass_mod_with_shield" value="0" readonly="readonly"> </span><span>/</span> <span><span name="attr_armorclass_mod_total"></span> <input type="text" class="hidden" name="attr_armorclass_mod_total" value="0" readonly="readonly"></span></label> <label class="readonly-span-textonly span-two" title="@{current_bulk_label} | Current Bulk as per active armors, shield, clothing, etc."><input type="text" class="width-fill height-short" name="attr_current_bulk_label" value="" placeholder="no bulk" readonly="readonly"></label> <input type="text" class="hidden" name="attr_current_bulk" value=""></span><hr><span class="ac-calc-columns"><label class="label-under-small" title="@{unarmored_base} | Enter a value for Natural Armor or No Armor rating. Default is 10."><input type="text" class="readonly-span width-small" name="attr_unarmored_base" value="10"> <span>UnArmored</span></label> <label class="label-under-small" title="@{armorclass_base} | Compares the UnArmored Base AC to the AC from above and uses the best(lowest) value."><input type="text" class="readonly-span width-small" name="attr_armorclass_base" value="0"> <span>AC Base</span></label> <label class="label-under-small" title="@{armorclass_combined_mod_magic} | Magic + Misc. Adjustments from above."><input type="text" class="hidden" name="attr_armorclass_combined_mod_magic" value="0"> <input type="text" class="readonly-span width-small" name="attr_armorclass_combined_mod_magic_inverted" value="0"> <input type="text" class="hidden" name="attr_armorclass_magic" value="0" readonly="readonly"> <input type="text" class="hidden" name="attr_armorclass_mod" value="0" readonly="readonly"> <span>Armor Adj.</span></label> <input type="checkbox" class="hidden toggle-input-attention" name="attr_encumbrance_flag" value="1" checked="checked"> <label class="text-large">=</label> <label class="label-under" title="@{armorclass_rear} | Best AC without a Dex bonus."><input type="text" class="readonly-span field-border" name="attr_armorclass_rear" value="0"> <span>Rear</span></label> <input type="checkbox" class="hidden toggle-input-attention" name="attr_encumbrance_flag" value="1" checked="checked"> <label class="label-under-small" title="@{armorbonus} | Defensive Adjustment from Dexterity row."><input type="text" class="readonly-span width-small" name="attr_armorbonus_inverted" value="0"> <span class="material-icons" title="Encumbered! DEX bonus has been removed.">nearby_error</span> <label class="inline-label" title="@{armorbonus_toggle} | DEX bonus can be removed circumstantially. ie Surprise, Backstab, etc."><span>Dex Adj.</span> <input type="checkbox" name="attr_armorbonus_toggle" value="1" checked="checked"></label></label> <label class="text-large">=</label> <label class="label-under" title="@{armorclass_shieldless} | Best AC without a Shield bonus."><input type="text" class="readonly-span field-border" name="attr_armorclass_shieldless" value="0"> <span>Shieldless</span></label> <label class="label-under-small" title="@{armorclass_combined_shield_mod_magic} | Magic + Misc. Adjustments from Shield above."><input type="text" class="hidden" name="attr_armorclass_combined_shield_mod_magic" value="0"> <input type="text" class="readonly-span width-small" name="attr_armorclass_combined_shield_mod_magic_inverted" value="0"> <input type="text" class="hidden" name="attr_armorclass_shield_mod" value="0" readonly="readonly"> <input type="text" class="hidden" name="attr_armorclass_shield_magic" value="0" readonly="readonly"> <span>Shield Adj.</span></label> <label class="text-large">=</label> <label class="label-under" title="@{armorclass_total} | Best AC"><input type="text" class="readonly-span field-border" name="attr_armorclass_total" value="0"> <span>Total AC</span></label> </span><span class="five-columns"><span class="inline-label" title="@{autocalc_ac} | This is a persistent setting. Let the sheet auto-calculate AC based on the values entered in the Armor Details table above. This will overwrite all values in the bottom row."><label><span>Auto-Calc AC:</span> <input type="checkbox" name="attr_autocalc_ac" value="1" checked="checked"></label> <button type="action" class="text-only" name="act_calcac" style="padding: inherit;" title="This is an immediate action and works regardless of the Auto-Calc AC setting. Let the sheet auto-calculate AC based on the values entered in the Armor Details table above. This will overwrite all values in the bottom row."><span class="width-large">Calc AC</span></button> </span><span class="inline-label sync-lock" title="@{sync_ac_flag} | Let the sheet sync Total AC from Armor Details with AC ( @{armorclass} )."><label><span>Sync AC:</span> <input type="checkbox" name="attr_sync_ac_flag" value="1" checked="checked"> <span></span></label> </span><span></span> <span class="inline-label" title="@{armor_rating_flag} | AC is not from armor. Weapons vs Armor Type does not apply."><label><span>Ignore AR:</span> <input type="checkbox" name="attr_armor_rating_flag" value="1"></label> </span><span class="inline-label" title="@{armorclass_rating} | Best AR"><label><span>Armor Rating</span></label> <input type="text" class="readonly-span width-small" name="attr_armorclass_rating" value="-"> </span></span><span class="inline-label"><label class="width-auto"><button type="roll" name="roll_defensive_notes_roll" class="dice-button text-only" title="%{selected|defensive_notes_roll}" value="@{whisper_pc} &amp;{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Defensive Notes}} {{freetext=@{defensive_notes}}}"><span>Defensive Notes:</span></button></label> <textarea name="attr_defensive_notes" class="height-short" title="@{defensive_notes}" placeholder="Enter Defensive Notes..."></textarea></span></div></section><section class="personal-attributes-box"><input type="checkbox" class="sect-show" name="attr_personal_attributes_info_show" value="1" checked="checked"><div class="header">PERSONAL ATTRIBUTES</div><span class="material-icons"></span><div class="sect"><span class="details-row1"><label class="inline-label"><span>Gender:</span> <span class="autoexpand"><input type="text" class="autoexpand" name="attr_gender" title="@{gender}" placeholder="n/a"> <span name="attr_gender"></span></span></label> <label class="inline-label"><span>Age:</span> <span class="autoexpand"><input type="text" class="autoexpand" name="attr_age" title="@{age}" value="0"> <span name="attr_age"></span></span></label> <label class="inline-label"><span>Height:</span> <span class="autoexpand"><input type="text" class="autoexpand" name="attr_height" title="@{height}" value="0"> <span name="attr_height"></span></span></label> <label class="inline-label"><span>Weight:</span> <span class="autoexpand"><input type="text" class="autoexpand" name="attr_weight" title="@{weight}" value="0"> <span name="attr_weight"></span></span></label> <label class="inline-label"><span>Eyes:</span> <span class="autoexpand"><input type="text" class="autoexpand" name="attr_eyes" title="@{eyes}" placeholder="Color"> <span name="attr_eyes"></span></span></label> <label class="inline-label"><span>Hair:</span> <span class="autoexpand"><input type="text" class="autoexpand" name="attr_hair" title="@{hair}" placeholder="Color"> <span name="attr_hair"></span></span></label> <label class="inline-label" title="Natural/Unaltered size." style="padding-left: .35em;"><span>Size:</span> <select class="width-small" name="attr_size" title="@{size}"><option>S</option><option selected="selected">M</option><option>L</option></select></label> <label class="inline-label" title="Altered size." style="padding-left: .35em;"><span>Temp Size:</span> <select class="width-small" name="attr_size2" title="@{size2}"><option>S</option><option selected="selected">M</option><option>L</option></select></label> <label class="inline-label"><span>Deity:</span> <span class="autoexpand"><input type="text" class="autoexpand" name="attr_deity" title="@{deity}" placeholder="Description"> <span name="attr_deity"></span></span></label> <label class="inline-label"><span>Secondary Skill:</span> <span class="autoexpand"><input type="text" class="autoexpand" name="attr_secondary_skill" title="@{secondary_skill}" placeholder="Description"> <span name="attr_secondary_skill"></span></span></label> <span class="inline-label" style="padding-left: .35em; max-width: -webkit-fill-available;"><label><button type="roll" class="image-link" value="@{whisper_pc} [**LINK**](@{sheet_image_url})" title="Send image to chat."></button> <textarea class="image-link" wrap="off" name="attr_sheet_image_url" title="@{sheet_image_url} | Enter a valid image URL that ends with a proper image extension. ie .png, .jpg, .gif If needed, trim the url to the end of the image extension or add a 3-letter extension to the end of the url.." placeholder="https://app.roll20.net/images/character.png"></textarea></label> </span></span><span class="details-row"><label class="inline-label width-auto"><button type="roll" name="roll_racial_notes_roll" class="dice-button text-only" title="%{selected|racial_notes_roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Racial Notes}} {{freetext=@{racial_notes}}}"><span>Racial Notes:</span></button></label> <textarea name="attr_racial_notes" class="height-short" title="@{racial_notes}" placeholder="Enter Racial Notes..."></textarea> </span><span class="details-row"><label class="inline-label width-auto"><button type="roll" name="roll_languages_roll" class="dice-button text-only" title="%{selected|languages_roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Known Languages}} {{freetext=@{languages}}}"><span>Languages:</span></button></label> <textarea class="height-short" name="attr_languages" title="@{languages}" placeholder="languages known"></textarea> </span><span class="details-row"><label class="inline-label width-auto"><button type="roll" name="roll_senses_roll" class="dice-button text-only" title="%{selected|senses_roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Special Senses}} {{freetext=@{senses}}}"><span>Special Senses:</span></button></label> <textarea name="attr_senses" class="height-short" title="@{senses}" placeholder="Enter Special Senses..."></textarea> </span><span class="details-row3"><input type="checkbox" class="sect-show" name="attr_character-description_show" value="1" checked="checked"> <span class="subheader">Character History/Bio</span><span class="material-icons"></span> <span class="sect"><span class="autoexpand"><textarea name="attr_character_description" title="@{character_description} | Field will resize to match it's content." placeholder="Enter Character Description..."></textarea> <span name="attr_character_description"></span></span></span></span></div><hr></section><section class="abilities-box"><input type="checkbox" class="sect-show" name="attr_abilities_info_show" value="1" checked="checked"><div class="header">ABILITIES</div><span class="material-icons"></span><div class="sect"><span class="abilities-columns"><label><button type="roll" class="ability-button text-only" name="attr_strength_check_roll" title="%{selected|strength_check_roll}" value="@{strength_check_macro_text}"><span>STR</span></button> <input type="text" class="hidden" name="attr_strength_check_macro_text" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Strength Check}} {{roll_low=[[ @{ability_check_die}cs ]]}} {{roll_target=[[ @{strength} ]]}}"></label> <input type="text" class="field-border" name="attr_strength" title="@{strength}" value="10"> <input type="checkbox" class="hidden exceptional" name="attr_exceptional_strength_flag" value="1"> <label class="toggle-exceptional strength"><input type="text" class="width-smallest" name="attr_exceptionalstrength" title="@{exceptionalstrength | Must have an Ability of 18+ to access field." value="0"></label> <label><span class="stack-text">To-Hit Adj.</span></label> <input type="text" class="width-smaller" name="attr_meleebonus" title="@{meleebonus} | Melee attack &quot;To-Hit&quot; adjustment." value="0"> <label><span class="stack-text">Damage Adj.</span></label> <input type="text" class="width-smaller" name="attr_dmgbonus" title="@{dmgbonus} | Melee attack Damage adjustment." value="0"> <label><span class="stack-text">Weight All.</span></label> <input type="text" class="width-fill" name="attr_encumbrancebonus" title="@{encumbrancebonus} | Weight Allowance in gp. Keep this value as gp even if the sheet is using the lbs option." value="0"> <label class="inline-label"><button class="dice-button text-only" type="roll" name="attr_minorstrengthfeat-roll" title="%{selected|minorstrengthfeat-roll} | Minor Strength Feat" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Open Doors}} {{roll_low=[[ ?{Open Door die|1d6 [STR<=18],1d6 |1d8 [STR = 19 or 20],1d8 |1d10 [STR = 21],1d10 |1d12 [STR = 22 or 23],1d12 |1d12 [STR = 24],1d20 |2d12 [STR = 25],2d12}cs ]]}} {{roll_target=[[ @{minorstrengthfeat} ]]}} {{locked_doors=You have a chance ([[@{selected|minorstrengthfeat_locked}]] in 6) to force open a locked, barred, magically held, or wizard locked door. Fighter's only. note: Roll will use a larger die for STR 24 or 25.}} {{[Open a Locked Door?](~@{character_id}|minorstrengthfeat_locked-roll)}}"><span>Open Doors</span></button></label> <span class="two-columns"><label><input type="text" class="width-smallest" name="attr_minorstrengthfeat" title="@{minorstrengthfeat} | Minor Strength Feat: uses the highest # from STR table." value="0"></label> <input type="checkbox" class="hidden exceptional" name="attr_exceptional_strength_flag" value="1"> <sup class="toggle-exceptional strength" title="@{minorstrengthfeat_locked} | Fighter's can attempt to force open a locked, barred, magically held, or wizard locked door with exceptional Strength of 18(99)+."><span name="attr_minorstrengthfeat_locked"></span> </sup><input type="hidden" name="attr_minorstrengthfeat_locked" value="0"> <button class="hidden" type="roll" name="attr_minorstrengthfeat_locked-roll" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Open Locked Door}} {{roll_low=[[ ?{Locked, Barred, or Magically Held Door die|1d6 [STR = 18(91-100) or 19-23],1d6 |1d8 [STR = 24],1d8 |1d10 [STR = 25],1d10}cs ]] }} {{roll_target=[[ @{minorstrengthfeat_locked} ]]}}"></button> </span><label class="inline-label"><button class="dice-button text-only" type="roll" name="attr_majorstrengthfeat-roll" title="%{selected|majorstrengthfeat-roll} | Major Strength Feat" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Bend Bars/Lift Gates}} {{roll_low=[[1d100cs]]%}} {{roll_target=[[ @{majorstrengthfeat}]]%}}"><span>Bend</span></button></label> <label class="label-percent"><input type="text" class="width-smaller" name="attr_majorstrengthfeat" title="@{majorstrengthfeat} | Major Strength Feat" value="0"></label> <label><button type="roll" class="ability-button text-only" name="attr_intelligence_check_roll" title="%{selected|intelligence_check_roll}" value="@{intelligence_check_macro_text}"><span>INT</span></button> <input type="text" class="hidden" name="attr_intelligence_check_macro_text" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Intelligence Check}} {{roll_low=[[ @{ability_check_die}cs ]]}} {{roll_target=[[ @{intelligence} ]]}}"></label> <input type="text" class="field-border" name="attr_intelligence" title="@{intelligence}" value="10"> <input type="checkbox" class="hidden exceptional" name="attr_exceptional_intelligence_flag" value="1"> <label class="toggle-exceptional"><input type="text" class="width-smallest" name="attr_exceptionalintelligence" title="@{exceptionalintelligence} | Must have an Ability of 18+ to access field." value="0"></label> <label><span class="stack-text">Add. Lang.</span></label> <input type="text" class="width-smaller" name="attr_bonuslanguages" title="@{bonuslanguages} | Auto-filled based on Race and INT (see PHB)." value="0"> <label class="inline-label"><button class="dice-button text-only" type="roll" name="attr_knowspell-roll" title="%{selected|knowspell-roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Chance to Know Spell}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{knowspell} ]]%}}"><span>Know Spell</span></button></label> <label class="label-percent"><input type="text" class="width-smaller" name="attr_knowspell" title="@{knowspell}" value="0"></label> <label><span class="stack-text">Min # Spells</span></label> <input type="text" class="width-smaller" name="attr_minspells" title="@{minspells}" value="0"> <label><span class="stack-text">Max # Spells</span></label> <input type="text" class="width-smaller" name="attr_maxspells" title="@{maxspells}" value="0"> <label class="span-two inline-label"><button class="dice-button text-only" type="roll" name="attr_init-roll" title="%{selected|init-roll}" value="@{whisper_pc} @{init_macro_text}"><span>Initiative</span></button></label> <label><button type="roll" class="ability-button text-only" name="attr_wisdom_check_roll" title="%{selected|wisdom_check_roll}" value="@{wisdom_check_macro_text}"><span>WIS</span></button> <input type="text" class="hidden" name="attr_wisdom_check_macro_text" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Wisdom Check}} {{roll_low=[[ @{ability_check_die}cs ]]}} {{roll_target=[[ @{wisdom} ]]}}"></label> <input type="text" class="field-border" name="attr_wisdom" title="@{wisdom}" value="10"> <input type="checkbox" class="hidden exceptional" name="attr_exceptional_wisdom_flag" value="1"> <label class="toggle-exceptional"><input type="text" class="width-smallest" name="attr_exceptionalwisdom" title="@{exceptionalwisdom} | Must have an Ability of 18+ to access field." value="0"></label> <label class="inline-label"><button class="dice-button text-only" type="roll" name="attr_mentalsave-roll" title="%{selected|mentalsave-roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Mental Save}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] + [[ @{mentalsavebonus} ]][BON] ]]}} {{roll_target=[[?{Target # for success?|20}]]}} {{wis_applied=[[ @{mentalsavebonus} ]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span>Mental Save</span></button></label> <input type="text" class="width-smaller" name="attr_mentalsavebonus" title="@{mentalsavebonus}" value="0"> <label><span class="stack-text">Spell Bonus</span></label> <span class="autoexpand span-two" style="margin-left: 2px;"><input type="text" name="attr_spellbonus" class="no-border" title="@{spellbonus} | Track the # of bonus spells/level as per the PHB." value="0/0/0/0/0/0/0"> <span name="attr_spellbonus"></span> </span><label></label> <label class="inline-label"><button class="dice-button text-only" type="roll" name="attr_spellfailure-roll" title="%{selected|spellfailure-roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Chance of Spell Failure}} {{roll_high=[[ 1d100 ]]%}} {{roll_target=[[ @{spellfailure} ]]%}}"><span>Spell Failure</span></button></label> <label class="label-percent"><input type="text" class="width-smaller" name="attr_spellfailure" title="@{spellfailure}" value="0"></label> <label class="span-two inline-label"><button class="dice-button text-only" type="roll" name="attr_surprise-roll" title="%{selected|surprise-roll}" value="@{whisper_pc} @{surprise_macro_text}"><span>Surprise</span></button></label> <label><button type="roll" class="ability-button text-only" name="attr_dexterity_check_roll" title="%{selected|dexterity_check_roll}" value="@{dexterity_check_macro_text}"><span>DEX</span></button> <input type="text" class="hidden" name="attr_dexterity_check_macro_text" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Dexterity Check}} {{roll_low=[[ @{ability_check_die}cs ]]}} {{roll_target=[[ @{dexterity} ]]}}"></label> <input type="text" class="field-border" name="attr_dexterity" title="@{dexterity}" value="10"> <input type="checkbox" class="hidden exceptional" name="attr_exceptional_dexterity_flag" value="1"> <label class="toggle-exceptional"><input type="text" class="width-smallest" name="attr_exceptionaldexterity" title="@{exceptionaldexterity} | Must have an Ability of 18+ to access field." value="0"></label> <label><span class="stack-text">Reaction Adj.</span></label> <input type="text" class="hidden" name="attr_surprisebonus" value="0"> <input type="text" class="width-smaller" name="attr_surprisebonus_inverted" title="@{surprisebonus} | Modifier for initiative/surprise and missile-based combat attacks." value="0"> <label><span class="stack-text">Missile Adj.</span></label> <input type="text" class="width-smaller" name="attr_rangedbonus" title="@{rangedbonus} | Ranged attack 'To-Hit' adjustment." value="0"> <label><span class="stack-text">Defensive Adj.</span></label> <input type="text" class="width-smaller" name="attr_armorbonus" title="@{armorbonus} | Used to compute AC in the 'Armor Details' section above." value="0"> <label class="span-three"><span>Surprise Chance</span> <input type="text" class="width-smaller" name="attr_surprise" title="@{surprise}" value="2"></label> <label><select name="attr_surprise_die" class="text-small" title="@{surprise_die}"><option value="6" selected="selected">of 6</option><option value="8">of 8</option><option value="10">of 10</option><option value="12">of 12</option><option value="20">of 20</option><option value="100">of 100</option></select></label> <label><button type="roll" class="ability-button text-only" name="attr_constitution_check_roll" title="%{selected|constitution_check_roll}" value="@{constitution_check_macro_text}"><span>CON</span></button> <input type="text" class="hidden" name="attr_constitution_check_macro_text" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Constitution Check}} {{roll_low=[[ @{ability_check_die}cs ]]}} {{roll_target=[[ @{constitution} ]]}}"></label> <input type="text" class="field-border" name="attr_constitution" title="@{constitution}" value="10"> <input type="checkbox" class="hidden exceptional" name="attr_exceptional_constitution_flag" value="1"> <label class="toggle-exceptional"><input type="text" class="width-smallest" name="attr_exceptionalconstitution" title="@{exceptionalconstitution} | Must have an Ability of 18+ to access field." value="0"></label> <label><span class="stack-text">HP Adj.</span></label> <input type="text" class="width-smaller" name="attr_hitpointbonus" title="@{hitpointbonus} | Max +2 unless Fighter, Paladin, or Ranger." value="0"> <label class="inline-label"><button class="dice-button text-only" type="roll" name="attr_systemshock-roll" title="%{selected|systemshock-roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=System Shock Survival}} {{roll_low=[[ 1d100 ]] %}} {{roll_target=[[ @{systemshock} ]]%}}"><span>Sys. Shock</span></button></label> <label class="label-percent"><input type="text" class="width-smaller" name="attr_systemshock" title="@{systemshock}" value="0"></label> <label class="inline-label"><button class="dice-button text-only" type="roll" name="attr_resurrectionsurvival-roll" title="%{selected|resurrectionsurvival-roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Resurrection Survival}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{resurrectionsurvival} ]]%}}"><span>Res. Surv.</span></button></label> <label class="label-percent"><input type="text" class="width-smaller" name="attr_resurrectionsurvival" title="@{resurrectionsurvival}" value="0"></label> <label class="span-four inline-label"><button type="roll" class="dice-button text-only" name="roll_surprise_others-roll" title="%{selected|surprise_others-roll}" value="@{whisper_pc} @{surprise_others_macro_text}"><span>Surprise Others</span></button> <span>Adj.</span> <input type="text" class="width-smaller" name="attr_surprise_others_mod" title="@{surprise_others_mod} | The modifier is typically indicated as bonus although the value is SUBTRACTED from the opponents Surprise check." value="0"></label> <label><button type="roll" class="ability-button text-only" name="attr_charisma_check_roll" title="%{selected|charisma_check_roll}" value="@{charisma_check_macro_text}"><span>CHA</span></button> <input type="text" class="hidden" name="attr_charisma_check_macro_text" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Charisma Check}} {{roll_low=[[ @{ability_check_die}cs ]]}} {{roll_target=[[ @{charisma} ]]}}"></label> <input type="text" class="field-border" name="attr_charisma" title="@{charisma}" value="10"> <input type="checkbox" class="hidden exceptional" name="attr_exceptional_charisma_flag" value="1"> <label class="toggle-exceptional"><input type="text" class="width-smallest" name="attr_exceptionalcharisma" title="@{exceptionalcharisma} | Must have an Ability of 18+ to access field." value="0"></label> <label><span class="stack-text">Max # Hench.</span></label> <input type="text" class="width-smaller" name="attr_maximumhenchmen" title="@{maximumhenchmen}" value="0"> <label class="inline-label"><button class="dice-button text-only" type="roll" name="attr_loyalty-roll" title="%{selected|loyalty-roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Loyalty}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ 50 + (@{loyaltybonus}[LOYALTY]) + ( ?{Modifier?|0}[MOD] ) ]]%}} {{Loyalty Applied=[[@{loyaltybonus}]]%}} {{mod_applied=[[ ?{Modifier?|0} ]]%}}"><span>Loyalty</span></button></label> <label class="label-percent"><input type="text" class="width-smaller" name="attr_loyaltybonus" title="@{loyaltybonus}" value="0"></label> <label class="inline-label"><button class="dice-button text-only" type="roll" name="attr_reaction-roll" title="%{selected|reaction-roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Reaction}} {{roll=[[ 1d100 + (@{reactionbonus}[BON]) + ( ?{Modifier?|0}[MOD] ) ]]%}} {{Reaction Applied=[[@{reactionbonus}]]%}} {{mod_applied=[[ ?{Modifier?|0} ]]%}}"><span>React.</span></button></label> <label class="label-percent"><input type="text" class="width-smaller" name="attr_reactionbonus" title="@{reactionbonus}" value="0"></label> <label class="inline-label"><button class="dice-button text-only" type="roll" name="attr_morale-roll" title="%{selected|morale-roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Morale Check}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{morale_base}[BASE] + ( ?{Modifier?|0}[MOD] ) ]]%}} {{mod_applied=[[ ?{Modifier?|0} ]]%}}"><span>Morale</span></button></label> <label class="label-percent"><input type="text" class="width-smaller" name="attr_morale_base" title="@{morale_base} | Base is 50%. Adjust +/- per circumstances." value="50"></label> <label></label> <label></label> <label class="toggle-comeliness"><button type="roll" class="ability-button text-only"><span>COM</span></button></label> <input type="text" class="field-border toggle-comeliness" name="attr_comeliness" title="@{comeliness} | Score should reflect 'Adjusted Comeliness' which takes into account Charisma and/or any racial adjustments." value="10"> <input type="checkbox" class="hidden exceptional" name="attr_exceptional_comeliness_flag" value="1"> <label class="toggle-exceptional toggle-comeliness"><input type="text" class="width-smallest" name="attr_exceptionalcomeliness" title="@{exceptionalcomeliness} | Must have an Ability of 18+ to access field." value="0"></label> <span class="span-ten inline-label toggle-comeliness"><b class="text-large">=</b> <span>Base COM</span> <input type="text" class="width-smaller" name="attr_comeliness_base" title="@{comeliness_base} | Comeliness base score. ie un-adjusted roll." value="8"> <b class="text-large">+</b> <span>CHA Adj.</span> <input type="text" class="width-smaller" name="attr_comeliness_cha_adj" title="@{comeliness_cha_adj} | Same race Bonus/Penalty adjustment. Auto-calculated based on Charisma." value="0" readonly="readonly"> <b class="text-large">+</b> <span>Racial Adj.</span> <select name="attr_comeliness_racial_adj" title="@{comeliness_racial_adj} | Bonus/Penalty adjustment as perceived by other races."><option value="-3">Half-Orcs</option><option value="-1">Dwarves, Gnomes</option><option value="0" selected="selected">Halflings, Humans</option><option value="1">Half-Elves, Sylvan Elves</option><option value="2">Gray Elves, High Elves</option></select> <input type="text" class="width-smaller" name="attr_comeliness_racial_adj" value="0" readonly="readonly"></span></span></div><div class="sect border linear-background"><span class="subheader center width-fill">Speed and Movement</span> <span class="basemove-columns column-header"><span class="span-five">Adjusted Speed</span> <span></span> <span class="stack-text">Explore/<wbr>Map</span> <span class="stack-text">Known Route</span> <span>Run/Flee</span> </span><span class="basemove-columns"><label for="move_normal" class="label-under"><input id="move_normal" type="checkbox" class="hidden current-encumbrance" name="attr_current_encumbrance_move" value="0" checked="checked" readonly="readonly"> <input type="text" class="width-smaller field-border" name="attr_movement" title="@{movement}" value="12"> <span>Normal</span></label> <label for="move_heavy" class="label-under" title="@{movement_heavy} | No DEX Bonus to Init."><input id="move_heavy" type="checkbox" class="hidden current-encumbrance" name="attr_current_encumbrance_move" value="1" readonly="readonly"> <input type="text" class="hidden" name="attr_movement_heavy" value="0" readonly="readonly"> <span class="readonly-span no-border" name="attr_movement_heavy" title="@{movement_heavy}"></span> <span>Heavy</span></label> <label for="move_very_heavy" class="label-under" title="@{movement_load} | No DEX Bonus to Init, Delayed, +1 Segment if Surprised."><input id="move_very_heavy" type="checkbox" class="hidden current-encumbrance" name="attr_current_encumbrance_move" value="2" readonly="readonly"> <input type="text" class="hidden" name="attr_movement_load" value="0" readonly="readonly"> <span class="readonly-span no-border" name="attr_movement_load" title="@{movement_load}"></span> <span class="nowrap">Very Heavy</span></label> <label for="move_encumbered" class="label-under" title="@{movement_max} |No DEX Bonus to Init or AC, Go Last in Init, +2 Segments if Surprised, Cannot Charge, Enemies get +2 to-hit."><input id="move_encumbered" type="checkbox" class="hidden current-encumbrance" name="attr_current_encumbrance_move" value="3" readonly="readonly"> <input type="text" class="hidden" name="attr_movement_max" value="0" readonly="readonly"> <span class="readonly-span no-border" name="attr_movement_max" title="@{movement|max}"></span> <span class="long">Encumbered</span></label><h4 class="stack-text">Move/<wbr>Round</h4><label class="text-large">=</label> <label class="label-under" title="@{movement_normal}"><input type="text" class="hidden" name="attr_movement_normal" value="0" readonly="readonly"> <span class="readonly-span no-border" name="attr_movement_normal" title="@{movement_normal}"></span> <span class="text-small">(Speed x1')</span></label> <label class="label-under" title="@{movement_known}"><input type="text" class="hidden" name="attr_movement_known" value="0" readonly="readonly"> <span class="readonly-span no-border" name="attr_movement_known" title="@{movement_known}"></span> <span class="text-small">(Speed x5')</span></label> <label class="label-under" title="@{movement_run}"><input type="text" class="hidden" name="attr_movement_run" value="0" readonly="readonly"> <span class="readonly-span no-border" name="attr_movement_run" title="@{movement_run}"></span> <span class="text-small">(Speed x10')</span></label> <input type="text" class="hidden" name="attr_movement_crawl" value="0" readonly="readonly"> <span class="span-six"><label class="inline-label" title="@{current_bulk_label} | Current Bulk as per active armors, shield, clothing, etc."><span class="stack-text">Current Armor Bulk:</span> <input type="text" class="width-fill height-short" name="attr_current_bulk_label" value="" placeholder="no bulk" readonly="readonly"></label> <label class="inline-label" title="@{current_encumbrance_label} | Encumbrance is the current load for carried weight vs strength adjustments."><span class="stack-text">Current Encumbrance:</span> <input type="text" class="width-fill height-short" style="margin-right: -1em;" name="attr_current_encumbrance_label" value="" placeholder="no encumbrance" readonly="readonly"></label> </span><label class="inline-label span-three right" title="@{autocalc_movement_flag} | Let the sheet calculate Movement/Speed. Uses base movement and the current encumbrance(STR vs total_weight carried). Note: Load can can be set manually but any changes to base movement, encumbrance, or opening the sheet will trigger a re-calc."><span class="stack-text">Auto-Calc Movement:</span> <input type="checkbox" name="attr_autocalc_movement_flag" value="1" checked="checked"></label></span></div><hr></section><section class="saves-box"><input type="checkbox" class="sect-show" name="attr_saves_info_show" value="1" checked="checked"><div class="header">SAVES</div><span class="material-icons"></span><div class="saves-class sect"><label></label> <label class="center"><span>Class</span></label> <label class="center"><span>Level</span></label> <label class="inline-label" title="@{autofill_saves} | Let the sheet auto-fill the Base Saves when the class and level selectors are changed."><span>Autofill Base:</span> <input type="checkbox" name="attr_autofill_saves" value="1" checked="checked"></label> <label class="center"><select class="width-fill border" name="attr_saves_class" title="@{saves_class}"><option value="0" selected="selected" style="font-weight: bold;">~ Select a Class ~</option><option value="1">Cleric</option><option value="2">Druid</option><option value="3">Fighter, Paladin, or Ranger</option><option value="4">Magic-User or Illusionist</option><option value="5">Thief</option><option value="6">Monk</option><option value="7">Assassin</option><option value="8">Other 0-lvl Types</option></select></label> <label class="center"><input class="width-small border" type="number" min="0" name="attr_saves_level" value="1" title="@{saves_level}"></label></div><div class="sect"><span class="saves-columns column-header"><span></span> <span>TOTAL</span> <span></span> <span>Base/Class</span> <span></span> <span>Racial Adj.</span> <span></span> <span>Ability Adj.</span> <span></span> <span>Misc. Adj.</span> <span></span> <span>Temp. Adj.</span> </span><span class="saves-columns"><button class="saves-button text-only" type="roll" name="roll_saveparalysispoisondeath" title="%{selected|saveparalysispoisondeath}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Paralysis, Poison or Death Magic}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{saveparalysispoisondeath}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span>Paralysis, Poison, or Death Magic</span></button> <span title="@{saveparalysispoisondeath}"><input type="text" class="width-smaller field-border readonly-span" name="attr_saveparalysispoisondeath" title="@{saveparalysispoisondeath}" value="20"></span><span class="text-large">=</span> <span><input type="text" class="width-smaller" name="attr_saveparalysispoisondeath_base" title="@{saveparalysispoisondeath_base}" value="20"></span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_saveparalysispoisondeath_racial_mod" title="@{saveparalysispoisondeath_racial_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_saveparalysispoisondeath_ability_mod" title="@{saveparalysispoisondeath_ability_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_saveparalysispoisondeath_misc_mod" title="@{saveparalysispoisondeath_misc_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_saveparalysispoisondeath_temp_mod" title="@{saveparalysispoisondeath_temp_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span></span><span class="saves-columns"><button class="saves-button text-only" type="roll" name="roll_savepetrificationpolymorph" title="%{selected|savepetrificationpolymorph}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Petrification or Polymorph}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{savepetrificationpolymorph}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span>Petrification or Polymorph</span></button> <span title="@{savepetrificationpolymorph}"><input type="text" class="width-smaller field-border readonly-span" name="attr_savepetrificationpolymorph" title="@{savepetrificationpolymorph}" value="20"></span><span class="text-large">=</span> <span><input type="text" class="width-smaller" name="attr_savepetrificationpolymorph_base" title="@{savepetrificationpolymorph_base}" value="20"></span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savepetrificationpolymorph_racial_mod" title="@{savepetrificationpolymorph_racial_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savepetrificationpolymorph_ability_mod" title="@{savepetrificationpolymorph_ability_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savepetrificationpolymorph_misc_mod" title="@{savepetrificationpolymorph_misc_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savepetrificationpolymorph_temp_mod" title="@{savepetrificationpolymorph_temp_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span></span><span class="saves-columns"><button class="saves-button text-only" type="roll" name="roll_saverodsstaveswands" title="%{selected|saverodsstaveswands}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Rods, Staves, or Wands}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{saverodsstaveswands}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span>Rods, Staves, or Wands</span></button> <span title="@{saverodsstaveswands}"><input type="text" class="width-smaller field-border readonly-span" name="attr_saverodsstaveswands" title="@{saverodsstaveswands}" value="20"></span><span class="text-large">=</span> <span><input type="text" class="width-smaller" name="attr_saverodsstaveswands_base" title="@{saverodsstaveswands_base}" value="20"></span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_saverodsstaveswands_racial_mod" title="@{saverodsstaveswands_racial_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_saverodsstaveswands_ability_mod" title="@{saverodsstaveswands_ability_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_saverodsstaveswands_misc_mod" title="@{saverodsstaveswands_misc_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_saverodsstaveswands_temp_mod" title="@{saverodsstaveswands_temp_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span></span><span class="saves-columns"><button class="saves-button text-only" type="roll" name="roll_savebreathweapons" title="%{selected|savebreathweapons}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Breath Weapon}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{savebreathweapons}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span>Breath Weapon</span></button> <span title="@{savebreathweapons}"><input type="text" class="width-smaller field-border readonly-span" name="attr_savebreathweapons" title="@{savebreathweapons}" value="20"></span><span class="text-large">=</span> <span><input type="text" class="width-smaller" name="attr_savebreathweapons_base" title="@{savebreathweapons_base}" value="20"></span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savebreathweapons_racial_mod" title="@{savebreathweapons_racial_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savebreathweapons_ability_mod" title="@{savebreathweapons_ability_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savebreathweapons_misc_mod" title="@{savebreathweapons_misc_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savebreathweapons_temp_mod" title="@{savebreathweapons_temp_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span></span><span class="saves-columns"><button class="saves-button text-only" type="roll" name="roll_savespells" title="%{selected|savespells}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Spells}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{savespells}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span>Spells</span></button> <span title="@{savespells}"><input type="text" class="width-smaller field-border readonly-span" name="attr_savespells" title="@{savespells}" value="20"></span><span class="text-large">=</span> <span><input type="text" class="width-smaller" name="attr_savespells_base" title="@{savespells_base}" value="20"></span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savespells_racial_mod" title="@{savespells_racial_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savespells_ability_mod" title="@{savespells_ability_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savespells_misc_mod" title="@{savespells_misc_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savespells_temp_mod" title="@{savespells_temp_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span></span><input type="checkbox" class="sect-show" name="attr_custom_saves_show" value="1"> <span class="subheader">Custom Saves</span><span class="material-icons"></span><div class="sect"><span class="saves-columns"><details><summary><span class="material-icons custom-btn-nav"></span> <button class="saves-button text-only" type="roll" name="roll_savemisc" title="%{selected|savemisc}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{savemisc_name}}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{savemisc}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span name="attr_savemisc_name"></span></button></summary><input type="text" class="width-fill" name="attr_savemisc_name" title="@{savemisc_name}" value="Custom..."></details><span title="@{savemisc}"><input type="text" class="width-smaller field-border readonly-span" name="attr_savemisc" title="@{savemisc}" value="20"></span><span class="text-large">=</span> <span><input type="text" class="width-smaller" name="attr_savemisc_base" title="@{savemisc_base}" value="20"></span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savemisc_racial_mod" title="@{savemisc_racial_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savemisc_ability_mod" title="@{savemisc_ability_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savemisc_misc_mod" title="@{savemisc_misc_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savemisc_temp_mod" title="@{savemisc_temp_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span></span><span class="saves-columns"><details><summary><span class="material-icons custom-btn-nav"></span> <button class="saves-button text-only" type="roll" name="roll_savemisc1" title="%{selected|savemisc1}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{savemisc1_name}}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{savemisc1}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span name="attr_savemisc1_name"></span></button></summary><input type="text" class="width-fill" name="attr_savemisc1_name" title="@{savemisc1_name}" value="Custom..."></details><span title="@{savemisc1}"><input type="text" class="width-smaller field-border readonly-span" name="attr_savemisc1" title="@{savemisc1}" value="20"></span><span class="text-large">=</span> <span><input type="text" class="width-smaller" name="attr_savemisc1_base" title="@{savemisc1_base}" value="20"></span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savemisc1_racial_mod" title="@{savemisc1_racial_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savemisc1_ability_mod" title="@{savemisc1_ability_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savemisc1_misc_mod" title="@{savemisc1_misc_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savemisc1_temp_mod" title="@{savemisc1_temp_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span></span><span class="saves-columns"><details><summary><span class="material-icons custom-btn-nav"></span> <button class="saves-button text-only" type="roll" name="roll_savemisc2" title="%{selected|savemisc2}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{savemisc2_name}}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{savemisc2}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span name="attr_savemisc2_name"></span></button></summary><input type="text" class="width-fill" name="attr_savemisc2_name" title="@{savemisc2_name}" value="Custom..."></details><span title="@{savemisc2}"><input type="text" class="width-smaller field-border readonly-span" name="attr_savemisc2" title="@{savemisc2}" value="20"></span><span class="text-large">=</span> <span><input type="text" class="width-smaller" name="attr_savemisc2_base" title="@{savemisc2_base}" value="20"></span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savemisc2_racial_mod" title="@{savemisc2_racial_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savemisc2_ability_mod" title="@{savemisc2_ability_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savemisc2_misc_mod" title="@{savemisc2_misc_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select> </span><span class="text-large">Â±</span> <span><select class="width-small" name="attr_savemisc2_temp_mod" title="@{savemisc2_temp_mod}"><option value="-10" class="option-bonus" title="Bonus">+10</option><option value="-9" class="option-bonus" title="Bonus">+9</option><option value="-8" class="option-bonus" title="Bonus">+8</option><option value="-7" class="option-bonus" title="Bonus">+7</option><option value="-6" class="option-bonus" title="Bonus">+6</option><option value="-5" class="option-bonus" title="Bonus">+5</option><option value="-4" class="option-bonus" title="Bonus">+4</option><option value="-3" class="option-bonus" title="Bonus">+3</option><option value="-2" class="option-bonus" title="Bonus">+2</option><option value="-1" class="option-bonus" title="Bonus">+1</option><option value="0" selected="selected">0</option><option value="1" class="option-penalty" title="Penalty">-1</option><option value="2" class="option-penalty" title="Penalty">-2</option><option value="3" class="option-penalty" title="Penalty">-3</option><option value="4" class="option-penalty" title="Penalty">-4</option><option value="5" class="option-penalty" title="Penalty">-5</option><option value="6" class="option-penalty" title="Penalty">-6</option><option value="7" class="option-penalty" title="Penalty">-7</option><option value="8" class="option-penalty" title="Penalty">-8</option><option value="9" class="option-penalty" title="Penalty">-9</option><option value="10" class="option-penalty" title="Penalty">-10</option></select></span></span></div><span class="inline-label"><label class="inline-label width-auto"><button type="roll" name="roll_magicresistance_roll" class="dice-button text-only" title="%{selected|magicresistance_roll}" value="@{whisper_pc} &amp;{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Magic Resistance Notes}} {{freetext=@{magic_resistance}}}"><span>Magic Resistance Notes:</span></button></label> <textarea class="height-short" name="attr_magic_resistance" title="@{magic_resistance}" placeholder="Nil"></textarea> </span><span class="inline-label"><label class="inline-label width-auto"><button type="roll" name="roll_savingthrow_notes_roll" class="dice-button text-only" title="%{selected|savingthrow_notes_roll}" value="@{whisper_pc} &amp;{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Saving Throw Notes}} {{freetext=@{savingthrow_notes}}}"><span>Saving Throw Notes:</span></button></label> <textarea name="attr_savingthrow_notes" class="height-short" title="@{savingthrow_notes}" placeholder="Resistances, Immunities, Saving Throw adjustments, etc."></textarea></span></div><hr></section><section class="weapons-box"><input type="checkbox" class="sect-show" name="attr_weapons_info_show" value="1" checked="checked"><div class="header"><span class="hide-as-npc">ATTACKS</span> <span class="hide-as-pc">ATTACKS</span></div><span class="material-icons"></span><div class="weapons-proficiency-box border sect hide-as-npc linear-background"><h4 class="inline-label">Weapon Proficiency:</h4><label><span class="stack-text-wide">Initial # of Weapons:</span> <input type="text" class="width-small" name="attr_weapon_proficiency_initial" value="0" title="@{weapon_proficiency_initial}"></label> <label><span class="stack-text-wide">Non-Proficiency Penalty:</span> <select class="width-small" name="attr_weapon_proficiency_penalty" title="@{weapon_proficiency_penalty}"><option value="0">0</option><option value="-1">-1</option><option value="-2" selected="selected">-2</option><option value="-3">-3</option><option value="-4">-4</option><option value="-5">-5</option></select> <input type="number" class="hidden" name="attr_weapon_proficiency_penalty" value="-2"></label> <label class="span-two" style="align-items: center;"><span class="stack-text-wide">Added Proficiency every:</span> <input type="text" class="width-small" name="attr_weapon_proficiency_added_per_level" value="0" title="@{weapon_proficiency_added_per_level}"> <span>Levels</span></label> <span></span> <label><span>Total</span> <input type="text" class="width-small" name="attr_weapon_proficiency_total" value="0" title="@{weapon_proficiency_total}"></label><h4 class="inline-label">Weapons:</h4><label class="span-six"><textarea class="height-short" name="attr_weapon_proficiency_list" title="@{weapon_proficiency_list}" placeholder="List weapon proficiencies"></textarea></label> <span class="span-all inline-label"><label title="@{meleebonus} | STR Melee attack adjustment."><span class="stack-text">To-Hit:</span> <input type="text" class="width-smaller" name="attr_meleebonus" value="0" readonly="readonly"></label> <label title="@{dmgbonus} | STR Melee attack Damage adjustment."><span class="stack-text">Damage:</span> <input type="text" class="width-smaller" name="attr_dmgbonus" value="0" readonly="readonly"></label> <label title="@{rangedbonus} | DEX Ranged attack 'To-Hit' adjustment."><span class="stack-text">Missile:</span> <input type="text" class="width-smaller" name="attr_rangedbonus" value="0" readonly="readonly"></label> <label class="inline-label"><span>Dual-Wield Pen:</span></label> <label title="@{dual_pen_primary} | -2 and adjusted as per Dexterity. Auto-calculated based on Dexterity."><span class="stack-text">Primary:</span> <input type="text" class="width-smaller" name="attr_dual_pen_primary" value="0" readonly="readonly"></label> <label title="@{dual_pen_secondary} | -4 and adjusted as per Dexterity. Auto-calculated based on Dexterity."><span class="stack-text">Secondary:</span> <input type="text" class="width-smaller" name="attr_dual_pen_secondary" value="0" readonly="readonly"></label> </span><label class="span-two inline-label" title="@{weapon_in_use} | Current weapon In-Use/Armed. If multiple attack rows are 'In-Use', the fastest weapon will be used here."><span>Weapon In-Use:</span> <input type="text" class="width-large" name="attr_weapon_in_use" value="" placeholder="n/a" readonly="readonly"></label> <label class="inline-label" title="@{weapon_in_use_speed} | Weapon Speed Factor."><span>Weapon Speed:</span> <input type="text" class="width-small" name="attr_weapon_in_use_speed" value="" placeholder="n/a" readonly="readonly"></label> <label class="inline-label" title="@{weapon_in_use_misc} | Weapon Misc."><span>Weapon Misc.:</span> <input type="text" class="width-small" name="attr_weapon_in_use_misc" value="" placeholder="n/a" readonly="readonly"></label></div><div class="sect" style="margin-top: -.5em;"><input type="checkbox" class="hidden toggle-input-attention" name="attr_attack_matrix_flag" value="1"> <span class="material-icons" title="Attack tables have not been set!">nearby_error</span> <input type="checkbox" class="hidden toggle-to-hit-table" name="attr_toggle_to_hit_table" value="1"> <input type="checkbox" class="sect-show" name="attr_matrix_info_show" value="1" style="margin-top: .75em;" title="Enter To-Hit Armor Class Table data." checked="checked"><div class="subheader"><span class="material-icons grid"></span> <span class="matrix-box label-matrix">ATTACK MATRIX</span> <span class="thac0-box label-matrix" title="Enter THAC0 data">THAC0</span></div><span class="material-icons"></span><div class="sect border"><input type="checkbox" class="toggle-matrix-autofill hidden" name="attr_autofill_matrix" value="1" checked="checked"> <input type="checkbox" class="toggle-sync-class hidden" name="attr_sync_matrix_class" value="1"> <input type="hidden" class="toggle-fighter5 hidden" name="attr_matrix_class" value="0"> <input type="checkbox" class="toggle-matrixhd hidden" name="attr_toggle_matrixhd" value="1"><div class="matrix-class"><label class="inline-label" title="@{autofill_matrix} | Let the sheet auto-fill the to-hit tables when the class and level selectors are changed in the attack Matrix window. NOTE: The Autofill Table option uses the 1e table data to establish the base THAC0, but it does not use the repeating 20's."><span>Autofill Table:</span> <input type="checkbox" name="attr_autofill_matrix" value="1" checked="checked"></label> <label class="show-sync-class"></label> <label class="show-sync-class"><span>Class</span></label> <label class="matrix-level"><span>Level</span></label> <label class="matrix-hd"><span>HD/Lvl</span></label> <label><span>Use Table</span></label> <label class="fighter5 matrix-level" title="@{toggle_fighter5} | Use a 5% progression to-Hit table. This is a Fighter only option and will have no effect for other classes." style="margin-inline: auto;"><span>Use 5%</span> <input type="checkbox" class="hidden" name="attr_toggle_fighter5" value="1"></label> <label></label> <label class="inline-label" title="@{sync_matrix_class} | Linking to a class will automatically adjust the to-Hit values when the linked class level changes. Ensure class and level are filled in at the top of the sheet. Note: multi-class/dual-class characters should pick the most favorable class. Defaults to Class 1 of 3 if enabled."><span>Sync to Class:</span> <input type="checkbox" name="attr_sync_matrix_class" value="1"></label> <label class="show-sync-class"><select class="class-selected border" name="attr_class_selected" title="@{class_selected} | Linking to a class will automatically adjust the to-Hit values when the linked class level changes. Note: multi-class/dual-class characters should pick the most favorable class."><option value="1" selected="selected">Class 1</option><option value="2">Class 2</option><option value="3">Class 3</option></select></label> <label class="show-sync-class"><input type="hidden" class="class-selected" name="attr_class_selected" value="1"> <input class="show-class1-name" name="attr_class" title="@{class}" placeholder="n/a" readonly="readonly"> <input class="show-class2-name" name="attr_secondclass" title="@{secondclass}" placeholder="n/a" readonly="readonly"> <input class="show-class3-name" name="attr_thirdclass" title="@{thirdclass}" placeholder="n/a" readonly="readonly"></label> <label class="matrix-level show-sync-class"><input class="width-small border" type="number" name="attr_matrix_level" value="0" title="@{matrix_level}" readonly="readonly"></label> <label class="matrix-level show-when-not-synced"><input class="width-small border" type="number" name="attr_matrix_level" value="0" title="@{matrix_level}"></label> <label class="matrix-hd"><select class="width-small-plus border" name="attr_matrix_hitdice" title="@{matrix_hitdice}"><option value="0" selected="selected">Select HD/Lvl</option><option value="1">up to 1-1</option><option value="2">1-1</option><option value="3">1</option><option value="4">1+</option><option value="5">2-3+</option><option value="6">4-5+</option><option value="7">6-7+</option><option value="8">8-9+</option><option value="9">10-11+</option><option value="10">12-13+</option><option value="11">14-15+</option><option value="12">16+</option></select></label> <label class="width-auto show-sync-class" title="@{matrix_class}"><select class="border readonly" name="attr_matrix_class" style="pointer-events: none;"><option value="0" selected="selected" style="font-weight: bold;">Select a Class</option><option value="1">Cleric, Druid or Monk</option><option value="2">Fighter, Paladin, Ranger or Bard</option><option value="3">Magic-User or Illusionist</option><option value="4">Thief or Assassin</option><option value="6">0-lvl Halfling or Human</option><option value="5">Monster</option></select></label> <label class="width-auto show-when-not-synced"><select class="border" name="attr_matrix_class" title="@{matrix_class}"><option value="0" selected="selected" style="font-weight: bold;">Select a Class or Monster</option><option value="1">Cleric, Druid or Monk</option><option value="2">Fighter, Paladin, Ranger or Bard</option><option value="3">Magic-User or Illusionist</option><option value="4">Thief or Assassin</option><option value="6">0-lvl Halfling or Human</option><option value="5">Monster</option></select></label> <label class="fighter5 matrix-level" title="@{toggle_fighter5} | Use a 5% progression to-Hit table. This is a Fighter only option and will have no effect for other classes."><input type="checkbox" name="attr_toggle_fighter5" value="1"></label> <label></label></div><div class="matrix-box"><section><span class="to-hit center"><span>-10</span> <span>-9</span> <span>-8</span> <span>-7</span> <span>-6</span> <span>-5</span> <span>-4</span> <span>-3</span> <span>-2</span> <span>-1</span> <span>0</span> <span>1</span> <span>2</span> <span>3</span> <span>4</span> <span>5</span> <span>6</span> <span>7</span> <span>8</span> <span>9</span> <span>10</span> </span><span class="to-hit-input"><span><input type="text" name="attr_thac-10" title="@{thac-10}" value="20"></span><span><input type="text" name="attr_thac-9" title="@{thac-9}" value="20"></span><span><input type="text" name="attr_thac-8" title="@{thac-8}" value="20"></span><span><input type="text" name="attr_thac-7" title="@{thac-7}" value="20"></span><span><input type="text" name="attr_thac-6" title="@{thac-6}" value="20"></span><span><input type="text" name="attr_thac-5" title="@{thac-5}" value="20"></span><span><input type="text" name="attr_thac-4" title="@{thac-4}" value="20"></span><span><input type="text" name="attr_thac-3" title="@{thac-3}" value="20"></span><span><input type="text" name="attr_thac-2" title="@{thac-2}" value="20"></span><span><input type="text" name="attr_thac-1" title="@{thac-1}" value="20"></span><span><input type="text" name="attr_thac0" title="@{thac0}" value="20"></span><span><input type="text" name="attr_thac1" title="@{thac1}" value="20"></span><span><input type="text" name="attr_thac2" title="@{thac2}" value="20"></span><span><input type="text" name="attr_thac3" title="@{thac3}" value="20"></span><span><input type="text" name="attr_thac4" title="@{thac4}" value="20"></span><span><input type="text" name="attr_thac5" title="@{thac5}" value="20"></span><span><input type="text" name="attr_thac6" title="@{thac6}" value="20"></span><span><input type="text" name="attr_thac7" title="@{thac7}" value="20"></span><span><input type="text" name="attr_thac8" title="@{thac8}" value="20"></span><span><input type="text" name="attr_thac9" title="@{thac9}" value="20"></span><span><input type="text" name="attr_thac10" title="@{thac10}" value="20"></span></span></section></div><div class="thac0-box"><section><span class="to-hit center"><span>-10</span> <span>-9</span> <span>-8</span> <span>-7</span> <span>-6</span> <span>-5</span> <span>-4</span> <span>-3</span> <span>-2</span> <span>-1</span> <span>0</span> <span>1</span> <span>2</span> <span>3</span> <span>4</span> <span>5</span> <span>6</span> <span>7</span> <span>8</span> <span>9</span> <span>10</span> </span><span class="to-hit-input"><span><input type="text" name="attr_thac0-10" title="@{thac0-10}" value="20"></span><span><input type="text" name="attr_thac0-9" title="@{thac0-9}" value="20"></span><span><input type="text" name="attr_thac0-8" title="@{thac0-8}" value="20"></span><span><input type="text" name="attr_thac0-7" title="@{thac0-7}" value="20"></span><span><input type="text" name="attr_thac0-6" title="@{thac0-6}" value="20"></span><span><input type="text" name="attr_thac0-5" title="@{thac0-5}" value="20"></span><span><input type="text" name="attr_thac0-4" title="@{thac0-4}" value="20"></span><span><input type="text" name="attr_thac0-3" title="@{thac0-3}" value="20"></span><span><input type="text" name="attr_thac0-2" title="@{thac0-2}" value="20"></span><span><input type="text" name="attr_thac0-1" title="@{thac0-1}" value="20"></span><span><input type="text" name="attr_thac00" title="@{thac00}" value="20" style="font-weight:bold; border: 3px solid black;"></span><span><input type="text" name="attr_thac01" title="@{thac01}" value="20"></span><span><input type="text" name="attr_thac02" title="@{thac02}" value="20"></span><span><input type="text" name="attr_thac03" title="@{thac03}" value="20"></span><span><input type="text" name="attr_thac04" title="@{thac04}" value="20"></span><span><input type="text" name="attr_thac05" title="@{thac05}" value="20"></span><span><input type="text" name="attr_thac06" title="@{thac06}" value="20"></span><span><input type="text" name="attr_thac07" title="@{thac07}" value="20"></span><span><input type="text" name="attr_thac08" title="@{thac08}" value="20"></span><span><input type="text" name="attr_thac09" title="@{thac09}" value="20"></span><span><input type="text" name="attr_thac010" title="@{thac010}" value="20"></span></span></section></div></div></div><div class="sect"><input type="checkbox" class="hidden toggle-to-hit-table" name="attr_toggle_to_hit_table" value="1"><fieldset class="repeating_weapon"><input type="hidden" class="weapon-type-toggle" name="attr_weapon_attack_type_flag" value="0"> <input type="checkbox" class="hidden" name="attr_weapon_critdamage_flag" value="1"><div class="top-row border-top-half"><span class="weapons-row1 center"><button class="dice-button hide-as-npc" type="roll" name="attr_weapon_attack_roll" title="%{selected|repeating_weapon_$X_weapon_attack_roll} | PC Roll" value="@{whisper_pc} @{weapon_macro_text} @{weapon_whisper_to_hit}"></button> <button class="dice-button hide-as-pc" type="roll" name="attr_weapon_attack_npc_roll" title="%{selected|repeating_weapon_$X_weapon_attack_npc_roll} | NPC Roll" value="@{whisper_npc} @{weapon_macro_text} @{weapon_damage_chat_menu_npc} @{weapon_whisper_to_hit}"></button> <label class="label-under-small repeating-name"><input type="text" class="text-large" name="attr_weapon_name" title="@{repeating_weapon_$X_weapon_name}" placeholder="Enter Weapon"> <span>Name</span></label> <label class="label-under-small"><select name="attr_weapon_attack_type" class="select-over-label" title="@{repeating_weapon_$X_weapon_attack_type}"><option value="0" selected="selected">Melee</option><option value="1">Ranged</option><option value="2">Touch</option><option value="3">Ranged Touch</option></select> <span class="hide-overflowing-text">Attack Type</span></label> <label class="label-under-small toggle-backstab hide-if-ranged"><span class="two-inputs-over-label"><input type="checkbox" class="toggle-field" name="attr_weapon_backstab_flag" title="@{repeating_weapon_$X_weapon_backstab_flag}" value="1"> <input type="text" class="width-smaller" name="attr_weapon_backstab_var" value="0" title="@{repeating_weapon_$X_weapon_backstab_bonus} | Uses the @{backstab_bonus} from the Thief's section below." readonly="readonly"> <input type="number" class="hidden" name="attr_weapon_backstab_bonus" value="0"> </span><span title="Apply a Backstab bonus to the attack roll.">Backstab</span></label> <label class="label-under-small"><input type="text" class="width-medium" name="attr_weapon_tohitbonus" title="@{repeating_weapon_$X_weapon_tohitbonus}" value="0"> <span>To-Hit</span></label> <label class="label-under-small"><input type="text" class="width-medium" name="attr_weapon_magicbonus" title="@{repeating_weapon_$X_weapon_magicbonus}" value="0"> <span>Magic</span></label> <label class="label-under-small"><span class="two-inputs-over-label"><input type="checkbox" class="toggle-field" name="attr_weapon_prof_flag" title="@{repeating_weapon_$X_weapon_prof_flag}" value="1"> <input type="text" class="width-smaller" name="attr_weapon_prof" value="0" title="@{repeating_weapon_$X_weapon_prof_pen} | Uses the value from @{weapon_proficiency_penalty} from Weapon Proficiency section above." readonly="readonly"> <input type="number" class="hidden" name="attr_weapon_prof_pen" value="0"> </span><span class="nowrap" title="Non-Proficiency penalty will be applied to the attack roll.">NP Penalty</span></label> <label class="label-under-small center" title="Dual-wield attack? Defaults to Primary -2, Secondary -4 and then auto-calculated according to Dex."><span class="two-inputs-over-label"><select class="select-over-label" name="attr_weapon_dual" title="@{repeating_weapon_$X_weapon_dual}"><option value="" selected="selected">Normal</option><option value="Primary">Primary</option><option value="Secondary">Secondary</option></select> <input type="text" class="width-smaller" name="attr_weapon_dual_pen" title="@{repeating_weapon_$X_weapon_dual_pen}" value="0"> </span><span>Dual-Wield</span></label> <label></label> </span><span class="weapons-row2 center"><label class="inline-label" title="@{repeating_weapon_$X_weapon_use} | Weapon is armed."><input type="checkbox" name="attr_weapon_use" value="1"> <span class="label-under-small">In-Use</span></label><details class="small-damage"><summary><span class="material-icons custom-btn-nav toggle-critdamage" title="Open to Roll Crit Damage"></span> <input type="text" class="width-medium" name="attr_weapon_damagesmallmedium" title="@{repeating_weapon_$X_weapon_damagesmallmedium}" value="" placeholder="1d4"> <button class="text-only hide-as-npc" type="roll" name="roll_weapon_damagesmallmedium_roll" title="%{repeating_weapon_$X_weapon_damagesmallmedium_roll} | PC Roll" value="@{weapon_damagesmallmedium_macro_text}"><span class="dice-button nowrap">DMG S/M</span></button> <button class="text-only hide-as-pc" type="roll" name="roll_weapon_damagesmallmedium_npc_roll" title="%{repeating_weapon_$X_weapon_damagesmallmedium_npc_roll} | NPC Roll" value="@{weapon_damagesmallmedium_macro_npc_text}"><span class="dice-button nowrap">DMG S/M</span></button> <input type="hidden" name="attr_weapon_damagesmallmedium_chat_menu" value=""> <input type="hidden" name="attr_weapon_critdamagesmallmedium_chat_menu" value=""> <input type="hidden" name="attr_weapon_damagesmallmedium_npc_chat_menu" value=""> <input type="hidden" name="attr_weapon_critdamagesmallmedium_npc_chat_menu" value=""> <textarea class="hidden" name="attr_weapon_damagesmallmedium_macro_text">@{whisper_pc} &{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{damage1vsSM=[[ (@{weapon_damagesmallmedium}) * @{weapon_backstab_mult}[MULT] + ( @{weapon_attackdmgbonus}[DMG_BON] ) + ( @{weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}}</textarea> <textarea class="hidden" name="attr_weapon_critdamagesmallmedium_macro_text">@{whisper_pc} &{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{damage1vsSM=[[ (@{weapon_critdamagesmallmedium}) * @{weapon_backstab_mult}[MULT] + ( @{weapon_attackdmgbonus}[DMG_BON] ) + ( @{weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}} {{crit=[[ @{toggle_critdamage} ]]}}</textarea> <textarea class="hidden" name="attr_weapon_damagesmallmedium_macro_npc_text">@{whisper_npc} &{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{damage1vsSM=[[ (@{weapon_damagesmallmedium}) * @{weapon_backstab_mult}[MULT] + ( @{weapon_attackdmgbonus}[DMG_BON] ) + ( @{weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}}</textarea> <textarea class="hidden" name="attr_weapon_critdamagesmallmedium_macro_npc_text">@{whisper_npc} &{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{damage1vsSM=[[ (@{weapon_critdamagesmallmedium}) * @{weapon_backstab_mult}[MULT] + ( @{weapon_attackdmgbonus}[DMG_BON] ) + ( @{weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}} {{crit=[[ @{toggle_critdamage} ]]}}</textarea></summary><label class="label-under toggle-critdamage"><button class="text-only hide-as-npc" type="roll" name="roll_weapon_critdamagesmallmedium_roll" title="%{repeating_weapon_$X_weapon_critdamagesmallmedium_roll} | PC Roll" value="@{weapon_critdamagesmallmedium_macro_text}"><span class="dice-button nowrap">Roll Crit</span></button> <button class="text-only hide-as-pc" type="roll" name="roll_weapon_critdamagesmallmedium_npc_roll" title="%{repeating_weapon_$X_weapon_critdamagesmallmedium_npc_roll} | NPC Roll" value="@{weapon_critdamagesmallmedium_macro_npc_text}"><span class="dice-button nowrap">Roll Crit</span></button> <textarea class="height-short toggle-macros" name="attr_weapon_critdamagesmallmedium" title="@{repeating_weapon_$X_weapon_critdamagesmallmedium} | Crit Damage roll in lieu of normal damage roll.  Defaults to x2 of the weapon's normal damage. ie @{weapon_damagesmallmedium}*2">(@{weapon_damagesmallmedium})*2</textarea></label></details><details class="large-damage"><summary><span class="material-icons custom-btn-nav toggle-critdamage"></span> <input type="text" class="width-medium" name="attr_weapon_damagelarge" title="@{repeating_weapon_$X_weapon_damagelarge}" value="" placeholder="1d6"> <button class="text-only hide-as-npc" type="roll" name="roll_weapon_damagelarge_roll" title="%{repeating_weapon_$X_weapon_damagelarge_roll} | PC Roll" value="@{weapon_damagelarge_macro_text}"><span class="dice-button nowrap">DMG LG</span></button> <button class="text-only hide-as-pc" type="roll" name="roll_weapon_damagelarge_npc_roll" title="%{repeating_weapon_$X_weapon_damagelarge_npc_roll} | NPC Roll" value="@{weapon_damagelarge_macro_npc_text}"><span class="dice-button nowrap">DMG LG</span></button> <input type="hidden" name="attr_weapon_damagelarge_chat_menu" value=""> <input type="hidden" name="attr_weapon_critdamagelarge_chat_menu" value=""> <input type="hidden" name="attr_weapon_damagelarge_npc_chat_menu" value=""> <input type="hidden" name="attr_weapon_critdamagelarge_npc_chat_menu" value=""> <textarea class="hidden" name="attr_weapon_damagelarge_macro_text">@{whisper_pc} &{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{damage1vsL=[[ (@{weapon_damagelarge}) * @{weapon_backstab_mult}[MULT] + ( @{weapon_attackdmgbonus}[DMG_BON] ) + ( @{weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}}</textarea> <textarea class="hidden" name="attr_weapon_critdamagelarge_macro_text">@{whisper_pc} &{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{damage1vsL=[[ (@{weapon_critdamagelarge}) * @{weapon_backstab_mult}[MULT] + ( @{weapon_attackdmgbonus}[DMG_BON] ) + ( @{weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}} {{crit=[[ @{toggle_critdamage} ]]}}</textarea> <textarea class="hidden" name="attr_weapon_damagelarge_macro_npc_text">@{whisper_npc} &{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{damage1vsL=[[ (@{weapon_damagelarge}) * @{weapon_backstab_mult}[MULT] + ( @{weapon_attackdmgbonus}[DMG_BON] ) + ( @{weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}}</textarea> <textarea class="hidden" name="attr_weapon_critdamagelarge_macro_npc_text">@{whisper_npc} &{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{damage1vsL=[[ (@{weapon_critdamagelarge}) * @{weapon_backstab_mult}[MULT] + ( @{weapon_attackdmgbonus}[DMG_BON] ) + ( @{weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}} {{crit=[[ @{toggle_critdamage} ]]}}</textarea></summary><label class="label-under toggle-critdamage"><button class="text-only hide-as-npc" type="roll" name="roll_weapon_critdamagelarge_roll" title="%{repeating_weapon_$X_weapon_critdamagelarge_roll} | PC Roll" value="@{weapon_critdamagelarge_macro_text}"><span class="dice-button nowrap">Roll Crit</span></button> <button class="text-only hide-as-pc" type="roll" name="roll_weapon_critdamagelarge_npc_roll" title="%{repeating_weapon_$X_weapon_critdamagelarge_npc_roll} | NPC Roll" value="@{weapon_critdamagelarge_macro_npc_text}"><span class="dice-button nowrap">Roll Crit</span></button> <textarea class="height-short toggle-macros" name="attr_weapon_critdamagelarge" title="@{repeating_weapon_$X_weapon_critdamagelarge} | Crit Damage roll instead of normal damage roll.  Defaults to x2 of the weapon's normal damage. ie @{weapon_damagelarge}*2">(@{weapon_damagelarge})*2</textarea></label></details><input type="hidden" name="attr_weapon_damage_chat_menu_npc" value="{{damagevsSMchatmenu=@{weapon_damagesmallmedium_npc_chat_menu}}} {{damagevsLchatmenu=@{weapon_damagelarge_npc_chat_menu}}} {{critdamagevsSMchatmenu=@{weapon_critdamagesmallmedium_npc_chat_menu}}} {{critdamagevsLchatmenu=@{weapon_critdamagelarge_npc_chat_menu}}}"> <label class="label-under-small toggle-backstab hide-if-ranged center"><span class="two-inputs-over-label"><input type="checkbox" class="toggle-field" name="attr_weapon_backstab_flag" title="@{repeating_weapon_$X_weapon_backstab_flag}" value="1"> <input type="text" class="width-smaller" name="attr_weapon_backstab" value="1" title="@{repeating_weapon_$X_weapon_backstab_mult} | Uses the value from @{backstab} from the Thief Skills section below." readonly="readonly"> <input type="number" class="hidden" name="attr_weapon_backstab_mult" value="1"> </span><span class="hide-overflowing-text" title="Apply a multiplier to the weapon damage rolled.">Backstab Mult</span></label> <label class="label-under-small"><input type="text" class="width-medium" name="attr_weapon_attackdmgbonus" title="@{repeating_weapon_$X_weapon_attackdmgbonus}" value="0"> <span>DMG Adj.</span></label> <label class="label-under-small" title="@{repeating_weapon_$X_weapon_attackdmgtype} | (P)iercing, (S)lashing, (B)ludgeoning, etc."><input type="text" class="width-medium" name="attr_weapon_attackdmgtype" value="" placeholder="-"> <span>DMG Type</span></label> <label class="label-under-small hide-if-melee"><input type="text" class="width-small" name="attr_weapon_rateoffire" title="@{repeating_weapon_$X_weapon_rateoffire}" value="" placeholder="-"> <span>Rate</span></label> <input type="checkbox" class="hidden toggle-input-error" name="attr_weapon_range_error" value="1"> <label class="label-under-small hide-if-melee center"><input type="text" class="width-medium" name="attr_weapon_range" title="@{repeating_weapon_$X_weapon_range} | Enter Short/Medium/Long ranges. Enter numbers only, separated by '/'. Entering a single value will be used for all ranges." value="" placeholder="S/M/L"> <span class="hide-if-ranged-touch hide-overflowing-text">RNG S/M/L</span> <span class="ranged-touch">Range</span></label> <input type="text" class="hidden" name="attr_weapon_range_short" value="1"> <input type="text" class="hidden" name="attr_weapon_range_medium" value="2"> <input type="text" class="hidden" name="attr_weapon_range_long" value="3"> <label class="label-under-small hide-if-ranged"><input type="text" class="width-smaller" name="attr_weapon_num_attacks" value="1" title="@{repeating_weapon_$X_weapon_num_attacks} | Indicate the number of multiple attacks."> <span>#Attacks</span></label> <label class="label-under-small hide-if-melee"><span class="two-inputs-over-label"><input type="text" class="width-smallest" name="attr_weapon_ammo" value="0" title="@{repeating_weapon_$X_weapon_ammo} | Use for resource tracking."> <span>/</span> <input type="text" class="width-smallest" name="attr_weapon_ammo_max" value="0" title="@{repeating_weapon_$X_weapon_ammo_max} | Use for resource tracking."> </span><span>Ammo/Max</span></label> <label class="label-under-small"><input type="text" class="width-smaller" name="attr_weapon_quantity" value="1" title="@{repeating_weapon_$X_weapon_quantity}"> <span>QTY</span></label> <label class="label-under-small"><textarea class="hidden" name="attr_weapon_whisper_to_hit">
                    %NEWLINE%/w gm &{template:attacks-table} {{color=@{color_option}}} {{ToHitAC-10=[[ @{thac-10} ]]}} {{ToHitAC-9=[[ @{thac-9} ]]}} {{ToHitAC-8=[[ @{thac-8} ]]}} {{ToHitAC-7=[[ @{thac-7} ]]}} {{ToHitAC-6=[[ @{thac-6} ]]}} {{ToHitAC-5=[[ @{thac-5} ]]}} {{ToHitAC-4=[[ @{thac-4} ]]}} {{ToHitAC-3=[[ @{thac-3} ]]}} {{ToHitAC-2=[[ @{thac-2} ]]}} {{ToHitAC-1=[[ @{thac-1} ]]}} {{ToHitAC0=[[ @{thac0} ]]}} {{ToHitAC1=[[ @{thac1} ]]}} {{ToHitAC2=[[ @{thac2} ]]}} {{ToHitAC3=[[ @{thac3} ]]}} {{ToHitAC4=[[ @{thac4} ]]}} {{ToHitAC5=[[ @{thac5} ]]}} {{ToHitAC6=[[ @{thac6} ]]}} {{ToHitAC7=[[ @{thac7} ]]}} {{ToHitAC8=[[ @{thac8} ]]}} {{ToHitAC9=[[ @{thac9} ]]}} {{ToHitAC10=[[ @{thac10} ]] }}
                </textarea> <select class="select-over-label" name="attr_weapon_whisper_to_hit_select" title="@{repeating_weapon_$X_weapon_whisper_to_hit_select}"><option value="0" class="matrix-box" selected="selected">Matrix</option><option value="1" class="thac0-box">THACO</option><option value="2">No</option></select> <span title="Include to-Hit AC table with attack?">/w gm?</span></label> </span><input type="hidden" name="attr_weapon_dmgbonus" value="0"> <input type="hidden" name="attr_weapon_weight" value="0"> <input type="hidden" name="attr_weapon_cost" value="0"></div><details class="border-bottom-half"><summary><span class="material-icons gear-nav" title="Expand/Hide sub-section"></span></summary><span class="to-hit-adj-box"><span class="to-hit center"><input type="text" class="width-small" name="attr_weapon_speed" title="@{repeating_weapon_$X_weapon_speed}" value="" placeholder="-"> <input type="text" class="width-small" name="attr_weapon_length" title="@{repeating_weapon_$X_weapon_length}" value="" placeholder="-"> <input type="text" class="width-small" name="attr_weapon_space" title="@{repeating_weapon_$X_weapon_space}" value="" placeholder="-"> <input type="text" class="width-small" name="attr_weapon_misc" title="@{repeating_weapon_$X_weapon_misc}" value="" placeholder="-"><h5>Armor Type:</h5><span>0</span> <span>1</span> <span>2</span> <span>3</span> <span>4</span> <span>5</span> <span>6</span> <span>7</span> <span>8</span> <span>9</span> <span>10</span> <input type="checkbox" name="attr_weapon_tohitacadj_flag" title="@{repeating_weapon_$x_weapon_tohitacadj_flag}" value="1"> <input type="text" class="hidden" name="attr_weapon_tohitacadj" value="{{ToHitArmorType0}} {{ToHitArmorType1}} {{ToHitArmorType2}} {{ToHitArmorType3}} {{ToHitArmorType4}} {{ToHitArmorType5}} {{ToHitArmorType6}} {{ToHitArmorType7}} {{ToHitArmorType8}} {{ToHitArmorType9}} {{ToHitArmorType10}}"> </span><span class="to-hit-input center"><label class="label-under-small">SPD</label> <label class="label-under-small">LEN</label> <label class="label-under-small">SPC</label> <label class="label-under-small">MISC</label><h5>Adjustment:</h5><span><input type="text" name="attr_weapon_thac_adj0" title="@{repeating_weapon_$x_weapon_thac_adj0}" value="0"></span><span><input type="text" name="attr_weapon_thac_adj1" title="@{repeating_weapon_$x_weapon_thac_adj1}" value="0"></span><span><input type="text" name="attr_weapon_thac_adj2" title="@{repeating_weapon_$x_weapon_thac_adj2}" value="0"></span><span><input type="text" name="attr_weapon_thac_adj3" title="@{repeating_weapon_$x_weapon_thac_adj3}" value="0"></span><span><input type="text" name="attr_weapon_thac_adj4" title="@{repeating_weapon_$x_weapon_thac_adj4}" value="0"></span><span><input type="text" name="attr_weapon_thac_adj5" title="@{repeating_weapon_$x_weapon_thac_adj5}" value="0"></span><span><input type="text" name="attr_weapon_thac_adj6" title="@{repeating_weapon_$x_weapon_thac_adj6}" value="0"></span><span><input type="text" name="attr_weapon_thac_adj7" title="@{repeating_weapon_$x_weapon_thac_adj7}" value="0"></span><span><input type="text" name="attr_weapon_thac_adj8" title="@{repeating_weapon_$x_weapon_thac_adj8}" value="0"></span><span><input type="text" name="attr_weapon_thac_adj9" title="@{repeating_weapon_$x_weapon_thac_adj9}" value="0"></span><span><input type="text" name="attr_weapon_thac_adj10" title="@{repeating_weapon_$x_weapon_thac_adj10}" value="0"></span><label class="label-under-small stack-text">show w/roll</label> </span></span><textarea class="height-short" name="attr_weapon_notes" title="@{repeating_weapon_$X_weapon_notes}" placeholder="Description"></textarea> <textarea class="height-short toggle-macros" name="attr_weapon_macro_text" title="@{repeating_weapon_$X_weapon_macro_text} | Caution: modifying the macro-text can break the roll.  Deleting the macro-text will safely reset the roll to the sheet's default macro.">&{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{dual=@{weapon_dual}}} {{attack1=[[ 1d20 + ( @{weapon_backstab_bonus}[BACKSTAB] ) + ( @{weapon_tohitbonus}[HIT_BON] ) + ( @{weapon_prof_pen}[PROF_PEN] ) + ( @{weapon_dual_pen}[DUAL_PEN] ) + ( @{weapon_magicbonus}[MAG_BON] ) + ( ?{To Hit Modifier?|0}[MISC_MOD] ) ]]}} {{damagevsSMchatmenu=@{weapon_damagesmallmedium_chat_menu}}} {{damagevsLchatmenu=@{weapon_damagelarge_chat_menu}}} {{critdamagevsSMchatmenu=@{weapon_critdamagesmallmedium_chat_menu}}} {{critdamagevsLchatmenu=@{weapon_critdamagelarge_chat_menu}}} {{WeaponNotes=@{weapon_notes}}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}} {{rate=@{weapon_rateoffire}}} {{range=@{weapon_range}}} {{length=@{weapon_length}}} {{space=@{weapon_space}}} {{speed=@{weapon_speed}}} {{ammo=[[ @{weapon_ammo} ]]/[[ @{weapon_ammo|max} ]]}} {{crit=[[ @{toggle_critdamage} ]]}} @{weapon_tohitacadj}</textarea></details></fieldset></div><hr class="hide-as-npc"></section><section class="equipment-box"><input type="checkbox" class="sect-show" name="attr_equipment_info_show" value="1"><div class="header">EQUIPMENT</div><span class="material-icons"></span><div class="sect right inline-label"><input type="hidden" name="attr_equipment_previous_order_array" value=""> <input type="hidden" class="busy-indicator" name="attr_equipment_sheet_busy" value="0"> <label><button type="action" name="act_equipment-sort-alphabetical" title="Sort rows by equipment names alphabetically."><span class="nowrap">Sort A-Z</span></button></label> <label><button type="action" name="act_equipment-sort-location" title="Sort rows by location and equipment names alphabetically."><span>Location</span></button></label> <label><button type="action" name="act_equipment-sort-undo" class="text-only" title="Undo last Sort."><span class="undo"></span></button></label></div><div class="equipment-tabs sect"><input type="radio" class="tab-hidden tab" name="attr_equipment_tabs_type" value="0"><span class="tab">Gear</span> <input type="radio" class="tab-hidden tab" name="attr_equipment_tabs_type" value="1"><span class="tab">Weapon</span> <input type="radio" class="tab-hidden tab" name="attr_equipment_tabs_type" value="2"><span class="tab">Armor</span> <input type="radio" class="tab-hidden tab" name="attr_equipment_tabs_type" value="3"><span class="tab">Magic</span> <input type="radio" class="tab-hidden tab" name="attr_equipment_tabs_type" value="4"><span class="tab">Other</span> <input type="radio" class="tab-hidden tab" name="attr_equipment_tabs_type" value="-1" checked="checked"><span class="tab">All</span> <input type="radio" class="tab-hidden tab" name="attr_equipment_tabs_carry" value="1" style="margin-left: 10%;"><span class="tab">Carried</span> <input type="radio" class="tab-hidden tab" name="attr_equipment_tabs_carry" value="0"><span class="tab">Not Carried</span> <input type="radio" class="tab-hidden tab" name="attr_equipment_tabs_carry" value="2"><span class="tab">Mount</span> <input type="radio" class="tab-hidden tab" name="attr_equipment_tabs_carry" value="-1" checked="checked"><span class="tab">All</span></div><div class="sect"><input type="hidden" class="hidden equipment-display-type" name="attr_equipment_tabs_type" value="-1"> <input type="hidden" class="hidden equipment-display-carry" name="attr_equipment_tabs_carry" value="-1"> <span class="equipment-columns column-header"><span></span> <span>Item</span> <span>Location</span> <span>Type</span> <span>Magical</span> <span class="hidden-for-armor">Uses</span> <span class="hidden-for-armor">/</span> <span class="hidden-for-armor">Max</span> <span>Carried?</span> <span>Qty</span> <span>/</span> <span>Max</span> <span>Wt</span> <span class="toggle-costs">Cost</span></span><fieldset class="repeating_equipment"><input type="hidden" class="toggle-carry" name="attr_equipment_show_carry" value="1" readonly="readonly"> <input type="hidden" class="toggle-type" name="attr_equipment_show_type" value="1" readonly="readonly"><div class="equipment-display-carry sect"><div class="equipment-display-type"><span class="top-row equipment-columns border-top-half"><button class="dice-button" type="roll" name="attr_equipment_roll" title="%{repeating_equipment_$X_equipment_roll}" value="@{equipment_macro_text}"></button> <input type="text" class="width-fill" name="attr_equipment_item" title="@{repeating_equipment_$X_equipment_item}" value="" placeholder="Item/Description"> <input type="text" class="width-fill" name="attr_equipment_location" title="@{repeating_equipment_$X_equipment_location}" value="" placeholder="Location"> <select class="equipment-type" name="attr_equipment_type" title="@{repeating_equipment_$X_equipment_type}"><option value="0" selected="selected">Gear</option><option value="1">Weapon</option><option value="2">Armor</option><option value="3">Magic</option><option value="4">Other</option></select> <input type="checkbox" name="attr_equipment_magical" value="1" title="@{repeating_equipment_$X_equipment_magical} | This item has magical properties and will also be displayed when 'Magic' is selected."> <input type="hidden" class="hidden equipment-type" name="attr_equipment_type" value="0"> <input type="text" class="width-smaller hidden-for-armor" name="attr_equipment_current" title="@{repeating_equipment_$X_equipment_current}" value="0"> <span class="hidden-for-armor">/</span> <input type="text" class="width-smaller hidden-for-armor" name="attr_equipment_current_max" title="@{repeating_equipment_$X_equipment_current|max}" value="0"> <select class="width-medium" name="attr_equipment_carried_select" title="@{repeating_equipment_$X_equipment_carried_select} | Carried items are used for weight calculations."><option value="0">No</option><option value="1" selected="selected">Yes</option><option value="2">Mount</option></select> <input type="checkbox" class="hidden" name="attr_equipment_carried" value="1" checked="checked"> <input type="text" class="width-smaller" name="attr_equipment_quantity" title="@{repeating_equipment_$X_equipment_quantity} | Used for weight and cost calculations." value="1"> <span>/</span> <input type="text" class="width-smaller" name="attr_equipment_quantity_max" title="@{repeating_equipment_$X_equipment_quantity|max}" value="" placeholder="n/a"> <input type="text" class="width-fill" name="attr_equipment_weight" title="@{repeating_equipment_$X_equipment_weight} | Weight for one item." value="0"> <input type="text" class="width-fill toggle-costs" name="attr_equipment_cost" title="@{repeating_equipment_$X_equipment_cost} | Cost for one item." value="0"></span><details class="border-bottom-half"><summary><span class="material-icons gear-nav" title="Expand/Hide sub-section"></span></summary><span class="span-all show-for-armor inline-label" title="Choose an Armor Type first to access additional fields."><input type="hidden" class="toggle-armor-details show-shield-only" name="attr_equipment_armor_type" value="99"> <label class="label-under-small sync-lock"><select name="attr_equipment_armor_type" title="@{repeating_equipment_$X_equipment_armor_type}"><option value="99" selected="selected">choose</option><option value="0">Clothing</option><option value="1">Armor 1</option><option value="2">Armor 2</option><option value="3">Shield</option><option value="4">Helmet</option><option value="5">Other 1</option><option value="6">Other 2</option><option value="7">Other 3</option><option value="8">Other 4</option><option value="9">Other 5</option><option value="10">Other 6</option></select> <input type="checkbox" class="hidden" name="attr_equipment_sync_armor_flag" value="1"> <span>Type</span></label> <label class="label-under-small"><input type="checkbox" name="attr_equipment_armor_worn" value="1" title="@{repeating_equipment_$X_equipment_armor_worn}" checked="checked"> <span>In Use</span></label> <label class="label-under-small"><select class="show-shield-only" name="attr_equipment_armor_ac" title="@{repeating_equipment_$X_equipment_armor_ac} | ie +2 lowers AC by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <select name="attr_equipment_armor_ac" title="@{repeating_equipment_$X_equipment_armor_ac} | Enter the actual AC value for this item."><option value="10" selected="selected">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option><option class="hidden" value="-1">-1</option><option class="hidden" value="-2">-2</option><option class="hidden" value="-3">-3</option><option class="hidden" value="-4">-4</option><option class="hidden" value="-5">-5</option><option class="hidden" value="-6">-6</option><option class="hidden" value="-7">-7</option><option class="hidden" value="-8">-8</option><option class="hidden" value="-9">-9</option><option class="hidden" value="-10">-10</option></select> <span>AC</span></label> <label class="label-under-small hide-ar"><select class="show-shield-only" name="attr_equipment_armor_base" title="@{repeating_equipment_$X_equipment_armor_base} | ie +2 lowers AR by -2."><option value="0" selected="selected">+0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="-6">+6</option><option value="-7">+7</option><option value="-8">+8</option><option value="-9">+9</option><option value="-10">+10</option></select> <select name="attr_equipment_armor_base" title="@{repeating_equipment_$X_equipment_armor_base}| Enter the actual AR value for this item."><option value="10" selected="selected">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option><option class="hidden" value="-1">-1</option><option class="hidden" value="-2">-2</option><option class="hidden" value="-3">-3</option><option class="hidden" value="-4">-4</option><option class="hidden" value="-5">-5</option><option class="hidden" value="-6">-6</option><option class="hidden" value="-7">-7</option><option class="hidden" value="-8">-8</option><option class="hidden" value="-9">-9</option><option class="hidden" value="-10">-10</option></select> <span>AR</span></label> <input type="checkbox" class="hidden toggle-input-error hide-magic" name="attr_equipment_armor_magic_error" value="1" checked="checked"> <label class="label-under-small hide-magic"><input type="text" class="width-small" name="attr_equipment_armor_magic" value="0" title="@{repeating_equipment_$X_equipment_armor_magic} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <span>Magic</span></label> <input type="checkbox" class="hidden toggle-input-erro hide-misc" name="attr_equipment_armor_mod_error" value="1" checked="checked"> <label class="label-under-small hide-misc"><input type="text" class="width-small" name="attr_equipment_armor_mod" value="0" title="@{repeating_equipment_$X_equipment_armor_mod} | Bonuses lower AC.  Penalties raise AC.  ie '+2' bonus lowers AC by -2 while a '-2' penalty will raise AC by 2."> <span>Misc</span></label> <label class="label-under-small hide-bulk"><select name="attr_equipment_armor_bulk" title="@{repeating_equipment_$X_equipment_armor_bulk}"><option value="0" selected="selected">n/a</option><option value="1">non-Bulky 12"</option><option value="2">Fairly 9"</option><option value="3">Bulky 6"</option></select> <span>Bulk</span></label> <label style="margin-top: 0;"><button type="action" name="act_addarmor" title="Adds armor to the selected Armor Details row. Items will be synced."><span>+Add</span></button></label> </span><span class="span-all show-for-weapons inline-label"><label class="label-under-small"><select name="attr_equipment_weapon_type" class="select-over-label" title="@{repeating_equipment_$X_equipment_weapon_type}"><option value="0" selected="selected">Melee</option><option value="1">Ranged</option><option value="2">Touch</option><option value="3">Ranged Touch</option></select> <span>Type</span></label> <input type="hidden" class="toggle-weapon-details" name="attr_equipment_weapon_type" value="0"> <label class="label-under-small hide-melee"><input type="text" class="width-small" name="attr_equipment_weapon_speed" title="@{repeating_equipment_$X_equipment_weapon_speed}" value="" placeholder="-"> <span>SPD</span></label> <label class="label-under-small hide-melee"><input type="text" class="width-small" name="attr_equipment_weapon_length" title="@{repeating_equipment_$X_equipment_weapon_length}" value="" placeholder="-"> <span>LEN</span></label> <label class="label-under-small hide-melee"><input type="text" class="width-small" name="attr_equipment_weapon_space" title="@{repeating_equipment_$X_equipment_weapon_space}" value="" placeholder="-"> <span>SPC</span></label> <label class="label-under-small hide-melee"><input type="text" class="width-small" name="attr_equipment_weapon_misc" title="@{repeating_equipment_$X_equipment_weapon_misc}" value="" placeholder="-"> <span>MISC</span></label> <label class="label-under-small"><input type="text" class="width-medium" name="attr_equipment_weapon_damagesmallmedium" title="@{repeating_equipment_$X_equipment_weapon_damagesmallmedium}" value="" placeholder="1d4"> <span>S/M</span></label> <label class="label-under-small"><input type="text" class="width-medium" name="attr_equipment_weapon_damagelarge" title="@{repeating_equipment_$X_equipment_weapon_damagelarge}" value="" placeholder="1d4"> <span>LG</span></label> <label class="label-under-small"><input type="text" class="width-small" name="attr_equipment_weapon_attackdmgtype" title="@{repeating_equipment_$X_equipment_weapon_attackdmgtype}" value="" placeholder="-"> <span>DMG Type</span></label> <label class="label-under-small hide-ranged"><input type="text" class="width-small" name="attr_equipment_weapon_rateoffire" title="@{repeating_equipment_$X_equipment_weapon_rateoffire}" value="" placeholder="-"> <span>RT</span></label> <label class="label-under-small hide-ranged"><input type="text" class="width-medium" name="attr_equipment_weapon_range" title="@{repeating_equipment_$X_equipment_weapon_range} | Enter Short/Medium/Long ranges. Enter numbers only, separated by '/'. Entering a single value will be used for all ranges." value="" placeholder="-"> <span>RNG S/M/L</span></label> <label style="margin-top: 0;"><button type="action" name="act_addattack" title="Adds weapon to attacks. Creates a unique, non-synced, attack."><span>+Add</span></button></label> </span><span class="inline-label"><textarea class="height-short" name="attr_equipment_description" title="@{repeating_equipment_$X_equipment_description}" value="" placeholder="Description"></textarea> <label><button type="roll" class="info-link" value="@{whisper_pc} [**LINK**](@{equipment_link})" title="Send link to chat."></button> <textarea class="info-link" wrap="off" name="attr_equipment_link" title="@{repeating_equipment_$X_equipment_link}" placeholder="https://www.example.com"></textarea></label> </span><textarea class="height-short toggle-macros" name="attr_equipment_macro_text" title="@{repeating_equipment_$X_equipment_macro_text} | Caution: modifying the macro-text can break the roll.  Deleting the macro-text will safely reset the roll to the sheet's default macro.">@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Item/Equipment: @{equipment_item}}} {{link=@{equipment_link}}} {{freetext=@{equipment_description}}} {{quantity= @{equipment_quantity}}} {{quantity_max=@{equipment_quantity|max}}} {{uses=@{equipment_current}}} {{uses_max=[[ @{equipment_current|max} ]]}}</textarea></details></div></div></fieldset></div><div class="sect four-columns linear-background"><div class="capacity-box"><textarea class="height-fill" name="attr_itemnotes" title="@{itemnotes}" placeholder="Equipment Notes"></textarea></div><div class="equipment-totals"><label style="max-width: 100%;" title="@{toggle_lbs} | Use Lbs instead of gold pieces when determining encumbrance. Carrying capacities and carried coin weight will be divided by 10. Per-item weights need to be entered as lbs in order for the sheet to properly calculate encumbrance."><span>Use Lbs:</span> <input type="checkbox" class="toggle-lbs" name="attr_toggle_lbs" value="1"></label> <label class="center"><span class="toggle-lbs">Wt in GP</span><span>Wt in Lbs</span></label> <label class="center toggle-costs">Cost</label> <label><span>Equipment:</span></label> <input type="text" class="hidden width-fill" name="attr_total_equipment_weight" value="0" readonly="readonly"> <input type="text" class="width-fill" name="attr_total_equipment_weight_adjusted" title="@{total_equipment_weight_adjusted} | Carried Equipment Weight - Weapons and Armor." value="0" readonly="readonly"> <input type="text" class="width-fill toggle-costs" name="attr_total_equipment_cost" title="@{total_equipment_cost}" value="0" readonly="readonly"> <label><span>Armor:</span></label> <input type="text" class="width-fill" name="attr_total_armor_weight" value="0" title="@{total_armor_weight}" readonly="readonly"> <label class="width-fill center toggle-costs">---</label> <input type="text" class="hidden width-fill toggle-costs" name="attr_total_armor_cost" value="0" readonly="readonly"> <label><span>Weapons:</span></label> <input type="text" class="width-fill" name="attr_total_weapon_weight" value="0" title="@{total_weapon_weight}" readonly="readonly"> <label class="width-fill center toggle-costs">---</label> <input type="text" class="hidden width-fill toggle-costs" name="attr_total_weapon_cost" value="0" readonly="readonly"> <label><span>Coins:</span></label> <input type="text" class="width-fill" name="attr_total_coin_weight" title="@{total_coin_weight}" value="0" readonly="readonly"> <label class="width-fill center toggle-costs">---</label> <label><span>TOTALS:</span></label> <input type="text" class="readonly-span" name="attr_total_weight" title="@{total_weight} | Total Carried Weight." value="0" readonly="readonly"> <input type="text" class="readonly-span toggle-costs" name="attr_total_cost" title="@{total_cost} | Total Equipment Costs." value="0" readonly="readonly"></div></div><div class="wealth-box border sect"><span class="subheader center width-fill">Wealth</span><div class="coin-columns column-header"><span></span> <span>Copper</span> <span>Silver</span> <span>Electrum</span> <span>Gold</span> <span>Platinum</span></div><div class="coin-columns"><label class="text-large right"><span>Carried Coins:</span></label> <input type="text" class="width-medium" name="attr_cp" title="@{cp}" value="0"> <input type="text" class="width-medium" name="attr_sp" title="@{sp}" value="0"> <input type="text" class="width-medium" name="attr_ep" title="@{ep}" value="0"> <input type="text" class="width-medium" name="attr_gp" title="@{gp}" value="0"> <input type="text" class="width-medium" name="attr_pp" title="@{pp}" value="0"> <label class="span-all"><span class="text-small"><b>hint:</b> 200cp = 20sp = 2ep = 1gp = 1/5pp</span></label></div><hr><div class="coin-columns"><label class="text-large right"><span>Total Coins:</span></label> <input type="text" class="width-medium" name="attr_cp-total" title="@{cp-total}" value="0"> <input type="text" class="width-medium" name="attr_sp-total" title="@{sp-total}" value="0"> <input type="text" class="width-medium" name="attr_ep-total" title="@{ep-total}" value="0"> <input type="text" class="width-medium" name="attr_gp-total" title="@{gp-total}" value="0"> <input type="text" class="width-medium" name="attr_pp-total" title="@{pp-total}" value="0"></div><textarea class="height-tall" name="attr_wealthNotes" title="@{wealthNotes}" placeholder="Wealth Notes"></textarea></div><div class="span-all border sect linear-background"><span class="subheader center width-fill">Carrying Capacity</span><div class="capacity-box-loads column-header"><span class="span-three">Strength Adj.</span> <span class="span-four"><span>Current Encumbrance</span> <span class="toggle-lbs text-small">(gp)</span><span class="text-small">(lbs)</span></span></div><div class="capacity-box-loads center"><label class="label-under" title="@{normal_load} 'Unencumbered load' (defaults 350gp based on STR 8-11.)"><input type="text" class="hidden" name="attr_normal_load" value="350" readonly="readonly"> <span type="text" class="readonly-span" name="attr_normal_load" title="@{normal_load} 'Unencumbered load' (defaults 350gp based on STR 8-11.)"></span> <span class="inline-label"><span>Base</span> <span class="toggle-lbs text-small">(gp)</span><span class="text-small">(lbs)</span></span></label> <label class="label-under"><span class="center toggle-lbs" title="@{encumbrancebonus} | Weight Allowance in gp. Keep this value as gp even if the sheet is using the lbs option."><input class="hidden" type="text" name="attr_encumbrancebonus" value="0"> <span class="readonly-span" name="attr_encumbrancebonus"></span> <span class="inline-label"><span>Weight All.</span> <span class="text-small">(gp)</span> </span></span><span class="center" title="@{encumbrancebonus_lbs} | Weight Allowance in lbs."><input class="hidden" type="text" name="attr_encumbrancebonus_lbs" value="0" readonly="readonly"> <span class="readonly-span" name="attr_encumbrancebonus_lbs"></span> <span class="inline-label"><span>Weight All.</span> <span class="text-small">(lbs)</span></span></span></label> <label class="text-large">=</label> <label for="normal_load" class="label-under" title="@{normal_load_adjusted} Unencumbered + (Weight Allowance.)"><input id="normal_load" type="checkbox" class="hidden current-encumbrance" name="attr_current_encumbrance" value="0" checked="checked" readonly="readonly"> <input type="text" class="hidden" name="attr_normal_load_adjusted" value="0" readonly="readonly"> <span class="readonly-span" name="attr_normal_load_adjusted" title="@{normal_load_adjusted} Unencumbered + (Weight Allowance.)"></span> <span>Unencumbered</span></label> <label for="heavy_load" class="label-under" title="@{heavy_load} Heavy load = Unencumbered + (Weight Allowance x2)."><input id="heavy_load" type="checkbox" class="hidden current-encumbrance" name="attr_current_encumbrance" value="1" readonly="readonly"> <input type="text" class="hidden" name="attr_heavy_load" value="0" readonly="readonly"> <span class="readonly-span" name="attr_heavy_load" title="@{heavy_load} Heavy load = Unencumbered + (Weight Allowance x2)."></span> <span>Heavy</span></label> <label for="v_heavy_load" class="label-under" title="@{very_heavy_load} Very heavy load = Unencumbered + (Weight Allowance x3)."><input id="v_heavy_load" type="checkbox" class="hidden current-encumbrance" name="attr_current_encumbrance" value="2" readonly="readonly"> <input type="text" class="hidden" name="attr_very_heavy_load" value="0" readonly="readonly"> <span class="readonly-span" name="attr_very_heavy_load" title="@{very_heavy_load} Very heavy load = Unencumbered + (Weight Allowance x3)."></span> <span>Very Heavy</span></label> <label for="encumbered" class="label-under" title="@{max_load} Any amount greater than; Unencumbered + (Weight Allowance x3)."><input id="encumbered" type="checkbox" class="hidden current-encumbrance" name="attr_current_encumbrance" value="3" readonly="readonly"> <span><input type="text" class="hidden" name="attr_max_load" value="0" readonly="readonly"> <span class="readonly-span" name="attr_max_load" title="@{max_load} Any amount greater than; Unencumbered + (Weight Allowance x3)."></span> <b class="text-large">+</b> </span><span>Encumbered</span></label></div></div><hr></section><section class="special-abilities-box"><input type="checkbox" class="sect-show" name="attr_special_abilities_info_show" value="1"><div class="header"><span class="hide-as-npc">SPECIAL ABILITIES</span> <span class="hide-as-pc">SPECIAL ABILITIES</span></div><span class="material-icons"></span><div class="sect"><div class="toggle-psionics border"><h4 class="subheader center width-fill">Psionics</h4><span class="inline-label"><label class="inline-label" title="@{psionic_ability_strength} | Total Psionic Ability = 1d100 + Ability Bonus (ie +1 for each unmodified point of INT, WIS and CHA above 12. In addition, if 2 of these scores are above 16, the number of points is doubled, and if all 3 scores are above 16, the number of points are quadrupled.) x2."><span>Total Ability:</span> <input type="text" name="attr_psionic_ability_strength" value="0" class="width-small"> <span>/</span> <input type="text" name="attr_psionic_ability_strength_max" value="0" class="width-small"></label> <label class="inline-label"><span>Psionic Attack:</span> <input type="text" name="attr_psionic_attack" value="0" class="width-small" title="@{psionic_attack}"> <span>/</span> <input type="text" name="attr_psionic_attack_max" value="0" class="width-small" title="@{psionic_attack|max}" readonly="readonly"></label> <label class="inline-label"><span>Psionic Defense:</span> <input type="text" name="attr_psionic_defense" value="0" class="width-small" title="@{psionic_defense}"> <span>/</span> <input type="text" name="attr_psionic_defense_max" value="0" class="width-small" title="@{psionic_defense|max}" readonly="readonly"></label> </span><span class="inline-label"><label class="inline-label" title="@{psionic_attack_modes} | Add Modes as Special Abilities below."><span>Attack Modes:</span> <input type="text" name="attr_psionic_attack_modes" value="" class="width-medium" placeholder="A,B,C,D,E"></label> <label class="inline-label" title="@{psionic_defensive_modes} | Add Modes as Special Abilities below."><span>Defensive Modes:</span> <input type="text" name="attr_psionic_defensive_modes" value="" class="width-medium" placeholder="F,G,H,I,J"></label> <label class="inline-label right" title="@{psionic_minor} | Add Disciplines as Special Abilities below."><span>Minor Disciplines:</span> <input type=" text" name="attr_psionic_minor" value="0" class="width-smallest"></label> <label class="inline-label" title="@{psionic_major} | Add Disciplines as Special Abilities below."><span>Major Disciplines:</span> <input type=" text" name="attr_psionic_major" value="0" class="width-smallest"></label></span></div><label class="left"><span>Single Column</span> <input type="checkbox" class="toggle-single-column-abilities" name="attr_toggle_single_column_abilities" title="@{toggle_single_column_abilities}" value="1" checked="checked"></label> <span class="special-abilities-row1 column-header hide-as-npc"><span></span> <span>Name</span> <span>Short Description</span> <span>Uses</span> </span><span class="special-abilities-row1 column-header two-column-header hide-as-npc"><span></span> <span>Name</span> <span>Uses</span> <span></span> <span>Name</span> <span>Uses</span></span><fieldset class="repeating_ability"><span class="top-row special-abilities-row1 border-top-half"><button class="dice-button hide-as-npc ability-area-roll" type="roll" name="attr_ability_roll" title="%{repeating_ability_$X_ability_roll} | PC Roll" value="@{whisper_pc} @{ability_macro_text}"></button> <button class="dice-button hide-as-pc ability-area-roll" type="roll" name="attr_ability_npc_roll" title="%{repeating_ability_$X_ability_npc_roll} | NPC Roll" value="@{whisper_npc} @{ability_macro_text}"></button> <label class="repeating-name ability-area-name"><input type="text" name="attr_ability_name" title="@{repeating_ability_$X_ability_name}" placeholder="Ability Name"></label> <label class="inline-label ability-area-desc"><textarea class="height-short" name="attr_ability_short_description" title="@{repeating_ability_$X_ability_short_description}" placeholder="Short Description"></textarea></label> <label class="inline-label ability-area-uses"><input type="text" class="width-smaller" name="attr_ability_current" title="@{repeating_ability_$X_ability_current}" value=""> <span>/</span> <input type="text" class="width-smaller" name="attr_ability_current_max" title="@{repeating_ability_$X_ability_current|max}" value="0"> <input type="hidden" name="attr_ability_max" value="1"></label></span><details class="border-bottom-half"><summary><span class="material-icons gear-nav" title="Expand/Hide sub-section"></span></summary><div class="special-abilities-row2"><label class="label-under-small" title="TIP: Must include a dice roll to be included with the roll. ie 1d6"><input type="text" class="width-small" name="attr_ability_die" title="@{repeating_ability_$X_ability_die}" value="1d0"> <span>Die</span></label> <label class="label-under-small"><input type="text" class="width-small" name="attr_ability_mod" title="@{repeating_ability_$X_ability_mod}" value="0"> <span>Modifier</span></label> <textarea class="height-medium" name="attr_ability_description" title="@{repeating_ability_$X_ability_description}" placeholder="Ability Description"></textarea></div><div class="spell-details-grid"><label class="span-two"><span>Effect Type:</span> <input type="text" name="attr_ability_effect_type" title="@{repeating_ability_$X_ability_effect_type}" value="" placeholder="n/a"></label> <label><span>Spell Level:</span> <input type="text" name="attr_ability_level" title="@{repeating_ability_$X_ability_level}" value="" placeholder="n/a"></label> <label><span>Casting Time:</span> <input type="text" name="attr_ability_ct" title="@{repeating_ability_$X_ability_ct}" value="" placeholder="n/a"></label> <label><span>Range:</span> <input type="text" name="attr_ability_range" title="@{repeating_ability_$X_ability_range}" value="" placeholder="n/a"></label> <label><span>Saving Throw:</span> <input type="text" name="attr_ability_save" title="@{repeating_ability_$X_ability_save}" value="" placeholder="n/a"></label> <label><span>Duration:</span> <input type="text" name="attr_ability_duration" title="@{repeating_ability_$X_ability_duration}" value="" placeholder="n/a"></label> <label><span>Save Type:</span> <input type="text" name="attr_ability_save_type" title="@{repeating_ability_$X_ability_save_type}" value="" placeholder="n/a"></label> <label class="span-two"><span>Area of Effect:</span> <input type="text" name="attr_ability_aoe" title="@{repeating_ability_$X_ability_aoe}" value="" placeholder="n/a"></label></div><span class="inline-label"><label><span>Notes:</span> <textarea name="attr_ability_notes" class="height-short" title="@{repeating_ability_$X_ability_notes}" placeholder="Notes"></textarea></label> <label><button type="roll" class="info-link" value="@{whisper_pc} [**LINK**](@{ability_link})" title="Send link to chat."></button> <textarea class="info-link" wrap="off" name="attr_ability_link" title="@{repeating_ability_$X_ability_link}" placeholder="https://www.example.com"></textarea></label> </span><textarea class="height-short toggle-macros" name="attr_ability_macro_text" title="@{repeating_ability_$X_ability_macro_text} | Caution: modifying the macro-text can break the roll.  Deleting the macro-text will safely reset the roll to the sheet's default macro.">&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Special Ability: @{ability_name}}} {{roll= [[ 0 + @{ability_die} + @{ability_mod}[MOD] ]]}} {{link=@{ability_link}}} {{freetext=@{ability_short_description} @{ability_description}}} {{uses=@{ability_current}}} {{uses_max=[[ 0 + @{ability_current|max} ]]}} {{effect_type=@{ability_effect_type}}} {{spell_level=@{ability_level}}} {{casting_time=@{ability_ct}}} {{range=@{ability_range}}} {{duration=@{ability_duration}}} {{saving_throw=@{ability_save}}} {{area_of_effect=@{ability_aoe}}} {{save_type=@{ability_save_type}}}</textarea></details></fieldset><textarea class="hidden" name="attr_special_abilitiesnotes"></textarea></div><hr class="hide-as-npc"></section><section class="nonweapon-proficiencies-box"><input type="checkbox" class="sect-show" name="attr_nonweapon_proficiencies_info_show" value="1" style="max-width:18em;"><div class="header">NON WEAPON PROFICIENCIES</div><span class="material-icons"></span><div class="sect"><span class="nonweapon-proficiencies-row1 column-header"><span></span> <span>Proficiency</span> <span>Short Description</span> <span>Attribute/Base</span> <span>Val.</span> <span>Adj.</span> <span>Slots</span></span><fieldset class="repeating_nonweaponproficiencies"><span class="top-row nonweapon-proficiencies-row1 border-top-half"><button class="dice-button" type="roll" name="attr_nwp_roll" title="%{repeating_nonweaponproficiencies_$X_nwp_roll} |&#10;* Very easy proficiency = -3 modifier &#10;* Easy proficiency = -1 modifier &#10;* Normal proficiency = no modifier &#10;* Hard proficiency = +1 modifier &#10;* Very hard proficiency = +2 modifier &#10;* Extremely hard proficiency = +3 modifier" value="@{nwp_macro_text}"></button> <label class="repeating-name"><input type="text" name="attr_nwp_name" title="@{repeating_nonweaponproficiencies_$X_nwp_name}" placeholder="Proficiency Name"></label> <textarea class="height-short" name="attr_nwp_short_description" title="@{repeating_nonweaponproficiencies_$X_nwp_short_description}" placeholder="Short Description"></textarea> <select name="attr_nwp_attribute" title="Select an applicable NWP Attribute or 'vs Base' for a roll-time query.|%{repeating_nonweaponproficiencies_$X_nwp_attribute}"><option value="0" selected="selected">None</option><option value="@{strength}">STR</option><option value="@{dexterity}">DEX</option><option value="@{constitution}">CON</option><option value="@{intelligence}">INT</option><option value="@{wisdom}">WIS</option><option value="@{charisma}">CHA</option><option value="@{comeliness}" class="toggle-comeliness">COM</option><option value="?{vs Base Value|20}">vs Base</option></select> <input class="width-small" type="number" name="attr_nwp_attribute_value" value="(@{nwp_attribute})" title="%{repeating_nonweaponproficiencies_$X_nwp_attribute_value}" disabled="disabled"> <input class="width-small" type="text" name="attr_nwp_modifier" title="@{repeating_nonweaponproficiencies_$X_nwp_modifier}" value="0"> <input class="width-small" type="text" name="attr_nwp_slots" title="@{repeating_nonweaponproficiencies_$X_nwp_slots}" value="0"></span><details class="border-bottom-half"><summary><span class="material-icons gear-nav" title="Expand/Hide sub-section"></span></summary><span class="inline-label"><textarea class="height-short" name="attr_nwp_description" title="@{repeating_nonweaponproficiencies_$X_nwp_description}" placeholder="Ability Description"></textarea> <label><button type="roll" class="info-link btn ui-draggable" name="attr_nwp_link_roll" value="@{whisper_pc} [**LINK**](@{nwp_link})" title="@{repeating_nonweaponproficiencies_$X_nwp_link_roll}"></button> <textarea class="info-link" wrap="off" name="attr_nwp_link" title="@{repeating_nonweaponproficiencies_$X_nwp_link}" placeholder="https://www.example.com"></textarea></label> </span><textarea class="height-short toggle-macros" name="attr_nwp_macro_text" title="@{repeating_nonweaponproficiencies_$X_nwp_macro_text} | Caution: modifying the macro-text can break the roll.  Deleting the macro-text will safely reset the roll to the sheet's default macro.">@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Non Weapon Proficiency: @{nwp_name}}} {{roll_low=[[ 1d20 + [[ @{nwp_modifier} ]][MOD] + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[ @{nwp_attribute}[ATTR] ]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}} {{nwp_mod_applied=[[ @{nwp_modifier} ]]}} {{link=@{nwp_link}}} {{freetext=@{nwp_short_description} @{nwp_description}}}</textarea></details></fieldset></div><hr></section><section class="thief-skills-box"><input type="checkbox" class="sect-show" name="attr_thief_skills_info_show" value="1"><div class="header">THIEF SKILLS</div><span class="material-icons"></span> <input type="checkbox" class="toggle-sync-class hidden" name="attr_sync_thief_class" value="1"><div class="thief-class sect"><label class="inline-label" title="@{autofill_thief} | Let the sheet auto-fill the Base chance when the level selector is changed."><span>Autofill Base:</span> <input type="checkbox" name="attr_autofill_thief" value="1" checked="checked"></label> <label class="show-sync-class"></label> <label class="show-sync-class"><span>Class</span></label> <label class="thief-level"><span>Level</span></label> <label class="inline-label" title="@{autofill_thief_dex} | Let the sheet auto-fill the Dex modifiers based on the character's Dexterity."><span>Autofill Dex:</span> <input type="checkbox" name="attr_autofill_thief_dex" value="1"></label> <label><span>Race</span></label> <label class="inline-label" title="@{sync_thief_class} | Linking to a class will automatically adjust the thief base values when the linked class level changes."><span>Sync to Class:</span> <input type="checkbox" name="attr_sync_thief_class" value="1"></label> <label class="show-sync-class"><select class="class-selected border" name="attr_thief_class_selected" title="@{thief_class_selected} | Linking to a class will automatically adjust the thief base values when the linked class level changes."><option value="1" selected="">Class 1</option><option value="2">Class 2</option><option value="3">Class 3</option></select></label> <label class="show-sync-class"><input type="hidden" class="class-selected" name="attr_thief_class_selected" value="1"> <input class="show-class1-name" name="attr_class" title="@{class}" placeholder="n/a" readonly=""> <input class="show-class2-name" name="attr_secondclass" title="@{secondclass}" placeholder="n/a" readonly=""> <input class="show-class3-name" name="attr_thirdclass" title="@{thirdclass}" placeholder="n/a" readonly=""></label> <label class="thief-level show-when-not-synced"><input class="width-small border" type="number" min="0" name="attr_thief_level" value="1" title="@{thief_level}"></label> <label class="thief-level show-sync-class"><input class="width-small border" type="number" name="attr_thief_level" value="1" title="@{thief_level}" readonly="readonly"></label> <label class="inline-label" title="@{autofill_thief_race} | Let the sheet auto-fill the racial modifiers based on the character's race."><span>Autofill Race:</span> <input type="checkbox" name="attr_autofill_thief_race" value="1"></label> <label><select name="attr_thief_race_selected" title="@{thief_race_selected}"><option value="0" selected="selected">n/a</option><option value="1">Human</option><option value="2">Dwarf</option><option value="3">Elf</option><option value="4">Gnome</option><option value="5">Half-elf</option><option value="6">Halfling</option><option value="7">Half-orc</option></select></label></div><div class="sect"><span class="thief-columns column-header"><span>Function</span> <span>TOTAL</span> <span></span> <span>Base/Level</span> <span></span> <span>Dex Adj.</span> <span></span> <span>Racial Adj.</span> <span></span> <span>Magic/Item</span> </span><span class="thief-columns"><button class="text-only thiefskills-button" type="roll" name="roll_pickpockets" title="%{selected|pickpockets}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Pick Pockets vs HD?{HD of target (The level of the target will decrease your chance of success (-5% for each level or hit dice over 3) |1}}} {{roll_low=[[ 1d100 ]]%}} {{roll_target= [[ @{pickpockets} - ([[ floor({?{HD of target (The level of the target will decrease your chance of success (-5% for each level or hit dice over 3) |1}-3, 0}kh1)*5 ]]) ]]%}} {{roll_target2= [[ @{pickpockets} - ([[ floor({?{HD of target (The level of the target will decrease your chance of success (-5% for each level or hit dice over 3) |1}-3, 0}kh1)*5 ]]) + 21 ]]%}}"><span>Pick Pockets</span></button> <label class="label-percent" title="@{pickpockets}"><input type="text" name="attr_pickpockets" class="field-border readonly-span" title="@{pickpockets}" value="0"></label> <span class="text-large">=</span> <label class="label-percent"><input type="text" name="attr_pickpockets_base" class="width-smaller" title="@{pickpockets_base}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_pickpockets_ability_mod" class="width-smaller" title="@{pickpockets_ability_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_pickpockets_racial_mod" class="width-smaller" title="@{pickpockets_racial_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_pickpockets_magic" class="width-smaller" title="@{pickpockets_magic}" value="0"></label> </span><span class="thief-columns"><button class="text-only thiefskills-button" type="roll" name="roll_openlocks" title="%{selected|openlocks}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Open Locks}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{openlocks} ]]%}}"><span>Open Locks</span></button> <label class="label-percent" title="@{openlocks}"><input type="text" name="attr_openlocks" class="field-border readonly-span" title="@{openlocks}" value="0"></label> <span class="text-large">=</span> <label class="label-percent"><input type="text" name="attr_openlocks_base" class="width-smaller" title="@{openlocks_base}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_openlocks_ability_mod" class="width-smaller" title="@{openlocks_ability_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_openlocks_racial_mod" class="width-smaller" title="@{openlocks_racial_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_openlocks_magic" class="width-smaller" title="@{openlocks_magic}" value="0"></label> </span><span class="thief-columns"><button class="text-only thiefskills-button" type="roll" name="roll_findtraps" title="%{selected|findtraps}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Find/Remove Traps}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{findtraps} ]]%}}"><span>Find/Remove Traps</span></button> <label class="label-percent" title="@{findtraps}"><input type="text" name="attr_findtraps" class="field-border readonly-span" title="@{findtraps}" value="0"></label> <span class="text-large">=</span> <label class="label-percent"><input type="text" name="attr_findtraps_base" class="width-smaller" title="@{findtraps_base}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_findtraps_ability_mod" class="width-smaller" title="@{findtraps_ability_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_findtraps_racial_mod" class="width-smaller" title="@{findtraps_racial_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_findtraps_magic" class="width-smaller" title="@{findtraps_magic}" value="0"></label> </span><span class="thief-columns"><button class="text-only thiefskills-button" type="roll" name="roll_movequietly" title="%{selected|movequietly}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Move Silently}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{movequietly} ]]%}}"><span>Move Silently</span></button> <label class="label-percent" title="@{movequietly}"><input type="text" name="attr_movequietly" class="field-border readonly-span" title="@{movequietly}" value="0"></label> <span class="text-large">=</span> <label class="label-percent"><input type="text" name="attr_movequietly_base" class="width-smaller" title="@{movequietly_base}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_movequietly_ability_mod" class="width-smaller" title="@{movequietly_ability_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_movequietly_racial_mod" class="width-smaller" title="@{movequietly_racial_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_movequietly_magic" class="width-smaller" title="@{movequietly_magic}" value="0"></label> </span><span class="thief-columns"><button class="text-only thiefskills-button" type="roll" name="roll_hideinshadows" title="%{selected|HideInShadows}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Hide In Shadows}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{hideinshadows} ]]%}}"><span>Hide In Shadows</span></button> <label class="label-percent" title="@{hideinshadows}"><input type="text" name="attr_hideinshadows" class="field-border readonly-span" title="@{hideinshadows}" value="0"></label> <span class="text-large">=</span> <label class="label-percent"><input type="text" name="attr_hideinshadows_base" class="width-smaller" title="@{hideinshadows_base}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_hideinshadows_ability_mod" class="width-smaller" title="@{hideinshadows_ability_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_hideinshadows_racial_mod" class="width-smaller" title="@{hideinshadows_racial_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_hideinshadows_magic" class="width-smaller" title="@{hideinshadows_magic}" value="0"></label> </span><span class="thief-columns"><button class="text-only thiefskills-button" type="roll" name="roll_hearnoise" title="%{selected|hearnoise}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Hear Noise}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{hearnoise} ]]%}}"><span>Hear Noise</span></button> <label class="label-percent" title="@{hearnoise}"><input type="text" name="attr_hearnoise" class="field-border readonly-span" title="@{hearnoise}" value="0"></label> <span class="text-large">=</span> <label class="label-percent"><input type="text" name="attr_hearnoise_base" class="width-smaller" title="@{hearnoise_base}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_hearnoise_ability_mod" class="width-smaller" title="@{hearnoise_ability_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_hearnoise_racial_mod" class="width-smaller" title="@{hearnoise_racial_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_hearnoise_magic" class="width-smaller" title="@{hearnoise_magic}" value="0"></label> </span><span class="thief-columns"><button class="text-only thiefskills-button" type="roll" name="roll_climbwalls" title="%{selected|climbwalls}" value="@{climbwalls_macro_text}"><span>Climb Walls</span></button> <textarea class="hidden" name="attr_climbwalls_macro_text">@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Climb Walls}} {{roll_low=[[ 1d00 ]]%}} {{roll_target=[[ @{climbwalls} ]]%}}</textarea> <label class="label-percent" title="@{climbwalls}"><input type="text" name="attr_climbwalls" class="field-border readonly-span" title="@{climbwalls}" value="0"></label> <span class="text-large">=</span> <label class="label-percent"><input type="text" name="attr_climbwalls_base" class="width-smaller" title="@{climbwalls_base}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_climbwalls_ability_mod" class="width-smaller" title="@{climbwalls_ability_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_climbwalls_racial_mod" class="width-smaller" title="@{climbwalls_racial_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_climbwalls_magic" class="width-smaller" title="@{climbwalls_magic}" value="0"></label> </span><span class="thief-columns"><button class="text-only thiefskills-button" type="roll" name="roll_readlanguages" title="%{selected|readlanguages}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Read Languages}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{readlanguages} ]]%}}"><span>Read Languages</span></button> <label class="label-percent" title="@{readlanguages}"><input type="text" name="attr_readlanguages" class="field-border readonly-span" title="@{readlanguages}" value="0"></label> <span class="text-large">=</span> <label class="label-percent"><input type="text" name="attr_readlanguages_base" class="width-smaller" title="@{readlanguages_base}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_readlanguages_ability_mod" class="width-smaller" title="@{readlanguages_ability_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_readlanguages_racial_mod" class="width-smaller" title="@{readlanguages_racial_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_readlanguages_magic" class="width-smaller" title="@{readlanguages_magic}" value="0"></label> </span><input type="checkbox" class="sect-show" name="attr_custom_function_show" value="1"> <span class="subheader">Custom Functions</span><span class="material-icons"></span><div class="sect"><span class="thief-columns"><details><summary><span class="material-icons custom-btn-nav"></span> <button class="text-only thiefskills-button" type="roll" name="roll_thiefmisc" title="%{selected|thiefmisc}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{thiefmisc_name}}} {{roll_low=[[ 1d100 ]] %}} {{roll_target=[[ @{thiefmisc} ]]%}}"><span name="attr_thiefmisc_name"></span></button></summary><input type="text" class="width-fill" name="attr_thiefmisc_name" title="@{thiefmisc_name}" value="Custom..."></details><label class="label-percent" title="@{thiefmisc}"><input type="text" name="attr_thiefmisc" class="field-border readonly-span" title="@{thiefmisc}" value="0"></label> <span class="text-large">=</span> <label class="label-percent"><input type="text" name="attr_thiefmisc_base" class="width-smaller" title="@{thiefmisc_base}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_thiefmisc_ability_mod" class="width-smaller" title="@{thiefmisc_ability_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_thiefmisc_racial_mod" class="width-smaller" title="@{thiefmisc_racial_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_thiefmisc_magic" class="width-smaller" title="@{thiefmisc_magic}" value="0"></label> </span><span class="thief-columns"><details><summary><span class="material-icons custom-btn-nav"></span> <button class="text-only thiefskills-button" type="roll" name="roll_thiefmisc1" title="%{selected|thiefmisc1}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{thiefmisc1_name}}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{thiefmisc1} ]]%}}"><span name="attr_thiefmisc1_name"></span></button></summary><input type="text" class="width-fill" name="attr_thiefmisc1_name" title="@{thiefmisc1_name}" value="Custom..."></details><label class="label-percent" title="@{thiefmisc1}"><input type="text" name="attr_thiefmisc1" class="field-border readonly-span" title="@{thiefmisc1}" value="0"></label> <span class="text-large">=</span> <label class="label-percent"><input type="text" name="attr_thiefmisc1_base" class="width-smaller" title="@{thiefmisc1_base}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_thiefmisc1_ability_mod" class="width-smaller" title="@{thiefmisc1_ability_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_thiefmisc1_racial_mod" class="width-smaller" title="@{thiefmisc1_racial_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_thiefmisc1_magic" class="width-smaller" title="@{thiefmisc1_magic}" value="0"></label> </span><span class="thief-columns"><details><summary><span class="material-icons custom-btn-nav"></span> <button class="text-only thiefskills-button" type="roll" name="roll_thiefmisc2" title="%{selected|thiefmisc2}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{thiefmisc2_name}}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{thiefmisc2} ]]%}}"><span name="attr_thiefmisc2_name"></span></button></summary><input type="text" class="width-fill" name="attr_thiefmisc2_name" title="@{thiefmisc2_name}" value="Custom..."></details><label class="label-percent" title="@{thiefmisc2}"><input type="text" name="attr_thiefmisc2" class="field-border readonly-span" title="@{thiefmisc2}" value="0"></label> <span class="text-large">=</span> <label class="label-percent"><input type="text" name="attr_thiefmisc2_base" class="width-smaller" title="@{thiefmisc2_base}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_thiefmisc2_ability_mod" class="width-smaller" title="@{thiefmisc2_ability_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_thiefmisc2_racial_mod" class="width-smaller" title="@{thiefmisc2_racial_mod}" value="0"></label> <span class="text-large">Â±</span> <label class="label-percent"><input type="text" name="attr_thiefmisc2_magic" class="width-smaller" title="@{thiefmisc2_magic}" value="0"></label></span></div><span class="thief-columns"><h4>Backstab:</h4><label class="label-under span-two"><span>x <input type="text" name="attr_backstab" class="width-smaller" title="@{backstab} | Damage done per hit is twice normal for the weapon used per four XP levels." value="2"> </span><span>Multiplier</span></label> <label class="label-under span-two"><span>+ <input type="text" name="attr_backstab_bonus" class="width-smaller" title="@{backstab_bonus} | Striking by surprise from behind also increases the hit probability by 20% (+4 on the thiefâ€™s â€œto hitâ€ die roll)." value="4"> </span><span>To-Hit Adj.</span></label></span></div><hr></section><section class="spells-box"><input type="checkbox" class="sect-show" name="attr_spells_info_show" value="1"><div class="header">SPELLS</div><span class="material-icons"></span><div class="sect"><div class="center"><span class="inline-label"><label><h4>Caster Class 1:</h4><input type="text" class="width-medium" name="attr_caster_class1_name" title="@{caster_class1_name} | Name used for spells" value="" placeholder="enter caster class"></label> <label><h4>Level:</h4><input type="text" class="width-small" name="attr_caster_class1_level" title="@{caster_class1_level}" value="0"></label> <label class="inline-label" title="@{toggle_caster2} | Hides a second caster class in the Spells section."><span>Hide Caster Class 2:</span> <input type="checkbox" name="attr_toggle_caster2" value="1" checked="checked"></label> </span><span class="spells-top column-header"><span>Cur&nbsp;/&nbsp;Max</span> <span>Cur&nbsp;/&nbsp;Max</span> <span>Cur&nbsp;/&nbsp;Max</span> <span>Cur&nbsp;/&nbsp;Max</span> <span>Cur&nbsp;/&nbsp;Max</span> <span>Cur&nbsp;/&nbsp;Max</span> <span>Cur&nbsp;/&nbsp;Max</span> <span>Cur&nbsp;/&nbsp;Max</span> <span>Cur&nbsp;/&nbsp;Max</span> <span>Cur&nbsp;/&nbsp;Max</span> </span><span class="spells-middle"><span><input type="text" class="width-fill" name="attr_spells_lvl_0_current" title="@{spells_lvl_0_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_0_max" title="@{spells_lvl_0|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_1_current" title="@{spells_lvl_1_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_1_max" title="@{spells_lvl_1|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_2_current" title="@{spells_lvl_2_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_2_max" title="@{spells_lvl_2|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_3_current" title="@{spells_lvl_3_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_3_max" title="@{spells_lvl_3|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_4_current" title="@{spells_lvl_4_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_4_max" title="@{spells_lvl_4|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_5_current" title="@{spells_lvl_5_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_5_max" title="@{spells_lvl_5|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_6_current" title="@{spells_lvl_6_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_6_max" title="@{spells_lvl_6|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_7_current" title="@{spells_lvl_7_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_7_max" title="@{spells_lvl_7|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_8_current" title="@{spells_lvl_8_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_8_max" title="@{spells_lvl_8|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_9_current" title="@{spells_lvl_9_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells_lvl_9_max" title="@{spells_lvl_9|max}" value="0"></span></span><span class="to-hit spells-bottom"><span>Cantrips</span> <span>1st</span> <span>2nd</span> <span>3rd</span> <span>4th</span> <span>5th</span> <span>6th</span> <span>7th</span> <span>8th</span> <span>9th</span> </span><span class="spells-middle toggle-caster2"><span class="inline-label span-all no-border"><label><h4>Caster Class 2:</h4><input type="text" class="width-medium" name="attr_caster_class2_name" title="@{caster_class2_name} | Name used for spells" value="" placeholder="enter caster class"></label> <label><h4>Level:</h4><input type="text" class="width-small" name="attr_caster_class2_level" title="@{caster_class2_level}" value="0"></label> </span><span><input type="text" class="width-fill" name="attr_spells2_lvl_0_current" title="@{spells2_lvl_0_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_0_max" title="@{spells2_lvl_0|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_1_current" title="@{spells2_lvl_1_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_1_max" title="@{spells2_lvl_1|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_2_current" title="@{spells2_lvl_2_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_2_max" title="@{spells2_lvl_2|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_3_current" title="@{spells2_lvl_3_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_3_max" title="@{spells2_lvl_3|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_4_current" title="@{spells2_lvl_4_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_4_max" title="@{spells2_lvl_4|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_5_current" title="@{spells2_lvl_5_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_5_max" title="@{spells2_lvl_5|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_6_current" title="@{spells2_lvl_6_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_6_max" title="@{spells2_lvl_6|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_7_current" title="@{spells2_lvl_7_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_7_max" title="@{spells2_lvl_7|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_8_current" title="@{spells2_lvl_8_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_8_max" title="@{spells2_lvl_8|max}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_9_current" title="@{spells2_lvl_9_current}" value="0"></span><span><input type="text" class="width-fill" name="attr_spells2_lvl_9_max" title="@{spells2_lvl_9|max}" value="0"></span></span><span class="to-hit spells-bottom toggle-caster2"><span>Cantrips</span> <span>1st</span> <span>2nd</span> <span>3rd</span> <span>4th</span> <span>5th</span> <span>6th</span> <span>7th</span> <span>8th</span> <span>9th</span></span></div><div class="inline-label"><div class="spell-caster-tabs toggle-caster2"><input type="radio" class="tab-hidden tab" name="attr_spell_caster_tabs" value="0"><span class="tab">Caster 1</span> <input type="radio" class="tab-hidden tab" name="attr_spell_caster_tabs" value="1"><span class="tab">Caster 2</span> <input type="radio" class="tab-hidden tab" name="attr_spell_caster_tabs" value="-1" checked="checked"><span class="tab">All</span></div><label class="left" title="Display Spells on the sheet as a one or two columns."><span>Single Column</span> <input type="checkbox" class="toggle-single-column-spells" name="attr_toggle_single_column_spells" title="@{toggle_single_column_spells}" value="1" checked="checked"></label> <label class="left" title="Hide all non-memorized spells(ie #0)"><span>Memorized Only</span> <input type="checkbox" name="attr_toggle_show_memorized" title="@{toggle_show_memorized}" value="1"></label> <span class="inline-label right"><input type="hidden" name="attr_spells_previous_order_array" value=""> <input type="hidden" class="busy-indicator" name="attr_spells_sheet_busy" value="0"> <label><button type="action" name="act_spell-sort-alphabetical" title="Sort rows by spell names alphabetically."><span class="nowrap">Sort A-Z</span></button></label> <label><button type="action" name="act_spell-sort-level" title="Sort rows by level and spell names alphabetically."><span class="nowrap">Sort Lvl A-Z</span></button></label> <label><button type="action" name="act_spell-sort-undo" class="text-only" title="Undo last Sort."><span class="undo"></span></button></label></span></div><div class="spell-tabs"><input type="radio" class="tab-hidden tab" name="attr_spell_tabs" value="0"><span class="tab">Cantrips</span> <input type="radio" class="tab-hidden tab" name="attr_spell_tabs" value="1"><span class="tab">1st</span> <input type="radio" class="tab-hidden tab" name="attr_spell_tabs" value="2"><span class="tab">2nd</span> <input type="radio" class="tab-hidden tab" name="attr_spell_tabs" value="3"><span class="tab">3rd</span> <input type="radio" class="tab-hidden tab" name="attr_spell_tabs" value="4"><span class="tab">4th</span> <input type="radio" class="tab-hidden tab" name="attr_spell_tabs" value="5"><span class="tab">5th</span> <input type="radio" class="tab-hidden tab" name="attr_spell_tabs" value="6"><span class="tab">6th</span> <input type="radio" class="tab-hidden tab" name="attr_spell_tabs" value="7"><span class="tab">7th</span> <input type="radio" class="tab-hidden tab" name="attr_spell_tabs" value="8"><span class="tab">8th</span> <input type="radio" class="tab-hidden tab" name="attr_spell_tabs" value="9"><span class="tab">9th</span> <input type="radio" class="tab-hidden tab" name="attr_spell_tabs" value="-1" checked="checked"><span class="tab">All</span></div><div class="sect"><fieldset class="repeating_spells"><input type="hidden" class="hidden toggle-show" name="attr_spell_show" value="1" readonly="readonly"> <input type="hidden" class="hidden not-memorized" name="attr_spell_memorized" value="0" readonly="readonly"> <input type="checkbox" class="hidden toggle-memorized" name="attr_spell_show_memorized" value="1" readonly="readonly"> <input type="checkbox" class="hidden toggle-all" name="attr_spell_show_all" value="1" readonly="readonly" checked="checked"> <span class="top-row spells-repheader spell-display border-top-half"><button class="dice-button" type="roll" name="attr_spell_roll" title="%{selected|repeating_spells_$X_spell_roll}" value="@{spell_macro_text}" style="margin-right:12px;"></button> <label class="repeating-name"><input type="text" class="auto-width" name="attr_spell_name" title="@{repeating_spells_$X_spell_name}" placeholder="Spell Name"></label> <label class="right nowrap spell-level"><span>Spell Lvl:</span> <select class="width-small" name="attr_spell_level" title="@{repeating_spells_$X_spell_level}"><option selected="">?</option><option>0</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option></select></label> <label class="right" style="min-width: 2em; max-width: 3em;"><span>#</span> <input type="text" class="width-smallest" name="attr_spell_memorized" title="@{repeating_spells_$X_spell_memorized}" value="0"></label></span><details class="spell-display border-bottom-half"><summary><span class="material-icons gear-nav" title="Expand/Hide sub-section"></span></summary><div class="spell-details-grid"><span class="span-all inline-label"><label><select class="width-medium" name="attr_spell_caster_class" title="@{repeating_spells_$X_spell_caster_class}"><option value="0" selected="selected">n/a</option><option value="1">Caster 1</option><option class="toggle-caster2" value="2">Caster 2</option></select> <input type="hidden" name="attr_spell_caster_class" value="1"> <input type="text" class="width-medium shrink-on-placeholder" name="attr_spell_caster_class_name" value="" title="@{repeating_spells_$X_spell_caster_class_name}" placeholder="add caster class" readonly="readonly"></label> <label class="right" style="min-width: 3em; max-width: 4em; margin-left: 5px;"><span>Lvl</span> <input type="text" class="width-smallest" name="attr_spell_caster_class_level" value="0" title="@{repeating_spells_$X_spell_caster_class_level}" readonly="readonly"></label> </span><label><span>Spell Level:</span> <select class="width-small" name="attr_spell_level" title="@{repeating_spells_$X_spell_level}"><option selected="selected">?</option><option>0</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option></select></label> <label><span>School:</span> <span class="inline-label width-fill"><input type="text" list="spell_school" name="attr_spell_school" title="@{repeating_spells_$X_spell_school}" value="" placeholder="Spell Type"></span></label> <label><span>Components:</span> <input type="text" name="attr_spell_components" title="@{repeating_spells_$X_spell_components}" value="" placeholder="V,S,M"></label> <label><span>Range:</span> <input type="text" name="attr_spell_range" title="@{repeating_spells_$X_spell_range}" value="" placeholder="6&quot;"></label> <label><span>Casting Time:</span> <input type="text" name="attr_spell_ct" title="@{repeating_spells_$X_spell_ct}" value="" placeholder="1 rnd"></label> <label><span>Duration:</span> <input type="text" name="attr_spell_duration" title="@{repeating_spells_$X_spell_duration}" value="" placeholder="1 rnd"></label> <label><span>Saving Throw:</span> <input type="text" name="attr_spell_save" title="@{repeating_spells_$X_spell_save}" value="" placeholder="None"></label> <label><span>Save Type:</span> <input type="text" name="attr_spell_save_type" title="@{repeating_spell_$X_spell_save_type}" value="" placeholder="n/a"></label> <label class="span-two"><span>Area of Effect:</span> <input type="text" name="attr_spell_aoe" title="@{repeating_spells_$X_spell_aoe}" value="" placeholder="One Creature"></label></div><textarea class="sect height-tall" name="attr_spell_description" title="@{repeating_spells_$X_spell_description}" placeholder="Spell Description"></textarea> <span class="inline-label"><label><span>Notes:</span> <textarea name="attr_spell_notes" class="height-short" title="@{repeating_spells_$X_spell_notes}" placeholder="Notes"></textarea></label> <label><button type="roll" class="info-link" value="@{whisper_pc} [**LINK**](@{spell_link})" title="Send link to chat."></button> <textarea class="info-link" wrap="off" name="attr_spell_link" title="@{repeating_spells_$X_spell_link}" placeholder="https://www.example.com"></textarea></label> </span><textarea name="attr_spell_macro_text" class="height-short toggle-macros" title="@{repeating_spells_$X_spell_macro_text} | Caution: modifying the macro-text can break the roll.  Deleting the macro-text will safely reset the roll to the sheet's default macro.">@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Casts: @{spell_name}}} {{school=@{spell_school}}} {{spell_level=@{spell_level}}} {{spell_class=@{spell_caster_class_name}}} {{spell_class_level=@{spell_caster_class_level}}} {{range=@{spell_range}}} {{duration=@{spell_duration}}} {{area_of_effect=@{spell_aoe}}} {{components=@{spell_components}}} {{casting_time=@{spell_ct}}} {{saving_throw=@{spell_save}}} {{save_type=@{spell_save_type}}} {{link=@{spell_link}}} {{freetext=@{spell_description}}}</textarea></details></fieldset></div><input type="checkbox" class="sect-show" name="attr_spellsnotes_show" value="1"> <span class="subheader">Spells Notes</span><span class="material-icons"></span><div class="sect"><textarea name="attr_spellsnotes" title="@{spellsnotes}" placeholder="Spells Notes"></textarea></div></div><hr></section><section class="notes-box"><input type="checkbox" class="sect-show" name="attr_notes_info_show" value="1"><div class="header">NOTES</div><span class="material-icons"></span><div class="sect"><span class="notes-norep-columns"><button class="dice-button" type="roll" name="attr_note_roll" title="%{note_roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{note_name}}} {{freetext=@{notes}}}"></button> <span class="autoexpand"><input type="text" name="attr_note_name" title="@{note_name}" value="" placeholder="Note Name"> <span name="attr_note_name"></span> </span><span class="autoexpand span-two"><textarea class="height-fill" name="attr_notes" title="@{notes} | Field will resize to match it's content." placeholder="Misc Notes"></textarea> <span name="attr_notes"></span> </span></span><label class="left"><span>Single Column</span> <input type="checkbox" class="toggle-single-column-notes" name="attr_toggle_single_column_notes" title="@{toggle_single_column_notes}" value="1" checked="checked"></label></div><div class="sect"><fieldset class="repeating_notes"><span class="top-row notes-columns border-top-half"><button class="dice-button" type="roll" name="attr_notes_roll" title="%{repeating_notes_$X_notes_roll}" value="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{notes_name}}} {{freetext=@{notes_description}}}"></button> <span class="autoexpand"><input type="text" name="attr_notes_name" title="@{repeating_notes_$X_notes_name}" value="" placeholder="Note Name"> <span name="attr_notes_name"></span></span></span><details class="border-bottom-half"><summary><span class="material-icons gear-nav" title="Expand/Hide sub-section"></span></summary><textarea class="height-tall" name="attr_notes_description" title="@{repeating_notes_$X_notes_description}" placeholder="Misc Notes"></textarea></details></fieldset></div><hr></section><section class="options-box"><input type="checkbox" class="sect-show" name="attr_settings_show" value="1" checked="checked"><div class="header">SETTINGS</div><span class="material-icons"></span><div class="settings sect"><span class="text-notes"><strong>Reminder:</strong> these are "per-sheet" settings only. DM's that would like to set their own defaults for new characters can do so using the Default Settings section found in the main Game Settings page. If you would also like to apply these settings to all pre-existing characters in your game, follow these wiki instructions:<span class="inline-label"><button type="roll" class="url-roll btn ui-draggable" title="Post this link to chat." value="[Roll20 Wiki Link](https://wiki.roll20.net/Game_Settings_Page#Applying_Setting_Defaults_to_Existing_Content_In-Game)"><span>Applying Setting Defaults to Existing Content</span></button></span></span> <span class="inline-label left"><label title="@{background} | Choose a sheet background. note: Using Roll20's dark mode option will override this option."><h4>Background:</h4><select class="background-selection" name="attr_background"><option value="1" default="">White</option><option value="2" style="background-color: #d5cdc2;">Parchment</option><option value="7" style="background-color: #f6e8a7;">Light Goldenrod</option><option value="3" style="background-color: #f4d74f;">Goldenrod</option><option value="4" style="background-color: #b5dcb3">Moldvay</option><option value="5" style="background-color: var(--color-white1);">Light Greyhawk</option><option value="6" style="background-color: rgb(179 179 179 / 54%);">Greyhawk</option></select></label> <label title="@{color_option} | Color will be displayed with sheet rolls."><h4>Roll Template Color:</h4><select name="attr_color_option"><option style="background-color: var(--black); color: #fff;" value="black" selected="selected">black</option><option style="background-color: var(--blue); color: #fff;" value="blue">blue</option><option style="background-color: var(--darkblue); color: #fff;" value="darkblue">darkblue</option><option style="background-color: var(--darkgreen); color: #fff;" value="darkgreen">darkgreen</option><option style="background-color: var(--darkgrey); color: #fff;" value="darkgrey">darkgrey</option><option style="background-color: var(--darkorange); color: #fff;" value="darkorange">darkorange</option><option style="background-color: var(--darkpink); color: #fff;" value="darkpink">darkpink</option><option style="background-color: var(--darkpurple); color: #fff;" value="darkpurple">darkpurple</option><option style="background-color: var(--darkred); color: #fff;" value="darkred">darkred</option><option style="background-color: var(--darkyellow); color: #fff;" value="darkyellow">darkyellow</option><option style="background-color: var(--green); color: #fff;" value="green">green</option><option style="background-color: var(--grey); color: #fff;" value="grey">grey</option><option style="background-color: var(--orange); color: #fff;" value="orange">orange</option><option style="background-color: var(--pink); color: #fff;" value="pink">pink</option><option style="background-color: var(--purple); color: #fff;" value="purple">purple</option><option style="background-color: var(--red); color: #fff;" value="red">red</option><option style="background-color: var(--white);" value="white">white</option><option style="background-color: var(--yellow);" value="yellow">yellow</option></select></label> </span><span class="inline-label width-fill"><h4 class="stack-text">Sheet Image:</h4><label><select name="attr_sheet_image" title="@{sheet_image} | Image displayed on the sheet. Defaults to a selected Avatar." style="width:11em;"><option value="1" selected="selected">Use Avatar</option><option value="0">Use URL</option><option value="2">None</option></select> <button type="roll" class="button" value="[**LINK**](@{sheet_image_url})" title="Send image to chat."><span>Image URL:</span></button> <input type="text" class="width-fill border-light" name="attr_sheet_image_url" title="@{sheet_image_url} | Enter a valid image URL that ends with a proper image extension. ie .png, .jpg, .gif If needed, trim the url to the end of the image extension or add a 3-letter extension to the end of the url.." placeholder="https://app.roll20.net/images/character.png"></label> </span><span class="inline-label width-fill" title="@{surprise_die} | Choose the die used for Surprise rolls."><h4 class="stack-text">Surprise die:</h4><label style="width:auto;"><select name="attr_surprise_die" class="width-medium"><option value="6" selected="selected">1d6</option><option value="8">1d8</option><option value="10">1d10</option><option value="12">1d12</option><option value="20">1d20</option><option value="100">1d100</option></select></label> <label><button type="roll" class="button" value="@{surprise_macro_text}" title="Test Roll"><span>Surprise Macro:</span></button> <textarea class="height-half" name="attr_surprise_macro_text" title="@{surprise_macro_text} | Caution: modifying the macro-text can break the roll.  Deleting the macro-text will safely reset the roll to the sheet's default macro.">&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Surprised 1-?{Surprised on?(enter upper limit)|@{surprise}} on 1d@{surprise_die}}} {{roll=[[ 1d@{surprise_die}cf&lt;?{Surprised on?(enter upper limit)|@{surprise}}cs&gt;?{Surprised on?(enter upper limit)|@{surprise}} ]] }} {{Segment Adjustments}} {{dex_adjustment=[[ @{surprisebonus} ]]}} {{current_encumbrance=[[ @{current_encumbrance_move} ]]}}</textarea></label> </span><span class="inline-label width-fill" title="@{surprise_others_die} | Choose the die used for the Surprise Others rolls."><h4 class="stack-text">Surprise Others die:</h4><label style="width:auto;"><select name="attr_surprise_others_die" class="width-medium"><option value="6" selected="selected">1d6</option><option value="8">1d8</option><option value="10">1d10</option><option value="12">1d12</option><option value="20">1d20</option><option value="100">1d100</option></select></label> <label><button type="roll" class="button" value="@{surprise_others_macro_text}" title="Test Roll"><span>Surprise Others:</span></button> <textarea class="height-half" name="attr_surprise_others_macro_text" title="@{surprise_others_macro_text} | Caution: modifying the macro-text can break the roll.  Deleting the macro-text will safely reset the roll to the sheet's default macro.">&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Surprise Others 1-?{Surprise others on?(enter upper limit)|@{surprise}} on 1d@{surprise_others_die}}} {{roll=[[ 1d@{surprise_others_die}cs&lt;?{Surprise others on?(enter upper limit)|@{surprise}}cf&gt;?{Surprise others on?(enter upper limit)|@{surprise}} ]] }} {{Surprise Others Adj: [[ @{surprise_others_mod} ]]}} {{Segment Adjustments}} {{dex_adjustment=[[ @{surprisebonus} ]]}} {{current_encumbrance=[[ @{current_encumbrance_move} ]]}}</textarea></label> </span><span class="inline-label width-fill" title="@{initiative_die} | Choose the die used for Initiative rolls."><h4 class="stack-text">Initiative die:</h4><label style="width:auto;"><select name="attr_initiative_die" class="width-medium"><option value="6" selected="selected">1d6</option><option value="8">1d8</option><option value="10">1d10</option><option value="12">1d12</option><option value="20">1d20</option><option value="100">1d100</option></select></label> <label><button type="roll" class="button" value="@{init_macro_text}" title="Test Roll"><span>Initiative Macro:</span></button> <textarea class="height-half" name="attr_init_macro_text" title="@{init_macro_text} | Caution: modifying the macro-text can break the roll.  Deleting the macro-text will safely reset the roll to the sheet's default macro.">&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Initiative! 1d@{initiative_die}}} {{roll=[[ 1d@{initiative_die} + ( ?{Modifier?|0}[MOD] ) &{tracker}]]}} {{Misc. Adjustments}} {{mod_applied=[[ ?{Modifier?|0} ]]}} {{dex_adjustment= @{surprisebonus_inverted}}} {{current_encumbrance=[[ @{current_encumbrance_move} ]]}}</textarea></label> </span><span class="inline-label wrap width-fill"><h4>Misc. Options:</h4><label title="@{ability_check_die} | Die/Dice vs Ability Score. ie 1d20, 4d6, 3d6, etc."><span>Ability Check die:</span> <input type="text" class="width-small-plus border" name="attr_ability_check_die" value="1d20"></label> <label title="@{toggle_to_hit_table} | Use THAC0 instead of Attack Matrix. NOTE: The Autofill Table option uses the 1e table data to establish the base THAC0, but it does not use the repeating 20's."><span>Use THAC0:</span> <input type="checkbox" name="attr_toggle_to_hit_table" value="1"></label> <label title="@{toggle_fighter5} | Use a 5% progression to-Hit table. This is a Fighter only option and will have no effect for other classes."><span>Use Fighter 5%:</span> <input type="checkbox" name="attr_toggle_fighter5" value="1"></label> <label title="@{toggle_auto_damage} | Auto roll damage regardless of the attack roll."><span>Auto Roll Damage:</span> <input type="checkbox" name="attr_toggle_auto_damage" value="1"></label> <label title="@{toggle_critdamage} | Use crit damage rolls on natural 20. Defaults to weapon damage x2. Crit damage handling can be adjusted per attack."><span>Use Crit Damage:</span> <input type="checkbox" name="attr_toggle_critdamage" value="1"></label> <label title="@{toggle_lbs} | Use Lbs instead of gold pieces when determining encumbrance. Carrying capacities and carried coin weight will be divided by 10. Per-item weights need to be entered as lbs in order for the sheet to properly calculate encumbrance."><span>Use Lbs:</span> <input type="checkbox" class="toggle-lbs" name="attr_toggle_lbs" value="1"></label> </span><span class="five-columns"><h4 class="inline-label" style="grid-row: 1/3;margin-left: 3em;">Cleric:</h4><h4 class="stack-text" title="Standard Turn Undead by type.">Standard Turn Undead:</h4><label title="@{turn_undead_macro} | Choose a Cleric level."><span>Cleric Lvl:</span> <select name="attr_turn_undead_macro" class="width-smaller" style="appearance: none;"><option value="1}} {{?{Undead Type?|Skeleton,[[1d12]]Skeleton's=[[1d20cs>10cf<10]]|Zombie,[[1d12]]Zombie's=[[1d20cs>13cf<13]]|Ghoul,[[1d12]]Ghoul's=[[1d20cs>16cf<16]]|Shadow,[[1d12]]Shadow's=[[1d20cs>19cf<19]]|Wight,[[1d12]]Wight's=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}" selected="selected">1</option><option value="2}} {{?{Undead Type?|Skeleton,[[1d12]]Skeleton's=[[1d20cs>7cf<7]]|Zombie,[[1d12]]Zombie's=[[1d20cs>10cf<10]]|Ghoul,[[1d12]]Ghoul's=[[1d20cs>13cf<13]]|Shadow,[[1d12]]Shadow's=[[1d20cs>16cf<16]]|Wight,[[1d12]]Wight's=[[1d20cs>19cf<19]]|Ghast,[[1d12]]Ghast's=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">2</option><option value="3}} {{?{Undead Type?|Skeleton,[[1d12]]Skeleton's=[[1d20cs>4cf<4]]|Zombie,[[1d12]]Zombie's=[[1d20cs>7cf<7]]|Ghoul,[[1d12]]Ghoul's=[[1d20cs>10cf<10]]|Shadow,[[1d12]]Shadow's=[[1d20cs>13cf<13]]|Wight,[[1d12]]Wight's=[[1d20cs>16cf<16]]|Ghast,[[1d12]]Ghast's=[[1d20cs>19cf<19]]|Wraith,[[1d12]]Wraith's=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">3</option><option value="4}} {{?{Undead Type?|Skeleton,[[1d12 [T]]]Skeleton's=T|Zombie,[[1d12 [T]]]Zombie's=T|Ghoul,[[1d12]]Ghoul's=[[1d20cs>4cf<4]]|Shadow,[[1d12]]Shadow's=[[1d20cs>7cf<7]]|Wight,[[1d12]]Wight's=[[1d20cs>10cf<10]]|Ghast,[[1d12]]Ghast's=[[1d20cs>13cf<13]]|Wraith,[[1d12]]Wraith's=[[1d20cs>16cf<16]]|Mummy,[[1d12]]Mummy's=[[1d20cs>19cf<19]]|Spectre,[[1d12]]Spectre's=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">4</option><option value="5}} {{?{Undead Type?|Skeleton,[[1d12 [T]]]Skeleton's=T|Zombie,[[1d12 [T]]]Zombie's=T|Ghoul,[[1d12 [T]]]Ghoul's=T|Shadow,[[1d12]]Shadow's=[[1d20cs>4cf<4]]|Wight,[[1d12]]Wight's=[[1d20cs>7cf<7]]|Ghast,[[1d12]]Ghast's=[[1d20cs>10cf<10]]|Wraith,[[1d12]]Wraith's=[[1d20cs>13cf<13]]|Mummy,[[1d12]]Mummy's=[[1d20cs>16cf<16]]|Spectre,[[1d12]]Spectre's=[[1d20cs>19cf<19]]|Vampire,[[1d12]]Vampire's=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">5</option><option value="6}} {{?{Undead Type?|Skeleton,[[1d12 [D]]]Skeleton's=D|Zombie,[[1d12]]Zombie's=D|Ghoul,[[1d12 [T]]]Ghoul's=T|Shadow,[[1d12 [T]]]Shadow's=T|Wight,[[1d12]]Wight's=[[1d20cs>4cf<4]]|Ghast,[[1d12]]Ghast's=[[1d20cs>7cf<7]]|Wraith,[[1d12]]Wraith's=[[1d20cs>10cf<10]]|Mummy,[[1d12]]Mummy's=[[1d20cs>13cf<13]]|Spectre,[[1d12]]Spectre's=[[1d20cs>16cf<16]]|Vampire,[[1d12]]Vampire's=[[1d20cs>19cf<19]]|Ghost,[[1d12]]Ghost's=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">6</option><option value="7}} {{?{Undead Type?|Skeleton,[[1d12 [D]]]Skeleton's=D|Zombie,[[1d12 [D]]]Zombie's=D|Ghoul,[[1d12 [D]]]Ghoul's=D|Shadow,[[1d12 [T]]]Shadow's=T|Wight,[[1d12 [T]]]Wight's=T|Ghast,[[1d12]]Ghast's=[[1d20cs>4cf<4]]|Wraith,[[1d12]]Wraith's=[[1d20cs>7cf<7]]|Mummy,[[1d12]]Mummy's=[[1d20cs>10cf<10]]|Spectre,[[1d12]]Spectre's=[[1d20cs>13cf<13]]|Vampire,[[1d12]]Vampire's=[[1d20cs>16cf<16]]|Ghost,[[1d12]]Ghost's=[[1d20cs>19cf<19]]|Lich,[[1d12]]Lich's=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">7</option><option value="8}} {{?{Undead Type?|Skeleton,[[1d6+6 [D&#0185;]]]Skeleton's=D&#0185;|Zombie,[[1d12 [D]]]Zombie's=D|Ghoul,[[1d12 [D]]]Ghoul's=D|Shadow,[[1d12 [D]]]Shadow's=D|Wight,[[1d12 [T]]]Wight's=T|Ghast,[[1d12 [T]]]Ghast's=T|Wraith,[[1d12]]Wraith's=[[1d20cs>4cf<4]]|Mummy,[[1d12]]Mummy's=[[1d20cs>7cf<7]]|Spectre,[[1d12]]Spectre's=[[1d20cs>10cf<10]]|Vampire,[[1d12]]Vampire's=[[1d20cs>13cf<13]]|Ghost,[[1d12]]Ghost's=[[1d20cs>16cf<16]]|Lich,[[1d12]]Lich's=[[1d20cs>19cf<19]]|Special,[[1d2 [Special]]]Special=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">8</option><option value="9-13}} {{?{Undead Type?|Skeleton,[[1d6+6 [D&#0185;]]]Skeleton's=D&#0185;|Zombie,[[1d6+6 [D&#0185;]]]Zombie's=D&#0185;|Ghoul,[[1d12 [D]]]Ghoul's=D|Shadow,[[1d12 [D]]]Shadow's=D|Wight,[[1d12 [D]]]Wight's=D|Ghast,[[1d12 [T]]]Ghast's=T|Wraith,[[1d12 [T]]]Wraith's=T|Mummy,[[1d12]]Mummy's=[[1d20cs>4cf<4]]|Spectre,[[1d12]]Spectre's=[[1d20cs>7cf<7]]|Vampire,[[1d12]]Vampire's=[[1d20cs>10cf<10]]|Ghost,[[1d12]]Ghost's=[[1d20cs>13cf<13]]|Lich,[[1d12]]Lich's=[[1d20cs>16cf<16]]|Special,[[1d2 [Special]]]Special=[[1d20cs>19cf<19]]}}} {{Turned for [[3d4]] rounds}}">9-13</option><option value="14+}} {{?{Undead Type?|Skeleton,[[1d6+6 [D&#0185;]]]Skeleton's=D&#0185;|Zombie,[[1d6+6 [D&#0185;]]]Zombie's=D&#0185;|Ghoul,[[1d6+6 [D&#0185;]]]Ghoul's=D&#0185;|Shadow,[[1d6+6 [D&#0185;]]]Shadow's=D&#0185;|Wight,[[1d12 [D]]]Wight's=D|Ghast,[[1d12 [D]]]Ghast's=D|Wraith,[[1d12 [D]]]Wraith's=D|Mummy,[[1d12 [T]]]Mummy's=T|Spectre,[[1d12 [T]]]Spectre's=T|Vampire,[[1d12]]Vampire's=[[1d20cs>4cf<4]]|Ghost,[[1d12]]Ghost's=[[1d20cs>7cf<7]]|Lich,[[1d12]]Lich's=[[1d20cs>10cf<10]]|Special,[[1d2 [Special]]]Special=[[1d20cs>13cf<13]]}}} {{Turned for [[3d4]] rounds}}">14+</option></select></label> <label title="%{turn_undead_roll} | Standard Turn Undead by type."><button type="roll" name="roll_turn_undead_roll" value="@{whisper_pc} &{template:general} {{name=@{character_name}}} {{color=@{color_option}}} {{# & Type Effected}} {{subtag=Turn/Command Undead Lvl: @{turn_undead_macro}"><span>Turn Undead</span></button></label> <label title="Add to Special Abilities. Creates a unique, non-synced, ability."><button type="action" name="act_addturnundead"><span>+Add</span></button></label><h4 class="stack-text" title="Alternate version that groups undead by adjusted HD. Credit to Dragonsfoot.com see Footprints #7 for details.">Alternate Turn Undead:</h4><label title="@{turn_undead_macro2} | Choose a Cleric level."><span>Cleric Lvl:</span> <select name="attr_turn_undead_macro2" class="width-smaller" style="appearance: none;"><option value="1}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d12]]HD1: Poltergeist Skeleton Animal Skeleton=[[1d20cs>11cf<11]]|HD2: Zombie,[[1d12]]HD2: Zombie's=[[1d20cs>14cf<14]]|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d12]]HD3: Coffer Corpse Ghoul Sheet Phantom=[[1d20cs>17cf<17]]|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}" selected="selected">1</option><option value="2}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d12]]HD1: Poltergeist Skeleton Animal Skeleton=[[1d20cs>8cf<8]]|HD2: Zombie,[[1d12]]HD2: Zombie's=[[1d20cs>11cf<11]]|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d12]]HD3: Coffer Corpse Ghoul Sheet Phantom=[[1d20cs>14cf<14]]|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=[[1d20cs>17cf<17]]|HD5: Ghast Shadow,[[1d12]]HD5: Ghast Shadow=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">2</option><option value="3}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d12]]HD1: Poltergeist Skeleton Animal Skeleton=[[1d20cs>5cf<5]]|HD2: Zombie,[[1d12]]HD2: Zombie's=[[1d20cs>8cf<8]]|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d12]]HD3: Coffer Corpse Ghoul Sheet Phantom=[[1d20cs>11cf<11]]|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=[[1d20cs>14cf<14]]|HD5: Ghast Shadow,[[1d12]]HD5: Ghast Shadow=[[1d20cs>17cf<17]]|HD6: Son of Kyuss Wight Monster Zombie,[[1d12]]HD6: Son of Kyuss Wight Monster Zombie=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">3</option><option value="4}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d12]]HD1: Poltergeist Skeleton Animal Skeleton=[[1d20cs>2cf<2]]|HD2: Zombie,[[1d12]]HD2: Zombie's=[[1d20cs>5cf<5]]|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d12]]HD3: Coffer Corpse Ghoul Sheet Phantom=[[1d20cs>8cf<8]]|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=[[1d20cs>11cf<11]]|HD5: Ghast Shadow,[[1d12]]HD5: Ghast Shadow=[[1d20cs>14cf<14]]|HD6: Son of Kyuss Wight Monster Zombie,[[1d12]]HD6: Son of Kyuss Wight Monster Zombie=[[1d20cs>17cf<17]]|HD7: Crypt Thing Wraith,[[1d12]]HD7: Crypt Thing Wraith=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">4</option><option value="5}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d12 [T]]]HD1: Poltergeist Skeleton Animal Skeleton=T|HD2: Zombie,[[1d12]]HD2: Zombie's=[[1d20cs>2cf<2]]|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d12]]HD3: Coffer Corpse Ghoul Sheet Phantom=[[1d20cs>5cf<5]]|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=[[1d20cs>8cf<8]]|HD5: Ghast Shadow,[[1d12]]HD5: Ghast Shadow=[[1d20cs>11cf<11]]|HD6: Son of Kyuss Wight Monster Zombie,[[1d12]]HD6: Son of Kyuss Wight Monster Zombie=[[1d20cs>14cf<14]]|HD7: Crypt Thing Wraith,[[1d12]]HD7: Crypt Thing Wraith=[[1d20cs>17cf<17]]|HD8: Mummy,[[1d12]]HD8: Mummy's=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">5</option><option value="6}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d12 [T]]]HD1: Poltergeist Skeleton Animal Skeleton=T|HD2: Zombie,[[1d12]]HD2: Zombie's=T|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d12]]HD3: Coffer Corpse Ghoul Sheet Phantom=[[1d20cs>2cf<2]]|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=[[1d20cs>5cf<5]]|HD5: Ghast Shadow,[[1d12]]HD5: Ghast Shadow=[[1d20cs>8cf<8]]|HD6: Son of Kyuss Wight Monster Zombie,[[1d12]]HD6: Son of Kyuss Wight Monster Zombie=[[1d20cs>11cf<11]]|HD7: Crypt Thing Wraith,[[1d12]]HD7: Crypt Thing Wraith=[[1d20cs>14cf<14]]|HD8: Mummy,[[1d12]]HD8: Mummy's=[[1d20cs>17cf<17]]|HD9: Spectre,[[1d12]]HD9: Spectre's=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">6</option><option value="7}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d12 [T]]]HD1: Poltergeist Skeleton Animal Skeleton=T|HD2: Zombie,[[1d12 [T]]]HD2: Zombie's=T|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d12 [T]]]HD3: Coffer Corpse Ghoul Sheet Phantom=T|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=[[1d20cs>2cf<2]]|HD5: Ghast Shadow,[[1d12]]HD5: Ghast Shadow=[[1d20cs>5cf<5]]|HD6: Son of Kyuss Wight Monster Zombie,[[1d12]]HD6: Son of Kyuss Wight Monster Zombie=[[1d20cs>8cf<8]]|HD7: Crypt Thing Wraith,[[1d12]]HD7: Crypt Thing Wraith=[[1d20cs>11cf<11]]|HD8: Mummy,[[1d12]]HD8: Mummy's=[[1d20cs>14cf<14]]|HD9: Spectre,[[1d12]]HD9: Spectre's=[[1d20cs>17cf<17]]|HD10: Apparition,[[1d12]]HD10: Apparition's=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">7</option><option value="8}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d12 [D]]]HD1: Poltergeist Skeleton Animal Skeleton=D|HD2: Zombie,[[1d12 [T]]]HD2: Zombie's=T|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d12 [T]]]HD3: Coffer Corpse Ghoul Sheet Phantom=T|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12 [T]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=T|HD5: Ghast Shadow,[[1d12]]HD5: Ghast Shadow=[[1d20cs>2cf<2]]|HD6: Son of Kyuss Wight Monster Zombie,[[1d12]]HD6: Son of Kyuss Wight Monster Zombie=[[1d20cs>5cf<5]]|HD7: Crypt Thing Wraith,[[1d12]]HD7: Crypt Thing Wraith=[[1d20cs>8cf<8]]|HD8: Mummy,[[1d12]]HD8: Mummy's=[[1d20cs>11cf<11]]|HD9: Spectre,[[1d12]]HD9: Spectre's=[[1d20cs>14cf<14]]|HD10: Apparition,[[1d12]]HD10: Apparition's=[[1d20cs>17cf<17]]|HD11: Vampire,[[1d12]]HD11: Vampire's=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">8</option><option value="9}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d12 [D]]]HD1: Poltergeist Skeleton Animal Skeleton=D|HD2: Zombie,[[1d12 [D]]]HD2: Zombie's=D|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d12 [T]]]HD3: Coffer Corpse Ghoul Sheet Phantom=T|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12 [T]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=T|HD5: Ghast Shadow,[[1d12 [T]]]HD5: Ghast Shadow=T|HD6: Son of Kyuss Wight Monster Zombie,[[1d12]]HD6: Son of Kyuss Wight Monster Zombie=[[1d20cs>2cf<2]]|HD7: Crypt Thing Wraith,[[1d12]]HD7: Crypt Thing Wraith=[[1d20cs>5cf<5]]|HD8: Mummy,[[1d12]]HD8: Mummy's=[[1d20cs>8cf<8]]|HD9: Spectre,[[1d12]]HD9: Spectre's=[[1d20cs>11cf<11]]|HD10: Apparition,[[1d12]]HD10: Apparition's=[[1d20cs>14cf<14]]|HD11: Vampire,[[1d12]]HD11: Vampire's=[[1d20cs>17cf<17]]|HD12: Eye Of Fear & Flame Groaning Spirit,[[1d12]]HD12: Eye Of Fear & Flame Groaning Spirit=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">9</option><option value="10}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d12 [D]]]HD1: Poltergeist Skeleton Animal Skeleton=D|HD2: Zombie,[[1d12 [D]]]HD2: Zombie's=D|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d12 [D]]]HD3: Coffer Corpse Ghoul Sheet Phantom=D|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12 [T]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=T|HD5: Ghast Shadow,[[1d12 [T]]]HD5: Ghast Shadow=T|HD6: Son of Kyuss Wight Monster Zombie,[[1d12 [T]]]HD6: Son of Kyuss Wight Monster Zombie=T|HD7: Crypt Thing Wraith,[[1d12]]HD7: Crypt Thing Wraith=[[1d20cs>2cf<2]]|HD8: Mummy,[[1d12]]HD8: Mummy's=[[1d20cs>5cf<5]]|HD9: Spectre,[[1d12]]HD9: Spectre's=[[1d20cs>8cf<8]]|HD10: Apparition,[[1d12]]HD10: Apparition's=[[1d20cs>11cf<11]]|HD11: Vampire,[[1d12]]HD11: Vampire's=[[1d20cs>14cf<14]]|HD12: Eye Of Fear & Flame Groaning Spirit,[[1d12]]HD12: Eye Of Fear & Flame Groaning Spirit=[[1d20cs>17cf<17]]|HD13: Death Knight Ghost Lich,[[1d12]]HD13: Death Knight Ghost Lich=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">10</option><option value="11}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d6+6 [D&#0185;]]]HD1: Poltergeist Skeleton Animal Skeleton=D&#0185;|HD2: Zombie,[[1d12 [D]]]HD2: Zombie's=D|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d12 [D]]]HD3: Coffer Corpse Ghoul Sheet Phantom=D|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12 [T]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=T|HD5: Ghast Shadow,[[1d12 T]]]HD5: Ghast Shadow=T|HD6: Son of Kyuss Wight Monster Zombie,[[1d12 [T]]]HD6: Son of Kyuss Wight Monster Zombie=T|HD7: Crypt Thing Wraith,[[1d12 [T]]]HD7: Crypt Thing Wraith=T|HD8: Mummy,[[1d12]]HD8: Mummy's=[[1d20cs>2cf<2]]|HD9: Spectre,[[1d12]]HD9: Spectre's=[[1d20cs>5cf<5]]|HD10: Apparition,[[1d12]]HD10: Apparition's=[[1d20cs>8cf<8]]|HD11: Vampire,[[1d12]]HD11: Vampire's=[[1d20cs>11cf<11]]|HD12: Eye Of Fear & Flame Groaning Spirit,[[1d12]]HD12: Eye Of Fear & Flame Groaning Spirit=[[1d20cs>14cf<14]]|HD13: Death Knight Ghost Lich,[[1d12]]HD13: Death Knight Ghost Lich=[[1d20cs>17cf<17]]|HD14: Skeleton Warrior,[[1d12]]HD14: Skeleton Warrior=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">11</option><option value="12}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d6+6 [D&#0185;]]]HD1: Poltergeist Skeleton Animal Skeleton=D&#0185;|HD2: Zombie,[[1d6+6 [D&#0185;]]]HD2: Zombie's=D&#0185;|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d12 [D]]]HD3: Coffer Corpse Ghoul Sheet Phantom=D|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12 [D]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=D|HD5: Ghast Shadow,[[1d12 [D]]]HD5: Ghast Shadow=D|HD6: Son of Kyuss Wight Monster Zombie,[[1d12 [T]]]HD6: Son of Kyuss Wight Monster Zombie=T|HD7: Crypt Thing Wraith,[[1d12 [T]]]HD7: Crypt Thing Wraith=T|HD8: Mummy,[[1d12 [T]]]HD8: Mummy's=T|HD9: Spectre,[[1d12]]HD9: Spectre's=[[1d20cs>2cf<2]]|HD10: Apparition,[[1d12]]HD10: Apparition's=[[1d20cs>5cf<5]]|HD11: Vampire,[[1d12]]HD11: Vampire's=[[1d20cs>8cf<8]]|HD12: Eye Of Fear & Flame Groaning Spirit,[[1d12]]HD12: Eye Of Fear & Flame Groaning Spirit=[[1d20cs>11cf<11]]|HD13: Death Knight Ghost Lich,[[1d12]]HD13: Death Knight Ghost Lich=[[1d20cs>14cf<14]]|HD14: Skeleton Warrior,[[1d12]]HD14: Skeleton Warrior=[[1d20cs>17cf<17]]|HD15:,[[1d12]]HD15:=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">12</option><option value="13}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[1d6+6 [D&#0185;]]]HD1: Poltergeist Skeleton Animal Skeleton=D&#0185;|HD2: Zombie,[[1d6+6 [D&#0185;]]]HD2: Zombie's=D&#0185;|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d6+6 [D&#0185;]]]HD3: Coffer Corpse Ghoul Sheet Phantom=D&#0185;|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d12 [D]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=D|HD5: Ghast Shadow,[[1d12 [D]]]HD5: Ghast Shadow=D|HD6: Son of Kyuss Wight Monster Zombie,[[1d12 [D]]]HD6: Son of Kyuss Wight Monster Zombie=D|HD7: Crypt Thing Wraith,[[1d12 [T]]]HD7: Crypt Thing Wraith=T|HD8: Mummy,[[1d12 [T]]]HD8: Mummy's=T|HD9: Spectre,[[1d12 [T]]]HD9: Spectre's=T|HD10: Apparition,[[1d12]]HD10: Apparition's=[[1d20cs>2cf<2]]|HD11: Vampire,[[1d12]]HD11: Vampire's=[[1d20cs>5cf<5]]|HD12: Eye Of Fear & Flame Groaning Spirit,[[1d12]]HD12: Eye Of Fear & Flame Groaning Spirit=[[1d20cs>8cf<8]]|HD13: Death Knight Ghost Lich,[[1d12]]HD13: Death Knight Ghost Lich=[[1d20cs>11cf<11]]|HD14: Skeleton Warrior,[[1d12]]HD14: Skeleton Warrior=[[1d20cs>14cf<14]]|HD15:,[[1d12]]HD15:=[[1d20cs>17cf<17]]|HD16:,[[1d12]]HD16:=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">13</option><option value="14}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[2d6+6 [D&#0178;]]]HD1: Poltergeist Skeleton Animal Skeleton=D&#0178;|HD2: Zombie,[[1d6+6 [D&#0185;]]]HD2: Zombie's=D&#0185;|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d6+6 [D&#0185;]]]HD3: Coffer Corpse Ghoul Sheet Phantom=D&#0185;|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d6+6 [D&#0185;]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=D&#0185;|HD5: Ghast Shadow,[[1d12 [D]]]HD5: Ghast Shadow=D|HD6: Son of Kyuss Wight Monster Zombie,[[1d12 [D]]]HD6: Son of Kyuss Wight Monster Zombie=D|HD7: Crypt Thing Wraith,[[1d12 [D]]]HD7: Crypt Thing Wraith=D|HD8: Mummy,[[1d12 [T]]]HD8: Mummy's=T|HD9: Spectre,[[1d12 [T]]]HD9: Spectre's=T|HD10: Apparition,[[1d12 [T]]]HD10: Apparition's=T|HD11: Vampire,[[1d12]]HD11: Vampire's=[[1d20cs>2cf<2]]|HD12: Eye Of Fear & Flame Groaning Spirit,[[1d12]]HD12: Eye Of Fear & Flame Groaning Spirit=[[1d20cs>5cf<5]]|HD13: Death Knight Ghost Lich,[[1d12]]HD13: Death Knight Ghost Lich=[[1d20cs>8cf<8]]|HD14: Skeleton Warrior,[[1d12]]HD14: Skeleton Warrior=[[1d20cs>11cf<11]]|HD15:,[[1d12]]HD15:=[[1d20cs>14cf<14]]|HD16:,[[1d12]]HD16:=[[1d20cs>17cf<17]]|HD17:,[[1d12]]HD17:=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">14</option><option value="15}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[2d6+6 [D&#0178;]]]HD1: Poltergeist Skeleton Animal Skeleton=D&#0178;|HD2: Zombie,[[2d6+6 [D&#0178;]]]HD2: Zombie's=D&#0178;|HD3: Coffer Corpse Ghoul Sheet Phantom,[[1d6+6 [D&#0185;]]]HD3: Coffer Corpse Ghoul Sheet Phantom=D&#0185;|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d6+6 [D&#0185;]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=D&#0185;|HD5: Ghast Shadow,[[1d6+6 [D&#0185;]]]HD5: Ghast Shadow=D&#0185;|HD6: Son of Kyuss Wight Monster Zombie,[[1d12 [D]]]HD6: Son of Kyuss Wight Monster Zombie=D|HD7: Crypt Thing Wraith,[[1d12 [D]]]HD7: Crypt Thing Wraith=D|HD8: Mummy,[[1d12 [D]]]HD8: Mummy's=D|HD9: Spectre,[[1d12 [T]]]HD9: Spectre's=T|HD10: Apparition,[[1d12 [T]]]HD10: Apparition's=T|HD11: Vampire,[[1d12 [T]]]HD11: Vampire's=T|HD12: Eye Of Fear & Flame Groaning Spirit,[[1d12]]HD12: Eye Of Fear & Flame Groaning Spirit=[[1d20cs>2cf<2]]|HD13: Death Knight Ghost Lich,[[1d12]]HD13: Death Knight Ghost Lich=[[1d20cs>5cf<5]]|HD14: Skeleton Warrior,[[1d12]]HD14: Skeleton Warrior=[[1d20cs>8cf<8]]|HD15:,[[1d12]]HD15:=[[1d20cs>11cf<11]]|HD16:,[[1d12]]HD16:=[[1d20cs>14cf<14]]|HD17:,[[1d12]]HD17:=[[1d20cs>17cf<17]]|HD18:,[[1d12]]HD18:=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">15</option><option value="16}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[2d6+6 [D&#0178;]]]HD1: Poltergeist Skeleton Animal Skeleton=D&#0178;|HD2: Zombie,[[2d6+6 [D&#0178;]]]HD2: Zombie's=D&#0178;|HD3: Coffer Corpse Ghoul Sheet Phantom,[[2d6+6 [D&#0178;]]]HD3: Coffer Corpse Ghoul Sheet Phantom=D&#0178;|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[1d6+6 [D&#0185;]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=D&#0185;|HD5: Ghast Shadow,[[1d6+6 [D&#0185;]]]HD5: Ghast Shadow=D&#0185;|HD6: Son of Kyuss Wight Monster Zombie,[[1d6+6 [D&#0185;]]]HD6: Son of Kyuss Wight Monster Zombie=D&#0185;|HD7: Crypt Thing Wraith,[[1d12 [D]]]HD7: Crypt Thing Wraith=D|HD8: Mummy,[[1d12 [D]]]HD8: Mummy's=D|HD9: Spectre,[[1d12 [D]]]HD9: Spectre's=D|HD10: Apparition,[[1d12 [T]]]HD10: Apparition's=T|HD11: Vampire,[[1d12 [T]]]HD11: Vampire's=T|HD12: Eye Of Fear & Flame Groaning Spirit,[[1d12 [T]]]HD12: Eye Of Fear & Flame Groaning Spirit=T|HD13: Death Knight Ghost Lich,[[1d12]]HD13: Death Knight Ghost Lich=[[1d20cs>2cf<2]]|HD14: Skeleton Warrior,[[1d12]]HD14: Skeleton Warrior=[[1d20cs>5cf<5]]|HD15:,[[1d12]]HD15:=[[1d20cs>8cf<8]]|HD16:,[[1d12]]HD16:=[[1d20cs>11cf<11]]|HD17:,[[1d12]]HD17:=[[1d20cs>14cf<14]]|HD18:,[[1d12]]HD18:=[[1d20cs>17cf<17]]|HD19:,[[1d12]]HD19:=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">16</option><option value="17}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[2d6+12 [D&#0179;]]]HD1: Poltergeist Skeleton Animal Skeleton=D&#0179;|HD2: Zombie,[[2d6+6 [D&#0178;]]]HD2: Zombie's=D&#0178;|HD3: Coffer Corpse Ghoul Sheet Phantom,[[2d6+6 [D&#0178;]]]HD3: Coffer Corpse Ghoul Sheet Phantom=D&#0178;|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[2d6+6 [D&#0178;]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=D&#0178;|HD5: Ghast Shadow,[[1d6+6 [D&#0185;]]]HD5: Ghast Shadow=D&#0185;|HD6: Son of Kyuss Wight Monster Zombie,[[1d6+6 [D&#0185;]]]HD6: Son of Kyuss Wight Monster Zombie=D&#0185;|HD7: Crypt Thing Wraith,[[1d6+6 [D&#0185;]]]HD7: Crypt Thing Wraith=D&#0185;|HD8: Mummy,[[1d12 [D]]]HD8: Mummy's=D|HD9: Spectre,[[1d12 [D]]]HD9: Spectre's=D|HD10: Apparition,[[1d12 [D]]]HD10: Apparition's=D|HD11: Vampire,[[1d12 [T]]]HD11: Vampire's=T|HD12: Eye Of Fear & Flame Groaning Spirit,[[1d12 [T]]]HD12: Eye Of Fear & Flame Groaning Spirit=T|HD13: Death Knight Ghost Lich,[[1d12 [T]]]HD13: Death Knight Ghost Lich=T|HD14: Skeleton Warrior,[[1d12]]HD14: Skeleton Warrior=[[1d20cs>2cf<2]]|HD15:,[[1d12]]HD15:=[[1d20cs>5cf<5]]|HD16:,[[1d12]]HD16:=[[1d20cs>8cf<8]]|HD17:,[[1d12]]HD17:=[[1d20cs>11cf<11]]|HD18:,[[1d12]]HD18:=[[1d20cs>14cf<14]]|HD19:,[[1d12]]HD19:=[[1d20cs>17cf<17]]|HD20:,[[1d12]]HD20:=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">17</option><option value="18}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[2d6+12 [D&#0179;]]]HD1: Poltergeist Skeleton Animal Skeleton=D&#0179;|HD2: Zombie,[[2d6+12 [D&#0179;]]]HD2: Zombie's=D&#0179;|HD3: Coffer Corpse Ghoul Sheet Phantom,[[2d6+6 [D&#0178;]]]HD3: Coffer Corpse Ghoul Sheet Phantom=D&#0178;|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[2d6+6 [D&#0178;]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=D&#0178;|HD5: Ghast Shadow,[[2d6+6 [D&#0178;]]]HD5: Ghast Shadow=D&#0178;|HD6: Son of Kyuss Wight Monster Zombie,[[1d6+6 [D&#0185;]]]HD6: Son of Kyuss Wight Monster Zombie=D&#0185;|HD7: Crypt Thing Wraith,[[1d6+6 [D&#0185;]]]HD7: Crypt Thing Wraith=D&#0185;|HD8: Mummy,[[1d6+6 [D&#0185;]]]HD8: Mummy's=D&#0185;|HD9: Spectre,[[1d12 [D]]]HD9: Spectre's=D|HD10: Apparition,[[1d12 [D]]]HD10: Apparition's=D|HD11: Vampire,[[1d12 [D]]]HD11: Vampire's=D|HD12: Eye Of Fear & Flame Groaning Spirit,[[1d12 [T]]]HD12: Eye Of Fear & Flame Groaning Spirit=T|HD13: Death Knight Ghost Lich,[[1d12 [T]]]HD13: Death Knight Ghost Lich=T|HD14: Skeleton Warrior,[[1d12 [T]]]HD14: Skeleton Warrior=T|HD15:,[[1d12]]HD15:=[[1d20cs>2cf<2]]|HD16:,[[1d12]]HD16:=[[1d20cs>5cf<5]]|HD17:,[[1d12]]HD17:=[[1d20cs>8cf<8]]|HD18:,[[1d12]]HD18:=[[1d20cs>11cf<11]]|HD19:,[[1d12]]HD19:=[[1d20cs>14cf<14]]|HD20:,[[1d12]]HD20:=[[1d20cs>17cf<17]]|HD21:,[[1d12]]HD21:=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">18</option><option value="19}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[2d6+12 [D&#0179;]]]HD1: Poltergeist Skeleton Animal Skeleton=D&#0179;|HD2: Zombie,[[2d6+12 [D&#0179;]]]HD2: Zombie's=D&#0179;|HD3: Coffer Corpse Ghoul Sheet Phantom,[[2d6+12 [D&#0179;]]]HD3: Coffer Corpse Ghoul Sheet Phantom=D&#0179;|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[2d6+6 [D&#0178;]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=D&#0178;|HD5: Ghast Shadow,[[2d6+6 [D&#0178;]]]HD5: Ghast Shadow=D&#0178;|HD6: Son of Kyuss Wight Monster Zombie,[[2d6+6 [D&#0178;]]]HD6: Son of Kyuss Wight Monster Zombie=D&#0178;|HD7: Crypt Thing Wraith,[[1d6+6 [D&#0185;]]]HD7: Crypt Thing Wraith=D&#0185;|HD8: Mummy,[[1d6+6 [D&#0185;]]]HD8: Mummy's=D&#0185;|HD9: Spectre,[[1d6+6 [D&#0185;]]]HD9: Spectre's=D&#0185;|HD10: Apparition,[[1d12 [D]]]HD10: Apparition's=D|HD11: Vampire,[[1d12 [D]]]HD11: Vampire's=D|HD12: Eye Of Fear & Flame Groaning Spirit,[[1d12 [D]]]HD12: Eye Of Fear & Flame Groaning Spirit=D|HD13: Death Knight Ghost Lich,[[1d12 [T]]]HD13: Death Knight Ghost Lich=T|HD14: Skeleton Warrior,[[1d12 [T]]]HD14: Skeleton Warrior=T|HD15:,[[1d12 [T]]]HD15:=T|HD16:,[[1d12]]HD16:=[[1d20cs>2cf<2]]|HD17:,[[1d12]]HD17:=[[1d20cs>5cf<5]]|HD18:,[[1d12]]HD18:=[[1d20cs>8cf<8]]|HD19:,[[1d12]]HD19:=[[1d20cs>11cf<11]]|HD20:,[[1d12]]HD20:=[[1d20cs>14cf<14]]|HD21:,[[1d12]]HD21:=[[1d20cs>17cf<17]]|HD22:,[[1d12]]HD22:=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">19</option><option value="20+}} {{?{Undead Type?|HD1: Poltergeist Skeleton Animal Skeleton,[[2d6+12 [D&#0179;]]]HD1: Poltergeist Skeleton Animal Skeleton=D&#0179;|HD2: Zombie,[[2d6+12 [D&#0179;]]]HD2: Zombie's=D&#0179;|HD3: Coffer Corpse Ghoul Sheet Phantom,[[2d6+12 [D&#0179;]]]HD3: Coffer Corpse Ghoul Sheet Phantom=D&#0179;|HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie,[[2d6+12 [D&#0179;]]]HD4: Huecuva Penanggalan Sheet Ghoul Juju Zombie=D&#0179;|HD5: Ghast Shadow,[[2d6+6 [D&#0178;]]]HD5: Ghast Shadow=D&#0178;|HD6: Son of Kyuss Wight Monster Zombie,[[2d6+6 [D&#0178;]]]HD6: Son of Kyuss Wight Monster Zombie=D&#0178;|HD7: Crypt Thing Wraith,[[2d6+6 [D&#0178;]]]HD7: Crypt Thing Wraith=D&#0178;|HD8: Mummy,[[1d6+6 [D&#0185;]]]HD8: Mummy's=D&#0185;|HD9: Spectre,[[1d6+6 [D&#0185;]]]HD9: Spectre's=D&#0185;|HD10: Apparition,[[1d6+6 [D&#0185;]]]HD10: Apparition's=D&#0185;|HD11: Vampire,[[1d12 [D]]]HD11: Vampire's=D|HD12: Eye Of Fear & Flame Groaning Spirit,[[1d12 [D]]]HD12: Eye Of Fear & Flame Groaning Spirit=D|HD13: Death Knight Ghost Lich,[[1d12 [D]]]HD13: Death Knight Ghost Lich=D|HD14: Skeleton Warrior,[[1d12 [T]]]HD14: Skeleton Warrior=T|HD15:,[[1d12 [T]]]HD15:=T|HD16:,[[1d12 [T]]]HD16:=T|HD17:,[[1d12]]HD17:=[[1d20cs>2cf<2]]|HD18:,[[1d12]]HD18:=[[1d20cs>5cf<5]]|HD19:,[[1d12]]HD19:=[[1d20cs>8cf<8]]|HD20:,[[1d12]]HD20:=[[1d20cs>11cf<11]]|HD21:,[[1d12]]HD21:=[[1d20cs>14cf<14]]|HD22:,[[1d12]]HD22:=[[1d20cs>17cf<17]]|HD23:,[[1d12]]HD23:=[[1d20cs>20cf<20]]}}} {{Turned for [[3d4]] rounds}}">20+</option></select></label> <label title="%{turn_undead_roll} | Alternate version that groups undead by adjusted HD. Credit to Dragonsfoot.com see Footprints #7 for details."><button type="roll" name="roll_turn_undead2_roll" value="@{whisper_pc} &{template:general} {{name=@{character_name}}} {{color=@{color_option}}} {{# & Type Effected}} {{subtag=Turn/Command Undead Lvl: @{turn_undead_macro2}"><span>Turn Undead</span></button></label> <label title="Add to Special Abilities. Creates a unique, non-synced, ability."><button type="action" name="act_addturnundead2"><span>+Add</span></button></label> </span><span class="six-columns"><h4 style="grid-row: 1/3; justify-self: left;">Hide Areas:</h4><label class="inline-label" title="@{toggle_thief_skills} | Hides Thief Skills and melee attack backstab bonuses."><span>Thief Skills:</span> <input type="checkbox" name="attr_toggle_thief_skills" value="1" checked="checked"></label> <label class="inline-label" title="@{toggle_spells} | Hides the Spells section."><span>Spells:</span> <input type="checkbox" name="attr_toggle_spells" value="1"></label> <label class="inline-label" title="@{toggle_caster2} | Hides a second caster class in the Spells section."><span>Caster Class 2:</span> <input type="checkbox" name="attr_toggle_caster2" value="1" checked="checked"></label> <label class="inline-label" title="@{toggle_nwp} | Hides the Non-Weapon Proficiencies section."><span>NWP:</span> <input type="checkbox" name="attr_toggle_nwp" value="1" checked="checked"></label> <label class="inline-label" title="@{toggle_costs} | Hides cost fields and totals."><span>Costs:</span> <input type="checkbox" name="attr_toggle_costs" value="1"></label> <label class="inline-label" title="@{toggle_exceptional} | Hides the exceptional ability column. caveat: exceptional Strength will be shown regardless of this setting."><span>Exceptional:</span> <input type="checkbox" name="attr_toggle_exceptional" value="1" checked="checked"></label> <label class="inline-label" title="@{toggle_comeliness} | Hides the Comeliness ability row."><span>Comeliness:</span> <input type="checkbox" name="attr_toggle_comeliness" value="1" checked="checked"></label> <label class="inline-label" title="@{toggle_multiclass} | Hides additional class fields."><span>Multi-Class:</span> <input type="checkbox" name="attr_toggle_multiclass" value="1" checked="checked"></label> <label class="inline-label" title="@{toggle_psionics} | Hides Psionic-related fields found within Special Abilities."><span>Psionics:</span> <input type="checkbox" name="attr_toggle_psionics" value="1" checked="checked"></label> <label class="inline-label" title="@{toggle_macros} | Hides editable macro-text fields for various sheet-based rolls."><span>Sheet Macros:</span> <input type="checkbox" name="attr_toggle_macros" value="1" checked="checked"></label> <label></label> <span class="span-five text-notes">These options will show/hide sections of the sheet. Some options may hide related fields as well. ie hiding "Thief Skills" will also hide "Backstab" in attacks.</span> </span><span class="five-columns"><h4>Whisper Options:</h4><label class="span-two center"><span>PC Rolls:</span> <select class="width-medium" name="attr_whisper_pc" title="@{whisper_pc} | rolls from the PC page."><option value=" " selected="selected">Open Rolls</option><option value="/w gm">Whisper Rolls</option><option value="?{Whisper to DM?|no|yes,/w gm}">Ask</option></select></label> <label class="span-two center"><span>Monster Rolls:</span> <select class="width-medium" name="attr_whisper_npc" title="@{whisper_npc} | rolls from the Monster page."><option value=" " selected="selected">Open Rolls</option><option value="/w gm">Whisper Rolls</option><option value="?{Whisper to DM?|no|yes,/w gm}">Ask</option></select></label> <span></span> <span class="span-four text-notes">"Open" rolls will be shown to all. "Whispered" rolls will be hidden to other PC's. The DM sees all.</span> </span><span class="eight-columns"><h4 style="grid-row: 1/3; justify-self: left;">ADVANCED Options:</h4><span class="span-six inline-label wrap"><label class="sync-lock" title="@{sync_hp_flag} | Let the sheet sync Total HP max from Class Details."><span>Sync HP:</span> <input type="checkbox" name="attr_sync_hp_flag" value="1" checked="checked"> <span></span></label> <label class="sync-lock" title="@{sync_ac_flag} | Let the sheet sync Total AC from Armor Details with AC ( @{armorclass} )."><span>Sync AC:</span> <input type="checkbox" name="attr_sync_ac_flag" value="1" checked="checked"> <span></span></label> <label title="@{autocalc_ac} | This is a persistent setting. Let the sheet auto-calculate AC based on the values entered in the Armor Details table above. This will overwrite all values in the bottom row."><span>Auto-Calc AC:</span> <input type="checkbox" name="attr_autocalc_ac" value="1" checked="checked"></label> <label title="@{autocalc_movement_flag} | Let the sheet calculate Movement/Speed. Uses base movement and the current encumbrance(STR vs total_weight carried). Note: Load can can be set manually but any changes to base movement, encumbrance, or opening the sheet will trigger a re-calc."><span>Auto-Calc Movement:</span> <input type="checkbox" name="attr_autocalc_movement_flag" value="1" checked="checked"></label> <label title="@{autofill_matrix} | Let the sheet auto-fill the to-hit tables when the class and level selectors are changed in the attack Matrix/THAC0 window. NOTE: The Autofill Table option uses the 1e table data to establish the base THAC0, but it does not use the repeating 20's."><span>Autofill to-Hit Table:</span> <input type="checkbox" name="attr_autofill_matrix" value="1" checked="checked"></label> <label class="inline-label" title="@{sync_matrix_class} | Linking to a class will automatically adjust the to-Hit values when the linked class and/or level changes from the top of the sheet. Note: multi-class/dual-class characters should pick the most favorable class. Defaults to Class 1 of 3 if enabled."><span>Sync to-Hit to Class:</span> <input type="checkbox" name="attr_sync_matrix_class" value="1"></label> <label class="inline-label" title="@{autofill_thief} | Let the sheet auto-fill the Base chance when the level selector is changed."><span>Autofill Thief Base:</span> <input type="checkbox" name="attr_autofill_thief" value="1" checked="checked"></label> <label class="inline-label" title="@{sync_thief_class} | Linking to a class will automatically adjust the thief base values when the linked class level changes."><span>Sync Thief Skills to Class:</span> <input type="checkbox" name="attr_sync_thief_class" value="1"></label> </span><span class="span-seven inline-label" title="WARNING: any customization/editing that has been done on existing macro-text fields will be lost! You will not break anything by reseting. Reseting a field simply erases the existing value and forces the sheet to re-populate the field with the latest default value."><button type="action" name="act_resetallmacros" class="reset-macros"><span>Reset All</span></button> <button type="action" name="act_resetweaponsmacros" class="reset-macros"><span>Reset Weapons</span></button> <button type="action" name="act_resetspellsmacros" class="reset-macros"><span>Reset Spells</span></button> <button type="action" name="act_resetabilitiesmacros" class="reset-macros"><span>Reset Abilities</span></button> <button type="action" name="act_resetnwpsmacros" class="reset-macros"><span>Reset NWP</span></button> <button type="action" name="act_resetequipmentmacros" class="reset-macros"><span>Reset Equip</span></button></span></span></div><section class="custom-attributes"><input type="checkbox" class="sect-show" name="attr_custom_attributes_show" value="1"><div class="header">CUSTOM ATTRIBUTES</div><span class="material-icons"></span><div class="sect"><label class="left"><span>Single Column</span> <input type="checkbox" class="toggle-single-column-attributes" name="attr_toggle_single_column_attributes" title="@{toggle_single_column_attributes}" value="1" checked="checked"></label><fieldset class="repeating_attributes"><div class="border"><span class="inline-label"><span><button class="dice-button" type="roll" name="attr_attribute_roll" title="%{repeating_attributes_$X_attribute_roll} | PC Roll" value="@{attribute_macro_text}"></button> </span><label><input type="text" name="attr_attribute_name" title="@{repeating_attributes_$X_attribute_name}" placeholder="Attribute Name"></label> <label><span>Type:</span> <input type="text" name="attr_attribute_type" title="@{repeating_attributes_$X_attribute_type}" placeholder="n/a"></label> </span><span class="custom-attributes-box"><label><input type="text" class="width-fill" name="attr_attribute_mod_1_name" title="@{attribute_mod_1_name}" value="" placeholder="attribute_mod_1"></label> <label class="two-inputs-over-label"><input type="text" class="width-smallest" name="attr_attribute_mod_1" value="" title="@{attribute_mod_1}"> <span>/</span> <input type="text" class="width-smallest" name="attr_attribute_mod_1_max" value="" title="@{attribute_mod_1|max}"></label> <label><input type="text" class="width-fill" name="attr_attribute_mod_2_name" title="@{attribute_mod_2_name}" value="" placeholder="attribute_mod_2"></label> <label class="two-inputs-over-label"><input type="text" class="width-smallest" name="attr_attribute_mod_2" value="" title="@{attribute_mod_2}"> <span>/</span> <input type="text" class="width-smallest" name="attr_attribute_mod_2_max" value="" title="@{attribute_mod_2|max}"></label> <label><input type="text" class="width-fill" name="attr_attribute_mod_3_name" title="@{attribute_mod_3_name}" value="" placeholder="attribute_mod_3"></label> <label class="two-inputs-over-label"><input type="text" class="width-smallest" name="attr_attribute_mod_3" value="" title="@{attribute_mod_3}"> <span>/</span> <input type="text" class="width-smallest" name="attr_attribute_mod_3_max" value="" title="@{attribute_mod_3|max}"></label> <label><input type="text" class="width-fill" name="attr_attribute_mod_4_name" title="@{attribute_mod_4_name}" value="" placeholder="attribute_mod_4"></label> <label class="two-inputs-over-label"><input type="text" class="width-smallest" name="attr_attribute_mod_4" value="" title="@{attribute_mod_4}"> <span>/</span> <input type="text" class="width-smallest" name="attr_attribute_mod_4_max" value="" title="@{attribute_mod_4|max}"></label> <label><input type="text" class="width-fill" name="attr_attribute_mod_5_name" title="@{attribute_mod_5_name}" value="" placeholder="attribute_mod_5"></label> <label class="two-inputs-over-label"><input type="text" class="width-smallest" name="attr_attribute_mod_5" value="" title="@{attribute_mod_5}"> <span>/</span> <input type="text" class="width-smallest" name="attr_attribute_mod_5_max" value="" title="@{attribute_mod_5|max}"></label> <label><input type="text" class="width-fill" name="attr_attribute_mod_6_name" title="@{attribute_mod_6_name}" value="" placeholder="attribute_mod_6"></label> <label class="two-inputs-over-label"><input type="text" class="width-smallest" name="attr_attribute_mod_6" value="" title="@{attribute_mod_6}"> <span>/</span> <input type="text" class="width-smallest" name="attr_attribute_mod_6_max" value="" title="@{attribute_mod_6|max}"></label> <span class="inline-label span-all"><textarea class="height-short" name="attr_attribute_description" title="@{repeating_attributes_$X_attribute_description}" placeholder="Description"></textarea> </span><label class="inline-label span-all"><button type="roll" class="info-link" value="@{whisper_pc} [**LINK**](@{attribute_link})" title="Send link to chat."></button> <textarea class="info-link" wrap="off" name="attr_attribute_link" title="@{repeating_attributes_$X_attribute_link}" placeholder="https://www.example.com"></textarea></label> <textarea name="attr_attribute_notes" class="inline-label span-all height-short" title="@{repeating_attributes_$X_attribute_notes}" placeholder="Notes"></textarea> <textarea class="span-all height-short toggle-macros" name="attr_attribute_macro_text" title="@{repeating_attributes_$X_attribute_macro_text} | Caution: modifying the macro-text can break the roll.  Deleting the macro-text will safely reset the roll to the sheet's default macro.">@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{attribute_name}}} {{type=@{attribute_type}}} {{attribute_mod_1_name=@{attribute_mod_1_name}}} {{attribute_mod_1=@{attribute_mod_1}}} {{attribute_mod_1_max=@{attribute_mod_1|max}}} {{attribute_mod_2_name=@{attribute_mod_2_name}}} {{attribute_mod_2=@{attribute_mod_2}}} {{attribute_mod_2_max=@{attribute_mod_2|max}}} {{attribute_mod_3_name=@{attribute_mod_3_name}}} {{attribute_mod_3=@{attribute_mod_3}}} {{attribute_mod_3_max=@{attribute_mod_3|max}}} {{attribute_mod_4_name=@{attribute_mod_4_name}}} {{attribute_mod_4=@{attribute_mod_4}}} {{attribute_mod_4_max=@{attribute_mod_4|max}}} {{attribute_mod_5_name=@{attribute_mod_5_name}}} {{attribute_mod_5=@{attribute_mod_5}}} {{attribute_mod_5_max=@{attribute_mod_5|max}}} {{attribute_mod_6_name=@{attribute_mod_6_name}}} {{attribute_mod_6=@{attribute_mod_6}}} {{attribute_mod_6_max=@{attribute_mod_6|max}}} {{notes=@{attribute_notes}}} {{link=@{attribute_link}}} {{freetext=@{attribute_description}}}</textarea></span></div></fieldset></div></section><hr></section><section class="npc-box statblock1"><input type="checkbox" name="attr_character_name_error" class="hidden toggle-input-error" value="1" checked="checked"> <input type="text" class="height-short text-large left" name="attr_character_name" title="@{character_name} | NOTE: Including non-alpha-numeric characters 'may' break sheet rolls/macros. Specifically ')', ']', '}', or '|'." placeholder="Character Name" style="width: calc(50vw - 3em);min-width:17.5em;"> <span class="inline-label"><label><span>TYPE:</span> <input type="text" name="attr_race" value="" title="@{race}" placeholder="Type, Race, etc." style="width: calc(49vw - 6em); min-width:14em;"></label> </span><span class="inline-label"><label><span>FREQUENCY:</span> <select name="attr_frequency"><option selected="selected">Nil</option><option>Very rare</option><option>Rare</option><option>Uncommon</option><option>Common</option><option>Unique</option></select></label> </span><span class="inline-label"><label><span>NO. APPEARING:</span> <span class="autoexpand"><input type="text" name="attr_number_appearing" value="1"> <span name="attr_number_appearing"></span></span></label> </span><span class="inline-label split"><label style="min-width:8.5em"><span>ARMOR CLASS:</span> <input type="text" class="width-smallest field-border" name="attr_armorclass" title="@{armorclass} | Best AC. See Armor Details to adjust." value="10" style="text-align:center; padding:0;"></label> <label class="label-under-small width-auto"><span><span>AR:</span> <select name="attr_unarmored_base" title="@{unarmored_base}" class="width-small"><option value="10" selected="selected">10</option><option value="9">9</option><option value="8">8</option><option value="7">7</option><option value="6">6</option><option value="5">5</option><option value="4">4</option><option value="3">3</option><option value="2">2</option><option value="1">1</option><option value="0">0</option><option value="-">-</option></select> </span><label title="AC is not from armor. Weapons vs Armor Type does not apply."><input type="checkbox" name="attr_armor_rating_flag" value="1"> <span>Ignore</span></label></label> </span><span class="inline-label split"><label title="Primary Movement. NOTE: only the Primary movement is used for sheet calculations."><span>MOVE:</span> <input type="text" class="width-small-plus" name="attr_movement" title="@{movement}" value="12"></label> <label title="Other Movement. NOTE: not used for sheet calculations."><span>OTHER:</span> <input type="text" class="width-small-plus" name="attr_movement2" title="@{movement2}" value="" placeholder="Nil"></label> </span><span class="inline-label"><label><span>HIT DICE:</span> <input type="text" class="width-small" name="attr_monsterHD" title="@{monsterHD}" value="" placeholder="Nil"></label> <label>+ <input type="text" class="width-small" name="attr_monsterHD_bonus" title="@{monsterHD_bonus}" value="0"></label> <label><span>HIT POINTS:</span> <input type="text" class="field-border" name="attr_hitpoints" title="@{hitpoints}" value="0" style="text-align:center; padding:0;"></label> <label>/ <input type="text" class="width-small" name="attr_hitpoints_max" title="@{hitpoints|max} | Maximum Hit Points. No Damage. See Class Details to adjust." value="0"></label> </span><span class="inline-label split" style="margin-left: 15%; width: auto;"><label class="label-percent"><button class="dice-button text-only btn ui-draggable" type="roll" name="attr_morale-roll" title="%{selected|morale-roll} | NPC Roll" value="@{whisper_npc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Morale Check}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{morale_base}[BASE] + ( ?{Modifier?|0}[MOD] ) ]]%}} {{mod_applied=[[ ?{Modifier?|0} ]]%}}"><span>MORALE</span></button> <input type="text" class="width-smaller" name="attr_morale_base" title="@{morale_base} | Base is 50%. Adjust +/- per circumstances." value="50"></label> </span><span class="inline-label split"><label><span>% IN LAIR:</span> <input type="text" class="width-small" name="attr_lair" title="@{lair}" value="" placeholder="Nil"></label> <label><span>TREASURE TYPE:</span> <input type="text" class="width-fill" name="attr_treasure_type" title="@{treasure_type}" value="" placeholder="Nil"></label> </span><span class="inline-label"><label><span>NO. OF ATTACKS:</span> <input type="text" class="width-small" name="attr_number_of_attacks" title="@{number_of_attacks}" value="1"></label> </span><span class="inline-label"><label><span>DAMAGE/ATTACK:</span> <textarea class="height-short" name="attr_attack_damage" title="@{attack_damage}" value="" placeholder="e.g. 1d4/1d4/1d6"></textarea></label> </span><span class="inline-label"><label><button type="roll" class="dice-button text-only" name="roll_senses_roll" title="%{selected|senses_roll}" value="@{whisper_npc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Special Senses}} {{freetext=@{senses}}}"><span>SENSES:</span></button> <textarea class="height-short" name="attr_senses" title="@{senses}" placeholder="Nil"></textarea></label></span></section><section class="npc-box statblock2"><span class="inline-label"><label><span>SPECIAL ATTACKS:</span> <textarea class="height-short" name="attr_special_attacks" title="@{special_attacks}" placeholder="Nil"></textarea></label> </span><span class="inline-label"><label><span>SPECIAL DEFENSES:</span> <textarea class="height-short" name="attr_special_defenses" title="@{special_defenses}" placeholder="Nil"></textarea></label> </span><span class="inline-label"><label><span>WEAKNESSES:</span> <textarea class="height-short" name="attr_weaknesses" title="@{weaknesses}" placeholder="Nil"></textarea></label> </span><span class="inline-label"><label><span>MAGIC RESISTANCE:</span> <textarea class="height-short" name="attr_magic_resistance" title="@{magic_resistance}" placeholder="Nil"></textarea></label></span><div class="five-columns center"><label class="label-under"><button type="roll" class="text-only" name="roll_saveparalysispoisondeath" title="%{selected|saveparalysispoisondeath} | NPC Roll" value="@{whisper_npc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Paralysis, Poison or Death Magic}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{saveparalysispoisondeath}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span>Paralysis, Poison, or Death</span></button> <input type="text" class="width-smaller border" name="attr_saveparalysispoisondeath_base" title="@{saveparalysispoisondeath_base}" value="20"></label> <label class="label-under"><button class="text-only" type="roll" name="roll_savepetrificationpolymorph" title="%{selected|savepetrificationpolymorph} | NPC Roll" value="@{whisper_npc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Petrification or Polymorph}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{savepetrificationpolymorph}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span>Petrification or Polymorph</span></button> <input type="text" class="width-smaller border" name="attr_savepetrificationpolymorph_base" title="@{savepetrificationpolymorph_base}" value="20"></label> <label class="label-under"><button type="roll" class="text-only" name="roll_saverodsstaveswands" title="%{selected|saverodsstaveswands} | NPC Roll" value="@{whisper_npc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Rods, Staves, or Wands}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{saverodsstaveswands}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span>Rods, Staves, Wands</span></button> <input type="text" class="width-smaller border" name="attr_saverodsstaveswands_base" title="@{saverodsstaveswands_base}" value="20"></label> <label class="label-under"><button type="roll" class="text-only" name="roll_savebreathweapons" title="%{selected|savebreathweapons} | NPC Roll" value="@{whisper_npc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Breath Weapon}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{savebreathweapons}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span>Breath Weapon</span></button> <input type="text" class="width-smaller border" name="attr_savebreathweapons_base" title="@{savebreathweapons_base}" value="20"></label> <label class="label-under"><button type="roll" class="text-only" name="roll_savespells" title="%{selected|savespells} | NPC Roll" value="@{whisper_npc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Spells}} {{roll_high=[[ 1d20 + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[@{savespells}]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}}"><span>Spells</span></button> <input type="text" class="width-smaller border" name="attr_savespells_base" title="@{savespells_base}" value="20"></label><div class="span-all"><div class="saves-class sect left"><label class="inline-label" title="@{autofill_saves} | Let the sheet auto-fill the Base Saves when the class and HD/Level selectors are changed."><input type="checkbox" name="attr_autofill_saves" value="1" checked=""><h4>Autofill Base as:</h4></label> <label class="center"><select class="width-fill border" name="attr_saves_class" title="@{saves_class}"><option value="0" selected="selected" style="font-weight: bold;">~ Select Monster or Class ~</option><option value="3">Monster, Fighter, Paladin, or Ranger</option><option value="1">Cleric</option><option value="2">Druid</option><option value="4">Magic-User or Illusionist</option><option value="5">Thief</option><option value="6">Monk</option><option value="7">Assassin</option><option value="8">Other 0-lvl Types</option></select></label> <label class="center"><span>HD/Lvl:</span> <input class="width-small border" type="number" min="0" name="attr_saves_level" value="1" title="@{saves_level}"></label></div></div></div><span class="inline-label"><label><span>LANGUAGES:</span> <textarea class="height-short" name="attr_languages" title="@{languages}" placeholder="languages known"></textarea></label> </span><span class="inline-label"><label><span>INTELLIGENCE:</span> <select name="attr_intelligence_npc" title="@{intelligence_npc}"><option selected="selected">Nil</option><option>Non-intelligent/not ratable</option><option>Animal intelligence</option><option>Semi-intelligent</option><option>Low intelligence</option><option>Average (human) intelligence</option><option>Very intelligent</option><option>Highly intelligent</option><option>Exceptionally intelligent</option><option>Genius-level intelligence</option><option>Supra-genius</option><option>Godlike intelligence</option></select></label> </span><span class="inline-label"><textarea class="height-short" name="attr_intelligence_npc2" title="@{intelligence_npc2}" value="" placeholder="notes"></textarea> </span><span class="inline-label"><label><span>ALIGNMENT:</span> <input type="text" class="width-medium" name="attr_alignment" title="@{alignment}"></label> </span><span class="inline-label split"><label title="Natural/Unaltered size." style="min-width: auto;"><span>SIZE:</span> <select name="attr_size" title="@{size}"><option>S</option><option selected="selected">M</option><option>L</option></select></label> <label title="Current/Altered size."><span>Temp Size:</span> <select name="attr_size2" title="@{size2}"><option>S</option><option selected="selected">M</option><option>L</option></select></label> <label><span>HT:</span> <input type="text" name="attr_height" title="@{height}" value="0"></label> <label><span>WT:</span> <input type="text" name="attr_weight" title="@{weight}" value="0"></label> </span><span class="inline-label"><label><span>PSIONIC ABILITY:</span> <input type="text" class="width-medium" name="attr_psionic_ability" title="@{psionic_ability} | Use Special Abilities to add Attack/Defensive Modes, and Specialties." value="" placeholder="Nil"></label> <label class="inline-label" title="@{toggle_psionics} | Hides Psionic-related fields found within Special Abilities."><span>Hide Other Psionics:</span> <input type="checkbox" name="attr_toggle_psionics" value="1" checked=""></label> </span><span class="inline-label"><label><span>Attack/Defense Modes</span> <input type="text" class="width-medium" name="attr_psionic_modes" title="@{psionic_modes}" value="" placeholder="Nil"></label> </span><span class="inline-label"><label><span>LEVEL/XP VALUE:</span> <input type="text" class="width-large" name="attr_level_xp_value" title="@{level_xp_value}" value="" placeholder="Nil"></label></span><label class="inline-label"><button type="roll" class="image-link" value="@{whisper_npc} [**LINK**](@{sheet_image_url})" title="Send image to chat."></button> <textarea class="image-link" wrap="off" name="attr_sheet_image_url" title="@{sheet_image_url} | Enter a valid image URL that ends with a proper image extension. ie .png, .jpg, .gif If needed, trim the url to the end of the image extension or add a 3-letter extension to the end of the url.." placeholder="https://app.roll20.net/images/character.png"></textarea> <button type="roll" class="info-link" value="@{whisper_npc} [**LINK**](@{npc_link})" title="Send link to chat."></button> <textarea class="info-link" wrap="off" name="attr_npc_link" title="@{npc_link}" placeholder="https://www.example.com"></textarea></label></section><section class="npc-box statblock3"><input type="hidden" class="toggle-avatar" name="attr_sheet_image" value="1"><div class="image-avatar" name="attr_sheet_image_url" title="Send image to chat."><img name="attr_character_avatar"> <button type="action" name="act_postimage" class="image-link"></button> <input type="hidden" name="attr_sheet_image_src"></div></section><section class="npc-box statblock3-span"><span class="inline-label wrap" style="min-width: 356px;"><label><button class="dice-button text-only" type="roll" name="attr_init-roll" title="%{selected|init-roll}" value="@{whisper_npc} @{init_macro_text}"><span>INITIATIVE</span></button></label> <label><button class="dice-button text-only" type="roll" name="attr_surprise-roll" title="%{selected|surprise-roll}" value="@{whisper_npc} @{surprise_macro_text}"><span>SURPRISE</span></button></label> <label class="auto-width right"><span>Surprise Chance</span> <input type="text" class="width-smaller" name="attr_surprise" title="@{surprise}" value="2"></label> <label class="auto-width left"><select name="attr_surprise_die" class="width-medium" title="@{surprise_die}"><option value="6" selected="selected">of 6</option><option value="8">of 8</option><option value="10">of 10</option><option value="12">of 12</option><option value="20">of 20</option><option value="100">of 100</option></select></label> <label class="auto-width"><button type="roll" class="dice-button text-only" name="roll_surprise_others-roll" title="%{selected|surprise_others-roll}" value="@{whisper_npc} @{surprise_others_macro_text}"><span>Surprise Others</span></button> <span>Adj.</span> <input type="text" class="width-smaller" name="attr_surprise_others_mod" title="@{surprise_others_mod} | The modifier is typically indicated as bonus although the value is SUBTRACTED from the opponents Surprise check." value="0"></label></span></section><section class="npc-box statblock4"><textarea name="attr_npc_notes" title="@{npc_notes}" placeholder="Enter Notes/Description..." style="height:100%;"></textarea></section><section class="footer-box"><span class="inline-label text-small"><span>Questions/feedback?</span> <button type="roll" class="url-roll" title="Post this link to chat." value="[AD&D1e Development Game](https://app.roll20.net/campaigns/details/731454/)">AD&D1e Development Game</button> </span><span class="inline-label text-small"><span>Author: Vince &amp; the Roll20 Community</span> <label><span>&nbsp;v<input type="text" class="width-smaller version" name="attr_sheet_version" value="0" readonly="readonly"></span></label></span></section></div></div><div class="sheet-roll_templates"><rolltemplate class="sheet-rolltemplate-attacks"><div class="{{#color}}color-{{color}}{{/color}}"><span class="sheet-row">{{#bigname}} <span class="sheet-template-header sheet-bigger-text sheet-span-two">{{bigname}}</span> {{/bigname}} </span><span class="sheet-row">{{#name}} <span class="sheet-template-header sheet-span-two">{{name}}</span> {{/name}} {{#subtag}} <span class="sheet-subheader sheet-span-two">{{subtag}}{{#dual}}&nbsp;<span class="sheet-smaller-text" title="Dual Attack.">({{dual}})</span>{{/dual}}</span> {{/subtag}} </span><span class="sheet-row">{{#bigtext1}}<span class="sheet-big-text sheet-span-two">{{bigtext1}}</span>{{/bigtext1}}</span> <span class="sheet-row">{{#bigtext2}}<span class="sheet-big-text sheet-span-two">{{bigtext2}}</span>{{/bigtext2}}</span> <span class="sheet-row">{{#bigtext3}}<span class="sheet-big-text sheet-span-two">{{bigtext3}}</span>{{/bigtext3}}</span> <span class="sheet-row">{{#bigtext4}}<span class="sheet-big-text sheet-span-two">{{bigtext4}}</span>{{/bigtext4}}</span> <span class="sheet-row">{{#bigtext5}}<span class="sheet-big-text sheet-span-two">{{bigtext5}}</span>{{/bigtext5}}</span> <span class="sheet-row">{{#bigtext6}}<span class="sheet-big-text sheet-span-two">{{bigtext6}}</span>{{/bigtext6}}</span> <span class="sheet-row">{{#bigtext7}}<span class="sheet-big-text sheet-span-two">{{bigtext7}}</span>{{/bigtext7}}</span> <span class="sheet-row">{{#bigtext8}}<span class="sheet-big-text sheet-span-two">{{bigtext8}}</span>{{/bigtext8}}</span> <span class="sheet-row">{{#bigtext9}}<span class="sheet-big-text sheet-span-two">{{bigtext9}}</span>{{/bigtext9}}</span> <span class="sheet-row">{{#bigtext10}}<span class="sheet-big-text sheet-span-two">{{bigtext10}}</span>{{/bigtext10}}</span> <span class="sheet-row">{{#bigtext11}}<span class="sheet-big-text sheet-span-two">{{bigtext11}}</span>{{/bigtext11}}</span> <span class="sheet-row">{{#bigtext12}}<span class="sheet-big-text sheet-span-two">{{bigtext12}}</span>{{/bigtext12}}</span> {{#attack1}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat"><span class="sheet-center">Attack =</span>&nbsp;{{attack1}} {{#rollWasCrit() attack1}} {{#rollGreater() crit 0}} {{#crit}}<span class="sheet-bold sheet-center">CRIT!</span>{{/crit}} {{/rollGreater() crit 0}} {{/rollWasCrit() attack1}} </span></span>{{#^rollGreater() crit 0}} {{#crit}} {{#damagevsSMchatmenu}}{{#damagevsLchatmenu}} <span class="sheet-row"><span class="sheet-span-two sheet-center sheet-tcat">{{damagevsSMchatmenu}}{{damagevsLchatmenu}} </span></span>{{/damagevsLchatmenu}}{{/damagevsSMchatmenu}} {{/crit}} {{/^rollGreater() crit 0}} {{#rollGreater() crit 0}} {{#crit}} {{#^rollWasCrit() attack1}} {{#damagevsSMchatmenu}}{{#damagevsLchatmenu}} <span class="sheet-row"><span class="sheet-span-two sheet-center sheet-tcat">{{damagevsSMchatmenu}}{{damagevsLchatmenu}} </span></span>{{/damagevsLchatmenu}}{{/damagevsSMchatmenu}} {{/^rollWasCrit() attack1}} {{#rollWasCrit() attack1}} {{#critdamagevsSMchatmenu}}{{#critdamagevsLchatmenu}} <span class="sheet-row"><span class="sheet-span-two sheet-center sheet-tcat">{{critdamagevsSMchatmenu}}{{critdamagevsLchatmenu}} </span></span>{{/critdamagevsLchatmenu}}{{/critdamagevsSMchatmenu}} {{/rollWasCrit() attack1}} {{/crit}} {{/rollGreater() crit 0}} {{/attack1}} {{#attack2}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat">Attack 2 = {{attack2}} {{#rollWasCrit() attack2}} {{#rollGreater() crit 0}} {{#crit}}<span class="sheet-bold sheet-center">CRIT!</span>{{/crit}} {{/rollGreater() crit 0}} {{/rollWasCrit() attack2}} </span></span>{{#rollGreater() crit 0}} {{#crit}} {{#^rollWasCrit() attack2}} {{#damagevsSMchatmenu}}{{#damagevsLchatmenu}} <span class="sheet-row"><span class="sheet-span-two sheet-center sheet-tcat">{{damagevsSMchatmenu}}{{damagevsLchatmenu}} </span></span>{{/damagevsLchatmenu}}{{/damagevsSMchatmenu}} {{/^rollWasCrit() attack2}} {{#rollWasCrit() attack2}} {{#critdamagevsSMchatmenu}}{{#critdamagevsLchatmenu}} <span class="sheet-row"><span class="sheet-span-two sheet-center sheet-tcat">{{critdamagevsSMchatmenu}}{{critdamagevsLchatmenu}} </span></span>{{/critdamagevsLchatmenu}}{{/critdamagevsSMchatmenu}} {{/rollWasCrit() attack2}} {{/crit}} {{/rollGreater() crit 0}} {{/attack2}} {{#attack3}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat">Attack 3 = {{attack3}} {{#rollWasCrit() attack3}} {{#rollGreater() crit 0}} {{#crit}}<span class="sheet-bold sheet-center">CRIT!</span>{{/crit}} {{/rollGreater() crit 0}} {{/rollWasCrit() attack3}} </span></span>{{#rollGreater() crit 0}} {{#crit}} {{#^rollWasCrit() attack3}} {{#damagevsSMchatmenu}}{{#damagevsLchatmenu}} <span class="sheet-row"><span class="sheet-span-two sheet-center sheet-tcat">{{damagevsSMchatmenu}}{{damagevsLchatmenu}} </span></span>{{/damagevsLchatmenu}}{{/damagevsSMchatmenu}} {{/^rollWasCrit() attack3}} {{#rollWasCrit() attack3}} {{#critdamagevsSMchatmenu}}{{#critdamagevsLchatmenu}} <span class="sheet-row"><span class="sheet-span-two sheet-center sheet-tcat">{{critdamagevsSMchatmenu}}{{critdamagevsLchatmenu}} </span></span>{{/critdamagevsLchatmenu}}{{/critdamagevsSMchatmenu}} {{/rollWasCrit() attack3}} {{/crit}} {{/rollGreater() crit 0}} {{/attack3}} {{#attack4}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat">Attack 4 = {{attack4}} {{#rollWasCrit() attack4}} {{#rollGreater() crit 0}} {{#crit}}<span class="sheet-bold sheet-center">CRIT!</span>{{/crit}} {{/rollGreater() crit 0}} {{/rollWasCrit() attack4}} </span></span>{{#rollGreater() crit 0}} {{#crit}} {{#^rollWasCrit() attack4}} {{#damagevsSMchatmenu}}{{#damagevsLchatmenu}} <span class="sheet-row"><span class="sheet-span-two sheet-center sheet-tcat">{{damagevsSMchatmenu}}{{damagevsLchatmenu}} </span></span>{{/damagevsLchatmenu}}{{/damagevsSMchatmenu}} {{/^rollWasCrit() attack4}} {{#rollWasCrit() attack4}} {{#critdamagevsSMchatmenu}}{{#critdamagevsLchatmenu}} <span class="sheet-row"><span class="sheet-span-two sheet-center sheet-tcat">{{critdamagevsSMchatmenu}}{{critdamagevsLchatmenu}} </span></span>{{/critdamagevsLchatmenu}}{{/critdamagevsSMchatmenu}} {{/rollWasCrit() attack4}} {{/crit}} {{/rollGreater() crit 0}} {{/attack4}} {{#damage1vsSM}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat"><span class="sheet-center">Damage =</span>&nbsp;{{damage1vsSM}} {{#rollGreater() crit 0}} {{#crit}}<span class="sheet-bold sheet-center">CRIT!</span>{{/crit}} {{/rollGreater() crit 0}} </span></span>{{/damage1vsSM}} {{#damage1vsL}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat"><span class="sheet-center">Damage vs LG =</span>&nbsp;{{damage1vsL}} {{#rollGreater() crit 0}} {{#crit}}<span class="sheet-bold sheet-center">CRIT!</span>{{/crit}} {{/rollGreater() crit 0}} </span></span>{{/damage1vsL}} {{#damage2vsSM}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat"><span class="sheet-center">Damage 2 =</span>&nbsp;{{damage2vsSM}} {{#rollGreater() crit 0}} {{#crit}}<span class="sheet-bold sheet-center">CRIT!</span>{{/crit}} {{/rollGreater() crit 0}} </span></span>{{/damage2vsSM}} {{#damage2vsL}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat"><span class="sheet-center">Damage 2 vs LG =</span>&nbsp;{{damage2vsL}} {{#rollGreater() crit 0}} {{#crit}}<span class="sheet-bold sheet-center">CRIT!</span>{{/crit}} {{/rollGreater() crit 0}} </span></span>{{/damage2vsL}} {{#damage3vsSM}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat"><span class="sheet-center">Damage 3 =</span>&nbsp;{{damage3vsSM}} {{#rollGreater() crit 0}} {{#crit}}<span class="sheet-bold sheet-center">CRIT!</span>{{/crit}} {{/rollGreater() crit 0}} </span></span>{{/damage3vsSM}} {{#damage3vsL}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat"><span class="sheet-center">Damage 3 vs LG =</span>&nbsp;{{damage3vsL}} {{#rollGreater() crit 0}} {{#crit}}<span class="sheet-bold sheet-center">CRIT!</span>{{/crit}} {{/rollGreater() crit 0}} </span></span>{{/damage3vsL}} {{#damage4vsSM}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat"><span class="sheet-center">Damage 4 =</span>&nbsp;{{damage4vsSM}} {{#rollGreater() crit 0}} {{#crit}}<span class="sheet-bold sheet-center">CRIT!</span>{{/crit}} {{/rollGreater() crit 0}} </span></span>{{/damage4vsSM}} {{#damage4vsL}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat"><span class="sheet-center">Damage 4 vs LG =</span>&nbsp;{{damage4vsL}} {{#rollGreater() crit 0}} {{#crit}}<span class="sheet-bold sheet-center">CRIT!</span>{{/crit}} {{/rollGreater() crit 0}} </span></span>{{/damage4vsL}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat">{{#rollGreater() backstab 1}} {{#backstab}}<span class="sheet-bold sheet-center">Backstab Attack!!!</span>{{/backstab}} {{/rollGreater() backstab 1}} </span></span><span class="sheet-row"><span class="sheet-span-two sheet-smaller-text">{{#damagetype}}<span class="sheet-bold">Type:&nbsp;</span>{{damagetype}}&nbsp;{{/damagetype}} {{#rate}}<span class="sheet-bold">RoF:&nbsp;</span>{{rate}}&nbsp;{{/rate}} {{#range}}<span class="sheet-bold">Range:&nbsp;</span>{{range}}&nbsp;{{/range}} {{#length}}<span class="sheet-bold">Length:&nbsp;</span>{{length}}&nbsp;{{/length}} {{#space}}<span class="sheet-bold">Space:&nbsp;</span>{{space}}&nbsp;{{/space}} {{#speed}}<span class="sheet-bold">Speed:&nbsp;</span>{{speed}}&nbsp;{{/speed}} {{#range}} {{#rollGreater() ammo 0}} {{#ammo}}<span class="sheet-bold">Ammo:&nbsp;</span>{{ammo}}&nbsp;{{/ammo}} {{/rollGreater() ammo 0}} {{#rollTotal() ammo 0}} {{#ammo}}<span class="sheet-bold">No Ammo!</span>&nbsp;{{/ammo}} {{/rollTotal() ammo 0}} {{/range}} </span></span>{{#allprops() name subtag bigname bigtext1 bigtext2 bigtext3 bigtext4 bigtext5 bigtext6 bigtext7 bigtext8 bigtext9 bigtext10 bigtext11 bigtext12 footer backstab crit dual color attack1 attack2 attack3 attack4 damagevsSMchatmenu damagevsLchatmenu critdamagevsSMchatmenu critdamagevsLchatmenu damage1vsSM damage2vsSM damage3vsSM damage4vsSM damage1vsL damage2vsL damage3vsL damage4vsL damage1 ToHitArmorType0 ToHitArmorType1 ToHitArmorType2 ToHitArmorType3 ToHitArmorType4 ToHitArmorType5 ToHitArmorType6 ToHitArmorType7 ToHitArmorType8 ToHitArmorType9 ToHitArmorType10 WeaponNotes freetext damagetype rate range length space speed ammo whisper}} <span class="sheet-row sheet-all-props"><span class="sheet-tcat">{{key}}</span> <span>{{value}}</span> </span>{{/allprops() name subtag bigname bigtext1 bigtext2 bigtext3 bigtext4 bigtext5 bigtext6 bigtext7 bigtext8 bigtext9 bigtext10 bigtext11 bigtext12 footer backstab crit dual color attack1 attack2 attack3 attack4 damagevsSMchatmenu damagevsLchatmenu critdamagevsSMchatmenu critdamagevsLchatmenu damage1vsSM damage2vsSM damage3vsSM damage4vsSM damage1vsL damage2vsL damage3vsL damage4vsL damage1 ToHitArmorType0 ToHitArmorType1 ToHitArmorType2 ToHitArmorType3 ToHitArmorType4 ToHitArmorType5 ToHitArmorType6 ToHitArmorType7 ToHitArmorType8 ToHitArmorType9 ToHitArmorType10 WeaponNotes freetext damagetype rate range length space speed ammo whisper}} {{#WeaponNotes}} <span class="sheet-row"><span class="sheet-text sheet-span-two sheet-text"><span class="sheet-bold">Notes</span>:&nbsp;{{WeaponNotes}}</span> </span>{{/WeaponNotes}} {{#freetext}} <span class="sheet-row"><span class="sheet-span-two sheet-text sheet-free-text">{{freetext}}</span> </span>{{/freetext}} {{#ToHitArmorType10}} <span class="sheet-wrap-ToHit-table"><span class="sheet-wrap-ToHit"><span><span class="sheet-bold" title="vs Armor Rating/Type">AR</span> <span title="to-Hit Adjustment">Adj</span> </span></span><span class="sheet-wrap-ToHit">{{#ToHitArmorType0}}<span><span>0</span><span>{{ToHitArmorType0}}</span></span>{{/ToHitArmorType0}} {{#ToHitArmorType1}}<span><span>1</span><span>{{ToHitArmorType1}}</span></span>{{/ToHitArmorType1}} {{#ToHitArmorType2}}<span><span>2</span><span>{{ToHitArmorType2}}</span></span>{{/ToHitArmorType2}} {{#ToHitArmorType3}}<span><span>3</span><span>{{ToHitArmorType3}}</span></span>{{/ToHitArmorType3}} {{#ToHitArmorType4}}<span><span>4</span><span>{{ToHitArmorType4}}</span></span>{{/ToHitArmorType4}} {{#ToHitArmorType5}}<span><span>5</span><span>{{ToHitArmorType5}}</span></span>{{/ToHitArmorType5}} {{#ToHitArmorType6}}<span><span>6</span><span>{{ToHitArmorType6}}</span></span>{{/ToHitArmorType6}} {{#ToHitArmorType7}}<span><span>7</span><span>{{ToHitArmorType7}}</span></span>{{/ToHitArmorType7}} {{#ToHitArmorType8}}<span><span>8</span><span>{{ToHitArmorType8}}</span></span>{{/ToHitArmorType8}} {{#ToHitArmorType9}}<span><span>9</span><span>{{ToHitArmorType9}}</span></span>{{/ToHitArmorType9}} {{#ToHitArmorType10}}<span><span>10</span><span>{{ToHitArmorType10}}</span></span>{{/ToHitArmorType10}} </span></span>{{/ToHitArmorType10}} <span class="sheet-row"><span class="sheet-template-footer sheet-span-two">{{#footer}}{{footer}}{{/footer}}</span></span></div></rolltemplate><rolltemplate class="sheet-rolltemplate-attacks-table"><div class="{{#color}}color-{{color}}{{/color}}">{{#ToHitAC-10}} <span class="sheet-wrap-ToHit-table"><span class="sheet-wrap-ToHit"><span><span class="sheet-bold" title="vs Armor Class">AC</span> <span title="total roll needed to-Hit">toHit</span> </span></span><span class="sheet-wrap-ToHit">{{#ToHitAC-10}}<span><span>-10</span>{{ToHitAC-10}}</span>{{/ToHitAC-10}} {{#ToHitAC-9}}<span><span>-9</span>{{ToHitAC-9}}</span>{{/ToHitAC-9}} {{#ToHitAC-8}}<span><span>-8</span>{{ToHitAC-8}}</span>{{/ToHitAC-8}} {{#ToHitAC-7}}<span><span>-7</span>{{ToHitAC-7}}</span>{{/ToHitAC-7}} {{#ToHitAC-6}}<span><span>-6</span>{{ToHitAC-6}}</span>{{/ToHitAC-6}} {{#ToHitAC-5}}<span><span>-5</span>{{ToHitAC-5}}</span>{{/ToHitAC-5}} {{#ToHitAC-4}}<span><span>-4</span>{{ToHitAC-4}}</span>{{/ToHitAC-4}} {{#ToHitAC-3}}<span><span>-3</span>{{ToHitAC-3}}</span>{{/ToHitAC-3}} {{#ToHitAC-2}}<span><span>-2</span>{{ToHitAC-2}}</span>{{/ToHitAC-2}} {{#ToHitAC-1}}<span><span>-1</span>{{ToHitAC-1}}</span>{{/ToHitAC-1}} {{#ToHitAC0}}<span><span>0</span>{{ToHitAC0}}</span>{{/ToHitAC0}} </span><span class="sheet-wrap-ToHit"><span><span class="sheet-bold" title="vs Armor Class">AC</span> <span title="total roll needed to-Hit">toHit</span> </span></span><span class="sheet-wrap-ToHit">{{#ToHitAC0}}<span><span>0</span>{{ToHitAC0}}</span>{{/ToHitAC0}} {{#ToHitAC1}}<span><span>1</span>{{ToHitAC1}}</span>{{/ToHitAC1}} {{#ToHitAC2}}<span><span>2</span>{{ToHitAC2}}</span>{{/ToHitAC2}} {{#ToHitAC3}}<span><span>3</span>{{ToHitAC3}}</span>{{/ToHitAC3}} {{#ToHitAC4}}<span><span>4</span>{{ToHitAC4}}</span>{{/ToHitAC4}} {{#ToHitAC5}}<span><span>5</span>{{ToHitAC5}}</span>{{/ToHitAC5}} {{#ToHitAC6}}<span><span>6</span>{{ToHitAC6}}</span>{{/ToHitAC6}} {{#ToHitAC7}}<span><span>7</span>{{ToHitAC7}}</span>{{/ToHitAC7}} {{#ToHitAC8}}<span><span>8</span>{{ToHitAC8}}</span>{{/ToHitAC8}} {{#ToHitAC9}}<span><span>9</span>{{ToHitAC9}}</span>{{/ToHitAC9}} {{#ToHitAC10}}<span><span>10</span>{{ToHitAC10}}</span>{{/ToHitAC10}} </span></span>{{/ToHitAC-10}}</div></rolltemplate><rolltemplate class="sheet-rolltemplate-general"><div class="{{#color}}color-{{color}}{{/color}}"><span class="sheet-row">{{#bigname}} <span class="sheet-template-header sheet-bigger-text sheet-span-two">{{bigname}}</span> {{/bigname}} </span><span class="sheet-row">{{#name}} <span class="sheet-template-header sheet-span-two">{{name}}</span> {{/name}} {{#subtag}} <span class="sheet-subheader sheet-span-two">{{subtag}}</span> {{/subtag}} </span><span class="sheet-row">{{#bigtext1}}<span class="sheet-big-text sheet-span-two">{{bigtext1}}</span>{{/bigtext1}}</span> <span class="sheet-row">{{#bigtext2}}<span class="sheet-big-text sheet-span-two">{{bigtext2}}</span>{{/bigtext2}}</span> <span class="sheet-row">{{#bigtext3}}<span class="sheet-big-text sheet-span-two">{{bigtext3}}</span>{{/bigtext3}}</span> <span class="sheet-row">{{#bigtext4}}<span class="sheet-big-text sheet-span-two">{{bigtext4}}</span>{{/bigtext4}}</span> <span class="sheet-row">{{#bigtext5}}<span class="sheet-big-text sheet-span-two">{{bigtext5}}</span>{{/bigtext5}}</span> <span class="sheet-row">{{#bigtext6}}<span class="sheet-big-text sheet-span-two">{{bigtext6}}</span>{{/bigtext6}}</span> <span class="sheet-row">{{#bigtext7}}<span class="sheet-big-text sheet-span-two">{{bigtext7}}</span>{{/bigtext7}}</span> <span class="sheet-row">{{#bigtext8}}<span class="sheet-big-text sheet-span-two">{{bigtext8}}</span>{{/bigtext8}}</span> <span class="sheet-row">{{#bigtext9}}<span class="sheet-big-text sheet-span-two">{{bigtext9}}</span>{{/bigtext9}}</span> <span class="sheet-row">{{#bigtext10}}<span class="sheet-big-text sheet-span-two">{{bigtext10}}</span>{{/bigtext10}}</span> <span class="sheet-row">{{#bigtext11}}<span class="sheet-big-text sheet-span-two">{{bigtext11}}</span>{{/bigtext11}}</span> <span class="sheet-row">{{#bigtext12}}<span class="sheet-big-text sheet-span-two">{{bigtext12}}</span>{{/bigtext12}}</span>{{#roll_high}} {{#^rollLess() roll_high roll_target}} <span class="sheet-row"><span class="sheet-tcat sheet-span-two sheet-success">Success!</span> {{/^rollLess() roll_high roll_target}} {{#rollLess() roll_high roll_target}} <span class="sheet-tcat sheet-span-two sheet-failure">Failure...</span> {{/rollLess() roll_high roll_target}} </span><span class="sheet-row sheet-span-two sheet-tcat"><span class="sheet-center">Roll =</span>&nbsp;{{roll_high}}&nbsp;<span class="sheet-center">vs</span>&nbsp;{{roll_target}}</span> {{/roll_high}} {{#roll_low}} {{#^rollGreater() roll_low roll_target}} <span class="sheet-row"><span class="sheet-tcat sheet-span-two sheet-success">Success!</span> {{/^rollGreater() roll_low roll_target}} {{#rollGreater() roll_low roll_target}} <span class="sheet-tcat sheet-span-two sheet-failure">Failure...</span> {{/rollGreater() roll_low roll_target}} </span><span class="sheet-row sheet-span-two sheet-tcat"><span class="sheet-center">Roll =</span>&nbsp;{{roll_low}}&nbsp;<span class="sheet-center">vs</span>&nbsp;{{roll_target}}</span> {{#^rollGreater() roll_low roll_target2}} <span class="sheet-row">{{/^rollGreater() roll_low roll_target2}} {{#rollGreater() roll_low roll_target2}} <span class="sheet-tcat sheet-span-two sheet-failure">Detected</span> <span class="sheet-tcat sheet-span-two sheet-center">roll is >= +21% failure</span> </span><span class="sheet-row sheet-span-two sheet-tcat">{{roll_low}}&nbsp;<span class="sheet-center">vs</span>&nbsp;{{roll_target2}}</span> {{/rollGreater() roll_low roll_target2}} {{/roll_low}} {{#^rollTotal() roll 0}} <span class="sheet-row sheet-span-two sheet-tcat"><span class="sheet-center">Roll =</span>&nbsp;{{roll}}</span> {{/^rollTotal() roll 0}} {{#effect_type}} <span class="sheet-row"><span class="sheet-tcat">Effect Type</span> <span>{{effect_type}}</span> </span>{{/effect_type}} {{#spell_class}} <span class="sheet-row"><span class="sheet-tcat">{{spell_class}}</span> {{#spell_class_level}}<span>Level:{{spell_class_level}}</span>{{/spell_class_level}} </span>{{/spell_class}} {{#school}} <span class="sheet-row"><span class="sheet-tcat">Type</span> <span>{{school}}</span> </span>{{/school}} {{#spell_level}} <span class="sheet-row"><span class="sheet-tcat">Spell Level</span> <span>{{spell_level}}</span> </span>{{/spell_level}} {{#range}} <span class="sheet-row"><span class="sheet-tcat">Range</span> <span>{{range}}</span> </span>{{/range}} {{#duration}} <span class="sheet-row"><span class="sheet-tcat">Duration</span> <span>{{duration}}</span> </span>{{/duration}} {{#area_of_effect}} <span class="sheet-row"><span class="sheet-tcat">Area of Effect</span> <span>{{area_of_effect}}</span> </span>{{/area_of_effect}} {{#components}} <span class="sheet-row"><span class="sheet-tcat">Components</span> <span>{{components}}</span> </span>{{/components}} {{#casting_time}} <span class="sheet-row"><span class="sheet-tcat">Casting Time</span> <span>{{casting_time}}</span> </span>{{/casting_time}} {{#saving_throw}} <span class="sheet-row"><span class="sheet-tcat">Saving Throw</span> <span>{{saving_throw}}</span> </span>{{/saving_throw}} {{#save_type}} <span class="sheet-row"><span class="sheet-tcat">Save Type</span> <span>{{save_type}}</span> </span>{{/save_type}} {{#type}} <span class="sheet-row"><span class="sheet-tcat">Type:</span> <span>{{type}}</span> </span>{{/type}} {{#attribute_mod_1_name}} <span class="sheet-row"><span class="sheet-tcat">attribute_mod_1</span> <span>{{attribute_mod_1_name}}: {{#attribute_mod_1}}{{attribute_mod_1}}{{/attribute_mod_1}}{{#attribute_mod_1_max}}/{{attribute_mod_1_max}}{{/attribute_mod_1_max}}</span> </span>{{/attribute_mod_1_name}} {{#attribute_mod_2_name}} <span class="sheet-row"><span class="sheet-tcat">attribute_mod_2</span> <span>{{attribute_mod_2_name}}: {{#attribute_mod_2}}{{attribute_mod_2}}{{/attribute_mod_2}}{{#attribute_mod_2_max}}/{{attribute_mod_2_max}}{{/attribute_mod_2_max}}</span> </span>{{/attribute_mod_2_name}} {{#attribute_mod_3_name}} <span class="sheet-row"><span class="sheet-tcat">attribute_mod_3</span> <span>{{attribute_mod_3_name}}: {{#attribute_mod_3}}{{attribute_mod_3}}{{/attribute_mod_3}}{{#attribute_mod_3_max}}/{{attribute_mod_3_max}}{{/attribute_mod_3_max}}</span> </span>{{/attribute_mod_3_name}} {{#attribute_mod_4_name}} <span class="sheet-row"><span class="sheet-tcat">attribute_mod_4</span> <span>{{attribute_mod_4_name}}: {{#attribute_mod_4}}{{attribute_mod_4}}{{/attribute_mod_4}}{{#attribute_mod_4_max}}/{{attribute_mod_4_max}}{{/attribute_mod_4_max}}</span> </span>{{/attribute_mod_4_name}} {{#attribute_mod_5_name}} <span class="sheet-row"><span class="sheet-tcat">attribute_mod_5</span> <span>{{attribute_mod_5_name}}: {{#attribute_mod_5}}{{attribute_mod_5}}{{/attribute_mod_5}}{{#attribute_mod_5_max}}/{{attribute_mod_5_max}}{{/attribute_mod_5_max}}</span> </span>{{/attribute_mod_5_name}} {{#attribute_mod_6_name}} <span class="sheet-row"><span class="sheet-tcat">attribute_mod_6</span> <span>{{attribute_mod_6_name}}: {{#attribute_mod_6}}{{attribute_mod_6}}{{/attribute_mod_6}}{{#attribute_mod_6_max}}/{{attribute_mod_6_max}}{{/attribute_mod_6_max}}</span> </span>{{/attribute_mod_6_name}} {{#rollGreater() locked_doors 0}} {{#locked_doors}} <span class="sheet-row sheet-span-two sheet-text">{{locked_doors}}</span> {{/locked_doors}} {{/rollGreater() locked_doors 0}} <span class="sheet-row"><span class="sheet-span-two sheet-tcat sheet-right">{{#uses_max}} {{#^rollTotal() uses_max 0}} {{#uses}} <span class="sheet-inlineroll-reset">Uses:{{uses}}/{{uses_max}}</span> {{/uses}} {{/^rollTotal() uses_max 0}} {{/uses_max}} {{#quantity_max}} {{#quantity}} <span class="sheet-inlineroll-reset">Qty:{{quantity}}/{{quantity_max}}</span> {{/quantity}} {{/quantity_max}} </span></span>{{#allprops() name subtag bigname bigtext1 bigtext2 bigtext3 bigtext4 bigtext5 bigtext6 bigtext7 bigtext8 bigtext9 bigtext10 bigtext11 bigtext12 footer freetext color effect_type school spell_level spell_class spell_class_level range duration area_of_effect components casting_time saving_throw save_type link type roll roll_high roll_low roll_target roll_target2 rolldecimal nwp_mod_applied mod_applied wis_applied current_encumbrance dex_adjustment quantity quantity_max uses uses_max whisper attribute_mod_1_name attribute_mod_1 attribute_mod_1_max attribute_mod_2_name attribute_mod_2 attribute_mod_2_max attribute_mod_3_name attribute_mod_3 attribute_mod_3_max attribute_mod_4_name attribute_mod_4 attribute_mod_4_max attribute_mod_5_name attribute_mod_5 attribute_mod_5_max attribute_mod_6_name attribute_mod_6 attribute_mod_6_max notes locked_doors}} <span class="sheet-row sheet-all-props"><span class="sheet-tcat">{{key}}</span> <span>{{value}}</span> </span>{{/allprops() name subtag bigname bigtext1 bigtext2 bigtext3 bigtext4 bigtext5 bigtext6 bigtext7 bigtext8 bigtext9 bigtext10 bigtext11 bigtext12 footer freetext color effect_type school spell_level spell_class spell_class_level range duration area_of_effect components casting_time saving_throw save_type link type roll roll_high roll_low roll_target roll_target2 rolldecimal nwp_mod_applied mod_applied wis_applied current_encumbrance dex_adjustment quantity quantity_max uses uses_max whisper attribute_mod_1_name attribute_mod_1 attribute_mod_1_max attribute_mod_2_name attribute_mod_2 attribute_mod_2_max attribute_mod_3_name attribute_mod_3 attribute_mod_3_max attribute_mod_4_name attribute_mod_4 attribute_mod_4_max attribute_mod_5_name attribute_mod_5 attribute_mod_5_max attribute_mod_6_name attribute_mod_6 attribute_mod_6_max notes locked_doors}} <span class="sheet-row"><span class="sheet-span-two sheet-smaller-text">{{#nwp_mod_applied}} <span class="sheet-bold">NWP Mod Applied:</span>{{nwp_mod_applied}}&nbsp;{{/nwp_mod_applied}}{{#mod_applied}} <span class="sheet-bold">Mod Applied:</span>{{mod_applied}}&nbsp;{{/mod_applied}}{{#wis_applied}} <span class="sheet-bold">Wis Applied:</span>{{wis_applied}}&nbsp;{{/wis_applied}}{{#dex_adjustment}} <span class="sheet-bold">Dex Adj:</span>{{dex_adjustment}}&nbsp;{{/dex_adjustment}}{{#encumbrance}} <span class="sheet-bold">Encumbrance:</span>{{encumbrance}}&nbsp;{{/encumbrance}}{{#rollTotal() current_encumbrance 0}}{{#current_encumbrance}} <span class="sheet-bold">Encum/Bulk - Normal</span>&nbsp; <span>None</span>{{/current_encumbrance}}{{/rollTotal() current_encumbrance 0}}{{#rollTotal() current_encumbrance 1}}{{#current_encumbrance}} <span class="sheet-bold">Encum/Bulk - Heavy</span>&nbsp; <span>No DEX Bonus to Init.</span>{{/current_encumbrance}}{{/rollTotal() current_encumbrance 1}}{{#rollTotal() current_encumbrance 2}}{{#current_encumbrance}} <span class="sheet-bold">Encum/Bulk - Very Heavy</span>&nbsp; <span>No DEX Bonus to Init, Delayed, +1 Segment if Surprised.</span>{{/current_encumbrance}}{{/rollTotal() current_encumbrance 2}}{{#rollTotal() current_encumbrance 3}}{{#current_encumbrance}} <span class="sheet-bold">Encum/Bulk - Encumbered</span>&nbsp; <span>No DEX Bonus to Init or AC, Go Last in Init, +2 Segments if Surprised, Cannot Charge, Enemies get +2 to-hit.</span>{{/current_encumbrance}}{{/rollTotal() current_encumbrance 3}}</span> </span>{{#notes}} <span class="sheet-row"><span class="sheet-tcat sheet-span-two sheet-left">Notes:</span> <span class="sheet-row sheet-span-two sheet-text" style="font-weight: normal;">{{notes}}</span> </span>{{/notes}} {{#freetext}} <span class="sheet-row"><span class="sheet-span-two sheet-text sheet-free-text">{{freetext}}</span> </span>{{/freetext}} {{#link}} <span class="sheet-row"><span class="sheet-span-two sheet-right">[LINK]({{link}})</span> </span>{{/link}} <span class="sheet-row"><span class="sheet-template-footer sheet-span-two">{{#footer}}{{footer}}{{/footer}}</span></span></div></rolltemplate></div><datalist id="spell_school"><option value="Abjur">Abjur</option><option value="Abjur, Evoc">Abjur, Evoc</option><option value="Abjur/Alter">Abjur/Alter</option><option value="Abjur/Conj/Summ">Abjur/Conj/Summ</option><option value="Abjur/Evoc">Abjur/Evoc</option><option value="Alter">Alter</option><option value="Alter, Ench">Alter, Ench</option><option value="Alter/Conj">Alter/Conj</option><option value="Alter/Conj/Summ">Alter/Conj/Summ</option><option value="Alter/Ench">Alter/Ench</option><option value="Alter/Evoc">Alter/Evoc</option><option value="Alter/Illus">Alter/Illus</option><option value="Alter/Illus/Phant">Alter/Illus/Phant</option><option value="Alter/Phant">Alter/Phant</option><option value="Charm">Charm</option><option value="Conj">Conj</option><option value="Conj, Alter">Conj, Alter</option><option value="Conj/Phant">Conj/Phant</option><option value="Conj/Summ">Conj/Summ</option><option value="Divin">Divin</option><option value="Ench">Ench</option><option value="Ench, Alter">Ench, Alter</option><option value="Ench/Alter">Ench/Alter</option><option value="Ench/Charm">Ench/Charm</option><option value="Ench/Charm/Illus/Phant">Ench/Charm/Illus/Phant</option><option value="Ench/Divin">Ench/Divin</option><option value="Ench/Evoc">Ench/Evoc</option><option value="Evoc">Evoc</option><option value="Evoc, Alter">Evoc, Alter</option><option value="Evoc/Abjur">Evoc/Abjur</option><option value="Evoc/Alter">Evoc/Alter</option><option value="Evoc/Alter/Ench/Charm">Evoc/Alter/Ench/Charm</option><option value="Evoc/Conj">Evoc/Conj</option><option value="Evoc/Divin">Evoc/Divin</option><option value="Evoc/Ench">Evoc/Ench</option><option value="Evoc/Ench/Charm">Evoc/Ench/Charm</option><option value="Evoc/Illus">Evoc/Illus</option><option value="Evoc/Illus/Phant">Evoc/Illus/Phant</option><option value="Illus">Illus</option><option value="Illus/Ench">Illus/Ench</option><option value="Illus/Phant">Illus/Phant</option><option value="Illus/Phant/Abjur">Illus/Phant/Abjur</option><option value="Illus/Phant/Alter">Illus/Phant/Alter</option><option value="Illus/Phant/Conj/Summ">Illus/Phant/Conj/Summ</option><option value="Invoc">Invoc</option><option value="Necro">Necro</option><option value="Necro, Conj">Necro, Conj</option><option value="Summ">Summ</option><option value="Varies">Varies</option></datalist><datalist id="saveparalysispoisondeath_racial_mod_list"><option value="0" selected="selected">0</option><option value="-1">+1</option><option value="-2">+2</option><option value="-3">+3</option><option value="-4">+4</option><option value="-5">+5</option><option value="1">-1</option><option value="2">-2</option><option value="3">-3</option><option value="4">-4</option><option value="5">-5</option></datalist><script type="text/worker">var Nt=()=>self.dispatchEvent==null,B=i=>{let t=getActiveCharacterId(),o={id:"0",type:"setActiveCharacter",data:i};if(Nt()==!1){let e=new CustomEvent("message");e.data=o,self.dispatchEvent(e)}else self.onmessage({data:o});return t},Dt=setInterval;setInterval=function(i,t){let o=getActiveCharacterId();Dt(function(){let e=B(o);i(),B(e)},t)};var Ot=setTimeout;setTimeout=function(i,t){let o=getActiveCharacterId();Ot(function(){let e=B(o);i(),B(e)},t)};var qe=i=>new Promise(t=>setTimeout(t,i)),u=i=>{let t=getActiveCharacterId(),o=null;return new Promise((e,n)=>{o=B(t);try{getAttrs(i,a=>{e(a)})}catch{n()}}).finally(()=>{B(o)})},g=(i,t)=>{let o=getActiveCharacterId(),e=null;return new Promise((n,a)=>{e=B(o);try{setAttrs(i,t,r=>{n(r)})}catch{a()}}).finally(()=>{B(e)})},f=i=>{let t=getActiveCharacterId(),o=null;return new Promise((e,n)=>{o=B(t);try{getSectionIDs(i,a=>{e(a)})}catch{n()}}).finally(()=>{B(o)})},b=(i,t=0)=>parseInt(i)||t,E=(i,t=0)=>parseFloat(i)||t,q=(i,t="green")=>{let o=`%c ${i}`;console.log(o,`color: ${t}; font-weight:bold`)},d=(i,t=0)=>typeof i<"u"&&i!==t,ye=(i,t)=>{let o=i;return _.each(Object.entries(t),([e,n])=>{o=o.replace(new RegExp(e.replace("{","{"),"gi"),n)}),o},Et=async i=>/^[a-zA-Z0-9\s]+$/.test(i)?!0:!/[)|\}]/.test(i),Lt=async i=>/^[-+]?[0-9]+$/.test(i)?1:0,ua={},k=()=>{let i=generateRowID();for(;ua[i]===!0;)i=generateRowID();return ua[i]=!0,i};on("change:character_name",async i=>{let t=await u(["character_name"]),o={},e=t[`${i.sourceAttribute}`],n=await Et(e);o[`${i.sourceAttribute}_error`]=n,await g(o,{silent:!0})});on("change:armortype_magic change:armortype2_magic change:armorshield_magic change:armorhelmet_magic change:armorother_magic change:armorother2_magic change:armorother3_magic change:armorother4_magic change:armorother5_magic change:armorother6_magic change:armorshield_mod change:armorother_mod change:armorother2_mod change:armorother3_mod change:armorother4_mod change:armorother5_mod change:armorother6_mod change:repeating_equipment:equipment_armor_mod change:repeating_equipment:equipment_armor_magic, change:hitpoints_1_class, change:hitpoints_2_class, change:hitpoints_3_class",async i=>{let t=i.sourceAttribute.split("_")[2],o=await u(["armortype_magic","armortype2_magic","armorshield_magic","armorhelmet_magic","armorother_magic","armorother2_magic","armorother3_magic","armorother4_magic","armorother5_magic","armorother6_magic","armorshield_mod","armorother_mod","armorother2_mod","armorother3_mod","armorother4_mod","armorother5_mod","armorother6_mod",`repeating_equipment_${t}_equipment_armor_magic`,`repeating_equipment_${t}_equipment_armor_mod`,"hitpoints_1_class","hitpoints_2_class","hitpoints_3_class"]),e={},n=o[`${i.sourceAttribute}`],a=await Lt(n);e[`${i.sourceAttribute}_error`]=a,await g(e,{silent:!0})});var $e=["unarmored_row_id","armortype1_row_id","armortype2_row_id","armorshield_row_id","armorhelmet_row_id","armorother1_row_id","armorother2_row_id","armorother3_row_id","armorother4_row_id","armorother5_row_id","armorother6_row_id"],fe=["unarmored_worn","unarmored","unarmored_ac","unarmored_base","unarmored_bulk","unarmored_carried","unarmored_weight","unarmored_cost","armortype_worn","armortype","armortype_ac","armortype_base","armortype_magic","armortype_bulk","armortype_carried","armor_weight","armor_cost","armortype2_worn","armortype2","armortype2_ac","armortype2_base","armortype2_magic","armortype2_bulk","armortype2_carried","armortype2_weight","armortype2_cost","armorshield_worn","armorshield","armorshield_ac","armorshield_base","armorshield_magic","armorshield_mod","armorshield_bulk","armorshield_carried","armorshield_weight","armorshield_cost","armorhelmet_worn","armorhelmet","armorhelmet_ac","armorhelmet_magic","armorhelmet_bulk","armorhelmet_carried","armorhelmet_weight","armorhelmet_cost","armorother_worn","armorother","armorother_ac","armorother_base","armorother_magic","armorother_mod","armorother2_worn","armorother2","armorother2_ac","armorother2_base","armorother2_magic","armorother2_mod","armorother3_worn","armorother3","armorother3_ac","armorother3_base","armorother3_magic","armorother3_mod","armorother4_worn","armorother4","armorother4_ac","armorother4_base","armorother4_magic","armorother4_mod","armorother5_worn","armorother5","armorother5_ac","armorother5_base","armorother5_magic","armorother5_mod","armorother6_worn","armorother6","armorother6_ac","armorother6_base","armorother6_magic","armorother6_mod"],Ht=["unarmored_worn","unarmored","unarmored_ac","unarmored_base","unarmored_bulk","unarmored_carried","unarmored_weight","unarmored_cost"],Rt=["armortype_worn","armortype","armortype_ac","armortype_base","armortype_magic","armortype_bulk","armortype_carried","armor_weight","armor_cost"],Pt=["armortype2_worn","armortype2","armortype2_ac","armortype2_base","armortype2_magic","armortype2_bulk","armortype2_carried","armortype2_weight","armortype2_cost"],Bt=["armorshield_worn","armorshield","armorshield_ac","armorshield_base","armorshield_magic","armorshield_mod","armorshield_bulk","armorshield_carried","armorshield_weight","armorshield_cost"],jt=["armorhelmet_worn","armorhelmet","armorhelmet_ac","armorhelmet_magic","armorhelmet_bulk","armorhelmet_carried","armorhelmet_weight","armorhelmet_cost"],Ut=["armorother_worn","armorother","armorother_ac","armorother_base","armorother_magic","armorother_mod"],Vt=["armorother2_worn","armorother2","armorother2_ac","armorother2_base","armorother2_magic","armorother2_mod"],Wt=["armorother3_worn","armorother3","armorother3_ac","armorother3_base","armorother3_magic","armorother3_mod"],Ft=["armorother4_worn","armorother4","armorother4_ac","armorother4_base","armorother4_magic","armorother4_mod"],Gt=["armorother5_worn","armorother5","armorother5_ac","armorother5_base","armorother5_magic","armorother5_mod"],zt=["armorother6_worn","armorother6","armorother6_ac","armorother6_base","armorother6_magic","armorother6_mod"],re=(i,t,o)=>`repeating_${i}_${t}_${o}`,Kt=(i,t)=>{getSectionIDs("repeating_weapon",o=>{let e=o.flatMap(n=>[`repeating_weapon_${n}_DmgBonus`,`repeating_weapon_${n}_macro-text`]);getAttrs([...e],n=>{let a={},r="&{template:attacks} {{name=@{character_name}}} {{subtag=@{WeaponName}}} {{attack1=[[1d20 + @{ToHitBonus}[BON] + @{MagicBonus}[MAG] + ?{To Hit Modifier?|0}[MOD] ]]}} {{damage1vsSM=[[@{DamageSmallMedium} + @{DmgBonus}[BON] + @{MagicBonus}[MAG] + ?{Damage Modifier?|0}[MOD] ]]}} {{damage1vsL=[[@{DamageLarge} + @{DmgBonus}[BON] + @{MagicBonus}[MAG] + ?{Damage Modifier?|0}[MOD] ]]}} {{WeaponNotes=@{WeaponNotes}}} @{whisper_to-hit}";_.each(o,s=>{let c=n[`repeating_weapon_${s}_macro-text`]||r;a[`repeating_weapon_${s}_macro-text`]=c.replace(/@{DmgBonus}/g,"@{AttackDmgBonus}"),a[`repeating_weapon_${s}_AttackDmgBonus`]=+n[`repeating_weapon_${s}_DmgBonus`]||0}),a.sheet_version=i,q("VERSION UPDATE: dmgSwap completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},Xt=(i,t)=>{getSectionIDs("repeating_ability",o=>{let e=o.map(n=>[`repeating_ability_${n}_max`]);getAttrs([...e],n=>{let a={};_.each(o,r=>{a[`repeating_ability_${r}_current_max`]=+n[`repeating_ability_${r}_max`]||0}),a.sheet_version=i,q("VERSION UPDATE: maxSwap completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},Qt=(i,t)=>{let o={};getSectionIDs("repeating_nonweaponproficiencies",e=>{let n=e.map(a=>[`repeating_nonweaponproficiencies_${a}_macro-text`]);getAttrs([...n],a=>{let r={nwp_old:"&{template:general} {{name=@{character_name}}} {{subtag=Non Weapon Proficiency: @{name}}} {{=@{short_description}}}{{Success Amount=[[((@{rAttribute})+(@{rSlots}-1)-1d20)cs>1cf<-1]]}}",nwp_new:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Non Weapon Proficiency: @{name}}} {{Proficiency Check=[[ 1d20 + [[@{rmodifier}]][MOD] + [[?{Additional modifier?|0}]][MOD] ]] vs [[ @{rAttribute}[ATTR] ]]}}{{freetext=@{short_description}}}"};_.each(e,s=>{a[`repeating_nonweaponproficiencies_${s}_macro-text`]&&(o[`repeating_nonweaponproficiencies_${s}_macro-text`]=a[`repeating_nonweaponproficiencies_${s}_macro-text`].replace(r.nwp_old,r.nwp_new))}),o.sheet_version=i,q("VERSION UPDATE: nwpMacroUpdate completed"),setAttrs(o,{silent:!0},()=>{versionator(i,t)})})})},Yt=(i,t)=>{getSectionIDs("repeating_weapon",o=>{let e=o.flatMap(n=>[`repeating_weapon_${n}_roll`,`repeating_weapon_${n}_weaponname`,`repeating_weapon_${n}_tohitbonus`,`repeating_weapon_${n}_magicbonus`,`repeating_weapon_${n}_attackdmgbonus`,`repeating_weapon_${n}_whisper_to-hit`,`repeating_weapon_${n}_macro-text`,`repeating_weapon_${n}_damagesmallmedium`,`repeating_weapon_${n}_damagelarge`,`repeating_weapon_${n}_rateoffire`,`repeating_weapon_${n}_range`,`repeating_weapon_${n}_quantity`,`repeating_weapon_${n}_weight`,`repeating_weapon_${n}_weaponspeed`,`repeating_weapon_${n}_cost`,`repeating_weapon_${n}_weaponnotes`]);getAttrs([...e],n=>{let a={},r={"@{rateoffire}":"@{weapon_rateoffire}","@{weaponname}":"@{weapon_name}","@{tohitbonus}":"@{weapon_tohitbonus}","@{magicbonus}":"@{weapon_magicbonus}","@{attackdmgbonus}":"@{weapon_attackdmgbonus}","@{whisper_to-hit}":"@{weapon_whisper_to_hit}","@{damagesmallmedium}":"@{weapon_damagesmallmedium}","@{damagelarge}":"@{weapon_damagelarge}","@{range}":"@{weapon_range}","@{quantity}":"@{weapon_quantity}","@{weight}":"@{weapon_weight}","@{weaponspeed}":"@{weapon_speed}","@{cost}":"@{weapon_cost}","@{macro-text}":"@{weapon_macro_text}","@{weaponnotes}":"@{weapon_notes}"},s="&{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{WeaponName}}} {{attack1=[[1d20 + @{ToHitBonus}[BON] + @{MagicBonus}[MAG] + ?{To Hit Modifier?|0}[MOD]) ]]}} {{damage1vsSM=[[@{DamageSmallMedium} + @{AttackDmgBonus}[BON] + @{MagicBonus}[MAG] + ?{Damage Modifier?|0}[MOD] ]]}} {{damage1vsL=[[@{DamageLarge} + @{AttackDmgBonus}[BON] + @{MagicBonus}[MAG] + ?{Damage Modifier?|0}[MOD] ]]}} {{WeaponNotes=@{WeaponNotes}}} @{whisper_to-hit}";_.each(o,c=>{d(n[`repeating_weapon_${c}_rateoffire`])&&(a[`repeating_weapon_${c}_weapon_rateoffire`]=b(n[`repeating_weapon_${c}_rateoffire`])),d(n[`repeating_weapon_${c}_roll`])&&(a[`repeating_weapon_${c}_weapon_roll`]=n[`repeating_weapon_${c}_roll`]),d(n[`repeating_weapon_${c}_weaponname`])&&(a[`repeating_weapon_${c}_weapon_name`]=n[`repeating_weapon_${c}_weaponname`]),d(n[`repeating_weapon_${c}_tohitbonus`])&&(a[`repeating_weapon_${c}_weapon_tohitbonus`]=b(n[`repeating_weapon_${c}_tohitbonus`])),d(n[`repeating_weapon_${c}_magicbonus`])&&(a[`repeating_weapon_${c}_weapon_magicbonus`]=b(n[`repeating_weapon_${c}_magicbonus`])),d(n[`repeating_weapon_${c}_attackdmgbonus`])&&(a[`repeating_weapon_${c}_weapon_attackdmgbonus`]=b(n[`repeating_weapon_${c}_attackdmgbonus`])),d(n[`repeating_weapon_${c}_whisper_to-hit`])&&(a[`repeating_weapon_${c}_weapon_whisper_to_hit`]=n[`repeating_weapon_${c}_whisper_to-hit`]),d(n[`repeating_weapon_${c}_macro-text`],s)&&(a[`repeating_weapon_${c}_weapon_macro_text`]=ye(n[`repeating_weapon_${c}_macro-text`],r)),d(n[`repeating_weapon_${c}_damagesmallmedium`])&&(a[`repeating_weapon_${c}_weapon_damagesmallmedium`]=n[`repeating_weapon_${c}_damagesmallmedium`]),d(n[`repeating_weapon_${c}_damagelarge`])&&(a[`repeating_weapon_${c}_weapon_damagelarge`]=n[`repeating_weapon_${c}_damagelarge`]),d(n[`repeating_weapon_${c}_range`])&&(a[`repeating_weapon_${c}_weapon_range`]=n[`repeating_weapon_${c}_range`]),d(n[`repeating_weapon_${c}_quantity`])&&(a[`repeating_weapon_${c}_weapon_quantity`]=E(n[`repeating_weapon_${c}_quantity`])),d(n[`repeating_weapon_${c}_weight`])&&(a[`repeating_weapon_${c}_weapon_weight`]=E(n[`repeating_weapon_${c}_weight`])),d(n[`repeating_weapon_${c}_weaponspeed`])&&(a[`repeating_weapon_${c}_weapon_speed`]=b(n[`repeating_weapon_${c}_weaponspeed`])),d(n[`repeating_weapon_${c}_cost`])&&(a[`repeating_weapon_${c}_weapon_cost`]=E(n[`repeating_weapon_${c}_cost`])),d(n[`repeating_weapon_${c}_weaponnotes`])&&(a[`repeating_weapon_${c}_weapon_notes`]=n[`repeating_weapon_${c}_weaponnotes`])}),a.sheet_version=i,q("VERSION UPDATE: weaponNameFix completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},Zt=(i,t)=>{getSectionIDs("repeating_spells",o=>{let e=o.flatMap(n=>[`repeating_spells_${n}_roll`,`repeating_spells_${n}_memorized`,`repeating_spells_${n}_level`,`repeating_spells_${n}_name`,`repeating_spells_${n}_school`,`repeating_spells_${n}_range`,`repeating_spells_${n}_duration`,`repeating_spells_${n}_aoe`,`repeating_spells_${n}_components`,`repeating_spells_${n}_ct`,`repeating_spells_${n}_save`,`repeating_spells_${n}_macro-text`,`repeating_spells_${n}_description`,`repeating_spells_${n}_description-show`]);getAttrs([...e],n=>{let a={},r={"@{memorized}":"@{spell_memorized}","@{level}":"@{spell_level}","@{name}":"@{spell_name}","@{school}":"@{spell_school}","@{range}":"@{spell_range}","@{duration}":"@{spell_duration}","@{aoe}":"@{spell_aoe}","@{components}":"@{spell_components}","@{ct}":"@{spell_ct}","@{save}":"@{spell_save}","@{macro-text}":"@{spell_macro_text}","@{description}":"@{spell_description}"},s="&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Casts: @{name}}} {{Level:=@{level}}} {{Range:=@{range}}} {{Duration:=@{duration}}} {{AOE:=@{aoe}}} {{Comp:=@{components}}} {{CT:=@{ct}}} {{Save:=@{save}}} {{freetext=@{description}}}";_.each(o,c=>{d(n[`repeating_spells_${c}_roll`])&&(a[`repeating_spells_${c}_spell_roll`]=n[`repeating_spells_${c}_roll`]),d(n[`repeating_spells_${c}_memorized`])&&(a[`repeating_spells_${c}_spell_memorized`]=b(n[`repeating_spells_${c}_memorized`])),d(n[`repeating_spells_${c}_level`])&&(a[`repeating_spells_${c}_spell_level`]=n[`repeating_spells_${c}_level`]),d(n[`repeating_spells_${c}_name`])&&(a[`repeating_spells_${c}_spell_name`]=n[`repeating_spells_${c}_name`]),d(n[`repeating_spells_${c}_school`])&&(a[`repeating_spells_${c}_spell_school`]=n[`repeating_spells_${c}_school`]),d(n[`repeating_spells_${c}_range`])&&(a[`repeating_spells_${c}_spell_range`]=n[`repeating_spells_${c}_range`]),d(n[`repeating_spells_${c}_duration`])&&(a[`repeating_spells_${c}_spell_duration`]=n[`repeating_spells_${c}_duration`]),d(n[`repeating_spells_${c}_aoe`])&&(a[`repeating_spells_${c}_spell_aoe`]=n[`repeating_spells_${c}_aoe`]),d(n[`repeating_spells_${c}_components`])&&(a[`repeating_spells_${c}_spell_components`]=n[`repeating_spells_${c}_components`]),d(n[`repeating_spells_${c}_ct`])&&(a[`repeating_spells_${c}_spell_ct`]=n[`repeating_spells_${c}_ct`]),d(n[`repeating_spells_${c}_save`])&&(a[`repeating_spells_${c}_spell_save`]=n[`repeating_spells_${c}_save`]),d(n[`repeating_spells_${c}_macro-text`],s)&&(a[`repeating_spells_${c}_spell_macro_text`]=ye(n[`repeating_spells_${c}_macro-text`],r)),d(n[`repeating_spells_${c}_description`])&&(a[`repeating_spells_${c}_spell_description`]=n[`repeating_spells_${c}_description`]),d(n[`repeating_spells_${c}_description-show`])&&(a[`repeating_spells_${c}_spell_description_show`]=b(n[`repeating_spells_${c}_description-show`]))}),a.sheet_version=i,q("VERSION UPDATE: spellNameFix completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},Jt=(i,t)=>{getSectionIDs("repeating_equipment",o=>{let e=o.flatMap(n=>[`repeating_equipment_${n}_item-show`,`repeating_equipment_${n}_item`,`repeating_equipment_${n}_location`,`repeating_equipment_${n}_carried`,`repeating_equipment_${n}_quantity`,`repeating_equipment_${n}_quantity_max`,`repeating_equipment_${n}_weight`,`repeating_equipment_${n}_cos`]);getAttrs([...e],n=>{let a={};_.each(o,r=>{d(n[`repeating_equipment_${r}_item-show`])&&(a[`repeating_equipment_${r}_equipment_item_show`]=n[`repeating_equipment_${r}_item-show`]),d(n[`repeating_equipment_${r}_item`])&&(a[`repeating_equipment_${r}_equipment_item`]=n[`repeating_equipment_${r}_item`]),d(n[`repeating_equipment_${r}_location`])&&(a[`repeating_equipment_${r}_equipment_location`]=n[`repeating_equipment_${r}_location`]),d(n[`repeating_equipment_${r}_carried`])&&(a[`repeating_equipment_${r}_equipment_carried`]=n[`repeating_equipment_${r}_carried`]),d(n[`repeating_equipment_${r}_quantity`])&&(a[`repeating_equipment_${r}_equipment_quantity`]=E(n[`repeating_equipment_${r}_quantity`])),d(n[`repeating_equipment_${r}_quantity_max`])&&(a[`repeating_equipment_${r}_equipment_quantity_max`]=E(n[`repeating_equipment_${r}_quantity_max`])),d(n[`repeating_equipment_${r}_weight`])&&(a[`repeating_equipment_${r}_equipment_weight`]=E(n[`repeating_equipment_${r}_weight`])),d(n[`repeating_equipment_${r}_cost`])&&(a[`repeating_equipment_${r}_equipment_cost`]=E(n[`repeating_equipment_${r}_cost`]))}),a.sheet_version=i,q("VERSION UPDATE: equipmentNameFix completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},er=(i,t)=>{getSectionIDs("repeating_ability",o=>{let e=o.flatMap(n=>[`repeating_equipment_${n}_roll`,`repeating_equipment_${n}_name`,`repeating_equipment_${n}_short_description`,`repeating_equipment_${n}_current`,`repeating_equipment_${n}_current_max`,`repeating_equipment_${n}_macro-text`,`repeating_equipment_${n}_description`,`repeating_equipment_${n}_description-show`]);getAttrs([...e],n=>{let a={},r={"@{name}":"@{ability_name}","@{current}":"@{ability_current}","@{current_max}":"@{ability_current_max}","@{short_description}":"@{ability_short_description}","@{macro-text}":"@{ability_macro_text}","@{description}":"@{ability_description}"},s="&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Special Ability: @{name}}} {{freetext=@{short_description} @{description}}}";_.each(o,c=>{d(n[`repeating_equipment_${c}_roll`])&&(a[`repeating_equipment_${c}_ability_roll`]=n[`repeating_equipment_${c}_roll`]),d(n[`repeating_equipment_${c}_name`])&&(a[`repeating_equipment_${c}_ability_name`]=n[`repeating_equipment_${c}_name`]),d(n[`repeating_equipment_${c}_short_description`])&&(a[`repeating_equipment_${c}_ability_short_description`]=n[`repeating_equipment_${c}_short_description`]),d(n[`repeating_equipment_${c}_current`])&&(a[`repeating_equipment_${c}_ability_current`]=b(n[`repeating_equipment_${c}_current`])),d(n[`repeating_equipment_${c}_current_max`])&&(a[`repeating_equipment_${c}_ability_current_max`]=b(n[`repeating_equipment_${c}_current_max`])),d(n[`repeating_equipment_${c}_macro-text`],s)&&(a[`repeating_equipment_${c}_ability_macro_text`]=ye(n[`repeating_equipment_${c}_macro-text`],r)),d(n[`repeating_equipment_${c}_description`])&&(a[`repeating_equipment_${c}_ability_description`]=n[`repeating_equipment_${c}_description`]),d(n[`repeating_equipment_${c}_description-show`])&&(a[`repeating_equipment_${c}_ability_description_show`]=b(n[`repeating_equipment_${c}_description-show`]))}),a.sheet_version=i,q("VERSION UPDATE: abilityNameFix completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},ar=(i,t)=>{getSectionIDs("repeating_nonweaponproficiencies",o=>{let e=o.flatMap(n=>[`repeating_nonweaponproficiencies_${n}_roll`,`repeating_nonweaponproficiencies_${n}_name`,`repeating_nonweaponproficiencies_${n}_rAttribute`,`repeating_nonweaponproficiencies_${n}_short_description`,`repeating_nonweaponproficiencies_${n}_rSlots`,`repeating_nonweaponproficiencies_${n}_rModifier`,`repeating_nonweaponproficiencies_${n}_macro-text`,`repeating_nonweaponproficiencies_${n}_description-show`,`repeating_nonweaponproficiencies_${n}_description`]);getAttrs([...e],n=>{let a={},r={"@{name}":"@{nwp_name}","@{rAttribute}":"@{nwp_attribute}","@{rSlots}":"@{nwp_slots}","@{rModifier}":"@{nwp_modifier}","@{short_description}":"@{nwp_short_description}","@{macro-text}":"@{nwp_macro_text}","@{description}":"@{nwp_description}"},s="&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Non Weapon Proficiency: @{name}}} {{Proficiency Check=[[ 1d20 + [[@{rmodifier}]][MOD] + [[?{Additional modifier?|0}]][MOD] ]] vs [[ @{rAttribute}[ATTR] ]]}}{{freetext=@{short_description}}}";_.each(o,c=>{d(n[`repeating_nonweaponproficiencies_${c}_roll`])&&(a[`repeating_nonweaponproficiencies_${c}_nwp_roll`]=n[`repeating_nonweaponproficiencies_${c}_roll`]),d(n[`repeating_nonweaponproficiencies_${c}_name`])&&(a[`repeating_nonweaponproficiencies_${c}_nwp_name`]=n[`repeating_nonweaponproficiencies_${c}_name`]),d(n[`repeating_nonweaponproficiencies_${c}_rAttribute`])&&(a[`repeating_nonweaponproficiencies_${c}_nwp_attribute`]=n[`repeating_nonweaponproficiencies_${c}_rAttribute`].toLowerCase()),d(n[`repeating_nonweaponproficiencies_${c}_short_description`])&&(a[`repeating_nonweaponproficiencies_${c}_nwp_short_description`]=n[`repeating_nonweaponproficiencies_${c}_short_description`]),d(n[`repeating_nonweaponproficiencies_${c}_rSlots`])&&(a[`repeating_nonweaponproficiencies_${c}_nwp_slots`]=b(n[`repeating_nonweaponproficiencies_${c}_rSlots`])),d(n[`repeating_nonweaponproficiencies_${c}_rModifier`])&&(a[`repeating_nonweaponproficiencies_${c}_nwp_modifier`]=b(n[`repeating_nonweaponproficiencies_${c}_rModifier`])),d(n[`repeating_nonweaponproficiencies_${c}_macro-text`],s)&&(a[`repeating_nonweaponproficiencies_${c}_nwp_macro_text`]=ye(n[`repeating_nonweaponproficiencies_${c}_macro-text`],r)),d(n[`repeating_nonweaponproficiencies_${c}_description-show`])&&(a[`repeating_nonweaponproficiencies_${c}_nwp_description_show`]=b(n[`repeating_nonweaponproficiencies_${c}_description-show`])),d(n[`repeating_nonweaponproficiencies_${c}_description`])&&(a[`repeating_nonweaponproficiencies_${c}_nwp_description`]=n[`repeating_nonweaponproficiencies_${c}_description`])}),a.sheet_version=i,q("VERSION UPDATE: nwpNameFix completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},tr=(i,t)=>{let o={};getSectionIDs("repeating_nonweaponproficiencies",e=>{getSectionIDs("repeating_weapon",n=>{getSectionIDs("repeating_ability",a=>{getSectionIDs("repeating_spells",r=>{let s=[],c=[],m=[],h=[];_.each(e,l=>{s.push(`repeating_nonweaponproficiencies_${l}_nwp_macro_text`)}),_.each(n,l=>{c.push(`repeating_weapon_${l}_weapon_macro_text`)}),_.each(a,l=>{m.push(`repeating_ability_${l}_ability_macro_text`)}),_.each(r,l=>{h.push(`repeating_spells_${l}_spell_macro_text`)}),getAttrs([...s,...c,...m,...h],l=>{let p={nwp_old:"&{template:general} {{name=@{character_name}}}",nwp_new:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}}",wpn_old:"&{template:attacks} {{name=@{character_name}}}",wpn_new:"&{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}}",abl_old:"&{template:general} {{name=@{character_name}}}",abl_new:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}}",spl_old:"&{template:general} {{name=@{character_name}}}",spl_new:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}}"};_.each(e,w=>{l[`repeating_nonweaponproficiencies_${w}_nwp_macro_text`]&&(o[`repeating_nonweaponproficiencies_${w}_nwp_macro_text`]=l[`repeating_nonweaponproficiencies_${w}_nwp_macro_text`].replace(p.nwp_old,p.nwp_new),q("VERSION UPDATE: colorUpdate completed"))}),_.each(n,w=>{l[`repeating_weapon_${w}_weapon_macro_text`]&&(o[`repeating_weapon_${w}_weapon_macro_text`]=l[`repeating_weapon_${w}_weapon_macro_text`].replace(p.wpn_old,p.wpn_new),q("VERSION UPDATE: colorUpdate completed"))}),_.each(a,w=>{l[`repeating_ability_${w}_ability_macro_text`]&&(o[`repeating_ability_${w}_ability_macro_text`]=l[`repeating_ability_${w}_ability_macro_text`].replace(p.abl_old,p.abl_new),q("VERSION UPDATE: colorUpdate completed"))}),_.each(r,w=>{l[`repeating_spells_${w}_spell_macro_text`]&&(o[`repeating_spells_${w}_spell_macro_text`]=l[`repeating_spells_${w}_spell_macro_text`].replace(p.spl_old,p.spl_new),q("VERSION UPDATE: colorUpdate completed"))}),o.sheet_version=i,setAttrs(o,{silent:!0},()=>{versionator(i,t)})})})})})})},ya=()=>{Qa(),Ya(),Za(),Ja(),et(),at()},rr=(i,t)=>{let o={};ya(),o.sheet_version=i,q("VERSION UPDATE: autoCalcAbilityRows completed"),setAttrs(o,()=>{versionator(i,t)})},nr=(i,t)=>{let o={};Wa(1),Fa(1),Ga(1),za(1),Ka(1),o.sheet_version=i,q("VERSION UPDATE: autoCalcSaveRows(migrate) completed"),setAttrs(o,{silent:!0},()=>{versionator(i,t)})},_r=(i,t)=>{let o={};Da(1),Oa(1),Ea(1),La(1),Ha(1),Ra(1),Pa(1),Ba(1),ja(),Ua(),Va(),o.sheet_version=i,q("VERSION UPDATE: autoCalcThiefRows(migrate) completed"),setAttrs(o,{silent:!0},()=>{versionator(i,t)})},or=(i,t)=>{getSectionIDs("repeating_weapon",o=>{let e=o.map(n=>[`repeating_weapon_${n}_weapon_macro_text`]);getAttrs([...e],n=>{let a={},r="&{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{attack1=[[1d20 + @{weapon_tohitbonus}[BON] + @{weapon_magicbonus}[MAG] + ?{To Hit Modifier?|0}[MOD] ]]}} {{damage1vsSM=[[@{weapon_damagesmallmedium} + @{weapon_attackdmgbonus}[BON] + @{weapon_magicbonus}[MAG] + ?{Damage Modifier?|0}[MOD] ]]}} {{damage1vsL=[[@{weapon_damagelarge} + @{weapon_attackdmgbonus}[BON] + @{weapon_magicbonus}[MAG] + ?{Damage Modifier?|0}[MOD] ]]}} {{WeaponNotes=@{weapon_notes}}} @{weapon_whisper_to_hit}";_.each(o,s=>{let c=n[`repeating_weapon_${s}_weapon_macro_text`]||r;a[`repeating_weapon_${s}_weapon_macro_text`]=c.replace(/} @{weapon_whisper_to_hit}/g,"}")}),a.sheet_version=i,q("VERSION UPDATE: removeWhisper completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},ir=(i,t)=>{getAttrs(["hitpoints_max","hitpoints_1_class","hitpoints_2_class","hitpoints_3_class"],o=>{let e={},n=+o.hitpoints_max||0,a=+o.hitpoints_1_class||0,r=+o.hitpoints_2_class||0,s=+o.hitpoints_3_class||0;b(Math.max(0,a)+Math.max(0,r)+Math.max(0,s))===0&&n>0&&(e.hitpoints_1_class=n),e.sheet_version=i,q("VERSION UPDATE: migrate HP completed"),setAttrs(e,{silent:!0},()=>{versionator(i,t)},Sa())})},sr=(i,t)=>{getAttrs(["armorclass","armortype_ac","armorclass_total","armorbonus","armorshield"],o=>{let e={},a=+o.armorclass||0,r=-Math.abs(o.armorbonus)||0,s=+o.armorclass_total||0,c=+o.armortype_ac||0;o.armorshield?c===10&&a<10&&(a+=1,e.armortype_ac=a,e.armortype_base=a,e.armortype_worn=1,e.armortype_carried=1,e.armorshield_ac=-1,e.armorshield_base=-1,e.armorshield_worn=1,e.armorshield_carried=1):c===10&&a<10&&(e.armortype_ac=a,e.armortype_base=a,e.armortype_worn=1,e.armortype_carried=1),e.sheet_version=i,q("VERSION UPDATE: Migrate AC completed"),setAttrs(e,{silent:!0},()=>{versionator(i,t)},ne(0))})},Ne=(i,t)=>{getSectionIDs("repeating_weapon",o=>{let e=o.map(n=>[`repeating_weapon_${n}_weapon_macro_text`]);getAttrs([...e],n=>{let a={},r={weapon_old:"&{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{attack1=[[1d20 + @{weapon_tohitbonus}[BON] + @{weapon_magicbonus}[MAG] + ?{To Hit Modifier?|0}[MOD] ]]}} {{damage1vsSM=[[@{weapon_damagesmallmedium} + @{weapon_attackdmgbonus}[BON] + @{weapon_magicbonus}[MAG] + ?{Damage Modifier?|0}[MOD] ]]}} {{damage1vsL=[[@{weapon_damagelarge} + @{weapon_attackdmgbonus}[BON] + @{weapon_magicbonus}[MAG] + ?{Damage Modifier?|0}[MOD] ]]}} {{WeaponNotes=@{weapon_notes}}}",weapon_old_v2:"&{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{attack1=[[1d20 + @{weapon_tohitbonus}[BON] + @{weapon_magicbonus}[MAG] + ?{To Hit Modifier?|0}[MOD]) ]]}} {{damage1vsSM=[[@{weapon_damagesmallmedium} + @{weapon_attackdmgbonus}[BON] + @{weapon_magicbonus}[MAG] + ?{Damage Modifier?|0}[MOD] ]]}} {{damage1vsL=[[@{weapon_damagelarge} + @{weapon_attackdmgbonus}[BON] + @{weapon_magicbonus}[MAG] + ?{Damage Modifier?|0}[MOD] ]]}} {{WeaponNotes=@{weapon_notes}}}",weapon_old_v3:"&{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{dual=@{weapon_dual}}} {{attack1=[[ 1d20 + @{weapon_backstab_bonus}[BACKSTAB] + @{weapon_tohitbonus}[HIT_BON] + @{weapon_prof_pen}[PROF_PEN] + @{weapon_dual_pen}[DUAL_PEN]+ @{weapon_magicbonus}[MAG_BON] + ?{To Hit Modifier?|0}[MISC_MOD] ]]}} {{damagevsSMchatmenu=@{weapon_damagesmallmedium_chat_menu}}} {{damagevsLchatmenu=@{weapon_damagelarge_chat_menu}}} {{WeaponNotes=@{weapon_notes}}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}} {{rate=@{weapon_rateoffire}}} {{range=@{weapon_range}}} {{length=@{weapon_length}}} {{space=@{weapon_space}}} {{speed=@{weapon_speed}}} @{weapon_tohitacadj}",weapon_old_v4:"&{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{dual=@{weapon_dual}}} {{attack1=[[ 1d20 + @{weapon_backstab_bonus}[BACKSTAB] + @{weapon_tohitbonus}[HIT_BON] + @{weapon_prof_pen}[PROF_PEN] + @{weapon_dual_pen}[DUAL_PEN]+ @{weapon_magicbonus}[MAG_BON] + ?{To Hit Modifier?|0}[MISC_MOD] ]]}} {{damagevsSMchatmenu=@{weapon_damagesmallmedium_chat_menu}}} {{damagevsLchatmenu=@{weapon_damagelarge_chat_menu}}} {{critdamagevsSMchatmenu=@{weapon_critdamagesmallmedium_chat_menu}}} {{critdamagevsLchatmenu=@{weapon_critdamagelarge_chat_menu}}} {{WeaponNotes=@{weapon_notes}}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}} {{rate=@{weapon_rateoffire}}} {{range=@{weapon_range}}} {{length=@{weapon_length}}} {{space=@{weapon_space}}} {{speed=@{weapon_speed}}} {{crit=@{toggle_critdamage}}} @{weapon_tohitacadj}",weapon_old_v5:"&{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{dual=@{weapon_dual}}} {{attack1=[[ 1d20 + @{weapon_backstab_bonus}[BACKSTAB] + @{weapon_tohitbonus}[HIT_BON] + @{weapon_prof_pen}[PROF_PEN] + @{weapon_dual_pen}[DUAL_PEN]+ @{weapon_magicbonus}[MAG_BON] + ?{To Hit Modifier?|0}[MISC_MOD] ]]}} {{damagevsSMchatmenu=@{weapon_damagesmallmedium_chat_menu}}} {{damagevsLchatmenu=@{weapon_damagelarge_chat_menu}}} {{critdamagevsSMchatmenu=@{weapon_critdamagesmallmedium_chat_menu}}} {{critdamagevsLchatmenu=@{weapon_critdamagelarge_chat_menu}}} {{WeaponNotes=@{weapon_notes}}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}} {{rate=@{weapon_rateoffire}}} {{range=@{weapon_range}}} {{length=@{weapon_length}}} {{space=@{weapon_space}}} {{speed=@{weapon_speed}}} {{ammo=[[ @{weapon_ammo} ]]/[[ @{weapon_ammo|max} ]]}} {{crit=@{toggle_critdamage}}} @{weapon_tohitacadj}",weapon_old_v6:"&{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{dual=@{weapon_dual}}} {{attack1=[[ 1d20 + @{weapon_backstab_bonus}[BACKSTAB] + @{weapon_tohitbonus}[HIT_BON] + @{weapon_prof_pen}[PROF_PEN] + @{weapon_dual_pen}[DUAL_PEN]+ @{weapon_magicbonus}[MAG_BON] + ?{To Hit Modifier?|0}[MISC_MOD] ]]}} {{damagevsSMchatmenu=@{weapon_damagesmallmedium_chat_menu}}} {{damagevsLchatmenu=@{weapon_damagelarge_chat_menu}}} {{critdamagevsSMchatmenu=@{weapon_critdamagesmallmedium_chat_menu}}} {{critdamagevsLchatmenu=@{weapon_critdamagelarge_chat_menu}}} {{WeaponNotes=@{weapon_notes}}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}} {{rate=@{weapon_rateoffire}}} {{range=@{weapon_range}}} {{length=@{weapon_length}}} {{space=@{weapon_space}}} {{speed=@{weapon_speed}}} {{ammo=[[ @{weapon_ammo} ]]/[[ @{weapon_ammo|max} ]]}} {{crit=[[ @{toggle_critdamage} ]]}} @{weapon_tohitacadj}",weapon_current:"&{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{dual=@{weapon_dual}}} {{attack1=[[ 1d20 + ( @{weapon_backstab_bonus}[BACKSTAB] ) + ( @{weapon_tohitbonus}[HIT_BON] ) + ( @{weapon_prof_pen}[PROF_PEN] ) + ( @{weapon_dual_pen}[DUAL_PEN] ) + ( @{weapon_magicbonus}[MAG_BON] ) + ( ?{To Hit Modifier?|0}[MISC_MOD] ) ]]}} {{damagevsSMchatmenu=@{weapon_damagesmallmedium_chat_menu}}} {{damagevsLchatmenu=@{weapon_damagelarge_chat_menu}}} {{critdamagevsSMchatmenu=@{weapon_critdamagesmallmedium_chat_menu}}} {{critdamagevsLchatmenu=@{weapon_critdamagelarge_chat_menu}}} {{WeaponNotes=@{weapon_notes}}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}} {{rate=@{weapon_rateoffire}}} {{range=@{weapon_range}}} {{length=@{weapon_length}}} {{space=@{weapon_space}}} {{speed=@{weapon_speed}}} {{ammo=[[ @{weapon_ammo} ]]/[[ @{weapon_ammo|max} ]]}} {{crit=[[ @{toggle_critdamage} ]]}} @{weapon_tohitacadj}"};_.each(o,s=>{n[`repeating_weapon_${s}_weapon_macro_text`]===r.weapon_old_v6?a[`repeating_weapon_${s}_weapon_macro_text`]=n[`repeating_weapon_${s}_weapon_macro_text`].replace(r.weapon_old_v6,r.weapon_current):n[`repeating_weapon_${s}_weapon_macro_text`]===r.weapon_old_v5?a[`repeating_weapon_${s}_weapon_macro_text`]=n[`repeating_weapon_${s}_weapon_macro_text`].replace(r.weapon_old_v5,r.weapon_current):n[`repeating_weapon_${s}_weapon_macro_text`]===r.weapon_old_v4?a[`repeating_weapon_${s}_weapon_macro_text`]=n[`repeating_weapon_${s}_weapon_macro_text`].replace(r.weapon_old_v4,r.weapon_current):n[`repeating_weapon_${s}_weapon_macro_text`]===r.weapon_old_v3?a[`repeating_weapon_${s}_weapon_macro_text`]=n[`repeating_weapon_${s}_weapon_macro_text`].replace(r.weapon_old_v3,r.weapon_current):n[`repeating_weapon_${s}_weapon_macro_text`]===r.weapon_old_v2?a[`repeating_weapon_${s}_weapon_macro_text`]=n[`repeating_weapon_${s}_weapon_macro_text`].replace(r.weapon_old_v2,r.weapon_current):n[`repeating_weapon_${s}_weapon_macro_text`]===r.weapon_old&&(a[`repeating_weapon_${s}_weapon_macro_text`]=n[`repeating_weapon_${s}_weapon_macro_text`].replace(r.weapon_old,r.weapon_current))}),a.sheet_version=i,q("VERSION UPDATE: weaponMacroUpdate completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},wa=(i,t)=>{getSectionIDs("repeating_ability",o=>{let e=o.map(n=>[`repeating_ability_${n}_ability_macro_text`]);getAttrs([...e],n=>{let a={},r={ability_old:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Special Ability: @{ability_name}}} {{freetext=@{ability_short_description} @{ability_description}}}",ability_old_v2:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Special Ability: @{ability_name}}} {{roll= [[ @{ability_die} + @{ability_mod}[MOD] ]]}} {{freetext=@{ability_short_description} @{ability_description}}} {{uses=@{ability_current}}} {{uses_max=@{ability_current|max}}}",ability_old_v3:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Special Ability: @{ability_name}}} {{roll= [[ @{ability_die} + @{ability_mod}[MOD] ]]}} {{freetext=@{ability_short_description} @{ability_description}}} {{uses=@{ability_current}}} {{uses_max=[[ @{ability_current|max} ]]}} {{effect_type=@{ability_effect_type}}} {{spell_level=@{ability_level}}} {{casting_time=@{ability_ct}}} {{range=@{ability_range}}} {{saving_throw=@{ability_save}}} {{area_of_effect=@{ability_aoe}}} {{save_type=@{ability_save_type}}}",ability_old_v4:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Special Ability: @{ability_name}}} {{roll= [[ @{ability_die} + @{ability_mod}[MOD] ]]}} {{freetext=@{ability_short_description} @{ability_description}}} {{uses=@{ability_current}}} {{uses_max=[[ @{ability_current|max} ]]}} {{effect_type=@{ability_effect_type}}} {{spell_level=@{ability_level}}} {{casting_time=@{ability_ct}}} {{range=@{ability_range}}} {{duration=@{ability_duration}}} {{saving_throw=@{ability_save}}} {{area_of_effect=@{ability_aoe}}} {{save_type=@{ability_save_type}}}",ability_old_v5:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Special Ability: @{ability_name}}} {{roll= [[ @{ability_die} + @{ability_mod}[MOD] ]]}} {{link=@{ability_link}}} {{freetext=@{ability_short_description} @{ability_description}}} {{uses=@{ability_current}}} {{uses_max=[[@{ability_current|max}]]}} {{effect_type=@{ability_effect_type}}} {{spell_level=@{ability_level}}} {{casting_time=@{ability_ct}}} {{range=@{ability_range}}} {{duration=@{ability_duration}}} {{saving_throw=@{ability_save}}} {{area_of_effect=@{ability_aoe}}} {{save_type=@{ability_save_type}}}",ability_current:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Special Ability: @{ability_name}}} {{roll= [[ 0 + @{ability_die} + @{ability_mod}[MOD] ]]}} {{link=@{ability_link}}} {{freetext=@{ability_short_description} @{ability_description}}} {{uses=@{ability_current}}} {{uses_max=[[ 0 + @{ability_current|max} ]]}} {{effect_type=@{ability_effect_type}}} {{spell_level=@{ability_level}}} {{casting_time=@{ability_ct}}} {{range=@{ability_range}}} {{duration=@{ability_duration}}} {{saving_throw=@{ability_save}}} {{area_of_effect=@{ability_aoe}}} {{save_type=@{ability_save_type}}}"};_.each(o,s=>{n[`repeating_ability_${s}_ability_macro_text`]===r.ability_old_v5&&(a[`repeating_ability_${s}_ability_macro_text`]=n[`repeating_ability_${s}_ability_macro_text`].replace(r.ability_old_v5,r.ability_current)),n[`repeating_ability_${s}_ability_macro_text`]===r.ability_old_v4&&(a[`repeating_ability_${s}_ability_macro_text`]=n[`repeating_ability_${s}_ability_macro_text`].replace(r.ability_old_v4,r.ability_current)),n[`repeating_ability_${s}_ability_macro_text`]===r.ability_old_v3&&(a[`repeating_ability_${s}_ability_macro_text`]=n[`repeating_ability_${s}_ability_macro_text`].replace(r.ability_old_v3,r.ability_current)),n[`repeating_ability_${s}_ability_macro_text`]===r.ability_old_v2&&(a[`repeating_ability_${s}_ability_macro_text`]=n[`repeating_ability_${s}_ability_macro_text`].replace(r.ability_old_v2,r.ability_current)),n[`repeating_ability_${s}_ability_macro_text`]===r.ability_old&&(a[`repeating_ability_${s}_ability_macro_text`]=n[`repeating_ability_${s}_ability_macro_text`].replace(r.ability_old,r.ability_current))}),a.sheet_version=i,q("VERSION UPDATE: abilityMacroUpdate completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},cr=(i,t)=>{getSectionIDs("repeating_nonweaponproficiencies",o=>{let e=o.map(n=>[`repeating_nonweaponproficiencies_${n}_nwp_macro_text`]);getAttrs([...e],n=>{let a={},r={nwp_old:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Non Weapon Proficiency: @{nwp_name}}} {{Proficiency Check=[[ 1d20 + [[@{nwp_modifier}]][MOD] + [[?{Additional modifier?|0}]][MOD] ]] vs [[ @{nwp_attribute}[ATTR] ]]}}{{freetext=@{nwp_short_description}}}",nwp_old_v2:"@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Non Weapon Proficiency: @{nwp_name}}} {{roll_low=[[ 1d20 + [[ @{nwp_modifier} ]][MOD] + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[ @{nwp_attribute}[ATTR] ]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}} {{NWP Mod Applied=[[ @{nwp_modifier} ]]}} {{freetext=@{nwp_short_description}}}",nwp_current:"@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Non Weapon Proficiency: @{nwp_name}}} {{roll_low=[[ 1d20 + [[ @{nwp_modifier} ]][MOD] + [[ ?{Modifier?|0} ]][MOD] ]]}} {{roll_target=[[ @{nwp_attribute}[ATTR] ]]}} {{mod_applied=[[ ?{Modifier?|0} ]]}} {{nwp_mod_applied=[[ @{nwp_modifier} ]]}} {{link=@{nwp_link}}} {{freetext=@{nwp_short_description} @{nwp_description}}}"};_.each(o,s=>{n[`repeating_nonweaponproficiencies_${s}_nwp_macro_text`]===r.nwp_old_2&&(a[`repeating_nonweaponproficiencies_${s}_nwp_macro_text`]=n[`repeating_nonweaponproficiencies_${s}_nwp_macro_text`].replace(r.nwp_old_2,r.nwp_current)),n[`repeating_nonweaponproficiencies_${s}_nwp_macro_text`]===r.nwp_old&&(a[`repeating_nonweaponproficiencies_${s}_nwp_macro_text`]=n[`repeating_nonweaponproficiencies_${s}_nwp_macro_text`].replace(r.nwp_old,r.nwp_current))}),a.sheet_version=i,q("VERSION UPDATE: nwpMacroUpdate2 completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},pr=(i,t)=>{getSectionIDs("repeating_spells",o=>{let e=o.map(n=>[`repeating_spells_${n}_spell_macro_text`]);getAttrs([...e],n=>{let a={},r={spell_old:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Casts: @{spell_name}}} {{Level:=@{spell_level}}} {{Range:=@{spell_range}}} {{Duration:=@{spell_duration}}} {{AOE:=@{spell_aoe}}} {{Comp:=@{spell_components}}} {{CT:=@{spell_ct}}} {{Save:=@{spell_save}}} {{freetext=@{spell_description}}}",spell_old_v2:"&{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Casts: @{spell_name}}} {{Range:=@{spell_range}}} {{Duration:=@{spell_duration}}} {{AOE:=@{spell_aoe}}} {{Save:=@{spell_save}}}",spell_old_v3:"@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Casts: @{spell_name}}} {{school=@{spell_school}}} {{spell_level=@{spell_level}}} {{range=@{spell_range}}} {{duration=@{spell_duration}}} {{area_of_effect=@{spell_aoe}}} {{components=@{spell_components}}} {{casting_time=@{spell_ct}}} {{saving_throw=@{spell_save}}} {{freetext=@{spell_description}}}",spell_current:"@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Casts: @{spell_name}}} {{school=@{spell_school}}} {{spell_level=@{spell_level}}} {{spell_class=@{spell_caster_class_name}}} {{spell_class_level=@{spell_caster_class_level}}} {{range=@{spell_range}}} {{duration=@{spell_duration}}} {{area_of_effect=@{spell_aoe}}} {{components=@{spell_components}}} {{casting_time=@{spell_ct}}} {{saving_throw=@{spell_save}}} {{save_type=@{spell_save_type}}} {{link=@{spell_link}}} {{freetext=@{spell_description}}}"};_.each(o,s=>{n[`repeating_spells_${s}_spell_macro_text`]===r.spell_old_v3&&(a[`repeating_spells_${s}_spell_macro_text`]=n[`repeating_spells_${s}_spell_macro_text`].replace(r.spell_old_v3,r.spell_current)),n[`repeating_spells_${s}_spell_macro_text`]===r.spell_old_v2&&(a[`repeating_spells_${s}_spell_macro_text`]=n[`repeating_spells_${s}_spell_macro_text`].replace(r.spell_old_v2,r.spell_current)),n[`repeating_spells_${s}_spell_macro_text`]===r.spell_old&&(a[`repeating_spells_${s}_spell_macro_text`]=n[`repeating_spells_${s}_spell_macro_text`].replace(r.spell_old,r.spell_current))}),a.sheet_version=i,q("VERSION UPDATE: spellsMacroUpdate completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},mr=(i,t)=>{getSectionIDs("repeating_equipment",o=>{let e=o.map(n=>[`repeating_equipment_${n}_equipment_macro_text`]);getAttrs([...e],n=>{let a={},r={equipment_old:"@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Item/Equipment: @{equipment_item}}} {{freetext=@{equipment_description}}} {{quantity= @{equipment_quantity}}} {{quantity_max=@{equipment_quantity|max}}} {{uses=@{equipment_current}}} {{uses_max=[[ @{equipment_current|max} ]]}}",equipment_current:"@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Item/Equipment: @{equipment_item}}} {{link=@{equipment_link}}} {{freetext=@{equipment_description}}} {{quantity=@{equipment_quantity}}} {{quantity_max=@{equipment_quantity|max}}} {{uses=@{equipment_current}}} {{uses_max=[[ @{equipment_current|max} ]]}}"};_.each(o,s=>{n[`repeating_equipment_${s}_equipment_macro_text`]===r.equipment_old&&(a[`repeating_equipment_${s}_equipment_macro_text`]=n[`repeating_equipment_${s}_equipment_macro_text`].replace(r.equipment_old,r.equipment_current))}),a.sheet_version=i,q("VERSION UPDATE: equipmentMacroUpdate completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},lr=(i,t)=>{getSectionIDs("repeating_weapon",o=>{let e={},n=o.flatMap(a=>[`repeating_weapon_${a}_weapon_range`,`repeating_weapon_${a}_weapon_range_short`,`repeating_weapon_${a}_weapon_range_medium`,`repeating_weapon_${a}_weapon_range_long`,`repeating_weapon_${a}_weapon_attack_type`,`repeating_weapon_${a}_weapon_range_error`]);getAttrs(n,a=>{_.each(o,r=>{let s=+a[`repeating_weapon_${r}_weapon_attack_type`]||0;if(s===0||s===2)return;let c=a[`repeating_weapon_${r}_weapon_range`];c=c.replace(/'/g,""),c=c.replace(/"/g,"");let m=c.split("/").join(",").split(" ").join(",").split("-").join(",").split(","),h=Number(m[0]),l=Number(m[1]),p=Number(m[2]);m.length===1&&h>=0&&!l&&!p&&(l=h,p=h),Number.isNaN(h)?(e[`repeating_weapon_${r}_weapon_range_short`]=0,e[`repeating_weapon_${r}_weapon_range_error`]=c===""?1:0):e[`repeating_weapon_${r}_weapon_range_short`]=h,Number.isNaN(l)?(e[`repeating_weapon_${r}_weapon_range_medium`]=0,e[`repeating_weapon_${r}_weapon_range_error`]=c===""?1:0):e[`repeating_weapon_${r}_weapon_range_medium`]=l,Number.isNaN(p)?(e[`repeating_weapon_${r}_weapon_range_long`]=0,e[`repeating_weapon_${r}_weapon_range_error`]=c===""?1:0):e[`repeating_weapon_${r}_weapon_range_long`]=p,!Number.isNaN(h)&&!Number.isNaN(l)&&!Number.isNaN(p)&&(e[`repeating_weapon_${r}_weapon_range_error`]=1)}),e.sheet_version=i,q("VERSION UPDATE: updateRange completed"),setAttrs(e,{silent:!0},()=>{versionator(i,t)})})})},hr=(i,t)=>{getSectionIDs("repeating_weapon",o=>{let e=o.map(n=>[`repeating_weapon_${n}_weapon_macro_text`]);getAttrs([...e],n=>{let a={},r="&{template:attacks} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=@{weapon_name}}} {{dual=@{weapon_dual}}} {{attack1=[[ 1d20 + @{weapon_backstab_bonus}[BACKSTAB] + @{weapon_tohitbonus}[HIT_BON] + @{weapon_prof_pen}[PROF_PEN] + @{weapon_dual_pen}[DUAL_PEN]+ @{weapon_magicbonus}[MAG_BON] + ?{To Hit Modifier?|0}[MISC_MOD] ]]}} {{damagevsSMchatmenu=@{weapon_damagesmallmedium_chat_menu}}} {{damagevsLchatmenu=@{weapon_damagelarge_chat_menu}}} {{WeaponNotes=@{weapon_notes}}} {{backstab=[[ @{weapon_backstab_mult} ]]}} {{damagetype=@{weapon_attackdmgtype}}} {{rate=@{weapon_rateoffire}}} {{range=@{weapon_range}}} {{length=@{weapon_length}}} {{space=@{weapon_space}}} {{speed=@{weapon_speed}}} @{weapon_tohitacadj}";_.each(o,s=>{let c=n[`repeating_weapon_${s}_weapon_macro_text`]||r;a[`repeating_weapon_${s}_weapon_macro_text`]=c.replace(/@{weapon_attack_type_pen}/g,"@{weapon_dual_pen}"),a[`repeating_weapon_${s}_weapon_macro_text`]=c.replace(/{{attacktype=@{weapon_attack_type}}} /g,"")}),a.sheet_version=i,q("VERSION UPDATE: updateAttackTypeMacro completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},gr=(i,t)=>{getAttrs(["hitdice","monsterHD"],o=>{let e={},n=o.monsterHD,a=o.hitdice;n===""&&(e.monsterHD=a),e.monsterHD=n,e.sheet_version=i,q("VERSION UPDATE: monsterHD completed"),setAttrs(e,{silent:!0},()=>{versionator(i,t)})})},ur=(i,t)=>{let o={};o.armorother_cost=0,o.armorother2_cost=0,o.armorother3_cost=0,o.armorother4_cost=0,o.armorother5_cost=0,o.armorother6_cost=0,o.armorother_weight=0,o.armorother2_weight=0,o.armorother3_weight=0,o.armorother4_weight=0,o.armorother5_weight=0,o.armorother6_weight=0,o.armorother_carried=0,o.armorother2_carried=0,o.armorother3_carried=0,o.armorother4_carried=0,o.armorother5_carried=0,o.armorother6_carried=0,o.armorother_bulk=0,o.armorother2_bulk=0,o.armorother3_bulk=0,o.armorother4_bulk=0,o.armorother5_bulk=0,o.armorother6_bulk=0,q("VERSION UPDATE: clearArmorOther completed"),setAttrs(o,{silent:!0},()=>{versionator(i,t)})},wr=fe.concat($e),je=async(i,t,o,e)=>{let n=await u(wr),a={},r="",s=i;s=s!==null?i.toLowerCase():s;let c=n.unarmored_row_id.toString(),m=n.armortype1_row_id.toString(),h=n.armortype2_row_id.toString(),l=n.armorshield_row_id.toString(),p=n.armorhelmet_row_id.toString(),w=n.armorother1_row_id.toString(),y=n.armorother2_row_id.toString(),C=n.armorother3_row_id.toString(),D=n.armorother4_row_id.toString(),x=n.armorother5_row_id.toString(),L=n.armorother6_row_id.toString(),v=[c,m,h,l,p,w,y,C,D,x,L].map(U=>U?U.toString().toLowerCase():"0");function j(U){let H=Object.entries({unarmoredAttrs:Ht,armor1Attrs:Rt,armor2Attrs:Pt,shieldAttrs:Bt,helmetAttrs:jt,other1Attrs:Ut,other2Attrs:Vt,other3Attrs:Wt,other4Attrs:Ft,other5Attrs:Gt,other6Attrs:zt}).find(([xe,he])=>he.includes(U));return H?H[0]:null}let $=j(t),me=n.unarmored.trim(),le=n.armortype.trim(),oe=n.armortype2.trim(),ie=n.armorshield.trim(),z=n.armorhelmet.trim(),ke=n.armorother.trim(),K=n.armorother2.trim(),X=n.armorother3.trim(),Q=n.armorother4.trim(),Y=n.armorother5.trim(),Z=n.armorother6.trim(),J={unarmoredAttrs:0,armor1Attrs:1,armor2Attrs:2,shieldAttrs:3,helmetAttrs:4,other1Attrs:5,other2Attrs:6,other3Attrs:7,other4Attrs:8,other5Attrs:9,other6Attrs:10};if(s===null){let U=J[$];U!==void 0&&(s=v[U])}($==="unarmoredAttrs"||s===v[0]||e)&&($==="unarmoredAttrs"||e?me?c.length===20?(rowId=c.toLowerCase(),a.unarmored_row_id=rowId,a[`repeating_equipment_${rowId}_equipment_type`]=2,a[`repeating_equipment_${rowId}_equipment_armor_type`]=0,a[`repeating_equipment_${rowId}_equipment_armor_worn`]=+n.unarmored_worn||0,a[`repeating_equipment_${rowId}_equipment_item`]=n.unarmored.trim(),a[`repeating_equipment_${rowId}_equipment_armor_ac`]=+n.unarmored_ac||0,a[`repeating_equipment_${rowId}_equipment_armor_base`]=+n.unarmored_base||0,a[`repeating_equipment_${rowId}_equipment_armor_bulk`]=+n.unarmored_bulk||0,(+n.unarmored_worn||0)==1&&(+n.unarmored_carried||0)==0?(a[`repeating_equipment_${rowId}_equipment_carried_select`]=1,a.unarmored_carried=1):a[`repeating_equipment_${rowId}_equipment_carried_select`]=+n.unarmored_carried||0,a[`repeating_equipment_${rowId}_equipment_weight`]=+n.unarmored_weight||0,a[`repeating_equipment_${rowId}_equipment_cost`]=+n.unarmored_cost||0):(r=k(),a.unarmored_row_id=r.toLowerCase(),a[`repeating_equipment_${r}_equipment_type`]=2,a[`repeating_equipment_${r}_equipment_armor_type`]=0,a[`repeating_equipment_${r}_equipment_armor_worn`]=+n.unarmored_worn||0,a[`repeating_equipment_${r}_equipment_item`]=n.unarmored.trim(),a[`repeating_equipment_${r}_equipment_armor_ac`]=+n.unarmored_ac||0,a[`repeating_equipment_${r}_equipment_armor_base`]=+n.unarmored_base||0,a[`repeating_equipment_${r}_equipment_armor_bulk`]=+n.unarmored_bulk||0,(+n.unarmored_worn||0)==1&&(+n.unarmored_carried||0)==0?(a[`repeating_equipment_${r}_equipment_carried_select`]=1,a.unarmored_carried=1):a[`repeating_equipment_${r}_equipment_carried_select`]=+n.unarmored_carried||0,a[`repeating_equipment_${r}_equipment_weight`]=+n.unarmored_weight||0,a[`repeating_equipment_${r}_equipment_cost`]=+n.unarmored_cost||0,a[`repeating_equipment_${r}_equipment_sync_armor_flag`]=1):c===v[0]&&(a.unarmored_row_id=0,a.unarmored_worn=+n.unarmored_worn||0,a.unarmored="",a.unarmored_ac=+n.unarmored_ac||0,a.unarmored_base=+n.unarmored_base||0,a.unarmored_bulk=+n.unarmored_bulk||0,a.unarmored_weight=+n.unarmored_weight||0,a.unarmored_cost=+n.unarmored_cost||0,(+n.unarmored_worn||0)==1&&(+n.unarmored_carried||0)==0?a.unarmored_carried=1:a.unarmored_carried=+n.unarmored_carried||0):$===null&&o&&(a.unarmored_row_id=0,a.unarmored_worn=1,a.unarmored="",a.unarmored_ac=10,a.unarmored_base=10,a.unarmored_bulk=0,a.unarmored_weight=0,a.unarmored_cost=0,a.unarmored_carried=1)),($==="armor1Attrs"||s===v[1]||e)&&($==="armor1Attrs"||e?le?m.length===20?(rowId=m.toLowerCase(),a.armortype1_row_id=rowId,a[`repeating_equipment_${rowId}_equipment_type`]=2,a[`repeating_equipment_${rowId}_equipment_armor_type`]=1,a[`repeating_equipment_${rowId}_equipment_armor_worn`]=+n.armortype_worn||0,a[`repeating_equipment_${rowId}_equipment_item`]=n.armortype.trim(),a[`repeating_equipment_${rowId}_equipment_armor_ac`]=+n.armortype_ac||0,a[`repeating_equipment_${rowId}_equipment_armor_base`]=+n.armortype_base||0,a[`repeating_equipment_${rowId}_equipment_armor_magic`]=+n.armortype_magic||0,a[`repeating_equipment_${rowId}_equipment_armor_bulk`]=+n.armortype_bulk||0,(+n.armortype_worn||0)==1&&(+n.armortype_carried||0)==0?(a[`repeating_equipment_${rowId}_equipment_carried_select`]=1,a.armortype_carried=1):a[`repeating_equipment_${rowId}_equipment_carried_select`]=+n.armortype_carried||0,a[`repeating_equipment_${rowId}_equipment_weight`]=+n.armor_weight||0,a[`repeating_equipment_${rowId}_equipment_cost`]=+n.armor_cost||0):(r=k(),a.armortype1_row_id=r.toLowerCase(),a[`repeating_equipment_${r}_equipment_type`]=2,a[`repeating_equipment_${r}_equipment_armor_type`]=1,a[`repeating_equipment_${r}_equipment_armor_worn`]=+n.armortype_worn||0,a[`repeating_equipment_${r}_equipment_item`]=n.armortype.trim(),a[`repeating_equipment_${r}_equipment_armor_ac`]=+n.armortype_ac||0,a[`repeating_equipment_${r}_equipment_armor_base`]=+n.armortype_base||0,a[`repeating_equipment_${r}_equipment_armor_magic`]=+n.armortype_magic||0,a[`repeating_equipment_${r}_equipment_armor_bulk`]=+n.armortype_bulk||0,a[`repeating_equipment_${r}_equipment_carried_select`]=+n.armortype_carried||0,a[`repeating_equipment_${r}_equipment_weight`]=+n.armor_weight||0,a[`repeating_equipment_${r}_equipment_cost`]=+n.armor_cost||0,a[`repeating_equipment_${r}_equipment_sync_armor_flag`]=1):m===v[1]&&(a.armortype1_row_id=0,a.armortype_worn=0,a.armortype="",a.armortype_ac=10,a.armortype_base=10,a.armortype_magic=0,a.armortype_bulk=0,a.armortype_weight=0,a.armortype_cost=0,a.armortype_carried=1):$===null&&o&&(a.armortype1_row_id=0,a.armortype_worn=0,a.armortype="",a.armortype_ac=10,a.armortype_base=10,a.armortype_magic=0,a.armortype_bulk=0,a.armortype_weight=0,a.armortype_cost=0,a.armortype_carried=1)),($==="armor2Attrs"||s===v[2]||e)&&($==="armor2Attrs"||e?oe?h.length===20?(rowId=h.toLowerCase(),a.armortype2_row_id=rowId,a[`repeating_equipment_${rowId}_equipment_type`]=2,a[`repeating_equipment_${rowId}_equipment_armor_type`]=2,a[`repeating_equipment_${rowId}_equipment_armor_worn`]=+n.armortype2_worn||0,a[`repeating_equipment_${rowId}_equipment_item`]=n.armortype2.trim(),a[`repeating_equipment_${rowId}_equipment_armor_ac`]=+n.armortype2_ac||0,a[`repeating_equipment_${rowId}_equipment_armor_base`]=+n.armortype2_base||0,a[`repeating_equipment_${rowId}_equipment_armor_magic`]=+n.armortype2_magic||0,a[`repeating_equipment_${rowId}_equipment_armor_bulk`]=+n.armortype2_bulk||0,(+n.armortype2_worn||0)==1&&(+n.armortype2_carried||0)==0?(a[`repeating_equipment_${rowId}_equipment_carried_select`]=1,a.armortype2_carried=1):a[`repeating_equipment_${rowId}_equipment_carried_select`]=+n.armortype2_carried||0,a[`repeating_equipment_${rowId}_equipment_weight`]=+n.armortype2_weight||0,a[`repeating_equipment_${rowId}_equipment_cost`]=+n.armortype2_cost||0):(r=k(),a.armortype2_row_id=r.toLowerCase(),a[`repeating_equipment_${r}_equipment_type`]=2,a[`repeating_equipment_${r}_equipment_armor_type`]=2,a[`repeating_equipment_${r}_equipment_armor_worn`]=+n.armortype2_worn||0,a[`repeating_equipment_${r}_equipment_item`]=n.armortype2.trim(),a[`repeating_equipment_${r}_equipment_armor_ac`]=+n.armortype2_ac||0,a[`repeating_equipment_${r}_equipment_armor_base`]=+n.armortype2_base||0,a[`repeating_equipment_${r}_equipment_armor_magic`]=+n.armortype2_magic||0,a[`repeating_equipment_${r}_equipment_armor_bulk`]=+n.armortype2_bulk||0,a[`repeating_equipment_${r}_equipment_carried_select`]=+n.armortype2_carried||0,a[`repeating_equipment_${r}_equipment_weight`]=+n.armortype2_weight||0,a[`repeating_equipment_${r}_equipment_cost`]=+n.armortype2_cost||0,a[`repeating_equipment_${r}_equipment_sync_armor_flag`]=1):h===v[2]&&(a.armortype2_row_id=0,a.armortype2_worn=0,a.armortype2="",a.armortype2_ac=10,a.armortype2_base=10,a.armortype2_magic=0,a.armortype2_bulk=0,a.armortype2_weight=0,a.armortype2_cost=0,a.armortype2_carried=1):$===null&&o&&(a.armortype2_row_id=0,a.armortype2_worn=0,a.armortype2="",a.armortype2_ac=10,a.armortype2_base=10,a.armortype2_magic=0,a.armortype2_bulk=0,a.armortype2_weight=0,a.armortype2_cost=0,a.armortype2_carried=1)),($==="shieldAttrs"||s===v[3]||e)&&($==="shieldAttrs"||e?ie?l.length===20?(rowId=l.toLowerCase(),a.armorshield_row_id=rowId,a[`repeating_equipment_${rowId}_equipment_type`]=2,a[`repeating_equipment_${rowId}_equipment_armor_type`]=3,a[`repeating_equipment_${rowId}_equipment_armor_worn`]=+n.armorshield_worn||0,a[`repeating_equipment_${rowId}_equipment_item`]=n.armorshield.trim(),a[`repeating_equipment_${rowId}_equipment_armor_ac`]=+n.armorshield_ac||0,a[`repeating_equipment_${rowId}_equipment_armor_base`]=+n.armorshield_base||0,a[`repeating_equipment_${rowId}_equipment_armor_magic`]=n.armorshield_magic,a[`repeating_equipment_${rowId}_equipment_armor_mod`]=n.armorshield_mod,a[`repeating_equipment_${rowId}_equipment_armor_bulk`]=+n.armorshield_bulk||0,(+n.armorshield_worn||0)==1&&(+n.armorshield_carried||0)==0?(a[`repeating_equipment_${rowId}_equipment_carried_select`]=1,a.armorshield_carried=1):a[`repeating_equipment_${rowId}_equipment_carried_select`]=+n.armorshield_carried||0,a[`repeating_equipment_${rowId}_equipment_weight`]=+n.armorshield_weight||0,a[`repeating_equipment_${rowId}_equipment_cost`]=+n.armorshield_cost||0):(r=k(),a.armorshield_row_id=r.toLowerCase(),a[`repeating_equipment_${r}_equipment_type`]=2,a[`repeating_equipment_${r}_equipment_armor_type`]=3,a[`repeating_equipment_${r}_equipment_armor_worn`]=+n.armorshield_worn||0,a[`repeating_equipment_${r}_equipment_item`]=n.armorshield.trim(),a[`repeating_equipment_${r}_equipment_armor_ac`]=+n.armorshield_ac||0,a[`repeating_equipment_${r}_equipment_armor_base`]=+n.armorshield_base||0,a[`repeating_equipment_${r}_equipment_armor_magic`]=n.armorshield_magic,a[`repeating_equipment_${r}_equipment_armor_mod`]=n.armorshield_mod,a[`repeating_equipment_${r}_equipment_armor_bulk`]=+n.armorshield_bulk||0,a[`repeating_equipment_${r}_equipment_carried_select`]=+n.armorshield_carried||0,a[`repeating_equipment_${r}_equipment_weight`]=+n.armorshield_weight||0,a[`repeating_equipment_${r}_equipment_cost`]=+n.armorshield_cost||0,a[`repeating_equipment_${r}_equipment_sync_armor_flag`]=1):l===v[3]&&(a.armorshield_row_id=0,a.armorshield_worn=0,a.armorshield="",a.armorshield_ac=0,a.armorshield_base=0,a.armorshield_magic=0,a.armorshield_mod=0,a.armorshield_bulk=0,a.armorshield_weight=0,a.armorshield_cost=0,a.armorshield_carried=1):$===null&&o&&(a.armorshield_row_id=0,a.armorshield_worn=0,a.armorshield="",a.armorshield_ac=0,a.armorshield_base=0,a.armorshield_magic=0,a.armorshield_mod=0,a.armorshield_bulk=0,a.armorshield_weight=0,a.armorshield_cost=0,a.armorshield_carried=1)),($==="helmetAttrs"||s===v[4]||e)&&($==="helmetAttrs"||e?z?p.length===20?(rowId=p.toLowerCase(),a.armorhelmet_row_id=rowId,a[`repeating_equipment_${rowId}_equipment_type`]=2,a[`repeating_equipment_${rowId}_equipment_armor_type`]=4,a[`repeating_equipment_${rowId}_equipment_armor_worn`]=+n.armorhelmet_worn||0,a[`repeating_equipment_${rowId}_equipment_item`]=n.armorhelmet.trim(),a[`repeating_equipment_${rowId}_equipment_armor_ac`]=+n.armorhelmet_ac||0,a[`repeating_equipment_${rowId}_equipment_armor_magic`]=n.armorhelmet_magic,(+n.armorhelmet_worn||0)==1&&(+n.armorhelmet_carried||0)==0?(a[`repeating_equipment_${rowId}_equipment_carried_select`]=1,a.armorhelmet_carried=1):a[`repeating_equipment_${rowId}_equipment_carried_select`]=+n.armorhelmet_carried||0,a[`repeating_equipment_${rowId}_equipment_weight`]=+n.armorhelmet_weight||0,a[`repeating_equipment_${rowId}_equipment_cost`]=+n.armorhelmet_cost||0):(r=k(),a.armorhelmet_row_id=r.toLowerCase(),a[`repeating_equipment_${r}_equipment_type`]=2,a[`repeating_equipment_${r}_equipment_armor_type`]=4,a[`repeating_equipment_${r}_equipment_armor_worn`]=+n.armorhelmet_worn||0,a[`repeating_equipment_${r}_equipment_item`]=n.armorhelmet.trim(),a[`repeating_equipment_${r}_equipment_armor_ac`]=+n.armorhelmet_ac||0,a[`repeating_equipment_${r}_equipment_armor_magic`]=n.armorhelmet_magic,a[`repeating_equipment_${r}_equipment_carried_select`]=+n.armorhelmet_carried||0,a[`repeating_equipment_${r}_equipment_weight`]=+n.armorhelmet_weight||0,a[`repeating_equipment_${r}_equipment_cost`]=+n.armorhelmet_cost||0,a[`repeating_equipment_${r}_equipment_sync_armor_flag`]=1):p===v[4]&&(a.armorhelmet_row_id=0,a.armorhelmet_worn=0,a.armorhelmet="",a.armorhelmet_ac=10,a.armorhelmet_base=10,a.armorhelmet_magic=0,a.armorhelmet_bulk=0,a.armorhelmet_weight=0,a.armorhelmet_cost=0,a.armorhelmet_carried=1):$===null&&o&&(a.armorhelmet_row_id=0,a.armorhelmet_worn=0,a.armorhelmet="",a.armorhelmet_ac=10,a.armorhelmet_base=10,a.armorhelmet_magic=0,a.armorhelmet_bulk=0,a.armorhelmet_weight=0,a.armorhelmet_cost=0,a.armorhelmet_carried=1)),($==="other1Attrs"||s===v[5]||e)&&($==="other1Attrs"||e?ke?w.length===20?(rowId=w.toLowerCase(),a.armorother1_row_id=rowId,a[`repeating_equipment_${rowId}_equipment_type`]=2,a[`repeating_equipment_${rowId}_equipment_armor_type`]=5,a[`repeating_equipment_${rowId}_equipment_armor_worn`]=+n.armorother_worn||0,a[`repeating_equipment_${rowId}_equipment_item`]=n.armorother.trim(),a[`repeating_equipment_${rowId}_equipment_armor_ac`]=+n.armorother_ac||0,a[`repeating_equipment_${rowId}_equipment_armor_base`]=+n.armorother_base||0,a[`repeating_equipment_${rowId}_equipment_armor_magic`]=+n.armorother_magic||0,a[`repeating_equipment_${rowId}_equipment_armor_mod`]=+n.armorother_mod||0,a[`repeating_equipment_${rowId}_equipment_carried_select`]=+n.armorother_worn==1?1:0):(r=k(),a.armorother1_row_id=r.toLowerCase(),a[`repeating_equipment_${r}_equipment_type`]=2,a[`repeating_equipment_${r}_equipment_armor_type`]=5,a[`repeating_equipment_${r}_equipment_armor_worn`]=+n.armorother_worn||0,a[`repeating_equipment_${r}_equipment_item`]=n.armorother.trim(),a[`repeating_equipment_${r}_equipment_armor_ac`]=+n.armorother_ac||0,a[`repeating_equipment_${r}_equipment_armor_base`]=+n.armorother_base||0,a[`repeating_equipment_${r}_equipment_armor_magic`]=+n.armorother_magic||0,a[`repeating_equipment_${r}_equipment_armor_mod`]=+n.armorother_mod||0,a[`repeating_equipment_${r}_equipment_sync_armor_flag`]=1):w===v[5]&&(a.armorother1_row_id=0,a.armorother_worn=0,a.armorother="",a.armorother_ac=10,a.armorother_base=10,a.armorother_magic=0,a.armorother_mod=0,a.armorother_bulk=0):$===null&&o&&(a.armorother1_row_id=0,a.armorother_worn=0,a.armorother="",a.armorother_ac=10,a.armorother_base=10,a.armorother_magic=0,a.armorother_mod=0,a.armorother_bulk=0)),($==="other2Attrs"||s===v[6]||e)&&($==="other2Attrs"||e?K?y.length===20?(rowId=y.toLowerCase(),a.armorother2_row_id=rowId,a[`repeating_equipment_${rowId}_equipment_type`]=2,a[`repeating_equipment_${rowId}_equipment_armor_type`]=6,a[`repeating_equipment_${rowId}_equipment_armor_worn`]=+n.armorother2_worn||0,a[`repeating_equipment_${rowId}_equipment_item`]=n.armorother2.trim(),a[`repeating_equipment_${rowId}_equipment_armor_ac`]=+n.armorother2_ac||0,a[`repeating_equipment_${rowId}_equipment_armor_base`]=+n.armorother2_base||0,a[`repeating_equipment_${rowId}_equipment_armor_magic`]=+n.armorother2_magic||0,a[`repeating_equipment_${rowId}_equipment_armor_mod`]=+n.armorother2_mod||0,a[`repeating_equipment_${rowId}_equipment_carried_select`]=+n.armorother2_worn==1?1:0):(r=k(),a.armorother2_row_id=r.toLowerCase(),a[`repeating_equipment_${r}_equipment_type`]=2,a[`repeating_equipment_${r}_equipment_armor_type`]=6,a[`repeating_equipment_${r}_equipment_armor_worn`]=+n.armorother2_worn||0,a[`repeating_equipment_${r}_equipment_item`]=n.armorother2.trim(),a[`repeating_equipment_${r}_equipment_armor_ac`]=+n.armorother2_ac||0,a[`repeating_equipment_${r}_equipment_armor_base`]=+n.armorother2_base||0,a[`repeating_equipment_${r}_equipment_armor_magic`]=+n.armorother2_magic||0,a[`repeating_equipment_${r}_equipment_armor_mod`]=+n.armorother2_mod||0,a[`repeating_equipment_${r}_equipment_sync_armor_flag`]=1):y===v[6]&&(a.armorother2_row_id=0,a.armorother2_worn=0,a.armorother2="",a.armorother2_ac=0,a.armorother2_base=0,a.armorother2_magic=0,a.armorother2_mod=0,a.armorother2_bulk=0):$===null&&o&&(a.armorother2_row_id=0,a.armorother2_worn=0,a.armorother2="",a.armorother2_ac=0,a.armorother2_base=0,a.armorother2_magic=0,a.armorother2_mod=0,a.armorother2_bulk=0)),($==="other3Attrs"||s===v[7]||e)&&($==="other3Attrs"||e?X?C.length===20?(rowId=C.toLowerCase(),a.armorother3_row_id=rowId,a[`repeating_equipment_${rowId}_equipment_type`]=2,a[`repeating_equipment_${rowId}_equipment_armor_type`]=7,a[`repeating_equipment_${rowId}_equipment_armor_worn`]=+n.armorother3_worn||0,a[`repeating_equipment_${rowId}_equipment_item`]=n.armorother3.trim(),a[`repeating_equipment_${rowId}_equipment_armor_ac`]=+n.armorother3_ac||0,a[`repeating_equipment_${rowId}_equipment_armor_base`]=+n.armorother3_base||0,a[`repeating_equipment_${rowId}_equipment_armor_magic`]=+n.armorother3_magic||0,a[`repeating_equipment_${rowId}_equipment_armor_mod`]=+n.armorother3_mod||0,a[`repeating_equipment_${rowId}_equipment_carried_select`]=+n.armorother3_worn==1?1:0):(r=k(),a.armorother3_row_id=r.toLowerCase(),a[`repeating_equipment_${r}_equipment_type`]=2,a[`repeating_equipment_${r}_equipment_armor_type`]=7,a[`repeating_equipment_${r}_equipment_armor_worn`]=+n.armorother3_worn||0,a[`repeating_equipment_${r}_equipment_item`]=n.armorother3.trim(),a[`repeating_equipment_${r}_equipment_armor_ac`]=+n.armorother3_ac||0,a[`repeating_equipment_${r}_equipment_armor_base`]=+n.armorother3_base||0,a[`repeating_equipment_${r}_equipment_armor_magic`]=+n.armorother3_magic||0,a[`repeating_equipment_${r}_equipment_armor_mod`]=+n.armorother3_mod||0,a[`repeating_equipment_${r}_equipment_sync_armor_flag`]=1):C===v[7]&&(a.armorother3_row_id=0,a.armorother3_worn=0,a.armorother3="",a.armorother3_ac=0,a.armorother3_base=0,a.armorother3_magic=0,a.armorother3_mod=0,a.armorother3_bulk=0):$===null&&o&&(a.armorother3_row_id=0,a.armorother3_worn=0,a.armorother3="",a.armorother3_ac=0,a.armorother3_base=0,a.armorother3_magic=0,a.armorother3_mod=0,a.armorother3_bulk=0)),($==="other4Attrs"||s===v[8]||e)&&($==="other4Attrs"||e?Q?D.length===20?(rowId=D.toLowerCase(),a.armorother4_row_id=rowId,a[`repeating_equipment_${rowId}_equipment_type`]=2,a[`repeating_equipment_${rowId}_equipment_armor_type`]=8,a[`repeating_equipment_${rowId}_equipment_armor_worn`]=+n.armorother4_worn||0,a[`repeating_equipment_${rowId}_equipment_item`]=n.armorother4.trim(),a[`repeating_equipment_${rowId}_equipment_armor_ac`]=+n.armorother4_ac||0,a[`repeating_equipment_${rowId}_equipment_armor_base`]=+n.armorother4_base||0,a[`repeating_equipment_${rowId}_equipment_armor_magic`]=+n.armorother4_magic||0,a[`repeating_equipment_${rowId}_equipment_armor_mod`]=+n.armorother4_mod||0,a[`repeating_equipment_${rowId}_equipment_carried_select`]=+n.armorother4_worn==1?1:0):(r=k(),a.armorother4_row_id=r.toLowerCase(),a[`repeating_equipment_${r}_equipment_type`]=2,a[`repeating_equipment_${r}_equipment_armor_type`]=8,a[`repeating_equipment_${r}_equipment_armor_worn`]=+n.armorother4_worn||0,a[`repeating_equipment_${r}_equipment_item`]=n.armorother4.trim(),a[`repeating_equipment_${r}_equipment_armor_ac`]=+n.armorother4_ac||0,a[`repeating_equipment_${r}_equipment_armor_base`]=+n.armorother4_base||0,a[`repeating_equipment_${r}_equipment_armor_magic`]=+n.armorother4_magic||0,a[`repeating_equipment_${r}_equipment_armor_mod`]=+n.armorother4_mod||0,a[`repeating_equipment_${r}_equipment_sync_armor_flag`]=1):D===v[8]&&(a.armorother4_row_id=0,a.armorother4_worn=0,a.armorother4="",a.armorother4_ac=0,a.armorother4_base=0,a.armorother4_magic=0,a.armorother4_mod=0,a.armorother4_bulk=0):$===null&&o&&(a.armorother4_row_id=0,a.armorother4_worn=0,a.armorother4="",a.armorother4_ac=0,a.armorother4_base=0,a.armorother4_magic=0,a.armorother4_mod=0,a.armorother4_bulk=0)),($==="other5Attrs"||s===v[9]||e)&&($==="other5Attrs"||e?Y?x.length===20?(rowId=x.toLowerCase(),a.armorother5_row_id=rowId,a[`repeating_equipment_${rowId}_equipment_type`]=2,a[`repeating_equipment_${rowId}_equipment_armor_type`]=9,a[`repeating_equipment_${rowId}_equipment_armor_worn`]=+n.armorother5_worn||0,a[`repeating_equipment_${rowId}_equipment_item`]=n.armorother5.trim(),a[`repeating_equipment_${rowId}_equipment_armor_ac`]=+n.armorother5_ac||0,a[`repeating_equipment_${rowId}_equipment_armor_base`]=+n.armorother5_base||0,a[`repeating_equipment_${rowId}_equipment_armor_magic`]=+n.armorother5_magic||0,a[`repeating_equipment_${rowId}_equipment_armor_mod`]=+n.armorother5_mod||0,a[`repeating_equipment_${rowId}_equipment_carried_select`]=+n.armorother5_worn==1?1:0):(r=k(),a.armorother5_row_id=r.toLowerCase(),a[`repeating_equipment_${r}_equipment_type`]=2,a[`repeating_equipment_${r}_equipment_armor_type`]=9,a[`repeating_equipment_${r}_equipment_armor_worn`]=+n.armorother5_worn||0,a[`repeating_equipment_${r}_equipment_item`]=n.armorother5.trim(),a[`repeating_equipment_${r}_equipment_armor_ac`]=+n.armorother5_ac||0,a[`repeating_equipment_${r}_equipment_armor_base`]=+n.armorother5_base||0,a[`repeating_equipment_${r}_equipment_armor_magic`]=+n.armorother5_magic||0,a[`repeating_equipment_${r}_equipment_armor_mod`]=+n.armorother5_mod||0,a[`repeating_equipment_${r}_equipment_sync_armor_flag`]=1):x===v[9]&&(a.armorother5_row_id=0,a.armorother5_worn=0,a.armorother5="",a.armorother5_ac=0,a.armorother5_base=0,a.armorother5_magic=0,a.armorother5_mod=0,a.armorother5_bulk=0):$===null&&o&&(a.armorother5_row_id=0,a.armorother5_worn=0,a.armorother5="",a.armorother5_ac=0,a.armorother5_base=0,a.armorother5_magic=0,a.armorother5_mod=0,a.armorother5_bulk=0)),($==="other6Attrs"||s===v[10]||e)&&($==="other6Attrs"||e?Z?L.length===20?(rowId=L.toLowerCase(),a.armorother6_row_id=rowId,a[`repeating_equipment_${rowId}_equipment_type`]=2,a[`repeating_equipment_${rowId}_equipment_armor_type`]=10,a[`repeating_equipment_${rowId}_equipment_armor_worn`]=+n.armorother6_worn||0,a[`repeating_equipment_${rowId}_equipment_item`]=n.armorother6.trim(),a[`repeating_equipment_${rowId}_equipment_armor_ac`]=+n.armorother6_ac||0,a[`repeating_equipment_${rowId}_equipment_armor_base`]=+n.armorother6_base||0,a[`repeating_equipment_${rowId}_equipment_armor_magic`]=+n.armorother6_magic||0,a[`repeating_equipment_${rowId}_equipment_armor_mod`]=+n.armorother6_mod||0,a[`repeating_equipment_${rowId}_equipment_carried_select`]=+n.armorother6_worn==1?1:0):(r=k(),a.armorother6_row_id=r.toLowerCase(),a[`repeating_equipment_${r}_equipment_type`]=2,a[`repeating_equipment_${r}_equipment_armor_type`]=10,a[`repeating_equipment_${r}_equipment_armor_worn`]=+n.armorother6_worn||0,a[`repeating_equipment_${r}_equipment_item`]=n.armorother6.trim(),a[`repeating_equipment_${r}_equipment_armor_ac`]=+n.armorother6_ac||0,a[`repeating_equipment_${r}_equipment_armor_base`]=+n.armorother6_base||0,a[`repeating_equipment_${r}_equipment_armor_magic`]=+n.armorother6_magic||0,a[`repeating_equipment_${r}_equipment_armor_mod`]=+n.armorother6_mod||0,a[`repeating_equipment_${r}_equipment_sync_armor_flag`]=1):L===v[10]&&(a.armorother6_row_id=0,a.armorother6_worn=0,a.armorother6="",a.armorother6_ac=0,a.armorother6_base=0,a.armorother6_magic=0,a.armorother6_mod=0,a.armorother6_bulk=0):$===null&&o&&(a.armorother6_row_id=0,a.armorother6_worn=0,a.armorother6="",a.armorother6_ac=0,a.armorother6_base=0,a.armorother6_magic=0,a.armorother6_mod=0,a.armorother6_bulk=0)),await g(a,{silent:!0}),await Aa(s),ne()},dr=(i,t)=>{let o={};je(null,null,0,1),o.sheet_version=i,q("VERSION UPDATE: migrateArmorDetails completed"),setAttrs(o,{silent:!0},()=>{versionator(i,t)})},br=(i,t)=>{getSectionIDs("repeating_equipment",o=>{let e={},n=o.flatMap(a=>[`repeating_equipment_${a}_equipment_type`,`repeating_equipment_${a}_equipment_current`,`repeating_equipment_${a}_equipment_current_max`,`repeating_equipment_${a}_equipment_carried_select`,`repeating_equipment_${a}_equipment_carried`,`repeating_equipment_${a}_equipment_quantity`,`repeating_equipment_${a}_equipment_quantity_max`,`repeating_equipment_${a}_equipment_weight`,`repeating_equipment_${a}_equipment_cost`,`repeating_equipment_${a}_equipment_armor_type`,`repeating_equipment_${a}_equipment_armor_worn`,`repeating_equipment_${a}_equipment_armor_ac`,`repeating_equipment_${a}_equipment_armor_base`,`repeating_equipment_${a}_equipment_armor_magic`,`repeating_equipment_${a}_equipment_armor_mod`,`repeating_equipment_${a}_equipment_armor_bulk`,`repeating_equipment_${a}_equipment_macro_text`]);getAttrs(n,a=>{_.each(o,r=>{e[`repeating_equipment_${r}_equipment_type`]=+a[`repeating_equipment_${r}_equipment_type`]||0,e[`repeating_equipment_${r}_equipment_current`]=+a[`repeating_equipment_${r}_equipment_current`]||0,e[`repeating_equipment_${r}_equipment_current_max`]=+a[`repeating_equipment_${r}_equipment_current_max`]||0,e[`repeating_equipment_${r}_equipment_carried_select`]=+a[`repeating_equipment_${r}_equipment_carried`]||0,e[`repeating_equipment_${r}_equipment_carried`]=+a[`repeating_equipment_${r}_equipment_carried`]||0,e[`repeating_equipment_${r}_equipment_quantity`]=+a[`repeating_equipment_${r}_equipment_quantity`]||0,e[`repeating_equipment_${r}_equipment_quantity_max`]=+a[`repeating_equipment_${r}_equipment_quantity_max`]||0,e[`repeating_equipment_${r}_equipment_weight`]=+a[`repeating_equipment_${r}_equipment_weight`]||0,e[`repeating_equipment_${r}_equipment_cost`]=+a[`repeating_equipment_${r}_equipment_cost`]||0,e[`repeating_equipment_${r}_equipment_armor_type`]=+a[`repeating_equipment_${r}_equipment_armor_type`]||0,e[`repeating_equipment_${r}_equipment_armor_worn`]=+a[`repeating_equipment_${r}_equipment_armor_worn`]||0,e[`repeating_equipment_${r}_equipment_armor_ac`]=+a[`repeating_equipment_${r}_equipment_armor_ac`]||0,e[`repeating_equipment_${r}_equipment_armor_base`]=+a[`repeating_equipment_${r}_equipment_armor_base`]||0,e[`repeating_equipment_${r}_equipment_armor_magic`]=+a[`repeating_equipment_${r}_equipment_armor_magic`]||0,e[`repeating_equipment_${r}_equipment_armor_mod`]=+a[`repeating_equipment_${r}_equipment_armor_mod`]||0,e[`repeating_equipment_${r}_equipment_armor_bulk`]=+a[`repeating_equipment_${r}_equipment_armor_bulk`]||0,e[`repeating_equipment_${r}_equipment_macro_text`]=a[`repeating_equipment_${r}_equipment_macro_text`]}),e.sheet_version=i,q("VERSION UPDATE: setEquipmentUpdate completed"),setAttrs(e,{silent:!0},()=>{versionator(i,t)})})})},qr=(i,t)=>{getSectionIDs("repeating_weapon",o=>{let e={},n=o.flatMap(a=>[`repeating_weapon_${a}_weapon_attack_type`,`repeating_weapon_${a}_weapon_dual`,`repeating_weapon_${a}_weapon_whisper_to_hit`,`repeating_weapon_${a}_weapon_whisper_to_hit_select`,`repeating_weapon_${a}_weapon_dual_pen`,`repeating_weapon_${a}_weapon_backstab_var`,`repeating_weapon_${a}_weapon_tohitbonus`,`repeating_weapon_${a}_weapon_magicbonus`,`repeating_weapon_${a}_weapon_prof`,`repeating_weapon_${a}_weapon_backstab`,`repeating_weapon_${a}_weapon_backstab_bonus`,`repeating_weapon_${a}_weapon_backstab_mult`,`repeating_weapon_${a}_weapon_attackdmgbonus`,`repeating_weapon_${a}_weapon_num_attacks`,`repeating_weapon_${a}_weapon_quantity`,`repeating_weapon_${a}_weapon_ammo`,`repeating_weapon_${a}_weapon_ammo_max`,`repeating_weapon_${a}_weapon_weight`,`repeating_weapon_${a}_weapon_cost`,`repeating_weapon_${a}_weapon_range_short`,`repeating_weapon_${a}_weapon_range_medium`,`repeating_weapon_${a}_weapon_range_long`,`repeating_weapon_${a}_weapon_length`,`repeating_weapon_${a}_weapon_space`,`repeating_weapon_${a}_weapon_speed`,`repeating_weapon_${a}_weapon_misc`,`repeating_weapon_${a}_weapon_thac_adj0`,`repeating_weapon_${a}_weapon_thac_adj1`,`repeating_weapon_${a}_weapon_thac_adj2`,`repeating_weapon_${a}_weapon_thac_adj3`,`repeating_weapon_${a}_weapon_thac_adj4`,`repeating_weapon_${a}_weapon_thac_adj5`,`repeating_weapon_${a}_weapon_thac_adj6`,`repeating_weapon_${a}_weapon_thac_adj7`,`repeating_weapon_${a}_weapon_thac_adj8`,`repeating_weapon_${a}_weapon_thac_adj9`,`repeating_weapon_${a}_weapon_thac_adj10`,`repeating_weapon_${a}_weapon_macro_text`,`repeating_weapon_${a}_weapon_damagesmallmedium_chat_menu`,`repeating_weapon_${a}_weapon_damagelarge_chat_menu`,`repeating_weapon_${a}_weapon_damagesmallmedium_npc_chat_menu`,`repeating_weapon_${a}_weapon_damagelarge_npc_chat_menu`,`repeating_weapon_${a}_weapon_critdamagesmallmedium_chat_menu`,`repeating_weapon_${a}_weapon_critdamagelarge_chat_menu`,`repeating_weapon_${a}_weapon_critdamagesmallmedium_npc_chat_menu`,`repeating_weapon_${a}_weapon_critdamagelarge_npc_chat_menu`,`repeating_weapon_${a}_weapon_damage_chat_menu_npc`]);getAttrs(n,a=>{_.each(o,r=>{e[`repeating_weapon_${r}_weapon_attack_type`]=+a[`repeating_weapon_${r}_weapon_attack_type`]||0,e[`repeating_weapon_${r}_weapon_dual`]=a[`repeating_weapon_${r}_weapon_dual`],e[`repeating_weapon_${r}_weapon_whisper_to_hit`]=a[`repeating_weapon_${r}_weapon_whisper_to_hit`],e[`repeating_weapon_${r}_weapon_whisper_to_hit_select`]=+a[`repeating_weapon_${r}_weapon_whisper_to_hit_select`]||0,e[`repeating_weapon_${r}_weapon_dual_pen`]=+a[`repeating_weapon_${r}_weapon_dual_pen`]||0,e[`repeating_weapon_${r}_weapon_backstab_var`]=+a[`repeating_weapon_${r}_weapon_backstab_var`]||0,e[`repeating_weapon_${r}_weapon_tohitbonus`]=+a[`repeating_weapon_${r}_weapon_tohitbonus`]||0,e[`repeating_weapon_${r}_weapon_magicbonus`]=+a[`repeating_weapon_${r}_weapon_magicbonus`]||0,e[`repeating_weapon_${r}_weapon_prof`]=+a[`repeating_weapon_${r}_weapon_prof`]||0,e[`repeating_weapon_${r}_weapon_backstab`]=+a[`repeating_weapon_${r}_weapon_backstab`]||0,e[`repeating_weapon_${r}_weapon_backstab_bonus`]=+a[`repeating_weapon_${r}_weapon_backstab_bonus`]||0,e[`repeating_weapon_${r}_weapon_backstab_mult`]=+a[`repeating_weapon_${r}_weapon_backstab_mult`]||0,e[`repeating_weapon_${r}_weapon_attackdmgbonus`]=+a[`repeating_weapon_${r}_weapon_attackdmgbonus`]||0,e[`repeating_weapon_${r}_weapon_num_attacks`]=+a[`repeating_weapon_${r}_weapon_num_attacks`]||0,e[`repeating_weapon_${r}_weapon_quantity`]=+a[`repeating_weapon_${r}_weapon_quantity`]||0,e[`repeating_weapon_${r}_weapon_ammo`]=+a[`repeating_weapon_${r}_weapon_ammo`]||0,e[`repeating_weapon_${r}_weapon_ammo_max`]=+a[`repeating_weapon_${r}_weapon_ammo_max`]||0,e[`repeating_weapon_${r}_weapon_weight`]=+a[`repeating_weapon_${r}_weapon_weight`]||0,e[`repeating_weapon_${r}_weapon_cost`]=+a[`repeating_weapon_${r}_weapon_cost`]||0,e[`repeating_weapon_${r}_weapon_range_short`]=+a[`repeating_weapon_${r}_weapon_range_short`]||0,e[`repeating_weapon_${r}_weapon_range_medium`]=+a[`repeating_weapon_${r}_weapon_range_medium`]||0,e[`repeating_weapon_${r}_weapon_range_long`]=+a[`repeating_weapon_${r}_weapon_range_long`]||0,e[`repeating_weapon_${r}_weapon_length`]=a[`repeating_weapon_${r}_weapon_length`],e[`repeating_weapon_${r}_weapon_space`]=a[`repeating_weapon_${r}_weapon_space`],e[`repeating_weapon_${r}_weapon_speed`]=a[`repeating_weapon_${r}_weapon_speed`],e[`repeating_weapon_${r}_weapon_misc`]=a[`repeating_weapon_${r}_weapon_misc`],e[`repeating_weapon_${r}_weapon_thac_adj0`]=+a[`repeating_weapon_${r}_weapon_thac_adj0`]||0,e[`repeating_weapon_${r}_weapon_thac_adj1`]=+a[`repeating_weapon_${r}_weapon_thac_adj1`]||0,e[`repeating_weapon_${r}_weapon_thac_adj2`]=+a[`repeating_weapon_${r}_weapon_thac_adj2`]||0,e[`repeating_weapon_${r}_weapon_thac_adj3`]=+a[`repeating_weapon_${r}_weapon_thac_adj3`]||0,e[`repeating_weapon_${r}_weapon_thac_adj4`]=+a[`repeating_weapon_${r}_weapon_thac_adj4`]||0,e[`repeating_weapon_${r}_weapon_thac_adj5`]=+a[`repeating_weapon_${r}_weapon_thac_adj5`]||0,e[`repeating_weapon_${r}_weapon_thac_adj6`]=+a[`repeating_weapon_${r}_weapon_thac_adj6`]||0,e[`repeating_weapon_${r}_weapon_thac_adj7`]=+a[`repeating_weapon_${r}_weapon_thac_adj7`]||0,e[`repeating_weapon_${r}_weapon_thac_adj8`]=+a[`repeating_weapon_${r}_weapon_thac_adj8`]||0,e[`repeating_weapon_${r}_weapon_thac_adj9`]=+a[`repeating_weapon_${r}_weapon_thac_adj9`]||0,e[`repeating_weapon_${r}_weapon_thac_adj10`]=+a[`repeating_weapon_${r}_weapon_thac_adj10`]||0,e[`repeating_weapon_${r}_weapon_macro_text`]=a[`repeating_weapon_${r}_weapon_macro_text`],e[`repeating_weapon_${r}_weapon_damagesmallmedium_chat_menu`]=a[`repeating_weapon_${r}_weapon_damagesmallmedium_chat_menu`],e[`repeating_weapon_${r}_weapon_damagelarge_chat_menu`]=a[`repeating_weapon_${r}_weapon_damagelarge_chat_menu`],e[`repeating_weapon_${r}_weapon_damagesmallmedium_npc_chat_menu`]=a[`repeating_weapon_${r}_weapon_damagesmallmedium_npc_chat_menu`],e[`repeating_weapon_${r}_weapon_damagelarge_npc_chat_menu`]=a[`repeating_weapon_${r}_weapon_damagelarge_npc_chat_menu`],e[`repeating_weapon_${r}_weapon_critdamagesmallmedium_chat_menu`]=a[`repeating_weapon_${r}_weapon_critdamagesmallmedium_chat_menu`],e[`repeating_weapon_${r}_weapon_critdamagelarge_chat_menu`]=a[`repeating_weapon_${r}_weapon_critdamagelarge_chat_menu`],e[`repeating_weapon_${r}_weapon_critdamagesmallmedium_npc_chat_menu`]=a[`repeating_weapon_${r}_weapon_critdamagesmallmedium_npc_chat_menu`],e[`repeating_weapon_${r}_weapon_critdamagelarge_npc_chat_menu`]=a[`repeating_weapon_${r}_weapon_critdamagelarge_npc_chat_menu`],e[`repeating_weapon_${r}_weapon_damage_chat_menu_npc`]=a[`repeating_weapon_${r}_weapon_damage_chat_menu_npc`]}),e.sheet_version=i,q("VERSION UPDATE: setWeaponsUpdate completed"),setAttrs(e,{silent:!0},()=>{versionator(i,t)})})})},yr=(i,t)=>{getSectionIDs("nonweaponproficiencies",o=>{let e={},n=o.flatMap(a=>[`repeating_nonweaponproficiencies_${a}_nwp_attribute`,`repeating_nonweaponproficiencies_${a}_nwp_slots`,`repeating_nonweaponproficiencies_${a}_nwp_modifier`,`repeating_nonweaponproficiencies_${a}_nwp_macro_text`]);getAttrs(n,a=>{_.each(o,r=>{e[`repeating_nonweaponproficiencies_${r}_nwp_attribute`]=a[`repeating_nonweaponproficiencies_${r}_nwp_attribute`],e[`repeating_nonweaponproficiencies_${r}_nwp_slots`]=+a[`repeating_nonweaponproficiencies_${r}_nwp_slots`]||0,e[`repeating_nonweaponproficiencies_${r}_nwp_modifier`]=+a[`repeating_nonweaponproficiencies_${r}_nwp_modifier`]||0,e[`repeating_nonweaponproficiencies_${r}_nwp_macro_text`]=a[`repeating_nonweaponproficiencies_${r}_nwp_macro_text`]}),e.sheet_version=i,q("VERSION UPDATE: setNWPUpdate completed"),setAttrs(e,{silent:!0},()=>{versionator(i,t)})})})},$r=()=>{getSectionIDs("repeating_weapon",i=>{let t={},o=i.flatMap(e=>[`repeating_weapon_${e}_weapon_quantity`,`repeating_weapon_${e}_weapon_weight`,`repeating_weapon_${e}_weapon_cost`]);getAttrs(o,e=>{_.each(i,n=>{t[`repeating_weapon_${n}_weapon_quantity`]=+e[`repeating_weapon_${n}_weapon_quantity`]||0,t[`repeating_weapon_${n}_weapon_weight`]=0,t[`repeating_weapon_${n}_weapon_cost`]=0}),setAttrs(t)})})},fr=()=>{getSectionIDs("repeating_weapon",i=>{getSectionIDs("repeating_equipment",t=>{let o={},e=[],n=[],a=[...e,...n];_.each(i,r=>{a.push(`repeating_weapon_${r}_weapon_name`),a.push(`repeating_weapon_${r}_weapon_quantity`),a.push(`repeating_weapon_${r}_weapon_weight`),a.push(`repeating_weapon_${r}_weapon_cost`)}),_.each(t,r=>{a.push(`repeating_equipment_${r}_equipment_item`),a.push(`repeating_equipment_${r}_equipment_quantity`),a.push(`repeating_equipment_${r}_equipment_weight`),a.push(`repeating_equipment_${r}_equipment_cost`)}),getAttrs(a,r=>{let s=[],c=[],m=[],h=[],l="";_.each(i,p=>{let w=r[`repeating_weapon_${p}_weapon_name`],y=r[`repeating_weapon_${p}_weapon_quantity`],C=r[`repeating_weapon_${p}_weapon_weight`],D=r[`repeating_weapon_${p}_weapon_cost`];if(_.each(t,x=>{let L=x;h.push(L);let v=r[`repeating_equipment_${x}_equipment_item`];s.push(v);let j=r[`repeating_equipment_${x}_equipment_weight`];c.push(j);let _e=r[`repeating_equipment_${x}_equipment_cost`];m.push(_e)}),C!==0||D!==0){let x=s.indexOf(w);x===-1?(l=k(),o[`repeating_equipment_${l}_equipment_type`]=1,o[`repeating_equipment_${l}_equipment_item`]=w,o[`repeating_equipment_${l}_equipment_quantity`]=y,o[`repeating_equipment_${l}_equipment_quantity_max`]=y,o[`repeating_equipment_${l}_equipment_weight`]=C,o[`repeating_equipment_${l}_equipment_cost`]=D):c[x]==="0"&&m[x]==="0"?(l=h[x],o[`repeating_equipment_${l}_equipment_type`]=1,o[`repeating_equipment_${l}_equipment_quantity`]=y,o[`repeating_equipment_${l}_equipment_quantity_max`]=y,o[`repeating_equipment_${l}_equipment_weight`]=C,o[`repeating_equipment_${l}_equipment_cost`]=D):c[x]!=="0"&&m[x]==="0"?(l=h[x],o[`repeating_equipment_${l}_equipment_type`]=1,o[`repeating_equipment_${l}_equipment_cost`]=D):c[x]==="0"&&m[x]!=="0"?(l=h[x],o[`repeating_equipment_${l}_equipment_type`]=1,o[`repeating_equipment_${l}_equipment_weight`]=C):c[x]!=="0"&&m[x]}}),setAttrs(o,{silent:!0},$r)})})})},vr=(i,t)=>{let o={};fr(),o.sheet_version=i,q("VERSION UPDATE: migrateWeaponWtCost completed"),setAttrs(o,{silent:!0},()=>{versionator(i,t)})},kr=(i,t)=>{getSectionIDs("repeating_equipment",o=>{let e={},n=o.map(a=>[`repeating_equipment_${a}_equipment_type`]);getAttrs(n,a=>{_.each(o,r=>{(+a[`repeating_equipment_${r}_equipment_type`]||0)>=0||(e[`repeating_equipment_${r}_equipment_type`]=0)}),e.sheet_version=i,q("VERSION UPDATE: setEquipmentType completed"),setAttrs(e,{silent:!0},()=>{versionator(i,t)})})})},Ar=(i,t)=>{let o={};xa(),o.sheet_version=i,q("VERSION UPDATE: migrateSetSpellsCasterClass completed"),setAttrs(o,{silent:!0},()=>{versionator(i,t)})},xr=(i,t)=>{let o={};ne(0),o.sheet_version=i,q("VERSION UPDATE: recalcAC completed"),setAttrs(o,{silent:!0},()=>{versionator(i,t)})},Mr=(i,t)=>{let o={};o.init_macro_text="",o.sheet_version=i,q("VERSION UPDATE: recalcAC completed"),setAttrs(o,{silent:!0},()=>{versionator(i,t)})},Sr=(i,t)=>{getSectionIDs("repeating_weapon",o=>{let e=o.flatMap(n=>[`repeating_weapon_${n}_weapon_critdamagesmallmedium`,`repeating_weapon_${n}_weapon_critdamagelarge`]);getAttrs([...e],n=>{let a={},r="(@{weapon_damagesmallmedium})*2",s="(@{weapon_damagelarge})*2";_.each(o,c=>{let m=n[`repeating_weapon_${c}_weapon_critdamagesmallmedium`]||r,h=n[`repeating_weapon_${c}_weapon_critdamagelarge`]||s;a[`repeating_weapon_${c}_weapon_critdamagesmallmedium`]=m.replace(/@{weapon_damagesmallmedium}*2/g,"(@{weapon_damagesmallmedium})*2"),a[`repeating_weapon_${c}_weapon_critdamagelarge`]=h.replace(/@{weapon_damagelarge}*2/g,"(@{weapon_damagelarge})*2")}),a.sheet_version=i,q("VERSION UPDATE: updateCriticalDamageMacro completed"),setAttrs(a,{silent:!0},()=>{versionator(i,t)})})})},Ir=async()=>{let i=await u(["hitdice","armorclass","strength","intelligence","wisdom","dexterity","constitution","charisma","old_character"]),t={};if((+i.old_character||0)===1)return;let e=+i.hitdice||0,n=+i.armorclass||0,a=+i.strength||0,r=+i.intelligence||0,s=+i.wisdom||0,c=+i.dexterity||0,m=+i.constitution||0,h=+i.charisma||0,l=a+r+s+c+m+h;e===0&&n===10&&l===60?(t.strength=a===10?8:a,t.intelligence=r===10?8:r,t.wisdom=s===10?8:s,t.dexterity=c===10?8:c,t.constitution=m===10?8:m,t.charisma=h===10?8:h,t.old_character=1,ya()):t.old_character=1,await g(t,{silent:!0})},Tr=async(i,t)=>{let o=await f("equipment"),e=o.map(s=>`repeating_equipment_${s}_equipment_armor_type`),n=await u([...$e,...e]),a={};if(o.length===0){a.sheet_version=i,q("VERSION UPDATE: updateSyncArmorFlag completed (No rows to check)"),await g(a,{silent:!0}),versionator(i,t);return}let r=o.map(async s=>{let c=+n[`repeating_equipment_${s}_equipment_armor_type`]||0,{isMatch:m}=await ve(s),h=`repeating_equipment_${s}_equipment_sync_armor_flag`;c!==99&&m?a[h]=1:a[h]=0});await Promise.all(r),a.sheet_version=i,q(`VERSION UPDATE: updateSyncArmorFlag completed (${o.length} rows checked)`),await g(a,{silent:!0}),versionator(i,t)},Cr=async(i,t)=>{let o=await f("repeating_weapon"),e=o.flatMap(s=>[`repeating_weapon_${s}_weapon_whisper_to_hit`,`repeating_weapon_${s}_weapon_whisper_to_hit_select`]),n=await u(["toggle_to_hit_table",...e]),a=await Promise.all(o.map(s=>Ve(n,s))),r=Object.assign({},...a);r.sheet_version=i,q("VERSION UPDATE: recalcToHitWhisper completed"),await g(r,{silent:!0}),await versionator(i,t)},Nr=async(i,t)=>{let o=await f("repeating_weapon"),e=o.flatMap(s=>[`repeating_weapon_${s}_weapon_tohitacadj_flag`,`repeating_weapon_${s}_weapon_tohitacadj`]),n=await u([...e]),a=await Promise.all(o.map(s=>Ma(n,s))),r=Object.assign({},...a);r.sheet_version=i,q("VERSION UPDATE: recalcToHitACadj completed"),await g(r,{silent:!0}),await versionator(i,t)};versionator=async(i,t)=>{i<.1?Kt(.1,t):i<1.2?Xt(1.2,t):i<1.5?Qt(1.5,t):i<1.52?Yt(1.52,t):i<1.53?Zt(1.53,t):i<1.54?Jt(1.54,t):i<1.55?er(1.55,t):i<1.56?ar(1.56,t):i<1.57?tr(1.57,t):i<1.591?rr(1.591,t):i<1.592?nr(1.592,t):i<1.593?_r(1.593,t):i<1.594?or(1.594,t):i<1.595?Ne(1.595,t):i<1.596?wa(1.596,t):i<1.597?cr(1.597,t):i<1.598?pr(1.598,t):i<1.61?lr(1.61,t):i<1.62?hr(1.62,t):i<1.634?Ne(1.634,t):i<1.635?ir(1.635,t):i<1.636?sr(1.636,t):i<1.637?Ne(1.637,t):i<1.638?gr(1.638,t):i<1.639?ur(1.639,t):i<1.64?dr(1.641,t):i<1.642?mr(1.643,t):i<1.644?br(1.644,t):i<1.645?qr(1.645,t):i<1.646?vr(1.646,t):i<1.648?kr(1.648,t):i<1.65?Ar(1.65,t):i<1.652?wa(1.652,t):i<1.654?xr(1.654,t):i<1.656?Mr(1.656,t):i<1.658?Sr(1.658,t):i<1.659?yr(1.66,t):i<1.681?await Tr(1.69,t):i<1.691?await Cr(1.691,t):i<1.692?await Nr(1.692,t):i<t?(output.sheet_version=t,await g(output,{silent:!0})):i===t&&await Ir()};on("sheet:opened",async()=>{let t=await u(["sheet_version","old_character"]),o={},e=E(t.sheet_version);(+t.old_character||0)==0&&e===0&&(e=1.692,o.sheet_version=1.692),await g(o,{silent:!0}),q(`Current sheet data version:${e}, Sheet code version:${1.692}`),versionator(e,1.692)});on("change:abilities_info_show change:toggle_exceptional change:intelligence change:wisdom change:dexterity change:constitution change:charisma change:comeliness",async i=>{let t=await u(["intelligence","wisdom","dexterity","constitution","charisma","comeliness","toggle_exceptional"]),o={};(+t.toggle_exceptional||0)!==1&&(o.exceptional_intelligence_flag=1,o.exceptional_wisdom_flag=1,o.exceptional_dexterity_flag=1,o.exceptional_constitution_flag=1,o.exceptional_charisma_flag=1,o.exceptional_comeliness_flag=1,await g(o,{silent:!0}))});on("change:abilities_info_show change:toggle_exceptional change:strength",i=>{let t={};t.exceptional_strength_flag=1,setAttrs(t,{silent:!0})});on("change:is_npc",async i=>{let t=await u(["is_npc","toggle_npc"]),o={},e=+t.is_npc||0,n=+t.toggle_npc||0;n=e===0?0:1,o.toggle_npc=n,await g(o,{silent:!0})});var Dr=async()=>{let i=await f("equipment"),t={},o=i.flatMap(r=>[`repeating_equipment_${r}_equipment_quantity`,`repeating_equipment_${r}_equipment_cost`]),e=await u(o),n=[];_.each(i,r=>{let s=+e[`repeating_equipment_${r}_equipment_quantity`]||0,c=+e[`repeating_equipment_${r}_equipment_cost`]||0;c=s>0?c*s:0,n.push(c)});let a=n.reduce((r,s)=>r+s,0);t.total_equipment_cost=a.toFixed(2),t.total_cost=a.toFixed(2),await g(t,{silent:!0})};on("change:repeating_equipment:equipment_quantity change:repeating_equipment:equipment_cost remove:repeating_equipment",i=>{Dr()});var Or=async()=>{let i=await u(["pp","gp","ep","sp","cp","toggle_lbs"]),t={},e=+i.toggle_lbs||0?10:1,a=((E(i.pp)+E(i.gp)+E(i.ep)+E(i.sp)+E(i.cp))/e).toFixed(2);t.total_coin_weight=a,await g(t,{silent:!0})},$a=async()=>{let i=await f("equipment"),t={},o=i.flatMap(w=>[`repeating_equipment_${w}_equipment_type`,`repeating_equipment_${w}_equipment_weight`,`repeating_equipment_${w}_equipment_quantity`,`repeating_equipment_${w}_equipment_carried`,`repeating_equipment_${w}_equipment_carried_select`]);await Or();let e=await u(["total_coin_weight",...o]),n=[],a=[],r=[],s=+e.total_coin_weight||0;_.each(i,w=>{let y=+e[`repeating_equipment_${w}_equipment_type`]||0,C=0,D=+e[`repeating_equipment_${w}_equipment_carried_select`]||0;t[`repeating_equipment_${w}_equipment_carried`]=D===1?1:0,C=D===1?1:0;let x=+e[`repeating_equipment_${w}_equipment_quantity`]||0,L=+e[`repeating_equipment_${w}_equipment_weight`]||0,v=0,j=0;L=L*x*C,y===1&&(v=L),y===2&&(j=L),n.push(v),a.push(j),r.push(L)});let c=n.reduce((w,y)=>w+y,0),m=a.reduce((w,y)=>w+y,0),h=r.reduce((w,y)=>w+y,0),l=h-m-c,p=Math.round(E(s)+E(h));t.total_weapon_weight=c.toFixed(2),t.total_armor_weight=m.toFixed(2),t.total_equipment_weight=h.toFixed(2),t.total_equipment_weight_adjusted=l.toFixed(2),t.total_weight=p,await g(t,{silent:!0}),Er()},Er=async()=>{let i=await u(["encumbrancebonus","toggle_lbs"]),t={},o=+i.toggle_lbs||0,e=o?.1:1,n=350*e,a=+i.encumbrancebonus||0,r=E(a*e),c=n+(o?r:a),m=c+n,h=m+n,l=h;t.encumbrancebonus_lbs=r,t.normal_load=n,t.normal_load_adjusted=c,t.heavy_load=m,t.very_heavy_load=h,t.max_load=l+1,await g(t,{silent:!0}),fa()},fa=async i=>{let t=await u(["normal_load_adjusted","heavy_load","very_heavy_load","total_weight","autocalc_movement_flag","current_bulk","current_encumbrance_move","current_encumbrance"]),o={},e=+t.autocalc_movement_flag||0,n=+t.normal_load_adjusted||0,a=+t.heavy_load||0,r=+t.very_heavy_load||0,s=+t.total_weight||0,c=+t.current_bulk||0,m=+t.current_encumbrance||0;i?(q("Encumbrance Set Manually: Adjusting Movement"),m===0?(o.current_encumbrance_label="Unencumbered",o.current_encumbrance=m,o.current_encumbrance_move=e===1?Math.max(m,c):+t.current_encumbrance_move||0):m===1?(o.current_encumbrance_label="Heavy",o.current_encumbrance=m,o.current_encumbrance_move=e===1?Math.max(m,c):+t.current_encumbrance_move||0):m===2?(o.current_encumbrance_label="Very Heavy",o.current_encumbrance=m,o.current_encumbrance_move=e===1?Math.max(m,c):+t.current_encumbrance_move||0):(o.current_encumbrance_label="Encumbered",o.current_encumbrance=m,o.current_encumbrance_move=e===1?Math.max(m,c):+t.current_encumbrance_move||0)):s<=n?(o.current_encumbrance_label="Unencumbered",m=0,o.current_encumbrance=m,o.current_encumbrance_move=e===1?Math.max(m,c):+t.current_encumbrance_move||0):s>n&&s<=a?(o.current_encumbrance_label="Heavy",m=1,o.current_encumbrance=m,o.current_encumbrance_move=e===1?Math.max(m,c):+t.current_encumbrance_move||0):s>a&&s<=r?(o.current_encumbrance_label="Very Heavy",m=2,o.current_encumbrance=m,o.current_encumbrance_move=e===1?Math.max(m,c):+t.current_encumbrance_move||0):(o.current_encumbrance_label="Encumbered",m=3,o.current_encumbrance=m,o.current_encumbrance_move=e===1?Math.max(m,c):+t.current_encumbrance_move||0),await g(o,{silent:!0}),await Ue()};on("sheet:opened change:repeating_equipment:equipment_weight change:repeating_equipment:equipment_quantity change:repeating_equipment:equipment_carried change:repeating_equipment:equipment_carried_select change:repeating_equipment:equipment_armor_worn remove:repeating_equipment change:pp change:gp change:ep change:sp change:cp change:encumbrancebonus change:normal_load change:toggle_lbs",i=>{$a()});var Ue=async()=>{let i=await u(["current_encumbrance_move","movement"]),t={},o=+i.movement.toString().replace(/[^0-9]/g,""),e=+i.current_encumbrance_move||0,n=0;e===0?n=o:e===1?n=b(o-3):e===2?n=b(o-6):n=b(o-9),t.movement_normal=n,t.movement_known=n*5,t.movement_run=n*10,await g(t,{silent:!0})};on("change:current_encumbrance_move",async i=>{await Ue()});on("sheet:opened change:movement change:current_encumbrance change:current_encumbrance_move change:autocalc_movement_flag",async i=>{if(i.sourceType==="player"&&i.sourceAttribute!=="movement")return;let t=await u(["movement"]),o={},e=0,n=+t.movement.toString().replace(/[^0-9]/g,"")||0;o.movement_heavy=Math.max(n-3,0),o.movement_load=Math.max(n-6,0),o.movement_max=Math.max(n-9,0),await g(o,{silent:!0}),await Ue(),await ne(e)});on("change:current_encumbrance",async i=>{q(`\u0394 detected: ${i.sourceAttribute}`),i.sourceType==="player"?(q("Encumbrance Set Manually: executing setCurrentEncumbranceFlag"),await fa(1)):q("Encumbrance Set by sheetworker")});var Lr=async()=>{let i=await u(["unarmored_bulk","armortype_bulk","armortype2_bulk","armorshield_bulk","unarmored_worn","armortype_worn","armortype2_worn","armorshield_worn","armorshield_carried"]),t={},o=+i.unarmored_worn||0,e=+i.armortype_worn||0,n=+i.armortype2_worn||0,a=+i.armorshield_worn||0,r=+i.armorshield_carried||0,s=Math.max(a,r),c=(+i.unarmored_bulk||0)*o,m=(+i.armortype_bulk||0)*e,h=(+i.armortype2_bulk||0)*n,l=(+i.armorshield_bulk||0)*s;switch(Math.max(c,m,h,l)){case 0:t.current_bulk_label="Not Bulky",t.current_bulk=0;break;case 1:t.current_bulk_label="Not Bulky/Light",t.current_bulk=0;break;case 2:t.current_bulk_label="Fairly/Moderate",t.current_bulk=1;break;case 3:t.current_bulk_label="Bulky/Heavy",t.current_bulk=2;break;default:console.log("WARNING: failure in bulk calculation.");break}await g(t,{silent:!0}),$a()};on("change:unarmored_bulk change:armortype_bulk change:armortype2_bulk change:armorshield_bulk change:armorhelmet_bulk change:unarmored_worn change:armortype_worn change:armortype2_worn change:armorshield_worn change:armorhelmet_worn change:armorshield_carried remove:repeating_equipment",i=>{Lr()});on("change:repeating_equipment:equipment_carried_select change:repeating_equipment:equipment_type change:repeating_equipment:equipment_carried_select change:repeating_equipment:equipment_magical",async i=>{let t=i.sourceAttribute.split("_")[2],o=`${i.sourceAttribute}`,n=/equipment_type/.test(o),a=[`repeating_equipment_${t}_equipment_type`,`repeating_equipment_${t}_equipment_carried_select`],r=await u(["equipment_tabs_type","equipment_tabs_carry",...a]);await g(s,{silent:!0});let s={},c=+r.equipment_tabs_carry||0,m=+r.equipment_tabs_type||0,h=+r[`repeating_equipment_${t}_equipment_type`]||0,l=+r[`repeating_equipment_${t}_equipment_carried_select`]||0;s[`repeating_equipment_${t}_equipment_carried`]=l===1?1:0,s.equipment_tabs_type=m!==-1&&n?h:m,s.equipment_tabs_carry=c===-1||c===l?-1:l,await g(s)});on("change:equipment_tabs_type change:equipment_tabs_carry",async i=>{let t=await f("equipment"),o={},e=t.flatMap(s=>[`repeating_equipment_${s}_equipment_type`,`repeating_equipment_${s}_equipment_carried_select`,`repeating_equipment_${s}_equipment_magical`]),n=await u(["equipment_tabs_type","equipment_tabs_carry","equipment_magical",...e]),a=+n.equipment_tabs_type||0,r=+n.equipment_tabs_carry||0;_.each(t,s=>{let c=+n[`repeating_equipment_${s}_equipment_magical`]||0,m=+n[`repeating_equipment_${s}_equipment_type`]||0,h=+n[`repeating_equipment_${s}_equipment_carried_select`]||0;if(a===-1||a===m||a===3&&c)return o[`repeating_equipment_${s}_equipment_show_carry`]=r===-1||r===h?1:0,o[`repeating_equipment_${s}_equipment_show_type`]=1;o[`repeating_equipment_${s}_equipment_show_carry`]=r===-1||r===h?1:0,o[`repeating_equipment_${s}_equipment_show_type`]=0}),await g(o)});var Hr=async()=>{let i=await f("equipment"),t={},o=i.flatMap(a=>[`repeating_equipment_${a}_equipment_armor_type`]),[e,n]=await Promise.all([u(o),ka()]);console.log(n),_.each(i,a=>{let r=+e[`repeating_equipment_${a}_equipment_armor_type`]||0;if(r===99)return;let s=n.map((c,m)=>c===a?`${Math.floor(m)+1}`:null).filter(c=>c!==null);s.length>1&&(rowType=r+1,s.join(",").split(",").filter(l=>l!==String(rowType)).forEach(l=>{switch(l){case"1":t.unarmored="",t.unarmored_worn=0,t.unarmored_row_id=0;break;case"2":t.armortype="",t.armortype_worn=0,t.armortype1_row_id=0;break;case"3":t.armortype2="",t.armortype2_worn=0,t.armortype2_row_id=0;break;case"4":t.armorshield="",t.armorshield_worn=0,t.armorshield_row_id=0;break;case"5":t.armorhelmet="",t.armorhelmet_worn=0,t.armorhelmet_row_id=0;break;case"6":t.armorother="",t.armorother_worn=0,t.armorother1_row_id=0;break;case"7":t.armorother2="",t.armorother2_worn=0,t.armorother2_row_id=0;break;case"8":t.armorother3="",t.armorother3_worn=0,t.armorother3_row_id=0;break;case"9":t.armorother4="",t.armorother4_worn=0,t.armorother4_row_id=0;break;case"10":t.armorother5="",t.armorother5_worn=0,t.armorother5_row_id=0;break;case"11":t.armorother6="",t.armorother6_worn=0,t.armorother6_row_id=0;break;default:console.log("WARNING: NOTHING TO DELETE/RESET.");break}}))}),await g(t)},Rr=`${fe.map(i=>`change:${i}`).join(" ")}`;on(Rr,async i=>{if(i.sourceType==="sheetworker")return;let t=i.sourceAttribute,o=i.previousValue,e=i.newValue,n=0,a=await u(fe),r={},s="";o===void 0&&(t==="unarmored"&&(s=k(),r.unarmored_row_id=s.toLowerCase(),r.unarmored_worn=1,r[`repeating_equipment_${s}_equipment_type`]=2,r[`repeating_equipment_${s}_equipment_armor_type`]=0,r[`repeating_equipment_${s}_equipment_armor_worn`]=1,r[`repeating_equipment_${s}_equipment_item`]=a.unarmored.trim(),r[`repeating_equipment_${s}_equipment_armor_ac`]=+a.unarmored_ac||0,r[`repeating_equipment_${s}_equipment_armor_base`]=+a.unarmored_base||0,r[`repeating_equipment_${s}_equipment_carried_select`]=1,r[`repeating_equipment_${s}_equipment_sync_armor_flag`]=1),t==="armortype"&&(s=k(),r.armortype1_row_id=s.toLowerCase(),r.armortype_worn=1,r[`repeating_equipment_${s}_equipment_type`]=2,r[`repeating_equipment_${s}_equipment_armor_type`]=1,r[`repeating_equipment_${s}_equipment_armor_worn`]=1,r[`repeating_equipment_${s}_equipment_item`]=a.armortype.trim(),r[`repeating_equipment_${s}_equipment_armor_ac`]=+a.armortype_ac||0,r[`repeating_equipment_${s}_equipment_armor_base`]=+a.armortype_base||0,r[`repeating_equipment_${s}_equipment_armor_magic`]=+a.armortype_magic||0,r[`repeating_equipment_${s}_equipment_armor_bulk`]=+a.armortype_bulk||0,r[`repeating_equipment_${s}_equipment_carried_select`]=+a.armortype_carried||0,r[`repeating_equipment_${s}_equipment_sync_armor_flag`]=1,r[`repeating_equipment_${s}_equipment_weight`]=+a.armor_weight||0,r[`repeating_equipment_${s}_equipment_cost`]=+a.armor_cost||0),t==="armortype2"&&(s=k(),r.armortype2_row_id=s.toLowerCase(),r.armortype2_worn=1,r[`repeating_equipment_${s}_equipment_type`]=2,r[`repeating_equipment_${s}_equipment_armor_type`]=2,r[`repeating_equipment_${s}_equipment_armor_worn`]=1,r[`repeating_equipment_${s}_equipment_item`]=a.armortype2.trim(),r[`repeating_equipment_${s}_equipment_armor_ac`]=+a.armortype2_ac||0,r[`repeating_equipment_${s}_equipment_armor_base`]=+a.armortype2_base||0,r[`repeating_equipment_${s}_equipment_armor_magic`]=+a.armortype2_magic||0,r[`repeating_equipment_${s}_equipment_armor_bulk`]=+a.armortype2_bulk||0,r[`repeating_equipment_${s}_equipment_carried_select`]=+a.armortype2_carried||0,r[`repeating_equipment_${s}_equipment_sync_armor_flag`]=1,r[`repeating_equipment_${s}_equipment_weight`]=+a.armortype2_weight||0,r[`repeating_equipment_${s}_equipment_cost`]=+a.armortype2_cost||0),t==="armorshield"&&(s=k(),r.armorshield_row_id=s.toLowerCase(),r.armorshield_worn=1,r[`repeating_equipment_${s}_equipment_type`]=2,r[`repeating_equipment_${s}_equipment_armor_type`]=3,r[`repeating_equipment_${s}_equipment_armor_worn`]=1,r[`repeating_equipment_${s}_equipment_item`]=a.armorshield.trim(),r[`repeating_equipment_${s}_equipment_armor_ac`]=+a.armorshield_ac||0,r[`repeating_equipment_${s}_equipment_armor_base`]=+a.armorshield_base||0,r[`repeating_equipment_${s}_equipment_armor_magic`]=+a.armorshield_magic||0,r[`repeating_equipment_${s}_equipment_armor_mod`]=+a.armorshield_mod||0,r[`repeating_equipment_${s}_equipment_armor_bulk`]=+a.armorshield_bulk||0,r[`repeating_equipment_${s}_equipment_carried_select`]=+a.armorshield_carried||0,r[`repeating_equipment_${s}_equipment_sync_armor_flag`]=1,r[`repeating_equipment_${s}_equipment_weight`]=+a.armorshield_weight||0,r[`repeating_equipment_${s}_equipment_cost`]=+a.armorshield_cost||0),t==="armorhelmet"&&(s=k(),r.armorhelmet_row_id=s.toLowerCase(),r.armorhelmet_worn=1,r[`repeating_equipment_${s}_equipment_type`]=2,r[`repeating_equipment_${s}_equipment_armor_type`]=4,r[`repeating_equipment_${s}_equipment_armor_worn`]=1,r[`repeating_equipment_${s}_equipment_item`]=a.armorhelmet.trim(),r[`repeating_equipment_${s}_equipment_armor_ac`]=+a.armorhelmet_ac||0,r[`repeating_equipment_${s}_equipment_armor_magic`]=+a.armorhelmet_magic||0,r[`repeating_equipment_${s}_equipment_carried_select`]=+a.armorhelmet_carried||0,r[`repeating_equipment_${s}_equipment_sync_armor_flag`]=1,r[`repeating_equipment_${s}_equipment_weight`]=+a.armorhelmet_weight||0,r[`repeating_equipment_${s}_equipment_cost`]=+a.armorhelmet_cost||0),t==="armorother"&&(s=k(),r.armorother1_row_id=s.toLowerCase(),r.armorother1_worn=1,r[`repeating_equipment_${s}_equipment_type`]=2,r[`repeating_equipment_${s}_equipment_armor_type`]=5,r[`repeating_equipment_${s}_equipment_armor_worn`]=1,r[`repeating_equipment_${s}_equipment_item`]=a.armorother.trim(),r[`repeating_equipment_${s}_equipment_armor_ac`]=+a.armorother_ac||0,r[`repeating_equipment_${s}_equipment_armor_base`]=+a.armorother_base||0,r[`repeating_equipment_${s}_equipment_armor_magic`]=+a.armorother_magic||0,r[`repeating_equipment_${s}_equipment_armor_mod`]=+a.armorother_mod||0,r[`repeating_equipment_${s}_equipment_sync_armor_flag`]=1),t==="armorother2"&&(s=k(),r.armorother2_row_id=s.toLowerCase(),r.armorother2_worn=1,r[`repeating_equipment_${s}_equipment_type`]=2,r[`repeating_equipment_${s}_equipment_armor_type`]=6,r[`repeating_equipment_${s}_equipment_armor_worn`]=1,r[`repeating_equipment_${s}_equipment_item`]=a.armorother2.trim(),r[`repeating_equipment_${s}_equipment_armor_ac`]=+a.armorother2_ac||0,r[`repeating_equipment_${s}_equipment_armor_base`]=+a.armorother2_base||0,r[`repeating_equipment_${s}_equipment_armor_magic`]=+a.armorother2_magic||0,r[`repeating_equipment_${s}_equipment_armor_mod`]=+a.armorother2_mod||0,r[`repeating_equipment_${s}_equipment_sync_armor_flag`]=1),t==="armorother3"&&(s=k(),r.armorother3_row_id=s.toLowerCase(),r.armorother3_worn=1,r[`repeating_equipment_${s}_equipment_type`]=2,r[`repeating_equipment_${s}_equipment_armor_type`]=7,r[`repeating_equipment_${s}_equipment_armor_worn`]=1,r[`repeating_equipment_${s}_equipment_item`]=a.armorother3.trim(),r[`repeating_equipment_${s}_equipment_armor_ac`]=+a.armorother3_ac||0,r[`repeating_equipment_${s}_equipment_armor_base`]=+a.armorother3_base||0,r[`repeating_equipment_${s}_equipment_armor_magic`]=+a.armorother3_magic||0,r[`repeating_equipment_${s}_equipment_armor_mod`]=+a.armorother3_mod||0,r[`repeating_equipment_${s}_equipment_sync_armor_flag`]=1),t==="armorother4"&&(s=k(),r.armorother4_row_id=s.toLowerCase(),r.armorother4_worn=1,r[`repeating_equipment_${s}_equipment_type`]=2,r[`repeating_equipment_${s}_equipment_armor_type`]=8,r[`repeating_equipment_${s}_equipment_armor_worn`]=1,r[`repeating_equipment_${s}_equipment_item`]=a.armorother4.trim(),r[`repeating_equipment_${s}_equipment_armor_ac`]=+a.armorother4_ac||0,r[`repeating_equipment_${s}_equipment_armor_base`]=+a.armorother4_base||0,r[`repeating_equipment_${s}_equipment_armor_magic`]=+a.armorother4_magic||0,r[`repeating_equipment_${s}_equipment_armor_mod`]=+a.armorother4_mod||0,r[`repeating_equipment_${s}_equipment_sync_armor_flag`]=1),t==="armorother5"&&(s=k(),r.armorother5_row_id=s.toLowerCase(),r.armorother5_worn=1,r[`repeating_equipment_${s}_equipment_type`]=2,r[`repeating_equipment_${s}_equipment_armor_type`]=9,r[`repeating_equipment_${s}_equipment_armor_worn`]=1,r[`repeating_equipment_${s}_equipment_item`]=a.armorother5.trim(),r[`repeating_equipment_${s}_equipment_armor_ac`]=+a.armorother5_ac||0,r[`repeating_equipment_${s}_equipment_armor_base`]=+a.armorother5_base||0,r[`repeating_equipment_${s}_equipment_armor_magic`]=+a.armorother5_magic||0,r[`repeating_equipment_${s}_equipment_armor_mod`]=+a.armorother5_mod||0,r[`repeating_equipment_${s}_equipment_sync_armor_flag`]=1),t==="armorother6"&&(s=k(),r.armorother6_row_id=s.toLowerCase(),r.armorother6_worn=1,r[`repeating_equipment_${s}_equipment_type`]=2,r[`repeating_equipment_${s}_equipment_armor_type`]=10,r[`repeating_equipment_${s}_equipment_armor_worn`]=1,r[`repeating_equipment_${s}_equipment_item`]=a.armorother6.trim(),r[`repeating_equipment_${s}_equipment_armor_ac`]=+a.armorother6_ac||0,r[`repeating_equipment_${s}_equipment_armor_base`]=+a.armorother6_base||0,r[`repeating_equipment_${s}_equipment_armor_magic`]=+a.armorother6_magic||0,r[`repeating_equipment_${s}_equipment_armor_mod`]=+a.armorother6_mod||0,r[`repeating_equipment_${s}_equipment_sync_armor_flag`]=1)),await g(r,{silent:!0}),je(null,t,n)});var va=async i=>{let t=await u([`repeating_equipment_${i}_equipment_armor_type`,`repeating_equipment_${i}_equipment_item`,`repeating_equipment_${i}_equipment_armor_worn`,`repeating_equipment_${i}_equipment_armor_ac`,`repeating_equipment_${i}_equipment_armor_base`,`repeating_equipment_${i}_equipment_armor_magic`,`repeating_equipment_${i}_equipment_armor_mod`,`repeating_equipment_${i}_equipment_armor_bulk`,`repeating_equipment_${i}_equipment_carried_select`,`repeating_equipment_${i}_equipment_carried`,`repeating_equipment_${i}_equipment_weight`,`repeating_equipment_${i}_equipment_cost`]),o={},e=0,n=+t[`repeating_equipment_${i}_equipment_armor_type`]||0,a=t[`repeating_equipment_${i}_equipment_item`],r=+t[`repeating_equipment_${i}_equipment_armor_worn`]||0,s=+t[`repeating_equipment_${i}_equipment_armor_ac`]||0,c=+t[`repeating_equipment_${i}_equipment_armor_base`]||0,m=+t[`repeating_equipment_${i}_equipment_armor_magic`]||0,h=+t[`repeating_equipment_${i}_equipment_armor_mod`]||0,l=+t[`repeating_equipment_${i}_equipment_armor_bulk`]||0,p=+t[`repeating_equipment_${i}_equipment_carried_select`]||0,w=+t[`repeating_equipment_${i}_equipment_weight`]||0,y=+t[`repeating_equipment_${i}_equipment_cost`]||0;r===1?(p=1,o[`repeating_equipment_${i}_equipment_carried_select`]=1):r===0&&(p===0||p===2)&&(o[`repeating_equipment_${i}_equipment_carried_select`]=p);let C=[`fillArmorDetails - id:${i} item:${a} type:${n} worn:${r} ac:${s} base:${c} magic:${m} mod:${h} bulk:${l} carried:${p} weight:${w} cost:${y} UPDATED:`];switch(n){case 99:break;case 0:o.unarmored_worn=r,o.unarmored=a,o.unarmored_ac=s,o.unarmored_base=c,o.unarmored_bulk=l,o.unarmored_carried=p,o.unarmored_row_id=i;break;case 1:o.armortype_worn=r,o.armortype=a,o.armortype_ac=s,o.armortype_base=c,o.armortype_magic=m,o.armortype_bulk=l,o.armortype_carried=p,o.armor_weight=w,o.armor_cost=y,o.armortype1_row_id=i;break;case 2:o.armortype2_worn=r,o.armortype2=a,o.armortype2_ac=s,o.armortype2_base=c,o.armortype2_magic=m,o.armortype2_bulk=l,o.armortype2_carried=p,o.armortype2_weight=w,o.armortype2_cost=y,o.armortype2_row_id=i;break;case 3:o.armorshield_worn=r,o.armorshield=a,o.armorshield_ac=s>=0?0:-Math.abs(s),o.armorshield_base=c>=0?0:-Math.abs(c),o.armorshield_magic=m,o.armorshield_mod=h,o.armorshield_bulk=l,o.armorshield_carried=p,o.armorshield_weight=w,o.armorshield_cost=y,o.armorshield_row_id=i;break;case 4:o.armorhelmet_worn=r,o.armorhelmet=a,o.armorhelmet_base=c,o.armorhelmet_magic=m,o.armorhelmet_carried=p,o.armorhelmet_weight=w,o.armorhelmet_cost=y,o.armorhelmet_row_id=i;break;case 5:o.armorother_worn=r,o.armorother=a,o.armorother_ac=s,o.armorother_base=c,o.armorother_magic=m,o.armorother_mod=h,o.armorother1_row_id=i;break;case 6:o.armorother2_worn=r,o.armorother2=a,o.armorother2_ac=s>=0?0:-Math.abs(s),o.armorother2_base=c>=0?0:-Math.abs(c),o.armorother2_magic=m,o.armorother2_mod=h,o.armorother2_row_id=i;break;case 7:o.armorother3_worn=r,o.armorother3=a,o.armorother3_ac=s>=0?0:-Math.abs(s),o.armorother3_base=c>=0?0:-Math.abs(c),o.armorother3_magic=m,o.armorother3_mod=h,o.armorother3_row_id=i;break;case 8:o.armorother4_worn=r,o.armorother4=a,o.armorother4_ac=s>=0?0:-Math.abs(s),o.armorother4_base=c>=0?0:-Math.abs(c),o.armorother4_magic=m,o.armorother4_mod=h,o.armorother4_row_id=i;break;case 9:o.armorother5_worn=r,o.armorother5=a,o.armorother5_ac=s>=0?0:-Math.abs(s),o.armorother5_base=c>=0?0:-Math.abs(c),o.armorother5_magic=m,o.armorother5_mod=h,o.armorother5_row_id=i;break;case 10:o.armorother6_worn=r,o.armorother6=a,o.armorother6_ac=s>=0?0:-Math.abs(s),o.armorother6_base=c>=0?0:-Math.abs(c),o.armorother6_magic=m,o.armorother6_mod=h,o.armorother6_row_id=i;break;default:console.log("WARNING: Armor row is out of range.");break}await g(o,{silent:!0}),ne(e)},Pr=async i=>{let t=await u([`repeating_equipment_${i}_equipment_item`,`repeating_equipment_${i}_equipment_weapon_type`,`repeating_equipment_${i}_equipment_weapon_speed`,`repeating_equipment_${i}_equipment_weapon_length`,`repeating_equipment_${i}_equipment_weapon_space`,`repeating_equipment_${i}_equipment_weapon_misc`,`repeating_equipment_${i}_equipment_weapon_damagesmallmedium`,`repeating_equipment_${i}_equipment_weapon_damagelarge`,`repeating_equipment_${i}_equipment_weapon_attackdmgtype`,`repeating_equipment_${i}_equipment_weapon_rateoffire`,`repeating_equipment_${i}_equipment_weapon_range`,`repeating_equipment_${i}_equipment_quantity`,`repeating_equipment_${i}_equipment_description`]),o={},e=k();o[`repeating_weapon_${e}_weapon_name`]=t[`repeating_equipment_${i}_equipment_item`],o[`repeating_weapon_${e}_weapon_type`]=+t[`repeating_equipment_${i}_equipment_weapon_type`]||0,o[`repeating_weapon_${e}_weapon_speed`]=t[`repeating_equipment_${i}_equipment_weapon_speed`],o[`repeating_weapon_${e}_weapon_length`]=t[`repeating_equipment_${i}_equipment_weapon_length`],o[`repeating_weapon_${e}_weapon_space`]=t[`repeating_equipment_${i}_equipment_weapon_space`],o[`repeating_weapon_${e}_weapon_misc`]=t[`repeating_equipment_${i}_equipment_weapon_misc`],o[`repeating_weapon_${e}_weapon_damagesmallmedium`]=t[`repeating_equipment_${i}_equipment_weapon_damagesmallmedium`],o[`repeating_weapon_${e}_weapon_damagelarge`]=t[`repeating_equipment_${i}_equipment_weapon_damagelarge`],o[`repeating_weapon_${e}_weapon_attackdmgtype`]=t[`repeating_equipment_${i}_equipment_weapon_attackdmgtype`],o[`repeating_weapon_${e}_weapon_rateoffire`]=t[`repeating_equipment_${i}_equipment_weapon_rateoffire`],o[`repeating_weapon_${e}_weapon_range`]=t[`repeating_equipment_${i}_equipment_weapon_range`],o[`repeating_weapon_${e}_weapon_quantity`]=+t[`repeating_equipment_${i}_equipment_quantity`]||0,o[`repeating_weapon_${e}_weapon_notes`]=t[`repeating_equipment_${i}_equipment_description`],await g(o,{silent:!0}),await Na(e),We(e)},ka=async()=>{let i=await u($e);return[unarmored0_ID=i.unarmored_row_id.toString(),armortype1_ID=i.armortype1_row_id.toString(),armortype2_ID=i.armortype2_row_id.toString(),armorshield_ID=i.armorshield_row_id.toString(),armorhelmet_ID=i.armorhelmet_row_id.toString(),armorother1_ID=i.armorother1_row_id.toString(),armorother2_ID=i.armorother2_row_id.toString(),armorother3_ID=i.armorother3_row_id.toString(),armorother4_ID=i.armorother4_row_id.toString(),armorother5_ID=i.armorother5_row_id.toString(),armorother6_ID=i.armorother6_row_id.toString()].map(o=>o?o.toString().toLowerCase():"0")},ve=async i=>{let t=await ka(),o="";return o=t.includes(i)?1:0,{isMatch:o,armorDetailsArray:t}},Aa=async i=>{let t={},{isMatch:o,armorDetailsArray:e}=await ve(i);t.armordetails_array=[`${e}`],await g(t,{silent:!0})},Br=`${$e.map(i=>`change:${i}`).join(" ")}`;on(Br,async i=>{let t=i.sourceAttribute,e=(await u([`${t}`,"armordetails_array"]))[`${i.sourceAttribute}`];Aa(e)});on("change:repeating_equipment:equipment_item change:repeating_equipment:equipment_armor_worn change:repeating_equipment:equipment_armor_ac change:repeating_equipment:equipment_armor_base change:repeating_equipment:equipment_armor_magic change:repeating_equipment:equipment_armor_mod change:repeating_equipment:equipment_armor_bulk change:repeating_equipment:equipment_carried_select change:repeating_equipment:equipment_weight change:repeating_equipment:equipment_cost",async i=>{let t=i.sourceAttribute.split("_")[2].toLowerCase();if(i.sourceType==="sheetworker")return;let{isMatch:o}=await ve(t);o&&va(t)});on("clicked:repeating_equipment:addarmor change:repeating_equipment:equipment_armor_type",async i=>{let o=i.sourceAttribute.toLowerCase().split("_"),e=o[2],n=o.slice(3).join("_"),a=`repeating_equipment_${e}_equipment_armor_type`,r=`repeating_equipment_${e}_equipment_sync_armor_flag`,s=await u([a,r]),c={},m=+s[a]||0,h=+s[r]||0;(n==="addarmor"&&m!==99||n==="equipment_armor_type"&&h===1)&&(await va(e),await Hr(),h!==1&&(c[r]=1,await g(c,{silent:!0})))});on("clicked:repeating_equipment:addattack",i=>{let t=i.sourceAttribute.split("_")[2];Pr(t)});on("remove:repeating_equipment",async i=>{let t=i.sourceAttribute.split("_")[2].toLowerCase(),o=1,{isMatch:e}=await ve(t);e&&je(t,null,o)});on("clicked:addturnundead",i=>{let t={},o=k();t[`repeating_ability_${o}_ability_name`]="Turn Undead by Type",t[`repeating_ability_${o}_ability_short_description`]="[Turn Undead by Type](~selected|turn_undead_roll)",setAttrs(t,{silent:!0})});on("clicked:addturnundead2",i=>{let t={},o=k();t[`repeating_ability_${o}_ability_name`]="Turn Undead by HD",t[`repeating_ability_${o}_ability_short_description`]="[Turn Undead by HD](~selected|turn_undead2_roll)",setAttrs(t,{silent:!0})});on("change:spell_tabs change:toggle_show_memorized change:spell_caster_tabs change:toggle_caster2",async i=>{let t=await f("spells"),o={},e=t.flatMap(m=>[`repeating_spells_${m}_spell_memorized`,`repeating_spells_${m}_spell_show_all`,`repeating_spells_${m}_spell_level`,`repeating_spells_${m}_spell_caster_class`]),n=await u(["spell_tabs","toggle_show_memorized","spell_caster_tabs","toggle_caster2",...e]),a=+n.toggle_show_memorized||0,r=+n.spell_caster_tabs||0,s=+n.toggle_caster2||0,c=+n.spell_tabs||0;_.each(t,m=>{let h=+n[`repeating_spells_${m}_spell_memorized`]||0,l=+n[`repeating_spells_${m}_spell_caster_class`]||0,p=n[`repeating_spells_${m}_spell_level`];o[`repeating_spells_${m}_spell_show_memorized`]=a===1&&h>0?1:0,o[`repeating_spells_${m}_spell_show_all`]=a===1?0:1,c===-1||c===p?s===1?o[`repeating_spells_${m}_spell_show`]=1:s===0&&(r===-1||l===0?o[`repeating_spells_${m}_spell_show`]=1:r===0&&l===1?o[`repeating_spells_${m}_spell_show`]=1:r===1&&l===2?o[`repeating_spells_${m}_spell_show`]=1:o[`repeating_spells_${m}_spell_show`]=0):o[`repeating_spells_${m}_spell_show`]=0}),await g(o,{silent:!0})});on("change:repeating_spells:spell_level change:repeating_spells:spell_caster_class",async i=>{if(i.sourceType!=="player")return;let t=i.sourceAttribute.split("_")[2],o=await u([`repeating_spells_${t}_spell_level`,`repeating_spells_${t}_spell_caster_class`,"spell_caster_tabs","spell_tabs"]),e={},n=+o.spell_caster_tabs||0,a=+o[`repeating_spells_${t}_spell_caster_class`]||0,r=o[`repeating_spells_${t}_spell_level`],s=+o.spell_tabs||0;e.spell_tabs=s>=0&&s!==r?r:s,e.spell_caster_tabs=n!==-1&&a<=1?0:1,await g(e,{silent:!0})});var xa=async()=>{let i=await f("spells"),t={},o=i.flatMap(c=>[`repeating_spells_${c}_spell_caster_class`]),e=await u(["caster_class1_name","caster_class2_name","caster_class1_level","caster_class2_level",...o]),n=e.caster_class1_name,a=e.caster_class2_name,r=+e.caster_class1_level||0,s=+e.caster_class2_level||0;_.each(i,c=>{switch(+e[`repeating_spells_${c}_spell_caster_class`]||0){case 0:t[`repeating_spells_${c}_spell_caster_class_name`]="";break;case 1:t[`repeating_spells_${c}_spell_caster_class_name`]=n,t[`repeating_spells_${c}_spell_caster_class_level`]=r;break;case 2:t[`repeating_spells_${c}_spell_caster_class_name`]=a,t[`repeating_spells_${c}_spell_caster_class_level`]=s;break;default:console.log("WARNING: spell_caster_class value not recognized.");break}}),await g(t,{silent:!0})};on("change:caster_class1_name change:caster_class2_name change:caster_class1_level change:caster_class2_level",async i=>{await xa()});on("change:repeating_spells:spell_name change:repeating_spells:spell_caster_class",async i=>{if(i.sourceType!=="player")return;let t=i.sourceAttribute.split("_")[2],o=i.previousValue,e=i.sourceAttribute.split("_").slice(3).join("_"),n=o===void 0&&e==="spell_name"?1:0,a=await u([`repeating_spells_${t}_spell_caster_class`,"caster_class1_name","caster_class1_level","caster_class2_name","caster_class2_level","spell_caster_tabs","toggle_caster2"]),r={},s=a.caster_class1_name,c=a.caster_class2_name,m=+a.caster_class1_level||0,h=+a.caster_class2_level||0,l=+a.toggle_caster2||0,p=+a.spell_caster_tabs||0,w=+a[`repeating_spells_${t}_spell_caster_class`]||0;switch(l===0&&n===1&&p!==-1&&(w=p===0?1:2),w){case 0:r[`repeating_spells_${t}_spell_caster_class_name`]="";break;case 1:r[`repeating_spells_${t}_spell_caster_class_name`]=s,r[`repeating_spells_${t}_spell_caster_class_level`]=m;break;case 2:r[`repeating_spells_${t}_spell_caster_class_name`]=c,r[`repeating_spells_${t}_spell_caster_class_level`]=h;break;default:console.log("WARNING: spell_caster_class value not recognized.");break}await g(r,{silent:!0})});on("change:repeating_spells:spell_name",async i=>{if(i.sourceType!=="player")return;let t=i.sourceAttribute.split("_")[2],o=await u([`repeating_spells_${t}_spell_level`,"spell_tabs"]),e={},n=+o.spell_tabs||0,a=o[`repeating_spells_${t}_spell_level`];n===-1||a!="?"||(e[`repeating_spells_${t}_spell_level`]=n,await g(e,{silent:!0}))});var Ma=(i,t)=>{let o={},e=+i[`repeating_weapon_${t}_weapon_tohitacadj_flag`]||0;return o[`repeating_weapon_${t}_weapon_tohitacadj`]=e===1?"{{ToHitArmorType0=@{weapon_thac_adj0}}} {{ToHitArmorType1=@{weapon_thac_adj1}}} {{ToHitArmorType2=@{weapon_thac_adj2}}} {{ToHitArmorType3=@{weapon_thac_adj3}}} {{ToHitArmorType4=@{weapon_thac_adj4}}} {{ToHitArmorType5=@{weapon_thac_adj5}}} {{ToHitArmorType6=@{weapon_thac_adj6}}} {{ToHitArmorType7=@{weapon_thac_adj7}}} {{ToHitArmorType8=@{weapon_thac_adj8}}} {{ToHitArmorType9=@{weapon_thac_adj9}}} {{ToHitArmorType10=@{weapon_thac_adj10}}}":"{{ToHitArmorType0}} {{ToHitArmorType1}} {{ToHitArmorType2}} {{ToHitArmorType3}} {{ToHitArmorType4}} {{ToHitArmorType5}} {{ToHitArmorType6}} {{ToHitArmorType7}} {{ToHitArmorType8}} {{ToHitArmorType9}} {{ToHitArmorType10}}",o};on("change:repeating_weapon:weapon_tohitacadj_flag change:repeating_weapon:weapon_thac_adj0 change:repeating_weapon:weapon_thac_adj1 change:repeating_weapon:weapon_thac_adj2 change:repeating_weapon:weapon_thac_adj3 change:repeating_weapon:weapon_thac_adj4 change:repeating_weapon:weapon_thac_adj5 change:repeating_weapon:weapon_thac_adj6 change:repeating_weapon:weapon_thac_adj7 change:repeating_weapon:weapon_thac_adj8 change:repeating_weapon:weapon_thac_adj9 change:repeating_weapon:weapon_thac_adj10",async i=>{let t=i.sourceAttribute.split("_")[2],o=await u([`repeating_weapon_${t}_weapon_tohitacadj_flag`,`repeating_weapon_${t}_weapon_tohitacadj`]),e=Ma(o,t);await g(e,{silent:!0})});var Ve=(i,t)=>{let o={},e=+i.toggle_to_hit_table||0,n=`repeating_weapon_${t}_weapon_whisper_to_hit_select`,a=`repeating_weapon_${t}_weapon_whisper_to_hit`,r=+i[n]||0,s="";return r===2?s="&nbsp;":e===0?(s=`
  %NEWLINE%/w gm &{template:attacks-table} {{color=@{color_option}}} {{ToHitAC-10=[[ @{thac-10} ]]}} {{ToHitAC-9=[[ @{thac-9} ]]}} {{ToHitAC-8=[[ @{thac-8} ]]}} {{ToHitAC-7=[[ @{thac-7} ]]}} {{ToHitAC-6=[[ @{thac-6} ]]}} {{ToHitAC-5=[[ @{thac-5} ]]}} {{ToHitAC-4=[[ @{thac-4} ]]}} {{ToHitAC-3=[[ @{thac-3} ]]}} {{ToHitAC-2=[[ @{thac-2} ]]}} {{ToHitAC-1=[[ @{thac-1} ]]}} {{ToHitAC0=[[ @{thac0} ]]}} {{ToHitAC1=[[ @{thac1} ]]}} {{ToHitAC2=[[ @{thac2} ]]}} {{ToHitAC3=[[ @{thac3} ]]}} {{ToHitAC4=[[ @{thac4} ]]}} {{ToHitAC5=[[ @{thac5} ]]}} {{ToHitAC6=[[ @{thac6} ]]}} {{ToHitAC7=[[ @{thac7} ]]}} {{ToHitAC8=[[ @{thac8} ]]}} {{ToHitAC9=[[ @{thac9} ]]}} {{ToHitAC10=[[ @{thac10} ]] }}`,r=0):(s=`
  %NEWLINE%/w gm &{template:attacks-table} {{color=@{color_option}}} {{ToHitAC-10=[[ @{thac0-10} ]]}} {{ToHitAC-9=[[ @{thac0-9} ]]}} {{ToHitAC-8=[[ @{thac0-8} ]]}} {{ToHitAC-7=[[ @{thac0-7} ]]}} {{ToHitAC-6=[[ @{thac0-6} ]]}} {{ToHitAC-5=[[ @{thac0-5} ]]}} {{ToHitAC-4=[[ @{thac0-4} ]]}} {{ToHitAC-3=[[ @{thac0-3} ]]}} {{ToHitAC-2=[[ @{thac0-2} ]]}} {{ToHitAC-1=[[ @{thac0-1} ]]}} {{ToHitAC0=[[ @{thac00} ]]}} {{ToHitAC1=[[ @{thac01} ]]}} {{ToHitAC2=[[ @{thac02} ]]}} {{ToHitAC3=[[ @{thac03} ]]}} {{ToHitAC4=[[ @{thac04} ]]}} {{ToHitAC5=[[ @{thac05} ]]}} {{ToHitAC6=[[ @{thac06} ]]}} {{ToHitAC7=[[ @{thac07} ]]}} {{ToHitAC8=[[ @{thac08} ]]}} {{ToHitAC9=[[ @{thac09} ]]}} {{ToHitAC10=[[ @{thac010} ]] }}`,r=1),o[a]=s,o[n]=r,o};on("change:toggle_to_hit_table",async i=>{let t=await f("weapon"),o=t.flatMap(a=>[`repeating_weapon_${a}_weapon_whisper_to_hit_select`,`repeating_weapon_${a}_weapon_whisper_to_hit`]),e=await u(["toggle_to_hit_table",...o]),n={};t.forEach(a=>{let r=Ve(e,a);n={...n,...r}}),await g(n,{silent:!0})});on("change:repeating_weapon:weapon_whisper_to_hit_select",async i=>{let t=i.sourceAttribute.split("_")[2],o=await u(["toggle_to_hit_table",`repeating_weapon_${t}_weapon_whisper_to_hit_select`,`repeating_weapon_${t}_weapon_whisper_to_hit`]),e=Ve(o,t);await g(e,{silent:!0})});on("change:weapon_proficiency_initial change:weapon_proficiency_added_per_level change:weapon_proficiency_penalty",async i=>{let t=await f("weapon"),o={},e=t.flatMap(r=>[`repeating_weapon_${r}_weapon_prof_flag`]),n=await u(["weapon_proficiency_penalty",...e]),a=+n.weapon_proficiency_penalty||0;_.each(t,r=>{let s=+n[`repeating_weapon_${r}_weapon_prof_flag`]||0;o[`repeating_weapon_${r}_weapon_prof`]=a,o[`repeating_weapon_${r}_weapon_prof_pen`]=s===0?"0":a}),await g(o,{silent:!0})});on("change:repeating_weapon:weapon_prof_flag",async i=>{let t=i.sourceAttribute.split("_")[2],o={},e=await u(["weapon_proficiency_penalty",`repeating_weapon_${t}_weapon_prof_flag`]),n=+e.weapon_proficiency_penalty||0,a=+e[`repeating_weapon_${t}_weapon_prof_flag`]||0;o[`repeating_weapon_${t}_weapon_prof`]=n,o[`repeating_weapon_${t}_weapon_prof_pen`]=a===0?"0":n,await g(o,{silent:!0})});on("change:backstab change:backstab_bonus change:toggle_thief_skills",async i=>{let t=await f("weapon"),o={},e=t.flatMap(c=>[`repeating_weapon_${c}_weapon_backstab_flag`]),n=await u(["backstab","backstab_bonus","toggle_thief_skills",...e]),a=+n.toggle_thief_skills||0,r=+n.backstab||0,s=+n.backstab_bonus||0;_.each(t,c=>{let m=+n[`repeating_weapon_${c}_weapon_backstab_flag`]||0;a===0&&(o[`repeating_weapon_${c}_weapon_backstab_var`]=m===0?0:`+${s}`,o[`repeating_weapon_${c}_weapon_backstab_bonus`]=m===0?0:s,o[`repeating_weapon_${c}_weapon_backstab`]=m===0?1:`x${r}`,o[`repeating_weapon_${c}_weapon_backstab_mult`]=m===0?1:r),a===1&&(o[`repeating_weapon_${c}_weapon_backstab_var`]=0,o[`repeating_weapon_${c}_weapon_backstab_bonus`]=0,o[`repeating_weapon_${c}_weapon_backstab`]=1,o[`repeating_weapon_${c}_weapon_backstab_mult`]=1)}),await g(o,{silent:!0})});on("change:repeating_weapon:weapon_backstab_flag",async i=>{let t=i.sourceAttribute.split("_")[2],o={},e=await u(["backstab","backstab_bonus","toggle_thief_skills",`repeating_weapon_${t}_weapon_backstab_flag`]),n=+e.toggle_thief_skills||0,a=+e.backstab||0,r=+e.backstab_bonus||0,s=+e[`repeating_weapon_${t}_weapon_backstab_flag`]||0;n===0&&(o[`repeating_weapon_${t}_weapon_backstab_var`]=s===0?0:`+${r}`,o[`repeating_weapon_${t}_weapon_backstab_bonus`]=s===0?0:r,o[`repeating_weapon_${t}_weapon_backstab`]=s===0?1:`x${a}`,o[`repeating_weapon_${t}_weapon_backstab_mult`]=s===0?1:a),n===1&&(o[`repeating_weapon_${t}_weapon_backstab_var`]=0,o[`repeating_weapon_${t}_weapon_backstab_bonus`]=0,o[`repeating_weapon_${t}_weapon_backstab`]=1,o[`repeating_weapon_${t}_weapon_backstab_mult`]=1),await g(o,{silent:!0})});on("change:repeating_weapon:weapon_dual",async i=>{let t=i.sourceAttribute.split("_")[2],o={},e=await u(["dual_pen_primary","dual_pen_secondary",`repeating_weapon_${t}_weapon_dual`]),n=+e.dual_pen_primary||0,a=+e.dual_pen_secondary||0,r=e[`repeating_weapon_${t}_weapon_dual`],s=0;r==="Normal"?s=0:r==="Primary"?s=n:r==="Secondary"&&(s=a);let c=Math.min(0,s);o[`repeating_weapon_${t}_weapon_dual_pen`]=c,await g(o,{silent:!0})});var jr=async()=>{let i=await f("weapon"),t={},o=i.flatMap(r=>[`repeating_weapon_${r}_weapon_critdamage_flag`,`repeating_weapon_${r}_weapon_critdamage_mult`]),e=await u(["dual_pen_primary","dual_pen_secondary",...o]),n=+e.dual_pen_primary||0,a=+e.dual_pen_secondary||0;_.each(i,r=>{let s=e[`repeating_weapon_${r}_weapon_dual`],c=0;s==="Primary"?c=n:s==="Secondary"&&(c=a);let m=Math.min(0,c);t[`repeating_weapon_${r}_weapon_dual_pen`]=m}),await g(t)};on("change:dual_pen_primary change:dual_pen_secondary change:dexterity",async i=>{let t=await u(["dexterity"]),o={},e=+t.dexterity||0,n=0;e<6?n=Math.max(-3,e-6):e>=18?n=Math.min(5,Math.floor(e/3)-3):e>15&&(n=e-15);let a=Math.min(0,n-2),r=Math.min(0,n-4);o.dual_pen_primary=a,o.dual_pen_secondary=r,await g(o,{silent:!0}),jr()});var Ur=async i=>{let t=[`repeating_weapon_${i}_weapon_range`,`repeating_weapon_${i}_weapon_range_short`,`repeating_weapon_${i}_weapon_range_medium`,`repeating_weapon_${i}_weapon_range_long`,`repeating_weapon_${i}_weapon_attack_type`,`repeating_weapon_${i}_weapon_range_error`],o=await u(t),e={},n=+o[`repeating_weapon_${i}_weapon_attack_type`]||0;if(n===0||n===2)return;let a=o[`repeating_weapon_${i}_weapon_range`];a=a.replace(/'/g,""),a=a.replace(/"/g,"");let r=a.split("/").join(",").split(" ").join(",").split("-").join(",").split(","),s=Number(r[0]),c=Number(r[1]),m=Number(r[2]);r.length===1&&s>=0&&!c&&!m&&(c=s,m=s),Number.isNaN(s)?(e[`repeating_weapon_${i}_weapon_range_short`]=0,e[`repeating_weapon_${i}_weapon_range_error`]=a===""?1:0):e[`repeating_weapon_${i}_weapon_range_short`]=s,Number.isNaN(c)?(e[`repeating_weapon_${i}_weapon_range_medium`]=0,e[`repeating_weapon_${i}_weapon_range_error`]=a===""?1:0):e[`repeating_weapon_${i}_weapon_range_medium`]=c,Number.isNaN(m)?(e[`repeating_weapon_${i}_weapon_range_long`]=0,e[`repeating_weapon_${i}_weapon_range_error`]=a===""?1:0):e[`repeating_weapon_${i}_weapon_range_long`]=m,!Number.isNaN(s)&&!Number.isNaN(c)&&!Number.isNaN(m)&&(e[`repeating_weapon_${i}_weapon_range_error`]=1),await g(e,{silent:!0})};on("change:repeating_weapon:weapon_range change:repeating_weapon:weapon_attack_type",i=>{let t=i.sourceAttribute.split("_")[2];Ur(t)});on("change:repeating_weapon:weapon_attack_type",async i=>{let t=i.sourceAttribute.split("_")[2],o=await u([`repeating_weapon_${t}_weapon_attack_type`,`repeating_weapon_${t}_weapon_attack_type_flag`]),e={},n=+o[`repeating_weapon_${t}_weapon_attack_type`]||0,a=+o[`repeating_weapon_${t}_weapon_attack_type_flag`]||0;n!==a&&(e[`repeating_weapon_${t}_weapon_attack_type_flag`]=n),await g(e,{silent:!0})});var Sa=async()=>{let i=await u(["hitpoints","hitpoints_max","sync_hp_flag","hitpoints_1_class","hitpoints_2_class","hitpoints_3_class"]),t={},o=+i.sync_hp_flag||0,e=+i.hitpoints_max||0,n=Math.max(0,+i.hitpoints_1_class),a=Math.max(0,+i.hitpoints_2_class),r=Math.max(0,+i.hitpoints_3_class),s=n!==0?1:0,c=a!==0?1:0,m=r!==0?1:0,h=s+c+m,l=n+a+r,p=+h>1?E(l/h).toFixed(2):l,w=+(p%1).toFixed(2);t.hitpoints_class_total=l,t.hp_quotient=h,t.hitpoints_total=p,t.hitpoints_max=o?Math.round(p):e,t.hitpoints_remainder_total=w,await g(t,{silent:!0})};on("change:sync_hp_flag change:hitpoints change:hitpoints_max change:hitpoints_1_class change:hitpoints_2_class change:hitpoints_3_class",i=>{Sa()});var ne=async i=>{let t=await u([...fe,"armor_rating_flag","armorbonus","armorbonus_inverted","armorbonus_toggle","armorclass","armorclass_magic","armorclass_mod","autocalc_ac","current_encumbrance_move","sync_ac_flag"]);if((+t.autocalc_ac||0)+i===0)return;let e={},n=+t.armorclass||0,a=+t.sync_ac_flag||0,r=+t.armor_rating_flag||0,s=(+t.armorshield_mod||0)*-1,c=(+t.armorother_mod||0)*-1,m=(+t.armorother2_mod||0)*-1,h=(+t.armorother3_mod||0)*-1,l=(+t.armorother4_mod||0)*-1,p=(+t.armorother5_mod||0)*-1,w=(+t.armorother6_mod||0)*-1,y=(+t.armortype_magic||0)*-1,C=(+t.armortype2_magic||0)*-1,D=(+t.armorshield_magic||0)*-1,x=(+t.armorhelmet_magic||0)*-1,L=(+t.armorother_magic||0)*-1,v=(+t.armorother2_magic||0)*-1,j=(+t.armorother3_magic||0)*-1,_e=(+t.armorother4_magic||0)*-1,$=(+t.armorother5_magic||0)*-1,me=(+t.armorother6_magic||0)*-1,le=+t.unarmored_worn||0,oe=+t.armortype_worn||0,ie=+t.armortype2_worn||0,z=+t.armorshield_worn||0,ke=+t.armorhelmet_worn||0,K=+t.armorother_worn||0,X=+t.armorother2_worn||0,Q=+t.armorother3_worn||0,Y=+t.armorother4_worn||0,Z=+t.armorother5_worn||0,J=+t.armorother6_worn||0,U=+t.current_encumbrance_move||0,Ae=+t.armorbonus_toggle||0,H=+t.armorbonus||0,xe=0;U===3&&H<0?(Ae=0,H=0,xe=1):H<0?H=(+t.armorbonus||0)*Ae:H=+t.armorbonus||0,e.encumbrance_flag=xe;let he=+t.unarmored_base||0,Fe=+t.armortype_base||0,Ge=+t.armortype2_base||0,ze=+t.armorshield_base||0,Ke=+t.armorother_base||0,Xe=t.armorother2_base>=0?0:-Math.abs(t.armorother2_base),Qe=t.armorother3_base>=0?0:-Math.abs(t.armorother3_base),Ye=t.armorother4_base>=0?0:-Math.abs(t.armorother4_base),Ze=t.armorother5_base>=0?0:-Math.abs(t.armorother5_base),Je=t.armorother6_base>=0?0:-Math.abs(t.armorother6_base),ea=+t.unarmored_ac||0,aa=+t.armortype_ac||0,ta=+t.armortype2_ac||0,ra=+t.armorshield_ac||0,na=+t.armorother_ac||0,_a=t.armorother2_ac>=0?0:-Math.abs(t.armorother2_ac),oa=t.armorother3_ac>=0?0:-Math.abs(t.armorother3_ac),ia=t.armorother4_ac>=0?0:-Math.abs(t.armorother4_ac),sa=t.armorother5_ac>=0?0:-Math.abs(t.armorother5_ac),ca=t.armorother6_ac>=0?0:-Math.abs(t.armorother6_ac),nt=oe?Fe:10,_t=ie?Ge:10,ot=z?ze:0,it=K?Ke:10,st=X?Xe:0,ct=Q?Qe:0,pt=Y?Ye:0,mt=Z?Ze:0,lt=J?Je:0,ht=le?he:10,gt=oe?aa:10,ut=ie?ta:10,pa=z?ra:0,wt=K?na:10,dt=X?_a:0,bt=Q?oa:0,qt=Y?ia:0,yt=Z?sa:0,$t=J?ca:0,ft=le?ea:10,ge=z?s:0,ue=z?D:0,vt=b(Math.min(Fe,Ge,Ke,he)+ze+Xe+Qe+Ye+Ze+Je),kt=b(Math.min(aa,ta,na,ea)+(ra+_a+oa+ia+sa+ca)),ma=b(Math.min(nt,_t,it,ht)+(ot+st+ct+pt+mt+lt)),Me=b(Math.min(gt,ut,wt,ft)+(dt+bt+qt+yt+$t)),la=b(y+C+x+L+v+j+_e+$+me+D),se=b(oe*y+ie*C+ke*x+K*L+X*v+Q*j+Y*_e+Z*$+J*me),ha=b(c+m+h+l+p+w+s)||0,ce=b(K*c+X*m+Q*h+Y*l+Z*p+J*w),Se=b(ce+se),Ie=b(Me+ce+se),ga=1;H>0&&Ie>=10&&(ga=0);let Te=b(Ie+H*ga),ee=b(pa+ge+ue),Ce=b(Te+ee);H>0&&ee>=10&&(Ce=b(Te+H+ee));let At=(-1*(se+ue)<=0?"":"+")+-1*(se+ue),xt=(-1*la<=0?"":"+")+-1*la,Mt=(-1*(ce+ge)<=0?"":"+")+-1*(ce+ge),St=(-1*ha<=0?"":"+")+-1*ha,It=(-1*H<=0?"":"+")+-1*H,Tt=(-1*Se<=0?"":"+")+-1*Se,Ct=(-1*ee<=0?"":"+")+-1*ee;e.armorclass_rating_used=ma,e.armorclass_rating=r===1?"-":ma,e.armorclass_rating_best=vt,e.armorclass_base_used=Me+pa,e.armorclass_base=Me,e.armorclass_base_best=kt,e.armorclass_magic=se,e.armorclass_magic_with_shield=At,e.armorclass_magic_total=xt,e.armorclass_mod=ce,e.armorclass_mod_with_shield=Mt,e.armorclass_mod_total=St,e.armorclass_combined_mod_magic=Se,e.armorclass_combined_mod_magic_inverted=Tt,e.armorclass_rear=Ie,e.armorbonus_inverted=It,e.armorclass_shieldless=Te,e.armorclass_shield_magic=ue,e.armorclass_shield_mod=ge,e.armorclass_combined_shield_mod_magic=ee,e.armorclass_combined_shield_mod_magic_inverted=Ct,e.armorclass_total=Ce,e.armorclass=a?Ce:n,await g(e,{silent:!0})};on("change:armor_details_show change:armor_rating_flag change:sync_ac_flag change:autocalc_ac change:unarmored change:armortype change:armortype2 change:armorshield change:armorhelmet change:armorother change:armorother2 change:armorother3 change:armorother4 change:armorother5 change:armorother6 change:armorclass_mod change:armorclass_magic change:armorbonus change:armorbonus_toggle change:unarmored_worn change:armortype_worn change:armortype2_worn change:armorshield_worn change:armorhelmet_worn change:armorother_worn change:armorother2_worn change:armorother3_worn change:armorother4_worn change:armorother5_worn change:armorother6_worn change:armortype_base change:armortype2_base change:armorshield_base change:armorother_base change:armorother2_base change:armorother3_base change:armorother4_base change:armorother5_base change:armorother6_base change:unarmored_base change:armortype_ac change:armortype2_ac change:armorshield_ac change:armorhelmet_ac change:armorother_ac change:armorother2_ac change:armorother3_ac change:armorother4_ac change:armorother5_ac change:armorother6_ac change:unarmored_ac change:armorshield_mod change:armorother_mod change:armorother2_mod change:armorother3_mod change:armorother4_mod change:armorother5_mod change:armorother6_mod change:armortype_magic change:armortype2_magic change:armorshield_magic change:armorhelmet_magic change:armorother_magic change:armorother2_magic change:armorother3_magic change:armorother4_magic change:armorother5_magic change:armorother6_magic clicked:calcac",i=>{let o=i.triggerName==="clicked:calcac"?1:0;ne(o)});var We=async(i,t)=>{let o;t==null?o=+(await u(["toggle_auto_damage"])).toggle_auto_damage||0:o=t;let e={},n=`Damage vs S/M [[ (@{repeating_weapon_${i}_weapon_damagesmallmedium}) * @{repeating_weapon_${i}_weapon_backstab_mult}[MULT] + ( @{repeating_weapon_${i}_weapon_attackdmgbonus}[DMG_BON] ) + ( @{repeating_weapon_${i}_weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]`,a=` vs LG [[ (@{repeating_weapon_${i}_weapon_damagelarge}) * @{repeating_weapon_${i}_weapon_backstab_mult}[MULT] + ( @{repeating_weapon_${i}_weapon_attackdmgbonus}[DMG_BON] ) + ( @{repeating_weapon_${i}_weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]`,r=`Damage vs S/M [[ (@{repeating_weapon_${i}_weapon_damagesmallmedium}) * @{repeating_weapon_${i}_weapon_backstab_mult}[MULT] + ( @{repeating_weapon_${i}_weapon_attackdmgbonus}[DMG_BON] ) + ( @{repeating_weapon_${i}_weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]`,s=` vs LG [[ (@{repeating_weapon_${i}_weapon_damagelarge}) * @{repeating_weapon_${i}_weapon_backstab_mult}[MULT] + ( @{repeating_weapon_${i}_weapon_attackdmgbonus}[DMG_BON] ) + ( @{repeating_weapon_${i}_weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]`,c=`Damage vs S/M [[ (@{repeating_weapon_${i}_weapon_critdamagesmallmedium}) * @{repeating_weapon_${i}_weapon_backstab_mult}[MULT] + ( @{repeating_weapon_${i}_weapon_attackdmgbonus}[DMG_BON] ) + ( @{repeating_weapon_${i}_weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]`,m=` vs LG [[ (@{repeating_weapon_${i}_weapon_critdamagelarge}) * @{repeating_weapon_${i}_weapon_backstab_mult}[MULT] + ( @{repeating_weapon_${i}_weapon_attackdmgbonus}[DMG_BON] ) + ( @{repeating_weapon_${i}_weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]`,h=`Damage vs S/M [[ (@{repeating_weapon_${i}_weapon_critdamagesmallmedium}) * @{repeating_weapon_${i}_weapon_backstab_mult}[MULT] + ( @{repeating_weapon_${i}_weapon_attackdmgbonus}[DMG_BON] ) + ( @{repeating_weapon_${i}_weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]`,l=` vs LG [[ (@{repeating_weapon_${i}_weapon_critdamagelarge}) * @{repeating_weapon_${i}_weapon_backstab_mult}[MULT] + ( @{repeating_weapon_${i}_weapon_attackdmgbonus}[DMG_BON] ) + ( @{repeating_weapon_${i}_weapon_magicbonus}[MAG_BON] ) + ( ?{Damage Modifier?|0}[MISC_MOD] ) ]]`;return o===0?(e[`repeating_weapon_${i}_weapon_damagesmallmedium_chat_menu`]=`[Roll Damage](~@{character_id}|repeating_weapon_${i}_weapon_damagesmallmedium_roll)`,e[`repeating_weapon_${i}_weapon_damagelarge_chat_menu`]=`[Roll Damage vs LG](~@{character_id}|repeating_weapon_${i}_weapon_damagelarge_roll)`,e[`repeating_weapon_${i}_weapon_damagesmallmedium_npc_chat_menu`]=`[Damage](~@{character_id}|repeating_weapon_${i}_weapon_damagesmallmedium_npc_roll)`,e[`repeating_weapon_${i}_weapon_damagelarge_npc_chat_menu`]=`[Damage vs LG](~@{character_id}|repeating_weapon_${i}_weapon_damagelarge_npc_roll)`,e[`repeating_weapon_${i}_weapon_critdamagesmallmedium_chat_menu`]=`[Roll Damage](~@{character_id}|repeating_weapon_${i}_weapon_critdamagesmallmedium_roll)`,e[`repeating_weapon_${i}_weapon_critdamagelarge_chat_menu`]=`[Roll Damage vs LG](~@{character_id}|repeating_weapon_${i}_weapon_critdamagelarge_roll)`,e[`repeating_weapon_${i}_weapon_critdamagesmallmedium_npc_chat_menu`]=`[Damage](~@{character_id}|repeating_weapon_${i}_weapon_critdamagesmallmedium_npc_roll)`,e[`repeating_weapon_${i}_weapon_critdamagelarge_npc_chat_menu`]=`[Damage vs LG](~@{character_id}|repeating_weapon_${i}_weapon_critdamagelarge_npc_roll)`):(e[`repeating_weapon_${i}_weapon_damagesmallmedium_chat_menu`]=n,e[`repeating_weapon_${i}_weapon_damagelarge_chat_menu`]=a,e[`repeating_weapon_${i}_weapon_damagesmallmedium_npc_chat_menu`]=r,e[`repeating_weapon_${i}_weapon_damagelarge_npc_chat_menu`]=s,e[`repeating_weapon_${i}_weapon_critdamagesmallmedium_chat_menu`]=c,e[`repeating_weapon_${i}_weapon_critdamagelarge_chat_menu`]=m,e[`repeating_weapon_${i}_weapon_critdamagesmallmedium_npc_chat_menu`]=h,e[`repeating_weapon_${i}_weapon_critdamagelarge_npc_chat_menu`]=l),e};on("change:repeating_weapon:weapon_name change:repeating_weapon:weapon_damagesmallmedium change:repeating_weapon:weapon_damagelarge change:repeating_weapon:weapon_critdamagesmallmedium change:repeating_weapon:weapon_critdamagelarge change:repeating_weapon:weapon_attackdmgbonus change:repeating_weapon:weapon_critdamage_flag",async i=>{let t=i.sourceAttribute.split("_")[2],o=await We(t);await g(o,{silent:!0})});on("change:toggle_critdamage change:toggle_auto_damage",async i=>{let t=await f("weapon"),o=t.map(c=>`repeating_weapon_${c}_weapon_critdamage_flag`),e=await u(["toggle_auto_damage",...o]),n={},a=+e.toggle_auto_damage||0,r=t.map(async c=>{let m=`repeating_weapon_${c}_weapon_critdamage_flag`,h=+e[m]||0;return n[m]=1-h,await We(c,a)});(await Promise.all(r)).forEach(c=>{Object.assign(n,c)}),await g(n,{silent:!0})});var Ia=["weapon_use","weapon_attack_type","weapon_attack_type_flag","weapon_critdamage_flag","weapon_prof_pen","weapon_whisper_to_hit_select","weapon_dual_pen","weapon_backstab_var","weapon_tohitbonus","weapon_magicbonus","weapon_prof","weapon_backstab","weapon_backstab_bonus","weapon_backstab_mult","weapon_attackdmgbonus","weapon_num_attacks","weapon_quantity","weapon_ammo","weapon_ammo_max","weapon_weight","weapon_cost","weapon_range_short","weapon_range_medium","weapon_range_long","weapon_thac_adj0","weapon_thac_adj1","weapon_thac_adj2","weapon_thac_adj3","weapon_thac_adj4","weapon_thac_adj5","weapon_thac_adj6","weapon_thac_adj7","weapon_thac_adj8","weapon_thac_adj9","weapon_thac_adj10"],Vr=["weapon_range_error","weapon_dual","weapon_tohitacadj","weapon_whisper_to_hit","weapon_length","weapon_space","weapon_speed","weapon_misc","weapon_macro_text","weapon_damagesmallmedium_chat_menu","weapon_damagelarge_chat_menu","weapon_damagesmallmedium_npc_chat_menu","weapon_damagelarge_npc_chat_menu","weapon_critdamagesmallmedium_chat_menu","weapon_critdamagelarge_chat_menu","weapon_critdamagesmallmedium_npc_chat_menu","weapon_critdamagelarge_npc_chat_menu","weapon_damage_chat_menu_npc"],da=[...Ia,...Vr],Ta=["equipment_type","equipment_magical","equipment_show_type","equipment_current","equipment_current_max","equipment_carried_select","equipment_carried","equipment_quantity","equipment_quantity_max","equipment_weight","equipment_cost","equipment_armor_type","equipment_armor_worn","equipment_armor_ac","equipment_armor_base","equipment_armor_magic","equipment_armor_mod","equipment_armor_bulk","equipment_sync_armor_flag","equipment_weapon_type"],Wr=["equipment_macro_text","equipment_weapon_speed","equipment_weapon_misc","equipment_weapon_length","equipment_weapon_space","equipment_weapon_damagesmallmedium","equipment_weapon_damagelarge","equipment_weapon_attackdmgtype","equipment_weapon_rateoffire","equipment_weapon_range"],ba=[...Ta,...Wr],Ca=["nwp_slots","nwp_modifier"],Fr=["nwp_attribute","nwp_attribute_value","nwp_macro_text"],qa=[...Ca,...Fr],Na=async i=>{let t=da.map(n=>re("weapon",i,n)),o=await u(t),e=da.reduce((n,a)=>{let r=re("weapon",i,a);return rawValue=o[r],Ia.includes(a)?n[r]=+rawValue||0:n[r]=rawValue||"",n},{});await g(e,{silent:!0})},Gr=async i=>{let t=["equipment_tabs_type","equipment_tabs_carry"],o=ba.map(m=>re("equipment",i,m)),e=[...t,...o],n=await u(e),a=+n.equipment_tabs_type||0,r=`repeating_equipment_${i}_equipment_type`,s=+n[r]||0,c=ba.reduce((m,h)=>{let l=re("equipment",i,h),p=n[l];return Ta.includes(h)?h==="equipment_type"?m[l]=a!==-1?a:s:h==="equipment_magical"?m[l]=s===3||a===3?1:+p||0:m[l]=+p||0:m[l]=p||"",m},{});await g(c,{silent:!0})},zr=async i=>{let t=qa.map(n=>re("nonweaponproficiencies",i,n)),o=await u(t),e=qa.reduce((n,a)=>{let r=re("nonweaponproficiencies",i,a),s=o[r];return Ca.includes(a)?n[r]=+s||0:n[r]=s||"",n},{});await g(e,{silent:!0})};on("change:repeating_weapon:weapon_name change:repeating_equipment:equipment_item change:repeating_nonweaponproficiencies:nwp_name",async i=>{if(i.sourceType!=="player"||i.previousValue!==void 0)return;let t=i.sourceAttribute.split("_")[2];i.sourceAttribute.includes("equipment_item")&&await Gr(t),i.sourceAttribute.includes("weapon_name")&&await Na(t),i.sourceAttribute.includes("nwp_name")&&await zr(t)});on("sheet:opened",async i=>{let t={},o=await f("weapon"),e=await f("ability"),n=await f("nonweaponproficiencies"),a=await f("equipment"),r=await f("spells");if(o.length===0){let s=k();t[`repeating_weapon_${s}_weapon_value`]=1}if(e.length===0){let s=k();t[`repeating_ability_${s}_ability_value`]=1}if(n.length===0){let s=k();t[`repeating_nonweaponproficiencies_${s}_nwp_value`]=1}if(a.length===0){let s=k();t[`repeating_equipment_${s}_equipment_value`]=1}if(r.length===0){let s=k();t[`repeating_spells_${s}_spell_value`]=1}await g(t,{silent:!0})});on("clicked:resetallmacros clicked:resetequipmentmacros clicked:resetweaponsmacros clicked:resetabilitiesmacros clicked:resetnwpsmacros clicked:resetspellsmacros",async i=>{let o=i.triggerName.match(/clicked:(\w+)/),e=o?o[1]:null,n={};if(e==="resetallmacros"){n.surprise_macro_text="",n.surprise_others_macro_text="",n.init_macro_text="";let a=await f("equipment");_.each(a,h=>{n[`repeating_equipment_${h}_equipment_macro_text`]=""});let r=await f("weapon");_.each(r,h=>{n[`repeating_weapon_${h}_weapon_macro_text`]=""});let s=await f("ability");_.each(s,h=>{n[`repeating_ability_${h}_ability_macro_text`]=""});let c=await f("nonweaponproficiencies");_.each(c,h=>{n[`repeating_nonweaponproficiencies_${h}_nwp_macro_text`]=""});let m=await f("spells");_.each(m,h=>{n[`repeating_spells_${h}_spell_macro_text`]=""})}if(e==="resetequipmentmacros"){let a=await f("equipment");_.each(a,r=>{n[`repeating_equipment_${r}_equipment_macro_text`]=""})}if(e==="resetweaponsmacros"){let a=await f("weapon");_.each(a,r=>{n[`repeating_weapon_${r}_weapon_macro_text`]=""})}if(e==="resetabilitiesmacros"){let a=await f("ability");_.each(a,r=>{n[`repeating_ability_${r}_ability_macro_text`]=""})}if(e==="resetnwpsmacros"){let a=await f("nonweaponproficiencies");_.each(a,r=>{n[`repeating_nonweaponproficiencies_${r}_nwp_macro_text`]=""})}if(e==="resetspellsmacros"){let a=await f("spells");_.each(a,r=>{n[`repeating_spells_${r}_spell_macro_text`]=""})}g(n,{silent:!0})});var Da=async i=>{let t=await u(["pickpockets","pickpockets_base","pickpockets_racial_mod","pickpockets_ability_mod","pickpockets_magic"]),o={},e=+t.pickpockets_base||0,n=+t.pickpockets_racial_mod||0,a=+t.pickpockets_ability_mod||0,r=+t.pickpockets_magic||0,s=+t.pickpockets||0,c=Math.max(0,b(e+n+a+r));i===1&&s>=0&&c===0?o.pickpockets_base=s:o.pickpockets=c,g(o,{silent:!0})},Oa=async i=>{let t=await u(["openlocks","openlocks_base","openlocks_racial_mod","openlocks_ability_mod","openlocks_magic"]),o={},e=+t.openlocks_base||0,n=+t.openlocks_racial_mod||0,a=+t.openlocks_ability_mod||0,r=+t.openlocks_magic||0,s=+t.openlocks||0,c=Math.max(0,Math.min(100,b(e+n+a+r)));i===1&&s>=0&&c===0?o.openlocks_base=s:o.openlocks=c,g(o,{silent:!0})},Ea=async i=>{let t=await u(["findtraps","findtraps_base","findtraps_racial_mod","findtraps_ability_mod","findtraps_magic"]),o={},e=+t.findtraps_base||0,n=+t.findtraps_racial_mod||0,a=+t.findtraps_ability_mod||0,r=+t.findtraps_magic||0,s=+t.findtraps||0,c=Math.max(0,Math.min(100,b(e+n+a+r)));i===1&&s>=0&&c===0?o.findtraps_base=s:o.findtraps=c,g(o,{silent:!0})},La=async i=>{let t=await u(["movequietly","movequietly_base","movequietly_racial_mod","movequietly_ability_mod","movequietly_magic"]),o={},e=+t.movequietly_base||0,n=+t.movequietly_racial_mod||0,a=+t.movequietly_ability_mod||0,r=+t.movequietly_magic||0,s=+t.movequietly||0,c=Math.max(0,Math.min(100,b(e+n+a+r)));i===1&&s>=0&&c===0?o.movequietly_base=s:o.movequietly=c,g(o,{silent:!0})},Ha=async i=>{let t=await u(["hideinshadows","hideinshadows_base","hideinshadows_racial_mod","hideinshadows_ability_mod","hideinshadows_magic"]),o={},e=+t.hideinshadows_base||0,n=+t.hideinshadows_racial_mod||0,a=+t.hideinshadows_ability_mod||0,r=+t.hideinshadows_magic||0,s=+t.hideinshadows||0,c=Math.max(0,Math.min(100,b(e+n+a+r)));i===1&&s>=0&&c===0?o.hideinshadows_base=s:o.hideinshadows=c,g(o,{silent:!0})},Ra=async i=>{let t=await u(["hearnoise","hearnoise_base","hearnoise_racial_mod","hearnoise_ability_mod","hearnoise_magic"]),o={},e=+t.hearnoise_base||0,n=+t.hearnoise_racial_mod||0,a=+t.hearnoise_ability_mod||0,r=+t.hearnoise_magic||0,s=+t.hearnoise||0,c=Math.max(0,Math.min(100,b(e+n+a+r)));i===1&&s>=0&&c===0?o.hearnoise_base=s:o.hearnoise=c,g(o,{silent:!0})},Pa=async i=>{let t=await u(["climbwalls","climbwalls_base","climbwalls_racial_mod","climbwalls_ability_mod","climbwalls_magic"]),o={},e=+t.climbwalls_base||0;e=e>=99.1?e.toFixed(1):Math.floor(e);let n=+t.climbwalls_racial_mod||0,a=+t.climbwalls_ability_mod||0,r=+t.climbwalls_magic||0,s=+t.climbwalls||0,c=Math.max(0,Math.min(100,e+b(n+a+r))),m="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Climb Walls}} {{roll_low=[[ 1d100 ]]%}} {{roll_target=[[ @{climbwalls} ]]%}}",h="@{whisper_pc} &{template:general} {{color=@{color_option}}} {{name=@{character_name}}} {{subtag=Climb Walls}} {{roll_low=[[ 1d100 + [[1d10/10]] ]]%}} {{roll_target=[[ @{climbwalls} ]]%}}";i===1?s>=0&&c===0?o.climbwalls_base=s:o.climbwalls=c:(o.climbwalls=c,o.climbwalls_macro_text=c>=99.1?h:m),g(o,{silent:!0})},Ba=async i=>{let t=await u(["readlanguages","readlanguages_base","readlanguages_racial_mod","readlanguages_ability_mod","readlanguages_magic"]),o={},e=+t.readlanguages_base||0,n=+t.readlanguages_racial_mod||0,a=+t.readlanguages_ability_mod||0,r=+t.readlanguages_magic||0,s=+t.readlanguages||0,c=Math.max(0,Math.min(100,b(e+n+a+r)));i===1&&s>=0&&c===0?o.readlanguages_base=s:o.readlanguages=c,g(o,{silent:!0})},ja=async()=>{let i=await u(["thiefmisc","thiefmisc_base","thiefmisc_racial_mod","thiefmisc_ability_mod","thiefmisc_magic"]),t={},o=+i.thiefmisc_base||0,e=+i.thiefmisc_racial_mod||0,n=+i.thiefmisc_ability_mod||0,a=+i.thiefmisc_magic||0,r=Math.max(0,Math.min(100,b(o+e+n+a)));t.thiefmisc=r,g(t,{silent:!0})},Ua=async()=>{let i=await u(["thiefmisc1","thiefmisc1_base","thiefmisc1_racial_mod","thiefmisc1_ability_mod","thiefmisc1_magic"]),t={},o=+i.thiefmisc1_base||0,e=+i.thiefmisc1_racial_mod||0,n=+i.thiefmisc1_ability_mod||0,a=+i.thiefmisc1_magic||0,r=Math.max(0,Math.min(100,b(o+e+n+a)));t.thiefmisc1=r,g(t,{silent:!0})},Va=async()=>{let i=await u(["thiefmisc2","thiefmisc2_base","thiefmisc2_racial_mod","thiefmisc2_ability_mod","thiefmisc2_magic"]),t={},o=+i.thiefmisc2_base||0,e=+i.thiefmisc2_racial_mod||0,n=+i.thiefmisc2_ability_mod||0,a=+i.thiefmisc2_magic||0,r=Math.max(0,Math.min(100,b(o+e+n+a)));t.thiefmisc2=r,g(t,{silent:!0})};on("change:pickpockets_base change:pickpockets_racial_mod change:pickpockets_ability_mod change:pickpockets_magic",i=>{Da()});on("change:openlocks_base change:openlocks_racial_mod change:openlocks_ability_mod change:openlocks_magic",i=>{Oa()});on("change:findtraps_base change:findtraps_racial_mod change:findtraps_ability_mod change:findtraps_magic",i=>{Ea()});on("change:movequietly_base change:movequietly_racial_mod change:movequietly_ability_mod change:movequietly_magic",i=>{La()});on("change:hideinshadows_base change:hideinshadows_racial_mod change:hideinshadows_ability_mod change:hideinshadows_magic",i=>{Ha()});on("change:hearnoise_base change:hearnoise_racial_mod change:hearnoise_ability_mod change:hearnoise_magic",i=>{Ra()});on("change:climbwalls_base change:climbwalls_racial_mod change:climbwalls_ability_mod change:climbwalls_magic",i=>{Pa()});on("change:readlanguages_base change:readlanguages_racial_mod change:readlanguages_ability_mod change:readlanguages_magic",i=>{Ba()});on("change:thiefmisc_base change:thiefmisc_racial_mod change:thiefmisc_ability_mod change:thiefmisc_magic",i=>{ja()});on("change:thiefmisc1_base change:thiefmisc1_racial_mod change:thiefmisc1_ability_mod change:thiefmisc1_magic",i=>{Ua()});on("change:thiefmisc2_base change:thiefmisc2_racial_mod change:thiefmisc2_ability_mod change:thiefmisc2_magic",i=>{Va()});on("change:thief_level change:autofill_thief change:sync_thief_class change:thief_class_selected change:class change:secondclass change:thirdclass change:level change:level_2 change:level_3",async i=>{let t=await u(["thief_level","autofill_thief","sync_thief_class","thief_class_selected","class","secondclass","thirdclass","level","level_2","level_3"]);if(!(+t.autofill_thief||0))return;let e={},n=["pickpockets_base","openlocks_base","findtraps_base","movequietly_base","hideinshadows_base","hearnoise_base","climbwalls_base","readlanguages_base"],a={0:[0,0,0,0,0,0,0,0],1:[30,25,20,15,10,10,85,0],2:[35,29,25,21,15,10,86,0],3:[40,33,30,27,20,15,87,0],4:[45,37,35,33,25,15,88,20],5:[50,42,40,40,31,20,90,25],6:[55,47,45,47,37,20,92,30],7:[60,52,50,55,43,25,94,35],8:[65,57,55,62,49,25,96,40],9:[70,62,60,70,56,30,98,45],10:[80,67,65,78,63,30,99,50],11:[90,72,70,86,70,35,99.1,55],12:[100,77,75,94,77,35,99.2,60],13:[105,82,80,99,85,40,99.3,65],14:[110,87,85,99,93,40,99.4,70],15:[115,92,90,99,99,50,99.5,75],16:[125,97,95,99,99,50,99.6,80],17:[125,99,99,99,99,55,99.7,80]},r=+t.sync_thief_class||0,s=+t.thief_class_selected||0,c=+t.thief_level||0;if(r&&s>=1&&s<=3){let l=[t.class,t.secondclass,t.thirdclass],p=[t.level,t.level_2,t.level_3],w=s-1,y=(l[w]||"").trim(),C=+p[w]||0,D=be(y);c=C,e.thief_level=D===4?c:0}let m=Math.min(Math.max(c,0),17),h=a[m];n.forEach((l,p)=>{e[l]=h[p]}),await g(e,{silent:!0})});var Wa=async i=>{let t=await u(["saveparalysispoisondeath","saveparalysispoisondeath_base","saveparalysispoisondeath_racial_mod","saveparalysispoisondeath_ability_mod","saveparalysispoisondeath_misc_mod","saveparalysispoisondeath_temp_mod"]),o={},e=+t.saveparalysispoisondeath_base||0,n=+t.saveparalysispoisondeath_racial_mod||0,a=+t.saveparalysispoisondeath_ability_mod||0,r=+t.saveparalysispoisondeath_misc_mod||0,s=+t.saveparalysispoisondeath_temp_mod||0,c=+t.saveparalysispoisondeath||0,m=b(e+n+a+r+s);i===1&&c<=20&&m===20?o.saveparalysispoisondeath_base=c:o.saveparalysispoisondeath=m,await g(o,{silent:!0})},Fa=async i=>{let t=await u(["savepetrificationpolymorph","savepetrificationpolymorph_base","savepetrificationpolymorph_racial_mod","savepetrificationpolymorph_ability_mod","savepetrificationpolymorph_misc_mod","savepetrificationpolymorph_temp_mod"]),o={},e=+t.savepetrificationpolymorph_base||0,n=+t.savepetrificationpolymorph_racial_mod||0,a=+t.savepetrificationpolymorph_ability_mod||0,r=+t.savepetrificationpolymorph_misc_mod||0,s=+t.savepetrificationpolymorph_temp_mod||0,c=+t.savepetrificationpolymorph||0,m=b(e+n+a+r+s);i===1&&c<=20&&m===20?o.savepetrificationpolymorph_base=c:o.savepetrificationpolymorph=m,await g(o,{silent:!0})},Ga=async i=>{let t=await u(["saverodsstaveswands","saverodsstaveswands_base","saverodsstaveswands_racial_mod","saverodsstaveswands_ability_mod","saverodsstaveswands_misc_mod","saverodsstaveswands_temp_mod"]),o={},e=+t.saverodsstaveswands_base||0,n=+t.saverodsstaveswands_racial_mod||0,a=+t.saverodsstaveswands_ability_mod||0,r=+t.saverodsstaveswands_misc_mod||0,s=+t.saverodsstaveswands_temp_mod||0,c=+t.saverodsstaveswands||0,m=b(e+n+a+r+s);i===1&&c<=20&&m===20?o.saverodsstaveswands_base=c:o.saverodsstaveswands=m,await g(o,{silent:!0})},za=async i=>{let t=await u(["savebreathweapons","savebreathweapons_base","savebreathweapons_racial_mod","savebreathweapons_ability_mod","savebreathweapons_misc_mod","savebreathweapons_temp_mod"]),o={},e=+t.savebreathweapons_base||0,n=+t.savebreathweapons_racial_mod||0,a=+t.savebreathweapons_ability_mod||0,r=+t.savebreathweapons_misc_mod||0,s=+t.savebreathweapons_temp_mod||0,c=+t.savebreathweapons||0,m=b(e+n+a+r+s);i===1&&c<=20&&m===20?o.savebreathweapons_base=c:o.savebreathweapons=m,await g(o,{silent:!0})},Ka=async i=>{let t=await u(["savespells","savespells_base","savespells_racial_mod","savespells_ability_mod","savespells_misc_mod","savespells_temp_mod"]),o={},e=+t.savespells_base||0,n=+t.savespells_racial_mod||0,a=+t.savespells_ability_mod||0,r=+t.savespells_misc_mod||0,s=+t.savespells_temp_mod||0,c=+t.savespells||0,m=b(e+n+a+r+s);i===1&&c<=20&&m===20?o.savespells_base=c:o.savespells=m,await g(o,{silent:!0})},Kr=async()=>{let i=await u(["savemisc","savemisc_base","savemisc_racial_mod","savemisc_ability_mod","savemisc_misc_mod","savemisc_temp_mod"]),t={},o=+i.savemisc_base||0,e=+i.savemisc_racial_mod||0,n=+i.savemisc_ability_mod||0,a=+i.savemisc_misc_mod||0,r=+i.savemisc_temp_mod||0,s=b(o+e+n+a+r);t.savemisc=s,await g(t,{silent:!0})},Xr=async()=>{let i=await u(["savemisc1","savemisc1_base","savemisc1_racial_mod","savemisc1_ability_mod","savemisc1_misc_mod","savemisc1_temp_mod"]),t={},o=+i.savemisc1_base||0,e=+i.savemisc1_racial_mod||0,n=+i.savemisc1_ability_mod||0,a=+i.savemisc1_misc_mod||0,r=+i.savemisc1_temp_mod||0,s=b(o+e+n+a+r);t.savemisc1=s,await g(t,{silent:!0})},Qr=async()=>{let i=await u(["savemisc2","savemisc2_base","savemisc2_racial_mod","savemisc2_ability_mod","savemisc2_misc_mod","savemisc2_temp_mod"]),t={},o=+i.savemisc2_base||0,e=+i.savemisc2_racial_mod||0,n=+i.savemisc2_ability_mod||0,a=+i.savemisc2_misc_mod||0,r=+i.savemisc2_temp_mod||0,s=b(o+e+n+a+r);t.savemisc2=s,await g(t,{silent:!0})};on("change:saveparalysispoisondeath_base change:saveparalysispoisondeath_racial_mod change:saveparalysispoisondeath_ability_mod change:saveparalysispoisondeath_misc_mod change:saveparalysispoisondeath_temp_mod",i=>{Wa()});on("change:savepetrificationpolymorph_base change:savepetrificationpolymorph_racial_mod change:savepetrificationpolymorph_ability_mod change:savepetrificationpolymorph_misc_mod change:savepetrificationpolymorph_temp_mod",i=>{Fa()});on("change:saverodsstaveswands_base change:saverodsstaveswands_racial_mod change:saverodsstaveswands_ability_mod change:saverodsstaveswands_misc_mod change:saverodsstaveswands_temp_mod",i=>{Ga()});on("change:savebreathweapons_base change:savebreathweapons_racial_mod change:savebreathweapons_ability_mod change:savebreathweapons_misc_mod change:savebreathweapons_temp_mod",i=>{za()});on("change:savespells_base change:savespells_racial_mod change:savespells_ability_mod change:savespells_misc_mod change:savespells_temp_mod",i=>{Ka()});on("change:savemisc_base change:savemisc_racial_mod change:savemisc_ability_mod change:savemisc_misc_mod change:savemisc_temp_mod",i=>{Kr()});on("change:savemisc1_base change:savemisc1_racial_mod change:savemisc1_ability_mod change:savemisc1_misc_mod change:savemisc1_temp_mod",i=>{Xr()});on("change:savemisc2_base change:savemisc2_racial_mod change:savemisc2_ability_mod change:savemisc2_misc_mod change:savemisc2_temp_mod",i=>{Qr()});on("change:saves_class change:saves_level change:autofill_saves",async i=>{let t=await u(["saves_class","saves_level","autofill_saves"]);if(!(+t.autofill_saves||0))return;let e=+t.saves_class||0;if(!e)return;let n=["saveparalysispoisondeath_base","savepetrificationpolymorph_base","saverodsstaveswands_base","savebreathweapons_base","savespells_base"],a={assassin:[{lvl:5,s:[13,12,14,16,15]},{lvl:9,s:[12,11,12,15,13]},{lvl:13,s:[11,10,10,14,11]},{lvl:16,s:[10,9,8,13,9]},{lvl:99,s:[10,9,8,13,9]}],cleric:[{lvl:4,s:[10,13,14,16,15]},{lvl:7,s:[9,12,13,15,14]},{lvl:10,s:[7,10,11,13,12]},{lvl:13,s:[6,9,10,12,11]},{lvl:16,s:[5,8,9,11,10]},{lvl:19,s:[4,7,8,10,9]},{lvl:99,s:[2,5,6,8,7]}],druid:[{lvl:4,s:[10,13,14,16,15]},{lvl:7,s:[9,12,13,15,14]},{lvl:10,s:[7,10,11,13,12]},{lvl:13,s:[6,9,10,12,11]},{lvl:15,s:[5,8,9,11,10]},{lvl:99,s:[5,8,9,11,10]}],fighter:[{lvl:1,s:[16,17,18,20,19]},{lvl:3,s:[14,15,16,17,17]},{lvl:5,s:[13,14,15,16,16]},{lvl:7,s:[11,12,13,13,14]},{lvl:9,s:[10,11,12,12,13]},{lvl:11,s:[8,9,10,9,11]},{lvl:13,s:[7,8,9,8,10]},{lvl:15,s:[5,6,7,5,8]},{lvl:17,s:[4,5,6,4,7]},{lvl:99,s:[3,4,5,4,6]}],magicuser:[{lvl:6,s:[14,13,11,15,12]},{lvl:11,s:[13,11,9,13,10]},{lvl:16,s:[11,9,7,11,8]},{lvl:21,s:[10,7,5,9,6]},{lvl:99,s:[8,5,3,7,4]}],thief:[{lvl:5,s:[13,12,14,16,15]},{lvl:9,s:[12,11,12,15,13]},{lvl:13,s:[11,10,10,14,11]},{lvl:17,s:[10,9,8,13,9]},{lvl:21,s:[9,8,6,12,7]},{lvl:99,s:[8,7,4,11,5]}]},s={1:a.cleric,2:a.druid,3:a.fighter,4:a.magicuser,5:a.thief,6:a.thief,7:a.assassin,8:a.fighter}[e];if(!s)return;let c=+t.saves_level||0,m=s.find(l=>c<l.lvl)||s[s.length-1],h={};n.forEach((l,p)=>{h[l]=m.s[p]}),await g(h)});on("change:matrix_class",async i=>{let t=await u(["matrix_class"]),o={},e=+t.matrix_class||0;o.toggle_matrixhd=e===5?1:0,await g(o,{silent:!0})});var be=async i=>{let t=i.trim().toLowerCase();return/cleric|druid|monk/.test(t)?1:/fighter|paladin|ranger|bard|cavalier|barbarian/.test(t)?2:/magic-user|illusionist|magic|mage|wizard/.test(t)?3:/thief|assassin|rogue|thief-acrobat|acrobat/.test(t)?4:99},Xa=async i=>{let t=await u(["thac00","autofill_matrix"]);if(!(+t.autofill_matrix||0)||(+t.matrix_level||0)===0&&i===99)return;let n={},a=+t.thac00||0;n["thac0-10"]=a+10,n["thac0-9"]=a+9,n["thac0-8"]=a+8,n["thac0-7"]=a+7,n["thac0-6"]=a+6,n["thac0-5"]=a+5,n["thac0-4"]=a+4,n["thac0-3"]=a+3,n["thac0-2"]=a+2,n["thac0-1"]=a+1,n.thac01=a-1,n.thac02=a-2,n.thac03=a-3,n.thac04=a-4,n.thac05=a-5,n.thac06=a-6,n.thac07=a-7,n.thac08=a-8,n.thac09=a-9,n.thac010=a-10,await g(n,{silent:!0})};on("change:matrix_class change:matrix_level change:matrix_hitdice change:autofill_matrix change:sync_matrix_class change:toggle_fighter5 change:class_selected change:class change:secondclass change:thirdclass change:level change:level_2 change:level_3",async i=>{let t=await u(["matrix_class","matrix_level","matrix_hitdice","autofill_matrix","toggle_fighter5","sync_matrix_class","class_selected","class","secondclass","thirdclass","level","level_2","level_3"]);if(!(+t.autofill_matrix||0))return;let e={},n=+t.sync_matrix_class||0,a=+t.class_selected||0,r=+t.matrix_level||0,s=+t.matrix_class||0,c=(t.class||"").trim(),m=(t.secondclass||"").trim(),h=(t.thirdclass||"").trim(),l=+t.matrix_hitdice||0,p=+t.toggle_fighter5||0;n&&(a===1&&(s=await be(c),r=+t.level||0,e.matrix_level=r,e.matrix_class=s),a===2&&(s=await be(m),r=+t.level_2||0,e.matrix_level=r,e.matrix_class=s),a===3&&(s=await be(h),r=+t.level_3||0,e.matrix_level=r,e.matrix_class=s)),s!==0&&(s===1&&(r===0||(r<4?(e["thac-10"]=25,e["thac-9"]=24,e["thac-8"]=23,e["thac-7"]=22,e["thac-6"]=21,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=20,e.thac00=20,e.thac0=20,e.thac1=19,e.thac2=18,e.thac3=17,e.thac4=16,e.thac5=15,e.thac6=14,e.thac7=13,e.thac8=12,e.thac9=11,e.thac10=10):r<7?(e["thac-10"]=23,e["thac-9"]=22,e["thac-8"]=21,e["thac-7"]=20,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=19,e.thac00=18,e.thac0=18,e.thac1=17,e.thac2=16,e.thac3=15,e.thac4=14,e.thac5=13,e.thac6=12,e.thac7=11,e.thac8=10,e.thac9=9,e.thac10=8):r<10?(e["thac-10"]=21,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=20,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=19,e["thac-2"]=18,e["thac-1"]=17,e.thac00=16,e.thac0=16,e.thac1=15,e.thac2=14,e.thac3=13,e.thac4=12,e.thac5=11,e.thac6=10,e.thac7=9,e.thac8=8,e.thac9=7,e.thac10=6):r<13?(e["thac-10"]=20,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=20,e["thac-6"]=20,e["thac-5"]=19,e["thac-4"]=18,e["thac-3"]=17,e["thac-2"]=16,e["thac-1"]=15,e.thac00=14,e.thac0=14,e.thac1=13,e.thac2=12,e.thac3=11,e.thac4=10,e.thac5=9,e.thac6=8,e.thac7=7,e.thac8=6,e.thac9=5,e.thac10=4):r<16?(e["thac-10"]=20,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=19,e["thac-6"]=18,e["thac-5"]=17,e["thac-4"]=16,e["thac-3"]=15,e["thac-2"]=14,e["thac-1"]=13,e.thac00=12,e.thac0=12,e.thac1=11,e.thac2=10,e.thac3=9,e.thac4=8,e.thac5=7,e.thac6=6,e.thac7=5,e.thac8=4,e.thac9=3,e.thac10=2):r<19?(e["thac-10"]=20,e["thac-9"]=19,e["thac-8"]=18,e["thac-7"]=17,e["thac-6"]=16,e["thac-5"]=15,e["thac-4"]=14,e["thac-3"]=13,e["thac-2"]=12,e["thac-1"]=11,e.thac00=10,e.thac0=10,e.thac1=9,e.thac2=8,e.thac3=7,e.thac4=6,e.thac5=5,e.thac6=4,e.thac7=3,e.thac8=2,e.thac9=1,e.thac10=0):r>=19&&(e["thac-10"]=19,e["thac-9"]=18,e["thac-8"]=17,e["thac-7"]=16,e["thac-6"]=15,e["thac-5"]=14,e["thac-4"]=13,e["thac-3"]=12,e["thac-2"]=11,e["thac-1"]=10,e.thac00=9,e.thac0=9,e.thac1=8,e.thac2=7,e.thac3=6,e.thac4=5,e.thac5=4,e.thac6=3,e.thac7=2,e.thac8=1,e.thac9=0,e.thac10=-1)),e.attack_matrix_flag=0),(s===2||s===6)&&(r===0?(e["thac-10"]=26,e["thac-9"]=25,e["thac-8"]=24,e["thac-7"]=23,e["thac-6"]=22,e["thac-5"]=21,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=20,e.thac00=20,e.thac0=20,e.thac1=20,e.thac2=19,e.thac3=18,e.thac4=17,e.thac5=16,e.thac6=15,e.thac7=14,e.thac8=13,e.thac9=12,e.thac10=11):r<3?(e["thac-10"]=25-p,e["thac-9"]=24-p,e["thac-8"]=23-p,e["thac-7"]=22-p,e["thac-6"]=21-p,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=20,e.thac00=20-p,e.thac0=20-p,e.thac1=19-p,e.thac2=18-p,e.thac3=17-p,e.thac4=16-p,e.thac5=15-p,e.thac6=14-p,e.thac7=13-p,e.thac8=12-p,e.thac9=11-p,e.thac10=10-p):r<5?(e["thac-10"]=23-p,e["thac-9"]=22-p,e["thac-8"]=21-p,e["thac-7"]=20,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20-p,e["thac-1"]=19-p,e.thac00=18-p,e.thac0=18-p,e.thac1=17-p,e.thac2=16-p,e.thac3=15-p,e.thac4=14-p,e.thac5=13-p,e.thac6=12-p,e.thac7=11-p,e.thac8=10-p,e.thac9=9-p,e.thac10=8-p):r<7?(e["thac-10"]=21-p,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=20,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=20-p,e["thac-3"]=19-p,e["thac-2"]=18-p,e["thac-1"]=17-p,e.thac00=16-p,e.thac0=16-p,e.thac1=15-p,e.thac2=14-p,e.thac3=13-p,e.thac4=12-p,e.thac5=11-p,e.thac6=10-p,e.thac7=9-p,e.thac8=8-p,e.thac9=7-p,e.thac10=6-p):r<9?(e["thac-10"]=20,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=20,e["thac-6"]=20-p,e["thac-5"]=19-p,e["thac-4"]=18-p,e["thac-3"]=17-p,e["thac-2"]=16-p,e["thac-1"]=15-p,e.thac00=14-p,e.thac0=14-p,e.thac1=13-p,e.thac2=12-p,e.thac3=11-p,e.thac4=10-p,e.thac5=9-p,e.thac6=8-p,e.thac7=7-p,e.thac8=6-p,e.thac9=5-p,e.thac10=4-p):r<11?(e["thac-10"]=20,e["thac-9"]=20,e["thac-8"]=20-p,e["thac-7"]=19-p,e["thac-6"]=18-p,e["thac-5"]=17-p,e["thac-4"]=16-p,e["thac-3"]=15-p,e["thac-2"]=14-p,e["thac-1"]=13-p,e.thac00=12-p,e.thac0=12-p,e.thac1=11-p,e.thac2=10-p,e.thac3=9-p,e.thac4=8-p,e.thac5=7-p,e.thac6=6-p,e.thac7=5-p,e.thac8=4-p,e.thac9=3-p,e.thac10=2-p):r<13?(e["thac-10"]=20-p,e["thac-9"]=19-p,e["thac-8"]=18-p,e["thac-7"]=17-p,e["thac-6"]=16-p,e["thac-5"]=15-p,e["thac-4"]=14-p,e["thac-3"]=13-p,e["thac-2"]=12-p,e["thac-1"]=11-p,e.thac00=10-p,e.thac0=10-p,e.thac1=9-p,e.thac2=8-p,e.thac3=7-p,e.thac4=6-p,e.thac5=5-p,e.thac6=4-p,e.thac7=3-p,e.thac8=2-p,e.thac9=1-p,e.thac10=0-p):r<15?(e["thac-10"]=18-p,e["thac-9"]=17-p,e["thac-8"]=16-p,e["thac-7"]=15-p,e["thac-6"]=14-p,e["thac-5"]=13-p,e["thac-4"]=12-p,e["thac-3"]=11-p,e["thac-2"]=10-p,e["thac-1"]=9-p,e.thac00=8-p,e.thac0=8-p,e.thac1=7-p,e.thac2=6-p,e.thac3=5-p,e.thac4=4-p,e.thac5=3-p,e.thac6=2-p,e.thac7=1-p,e.thac8=0-p,e.thac9=-1-p,e.thac10=-2-p):r<17?(e["thac-10"]=16-p,e["thac-9"]=15-p,e["thac-8"]=14-p,e["thac-7"]=13-p,e["thac-6"]=12-p,e["thac-5"]=11-p,e["thac-4"]=10-p,e["thac-3"]=9-p,e["thac-2"]=8-p,e["thac-1"]=7-p,e.thac00=6-p,e.thac0=6-p,e.thac1=5-p,e.thac2=4-p,e.thac3=3-p,e.thac4=2-p,e.thac5=1-p,e.thac6=0-p,e.thac7=-1-p,e.thac8=-2-p,e.thac9=-3-p,e.thac10=-4-p):r>=17&&(e["thac-10"]=14-p,e["thac-9"]=13-p,e["thac-8"]=12-p,e["thac-7"]=11-p,e["thac-6"]=10-p,e["thac-5"]=9-p,e["thac-4"]=8-p,e["thac-3"]=7-p,e["thac-2"]=6-p,e["thac-1"]=5-p,e.thac00=4-p,e.thac0=4-p,e.thac1=3-p,e.thac2=2-p,e.thac3=1-p,e.thac4=0-p,e.thac5=-1-p,e.thac6=-2-p,e.thac7=-3-p,e.thac8=-4-p,e.thac9=-5-p,e.thac10=-6-p),e.attack_matrix_flag=0),s===3&&(r===0||(r<6?(e["thac-10"]=26,e["thac-9"]=25,e["thac-8"]=24,e["thac-7"]=23,e["thac-6"]=22,e["thac-5"]=21,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=20,e.thac00=20,e.thac0=20,e.thac1=20,e.thac2=19,e.thac3=18,e.thac4=17,e.thac5=16,e.thac6=15,e.thac7=14,e.thac8=13,e.thac9=12,e.thac10=11):r<11?(e["thac-10"]=24,e["thac-9"]=23,e["thac-8"]=22,e["thac-7"]=21,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=20,e.thac00=19,e.thac0=19,e.thac1=18,e.thac2=17,e.thac3=16,e.thac4=15,e.thac5=14,e.thac6=13,e.thac7=12,e.thac8=11,e.thac9=10,e.thac10=9):r<16?(e["thac-10"]=21,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=20,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=19,e["thac-2"]=18,e["thac-1"]=17,e.thac00=16,e.thac0=16,e.thac1=15,e.thac2=14,e.thac3=13,e.thac4=12,e.thac5=11,e.thac6=10,e.thac7=9,e.thac8=8,e.thac9=7,e.thac10=6):r<21?(e["thac-10"]=20,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=20,e["thac-6"]=19,e["thac-5"]=18,e["thac-4"]=17,e["thac-3"]=16,e["thac-2"]=15,e["thac-1"]=14,e.thac00=13,e.thac0=13,e.thac1=12,e.thac2=11,e.thac3=10,e.thac4=9,e.thac5=8,e.thac6=7,e.thac7=6,e.thac8=5,e.thac9=4,e.thac10=3):r>=21&&(e["thac-10"]=20,e["thac-9"]=20,e["thac-8"]=19,e["thac-7"]=18,e["thac-6"]=17,e["thac-5"]=16,e["thac-4"]=15,e["thac-3"]=14,e["thac-2"]=13,e["thac-1"]=12,e.thac00=11,e.thac0=11,e.thac1=10,e.thac2=9,e.thac3=8,e.thac4=7,e.thac5=6,e.thac6=5,e.thac7=4,e.thac8=3,e.thac9=2,e.thac10=1)),e.attack_matrix_flag=0),s===4&&(r===0||(r<5?(e["thac-10"]=26,e["thac-9"]=25,e["thac-8"]=24,e["thac-7"]=23,e["thac-6"]=22,e["thac-5"]=21,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=20,e.thac00=20,e.thac0=20,e.thac1=20,e.thac2=19,e.thac3=18,e.thac4=17,e.thac5=16,e.thac6=15,e.thac7=14,e.thac8=13,e.thac9=12,e.thac10=11):r<9?(e["thac-10"]=24,e["thac-9"]=23,e["thac-8"]=22,e["thac-7"]=21,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=20,e.thac00=19,e.thac0=19,e.thac1=18,e.thac2=17,e.thac3=16,e.thac4=15,e.thac5=14,e.thac6=13,e.thac7=12,e.thac8=11,e.thac9=10,e.thac10=9):r<13?(e["thac-10"]=21,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=20,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=19,e["thac-2"]=18,e["thac-1"]=17,e.thac00=16,e.thac0=16,e.thac1=15,e.thac2=14,e.thac3=13,e.thac4=12,e.thac5=11,e.thac6=10,e.thac7=9,e.thac8=8,e.thac9=7,e.thac10=6):r<17?(e["thac-10"]=20,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=20,e["thac-6"]=20,e["thac-5"]=19,e["thac-4"]=18,e["thac-3"]=17,e["thac-2"]=16,e["thac-1"]=15,e.thac00=14,e.thac0=14,e.thac1=13,e.thac2=12,e.thac3=11,e.thac4=10,e.thac5=9,e.thac6=8,e.thac7=7,e.thac8=6,e.thac9=5,e.thac10=4):r<21?(e["thac-10"]=20,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=19,e["thac-6"]=18,e["thac-5"]=17,e["thac-4"]=16,e["thac-3"]=15,e["thac-2"]=14,e["thac-1"]=13,e.thac00=12,e.thac0=12,e.thac1=11,e.thac2=10,e.thac3=9,e.thac4=8,e.thac5=7,e.thac6=6,e.thac7=5,e.thac8=4,e.thac9=3,e.thac10=2):r>=21&&(e["thac-10"]=20,e["thac-9"]=19,e["thac-8"]=18,e["thac-7"]=17,e["thac-6"]=16,e["thac-5"]=15,e["thac-4"]=14,e["thac-3"]=13,e["thac-2"]=12,e["thac-1"]=11,e.thac00=10,e.thac0=10,e.thac1=9,e.thac2=8,e.thac3=7,e.thac4=6,e.thac5=5,e.thac6=4,e.thac7=3,e.thac8=2,e.thac9=1,e.thac10=0)),e.attack_matrix_flag=0),s===5&&(l===0||(l===1?(e["thac-10"]=26,e["thac-9"]=25,e["thac-8"]=24,e["thac-7"]=23,e["thac-6"]=22,e["thac-5"]=21,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=20,e.thac00=20,e.thac0=20,e.thac1=20,e.thac2=19,e.thac3=18,e.thac4=17,e.thac5=16,e.thac6=15,e.thac7=14,e.thac8=13,e.thac9=12,e.thac10=11):l===2?(e["thac-10"]=25,e["thac-9"]=24,e["thac-8"]=23,e["thac-7"]=22,e["thac-6"]=21,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=20,e.thac00=20,e.thac0=20,e.thac1=19,e.thac2=18,e.thac3=17,e.thac4=16,e.thac5=15,e.thac6=14,e.thac7=13,e.thac8=12,e.thac9=11,e.thac10=10):l===3?(e["thac-10"]=24,e["thac-9"]=23,e["thac-8"]=22,e["thac-7"]=21,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=20,e.thac00=19,e.thac0=19,e.thac1=18,e.thac2=17,e.thac3=16,e.thac4=15,e.thac5=14,e.thac6=13,e.thac7=12,e.thac8=11,e.thac9=10,e.thac10=9):l===4?(e["thac-10"]=23,e["thac-9"]=22,e["thac-8"]=21,e["thac-7"]=20,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=19,e.thac00=18,e.thac0=18,e.thac1=17,e.thac2=16,e.thac3=15,e.thac4=14,e.thac5=13,e.thac6=12,e.thac7=11,e.thac8=10,e.thac9=9,e.thac10=8):l===5?(e["thac-10"]=21,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=20,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=19,e["thac-2"]=18,e["thac-1"]=17,e.thac00=16,e.thac0=16,e.thac1=15,e.thac2=14,e.thac3=13,e.thac4=12,e.thac5=11,e.thac6=10,e.thac7=9,e.thac8=8,e.thac9=7,e.thac10=6):l===6?(e["thac-10"]=20,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=20,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=19,e["thac-3"]=18,e["thac-2"]=17,e["thac-1"]=16,e.thac00=15,e.thac0=15,e.thac1=14,e.thac2=13,e.thac3=12,e.thac4=11,e.thac5=10,e.thac6=9,e.thac7=8,e.thac8=7,e.thac9=6,e.thac10=5):l===7?(e["thac-10"]=20,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=20,e["thac-6"]=19,e["thac-5"]=18,e["thac-4"]=17,e["thac-3"]=16,e["thac-2"]=15,e["thac-1"]=14,e.thac00=13,e.thac0=13,e.thac1=12,e.thac2=11,e.thac3=10,e.thac4=9,e.thac5=8,e.thac6=7,e.thac7=6,e.thac8=5,e.thac9=4,e.thac10=3):l===8?(e["thac-10"]=20,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=19,e["thac-6"]=18,e["thac-5"]=17,e["thac-4"]=16,e["thac-3"]=15,e["thac-2"]=14,e["thac-1"]=13,e.thac00=12,e.thac0=12,e.thac1=11,e.thac2=10,e.thac3=9,e.thac4=8,e.thac5=7,e.thac6=6,e.thac7=5,e.thac8=4,e.thac9=3,e.thac10=2):l===9?(e["thac-10"]=20,e["thac-9"]=19,e["thac-8"]=18,e["thac-7"]=17,e["thac-6"]=16,e["thac-5"]=15,e["thac-4"]=14,e["thac-3"]=13,e["thac-2"]=12,e["thac-1"]=11,e.thac00=10,e.thac0=10,e.thac1=9,e.thac2=8,e.thac3=7,e.thac4=6,e.thac5=5,e.thac6=4,e.thac7=3,e.thac8=2,e.thac9=1,e.thac10=0):l===10?(e["thac-10"]=19,e["thac-9"]=18,e["thac-8"]=17,e["thac-7"]=16,e["thac-6"]=15,e["thac-5"]=14,e["thac-4"]=13,e["thac-3"]=12,e["thac-2"]=11,e["thac-1"]=10,e.thac00=9,e.thac0=9,e.thac1=8,e.thac2=7,e.thac3=6,e.thac4=5,e.thac5=4,e.thac6=3,e.thac7=2,e.thac8=1,e.thac9=0,e.thac10=-1):l===11?(e["thac-10"]=18,e["thac-9"]=17,e["thac-8"]=16,e["thac-7"]=15,e["thac-6"]=14,e["thac-5"]=13,e["thac-4"]=12,e["thac-3"]=11,e["thac-2"]=10,e["thac-1"]=9,e.thac00=8,e.thac0=8,e.thac1=7,e.thac2=6,e.thac3=5,e.thac4=4,e.thac5=3,e.thac6=2,e.thac7=1,e.thac8=0,e.thac9=-1,e.thac10=-2):l===12&&(e["thac-10"]=17,e["thac-9"]=16,e["thac-8"]=15,e["thac-7"]=14,e["thac-6"]=13,e["thac-5"]=12,e["thac-4"]=11,e["thac-3"]=10,e["thac-2"]=9,e["thac-1"]=8,e.thac00=7,e.thac0=7,e.thac1=6,e.thac2=5,e.thac3=4,e.thac4=3,e.thac5=2,e.thac6=1,e.thac7=0,e.thac8=-1,e.thac9=-2,e.thac10=-3)),e.attack_matrix_flag=0),s===99&&(console.error("Error: Class not recognized or class name is empty."),e["thac-10"]=20,e["thac-9"]=20,e["thac-8"]=20,e["thac-7"]=20,e["thac-6"]=20,e["thac-5"]=20,e["thac-4"]=20,e["thac-3"]=20,e["thac-2"]=20,e["thac-1"]=20,e.thac00=20,e.thac0=20,e.thac1=20,e.thac2=20,e.thac3=20,e.thac4=20,e.thac5=20,e.thac6=20,e.thac7=20,e.thac8=20,e.thac9=20,e.thac10=20,e.attack_matrix_flag=0),await g(e,{silent:!0}),Xa(s))});on("sheet:opened change:thac0 change:thac00 change:autofill_matrix change:sync_matrix_level change:sync_matrix_class change:sync_class_selected",async i=>{let t=await u(["thac0","thac1","thac2","thac00","thac01","thac02","autofill_matrix"]);if(!(+t.autofill_matrix||0))return;let e={},n=+t.thac0||0,a=+t.thac1||0,r=+t.thac2||0,s=+t.thac00||0,c=+t.thac01||0,m=+t.thac02||0,h=n+a+r,l=s+c+m;e.attack_matrix_flag=h===60&&l===60?1:0,await g(e,{silent:!0})});on("change:thac00",i=>{Xa()});var F=(i,t,o,e)=>i<o?(console.log(`WARNING: ${t} value is not a number or out of range. [${i}].
Defaulting to ${o}.`),o):i>e?(console.log(`WARNING: ${t} value is out of range. [${i}].
Defaulting to ${e}.`),e):Math.min(Math.max(i,o),e),A=class{constructor(t,o,e,n,a,r){this.meleebonus=t,this.dmgbonus=o,this.majorstrengthfeat=r,this.minorstrengthfeat=n,this.minorstrengthfeat_locked=a,this.encumbrancebonus=e}getMeleeAttackBonus(){return this.meleebonus}getMeleeDamageBonus(){return this.dmgbonus}getMajorStrengthCheck(){return this.majorstrengthfeat}getMinorStrengthCheck(t=!1){return t?this.minorstrengthfeat_locked:this.minorstrengthfeat}getEncumbranceBonus(){return this.encumbrancebonus}},De=class{constructor(){this.strength_dict={3:new A(-3,-1,-350,1,0,0),4:new A(-2,-1,-250,1,0,0),5:new A(-2,-1,-250,1,0,0),6:new A(-1,0,-150,1,0,0),7:new A(-1,0,-150,1,0,0),8:new A(0,0,0,2,0,1),9:new A(0,0,0,2,0,1),10:new A(0,0,0,2,0,2),11:new A(0,0,0,2,0,2),12:new A(0,0,100,2,0,4),13:new A(0,0,100,2,0,4),14:new A(0,0,200,2,0,7),15:new A(0,0,200,2,0,7),16:new A(0,1,350,3,0,10),17:new A(1,1,500,3,0,13),18:{None:new A(1,2,750,3,0,16),"01-50":new A(1,3,1e3,3,0,20),"51-75":new A(2,3,1250,4,0,25),"76-90":new A(2,4,1500,4,0,30),"91-99":new A(2,5,2e3,4,1,35),"00":new A(3,6,3e3,5,2,40)},19:new A(3,7,4500,7,3,50),20:new A(3,8,5e3,7,3,60),21:new A(4,9,6e3,9,4,70),22:new A(4,10,7500,11,4,80),23:new A(5,11,9e3,11,5,90),24:new A(6,12,12e3,19,7,100),25:new A(7,14,15e3,23,9,100)}}getEntry(t,o){let e=F(t,"strength",3,25);return e!==18?this.strength_dict[e]:o<=0?this.strength_dict[e].None:o<=50?this.strength_dict[e]["01-50"]:o<=75?this.strength_dict[e]["51-75"]:o<=90?this.strength_dict[e]["76-90"]:o<=99?this.strength_dict[e]["91-99"]:this.strength_dict[e]["00"]}getStrengthValue(t,o,e=0,n=!1){switch(t){case"Attack":return this.getEntry(o,e).getMeleeAttackBonus();case"Damage":return this.getEntry(o,e).getMeleeDamageBonus();case"Major":return this.getEntry(o,e).getMajorStrengthCheck();case"Minor":return this.getEntry(o,e).getMinorStrengthCheck(n);case"Encumbrance":return this.getEntry(o,e).getEncumbranceBonus();default:return console.log("WARNING: Invalid Test."),"Invalid Test"}}},N=class{constructor(t,o,e,n){this.bonuslanguages=t,this.knowspell=o,this.minspells=e,this.maxspells=n}getBonusLanguages(){return this.bonuslanguages}getKnowSpell(){return this.knowspell}getMinSpells(){return this.minspells}getMaxSpells(){return this.maxspells}},Oe=class{constructor(){this.intelligence_dict={8:new N(1,0,0,0),9:new N(1,35,4,6),10:new N(2,45,5,7),11:new N(2,45,5,7),12:new N(3,45,5,7),13:new N(3,55,6,9),14:new N(4,55,6,9),15:new N(4,65,7,11),16:new N(5,65,7,11),17:new N(6,75,8,14),18:new N(7,85,9,18),19:new N(8,95,10,99),20:new N(9,96,11,99),21:new N(10,97,12,99),22:new N(11,98,13,99),23:new N(12,99,14,99),24:new N(13,100,15,99),25:new N(14,100,16,99)}}getEntry(t){return this.intelligence_dict[F(t,"intelligence",8,25)]}},M=class{constructor(t,o,e){this.mentalsavebonus=t,this.spellbonus=o,this.spellfailure=e}getMentalSaveBonus(){return this.mentalsavebonus}getSpellBonus(){return this.spellbonus}getSpellFailure(){return this.spellfailure}},Ee=class{constructor(){this.wisdom_dict={3:new M("-3","None",20),4:new M("-2","None",20),5:new M("-1","None",20),6:new M("-1","None",20),7:new M("-1","None",20),8:new M("0","None",20),9:new M("0","None",20),10:new M("0","None",15),11:new M("0","None",10),12:new M("0","None",5),13:new M("0","1/0/0/0/0/0/0",0),14:new M("0","2/0/0/0/0/0/0",0),15:new M("1","2/1/0/0/0/0/0",0),16:new M("2","2/2/0/0/0/0/0",0),17:new M("3","2/2/1/0/0/0/0",0),18:new M("4","2/2/1/1/0/0/0",0),19:new M("4","3/2/1/2/0/0/0",0),20:new M("4","3/3/1/3/0/0/0",0),21:new M("4","3/3/2/3/1/0/0",0),22:new M("4","3/3/2/4/2/0/0",0),23:new M("4","3/3/2/4/4/0/0",0),24:new M("4","3/3/2/4/4/2/1",0),25:new M("4","3/3/2/4/4/3/1",0)}}getEntry(t){return this.wisdom_dict[F(t,"wisdom",3,25)]}},S=class{constructor(t,o,e){this.surprisebonus=t,this.rangedbonus=o,this.armorbonus=e}getSurpriseBonus(){return this.surprisebonus}getRangedBonus(){return this.rangedbonus}getArmorBonus(){return this.armorbonus}},Le=class{constructor(){this.dexterity_dict={3:new S(3,-3,4),4:new S(2,-2,3),5:new S(1,-1,2),6:new S(0,0,1),7:new S(0,0,0),8:new S(0,0,0),9:new S(0,0,0),10:new S(0,0,0),11:new S(0,0,0),12:new S(0,0,0),13:new S(0,0,0),14:new S(0,0,0),15:new S(0,0,-1),16:new S(-1,1,-2),17:new S(-2,2,-3),18:new S(-3,3,-4),19:new S(-3,3,-4),20:new S(-3,3,-4),21:new S(-4,4,-5),22:new S(-4,4,-5),23:new S(-4,4,-5),24:new S(-5,5,-6),25:new S(-5,5,-6)}}getEntry(t){return this.dexterity_dict[F(t,"dexterity",3,25)]}},I=class{constructor(t,o,e){this.hitpointbonus=t,this.systemshock=o,this.resurrectionsurvival=e}getHitpointBonus(){return this.hitpointbonus}getSystemShock(){return this.systemshock}getResurrectionSurvival(){return this.resurrectionsurvival}},He=class{constructor(){this.constitution_dict={3:new I("-2",35,40),4:new I("-1",40,45),5:new I("-1",45,50),6:new I("0",50,55),7:new I("0",55,60),8:new I("0",60,65),9:new I("0",65,70),10:new I("0",70,75),11:new I("0",75,80),12:new I("0",80,85),13:new I("0",85,90),14:new I("0",88,92),15:new I("1",91,94),16:new I("2",95,96),17:new I("3",97,98),18:new I("4",99,100),19:new I("5",99,100),20:new I("5",99,100),21:new I("6",99,100),22:new I("6",99,100),23:new I("6",99,100),24:new I("7",99,100),25:new I("7",99,100)}}getEntry(t){return this.constitution_dict[F(t,"constitution",3,25)]}},T=class{constructor(t,o,e,n){this.maximumhenchmen=t,this.loyaltybonus=o,this.reactionbonus=e,this.comeliness=n}MaximumHenchmen(){return this.maximumhenchmen}getLoyaltyBonus(){return this.loyaltybonus}getReactionBonus(){return this.reactionbonus}getComeliness(){return this.comeliness}},Re=class{constructor(){this.charisma_dict={3:new T(1,-30,-25,-5),4:new T(1,-25,-20,-3),5:new T(2,-20,-15,-3),6:new T(2,-15,-10,-1),7:new T(3,-10,-5,-1),8:new T(3,-5,0,-1),9:new T(4,0,0,0),10:new T(4,0,0,0),11:new T(4,0,0,0),12:new T(5,0,0,0),13:new T(5,0,5,1),14:new T(6,5,10,1),15:new T(7,15,15,1),16:new T(8,20,25,2),17:new T(10,30,30,2),18:new T(15,40,35,3),19:new T(20,50,40,5),20:new T(25,60,45,5),21:new T(30,70,50,5),22:new T(35,80,55,5),23:new T(40,90,60,5),24:new T(45,100,65,5),25:new T(50,100,70,5)}}getEntry(t){return this.charisma_dict[F(t,"charisma",3,25)]}},O=class{constructor(t,o,e,n,a){this.pickPockets=t,this.openLocks=o,this.findRemoveTraps=e,this.moveSilently=n,this.hideInShadows=a}getPickPockets(){return this.pickPockets}getOpenLocks(){return this.openLocks}getFindRemoveTraps(){return this.findRemoveTraps}getMoveSilently(){return this.moveSilently}getHideInShadows(){return this.hideInShadows}},Pe=class{constructor(){this.dexterity_dict={9:new O(-15,-10,-10,-20,-10),10:new O(-10,-5,-10,-15,-5),11:new O(-5,0,-5,-10,0),12:new O(0,0,0,-5,0),13:new O(0,0,0,0,0),14:new O(0,0,0,0,0),15:new O(0,0,0,0,0),16:new O(0,5,0,0,0),17:new O(5,10,0,5,5),18:new O(10,15,5,10,10),19:new O(15,20,10,12,12),20:new O(20,25,15,15,15),21:new O(25,30,20,18,18),22:new O(30,35,25,20,20),23:new O(35,40,30,23,23),24:new O(40,45,35,25,25),25:new O(45,50,40,30,30)}}getEntry(t){return this.dexterity_dict[F(t,"dexterity",9,25)]}},P=class{constructor(t,o,e,n,a,r,s,c){this.pickPockets=t,this.openLocks=o,this.findRemoveTraps=e,this.moveSilently=n,this.hideInShadows=a,this.hearNoise=r,this.climbWalls=s,this.readLanguages=c}getPickPockets(){return this.pickPockets}getOpenLocks(){return this.openLocks}getFindRemoveTraps(){return this.findRemoveTraps}getMoveSilently(){return this.moveSilently}getHideInShadows(){return this.hideInShadows}getHearNoise(){return this.hearNoise}getClimbWalls(){return this.climbWalls}getReadLanguages(){return this.readLanguages}},Be=class{constructor(){this.dexterity_dict={0:new P(0,0,0,0,0,0,0,0),1:new P(0,0,0,0,0,0,0,0),2:new P(0,10,15,0,0,0,-10,-5),3:new P(5,-5,0,5,10,5,0,0),4:new P(0,5,10,5,5,10,-15,0),5:new P(10,0,0,0,5,0,0,0),6:new P(5,5,5,10,15,5,-15,-5),7:new P(-5,5,5,0,0,5,5,-10)}}getEntry(t){return this.dexterity_dict[F(t,"thief_race_selected",0,7)]}},V=new De,we=new Oe,de=new Ee,ae=new Le,te=new He,G=new Re,pe=new Pe,W=new Be,R=(i,t,o="int")=>o==="int"?parseInt(i[t])||0:o==="float"?parseFloat(i[t])||0:o==="str"?i[t]:null,Qa=async()=>{let i=await u(["strength","exceptionalstrength"]),t={},o=await R(i,"strength","int"),e=await R(i,"exceptionalstrength");await R(i,"exceptionalstrength","str")==="00"&&(e=100),t.exceptionalstrength=e,t.meleebonus=(V.getStrengthValue("Attack",o,e)<=0?"":"+")+V.getStrengthValue("Attack",o,e),t.dmgbonus=(V.getStrengthValue("Damage",o,e)<=0?"":"+")+V.getStrengthValue("Damage",o,e),t.majorstrengthfeat=V.getStrengthValue("Major",o,e),t.minorstrengthfeat=V.getStrengthValue("Minor",o,e),t.minorstrengthfeat_locked=V.getStrengthValue("Minor",o,e,!0),t.encumbrancebonus=(V.getStrengthValue("Encumbrance",o,e)<=0?"":"+")+V.getStrengthValue("Encumbrance",o,e),await g(t)},Ya=async()=>{let i=await u(["intelligence","bonuslanguages","race"]),t={},o=await R(i,"intelligence","int"),e=await R(i,"race","str"),n=+we.getEntry(o).getBonusLanguages();/human/gi.test(e)?t.bonuslanguages=n:/dwarf/gi.test(e)||/gnome/gi.test(e)||/orc/gi.test(e)?t.bonuslanguages=Math.min(n,2):/half-elf/gi.test(e)||/halfling/gi.test(e)||/hobbit/gi.test(e)?(n<=5?n=0:n===6?n=1:n===7?n=2:n===8?n=3:n===9?n=4:n===10?n=5:n===11?n=6:n===12?n=7:n===13?n=8:n>=14&&(n=9),t.bonuslanguages=n):/elf/gi.test(e)?(n<=4?n=0:n===5?n=1:n==6?n=2:n===7?n=3:n===8?n=4:n===9?n=5:n===10?n=6:n===11?n=7:n===12?n=8:n===13?n=9:n>=14&&(n=10),t.bonuslanguages=n):t.bonuslanguages=0,t.knowspell=we.getEntry(o).getKnowSpell(),t.minspells=we.getEntry(o).getMinSpells(),t.maxspells=we.getEntry(o).getMaxSpells(),await g(t,{silent:!0})},Za=async()=>{let i=await u(["wisdom"]),t={},o=await R(i,"wisdom","int");t.mentalsavebonus=(de.getEntry(o).getMentalSaveBonus()<=0?"":"+")+de.getEntry(o).getMentalSaveBonus(),t.spellbonus=de.getEntry(o).getSpellBonus(),t.spellfailure=de.getEntry(o).getSpellFailure(),await g(t,{silent:!0})},Ja=async()=>{let i=await u(["dexterity"]),t={},o=await R(i,"dexterity","int"),e=ae.getEntry(o).getSurpriseBonus(),n=(-1*e<=0?"":"+")+-1*e;t.surprisebonus=ae.getEntry(o).getSurpriseBonus(),t.surprisebonus_inverted=n,t.rangedbonus=(ae.getEntry(o).getRangedBonus()<=0?"":"+")+ae.getEntry(o).getRangedBonus(),t.armorbonus=(ae.getEntry(o).getArmorBonus()<=0?"":"+")+ae.getEntry(o).getArmorBonus(),await g(t)},et=async()=>{let i=await u(["constitution","class","secondclass","thirdclass"]),t={},o=await R(i,"constitution","int"),e=[i.class,i.secondclass,i.thirdclass];/fighter/gi.test(e)||/paladin/gi.test(e)||/ranger/gi.test(e)?t.hitpointbonus=(te.getEntry(o).getHitpointBonus()<=0?"":"+")+te.getEntry(o).getHitpointBonus():t.hitpointbonus=(Math.min(te.getEntry(o).getHitpointBonus(),2)<=0?"":"+")+Math.min(te.getEntry(o).getHitpointBonus(),2),t.systemshock=te.getEntry(o).getSystemShock(),t.resurrectionsurvival=te.getEntry(o).getResurrectionSurvival(),await g(t)},at=async()=>{let i=await u(["charisma"]),t={},o=await R(i,"charisma","int");t.maximumhenchmen=G.getEntry(o).MaximumHenchmen(),t.loyaltybonus=(G.getEntry(o).getLoyaltyBonus()<=0?"":"+")+G.getEntry(o).getLoyaltyBonus(),t.reactionbonus=(G.getEntry(o).getReactionBonus()<=0?"":"+")+G.getEntry(o).getReactionBonus(),t.comeliness_cha_adj=(G.getEntry(o).getComeliness()<=0?"":"+")+G.getEntry(o).getComeliness(),await setAttrs(t,{silent:!0})},Yr=async i=>{let t=await u(["dexterity"]),o={},e=await R(t,"dexterity","int"),n=pe.getEntry(e).getPickPockets(),a=pe.getEntry(e).getOpenLocks(),r=pe.getEntry(e).getFindRemoveTraps(),s=pe.getEntry(e).getMoveSilently(),c=pe.getEntry(e).getHideInShadows();o.pickpockets_ability_mod=i===1?n:0,o.openlocks_ability_mod=i===1?a:0,o.findtraps_ability_mod=i===1?r:0,o.movequietly_ability_mod=i===1?s:0,o.hideinshadows_ability_mod=i===1?c:0,await g(o)},Zr=async i=>{let t=await u(["thief_race_selected"]),o={},e=await R(t,"thief_race_selected","int"),n=W.getEntry(e).getPickPockets(),a=W.getEntry(e).getOpenLocks(),r=W.getEntry(e).getFindRemoveTraps(),s=W.getEntry(e).getMoveSilently(),c=W.getEntry(e).getHideInShadows(),m=W.getEntry(e).getHearNoise(),h=W.getEntry(e).getClimbWalls(),l=W.getEntry(e).getReadLanguages();o.pickpockets_racial_mod=i===1?n:0,o.openlocks_racial_mod=i===1?a:0,o.findtraps_racial_mod=i===1?r:0,o.movequietly_racial_mod=i===1?s:0,o.hideinshadows_racial_mod=i===1?c:0,o.hearnoise_racial_mod=i===1?m:0,o.climbwalls_racial_mod=i===1?h:0,o.readlanguages_racial_mod=i===1?l:0,await g(o)};on("change:autofill_thief_dex change:dexterity",async i=>{let o=+(await u(["autofill_thief_dex"])).autofill_thief_dex||0;await Yr(o)});var Jr=i=>{let t=i.trim().toLowerCase();return/human/.test(t)?1:/dwarf/.test(t)?2:/half-elf/.test(t)?5:/elf/.test(t)?3:/gnome/.test(t)?4:/halfling|hobbit/.test(t)?6:/half-orc/.test(t)?7:0};on("change:race change:autofill_thief_race change:thief_race_selected",async i=>{let t=i.sourceAttribute,o=await u(["race","autofill_thief_race"]),e={},n=+o.autofill_thief_race||0,a=(o.race||"human").trim();(t==="autofill_thief_race"||t==="race")&&(e.thief_race_selected=Jr(a)),await g(e,{silent:!0}),Zr(n)});on("change:strength change:exceptionalstrength",i=>{Qa()});on("change:intelligence change:race",i=>{Ya()});on("change:wisdom",i=>{Za()});on("change:dexterity",i=>{Ja()});on("change:constitution change:class change:secondclass change:thirdclass",i=>{et()});on("change:charisma change:comeliness",i=>{at()});var tt=async()=>{let i=await u(["character_avatar","sheet_image","sheet_image_url"]),t={},o=+i.sheet_image||0,e=(function(r){let s=/(\.png|\.jpg|\.gif)/i,c=r.match(s);return c?r.slice(0,c.index+c[0].length):r})(i.character_avatar),n=i.sheet_image_url||e;o===0&&(t.sheet_image_src=n),o===1&&(t.sheet_image_src=e),o===2&&(t.sheet_image_src=""),await g(t,{silent:!0})};on("change:character_avatar change:sheet_image change:sheet_image_url",i=>{tt()});on("clicked:postimage",async i=>{await tt();let t="?{Display the portrait image?|YES,@{sheet_image_src}|NO,&nbsp;}";await new Promise(o=>{startRoll(t,e=>{finishRoll(e.rollId),o()})})});on("change:psionic_ability_strength_max change:psionic_attack change:psionic_defense",async i=>{let t=await u(["psionic_ability_strength_max"]),o={},e=+t.psionic_ability_strength_max||0;o.psionic_attack_max=E(e/2).toFixed(1),o.psionic_defense_max=E(e/2).toFixed(1),await g(o,{silent:!0})});var en=async()=>{let i=await f("weapon"),t={};if(i.length===0){t.weapon_in_use="",t.weapon_in_use_speed="",t.weapon_in_use_misc="",await g(t,{silent:!0});return}let o=[],e=i.flatMap(a=>[`repeating_weapon_${a}_weapon_name`,`repeating_weapon_${a}_weapon_use`,`repeating_weapon_${a}_weapon_speed`,`repeating_weapon_${a}_weapon_misc`]),n=await u(e);if(i.forEach(a=>{let r=parseInt(n[`repeating_weapon_${a}_weapon_use`])||0;if(r===1){let s=n[`repeating_weapon_${a}_weapon_name`]||"Unknown",m=String(n[`repeating_weapon_${a}_weapon_speed`]||"0").match(/\d+/),h=m?parseInt(m[0]):0,l=n[`repeating_weapon_${a}_weapon_misc`]||"";o.push({id:a,name:s,inUse:r,speed:h,misc:l})}}),o.length>0){o.sort((r,s)=>r.speed-s.speed);let a=o[0];t.weapon_in_use=a.name,t.weapon_in_use_speed=a.speed,t.weapon_in_use_misc=a.misc}else t.weapon_in_use="",t.weapon_in_use_speed="",t.weapon_in_use_misc="";await g(t,{silent:!0})};on("change:repeating_weapon:weapon_name change:repeating_weapon:weapon_use change:repeating_weapon:weapon_speed change:repeating_weapon:weapon_misc remove:repeating_weapon",i=>{en()});var rt=async i=>{let t=await f(i),e=(await u([`_reporder_repeating_${i}`]))[`_reporder_repeating_${i}`]||"",a=(e?e.split(","):[]).filter(s=>t.includes(s.toLowerCase()));return[...new Set([...a,...t])]};on("clicked:spell-sort-alphabetical clicked:spell-sort-level",async i=>{let t=i.triggerName.replace("clicked:","");if(+(await u(["spells_sheet_busy"])).spells_sheet_busy!=1){await g({spells_sheet_busy:1});try{let e="spells",n=await rt(e),a=await f(e);if(a.length>0){let r=a.flatMap(w=>[`repeating_spells_${w}_spell_caster_class`,`repeating_spells_${w}_spell_level`,`repeating_spells_${w}_spell_name`]),s=await u(r),c={},m=a.map(w=>({id:w,casterClass:s[`repeating_spells_${w}_spell_caster_class`]||0,level:s[`repeating_spells_${w}_spell_level`],name:(s[`repeating_spells_${w}_spell_name`]||"").trim()})),h=w=>w==="?"?-1:w||0;t==="spell-sort-alphabetical"?m.sort((w,y)=>w.name.localeCompare(y.name,void 0,{sensitivity:"base"})):t==="spell-sort-level"&&m.sort((w,y)=>{let C=h(w.level),D=h(y.level);return w.casterClass-y.casterClass||C-D||w.name.localeCompare(y.name,void 0,{sensitivity:"base"})});let l=m.map(w=>`${w.id}`);setSectionOrder("spells",l),l.length>35?await qe(100):await qe(20);let p=[...new Set(n.map(w=>w.toLowerCase()))];c.spells_previous_order_array=p.join(","),await g(c,{silent:!0})}}catch(e){console.error("Error: Sort failed.",e)}finally{await g({spells_sheet_busy:0})}}});on("clicked:spell-sort-undo",async i=>{if(+(await u(["spells_sheet_busy"])).spells_sheet_busy!=1){await g({spells_sheet_busy:1});try{let o="spells",[e,n]=await Promise.all([u(["spells_previous_order_array"]),f(o)]),a=e.spells_previous_order_array||"";if(a){let r=new Set(n.map(c=>c.toLowerCase())),s=[...new Set(a.split(",").map(c=>c.toLowerCase()).filter(c=>r.has(c)))];setSectionOrder(o,s),await g({spells_previous_order_array:""},{silent:!0})}}catch(o){console.error("Error: Undo failed",o)}finally{await g({spells_sheet_busy:0})}}});on("clicked:equipment-sort-alphabetical clicked:equipment-sort-location",async i=>{let t=i.triggerName.replace("clicked:","");if(+(await u(["equipment_sheet_busy"])).equipment_sheet_busy!=1){await g({equipment_sheet_busy:1});try{let e="equipment",n=await rt(e),a=await f(e);if(a.length>0){let r=a.flatMap(p=>[`repeating_equipment_${p}_equipment_item`,`repeating_equipment_${p}_equipment_location`]),s=await u(r),c={},m=a.map(p=>({id:p,name:(s[`repeating_equipment_${p}_equipment_item`]||"").trim(),location:(s[`repeating_equipment_${p}_equipment_location`]||"").trim()}));t==="equipment-sort-alphabetical"?m.sort((p,w)=>p.name.localeCompare(w.name,void 0,{sensitivity:"base"})):t==="equipment-sort-location"&&m.sort((p,w)=>{let y=p.location.localeCompare(w.location,void 0,{sensitivity:"base"});return y!==0?y:p.name.localeCompare(w.name,void 0,{sensitivity:"base"})});let h=m.map(p=>p.id);setSectionOrder(e,h),h.length>35?await qe(100):await qe(20);let l=[...new Set(n.map(p=>p.toLowerCase()))];c.equipment_previous_order_array=l.join(","),await g(c,{silent:!0})}}catch(e){console.error("Error: Sort failed.",e)}finally{await g({equipment_sheet_busy:0})}}});on("clicked:equipment-sort-undo",async i=>{if(+(await u(["equipment_sheet_busy"])).equipment_sheet_busy!=1){await g({equipment_sheet_busy:1});try{let o="equipment",[e,n]=await Promise.all([u(["equipment_previous_order_array"]),f(o)]),a=e.equipment_previous_order_array||"";if(a){let r=new Set(n.map(c=>c.toLowerCase())),s=[...new Set(a.split(",").map(c=>c.toLowerCase()).filter(c=>r.has(c)))];setSectionOrder(o,s),await g({equipment_previous_order_array:""},{silent:!0})}}catch(o){console.error("Error: Undo failed.",o)}finally{await g({equipment_sheet_busy:0})}}});</script>
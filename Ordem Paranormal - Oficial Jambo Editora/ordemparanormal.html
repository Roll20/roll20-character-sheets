<div class="main">
    <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/ordem-paranormal-new-character-sheet/Ordem%20Paranormal%20-%20Oficial%20Jambo%20Editora/assets/OrdoRealitas.png" class="sheet-ordo-bg">
    <div class="sheet-container-sheet-main">
        <div class="tabs-container">
            <ul class="sheet-tabs">
                <li class="sheet-switch sheet-pj-tab">
                    <label>
                        <input id="cstype" class="hiddenelement" type="radio" name="attr_cstype" value="0" checked>
                        <span class="slider">Ficha de Agente</span>
                    </label>
                </li>
                <li class="sheet-switch sheet-info-tab">
                    <label>
                        <input id="cstype" class="hiddenelement" type="radio" name="attr_cstype" value="1">
                        <span class="slider">Características</span> 
                    </label>                   
                </li>
                <li class="sheet-switch sheet-ritual-tab">
                    <label>
                        <input id="cstype" class="hiddenelement" type="radio" name="attr_cstype" value="2">
                        <span class="slider">Rituais</span>  
                    </label>
                </li>
                <li class="sheet-switch sheet-invest-tab">
                    <label>
                        <input id="cstype" class="hiddenelement" type="radio" name="attr_cstype" value="3">
                        <span class="slider">Investigação</span>    
                    </label>                  
                </li>
            </ul>
        </div>
        <div class="character-tab">
            <div class="left-container">
                <div class="header-info">
                    <div class="input-with-text-bellow char-name">
                        <input name="attr_character_name" type="text" spellcheck="false"  value="">
                        <span data-i18n="nome">Personagem</span>
                    </div>
                    <div class="input-with-text-bellow char-player">
                        <input name="attr_playername" type="text" spellcheck="false" value=""/>
                        <span data-i18n="jogador">Jogador</span>
                    </div>
                </div>

                <div class="character-attributes">
                    <div class="sheet-attribute-values sheet-for-position">
                        <div class="sheet-attribute-center">                        
                            <input name="attr_for" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{for}" />
                            <button tabindex="-1" type="roll" name="attr_roll_for" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Força}}{{theroll=[[@{for}d20kh1]]}}" class="button-title-attribute sheet-roll-attribute" data-i18n="mod_forca">FOR</button>
                            <span class="sheet-span-fake-mod" name="attr_fakefor" title="@{for_fake}"></span> 
                        </div>
                    </div>
                    <div class="sheet-attribute-values sheet-agi-position">
                        <div class="sheet-attribute-center">                        
                            <input name="attr_agi" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{agi}" />
                            <button tabindex="-1" type="roll" name="attr_roll_agi" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Agilidade}}{{theroll=[[@{agi}d20kh1]]}}" class="button-title-attribute sheet-roll-attribute" data-i18n="mod_agilidade">AGI</button>
                            <span class="sheet-span-fake-mod" name="attr_fakeagi" title="@{agi_fake}"></span> 
                        </div>
                    </div>
                    <div class="sheet-attribute-values sheet-int-position">
                        <div class="sheet-attribute-center">                        
                            <input name="attr_int" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{int}" />
                            <button tabindex="-1" type="roll" name="attr_roll_int" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Inteligência}}{{theroll=[[@{int}d20kh1]]}}" class="button-title-attribute sheet-roll-attribute" data-i18n="mod_intelecto">INT</button>
                            <span class="sheet-span-fake-mod" name="attr_fakeint" title="@{int_fake}"></span> 
                        </div>
                    </div>
                    <div class="sheet-attribute-values sheet-pre-position">
                        <div class="sheet-attribute-center">                        
                            <input name="attr_pre" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{pre}" />
                            <button tabindex="-1" type="roll" name="attr_roll_pre" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Presença}}{{theroll=[[@{pre}d20kh1]]}}" class="button-title-attribute sheet-roll-attribute" data-i18n="mod_presenca">PRE</button>
                            <span class="sheet-span-fake-mod" name="attr_fakepre" title="@{pre_fake}"></span> 
                        </div>
                    </div>
                    <div class="sheet-attribute-values sheet-vig-position">
                        <div class="sheet-attribute-center">                        
                            <input name="attr_vig" type="text" spellcheck="false" maxlength="2" class="fake-mod" title="@{vig}" />
                            <button tabindex="-1" type="roll" name="attr_roll_vig" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Vigor}}{{theroll=[[@{vig}d20kh1]]}}" class="button-title-attribute sheet-roll-attribute" data-i18n="mod_vigor">VIG</button>
                            <span class="sheet-span-fake-mod" name="attr_fakevig" title="@{vig_fake}"></span> 
                        </div>
                    </div>
                </div> 
                <!--ORIGEM-->
                <div class="sheet-label-with-input sheet-origin">
                    <label class="grid-title pericias-titulo">Origem</label><input type="text" name="attr_background">
                </div>
                <!--CLASSE-->
                <div class="sheet-label-with-input sheet-class">
                    <div>
                        <label>Classe</label>
                        <label class="sheet-trilha-span">Trilha</label>
                    </div>
                    <div class="sheet-classe-trilha">
                        <input type="text" class="sheet-class-input sheet-triha-input" name="attr_classe">                        
                        <input type="text" name="attr_trilha">
                    </div>
                </div>
                <!--NEX DESLOC-->
                <div class="sheet-nex-desloc sheet-nex-desloc">
                    <div class="sheet-nex">
                        <div class="sheet-label-with-input sheet-nex-box">
                            <label class="sheet-label-nex-desloc">NEX</label>
                            <input type="text" name="attr_totalnex">
                            <span class="sheet-percent-box">%</span>                            
                        </div>
                        <div class="sheet-pe-rodada">
                            <input type="text" name="attr_perodada" readonly>
                            <span>PE/Rodada</span>
                        </div>            
                    </div>
                    <div class="sheet-label-with-input">
                        <label class="sheet-label-nex-desloc">DESL</label>
                        <input type="text" name="attr_deslocamento">
                    </div>
                </div>
                <!-- PV PE-->
                <div class="sheet-pv-pe">
                    <div class="sheet-pv-pe-value">
                        <input type="text" name="attr_pv">
                        <label class="sheet-big-span">PV</label>
                        <label class="sheet-label-uppercase">Pontos <br>de Vida</label>
                    </div>
                    <div class="sheet-pv-pe-value">
                        <input type="text" name="attr_pe">
                        <label class="sheet-big-span">PE</label>
                        <label class="sheet-label-uppercase">Pontos <br>de Esforço</label>
                    </div>
                    <div class="sheet-atuais">
                        <label class="sheet-pv-pe-span">Atuais</label>
                        <input type="text" class="sheet-atuais-pv-pe-input" name="attr_pvatuais">
                    </div>
                    <div class="sheet-atuais">
                        <label class="sheet-pv-pe-span">Atuais</label>
                        <input type="text" class="sheet-atuais-pv-pe-input" name="attr_peatuais">
                    </div>
                </div>
                <!-- DEF SAN-->
                <div class="sheet-def-san sheet-def-san">
                    <div class="sheet-defense">
                        <input class="sheet-big-defense" type="text" readonly="readonly" name="attr_defense" value="10">                    
                        <div class="sheet-defense-attributes">
                            <label class="sheet-def-title">Defesa</label>
                            <div class="signal">=</div>
                            <div class="big-signal">10</div>
                            <div class="signal">+</div>
                            <div class="big-signal"><span>AGI</span></div>
                            <div class="signal">+</div>
                            <div class="sheet-defense-input">
                                <input class="sheet-defense-input" type="text" name="attr_defequip" value="0">
                                <span>Equip.</span>
                            </div>
                            <div class="signal">+</div>
                            <div class="sheet-defense-input">
                                <input class="sheet-defense-input" type="text" name="attr_defoutros" value="0">
                                <span>Outros</span>
                            </div>    
                        </div>            
                    </div>
                    <div>
                        <div class="sheet-san-value">
                            <input type="text" name="attr_sanidade">
                            <div>
                                <label class="sheet-big-span-san">SAN</label>
                                <label class="sheet-low-span-san">Sanidade</label>
                            </div>
                        </div>
                        <div class="sheet-atuais">
                            <label class="sheet-pv-pe-span">Atuais</label>
                            <input type="text" name="attr_sanatual">
                        </div>
                    </div>
                </div>

                <!-- Esquiva / Bloqueio -->
                <div class="sheet-esquiv-block">
                    <div class="sheet-esquiva">
                        <span>ESQUIVA</span>
                        <input type="text" name="attr_esquiva" readonly="1" value="0">
                        <div class="signal">+</div>
                        <input type="text" name="attr_esquivabonus" value="0">
                    </div>
                    <div class="sheet-bloqueio">
                        <span>BLOQUEIO</span>
                        <input type="text" name="attr_bloqueio" readonly="1" value="0">
                        <div class="signal">+</div>
                        <input type="text" name="attr_bloqueiobonus" value="0">
                    </div>
                </div>

                <div class="sheet-prot-resist">
                    <div class="sheet-protec">
                        <label>PROTEÇÃO</label>
                        <input type="text" name="attr_protecao">
                    </div>
                    <div class="sheet-resist">
                        <label>RESISTÊNCIAS</label>
                        <input type="text" name="attr_resistencias">
                    </div>
                </div>
                
            </div> 
        
        
            <div class="right-container">
                <div class="logo-level">
                    <div class="container-logo">
                        <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/ordem-paranormal-new-character-sheet/Ordem%20Paranormal%20-%20Oficial%20Jambo%20Editora/assets/Logo%20OrdemParanormal.png" class="logo-tormenta"/>
                    </div>
                </div>
                <div class="skills-container">
                    <div class="container-negative-corner">                    
                        <div class="inside-negative-corner">
                            <div class="sheet-title-skills">Perícias</div>
                            <div class="skill-grid-template header">
                                <div class="grid-title">Perícia</div>
                                <div class="grid-title">ATRIBUTO</div>                                
                                <div></div>
                                <div class="grid-title" data-i18n="dados">DADOS</div>
                                <div></div>
                                <div class="small-title">BÔNUS</div>
                                <div></div>
                                <div class="small-title">Treino</div>
                                <div></div>
                                <div class="small-title">Outros</div>
                            </div>
                            <div class="skill-grid-template skill-list">
                                <!-- Acrobacia -->        
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollacrobacia" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Acrobacia}}{{theroll=[[1d20+[[@{acrobaciatotal}]]]]}}" class="skill-button">
                                        <span class="sup-penalidade" data-i18n="acrobacia">Acrobacia+</span>
                                    </button>
                                </div>
                                <select name="attr_acrobaciaatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" selected data-i18n="mod_agilidade">AGI*</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>                                    
                                </select> 
                                <div class="signal"></div>
                                <input class="total first" name="attr_acrobaciatotal" maxlength="2" type="text" spellcheck="false" title="@{acrobaciatotal}" value="@{acrobaciaatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total first" name="attr_acrobaciabonus" maxlength="2" type="text" spellcheck="false" title="@{acrobaciabonus}" value="@{acrobaciatreino} + @{acrobaciaoutros}" disabled="true">
                                <div class="signal">+</div>
                                <select name="attr_acrobaciatreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>                                
                                <div class="signal">+</div>
                                <input name="attr_acrobaciaoutros" maxlength="3" type="text" spellcheck="false" title="@{acrobaciaoutros}" value="0">                                
                                <!-- Adestramento -->     
                                <div class="skill-name">
                                    <button type="roll"  name="attr_rolladestramento" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Adestramento}}{{theroll=[[1d20+[[@{adestramentototal}]]]]}}" class="skill-button">
                                        <span class="sup-treinada" data-i18n="adestramento">Adestramento*</span>
                                    </button>
                                </div>
                                <select name="attr_adestramentoatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" selected data-i18n="mod_presenca">PRE</option>                                    
                                </select>
                                <div class="signal"></div>
                                <input class="total last" name="attr_adestramentototal" maxlength="2" type="text" spellcheck="false" title="@{adestramentoatributo2}" value="@{adestramentoatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total first" name="attr_adestramentobonus" maxlength="2" type="text" spellcheck="false" title="@{adestramentotreino}" value="@{adestramentotreino} + @{adestramentooutros}" disabled="true">
                                <div class="signal">+</div>
                                <select name="attr_adestramentotreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>
                                <div class="signal">+</div>
                                <input name="attr_adestramentooutros" maxlength="3" type="text" spellcheck="false" title="@{adestramentooutros}" value="0">
                                
                                <!-- Artes -->  
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollartes" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Atuação}}{{theroll=[[1d20+[[@{artestotal}]]]]}}" class="skill-button">
                                        <span data-i18n="artes">Artes*</span>
                                    </button>
                                </div>
                                <select name="attr_artesatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" selected data-i18n="mod_presenca">PRE</option>
                                </select>                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_artestotal" maxlength="2" type="text" spellcheck="false" title="@{artesatributo2}" value="@{artesatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_artesbonus" maxlength="2" type="text" spellcheck="false" title="@{artestreino}" value="@{artestreino} + @{artesoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_artestreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>
                                <div class="signal">+</div>
                                <input name="attr_artesoutros" maxlength="3" type="text" spellcheck="false" title="@{artesoutros}" value="0">
                                
                                <!-- Atletismo -->
                                <div class="skill-name">
                                    <button type="roll"  name="attr_rollatletismo" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Atletismo}}{{theroll=[[1d20+[[@{atletismototal}]]]]}}" class="skill-button">
                                        <span data-i18n="atletismo">Atletismo</span>
                                    </button>
                                </div>
                                <select name="attr_atletismoatributo2">
                                    <option value="@{for}" selected data-i18n="mod_forca">FOR*</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>
                                </select>                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_atletismototal" maxlength="2" type="text" spellcheck="false" title="@{atletismototal}" value="@{atletismoatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_atletismobonus" maxlength="2" type="text" spellcheck="false" title="@{atletismobonus}" value="@{atletismotreino} + @{atletismooutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_atletismotreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>
                                <div class="signal">+</div>
                                <input name="attr_atletismooutros" maxlength="3" type="text" spellcheck="false" title="@{atletismooutros}" value="0">
                                                        
                                <!-- Atualidades  -->                                
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollatualidades" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=atualidades}}{{theroll=[[1d20+[[@{atualidadestotal}]]]]}}" class="skill-button">
                                        <span class="sup-treinada" data-i18n="atualidades">Atualidades</span>
                                    </button>
                                </div>
                                <select name="attr_atualidadesatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" selected data-i18n="mod_intelecto">INT*</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>                                      
                                </select>
                                <div class="signal"></div>
                                <input class="total last" name="attr_atualidadestotal" maxlength="2" type="text" spellcheck="false" title="@{atualidadestotal}" value="@{atualidadesatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_atualidadesbonus" maxlength="2" type="text" spellcheck="false" title="@{atualidadesbonus}" value="@{atualidadestreino} + @{atualidadesoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_atualidadestreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>
                                <div class="signal">+</div>
                                <input name="attr_atualidadesoutros" maxlength="3" type="text" spellcheck="false" title="@{atualidadesoutros}" value="0">
                                
                                <!-- Ciências -->                               
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollciencias" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=ciencias}}{{theroll=[[1d20+[[@{cienciastotal}]]]]}}" class="skill-button">
                                        <span data-i18n="ciencias">Ciências*</span>
                                    </button>
                                </div>
                                <select name="attr_cienciasatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" selected data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE*</option>
                                    
                                </select>
                                <div class="signal"></div>
                                <input class="total last" name="attr_cienciastotal" maxlength="2" type="text" spellcheck="false" title="@{cienciastotal}" value="@{cienciasatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_cienciasbonus" maxlength="2" type="text" spellcheck="false" title="@{cienciastreino}" value="@{cienciastreino} + @{cienciasoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_cienciastreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_cienciasoutros" maxlength="3" type="text" spellcheck="false" title="@{cienciasoutros}" value="0">
                                
                                <!-- Crime -->                                
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollcrime" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=crime}}{{theroll=[[1d20+[[@{crimetotal}]]]]}}" class="skill-button">
                                        <span data-i18n="crime">Crime*+</span>
                                    </button>
                                </div>
                                <select name="attr_crimeatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" selected data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                <div class="signal"></div>
                                <input class="total last" name="attr_crimetotal" maxlength="2" type="text" spellcheck="false" title="@{crimetotal}" value="@{crimeatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_crimebonus" maxlength="2" type="text" spellcheck="false" title="@{adestramentototal}" value="@{crimetreino} + @{crimeoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_crimetreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_crimeoutros" maxlength="3" type="text" spellcheck="false" title="@{crimeoutros}" value="0">
                                
                                <!-- Diplomacia -->                                
                                <div class="skill-name">
                                    <button type="roll" name="attr_rolldiplomacia" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Enganação}}{{theroll=[[1d20+[[@{enganacaototal}]]]]}}" class="skill-button">
                                        <span data-i18n="diplomacia">Diplomacia</span>
                                    </button>
                                </div>
                                <select name="attr_diplomaciaatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" selected data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                <div class="signal"></div>
                                <input class="total last" name="attr_diplomaciatotal" maxlength="2" type="text" spellcheck="false" title="@{enganacaototal}" value="@{diplomaciaatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_diplomaciabonus" maxlength="2" type="text" spellcheck="false" title="@{diplomaciabonus}" value="@{diplomaciatreino} + @{diplomaciaoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_diplomaciatreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_diplomaciaoutros" maxlength="3" type="text" spellcheck="false" title="@{diplomaciaoutros}" value="0">
                                
                                <!-- Enganação -->                                
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollenganacao" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Enganação}}{{theroll=[[1d20+[[@{enganacaototal}]]]]}}" class="skill-button">
                                        <span data-i18n="enganacao">Enganação</span>
                                    </button>
                                </div>
                                <select name="attr_enganacaoatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">CON</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" selected data-i18n="mod_presenca">PRE*</option>  
                                    
                                </select>
                                <div class="signal"></div>
                                <input class="total last" name="attr_enganacaototal" maxlength="2" type="text" spellcheck="false" title="@{enganacaototal}" value="@{enganacaoatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_enganacaobonus" maxlength="2" type="text" spellcheck="false" title="@{enganacaobonus}" value="@{enganacaotreino} + @{enganacaooutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_enganacaotreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_enganacaooutros" maxlength="3" type="text" spellcheck="false" title="@{enganacaooutros}" value="0">
                                <!-- Fortitude -->                                
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollfortitude" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Fortitude}}{{theroll=[[1d20+[[@{fortitudetotal}]]]]}}" class="skill-button">
                                        <span data-i18n="fortitude">Fortitude</span>
                                    </button>
                                </div>
                                <select name="attr_fortitudeatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" selected data-i18n="mod_vigor">CON*</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                <div class="signal"></div>
                                <input class="total last" name="attr_fortitudetotal" maxlength="2" type="text" spellcheck="false" title="@{fortitudetotal}" value="@{fortitudeatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_fortitudebonus" maxlength="2" type="text" spellcheck="false" title="@{fortitudebonus}" value="@{fortitudetreino} + @{fortitudeoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_fortitudetreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_fortitudeoutros" maxlength="3" type="text" spellcheck="false" title="@{fortitudeoutros}" value="0">
                                                                
                                <!-- Furtividade -->                                
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollfurtividade" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Furtividade}}{{theroll=[[1d20+[[@{furtividadetotal}]]]]}}" class="skill-button">
                                        <span class="sup-penalidade" data-i18n="furtividade">Furtividade+</span>
                                    </button>
                                </div>
                                <select name="attr_furtividadeatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" selected data-i18n="mod_agilidade">AGI*</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                <div class="signal"></div>
                                <input class="total last" name="attr_furtividadetotal" maxlength="2" type="text" spellcheck="false" title="@{furtividadetotal}" value="@{furtividadeatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_furtividadebonus" maxlength="2" type="text" spellcheck="false" title="@{furtividadebonus}" value="@{furtividadetreino} + @{furtividadeoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_furtividadetreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_furtividadeoutros" maxlength="3" type="text" spellcheck="false" title="@{furtividadeoutros}" value="0">
                                                                     
                                <!-- Iniciativa -->                                
                                <div class="skill-name">
                                    <button type="roll" name="attr_rolliniciativa" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Iniciativa}}{{theroll=[[1d20+[[@{iniciativatotal}]] &{tracker}]]}}" class="skill-button">
                                        <span data-i18n="iniciativa">Iniciativa</span>
                                    </button>
                                </div>
                                <select name="attr_iniciativaatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" selected data-i18n="mod_agilidade">AGI*</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                <div class="signal"></div>
                                <input class="total last" name="attr_iniciativatotal" maxlength="2" type="text" spellcheck="false" title="@{iniciativatotal}" value="@{iniciativaatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_iniciativabonus" maxlength="2" type="text" spellcheck="false" title="@{iniciativabonus}" value="@{iniciativatreino} + @{iniciativaoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_iniciativatreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_iniciativaoutros" maxlength="3" type="text" spellcheck="false" title="@{iniciativaoutros}" value="0">
                                
                                <!-- Intimidação -->                                
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollintimidacao" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Intimidação}}{{theroll=[[1d20+[[@{intimidacaototal}]]]]}}" class="skill-button">
                                        <span data-i18n="intimidacao">Intimidação</span>
                                    </button>
                                </div>
                                <select name="attr_intimidacaoatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" selected data-i18n="mod_presenca">PRE</option>                                    
                                </select>
                                <div class="signal"></div>
                                <input class="total last" name="attr_intimidacaototal" maxlength="2" type="text" spellcheck="false" title="@{intimidacaototal}" value="@{intimidacaoatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_intimidacaobonus" maxlength="2" type="text" spellcheck="false" title="@{intimidacaobonus}" value="@{intimidacaotreino} + @{intimidacaooutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_intimidacaotreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_intimidacaooutros" maxlength="3" type="text" spellcheck="false" title="@{intimidacaooutros}" value="0">
                                
                                <!-- Intuição -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollintuicao" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Intuição}}{{theroll=[[1d20+[[@{intuicaototal}]]]]}}" class="skill-button">
                                        <span data-i18n="intuicao">Intuição</span>
                                    </button>
                                </div>
                                <select name="attr_intuicaoatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" selected data-i18n="mod_presenca">PRE*</option>                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_intuicaototal" maxlength="2" type="text" spellcheck="false" title="@{intuicaototal}" value="@{intuicaoatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_intuicaobonus" maxlength="2" type="text" spellcheck="false" title="@{intuicaobonus}" value="@{intuicaotreino} + @{intuicaooutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_intuicaotreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_intuicaooutros" maxlength="3" type="text" spellcheck="false" title="@{intuicaooutros}" value="0">
                                
                                <!-- Investigação -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollinvestigacao" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Investigação}}{{theroll=[[1d20+[[@{investigacaototal}]]]]}}" class="skill-button">
                                        <span data-i18n="investigacao">Investigação</span>
                                    </button>
                                </div>
                                <select name="attr_investigacaoatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" selected data-i18n="mod_intelecto">INT*</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_investigacaototal" maxlength="2" type="text" spellcheck="false" title="@{investigacaototal}" value="@{investigacaoatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_investigacaobonus" maxlength="2" type="text" spellcheck="false" title="@{investigacaototal}" value="@{investigacaotreino} + @{investigacaooutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_investigacaotreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_investigacaooutros" maxlength="3" type="text" spellcheck="false" title="@{investigacaooutros}" value="0">
                                
                                <!-- Luta -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollluta" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Luta}}{{theroll=[[1d20+[[@{lutatotal}]]]]}}" class="skill-button">
                                        <span data-i18n="luta">Luta</span>
                                    </button>
                                </div>
                                <select name="attr_lutaatributo2">
                                    <option value="@{for}" selected data-i18n="mod_forca">FOR*</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_lutatotal" maxlength="2" type="text" spellcheck="false" title="@{lutatotal}" value="@{lutaatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_lutabonus" maxlength="2" type="text" spellcheck="false" title="@{lutabonus}" value="@{lutatreino} + @{lutaoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_lutatreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_lutaoutros" maxlength="3" type="text" spellcheck="false" title="@{lutaoutros}" value="0">
                                
                                <!-- Medicina -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollmedicina" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=medicina}}{{theroll=[[1d20+[[@{medicinatotal}]]]]}}" class="skill-button">
                                        <span class="sup-treinada" data-i18n="medicina">medicina</span>
                                    </button>
                                </div>
                                <select name="attr_medicinaatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" selected data-i18n="mod_intelecto">INT*</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_medicinatotal" maxlength="2" type="text" spellcheck="false" title="@{medicinatotal}" value="@{medicinaatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_medicinabonus" maxlength="2" type="text" spellcheck="false" title="@{medicinabonus}" value="@{medicinatreino} + @{medicinaoutros}" disabled="true">
                               
                                <div class="signal">+</div>
                                <select name="attr_medicinatreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_medicinaoutros" maxlength="3" type="text" spellcheck="false" title="@{medicinaoutros}" value="0">
                                
                                <!-- Ocultismo -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollocultismo" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=ocultismo}}{{theroll=[[1d20+[[@{ocultismototal}]]]]}}" class="skill-button">
                                        <span class="sup-treinada" data-i18n="ocultismo">ocultismo*</span>
                                    </button>
                                </div>
                                <select name="attr_ocultismoatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" selected data-i18n="mod_intelecto">INT*</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option> 
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_ocultismototal" maxlength="2" type="text" spellcheck="false" title="@{ocultismototal}" value="@{ocultismoatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_ocultismobonus" maxlength="2" type="text" spellcheck="false" title="@{ocultismobonus}" value="@{ocultismotreino} + @{ocultismooutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_ocultismotreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_ocultismooutros" maxlength="3" type="text" spellcheck="false" title="@{ocultismooutros}" value="0">
                                
                                <!-- Percepção -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollpercepcao" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Percepção}}{{theroll=[[1d20+[[@{percepcaototal}]]]]}}" class="skill-button">
                                        <span data-i18n="percepcao">Percepção</span>
                                    </button>
                                </div>
                                <select name="attr_percepcaoatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" selected data-i18n="mod_presenca">PRE*</option>
                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_percepcaototal" maxlength="2" type="text" spellcheck="false" title="@{percepcaototal}" value="@{percepcaoatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_percepcaobonus" maxlength="2" type="text" spellcheck="false" title="@{percepcaotreino}" value="@{percepcaotreino} + @{percepcaooutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_percepcaotreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_percepcaooutros" maxlength="3" type="text" spellcheck="false" title="@{percepcaooutros}" value="0">
                                
                                <!-- Pilotagem -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollpilotagem" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Pilotagem}}{{theroll=[[1d20+[[@{pilotagemtotal}]]]]}}" class="skill-button">
                                        <span class="sup-treinada" data-i18n="pilotagem">Pilotagem*</span>
                                    </button>
                                </div>
                                <select name="attr_pilotagematributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" selected data-i18n="mod_agilidade">AGI*</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_pilotagemtotal" maxlength="2" type="text" spellcheck="false" title="@{pilotagemtotal}" value="@{pilotagematributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_pilotagembonus" maxlength="2" type="text" spellcheck="false" title="@{pilotagembonus}" value="@{pilotagemtreino} + @{pilotagemoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_pilotagemtreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_pilotagemoutros" maxlength="3" type="text" spellcheck="false" title="@{pilotagemoutros}" value="0">
                                
                                <!-- Pontaria -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollpontaria" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Pontaria}}{{theroll=[[1d20+[[@{pontariatotal}]]]]}}" class="skill-button">
                                        <span data-i18n="pontaria">Pontaria</span>
                                    </button>
                                </div>
                                <select name="attr_pontariaatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" selected data-i18n="mod_agilidade">AGI*</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_pontariatotal" maxlength="2" type="text" spellcheck="false" title="@{pontariatotal}" value="@{pontariaatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_pontariabonus" maxlength="2" type="text" spellcheck="false" title="@{pontariabonus}" value="@{pontariatreino} + @{pontariaoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_pontariatreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_pontariaoutros" maxlength="3" type="text" spellcheck="false" title="@{pontariaoutros}" value="0">
                                
                                <!-- Profissão -->
                                <div class="profissao">
                                    <button type="roll" name="attr_rollprofissao1" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Ofício @{profissao1nome}}}{{theroll=[[1d20+[[@{profissao1total}]]]]}}" class="skill-button">
                                        <span data-i18n="profissao">Profissão*</span>
                                    </button>
                                    <input class="nome-profissao1" name="attr_profissao1nome" type="text" spellcheck="false">
                                </div>
                                <select name="attr_profissao1atributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" selected data-i18n="mod_intelecto">INT*</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_profissao1total" maxlength="2" type="text" spellcheck="false" title="@{profissao1total}" value="@{profissao1atributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_profissao1bonus" maxlength="2" type="text" spellcheck="false" title="@{profissao1bonus}" value="@{profissao1treino} + @{profissao1outros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_profissao1treino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_profissao1outros" maxlength="3" type="text" spellcheck="false" title="@{profissao1outros}" value="0">
                                
                                <!-- Profissão 2 -->
                                <div class="profissao">
                                    <button type="roll" name="attr_rollprofissao2" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Ofício @{profissao2nome}}}{{theroll=[[1d20+[[@{profissao2total}]]]]}}" class="skill-button">
                                        <span data-i18n="profissao">Profissão*</span>
                                    </button>
                                    <input class="nome-profissao2" name="attr_profissao2nome" type="text" spellcheck="false">
                                </div>
                                <select name="attr_profissao2atributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" selected data-i18n="mod_intelecto">INT*</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_profissao2total" maxlength="2" type="text" spellcheck="false" title="@{profissao2total}" value="@{profissao2atributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_profissao2bonus" maxlength="2" type="text" spellcheck="false" title="@{profissao2bonus}" value="@{profissao2treino} + @{profissao2outros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_profissao2treino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_profissao2outros" maxlength="3" type="text" spellcheck="false" title="@{profissao2outros}" value="0">
                                
                                <!-- Reflexos -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollreflexos" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Reflexos}}{{theroll=[[1d20+[[@{reflexostotal}]]]]}}" class="skill-button">
                                        <span data-i18n="reflexos">Reflexos</span>
                                    </button>
                                </div>
                                <select name="attr_reflexosatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" selected data-i18n="mod_agilidade">AGI*</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE</option>  
                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_reflexostotal" maxlength="2" type="text" spellcheck="false" title="@{reflexostotal}" value="@{reflexosatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_reflexosbonus" maxlength="2" type="text" spellcheck="false" title="@{reflexosbonus}" value="@{reflexostreino} + @{reflexosoutros}" disabled="true">
                               
                                <div class="signal">+</div>
                                <select name="attr_reflexostreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_reflexosoutros" maxlength="3" type="text" spellcheck="false" title="@{reflexosoutros}" value="0">
                                
                                <!-- Religião -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollreligiao" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Religião}}{{theroll=[[1d20+[[@{religiaototal}]]]]}}" class="skill-button">
                                        <span class="sup-treinada" data-i18n="religiao">Religião*</span>
                                    </button>
                                </div>
                                <select name="attr_religiaoatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" selected data-i18n="mod_presenca">PRE*</option>
                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_religiaototal" maxlength="2" type="text" spellcheck="false" title="@{religiaototal}" value="@{religiaoatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_religiaobonus" maxlength="2" type="text" spellcheck="false" title="@{religiaobonus}" value="@{religiaotreino} + @{religiaooutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_religiaotreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_religiaooutros" maxlength="3" type="text" spellcheck="false" title="@{religiaooutros}" value="0">
                                
                                <!-- Sobrevivência -->                                
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollsobrevivencia" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Sobrevivência}}{{theroll=[[1d20+[[@{sobrevivenciatotal}]]]]}}" class="skill-button">
                                        <span data-i18n="sobrevivencia">Sobrevivência</span>
                                    </button>
                                </div>
                                <select name="attr_sobrevivenciaatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" selected data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE*</option>
                                    
                                </select>
                                <div class="signal"></div>
                                <input class="total last" name="attr_sobrevivenciatotal" maxlength="2" type="text" spellcheck="false" title="@{sobrevivenciatotal}" value="@{sobrevivenciaatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_sobrevivenciabonus" maxlength="2" type="text" spellcheck="false" title="@{sobrevivenciabonus}" value="@{sobrevivenciatreino} + @{sobrevivenciaoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_sobrevivenciatreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_sobrevivenciaoutros" maxlength="3" type="text" spellcheck="false" title="@{sobrevivenciaoutros}" value="0">
                                
                                <!-- Tática -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rolltatica" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Tática}}{{theroll=[[1d20+[[@{taticatotal}]]]]}}" class="skill-button">
                                        <span data-i18n="tatica">Tática*</span>
                                    </button>
                                </div>
                                <select name="attr_taticaatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" selected data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE*</option>
                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_taticatotal" maxlength="2" type="text" spellcheck="false" title="@{taticatotal}" value="@{taticaatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_taticabonus" maxlength="2" type="text" spellcheck="false" title="@{taticabonus}" value="@{taticatreino} + @{taticaoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_taticatreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_taticaoutros" maxlength="3" type="text" spellcheck="false" title="@{taticaoutros}" value="0">
                                
                                <!-- Tecnologia -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rolltecnologia" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Tecnologia}}{{theroll=[[1d20+[[@{tecnologiatotal}]]]]}}" class="skill-button">
                                        <span data-i18n="tecnologia">Tecnologia*</span>
                                    </button>
                                </div>
                                <select name="attr_tecnologiaatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" selected data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" data-i18n="mod_presenca">PRE*</option>
                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_tecnologiatotal" maxlength="2" type="text" spellcheck="false" title="@{tecnologiatotal}" value="@{tecnologiaatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_tecnologiabonus" maxlength="2" type="text" spellcheck="false" title="@{tecnologiabonus}" value="@{tecnologiatreino} + @{tecnologiaoutros}" disabled="true">
                               
                                <div class="signal">+</div>
                                <select name="attr_tecnologiatreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_tecnologiaoutros" maxlength="3" type="text" spellcheck="false" title="@{tecnologiaoutros}" value="0">
                                
                                <!-- Vontade -->
                                <div class="skill-name">
                                    <button type="roll" name="attr_rollvontade" value="&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=Vontade}}{{theroll=[[1d20+[[@{vontadetotal}]]]]}}" class="skill-button">
                                        <span data-i18n="vontade">Vontade</span>
                                    </button>
                                </div>
                                <select name="attr_vontadeatributo2">
                                    <option value="@{for}" data-i18n="mod_forca">FOR</option>
                                    <option value="@{agi}" data-i18n="mod_agilidade">AGI</option>
                                    <option value="@{vig}" data-i18n="mod_vigor">VIG</option>
                                    <option value="@{int}" data-i18n="mod_intelecto">INT</option>
                                    <option value="@{pre}" selected data-i18n="mod_presenca">PRE*</option>                                    
                                </select>
                                
                                <div class="signal"></div>
                                <input class="total last" name="attr_vontadetotal" maxlength="2" type="text" spellcheck="false" title="@{vontadetotal}" value="@{vontadeatributo2}" disabled="true">
                                <div class="signal">=</div>
                                <input class="total last" name="attr_vontadebonus" maxlength="2" type="text" spellcheck="false" title="@{vontadebonus}" value="@{vontadetreino} + @{vontadeoutros}" disabled="true">
                                
                                <div class="signal">+</div>
                                <select name="attr_vontadetreino">
                                    <option value="0" selected>Não Treinado</option>
                                    <option value="5">Treinado</option>
                                    <option value="10">Veterano</option>
                                    <option value="15">Expert</option>                                  
                                </select>  
                                <div class="signal">+</div>
                                <input name="attr_vontadeoutros" maxlength="3" type="text" spellcheck="false" title="@{vontadeoutros}" value="0">


                                <div class="legenda-pericias">
                                    <i>+</i> <span data-i18n="penalidade_armadura">Penalidade de Armadura</span> 
                                    <i>*</i> <span data-i18n="somente_treinada">Somente Treinada</span>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
                
            </div>

            <!--Attacks-->
            <div class="attacks-container">
                <div class="inside">
                    <div class="container-negative-corner">
                        <div class="inside-negative-corner">
                            <!-- <div class="default-title">Ataques</div> -->
                            <div class="attacksgrid">
                                <div></div>
                                <div class="grid-title grid-header" data-i18n="nome_do_ataque">Nome do Ataque</div>
                                <div class="small-title grid-header" data-i18n="bonus_ataque">Bônus de Ataque</div>
                                <div class="small-title grid-header" data-i18n="dano">Dano</div>
                                <div class="small-title grid-header" data-i18n="dano_extra">Dano Extra</div>
                                <div class="small-title grid-header" data-i18n="dado_extra">Dados Extra</div>
                                <div class="small-title grid-header" data-i18n="critico">Crítico</div>
                            </div>
                                <!-- Ataques -->
                                <fieldset class="repeating_attacks"> 
                                    <div class="attacksgrid">
                                        <button type="roll" name="attr_roll_attack" class="buttonrollataque dado-simples" value="&{template:ordem-paranormal-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[1d20kh1cs>@{margemcriticoataque}+[[@{lutatreino} + @{lutaoutros}]]+0]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{dadoextraataque}+@{modatributodano}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}">T</button> 
                                        <input name="attr_nomeataque" type="text" spellcheck="false" class="" value="">
                                        <input name="attr_bonusataque" type="text" spellcheck="false" class="" value="0">
                                        <input name="attr_danoataque" type="text" spellcheck="false" class="" value="0">
                                        <input name="attr_danoextraataque" type="text" spellcheck="false" class="" value="0">
                                        <input name="attr_dadoextraataque" type="text" spellcheck="false" class="" value="0">
                                        <div class="containercritico">
                                            <input name="attr_margemcriticoataque" type="text" spellcheck="false" class="margem" value="20">
                                            <span class="divisor"><b>/</b>x</span>
                                            <input name="attr_multiplicadorcriticoataque" type="text" spellcheck="false" class="multiplicador" value="2">
                                        </div>
                                        <input type="hidden" name="attr_danocriticoataque" value="0" readonly="1">

                                        <div class="moreinfo">
                                            <input type="checkbox" class="hiddencheckbox">
                                            <span class="hiddencheckboxcover"></span>
                                            <div class="containermoreinfo">
                                                <!-- <div class="containerdescrataque">
                                                    <div class="title">Descrição</div>
                                                    <textarea name="attr_proficiencias"></textarea>
                                                </div> -->
                                                <div class="inputtextbellow descricao">
                                                    <input name="attr_ataquedescricao" type="text" spellcheck="false" value=""/>
                                                    <span class="title" data-i18n="descricao_macros">Descrição / Macros</span>
                                                </div>
                                                <div class="inputtextbellow sheet-pericialuta">
                                                    <select name="attr_ataquepericia">
                                                        <option value="luta" selected="">Luta</option>
                                                        <option value="pontaria">Pontaria</option>
                                                        <option value="ocultismo">Ocultismo</option>
                                                    </select>
                                                    <span class="title" data-i18n="pericia_utilizada">Perícia utilizada</span>
                                                </div>
                                                <div class="inputtextbellow sheet-tipodano">
                                                    <input name="attr_ataquetipodedano" type="text" spellcheck="false" value=""/>
                                                    <span class="title" data-i18n="tipo_de_dano">Tipo de Dano</span>
                                                </div>
                                                <div class="inputtextbellow sheet-alcance">
                                                    <input name="attr_ataquealcance" type="text" spellcheck="false" value=""/>
                                                    <span class="title" data-i18n="alcance">Alcance</span>
                                                </div>
                                                
                                                <div class="inputtextbellow">
                                                    <select name="attr_modatributodano">
                                                        <option value="0" selected="">Nenhum</option>
                                                        <option value="@{for}">Força</option>
                                                        <option value="@{agi}">Agilidade</option>
                                                        <option value="@{vig}">Vigor</option>
                                                        <option value="@{int}">Intelecto</option>
                                                        <option value="@{pre}">Presença</option>
                                                    </select>
                                                    <span class="title" data-i18n="atributo_no_dano">Atributo no Dano</span>
                                                </div>                                                
                                            </div>
                                            <!-- <div class="bottomline"></div> -->
                                        </div>
                                    </div> 
                                    
                                    
                                </fieldset>

                                <!-- Ataques -->
                        </div>
                    </div>
                </div>
                
            </div>
            
        </div> 
        <div class="powers-container">
            <div class="sheet-powers">
                <div class="powersgrid">
                    <div class="sheet-title-skills">Habilidades</div>
                    <div class="sheet-title-cost">Custo</div>
                </div>
                <!-- Habilidades -->
                <fieldset class="repeating_powers">                     
                    <div class="container-ability-power">
                        <button type="roll" name="roll_ability" class="buttonshowinfo" value="&{template:ordem-paranormal-skill}{{infoname=@{powername}}}{{cost=@{powercost}}}{{description=@{powerdescription}}}">q</button>
                        <input name="attr_powername" type="text" spellcheck="false" value=""/>
                        <input name="attr_powercost" type="text" spellcheck="false" class="" value="0">
                        <input type="checkbox" class="hiddencheckbox">
                        <span class="hiddencheckboxcover">W</span>
                        <div class="extra">
                            <textarea name="attr_powerdescription"></textarea>
                        </div>
                    </div>
                </fieldset>    
            </div>
            <div class="sheet-inventary">
                <div class="sheet-inventary-title">
                    <div class="sheet-title-inventary">
                        <span>INVENTÁRIO</span>
                    </div>
                    <div class="sheet-prestigy">
                        <span>PONTOS DE PRESTIGIO</span>
                        <input type="text" name="attr_prestigypoints" value="0">
                    </div>
                    <div class="sheet-patent">
                        <span>PATENTE</span>
                        <input type="text" name="attr_patent" readonly="1">
                    </div>
                </div>
                <div class="sheet-itens-info">
                    <div class="sheet-item-limit">
                        <span>LIMITE<br>DE ITENS</span>
                        <input type="text" placeholder="I" name="attr_itemI">
                        <input type="text" placeholder="II" name="attr_itemII">
                        <input type="text" placeholder="III" name="attr_itemIII">
                        <input type="text" placeholder="IV" name="attr_itemIV">
                    </div>
                    <div class="sheet-credit-limit">
                        <span>LIMITE DE CRÉDITO</span>
                        <input type="text" name="attr_credit_limit">
                    </div>
                    <div>
                        <div class="sheet-load-limit">
                            <span>CARGA ATUAL<br>E EXTRA</span>
                            <input type="text" name="attr_carga" type="text" spellcheck="false" value="0" readonly="1">
                            <input type="text" name="attr_extraslot" type="text" spellcheck="false" value="0" class="sheet-edit-input">
                        </div>
                        <div class="sheet-load-limit">
                            <span>CARGA MAX.</span>
                            <input type="text" name="attr_limite" type="text" spellcheck="false" value="@{limite}" readonly="1">
                            <input type="text" name="attr_maxima" type="text" spellcheck="false" value="@{maxima}" readonly="1">
                        </div>                        
                    </div>
                </div>
                <div class="sheet-equipment">
                    <div class="grid-equipment">
                        <div class="small-title">QTD.</div>
                        <div class="grid-title">ITEM</div>
                        <div class="small-title">CATEGORIA</div>
                        <div class="small-title">Espaços</div>
                    </div>
                    
                    <fieldset class="repeating_equipment">
                        <div class="grid-equipment">                            
                            <input name="attr_equipquantity" type="text" spellcheck="false" value="1">
                            <input name="attr_equipname" class="equipment-input" type="text" spellcheck="false" value="">
                            <input name="attr_equipcategory" type="text" spellcheck="false" value="">
                            <input name="attr_equipslot" type="text" spellcheck="false" value="0" >
                        </div>
                    </fieldset>
                </div>
                <div class="sheet-description">
                    <div class="sheet-title-skills">DESCRIÇÃO</div>
                    <div class="sheet-description-grid">
                        <div>
                            <span>APARENCIA</span>
                            <textarea name="attr_appearance"></textarea>
                        </div>
                        <div>
                            <span>PERSONALIDADE</span>
                            <textarea name="attr_personality"></textarea>
                        </div>
                        <div>
                            <span>HISTÓRICO</span>
                            <textarea name="attr_history"></textarea>
                        </div>
                        <div>
                            <span>OBJETIVO</span>
                            <textarea name="attr_objective"></textarea>
                        </div>
                    </div>
                </div>
            </div>
                        
        </div>
        <div class="rituals-container">
            <div class="rituals-title">
                <div>
                    <span class="sheet-rituals-title-span">
                        Rituais
                    </span>
                </div>
                <div class="sheet-dt-ritual">
                    <span class="sheet-rituals-dt-span">Dificuldade do Teste</span>
                    <input class="sheet-rituals-dt-input" type="text" name="attr_dt" readonly="1">
                </div>
            </div>
            <div class="content-grid">
                <div class="spellcolumn">
                        <div class="cicloheader">
                            <div class="ciclo-title" data-i18n="primeiro_circulo">1º Círculo</div>
                            <div class="ciclo-cost" data-i18n="primeiro_custo">1 PM</div>
                        </div>
                        <div class="sheet-containerspelllist">
                            <fieldset class="repeating_spells1">
                                
                                <div class="container-single-spell">
                                    <button type="roll" name="roll_spell1" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{tiporitual}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=[[@{dt}+@{bonusdt}]]}} {{custoparanormal=[[21+?{Ritual|Base, 0|Discente, @{spelldiscentecusto}|Verdadeiro, @{spellverdadeiracusto}} ]]}} {{rolagemcusto=[[@{int}d20kh1+@{ocultismobonus}]]}} {{spelldiscentedescription=@{spelldiscentedescription} }} {{spellverdadeiradescription=@{spellverdadeiradescription}}}">T</button>
                                    <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                    <input type="checkbox" class="hiddencheckbox">
                                    <span class="hiddencheckboxcover">W</span>
                                    <div class="extra">
                                        <select class="tiporitual" name="attr_tiporitual">
                                            <option value="Conhecimento">CONHECIMENTO</option>
                                            <option value="Energia">ENERGIA</option>
                                            <option value="Morte">MORTE</option>
                                            <option value="Sangue">SANGUE</option>
                                            <option value="Medo">MEDO</option>
                                        </select>

                                        <span data-i18n="bonus_dt">Bônus DT</span>
                                        <input  class="singleline" name="attr_bonusdt" type="text" spellcheck="false" value="0"/>    
                                        <span  data-i18n="execucao_magia">Execução</span>
                                        <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="alcance_magia">Alcance</span>
                                        <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="duracao_magia">Duração</span>
                                        <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                        <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="resistencia_magia">Resistência</span>
                                        <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>
    
                                        <span class="fullline" data-i18n="descricao_magia">Descrição</span>
                                        <textarea class="fullline" name="attr_spelldescription"></textarea>

                                        <span class="fullline sheet-bold" data-i18n="discente_magia">Discente</span>
                                        <span data-i18n="custo">Custo</span>
                                        <input lass="singleline" name="attr_spelldiscentecusto" type="text" spellcheck="false" value="">
                                        <textarea class="fullline" name="attr_spelldiscentedescription"></textarea>

                                        <span class="fullline sheet-bold" data-i18n="verdadeira_magia">Verdadeira</span>
                                        <span data-i18n="custo">Custo</span>
                                        <input lass="singleline" name="attr_spellverdadeiracusto" type="text" spellcheck="false" value="">
                                        <textarea class="fullline" name="attr_spellverdadeiradescription"></textarea>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        
    
                        <div class="cicloheader">
                            <div class="ciclo-title" data-i18n="terceiro_circulo">3º Círculo</div>
                            <div class="ciclo-cost" data-i18n="terceiro_custo">6 PM</div>
                        </div>
                        <div class="sheet-containerspelllist">
                            <fieldset class="repeating_spells3">
                                <div class="container-single-spell">
                                    <button type="roll" name="roll_spell3" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{tiporitual}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=[[@{dt}+@{bonusdt}]]}} {{custoparanormal=[[26+?{Ritual|Base, 0|Discente, @{spelldiscentecusto}|Verdadeiro, @{spellverdadeiracusto}} ]]}} {{rolagemcusto=[[@{int}d20kh1+@{ocultismobonus}]]}} {{spelldiscentedescription=@{spelldiscentedescription} }} {{spellverdadeiradescription=@{spellverdadeiradescription}}}">T</button>
                                    <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                    <input type="checkbox" class="hiddencheckbox">
                                    <span class="hiddencheckboxcover">W</span>
                                    <div class="extra">
                                        <select class="tiporitual" name="attr_tiporitual">
                                            <option value="Conhecimento">CONHECIMENTO</option>
                                            <option value="Energia">ENERGIA</option>
                                            <option value="Morte">MORTE</option>
                                            <option value="Sangue">SANGUE</option>
                                            <option value="Medo">MEDO</option>
                                        </select>

                                        <span data-i18n="bonus_dt">Bônus DT</span>
                                        <input  class="singleline" name="attr_bonusdt" type="text" spellcheck="false" value="0"/>      
                                        <span data-i18n="execucao_magia">Execução</span>
                                        <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="alcance_magia">Alcance</span>
                                        <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="duracao_magia">Duração</span>
                                        <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                        <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="resistencia_magia">Resistência</span>
                                        <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>
    
                                        <span class="fullline" data-i18n="descricao_magia">Descrição</span>
                                        <textarea class="fullline" name="attr_spelldescription"></textarea>

                                        <span class="fullline" data-i18n="discente_magia">Discente</span>
                                        <span data-i18n="custo">Custo</span>
                                        <input lass="singleline" name="attr_spelldiscentecusto" type="text" spellcheck="false" value="">
                                        <textarea class="fullline" name="attr_spelldiscentedescription"></textarea>
                                        
                                        <span class="fullline" data-i18n="verdadeira_magia">Verdadeira</span>
                                        <span data-i18n="custo">Custo</span>
                                        <input lass="singleline" name="attr_spellverdadeiracusto" type="text" spellcheck="false" value="">
                                        <textarea class="fullline" name="attr_spellverdadeiradescription"></textarea>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                </div>
                <div class="spellcolumn">
                        <div class="cicloheader">
                            <div class="ciclo-title" data-i18n="segundo_circulo">2º Círculo</div>
                            <div class="ciclo-cost" data-i18n="segundo_custo">3 PM</div>
                        </div>
                        <div class="sheet-containerspelllist">
                            <fieldset class="repeating_spells2">
                                <div class="container-single-spell">
                                    <button type="roll" name="roll_spell2" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{tiporitual}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=[[@{dt}+@{bonusdt}]]}} {{custoparanormal=[[23+?{Ritual|Base, 0|Discente, @{spelldiscentecusto}|Verdadeiro, @{spellverdadeiracusto}} ]]}} {{rolagemcusto=[[@{int}d20kh1+@{ocultismobonus}]]}} {{spelldiscentedescription=@{spelldiscentedescription} }} {{spellverdadeiradescription=@{spellverdadeiradescription}}}">T</button>
                                    <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                    <input type="checkbox" class="hiddencheckbox">
                                    <span class="hiddencheckboxcover">W</span>
                                    <div class="extra">
                                        <select class="tiporitual" name="attr_tiporitual">
                                            <option value="Conhecimento">CONHECIMENTO</option>
                                            <option value="Energia">ENERGIA</option>
                                            <option value="Morte">MORTE</option>
                                            <option value="Sangue">SANGUE</option>
                                            <option value="Medo">MEDO</option>
                                        </select>

                                        <span data-i18n="bonus_dt">Bônus DT</span>
                                        <input  class="singleline" name="attr_bonusdt" type="text" spellcheck="false" value="0"/>      
                                        <span data-i18n="execucao_magia">Execução</span>
                                        <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="alcance_magia">Alcance</span>
                                        <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="duracao_magia">Duração</span>
                                        <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                        <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="resistencia_magia">Resistência</span>
                                        <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>
    
                                        <span class="fullline" data-i18n="descricao_magia">Descrição</span>
                                        <textarea class="fullline" name="attr_spelldescription"></textarea>

                                        <span class="fullline" data-i18n="discente_magia">Discente</span>
                                        <span data-i18n="custo">Custo</span>
                                        <input lass="singleline" name="attr_spelldiscentecusto" type="text" spellcheck="false" value="">
                                        <textarea class="fullline" name="attr_spelldiscentedescription"></textarea>
                                        
                                        <span class="fullline" data-i18n="verdadeira_magia">Verdadeira</span>
                                        <span data-i18n="custo">Custo</span>
                                        <input lass="singleline" name="attr_spellverdadeiracusto" type="text" spellcheck="false" value="">
                                        <textarea class="fullline" name="attr_spellverdadeiradescription"></textarea>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        <div class="cicloheader">
                            <div class="ciclo-title" data-i18n="quarto_circulo">4º Círculo</div>
                            <div class="ciclo-cost" data-i18n="quarto_custo">10 PM</div>
                        </div>
                        <div class="sheet-containerspelllist">
                            <fieldset class="repeating_spells4">
                                <div class="container-single-spell">
                                    <button type="roll" name="roll_spell4" class="buttonspell" value="&{template:spell}{{character=@{character_name}}}{{spellname=@{namespell}}}{{type=@{tiporitual}}}{{execution=@{spellexecucao}}}{{duration=@{spellduracao}}}{{range=@{spellalcance}}}{{targetarea=@{spellalvoarea}}}{{resistance=@{spellresistencia}}}{{description=@{spelldescription}}}{{cd=[[@{dt}+@{bonusdt}]]}} {{custoparanormal=[[30+?{Ritual|Base, 0|Discente, @{spelldiscentecusto}|Verdadeiro, @{spellverdadeiracusto}} ]]}} {{rolagemcusto=[[@{int}d20kh1+@{ocultismobonus}]]}} {{spelldiscentedescription=@{spelldiscentedescription} }} {{spellverdadeiradescription=@{spellverdadeiradescription}}}">T</button>
                                    <input name="attr_namespell" type="text" spellcheck="false" value=""/>
                                    <input type="checkbox" class="hiddencheckbox">
                                    <span class="hiddencheckboxcover">W</span>
                                    <div class="extra">
                                        <select class="tiporitual" name="attr_tiporitual">
                                            <option value="Conhecimento">CONHECIMENTO</option>
                                            <option value="Energia">ENERGIA</option>
                                            <option value="Morte">MORTE</option>
                                            <option value="Sangue">SANGUE</option>
                                            <option value="Medo">MEDO</option>
                                        </select>
    
                                        <span data-i18n="bonus_dt">Bônus DT</span>
                                        <input  class="singleline" name="attr_bonusdt" type="text" spellcheck="false" value="0"/>  
                                        <span data-i18n="execucao_magia">Execução</span>
                                        <input  class="singleline" name="attr_spellexecucao" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="alcance_magia">Alcance</span>
                                        <input class="singleline" name="attr_spellalcance" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="duracao_magia">Duração</span>
                                        <input class="singleline" name="attr_spellduracao" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="alvo_area_magia">Alvo/Área</span>
                                        <input class="singleline" name="attr_spellalvoarea" type="text" spellcheck="false" value=""/>
                                        <span data-i18n="resistencia_magia">Resistência</span>
                                        <input class="singleline"  name="attr_spellresistencia" type="text" spellcheck="false" value=""/>
    
                                        <span data-i18n="descricao_magia" class="fullline">Descrição</span>
                                        <textarea class="fullline" name="attr_spelldescription"></textarea>

                                        <span class="fullline" data-i18n="discente_magia">Discente</span>
                                        <span data-i18n="custo">Custo</span>
                                        <input lass="singleline" name="attr_spelldiscentecusto" type="text" spellcheck="false" value="">
                                        <textarea class="fullline" name="attr_spelldiscentedescription"></textarea>
                                        
                                        <span class="fullline" data-i18n="verdadeira_magia">Verdadeira</span>
                                        <span data-i18n="custo">Custo</span>
                                        <input lass="singleline" name="attr_spellverdadeiracusto" type="text" spellcheck="false" value="">
                                        <textarea class="fullline" name="attr_spellverdadeiradescription"></textarea>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
                        
                </div>
            </div>
        </div>
        <div class="investigation-container">            
            <div class="sheet-investigation-title">
                <div class="sheet-investigation-title-text">
                    <div class="sheet-invest-tittle">Investigação</div>
                    <div class="sheet-case-span">CASOS</div>
                </div>
                <div class="sheet-logo-realitas">
                    <img src="https://raw.githubusercontent.com/RoenMidnight/roll20-character-sheets/ordem-paranormal-new-character-sheet/Ordem%20Paranormal%20-%20Oficial%20Jambo%20Editora/assets/OrdoRealitas.png" class="logo-ordorealitas"/>
                </div>
            </div>
            <!-- INVESTIGAÇÃO -->
            <div class="sheet-investigation-repeating">                
                <fieldset class="repeating_investigation">                     
                    <div class="container-ability-power">
                        <input name="attr_casename" type="text" spellcheck="false" value=""/>
                        <input type="checkbox" class="hiddencheckbox">
                        <span class="hiddencheckboxcover">W</span>
                        <div class="extra">
                            <div class="sheet-extra-div-first">
                                <div>
                                    <label>RESUMO</label>
                                    <textarea name="attr_casesummary"></textarea>
                                </div>
                                <div>
                                    <label>PERGUNTAS</label>
                                    <textarea name="attr_casequestion"></textarea>
                                </div>
                                <div>
                                    <label>OBJETIVO</label>
                                    <textarea name="attr_caseobject"></textarea>
                                </div>
                            </div>
                            <div class="sheet-extra-div-second">
                                <label>PISTAS</label>
                                <textarea name="attr_casetrack"></textarea>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
    
      
    <div class="hide-author">
        <input type="text" spellcheck="false" name="attr_created_by_linki" value="">
        <span>FICHA OFICIAL BY JAMBO EDITORA</span>
    </div>
    

</div>
<!-- Bonus de Treino -->
<input type="hidden" name="attr_bonus_treino" value="0" readonly="1">
<input type="hidden" name="attr_penalidades_armadura" value="0" readonly="1">
<input type="hidden" name="attr_penalidades_armadura_carga" value="0" readonly="1">
<input type="hidden" name="attr_metade_do_nivel" value="floor(@{charnivel}/2)">
<!-- <input name="attr_character_name" type="hidden" spellcheck="false"> -->
<input name="attr_charname" type="hidden" spellcheck="false" value=""/>
<input type="hidden" name="attr_vida_max" value="@{vidatotal} + @{vidatemp}" readonly/>
<input type="hidden" name="attr_mana_max" value="@{manatotal} + @{manatemp}" readonly/>
<input name="attr_defesatotal" maxlength="3" type="hidden" value="10" spellcheck="false">



<!-- ROLL TEMPLATES -->

<rolltemplate class="sheet-rolltemplate-ordem-paranormal">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            <div class="roll-title">
                {{character}}
            </div>
            <div class="roll-result">
                {{theroll}}
            </div>
            <div class="roll-name">
                <span>{{rollname}}</span>
            </div>
        </div>
    </div>
</rolltemplate>


<rolltemplate class="sheet-rolltemplate-ordem-paranormal-attack">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            {{#character}}
            <div class="roll-title">
                {{character}}
            </div>
            {{/character}}
            <div class="attack-title">
                {{attackname}}
            </div>

            <div>
                <div class="roll">
                    {{attackroll}}
                </div>
                <div class="roll-label">
                    Ataque
                </div>
            </div>
            <div class="divisor"><span></span></div>
            <div>
                {{#^rollWasCrit() attackroll}}
                    <div class="roll">
                        {{damageroll}}
                    </div>
                    <div class="roll-label">
                        Dano
                    </div>
                {{/^rollWasCrit() attackroll}}
                {{#rollWasCrit() attackroll}}
                    <div class="roll">
                        {{criticaldamageroll}}
                    </div>
                    <div class="roll-label">
                        Dano <span class="crit"> (Crítico)</span>
                    </div>
                {{/rollWasCrit() attackroll}}
            </div>

            {{#typeofdamage}}
            <div class="tipo-dano">
                {{typeofdamage}}
            </div>
            {{/typeofdamage}}

            {{#description}}
            <div class="descricao">
                {{description}}
            </div>
            {{/description}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-ordem-paranormal-info">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            <div class="roll-title">
                {{infoname}}
            </div>
            {{#description}}
            <div class="descricao">
                {{description}}
            </div>
            {{/description}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-ordem-paranormal-skill">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            <div class="roll-title">
                {{infoname}}
            </div>
            {{#cost}}
            <div class="sheet-custo">
                <span>Custo: </span>{{cost}}
            </div>
            {{/cost}}
            {{#description}}
            <div class="descricao">
                {{description}}
            </div>
            {{/description}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-spell">
    <div class="sheet-spell-container">
        <div class="spellbox">
            <div class="roll-title">
                {{character}}
            </div>
            <div class="spell-name">
                {{spellname}}
            </div>
            <div class="spell-grid">
                {{#type}}
                <div class="spell-atribute">
                    <span>Elemento: </span>{{type}}
                </div>
                {{/type}}

                {{#execution}}
                <div class="spell-atribute">
                    <span>Execução: </span>{{execution}}
                </div>
                {{/execution}}

                {{#duration}}
                <div class="spell-atribute">
                    <span>Duração: </span>{{duration}}
                </div>
                {{/duration}}

                {{#range}}
                <div class="spell-atribute">
                    <span>Alcance: </span>{{range}}
                </div>
                {{/range}}

                {{#targetarea}}
                <div class="spell-atribute">
                    <span>Alvo/Área: </span>{{targetarea}}
                </div>
                {{/targetarea}}

                {{#resistance}}
                <div class="spell-atribute">
                    <span>Resistência: </span>{{resistance}} {{#cd}}(CD{{cd}}){{/cd}}
                </div>
                {{/resistance}}

                {{#custoparanormal}}
                <div class="spell-atribute">
                    <span>DT - Custo do Paranormal: </span>{{custoparanormal}}
                </div>
                {{/custoparanormal}}

                {{#rolagemcusto}}
                <div class="spell-atribute">
                    <span>Resultado do Teste: </span>{{rolagemcusto}}
                </div>
                {{/rolagemcusto}}

                {{#description}}
                <div class="descricao">
                    {{description}}
                </div>
                {{/description}}

                {{#spelldiscentedescription}}
                <div class="descricao">
                    {{spelldiscentedescription}}
                </div>
                {{/spelldiscentedescription}}

                {{#spellverdadeiradescription}}
                <div class="descricao">
                    {{spellverdadeiradescription}}
                </div>
                {{/spellverdadeiradescription}}
            </div>
        </div>
    </div>
</rolltemplate>


<rolltemplate class="sheet-rolltemplate-custom">
    <div class="sheet-rollbox-container">
        <div class="rollbox">
            <div class="roll-title">
                {{name}}
            </div>
            {{#secondname}}
            <div class="secondname">
                {{secondname}}
            </div>
            {{/secondname}}
            {{#theroll}}
                <div class="props">
                    <div class="content"><b>{{rollname}}</b> {{theroll}}</div>
                </div>
            {{/theroll}}
            {{#rollWasCrit() theroll}}
                {{#ifcritical}}
                    <div class="props">
                        <div class="content"><b>{{criticalname}}</b> {{ifcritical}}</div>
                    </div>
                {{/ifcritical}}
            {{/rollWasCrit() theroll}}
            {{#^rollWasCrit() theroll}}
                {{#ifcriticalerror}}
                    {{#rollWasFumble() theroll}}
                        {{#ifcriticalerror}}
                            <div class="props">
                                <div class="content"><b>{{criticalname}}</b> {{ifcriticalerror}}</div>
                            </div>
                        {{/ifcriticalerror}}
                    {{/rollWasFumble() theroll}}

                    {{#^rollWasFumble() theroll}}
                        {{#notcritical}}
                            <div class="props">
                                <div class="content"><b>{{criticalname}}</b> {{notcritical}}</div>
                            </div>
                        {{/notcritical}}
                    {{/^rollWasFumble() theroll}}
                {{/ifcriticalerror}}

                {{#^ifcriticalerror}}
                    {{#notcritical}}
                        <div class="props">
                            <div class="content"><b>{{criticalname}}</b> {{notcritical}}</div>
                        </div>
                    {{/notcritical}}
                {{/^ifcriticalerror}}


            {{/^rollWasCrit() theroll}}
            <div class="props">
                {{#allprops() name criticalname ifcritical ifcriticalerror description notcritical theroll rollname secondname}}
                   <div class="content"><b>{{key}}</b> {{value}}</div>
                {{/allprops() name criticalname ifcritical ifcriticalerror description notcritical theroll rollname secondname}}
            </div>
            {{#description}}
                <div class="descricao">
                    {{description}}
                </div>
            {{/description}}
        </div>
    </div>
</rolltemplate>



<script type="text/worker">
//SetRollType
['for', 'agi', 'vig', 'int', 'pre'].forEach(stat => {
    on(`sheet:opened change:${stat}`, function(){
        getAttrs([stat, `roll_${stat}`], function(v){
            let stat_value = isNaN(parseInt(v[stat])) ? 0 : v[stat];   
            
            let dict_atribute = {
                "for": "Força",
                "agi": "Agilidade",
                "vig": "Vigor",
                "int": "Intelecto",
                "pre": "Presença"
            }

            setAttrs({[`roll_${stat}`]: stat_value > 0 ? `&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=${dict_atribute[stat]}}}{{theroll=[[@{${stat}}d20kh1]]}}` : `&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=${dict_atribute[stat]}}}{{theroll=[[2d20kl1]]}}`})

            if(stat == 'for'){                    
                repeatingSumModified("carga","equipment",["equipquantity","equipslot"], "");   
            }
        });
    });
});

//Skills
//Perícias
['acrobacia','adestramento','artes','atletismo','atualidades','ciencias','crime','diplomacia','enganacao','fortitude','furtividade',
'iniciativa','intimidacao','intuicao','investigacao','luta','medicina','ocultismo','percepcao','pilotagem','pontaria',
'profissao1','profissao2','reflexos','religiao','sobrevivencia','tatica','tecnologia','vontade',
].forEach(skill => {
    on(`sheet:opened change:for change:agi change:vig change:int change:pre
    change:${skill}atributo2 change:${skill}treino change:${skill}outros change:${skill}bonus change:protecaopenalidade1 change:protecaopenalidade2 change:protecaopenalidade3 change:penalidades_protecao_carga`, function(){
    getAttrs([
        `${skill}atributo2`, `${skill}bonus`, `${skill}outros`, `${skill}treino`,
        "for", "agi", "int", "pre", "vig",
        "protecaopenalidade1","protecaopenalidade2","protecaopenalidade3",
        "penalidades_protecao_carga"
    ], function(x){
        const penalidade1 = !isNaN(x[`protecaopenalidade1`]) ? parseInt(x['protecaopenalidade1']) : 0
        const penalidade2 = !isNaN(x[`protecaopenalidade2`]) ? parseInt(x['protecaopenalidade2']) : 0
        const penalidade3 = !isNaN(x[`protecaopenalidade3`]) ? parseInt(x['protecaopenalidade3']) : 0

        const penalidadeCarga = !isNaN(x[`penalidades_protecao_carga`]) ? parseInt(x['penalidades_protecao_carga']) : 0

        //const totalPenalidades = penalidade1 + penalidade2 + penalidade3

        let dict_skills = {
            'acrobacia':"Acrobacia", 'adestramento': "Adestramento", 'artes': "Artes", 'atletismo': "Atletismo", 'atualidades': "Atualidades",
            'ciencias': "Ciências", 'crime': "Crime", 'diplomacia': "Diplomacia", 'enganacao': "Enganação", 'fortitude': "Fortitude", 'furtividade': "Furtividade",
            'iniciativa': "Iniciativa", 'intimidacao': "Intimidação", 'intuicao': "Intuição", 'investigacao': 'Investigação', 'luta': "Luta",
            'medicina': "Medicina", 'ocultismo': "Ocultismo", 'percepcao': "Percepção", 'pilotagem': "Pilotagem", 'pontaria': "Pontaria",
            'profissao1': "Profissão",'profissao2': "Profissão2", 'reflexos': "Reflexos", 'religiao': "Religião",
            'sobrevivencia': "Sobrevivência", 'tatica': "Tática", 'tecnologia': "Tecnologia", 'vontade': "Vontade"            
        }

        let rawAttr = x[`${skill}atributo2`].replace('@{','').replace('}', '').trim();
        let bonus = x[`${skill}bonus`];
        let outros = x[`${skill}outros`];

        let skillTotal = `${bonus} - ${penalidadeCarga}`;

        console.log(x[`rawAttr`], x[`${skill}atributo2`], skill);
        
        setAttrs({[`roll${skill}`]: x[`${rawAttr}`] > 0 ?
                `&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=${dict_skills[skill]}}}{{theroll=[[(${x[`${rawAttr}`]})d20kh1+${skillTotal}]]}}` :
                `&{template:ordem-paranormal}{{character=@{character_name}}}{{rollname=${dict_skills[skill]}}}{{theroll=[[2d20kl1+${skillTotal}]]}}`
        });

        
        });
    });
});

//PERODADA
on("sheet:opened change:totalnex", function(e){
    getAttrs(["totalnex", "perodada"], function(x){
        let pe_rodada = x["totalnex"] == 99 ? 20 : Math.floor(x["totalnex"]/5);
        setAttrs({["perodada"]: pe_rodada});
    });
});

//DEFESA
on("sheet:opened change:agi change:defequip change:defoutros", function(e){
    getAttrs(["agi", "defesa", "defequip", "defoutros"], function(x){
        let agi = isNaN(parseInt(x["agi"])) ? 0 : parseInt(x["agi"]);
        let defequip = isNaN(parseInt(x["defequip"])) ? 0 : parseInt(x["defequip"]);
        let defoutros = isNaN(parseInt(x["defoutros"])) ? 0 : parseInt(x["defoutros"]);

        console.log(agi, defequip, defoutros);

        let defesa_total = 10 + agi + defequip + defoutros;
        setAttrs({["defense"]: defesa_total});
    });
});

//ESQUIVA E BLOQUEIO
on("sheet:opened change:defense change:reflexosoutros change:agi change:fortitudeoutros change:vig change:fortitudetreino change:reflexostreino change:esquivabonus change:bloqueiobonus", function(e){
    getAttrs(["esquiva", "bloqueio", "reflexosoutros", "fortitudeoutros", "esquivabonus", "reflexosbonus", "vig", "agi", "fortitudetreino", "reflexostreino", "defense", "bloqueiobonus"], function(x){
        console.log("Entrou");
        let fort_train = isNaN(parseInt(x["fortitudetreino"])) ? 0 : parseInt(x["fortitudetreino"]);
        let for_others = isNaN(parseInt(x["fortitudeoutros"])) ? 0 : parseInt(x["fortitudeoutros"]);
        let reflex_train = isNaN(parseInt(x["reflexostreino"])) ? 0 : parseInt(x["reflexostreino"]);
        let reflex_others = isNaN(parseInt(x["reflexosoutros"])) ? 0 : parseInt(x["reflexosoutros"]);
        let final_def = isNaN(parseInt(x["defense"])) ? 0 : parseInt(x["defense"]);

        let block_bonus = isNaN(parseInt(x["bloqueiobonus"])) ? 0 : parseInt(x["bloqueiobonus"]);
        let evade_bonus = isNaN(parseInt(x["esquivabonus"])) ? 0 : parseInt(x["esquivabonus"]);

        console.log(reflex_train, reflex_others);

        if(fort_train > 0){
            let bloqueio_final = for_others + fort_train + block_bonus;
            setAttrs({["bloqueio"]: bloqueio_final});
        } else {
            setAttrs({["bloqueio"]: 0});
        }

        if(reflex_train > 0){
            let esquiva_final = reflex_train + reflex_others + evade_bonus + final_def;
            setAttrs({["esquiva"]: esquiva_final});
        } else {
            setAttrs({["esquiva"]: 0});
        }
    });
});


//DT
on("sheet:opened change:pre change:perodada", function(e){
    getAttrs(["pre", "dt", "perodada"], function(x){
        let pre = isNaN(parseInt(x["pre"])) ? 0 : parseInt(x["pre"]);
        let perodada = isNaN(parseInt(x["perodada"])) ? 0 : parseInt(x["perodada"]);
        
        let dt_final = 10 + pre + perodada;
        setAttrs({["dt"]: dt_final});
    });
});


//Navegação
on("sheet:opened change:cstype change:resistemp", function(e){
    getAttrs(["cstype"], function(v){            
        if (v.cstype == 0) {
            $20('.sheet-character-tab').removeClass('sheet-hiddenelement');
            $20('.sheet-powers-container').addClass('sheet-hiddenelement');
            $20('.sheet-rituals-container').addClass('sheet-hiddenelement');
            $20('.sheet-investigation-container').addClass('sheet-hiddenelement');

            $20('.sheet-pj-tab').addClass('sheet-slider-selected'); 
            $20('.sheet-info-tab').removeClass('sheet-slider-selected'); 
            $20('.sheet-ritual-tab').removeClass('sheet-slider-selected'); 
            $20('.sheet-invest-tab').removeClass('sheet-slider-selected');
        }

        if (v.cstype == 1){
            $20('.sheet-powers-container').removeClass('sheet-hiddenelement');
            $20('.sheet-character-tab').addClass('sheet-hiddenelement');            
            $20('.sheet-rituals-container').addClass('sheet-hiddenelement');
            $20('.sheet-investigation-container').addClass('sheet-hiddenelement');

            $20('.sheet-pj-tab').removeClass('sheet-slider-selected'); 
            $20('.sheet-info-tab').addClass('sheet-slider-selected'); 
            $20('.sheet-ritual-tab').removeClass('sheet-slider-selected'); 
            $20('.sheet-invest-tab').removeClass('sheet-slider-selected');
        }               

        if (v.cstype == 2){
            $20('.sheet-rituals-container').removeClass('sheet-hiddenelement');
            $20('.sheet-powers-container').addClass('sheet-hiddenelement');
            $20('.sheet-character-tab').addClass('sheet-hiddenelement');
            $20('.sheet-investigation-container').addClass('sheet-hiddenelement');

            $20('.sheet-pj-tab').removeClass('sheet-slider-selected'); 
            $20('.sheet-info-tab').removeClass('sheet-slider-selected'); 
            $20('.sheet-ritual-tab').addClass('sheet-slider-selected'); 
            $20('.sheet-invest-tab').removeClass('sheet-slider-selected');
        }

        if (v.cstype == 3){
            $20('.sheet-investigation-container').removeClass('sheet-hiddenelement');
            $20('.sheet-powers-container').addClass('sheet-hiddenelement');
            $20('.sheet-rituals-container').addClass('sheet-hiddenelement');
            $20('.sheet-character-tab').addClass('sheet-hiddenelement');      
            
            $20('.sheet-pj-tab').removeClass('sheet-slider-selected'); 
            $20('.sheet-info-tab').removeClass('sheet-slider-selected'); 
            $20('.sheet-ritual-tab').removeClass('sheet-slider-selected'); 
            $20('.sheet-invest-tab').addClass('sheet-slider-selected');      
        }
            
    });
});

//Critico
on("sheet:opened change:repeating_attacks:nomeataque change:repeating_attacks:bonusataque change:repeating_attacks:danoataque change:repeating_attacks:danoextraataque change:repeating_attacks:dadoextraataque change:repeating_attacks:margemcriticoataque change:repeating_attacks:multiplicadorcriticoataque change:repeating_attacks:danocriticoataque change:repeating_attacks:ataquedescricao change:repeating_attacks:ataquetipodedano change:repeating_attacks:ataquealcance change:repeating_attacks:modatributodano", function() {
    getAttrs([
        "repeating_attacks_danoataque",
        "repeating_attacks_multiplicadorcriticoataque",
        "repeating_attacks_danoextraataque",
        "repeating_attacks_dadoextraataque",
        "repeating_attacks_modatributodano",
        "for", "agi", "vig", "int", "pre"
    ], function(v) {
        let dano = '';
            
        if(typeof v.repeating_attacks_danoataque === 'string'){
            dano = v.repeating_attacks_danoataque;
        } else {
            dano = v.repeating_attacks_danoataque.toString();
        }

        let multiplicador = parseInt(v.repeating_attacks_multiplicadorcriticoataque) - 1;
        let resultado = dano;
                
        for(let i=0; i < multiplicador; i++){
            resultado = resultado + " + " + dano;
        }

        console.log("Resultado:"+resultado);
                        
        setAttrs({
            "repeating_attacks_danocriticoataque": resultado
        });
    });
});

//Ataque
on("sheet:opened change:repeating_attacks:nomeataque change:repeating_attacks:bonusataque change:repeating_attacks:danoataque change:repeating_attacks:danoextraataque change:repeating_attacks:dadoextraataque change:repeating_attacks:margemcriticoataque change:repeating_attacks:multiplicadorcriticoataque change:repeating_attacks:danocriticoataque change:repeating_attacks:ataquedescricao change:repeating_attacks:ataquetipodedano change:repeating_attacks:ataquealcance change:repeating_attacks:modatributodano", function() {
    getAttrs([
        "repeating_attacks_ataquepericia",
        "repeating_attacks_bonusataque",
        "repeating_attacks_roll_attack",
        "for", "agi", "vig", "int", "pre",
        "lutaatributo2", "lutabonus", "lutaoutros",
        "pontariaatributo2", "pontariabonus", "pontariaoutros",
        "ocultismoatributo2", "ocultismobonus", "ocultismooutros"
    ], function(v) {          
        getSectionIDs("attacks", function(idarray) {
            //for(var i=0; i < idarray.length; i++) {
                let dict_skills = {
                    'luta': "Luta", 'ocultismo': "Ocultismo", 'pontaria': "Pontaria"         
                }
        
                let skill = v.repeating_attacks_ataquepericia;  
                console.log(skill);     
                let rawAttr = v[`${skill}atributo2`].replace('@{','').replace('}', '').trim();
                console.log(rawAttr);
                let bonus = v[`${skill}bonus`];
                console.log(bonus);
                let bonusataque = v.repeating_attacks_bonusataque;
                console.log(bonusataque);

                //console.log("repeating_attacks_"+idarray[i]+"_roll_attack");
                
                setAttrs({["repeating_attacks_roll_attack"]: v[`${rawAttr}`] > 0 ?
                        `&{template:ordem-paranormal-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[(${v[`${rawAttr}`]})d20kh1cs>@{margemcriticoataque}+[[${bonus}]]+${bonusataque}]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}+@{dadoextraataque}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{danoextraataque}+@{dadoextraataque}+@{modatributodano}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}` :
                        `&{template:ordem-paranormal-attack}{{character=@{character_name}}}{{attackname=@{nomeataque}}}{{attackroll=[[2d20kl1cs>@{margemcriticoataque}+[[${bonus}]]+${bonusataque}]]}} {{damageroll=[[@{danoataque}+@{modatributodano}+@{danoextraataque}+@{dadoextraataque}]]}} {{criticaldamageroll=[[@{danocriticoataque}+@{danoextraataque}+@{dadoextraataque}+@{modatributodano}]]}}{{typeofdamage=@{ataquetipodedano}}}{{description=@{ataquedescricao}}}`
                });
            //}
         });                
    });
});

//Patentes
on("sheet:opened change:prestigypoints", function(e){
    getAttrs(["prestigypoints", "patent"], function(v){
        let prestigy = parseInt(v["prestigypoints"]);
        let pattent = "Recruta";

        if(prestigy > 19){ pattent = "Operador"; }
        if(prestigy > 49){ pattent = "Agente Especial"; }
        if(prestigy > 99){ pattent = "Oficial de Operações"; }
        if(prestigy > 199){ pattent = "Agente de Elite"; }
        
        setAttrs({["patent"]: pattent});
    });
})

//CARGA
on("sheet:opened change:extraslot", function(e){
    repeatingSumModified("carga","equipment",["equipquantity","equipslot"], ""); 
});

//Calculando carga e seus efeitos:
on('sheet:opened change:repeating_equipment remove:repeating_equipment', function() {
    repeatingSumModified("carga","equipment",["equipquantity","equipslot"], "");        
});

const repeatingSumModified = (destination,section, fields, appendText = '', multiplier = 1) => {
    if (!Array.isArray(fields)) fields = [fields];
    getSectionIDs(`repeating_${section}`, idArray => {
        const attrArray = idArray.reduce( (m,id) => [...m, ...(fields.map(field => `repeating_${section}_${id}_${field}`))],[]);

        let pesoMoeda = 0;
        let slotExtra = 0;
        getAttrs(["extraslot"], function(v){
            slotExtra = parseInt(v.extraslot)               
        }); 

        getAttrs(["for", ...attrArray], v => {
            //console.log("===== values of v: "+ JSON.stringify(v) +" =====");
                // getValue: if not a number, returns 1 if it is 'on' (checkbox), otherwise returns 0..
            const getValue = (section, id,field) => parseFloat(v[`repeating_${section}_${id}_${field}`]) || (v[`repeating_${section}_${id}_${field}`] === 'on' ? 1 : 0); 
            const sumTotal = idArray.reduce((total, id) => total + fields.reduce((subtotal,field) => subtotal * getValue(section, id,field),1),0);
            
            let for_mod = parseInt(v.for);

            let cargalimit = for_mod > 0 ? (5 * for_mod) :  parseInt(2);
            cargalimit += slotExtra;
            let cargamax = cargalimit * 2;
                                        
            let setObj = {}

            let finalTotal = (sumTotal * multiplier) + pesoMoeda;

            finalTotal = finalTotal.toString() + appendText;

            //setObj['penalidades_armadura_carga'] = 0;

            setObj[destination] = finalTotal;

            setObj['limite'] = cargalimit;
            setObj['maxima'] = cargamax;
            
            //if(sumTotal * multiplier > cargalimit){
            //    setObj['penalidades_armadura_carga'] = 5;
            //    setObj[destination] = finalTotal + "!" ;
            //}

            setAttrs(setObj);
        });
    });
};
    

</script>





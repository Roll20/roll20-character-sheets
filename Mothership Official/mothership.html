
<div class="ms-wrapper">
  <input type="hidden" name="attr_sheet_toggle" value="pc"/>
  <input type="hidden" name="attr_init" value="0"/>
  <input class="sheet-skill-toggle" type="hidden" name="attr_sheet_skill_toggles"/>
  <div class="ms-pc">
    <!-- input.ms-settings__toggle(type="checkbox", name="attr_settings_toggle")-->
    <!-- span y-->
    <div class="ms-settings"></div>
    <div class="ms-header">
      <div class="ms-header__logo"><img src="https://s3.amazonaws.com/files.d20.io/images/145353993/itv_F4exdWuwHavdksYfCQ/max.png?1592850121" data-i18n-title="Mothership Logo"/></div>
      <div class="ms-header__details">
        <div class="ms-header__field--character_name">
          <div class="ms-header__title" data-i18n="name"></div>
          <input class="ms-header__input ms-rounded" name="attr_character_name" type="text"/>
        </div>
        <div class="ms-header__field--level">
          <div class="ms-header__title" data-i18n="level"></div>
          <input class="ms-header__input ms-rounded" name="attr_level" type="number"/>
        </div>
        <div class="ms-header__field--rank_title">
          <div class="ms-header__title" data-i18n="rank / title"></div>
          <input class="ms-header__input ms-rounded" name="attr_rank_title" type="text"/>
        </div>
        <div class="ms-header__field--xp">
          <div class="ms-header__title" data-i18n="XP"></div>
          <input class="ms-header__input ms-rounded" name="attr_xp" type="text"/>
        </div>
        <div class="ms-header__field--class">
          <div class="ms-header__title" data-i18n="class"></div>
          <input class="ms-header__input ms-rounded" name="attr_class" type="text"/>
        </div>
      </div>
    </div>
    <div class="ms-skillsaves">
      <div class="ms-stats">
        <div class="ms-topstat">
          <div class="ms-topstat__label" data-i18n="stress"></div>
          <input class="ms-topstat__stat" placeholder="2" name="attr_stress" type="number"/>
          <div class="ms-topstat__label--invert" data-i18n="starts at 2"></div>
        </div>
        <div class="ms-topstat">
          <div class="ms-topstat__label" data-i18n="resolve"></div>
          <input class="ms-topstat__stat" placeholder="0" name="attr_resolve" type="number"/>
          <div class="ms-topstat__label--invert" data-i18n="starts at 0"></div>
        </div>
        <div class="ms-topstat--minmax">
          <div class="ms-topstat__label" data-i18n="health"></div>
          <div class="ms-topstat__minmaxwrapper">
            <input class="ms-topstat__max" name="attr_health_max" placeholder="78" type="number"/>
            <input class="ms-topstat__min" name="attr_health" placeholder="78" type="number"/>
          </div>
          <div class="ms-topstat__label--small" data-i18n="max"></div>
          <div class="ms-topstat__label--small" data-i18n="current"></div>
        </div>
        <div class="ms-stats__main">
          <div class="ms-mainstat">
            <div class="ms-mainstat__label">
              <button data-i18n="strength" type="roll" value="&amp;{template:ms} {{name=strength}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=@{strength}}}"></button><span class="ms-tooltip">
                <p><span data-i18n="How able-bodied you are. Lifting, pushing, hitting things hard, etc."></span></p></span>
            </div>
            <input class="ms-mainstat__input" name="attr_strength" type="number"/>
          </div>
          <div class="ms-mainstat">
            <div class="ms-mainstat__label">
              <button data-i18n="speed" type="roll" value="&amp;{template:ms} {{name=speed}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=@{speed}}}"></button><span class="ms-tooltip">
                <p><span data-i18n="How quickly you can act and react under pressure."></span></p></span>
            </div>
            <input class="ms-mainstat__input" name="attr_speed" type="number"/>
          </div>
          <div class="ms-mainstat">
            <div class="ms-mainstat__label">
              <button data-i18n="intellect" type="roll" value="&amp;{template:ms} {{name=intellect}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=@{intellect}}}"></button><span class="ms-tooltip">
                <p><span data-i18n="How knowledgeable and experienced you are."></span></p></span>
            </div>
            <input class="ms-mainstat__input" name="attr_intellect" type="number"/>
          </div>
          <div class="ms-mainstat">
            <div class="ms-mainstat__label">
              <button data-i18n="combat" type="roll" value="&amp;{template:ms} {{name=combat}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=@{combat}}}"></button><span class="ms-tooltip">
                <p><span data-i18n="How good you are at fighting."></span></p></span>
            </div>
            <input class="ms-mainstat__input" name="attr_combat" type="number"/>
          </div>
        </div>
        <div class="ms-patches">
          <h1 data-i18n="patch"></h1>
          <textarea class="ms-patches__textarea ms-rounded" name="attr_patch"></textarea>
          <h1 data-i18n="trinket"></h1>
          <textarea class="ms-patches__textarea ms-rounded" name="attr_trinket"></textarea>
        </div>
      </div>
      <div class="ms-saves">
        <div class="ms-saves__col--left">
          <div class="ms-saves__label">
            <button class="ms-saves__name" data-i18n="sanity" type="roll" value="&amp;{template:ms} {{name=sanity}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=@{sanity}}}"></button><span class="ms-tooltip">
              <p><span data-i18n="Sanity is your ability to explain away logical inconsistencies in the universe, rationalize and make sense out of chaos, detect illusions and mimicry and think quickly under pressure."></span></p></span>
            <div class="ms-saves__subtext" data-i18n="rationalization, logic"></div>
          </div>
          <div class="ms-saves__label">
            <button class="ms-saves__name" data-i18n="fear" type="roll" value="&amp;{template:ms} {{name=fear}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=@{fear}}}"></button><span class="ms-tooltip">
              <p><span data-i18n="Fear is how well you can cope with emotional trauma, and covers not only fear, but also loneliness, depression or any other emotional surge."></span></p></span>
            <div class="ms-saves__subtext" data-i18n="surprise, loneliness"></div>
          </div>
          <div class="ms-saves__label">
            <button class="ms-saves__name" data-i18n="body" type="roll" value="&amp;{template:ms} {{name=body}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=@{body}}}"></button><span class="ms-tooltip">
              <p><span data-i18n="Body is your reflexes, and how well you can resist hunger, disease or any other organism that might attempt to invade your insides."></span></p></span>
            <div class="ms-saves__subtext" data-i18n="hunger, disease, infection"></div>
          </div>
          <div class="ms-saves__label">
            <button class="ms-saves__name" data-i18n="armor" type="roll" value="&amp;{template:ms} {{name=armor}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=@{armor}}}"></button><span class="ms-tooltip">
              <p><span data-i18n="Armor is how resistant you ae to damage sustained during combat, whether that be through bullets, claws, teeth, etc."></span></p></span>
            <div class="ms-saves__subtext" data-i18n="physical damage"></div>
          </div>
        </div>
        <div class="ms-saves__col--right">
          <div class="ms-saves__inputwrapper">
            <input class="ms-saves__input" name="attr_sanity" type="number"/>
          </div>
          <div class="ms-saves__inputwrapper">
            <input class="ms-saves__input" name="attr_fear" type="number"/>
          </div>
          <div class="ms-saves__inputwrapper">
            <input class="ms-saves__input" name="attr_body" type="number"/>
          </div>
          <div class="ms-saves__inputwrapper">
            <input class="ms-saves__input" name="attr_armor" type="number"/>
          </div>
        </div>
      </div>
      <div class="ms-stress_panic">
        <div class="ms-stress_panic__label" data-i18n="stress &amp; panic"></div>
        <input class="ms-stress_panic__input ms-rounded" name="attr_stress_panic" type="text"/>
      </div>
    </div>
    <div class="ms-skills">
      <h1 data-i18n="skills"></h1>
      <div class="ms-skillpoints">
        <div class="ms-skillpoints__label" data-i18n="skill points"></div>
        <input class="ms-skillpoints__input ms-rounded" name="attr_skill_points" type="number"/>
        <div class="ms-tooltip--skills">
          <ul>
            <li> <strong data-i18n="trained skills"></strong><span data-i18n="cost 1 point"></span></li>
            <li> <strong data-i18n="expert skills"></strong><span data-i18n="cost 2 points"></span></li>
            <li> <strong data-i18n="master skills"></strong><span data-i18n="cost 3 points"></span></li>
          </ul><span data-i18n="To take an Expert or Master skill you must first take one of its prerequisite skills"></span>
        </div>
      </div>
      <div class="ms-skills__trained">
        <h2 data-i18n="trained +10%"></h2>
        <div class="ms-tooltip">
          <p data-i18n="Youâ€™ve received standard training in this area equivalent to a bachelor's degree or on-the-job training for a couple years."></p>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--linguistics">
            <input name="attr_linguistics_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_linguistics" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="linguistics" type="roll" value="&amp;{template:ms} {{name=linguistics}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_linguistics_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_linguistics_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Study of language"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--biology">
            <input name="attr_biology_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_biology" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="biology" type="roll" value="&amp;{template:ms} {{name=biology}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_biology_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_biology_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Study of life"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--first_aid">
            <input name="attr_first_aid_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_first_aid" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="first aid" type="roll" value="&amp;{template:ms} {{name=first aid}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_first_aid_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_first_aid_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Emergency medical care and treatment"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--hydroponics">
            <input name="attr_hydroponics_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_hydroponics" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="hydroponics" type="roll" value="&amp;{template:ms} {{name=hydroponics}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_hydroponics_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_hydroponics_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Growing plants in nutrient solutions without soil (farming in space)"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--geology">
            <input name="attr_geology_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_geology" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="geology" type="roll" value="&amp;{template:ms} {{name=geology}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_geology_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_geology_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="The solid features of any terrestrial planet or natural satellite"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--zero-g">
            <input name="attr_zero-g_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_zero-g" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="zero-g" type="roll" value="&amp;{template:ms} {{name=zero-g}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_zero-g_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_zero-g_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Working in a vaccuum, vaccsuits, etc."></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--scavenging">
            <input name="attr_scavenging_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_scavenging" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="scavenging" type="roll" value="&amp;{template:ms} {{name=scavenging}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_scavenging_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_scavenging_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Searching discarded wastes for useful items"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--heavy_machinery">
            <input name="attr_heavy_machinery_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_heavy_machinery" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="heavy machinery" type="roll" value="&amp;{template:ms} {{name=heavy machinery}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_heavy_machinery_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_heavy_machinery_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Operation and use of large pieces of equipment (cranes, exosuits, forkliftsm etc.)"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--computers">
            <input name="attr_computers_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_computers" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="computers" type="roll" value="&amp;{template:ms} {{name=computers}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_computers_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_computers_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Fluent use of computers and networks"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--mechanical_repair">
            <input name="attr_mechanical_repair_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_mechanical_repair" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="mechanical repair" type="roll" value="&amp;{template:ms} {{name=mechanical repair}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_mechanical_repair_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_mechanical_repair_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Fixing broken machines"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--driving">
            <input name="attr_driving_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_driving" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="driving" type="roll" value="&amp;{template:ms} {{name=driving}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_driving_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_driving_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Operation and control of motor vehicles"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--piloting">
            <input name="attr_piloting_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_piloting" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="piloting" type="roll" value="&amp;{template:ms} {{name=piloting}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_piloting_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_piloting_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Operation and control of air and spacecraft"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--mathematics">
            <input name="attr_mathematics_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_mathematics" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="mathematics" type="roll" value="&amp;{template:ms} {{name=mathematics}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_mathematics_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_mathematics_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="The science of numbers, quantity, and space"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--art">
            <input name="attr_art_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_art" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="art" type="roll" value="&amp;{template:ms} {{name=art}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_art_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_art_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="The expression or application of a species' creative ability and imagination"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--archaeology">
            <input name="attr_archaeology_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_archaeology" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="archaeology" type="roll" value="&amp;{template:ms} {{name=archaeology}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_archaeology_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_archaeology_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Ancient cultures and their artifacts"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--theology">
            <input name="attr_theology_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_theology" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="theology" type="roll" value="&amp;{template:ms} {{name=theology}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_theology_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_theology_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Study of religion"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--military_training">
            <input name="attr_military_training_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_military_training" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="military training" type="roll" value="&amp;{template:ms} {{name=military training}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_military_training_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_military_training_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Standard basic training given to all military personnel"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--rimwise">
            <input name="attr_rimwise_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_rimwise" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="rimwise" type="roll" value="&amp;{template:ms} {{name=rimwise}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_rimwise_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_rimwise_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Outer rim colonies and seedy parts of the galaxy"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--athletics">
            <input name="attr_athletics_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_athletics" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="athletics" type="roll" value="&amp;{template:ms} {{name=athletics}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_athletics_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_athletics_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Physical sports and games"></span></p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--chemistry">
            <input name="attr_chemistry_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_chemistry" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="chemistry" type="roll" value="&amp;{template:ms} {{name=chemistry}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_chemistry_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_chemistry_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="The identification of the substances of which matter is composed"></span></p></span>
        </div>
        <fieldset class="repeating_trained">
          <div class="ms-skill-wrapper">
            <div class="ms-skill--repeating">
              <input name="attr_skill_settings" type="hidden" value="on"/>
              <label class="ms-skill__checkmark">
                <input name="attr_skill_trained" type="checkbox"/><span></span>
              </label>
              <div class="ms-skill__button">
                <button class="edit-hide" type="roll" value="&amp;{template:ms} {{name=@{skill_name}}}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+10]]}}"><span name="attr_skill_name"></span></button>
              </div>
              <label class="ms-skill__cog">
                <input name="attr_skill_settings" type="checkbox"/><span>y</span>
              </label>
              <div class="ms-skill__settings"> 
                <div class="ms-skill__settingsrow">
                  <div class="ms-skill__settingstitle" data-i18n="name"></div>
                  <input class="ms-skill__settingsinput" data-i18n-title="custom skill" name="attr_skill_name" type="text"/>
                </div>
                <div class="ms-skill__settingsrow">
                  <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                  <input class="ms-skill__settingsinput" name="attr_skill_notes" type="text"/>
                </div>
              </div>
            </div><span class="ms-tooltip"><span name="attr_skill_notes"></span></span>
          </div>
        </fieldset>
      </div>
      <div class="ms-skills__expert">
        <h2 data-i18n="expert +15%"></h2>
        <div class="ms-tooltip">
          <p data-i18n="You have the equivalent of a doctorate or many years of experience."></p>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--psychology">
            <input name="attr_psychology_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_psychology" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="psychology" type="roll" value="&amp;{template:ms} {{name=psychology}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_psychology_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_psychology_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="The study of behavior and the human mind"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="biology"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--genetics">
            <input name="attr_genetics_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_genetics" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="genetics" type="roll" value="&amp;{template:ms} {{name=genetics}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_genetics_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_genetics_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Heredity and the variation of the inherited characteristics"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="biology"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--pathology">
            <input name="attr_pathology_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_pathology" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="pathology" type="roll" value="&amp;{template:ms} {{name=pathology}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_pathology_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_pathology_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Study of the cause and effect of disease"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="first aid"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--botany">
            <input name="attr_botany_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_botany" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="botany" type="roll" value="&amp;{template:ms} {{name=botany}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_botany_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_botany_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="The study of plant life"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="hydroponics"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--planetology">
            <input name="attr_planetology_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_planetology" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="planetology" type="roll" value="&amp;{template:ms} {{name=planetology}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_planetology_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_planetology_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Study of planets and other celestial body"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="geology"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--asteroid_mining">
            <input name="attr_asteroid_mining_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_asteroid_mining" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="asteroid mining" type="roll" value="&amp;{template:ms} {{name=asteroid mining}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_asteroid_mining_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_asteroid_mining_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Training in the tools and procedures used in mining asteroids"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="geology, zero-g, heavy machinery, scavenging"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--jury_rigging">
            <input name="attr_jury_rigging_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_jury_rigging" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="jury rigging" type="roll" value="&amp;{template:ms} {{name=jury rigging}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_jury_rigging_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_jury_rigging_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Makeshift repairs"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="scavenging, mechanical repair"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--engineering">
            <input name="attr_engineering_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_engineering" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="engineering" type="roll" value="&amp;{template:ms} {{name=engineering}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_engineering_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_engineering_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Design, building, and use of engines, machines, and structures"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="heavy machinery, computers, mechanical repair"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--hacking">
            <input name="attr_hacking_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_hacking" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="hacking" type="roll" value="&amp;{template:ms} {{name=hacking}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_hacking_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_hacking_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Unauthorized access to computer systems"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="computers"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--vehicle_specialization">
            <input name="attr_vehicle_specialization_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_vehicle_specialization" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="vehicle specialization" type="roll" value="&amp;{template:ms} {{name=vehicle specialization}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_vehicle_specialization_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_vehicle_specialization_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Specific vehicle class"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="mechanical repair, piloting, driving"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--astrogation">
            <input name="attr_astrogation_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_astrogation" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="astrogation" type="roll" value="&amp;{template:ms} {{name=astrogation}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_astrogation_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_astrogation_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Navigation in outer space"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="piloting"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--physics">
            <input name="attr_physics_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_physics" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="physics" type="roll" value="&amp;{template:ms} {{name=physics}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_physics_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_physics_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Study of nature and properties of matter and energy"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="mathematics"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--mysticism">
            <input name="attr_mysticism_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_mysticism" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="mysticism" type="roll" value="&amp;{template:ms} {{name=mysticism}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_mysticism_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_mysticism_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Spiritual apprehension of hidden knowledge"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="art, archaeology, theology"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--tactics">
            <input name="attr_tactics_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_tactics" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="tactics" type="roll" value="&amp;{template:ms} {{name=tactics}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_tactics_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_tactics_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Manuevering military forces in battle"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="military training"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--gunnery">
            <input name="attr_gunnery_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_gunnery" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="gunnery" type="roll" value="&amp;{template:ms} {{name=gunnery}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_gunnery_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_gunnery_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Starship weaponry"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="military training"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--firearms">
            <input name="attr_firearms_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_firearms" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="firearms" type="roll" value="&amp;{template:ms} {{name=firearms}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_firearms_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_firearms_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Guns and their use"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="military training, rimwise"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--close-quarters_combat">
            <input name="attr_close-quarters_combat_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_close-quarters_combat" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="close-quarters combat" type="roll" value="&amp;{template:ms} {{name=close-quarters combat}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_close-quarters_combat_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_close-quarters_combat_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Hand-tohand, melee fighting"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="athletics, military training, rimwise"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--explosives">
            <input name="attr_explosives_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_explosives" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="explosives" type="roll" value="&amp;{template:ms} {{name=explosives}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+15]]}}"><span name="attr_skill_name"></span></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_explosives_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_explosives_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Bombs and incendiary devices"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="military training, chemistry"></div>
            </p></span>
        </div>
        <fieldset class="repeating_expert">
          <div class="ms-skill-wrapper">
            <div class="ms-skill--repeating">
              <input name="attr_skill_settings" type="hidden" value="on"/>
              <label class="ms-skill__checkmark">
                <input name="attr_skill_trained" type="checkbox"/><span></span>
              </label>
              <div class="ms-skill__button">
                <button class="edit-hide" type="roll" value="&amp;{template:ms} {{name=@{skill_name}}}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+20]]}}"><span name="attr_skill_name"></span></button>
              </div>
              <label class="ms-skill__cog">
                <input name="attr_skill_settings" type="checkbox"/><span>y</span>
              </label>
              <div class="ms-skill__settings"> 
                <div class="ms-skill__settingsrow">
                  <div class="ms-skill__settingstitle" data-i18n="name"></div>
                  <input class="ms-skill__settingsinput" data-i18n-value="custom skill" name="attr_skill_name" type="text"/>
                </div>
                <div class="ms-skill__settingsrow">
                  <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                  <input class="ms-skill__settingsinput" name="attr_skill_notes" type="text"/>
                </div>
              </div>
            </div><span class="ms-tooltip"><span name="attr_skill_notes"></span></span>
          </div>
        </fieldset>
      </div>
      <div class="ms-skills__master">
        <h2 data-i18n="master +20%"></h2>
        <div class="ms-tooltip">
          <p data-i18n="You are one of the luminaries of this field and are aware of cutting edge techniques or highly specialized and niche information."></p>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--sophontology">
            <input name="attr_sophontology_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_sophontology" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="sophontology" type="roll" value="&amp;{template:ms} {{name=sophontology}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+20]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_sophontology_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_sophontology_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Alien psychology"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="linguistics"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--xenobiology">
            <input name="attr_xenobiology_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_xenobiology" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="xenobiology" type="roll" value="&amp;{template:ms} {{name=xenobiology}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+20]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_xenobiology_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_xenobiology_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Alien biology"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="psychology"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--surgery">
            <input name="attr_surgery_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_surgery" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="surgery" type="roll" value="&amp;{template:ms} {{name=surgery}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+20]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_surgery_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_surgery_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Medical speciality involving manual operation"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="pathology"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--cybernetics">
            <input name="attr_cybernetics_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_cybernetics" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="cybernetics" type="roll" value="&amp;{template:ms} {{name=cybernetics}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+20]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_cybernetics_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_cybernetics_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Interface between man and machine"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="jury rigging, engineering"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--robotics">
            <input name="attr_robotics_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_robotics" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="robotics" type="roll" value="&amp;{template:ms} {{name=robotics}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+20]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_robotics_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_robotics_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Design and operation of robots, drones, and androids"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="engineering"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--artificial_intelligence">
            <input name="attr_artificial_intelligence_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_artificial_intelligence" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="artificial intelligence" type="roll" value="&amp;{template:ms} {{name=artificial intelligence}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+20]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_artificial_intelligence_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_artificial_intelligence_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Knowledge of simulacrum of human consciousness"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="engineering, hacking"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--command">
            <input name="attr_command_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_command" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="command" type="roll" value="&amp;{template:ms} {{name=command}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+20]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_command_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_command_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Leadership and authority"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="vehicle specialization, tactics"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--hyperspace">
            <input name="attr_hyperspace_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_hyperspace" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="hyperspace" type="roll" value="&amp;{template:ms} {{name=hyperspace}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+20]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_hyperspace_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_hyperspace_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="FTL travel"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="astrogation, mysticism, physics"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--xenoesotericism">
            <input name="attr_xenoesotericism_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_xenoesotericism" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="xenoesotericism" type="roll" value="&amp;{template:ms} {{name=xenoesotericism}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+20]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_xenoesotericism_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_xenoesotericism_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Obscure alien mysticism, religion, and belief"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="mysticism"></div>
            </p></span>
        </div>
        <div class="ms-skill-wrapper">
          <div class="ms-skill ms-skill--weapon_specialization">
            <input name="attr_weapon_specialization_settings" type="hidden"/>
            <label class="ms-skill__checkmark">
              <input name="attr_weapon_specialization" type="checkbox"/><span></span>
            </label>
            <div class="ms-skill__button">
              <button data-i18n="weapon specialization" type="roll" value="&amp;{template:ms} {{name=weapon specialization}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+20]]}}"></button>
            </div>
            <label class="ms-skill__cog">
              <input name="attr_weapon_specialization_settings" type="checkbox"/><span>y</span>
            </label>
            <div class="ms-skill__settings"> 
              <div class="ms-skill__settingsrow">
                <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                <input class="ms-skill__settingsinput" name="attr_weapon_specialization_notes" type="text"/>
              </div>
            </div>
          </div><span class="ms-tooltip">
            <p><span data-i18n="Proficiency with a specific weapon"></span></p>
            <p><strong data-i18n="prerequisites"></strong>
              <div data-i18n="gunnery, firearms, close-quarters combat, explosives"></div>
            </p></span>
        </div>
        <fieldset class="repeating_master">
          <div class="ms-skill-wrapper">
            <div class="ms-skill--repeating">
              <input name="attr_skill_settings" type="hidden" value="on"/>
              <label class="ms-skill__checkmark">
                <input name="attr_skill_trained" type="checkbox"/><span></span>
              </label>
              <div class="ms-skill__button">
                <button class="edit-hide" type="roll" value="&amp;{template:ms} {{name=@{skill_name}}}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[?{Attribute|Strength,@{strength}|Speed,@{speed}|Intellect,@{intellect}|Combat,@{combat}}+20]]}}"><span name="attr_skill_name"></span></button>
              </div>
              <label class="ms-skill__cog">
                <input name="attr_skill_settings" type="checkbox"/><span>y</span>
              </label>
              <div class="ms-skill__settings"> 
                <div class="ms-skill__settingsrow">
                  <div class="ms-skill__settingstitle" data-i18n="name"></div>
                  <input class="ms-skill__settingsinput" data-i18n-value="custom skill" name="attr_skill_name" type="text"/>
                </div>
                <div class="ms-skill__settingsrow">
                  <div class="ms-skill__settingstitle" data-i18n="notes"></div>
                  <input class="ms-skill__settingsinput" name="attr_skill_notes" type="text"/>
                </div>
              </div>
            </div><span class="ms-tooltip"><span name="attr_skill_notes"></span></span>
          </div>
        </fieldset>
      </div>
    </div>
    <div class="ms-gear"> 
      <div class="ms-equipment">
        <h1 data-i18n="equipment"></h1>
        <div class="ms-equipmentrow--head">
          <div class="ms-equipmentrow__name--head" data-i18n="item"></div>
          <div class="ms-equipmentrow__type--head" data-i18n="type"></div>
        </div>
        <fieldset class="repeating_equipment">
          <div class="ms-equipmentrow">
            <input name="attr_equipment_settings" type="hidden" value="on"/>
            <input class="ms-equipmentrow__name" name="attr_equipment_name" type="text"/>
            <select class="ms-equipmentrow__type" name="attr_equipment_type">
              <option data-i18n="Gear"></option>
              <option data-i18n="Weapon"></option>
              <option data-i18n="Ammunition"></option>
              <option data-i18n="Armor"></option>
              <option data-i18n="Patch"></option>
              <option data-i18n="Trinket"></option>
              <option data-i18n="Other"></option>
            </select>
            <label class="ms-equipmentrow__cog">
              <input name="attr_equipment_settings" type="checkbox" checked="checked"/><span>y</span>
            </label>
            <div class="ms-equipmentrow__settings">
              <div class="ms-attackrow__settingsrow">
                <div class="ms-attackrow__settingsrow--full"></div>
                <div class="ms-attackrow__settingstitle" data-i18n="notes"></div>
                <textarea class="ms-sattackrow__textarea" name="attr_equipment_notes"></textarea>
              </div>
            </div>
          </div>
        </fieldset>
        <div class="ms-credits">
          <div class="ms-credits__label" data-i18n="credits"></div>
          <input class="ms-credits__input ms-rounded" name="attr_credits" type="text"/>
        </div>
      </div>
      <div class="ms-attacks">
        <h1 data-i18n="attacks"></h1>
        <div class="ms-attackrow--head">
          <div class="ms-attackrow__name--head" data-i18n="attack"></div>
          <div class="ms-attackrow__type--head" data-i18n="type"></div>
          <div class="ms-attackrow__type--head" data-i18n="damage"></div>
        </div>
        <fieldset class="repeating_attacks">
          <div class="ms-attackrow">
            <input name="attr_attack_settings" type="hidden" value="on"/>
            <input name="attr_attack_linkedid" type="hidden"/>
            <button class="ms-attackrow__name" type="roll" value="&amp;{template:ms} {{name=@{attack_name}}} {{character_name=@{character_name}}} {{roll=[[1d100cs1cf100]]}} {{roll2=[[?{Advantage/Disadvantage|Normal,0|Advantage/Disadvantage,1d100cs1cf100}]]}} {{target=[[@{combat}]]}} {{damage=[[@{attack_damage}]]}}"><span name="attr_attack_name" type="text"></span></button>
            <select class="ms-attackrow__skill" name="attr_attack_type">
              <option data-i18n="Ranged"></option>
              <option data-i18n="Melee"></option>
            </select>
            <input class="ms-attackrow__damage" name="attr_attack_damage" type="text"/>
            <label class="ms-attackrow__cog">
              <input name="attr_attack_settings" type="checkbox" checked="checked"/><span>y</span>
            </label>
            <div class="ms-attackrow__settings">
              <div class="ms-attackrow__settingsrow">
                <div class="ms-attackrow__settingstitle" data-i18n="name"></div>
                <input class="ms-attackrow__settingsinput" data-i18n-value="custom skill" name="attr_attack_name" type="text"/>
              </div>
              <div class="ms-attackrow__settingsrow--full">
                <div class="ms-attackrow__settingstitle" data-i18n="notes"></div>
                <textarea class="ms-sattackrow__textarea" name="attr_attack_notes"></textarea>
              </div>
            </div>
          </div>
        </fieldset>
      </div>
    </div>
  </div>
</div>
<rolltemplate class="sheet-rolltemplate-ms">
  <div class="sheet-ms-container">{{#name}}
    <h1>{{name}} </h1>{{/name}}
    {{#character_name}}
    <h2>{{character_name}} </h2>{{/character_name}}
    {{#roll}}
    <div class="sheet-ms-roll">
      <div class="sheet-ms-roll__roll">{{roll}}</div> {{#rollGreater() roll2 0}}
      <div class="sheet-ms-roll__roll2">{{roll2}}</div> {{/rollGreater() roll2 0}}
    </div>{{#target}}
    <div class="sheet-ms-target">
      <div class="sheet-ms-target__label" data-i18n="target:"></div>
      <div class="sheet-ms-target__value">{{target}}</div>
    </div>{{/target}}
    {{/roll}}
    {{#damage}}
    <div class="sheet-ms-damage">
      <div class="sheet-ms-damage__label" data-i18n="damage:"></div>
      <div class="sheet-ms-damage__value">{{damage}}</div>
    </div>{{/damage}}
    {{#notes}}
    <div class="sheet-ms-notes">{{notes}}</div>{{/notes}}
  </div>
</rolltemplate>
<script type="text/worker">// Sheet Variables

const skillList = {
    "linguistics":{
        unlocks: ["sophontology"]
    },
    "biology":{
        unlocks: ["genetics","psychology"]
    },
    "first_aid": {
        unlocks: ["pathology"]
    },
    "hydroponics": {
        unlocks: ["botany"]
    },
    "geology": {
        unlocks: ["planetology","asteroid_mining"]
    },
    "zero-g": {
        unlocks: ["asteroid_mining"]
    },
    "scavenging": {
        unlocks: ["asteroid_mining","jury_rigging"]
    },
    "heavy_machinery": {
        unlocks: ["asteroid_mining","engineering"]
    },
    "computers": {
        unlocks: ["engineering","hacking"]
    },
    "mechanical_repair": {
        unlocks: ["asteroid_mining", "vehicle_specialization"]
    },
    "driving": {
        unlocks: ["vehicle_specialization"]
    },
    "piloting": {
        unlocks: ["vehicle_specialization","astrogation"]
    },
    "mathematics": {
        unlocks: ["physics"]
    },
    "art": {
        unlocks: ["mysticism"]
    },
    "archaeology": {
        unlocks: ["mysticism"]
    },
    "theology": {
        unlocks: ["mysticism"]
    },
    "military_training": {
        unlocks: ["tactics","gunnery","firearms","explosives"]
    },
    "rimwise": {
        unlocks: ["firearms","close-quarters_combat"]
    },
    "athletics": {
        unlocks: ["close-quarters_combat"]
    },
    "chemistry": {
        unlocks: ["explosives"]
    },
    "psychology": {
        unlocks: ["sophontology"]
    },
    "genetics": {
        unlocks: ["xenobiology"]
    },
    "pathology": {
        unlocks: ["xenobiology","surgery"]
    },
    "botany": {
        unlocks: ["xenobiology"]
    },
    "planetology": {
        unlocks: []
    },
    "asteroid_mining" : {
        unlocks: []
    },
    "jury_rigging": {
        unlocks: ["cybernetics"]
    },
    "engineering": {
        unlocks: ["cybernetics","robotics","artificial_intelligence"]
    },
    "hacking": {
        unlocks: ["artificial_intelligence"]
    },
    "vehicle_specialization": {
        unlocks: ["command"]
    },
    "astrogation": {
        unlocks: ["hyperspace"]
    },
    "physics": {
        unlocks: ["hyperspace"]
    },
    "mysticism": {
        unlocks: ["xenoesotericism"]
    },
    "tactics": {
        unlocks: ["command"]
    },
    "gunnery": {
        unlocks: ["weapon_specialization"]
    },
    "firearms": {
        unlocks: ["weapon_specialization"]
    },
    "close-quarters_combat": {
        unlocks: ["weapon_specialization"]
    },
    "explosives": {
        unlocks: ["weapon_specialization"]
    },
    "sophontology": {},
    "xenobiology": {},
    "surgery": {},
    "cybernetics": {},
    "robotics": {},
    "artificial_intelligence": {},
    "command": {},
    "hyperspace": {},
    "xenoesotericism": {},
    "weapon_specialization": {}
};

const skillArray = Object.keys(skillList);

// FUNCTIONS

const advantageToggle = (newValue) => {

}

const toggleSkill = (source, newValue) => {

    getAttrs(["sheet_skill_toggles"], values => {

        const existingValue = values["sheet_skill_toggles"].trim();
        const valueList = existingValue.split(" ")
        const unlocks = skillList[source].unlocks || [];

        let updateAttr = "";
    
        if (newValue === "0") {

            unlocks.forEach(item => valueList.splice(valueList.indexOf(item), 1));

            updateAttr = valueList.join(" ");

        } else if (newValue === "on") {
    
            updateAttr = existingValue + " ";
    
            if (unlocks === []) return;
            
            unlocks.forEach(unlock => updateAttr += `${unlock} `);

        }

        console.log(updateAttr);
            
        setAttrs({sheet_skill_toggles:updateAttr}); 
    });

}

const addItem = (new_value, previous_value, source) => {
    console.log(`${new_value} ${previous_value} ${source}`)
    if (new_value === previous_value || new_value !== "Weapon") return;

    const repeating_length = "repeating_equipment_".length;
    const repeating_id_length = 20;
    const repeating_id = source.substring(repeating_length, repeating_length + repeating_id_length);
    const repeating_equipment_prefix = `repeating_equipment_${repeating_id}`;
    const new_repeating_id = generateRowID();
    const repeating_attacks_prefix = `repeating_attacks_${new_repeating_id}`;

    const requestAttrs = [`${repeating_equipment_prefix}_equipment_name`,`${repeating_equipment_prefix}_equipment_type`];

    console.log(requestAttrs);

    getAttrs(requestAttrs, values => {
        const updateAttrs = {};

        updateAttrs[`${repeating_attacks_prefix}_attack_name`] = values[`${repeating_equipment_prefix}_equipment_name`];
        updateAttrs[`${repeating_attacks_prefix}_attack_linkedid`] = repeating_id;

        setAttrs(updateAttrs);

    });
}

const toggleClass = (new_class, previous_class, source_type) => {
    const requestAttrs = [
        "init",
        "level",
        "sanity",
        "fear",
        "body",
        "armor",
        "strength",
        "speed",
        "intellect",
        "combat",
        "stress_panic",
    ];

    if (source_type !== "player") return;

    const update = {};

    update["level"] = 1;
    update["xp"] = 0;
    update["stress"] = 2;
    update["resolve"] = 0;
    update["init"] = 1;

    switch (new_class.toLowerCase()) {
        case "teamster":
            update["sanity"] = 30;
            update["fear"] = 35;
            update["body"] = 30;
            update["armor"] = 35;
            update["strength"] = rollDice(6) + 5;
            update["speed"] = rollDice(6) + 5;
            update["intellect"] = rollDice(6);
            update["combat"] = rollDice(6);
            update["skill_points"] = 4;
            update["stress_panic"] = getTranslationByKey(["Once per session, a Teamster may re-roll a roll on the Panic Effect Table."]);
            break;
        case "android":
            update["sanity"] = 20;
            update["fear"] = 85;
            update["body"] = 40;
            update["armor"] = 25;
            update["strength"] = rollDice(6);
            update["speed"] = rollDice(6) + 5;
            update["intellect"] = rollDice(6) + 5;
            update["combat"] =  rollDice(6);
            update["skill_points"] = 2;
            update["stress_panic"] = getTranslationByKey(["Fear Saves made in the presence of Androids have Disadvantage."]);
            break;
        case "scientist":
            update["sanity"] = 40;
            update["fear"] = 25;
            update["body"] = 25;
            update["armor"] = 30;
            update["strength"] = rollDice(6);
            update["speed"] = rollDice(6);
            update["intellect"] = rollDice(6) + 10;
            update["combat"] = rollDice(6);
            update["skill_points"] = 3;
            update["stress_panic"] = getTranslationByKey(["Whenever a Scientist fails a Sanity Save, every friendly player nearby gains 1 Stress."]);
            break;
        case "marine":
            update["sanity"] = 25;
            update["fear"] = 30;
            update["body"] = 35;
            update["armor"] = 40;
            update["strength"] = rollDice(6);
            update["speed"] = rollDice(6);
            update["intellect"] = rollDice(6);
            update["combat"] = rollDice(6) + 5;
            update["skill_points"] = 3;
            update["stress_panic"] = getTranslationByKey(["Whenever a Marine Panics, every friendly player nearby must make a Fear Save."]);
            break;
        default: 
            return;
    }

    getAttrs(requestAttrs, values => {

        if (previous_class === new_class && values["init"] === "1") return;

        console.log(values["level"]);

        if (values["level"] === 1 || values["level"] === "") {

            const fields = [
                "level",
                "sanity",
                "fear",
                "body",
                "armor",
                "stress_panic",
                "stress",
                "resolve",
                "strength",
                "speed",
                "intellect",
                "combat",
                "skill_points",
                "xp",
                "init"
            ];

            const updateAttrs = {};

            fields.forEach(field => {
                const fallback = values[field] || 0;
                updateAttrs[field] = (typeof field !== undefined) ? update[field] : fallback;
            });

            const hitpoints = parseInt(update["strength"]) * 2;

            updateAttrs["health"] = hitpoints;
            updateAttrs["health_max"] = hitpoints;

            console.log(updateAttrs);

            setAttrs(updateAttrs);

        }

    });
}

const rollDice = (number_of_dice) => {
    let total = 0;

    for (let i = 0; i <= number_of_dice; i++) total += Math.ceil(Math.random()*10);

    return total;
}

// EVENT HANDLERS

skillArray.forEach(skill => on(`change:${skill}`, eventInfo => toggleSkill(skill, eventInfo.newValue)));

on(`change:repeating_equipment:equipment_type`, eventInfo => addItem(eventInfo.newValue, eventInfo.previousValue, eventInfo.sourceAttribute));

on(`change:class`, eventInfo => toggleClass(eventInfo.newValue, eventInfo.previousValue, eventInfo.sourceType));
</script>
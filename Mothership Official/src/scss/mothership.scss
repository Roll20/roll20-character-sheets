@import url("https://fonts.googleapis.com/css?family=Montserrat:400|Montserrat:800|Diadact%20Gothic:400|&display=swap");

// ABSTRACTS

// Colours

$ms-foreground: #111;
$ms-background: white;
$ms-invert-foreground: white;
$ms-invert-background: #111;
$ms-recessed: dimgray;
$ms-light: lightgray;
$ms-lighter: lighten(lightgray, 10%);

$ms-accent: red; 
$ms-enabled: rgb(255, 174, 0); 

$ms-tooltip-background: rgba($ms-foreground, .9);

// Margins and Spacing

$ms-margin: 1rem;
$ms-margin-small: .5rem;
$ms-margin-large: 1.25rem;

// Borders

$ms-border: 2px solid $ms-foreground;
$ms-border-thick: 3px solid $ms-foreground;
$ms-border-thicker: 4px solid $ms-foreground;
$ms-border-recessed: 1px solid $ms-recessed;
$ms-border-settings: 2px solid $ms-recessed;
$ms-border-settings-highlight: 3px dashed $ms-enabled;
$ms-border-radius: 1.5em;

// Fonts and Sizes

$ms-fonts-header: "Montserrat", "Arial Black", sans-serif;
$ms-fonts-body: "Century Gothic", "Diadact Gothic", sans-serif;
$ms-fonts-input: "Century Gothic", "Diadact Gothic", sans-serif;
$ms-pictos: "Pictos";

$ms-font-general: 1.25rem;
$ms-font-small: 1rem;
$ms-font-large: 1.5rem;
$ms-font-h1: 1.75rem;
$ms-font-h2: 1.65rem;
$ms-font-h3: 1.55rem;
$ms-font-input: 1.45rem;

.sheet-ms {

    &-wrapper {
        position: relative;

        // Specificity hack

        &#{&} {
            * {
                box-sizing: border-box;
            }

            input[type="text"],         
            input[type="number"],        
            select,         
            textarea {
                width: 100%;

                border: none;
                    border-radius: 0;

                background: $ms-background;
                color: $ms-foreground;

                font-size: $ms-font-input;
                font-family: $ms-fonts-input;

                &.sheet-ms-rounded {
                    border-radius: 1em;
                }

                &:focus,
                &:active {
                    outline: none;
                }
            }

            input[type="number"] {
                -moz-appearance: textfield;
            
                &::-webkit-outer-spin-button,
                &::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
                }
            }

            select {
                -webkit-appearance: none;
                -moz-appearance: none;

                margin: 0;
                
                cursor: pointer;
        
                background: transparent url("https://s3.amazonaws.com/files.d20.io/images/138210258/mZTqw1vke8SrkprMJmiZQw/med.png?1590443723") right 5px center no-repeat;
            }

            textarea {
                resize: vertical;
                height: 5em;  
            }

            button[type="roll"] {
                box-shadow: unset;

                background: transparent; 
                border: none;
                overflow: hidden;

                text-overflow: ellipsis;
                text-shadow: none;

                &:before {
                    display: none;
                }

                &:hover {
                    cursor: pointer; 

                    color: $ms-accent !important;    
                    text-shadow: none;
                }
            }

            label {
                margin: 0;
                padding: 0;
            }

            .itemcontrol {
                position: relative;
                
                button.repcontrol_del,
                a.repcontrol_move {
                    display: block;
                    top: calc(50% - 1.5rem);
                    z-index: 1000;
                    position: relative;
                    border: $ms-border;
                    border-radius: 1em;
                    padding: 0;
                    margin: 0;
                    height: 3rem;
                    width: 3rem;
                    box-shadow: none;

                    line-height: 2em;
                    text-shadow: none;

                    font-weight: bold;
                }
                
                button.repcontrol_del {
                    margin-right: .25rem;

                    background: darken($ms-accent, 20%);
                    color: #fff;
                }
                
                a.repcontrol_move {
                    margin-left: .25rem;

                    background: #fff;
                    color: #000;
                }

            }

            .repcontrol {
                background-color: transparent;

                min-height: 2.5em;

                button.repcontrol_add,
                button.repcontrol_del,
                button.repcontrol_move,
                button.repcontrol_edit {
                    z-index: 1000;
                    
                    border: 0;
                    padding: 0;
                    margin: 0;

                    background: none; 
                    box-shadow: none;
                    
                    font-size: 0;
                    line-height: 1;

                    &:before {
                        display: block;
                        margin: 0;
                        padding: .35em;
                        height: 1em;
                        width: 1em;
                        
                        border: $ms-border;
                        border-radius: 1em;
                        background: none; 
                        box-shadow: none;
                    }
                }

                button.repcontrol_add:before {
                    display: block;
                    content: "&";

                    font-family: "Pictos";
                    font-size: 12pt;
                    font-weight: bold;
                }

                button.repcontrol_edit {
                    &:before {
                        display: block;
                        content: "p";
                        right: 5px;
                        
                        font-family: "Pictos";
                        font-size: 12pt;
                        font-weight: bold;
                    }
                }
            }
        }
    }
    
    &-settings {
        display: none;
            grid-template-columns: 1fr 1fr;
            gap: $ms-margin-small;

        position: absolute;
            left: 0;
            top: 20px;
            z-index: 100;
        width: 40%;
        padding: $ms-margin-small;

        background: $ms-background;
        border: $ms-border-thicker;
            border-radius: $ms-border-radius;

        font-size: $ms-font-small;

        &__toggle {
            width: 2.5rem;
            height: 2.5rem;
            position: absolute; 
                left: 0;
                top: 0;
                z-index: 100;
            cursor: pointer;
            padding: .25rem !important;

            border-radius: 50%;
            background: $ms-invert-background;

            text-align: center;

            span {
                color: $ms-invert-foreground;
                
                font-family: $ms-pictos;
                font-weight: normal;
            }

            input[type="checkbox"] {
                display: none;

                &:checked + span {
                    color: $ms-accent;
                }
            }
        } 

        &__row {
            display: grid;
                grid-template-columns: 1fr 2fr;
                align-items: center;
            padding: $ms-margin-small;

            border-bottom: $ms-border;

            &--pc,
            &--ship {
                @extend .sheet-ms-settings__row;
                display: none;
            }

            button[type="action"] {
                width: 50%;
                margin: auto;
                
                border: $ms-border;

                font-family: $ms-fonts-header;
                font-weight: bold;
                text-transform: uppercase;
            }
        }

        &__label {
            font-family: $ms-fonts-header;
            font-size: $ms-font-general;
            font-weight: bold;
            text-transform: uppercase;
        }

        &__setting {

        }
    }

    &-ship, 
    &-npc, 
    &-pc {
        position: relative;
        
        display: grid;
            gap: $ms-margin-large;

        background: $ms-background;
        color: $ms-foreground;

        font-family: $ms-fonts-body;
        font-size: $ms-font-general;

        h1 {
            grid-column: 1 / -1;

            color: $ms-foreground;

            font-family: $ms-fonts-header;
            font-size: $ms-font-h1 * 2;
            font-weight: bold;
            text-align: center;
            text-transform: uppercase;
        }

        .sheet-ms {

            &-header {
                display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: $ms-margin-large;
                    align-items: center;
                    grid-column: 1 / -1;
                padding: $ms-margin-large;

                background: $ms-invert-background;
                color: $ms-invert-foreground;
                    
                font-family: $ms-fonts-header;
                font-weight: bold;
                text-transform: uppercase;

                &__logo {

                }

                &__details {
                    display: grid;
                        grid-template-columns: 1fr 1fr 1fr 1fr;
                        gap: $ms-margin-large;
                }

                &__field {
                    display: flex;
                        flex-direction: row no-wrap;
                        align-items: center;

                    &--ship_class,
                    &--type,
                    &--character_name,
                    &--level,
                    &--rank_title,
                    &--xp,
                    &--class {
                        @extend .sheet-ms-header__field;
                    }

                    &--character_name {
                        grid-column: 1 / -1;
                    }

                    &--rank_title, 
                    &--class {
                        grid-column: span 3;
                    }

                    &--ship_class,
                    &--type {
                        grid-column: span 2;
                    }
                }

                &__title {
                    flex-shrink: 0;
                    margin-right: $ms-margin;
                }

                &__input[type="text"],
                &__input[type="number"] {
                    flex-grow: 1;
                    flex-shrink: 1;

                    width: 50% !important;

                    text-align: center;
                    font-size: $ms-font-large;
                }
            }

            &-skillsaves {
                display: grid;
                    grid-template-columns: 2fr 1fr;
                    grid-gap: $ms-margin;

            }

            &-stats {
                display: grid;
                grid-template-columns: 1fr 1fr 1.5fr;

                &__toprow {
                    display: grid;
                        grid-template-columns: 1fr 1fr 1.5fr;
                        grid-gap: $ms-margin;
                        align-items: start; 
                        justify-items: center;
                }

                &__main {
                    grid-column: 1 / span 2;
                    padding: $ms-margin-large * 2 0;
                    display: grid; 
                        gap: $ms-margin-large * 3;
                }
            }

            &-topstat {
                display: grid;
                    justify-items: center;
                    gap: $ms-margin;

                &__label {
                    grid-column: 1 / -1;

                    font-family: $ms-fonts-header;
                    font-size: $ms-font-h1;
                    font-weight: bold;
                    line-height: 1;
                    text-align: center;
                    text-transform: uppercase;

                    &--invert {
                        @extend .sheet-ms-topstat__label;

                        padding: 2px 5px;
                        border-radius: 1em;

                        background: $ms-invert-background;
                        color: $ms-invert-foreground;

                        font-size: $ms-font-general;
                    }

                    &--small {
                        @extend .sheet-ms-topstat__label;
                        grid-column: span 1;

                        font-size: $ms-font-general;
                    }
                }
                
                input.sheet-ms-topstat__stat[type="number"] {
                    height: 52px;
                    width: 52px;
                    padding: $ms-margin;
                    border: $ms-border-thicker;
                        border-radius: 50%;
                    
                    font-size: $ms-font-h1;
                    font-weight: bold;
                    text-align: center;
                }

                &--minmax {
                    @extend .sheet-ms-topstat;
                    width: 60%;
                    grid-template-columns: 1fr 2fr;
                    justify-self: center;

                    .sheet-ms-topstat__label {
                        text-align: left;
                    }
                }
                
                &__minmaxwrapper {
                    grid-column: 1 / -1;
                    display: grid;
                        grid-template-columns: 1fr 2fr;
                        align-items: start;
                    max-height: 50px;
                    padding: 0;
                        
                    border: $ms-border-thicker;
                        border-radius: 2.5em;
                }

                input.sheet-ms-topstat__max[type="number"] {
                    height: 50px;
                    width: 50px;
                    margin: -4px;
                    border: $ms-border-thicker;
                        border-radius: 50%;
                    
                    font-size: $ms-font-h1;
                    font-weight: bold;
                    text-align: center;
                    line-height: 1.5;
                }

                input.sheet-ms-topstat__min[type="number"] {
                    height: 45px;
                    width: 100px;
                    padding: 0;
                    margin: 0;
                    
                    background: transparent;
                    
                    font-size: $ms-font-h1 * 2;
                    font-weight: bold;
                    text-align: center;
                }

            }

            &-mainstat {
                position: relative;
                display: grid;
                    grid-template-columns: 1fr 5em;
                    align-items: center;
                    gap: 0;
                width: 100%;

                &__label {
                    border-top-left-radius: 2em;
                    border-bottom-left-radius: 2em;
    
                    background: $ms-invert-background;
                    padding: 0 $ms-margin-small;

                    button[type="roll"] {
                        width: 100%;
                        padding: $ms-margin-small;

                        color: $ms-invert-foreground;
    
                        font-family: $ms-fonts-header;
                        font-size: $ms-font-h1 * 1.2;
                        font-weight: bold;
                        text-align: left;
                        text-transform: uppercase; 

                        &:hover + .sheet-ms-tooltip {
                            display: inline-block;
                        }
                    }                   
                }

                input.sheet-ms-mainstat__input[type="number"] {
                    margin: -.75em;
                    height: 1.75em;
                    width: 1.75em;
                    
                    border: $ms-border-thicker;
                    border-radius: 4em;

                    font-size: $ms-font-h1 * 1.75;
                    font-weight: bold;
                    text-align: center;
                }
            }

            &-patches {
                padding: $ms-margin;
                margin-top: $ms-margin-large;

                background: $ms-invert-background;
                border-radius: 2em;
                color: $ms-invert-foreground;

                h1 {
                    font-size: $ms-font-h1;

                    color: $ms-invert-foreground;
                }

                &__textarea {
                    resize: none !important;

                    height: 5em !important;
                }
            }

            &-saves {
                display: grid;
                    grid-template-columns: .25fr 2fr 80px .25fr;
                    gap: $ms-margin-large 0;

                &__col {
                    display: grid;
                        gap: $ms-margin;

                    &--right,
                    &--left {
                        @extend .sheet-ms-saves__col;
                    }

                    &--right {
                        padding: 3em $ms-margin;
                        border-radius: 50%/3em;

                        background: $ms-invert-background;
                        color: $ms-invert-foreground;   
                    }

                    &--left {
                        grid-column: 2;
                        padding: 3em 0;

                        align-items: center;
                        justify-content: end;
                    }
                }

                button.sheet-ms-saves__name[type="roll"] {
                    display: block;
                    margin: 0;
                        margin-top: $ms-margin-small * 2;
                    padding: $ms-margin-small;
                    width: 100%;

                    border-radius: 0;

                    background: $ms-light;

                    font-family: $ms-fonts-header;
                    font-size: $ms-font-h1 * 1.2;
                    font-weight: bold;
                    text-align: left;
                    text-transform: uppercase;

                    &:hover ~ .sheet-ms-tooltip {
                        display: inline-block;

                        left: -50px;
                        width: 300px;
                    }
                }

                &__label {
                    position: relative;
                }

                .sheet-ms-saves__input[type="number"] {
                    height: 60px;
                    width: 60px;

                    font-size: $ms-font-h1 * 2;
                    font-weight: bold;
                    text-align: center;
                }
            }

            &-stress_panic {
                grid-column: 1 / -1;
                display: grid;
                    grid-template-columns: 1fr 3fr;
                    align-items: center;
                padding: $ms-margin-small;
                border-radius: 1.5em;

                background: $ms-invert-background;
                color: $ms-invert-foreground;

                font-size: $ms-font-h2;

                &__label {
                    font-family: $ms-fonts-header;
                    font-weight: bold;
                    text-align: center;
                    text-transform: uppercase;
                }

                &__input[type="text"] {
                    text-align: center;
                }
            }

            &-cargo,
            &-crew,
            &-skillpoints {
                position: relative; 
                display: grid;
                    grid-template-columns: 1fr .75fr;
                    align-items: center;
                padding: $ms-margin-small;
                border-radius: 1.5em;

                background: $ms-invert-background;
                color: $ms-invert-foreground;

                font-size: $ms-font-h2;

                &__label {
                    font-family: $ms-fonts-header;
                    font-weight: bold;
                    text-align: center;
                    text-transform: uppercase;

                    cursor: pointer;

                    &:hover ~ .sheet-ms-tooltip--skills {
                        left: 0;
                        display: block;
                        
                        font-size: $ms-font-small;
                    }
                }

                &__input[type="number"] {
                    text-align: center;
                }
            }

            &-cargowrap {
                display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: $ms-margin-large;
                margin-top: $ms-margin-large;
            }

            &-skills {
                position: relative;

                display: grid;
                    align-items: start;
                    grid-template-columns: 1fr 1fr 1fr;
                    gap: $ms-margin-large * 2;

                h1 {
                    grid-column: span 2;
                    align-self: center; 
                    text-align: left;
                }

                h2 {
                    padding: $ms-margin-small;

                    border: $ms-border-thick;
                        border-radius: 1em;

                    background: $ms-background;
                    color: $ms-foreground;

                    font-family: $ms-fonts-header;
                    font-size: $ms-font-h2;
                    font-weight: bold;
                    line-height: 1;
                    text-align: center;
                    text-transform: uppercase;

                    cursor: pointer;

                    &:hover + .sheet-ms-tooltip {
                        display: block;
                        left: 0;

                        z-index: 9999;
                    }
                }
                
                &__trained,
                &__expert,
                &__master {
                    display: grid;
                        gap: 1em;
                    position: relative;
                }

                &__expert,
                &__master {

                    .sheet-ms-skill {
                        opacity: .5;

                        button[type="roll"],
                        .sheet-ms-skill__checkmark {    
                            pointer-events: none;
                        }
                    }
                }

                .repcontainer {
                    display: grid;
                        gap: $ms-margin-large;
                }
            }

            &-skill {
                position: relative;
                display: grid;
                    grid-template-columns: 20px 1fr 20px;
                    align-items: center;
                width: 100%;

                &-wrapper {
                    position: relative;
                }

                &:hover + .sheet-ms-tooltip {
                    cursor: pointer;
                    
                    display: inline-block;
                }

                &__checkmark {
                    z-index: 999;
                    cursor: pointer;
                    min-height: 26px;
                    min-width: 26px;

                    border: $ms-border-thick;
                    border-radius: 50%;
                    background: $ms-background;

                    input[type="checkbox"] {
                        display: none;

                        &:checked {

                            + span {
                                display: block;
                                height: 20px;
                                width: 20px;
                                border-radius: 50%;

                                background: $ms-background url("https://s3.amazonaws.com/files.d20.io/images/138210119/cvUNlZk3lj7GZXQEsKIBWw/max.png?1590443685") no-repeat center/75%;
                            }
                        }
                    }
                }

                &__button {
                    margin-left: -1em;

                    button[type="roll"] {
                        width: 85%;
                        min-height: 3em;
                        border-radius: 2em;
                        padding: .75em;
                            padding-left: 1.5em;
    
                        background: $ms-invert-background;
                        color: $ms-invert-foreground !important;

                        font-family: $ms-fonts-header;
                        font-size: $ms-font-general;
                        font-weight: bold;
                        text-align: left;
                        text-transform: uppercase;
                    }
                }
                
                &__cog {
                    cursor: pointer; 

                    &:hover span {
                        opacity: 1;
                    }

                    input[type="checkbox"] {
                        display: none;

                        &:checked + span {
                            opacity: 1;
                        }
                    }

                    span {
                        opacity: 0.125;

                        font-family: $ms-pictos;
                        font-size: $ms-font-large;
                    }
                }

                &__settings {
                    grid-column: 1 / -1;

                    display: none; 
                        gap: $ms-margin-small;
                    margin: $ms-margin-small;
                    padding: $ms-margin-small;

                    border-top: $ms-border-settings-highlight;
                    
                    background: $ms-light;
                    background-clip: padding-box;

                    &row {                        
                        &:not(:first-child) {
                            border-top: $ms-recessed;
                        }
                    }

                    &title {
                        font-family: $ms-fonts-header;
                        font-size: $ms-font-general;
                        font-weight: bold; 
                        text-transform: uppercase;
                    }

                    input.sheet-ms-skill__settingsinput[type="text"] {
                        border-radius: 2em;
                        font-size: $ms-font-general !important;
                    }
                }

                &--repeating {
                    @extend .sheet-ms-skill;

                    button[type="roll"] {
                        pointer-events: unset !important;
                    }

                    opacity: 1 !important;
                }

                input[name*="settings"][value="on"] ~ .sheet-ms-skill__settings {
                    display: grid;   
                } 
            }

            &-tooltip {
                display: none; 
                position: absolute;
                    top: 25px;
                    left: 50px;
                    z-index: 1000;
                
                min-width: 60px;
                max-width: 250px;
                min-height: 1.5rem;
                margin: 1rem;
                padding: 1rem;

                border-radius: 1em;
                
                background: $ms-tooltip-background;
                color: $ms-invert-foreground;

                strong.sheet-ms-tooltip__label {
                    font-family: $ms-fonts-header;
                    font-weight: bold;
                    text-transform: uppercase;

                    &:after {
                        display: inline;
                        content: ":";
                        margin-right: .5rem;
                    }

                    + span {
                        text-transform: capitalize; 
                    
                        &:first-letter {
                            text-transform: uppercase;
                        }
                    }
                }

                > div {
                    text-transform: capitalize; 
                }
                
                p {
                    margin: 0;
                    padding: 0;
                    font-family: $ms-fonts-body;
                    
                    &:first-letter {
                        text-transform: uppercase;
                    }
                }

                &--skills {
                    @extend .sheet-ms-tooltip;
                    width: 600px !important;
                    padding: $ms-margin-small;
    
                    ul {
                        margin: 0;
                        padding: 0;

                        li {
                            margin: none;
                            list-style-type: none;

                            text-align: center;

                            strong {
                                display: block;

                                font-family: $ms-fonts-header;
                                text-transform: uppercase;
                            }
                        }
                    }

                    > span {
                        grid-column: 1 / -1;
                        display: block;
                        
                        text-align: center;
                    
                        &:first-letter {
                            text-transform: uppercase;
                        }
                    }   
                }
            }

            &-gear {
                display: grid;
                    grid-template-columns: 1fr 1.5fr;
                    grid-gap: $ms-margin;
            }

            &-credits {
                position: absolute;
                    bottom: 0;
                    right: 0;

                display: grid;
                    grid-template-columns: 1fr 1.5fr;
                    align-items: center;
                    width: 90%;
                margin-top: $ms-margin;
                padding: $ms-margin-small;
                border-top-left-radius: 1.5em;

                background: $ms-invert-background;
                color: $ms-invert-foreground;

                font-size: $ms-font-h2;

                &__label {
                    font-family: $ms-fonts-header;
                    font-weight: bold;
                    text-align: center;
                    text-transform: uppercase;
                }

                &__input[type="text"] {
                    text-align: center;
                }
            }

            &-shipcargo,
            &-shipofficers,
            &-shipweapons,
            &-attacks,
            &-equipment {
                position: relative;
                padding: $ms-margin;
                border: $ms-border-thick;

                border-bottom-left-radius: 1.5em;
                border-bottom-right-radius: 1.5em;

                overflow: hidden;

                h1 {
                    width: 90%;
                    margin-top: -$ms-margin;
                    margin-left: -$ms-margin;
                    margin-bottom: $ms-margin;
                    padding: $ms-margin-small;
                    border-bottom-right-radius: 1.5em;

                    background: $ms-invert-background;
                    color: $ms-invert-foreground;

                    font-size: $ms-font-h1;
                    font-family: $ms-fonts-header;
                    text-align: left;
                }
            }

            &-shipcargo {
                .repcontainer {
                    display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: $ms-margin-small;
                }
            }

            &-equipment {  
                padding-bottom: 3em;
            }

            &-shipcargorow,
            &-shipofficerrow,
            &-shipweaponrow,
            &-equipmentrow,
            &-npcattackrow,
            &-npcabilityrow,
            &-attackrow {
                display: grid;
                    gap: 0 $ms-margin;
                    align-items: center;
                margin-bottom: $ms-margin-small;
                padding-bottom: $ms-margin-small;

                border-bottom: $ms-border-thick;

                > * {
                    &:not(:first-child) {
                        text-align: center;
                    }
                }
                
                &__name,
                &__type {

                    &--head {
                        font-family: $ms-fonts-header;
                        font-weight: bold;
    
                        text-transform: uppercase;
                    }
                }

                &__name {
                    text-align: left !important;
                }

                &--head {

                    > div {
                        &:not(:first-child) {
                            text-align: center;
                        }
                    }
                }

                select,
                input[type="number"],
                input[type="text"],
                textarea {
                    border-radius: .5rem;
                    background-color: $ms-lighter;
                }
                
                &__cog {
                    cursor: pointer; 
                    
                    &:hover span {
                        opacity: 1;
                    }

                    input[type="checkbox"] {
                        display: none;

                        &:checked + span {
                            opacity: 1;
                        }
                    }

                    span {
                        opacity: 0.125;

                        font-family: $ms-pictos;
                        font-size: $ms-font-large;
                    }
                }

                button[type="roll"] {
                    font-weight: bold;
                    text-align: left;
                }

                &__settings {
                    grid-column: 1 / -1;

                    display: none; 
                        gap: $ms-margin-small;
                    margin: $ms-margin-small;
                    padding: $ms-margin-small;

                    border-top: $ms-border-settings-highlight;
                    
                    background: $ms-light;
                    background-clip: padding-box;

                    &row {                        
                        &:not(:first-child) {
                            border-top: $ms-recessed;
                        }
                    }

                    &title {
                        font-family: $ms-fonts-header;
                        font-size: $ms-font-general;
                        font-weight: bold; 
                        text-transform: uppercase;
                    }

                    input[type="text"],
                    textarea {
                        border-radius: 1em;
                        background-color: $ms-background;
                    }
                }
            }

            &-equipmentrow {
                grid-template-columns: 1fr .75fr 2em;

                &--head {
                    @extend .sheet-ms-equipmentrow;
                }

                input[name*="settings"][value="on"] ~ .sheet-ms-equipmentrow__settings {
                    display: grid;   
                } 

                &__settingsrow {
                    display: grid;   
                        grid-template-columns: 1fr 1fr;
                        gap: $ms-margin;

                    &--full {
                        @extend .sheet-ms-equipmentrow__settingsrow;
                        grid-template-columns: 1fr;
                    }
                }

                .sheet-show_armor {
                    display: none;
                }

                input[name*="type"][value*="Armor"] ~ * .sheet-show_armor {
                    display: grid;
                }
            }

            &-attackrow {
                grid-template-columns: 1.5fr 1fr 1fr 2em;

                &--head {
                    @extend .sheet-ms-attackrow;
                }

                input[name*="settings"][value="on"] ~ .sheet-ms-attackrow__settings {
                    display: grid;
                } 

                &__settingsrow {
                    display: grid;   
                        grid-template-columns: 1fr 1fr;
                        gap: $ms-margin;

                    &--full,
                    &--range {
                        @extend .sheet-ms-attackrow__settingsrow;
                    }

                    &--full {
                        grid-template-columns: 1fr;
                    }

                    &--range {
                        grid-column: 1 / -1;
                        display: grid;
                            grid-template-columns: 1fr 1fr 1fr;
                            
                        .sheet-ms-attackrow__settingstitle {
                            grid-column: 1 / -1;
                        }
                    }

                    &--critical {
                        grid-column: 1 / -1;
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                    }
                }

                .sheet-show_ranged {
                    display: none;
                }

                select[name*="type"][value*="Ranged"] ~ * .sheet-show_ranged {
                    display: grid;
                }
            }

            &-npcattackrow {
                display: flex;
                    justify-content: flex-start;
                    align-items: center;
                    flex-wrap: wrap;
                    gap: .125rem !important;
                height: 2.5rem;

                border-bottom: 0;

                &__cog {
                    flex-basis: 3rem;
                    margin-left: auto !important;
                }

                &__settings {
                    flex-basis: 100%;
                    margin-left: auto !important;
                }

                &__arrow {
                    flex-basis: 1em;
                    font-family: $ms-pictos;
                }

                &--head {
                    @extend .sheet-ms-npcattackrow;
                }

                input[name*="settings"][value="on"] ~ .sheet-ms-npcattackrow__settings {
                    display: grid;   
                } 
            }

            &-npcabilityrow {
                border-bottom: 0px;
            }

            &-npcabilityrow {
                grid-template-columns: 1fr 3rem;

                &--head {
                    @extend .sheet-ms-npcabilityrow;
                }

                input[name*="settings"][value="on"] ~ .sheet-ms-npcabilityrow__settings {
                    display: grid;   
                } 

                &__text {
                    grid-column: 1 / -1;
                    padding: 0 $ms-margin-large;

                    font-size: $ms-font-large;
                    text-align: left !important;
                }
            }

            &-shipweaponrow {
                grid-template-columns: 1fr 1fr 2em;

                &--head {
                    @extend .sheet-ms-shipweaponrow;
                }

                input[name*="settings"][value="on"] ~ .sheet-ms-shipweaponrow__settings {
                    display: grid;   
                } 
            }

            &-shipofficerrow {
                grid-template-columns: 1fr 1fr;

                &--head {
                    @extend .sheet-ms-shipofficerrow;
                }

                input[name*="settings"][value="on"] ~ .sheet-ms-shipofficerrow__settings {
                    display: grid;   
                } 
            }

            &-shipcargorow {
                grid-template-columns: 1fr .25fr;

                &--head {
                    display: grid;
                        grid-template-columns: 1fr .25fr 1fr .25fr;
                }

                input[name*="settings"][value="on"] ~ .sheet-ms-shipofficerrow__settings {
                    display: grid;   
                } 
            }

            &-shipbuilder {
                position: relative; 

                grid-column: 1 / -1;

                display: grid;
                    gap: $ms-margin-large;
                margin-top: $ms-margin-large * 1.5;
                padding: $ms-margin-large;

                border: 3px dashed $ms-foreground;
                border-radius: 4rem;

                h2 {
                    display: inline;
                    padding: $ms-margin-small;
                        padding-right: 0;

                    background: $ms-invert-background;
                    color: $ms-invert-foreground;
                    
                    border-radius: 2rem;

                    font-family: $ms-fonts-header;
                    text-transform: uppercase;

                    .sheet-ms-invert {
                        margin: $ms-margin-small;
                        padding: 0 $ms-margin-small;

                        background: $ms-background;
                        color: $ms-foreground;
                    
                        border-radius: 2em;
                    }
                }

                &__hwrap {
                    grid-column: 1 / -1;
                }

                &__block {
                    display: grid;
                        grid-template-columns: 1fr 1fr;

                    border: $ms-border-thick;

                    &--engine {
                        
                        .sheet-ms-shipbuilder__flex > * {
                            margin-right: 0;
                        }
                        
                    }
                }

                &__title {
                    grid-column: 1 / -1;
                    padding: 0;

                    h3 {
                        display: inline-block;
                        min-width: 50%;
                        padding: $ms-margin-small $ms-margin-large;
                        margin: 0;
                        padding-right: $ms-margin-large;

                        border-bottom-right-radius: 2em;
    
                        background: $ms-invert-background;
                        color: $ms-invert-foreground;

                        font-family: $ms-fonts-header;
                        text-align: left;
                        text-transform: uppercase;
                    }
                }

                &__flex {
                    display: flex;
                        align-items: center;
                        justify-content: space-between;
                    padding: $ms-margin;

                    > * {
                        margin-right: 3rem;
                    }
                }

                &__desc {
                    padding: $ms-margin-small $ms-margin-large;

                    p {
                        font-family: $ms-fonts-body;
                    }
                }

                &__item {
                    display: grid;
                        grid-template-columns: 1fr;
                        grid-template-rows: 4rem 1fr;
                        justify-content: center;

                    max-width: 6rem;
                    min-height: 8rem;

                    text-align: center;
                }

                &__label { 
                    font-family: $ms-fonts-header;
                    font-size: $ms-font-small;
                    font-weight: bold;
                    text-transform: uppercase;
                }

                &__hull {
                    padding: $ms-margin;
                }

                &__arrow,
                &__equals,
                &__modifier {
                    margin-top: -3rem;
                    min-height: 3rem;
                    min-width: 3rem;
                    max-height: 3rem;
                    max-width: 3rem;
                    padding: .5rem;

                    line-height: 1.5em;

                    border-radius: 4rem;
    
                    background: $ms-invert-background;
                    color: $ms-invert-foreground;

                    text-align: center;
                    font-weight: bold;

                }

                &__spacer {
                    min-width: 4rem;
                    max-width: 4rem;
                }

                &__arrow {
                    font-family: $ms-pictos;
                }

                &__display {
                    display: block;
                    height: 3.5rem;
                    width: 3.5rem;
                    margin:auto;
                    padding: .5em 0;

                    border: $ms-border;

                    background: $ms-light;

                    font-size: $ms-font-general;
                    font-weight: bold;
                    text-align: center;
                }

                &__panel {
                    grid-column: 1 / -1;
                    position: sticky; 
                        bottom: 0;
                    display: flex;
                        align-items: flex-start;
                        justify-content: space-around;
                    padding: $ms-margin-large;

                    border-top: $ms-border-thicker;
                    background: $ms-light;

                    font-size: $ms-font-large;

                    &item {
                        text-align: center;
                    }
                }

                &__wrapdisplay {
                    display: flex;
                    align-items: baseline;
                }

                &__largelabel {
                    font-family: $ms-fonts-header;  
                    font-size: $ms-font-large;
                    text-align: center;
                    text-transform: uppercase;
                    font-weight: bold;
                }

                &__largedisplay {
                    display: block;

                    font-size: $ms-font-h1 * 2;
                    font-weight: bold;
                    text-align: center;

                    &:empty {
                        &:before {
                            content: "-"
                        }
                    }
                }

                &__complete {
                    grid-column: 1 / -1;
                    text-align: center;

                    button[type="action"] {
                        border: $ms-border-thick;
                        padding: $ms-margin-large;

                        border-radius: 1rem;

                        font-family: $ms-fonts-header;
                        font-size: $ms-font-h1 * 2;
                        font-weight: bold;
                        text-transform: uppercase;

                        &:hover {
                            color: $ms-accent;
                            border-color: $ms-accent;
                        }
                    }
                }

                input[type="number"].sheet-ms-shipbuilder__input {
                    height: 3.5rem;
                    width: 3.5rem;
                    margin:auto;
                    padding: 0;

                    border: $ms-border;

                    text-align: center;
                }
            }

            &-shipwrapper {
                display: grid;
                    grid-template-columns: .75fr 1fr 1fr;
                    gap: $ms-margin-large;
                padding-bottom: 14rem;
            }

            &-crewwrap {
                display: grid;
                    grid-template-rows: auto 3rem 3rem;
                    gap: $ms-margin-large;
                    align-items: start;
            }

            &-shipstats {
                grid-row: span 3;
                align-self: start; 

                display: grid; 
                    gap: $ms-margin-large;
                    align-items: start;

                .sheet-ms-mainstat {
                    display: grid;
                        grid-template-columns: 1fr 3rem;
                    margin-top: $ms-margin-large * 2;
                }

                .sheet-ms-topstat--minmax {
                    gap: .5rem;

                    width: 80%;
                }
            }

            &-hullvalues {
                display: grid;
                    grid-template-columns: 1fr 1fr 1fr;
                    gap: $ms-margin-small;
                width: 80%;
                margin: auto;

                input[name="attr_hull_toggle"] {
                    &[value="25"] ~ {
                        .sheet-ms-topstat--25 {
                            .sheet-ms-topstat__stat {
                                border-color: $ms-accent;  
                            }
                            .sheet-ms-topstat__label--invert {
                                background-color: $ms-accent;  
                            }
                        }
                    }

                    &[value="50"] ~ {
                        .sheet-ms-topstat--50,
                        .sheet-ms-topstat--25 {
                            .sheet-ms-topstat__stat {
                                border-color: $ms-accent;  
                            }
                            .sheet-ms-topstat__label--invert {
                                background-color: $ms-accent;  
                            }
                        }
                    }

                    &[value="75"] ~ {
                        .sheet-ms-topstat--75,
                        .sheet-ms-topstat--50,
                        .sheet-ms-topstat--25 {
                            .sheet-ms-topstat__stat {
                                border-color: $ms-accent;  
                            }
                            .sheet-ms-topstat__label--invert {
                                background-color: $ms-accent;  
                            }
                        }
                    }
                }
            }

            &-shipcargo {
                grid-column: span 2;
            }

            &-shipsecondaries {
                grid-column: span 2;

                display: grid;
                    grid-template-columns: 1fr 1fr 1fr 1fr;
                    gap: $ms-margin;
                padding: $ms-margin;

                .sheet-ms-topstat {
                    grid-template-rows: 2em 1fr;
                    gap: .5em;

                    position: relative;
                    width: 100%;
                    margin-bottom: 32px;
                    padding-bottom: 10px;
                    
                    background: $ms-light;
                    border-radius: 2rem;

                    &__label {
                        align-self: center;
                        font-size: $ms-font-general;

                        cursor: pointer;

                        &:hover + .sheet-ms-tooltip {
                            display: inline-block;
                            left: calc(50% - 150px);
                            width: 400px;
                        }
                    }

                    &__stat {
                        margin-bottom: -32px;
                    }
                }
            }
        }
    }

    &-npcwrapper {
        display: block;

        > input {
            float: right;
        }
    }

    &-npcsettings {
        display: grid;
            grid-template-columns: 1fr 1fr;

        &__row {
            display: grid;
                grid-template-columns: .5fr 1fr;
                gap: $ms-margin-large;
            padding: $ms-margin-small;
            border-bottom: 1px solid $ms-foreground;
        }
    }

    &-npcname {
        display: flex;
            align-items: center;
        min-height: 10rem;
        padding: 2em;
            padding-bottom: 0;
            padding-left: 1em;

        background: $ms-invert-background;
        color: $ms-invert-foreground;

        button[type="action"].sheet-ms-npcname_button {
            border: none; 
            background: transparent; 
            padding: 0 !important;
            margin: 0;

            color: $ms-foreground;

            font-family: $ms-fonts-header;        
            font-size: 38pt;
            color: $ms-invert-foreground;
            font-weight: bold;
            text-transform: uppercase;

            &:hover {
                color: $ms-accent;
            }

            &:active {
                padding: 0;
                margin: 0;
                text-indent: 0;
            }
        }

        button.sheet-ms-npcname_switch,
        input[type="text"] {
            display: none; 
        }

        button.sheet-ms-npcname_switch {
            height: 4rem;
            width: 4rem;
            min-height: 4rem;
            min-width: 4rem;
            max-height: 4rem;
            max-width: 4rem;
            margin-left: 1rem;

            border: $ms-invert-foreground 3px solid;
            border-radius: 2rem !important;
            background: $ms-invert-background;
            color: $ms-invert-foreground;

            font-size: 14pt;
            font-weight: bold;
        }

        input[type="text"][name="attr_character_name"] {
            max-width: 50%;
            margin: 0;
            padding: 0;

            border-bottom: $ms-border-thick !important;

            font-family: $ms-fonts-header;
            font-size: 24pt !important;
            font-weight: bold;
        }

        input[type="hidden"][value="on"] { 
            & ~ input[type="text"],
            & ~ button.sheet-ms-npcname_switch {
                display: block; 
            }
            
            & ~ .sheet-ms-npcname_button {
                display: none;
            }
        }
    }


    &-npcstats {
        display: grid;
            grid-template-columns: 1fr 1fr 1fr .75fr;
            align-items: center;
            gap: $ms-margin;
        margin: $ms-margin-large 0;

        .sheet-ms-mainstat {
            grid-template-columns: 1fr 3em;
        }
    }

    &-npcrepeating {
        display: grid;
            grid-template-columns: 1fr 1fr;
            gap: $ms-margin-large;

        h3 {
            border-bottom: $ms-border-thick;
            margin-bottom: 1rem;
    
            font-family: $ms-fonts-header;
            font-size: 18pt;
            line-height: 16pt;
            text-transform: uppercase;
        }

        .repcontrol {
            margin: $ms-margin-large 0;
        }
    }

    &-npcdescription {
        h3 {
            border-bottom: $ms-border-thick;
            margin-bottom: 1rem;
    
            font-family: $ms-fonts-header;
            font-size: 18pt;
            line-height: 16pt;
            text-transform: uppercase;
        }
    }
}

@import "rolltemplate";
@import "skillcontrol";
@import "tabcontrol";
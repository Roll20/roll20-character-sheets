<script  type="text/worker">

    on("change:COMInit change:COM1 change:COM2 change:COM3 change:COM4 change:COM5  change:COM6 change:COMNumber", function(eventInfo) {
        getAttrs(["COMInit","COM1","COM2","COM3","COM4","COM5","COM6","COMNumber"],function(values){   
            let number =  parseInt(values.COMNumber)          
            let init = parseInt(values.COMInit) || 0;
            let com1 = number >= 1 ? parseInt(values.COM1) : 0 || 0;
            let com2 = number >= 2 ? parseInt(values.COM2) : 0 || 0;
            let com3 = number >= 3 ? parseInt(values.COM3) : 0 || 0;
            let com4 = number >= 4 ? parseInt(values.COM4) : 0 || 0;
            let com5 = number >= 5 ? parseInt(values.COM5) : 0 || 0;
            let com6 = number >= 6 ? parseInt(values.COM6) : 0 || 0;            
            setAttrs ({
                COM: init+com1+com2+com3+com4+com5+com6 
            })            
        })        
     }); 

     on("change:CNSInit change:CNS1 change:CNS2 change:CNS3 change:CNS4 change:CNS5  change:CNS6 change:CNSNumber", function(eventInfo) {
        getAttrs(["CNSInit","CNS1","CNS2","CNS3","CNS4","CNS5","CNS6","CNSNumber"],function(values){   
            let number =  parseInt(values.CNSNumber)          
            let init = parseInt(values.CNSInit) || 0;
            let CNS1 = number >= 1 ? parseInt(values.CNS1) : 0 || 0;
            let CNS2 = number >= 2 ? parseInt(values.CNS2) : 0 || 0;
            let CNS3 = number >= 3 ? parseInt(values.CNS3) : 0 || 0;
            let CNS4 = number >= 4 ? parseInt(values.CNS4) : 0 || 0;
            let CNS5 = number >= 5 ? parseInt(values.CNS5) : 0 || 0;
            let CNS6 = number >= 6 ? parseInt(values.CNS6) : 0 || 0;            
            setAttrs ({
                CNS: init+CNS1+CNS2+CNS3+CNS4+CNS5+CNS6 
            })            
        })        
     });

     on("change:DISInit change:DIS1 change:DIS2 change:DIS3 change:DIS4 change:DIS5 change:DIS6 change:DISNumber", function(){
        getAttrs(["DISInit","DIS1","DIS2","DIS3","DIS4","DIS5","DIS6","DISNumber"], function(values) {
            var number = parseInt(values.DISNumber) || 0;
            var init = parseInt(values.DISInit) || 0;
            var DIS1 = number >= 1 ? parseInt(values.DIS1) : 0 || 0;
            var DIS2 = number >= 2 ? parseInt(values.DIS2) : 0 || 0;
            var DIS3 = number >= 3 ? parseInt(values.DIS3) : 0 || 0;
            var DIS4 = number >= 4 ? parseInt(values.DIS4) : 0 || 0;
            var DIS5 = number >= 5 ? parseInt(values.DIS5) : 0 || 0;
            var DIS6 = number >= 6 ? parseInt(values.DIS6) : 0 || 0;
            setAttrs({
                DIS: init+DIS1+DIS2+DIS3+DIS4+DIS5+DIS6
            });
        });
    });

    on("change:ENDInit change:END1 change:END2 change:END3 change:END4 change:END5 change:END6 change:ENDNumber", function(){
        getAttrs(["ENDInit","END1","END2","END3","END4","END5","END6","ENDNumber"], function(values) {
            var number = parseInt(values.ENDNumber) || 0;
            var init = parseInt(values.ENDInit) || 0;
            var END1 = number >= 1 ? parseInt(values.END1) : 0 || 0;
            var END2 = number >= 2 ? parseInt(values.END2) : 0 || 0;
            var END3 = number >= 3 ? parseInt(values.END3) : 0 || 0;
            var END4 = number >= 4 ? parseInt(values.END4) : 0 || 0;
            var END5 = number >= 5 ? parseInt(values.END5) : 0 || 0;
            var END6 = number >= 6 ? parseInt(values.END6) : 0 || 0;
            setAttrs({
                END: init+END1+END2+END3+END4+END5+END6
            });
        });
    });
    on("change:FORInit change:FOR1 change:FOR2 change:FOR3 change:FOR4 change:FOR5 change:FOR6 change:FORNumber", function(){
        getAttrs(["FORInit","FOR1","FOR2","FOR3","FOR4","FOR5","FOR6","FORNumber"], function(values) {
            var number = parseInt(values.FORNumber) || 0;
            var init = parseInt(values.FORInit) || 0;
            var FOR1 = number >= 1 ? parseInt(values.FOR1) : 0 || 0;
            var FOR2 = number >= 2 ? parseInt(values.FOR2) : 0 || 0;
            var FOR3 = number >= 3 ? parseInt(values.FOR3) : 0 || 0;
            var FOR4 = number >= 4 ? parseInt(values.FOR4) : 0 || 0;
            var FOR5 = number >= 5 ? parseInt(values.FOR5) : 0 || 0;
            var FOR6 = number >= 6 ? parseInt(values.FOR6) : 0 || 0;
            setAttrs({
                FOR: init+FOR1+FOR2+FOR3+FOR4+FOR5+FOR6
            });
        });
    });
    on("change:HABInit change:HAB1 change:HAB2 change:HAB3 change:HAB4 change:HAB5 change:HAB6 change:HABNumber", function(){
        getAttrs(["HABInit","HAB1","HAB2","HAB3","HAB4","HAB5","HAB6","HABNumber"], function(values) {
            var number = parseInt(values.HABNumber) || 0;
            var init = parseInt(values.HABInit) || 0;
            var HAB1 = number >= 1 ? parseInt(values.HAB1) : 0 || 0;
            var HAB2 = number >= 2 ? parseInt(values.HAB2) : 0 || 0;
            var HAB3 = number >= 3 ? parseInt(values.HAB3) : 0 || 0;
            var HAB4 = number >= 4 ? parseInt(values.HAB4) : 0 || 0;
            var HAB5 = number >= 5 ? parseInt(values.HAB5) : 0 || 0;
            var HAB6 = number >= 6 ? parseInt(values.HAB6) : 0 || 0;
            setAttrs({
                HAB: init+HAB1+HAB2+HAB3+HAB4+HAB5+HAB6
            });
        });
    });
    on("change:MAGInit change:MAG1 change:MAG2 change:MAG3 change:MAG4 change:MAG5 change:MAG6 change:MAGNumber", function(){
        getAttrs(["MAGInit","MAG1","MAG2","MAG3","MAG4","MAG5","MAG6","MAGNumber"], function(values) {
            var number = parseInt(values.MAGNumber) || 0;
            var init = parseInt(values.MAGInit) || 0;
            var MAG1 = number >= 1 ? parseInt(values.MAG1) : 0 || 0;
            var MAG2 = number >= 2 ? parseInt(values.MAG2) : 0 || 0;
            var MAG3 = number >= 3 ? parseInt(values.MAG3) : 0 || 0;
            var MAG4 = number >= 4 ? parseInt(values.MAG4) : 0 || 0;
            var MAG5 = number >= 5 ? parseInt(values.MAG5) : 0 || 0;
            var MAG6 = number >= 6 ? parseInt(values.MAG6) : 0 || 0;
            setAttrs({
                MAG: init+MAG1+MAG2+MAG3+MAG4+MAG5+MAG6
            });
        });
    });
    on("change:MVTInit change:MVT1 change:MVT2 change:MVT3 change:MVT4 change:MVT5 change:MVT6 change:MVTNumber", function(){
        getAttrs(["MVTInit","MVT1","MVT2","MVT3","MVT4","MVT5","MVT6","MVTNumber"], function(values) {
            var number = parseInt(values.MVTNumber) || 0;
            var init = parseInt(values.MVTInit) || 0;
            var MVT1 = number >= 1 ? parseInt(values.MVT1) : 0 || 0;
            var MVT2 = number >= 2 ? parseInt(values.MVT2) : 0 || 0;
            var MVT3 = number >= 3 ? parseInt(values.MVT3) : 0 || 0;
            var MVT4 = number >= 4 ? parseInt(values.MVT4) : 0 || 0;
            var MVT5 = number >= 5 ? parseInt(values.MVT5) : 0 || 0;
            var MVT6 = number >= 6 ? parseInt(values.MVT6) : 0 || 0;
            setAttrs({
                MVT: init+MVT1+MVT2+MVT3+MVT4+MVT5+MVT6
            });
        });
    });
    on("change:PERInit change:PER1 change:PER2 change:PER3 change:PER4 change:PER5 change:PER6 change:PERNumber", function(){
        getAttrs(["PERInit","PER1","PER2","PER3","PER4","PER5","PER6","PERNumber"], function(values) {
            var number = parseInt(values.PERNumber) || 0;
            var init = parseInt(values.PERInit) || 0;
            var PER1 = number >= 1 ? parseInt(values.PER1) : 0 || 0;
            var PER2 = number >= 2 ? parseInt(values.PER2) : 0 || 0;
            var PER3 = number >= 3 ? parseInt(values.PER3) : 0 || 0;
            var PER4 = number >= 4 ? parseInt(values.PER4) : 0 || 0;
            var PER5 = number >= 5 ? parseInt(values.PER5) : 0 || 0;
            var PER6 = number >= 6 ? parseInt(values.PER6) : 0 || 0;
            setAttrs({
                PER: init+PER1+PER2+PER3+PER4+PER5+PER6
            });
        });
    });
    on("change:SOCInit change:SOC1 change:SOC2 change:SOC3 change:SOC4 change:SOC5 change:SOC6 change:SOCNumber", function(){
        getAttrs(["SOCInit","SOC1","SOC2","SOC3","SOC4","SOC5","SOC6","SOCNumber"], function(values) {
            var number = parseInt(values.SOCNumber) || 0;
            var init = parseInt(values.SOCInit) || 0;
            var SOC1 = number >= 1 ? parseInt(values.SOC1) : 0 || 0;
            var SOC2 = number >= 2 ? parseInt(values.SOC2) : 0 || 0;
            var SOC3 = number >= 3 ? parseInt(values.SOC3) : 0 || 0;
            var SOC4 = number >= 4 ? parseInt(values.SOC4) : 0 || 0;
            var SOC5 = number >= 5 ? parseInt(values.SOC5) : 0 || 0;
            var SOC6 = number >= 6 ? parseInt(values.SOC6) : 0 || 0;
            setAttrs({
                SOC: init+SOC1+SOC2+SOC3+SOC4+SOC5+SOC6
            });
        });
    });
    on("change:SURInit change:SUR1 change:SUR2 change:SUR3 change:SUR4 change:SUR5 change:SUR6 change:SURNumber", function(){
        getAttrs(["SURInit","SUR1","SUR2","SUR3","SUR4","SUR5","SUR6","SURNumber"], function(values) {
            var number = parseInt(values.SURNumber) || 0;
            var init = parseInt(values.SURInit) || 0;
            var SUR1 = number >= 1 ? parseInt(values.SUR1) : 0 || 0;
            var SUR2 = number >= 2 ? parseInt(values.SUR2) : 0 || 0;
            var SUR3 = number >= 3 ? parseInt(values.SUR3) : 0 || 0;
            var SUR4 = number >= 4 ? parseInt(values.SUR4) : 0 || 0;
            var SUR5 = number >= 5 ? parseInt(values.SUR5) : 0 || 0;
            var SUR6 = number >= 6 ? parseInt(values.SUR6) : 0 || 0;
            setAttrs({
                SUR: init+SUR1+SUR2+SUR3+SUR4+SUR5+SUR6
            });
        });
    });
    on("change:TIRInit change:TIR1 change:TIR2 change:TIR3 change:TIR4 change:TIR5 change:TIR6 change:TIRNumber", function(){
        getAttrs(["TIRInit","TIR1","TIR2","TIR3","TIR4","TIR5","TIR6","TIRNumber"], function(values) {
            var number = parseInt(values.TIRNumber) || 0;
            var init = parseInt(values.TIRInit) || 0;
            var TIR1 = number >= 1 ? parseInt(values.TIR1) : 0 || 0;
            var TIR2 = number >= 2 ? parseInt(values.TIR2) : 0 || 0;
            var TIR3 = number >= 3 ? parseInt(values.TIR3) : 0 || 0;
            var TIR4 = number >= 4 ? parseInt(values.TIR4) : 0 || 0;
            var TIR5 = number >= 5 ? parseInt(values.TIR5) : 0 || 0;
            var TIR6 = number >= 6 ? parseInt(values.TIR6) : 0 || 0;
            setAttrs({
                TIR: init+TIR1+TIR2+TIR3+TIR4+TIR5+TIR6
            });
        });
    });

       on("change:VOLInit change:VOL1 change:VOL2 change:VOL3 change:VOL4 change:VOL5 change:VOL6 change:VOLNumber", function(){
        getAttrs(["VOLInit","VOL1","VOL2","VOL3","VOL4","VOL5","VOL6","VOLNumber"], function(values) {
            var number = parseInt(values.VOLNumber) || 0;
            var init = parseInt(values.VOLInit) || 0;
            var VOL1 = number >= 1 ? parseInt(values.VOL1) : 0 || 0;
            var VOL2 = number >= 2 ? parseInt(values.VOL2) : 0 || 0;
            var VOL3 = number >= 3 ? parseInt(values.VOL3) : 0 || 0;
            var VOL4 = number >= 4 ? parseInt(values.VOL4) : 0 || 0;
            var VOL5 = number >= 5 ? parseInt(values.VOL5) : 0 || 0;
            var VOL6 = number >= 6 ? parseInt(values.VOL6) : 0 || 0;
            setAttrs({
                VOL: init+VOL1+VOL2+VOL3+VOL4+VOL5+VOL6
            });
        });
    });    
    on("change:COM change:CNS change:END change:FOR change:MVT change:PER change:VOL change:BV change:BS", function(){
        getAttrs(["COM","CNS","END","FOR","MVT","PER","VOL","INIT","VM","SFM","DM","BV","BS"], function(values) {
            var vol = parseInt(values.VOL) || 0;
            var bc = Math.trunc((parseInt(values.COM) || 0) / 10);
            var bm = Math.trunc((parseInt(values.MVT) || 0) / 10);
            var bp = Math.trunc((parseInt(values.PER) || 0) / 10);
            var f5 = Math.trunc((parseInt(values.FOR) || 0) / 5);
            var e5 = Math.trunc((parseInt(values.END) || 0) / 5);
            var bv = Math.trunc(vol / 10);
            var v5 = Math.trunc(vol / 5);
            var c5 = Math.trunc((parseInt(values.CNS) || 0) / 5);
            var bf = Math.trunc((parseInt(values.FOR) || 0) / 10);
            var vb =  parseInt(values.BV) || 0;
            var bs = parseInt(values.BS) || 0;
            setAttrs({
                INIT: bc+bm+bp,
                VM: f5+e5+bv+vb,
                SFM: v5+c5+bc+bs ,
                BF : bf               

            });
        });
    });
</script>   

 <!-- ===== FEUILLE =====  -->

<div class="main-container  text-white bg">
    <div class=" card p-2"> 
        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Brigandyne/brigandyne_logo.png" alt="">
        <!-- PERSO/PV/LOGO --> 
        <div class="px-5 card-header">            
            <div class="row">
                <p class="col-3"> 
                    <label class="form-label text-white patrickHand" for="attr_character_name">Nom du personnage</label> 
                    <input class="form-control text-dark" type="text" name="attr_character_name" id="attr_character_name"/>
                </p>
                <p class="col-2 offset-1"> 
                    <label  class="form-label text-white patrickHand" for="attr_race" >Race</label>
                    <select class="form-select" name="attr_race" id="attr_race" title="Race">
                    <option value="1">Humain</option>
                    <option value="2">Elfe</option>
                    <option value="3">Nain</option>
                    <option value="4">Halfelin</option>
                    <option value="5">Elvin</option>
                    <option value="6">Hudvâr</option>
                    <option value="7">Ogrin</option>
                    <option value="8">Orquin</option>
                    <option value="9">Morvelin</option>
                    </select>
                </p>                  
                <p class="col-3 offset-1 "> 
                    <label  class="form-label text-white patrickHand" for="attr_carriere" >Carrière</label>
                    <select class="form-select" name="attr_carriere" id="attr_carriere" title="Carrière">
                        <option value="1">Cocher</option>
                        <option value="2">Garde-Chasse, Garde-Faune</option>
                        <option value="3">Maître-chien, Veneur</option>
                        <option value="4">Messager, Courrier</option>
                        <option value="5">Palefrenier</option>
                        <option value="6">Péager, Écuyer</option>
                        <option value="7">Prévôt, Collecteur d'impôts</option>
                        <option value="8">Valet, Domestique</option>
                        <option value="9">Bailli, Vidame</option>
                        <option value="10">Chevalier</option>
                        <option value="11">Chevalier du vol</option>
                        <option value="12">Courtisan, Flagorneur</option>
                        <option value="13">Dépravé</option>
                        <option value="14">Diplomate, Conseiller</option>
                        <option value="15">Gentilhomme, Hobereau</option>
                        <option value="16">Noble de robe</option>
                        <option value="17">Aubergiste, Tavernier</option>
                        <option value="18">Charpentier</option>
                        <option value="19">Chirurgien-Barbier</option>
                        <option value="20">Colporteur, Itiniérant</option>
                        <option value="21">Forgeron, Armurier</option>
                        <option value="22">Marchand, Négoiant</option>
                        <option value="23">Manouvrier, Portefaix</option>
                        <option value="24">Mineur</option>
                        <option value="25">Assassin, Tueur à gages</option>
                        <option value="26">Bandit de grand chemin</option>
                        <option value="27">Détrousseur, Truand</option>
                        <option value="28">Hors-la-loi, Rebelle</option>
                        <option value="29">Pirate</option>
                        <option value="30">Racketteur</option>
                        <option value="31">Ribaud</option>
                        <option value="32">Voleur de bétail</option>
                        <option value="33">Acrobate, Jongleur</option>
                        <option value="34">Comédien, Ventriloque</option>
                        <option value="35">Diseur de bonne aventure</option>
                        <option value="36">Dresseur</option>
                        <option value="37">Lanceur de couteaux</option>
                        <option value="38">Lutteur de foire</option>
                        <option value="39">Ménestrel, Musicien</option>
                        <option value="40">Prestidigitateur, Escamoteur</option>
                        <option value="41">Apothicaire, Herboriste</option>
                        <option value="42">Architecte</option>
                        <option value="43">Avocat, Procureur</option>
                        <option value="44">Cartographe</option>
                        <option value="45">Estudiant</option>
                        <option value="46">Ingénieur, Inventeur</option>
                        <option value="47">Médecin, Docteur</option>
                        <option value="48">Scribe, Écrivain public</option>
                        <option value="49">Agitateur, Anarchiste</option>
                        <option value="50">Cambrioleur, Monte-en-l'air</option>
                        <option value="51">Charlatan, Escroc</option>
                        <option value="52">Contrebandier, Receleur</option>
                        <option value="53">Espion</option>
                        <option value="54">Joueur professionnel</option>
                        <option value="55">Pilleur de tombes</option>
                        <option value="56">Tire-Laine, Vide-gousset</option>
                        <option value="57">Archer, Arbalestier</option>
                        <option value="58">Champion, Gladiateur</option>
                        <option value="59">Chasseur de primes</option>
                        <option value="60">Combattant des tunnels</option>
                        <option value="61">Garde du corps, Estafier</option>
                        <option value="62">Mercenaire</option>
                        <option value="63">Tueur de monstres</option>
                        <option value="64">Spadassin, Duelliste</option>
                        <option value="65">Artilleur, Pétardier</option>
                        <option value="66">Bourreau</option>
                        <option value="67">Cavalier</option>
                        <option value="68">Éclaireur</option>
                        <option value="69">Garde</option>
                        <option value="70">Limier</option>
                        <option value="71">Patrouilleur, Garde-route</option>
                        <option value="72">Soldat</option>
                        <option value="73">Alchimiste</option>
                        <option value="74">Astrologue, Devin</option>
                        <option value="75">Élémentaliste</option>
                        <option value="76">Illusionniste</option>
                        <option value="77">Juge-Mage</option>
                        <option value="78">Magelame</option>
                        <option value="79">Nécromancien</option>
                        <option value="80">Sorcier</option>
                        <option value="81">Chiffonnier</option>
                        <option value="82">Égoutier</option>
                        <option value="83">Mendiant</option>
                        <option value="84">Prostitué</option>
                        <option value="85">Ratier</option>
                        <option value="86">Rebouteux</option>
                        <option value="87">Trafiquant de cadavres</option>
                        <option value="88">Vagabond</option>
                        <option value="89">Batelier</option>
                        <option value="90">Berger, Pâtre</option>
                        <option value="91">Bûcheron</option>
                        <option value="92">Chasseur, Trappeur</option>
                        <option value="93">Guide-convoyeur</option>
                        <option value="94">Marin</option>
                        <option value="95">Paysan, Journalier</option>
                        <option value="96">Pêcheur</option>
                        <option value="97">Chasseur de mages, Purgiste</option>
                        <option value="98">Druide</option>
                        <option value="99">Fanatique</option>
                        <option value="100">Initié</option>
                        <option value="101">Inquisiteur</option>
                        <option value="102">Prêcheur, Missionnaire</option>
                        <option value="103">Templier, Chevalier d'Abel, Missionnaire</option>
                    </select>
                </p>
                <p class="col-2">
                    <label class="form-label text-white patrickHand" for="attr_niveau_vie">Nv. de vie</label>
                    <select class="form-select" name="attr_niveau_vie" id="attr_niveau_vie"  title="Nv_vie">
                        <option value="1">Misérable</option>
                        <option value="2">Pauvre</option>
                        <option value="3">Ordinaire</option>
                        <option value="4">Aisé</option>
                        <option value="5">Riche</option>
                        <option value="6">Royal</option>
                    </select>
                </p>
            </div>                      
        </div> 
        <div class="card-body">            
            <div class="row">
                <div class="col-4 ">
                    <h3>Vitalité</h3>
                    <div>
                        <input  class="form-control-sm" min="0" style="min-width: 40px;" type="number" name="attr_vitalite" value="0" title="Vitalité courante" />
                        /
                        <input style="min-width: 40px;" class="form-control-sm"   type="number" name="attr_VM" value="0" title="Vitalité maximum"  />
                        <input style="min-width: 40px;" class="form-control-sm"   type="number" name="attr_BV" value="0" title="Bonus Vitalité"  />
                    </div>
                </div>
                <div class="col-4">  
                    <h3>Sang-Froid</h3>
                    <div>
                        <input  class="form-control-sm"  min="0"   style="min-width: 40px;" type="number" name="attr_sang_froid" value="0" title="Sang-Froid actuel" />
                        /
                        <input  class="form-control-sm"  style="min-width: 40px;"  type="number" name="attr_SFM" value="0" title="Sang-froid maximums"  />
                        <input style="min-width: 40px;" class="form-control-sm"   type="number" name="attr_BS" value="0" title="Bonus Sang-Froid"  />
                    </div>
                </div>
                <div class="col-3">
                    <h3>Destin</h3>
                    <div>
                        <input  class="form-control-sm"  min="0"   style="min-width: 40px;" type="number" name="attr_destin" value="0" title="Destin actuel" />
                        /
                        <input  class="form-control-sm"  style="min-width: 40px;"  type="number" name="attr_DM" value="0" title="Destin maximums"  />
                    </div>
                </div>
                <div class="col-md-4">
                    <h3>Initiative</h3>
                    <div>
                        <input  class="form-control-sm"  style="width: 40px;"  type="text" name="attr_INIT" value="0" title="Initiative"  />
                    </div>
                </div>               
                <div class="col-md-7"">
                    <h3>Protection</h3>
                    <div>   
                        <input style="min-width: 40px;" class="form-select-sm" type="number" name="attr_protection" value="0" title="Protection" />
                        <input  class ="form-control-sm" type="text" name="attr_protection_name" title="Nom de la protection" />
                    </div>
                </div>
                <div >
                    <input  class="form-control-sm"  style="min-width: 40px;"  type="text" name="attr_BF" value="0" title="BF" readonly hidden/>
                </div>
            </div>        
            <hr>
        <!-- Evolution et Argent -->
            <div class="row p-4 text-white">
                <div class="col-2 text-center">
                    <h3>Expérience</h3>
                    <input class="form-control-sm" style="min-width: 55px;" type="number" name="attr_experience" id="attr_experience"  title="Expérience Accumulée">
                    <span class="fw-bold fs-4"> px </span> 
                </div>

                <div class="col-4 text-center">
                    <h3>Monnaie</h3>                    
                    <input class="form-control-sm" style="width:35px;" type="text" min="0" name="attr_or" id="attr_or"  title="Piece d'or Possédées">
                    <span class="fw-bold fs-4"> po </span> 
                    <input class="form-control-sm" style="width: 35px;" type="text"  min="0" name="attr_argent" id="attr_argent"  title="Piece d'argent Possédées">
                    <span class="fw-bold fs-4"> pa </span> 
                    <input class="form-control-sm" style="width: 35px;" type="text"  min="0" name="attr_cuivre" id="attr_cuivre"  title="Piece de cuivre Possédées">
                    <span class="fw-bold fs-4"> pc </span> 
                </div>

                <div class="col-2  text-center">
                    <h3>Archétype</h3>               
                    <input type="text" list="archetype"  class="form-control-sm" style="width: 70px;" type="text" name="attr_archetype" id="attr_archetype"  title="Archétype"/>
                        <datalist id="archetype">
                            <option value="Aigle">Aigle</option>
                            <option value="Âne">Âne</option>
                            <option value="Cerf">Cerf</option>
                            <option value="Chat">Chat</option>
                            <option value="Chien">Chien</option>
                            <option value="Coq">Coq</option>
                            <option value="Corbeau">Corbeau</option>
                            <option value="Fourmi">Fourmi</option>
                            <option value="Hibou">Hibou</option>
                            <option value="Hyène">Hyène</option>
                            <option value="Lapin">Lapin</option>
                            <option value="Lion">Lion</option>
                            <option value="Loup">Loup</option>
                            <option value="Moutton">Moutton</option>
                            <option value="Ours">Ours</option>
                            <option value="Paon">Paon</option>
                            <option value="Porc">Porc</option>
                            <option value="Rat">Rat</option>
                            <option value="Renard">Renard</option>
                            <option value="Serpent">Serpent</option>
                            <option value="Singe">Singe</option>
                            <option value="Souris">Souris</option>
                            <option value="Taureau">Taureau</option>
                            <option value="Vautour">Vautour</option>
                        </datalist>                  
                </div> 
                <div class="col-4  text-center">
                    <h3>Langues</h3> 
                    <fieldset  class="repeating_Langue" >
                        <input type="text" class="form-control-sm"  style="width: 70px;" type="text" name="attr_Langue1" id="attr_Langue1" title="Langue1"/>    <input type="text" class="form-control-sm"  style="width: 70px;" type="text" name="attr_Langue2" id="attr_Langue2" title="Langue2"/>                           
                    </fieldset>  
                </div> 



            </div>
            <h3 class="text-center"> Vice / Vértu</h3>
            <div class="row text-center">                
                <div class="col-4 text-center">
                    <div class="row">
                        <div class="col-4">
                            <p>Avare</p>
                            <p>Colérique</p>
                            <p>Cruel</p>
                            <p>Envieux</p>                            
                        </div>
                        <div class="col-2">
                            <input type="number" min="-3" max="3"  name="attr_Avare" id="attr_Avare"  title="Avare"> 
                            <input type="number" min="-3" max="3"  name="attr_Colérique" id="attr_Colérique"  title="Colérique"> 
                            <input type="number" min="-3" max="3"  name="attr_Cruel" id="attr_Cruel"  title="Cruel"> 
                            <input type="number" min="-3" max="3"  name="attr_Envieux" id="attr_Envieux"  title="Envieux">                           
                        </div>
                        <div class="col-2">
                            <input type="number" min="-3" max="3" name="attr_Généreux" id="attr_Généreux"  title="Généreux">
                            <input type="number" min="-3" max="3" name="attr_Prudent" id="attr_Prudent"  title="Prudent">
                            <input type="number" min="-3" max="3" name="attr_Clément" id="attr_Clément"  title="Clément">
                            <input type="number" min="-3" max="3" name="attr_Bienveillant" id="attr_Bienveillant"  title="Bienveillant">                            
                        </div>
                        <div class="col-4">
                            <p>Généreux</p>
                            <p>Prudent</p>
                            <p>Clément</p>
                            <p>Bienveillant</p>                            
                        </div>
                    </div>
                </div> 
                <div class="col-4 text-center">
                    <div class="row">
                        <div class="col-4">
                            <p>Gourmand</p>
                            <p>Lâche</p>
                            <p>Luxurieux</p>
                            <p>Orgueilleux</p>                            
                        </div>
                        <div class="col-2">
                            <input type="number" min="-3" max="3" name="attr_Gourmand" id="attr_Gourmand"  title="Gourmand" > 
                            <input type="number" min="-3" max="3" name="attr_Lâche" id="attr_Lâche"  title="Lâche" > 
                            <input type="number" min="-3" max="3" name="attr_Luxurieux" id="attr_Luxurieux"  title="Luxurieux" > 
                            <input type="number" min="-3" max="3" name="attr_Orgueilleux" id="attr_Orgueilleux"  title="Orgueilleux" >                             
                        </div>
                        <div class="col-2">
                            <input type="number" min="-3" max="3" name="attr_Sobre" id="attr_Sobre"  title="Sobre">
                            <input type="number" min="-3" max="3" name="attr_Valeureux" id="attr_Valeureux"  title="Valeureux">
                            <input type="number" min="-3" max="3" name="attr_Chaste" id="attr_Chaste"  title="Chaste">
                            <input type="number" min="-3" max="3" name="attr_Humble" id="attr_Humble"  title="Humble">                            
                        </div>
                        <div class="col-4">
                            <p>Sobre</p>
                            <p>Valeureux</p>
                            <p>Chaste</p>
                            <p>Humble</p>                            
                        </div>
                    </div>                                 
                </div>   
                <div class="col-4 text-center">
                    <div class="row">
                        <div class="col-4">
                            <p>Paresseux</p>
                            <p>Trompeur</p>                                                     
                        </div>
                        <div class="col-2">
                            <input type="number" min="-3" max="3" name="attr_Paresseux" id="attr_Paresseux"  title="Paresseux"> 
                            <input type="number" min="-3" max="3" name="attr_Trompeur" id="attr_Trompeur"  title="Trompeur">                                                      
                        </div>
                        <div class="col-2">
                            <input type="number" min="-3" max="3" name="attr_Travailleur" id="attr_Travailleur"  title="Travailleur">
                            <input type="number" min="-3" max="3" name="attr_Loyal" id="attr_Loyal"  title="Loyal">                                                     
                        </div>
                        <div class="col-4">
                            <p>Travailleur</p>
                            <p>Loyal</p>                                               
                        </div>
                    </div>                                 
                </div>  
            </div>
            <hr>
        <!-- Compétences -->    
            <h2>Compétences</h2>
        
            <div class="row"> 
                <div class="col-md-6">
                    <div >
                        <input class="career-input" type="number" min="0" max="6" name="attr_COMNumber" value="0" title="Combat, nombre de cases" />
                        <button class="btn btn-danger"  style="min-width: 75px " type="roll" name="COM" title="Jet de Combat" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Combat (COM)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{COM}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> COM</button>
                        <input class="form-control-sm" style="min-width: 50px;" type="number" name="attr_COMInit" value="0" title="Combat, valeur initiale" />
                        <input type="checkbox" name="attr_COM1" value="5" title="Combat, première case" />
                        <input type="checkbox" name="attr_COM2" value="5" title="Combat, deuxième case" />
                        <input type="checkbox" name="attr_COM3" value="5" title="Combat, troisième case" />
                        <input type="checkbox" name="attr_COM4" value="5" title="Combat, quatrième case" />
                        <input type="checkbox" name="attr_COM5" value="5" title="Combat, cinquième case" />
                        <input type="checkbox" name="attr_COM6" value="5" title="Combat, sixième case" />
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_COM" value="0" title="Combat, valeur finale" readonly />
                    </div>
                    <div>
                        <input class="career-input" type="number" min="0" max="6" name="attr_CNSNumber" value="0" title="Connaissances, nombre de cases"  />
                        <button class="btn btn-danger" style="min-width: 75px;" type="roll" name="CNS" title="Jet de Connaissances" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Connaissances (CNS)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{CNS}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> CNS</button>
                        <input class="form-control-sm" style="min-width: 50px;" type="number" name="attr_CNSInit" value="0" title="Connaissances, valeur initiale" />
                        <input type="checkbox" name="attr_CNS1" value="5" title="Connaissances, première case" />
                        <input type="checkbox" name="attr_CNS2" value="5" title="Connaissances, deuxième case" />
                        <input type="checkbox" name="attr_CNS3" value="5" title="Connaissances, troisième case" />
                        <input type="checkbox" name="attr_CNS4" value="5" title="Connaissances, quatrième case" />
                        <input type="checkbox" name="attr_CNS5" value="5" title="Connaissances, cinquième case" />
                        <input type="checkbox" name="attr_CNS6" value="5" title="Connaissances, sixième case" />
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_CNS" value="0" title="Connaissances, valeur finale" readonly />
                    </div> 
                    <div >
                        <input class="career-input" type="number" min="0" max="6" name="attr_DISNumber" value="0" title="Discrétion, nombre de cases"  />
                        <button class="btn btn-danger" style="min-width: 75px;" type="roll" name="DIS" title="Jet de Discrétion" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Discrétion (DIS)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{DIS}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> DIS</button>
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_DISInit" value="0" title="Discrétion, valeur initiale" />
                        <input type="checkbox" name="attr_DIS1" value="5" title="Discrétion, première case" />
                        <input type="checkbox" name="attr_DIS2" value="5" title="Discrétion, deuxième case" />
                        <input type="checkbox" name="attr_DIS3" value="5" title="Discrétion, troisième case" />
                        <input type="checkbox" name="attr_DIS4" value="5" title="Discrétion, quatrième case" />
                        <input type="checkbox" name="attr_DIS5" value="5" title="Discrétion, cinquième case" />
                        <input type="checkbox" name="attr_DIS6" value="5" title="Discrétion, sixième case" />
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_DIS" value="0" title="Discrétion, valeur finale" readonly />
                    </div>
                    <div >
                        <input class="career-input" type="number" min="0" max="6" name="attr_ENDNumber" value="0" title="Endurance, nombre de cases"  />
                        <button  class="btn btn-danger" style="min-width: 75px;" type="roll" name="END" title="Jet de Endurance" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Endurance (END)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{END}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> END</button>
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_ENDInit" value="0" title="Endurance, valeur initiale" />
                        <input type="checkbox" name="attr_END1" value="5" title="Endurance, première case" />
                        <input type="checkbox" name="attr_END2" value="5" title="Endurance, deuxième case" />
                        <input type="checkbox" name="attr_END3" value="5" title="Endurance, troisième case" />
                        <input type="checkbox" name="attr_END4" value="5" title="Endurance, quatrième case" />
                        <input type="checkbox" name="attr_END5" value="5" title="Endurance, cinquième case" />
                        <input type="checkbox" name="attr_END6" value="5" title="Endurance, sixième case" />
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_END" value="0" title="Endurance, valeur finale" readonly />
                    </div>
                    <div>
                        <input class="career-input" type="number" min="0" max="6" name="attr_FORNumber" value="0" title="Force, nombre de cases"  />
                        <button  class="btn btn-danger" style="min-width: 75px;" type="roll" name="FOR" title="Jet de Force" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Force (FOR)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{FOR}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> FOR</button>
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_FORInit" value="0" title="Force, valeur initiale" />
                        <input type="checkbox" name="attr_FOR1" value="5" title="Force, première case" />
                        <input type="checkbox" name="attr_FOR2" value="5" title="Force, deuxième case" />
                        <input type="checkbox" name="attr_FOR3" value="5" title="Force, troisième case" />
                        <input type="checkbox" name="attr_FOR4" value="5" title="Force, quatrième case" />
                        <input type="checkbox" name="attr_FOR5" value="5" title="Force, cinquième case" />
                        <input type="checkbox" name="attr_FOR6" value="5" title="Force, sixième case" />
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_FOR" value="0" title="Force, valeur finale" readonly />
                    </div> 
                    <div>
                        <input class="career-input" type="number" min="0" max="6" name="attr_HABNumber" value="0" title="Habilité, nombre de cases"  />
                        <button class="btn btn-danger" style="min-width: 75px;"  type="roll" name="HAB" title="Jet de Habilité" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Habilité (HAB)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{HAB}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> HAB</button>
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_HABInit" value="0" title="Habilité, valeur initiale" />
                        <input type="checkbox" name="attr_HAB1" value="5" title="Habilité, première case" />
                        <input type="checkbox" name="attr_HAB2" value="5" title="Habilité, deuxième case" />
                        <input type="checkbox" name="attr_HAB3" value="5" title="Habilité, troisième case" />
                        <input type="checkbox" name="attr_HAB4" value="5" title="Habilité, quatrième case" />
                        <input type="checkbox" name="attr_HAB5" value="5" title="Habilité, cinquième case" />
                        <input type="checkbox" name="attr_HAB6" value="5" title="Habilité, sixième case" />
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_HAB" value="0" title="Habilité, valeur finale" readonly />
                    </div>
                    <div>                       
                        <input class="career-input" type="number" min="0" max="6" name="attr_MAGNumber" value="0" title="Magie, nombre de cases"  />
                        <button class="btn btn-danger" style="min-width: 75px;" type="roll" name="MAG" title="Jet de Magie" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Magie (MAG)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{MAG}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> MAG</button>
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_MAGInit" value="0" title="Magie, valeur initiale" />
                        <input type="checkbox" name="attr_MAG1" value="5" title="Magie, première case" />
                        <input type="checkbox" name="attr_MAG2" value="5" title="Magie, deuxième case" />
                        <input type="checkbox" name="attr_MAG3" value="5" title="Magie, troisième case" />
                        <input type="checkbox" name="attr_MAG4" value="5" title="Magie, quatrième case" />
                        <input type="checkbox" name="attr_MAG5" value="5" title="Magie, cinquième case" />
                        <input type="checkbox" name="attr_MAG6" value="5" title="Magie, sixième case" />
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_MAG" value="0" title="Magie, valeur finale" readonly />
                    </div>
                </div>
                <div class="col-md-6">
                    <div>
                        <input class="career-input" type="number" min="0" max="6" name="attr_MVTNumber" value="0" title="Mouvement, nombre de cases"  />
                        <button  class="btn btn-danger" style="min-width: 75px;"type="roll" name="MVT" title="Jet de Mouvement" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Mouvement (MVT)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{MVT}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> MVT</button>
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_MVTInit" value="0" title="Mouvement, valeur initiale" />
                        <input type="checkbox" name="attr_MVT1" value="5" title="Mouvement, première case" />
                        <input type="checkbox" name="attr_MVT2" value="5" title="Mouvement, deuxième case" />
                        <input type="checkbox" name="attr_MVT3" value="5" title="Mouvement, troisième case" />
                        <input type="checkbox" name="attr_MVT4" value="5" title="Mouvement, quatrième case" />
                        <input type="checkbox" name="attr_MVT5" value="5" title="Mouvement, cinquième case" />
                        <input type="checkbox" name="attr_MVT6" value="5" title="Mouvement, sixième case" />
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_MVT" value="0" title="Mouvement, valeur finale" readonly />                                          
                    </div>
                    <div>
                        <input class="career-input" type="number" min="0" max="6" name="attr_PERNumber" value="0" title="Perception, nombre de cases"  />
                        <button class="btn btn-danger" style="min-width: 75px;" type="roll" name="PER" title="Jet de Perception" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Perception (PER)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{PER}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> PER</button>
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_PERInit" value="0" title="Perception, valeur initiale" />
                        <input type="checkbox" name="attr_PER1" value="5" title="Perception, première case" />
                        <input type="checkbox" name="attr_PER2" value="5" title="Perception, deuxième case" />
                        <input type="checkbox" name="attr_PER3" value="5" title="Perception, troisième case" />
                        <input type="checkbox" name="attr_PER4" value="5" title="Perception, quatrième case" />
                        <input type="checkbox" name="attr_PER5" value="5" title="Perception, cinquième case" />
                        <input type="checkbox" name="attr_PER6" value="5" title="Perception, sixième case" />
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_PER" value="0" title="Perception, valeur finale" readonly />
                    </div>
                    <div>
                        <input class="career-input" type="number" min="0" max="6" name="attr_SOCNumber" value="0" title="Sociabilité, nombre de cases"  />
                        <button class="btn btn-danger" style="min-width: 75px;" type="roll" name="SOC" title="Jet de Sociabilité" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Sociabilité (SOC)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{SOC}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> SOC</button>
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_SOCInit" value="0" title="Sociabilité, valeur initiale" />
                        <input type="checkbox" name="attr_SOC1" value="5" title="Sociabilité, première case" />
                        <input type="checkbox" name="attr_SOC2" value="5" title="Sociabilité, deuxième case" />
                        <input type="checkbox" name="attr_SOC3" value="5" title="Sociabilité, troisième case" />
                        <input type="checkbox" name="attr_SOC4" value="5" title="Sociabilité, quatrième case" />
                        <input type="checkbox" name="attr_SOC5" value="5" title="Sociabilité, cinquième case" />
                        <input type="checkbox" name="attr_SOC6" value="5" title="Sociabilité, sixième case" />
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_SOC" value="0" title="Sociabilité, valeur finale" readonly />
                    </div>
                    <div >
                        <input class="career-input" type="number" min="0" max="6" name="attr_SURNumber" value="0" title="Survie, nombre de cases"  />
                        <button  class="btn btn-danger" style="min-width: 75px;" type="roll" name="SUR" title="Jet de Survie" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Survie (SUR)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{SUR}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> SUR</button>
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_SURInit" value="0" title="Survie, valeur initiale" />
                        <input type="checkbox" name="attr_SUR1" value="5" title="Survie, première case" />
                        <input type="checkbox" name="attr_SUR2" value="5" title="Survie, deuxième case" />
                        <input type="checkbox" name="attr_SUR3" value="5" title="Survie, troisième case" />
                        <input type="checkbox" name="attr_SUR4" value="5" title="Survie, quatrième case" />
                        <input type="checkbox" name="attr_SUR5" value="5" title="Survie, cinquième case" />
                        <input type="checkbox" name="attr_SUR6" value="5" title="Survie, sixième case" />
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_SUR" value="0" title="Survie, valeur finale" readonly />
                    </div>
                    <div >
                        <input class="career-input" type="number" min="0" max="6" name="attr_TIRNumber" value="0" title="Tir, nombre de cases" />
                        <button  class="btn btn-danger" style="min-width: 75px;" type="roll" name="TIR" title="Jet de Tir" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Tir (TIR)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{TIR}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> TIR</button>
                        <input class="value-input"  style="min-width: 50px;" type="number" name="attr_TIRInit" value="0" title="Tir, valeur initiale" />
                        <input type="checkbox" name="attr_TIR1" value="5" title="Tir, première case" />
                        <input type="checkbox" name="attr_TIR2" value="5" title="Tir, deuxième case" />
                        <input type="checkbox" name="attr_TIR3" value="5" title="Tir, troisième case" />
                        <input type="checkbox" name="attr_TIR4" value="5" title="Tir, quatrième case" />
                        <input type="checkbox" name="attr_TIR5" value="5" title="Tir, cinquième case" />
                        <input type="checkbox" name="attr_TIR6" value="5" title="Tir, sixième case" />
                        <input class="value-input" style="min-width: 50px;" type="number" name="attr_TIR" value="0" title="Tir, valeur finale" readonly />
                    </div>
                    <div>
                        <input type="number" min="0" max="6" name="attr_VOLNumber" value="0" title="Volonté, nombre de cases"  />
                        <button class="btn btn-danger" style="min-width: 75px;"  type="roll" name="VOL" title="Jet de Volonté" value="&{template:tmpl} {{pc=@{character_name}}} {{name=Volonté (VOL)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{VOL}+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}}"> VOL</button>
                        <input style="min-width: 50px;" type="number" name="attr_VOLInit" value="0" title="Volonté, valeur initiale" />
                        <input type="checkbox" name="attr_VOL1" value="5" title="Volonté, première case" />
                        <input type="checkbox" name="attr_VOL2" value="5" title="Volonté, deuxième case" />
                        <input type="checkbox" name="attr_VOL3" value="5" title="Volonté, troisième case" />
                        <input type="checkbox" name="attr_VOL4" value="5" title="Volonté, quatrième case" />
                        <input type="checkbox" name="attr_VOL5" value="5" title="Volonté, cinquième case" />
                        <input type="checkbox" name="attr_VOL6" value="5" title="Volonté, sixième case" />
                        <input  style="min-width: 50px;" type="number" name="attr_VOL" value="0" title="Volonté, valeur finale" readonly />
                    </div>
                </div>
            </div> 
        <!-- Atouts & inventaire -->
            <div class="row mt-3">
                <div class="col">
                    <div class="card">
                        <h3 class="card-header text-center text-white bg-secondary">Atouts</h3>
                        <div class="card-body">
                            <textarea name="attr_atouts" id="attr_atouts" cols="60" rows="10"></textarea>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card ">
                        <h3 class="card-header text-center text-white bg-secondary">Inventaire</h3>
                        <div class="card-body">
                            <textarea name="attr_inventaire" id="attr_inventaire" cols="60" rows="10"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        <!-- Armes -->
            <!-- ARMES MELEES -->
            <div>
                <h3 class="mt-3"> Armes de corps à corps </h3>
                <table class="table">                
                    <tr>
                        <th>Armes</th>
                        <th>&nbsp</th>
                        <th>Mod.</th>
                        <th>DMG</th>
                        <th>Portée</th>                    
                        <th>Main</th>
                        <th>Special</th>
                    </tr>                  
                    <tr>
                        <td><input type="text" name="attr_melee_nom_bag" value="Bagarre, mains nues"  style="width: 100%;" placeholder="Arme de mêlée" /></td>
                        <td><button type="roll" class="atk" name="MainsNues" title="Attaque à mains nues" value="&{template:tmpl} {{pc=@{character_name}}} {{name=@{melee_nom_bag} (COM)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{COM}+(@{melee_mod_bag})[Mod.]+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}} {{dmg=[[@{BF}[BF]+(@{melee_deg_bag})[Arme]]]}} {{dmgmin=[[1]]}}"></button></td>
                        <td><input type="number" name="attr_melee_mod_bag" value="0" class="min arme" title="Modificateur à l'attaque" /></td>
                        <td><input type="number" name="attr_melee_deg_bag" value="-2" class="min arme" title="Dégâts" /></td>
                        <td>
                            <select class="form-select" name="attr_melee_all_bag" title="Allonge">
                                <option value="-">&#9660;</option>
                                <option>AA</option>
                                <option>A</option>
                                <option>B</option>
                                <option>C</option>
                                <option>D</option>
                                <option>E</option>
                                <option selected>F</option>
                            </select>
                        </td>                       
                        <td>
                            <select class="form-select" name="attr_melee_main_bag" title="Mains">
                                <option value="-">&#9660;</option>
                                <option value="1">&#9995;</option>
                                <option value="1.5" selected>&#9995;|&#9995;</option>
                                <option value="2">&#9995; &#9995;</option>
                            </select>

                        </td>
                        <td>
                            <input type="text" name="attr_melee_spec_bag" value="Dégâts temporaires, lutte"  style="width: 100%;"  placeholder="Spécial" /> 
                        </td>
                    </tr>   
                </table>
                    <fieldset  class="repeating_armes" >    
                        <table class="table">
                            <tr>                                           
                                <td><input type="text" name="attr_melee_nom" value="" style="width: 100%;" placeholder="Arme de mêlée" /></td> 
                                <td><button type="roll" class="atk" name="Attaque" title="Jet d'attaque" value="&{template:tmpl} {{pc=@{character_name}}} {{name=@{melee_nom} (COM)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{COM}+(@{melee_mod})[Mod.]+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}} {{dmg=[[@{BF}[BF]+(@{melee_deg})[Arme]]]}}"></button></td>
                                <td><input type="number" name="attr_melee_mod" value="0" class="min arme" title="Modificateur à l'attaque" /></td>
                                <td><input type="number" name="attr_melee_deg" value="0" class="min arme" title="Dégâts" /></td>
                                <td>
                                    <select class="form-select" name="attr_melee_all_bag" title="Allonge">
                                        <option value="-">&#9660;</option>
                                        <option>AA</option>
                                        <option>A</option>
                                        <option>B</option>
                                        <option>C</option>
                                        <option>D</option>
                                        <option>E</option>
                                        <option selected>F</option>
                                    </select>
                                </td>                               
                                <td>
                                    <select class="form-select" name="attr_melee_main_bag" title="Mains">
                                        <option value="-">&#9660;</option>
                                        <option value="1">&#9995;</option>
                                        <option value="1.5" selected>&#9995;|&#9995;</option>
                                        <option value="2">&#9995; &#9995;</option>
                                    </select>

                                </td>
                                <td>
                                    <input type="text" name="attr_melee_spec_bag" value="Dégâts temporaires, lutte"  style="width: 100%;"  placeholder="Spécial" /> 
                                </td>
                            </tr>
                        </table> 
                    </fieldset >                        
            </div>
            <!-- FIN ARMES MELEES -->
            <!-- ARMES TIR -->
            <div>
                <h3 class="mt-3"> Arme de distance </h3>
                <table class="table">                
                    <tr>
                        <th>Armes</th>
                        <th>&nbsp</th>                
                        <th>Mod.</th>
                        <th>DMG</th>
                        <th>Portée</th>                       
                        <th>Main</th>
                        <th>Mun.</th>
                        <th>Special</th>
                    </tr>  
                    <tr>                                           
                        <td><input type="text" name="attr_tir_nom" value="" style="width: 100%;" placeholder="Arme de distance" /></td> 
                        <td><button type="roll" class="atk" name="Attaque" title="Jet d'attaque" value="&{template:tmpl} {{pc=@{character_name}}} {{name=@{tir_nom} (TIR)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{TIR}+(@{tir_mod})[Mod.]+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}} {{dmg=[[@{tir_for}[BF]+(@{tir_deg})[Arme]]]}} {{dmgmin=[[1]]}}"></button></td>
                        <td><input type="number" name="attr_tir_mod" value="0" class="min arme" title="Modificateur à l'attaque" /></td>
                        <td> <input type="number" name="attr_tir_deg" value="0" class="min arme" title="Dégâts" />
                            <input type="checkbox" name="attr_tir_for" value="[[@{BF}]]" class="dispchk" title="Appliquer le Bonus de Force aux dégâts" /><span>BF</span>
                        </td>
                        <td>
                            <input type="text" name="attr_tir_port" value="" class="min arme" style="width: 100%;" title="Portée" />
                        </td>                        
                        <td>
                            <select class="form-select" name="attr_tir_main" title="Mains">
                                <option value="-">&#9660;</option>
                                <option value="1">&#9995;</option>
                                <option value="1.5" selected>&#9995;|&#9995;</option>
                                <option value="2">&#9995; &#9995;</option>
                            </select>
                        </td>
                        <td><input type="number" name="attr_tir_mun" value="0" class="min arme" title="Munitions restantes" /></td>
                        <td>
                            <input type="text" name="attr_tir_spec" value="Dégâts temporaires, Tir rapide"  style="width: 100%;"  placeholder="Spécial" /> 
                        </td>
                    </tr>              
                    
                </table>
                <fieldset  class="repeating_tirs" >    
                    <table class="table">                        
                        <tr>                                           
                            <td><input type="text" name="attr_tir_nom" value="" style="width: 100%;" placeholder="Arme à distance" /></td> 
                            <td><button type="roll" class="atk" name="Attaque" title="Jet d'attaque" value="&{template:tmpl} {{pc=@{character_name}}} {{name=@{tir_nom} (TIR)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{TIR}+(@{tir_mod})[Mod.]+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}} {{dmg=[[@{tir_for}[BF]+(@{tir_deg})[Arme] ]]}} {{dmgmin=[[1]]}}"></button></td>
                            <td><input type="number" name="attr_tir_mod" value="0" class="min arme" title="Modificateur à l'attaque" /></td>
                            <td> <input type="number" name="attr_tir_deg" value="0" class="min arme" title="Dégâts" />
                                <input type="checkbox" name="attr_tir_for" value="[[@{BF}]]" class="dispchk" title="Appliquer le Bonus de Force aux dégâts" /><span>BF</span>
                            </td>
                            <td>
                                <input type="text" name="attr_tir_port" value="" class="min arme" style="width: 100%;" title="Portée" />
                            </td>                           
                            <td>
                                <select class="form-select" name="attr_tir_main" title="Mains">
                                    <option value="-">&#9660;</option>
                                    <option value="1">&#9995;</option>
                                    <option value="1.5" selected>&#9995;|&#9995;</option>
                                    <option value="2">&#9995; &#9995;</option>
                                </select>
                            </td>
                            <td><input type="number" name="attr_tir_mun" value="0" title="Munitions restantes" /></td>
                            <td>
                                <input type="text" name="attr_tir_spec" value="Dégâts temporaires, tir rapide"  style="width: 100%;"  placeholder="Spécial" /> 
                            </td>
                        </tr>
                    </table> 
                </fieldset >
            </div>                        
            <!-- FIN ARMES TIR -->
        <!-- MAGIE -->               
            <div>
                <h3 class="mt-3">MAGIE</h3>
                <div class="row border border-1 p-3" > 
                    <div class="col ">
                        <div class="h4">Dons élémentaires</div>
                        <div class="d-flex">
                            <div class="me-2"><input type="checkbox" name="attr_mag_air" value="1" class="dispchk" title="Air" /><span>Air</span></div>
                            <div class="me-2"><input type="checkbox" name="attr_mag_eau" value="1" class="dispchk" title="Eau" /><span>Eau</span></div>
                            <div class="me-2"><input type="checkbox" name="attr_mag_feu" value="1" class="dispchk" title="Feu" /><span>Feu</span></div>
                            <div class="me-2"><input type="checkbox" name="attr_mag_terre" value="1" class="dispchk" title="Terre" /><span>Terre</span></div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="h4">Maléfices de magie noire</div>
                        <div class="d-flex">
                            <div class="me-2"><input type="checkbox" name="attr_mag_alchimie" value="1" class="dispchk" title="Alchimie" /><span>Alchi.</span></div>
                            <div class="me-2"><input type="checkbox" name="attr_mag_demonisme" value="1" class="dispchk" title="Démonisme" /><span>Démon.</span></div>
                            <div class="me-2"><input type="checkbox" name="attr_mag_illusions" value="1" class="dispchk" title="Illusions" /><span>Illu.</span></div>
                            <div class="me-2"><input type="checkbox" name="attr_mag_necromancie" value="1" class="dispchk" title="Nécromancie" /><span>Nécro.</span></div>
                        </div>
                    </div>
                    <div class="col ">
                        <div class="h4">Miracles de magie blanche</div>
                        <div class="d-flex">
                            <div class="me-2"><input type="checkbox" name="attr_mag_divination" value="1" class="dispchk" title="Divination" /><span>Divi.</span></div>
                            <div class="me-2"><input type="checkbox" name="attr_mag_enchantements" value="1" class="dispchk" title="Enchantements" /><span>Enchant.</span></div>
                            <div class="me-2"><input type="checkbox" name="attr_mag_protection" value="1" class="dispchk" title="Protection" /><span>Protec.</span></div>
                            <div class="me-2"><input type="checkbox" name="attr_mag_psyche" value="1" class="dispchk" title="Pysché" /><span>Psyché</span></div>
                        </div>
                    </div>
                    <div class="col-2">  
                        <div class="h4">Autres</div>                      
                        <div >
                            <input type="checkbox" name="attr_mag_animale" value="1" class="dispchk" title="Voie animale" /><span>Voie animale</span>
                        </div>
                    </div>
                </div>

                <div class="row mt-2">
                    <div class="col">
                            <div class="h4">Tours de Magie</div>
                            <div>
                                <textarea name="attr_mag_tours" style="width: 95%; height: 40px;" placeholder="Tours"></textarea>
                            </div>
                        </div>
                        <div class="col">
                            <div class="h4">Familier</div>
                            <div>
                                <textarea name="attr_mag_familier" style="width: 95%; height: 40px;" placeholder="Familier"></textarea>
                            </div>
                        </div>
                </div>             
                    
                
                <!-- SORTS -->
                <div class="card mt-3">
                    <div class="card-header bg-secondary">
                        <div class=" ml-2 d-flex  justify-content-between p-2 ">
                            <span class="h4">Sortilèges</span>
                            <span class="h4">&nbsp</span>
                            <span class="h4 text-center">Test</span>                    
                            <span class="h4">Diff</span>
                            <span class="h4">Durée</span>
                            <span class="h4  text-center   w-50">Effet</span>
                        </div>
                    </div>
                    <div class="card-body">     
                        <fieldset class="repeating_sorts">
                            <div class="d-flex gap-2 justify-content-between p-2">
                                <span class=""><input type="text" name="attr_sort_nom" value="" style="width: 100%;" placeholder="Sortilège" /></span>
                                <span class=""><button type="roll"  class="btn" name="Sort" title="Jet de Magie pour lancer le sort" style="height: auto;" value="&{template:tmpl} {{pc=@{character_name}}} {{name=@{sort_nom} (MAG)}} {{roll=[[1d100cs1cf100]]}} {{target=[[@{MAG}+(@{sort_diff})[Diff]+(?{Bonus(+)/Malus(-)|0})[Bonus/Malus]]]}} {{desc=(@{sort_duree}) @{sort_effet}}}"></button></span>
                                <span class="">
                                    <select class="form-select" name="attr_sort_test" title="Type de test">
                                        <option selected>Normal</option>
                                        <option>/COM</option>
                                        <option>/CNS</option>
                                        <option>/DIS</option>
                                        <option>/END</option>
                                        <option>/FOR</option>
                                        <option>/HAB</option>
                                        <option>/MAG</option>
                                        <option>/MVT</option>
                                        <option>/PER</option>
                                        <option>/SOC</option>
                                        <option>/SRV</option>
                                        <option>/TIR</option>
                                        <option>/VOL</option>
                                    </select>
                                </span>                    
                                <span><input type="number" width="30px" name="attr_sort_diff" value="0" class="min arme" title="Difficulté/Modificateur au jet de MAG" /></span>
                                <span class=""><input type="text"  style="width: 100%" name="attr_sort_duree" value="" placeholder="Durée" /></span>
                                <span  class="w-50"><textarea name="attr_sort_effet" style="width: 100%; height: 50px;" placeholder="Effet"></span>
                            </div>                  

                            <div class="d-flex justify-content-between p-2">
                                <label class=" form-label text-center w-25 " style="min-width:100px" for="attr_sort_formule">Formule</label> 
                                <textarea class="form-control " name="attr_sort_formule" style="width: 100%; height: 20px;" placeholder="Formule"></textarea>
                            </div>
                        </fieldset>
                    </div>
                </div>
                             
                <!-- FIN SORTS -->                
            </div>
        <!-- FIN MAGIE -->   
        </div>
    </div> 
    <!-- FIN CARAC -->
</div> 
<!-- FIN FEUILLE -->


<!-- === TEMPLATE   === -->
<rolltemplate class="sheet-rolltemplate-tmpl">
    <div class="tplmain" style="  background-color: transparent; border-width: 1px 2px 1px 2px; border-radius: 0px 12px 12px 12px; border-style: solid; border-color: #64553E;  width: auto" >
        <div class="pc" style="background-color:#231F20;color : white;padding: 4px 0px 4px 4px;border-radius: 0px 10px 0px 0px;font-size: 15px;font-family: 'Contrail One';display: inline-block;border-bottom: 1px dotted #64553E; width: 100%;">{{name}}</div>
        <div style="display: table;">
            {{#target}}
                <div style="display: table-row;">
                    <div class="jet"><span style="font-family: dicefontd10;font-size: x-large;">t</span> {{roll}} &le; {{target}} <span style="font-size: larger;">&#9678;</span></div>
                    <div class="jet">
                        {{#rollGreater() roll target}}
                            <span class="failure" style="color: #5215b3;">Échec</span>
                        {{/rollGreater() roll target}}
                        {{#rollTotal() roll target}}
                           <span class="success" style="color: #3FB315" >Réussite</span>
                        {{/rollTotal() roll target}}
                        {{#rollLess() roll target}}
                            <span class="success" style="color: #3FB315">Réussite</span>
                        {{/rollLess() roll target}}
                    </div>
                </div>
            {{/target}}
            {{#dmg}}
                {{#^rollGreater() roll target}}
                    <div style="display: table-row;">
                        <div class="jet"><span>Dégâts de l'Arme</span></div>
                        <div class="jet">
                            {{#rollLess() dmg 1}}
                                {{dmgmin}}
                            {{/rollLess() dmg 1}}
                            {{#rollGreater() dmg 0}}
                                {{dmg}} <span> + RU</span>
                            {{/rollGreater() dmg 0}}
                        </div>
                    </div>
                {{/^rollGreater() roll target}}
            {{/dmg}}
        </div>
        {{#desc}}
            <div class="desc bordtop" style="width: 100%;
            text-align: left;
            font-family: 'Arial';
            font-size: inherit;
            max-height: 180px;
            overflow-y: auto;
            background-color: #B5A790;
            color: #231F20; ">{{desc}}</div>
        {{/desc}}
        <div style="background-color: #86704D;color: #E0D3BA;padding: 4px 0px 4px 4px;border-radius: 0px 0px 10px 10px;font-size: 15px;font-family: 'Contrail One';display: inline-block;border-top: 1px dotted #64553E;width: 100%; ">{{pc}}</div>
    </div>
</rolltemplate>

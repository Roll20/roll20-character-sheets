<main>

<!-- To switch tabs -->
  
  <input type="hidden" class="tabs-toggle" name="attr_sheetTab"  value="character"  />

  <div class="main-top">
    
    <div class="tab-selector">

      <button type="action" name="act_character" class="tab-button" data-i18n="character" data-i18n-dynamic >Character</button> 
      <button type="action" name="act_mysteries" class="tab-button" data-i18n="mysteries" data-i18n-dynamic >Mysteries</button>
      <button type="action" name="act_tapes" class="tab-button" data-i18n="tapes" data-i18n-dynamic >Tapes</button>
    </div>
  </div>

<section class="character">

  <span style="display: none" data-i18n="day-move-text">rolls the Day Move</span>
  <span style="display: none" data-i18n="night-move-text">rolls the Night Move</span>
  <span style="display: none" data-i18n="meddling-move-text">rolls the Meddling Move</span>
  <span style="display: none" data-i18n="nostalgic-move-text">rolls the Nostalgic Move</span>
  <span style="display: none" data-i18n="answer-move-text">rolls to Answer a Question</span>
  
  <span style="display: none" data-i18n="advantage-disadvantage">Advantage or Disadvantage</span>
  <span style="display: none" data-i18n="none">None</span>
  <span style="display: none" data-i18n="advantage">Advantage</span>
  <span style="display: none" data-i18n="disadvantage">Disadvantage</span>
  <span style="display: none" data-i18n="select-ability">Select Ability to Use</span>
  
  <span style="display: none" data-i18n="answer-stat-used">Number of Clues Found - Question Complexity</span>
  <span style="display: none" data-i18n="number-clues">Number of Clues Found</span>
  <span style="display: none" data-i18n="question-complexity">Question Complexity</span>

  <section class="flex-container-nowrap">
    <div class="column">
      <div>
        <label class="heading-caps" data-i18n="name">Name</label> <input type="text" name="attr_name" />
      </div>
      <div>
        <label class="heading-caps" data-i18n="pronouns">Pronouns</label> <input type="text" name="attr_pronouns" />
      </div>
      <hr />
      <div>
        <label class="heading-caps" data-i18n="style">Style</label> 
        <textarea class="oneline" name="attr_style"></textarea>
      </div>
      <div>
        <label class="heading-caps" data-i18n="takes-you-back">Takes You Back</label>
        <fieldset class="repeating_takesyouback">
          <input type="text" name="attr_takesyouback" />
        </fieldset>
      </div>
      <div>
        <label class="heading-caps" data-i18n="corner-house">Your Corner of the House</label>
        <fieldset class="repeating_corner">
          <input type="checkbox" name="attr_corner_check" /> <input type="text" name="attr_corner" class="corner-house" />
        </fieldset>
      </div>
    </div>

    <div class="column">
      <div class="title">
        <label class="title" data-i18n="public-access">Public Access</label>
      </div>
      <div class="flex-container-nowrap">
        <div class="inline-block">
          <input type="number" name="attr_vitality" value="0" />
          <label class="smaller-text centered" data-i18n="vitality" class="">Vitality</label>
        </div>
        <div class="inline-block">
          <input type="number"  name="attr_composure" value="1" />
          <label class="smaller-text centered" data-i18n="composure">Composure</label>
        </div>
        <div class="inline-block">
          <input type="number" name="attr_reason" value="1" />
          <label class="smaller-text centered" data-i18n="reason">Reason</label>
        </div>
        <div class="inline-block">
          <input type="number" name="attr_presence" value="0" />
          <label class="smaller-text centered" data-i18n="presence">Presence</label>
        </div>
        <div class="inline-block">
          <input type="number" name="attr_sensitivity" value="-1" />
          <label class="smaller-text centered" data-i18n="sensitivity">Sensitivity</label>
        </div>
        </div>
        <div>
          <label data-i18n="making-moves">Making Moves</label>
          <!-- 
            Roll formatting taken from the Brindlewood Bay community sheet:
            https://github.com/Roll20/roll20-character-sheets/tree/master/Brindlewood%20Bay
          -->
          <div class="centered">
            <button type="roll" name="roll_day_move" value='&{template:com12} {{char=@{name}}} {{move=^{day-move-text}}} {{showroll=[[1]]}} {{check=[[@{rollqueryAdvChoiceAnyStat}]]}} {{best=@{daybest}}} {{success=@{daysuccess}}} {{partial=@{daypartial}}} {{miss=@{daymiss}}}' class="rollbutton" data-i18n="day-move">The Day Move</button>
            <br />
            <button type="roll" name="roll_night_move" value='&{template:com12} {{char=@{name}}} {{move=^{night-move-text}}} {{showroll=[[1]]}} {{check=[[@{rollqueryAdvChoiceAnyStat}]]}} {{best=@{nightbest}}} {{success=@{nightsuccess}}} {{partial=@{nightpartial}}} {{miss=@{nightmiss}}}' class="rollbutton" data-i18n="night-move" >The Night Move</button>
            <br />
            <button type="roll" name="roll_meddling_move" value='&{template:com12} {{char=@{name}}} {{move=^{meddling-move-text}}} {{showroll=[[1]]}} {{check=[[@{rollqueryAdvChoiceAnyStat}]]}} {{best=@{meddlingbest}}} {{success=@{meddlingsuccess}}} {{partial=@{meddlingpartial}}} {{miss=@{meddlingmiss}}}' class="rollbutton" data-i18n="meddling-move" >The Meddling Move</button>
            <br />
            <button type="roll" name="roll_nostalgic_move" value='&{template:comtext} {{char=@{name}}} {{move=^{nostalgic-move-text}}} {{movedescription=@{nostalgic-desc}}}' class="rollbutton" data-i18n="nostalgic-move" >The Nostalgic Move</button>
            <br />
            <button type="roll" name="roll_answer" value='&{template:com12} {{char=@{character_name}}} {{move=^{answer-move-text}}} {{showroll=[[1]]}} {{statused=^{answer-stat-used}}} {{check=[[2d6 + ?{@{cluesModifier}} - ?{@{questionModifier}}]]}} {{best=@{answerbest}}} {{success=@{answersuccess}}} {{partial=@{answerpartial}}} {{miss=@{answermiss}}}' class="rollbutton" data-i18n="answer-question" >Answer a Question</button>
          </div>
        </div>
        <div>
          <label class="heading-caps" data-i18n="xp-track">XP Track</label>
          <input type="checkbox" name="attr_xp1" />
          <input type="checkbox" name="attr_xp2" /> 
          <input type="checkbox" name="attr_xp3" />
          <input type="checkbox" name="attr_xp4" />
          <input type="checkbox" name="attr_xp5" />                                    
          <input type="checkbox" name="attr_xp6" />
        </div>
        <div>
          <label class="heading-caps" data-i18n="dawn-questions">Dawn Questions</label>
          
          <!--
          <div>
          <input type="checkbox" value="question1" checked disabled />
          <span data-i18n="question-resolve-mystery">Did the Latchkeys resolve a mystery?</span>
          </div>
          <div>
          <input type="checkbox" value="question2" />
          <span data-i18n="question-receive-signal">Did you receive a Signal from the Other Side?</span> (<span data-i18n="locked-until">Locked until you mark</span> <span class="bolded" data-i18n="sandstone-arch">The Sandstone Arch</span>)
          </div>
          <div>
          <input type="checkbox" value="question3" />
          <span data-i18n="question-share-memory">Did you share a good memory from your childhood?</span>
          </div>
          <div>
          <input type="checkbox" value="question4" />
          <span data-i18n="question-vulnerable">Were you vulnerable with someone?</span>
          </div>
          <div>
          <input type="checkbox" value="question5" />
          <span data-i18n="question-reconnect">Did you go out of your way to reconnect with Deep Lake?</span>
          </div>
          <div>
          <input type="checkbox" value="question6" />
          <span data-i18n="question-monologue">Did you deliver a chilling monologue about something that happened to you in the past?</span>
          </div>
          <div>          
          <input type="checkbox" value="question7" />
          <span data-i18n="question-cut-loose">Did you cut loose for once?</span>
          </div>

          <hr />
          -->

          <div>
            <input type="checkbox" value="dquestion1" checked disabled />
            <span data-i18n="question-resolve-mystery">Did the Latchkeys resolve a mystery?</span>
          </div>
          <div>
            <input type="checkbox" name="attr_dquestion2" value="keyofdesolation1" readonly="readonly">
            <span data-i18n="question-receive-signal">Did you receive a Signal from the Other Side?</span> (<span data-i18n="locked-until">Locked until you mark</span> <span class="bolded" data-i18n="sandstone-arch">The Sandstone Arch</span>)
          </div>
          <div>
            <input type="checkbox" value="dquestion3">
            <select name="dawn-questions3">
            <option>
              <span data-i18n="question-share-memory">Did you share a good memory from your childhood?</span>
            </option>
            <option>
              <span data-i18n="question-vulnerable">Were you vulnerable with someone?</span>
            </option>
            <option>
              <span data-i18n="question-reconnect">Did you go out of your way to reconnect with Deep Lake?</span>
            </option>
            <option>
              <span data-i18n="question-monologue">Did you deliver a chilling monologue about something that happened to you in the past?</span>
            </option>
            <option>      
              <span data-i18n="question-cut-loose">Did you cut loose for once?</span>
            </option>
            </select>
          </div>
          <div>
            <input type="checkbox" value="dquestion4">
            <select name="dawn-questions3">
            <option>
              <span data-i18n="question-share-memory">Did you share a good memory from your childhood?</span>
            </option>
            <option>
              <span data-i18n="question-vulnerable">Were you vulnerable with someone?</span>
            </option>
            <option>
              <span data-i18n="question-reconnect">Did you go out of your way to reconnect with Deep Lake?</span>
            </option>
            <option>
              <span data-i18n="question-monologue">Did you deliver a chilling monologue about something that happened to you in the past?</span>
            </option>
            <option>      
              <span data-i18n="question-cut-loose">Did you cut loose for once?</span>
            </option>
            </select>
          </div>
        </div>


        <div>
          <label class="heading-caps">Latchkey Moves</label>
          <fieldset class="repeating_moves">
            <input type="text" name="attr_move_name" />
            <br />
            <textarea name="attr_move"></textarea>
          </fieldset>
        </div>
    </div>

    <div class="column">
      <div>
        <label class="heading-caps" data-i18n="conditions">Conditions</label>
        <label data-i18n="locked" class="smaller-text">Select checkbox to lock a condition</label>
        <input type="checkbox" value="condition1" name="condition1-check" /> <input type="text" name="attr_condition1" name="condition1-text" class="condition" />
        <br />
        <input type="checkbox" value="condition2" name="condition2-check" /> <input type="text" name="attr_condition2" name="condition2-text" class="condition" /> 
        <br />
        <input type="checkbox" value="condition3" name="condition3-check" /> <input type="text" name="attr_condition3" name="condition3-text" class="condition" />  
      </div>
      <hr />
      <div>
        <label class="heading-caps" data-i18n="advancements">Advancements</label>
        <div>
        <input type="checkbox" value="advancement1" />
        <span data-i18n="increase-ability">Increase an ability by 1 (max 3).</span>
          </div>
          <div>
        <input type="checkbox" value="advancement2" />
        <span data-i18n="increase-ability">Increase an ability by 1 (max 3).</span>
          </div>
          <div>
        <input type="checkbox" value="advancement3" />
        <span data-i18n="choose-move">Choose an additional Latchkey move.</span>
          </div>
          <div>
        <input type="checkbox" value="advancement4" />
        <span data-i18n="choose-move">Choose an additional Latchkey move.</span>
          </div>
          <div>
        <input type="checkbox" value="advancement5" />
        <span data-i18n="write-move">Write a custom Latchkey move for your character.</span>
          </div>
          <div>
        <input type="checkbox" value="advancement6" />
        <span data-i18n="unmark-items">Unmark all the items in</span> <span data-i18n="corner-house">Your Corner of the House.</span>
      </div>
      </div>
      <div>
        <label class="heading-caps" data-i18n="key-child">The Key of the Child</label>
        <div>
        <input type="checkbox" value="keyofthechild1" />
        <span data-i18n="flashback-routine">A flashback showing your latchkey kid routine whenever you got home from school.</span>
          </div>
          <div>
        <input type="checkbox" value="keyofthechild2" />
        <span data-i18n="flashback-outsider">A flashback showing how you were an outsider among your school peers.</span>
          </div>
          <div>
        <input type="checkbox" value="keyofthechild3" />
        <span data-i18n="flashback-parents">A flashback to the moment when you realized your parents were imperfect.</span>
          </div>
          <div>
        <input type="checkbox" value="keyofthechild4" />
        <span data-i18n="flashback-happiness">A flashback to when you felt genuine happiness as a child.</span>
          </div>
          <div>
        <input type="checkbox" value="keyofthechild5" />
        <span data-i18n="flashback-trauma">A flashback to when you experienced childhood trauma.</span>
          </div>
          <div>
        <input type="checkbox" value="keyofthechild6" />
        <span data-i18n="flashback-forever">A flashback to the moment when you realized childhood wasn't forever.</span>
          </div>
          <div>
        <input type="checkbox" value="keyofthechild7" />
        <span data-i18n="flashback-odyssey">A flashback to when you first discovered TV Odyssey.</span>
        </div>
      </div>
      <div>
        <label class="heading-caps" data-i18n="key-desolation">The Key of Desolation</label>
        <div>
        <input type="checkbox" name="attr_keyofdesolation1" value="keyofdesolation1" />
        <span class="bolded" data-i18n="sandstone-arch">The Sandstone Arch</span>. <span data-i18n="desolation-session">Unlock the End of Session question</span>: "<span data-i18n="question-receive-signal">Did you receive a Signal from the Other Side?</span>"
          </div>
          <div>
        <input type="checkbox" value="keyofdesolation2" />
        <span class="bolded" data-i18n="fathomless-well">The Fathomless Well</span>. <span data-i18n="desolation-reason-sensitivity">Your Reason modifier is reduced by 1 and your Sensitivity modifier is increased by 1.</span>
          </div>
          <div>
        <input type="checkbox" value="keyofdesolation3" />
        <span class="bolded" data-i18n="wandering-monolith">The Wandering Monolith</span>. <span data-i18n="desolation-bigman">You can now seek out the Big Man. How do you make contact with him? The Big Man can be consulted like any other Side Character. When you do so, roll with Sensitivity. On a 7-9, you gain 1 Clue; he will reveal it in a way that reflects his current disposition. On a 10+, as above, but you gain 2 clues. On a miss, you must mak the next box on The Key of Desolation.</span>
          </div>
          <div>
        <input type="checkbox" value="keyofdesolation4" />
        <span class="bolded" data-i18n="chromatic-desert">The Chromatic Desert</span>. <span data-i18n="desolation-perceived">You can no longer be perceived by other characters and all memory of you is erased&mdash;it's like you never existed. You can continue to conduct investigations, but the Clues you find are only available if you narrate them into an Odyssey tape scene.</span>
          </div>
          <div>
        <input type="checkbox" value="keyofdesolation5" />
        <span class="bolded" data-i18n="pure-white-signal">The Pure-White Signal</span>. <span data-i18n="desolation-retire">You lose contact with this world altogether. Tell the Keeper to play a white Odyssey tape and then retire this character.</span>
      </div>
      </div>
    </div>
  </section>
  <hr />
  <section class="flex-container-wrap">
    <label data-i18n="misc-notes">Misc. Notes</label>
    <div>
    <fieldset class="repeating_miscnotes">
      <textarea name="attr_miscnotes">&nbsp;</textarea>
    </fieldset>
    </div>
  </section>

</section>


<!-- Mysteries tab -->

  <section class="mysteries">
  
    <div class="mysteriessname">
      <label data-i18n="mysteries" class="heading-caps">Mysteries</label>
    </div>

    <div class="questions">  
      <label data-i18n="questions-opportunities" class="smaller-text">Questions and Opportunities</label>
      <fieldset class="repeating_questions">
        <div>
          <textarea class="oneline" name="attr_question-desc" value="" data-i18n="question">Question</textarea>
          <textarea class="oneline" name="attr_opportunity-desc" value="" data-i18n="opportunity">Opportunity</textarea>
        </div>
      </fieldset>
    </div>

    <hr />

    <div class="clues">  
      <label data-i18n="clues" class="smaller-text">Clues</label>
      <fieldset class="repeating_clues">
        <div>
          <textarea class="oneline" name="attr_clue-desc" value=""> </textarea>
        </div>
      </fieldset>
    </div>
  
  </section>

<!-- Tapes tab -->

  <section class="tapes">
  
    <div class="tapename">
      <label data-i18n="tapes" class="heading-caps">Tapes</label>
    </div>
    
    <div class="tapes">  
      <fieldset class="repeating_tapes">
        <div>
          <input type="text" name="attr_tape_name" data-i18n="name" />
          <textarea class="oneline" name="attr_tape-desc" value="" data-i18n="tape-desc">Tape Description</textarea>
        </div>
      </fieldset>
    </div>
  
  </section>


</main>


<!--
  The following template was taken from the Brindlewood Bay community sheet:
  https://github.com/Roll20/roll20-character-sheets/tree/master/Brindlewood%20Bay
 -->

<div class="hidden">
          <div class="sheet-action">
            <span class="sheet-action">Result 12+ : </span>
            <textarea name="attr_daybest" data-i18n="day-best" class="sheet-actiondesc" placeholder="Massive Success" title="Massive Success">On a 12+, you do what you intended or you hold steady, and the Keeper will tell you some extra benefit or advantage you receive. Describe what it looks like.
            </textarea>
          </div>
          <div class="sheet-action">
            <span class="sheet-action">Result 10-11 : </span>
            <textarea name="attr_daysuccess" data-i18n="day-success" class="sheet-actiondesc" placeholder="Great Success" title="Great Success">On a 10+, you do what you intended or you hold steady; describe what it looks like.
            </textarea>
          </div>
          <div class="sheet-action">
            <span class="sheet-action">Result 7-9 : </span>
            <textarea name="attr_daypartial" data-i18n="day-partial" class="sheet-actiondesc" placeholder="Mild Success" title="Mild Success">On a 7–9, the Keeper will tell you how your actions would leave you vulnerable, and you can choose to back down or go through with it. If you go through with it, the Keeper describes what it looks like.
            </textarea>
          </div>
          <div class="sheet-action">
            <span class="sheet-action">Result 6- : </span>
            <textarea name="attr_daymiss" data-i18n="day-miss" class="sheet-actiondesc" placeholder="Miss" title="Miss">On a miss, something you're afraid of happens and you suffer the consequences.</textarea>
          </div>
        </div>
        
        <!-- Night move possible outcomes -->
        <div class="hidden">
          <div class="sheet-action">
            <span class="sheet-action">Result 12+ : </span>
            <textarea name="attr_nightbest" data-i18n="night-best" class="sheet-actiondesc" placeholder="Massive Success" title="Massive Success">On a 12+, you do what you intended or you hold steady, and the Keeper will tell you some extra benefit or advantage you receive. Describe what it looks like.
            </textarea>
          </div>
          <div class="sheet-action">
            <span class="sheet-action">Result 10+ : </span>
            <textarea name="attr_nightsuccess" data-i18n="night-success" class="sheet-actiondesc" placeholder="Great Success" title="Great Success">On a 10+, you do what you intended or you hold steady; describe what it looks like.
            </textarea>
          </div>
          <div class="sheet-action">
            <span class="sheet-action">Result 7-9 : </span>
            <textarea name="attr_nightpartial" data-i18n="night-partial" class="sheet-actiondesc" placeholder="Mild Success" title="Mild Success">On a 7–9, you do it or hold steady, but there is a complication or cost; the Keeper describes what it looks like.
            </textarea>
          </div>
          <div class="sheet-action">
            <span class="sheet-action">Result 6- : </span>
            <textarea name="attr_nightmiss" data-i18n="night-miss" class="sheet-actiondesc" placeholder="Miss" title="Miss">On a miss, something worse than what you're afraid of happens and you suffer the consequences</textarea>
          </div>
        </div>
        
        <!-- Meddling move possible outcomes -->
        <div class="hidden">
          <div class="sheet-action">
            <span class="sheet-action">Result 12+ : </span>
            <textarea name="attr_meddlingbest" data-i18n="meddling-best" class="sheet-actiondesc" placeholder="Massive Success" title="Massive Success">On a hit, you find a Clue. The Keeper will tell you what it is. On a 12+, you also find a Odyssey Tape OR you learn some unusual history about Deyoga County (Keeper’s choice).
            </textarea>
          </div>
          <div class="sheet-action">
            <span class="sheet-action">Result 10-11 : </span>
            <textarea name="attr_meddlingsuccess" data-i18n="meddling-success" class="sheet-actiondesc" placeholder="Great Success" title="Great Success">On a hit, you find a Clue. The Keeper will tell you what it is.
            </textarea>
          </div>
          <div class="sheet-action">
            <span class="sheet-action">Result 7-9 : </span>
            <textarea name="attr_meddlingpartial" data-i18n="meddling-partial" class="sheet-actiondesc" placeholder="Mild Success" title="Mild Success">On a hit, you find a Clue. The Keeper will tell you what it is. On a 7–9, there’s a complication—either with the Clue itself, or a complication you encounter while searching. The Keeper will tell you what the complication is.
            </textarea>
          </div>
          <div class="sheet-action">
            <span class="sheet-action">Result 6- : </span>
            <textarea name="attr_meddlingmiss" data-i18n="meddling-miss" class="sheet-actiondesc" placeholder="Miss" title="Miss">On a miss, the Keeper reacts.</textarea>
          </div>
        </div>

        <!-- Nostalgic Move outcomes -->
        <div class="hidden">
          <div class="sheet-action">
            <span class="sheet-action">Result: </span>
            <textarea name="attr_nostalgic-desc" data-i18n="nostalgic-desc" class="sheet-actiondesc" placeholder="Great Success" title="Great Success">When you have an intimate moment with another Maven while one of you is engaged in your cozy activity, choose two from below if it’s your cozy activity. Otherwise, choose one. 
            <ul>
              <li>You may ask the other player a question about their Maven which they must answer truthfully and completely.</li>
              <li>The other Maven agrees on a particular course of action, or give them a condition if they refuse.</li>
              <li>Clear an appropriate condition (can be chosen twice).</li>
            </ul>
            Alternatively, if it’s your cozy activity, you may: 
            <ul>  
              <li>Stumble on a Clue relevant to an active mystery. Tell the Keeper what it is. The Clue cannot conclusively solve the mystery by itself.</li>
            </ul>
            </textarea>
          </div>
        </div>
        
        <!-- Answer a Question move possible outcomes -->
        <div class="hidden">
          <div class="sheet-action">
            <span class="sheet-action">Result 12+ : </span>
            <textarea name="attr_answerbest" data-i18n="answer-best" class="sheet-actiondesc" placeholder="Massive Success" title="Massive Success">On a 10+, the answer is correct and an Opportunity can be pursued. On a 12+, the Big Man will appear while the Latchkeys are pursuing the Opportunity.
            </textarea>
          </div>
          <div class="sheet-action">
            <span class="sheet-action">Result 10-11 : </span>
            <textarea name="attr_answersuccess" data-i18n="answer-success" class="sheet-actiondesc" placeholder="Great Success" title="Great Success">On a 10+, the answer is correct and an Opportunity can be pursued.
            </textarea>
        
          <div class="sheet-action">
            <span class="sheet-action">Result 7-9 : </span>
            <textarea name="attr_answerpartial" data-i18n="answer-partial" class="sheet-actiondesc" placeholder="Mild Success" title="Mild Success">On a 7-9, the answer is correct and an Opportunity can be pursued, but the Keeper will add an unwelcome complication to the answer and/or pursuing the Opportunity will be more dangerous.
            </textarea>
          </div>
          <div class="sheet-action">
            <span class="sheet-action">Result 6- : </span>
            <textarea name="attr_answermiss" data-i18n="answer-miss" class="sheet-actiondesc" placeholder="Miss" title="Miss">On a 6-, the answer is incorrect and the Keeper reacts.</textarea>
          </div>
        </div>
        
    
      </div>

<rolltemplate class="sheet-rolltemplate-com12">
    <table>
        <tr><th>{{char}} {{move}}</th></tr>
    {{#statused}}
      <tr><td><span data-i18n="with">with </span> {{statused}}</td></tr>
    {{/statused}}
        <tr>
            <td><span data-i18n="result">Result</span>: {{check}}</td>
        </tr>
        <tr></tr>
        {{#check}}
            {{#rollTotal() showroll 1}}
                <tr>
                    <td>
                        {{#rollGreater() check 11}}
                            <span style="color: blue;font-weight:bold;" data-i18n="massive-success">Massive Success</span>
                        {{/rollGreater() check 11}}
            {{#rollBetween() check 10 11}}
                            <span style="color: green;font-weight:bold;" data-i18n="great-success">Great Success</span>
                        {{/rollBetween() check 10 11}}
                        {{#rollBetween() check 7 9}}
                            <span style="color: black;font-weight:bold;" data-i18n="mild-success">Mild Success</span>
                        {{/rollBetween() check 7 9}}
                        {{#rollLess() check 7}}
                            <span style="color: red;font-weight:bold;" data-i18n="miss">Miss</span>
                        {{/rollLess() check 7}}
                    </td>
                </tr>
        {{#best}}
                    {{#rollGreater() check 11}}
                        <tr><td colspan="2"><div class="movedesc">{{best}}</div></td></tr>
                    {{/rollGreater() check 11}}
                {{/best}}
                {{#success}}
                    {{#rollBetween() check 10 11}}
                        <tr><td colspan="2"><div class="movedesc">{{success}}</div></td></tr>
                    {{/rollBetween() check 10 11}}
                {{/success}}
                {{#partial}}
                    {{#rollBetween() check 7 9}}
                        <tr><td colspan="2"><div class="movedesc">{{partial}}</div></td></tr>
                    {{/rollBetween() check 7 9}}
                {{/partial}}
                {{#miss}}
                    {{#rollLess() check 7}}
                        <tr><td colspan="2"><div class="movedesc">{{miss}}</div></td></tr>
                    {{/rollLess() check 7}}
                {{/miss}}
            {{/rollTotal() showroll 1}}
        {{/check}}
    </table>
</rolltemplate>


<!-- Roll template - version for when there is only text, no rolling -->

<rolltemplate class="sheet-rolltemplate-comtext">
    <table>
        <tr><th>{{char}}<br> {{move}} </th></tr>
        {{#movedescription}}

             <tr><td colspan="2"><div class="movedesc">{{movedescription}}</div></td></tr>
             
        {{/movedescription}}
    </table>
</rolltemplate>


<!--
  The following script was taken from the Brindlewood Bay community sheet:
  https://github.com/Roll20/roll20-character-sheets/tree/master/Brindlewood%20Bay
 -->

<script type="text/worker">
    
  // set worker attributes used for translation in roll queries
    on("change:keyofdesolation1", function(eventInfo){
    
      getAttrs(["keyofdesolation1"], function(checked) {
        let keyvalue = checked.keyofdesolation1;
        //let keyvalue = keyofdesolation1.checked;
        setAttrs({
          "dquestion2": keyvalue
        });
      });
    });
    

    on("sheet:opened", function(eventInfo){
      setAttrs({
        rollqueryAdvChoiceAnyStat: "?{" + getTranslationByKey("advantage-disadvantage") +"|" + getTranslationByKey("none") + ",2d6|" + getTranslationByKey("advantage") + ",3d6k2|" + getTranslationByKey("disadvantage") + ",3d6kl2}+?{" + getTranslationByKey("select-ability")  +"|" + getTranslationByKey("vitality") + ",@{vitality}|" + getTranslationByKey("composure") + ",@{composure}|"  + getTranslationByKey("reason") + ",@{reason}|"  + getTranslationByKey("presence") + ",@{presence}|"  + getTranslationByKey("sensitivity") + ",@{sensitivity}}", rollqueryAdvChoice: "?{" + getTranslationByKey("advantage-disadvantage") +"|" + getTranslationByKey("none") + ",2d6|" + getTranslationByKey("advantage") + ",3d6k2|" + getTranslationByKey("disadvantage") + ",3d6kl2} ",
        cluesModifier: getTranslationByKey("number-clues"),
        questionModifier: getTranslationByKey("question-complexity")
      });
    
  });

//Buttons for Tabs
    const buttonlist = ["character","mysteries", "tapes"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button,
            });
        });
    });
</script>
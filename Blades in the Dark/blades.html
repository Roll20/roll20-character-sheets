<div class="preload"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/teeth/xptooth-red.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/teeth/xptooth-white.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/teeth/stresstooth-red.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/teeth/stresstooth-black.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/teeth/stresstooth-halfgrey.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/teeth/stresstooth-white.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/teeth/shorttooth-red.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/teeth/shorttooth-grey.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-insight.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-prowess.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-resolve.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-hunt.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-study.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-survey.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-tinker.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-finesse.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-prowl.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-skirmish.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-wreck.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-attune.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-command.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-consort.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-sway.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-fortune.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-vice.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-crew_tier.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-entanglement.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-cohort_quality.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-lifestyle.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-recovery.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-engagement.png"/><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-harm.png"/>
</div>
<div>
  <input type="hidden" name="attr_stress_max" value="9"/>
  <input type="hidden" name="attr_trauma_max" value="4"/>
  <input type="hidden" name="attr_coin_max" value="4"/>
  <input type="hidden" name="attr_stash_max" value="40"/>
  <input type="hidden" name="attr_playbook_xp_max" value="8"/>
  <input type="hidden" name="attr_rep_max" value="12"/>
  <input type="hidden" name="attr_turf_max" value="6"/>
  <input type="hidden" name="attr_crew_tier_max" value="4"/>
  <input type="hidden" name="attr_heat_max" value="9"/>
  <input type="hidden" name="attr_wanted_max" value="4"/>
  <input type="hidden" name="attr_crewcoin_max" value="16"/>
  <input type="hidden" name="attr_crew_xp_max" value="8"/>
  <input type="hidden" name="attr_changed_attributes" value=""/>
  <input type="hidden" name="attr_bonusdice" value="Bonus dice"/>
  <input type="hidden" name="attr_numberofdice" value=" {{?{Number of dice|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]}}}"/>
  <input type="hidden" name="attr_notes_query" value="?{Notes}"/>
  <input type="hidden" name="attr_position_query" value="?{Position|Risky,position=Risky|Controlled,position=Controlled|Desperate,position=Desperate|Fortune roll,short=short}"/>
  <input type="hidden" name="attr_effect_query" value="?{Effect|Standard|Limited|Great|Extreme|Zero}"/>
  <input type="hidden" name="attr_title_text" value=""/>
  <input type="hidden" name="attr_consequence_query" value="^{a_consequence}"/>
</div>
<input class="focus-shadow" type="hidden" name="attr_setting_focus_shadow" value="1"/>
<input class="show-broadcast" type="hidden" name="attr_setting_show_broadcast" value="1"/>
<input class="show-itemdesc" type="hidden" name="attr_setting_show_itemdesc" value="1"/>
<input class="show-frienddesc" type="hidden" name="attr_setting_show_frienddesc" value="1"/>
<input class="use-kirsty" type="hidden" name="attr_setting_usekirsty" value="0"/>
<input class="flexwidth" type="hidden" name="attr_setting_flexwidth" value="0"/>
<input class="clocks-only" type="hidden" name="attr_setting_clocks_only" value="0"/>
<input class="custom-action-toggle" type="hidden" name="attr_setting_custom_actions" value="0"/>
<div class="container">
  <input class="type" type="hidden" name="attr_sheet_type" value="character"/>
  <div class="topholder flex">
    <div class="type-selector label">
      <input class="hidden sheet-3waybox" type="checkbox" name="attr_sheet_type" value="faction"/>
      <input class="sheet-3waybox" type="radio" name="attr_sheet_type" value="character" checked="checked"/>
      <input class="sheet-3waybox" type="radio" name="attr_sheet_type" value="crew"/>
      <input class="sheet-3waybox" type="radio" name="attr_sheet_type" value="faction"/><span data-i18n="character_mode"></span><span data-i18n="crew_mode"></span><span data-i18n="faction_mode"></span>
    </div>
    <label class="settings-checkbox">
      <input type="checkbox" name="attr_show_settings" value="1"/><span>y</span>
    </label>
    <div class="version"><span class="version-text" data-i18n="version"></span><span name="attr_version"></span></div>
  </div>
  <input class="hider" type="hidden" name="attr_show_settings" value="0"/>
  <div class="settings">
    <div class="setting-char generaterow">
      <select name="attr_generate_source_character">
        <optgroup data-i18n-label="playbooks">
          <option value="cutter" data-i18n="cutter" selected="selected"></option>
          <option value="hound" data-i18n="hound"></option>
          <option value="leech" data-i18n="leech"></option>
          <option value="lurk" data-i18n="lurk"></option>
          <option value="slide" data-i18n="slide"></option>
          <option value="spider" data-i18n="spider"></option>
          <option value="whisper" data-i18n="whisper"></option>
        </optgroup>
        <optgroup data-i18n-label="spirit_playbooks">
          <option value="ghost" data-i18n="ghost"></option>
          <option value="hull" data-i18n="hull"></option>
          <option value="vampire" data-i18n="vampire"></option>
        </optgroup>
        <optgroup data-i18n-label="alternate_iruvian_playbooks">
          <option value="faris" data-i18n="faris"></option>
          <option value="forger" data-i18n="forger"></option>
          <option value="janissary" data-i18n="janissary"></option>
          <option value="mirage" data-i18n="mirage"></option>
          <option value="rafiq" data-i18n="rafiq"></option>
          <option value="rakshasa" data-i18n="rakshasa"></option>
          <option value="vizier" data-i18n="vizier"></option>
          <option value="zindiq" data-i18n="zindiq"></option>
        </optgroup>
      </select>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_ability" value="1"/><span data-i18n="add_abilities"></span>
      </label>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_friend" value="1"/><span data-i18n="add_friends"></span>
      </label>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_playbookitem" value="1"/><span data-i18n="add_items"></span>
      </label>
    </div>
    <div class="setting-crew generaterow">
      <select name="attr_generate_source_crew">
        <option value="assassins" data-i18n="assassins" selected="selected"></option>
        <option value="bravos" data-i18n="bravos"></option>
        <option value="cult" data-i18n="cult"></option>
        <option value="hawkers" data-i18n="hawkers"></option>
        <option value="shadows" data-i18n="shadows"></option>
        <option value="smugglers" data-i18n="smugglers"></option>
        <option value="vigilantes" data-i18n="vigilantes"></option>
      </select>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_crewability" value="1"/><span data-i18n="add_abilities"></span>
      </label>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_contact" value="1"/><span data-i18n="add_contacts"></span>
      </label>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_upgrade" value="1"/><span data-i18n="add_upgrades"></span>
      </label>
    </div>
    <div class="setting-faction generaterow">
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_factions" value="1"/><span data-i18n="generate_factions"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <select name="attr_setting_extra_stress">
          <option value="0" selected="selected">9</option>
          <option value="1">10</option>
          <option value="2">11</option>
          <option value="3">12</option>
          <option value="4">13</option>
          <option value="5">14</option>
        </select><span data-i18n="number_stress_boxes"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_extra_trauma" value="1"/><span></span><span data-i18n="show_extra_trauma_box"></span>
      </label>
    </div>
    <div class="setting-char setting-crew">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_extra_xp" value="1"/><span></span><span data-i18n="show_extra_xp_condition"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_vampirexp" value="1"/><span></span><span data-i18n="extra_xp_boxes"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_show_strictures" value="1"/><span></span><span data-i18n="show_vampire_strictures"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_show_frame" value="1"/><span></span><span data-i18n="show_frame_section"></span>
      </label>
    </div>
    <div class="setting-char setting-crew">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_show_itemdesc" value="1" checked="checked"/><span></span><span data-i18n="show_item_description"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_show_cohort" value="1"/><span></span><span data-i18n="show_cohort_section"></span>
      </label>
    </div>
    <div class="setting-char setting-crew">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_show_frienddesc" value="1" checked="checked"/><span></span><span data-i18n="show_friend_contact_details"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_show_bandolier" value="1"/><span></span><span data-i18n="show_bandolier_slots"></span>
      </label>
    </div>
    <div class="setting-crew">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_show_deity" value="1"/><span></span><span data-i18n="show_deity"></span>
      </label>
    </div>
    <div class="setting-crew">
      <label>
        <input type="text" spellcheck="false" name="attr_setting_deity_label" value="Deity"/><span data-i18n="deity_label"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input type="text" spellcheck="false" name="attr_setting_stress_label" value="Stress"/><span data-i18n="stress_label"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input type="text" spellcheck="false" name="attr_setting_trauma_label" value="Trauma"/><span data-i18n="trauma_label"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input type="text" spellcheck="false" name="attr_setting_alchemicals_label" value="Alchemicals"/><span data-i18n="alchemicals_label"></span>
      </label>
    </div>
    <div class="setting-crew">
      <label>
        <input type="text" spellcheck="false" name="attr_setting_heat_label" value="Heat"/><span data-i18n="heat_label"></span>
      </label>
    </div>
    <div class="setting-crew">
      <label>
        <input type="text" spellcheck="false" name="attr_setting_wanted_label" value="Wanted"/><span data-i18n="wanted_label"></span>
      </label>
    </div>
    <div class="setting-crew">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_show_origin" value="1"/><span></span><span data-i18n="show_origin"></span>
      </label>
    </div>
    <div class="setting-char"><span data-i18n="dark_talent"></span><span></span>
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_dark_talent_insight" value="1"/><span></span><span data-i18n="insight"></span>
      </label>
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_dark_talent_prowess" value="1"/><span></span><span data-i18n="prowess"></span>
      </label>
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_dark_talent_resolve" value="1"/><span></span><span data-i18n="resolve"></span>
      </label>
    </div>
    <div class="setting-char"><span data-i18n="resistance_bonus"></span>
      <label>
        <input type="number" name="attr_setting_resbonus_insight" value="0"/><span data-i18n="insight"></span>
      </label>
      <label>
        <input type="number" name="attr_setting_resbonus_prowess" value="0"/><span data-i18n="prowess"></span>
      </label>
      <label>
        <input type="number" name="attr_setting_resbonus_resolve" value="0"/><span data-i18n="resolve"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_consequence_query" value="1"/><span></span><span data-i18n="query_for_consequence"></span>
      </label>
    </div>
    <div class="setting-char"><span data-i18n="load:"></span>
      <label>
        <input type="number" name="attr_setting_load_l" value="3"/><span data-i18n="light"></span>
      </label>
      <label>
        <input type="number" name="attr_setting_load_n" value="5"/><span data-i18n="normal"></span>
      </label>
      <label>
        <input type="number" name="attr_setting_load_h" value="6"/><span data-i18n="heavy"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <select name="attr_setting_traumata_set">
          <option value="normal" data-i18n="normal" selected="selected"></option>
          <option value="ghost" data-i18n="ghost"></option>
          <option value="hull" data-i18n="hull"></option>
          <option value="vampire" data-i18n="vampire"></option>
        </select><span data-i18n="traumata"></span>
      </label>
    </div>
    <div class="setting-char">
      <label>
        <select name="attr_setting_vice_type">
          <option value="normal" data-i18n="normal" selected="selected"></option>
          <option value="ghost" data-i18n="ghost"></option>
          <option value="hull" data-i18n="hull"></option>
          <option value="vampire" data-i18n="vampire"></option>
        </select><span data-i18n="vice"></span>
      </label>
    </div>
    <div class="setting-char setting-crew setting-faction">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_flexwidth" value="1"/><span></span><span data-i18n="flexible_width"></span>
      </label>
    </div>
    <div class="setting-char setting-crew setting-faction">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_focus_shadow" value="1" checked="checked"/><span></span><span data-i18n="show_outline"></span>
      </label>
    </div>
    <div class="setting-char setting-crew setting-faction">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_show_broadcast" value="1" checked="checked"/><span></span><span data-i18n="show_broadcast"></span>
      </label>
    </div>
    <div class="setting-char setting-crew">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_autofill" value="1" checked="checked"/><span></span><span data-i18n="fill_fields"></span>
      </label>
    </div>
    <div class="setting-char setting-crew setting-faction kirsty-option">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_usekirsty" value="1"/><span></span><span data-i18n="use_kirsty"></span>
      </label>
    </div>
    <div class="setting-char setting-crew">
      <input class="wide" type="text" spellcheck="false" name="attr_chat_image" value=""/><span data-i18n="chat_image"></span>
    </div>
    <div class="setting-faction">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_clocks_only" value="1"/><span></span><span data-i18n="clocks_only"></span>
      </label>
    </div>
    <div class="setting-char custom-actions">
      <label>
        <input class="checkbox squarebox" type="checkbox" name="attr_setting_custom_actions" value="1"/><span></span><span data-i18n="custom_action_labels"></span>
      </label>
      <div class="column">
        <input class="attribute-label" type="text" spellcheck="false" name="attr_insight_label" value="Insight"/>
        <input class="action-label" type="text" spellcheck="false" name="attr_hunt_label" value="Hunt"/>
        <input class="action-label" type="text" spellcheck="false" name="attr_study_label" value="Study"/>
        <input class="action-label" type="text" spellcheck="false" name="attr_survey_label" value="Survey"/>
        <input class="action-label" type="text" spellcheck="false" name="attr_tinker_label" value="Tinker"/>
      </div>
      <div class="column">
        <input class="attribute-label" type="text" spellcheck="false" name="attr_prowess_label" value="Prowess"/>
        <input class="action-label" type="text" spellcheck="false" name="attr_finesse_label" value="Finesse"/>
        <input class="action-label" type="text" spellcheck="false" name="attr_prowl_label" value="Prowl"/>
        <input class="action-label" type="text" spellcheck="false" name="attr_skirmish_label" value="Skirmish"/>
        <input class="action-label" type="text" spellcheck="false" name="attr_wreck_label" value="Wreck"/>
      </div>
      <div class="column">
        <input class="attribute-label" type="text" spellcheck="false" name="attr_resolve_label" value="Resolve"/>
        <input class="action-label" type="text" spellcheck="false" name="attr_attune_label" value="Attune"/>
        <input class="action-label" type="text" spellcheck="false" name="attr_command_label" value="Command"/>
        <input class="action-label" type="text" spellcheck="false" name="attr_consort_label" value="Consort"/>
        <input class="action-label" type="text" spellcheck="false" name="attr_sway_label" value="Sway"/>
      </div>
    </div>
  </div>
  <div class="type-character grid">
    <div class="left-column grid">
      <div class="header grid sheet-2col">
        <div class="bladeslogo"></div>
        <label>
          <input type="text" spellcheck="false" name="attr_crew"/>
          <div class="label text title" data-i18n="crew"></div>
        </label>
        <label>
          <input type="text" spellcheck="false" name="attr_name"/>
          <div class="label text title" data-i18n="name"></div>
        </label>
        <label>
          <input type="text" spellcheck="false" name="attr_alias"/>
          <div class="label text title" data-i18n="alias"></div>
        </label>
        <label class="sheet-2col">
          <input type="text" spellcheck="false" name="attr_look"/>
          <div class="label text title" data-i18n="look"></div>
        </label>
        <label>
          <div class="auto-expand"><span name="attr_heritage"></span>
            <textarea spellcheck="false" name="attr_heritage"></textarea>
          </div>
          <input type="hidden" name="attr_heritage" value=""/>
          <div class="text"><span class="label title" data-i18n="heritage"></span><span class="uppercase info" data-i18n="heritage_info"></span></div>
        </label>
        <label>
          <div class="auto-expand"><span name="attr_background"></span>
            <textarea spellcheck="false" name="attr_background"></textarea>
          </div>
          <input type="hidden" name="attr_background" value=""/>
          <div class="text"><span class="label title" data-i18n="background"></span><span class="uppercase info" data-i18n="background_info"></span></div>
        </label>
        <input class="vice-input" type="hidden" name="attr_setting_vice_type" value="normal"/>
        <label class="vice normal">
          <div class="auto-expand"><span name="attr_vice_purveyor"></span>
            <textarea spellcheck="false" name="attr_vice_purveyor"></textarea>
          </div>
          <input type="hidden" name="attr_vice_purveyor" value=""/>
          <div class="text"><span class="label title" data-i18n="vice_purveyor"></span><span class="uppercase info" data-i18n="vice_info"></span></div>
          <button class="vicebutton borderbutton" type="roll" name="roll_Vice" value="&{template:blades} {{charname=@{character_name}}} {{subtitle=^{viceroll1}@{stress}&nbsp;@{setting_stress_label}^{viceroll2}}} {{type=vice}} {{title-vice=1}} {{title=^{vice}}} @{vice_formula} {{instructions=^{vice_instructions}}} {{charimage=@{chat_image}}} @{title_text}" data-i18n="indulge_vice">
          </button>
          <input type="hidden" name="attr_vice_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
        </label>
        <div class="vice ghost"><span class="italic" data-i18n="ghost_viceblurb"></span></div>
        <div class="vice hull">
          <label>
            <input type="text" spellcheck="false" name="attr_hull_functions" data-i18n-placeholder="choose_3_functions"/>
            <input type="hidden" name="attr_hull_functions" value=""/>
            <div class="text"><span class="label title" data-i18n="functions"></span><span class="uppercase info" data-i18n="functions_info"></span></div>
          </label><span class="italic" data-i18n="hull_viceblurb"></span>
        </div>
        <div class="vice vampire"><span class="italic" data-i18n="vampire_viceblurb"></span>
          <button class="vicebutton borderbutton" type="roll" name="roll_Vice" value="&{template:blades} {{charname=@{character_name}}} {{subtitle=^{viceroll1}@{stress}&nbsp;@{setting_stress_label}^{viceroll2}}} {{type=vice}} {{title-vice=1}} {{title=^{vice}}} @{vice_formula} {{instructions=^{vice_instructions}}} {{charimage=@{chat_image}}} @{title_text}" data-i18n="indulge_vice">
          </button>
        </div>
      </div>
      <div class="stress flex sheet-2col">
        <div class="stress1 blackheader">
          <div class="label"><span name="attr_setting_stress_label"></span></div>
        </div>
        <div class="stress2 blackborder flex">
          <input class="tooth zero" type="radio" name="attr_stress" value="0" checked="checked"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="1"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="2"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="3"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="4"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="5"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="6"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="7"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="8"/><span></span>
          <input class="hidden extra-teeth" type="checkbox" name="attr_setting_extra_stress" value="0" checked="checked"/>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="9"/><span></span>
          <input class="hidden extra-teeth" type="checkbox" name="attr_setting_extra_stress" value="1"/>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="10"/><span></span>
          <input class="hidden extra-teeth" type="checkbox" name="attr_setting_extra_stress" value="2"/>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="11"/><span></span>
          <input class="hidden extra-teeth" type="checkbox" name="attr_setting_extra_stress" value="3"/>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="12"/><span></span>
          <input class="hidden extra-teeth" type="checkbox" name="attr_setting_extra_stress" value="4"/>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="13"/><span></span>
          <input class="tooth stresstooth" type="radio" name="attr_stress" value="14"/><span></span>
        </div>
        <div class="stress3">
          <div class="blackheader">
            <div class="label"><span name="attr_setting_trauma_label"></span></div>
          </div>
          <div class="traumaholder flex">
            <input class="tooth zero" type="radio" name="attr_trauma" value="0" checked="checked"/><span></span>
            <input class="tooth regulartooth" type="radio" name="attr_trauma" value="1"/><span></span>
            <input class="tooth regulartooth" type="radio" name="attr_trauma" value="2"/><span></span>
            <input class="tooth regulartooth" type="radio" name="attr_trauma" value="3"/><span></span>
            <input class="hidden extra-teeth" type="checkbox" name="attr_setting_extra_trauma" value="0" checked="checked"/>
            <input class="tooth regulartooth" type="radio" name="attr_trauma" value="4"/><span></span>
            <input class="tooth regulartooth" type="radio" name="attr_trauma" value="5"/><span></span>
          </div>
        </div>
        <div class="stress4 blackborder">
          <input class="input" type="hidden" name="attr_setting_traumata_set" value="normal"/>
          <div class="normal">
            <div class="flex">
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_cold" value="1"/><span data-i18n="cold"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_haunted" value="1"/><span data-i18n="haunted"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_obsessed" value="1"/><span data-i18n="obsessed"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_paranoid" value="1"/><span data-i18n="paranoid"></span>
              </label>
            </div>
            <div class="flex">
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_reckless" value="1"/><span data-i18n="reckless"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_soft" value="1"/><span data-i18n="soft"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_unstable" value="1"/><span data-i18n="unstable"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_vicious" value="1"/><span data-i18n="vicious"></span>
              </label>
            </div>
          </div>
          <div class="ghost">
            <div class="flex">
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_chaotic" value="1"/><span data-i18n="chaotic"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_destructive" value="1"/><span data-i18n="destructive"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_furious" value="1"/><span data-i18n="furious"></span>
              </label>
            </div>
            <div class="flex">
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_obsessive" value="1"/><span data-i18n="obsessive"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_territorial" value="1"/><span data-i18n="territorial"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_savage" value="1"/><span data-i18n="savage"></span>
              </label>
            </div>
          </div>
          <div class="hull">
            <div class="flex">
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_clanking" value="1"/><span data-i18n="clanking"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_leaking" value="1"/><span data-i18n="leaking"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_fixated" value="1"/><span data-i18n="fixated"></span>
              </label>
            </div>
            <div class="flex">
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_smoking" value="1"/><span data-i18n="smoking"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_sparking" value="1"/><span data-i18n="sparking"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_unstable" value="1"/><span data-i18n="unstable"></span>
              </label>
            </div>
          </div>
          <div class="vampire">
            <div class="flex">
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_cold" value="1"/><span data-i18n="cold"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_haunted" value="1"/><span data-i18n="haunted"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_obsessed" value="1"/><span data-i18n="obsessed"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_paranoid" value="1"/><span data-i18n="paranoid"></span>
              </label>
            </div>
            <div class="flex">
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_ruthless" value="1"/><span data-i18n="ruthless"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_secretive" value="1"/><span data-i18n="secretive"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_unstable" value="1"/><span data-i18n="unstable"></span>
              </label><span>—</span>
              <label class="text-button">
                <input type="checkbox" name="attr_trauma_vicious" value="1"/><span data-i18n="vicious"></span>
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="harm-coin grid sheet-2col">
        <div class="harm">
          <div class="blackheader">
            <div class="label" data-i18n="harm"></div>
            <button class="broadcast-button" type="roll" name="roll_Harm" value="&amp;{template:bitd-broadcast} {{charname=@{character_name}}} {{harm=1}} {{harm3=@{harm3}}} {{harm2_1=@{harm2_1}}} {{harm2_2=@{harm2_2}}} {{harm1_1=@{harm1_1}}} {{harm1_2=@{harm1_2}}} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="send_details_to_chat">:</button>
          </div>
          <div class="harmbody">
            <div class="flex-center harmnumber">3</div>
            <textarea class="twocols" spellcheck="false" name="attr_harm3"></textarea>
            <div class="flex-center harmeffect" data-i18n="need_help"></div>
            <div class="flex-center harmnumber">2</div>
            <textarea spellcheck="false" name="attr_harm2_1"></textarea>
            <textarea spellcheck="false" name="attr_harm2_2"></textarea>
            <div class="flex-center harmeffect" data-i18n="minus1d"></div>
            <div class="flex-center harmnumber">1</div>
            <textarea spellcheck="false" name="attr_harm1_1"></textarea>
            <textarea spellcheck="false" name="attr_harm1_2"></textarea>
            <div class="flex-center harmeffect" data-i18n="less_effect"></div>
          </div>
        </div>
        <div class="healing">
          <div class="blackheader">
            <button class="label rollbutton inherit" type="roll" name="roll_Recovery" value="&{template:blades} {{charname=@{character_name}}} {{type=resist}} {{short=short}} {{title-recovery=1}} {{title=^{recovery}}} {{subtitle=^{rolls_for}}} @{numberofdice} {{charimage=@{chat_image}}} @{title_text}" data-i18n="healing"></button>
          </div>
          <div class="col100 healing-progress" data-i18n="progress_clock" data-i18n-title="recoveryblurb"></div>
          <input class="size" type="hidden" name="attr_recovery_max" value="4"/>
          <div class="clock-container">
            <div class="spoke-0 all"></div>
            <div class="spoke-90 all"></div>
            <input class="zero input-progress" type="radio" name="attr_recovery" value="0" checked="checked"/><span></span>
            <input class="input-progress all" type="radio" name="attr_recovery" value="1" data-i18n-title="recoveryblurb"/>
            <input class="input-progress all" type="radio" name="attr_recovery" value="2" data-i18n-title="recoveryblurb"/>
            <input class="input-progress all" type="radio" name="attr_recovery" value="3" data-i18n-title="recoveryblurb"/>
            <input class="input-progress all" type="radio" name="attr_recovery" value="4" data-i18n-title="recoveryblurb"/>
            <div class="clock"></div>
          </div>
        </div>
        <div class="armor">
          <div class="blackheader">
            <div class="label" data-i18n="armor_uses"></div>
          </div>
          <label>
            <input class="checkbox squarebox" type="checkbox" name="attr_armor" value="1"/><span></span><span class="label" data-i18n="armor"></span>
          </label>
          <label>
            <input class="checkbox squarebox" type="checkbox" name="attr_heavy" value="1"/><span></span><span class="label" data-i18n="+heavy"></span>
          </label>
          <label>
            <input class="checkbox squarebox" type="checkbox" name="attr_special" value="1"/><span></span><span class="label" data-i18n="special"></span>
          </label>
        </div>
        <div class="coin-and-stash">
          <div class="coinrow flex">
            <div class="coin flex">
              <div class="label" data-i18n="coin"></div>
              <input class="zero" type="radio" name="attr_coin" value="0" checked="checked"/><span></span>
              <input class="radiobox" type="radio" name="attr_coin" value="1"/><span></span>
              <input class="radiobox" type="radio" name="attr_coin" value="2"/><span></span>
              <input class="radiobox" type="radio" name="attr_coin" value="3"/><span></span>
              <input class="radiobox" type="radio" name="attr_coin" value="4"/><span></span>
            </div>
            <div class="stashbutton-holder">
              <input type="hidden" name="attr_stash_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <button class="rollbutton label" type="roll" name="roll_Stash" value="&{template:blades} {{charname=@{character_name}}} {{type=resist}} {{short=short}} {{title-lifestyle=1}} {{title=^{lifestyle}}} {{subtitle=^{rolls}}} @{stash_formula} {{charimage=@{chat_image}}} @{title_text}" data-i18n="stash">
              </button>
            </div>
          </div>
          <div class="stash">
            <input class="zero" type="radio" name="attr_stash" value="0" checked="checked"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="1"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="2"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="3"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="4"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="5"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="6"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="7"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="8"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="9"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="10"/><span></span><br/>
            <input class="radiobox" type="radio" name="attr_stash" value="11"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="12"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="13"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="14"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="15"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="16"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="17"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="18"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="19"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="20"/><span></span><br/>
            <input class="radiobox" type="radio" name="attr_stash" value="21"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="22"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="23"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="24"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="25"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="26"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="27"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="28"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="29"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="30"/><span></span><br/>
            <input class="radiobox" type="radio" name="attr_stash" value="31"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="32"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="33"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="34"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="35"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="36"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="37"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="38"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="39"/><span></span>
            <input class="radiobox" type="radio" name="attr_stash" value="40"/><span></span><br/>
          </div>
        </div>
      </div>
      <div class="specialabilities sheet-2col">
        <div class="specialheader label flex">
          <input class="inherit" type="text" spellcheck="false" name="attr_special_abilities_title" value="Special Abilities"/>
        </div>
        <div class="greyholder">
          <fieldset class="repeating_ability">
            <div class="specialability flex">
              <button class="broadcast-button" type="roll" name="roll_Show" value="&amp;{template:bitd-broadcast} {{charname=@{character_name}}} {{type=^{special_ability}}} {{title=@{name}}} {{content=@{description}}} {{charimage=@{chat_image}}}" data-i18n-title="send_details_to_chat">:</button>
              <input class="checkbox circlebox" type="checkbox" name="attr_check" value="1"/><span></span>
              <div class="auto-expand abilityname smallcaps"><span name="attr_name"></span>
                <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="ability_name"></textarea>
              </div>
              <div class="auto-expand abilitydesc"><span name="attr_description"></span>
                <textarea spellcheck="false" name="attr_description" data-i18n-placeholder="ability_description"></textarea>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
      <div class="advancement sheet-2col">
        <div class="advancement-header flex blackheader">
          <div class="label markxp" data-i18n="mark_xp:"></div>
          <div class="label" data-i18n="playbook_advancement"></div>
          <div class="xpholder flex">
            <input class="vampirexp" type="hidden" name="attr_setting_vampirexp" value="0"/>
            <input class="tooth zero" type="radio" name="attr_playbook_xp" value="0" checked="checked"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="1"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="2"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="3"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="4"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="5"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="6"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="7"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="8"/><span></span>
            <input class="toothhider" type="hidden" name="attr_setting_vampirexp" value="0"/>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="9"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_playbook_xp" value="10"/><span></span>
          </div>
        </div>
        <ul class="advancement-desc">
          <li data-i18n="xp_desperate"></li>
          <li class="nondot" data-i18n="xp_top"></li>
          <li>
            <div class="auto-expand"><span name="attr_xp_condition"></span>
              <textarea spellcheck="false" name="attr_xp_condition" data-i18n-placeholder="xp_specific"></textarea>
            </div>
          </li>
          <input class="hider" type="hidden" name="attr_setting_extra_xp" value="0"/>
          <li>
            <div class="auto-expand"><span name="attr_xp_condition_extra"></span>
              <textarea spellcheck="false" name="attr_xp_condition_extra" data-i18n-placeholder="xp_specific_extra"></textarea>
            </div>
          </li>
          <li>
            <div class="auto-expand"><span name="attr_xp_condition2">You expressed your beliefs, drives, heritage, or background.</span>
              <textarea spellcheck="false" name="attr_xp_condition2">You expressed your beliefs, drives, heritage, or background.</textarea>
            </div>
          </li>
          <li>
            <div class="auto-expand"><span name="attr_xp_condition3">You struggled with issues from your vice or traumas during the session.</span>
              <textarea spellcheck="false" name="attr_xp_condition3">You struggled with issues from your vice or traumas during the session.</textarea>
            </div>
          </li>
        </ul>
      </div>
      <div class="teamwork">
        <div class="plainheader label" data-i18n="teamwork"></div>
        <div class="teamworkbox" data-i18n="assist_a_teammate"></div>
        <div class="teamworkbox" data-i18n="lead_a_group_action"></div>
        <div class="teamworkbox" data-i18n="protect_a_teammate"></div>
        <div class="teamworkbox" data-i18n="set_up_a_teammate"></div>
      </div>
      <div class="gatherinfo">
        <div class="plainheader label" data-i18n="gather_information"></div>
        <div>
          <ul>
            <li>
              <input class="inherit" type="text" spellcheck="false" name="attr_gatherinfo1" data-i18n-placeholder="gatherinfo_what_do_they_intend"/>
            </li>
            <li>
              <input class="inherit" type="text" spellcheck="false" name="attr_gatherinfo2" data-i18n-placeholder="gatherinfo_how_can_I_get_them"/>
            </li>
            <li>
              <input class="inherit" type="text" spellcheck="false" name="attr_gatherinfo3" data-i18n-placeholder="gatherinfo_what_are_they_really"/>
            </li>
            <li>
              <input class="inherit" type="text" spellcheck="false" name="attr_gatherinfo4" data-i18n-placeholder="gatherinfo_what_should_I_look"/>
            </li>
            <li>
              <input class="inherit" type="text" spellcheck="false" name="attr_gatherinfo5" data-i18n-placeholder="gatherinfo_wheres_the_weakness"/>
            </li>
            <li>
              <input class="inherit" type="text" spellcheck="false" name="attr_gatherinfo6" data-i18n-placeholder="gatherinfo_how_can_I_find"/>
            </li>
            <li data-i18n="gatherinfo_whats_going_on"></li>
          </ul>
        </div>
        <input class="hider" type="hidden" name="attr_setting_show_strictures" value="0"/>
        <div class="strictures def-margin">
          <div class="plainheader label" data-i18n="strictures"></div>
          <div><span class="italic" data-i18n="stricturesblurb"></span></div>
          <div>
            <label>
              <input class="checkbox squarebox" type="checkbox" name="attr_stricture_slumber" value="1"/><span></span><span class="label" data-i18n="slumber"></span>
            </label><span data-i18n="strictures_slumber"></span>
          </div>
          <div>
            <label>
              <input class="checkbox squarebox" type="checkbox" name="attr_stricture_forbidden" value="1"/><span></span><span class="label" data-i18n="forbidden"></span>
            </label><span data-i18n="strictures_forbidden"></span>
          </div>
          <div>
            <label>
              <input class="checkbox squarebox" type="checkbox" name="attr_stricture_repelled" value="1"/><span></span><span class="label" data-i18n="repelled"></span>
            </label><span data-i18n="strictures_repelled"></span>
          </div>
          <div>
            <label>
              <input class="checkbox squarebox" type="checkbox" name="attr_stricture_bestial" value="1"/><span></span><span class="label" data-i18n="bestial"></span>
            </label><span data-i18n="strictures_bestial"></span>
          </div>
          <div>
            <label>
              <input class="checkbox squarebox" type="checkbox" name="attr_stricture_bound" value="1"/><span></span><span class="label" data-i18n="bound"></span>
            </label><span data-i18n="strictures_bound"></span>
          </div>
        </div>
      </div>
    </div>
    <div class="right-column grid">
      <div class="playbook sheet-2col flex">
        <input class="label" type="text" spellcheck="false" name="attr_playbook" data-i18n-placeholder="playbook"/>
        <textarea class="label" spellcheck="false" name="attr_playbook_description" data-i18n-placeholder="playbook_description"></textarea>
        <input class="hider" type="hidden" name="attr_show_playbook_reminder" value="1"/>
        <div class="reminder"><span data-i18n="autofill_reminder_playbook"></span><br/><span data-i18n="list_playbooks"></span></div>
      </div>
      <div class="itemcolumn">
        <div class="loadheader flex">
          <div class="label" data-i18n="load"></div>
          <label>
            <input class="checkbox" type="checkbox" name="attr_load" value="light"/><span></span><span class="loadnumber" name="attr_setting_load_l"></span><span data-i18n="light"></span>
          </label>
          <label>
            <input class="checkbox" type="checkbox" name="attr_load" value="normal"/><span></span><span class="loadnumber" name="attr_setting_load_n"></span><span data-i18n="normal"></span>
          </label>
          <label>
            <input class="checkbox" type="checkbox" name="attr_load" value="heavy"/><span></span><span class="loadnumber" name="attr_setting_load_h"></span><span data-i18n="heavy"></span>
          </label>
        </div>
        <div class="itemheader small-margin flex">
          <div class="label" data-i18n="items"></div><span class="italic" data-i18n="italics_dont_count"></span>
          <label class="text-button">
            <input type="checkbox" name="attr_reset_items" value="1"/><span data-i18n="reset?"></span>
          </label>
        </div>
        <div class="itemholder items">
          <div class="playbookitems free-repcontrol">
            <fieldset class="repeating_playbookitem">
              <input class="boxes-chosen" type="hidden" name="attr_boxes_chosen" value="0"/>
              <div class="item numboxes-chooser">
                <div data-i18n="how_much_load"></div>
                <input type="number" name="attr_numboxes" min="0" max="3" value="0"/>
                <label>
                  <input type="checkbox" name="attr_bold" value="1"/><span data-i18n="bold"></span>
                </label>
                <label>
                  <input type="checkbox" name="attr_boxes_chosen" value="1"/><span data-i18n="ok"></span>
                </label>
              </div>
              <div class="item">
                <input class="input-bold" type="hidden" name="attr_bold" value="0"/>
                <input class="numboxes" type="hidden" name="attr_numboxes" value="0"/>
                <input class="checkbox squarebox" type="checkbox" name="attr_check_1" value="1"/><span></span><span class="floatingbar boxesgeq2"></span>
                <input class="checkbox squarebox boxesgeq2" type="checkbox" name="attr_check_2" value="1"/><span class="boxesgeq2"></span><span class="floatingbar boxesgeq3 boxesgeq2"></span>
                <input class="checkbox squarebox boxesgeq2 boxesgeq3" type="checkbox" name="attr_check_3" value="1"/><span class="boxesgeq2 boxesgeq3"></span>
                <div class="auto-expand itemname"><span name="attr_name"></span>
                  <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="item_name"></textarea>
                </div>
              </div>
              <div class="item-description">
                <input class="expand" type="checkbox" value="1"/><span></span>
                <textarea spellcheck="false" name="attr_description" data-i18n-placeholder="description"></textarea>
              </div>
            </fieldset>
            <input class="hider" type="hidden" name="attr_setting_show_frame" value="0"/>
            <div class="frame small-margin">
              <input class="smallcaps" type="text" spellcheck="false" name="attr_frame" value="Frame"/>
              <textarea spellcheck="false" name="attr_frame_description" data-i18n-placeholder="frame_description"></textarea>
              <fieldset class="repeating_framefeature">
                <div class="item">
                  <input class="checkbox circlebox" type="checkbox" name="attr_check" value="1"/><span></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_name" data-i18n-placeholder="frame_feature"/>
                </div>
              </fieldset>
            </div>
          </div>
          <div class="regularitems free-repcontrol">
            <fieldset class="repeating_item">
              <input class="input-short" type="hidden" name="attr_short" value="0"/>
              <input class="input-expand" type="hidden" name="attr_expand" value="0"/>
              <div class="item-container">
                <input class="boxes-chosen" type="hidden" name="attr_boxes_chosen" value="0"/>
                <div class="item numboxes-chooser">
                  <div data-i18n="how_much_load"></div>
                  <input type="number" name="attr_numboxes" min="0" max="3" value="0"/>
                  <label>
                    <input type="checkbox" name="attr_short" value="1"/><span data-i18n="short"></span>
                  </label>
                  <label>
                    <input type="checkbox" name="attr_boxes_chosen" value="1"/><span data-i18n="ok"></span>
                  </label>
                </div>
                <div class="item">
                  <input class="numboxes" type="hidden" name="attr_numboxes" value="0"/>
                  <input class="checkbox squarebox" type="checkbox" name="attr_check_1" value="1"/><span></span><span class="floatingbar boxesgeq2"></span>
                  <input class="checkbox squarebox boxesgeq2" type="checkbox" name="attr_check_2" value="1"/><span class="boxesgeq2"></span><span class="floatingbar boxesgeq3 boxesgeq2"></span>
                  <input class="checkbox squarebox boxesgeq2 boxesgeq3" type="checkbox" name="attr_check_3" value="1"/><span class="boxesgeq2 boxesgeq3"></span>
                  <input class="itemname" type="text" spellcheck="false" name="attr_name" data-i18n-placeholder="item_name"/>
                </div>
                <div class="item-description">
                  <input class="expand" type="checkbox" name="attr_expand" value="1"/><span></span>
                  <textarea spellcheck="false" name="attr_description" data-i18n-placeholder="description"></textarea>
                </div>
              </div>
            </fieldset>
          </div>
        </div>
        <div class="def-margin">
          <input class="title-checkbox" type="checkbox" name="attr_show_alchemicals" value="1"/><span class="label plainheader" name="attr_setting_alchemicals_label"></span>
          <div class="alchemicals free-repcontrol">
            <input class="hider" type="hidden" name="attr_setting_show_bandolier" value="0"/>
            <div class="bandolier">
              <div class="item"><span class="bandoliers-name" data-i18n="bandoliers"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_bandolier1_check_1" value="1"/><span></span><span class="floatingbar"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_bandolier1_check_2" value="1"/><span></span><span class="floatingbar"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_bandolier1_check_3" value="1"/><span></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_bandolier2_check_1" value="1"/><span></span><span class="floatingbar"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_bandolier2_check_2" value="1"/><span></span><span class="floatingbar"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_bandolier2_check_3" value="1"/><span></span>
              </div>
              <div class="bandolier-desc" data-i18n="when_you_use_bandolier"></div>
            </div>
            <fieldset class="repeating_alchemical">
              <input class="alchemicals-expand" type="checkbox" value="1"/><span></span>
              <div class="auto-expand"><span name="attr_name"></span>
                <textarea spellcheck="false" name="attr_name"></textarea>
              </div>
              <textarea class="alchemicals-info" spellcheck="false" name="attr_description"></textarea>
            </fieldset>
          </div>
        </div>
        <div class="planning def-margin">
          <input class="title-checkbox" type="checkbox" name="attr_show_planning" value="1" checked="checked"/><span class="label plainheader" data-i18n="planning_load"></span>
          <div class="planning-content">
            <div class="planningdesc" data-i18n="planningdesc"></div>
            <div class="teamworkbox"><span class="bold" data-i18n="assault"></span><span class="italic" data-i18n="detail_assault"></span></div>
            <div class="teamworkbox"><span class="bold" data-i18n="occult"></span><span class="italic" data-i18n="detail_occult"></span></div>
            <div class="teamworkbox"><span class="bold" data-i18n="deception"></span><span class="italic" data-i18n="detail_deception"></span></div>
            <div class="teamworkbox"><span class="bold" data-i18n="social"></span><span class="italic" data-i18n="detail_social"></span></div>
            <div class="teamworkbox"><span class="bold" data-i18n="stealth"></span><span class="italic" data-i18n="detail_stealth"></span></div>
            <div class="teamworkbox"><span class="bold" data-i18n="transport"></span><span class="italic" data-i18n="detail_transport"></span></div>
          </div>
        </div>
      </div>
      <div class="actioncolumn">
        <div class="attribute">
          <div class="attribute-title flex">
            <button class="rollbutton label" type="roll" name="roll_Insight" value="&{template:blades} {{charname=@{character_name}}} {{type=resist}} {{subtitle=^{resists} @{consequence_query} ^{with}}} {{title-insight=1}} {{title=^{insight}}} @{insight_formula} {{instructions=^{resist_instructions}}} @{insight_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="insight_description"><span class="default-label inherit" data-i18n="insight"></span><span class="custom-label inherit" name="attr_insight_label"></span>
            </button>
            <input type="hidden" name="attr_insight" value="0"/>
            <input type="hidden" name="attr_insight_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
            <input type="hidden" name="attr_insight_xp_max" value="6"/>
            <input type="hidden" name="attr_insight_roll_mods" value=""/>
            <div class="attribute-xp-box flex">
              <input class="vampirexp" type="hidden" name="attr_setting_vampirexp" value="0"/>
              <input class="tooth zero" type="radio" name="attr_insight_xp" value="0" checked="checked"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_insight_xp" value="1"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_insight_xp" value="2"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_insight_xp" value="3"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_insight_xp" value="4"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_insight_xp" value="5"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_insight_xp" value="6"/><span></span>
              <input class="toothhider" type="hidden" name="attr_setting_vampirexp" value="0"/>
              <input class="tooth xptooth" type="radio" name="attr_insight_xp" value="7"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_insight_xp" value="8"/><span></span>
            </div>
          </div>
          <div class="actions">
            <div class="action flex">
              <input type="hidden" name="attr_hunt_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input type="hidden" name="attr_hunt_roll_mods" value=""/>
              <input class="darktalent" type="hidden" name="attr_setting_dark_talent_insight" value="0"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_hunt" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_hunt" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_hunt" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_hunt" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_hunt" value="4"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_hunt" value="5"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_Hunt" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{subtitle=^{rolls}}} {{title-hunt=1}} {{title=^{hunt}}} {{@{position_query}}} {{effect=@{effect_query}}} @{hunt_formula} @{hunt_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="hunt_description"><span class="default-label inherit" data-i18n="hunt"></span><span class="custom-label inherit" name="attr_hunt_label"></span>
              </button>
            </div>
            <div class="action flex">
              <input type="hidden" name="attr_study_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input type="hidden" name="attr_study_roll_mods" value=""/>
              <input class="darktalent" type="hidden" name="attr_setting_dark_talent_insight" value="0"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_study" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_study" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_study" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_study" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_study" value="4"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_study" value="5"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_Study" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{subtitle=^{rolls}}} {{title-study=1}} {{title=^{study}}} {{@{position_query}}} {{effect=@{effect_query}}} @{study_formula} @{study_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="study_description"><span class="default-label inherit" data-i18n="study"></span><span class="custom-label inherit" name="attr_study_label"></span>
              </button>
            </div>
            <div class="action flex">
              <input type="hidden" name="attr_survey_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input type="hidden" name="attr_survey_roll_mods" value=""/>
              <input class="darktalent" type="hidden" name="attr_setting_dark_talent_insight" value="0"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_survey" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_survey" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_survey" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_survey" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_survey" value="4"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_survey" value="5"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_Survey" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{subtitle=^{rolls}}} {{title-survey=1}} {{title=^{survey}}} {{@{position_query}}} {{effect=@{effect_query}}} @{survey_formula} @{survey_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="survey_description"><span class="default-label inherit" data-i18n="survey"></span><span class="custom-label inherit" name="attr_survey_label"></span>
              </button>
            </div>
            <div class="action flex">
              <input type="hidden" name="attr_tinker_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input type="hidden" name="attr_tinker_roll_mods" value=""/>
              <input class="darktalent" type="hidden" name="attr_setting_dark_talent_insight" value="0"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_tinker" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_tinker" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_tinker" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_tinker" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_tinker" value="4"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_tinker" value="5"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_Tinker" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{subtitle=^{rolls}}} {{title-tinker=1}} {{title=^{tinker}}} {{@{position_query}}} {{effect=@{effect_query}}} @{tinker_formula} @{tinker_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="tinker_description"><span class="default-label inherit" data-i18n="tinker"></span><span class="custom-label inherit" name="attr_tinker_label"></span>
              </button>
            </div>
          </div>
        </div>
        <div class="attribute">
          <div class="attribute-title flex">
            <button class="rollbutton label" type="roll" name="roll_Prowess" value="&{template:blades} {{charname=@{character_name}}} {{type=resist}} {{subtitle=^{resists} @{consequence_query} ^{with}}} {{title-prowess=1}} {{title=^{prowess}}} @{prowess_formula} {{instructions=^{resist_instructions}}} @{prowess_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="prowess_description"><span class="default-label inherit" data-i18n="prowess"></span><span class="custom-label inherit" name="attr_prowess_label"></span>
            </button>
            <input type="hidden" name="attr_prowess" value="0"/>
            <input type="hidden" name="attr_prowess_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
            <input type="hidden" name="attr_prowess_xp_max" value="6"/>
            <input type="hidden" name="attr_prowess_roll_mods" value=""/>
            <div class="attribute-xp-box flex">
              <input class="vampirexp" type="hidden" name="attr_setting_vampirexp" value="0"/>
              <input class="tooth zero" type="radio" name="attr_prowess_xp" value="0" checked="checked"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="1"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="2"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="3"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="4"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="5"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="6"/><span></span>
              <input class="toothhider" type="hidden" name="attr_setting_vampirexp" value="0"/>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="7"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_prowess_xp" value="8"/><span></span>
            </div>
          </div>
          <div class="actions">
            <div class="action flex">
              <input type="hidden" name="attr_finesse_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input type="hidden" name="attr_finesse_roll_mods" value=""/>
              <input class="darktalent" type="hidden" name="attr_setting_dark_talent_prowess" value="0"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_finesse" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_finesse" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_finesse" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_finesse" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_finesse" value="4"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_finesse" value="5"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_Finesse" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{subtitle=^{rolls}}} {{title-finesse=1}} {{title=^{finesse}}} {{@{position_query}}} {{effect=@{effect_query}}} @{finesse_formula} @{finesse_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="finesse_description"><span class="default-label inherit" data-i18n="finesse"></span><span class="custom-label inherit" name="attr_finesse_label"></span>
              </button>
            </div>
            <div class="action flex">
              <input type="hidden" name="attr_prowl_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input type="hidden" name="attr_prowl_roll_mods" value=""/>
              <input class="darktalent" type="hidden" name="attr_setting_dark_talent_prowess" value="0"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_prowl" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_prowl" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_prowl" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_prowl" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_prowl" value="4"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_prowl" value="5"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_Prowl" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{subtitle=^{rolls}}} {{title-prowl=1}} {{title=^{prowl}}} {{@{position_query}}} {{effect=@{effect_query}}} @{prowl_formula} @{prowl_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="prowl_description"><span class="default-label inherit" data-i18n="prowl"></span><span class="custom-label inherit" name="attr_prowl_label"></span>
              </button>
            </div>
            <div class="action flex">
              <input type="hidden" name="attr_skirmish_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input type="hidden" name="attr_skirmish_roll_mods" value=""/>
              <input class="darktalent" type="hidden" name="attr_setting_dark_talent_prowess" value="0"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_skirmish" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_skirmish" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_skirmish" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_skirmish" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_skirmish" value="4"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_skirmish" value="5"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_Skirmish" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{subtitle=^{rolls}}} {{title-skirmish=1}} {{title=^{skirmish}}} {{@{position_query}}} {{effect=@{effect_query}}} @{skirmish_formula} @{skirmish_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="skirmish_description"><span class="default-label inherit" data-i18n="skirmish"></span><span class="custom-label inherit" name="attr_skirmish_label"></span>
              </button>
            </div>
            <div class="action flex">
              <input type="hidden" name="attr_wreck_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input type="hidden" name="attr_wreck_roll_mods" value=""/>
              <input class="darktalent" type="hidden" name="attr_setting_dark_talent_prowess" value="0"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_wreck" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_wreck" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_wreck" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_wreck" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_wreck" value="4"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_wreck" value="5"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_Wreck" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{subtitle=^{rolls}}} {{title-wreck=1}} {{title=^{wreck}}} {{@{position_query}}} {{effect=@{effect_query}}} @{wreck_formula} @{wreck_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="wreck_description"><span class="default-label inherit" data-i18n="wreck"></span><span class="custom-label inherit" name="attr_wreck_label"></span>
              </button>
            </div>
          </div>
        </div>
        <div class="attribute">
          <div class="attribute-title flex">
            <button class="rollbutton label" type="roll" name="roll_Resolve" value="&{template:blades} {{charname=@{character_name}}} {{type=resist}} {{subtitle=^{resists} @{consequence_query} ^{with}}} {{title-resolve=1}} {{title=^{resolve}}} @{resolve_formula} {{instructions=^{resist_instructions}}} @{resolve_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="resolve_description"><span class="default-label inherit" data-i18n="resolve"></span><span class="custom-label inherit" name="attr_resolve_label"></span>
            </button>
            <input type="hidden" name="attr_resolve" value="0"/>
            <input type="hidden" name="attr_resolve_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
            <input type="hidden" name="attr_resolve_xp_max" value="6"/>
            <input type="hidden" name="attr_resolve_roll_mods" value=""/>
            <div class="attribute-xp-box flex">
              <input class="vampirexp" type="hidden" name="attr_setting_vampirexp" value="0"/>
              <input class="tooth zero" type="radio" name="attr_resolve_xp" value="0" checked="checked"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_resolve_xp" value="1"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_resolve_xp" value="2"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_resolve_xp" value="3"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_resolve_xp" value="4"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_resolve_xp" value="5"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_resolve_xp" value="6"/><span></span>
              <input class="toothhider" type="hidden" name="attr_setting_vampirexp" value="0"/>
              <input class="tooth xptooth" type="radio" name="attr_resolve_xp" value="7"/><span></span>
              <input class="tooth xptooth" type="radio" name="attr_resolve_xp" value="8"/><span></span>
            </div>
          </div>
          <div class="actions">
            <div class="action flex">
              <input type="hidden" name="attr_attune_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input type="hidden" name="attr_attune_roll_mods" value=""/>
              <input class="darktalent" type="hidden" name="attr_setting_dark_talent_resolve" value="0"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_attune" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_attune" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_attune" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_attune" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_attune" value="4"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_attune" value="5"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_Attune" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{subtitle=^{rolls}}} {{title-attune=1}} {{title=^{attune}}} {{@{position_query}}} {{effect=@{effect_query}}} @{attune_formula} @{attune_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="attune_description"><span class="default-label inherit" data-i18n="attune"></span><span class="custom-label inherit" name="attr_attune_label"></span>
              </button>
            </div>
            <div class="action flex">
              <input type="hidden" name="attr_command_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input type="hidden" name="attr_command_roll_mods" value=""/>
              <input class="darktalent" type="hidden" name="attr_setting_dark_talent_resolve" value="0"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_command" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_command" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_command" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_command" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_command" value="4"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_command" value="5"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_Command" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{subtitle=^{rolls}}} {{title-command=1}} {{title=^{command}}} {{@{position_query}}} {{effect=@{effect_query}}} @{command_formula} @{command_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="command_description"><span class="default-label inherit" data-i18n="command"></span><span class="custom-label inherit" name="attr_command_label"></span>
              </button>
            </div>
            <div class="action flex">
              <input type="hidden" name="attr_consort_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input type="hidden" name="attr_consort_roll_mods" value=""/>
              <input class="darktalent" type="hidden" name="attr_setting_dark_talent_resolve" value="0"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_consort" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_consort" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_consort" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_consort" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_consort" value="4"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_consort" value="5"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_Consort" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{subtitle=^{rolls}}} {{title-consort=1}} {{title=^{consort}}} {{@{position_query}}} {{effect=@{effect_query}}} @{consort_formula} @{consort_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="consort_description"><span class="default-label inherit" data-i18n="consort"></span><span class="custom-label inherit" name="attr_consort_label"></span>
              </button>
            </div>
            <div class="action flex">
              <input type="hidden" name="attr_sway_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <input type="hidden" name="attr_sway_roll_mods" value=""/>
              <input class="darktalent" type="hidden" name="attr_setting_dark_talent_resolve" value="0"/>
              <input class="hidden fakeradio" type="checkbox" name="attr_sway" value="0" checked="checked"/>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sway" value="1"/><span></span>
              <div class="divider"></div>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sway" value="2"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sway" value="3"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sway" value="4"/><span></span>
              <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_sway" value="5"/><span></span>
              <button class="rollbutton label" type="roll" name="roll_Sway" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{subtitle=^{rolls}}} {{title-sway=1}} {{title=^{sway}}} {{@{position_query}}} {{effect=@{effect_query}}} @{sway_formula} @{sway_roll_mods} {{charimage=@{chat_image}}} @{title_text}" data-i18n-title="sway_description"><span class="default-label inherit" data-i18n="sway"></span><span class="custom-label inherit" name="attr_sway_label"></span>
              </button>
            </div>
          </div>
        </div>
        <input class="hider" type="hidden" name="attr_setting_show_cohort" value="0"/>
        <div class="cohort">
          <input type="hidden" name="attr_char_cohort_verb" value="^{rolls_their}"/>
          <input type="hidden" name="attr_char_cohort_roll_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
          <div class="cohort-title flex label">
            <input class="inherit" type="text" spellcheck="false" name="attr_char_cohort_name" value="Cohort"/>
            <button class="inherit rollbutton" type="roll" name="roll_char_cohort_roll" value="&{template:blades} {{charname=@{character_name}}} {{type=resist}} {{short=short}} {{charname=@{char_cohort_name} (^{@{char_cohort_type}}, @{char_cohort_subtype})}} {{title-cohort_quality=1}} {{title=^{cohort_quality}}} {{subtitle=@{char_cohort_verb}}} @{char_cohort_roll_formula} {{charimage=@{chat_image}}} @{title_text}" data-i18n="roll-inf">
            </button>
          </div>
          <div class="cohort-info flex uppercase">
            <div class="cohort-dropdown">
              <div><span name="attr_char_cohort_type" data-i18n-dynamic="data-i18n-dynamic"></span></div>
              <div>
                <input type="radio" name="attr_char_cohort_type" value="gang"/><span data-i18n="gang"></span>
              </div>
              <div>
                <input type="radio" name="attr_char_cohort_type" value="elite"/><span data-i18n="elite"></span>
              </div>
              <div>
                <input type="radio" name="attr_char_cohort_type" value="expert" checked="checked"/><span data-i18n="expert"></span>
              </div>
            </div>
            <input class="sheet-inherit" type="text" spellcheck="false" name="attr_char_cohort_subtype" data-i18n-placeholder="hunter"/>
            <div class="label cohort-quality-label" data-i18n="quality_abbreviated">Q:</div>
            <input class="label" type="number" name="attr_char_cohort_quality" min="0" max="5" value="1"/>
          </div>
          <div class="cohort-condition flex">
            <label><span class="cohort-condition-name uppercase" data-i18n="weak"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_char_cohort_weak" value="1"/><span></span>
            </label>
            <label><span class="cohort-condition-name uppercase" data-i18n="impaired"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_char_cohort_impaired" value="1"/><span></span>
            </label>
            <label><span class="cohort-condition-name uppercase" data-i18n="broken"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_char_cohort_broken" value="1"/><span></span>
            </label>
            <label><span class="cohort-condition-name label" data-i18n="armor"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_char_cohort_armor" value="1"/><span></span>
            </label>
          </div>
          <label class="cohort-edgeflaw"><span class="uppercase" data-i18n="edges"></span>
            <div class="auto-expand"><span name="attr_char_cohort_edges"></span>
              <textarea spellcheck="false" name="attr_char_cohort_edges"></textarea>
            </div>
          </label>
          <label class="cohort-edgeflaw"><span class="uppercase" data-i18n="flaws"></span>
            <div class="auto-expand"><span name="attr_char_cohort_flaws"></span>
              <textarea spellcheck="false" name="attr_char_cohort_flaws"></textarea>
            </div>
          </label>
          <textarea class="cohort-description" spellcheck="false" name="attr_char_cohort_description"></textarea>
        </div>
        <div class="bonusdie">
          <div class="label" data-i18n="bonus_die"></div>
          <div class="flex">
            <div class="flex-center bonusdieplus">+</div>
            <div class="bonusdietext">
              <div class="label" data-i18n="push_yourself"></div><span data-i18n="push_yourself_desc1"></span><span name="attr_setting_stress_label"></span><span data-i18n="push_yourself_desc2"></span>
              <div class="label" data-i18n="devils_bargain"></div>
            </div>
          </div>
        </div>
        <div class="friends">
          <div class="specialheader label flex">
            <input class="inherit" type="text" spellcheck="false" name="attr_friends_title" value="Friends"/>
          </div>
          <div class="greyholder">
            <fieldset class="repeating_friend">
              <div class="friend-contact friend flex">
                <input class="friendstate" type="hidden" name="attr_status" value="0"/>
                <label class="up">
                  <input class="checkbox" type="checkbox" name="attr_status" value="up"/><span></span>
                </label>
                <label class="down">
                  <input class="checkbox" type="checkbox" name="attr_status" value="down"/><span></span>
                </label>
                <div class="auto-expand"><span name="attr_name"></span>
                  <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="friend_name"></textarea>
                </div>
              </div>
              <input class="expand" type="checkbox" value="1"/><span></span>
              <textarea class="description" spellcheck="false" name="attr_description" data-i18n-placeholder="notes"></textarea>
            </fieldset>
          </div>
        </div>
        <button class="fortunebutton borderbutton" type="roll" name="roll_Fortune" value="&{template:blades} {{charname=@{character_name}}} {{type=fortune}} {{subtitle=^{rolls}}} {{title-fortune=1}} {{title=^{fortune}}} @{numberofdice} {{notes=@{notes_query}}} {{charimage=@{chat_image}}} @{title_text}" data-i18n="roll_fortune"></button>
      </div>
      <div class="clocks sheet-2col free-repcontrol">
        <div class="specialheader label" data-i18n="clocks"></div>
        <fieldset class="repeating_clock">
          <input class="size" type="hidden" name="attr_size" value=""/>
          <div class="auto-expand smallcaps"><span name="attr_name"></span>
            <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="clock_name"></textarea>
          </div>
          <button class="broadcast-button" type="roll" name="roll_Show" value="&amp;{template:bitd-broadcast}{{charname=@{character_name}}} {{title=@{name}}} {{clock=1}} {{clocksize=@{size}}} {{clockprogress=@{progress}}} {{charimage=@{chat_image}}}" data-i18n-title="send_details_to_chat">:</button>
          <div class="size-choice">
            <label class="text-button">
              <input type="radio" name="attr_size" value="4"/><span>4</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="6"/><span>6</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="8"/><span>8</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="10"/><span>10</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="12"/><span>12</span>
            </label>
          </div>
          <div class="clock-container">
            <div class="spoke-0 all"></div>
            <div class="spoke-30 sheet-12clock"></div>
            <div class="spoke-45 sheet-8clock"></div>
            <div class="spoke-36 sheet-10clock"></div>
            <div class="spoke-60 sheet-6clock sheet-12clock"></div>
            <div class="spoke-72 sheet-10clock"></div>
            <div class="spoke-90 sheet-4clock sheet-8clock sheet-12clock"></div>
            <div class="spoke-108 sheet-10clock"></div>
            <div class="spoke-120 sheet-6clock sheet-12clock"></div>
            <div class="spoke-135 sheet-8clock"></div>
            <div class="spoke-144 sheet-10clock"></div>
            <div class="spoke-150 sheet-12clock"></div>
            <input class="zero input-progress" type="radio" name="attr_progress" value="0" checked="checked"/><span></span>
            <input class="input-progress all" type="radio" name="attr_progress" value="1"/>
            <input class="input-progress all" type="radio" name="attr_progress" value="2"/>
            <input class="input-progress all" type="radio" name="attr_progress" value="3"/>
            <input class="input-progress all" type="radio" name="attr_progress" value="4"/>
            <input class="input-progress sheet-6clock sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="5"/>
            <input class="input-progress sheet-6clock sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="6"/>
            <input class="input-progress sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="7"/>
            <input class="input-progress sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="8"/>
            <input class="input-progress sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="9"/>
            <input class="input-progress sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="10"/>
            <input class="input-progress sheet-12clock" type="radio" name="attr_progress" value="11"/>
            <input class="input-progress sheet-12clock" type="radio" name="attr_progress" value="12"/>
            <div class="clock"></div>
          </div>
        </fieldset>
      </div>
      <textarea class="notes sheet-2col small-margin" spellcheck="false" name="attr_notes" data-i18n-placeholder="notes"></textarea>
    </div>
  </div>
  <div class="type-crew grid">
    <div class="left-column">
      <div class="header grid">
        <div class="bladeslogo"></div>
        <div class="crewheader label" data-i18n="crew_sheet"></div>
        <label>
          <input type="text" spellcheck="false" name="attr_crew_name"/>
          <div class="label text title" data-i18n="name"></div>
        </label>
        <label>
          <input type="text" spellcheck="false" name="attr_reputation"/>
          <div class="label text title" data-i18n="reputation"></div>
        </label>
        <label class="sheet-2col">
          <input type="text" spellcheck="false" name="attr_lair"/>
          <div class="label text title" data-i18n="lair"></div>
        </label>
        <input class="hider" type="hidden" name="attr_setting_show_deity" value="0"/>
        <label>
          <input type="text" spellcheck="false" name="attr_crew_deity"/>
          <div class="label text title"><span name="attr_setting_deity_label"></span></div>
        </label>
        <input class="hider" type="hidden" name="attr_setting_show_deity" value="0"/>
        <label>
          <input type="text" spellcheck="false" name="attr_crew_deity_features" data-i18n-placeholder="choose_2_features"/>
          <input type="hidden" name="attr_crew_deity_features" value=""/>
          <div class="text"><span class="label title"><span class="space-after" name="attr_setting_deity_label"></span><span data-i18n="features"></span></span><span class="uppercase info" data-i18n="deity_features_info"></span></div>
        </label>
        <input class="hider" type="hidden" name="attr_setting_show_origin" value="0"/>
        <label class="sheet-2col">
          <input type="text" spellcheck="false" name="attr_origin"/>
          <div class="label text title" data-i18n="origin"></div>
        </label>
      </div>
      <div class="rep-and-hold flex def-margin">
        <div class="rep flex col45">
          <div class="rep1 blackheader">
            <div class="label" data-i18n="rep"></div>
          </div>
          <div class="rep2 blackborder flex">
            <div class="turfbox">
              <input type="radio" name="attr_turf" value="1"/><span></span>
              <input type="radio" name="attr_turf" value="2"/><span></span>
              <input type="radio" name="attr_turf" value="3"/><span></span>
              <input type="radio" name="attr_turf" value="4"/><span></span>
              <input type="radio" name="attr_turf" value="5"/><span></span>
              <input type="radio" name="attr_turf" value="6"/><span></span>
            </div>
            <input class="turf-input" type="hidden" name="attr_turf" value="0"/>
            <input class="tooth zero" type="radio" name="attr_rep" value="0" checked="checked"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="1"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="2"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="3"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="4"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="5"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_rep" value="6"/><span></span>
            <input class="tooth stresstooth turf6" type="radio" name="attr_rep" value="7"/><span></span>
            <input class="tooth stresstooth turf6 turf5" type="radio" name="attr_rep" value="8"/><span></span>
            <input class="tooth stresstooth turf6 turf5 turf4" type="radio" name="attr_rep" value="9"/><span></span>
            <input class="tooth stresstooth turf6 turf5 turf4 turf3" type="radio" name="attr_rep" value="10"/><span></span>
            <input class="tooth stresstooth turf6 turf5 turf4 turf3 turf2" type="radio" name="attr_rep" value="11"/><span></span>
            <input class="tooth stresstooth turf6 turf5 turf4 turf3 turf2 turf1" type="radio" name="attr_rep" value="12"/><span></span>
          </div>
          <div class="rep3 blackborder">
            <div class="black-on-grey">
              <div class="label" data-i18n="turf"></div>
            </div>
            <div class="turfzero-holder">
              <input class="zero" type="radio" name="attr_turf" value="0" checked="checked"/><span></span>
            </div>
          </div>
        </div>
        <div class="hold flex">
          <div class="hold1 blackheader">
            <div class="label" data-i18n="hold"></div>
          </div>
          <label class="blackborder">
            <div class="black-on-grey">
              <div class="label" data-i18n="weak"></div>
            </div>
            <input class="tooth holdtooth" type="radio" name="attr_hold" value="weak"/><span></span>
          </label>
          <label class="blackborder">
            <div class="black-on-grey">
              <div class="label" data-i18n="strong"></div>
            </div>
            <input class="tooth holdtooth" type="radio" name="attr_hold" value="strong" checked="checked"/><span></span>
          </label>
          <div class="blackheader">
            <button class="label inherit rollbutton" type="roll" name="roll_Tier" value="&{template:blades} {{charname=@{character_name}}} {{type=resist}} {{short=short}} {{title-crew_tier=1}} {{title=^{crew_tier}}} {{subtitle=^{roll_their}}} @{crew_tier_formula} {{charimage=@{chat_image}}} @{title_text}" data-i18n="tier">
            </button>
            <input type="hidden" name="attr_crew_tier_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
          </div>
          <div class="tier flex">
            <input class="hidden fakeradio" type="checkbox" name="attr_crew_tier" value="0" checked="checked"/>
            <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_crew_tier" value="1"/><span></span>
            <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_crew_tier" value="2"/><span></span>
            <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_crew_tier" value="3"/><span></span>
            <input class="checkbox circlebox fakeradio" type="checkbox" name="attr_crew_tier" value="4"/><span></span>
          </div>
        </div>
      </div>
      <div class="claims free-repcontrol">
        <div class="claimsbody">
              <input type="hidden" name="attr_claim_1_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_1_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_1_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_1_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_1_2" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_2_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_2_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_2_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_2_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_2_3" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_3_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_3_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_3_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_3_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_3_4" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_4_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_4_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_4_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_4_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_4_5" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_5_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_5_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_5_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_5_desc"></textarea>
              </div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_1_6" value="1" checked="checked"/><span></span>
              </label>
          <div></div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_2_7" value="1" checked="checked"/><span></span>
              </label>
          <div></div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_3_8" value="1" checked="checked"/><span></span>
              </label>
          <div></div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_4_9" value="1" checked="checked"/><span></span>
              </label>
          <div></div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_5_10" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_6_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_6_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_6_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_6_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_6_7" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_7_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_7_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_7_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_7_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_7_8" value="1" checked="checked"/><span></span>
              </label>
          <div class="lairbox flex-center uppercase" data-i18n="lair"></div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_8_9" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_9_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_9_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_9_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_9_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_9_10" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_10_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_10_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_10_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_10_desc"></textarea>
              </div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_6_11" value="1" checked="checked"/><span></span>
              </label>
          <div></div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_7_12" value="1" checked="checked"/><span></span>
              </label>
          <div></div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_8_13" value="1" checked="checked"/><span></span>
              </label>
          <div></div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_9_14" value="1" checked="checked"/><span></span>
              </label>
          <div></div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_10_15" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_11_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_11_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_11_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_11_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_11_12" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_12_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_12_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_12_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_12_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_12_13" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_13_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_13_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_13_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_13_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_13_14" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_14_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_14_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_14_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_14_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_14_15" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_15_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_15_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_15_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_15_desc"></textarea>
              </div>
        </div>
        <fieldset class="repeating_claim">
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_top_1" value="1" checked="checked"/><span></span>
              </label>
          <div></div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_top_2" value="1" checked="checked"/><span></span>
              </label>
          <div></div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_top_3" value="1" checked="checked"/><span></span>
              </label>
          <div></div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_top_4" value="1" checked="checked"/><span></span>
              </label>
          <div></div>
              <label class="claimbridge claims-vertsep">
                <input type="checkbox" name="attr_claim_bridge_top_5" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_1_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_1_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_1_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_1_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_1_2" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_2_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_2_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_2_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_2_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_2_3" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_3_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_3_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_3_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_3_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_3_4" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_4_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_4_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_4_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_4_desc"></textarea>
              </div>
              <label class="claimbridge claims-horisep">
                <input type="checkbox" name="attr_claim_bridge_4_5" value="1" checked="checked"/><span></span>
              </label>
              <input type="hidden" name="attr_claim_5_check" value="0"/>
              <div class="claimbox">
                <label>
                  <input class="checkbox squarebox-small" type="checkbox" name="attr_claim_5_check" value="1"/><span></span>
                </label>
                <textarea class="label" spellcheck="false" name="attr_claim_5_name"></textarea>
                <textarea class="claim-desc" spellcheck="false" name="attr_claim_5_desc"></textarea>
              </div>
        </fieldset>
      </div>
      <div class="heat-and-vault flex def-margin">
        <div class="heat col45 flex">
          <div class="heat1 blackheader">
            <div class="label"><span name="attr_setting_heat_label"></span></div>
          </div>
          <div class="heat2 blackborder flex">
            <input class="tooth zero" type="radio" name="attr_heat" value="0" checked="checked"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="1"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="2"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="3"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="4"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="5"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="6"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="7"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="8"/><span></span>
            <input class="tooth stresstooth" type="radio" name="attr_heat" value="9"/><span></span>
          </div>
          <div class="heat3">
            <div class="blackheader">
              <button class="label inherit rollbutton" type="roll" name="roll_Wanted" value="&{template:blades} {{charname=@{character_name}}} {{type=vice}} {{short=short}} {{title-entanglement=1}} {{title=^{entanglement}}} {{subtitle=^{wantedroll1}@{heat}&nbsp;@{setting_heat_label}^{wantedroll2}}} @{wanted_formula} {{charimage=@{chat_image}}} @{title_text}"><span name="attr_setting_wanted_label"></span>
              </button>
              <input type="hidden" name="attr_wanted_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
            </div>
            <div class="wantedholder flex">
              <input class="tooth zero" type="radio" name="attr_wanted" value="0" checked="checked"/><span></span>
              <input class="tooth regulartooth" type="radio" name="attr_wanted" value="1"/><span></span>
              <input class="tooth regulartooth" type="radio" name="attr_wanted" value="2"/><span></span>
              <input class="tooth regulartooth" type="radio" name="attr_wanted" value="3"/><span></span>
              <input class="tooth regulartooth" type="radio" name="attr_wanted" value="4"/><span></span>
            </div>
          </div>
        </div>
        <div class="crewcoin col52b">
          <div class="col100 flex">
            <div class="blackheader crewcoin1">
              <div class="label" data-i18n="coin"></div>
            </div>
            <div class="greyheader crewcoin2">
              <div class="label" data-i18n="vaults"></div>
            </div>
          </div>
          <div class="col100 flex crewcoin-coins">
            <input class="zero" type="radio" name="attr_crewcoin" value="0" checked="checked"/><span></span>
            <input class="radiobox" type="radio" name="attr_crewcoin" value="1"/><span></span>
            <input class="radiobox" type="radio" name="attr_crewcoin" value="2"/><span></span>
            <input class="radiobox" type="radio" name="attr_crewcoin" value="3"/><span></span>
            <input class="radiobox" type="radio" name="attr_crewcoin" value="4"/><span></span>
            <div class="crewcoinbar"></div>
            <input class="radiobox vaultcoin" type="radio" name="attr_crewcoin" value="5"/><span></span>
            <input class="radiobox vaultcoin" type="radio" name="attr_crewcoin" value="6"/><span></span>
            <input class="radiobox vaultcoin" type="radio" name="attr_crewcoin" value="7"/><span></span>
            <input class="radiobox vaultcoin" type="radio" name="attr_crewcoin" value="8"/><span></span>
            <div class="crewcoinbar"></div>
            <input class="radiobox vaultcoin" type="radio" name="attr_crewcoin" value="9"/><span></span>
            <input class="radiobox vaultcoin" type="radio" name="attr_crewcoin" value="10"/><span></span>
            <input class="radiobox vaultcoin" type="radio" name="attr_crewcoin" value="11"/><span></span>
            <input class="radiobox vaultcoin" type="radio" name="attr_crewcoin" value="12"/><span></span>
            <input class="radiobox vaultcoin" type="radio" name="attr_crewcoin" value="13"/><span></span>
            <input class="radiobox vaultcoin" type="radio" name="attr_crewcoin" value="14"/><span></span>
            <input class="radiobox vaultcoin" type="radio" name="attr_crewcoin" value="15"/><span></span>
            <input class="radiobox vaultcoin" type="radio" name="attr_crewcoin" value="16"/><span></span>
          </div>
          <div class="col100 crewcoin-desc" data-i18n="upon_crew_advance"></div>
        </div>
      </div>
      <div class="specialabilities def-margin">
        <div class="specialheader label" data-i18n="special_abilities"></div>
        <div class="greyholder">
          <fieldset class="repeating_crewability">
            <div class="specialability flex">
              <button class="broadcast-button" type="roll" name="roll_Show" value="&amp;{template:bitd-broadcast} {{charname=@{character_name}}} {{type=^{special_ability}}} {{title=@{name}}} {{content=@{description}}} {{charimage=@{chat_image}}}" data-i18n-title="send_details_to_chat">:</button>
              <input class="checkbox circlebox" type="checkbox" name="attr_check" value="1"/><span></span>
              <div class="auto-expand abilityname smallcaps"><span name="attr_name"></span>
                <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="ability_name"></textarea>
              </div>
              <div class="auto-expand abilitydesc"><span name="attr_description"></span>
                <textarea spellcheck="false" name="attr_description" data-i18n-placeholder="ability_description"></textarea>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
      <div class="advancement def-margin">
        <div class="advancement-header flex blackheader">
          <div class="label markxp" data-i18n="mark_xp:"></div>
          <div class="label" data-i18n="crew_advancement"></div>
          <div class="xpholder flex">
            <input class="tooth zero" type="radio" name="attr_crew_xp" value="0" checked="checked"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="1"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="2"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="3"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="4"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="5"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="6"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="7"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="8"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="9"/><span></span>
            <input class="tooth xptooth" type="radio" name="attr_crew_xp" value="10"/><span></span>
          </div>
        </div>
        <ul class="advancement-desc">
          <li class="nondot" data-i18n="xp_top"></li>
          <li>
            <div class="auto-expand"><span name="attr_crew_xp_condition"></span>
              <textarea spellcheck="false" name="attr_crew_xp_condition" data-i18n-placeholder="xp_crew_specific"></textarea>
            </div>
          </li>
          <input class="hider" type="hidden" name="attr_setting_extra_xp" value="0"/>
          <li>
            <div class="auto-expand"><span name="attr_xp_condition_extra"></span>
              <textarea spellcheck="false" name="attr_xp_condition_extra" data-i18n-placeholder="xp_specific_extra"></textarea>
            </div>
          </li>
          <li data-i18n="xp_contend"></li>
          <li data-i18n="xp_bolster"></li>
          <li data-i18n="xp_express"></li>
        </ul>
      </div>
    </div>
    <div class="right-column grid">
      <div class="playbook sheet-2col flex">
        <input class="label" type="text" spellcheck="false" name="attr_crew_type" data-i18n-placeholder="crew"/>
        <textarea class="label" spellcheck="false" name="attr_crew_description" data-i18n-placeholder="crew_description"></textarea>
        <input class="hider" type="hidden" name="attr_show_playbook_reminder" value="1"/>
        <div class="reminder"><span data-i18n="autofill_reminder_crew"></span><br/><span data-i18n="list_crews"></span></div>
      </div>
      <div class="upgradecolumn">
        <div class="itemheader"><span class="label" data-i18n="crew_upgrades"></span></div>
        <div class="itemholder upgrades">
          <div class="playbookitems free-repcontrol">
            <fieldset class="repeating_upgrade">
              <input class="boxes-chosen" type="hidden" name="attr_boxes_chosen" value="0"/>
              <div class="item numboxes-chooser">
                <div data-i18n="how_many_boxes"></div>
                <input type="number" name="attr_numboxes" min="1" max="3" value="1"/>
                <label>
                  <input type="checkbox" name="attr_boxes_chosen" value="1"/><span data-i18n="ok"></span>
                </label>
              </div>
              <div class="item">
                <input class="numboxes" type="hidden" name="attr_numboxes" value="1"/>
                <input class="checkbox squarebox" type="checkbox" name="attr_check_1" value="1"/><span></span><span class="floatingbar boxesgeq2"></span>
                <input class="checkbox squarebox boxesgeq2" type="checkbox" name="attr_check_2" value="1"/><span class="boxesgeq2"></span><span class="floatingbar boxesgeq3 boxesgeq2"></span>
                <input class="checkbox squarebox boxesgeq2 boxesgeq3" type="checkbox" name="attr_check_3" value="1"/><span class="boxesgeq2 boxesgeq3"></span>
                <div class="auto-expand itemname"><span name="attr_name"></span>
                  <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="an_upgrade"></textarea>
                </div>
              </div>
              <div class="item-description">
                <input class="expand" type="checkbox" value="1"/><span></span>
                <textarea spellcheck="false" name="attr_description" data-i18n-placeholder="description"></textarea>
              </div>
            </fieldset>
          </div>
          <div class="regularitems upgrades grid">
            <div class="upgradecaption label" data-i18n="lair"></div>
            <div class="upgradecaption label" data-i18n="quality"></div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_carriage_check_1" value="1"/><span></span>
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_carriage_check_2" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_carriage_name" value="Carriage"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_carriage_description" data-i18n-placeholder="description">You have a carriage, two goats to pull it, and a stable. A second upgrade improves the carriage with armor and larger, swifter goats. Horses are very rare in Doskvol — most carriages in the city use the large Akorosian goat as their draft animal.</textarea>
                  </div>
                </div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_documents_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_documents_name" value="Documents"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_documents_description" data-i18n-placeholder="description">+1 quality for Documents.</textarea>
                  </div>
                </div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_boat_check_1" value="1"/><span></span>
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_boat_check_2" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_boat_name" value="Boat"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_boat_description" data-i18n-placeholder="description">You have a boat, a dock on a waterway, and a small shack to store boating supplies. A second upgrade improves the boat with armor and more cargo capacity.</textarea>
                  </div>
                </div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_gear_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_gear_name" value="Gear"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_gear_description" data-i18n-placeholder="description">+1 quality for Burglary Gear and Climbing Gear.</textarea>
                  </div>
                </div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_hidden_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_hidden_name" value="Hidden"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_hidden_description" data-i18n-placeholder="description">Your lair has a secret location and is disguised to hide it from view. If your lair is discovered, use two downtime activities and pay coin equal to your Tier to relocate it and hide it once again.</textarea>
                  </div>
                </div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_implements_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_implements_name" value="Implements"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_implements_description" data-i18n-placeholder="description">+1 quality for Arcane Implements.</textarea>
                  </div>
                </div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_quarters_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_quarters_name" value="Quarters"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_quarters_description" data-i18n-placeholder="description">Your lair includes living quarters for the crew. Without this upgrade, each PC sleeps elsewhere, and is vulnerable when they do so.</textarea>
                  </div>
                </div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_supplies_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_supplies_name" value="Supplies"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_supplies_description" data-i18n-placeholder="description">+1 quality for Subterfuge Supplies.</textarea>
                  </div>
                </div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_secure_check_1" value="1"/><span></span>
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_secure_check_2" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_secure_name" value="Secure"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_secure_description" data-i18n-placeholder="description">Your lair has locks, alarms, and traps to thwart intruders. A second upgrade improves the defenses to include arcane measures that work against spirits. You might roll your crew's Tier if these measures are ever put to the test, to see how well they thwart an intruder.</textarea>
                  </div>
                </div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_tools_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_tools_name" value="Tools"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_tools_description" data-i18n-placeholder="description">+1 quality for Demolition Tools and Tinkering Tools.</textarea>
                  </div>
                </div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_vault_check_1" value="1"/><span></span>
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_vault_check_2" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_vault_name" value="Vault"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_vault_description" data-i18n-placeholder="description">Your lair has a secure vault, increasing your storage capacity for coin to 8. A second upgrade increases your capacity to 16. A separate part of your vault can be used as a holding cell.</textarea>
                  </div>
                </div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_weapons_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_weapons_name" value="Weapons"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_weapons_description" data-i18n-placeholder="description">+1 quality for Weapons.</textarea>
                  </div>
                </div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_workshop_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_workshop_name" value="Workshop"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_workshop_description" data-i18n-placeholder="description">Your lair has a workshop appointed with tools for tinkering and alchemy, as well as a small library of books, documents, and maps. You may accomplish long-term projects with these assets without leaving your lair.</textarea>
                  </div>
                </div>
            <div></div>
            <div class="upgradecaption label" data-i18n="training"></div>
            <div class="upgradecaption label" data-i18n="cohorts"></div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_insight_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_insight_name" value="Insight"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_insight_description" data-i18n-placeholder="description">Earn 2 xp when training insight during downtime.</textarea>
                  </div>
                </div>
            <div class="upgradecosts label" data-i18n="upgrade_costs"></div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_prowess_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_prowess_name" value="Prowess"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_prowess_description" data-i18n-placeholder="description">Earn 2 xp when training prowess during downtime.</textarea>
                  </div>
                </div>
            <div class="upgradecosts" data-i18n="new_cohort"></div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_resolve_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_resolve_name" value="Resolve"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_resolve_description" data-i18n-placeholder="description">Earn 2 xp when training resolve during downtime.</textarea>
                  </div>
                </div>
            <div class="upgradecosts" data-i18n="add_type"></div>
                <div>
                  <div class="item">
                    <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_personal_check_1" value="1"/><span></span>
                    <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_personal_name" value="Personal"/>
                  </div>
                  <div class="item-description">
                    <input class="expand" type="checkbox" value="1"/><span></span>
                    <textarea spellcheck="false" name="attr_upgrade_personal_description" data-i18n-placeholder="description">Earn 2 xp when training playbook during downtime.</textarea>
                  </div>
                </div>
            <div class="sheet-2col">
              <div class="item">
                <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_mastery_check_1" value="1"/><span></span><span class="floatingbar"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_mastery_check_2" value="1"/><span></span><span class="floatingbar"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_mastery_check_3" value="1"/><span></span><span class="floatingbar"></span>
                <input class="checkbox squarebox" type="checkbox" name="attr_upgrade_mastery_check_4" value="1"/><span></span>
                <input class="itemname" type="text" spellcheck="false" name="attr_upgrade_mastery_name" value="Mastery"/>
              </div>
              <div class="item-description">
                <input class="expand" type="checkbox" value="1"/><span></span>
                <textarea spellcheck="false" name="attr_upgrade_mastery_description" data-i18n-placeholder="description">Your crew has access to master level training. You may advance your PCs' action ratings to 4 (until you unlock this upgrade, PC action ratings are capped at 3). This costs four upgrade boxes to unlock.</textarea>
              </div>
            </div>
          </div>
        </div>
        <div class="hunting-grounds def-margin">
          <div class="auto-expand plainheader label"><span name="attr_hunting_grounds_type"></span>
            <textarea spellcheck="false" name="attr_hunting_grounds_type" data-i18n-placeholder="hunting_grounds"></textarea>
          </div>
          <div class="auto-expand description"><span name="attr_hunting_grounds_description"></span>
            <textarea spellcheck="false" name="attr_hunting_grounds_description" data-i18n-placeholder="hunting_grounds_description"></textarea>
          </div>
        </div>
        <button class="engagementbutton borderbutton" type="roll" name="roll_Engagement" value="&{template:blades} {{charname=@{character_name}}} {{type=action}} {{short=short}} {{small-title=small-title}} {{subtitle=^{roll_for}}} {{title-engagement=1}} {{title=^{engagement}}} @{numberofdice} {{charimage=@{chat_image}}} @{title_text}" data-i18n="roll_engagement"></button>
      </div>
      <div class="cohortcolumn">
        <div class="cohort">
          <input type="hidden" name="attr_cohort1_verb" value="^{roll_their}"/>
          <input type="hidden" name="attr_cohort1_roll_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
          <div class="cohort-title flex label">
            <input class="inherit" type="text" spellcheck="false" name="attr_cohort1_name" value="Cohort"/>
            <button class="inherit rollbutton" type="roll" name="roll_cohort1_roll" value="&{template:blades} {{charname=@{character_name}}} {{type=resist}} {{short=short}} {{charname=@{cohort1_name} (^{@{cohort1_type}}, @{cohort1_subtype})}} {{title-cohort_quality=1}} {{title=^{cohort_quality}}} {{subtitle=@{cohort1_verb}}} @{cohort1_roll_formula} {{charimage=@{chat_image}}} @{title_text}" data-i18n="roll-inf">
            </button>
          </div>
          <div class="cohort-info flex uppercase">
            <div class="cohort-dropdown">
              <div><span name="attr_cohort1_type" data-i18n-dynamic="data-i18n-dynamic"></span></div>
              <div>
                <input type="radio" name="attr_cohort1_type" value="gang" checked="checked"/><span data-i18n="gang"></span>
              </div>
              <div>
                <input type="radio" name="attr_cohort1_type" value="elite"/><span data-i18n="elite"></span>
              </div>
              <div>
                <input type="radio" name="attr_cohort1_type" value="expert"/><span data-i18n="expert"></span>
              </div>
            </div>
            <input class="sheet-inherit" type="text" spellcheck="false" name="attr_cohort1_subtype" data-i18n-placeholder="gang_type"/>
          </div>
          <div class="cohort-condition flex">
            <label><span class="cohort-condition-name uppercase" data-i18n="weak"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_cohort1_weak" value="1"/><span></span>
            </label>
            <label><span class="cohort-condition-name uppercase" data-i18n="impaired"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_cohort1_impaired" value="1"/><span></span>
            </label>
            <label><span class="cohort-condition-name uppercase" data-i18n="broken"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_cohort1_broken" value="1"/><span></span>
            </label>
            <label><span class="cohort-condition-name label" data-i18n="armor"></span>
              <input class="tooth stresstooth" type="checkbox" name="attr_cohort1_armor" value="1"/><span></span>
            </label>
          </div>
          <label class="cohort-edgeflaw"><span class="uppercase" data-i18n="edges"></span>
            <div class="auto-expand"><span name="attr_cohort1_edges"></span>
              <textarea spellcheck="false" name="attr_cohort1_edges"></textarea>
            </div>
          </label>
          <label class="cohort-edgeflaw"><span class="uppercase" data-i18n="flaws"></span>
            <div class="auto-expand"><span name="attr_cohort1_flaws"></span>
              <textarea spellcheck="false" name="attr_cohort1_flaws"></textarea>
            </div>
          </label>
          <textarea class="cohort-description" spellcheck="false" name="attr_cohort1_description"></textarea>
        </div>
        <div class="cohorts free-repcontrol">
          <fieldset class="repeating_cohort">
            <div class="cohort">
              <input type="hidden" name="attr_verb" value="^{roll_their}"/>
              <input type="hidden" name="attr_roll_formula" value=" {{?{@{bonusdice}|0,zerodice=[[d6]]&amp;#44; [[d6]]|1,dice=[[d6]]|2,dice=[[d6]]&amp;#44; [[d6]]|3,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|4,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|5,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|6,dice=[[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]&amp;#44; [[d6]]|-1,zerodice=[[d6]]&amp;#44; [[d6]]|-2,zerodice=[[d6]]&amp;#44; [[d6]]|-3,zerodice=[[d6]]&amp;#44; [[d6]]}}}"/>
              <div class="cohort-title flex label">
                <input class="inherit" type="text" spellcheck="false" name="attr_name" value="Cohort"/>
                <button class="inherit rollbutton" type="roll" name="roll_roll" value="&{template:blades} {{charname=@{character_name}}} {{type=resist}} {{short=short}} {{charname=@{name} (^{@{type}}, @{subtype})}} {{title-cohort_quality=1}} {{title=^{cohort_quality}}} {{subtitle=@{verb}}} @{roll_formula} {{charimage=@{chat_image}}} @{title_text}" data-i18n="roll-inf">
                </button>
              </div>
              <div class="cohort-info flex uppercase">
                <div class="cohort-dropdown">
                  <div><span name="attr_type" data-i18n-dynamic="data-i18n-dynamic"></span></div>
                  <div>
                    <input type="radio" name="attr_type" value="gang" checked="checked"/><span data-i18n="gang"></span>
                  </div>
                  <div>
                    <input type="radio" name="attr_type" value="elite"/><span data-i18n="elite"></span>
                  </div>
                  <div>
                    <input type="radio" name="attr_type" value="expert"/><span data-i18n="expert"></span>
                  </div>
                </div>
                <input class="sheet-inherit" type="text" spellcheck="false" name="attr_subtype" data-i18n-placeholder="gang_type"/>
              </div>
              <div class="cohort-condition flex">
                <label><span class="cohort-condition-name uppercase" data-i18n="weak"></span>
                  <input class="tooth stresstooth" type="checkbox" name="attr_weak" value="1"/><span></span>
                </label>
                <label><span class="cohort-condition-name uppercase" data-i18n="impaired"></span>
                  <input class="tooth stresstooth" type="checkbox" name="attr_impaired" value="1"/><span></span>
                </label>
                <label><span class="cohort-condition-name uppercase" data-i18n="broken"></span>
                  <input class="tooth stresstooth" type="checkbox" name="attr_broken" value="1"/><span></span>
                </label>
                <label><span class="cohort-condition-name label" data-i18n="armor"></span>
                  <input class="tooth stresstooth" type="checkbox" name="attr_armor" value="1"/><span></span>
                </label>
              </div>
              <label class="cohort-edgeflaw"><span class="uppercase" data-i18n="edges"></span>
                <div class="auto-expand"><span name="attr_edges"></span>
                  <textarea spellcheck="false" name="attr_edges"></textarea>
                </div>
              </label>
              <label class="cohort-edgeflaw"><span class="uppercase" data-i18n="flaws"></span>
                <div class="auto-expand"><span name="attr_flaws"></span>
                  <textarea spellcheck="false" name="attr_flaws"></textarea>
                </div>
              </label>
              <textarea class="cohort-description" spellcheck="false" name="attr_description"></textarea>
            </div>
          </fieldset>
        </div>
        <div class="contacts">
          <div class="specialheader label flex">
            <input class="inherit" type="text" spellcheck="false" name="attr_contacts_title" value="Contacts"/>
          </div>
          <div class="greyholder">
            <fieldset class="repeating_contact">
              <div class="friend-contact contact flex">
                <input class="friendstate" type="hidden" name="attr_check" value="0"/>
                <label>
                  <input class="checkbox" type="checkbox" name="attr_check" value="1"/><span></span>
                </label>
                <div class="auto-expand"><span name="attr_name"></span>
                  <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="contact_name"></textarea>
                </div>
              </div>
              <input class="expand" type="checkbox" value="1"/><span></span>
              <textarea class="description" spellcheck="false" name="attr_description" data-i18n-placeholder="notes"></textarea>
            </fieldset>
          </div>
        </div>
        <button class="fortunebutton borderbutton" type="roll" name="roll_Fortune_crew" value="&{template:blades} {{charname=@{character_name}}} {{type=fortune}} {{subtitle=^{roll}}} {{title-fortune=1}} {{title=^{fortune}}} @{numberofdice} {{notes=@{notes_query}}} {{charimage=@{chat_image}}} @{title_text}" data-i18n="roll_fortune"></button>
      </div>
      <div class="clocks sheet-2col free-repcontrol">
        <div class="specialheader label" data-i18n="clocks"></div>
        <fieldset class="repeating_crewclock">
          <input class="size" type="hidden" name="attr_size" value=""/>
          <div class="auto-expand smallcaps"><span name="attr_name"></span>
            <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="clock_name"></textarea>
          </div>
          <button class="broadcast-button" type="roll" name="roll_Show" value="&amp;{template:bitd-broadcast}{{charname=@{character_name}}} {{title=@{name}}} {{clock=1}} {{clocksize=@{size}}} {{clockprogress=@{progress}}} {{charimage=@{chat_image}}}" data-i18n-title="send_details_to_chat">:</button>
          <div class="size-choice">
            <label class="text-button">
              <input type="radio" name="attr_size" value="4"/><span>4</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="6"/><span>6</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="8"/><span>8</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="10"/><span>10</span>
            </label>
            <label class="text-button">
              <input type="radio" name="attr_size" value="12"/><span>12</span>
            </label>
          </div>
          <div class="clock-container">
            <div class="spoke-0 all"></div>
            <div class="spoke-30 sheet-12clock"></div>
            <div class="spoke-45 sheet-8clock"></div>
            <div class="spoke-36 sheet-10clock"></div>
            <div class="spoke-60 sheet-6clock sheet-12clock"></div>
            <div class="spoke-72 sheet-10clock"></div>
            <div class="spoke-90 sheet-4clock sheet-8clock sheet-12clock"></div>
            <div class="spoke-108 sheet-10clock"></div>
            <div class="spoke-120 sheet-6clock sheet-12clock"></div>
            <div class="spoke-135 sheet-8clock"></div>
            <div class="spoke-144 sheet-10clock"></div>
            <div class="spoke-150 sheet-12clock"></div>
            <input class="zero input-progress" type="radio" name="attr_progress" value="0" checked="checked"/><span></span>
            <input class="input-progress all" type="radio" name="attr_progress" value="1"/>
            <input class="input-progress all" type="radio" name="attr_progress" value="2"/>
            <input class="input-progress all" type="radio" name="attr_progress" value="3"/>
            <input class="input-progress all" type="radio" name="attr_progress" value="4"/>
            <input class="input-progress sheet-6clock sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="5"/>
            <input class="input-progress sheet-6clock sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="6"/>
            <input class="input-progress sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="7"/>
            <input class="input-progress sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="8"/>
            <input class="input-progress sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="9"/>
            <input class="input-progress sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="10"/>
            <input class="input-progress sheet-12clock" type="radio" name="attr_progress" value="11"/>
            <input class="input-progress sheet-12clock" type="radio" name="attr_progress" value="12"/>
            <div class="clock"></div>
          </div>
        </fieldset>
      </div>
      <textarea class="notes sheet-2col small-margin" spellcheck="false" name="attr_crew_notes" data-i18n-placeholder="notes"></textarea>
    </div>
  </div>
  <div class="type-faction grid">
    <div class="factiontitle flex sheet-2col">
      <input class="label" type="text" spellcheck="false" name="attr_factions_title" value="Factions of Doskvol"/>
      <input class="hider" type="hidden" name="attr_show_faction_generatebutton" value="1"/>
      <label class="generatebutton">
        <input type="checkbox" name="attr_generate_factions" value="1"/><span data-i18n="generate_factions"></span>
      </label>
      <button class="fortunebutton borderbutton" type="roll" name="roll_Fortune_faction" value="&{template:blades} {{charname=@{character_name}}} {{type=fortune}} {{title-fortune=1}} {{title=^{fortune}}} {{short=short}} {{charname=}} @{numberofdice} {{notes=@{notes_query}}} {{charimage=@{chat_image}}} @{title_text}" data-i18n="roll_fortune"></button>
    </div>
    <div class="factions sheet-2col grid free-repcontrol">
          <div class="sheet-2row">
            <div class="factions-header flex uppercase">
              <input class="faction-name label" type="text" spellcheck="false" name="attr_factions1_header" value="Underworld"/><span class="faction-tier" data-i18n="tier"></span><span class="faction-hold" data-i18n="hold"></span><span class="faction-status" data-i18n="status"></span>
            </div>
            <fieldset class="repeating_factions1">
              <div class="faction">
                <input class="expand" type="checkbox" name="attr_expand" value="1"/><span></span>
                <input class="faction-name" type="text" spellcheck="false" name="attr_name"/>
                <input class="faction-tier" type="text" spellcheck="false" name="attr_tier"/>
                <input class="faction-hold" type="text" spellcheck="false" name="attr_hold"/>
                <input class="faction-status" type="number" name="attr_status"/>
                <textarea spellcheck="false" name="attr_notes" data-i18n-placeholder="faction_notes"></textarea>
              </div>
            </fieldset>
          </div>
          <div class="sheet-2row">
            <div class="factions-header flex uppercase">
              <input class="faction-name label" type="text" spellcheck="false" name="attr_factions2_header" value="Institutions"/><span class="faction-tier" data-i18n="tier"></span><span class="faction-hold" data-i18n="hold"></span><span class="faction-status" data-i18n="status"></span>
            </div>
            <fieldset class="repeating_factions2">
              <div class="faction">
                <input class="expand" type="checkbox" name="attr_expand" value="1"/><span></span>
                <input class="faction-name" type="text" spellcheck="false" name="attr_name"/>
                <input class="faction-tier" type="text" spellcheck="false" name="attr_tier"/>
                <input class="faction-hold" type="text" spellcheck="false" name="attr_hold"/>
                <input class="faction-status" type="number" name="attr_status"/>
                <textarea spellcheck="false" name="attr_notes" data-i18n-placeholder="faction_notes"></textarea>
              </div>
            </fieldset>
          </div>
          <div>
            <div class="factions-header flex uppercase">
              <input class="faction-name label" type="text" spellcheck="false" name="attr_factions3_header" value="Labor &amp; Trade"/><span class="faction-tier" data-i18n="tier"></span><span class="faction-hold" data-i18n="hold"></span><span class="faction-status" data-i18n="status"></span>
            </div>
            <fieldset class="repeating_factions3">
              <div class="faction">
                <input class="expand" type="checkbox" name="attr_expand" value="1"/><span></span>
                <input class="faction-name" type="text" spellcheck="false" name="attr_name"/>
                <input class="faction-tier" type="text" spellcheck="false" name="attr_tier"/>
                <input class="faction-hold" type="text" spellcheck="false" name="attr_hold"/>
                <input class="faction-status" type="number" name="attr_status"/>
                <textarea spellcheck="false" name="attr_notes" data-i18n-placeholder="faction_notes"></textarea>
              </div>
            </fieldset>
          </div>
          <div>
            <div class="factions-header flex uppercase">
              <input class="faction-name label" type="text" spellcheck="false" name="attr_factions5_header" value="Citizenry"/><span class="faction-tier" data-i18n="tier"></span><span class="faction-hold" data-i18n="hold"></span><span class="faction-status" data-i18n="status"></span>
            </div>
            <fieldset class="repeating_factions5">
              <div class="faction">
                <input class="expand" type="checkbox" name="attr_expand" value="1"/><span></span>
                <input class="faction-name" type="text" spellcheck="false" name="attr_name"/>
                <input class="faction-tier" type="text" spellcheck="false" name="attr_tier"/>
                <input class="faction-hold" type="text" spellcheck="false" name="attr_hold"/>
                <input class="faction-status" type="number" name="attr_status"/>
                <textarea spellcheck="false" name="attr_notes" data-i18n-placeholder="faction_notes"></textarea>
              </div>
            </fieldset>
          </div>
          <div>
            <div class="factions-header flex uppercase">
              <input class="faction-name label" type="text" spellcheck="false" name="attr_factions4_header" value="The Fringe"/><span class="faction-tier" data-i18n="tier"></span><span class="faction-hold" data-i18n="hold"></span><span class="faction-status" data-i18n="status"></span>
            </div>
            <fieldset class="repeating_factions4">
              <div class="faction">
                <input class="expand" type="checkbox" name="attr_expand" value="1"/><span></span>
                <input class="faction-name" type="text" spellcheck="false" name="attr_name"/>
                <input class="faction-tier" type="text" spellcheck="false" name="attr_tier"/>
                <input class="faction-hold" type="text" spellcheck="false" name="attr_hold"/>
                <input class="faction-status" type="number" name="attr_status"/>
                <textarea spellcheck="false" name="attr_notes" data-i18n-placeholder="faction_notes"></textarea>
              </div>
            </fieldset>
          </div>
      <div class="warblurb">
        <div class="label" data-i18n="war"></div>
        <ul>
          <li class="nondot" data-i18n="warblurb1"></li>
          <li data-i18n="warblurb2"></li>
          <li data-i18n="warblurb3"></li>
          <li data-i18n="warblurb4"></li>
          <li data-i18n="warblurb5"></li>
        </ul>
      </div>
    </div>
    <div class="clocks free-repcontrol">
      <div class="specialheader label" data-i18n="clocks"></div>
      <fieldset class="repeating_factionclock">
        <input class="size" type="hidden" name="attr_size" value=""/>
        <div class="auto-expand smallcaps"><span name="attr_name"></span>
          <textarea spellcheck="false" name="attr_name" data-i18n-placeholder="clock_name"></textarea>
        </div>
        <button class="broadcast-button" type="roll" name="roll_Show" value="&amp;{template:bitd-broadcast}{{charname=@{character_name}}} {{title=@{name}}} {{clock=1}} {{clocksize=@{size}}} {{clockprogress=@{progress}}} {{charimage=@{chat_image}}}" data-i18n-title="send_details_to_chat">:</button>
        <div class="size-choice">
          <label class="text-button">
            <input type="radio" name="attr_size" value="4"/><span>4</span>
          </label>
          <label class="text-button">
            <input type="radio" name="attr_size" value="6"/><span>6</span>
          </label>
          <label class="text-button">
            <input type="radio" name="attr_size" value="8"/><span>8</span>
          </label>
          <label class="text-button">
            <input type="radio" name="attr_size" value="10"/><span>10</span>
          </label>
          <label class="text-button">
            <input type="radio" name="attr_size" value="12"/><span>12</span>
          </label>
        </div>
        <div class="clock-container">
          <div class="spoke-0 all"></div>
          <div class="spoke-30 sheet-12clock"></div>
          <div class="spoke-45 sheet-8clock"></div>
          <div class="spoke-36 sheet-10clock"></div>
          <div class="spoke-60 sheet-6clock sheet-12clock"></div>
          <div class="spoke-72 sheet-10clock"></div>
          <div class="spoke-90 sheet-4clock sheet-8clock sheet-12clock"></div>
          <div class="spoke-108 sheet-10clock"></div>
          <div class="spoke-120 sheet-6clock sheet-12clock"></div>
          <div class="spoke-135 sheet-8clock"></div>
          <div class="spoke-144 sheet-10clock"></div>
          <div class="spoke-150 sheet-12clock"></div>
          <input class="zero input-progress" type="radio" name="attr_progress" value="0" checked="checked"/><span></span>
          <input class="input-progress all" type="radio" name="attr_progress" value="1"/>
          <input class="input-progress all" type="radio" name="attr_progress" value="2"/>
          <input class="input-progress all" type="radio" name="attr_progress" value="3"/>
          <input class="input-progress all" type="radio" name="attr_progress" value="4"/>
          <input class="input-progress sheet-6clock sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="5"/>
          <input class="input-progress sheet-6clock sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="6"/>
          <input class="input-progress sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="7"/>
          <input class="input-progress sheet-8clock sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="8"/>
          <input class="input-progress sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="9"/>
          <input class="input-progress sheet-10clock sheet-12clock" type="radio" name="attr_progress" value="10"/>
          <input class="input-progress sheet-12clock" type="radio" name="attr_progress" value="11"/>
          <input class="input-progress sheet-12clock" type="radio" name="attr_progress" value="12"/>
          <div class="clock"></div>
        </div>
      </fieldset>
    </div>
    <textarea class="notes" spellcheck="false" name="attr_faction_notes" data-i18n-placeholder="notes"></textarea>
  </div>
</div>
<rolltemplate class="sheet-rolltemplate-blades">
  <div class="holder {{type}} {{short}} {{language}}">{{#charimage}}
    <div class="char-image">[Image]({{charimage}})</div>{{/charimage}}
    <div class="header{{#charimage}} narrow{{/charimage}}">{{charname}} {{subtitle}}</div>
    <div class="title">{{#title-text}}<span class="{{small-title}}">{{title}}</span>{{/title-text}}{{^title-text}}{{#rolltypetext}}[{{rolltypetext}}]({{rolltypeimage}}){{/rolltypetext}}{{#title-insight}}<img data-i18n-alt="insight" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-insight.png"/>{{/title-insight}}{{#title-prowess}}<img data-i18n-alt="prowess" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-prowess.png"/>{{/title-prowess}}{{#title-resolve}}<img data-i18n-alt="resolve" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-resolve.png"/>{{/title-resolve}}{{#title-hunt}}<img data-i18n-alt="hunt" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-hunt.png"/>{{/title-hunt}}{{#title-study}}<img data-i18n-alt="study" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-study.png"/>{{/title-study}}{{#title-survey}}<img data-i18n-alt="survey" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-survey.png"/>{{/title-survey}}{{#title-tinker}}<img data-i18n-alt="tinker" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-tinker.png"/>{{/title-tinker}}{{#title-finesse}}<img data-i18n-alt="finesse" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-finesse.png"/>{{/title-finesse}}{{#title-prowl}}<img data-i18n-alt="prowl" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-prowl.png"/>{{/title-prowl}}{{#title-skirmish}}<img data-i18n-alt="skirmish" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-skirmish.png"/>{{/title-skirmish}}{{#title-wreck}}<img data-i18n-alt="wreck" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-wreck.png"/>{{/title-wreck}}{{#title-attune}}<img data-i18n-alt="attune" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-attune.png"/>{{/title-attune}}{{#title-command}}<img data-i18n-alt="command" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-command.png"/>{{/title-command}}{{#title-consort}}<img data-i18n-alt="consort" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-consort.png"/>{{/title-consort}}{{#title-sway}}<img data-i18n-alt="sway" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-sway.png"/>{{/title-sway}}{{#title-fortune}}<img data-i18n-alt="fortune" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-fortune.png"/>{{/title-fortune}}{{#title-vice}}<img data-i18n-alt="vice" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-vice.png"/>{{/title-vice}}{{#title-crew_tier}}<img data-i18n-alt="crew_tier" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-crew_tier.png"/>{{/title-crew_tier}}{{#title-entanglement}}<img data-i18n-alt="entanglement" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-entanglement.png"/>{{/title-entanglement}}{{#title-cohort_quality}}<img data-i18n-alt="cohort_quality" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-cohort_quality.png"/>{{/title-cohort_quality}}{{#title-lifestyle}}<img data-i18n-alt="lifestyle" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-lifestyle.png"/>{{/title-lifestyle}}{{#title-recovery}}<img data-i18n-alt="recovery" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-recovery.png"/>{{/title-recovery}}{{#title-engagement}}<img data-i18n-alt="engagement" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-engagement.png"/>{{/title-engagement}}{{/title-text}}
    </div>
    <div class="dice">{{^zerodice}}{{dice}}{{/zerodice}}{{#zerodice}}
      <div class="zerodice1">{{zerodice}}</div>
      <div class="zerodice2" data-i18n="zerodice"></div>{{/zerodice}}
    </div>{{#position}}
    <div class="position">{{position}}</div>{{/position}}{{#effect}}
    <div class="effect">{{effect}}</div>{{/effect}}{{#instructions}}
    <div class="instructions">{{instructions}}</div>{{/instructions}}{{#notes}}
    <div class="notes">{{notes}}</div>{{/notes}}
  </div>
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-bitd-broadcast">
  <div class="{{#korean}}korean{{/korean}}">{{#charimage}}{{^clock}}
    <div class="char-image">[Image]({{charimage}})</div>{{/clock}}{{/charimage}}
    <div class="header{{#charimage}}{{^clock}} narrow{{/clock}}{{/charimage}}">
      <div>{{charname}}</div>
      <div>{{type}}</div>
    </div>{{#content}}
    <div class="title">{{title}}</div>
    <div class="content">{{content}}</div>{{/content}}{{#clock}}
    <div class="flex">
      <div class="clock size-{{clocksize}} progress-{{clockprogress}}">
        <div class="spoke-0"></div>
        <div class="spoke-30"></div>
        <div class="spoke-36"></div>
        <div class="spoke-45"></div>
        <div class="spoke-60"></div>
        <div class="spoke-72"></div>
        <div class="spoke-90"></div>
        <div class="spoke-108"></div>
        <div class="spoke-135"></div>
        <div class="spoke-144"></div>
        <div class="spoke-120"></div>
        <div class="spoke-150"></div>
      </div>
      <div class="title">{{title}}</div>
    </div>{{/clock}}{{#harm}}{{#title-text}}
    <div class="title" data-i18n="harm"></div>{{/title-text}}{{^title-text}}
    <div class="title"><img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Blades%20in%20the%20Dark/Assets/rolltemplate/rolltemplate-title-harm.png"/></div>{{/title-text}}
    <table class="harm">
      <tr>
        <td>3</td>
        <td>
          <div class="harm-inner">{{harm3}}</div>
        </td>
        <td data-i18n="need_help"></td>
      </tr>
      <tr>
        <td>2</td>
        <td>{{#harm2_1}}
          <div class="harm-inner">{{harm2_1}}</div>{{/harm2_1}}{{#harm2_2}}
          <div class="harm-inner">{{harm2_2}}</div>{{/harm2_2}}
        </td>
        <td data-i18n="minus1d"></td>
      </tr>
      <tr>
        <td>1</td>
        <td>{{#harm1_1}}
          <div class="harm-inner">{{harm1_1}}</div>{{/harm1_1}}{{#harm1_2}}
          <div class="harm-inner">{{harm1_2}}</div>{{/harm1_2}}
        </td>
        <td data-i18n="less_effect"></td>
      </tr>
    </table>{{/harm}}
  </div>
</rolltemplate>
<script type="text/worker">(function () {
/* global on, setAttrs, getAttrs, getSectionIDs, getTranslationByKey,
  getTranslationLanguage, generateRowID, removeRepeatingRow */
(function () {
  "use strict";
  /* FUNCTIONS */
  function dataSetup() {
    Object.keys(crewData).forEach(crew => {
      const base = crewData[crew].base,
        translatedBaseAttributes = [
          ...[...Array(16).keys()].slice(1).map(i => `claim_${i}_name`),
          ...[...Array(16).keys()].slice(1).map(i => `claim_${i}_desc`),
          "cohort1_description",
          "cohort1_name",
          "cohort1_subtype",
          "crew_description",
          "crew_xp_condition",
          "hunting_grounds_type",
          "hunting_grounds_description",
          "upgrade_carriage_name",
          "upgrade_boat_name"
        ];
      Object.keys(base).forEach(attr => {
        if (translatedBaseAttributes.includes(attr)) {
          base[attr] = getTranslationByKey(base[attr]);
        }
      });
      crewData[crew].contact = [...Array(6).keys()].map(i => ({
        name: getTranslationByKey(`crew_${crew}_contact_${i}`)
      }));
      crewData[crew].crewability = crewData[crew].crewability.map(name => ({
        name: getTranslationByKey(`crew_ability_${name}`),
        description: getTranslationByKey(`crew_ability_${name}_description`)
      }));
      crewData[crew].upgrade.forEach(upgrade => {
        upgrade.name = getTranslationByKey(upgrade.name);
        upgrade.boxes_chosen = "1";
      });
    });
    itemData.forEach(item => {
      item.boxes_chosen = "1";
      item.name = getTranslationByKey(item.name);
      item.description = getTranslationByKey(item.description);
    });
    Object.keys(translatedDefaults).forEach(k => {
      translatedDefaults[k] = getTranslationByKey(translatedDefaults[k]);
    });
    Object.assign(defaultValues, translatedDefaults);
    Object.keys(factionsData).forEach(x => {
      factionsData[x].forEach(faction => {
        faction.name = getTranslationByKey(faction.name);
      });
    });
    alchemicalData.forEach((v, k) => {
      alchemicalData[k] = {
        name: getTranslationByKey(v)
      };
    });
    Object.keys(playbookData).forEach(playbook => {
      const base = playbookData[playbook].base,
        translatedBaseAttributes = [
          "char_cohort_name",
          "char_cohort_subtype",
          "friends_title",
          "gatherinfo1",
          "gatherinfo2",
          "gatherinfo3",
          "gatherinfo4",
          "gatherinfo5",
          "gatherinfo6",
          "playbook_description",
          "setting_stress_label",
          "setting_trauma_label",
          "special_abilities_title",
          "xp_condition",
          "xp_condition2",
          "xp_condition3"
        ];
      Object.keys(base).forEach(attr => {
        if (translatedBaseAttributes.includes(attr)) {
          base[attr] = getTranslationByKey(base[attr]);
        }
      });
      if (!["ghost", "hull"].includes(playbook)) {
        playbookData[playbook].friend = [...Array(5).keys()]
          .map(i => ({
            name: getTranslationByKey(`playbook_${playbook}_friend_${i}`)
          }))
          .filter(o => o.name);
      } else playbookData[playbook].friend = [];
      playbookData[playbook].ability = playbookData[playbook].ability
        .map(name => ({
          name: getTranslationByKey(`playbook_ability_${name}`),
          description:
            getTranslationByKey(`playbook_ability_${name}_description`)
        }));
      if (spiritPlaybooks.includes(playbook)) {
        playbookData[playbook].ability[0].check = "1";
      }
      playbookData[playbook].playbookitem.forEach(item => {
        item.name = getTranslationByKey(item.name);
        item.boxes_chosen = "1";
      });
    });
    const playbookAbilityMap = new Map([
      ...Object.values(playbookData).map(x => x.ability).reduce((m, v) => {
        v.forEach(a => m.add(a));
        return m;
      }, new Set())].map(x => {
      return [x.name.toLowerCase(), x.description];
    }));
    const crewAbilityMap = new Map([
      ...Object.values(crewData).map(x => x.crewability).reduce((m, v) => {
        v.forEach(a => m.add(a));
        return m;
      }, new Set())].map(x => {
      return [x.name.toLowerCase(), x.description];
    }));
    [
      crewData, playbookData, factionsData, actionData, traumaData, itemData,
      translatedDefaults, defaultValues, spiritPlaybooks, alchemicalData,
    ].forEach(x => Object.freeze(x));
    return [playbookAbilityMap, crewAbilityMap];
  }
  function mySetAttrs(attrs, options, callback) {
    const finalAttrs = Object.keys(attrs).reduce((m, k) => {
      m[k] = `${attrs[k]}`;
      return m;
    }, {});
    if (options && !("silent" in options)) {
      options.silent = true;
    }
    setAttrs(finalAttrs, options, callback);
  }
  function setAttr(name, value) {
    getAttrs([name], v => {
      const setting = {};
      if (v[name] !== `${value}`) setting[name] = `${value}`;
      setAttrs(setting);
    });
  }
  function fillRepeatingSectionFromData(
    sectionName, dataList, autogen, callback) {
    callback = callback || (() => {});
    getSectionIDs(`repeating_${sectionName}`, idList => {
      const existingRowAttributes = [
        ...idList.map(id => `repeating_${sectionName}_${id}_name`),
        ...idList.map(id => `repeating_${sectionName}_${id}_autogen`)
      ];
      getAttrs(existingRowAttributes, v => {
        /* Delete auto-generated rows */
        if (autogen) {
          idList = idList.filter(id => {
            if (v[`repeating_${sectionName}_${id}_autogen`]) {
              removeRepeatingRow(`repeating_${sectionName}_${id}`);
              return false;
            } else return true;
          });
        }
        const existingRowNames = idList
          .map(id => v[`repeating_${sectionName}_${id}_name`]);
        const createdIDs = [];
        const setting = dataList.filter(o => !existingRowNames.includes(o.name))
          .map(o => {
            let rowID;
            while (!rowID) {
              let newID = generateRowID();
              if (!createdIDs.includes(newID)) {
                rowID = newID;
                createdIDs.push(rowID);
              }
            }
            const newAttrs = {};
            if (autogen) {
              newAttrs[`repeating_${sectionName}_${rowID}_autogen`] = "1";
            }
            return Object.keys(o).reduce((m, key) => {
              m[`repeating_${sectionName}_${rowID}_${key}`] = o[key];
              return m;
            }, newAttrs);
          })
          .reduce((m, o) => Object.assign(m, o), {});
        mySetAttrs(setting, {}, callback);
      });
    });
  }
  function diceMagic(num) {
    if (num > 0) {
      return `dice=${
        [...Array(num).keys()].map(() => "[[d6]]").join("&" + "#44" + "; ")
      }`;
    } else {
      return "zerodice=[[d6]]&" + "#44" + "; [[d6]]";
    }
  }
  function buildRollFormula(base) {
    return ` {{?{@{bonusdice}|${
      [0, 1, 2, 3, 4, 5, 6, -1, -2, -3]
        .map(n => `${n},${diceMagic(n + (parseInt(base) || 0))}`).join("|")
    }}}}`;
  }
  function buildNumdiceFormula() {
    return ` {{?{${getTranslationByKey("numberofdice")}|${
      [0, 1, 2, 3, 4, 5, 6].map(n => `${n},${diceMagic(n)}`).join("|")
    }}}}`;
  }
  function emptyFirstRowIfUnnamed(sectionName) {
    getSectionIDs(`repeating_${sectionName}`, idList => {
      const id = idList[0];
      getAttrs([`repeating_${sectionName}_${id}_name`], v => {
        if (!v[`repeating_${sectionName}_${id}_name`]) {
          removeRepeatingRow(`repeating_${sectionName}_${id}`);
        }
      });
    });
  }
  function handleBoxesFill(name, upToFour) {
    on(`change:${name}1 change:${name}2 change:${name}3 change:${name}4`,
      event => {
        if (event.sourceType !== "player") return;
        getAttrs([event.sourceAttribute], v => {
          const rName = event.sourceAttribute.slice(0, -1),
            setting = {};
          if (`${v[event.sourceAttribute]}` === "1") {
            switch (event.sourceAttribute.slice(-1)) {
            case "4":
              setting[`${rName}3`] = 1;
              /* falls through */
            case "3":
              setting[`${rName}2`] = 1;
              /* falls through */
            case "2":
              setting[`${rName}1`] = 1;
            }
          }
          if (`${v[event.sourceAttribute]}` === "0") {
            switch (event.sourceAttribute.slice(-1)) {
            case "1":
              setting[`${rName}2`] = 0;
              /* falls through */
            case "2":
              setting[`${rName}3`] = 0;
              /* falls through */
            case "3":
              if (upToFour) setting[`${rName}4`] = 0;
            }
          }
          mySetAttrs(setting);
        });
      });
  }
  function calculateResistance(attrName) {
    getAttrs([...actionData[attrName], `setting_resbonus_${attrName}`], v => {
      const total = actionData[attrName].map(x => v[x])
        .reduce((s, c) => s + (`${c}` === "0" ? 0 : 1), 0);
      mySetAttrs({
        [attrName]:
          total,
        [`${attrName}_formula`]:
          buildRollFormula(total + parseInt(v[`setting_resbonus_${attrName}`])),
      });
    });
  }
  function calculateVice () {
    getAttrs(Object.keys(actionData), v => {
      const total = Math.min(...Object.keys(v).map(x => parseInt(v[x]) || 0));
      setAttr("vice_formula", buildRollFormula(total));
    });
  }
  function calculateTrauma(event) {
    getAttrs([
      "setting_traumata_set",
      ...traumaDataFlat.map(x => `trauma_${x}`)
    ], v => {
      const traumaType = v.setting_traumata_set === "0" ? "normal"
        : v.setting_traumata_set;
      if (traumaData[traumaType] && event.sourceType === "player") {
        const newTrauma = traumaData[traumaType]
          .reduce((m, name) => m + (parseInt(v[`trauma_${name}`]) || 0), 0);
        setAttr("trauma", newTrauma);
      }
    });
  }
  function calculateStashFormula() {
    getAttrs(["stash"], v => {
      setAttr("stash_formula", buildRollFormula(
        Math.floor(parseInt(v.stash) / 10)));
    });
  }
  function calculateWantedFormula() {
    getAttrs(["wanted"], v => {
      setAttr("wanted_formula", buildRollFormula(v.wanted));
    });
  }
  function calculateCohortDice(prefixes) {
    const sourceAttrs = [
      "crew_tier",
      ...prefixes.map(p => `${p}_impaired`),
      ...prefixes.map(p => `${p}_type`),
      ...prefixes.map(p => `${p}_roll_formula`),
    ];
    getAttrs(sourceAttrs, v => {
      const setting = {};
      prefixes.forEach(prefix => {
        const formula = buildRollFormula(
          (parseInt(v.crew_tier) || 0) -
          (parseInt(v[`${prefix}_impaired`]) || 0) +
          (["elite", "expert"].includes(v[`${prefix}_type`]) ? 1 : 0));
        if (formula !== v[`${prefix}_roll_formula`]) {
          setting[`${prefix}_roll_formula`] = formula;
        }
      });
      setAttrs(setting);
    });
  }
  function calculateCharCohortDice() {
    getAttrs(["char_cohort_quality", "char_cohort_impaired"], v => {
      const dice = (parseInt(v.char_cohort_quality) || 0) -
        (parseInt(v.char_cohort_impaired) || 0);
      setAttr("char_cohort_roll_formula", buildRollFormula(dice));
    });
  }
  function cleanChatImage(event) {
    const RE = /^(https:\/\/s3\.amazonaws\.com\/files\.d20\.io\/images\/.*)\/(?:med|max|original|thumb)\.(jpg|png)\?\d+$/;
    const match = (event.newValue || "").match(RE);
    if (match) setAttr("chat_image", `${match[1]}/thumb.${match[2]}`);
  }
  function handlePlaybookFill(event) {
    getAttrs([
      "playbook",
      "crew_type",
      "changed_attributes",
      "setting_autofill",
      ...watchedAttributes
    ], v => {
      const changedAttributes = (v.changed_attributes || "").split(",");
      const sourceName = translatedNames[
        (event.sourceAttribute === "crew_type" ? v.crew_type : v.playbook)
          .toLowerCase()];
      const fillBaseData = (data, defaultAttrNames) => {
        if (data) {
          const finalSettings = defaultAttrNames
            .filter(name => !changedAttributes.includes(name))
            // do not reset attributes which have been changed by the user
            .filter(name => !spiritPlaybooks.includes(sourceName) ||
              !actionsFlat.includes(name))
            // do not reset action dots if changing to a spirit playbook
            .filter(name => v[name] !== (defaultValues[name] || ""))
            // do not set attributes if current value is equal to sheet defaults
            .reduce((m, name) => {
              m[name] = defaultValues[name] || "";
              return m;
            }, {});
          Object.keys(data).filter(name => !changedAttributes.includes(name))
            .forEach(name => (finalSettings[name] = data[name]));
          mySetAttrs(finalSettings);
        }
      };
      if (event.sourceAttribute === "crew_type" ? v.crew_type : v.playbook) {
        setAttr("show_playbook_reminder", "0");
      }
      if (v.setting_autofill !== "1") return;
      if (event.sourceAttribute === "crew_type" && sourceName in crewData) {
        fillRepeatingSectionFromData("contact",
          crewData[sourceName].contact, true);
        fillRepeatingSectionFromData("crewability",
          crewData[sourceName].crewability, true);
        fillRepeatingSectionFromData("upgrade",
          crewData[sourceName].upgrade, true);
        fillBaseData(crewData[sourceName].base, crewAttributes);
      }
      if (event.sourceAttribute === "playbook" && sourceName in playbookData) {
        fillRepeatingSectionFromData("friend",
          playbookData[sourceName].friend, true);
        fillRepeatingSectionFromData("ability",
          playbookData[sourceName].ability, true);
        fillRepeatingSectionFromData("playbookitem",
          playbookData[sourceName].playbookitem, true);
        fillBaseData(playbookData[sourceName].base, playbookAttributes);
        if (sourceName === "leech" || sourceName === "zindiq") {
          fillRepeatingSectionFromData("alchemical", alchemicalData);
        }
      }
    });
  }
  function fillAbility(prefix, abilityMap) {
    getAttrs([`${prefix}_name`, `${prefix}_description`], v => {
      if (!v[`${prefix}_description`]) {
        const description = abilityMap.get((v[`${prefix}_name`] || "")
          .toLowerCase());
        if (description) setAttr(`${prefix}_description`, description);
      }
    });
  }
  function handleAutoExpandWhitespace(name) {
    on(`change:${name}`, event => {
      const attrName = name.replace(":", "_");
      getAttrs([attrName], v => {
        if (v[attrName].trim() !== v[attrName] &&
          event.sourceType === "player") {
          setAttr(attrName, v[attrName].trim());
        }
      });
    });
  }
  function handleCohortVerb(prefix) {
    const eventString = `change:${prefix}${
      (prefix === "repeating_cohort") ? ":" : "_"}type`;
    on(eventString, event => {
      const verb = (event.newValue === "expert") ?
        "^{rolls_their}" : "^{roll_their}";
      setAttr(`${prefix}_verb`, verb);
    });
  }
  function handleConsequenceQuery() {
    getAttrs(["setting_consequence_query"], v => {
      const consequenceQuery = (`${v.setting_consequence_query}` === "1") ?
        `?{${getTranslationByKey("consequence")}|${
          getTranslationByKey("a_consequence")}}` : "^{a_consequence}";
      setAttr("consequence_query", consequenceQuery);
    });
  }
  function handlePseudoRadio(name) {
    on(`change:${name}`, event => {
      if (`${event.newValue}` === "0" && event.sourceType === "player") {
        setAttr(name, (parseInt(event.previousValue) || 1) - 1);
      }
      setAttr(`${name}_formula`, buildRollFormula(event.newValue || "0"));
    });
  }
  function handleRepeatingGenerateButton(sectionName) {
    on(`change:generate_${sectionName}`, () => {
      getAttrs([
        "generate_source_character",
        "generate_source_crew",
        "sheet_type"
      ], v => {
        const data = (v.sheet_type === "character") ? playbookData : crewData,
          genSource = v[`generate_source_${v.sheet_type}`];
        if (genSource in data) {
          emptyFirstRowIfUnnamed(sectionName);
          fillRepeatingSectionFromData(sectionName,
            data[genSource][sectionName]);
        }
      });
    });
  }
  function handleSheetInit() {
    getAttrs(["sheet_type", "crew_type", "playbook"], v => {
      /* Make sure sheet_type is never 0 */
      if (!["crew", "faction"].includes(v.sheet_type)) {
        setAttr("sheet_type", "character");
      }
      /* Remove reminder box if we have playbook or crew name */
      if (v.playbook || v.crew_type) setAttr("show_playbook_reminder", "0");
    });
    /* Setup and upgrades */
    getAttrs(["version"], v => {
      const addVersion = (object, version) => {
        object.version = version;
        object.character_sheet = `Blades in the Dark v${version}`;
      };
      const upgradeSheet = version => {
        const versionMajor = version && parseInt(version.split(".")[0]),
          versionMinor = version && parseInt(version.split(".")[1]);
        console.log(`Found version ${version}.`);
        if (version !== sheetVersion) console.log("Performing sheet upgrade.");
        // Upgrade to 3.6: recalculate all formulas
        if (versionMajor === 3 && versionMinor < 6) {
          const setting = {};
          addVersion(setting, "3.6");
          recalculateDiceFormulas();
          mySetAttrs(setting, {}, () => upgradeSheet("3.6"));
        }
        // Fall back to upgrading to the newest version.
        else {
          const setting = {};
          addVersion(setting, sheetVersion);
          mySetAttrs(setting);
        }
      };
      const initialiseSheet = () => {
        const setting = [
          "ability",
          "friend",
          "crewability",
          "contact",
          "playbookitem",
          "upgrade",
          "framefeature"
        ].reduce((memo, sectionName) => {
          memo[`repeating_${sectionName}_${generateRowID()}_autogen`] = 1;
          return memo;
        }, {});
        addVersion(setting, sheetVersion);
        /* Set translated default values */
        getAttrs(Object.keys(translatedDefaults), v => {
          Object.keys(translatedDefaults).forEach(k => {
            if (v[k] !== translatedDefaults[k]) {
              setting[k] = translatedDefaults[k];
            }
          });
          mySetAttrs(setting);
          console.log("Initialising new sheet.");
        });
        fillRepeatingSectionFromData("item", itemData);
      };
      if (v.version) upgradeSheet(v.version);
      else initialiseSheet();
    });
  }
  function recalculateDiceFormulas() {
    getSectionIDs("repeating_cohort", idArray => {
      calculateCohortDice(
        [...idArray.map(id => `repeating_cohort_${id}`), "cohort1"]);
    });
    getAttrs([
      ...actionsFlat,
      "crew_tier",
      "char_cohort_quality",
      "char_cohort_impaired",
      "setting_show_cohort"
    ], v => {
      [...actionsFlat, "crew_tier"]
        .forEach(name => setAttr(`${name}_formula`,
          buildRollFormula(v[name])));
      if (v.setting_show_cohort === "1") {
        const dice = (parseInt(v.char_cohort_quality) || 0) -
          (parseInt(v.char_cohort_impaired) || 0);
        setAttr("char_cohort_roll_formula", buildRollFormula(dice));
      }
    });
    Object.keys(actionData).forEach(calculateResistance);
    calculateVice();
    calculateStashFormula();
    calculateWantedFormula();
  }
  function resetItems() {
    const clearChecks = sectionName => {
      getSectionIDs(`repeating_${sectionName}`, idArray => {
        const setting = [
          ...idArray.map(id => `repeating_${sectionName}_${id}_check_1`),
          ...idArray.map(id => `repeating_${sectionName}_${id}_check_2`),
          ...idArray.map(id => `repeating_${sectionName}_${id}_check_3`)
        ].reduce((m, name) => {
          m[name] = 0;
          return m;
        }, {});
        mySetAttrs(setting);
      });
    };
    setAttr("load", 0);
    ["item", "playbookitem"].forEach(clearChecks);
  }
  function setupTranslatedAttrs() {
    /* Set up translated attributes */
    const translatedAttrs = {
      bonusdice: getTranslationByKey("bonusdice"),
      effect_query: getTranslationByKey("effect_query"),
      notes_query: `?{${getTranslationByKey("notes")}}`,
      numberofdice: buildNumdiceFormula(),
      position_query: `?{${getTranslationByKey("position")}|${
        getTranslationByKey("risky")},position=${
        getTranslationByKey("risky")}|${
        getTranslationByKey("controlled")},position=${
        getTranslationByKey("controlled")}|${
        getTranslationByKey("desperate")},position=${
        getTranslationByKey("desperate")}|${
        getTranslationByKey("fortune_roll")},short=short}`,
      title_text: "",
    };
    getAttrs([
      ...Object.keys(translatedAttrs),
      "setting_usekirsty",
      "setting_custom_actions",
    ], v => {
      const lang = getTranslationLanguage();
      const kirsty = v.setting_usekirsty === "1" ? " {{kirsty=1}}" : "";
      let hasTitleText = v.setting_custom_actions === "1";
      let languageSuffix = "";
      if (["fr", "es", "ko", "pt"].includes(lang)) {
        hasTitleText = true;
        languageSuffix = `{{language=i18n-${lang}}} `;
      }
      translatedAttrs.title_text =
        `${hasTitleText ? "{{title-text=1}} " : ""}${languageSuffix}${kirsty}`;
      const setting = {};
      Object.keys(translatedAttrs).forEach(name => {
        if (v[name] !== translatedAttrs[name]) {
          setting[name] = translatedAttrs[name];
        }
      });
      mySetAttrs(setting);
    });
  }
  function updateChangedAttrs(event) {
    if (event.sourceType === "player") {
      getAttrs(["changed_attributes"], v => {
        const changedAttributes = [
          ...new Set(v.changed_attributes.split(","))
            .add(event.sourceAttribute)
        ].filter(x => !!x).join(",");
        setAttr("changed_attributes", changedAttributes);
      });
    }
  }
  function watchAutogen(sectionName) {
    on(`change:repeating_${sectionName}`, event => {
      getAttrs([`repeating_${sectionName}_autogen`], v => {
        if (v[`repeating_${sectionName}_autogen`] &&
          event.sourceType === "player") {
          setAttr(`repeating_${sectionName}_autogen`, "");
        }
      });
    });
  }
  function handleDarkTalentChange(attribute) {
    getAttrs([
      `setting_dark_talent_${attribute}`,
      `setting_resbonus_${attribute}`
    ], v => {
      const resistanceBonus =
        (parseInt(v[`setting_resbonus_${attribute}`]) || 0) +
        ((`${v[`setting_dark_talent_${attribute}`]}` === "1") ? 1 : -1);
      setAttr(`setting_resbonus_${attribute}`, resistanceBonus);
    });
  }
  function generateFactions() {
    setAttr("show_faction_generatebutton", "0");
    Object.keys(factionsData).forEach(sectionName => {
      fillRepeatingSectionFromData(sectionName, factionsData[sectionName]);
    });
  }
  function setRollMods() {
    getAttrs(["setting_custom_actions"], v => {
      function getRollMods(prefix) {
        if (v.setting_custom_actions == "0") {
          return "";
        } else {
          return `{{title=@{${prefix}_label}}}`;
        }
      }
      const setting = {};
      Object.keys(actionData).forEach(attribute => {
        setting[`${attribute}_roll_mods`] = getRollMods(attribute);
        actionData[attribute].forEach(action => {
          setting[`${action}_roll_mods`] = getRollMods(action);
        });
      });
      mySetAttrs(setting);
    });
  }
  /* DATA */
  const sheetVersion = "3.9";
  const crewData = {
    assassins: {
      base: {
        claim_1_desc: "claim_training_rooms_description",
        claim_1_name: "claim_training_rooms",
        claim_2_desc: "claim_vice_den_description",
        claim_2_name: "claim_vice_den",
        claim_3_desc: "claim_fixer_description",
        claim_3_name: "claim_fixer",
        claim_4_desc: "claim_informants_description",
        claim_4_name: "claim_informants",
        claim_5_desc: "claim_hagfish_farm_description",
        claim_5_name: "claim_hagfish_farm",
        claim_6_desc: "claim_victim_trophies_description",
        claim_6_name: "claim_victim_trophies",
        claim_7_name: "claim_turf",
        claim_9_name: "claim_turf",
        claim_10_desc: "claim_cover_operation_description",
        claim_10_name: "claim_cover_operation",
        claim_11_desc: "claim_protection_racket_description",
        claim_11_name: "claim_protection_racket",
        claim_12_desc: "claim_infirmary_description",
        claim_12_name: "claim_infirmary",
        claim_13_desc: "claim_envoy_description",
        claim_13_name: "claim_envoy",
        claim_14_desc: "claim_cover_identities_description",
        claim_14_name: "claim_cover_identities",
        claim_15_desc: "claim_city_records_description",
        claim_15_name: "claim_city_records",
        claim_bridge_2_3: 0,
        claim_bridge_3_4: 0,
        claim_bridge_6_7: 0,
        claim_bridge_9_14: 0,
        claim_bridge_12_13: 0,
        claim_bridge_13_14: 0,
        crew_description: "crew_assassins_description",
        crew_xp_condition: "crew_assassins_xp_condition",
        hunting_grounds_type: "crew_assassins_hunting_grounds_type",
        hunting_grounds_description: "crew_assassins_hunting_grounds_description",
        upgrade_insight_check_1: "1",
        upgrade_prowess_check_1: "1"
      },
      crewability: ["deadly", "crow's_veil", "emberdeath", "no_traces", "patron", "predators", "vipers", "veteran"],
      upgrade: [{
        name: "crew_upgrade_hardened",
        numboxes: "3"
      }, {
        name: "crew_upgrade_assassin_rigging",
        numboxes: "1"
      }, {
        name: "crew_upgrade_ironhook_contacts",
        numboxes: "1"
      }, {
        name: "crew_upgrade_elite_skulks",
        numboxes: "1"
      }, {
        name: "crew_upgrade_elite_thugs",
        numboxes: "1",
      }]
    },
    bravos: {
      base: {
        claim_1_desc: "claim_barracks_description",
        claim_1_name: "claim_barracks",
        claim_2_name: "claim_turf",
        claim_3_desc: "claim_terrorized_citizens_description",
        claim_3_name: "claim_terrorized_citizens",
        claim_4_desc: "claim_informants_description",
        claim_4_name: "claim_informants",
        claim_5_desc: "claim_protection_racket_description",
        claim_5_name: "claim_protection_racket",
        claim_6_desc: "claim_fighting_pits_description",
        claim_6_name: "claim_fighting_pits",
        claim_7_name: "claim_turf",
        claim_9_name: "claim_turf",
        claim_10_name: "claim_turf",
        claim_11_desc: "claim_infirmary_description",
        claim_11_name: "claim_infirmary",
        claim_12_desc: "claim_bluecoat_intimidation_description",
        claim_12_name: "claim_bluecoat_intimidation",
        claim_13_desc: "claim_street_fence_description",
        claim_13_name: "claim_street_fence",
        claim_14_desc: "claim_warehouses_description",
        claim_14_name: "claim_warehouses",
        claim_15_desc: "claim_bluecoat_confederates_description",
        claim_15_name: "claim_bluecoat_confederates",
        claim_bridge_3_4: 0,
        claim_bridge_2_7: 0,
        claim_bridge_12_13: 0,
        cohort1_subtype: "thugs",
        crew_description: "crew_bravos_description",
        crew_xp_condition: "crew_bravos_xp_condition",
        hunting_grounds_type: "crew_bravos_hunting_grounds_type",
        hunting_grounds_description: "crew_bravos_hunting_grounds_description",
        upgrade_prowess_check_1: "1"
      },
      crewability: ["dangerous", "blood_brothers", "door_kickers", "fiends", "forged_in_the_fire", "patron", "war_dogs", "veteran"],
      upgrade: [{
        name: "crew_upgrade_hardened",
        numboxes: "3"
      }, {
        name: "crew_upgrade_bravos_rigging",
        numboxes: "1"
      }, {
        name: "crew_upgrade_ironhook_contacts",
        numboxes: "1"
      }, {
        name: "crew_upgrade_elite_rovers",
        numboxes: "1"
      }, {
        name: "crew_upgrade_elite_thugs",
        numboxes: "1",
      }]
    },
    cult: {
      base: {
        claim_1_desc: "claim_cloister_description",
        claim_1_name: "claim_cloister",
        claim_2_desc: "claim_vice_den_description",
        claim_2_name: "claim_vice_den",
        claim_3_desc: "claim_offertory_description",
        claim_3_name: "claim_offertory",
        claim_4_desc: "claim_ancient_obelisk_description",
        claim_4_name: "claim_ancient_obelisk",
        claim_5_desc: "claim_ancient_tower_description",
        claim_5_name: "claim_ancient_tower",
        claim_6_name: "claim_turf",
        claim_7_name: "claim_turf",
        claim_9_name: "claim_turf",
        claim_10_name: "claim_turf",
        claim_11_desc: "claim_spirit_well_description",
        claim_11_name: "claim_spirit_well",
        claim_12_desc: "claim_ancient_gate_description",
        claim_12_name: "claim_ancient_gate",
        claim_13_desc: "claim_sanctuary_description",
        claim_13_name: "claim_sanctuary",
        claim_14_desc: "claim_sacred_nexus_description",
        claim_14_name: "claim_sacred_nexus",
        claim_15_desc: "claim_ancient_altar_description",
        claim_15_name: "claim_ancient_altar",
        claim_bridge_3_4: 0,
        claim_bridge_4_9: 0,
        claim_bridge_6_11: 0,
        claim_bridge_12_13: 0,
        claim_bridge_13_14: 0,
        cohort1_subtype: "adepts",
        crew_description: "crew_cult_description",
        crew_xp_condition: "crew_cult_xp_condition",
        hunting_grounds_type: "crew_cult_hunting_grounds_type",
        hunting_grounds_description: "crew_cult_hunting_grounds_description",
        setting_show_deity: "1",
        upgrade_resolve_check_1: "1"
      },
      crewability: ["chosen", "anointed", "bound_in_darkness", "conviction", "glory_incarnate", "sealed_in_blood", "zealotry", "veteran"],
      upgrade: [{
        name: "crew_upgrade_ordained",
        numboxes: "3"
      }, {
        name: "crew_upgrade_cult_rigging",
        numboxes: "1"
      }, {
        name: "crew_upgrade_ritual_sanctum_in_lair",
        numboxes: "1"
      }, {
        name: "crew_upgrade_elite_adepts",
        numboxes: "1"
      }, {
        name: "crew_upgrade_elite_thugs",
        numboxes: "1",
      }]
    },
    hawkers: {
      base: {
        claim_1_name: "claim_turf",
        claim_2_desc: "claim_personal_clothier_description",
        claim_2_name: "claim_personal_clothier",
        claim_3_desc: "claim_local_graft_description",
        claim_3_name: "claim_local_graft",
        claim_4_desc: "claim_lookouts_description",
        claim_4_name: "claim_lookouts",
        claim_5_desc: "claim_informants_description",
        claim_5_name: "claim_informants",
        claim_6_name: "claim_turf",
        claim_7_name: "claim_turf",
        claim_9_name: "claim_turf",
        claim_10_desc: "claim_luxury_venue_description",
        claim_10_name: "claim_luxury_venue",
        claim_11_desc: "claim_foreign_market_description",
        claim_11_name: "claim_foreign_market",
        claim_12_desc: "claim_vice_den_description",
        claim_12_name: "claim_vice_den",
        claim_13_desc: "claim_surplus_caches_description",
        claim_13_name: "claim_surplus_caches",
        claim_14_desc: "claim_cover_operation_description",
        claim_14_name: "claim_cover_operation",
        claim_15_desc: "claim_cover_identities_description",
        claim_15_name: "claim_cover_identities",
        claim_bridge_2_3: 0,
        claim_bridge_3_4: 0,
        claim_bridge_6_7: 0,
        claim_bridge_10_15: 0,
        claim_bridge_12_13: 0,
        claim_bridge_13_14: 0,
        crew_description: "crew_hawkers_description",
        crew_xp_condition: "crew_hawkers_xp_condition",
        hunting_grounds_type: "crew_hawkers_hunting_grounds_type",
        hunting_grounds_description: "crew_hawkers_hunting_grounds_description",
        upgrade_secure_check_1: "1",
        upgrade_resolve_check_1: "1"
      },
      crewability: ["silver_tongues", "accord", "the_good_stuff", "ghost_market", "high_society", "hooked", "patron", "veteran"],
      upgrade: [{
        name: "crew_upgrade_composed",
        numboxes: "3"
      }, {
        name: "crew_upgrade_hawker's_rigging",
        numboxes: "1"
      }, {
        name: "crew_upgrade_ironhook_contacts",
        numboxes: "1"
      }, {
        name: "crew_upgrade_elite_rooks",
        numboxes: "1"
      }, {
        name: "crew_upgrade_elite_thugs",
        numboxes: "1",
      }]
    },
    shadows: {
      base: {
        claim_1_desc: "claim_interrogation_chamber_description",
        claim_1_name: "claim_interrogation_chamber",
        claim_2_name: "claim_turf",
        claim_3_desc: "claim_loyal_fence_description",
        claim_3_name: "claim_loyal_fence",
        claim_4_desc: "claim_gambling_den_description",
        claim_4_name: "claim_gambling_den",
        claim_5_desc: "claim_tavern_description",
        claim_5_name: "claim_tavern",
        claim_6_desc: "claim_drug_den_description",
        claim_6_name: "claim_drug_den",
        claim_7_desc: "claim_informants_description",
        claim_7_name: "claim_informants",
        claim_9_name: "claim_turf",
        claim_10_desc: "claim_lookouts_description",
        claim_10_name: "claim_lookouts",
        claim_11_desc: "claim_hagfish_farm_description",
        claim_11_name: "claim_hagfish_farm",
        claim_12_desc: "claim_infirmary_description",
        claim_12_name: "claim_infirmary",
        claim_13_desc: "claim_covert_drops_description",
        claim_13_name: "claim_covert_drops",
        claim_14_name: "claim_turf",
        claim_15_desc: "claim_secret_pathways_description",
        claim_15_name: "claim_secret_pathways",
        claim_bridge_3_4: 0,
        claim_bridge_2_7: 0,
        claim_bridge_9_14: 0,
        claim_bridge_12_13: 0,
        crew_description: "crew_shadows_description",
        crew_xp_condition: "crew_shadows_xp_condition",
        hunting_grounds_type: "crew_shadows_hunting_grounds_type",
        hunting_grounds_description: "crew_shadows_hunting_grounds_description",
        upgrade_hidden_check_1: "1",
        upgrade_prowess_check_1: "1"
      },
      crewability: ["everyone_steals", "ghost_echoes", "pack_rats", "patron", "second_story", "slippery", "synchronized", "veteran"],
      upgrade: [{
        name: "crew_upgrade_steady",
        numboxes: "3"
      }, {
        name: "crew_upgrade_thief_rigging",
        numboxes: "1"
      }, {
        name: "crew_upgrade_underground_maps_&_passkeys",
        numboxes: "1"
      }, {
        name: "crew_upgrade_elite_rooks",
        numboxes: "1"
      }, {
        name: "crew_upgrade_elite_skulks",
        numboxes: "1",
      }]
    },
    smugglers: {
      base: {
        claim_1_name: "claim_turf",
        claim_2_desc: "claim_side_business_description",
        claim_2_name: "claim_side_business",
        claim_3_desc: "claim_luxury_fence_description",
        claim_3_name: "claim_luxury_fence",
        claim_4_desc: "claim_vice_den_description",
        claim_4_name: "claim_vice_den",
        claim_5_desc: "claim_tavern_description",
        claim_5_name: "claim_tavern",
        claim_6_desc: "claim_ancient_gate_description",
        claim_6_name: "claim_ancient_gate",
        claim_7_name: "claim_turf",
        claim_9_name: "claim_turf",
        claim_10_name: "claim_turf",
        claim_11_desc: "claim_secret_routes_description",
        claim_11_name: "claim_secret_routes",
        claim_12_desc: "claim_informants_description",
        claim_12_name: "claim_informants",
        claim_13_desc: "claim_fleet_description",
        claim_13_name: "claim_fleet",
        claim_14_desc: "claim_cover_operation_description",
        claim_14_name: "claim_cover_operation",
        claim_15_desc: "claim_warehouse_description",
        claim_15_name: "claim_warehouse",
        claim_bridge_2_3: 0,
        claim_bridge_3_4: 0,
        claim_bridge_6_7: 0,
        claim_bridge_12_13: 0,
        claim_bridge_13_14: 0,
        cohort1_description: "vehicle_edges_flaws",
        cohort1_name: "vehicle",
        cohort1_subtype: "boat_carriage_other",
        cohort1_type: "expert",
        crew_description: "crew_smugglers_description",
        crew_xp_condition: "crew_smugglers_xp_condition",
        hunting_grounds_type: "crew_smugglers_hunting_grounds_type",
        hunting_grounds_description: "crew_smugglers_hunting_grounds_description",
        upgrade_carriage_check_1: "1",
        upgrade_carriage_name: "vehicle",
        upgrade_boat_name: "vehicle",
        upgrade_prowess_check_1: "1"
      },
      crewability: ["like_part_of_the_family", "all_hands", "ghost_passage", "just_passing_through", "leverage", "reavers", "renegades", "veteran"],
      upgrade: [{
        name: "crew_upgrade_steady",
        numboxes: "3"
      }, {
        name: "crew_upgrade_smuggler's_rigging",
        numboxes: "1"
      }, {
        name: "crew_upgrade_camouflage",
        numboxes: "1"
      }, {
        name: "crew_upgrade_elite_rovers",
        numboxes: "1"
      }, {
        name: "crew_upgrade_barge",
        numboxes: "1",
      }]
    },
    vigilantes: {
      base: {
        claim_1_desc: "claim_fierce_allies_description",
        claim_1_name: "claim_fierce_allies",
        claim_2_desc: "claim_local_heroes_description",
        claim_2_name: "claim_local_heroes",
        claim_3_desc: "claim_publicity_description",
        claim_3_name: "claim_publicity",
        claim_4_desc: "claim_hidden_paths_description",
        claim_4_name: "claim_hidden_paths",
        claim_5_desc: "claim_catacombs_description",
        claim_5_name: "claim_catacombs",
        claim_6_desc: "claim_defiant_citizens_description",
        claim_6_name: "claim_defiant_citizens",
        claim_7_name: "claim_turf",
        claim_9_name: "claim_turf",
        claim_10_desc: "claim_infirmary_description",
        claim_10_name: "claim_infirmary",
        claim_11_desc: "claim_above_the_law_description",
        claim_11_name: "claim_above_the_law",
        claim_12_desc: "claim_bluecoat_confidants_description",
        claim_12_name: "claim_bluecoat_confidants",
        claim_13_desc: "claim_lookouts_description",
        claim_13_name: "claim_lookouts",
        claim_14_desc: "claim_the_hookup_description",
        claim_14_name: "claim_the_hookup",
        claim_15_desc: "claim_doskvol's_most_wanted_description",
        claim_15_name: "claim_doskvol's_most_wanted",
        claim_bridge_2_3: 0,
        claim_bridge_3_4: 0,
        claim_bridge_6_11: 0,
        claim_bridge_10_15: 0,
        claim_bridge_12_13: 0,
        claim_bridge_13_14: 0,
        cohort1_type: "expert",
        crew_description: "crew_vigilantes_description",
        crew_xp_condition: "crew_vigilantes_xp_condition",
        hunting_grounds_type: "crew_vigilantes_hunting_grounds_type",
        hunting_grounds_description: "crew_vigilantes_hunting_grounds_description",
        setting_show_origin: "1",
        upgrade_resolve_check_1: "1"
      },
      crewability: ["as_good_as_your_word", "avengers", "thorn_in_your_side", "misdirection", "uncanny_preparation", "moral_compass", "favors", "roots", "veteran"],
      upgrade: [{
        name: "crew_upgrade_unbroken",
        numboxes: "3"
      }, {
        name: "crew_upgrade_vigilantes_attire",
        numboxes: "1"
      }, {
        name: "crew_upgrade_dedicated_crafters",
        numboxes: "1",
      }, {
        name: "crew_upgrade_irregulars",
        numboxes: "1"
      }, {
        name: "crew_upgrade_willing_to_fight",
        numboxes: "1"
      }]
    }
  };
  const playbookData = {
    cutter: {
      ability: ["battleborn", "bodyguard", "ghost_fighter", "leader", "mule", "not_to_be_trifled_with", "savage", "vigorous", "veteran"],
      base: {
        command: "1",
        friends_title: "playbook_cutter_friends_title",
        gatherinfo1: "gatherinfo_how_can_I_hurt",
        gatherinfo2: "gatherinfo_whos_most_afraid",
        gatherinfo3: "gatherinfo_whos_most_dangerous",
        gatherinfo4: "gatherinfo_what_do_they_intend",
        gatherinfo5: "gatherinfo_how_can_I_get_them",
        gatherinfo6: "gatherinfo_are_they_telling",
        playbook_description: "playbook_cutter_description",
        skirmish: "2",
        xp_condition: "playbook_cutter_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_hand_weapon",
        numboxes: "1"
      }, {
        bold: "1",
        name: "playbook_item_fine_heavy_weapon",
        numboxes: "2"
      }, {
        name: "playbook_item_scary_weapon_or_tool",
        numboxes: "1"
      }, {
        name: "playbook_item_manacles_&_chain",
        numboxes: "0"
      }, {
        name: "playbook_item_rage_essence_vial",
        numboxes: "0"
      }, {
        name: "playbook_item_spiritbane_charm",
        numboxes: "0"
      }]
    },
    faris: {
      ability: ["leader", "ambitious", "battleborn", "expertise", "ghost_legion", "the_tiger's_fury", "vigorous", "veteran"],
      base: {
        char_cohort_name: "playbook_item_entourage",
        char_cohort_quality: "0",
        char_cohort_type: "gang",
        char_cohort_subtype: "thugs",
        command: "2",
        friends_title: "playbook_faris_friends_title",
        gatherinfo1: "gatherinfo_are_they_telling",
        gatherinfo2: "gatherinfo_how_can_I_get_them",
        gatherinfo3: "gatherinfo_what_do_they_really",
        gatherinfo4: "gatherinfo_what_should_I_look",
        gatherinfo5: "gatherinfo_where_they_vulnerable",
        gatherinfo6: "gatherinfo_whos_most_afraid",
        playbook_description: "playbook_faris_description",
        setting_show_cohort: "1",
        skirmish: "1",
        xp_condition: "playbook_faris_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_heavy_weapon",
        numboxes: "2"
      }, {
        bold: "1",
        name: "playbook_item_fine_pair_of_pistols",
        numboxes: "1"
      }, {
        bold: "1",
        name: "playbook_item_fine_uniform",
        numboxes: "0"
      }, {
        name: "playbook_item_a_cane-sword",
        numboxes: "1"
      }, {
        name: "playbook_item_entourage",
        numboxes: "0"
      }, {
        name: "playbook_item_spiritbane_charm",
        numboxes: "0"
      }]
    },
    forger: {
      ability: ["artificer", "analyst", "connected", "ghost_in_the_machine", "a_little_something_on_the_side", "machinist", "saboteur", "strange_methods", "veteran"],
      base: {
        friends_title: "playbook_forger_friends_title",
        gatherinfo1: "gatherinfo_how_can_I_get_them",
        gatherinfo2: "gatherinfo_what_are_they_really",
        gatherinfo3: "gatherinfo_what_can_I_tinker",
        gatherinfo4: "gatherinfo_what_do_they_intend",
        gatherinfo5: "gatherinfo_what_do_they_want",
        gatherinfo6: "gatherinfo_what_is_hidden",
        playbook_description: "playbook_forger_description",
        study: "1",
        tinker: "2",
        xp_condition: "playbook_forger_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_tinkering_tools",
        numboxes: "1"
      }, {
        name: "playbook_item_electroplasm_vials",
        numboxes: "0"
      }, {
        name: "playbook_item_forged_documents",
        numboxes: "0"
      }, {
        name: "playbook_item_protective_suit",
        numboxes: "1"
      }, {
        name: "playbook_item_silence_potion_vial",
        numboxes: "0"
      }, {
        name: "playbook_item_gadget",
        numboxes: "1"
      }]
    },
    ghost: {
      ability: ["ghost_form", "dissipate", "manifest", "poltergeist", "possess", "veteran"],
      base: {
        friends_title: "playbook_ghost_friends_title",
        gatherinfo1: "gatherinfo_what_do_they_intend",
        gatherinfo2: "gatherinfo_how_can_I_get_them",
        gatherinfo3: "gatherinfo_what_are_they_really",
        gatherinfo4: "gatherinfo_what_should_I_look",
        gatherinfo5: "gatherinfo_wheres_the_weakness",
        gatherinfo6: "gatherinfo_how_can_I_find",
        playbook_description: "playbook_ghost_description",
        setting_stress_label: "drain",
        setting_trauma_label: "gloom",
        setting_traumata_set: "ghost",
        setting_vice_type: "ghost",
        special_abilities_title: "ghost_traits",
        xp_condition: "playbook_ghost_xp_condition",
        xp_condition2: "playbook_ghost_xp_condition2",
        xp_condition3: "playbook_ghost_xp_condition3"
      },
      playbookitem: []
    },
    hound: {
      ability: ["sharpshooter", "focused", "ghost_hunter", "scout", "survivor", "tough_as_nails", "vengeful", "veteran"],
      base: {
        char_cohort_name: "hunting_pet",
        char_cohort_subtype: "hunter",
        friends_title: "playbook_hound_friends_title",
        gatherinfo1: "gatherinfo_what_do_they_intend",
        gatherinfo2: "gatherinfo_how_can_I_get_them",
        gatherinfo3: "gatherinfo_what_are_they_really",
        gatherinfo4: "gatherinfo_where_they_vulnerable",
        gatherinfo5: "gatherinfo_where_did_x_go",
        gatherinfo6: "gatherinfo_how_can_I_find",
        hunt: "2",
        playbook_description: "playbook_hound_description",
        setting_show_cohort: "1",
        survey: "1",
        xp_condition: "playbook_hound_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_pair_of_pistols",
        numboxes: "1"
      }, {
        bold: "1",
        name: "playbook_item_fine_long_rifle",
        numboxes: "2"
      }, {
        name: "playbook_item_electroplasmic_ammunition",
        numboxes: "1"
      }, {
        name: "playbook_item_a_trained_hunting_pet",
        numboxes: "0"
      }, {
        name: "playbook_item_spyglass",
        numboxes: "1"
      }, {
        name: "playbook_item_spiritbane_charm",
        numboxes: "0"
      }]
    },
    hull: {
      ability: ["automaton", "overcharge", "compartments", "electroplasmic_projectors", "interface", "secondary_hull", "frame_upgrade"],
      base: {
        gatherinfo1: "gatherinfo_what_do_they_intend",
        gatherinfo2: "gatherinfo_how_can_I_get_them",
        gatherinfo3: "gatherinfo_what_are_they_really",
        gatherinfo4: "gatherinfo_what_should_I_look",
        gatherinfo5: "gatherinfo_wheres_the_weakness",
        gatherinfo6: "gatherinfo_how_can_I_find",
        playbook_description: "playbook_hull_description",
        setting_load_h: "7",
        setting_extra_stress: "1",
        setting_show_frame: "1",
        setting_stress_label: "drain",
        setting_trauma_label: "wear",
        setting_traumata_set: "hull",
        setting_vice_type: "hull",
        special_abilities_title: "hull_traits",
        xp_condition: "playbook_hull_xp_condition",
        xp_condition2: "playbook_hull_xp_condition2",
        xp_condition3: "playbook_hull_xp_condition3"
      },
      playbookitem: []
    },
    janissary: {
      ability: ["bodyguard", "ghost_fighter", "mule", "physicker", "security", "sending_a_message", "strategic_retreat", "tough_as_nails", "veteran"],
      base: {
        friends_title: "playbook_janissary_friends_title",
        gatherinfo1: "gatherinfo_how_can_I_find",
        gatherinfo2: "gatherinfo_what_are_they_really",
        gatherinfo3: "gatherinfo_what_do_they_intend",
        gatherinfo4: "gatherinfo_what_should_I_look",
        gatherinfo5: "gatherinfo_whats_the_best_way",
        gatherinfo6: "gatherinfo_whos_most_dangerous",
        playbook_description: "playbook_janissary_description",
        skirmish: "1",
        survey: "2",
        xp_condition: "playbook_janissary_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_hand_weapon",
        numboxes: "1"
      }, {
        bold: "1",
        name: "playbook_item_fine_long_rifle",
        numboxes: "2"
      }, {
        name: "playbook_item_electroplasmic_ammunition",
        numboxes: "1"
      }, {
        name: "playbook_item_manacles_&_chain",
        numboxes: "0"
      }, {
        name: "playbook_item_spiritbane_charm",
        numboxes: "0"
      }, {
        name: "playbook_item_spyglass",
        numboxes: "1"
      }]
    },
    leech: {
      ability: ["alchemist", "analyst", "artificer", "fortitude", "ghost_ward", "physicker", "saboteur", "venomous", "veteran"],
      base: {
        friends_title: "playbook_leech_friends_title",
        gatherinfo1: "gatherinfo_what_do_they_intend",
        gatherinfo2: "gatherinfo_how_can_I_get_them",
        gatherinfo3: "gatherinfo_are_they_telling",
        gatherinfo4: "gatherinfo_what_can_I_tinker",
        gatherinfo5: "gatherinfo_what_might_happen",
        gatherinfo6: "gatherinfo_how_can_I_find",
        playbook_description: "playbook_leech_description",
        setting_show_bandolier: "1",
        tinker: "2",
        wreck: "1",
        xp_condition: "playbook_leech_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_tinkering_tools",
        numboxes: "1"
      }, {
        bold: "1",
        name: "playbook_item_fine_wrecking_tools",
        numboxes: "2"
      }, {
        name: "playbook_item_blowgun_&_darts,_syringes",
        numboxes: "0"
      }, {
        name: "playbook_item_bandolier_of_alchemicals_(3)",
        numboxes: "1"
      }, {
        name: "playbook_item_bandolier_of_alchemicals_(3)",
        numboxes: "1"
      }, {
        name: "playbook_item_gadget",
        numboxes: "1"
      }]
    },
    lurk: {
      ability: ["infiltrator", "ambush", "daredevil", "the_devil's_footsteps", "expertise", "ghost_veil", "reflexes", "shadow", "veteran"],
      base: {
        friends_title: "playbook_lurk_friends_title",
        finesse: "1",
        gatherinfo1: "gatherinfo_what_do_they_intend",
        gatherinfo2: "gatherinfo_how_can_I_get_them",
        gatherinfo3: "gatherinfo_what_should_I_look",
        gatherinfo4: "gatherinfo_whats_the_best_way",
        gatherinfo5: "gatherinfo_where_can_I_hide",
        gatherinfo6: "gatherinfo_how_can_I_find",
        playbook_description: "playbook_lurk_description",
        prowl: "2",
        xp_condition: "playbook_lurk_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_lockpicks",
        numboxes: "0"
      }, {
        bold: "1",
        name: "playbook_item_fine_shadow_cloak",
        numboxes: "1"
      }, {
        name: "playbook_item_light_climbing_gear",
        numboxes: "1"
      }, {
        name: "playbook_item_silence_potion_vial",
        numboxes: "0"
      }, {
        name: "playbook_item_dark-sight_goggles",
        numboxes: "1"
      }, {
        name: "playbook_item_spiritbane_charm",
        numboxes: "0"
      }]
    },
    mirage: {
      ability: ["ghost_image", "cloak_&_dagger", "fortune_teller", "like_a_star", "lost_&_found", "misdirection", "practiced", "snake_charmer", "veteran"],
      base: {
        attune: "1",
        finesse: "2",
        friends_title: "playbook_mirage_friends_title",
        gatherinfo1: "gatherinfo_how_can_I_get_them",
        gatherinfo2: "gatherinfo_what_are_they_really",
        gatherinfo3: "gatherinfo_what_can_I_tinker",
        gatherinfo4: "gatherinfo_what_do_they_intend",
        gatherinfo5: "gatherinfo_what_do_they_want",
        gatherinfo6: "gatherinfo_what_is_hidden",
        playbook_description: "playbook_mirage_description",
        xp_condition: "playbook_mirage_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_cover_identity",
        numboxes: "0"
      }, {
        bold: "1",
        name: "playbook_item_fine_disguise_kit",
        numboxes: "1"
      }, {
        bold: "1",
        name: "playbook_item_fine_loaded_dice,_trick_cards",
        numboxes: "0"
      }, {
        name: "playbook_item_ghost_key",
        numboxes: "0"
      }, {
        name: "playbook_item_spiritbane_charm",
        numboxes: "0"
      }, {
        name: "playbook_item_trance_powder",
        numboxes: "0"
      }]
    },
    rafiq: {
      ability: ["eye_for_weakness", "cut-out", "functioning_vice", "ghost_friend", "hypnotic", "occultist", "trust_in_me", "veteran"],
      base: {
        char_cohort_name: "playbook_item_a_special_friend",
        consort: "2",
        friends_title: "playbook_rafiq_friends_title",
        gatherinfo1: "gatherinfo_are_they_telling",
        gatherinfo2: "gatherinfo_how_can_I_blend",
        gatherinfo3: "gatherinfo_how_can_I_get_them",
        gatherinfo4: "gatherinfo_what_are_they_really",
        gatherinfo5: "gatherinfo_what_do_they_want",
        gatherinfo6: "gatherinfo_where_they_vulnerable",
        playbook_description: "playbook_rafiq_description",
        setting_show_cohort: "1",
        sway: "1",
        xp_condition: "playbook_rafiq_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_bottle_of_whiskey",
        numboxes: "1"
      }, {
        bold: "1",
        name: "playbook_item_fine_clothes_&_jewelry",
        numboxes: "0"
      }, {
        name: "playbook_item_black_lotus_resin",
        numboxes: "0"
      }, {
        name: "playbook_item_concealed_palm_pistol",
        numboxes: "0"
      }, {
        name: "playbook_item_a_special_friend",
        numboxes: "0"
      }, {
        name: "playbook_item_spiritbane_charm",
        numboxes: "0"
      }]
    },
    rakshasa: {
      ability: ["ghoul", "ambush", "the_black_speech", "ghost_hunter", "monstrous", "scout", "subterfuge_rakshasa", "veteran"],
      base: {
        char_cohort_name: "hunting_pet",
        char_cohort_subtype: "hunter",
        friends_title: "playbook_rakshasa_friends_title",
        gatherinfo1: "gatherinfo_how_can_I_find",
        gatherinfo2: "gatherinfo_what_drives_them",
        gatherinfo3: "gatherinfo_whats_the_best_way",
        gatherinfo4: "gatherinfo_where_they_vulnerable",
        gatherinfo5: "gatherinfo_where_can_I_hide",
        gatherinfo6: "gatherinfo_where_did_x_go",
        hunt: "1",
        playbook_description: "playbook_rakshasa_description",
        prowl: "2",
        setting_show_cohort: "1",
        xp_condition: "playbook_rakshasa_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_shadow_cloak",
        numboxes: "1"
      }, {
        name: "playbook_item_dark-sight_goggles",
        numboxes: "1"
      }, {
        name: "playbook_item_light_climbing_gear",
        numboxes: "1"
      }, {
        name: "playbook_item_scary_weapon_or_tool",
        numboxes: "1"
      }, {
        name: "playbook_item_spiritbane_charm",
        numboxes: "0"
      }, {
        name: "playbook_item_a_trained_hunting_pet",
        numboxes: "0"
      }]
    },
    slide: {
      ability: ["rook's_gambit", "cloak_&_dagger", "ghost_voice", "like_looking_into_a_mirror", "a_little_something_on_the_side", "mesmerism", "subterfuge", "trust_in_me", "veteran"],
      base: {
        friends_title: "playbook_slide_friends_title",
        consort: "1",
        gatherinfo1: "gatherinfo_what_do_they_intend",
        gatherinfo2: "gatherinfo_how_can_I_get_them",
        gatherinfo3: "gatherinfo_are_they_telling",
        gatherinfo4: "gatherinfo_what_are_they_really",
        gatherinfo5: "gatherinfo_what_do_they_really",
        gatherinfo6: "gatherinfo_how_can_I_blend",
        playbook_description: "playbook_slide_description",
        sway: "2",
        xp_condition: "playbook_slide_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_clothes_&_jewelry",
        numboxes: "0"
      }, {
        bold: "1",
        name: "playbook_item_fine_disguise_kit",
        numboxes: "1"
      }, {
        bold: "1",
        name: "playbook_item_fine_loaded_dice,_trick_cards",
        numboxes: "0"
      }, {
        name: "playbook_item_trance_powder",
        numboxes: "0"
      }, {
        name: "playbook_item_a_cane-sword",
        numboxes: "1"
      }, {
        name: "playbook_item_spiritbane_charm",
        numboxes: "0"
      }]
    },
    spider: {
      ability: ["foresight", "calculating", "connected", "functioning_vice", "ghost_contract", "jail_bird", "mastermind", "weaving_the_web", "veteran"],
      base: {
        consort: "2",
        friends_title: "playbook_spider_friends_title",
        gatherinfo1: "gatherinfo_what_do_they_want",
        gatherinfo2: "gatherinfo_what_should_I_look",
        gatherinfo3: "gatherinfo_wheres_the_leverage",
        gatherinfo4: "gatherinfo_how_can_I_discover",
        gatherinfo5: "gatherinfo_what_do_they_intend",
        gatherinfo6: "gatherinfo_how_can_I_get_them",
        playbook_description: "playbook_spider_description",
        study: "1",
        xp_condition: "playbook_spider_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_cover_identity",
        numboxes: "0"
      }, {
        bold: "1",
        name: "playbook_item_fine_bottle_of_whiskey",
        numboxes: "1"
      }, {
        name: "playbook_item_blueprints",
        numboxes: "1"
      }, {
        name: "playbook_item_vial_of_slumber_essence",
        numboxes: "0"
      }, {
        name: "playbook_item_concealed_palm_pistol",
        numboxes: "0"
      }, {
        name: "playbook_item_spiritbane_charm",
        numboxes: "0"
      }]
    },
    vampire: {
      ability: ["undead", "terrible_power", "arcane_sight", "a_void_in_the_echo", "dark_talent", "sinister_guile", "veteran"],
      base: {
        friends_title: "playbook_vampire_friends_title",
        gatherinfo1: "gatherinfo_what_do_they_intend",
        gatherinfo2: "gatherinfo_how_can_I_get_them",
        gatherinfo3: "gatherinfo_what_are_they_really",
        gatherinfo4: "gatherinfo_what_should_I_look",
        gatherinfo5: "gatherinfo_wheres_the_weakness",
        gatherinfo6: "gatherinfo_how_can_I_find",
        playbook_description: "playbook_vampire_description",
        setting_extra_stress: "3",
        setting_traumata_set: "vampire",
        setting_vampirexp: "1",
        setting_show_strictures: "1",
        setting_vice_type: "vampire",
        special_abilities_title: "vampire_traits",
        trauma: "4",
        xp_condition: "playbook_vampire_xp_condition",
        xp_condition2: "playbook_vampire_xp_condition2",
        xp_condition3: "playbook_vampire_xp_condition3"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_clothes_and_accoutrements",
        numboxes: "0"
      }, {
        bold: "1",
        name: "playbook_item_fine_personal_weapon",
        numboxes: "1"
      }, {
        bold: "1",
        name: "playbook_item_fine_shadow_cloak",
        numboxes: "1"
      }, {
        name: "playbook_item_demonbane_charm",
        numboxes: "0"
      }, {
        name: "playbook_item_spiritbane_charm",
        numboxes: "0"
      }]
    },
    vizier: {
      ability: ["red_right_hand", "calculating", "compel", "ghost_mind", "like_looking_into_a_mirror", "prepared", "reflexes", "ritual", "veteran"],
      base: {
        attune: "1",
        friends_title: "playbook_vizier_friends_title",
        gatherinfo1: "gatherinfo_are_they_telling",
        gatherinfo2: "gatherinfo_how_can_I_discover",
        gatherinfo3: "gatherinfo_what_do_they_intend",
        gatherinfo4: "gatherinfo_what_might_happen",
        gatherinfo5: "gatherinfo_where_they_vulnerable",
        gatherinfo6: "gatherinfo_wheres_the_leverage",
        playbook_description: "playbook_vizier_description",
        study: "2",
        xp_condition: "playbook_vizier_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_lightning_hook",
        numboxes: "1"
      }, {
        bold: "1",
        name: "playbook_item_fine_spirit_mask",
        numboxes: "1"
      }, {
        name: "playbook_item_demonbane_charm",
        numboxes: "0"
      }, {
        name: "playbook_item_electroplasm_vials",
        numboxes: "0"
      }, {
        name: "playbook_item_spirit_bottles_(2)",
        numboxes: "1"
      }, {
        name: "playbook_item_rare_book",
        numboxes: "1"
      }]
    },
    whisper: {
      ability: ["compel", "ghost_mind", "iron_will", "occultist", "ritual", "strange_methods", "tempest", "warded", "veteran"],
      base: {
        attune: "2",
        friends_title: "playbook_whisper_friends_title",
        gatherinfo1: "gatherinfo_what_is_arcane",
        gatherinfo2: "gatherinfo_what_echoes",
        gatherinfo3: "gatherinfo_what_is_hidden",
        gatherinfo4: "gatherinfo_what_do_they_intend",
        gatherinfo5: "gatherinfo_what_drives_them",
        gatherinfo6: "gatherinfo_how_can_I_reveal",
        playbook_description: "playbook_whisper_description",
        study: "1",
        xp_condition: "playbook_whisper_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_lightning_hook",
        numboxes: "1"
      }, {
        bold: "1",
        name: "playbook_item_fine_spirit_mask",
        numboxes: "1"
      }, {
        name: "playbook_item_electroplasm_vials",
        numboxes: "0"
      }, {
        name: "playbook_item_spirit_bottles_(2)",
        numboxes: "1"
      }, {
        name: "playbook_item_ghost_key",
        numboxes: "0"
      }, {
        name: "playbook_item_demonbane_charm",
        numboxes: "0"
      }]
    },
    zindiq: {
      ability: ["driven", "alchemist", "ghost_ward", "infiltrator", "mesmerism", "pyromancer", "revolutionary", "underworld_contacts"],
      base: {
        friends_title: "playbook_zindiq_friends_title",
        gatherinfo1: "gatherinfo_how_can_I_hurt",
        gatherinfo2: "gatherinfo_how_can_I_reveal",
        gatherinfo3: "gatherinfo_what_can_I_tinker",
        gatherinfo4: "gatherinfo_what_echoes",
        gatherinfo5: "gatherinfo_what_is_arcane",
        gatherinfo6: "gatherinfo_wheres_the_weakness",
        playbook_description: "playbook_zindiq_description",
        setting_show_bandolier: "1",
        sway: "1",
        wreck: "2",
        xp_condition: "playbook_zindiq_xp_condition"
      },
      playbookitem: [{
        bold: "1",
        name: "playbook_item_fine_cover_identity",
        numboxes: "0"
      }, {
        bold: "1",
        name: "playbook_item_fine_wrecking_tools",
        numboxes: "2"
      }, {
        name: "playbook_item_bandolier_of_alchemicals_(3)",
        numboxes: "1"
      }, {
        name: "playbook_item_bandolier_of_alchemicals_(3)",
        numboxes: "1"
      }, {
        name: "playbook_item_blueprints",
        numboxes: "1"
      }, {
        name: "playbook_item_spiritbane_charm",
        numboxes: "0"
      }]
    }
  };
  const factionsData = {
    factions1: [
      {
        name: "faction_the_unseen",
        tier: "IV",
        hold: "S"
      },
      {
        name: "faction_the_hive",
        tier: "IV",
        hold: "S"
      },
      {
        name: "faction_the_circle_of_flame",
        tier: "III",
        hold: "S"
      },
      {
        name: "faction_the_silver_nails",
        tier: "III",
        hold: "S"
      },
      {
        name: "faction_lord_scurlock",
        tier: "III",
        hold: "S"
      },
      {
        name: "faction_the_crows",
        tier: "II",
        hold: "W"
      },
      {
        name: "faction_the_lampblacks",
        tier: "II",
        hold: "W"
      },
      {
        name: "faction_the_red_sashes",
        tier: "II",
        hold: "W"
      },
      {
        name: "faction_the_dimmer_sisters",
        tier: "II",
        hold: "S"
      },
      {
        name: "faction_the_grinders",
        tier: "II",
        hold: "W"
      },
      {
        name: "faction_the_billhooks",
        tier: "II",
        hold: "W"
      },
      {
        name: "faction_the_wraiths",
        tier: "II",
        hold: "W"
      },
      {
        name: "faction_the_gray_cloaks",
        tier: "II",
        hold: "S"
      },
      {
        name: "faction_ulf_ironborn",
        tier: "I",
        hold: "S"
      },
      {
        name: "faction_the_foghounds",
        tier: "I",
        hold: "W"
      },
      {
        name: "faction_the_lost",
        tier: "I",
        hold: "W"
      }
    ],
    factions2: [
      {
        name: "faction_imperial_military",
        tier: "VI",
        hold: "S"
      },
      {
        name: "faction_city_council",
        tier: "V",
        hold: "S"
      },
      {
        name: "faction_ministry_of_preservation",
        tier: "V",
        hold: "S"
      },
      {
        name: "faction_leviathan_hunters",
        tier: "V",
        hold: "S"
      },
      {
        name: "faction_ironhook_prison",
        tier: "IV",
        hold: "S"
      },
      {
        name: "faction_sparkwrights",
        tier: "IV",
        hold: "S"
      },
      {
        name: "faction_spirit_wardens",
        tier: "IV",
        hold: "S"
      },
      {
        name: "faction_bluecoats",
        tier: "III",
        hold: "S"
      },
      {
        name: "faction_inspectors",
        tier: "III",
        hold: "S"
      },
      {
        name: "faction_iruvian_consulate",
        tier: "III",
        hold: "S"
      },
      {
        name: "faction_skovlan_consulate",
        tier: "III",
        hold: "W"
      },
      {
        name: "faction_the_brigade",
        tier: "II",
        hold: "S"
      },
      {
        name: "faction_severosi_consulate",
        tier: "I",
        hold: "S"
      },
      {
        name: "faction_dagger_isles_consulate",
        tier: "I",
        hold: "S"
      }
    ],
    factions3: [
      {
        name: "faction_the_foundation",
        tier: "IV",
        hold: "S"
      },
      {
        name: "faction_dockers",
        tier: "III",
        hold: "S"
      },
      {
        name: "faction_gondoliers",
        tier: "III",
        hold: "S"
      },
      {
        name: "faction_sailors",
        tier: "III",
        hold: "W"
      },
      {
        name: "faction_laborers",
        tier: "III",
        hold: "W"
      },
      {
        name: "faction_cabbies",
        tier: "II",
        hold: "W"
      },
      {
        name: "faction_cyphers",
        tier: "II",
        hold: "S"
      },
      {
        name: "faction_ink_rakes",
        tier: "II",
        hold: "W"
      },
      {
        name: "faction_rail_jacks",
        tier: "II",
        hold: "W"
      },
      {
        name: "faction_servants",
        tier: "II",
        hold: "W"
      }
    ],
    factions4: [
      {
        name: "faction_the_church_of_ecstasy",
        tier: "IV",
        hold: "S"
      },
      {
        name: "faction_the_horde",
        tier: "III",
        hold: "S"
      },
      {
        name: "faction_the_path_of_echoes",
        tier: "III",
        hold: "S"
      },
      {
        name: "faction_the_forgotten_gods",
        tier: "III",
        hold: "W"
      },
      {
        name: "faction_the_reconciled",
        tier: "III",
        hold: "S"
      },
      {
        name: "faction_skovlander_refugees",
        tier: "III",
        hold: "W"
      },
      {
        name: "faction_the_weeping_lady",
        tier: "II",
        hold: "S"
      },
      {
        name: "faction_deathlands_scavengers",
        tier: "II",
        hold: "W"
      }
    ],
    factions5: [
      {
        name: "faction_whitecrown",
        tier: "V",
        hold: "S"
      },
      {
        name: "faction_brightstone",
        tier: "IV",
        hold: "S"
      },
      {
        name: "faction_charterhall",
        tier: "IV",
        hold: "S"
      },
      {
        name: "faction_six_towers",
        tier: "III",
        hold: "W"
      },
      {
        name: "faction_silkshore",
        tier: "II",
        hold: "S"
      },
      {
        name: "faction_nightmarket",
        tier: "II",
        hold: "S"
      },
      {
        name: "faction_crow's_foot",
        tier: "II",
        hold: "S"
      },
      {
        name: "faction_the_docks",
        tier: "II",
        hold: "S"
      },
      {
        name: "faction_barrowcleft",
        tier: "II",
        hold: "S"
      },
      {
        name: "faction_coalridge",
        tier: "II",
        hold: "W"
      },
      {
        name: "faction_charhollow",
        tier: "I",
        hold: "S"
      },
      {
        name: "faction_dunslough",
        tier: "I",
        hold: "W"
      }
    ]
  };
  const actionData = {
    insight: [
      "hunt",
      "study",
      "survey",
      "tinker"
    ],
    prowess: [
      "finesse",
      "prowl",
      "skirmish",
      "wreck"
    ],
    resolve: [
      "attune",
      "command",
      "consort",
      "sway"
    ]
  };
  const traumaData = {
    normal: ["cold", "haunted", "obsessed", "paranoid", "reckless", "soft", "unstable", "vicious"],
    ghost: ["chaotic", "destructive", "furious", "obsessive", "territorial", "savage"],
    hull: ["clanking", "leaking", "fixated", "smoking", "sparking", "unstable"],
    vampire: ["cold", "haunted", "obsessed", "paranoid", "ruthless", "secretive", "unstable", "vicious"]
  };
  const itemData = [
    {
      name: "a_blade_or_two",
      description: "a_blade_or_two_description",
      numboxes: "1"
    },
    {
      name: "throwing_knives",
      description: "throwing_knives_description",
      numboxes: "1"
    },
    {
      name: "a_pistol",
      description: "a_pistol_description",
      numboxes: "1",
      short: "1"
    },
    {
      name: "a_2nd_pistol",
      description: "a_pistol_description",
      numboxes: "1",
      short: "1"
    },
    {
      name: "a_large_weapon",
      description: "a_large_weapon_description",
      numboxes: "2"
    },
    {
      name: "an_unusual_weapon",
      description: "an_unusual_weapon_description",
      numboxes: "1"
    },
    {
      name: "armor",
      description: "armor_description",
      numboxes: "2",
      short: "1"
    },
    {
      name: "+heavy",
      description: "+heavy_description",
      numboxes: "3",
      short: "1"
    },
    {
      name: "burglary_gear",
      description: "burglary_gear_description",
      numboxes: "1"
    },
    {
      name: "climbing_gear",
      description: "climbing_gear_description",
      numboxes: "2"
    },
    {
      name: "arcane_implements",
      description: "arcane_implements_description",
      numboxes: "1"
    },
    {
      name: "documents",
      description: "documents_description",
      numboxes: "1"
    },
    {
      name: "subterfuge_supplies",
      description: "subterfuge_supplies_description",
      numboxes: "1"
    },
    {
      name: "demolition_tools",
      description: "demolition_tools_description",
      numboxes: "2"
    },
    {
      name: "tinkering_tools",
      description: "tinkering_tools_description",
      numboxes: "1"
    },
    {
      name: "lantern",
      description: "lantern_description",
      numboxes: "1"
    }
  ];
  const translatedDefaults = {
    char_cohort_name: "cohort",
    cohort1_name: "cohort",
    contacts_title: "contacts",
    factions_title: "factions_title",
    factions1_header: "factions1",
    factions2_header: "factions2",
    factions3_header: "factions3",
    factions4_header: "factions4",
    factions5_header: "factions5",
    frame: "frame",
    friends_title: "friends",
    setting_alchemicals_label: "alchemicals",
    setting_deity_label: "deity",
    setting_heat_label: "heat",
    setting_stress_label: "stress",
    setting_trauma_label: "trauma",
    setting_wanted_label: "wanted",
    special_abilities_title: "special_abilities",
    upgrade_carriage_name: "carriage",
    upgrade_carriage_description: "upgrade_carriage_description",
    upgrade_documents_name: "documents",
    upgrade_documents_description: "upgrade_documents_description",
    upgrade_boat_name: "boat",
    upgrade_boat_description: "upgrade_boat_description",
    upgrade_gear_name: "gear",
    upgrade_gear_description: "upgrade_gear_description",
    upgrade_hidden_name: "hidden",
    upgrade_hidden_description: "upgrade_hidden_description",
    upgrade_implements_name: "implements",
    upgrade_implements_description: "upgrade_implements_description",
    upgrade_quarters_name: "quarters",
    upgrade_quarters_description: "upgrade_quarters_description",
    upgrade_supplies_name: "supplies",
    upgrade_supplies_description: "upgrade_supplies_description",
    upgrade_secure_name: "secure",
    upgrade_secure_description: "upgrade_secure_description",
    upgrade_tools_name: "tools",
    upgrade_tools_description: "upgrade_tools_description",
    upgrade_vault_name: "vault",
    upgrade_vault_description: "upgrade_vault_description",
    upgrade_weapons_name: "weapons",
    upgrade_weapons_description: "upgrade_weapons_description",
    upgrade_workshop_name: "workshop",
    upgrade_workshop_description: "upgrade_workshop_description",
    upgrade_insight_name: "insight",
    upgrade_insight_description: "upgrade_insight_description",
    upgrade_prowess_name: "prowess",
    upgrade_prowess_description: "upgrade_prowess_description",
    upgrade_resolve_name: "resolve",
    upgrade_resolve_description: "upgrade_resolve_description",
    upgrade_personal_name: "personal",
    upgrade_personal_description: "upgrade_personal_description",
    upgrade_mastery_name: "mastery",
    upgrade_mastery_description: "upgrade_mastery_description",
    xp_condition2: "xp_beliefs",
    xp_condition3: "xp_vice"
  };
  const defaultValues = {
    attune: "0",
    char_cohort_quality: "1",
    char_cohort_type: "expert",
    claim_bridge_10_15: "1",
    claim_bridge_12_13: "1",
    claim_bridge_13_14: "1",
    claim_bridge_2_3: "1",
    claim_bridge_2_7: "1",
    claim_bridge_3_4: "1",
    claim_bridge_4_9: "1",
    claim_bridge_6_11: "1",
    claim_bridge_6_7: "1",
    claim_bridge_9_14: "1",
    cohort1_subtype: "",
    cohort1_type: "gang",
    command: "0",
    consort: "0",
    finesse: "0",
    hunt: "0",
    prowl: "0",
    setting_extra_stress: "0",
    setting_load_h: "6",
    setting_show_bandolier: "0",
    setting_show_cohort: "0",
    setting_show_deity: "0",
    setting_show_frame: "0",
    setting_show_origin: "0",
    setting_show_strictures: "0",
    setting_traumata_set: "normal",
    setting_vampirexp: "0",
    setting_vice_type: "normal",
    skirmish: "0",
    study: "0",
    survey: "0",
    sway: "0",
    tinker: "0",
    trauma: "0",
    upgrade_hidden_check_1: "0",
    upgrade_secure_check_1: "0",
    upgrade_insight_check_1: "0",
    upgrade_prowess_check_1: "0",
    upgrade_resolve_check_1: "0",
    upgrade_carriage_check_1: "0",
    wreck: "0"
  };
  const spiritPlaybooks = ["ghost", "hull", "vampire"];
  const alchemicalData = [
    "alcahest",
    "binding_oil",
    "drift_oil",
    "drown_powder",
    "eyeblind_poison",
    "fire_oil",
    "grenade",
    "quicksilver",
    "skullfire_poison",
    "smoke_bomb",
    "spark_drug",
    "standstill_poison",
    "trance_powder",
  ];
  /* PRE-COMPUTED CONSTANTS */
  const [playbookAbilityMap, crewAbilityMap] = dataSetup();
  const crewAttributes = [...new Set(
    [].concat(...Object.keys(crewData).map(x => Object.keys(crewData[x].base)))
  )];
  const playbookAttributes = [...new Set(
    [].concat(...Object.keys(playbookData)
      .map(x => Object.keys(playbookData[x].base)))
  )];
  const watchedAttributes =
    [...new Set(crewAttributes.concat(playbookAttributes))];
  const actionsFlat =
    [].concat(...Object.keys(actionData).map(x => actionData[x]));
  const traumaDataFlat = Object.keys(traumaData)
    .reduce((m, k) => m.concat(traumaData[k]), []);
  const autoExpandFields = [
    "repeating_ability:name",
    "repeating_ability:description",
    "repeating_crewability:name",
    "repeating_crewability:description",
    "repeating_playbookitem:name",
    "repeating_upgrade:name",
    "repeating_friend:name",
    "repeating_contact:name",
    "repeating_clock:name",
    "repeating_crewclock:name",
    "repeating_factionclock:name",
    "repeating_cohort:edges",
    "repeating_cohort:flaws",
    "repeating_alchemical:name",
    "xp_condition",
    "xp_condition_extra",
    "xp_condition2",
    "xp_condition3",
    "crew_xp_condition",
    "hunting_grounds_type",
    "hunting_grounds_description",
    "cohort1_edges",
    "cohort1_flaws",
    "heritage",
    "background",
    "vice_purveyor",
  ];
  const autogenSections = [
    "ability",
    "crewability",
    "friend",
    "contact",
    "playbookitem",
    "upgrade"
  ];
  const translatedNames = [
    ...Object.keys(playbookData),
    ...Object.keys(crewData)
  ].reduce((m, keyName) => {
    if (getTranslationByKey(keyName)) {
      m[getTranslationByKey(keyName).toLowerCase()] = keyName;
    }
    return m;
  }, {});
  /* EVENT HANDLERS */
  /* Set default fields when setting crew type or playbook */
  on("change:crew_type change:playbook", handlePlaybookFill);
  /* automatically fill abilities */
  on("change:repeating_ability:name",
    () => fillAbility("repeating_ability", playbookAbilityMap));
  on("change:repeating_crewability:name",
    () => fillAbility("repeating_crewability", crewAbilityMap));
  /* Watch repeating rows for changes and set autogen to false if it changes */
  autogenSections.forEach(watchAutogen);
  /* Watch for changes in auto-set attributes and update changed_attributes */
  on(watchedAttributes.map(x => `change:${x}`).join(" "), updateChangedAttrs);
  /* Register attribute/action event handlers */
  Object.keys(actionData).forEach(attrName => {
    on([...actionData[attrName], `setting_resbonus_${attrName}`]
      .map(x => `change:${x}`).join(" "), () => calculateResistance(attrName)
    );
    on(`change:setting_dark_talent_${attrName}`,
      () => handleDarkTalentChange(attrName));
    on(`change:${attrName}`, calculateVice);
  });
  /* Calculate stash */
  on("change:stash", calculateStashFormula);
  on("change:wanted", calculateWantedFormula);
  /* Calculate trauma */
  on("change:setting_traumata_set " +
    traumaDataFlat.map(x => `change:trauma_${x}`).join(" "), calculateTrauma);
  /* Generate buttons */
  on("change:generate_factions", generateFactions);
  autogenSections.forEach(handleRepeatingGenerateButton);
  /* Extra stress and trauma */
  on("change:setting_extra_stress", event =>
    setAttr("stress_max", 9 + (parseInt(event.newValue) || 0)));
  on("change:setting_extra_trauma", event =>
    setAttr("trauma_max", 4 + (parseInt(event.newValue) || 0)));
  /* Calculate cohort quality */
  on(
    ["crew_tier", "cohort1_impaired", "cohort1_type"]
      .map(x => `change:${x}`).join(" "),
    () => calculateCohortDice(["cohort1"]));
  on("change:repeating_cohort",
    () => calculateCohortDice(["repeating_cohort"]));
  on("change:crew_tier", () => {
    getSectionIDs("repeating_cohort",
      a => calculateCohortDice(a.map(id => `repeating_cohort_${id}`)));
  });
  on("change:char_cohort_quality change:char_cohort_impaired " +
    "change:setting_show_cohort", calculateCharCohortDice);
  /* Set correct verb for cohort roll button */
  ["char_cohort", "cohort1", "repeating_cohort"].forEach(handleCohortVerb);
  /* Left-fill checkboxes */
  handleBoxesFill("upgrade_mastery_check_", true);
  handleBoxesFill("bandolier1_check_");
  handleBoxesFill("bandolier2_check_");
  ["item", "playbookitem", "upgrade"]
    .forEach(sName => handleBoxesFill(`repeating_${sName}:check_`));
  /* Pseudo-radios */
  ["crew_tier", ...actionsFlat].forEach(handlePseudoRadio);
  /* Item reset button */
  on("change:reset_items", resetItems);
  /* Resistance query */
  on("change:setting_consequence_query sheet:opened", handleConsequenceQuery);
  /* Trim whitespace in auto-expand fields */
  autoExpandFields.forEach(handleAutoExpandWhitespace);
  /* Clean chat image URL */
  on("change:chat_image", cleanChatImage);
  /* Number of dice prompt and other translation-dependent atoms */
  on("sheet:opened change:setting_usekirsty change:setting_custom_actions",
    setupTranslatedAttrs);
  on("change:setting_custom_actions", setRollMods);
  /* INITIALISATION AND UPGRADES */
  on("sheet:opened", handleSheetInit);
})();}
)();
</script>

/* Utility Classes */
.grid-span-full {
	grid-column-start: 1;
	grid-column-end: -1
}

/* Main Sheet */
.charsheet {
        background-color: #eee;
	padding: 1em;
	font-family: Georgia, serif;
	overflow: clip;
}

.sheet-darkmode .charsheet {
	color: #e0e0e0;
	background: #2b3035 !important;
}

.sheet-darkmode img[alt="Powered By Draw Steel"] {
  filter: invert(100%);
}

.sheet-body {
	min-width:800px;
}

.sheet-body > :not(.v-spacer):not(.h-spacer) {
	background-color: #fdfdfd;
}

.sheet-darkmode .sheet-body > :not(.v-spacer):not(.h-spacer) {
background: #2b3035 !important;
  color: #e0e0e0 !important;
  border: 1px solid #5c6269 !important;
  box-shadow: inset 0 0 2px rgba(255, 255, 255, 0.05),
              0 0 4px rgba(0, 0, 0, 0.3);
}

.sheet-darkmode button[type="action"] {
  background-color: #3b4045 !important;
}

.border {
	border: 3px solid #aaa;
	border-radius: 4px;
	padding: 0.5em;
}

.border-right {
	border-right: 1px solid #aaa;
}

.v-spacer {
	height: 1em;
}

.hexagon {
  background-color: #f9f9f9;
  border: 2px solid #ccc;
  border-radius: 0.5em;
  padding: 0.5em;
  text-align: center;
  box-shadow: 0 0 4px rgba(0, 0, 0, 0.1);
}

.sheet-darkmode .hexagon {
  background-color: #3b4045;
}

.charsheet input {
	width: unset;
}
.charsheet input[type=number] {
	text-align: center;
}
.charsheet input[type=number].no-spin::-webkit-inner-spin-button,
.charsheet input[type=number].no-spin::-webkit-inner-spin-button {
	-webkit-appearance: none;
	margin: 0;
}
.charsheet input.input-md {
	height: 20px;
	font-size: 0.9em;
}

.sheet-darkmode .charsheet input.input-md {
  background-color: #3b4045;
  color: #e0e0e0;
  border-color: #444;
}

.charsheet input.input-stamina {
	height: 20px;
	font-size: 0.9em;
        width: 100%;
 	box-sizing: border-box;
  	min-width: 6em;
}
.charsheet label {
	display: unset;
	margin: unset;
	padding: unset;
	width: unset;
	text-align: unset;
	float: unset;
	font-size: 1em;
}
label.sublabel {
	height: 16px;
	font-size: 0.8em;
	font-weight: normal;
}
.charsheet label.sublabel input {
	padding: 0;
	font-size: 1em;
}
.charsheet select {
	margin: unset;
	width: unset;
}
.charsheet textarea {
	margin: unset;
	width: unset;
	resize: vertical;
}

.sheet-darkmode .charsheet input.input-stamina {
  color: #e0e0e0 !important;
}
.sheet-darkmode .charsheet label {
  color: #e0e0e0 !important;
}
.sheet-darkmode label.sublabel {
  color: #e0e0e0 !important;
}
.sheet-darkmode .charsheet label.sublabel input {
  color: #e0e0e0 !important;
}
.sheet-darkmode .charsheet select {
  color: #e0e0e0 !important;
}
.sheet-darkmode .charsheet textarea {
  background-color: #3b4045 !important;
  color: #e0e0e0 !important;
  resize: vertical;
}

.sheet-darkmode .charsheet option {
  background-color: #3b4045 !important;
  color: #e0e0e0 !important;
}

.sheet-darkmode ::placeholder {
  color: #e0e0e0;
  opacity: 1;
}

.progressbox-group {
	display: flex;
}
.progressbox-group > input {
	display: none;
}
.progressbox-group > .progressbox {
	display: block;
	height: 1.5em;
	width: 1.3em;
	border: 1px solid #aaa;
	cursor: pointer;
}

.progressbox-group > .progressbox:has(~ input:checked),
.progressbox-group > input:checked + .progressbox {
	background-color: #777;
}

.sheet-darkmode .progressbox-group > .progressbox:has(~ input:checked),
.sheet-darkmode .progressbox-group > input:checked + .progressbox {
	background-color: #e0e0e0;
}

.header-panel {
	display: flex;
	gap: 0.5em;
}
.header-panel > * {
	flex: 1 1 0;
}

.title {
	text-align: center;
	text-transform: uppercase;
}

.text-warning {
	color: orangered;
}

.minimizable:has(.minimize-control > .minimize:checked) > :not(.minimize-control):not(.minimize-ignore):not(.minimize-show),
.minimizable:has(.minimize-control > .minimize:checked) > .minimize-ignore > :not(.minimize-ignore),
.minimizable:has(.minimize-control > .minimize:not(:checked)) > .minimize-show {
	display: none;
}

.profile-panel {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	column-gap: 0.5em;
}

.profile-panel > * {
  display: flex;
  flex-direction: column;
}
.profile-panel .name-input-group {
	grid-column-end: span 2;
}

.sheet-darkmode .panel-dark input[type="text"] {
  background-color: #3b4045 !important;
  color: #e0e0e0 !important;
  border-color: #e0e0e0 !important;
}

.sheet-darkmode .panel-dark label {
  color: #e0e0e0 !important;
}

.sheet-darkmode .panel-dark input.input-md,
.sheet-darkmode .panel-dark input[type="number"] {
  background-color: #3b4045;
  color: #e0e0e0;
  border-color: #444;
}

.progress-panel {
	display: grid;
	grid-template-columns: repeat(6, 1fr);
	grid-gap: 0.5em;
}

.progress-panel > * {
	display: flex;
	flex-direction: column;
	align-items: center;
}
.victories-input-group {
	grid-column-end: span 5;
}
.wealth-input-group, .renown-input-group, .experience-input-group {
	grid-column-end: span 2;
}

.sheet-darkmode h5[data-i18n="victories"],
.sheet-darkmode h5[data-i18n="level"],
.sheet-darkmode h5[data-i18n="biography"],
.sheet-darkmode h5[data-i18n="skills-languages"],
.sheet-darkmode h5[data-i18n="features"],
.sheet-darkmode h5[data-i18n="abilities"],
.sheet-darkmode h5[data-i18n="projects"],
.sheet-darkmode h5[data-i18n="import"],
.sheet-darkmode h5[data-i18n="inventory"],
.sheet-darkmode label[for="stats-minimize-checkbox"] {
  color: #e0e0e0;
}

.stats-panel {
	position: sticky;
	top: 0;
	z-index: 10;
	display: grid;
	grid-template-columns: repeat(12, 1fr);
	gap: 0.25em;
}
.stats-panel > .minimize-control {
	grid-column-start: 1;
	grid-column-end: -1;
}

.core-panel {
	grid-column-end: span 6;
	grid-row-end: span 2;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: space-between;
}

.characteristics {
	display: grid;
	grid-template-columns: repeat(5, 1fr);
	gap: 0.25em;
}
.characteristics > span {
	grid-column-start: 1;
	grid-column-end: -1;
}
.characteristic-input-group > label {
	cursor: pointer;
}
.characteristic-input-group > input {
	text-align: center;
}

.sheet-darkmode .characteristic-input-group > input {
  background-color: #3b4045;
  color: #e0e0e0;
  border-color: #444;
}

.potencies, .potencies > div {
	display: flex;
	align-items: center;
	gap: 0.25em;
}

.movement {
	display: grid;
	grid-template-columns: repeat(4, 1fr);
	gap: 0.1em;
}
.movement-input-group {
	display: flex;
	flex-direction: column;
	align-items: center;
}
.movement-input-group > input {
	width: 3.75em;
	text-align: center;
}

.stamina-panel {
	grid-column-end: span 3;
	display: grid;
	grid-template-columns: 2fr 2fr 2fr;
	column-gap: 0.5em;
}
.stamina-panel > .panel-title {
	grid-column-start: 1;
	grid-column-end: -1;
	text-align: center;
}
.stamina-input-group,
.stamina-temporary-input-group {
	grid-row-end: span 2;
	display: flex;
	flex-direction: column;
	align-items: center;
}

.stamina-input-group input,
.stamina-temporary-input-group input {
  width: 100%;
  box-sizing: border-box;
  min-width: 6em;
}

.recoveries-panel {
	grid-column-end: span 2;
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	grid-auto-rows: min-content;
	gap: 0.1em;
}
.recoveries-panel > .panel-title {
	grid-column-start: 1;
	grid-column-end: -1;
	justify-self: center;
}
.recoveries-input-group {
	grid-column-start: 1;
	grid-column-end: -1;
	justify-self: center;
}
.recovery-amount-input-group,
.recoveries-max-input-group {
	display: flex;
	flex-direction: column;
	align-items: center;
}

.damage-mod-panel {
	grid-column-end: span 6;
	display: grid;
	grid-template-columns: auto 1fr;
	align-items: center;
	gap: 0.25em;
}

.resource-description-panel {
	grid-column-end: span 4;
}
.resource-description-panel > textarea {
	width: 100%;
	height: 6em;
	resize: vertical;
}

.resource-panel {
	grid-column-end: span 2;
	justify-self: center;
	display: grid;
	grid-template-columns: 1fr;
	grid-auto-rows: min-content;
	justify-items: center;
}
.resource-panel > .panel-title {
	overflow-wrap: break-word;
	text-align: center;
}
.resource-name-input-group > input {
	width: 100px;
	text-align: center;
}

.surges-panel {
	grid-column-end: span 2;
	display: grid;
	grid-template-columns: 1fr;
	grid-auto-rows: min-content;
	justify-items: center;
}
.surges-panel > label {
	justify-self: start;
}

.conditions-panel {
	grid-column-end: span 4;
}
.repcontainer[data-groupname="repeating_conditions"] > .repitem {
	display: grid;
	grid-template-columns: auto auto;
	gap: 0.25em;
	align-items: start;
}
.repcontainer[data-groupname="repeating_conditions"] > .repitem > input {
	grid-row-end: span 2;
}

.biography-panel {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	grid-gap: 0.5em;
}
.biography-panel > .minimize-control {
	grid-column-start: 1;
	grid-column-end: -1;
}
.career-panel {
	display: grid;
}
.career-panel > .panel-title,
.career-panel > input,
.career-panel > label {
	text-align: center;
}
.career-panel > input {
	font-weight: bold;
}
.career-panel > textarea {
	height: 75px;
	resize: vertical;
}
.complication-panel {
	display: grid;
}
.complication-panel > .panel-title,
.complication-panel > input,
.complication-panel > label {
	text-align: center;
}
.complication-panel > input {
	font-weight: bold;
}
.complication-panel > textarea {
	height: 75px;
	resize: vertical;
}
.culture-panel {
	grid-column-start: 1;
	grid-column-end: -1;
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	grid-gap: 0.2em;
}
.culture-panel > .panel-title {
	grid-column-start: 1;
	grid-column-end: -1;
	text-align: center;
}
.culture-panel > label {
	text-align: center;
}
.culture-panel > textarea {
	height: 75px;
	resize: vertical;
}

.skills-panel {
	display: grid;
	grid-template-columns: auto 1fr;
	gap: 0.25em;
	align-items: center;
}
.skills-panel > .panel-title {
	grid-column-start: 1;
	grid-column-end: -1;
}

.languages-panel {
	display: grid;
	grid-template-columns: 1fr;
}
.languages-panel > .panel-title {
	grid-column-start: 1;
	grid-column-end: -1;
}

.features-panel {
	display: grid;
	grid-template-columns: repeat(6, 1fr);
	grid-gap: 0.5em;
}
.features-panel > .minimize-control {
	grid-column-start: 1;
	grid-column-end: -1;
}

.inventory-panel {
	display: grid;
	grid-template-columns: repeat(6, 1fr);
	grid-gap: 0.5em;
}
.inventory-panel > .minimize-control {
	grid-column-start: 1;
	grid-column-end: -1;
}

.class-panel {
	grid-column-end: span 4;
}
.ancestry-panel {
	grid-column-end: span 2;
}
.class-panel > .panel-title,
.ancestry-panel > .panel-title {
	text-align: center;
}

.trinket-panel {
	grid-column-end: span 4;
}
.consumable-panel {
	grid-column-end: span 2;
}

.level-treasure-panel {
	grid-column-end: span 6;
}

.trinket-panel > .panel-title,
.consumable-panel > .panel-title,
.level-treasure-panel > .panel-title {
	text-align: center;
}

.level-treasure-panel .carry-checks {
	display: flex;
	justify-content: center;
	align-items: center;
	gap: 0.5em;
	margin-bottom: 0.5em;
	flex-wrap: wrap;
}

.carry-checks .carry-label {
	font-weight: bold;
}

.repcontainer[data-groupname="repeating_classfeatures"] {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	grid-gap: 0.2em;
}

.class-feature-header,
.anc-feature-header,
.perk-feature-header,
.title-feature-header {
  display: flex;
  align-items: center;
  gap: 0.2em;
  flex-wrap: wrap;
}

.class-feature-header input[type="text"],
.anc-feature-header input[type="text"],
.perk-feature-header input[type="text"],
.title-feature-header input[type="text"] {
  flex: 1 1 auto;
}

.class-feature-header textarea,
.anc-feature-header textarea,
.perk-feature-header textarea,
.title-feature-header textarea {
  flex: 1 1 100%;
  resize: vertical;
}

.repcontainer[data-groupname="repeating_trinkets"] {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	grid-gap: 0.2em;
}

.repcontainer[data-groupname="repeating_leveltreasure"] {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	grid-gap: 0.2em;
}

.repcontainer[data-groupname="repeating_classfeatures"] > .repitem,
.repcontainer[data-groupname="repeating_ancestrytraits"] > .repitem {
	display: grid;
	grid-gap: 0.2em;
}

.repcontainer[data-groupname="repeating_trinkets"] > .repitem,
.repcontainer[data-groupname="repeating_leveltreasure"] > .repitem {
	display: grid;
	grid-gap: 0.2em;
}

.repcontainer[data-groupname="repeating_consumables"] > .repitem {
  display: flex;
  align-items: center;
  gap: 0.2em;
  flex-wrap: wrap;
}

.repcontainer[data-groupname="repeating_classfeatures"] > .repitem > input,
.repcontainer[data-groupname="repeating_ancestrytraits"] > .repitem > input {
	font-weight: bold;
}

.repcontainer[data-groupname="repeating_trinkets"] > .repitem > input,
.repcontainer[data-groupname="repeating_leveltreasure"] > .repitem > input {
	font-weight: bold;
}

.repcontainer[data-groupname="repeating_consumables"] > .repitem > input {
  flex: 1 1 auto;
  font-weight: bold;
}

.repcontainer[data-groupname="repeating_classfeatures"] > .repitem > textarea,
.repcontainer[data-groupname="repeating_ancestrytraits"] > .repitem > textarea {
	height: 50px;
	resize: vertical;
}

.repcontainer[data-groupname="repeating_trinkets"] > .repitem > textarea,
.repcontainer[data-groupname="repeating_leveltreasure"] > .repitem > textarea {
	height: 50px;
	resize: vertical;
}

.repcontainer[data-groupname="repeating_consumables"] > .repitem > textarea {
  flex: 1 1 100%;
  resize: vertical;
  height: 50px;
}

.perks-panel {
	grid-column-end: span 4;
}
.titles-panel {
	grid-column-end: span 2;
}
.perks-panel > .panel-title,
.titles-panel > .panel-title {
	text-align: center;
}
.repcontainer[data-groupname="repeating_perks"] {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	grid-gap: 0.2em;
}
.repcontainer[data-groupname="repeating_titles"] {
	display: grid;
	grid-gap: 0.2em;
}

.modifiers-panel {
	grid-column-start: 1;
	grid-column-end: -1;
}

.modifiers-panel > .panel-title {
	text-align: center;
}

.repcontainer[data-groupname="repeating_modifiers"] {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	grid-gap: 0.5em;
}

.modifier-card {
	display: grid;
	grid-template-columns: repeat(6, 1fr);
	grid-gap: 0.2em;
}
.modifier-name {
	grid-column-end: span 4;
	font-weight: bold;
}

.modifier-card:has(> .modifier-type > option[value="kit"]:checked) > :not(.kit):not(.modifier-all),
.modifier-card:has(> .modifier-type > option[value="kit"]:not(:checked)) > .kit {
	display: none;
}
.modifier-type {
	grid-column-end: span 2;
}

.sheet-darkmode .modifier-type {
  background-color: #3b4045 !important;
  color: #e0e0e0 !important;
}

.modifier-card > .input-group {
	display: grid;
}
.modifier-card > .input-group > input[type] {
	width: 100%;
}
.modifier-card > .input-group > label {
	text-align: center;
}
.kit-weapon-input-group,
.kit-armor-input-group {
	grid-column-end: span 3;
}
.modifier-card > .kit-damage-label {
	grid-column-end: span 3;
	text-align: center;
}
.modifier-card:has(> .modifier-type > option[value="kit"]:checked) > .modifier-description {
	grid-column-end: span 3;
	grid-row-end: span 4;
	height: 100%;
}
.modifier-card:has(> .modifier-type > option[value="kit"]:not(:checked)) > .modifier-description {
	grid-column-start: 1;
	grid-column-end: -1;
	height: 75px;
}

.abilities-panel {
	display: grid;
	grid-gap: 0.5em;
}

.free-strikes {
	display: flex;
	gap: 16px;
}

.melee-free-strike,
.ranged-free-strike {
	flex: 1 1 0;
	min-width: 350px;
	position: relative;
}

.repcontainer[data-groupname="repeating_abilities"] {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	grid-gap: 0.5em;
}

/*Read-only Ability Card Styling*/

.ability-edit-label {
  float: right;
  margin-right: 20px;
  font-family: 'Cinzel', serif;
  font-style: bold;
}

.read-ability-name:empty::before {
  content: attr(data-i18n-placeholder);
  font-style: bold;
  opacity: 0.7;
}

.read-ability-name-cost {
  display: flex;
  gap: 0.5em;
  align-items: baseline;
  grid-column: 2 / span 4;
}

.read-ability-name-cost .ability-name {
  font-weight: bold;
  font-size: 1em;
}

.read-ability-name-cost .ability-cost:empty {
  display: none;
}

.read-ability-name-cost .ability-cost::before {
  content: "Cost: ";
  font-weight: normal;
  margin-right: 0.25em;
}

.read-ability-description:empty,
.read-ability-keywords:empty,
.read-ability-type:empty,
.read-ability-distance:empty,
.read-ability-target:empty,
.read-ability-effect:empty {
  display: none;
}

.read-ability-type {
  background: none !important;
  color: inherit !important;
  font-weight: normal;
  text-align: right;
  grid-column-end: unset;
  font-size: 0.9em;
}

.read-ability-card .read-power-roll-flag[value="0"] ~ .read-power-roll {
  display: none;
}

.read-ability-card .read-power-roll-flag[value="1"] ~ .read-power-roll {
	display: block;
}

.read-power-roll {
	display: grid;
	grid-template-columns: auto 1fr;
	align-items: center;
	grid-column-end: -1;
	grid-column-start: 1;
	column-gap: 0.5em;
}

.read-ability-card .ability-effect, .ability-trigger {
	height: auto;
}

label.ability-edit {
	font-family: "Pictos";
	font-size: 1.5em;
	position: absolute;
	left: calc(100% - 45px);
	top: 67px;
	color: #aaa;
	cursor: pointer;
}

.sheet-darkmode label.ability-edit {
	color: #e0e0e0;
}

.charsheet input.ability-edit:not(:checked) ~ div.ability-card, .charsheet input.ability-edit:checked ~ div.read-ability-card {
    display: none;
}

.abilities-panel {
	padding-top: 5px;
}

.abilities-panel > .repcontainer[data-groupname="repeating_abilities"] > .repitem,
.free-strikes > .melee-free-strike,
.free-strikes > .ranged-free-strike {
	border: 1px solid #aaa;
	border-radius: 5px;
	background: #fff;
	padding: 5px;
}

.sheet-darkmode .abilities-panel > .repcontainer[data-groupname="repeating_abilities"] > .repitem,
.sheet-darkmode .free-strikes > .melee-free-strike,
.sheet-darkmode .free-strikes > .ranged-free-strike {
  background-color: #3b4045 !important;
  color: #e0e0e0 !important;
  border: 1px solid #e0e0e0;
}

.read-ability-card {
	display: grid;
	grid-template-columns: 30px repeat(4, 1fr) 30px;
}

.read-ability-card .ability-name {
	grid-column: 2 / span 4;
}

.read-ability-card .ability-description {
	grid-column: 2 / span 4;
	font-size: .7em;
	font-style: italic;
	font-weight: normal;
	margin-top: -0.25em;
}

.read-ability-card .ability-type, .ability-keywords {
	font-size: 0.9em;
	font-weight: normal;
}

.read-ability-card input:not([value*="triggered"]) ~ span.ability-trigger {
	display: none;
}

.ability-trigger {
	grid-column-end: span 6;
}

.feature-button {
  width: 20px;
  height: 20px;
  padding: 0px;
  margin: 0px;
  background-color: #ddd;
  border: 1px solid #aaa;
  border-radius: 5px;
}

.sheet-darkmode .feature-button {
  background-color: #3b4045 !important;
  color: #e0e0e0 !important;
  border: 1px solid #e0e0e0;
}

input.ability-edit {
	right: 5px;
	position: absolute;
}

.read-ability-card > .ability-effect {
	grid-column-start: 1;
	grid-column-end: -1;
}
/*End Read-only Ability Card Styling*/

.ability-card {
	display: grid;
	grid-template-columns: repeat(4, 1fr) repeat(2, auto);
}
.ability-name {
	grid-column-end: span 4;
	font-weight: bold;
}

.ability-name::placeholder {
	opacity: 0.7;
}

.ability-cost-input-group {
	justify-self: end;
}
.ability-cost-input-group > input {
	font-weight: bold;
}
.ability-description {
	grid-column-start: 1;
	grid-column-end: -1;
	font-size: 0.8em;
	font-style: italic;
}

.ability-description::placeholder {
	opacity: 0.7;
}

.ability-keywords {
	grid-column-end: span 4;
	font-size: 0.8em;
	font-weight: bold;
}

.ability-keywords::placeholder {
	opacity: 0.7;
}

.ability-type {
	grid-column-end: span 2;
	text-align: end;
	font-weight: bold;
}

.sheet-darkmode .ability-type {
  background-color: #3b4045 !important;
  color: #e0e0e0 !important;
}

.ability-type:has(> option[value*="triggered"]:checked) ~ .triggered-hide,
.ability-type:not(:has(> option[value*="triggered"]:checked)) ~ .triggered-show {
	display: none;
}
.ability-distance {
	grid-column-end: span 3;
}

.ability-distance::placeholder {
	opacity: 0.7;
}

.ability-target {
	grid-column-end: span 3;
	font-size: 0.8em;
	text-align: end;
}

.ability-target::placeholder {
	opacity: 0.7;
}

.ability-card:has([name="attr_has_power_roll"]:not(:checked)) > .power-roll > .power-roll-mods > :not(input[type="checkbox"]):not(label),
.ability-card:has([name="attr_has_power_roll"]:not(:checked)) > .power-roll > :not(.power-roll-mods) {
	display: none;
}
.ability-card > .power-roll-hide,
.ability-card > .power-roll {
	grid-column-start: 1;
	grid-column-end: -1;
}
.power-roll {
	display: grid;
	grid-template-columns: auto 1fr;
	align-items: center;
}
.power-roll-mods {
	grid-column-start: 1;
	grid-column-end: -1;
}
.power-roll-characteristic {
	font-weight: bold;
}

.power-roll-characteristic::placeholder {
	opacity: 0.7;
}

.power-roll-tier-effect {
	font-size: 0.8em;
}
.ability-card > .ability-trigger,
.ability-card > .ability-effect {
	grid-column-start: 1;
	grid-column-end: -1;
	height: 50px;
}

.repcontainer[data-groupname="repeating_projects"] > .repitem {
	display: grid;
	grid-template-columns: 5fr 4fr 3fr 3fr;
}
.project-goal-input-group {
	display: flex;
	align-items: center;
}
.project-goal-input-group > input {
	flex-grow: 1;
}

.import-panel > textarea {
	height: 50px;
}

.sheet-rolltemplate-powerroll,
.sheet-rolltemplate-ability,
.sheet-rolltemplate-abilitypowerroll {
  background-color: #f5f5f5; /* eggshell */
  font-family: 'Georgia', serif;
  padding: 16px;
  border-radius: 10px;
  border: 1px solid #ccc;
  max-width: 264px;
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
}
.sheet-rolltemplate-powerroll.sheet-rolltemplate-darkmode,
.sheet-rolltemplate-ability.sheet-rolltemplate-darkmode,
.sheet-rolltemplate-abilitypowerroll.sheet-rolltemplate-darkmode {
	background-color: #333333;
	color: #ddd;
}

.sheet-rolltemplate-powerroll .sheet-header,
.sheet-rolltemplate-ability .sheet-header,
.sheet-rolltemplate-abilitypowerroll .sheet-header {
	grid-column-start: 1;
	grid-column-end: -1;
	font-size: 1.2em;
	font-weight: bold;
}

.sheet-rolltemplate-powerroll,
.sheet-rolltemplate-abilitypowerroll {
	display: grid;
	grid-template-columns: repeat(2, 1fr);
}
.sheet-rolltemplate-powerroll .sheet-header,
.sheet-rolltemplate-powerroll .sheet-header {
	margin-bottom: 3px;
	border-bottom: 1px solid #bbb;
	padding-bottom: 3px;
        line-height: 1.4;
}

.sheet-rolltemplate-ability .sheet-header {
	margin-bottom: 3px;
	padding-bottom: 3px;
        line-height: 1.4;
}
.sheet-rolltemplate-powerroll label,
.sheet-rolltemplate-abilitypowerroll label,
.sheet-rolltemplate-powerroll .sheet-powerroll-edge-bane {
	display: unset;
	margin: unset;
	padding: unset;
	width: unset;
	text-align: unset;
	float: unset;
	font-size: 1em;
	font-weight: bold;
}
.sheet-rolltemplate-powerroll .sheet-powerroll-bonus-penalty {
	grid-column-start: -2;
}
.sheet-rolltemplate-powerroll .sheet-powerroll-crit,
.sheet-rolltemplate-powerroll .sheet-powerroll-total,
.sheet-rolltemplate-powerroll .sheet-powerroll-tier {
	margin-top: 3px;
	border-top: 1px solid #bbb;
	padding-top: 3px;
}
.sheet-rolltemplate-powerroll .sheet-powerroll-crit {
	grid-column-start: 1;
	grid-column-end: -1;
	font-weight: bold;
	color: red;
	text-transform: uppercase;
}
.sheet-rolltemplate-powerroll .sheet-powerroll-total {
	grid-column-start: 1;
}

.sheet-rolltemplate-ability .sheet-description {
  font-size: 0.80em;
  font-style: italic;
  margin-bottom: 10px;
  border-bottom: 2px solid #aaa;
  padding-bottom: 6px;
}

.sheet-rolltemplate-ability .sheet-meta-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.sheet-rolltemplate-ability .sheet-keywords {
  font-weight: bold;
  font-size: 0.90em;
}

.sheet-rolltemplate-ability .sheet-action-type {
  font-weight: bold;
  font-size: 0.90em;
}

.sheet-rolltemplate-ability .sheet-action-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
}

.sheet-rolltemplate-ability .sheet-distance,
.sheet-rolltemplate-ability .sheet-target {
  font-size: 0.80em;
}

.sheet-rolltemplate-ability .sheet-stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 0;
  margin-bottom: 10px;
  border-bottom: 1px solid #aaa;
}

.sheet-rolltemplate-ability .sheet-roll-label {
  font-weight: bold;
  font-size: 1em;
}

.sheet-rolltemplate-ability .sheet-roll-formula {
  padding: 4px 8px;
  border-radius: 4px;
  font-weight: bold;
  font-family: monospace;
  box-shadow: inset 0 0 2px #aaa;
}

.sheet-rolltemplate-ability .sheet-tiers {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sheet-rolltemplate-ability .sheet-tier {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  border-radius: 6px;
  border: 1px solid #aaa;
}

.sheet-rolltemplate-ability .sheet-range {
	flex-shrink: 0;
  background-color: #e0dbce;
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: bold;
}
.sheet-rolltemplate-ability.sheet-rolltemplate-darkmode .sheet-range {
  background-color: #5f5d58;
}

.sheet-rolltemplate-ability .sheet-damage {
  font-size: 0.95em;
}

.sheet-rolltemplate-ability .sheet-effect-block {
  margin-top: 14px;
  padding: 10px;
  background-color: #f0f0f0;
  border: 1px solid #aaa;
  border-radius: 6px;
}
.sheet-rolltemplate-ability.sheet-rolltemplate-darkmode .sheet-effect-block {
	background-color: #0f0f0f;
	color: #aaa
}

.sheet-rolltemplate-ability .sheet-effect-label {
  font-weight: bold;
  margin-bottom: 6px;
  font-size: 1em;
}

.sheet-rolltemplate-ability .sheet-effect-text {
  font-size: 0.95em;
  line-height: 1.4;
}

.sheet-rolltemplate-abilitypowerroll .sheet-header {
	border-bottom:1px solid #aaa;
	margin-bottom: 6px;
}

.sheet-rolltemplate-abilitypowerroll .sheet-powerroll-tier {
	justify-self: right;
}

.disclaimer {
	font-family: Menlo, Monaco, Consolas;
}

/* NPC Sheet */
.npc-sheet-body {
	min-width: 566px;
}

.npc-panel {
	display: grid;
	background: #fff;
	padding: 10px;
	border-bottom: 2px solid #aaa;
	border-left: 1px solid #aaa;
	border-right: 1px solid #aaa;
}

.sheet-darkmode .npc-panel {
  background: #3b4045 !important;
  color: #e0e0e0 !important;
	border-bottom: 2px solid #e0e0e0 !important;
	border-left: 1px solid #e0e0e0 !important;
	border-right: 1px solid #e0e0e0 !important;
}

.npc-header-panel {
	grid-template-columns: 1fr auto;
	align-items: baseline;
	border-radius: 20px 20px 0px 0px;
	border-top: 1px solid #aaa;
}

sheet-darkmode .npc-header-panel {
	border-top: 1px solid #444;
}

.npc-header-panel div:nth-child(even) {
	justify-self: right;
}

.npc-name {
	font-size: 2em;
	font-weight: 800;
}

.npc-level {
	font-weight: 800;
}


.npc-stats-panel {
	grid-template-columns: repeat(5, 1fr);
}

.npc-stats-panel div {
	display: flex;
	flex-direction: column;
	align-items: center;
}

.npc-characteristic-input-group > label {
	cursor: pointer;
}

.npc-stat {
	font-size: 1.5em;
}

.npc-skills-panel {
	grid-template-columns: 1fr auto;
	border-bottom: none;
}

.npc-marip-panel {
	grid-template-columns: repeat(5,1fr);
}

.npc-marip-panel div {
	display: flex;
	gap: 5px;
	justify-content: center;
	align-items: baseline;
}

.npc-marip-panel div span {
	font-size: 1.2em;
}

.npc-conditions {
	min-height: 3em;
}

.npc-conditions > .repcontainer[data-groupname="repeating_conditions"] > .repitem {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr ;
  gap: 0.5em;
  align-items: start;
}

.sheet-darkmode .npc-conditions {
  background-color: #3b4045 !important;
  color: #e0e0e0 !important;
  border-color: #444 !important;
}

.sheet-darkmode .npc-conditions > .repcontainer[data-groupname="repeating_conditions"] > .repitem {
  background-color: #3b4045 !important;
  color: #e0e0e0 !important;
  border-color: #444 !important;
}

/* NPC Ability Card Styling */

.npc-abilities-panel {
	padding-top: 5px;
}

.repcontainer[data-groupname="repeating_npcabilities"] {
	display: grid;
	grid-template-columns: 1fr 1fr;
	grid-gap: 0.5em;
}

.npc-abilities-panel > .repcontainer[data-groupname="repeating_npcabilities"] > .repitem {
	border: 1px solid #aaa;
	border-radius: 5px;
	background: #fff;
	padding: 5px;
}

.npc-ability-card-display, .npc-ability-card-edit {
	display: grid;
	grid-template-columns: 30px repeat(4, 1fr) 30px;
}

input.npc-ability-edit-toggle {
	right: 5px;
	position: absolute;
}

input.npc-ability-edit-toggle:not(:checked) ~ div.npc-ability-card-edit, 
input.npc-ability-edit-toggle:checked ~ div.npc-ability-card-display {
    display: none;
}

.npc-ability-name {
	grid-column-end: span 2;
	grid-column-start: 2;
	font-weight: bold;
}

.npc-ability-subtype-selector, .npc-ability-subtype {
  grid-column-start: 4;
  grid-column-end: span 2;
  justify-self: right;
  font-weight: bold;
  
}

.sheet-darkmode .npc-abilities-panel > .repcontainer[data-groupname="repeating_abilities"] > .repitem {
  background-color: #3b4045 !important;
  color: #e0e0e0 !important;
  border: 1px solid #e0e0e0;
}

.npc-ability-card {
	display: grid;
	grid-template-columns: 30px repeat(4, 1fr) 30px;
}

.npc-ability-solo-monster {

	display: grid;
	grid-template-columns: repeat(3, 1fr);
}

.npc-ability-solo-monster input {
	grid-column-end: span 2;
}

.npc-ability-subtype-selector:not(:has(> option[value="solo-monster"]:checked)) ~ .npc-ability-solo-monster,
.npc-ability-subtype-selector:not(:has(> option[value*="trait"]:checked)) ~ .npc-ability-trait,
.npc-ability-subtype-selector:not(:has(> option[value*="malice"]:checked)) ~ .npc-ability-malice-cost,
.npc-ability-subtype-selector:not(:has(> option[value*="ability"]:checked)) ~ .npc-ability-details {
	display: none;
}

.npc-ability-card-edit textarea {
	height: 50px;
}

.npc-ability-type:has(> option[value*="triggered"]:checked) ~ .triggered-hide,
.npc-ability-type:not(:has(> option[value*="triggered"]:checked)) ~ .triggered-show {
	display: none;
}

.npc-power-roll {
	display: grid;
	grid-template-columns: auto 1fr;
	align-items: center;
	grid-column: 1 / -1;
	column-gap: 0.5em;
}

.npc-power-roll label.sublabel {
	border: 1px solid black;
	border-radius: 5px;
	padding: 1px;
	text-align: center;
	margin: 4PX 0px 0px 0px;
}

.npc-power-roll-mods {
	grid-column: 1 / -1;
}

.npc-power-roll-tier-effect {
	font-size: 0.8em;
}

.npc-ability-details:has([name="attr_has_power_roll"]:not(:checked)) > .npc-power-roll > .npc-power-roll-mods > :not(input[type="checkbox"]):not(label),
.npc-ability-details:has([name="attr_has_power_roll"]:not(:checked)) > .npc-power-roll > :not(.npc-power-roll-mods) {
	display: none;
}

#npc-ability-subtype-selector:not([value*="villain"]):not([value*="signature"]) ~ .subtype-hide,
#npc-ability-subtype-selector:not([value*="malice"]) ~ .malice-show,
#npc-ability-subtype-selector:not([value*="trait"]) ~ .trait-show,
#npc-ability-subtype-selector[value*="trait"] ~ .details-hide,
#npc-ability-subtype-selector:not([value="solo-monster"]) ~ .solo-monster-show,
#npc-ability-subtype-selector[value="solo-monster"] ~ .details-hide {
	display: none;
}

.npc-ability-card-display input[name*="attr_has"]:not([value="on"]) + div {
	display: none;
}

.npc-ability-card-display .npc-ability-effect, .npc-ability-card-display .npc-ability-trigger {
	height: auto;
}

.npc-ability-details {
  display: grid;
  grid-template-columns: 1fr 1fr;
  font-size: 0.9em;
}

.npc-ability-type, .npc-ability-target {
	text-align: end;
}

.npc-ability-distance {
	grid-column-start: 1;
}

.npc-ability-card-display input:not([value*="triggered"]) ~ .npc-ability-trigger,
.npc-ability-card-display input[value="no-action"] ~ .npc-ability-type {
	display: none;
}

.npc-ability-button {
  width: 20px;
  height: 20px;
  padding: 0px;
  margin: 0px;
  background-color: #ddd;
  border: 1px solid #aaa;
  border-radius: 5px;
}

.sheet-darkmode .npc-ability-button {
  background-color: #3b4045 !important;
  color: #e0e0e0 !important;
  border: 1px solid #e0e0e0;
}

input.npc-ability-edit {
	right: 5px;
	position: absolute;
}

.npc-ability-button:hover {
	background-color: #ccc;

}

.npc-ability-card-display .npc-power-roll .npc-power-roll-mods button[type="roll"]::before {
  content: "k";
  font-family: "dicefontd10";
}

.npc-ability-card-display .npc-power-roll .npc-power-roll-mods button[type="roll"] {
  margin-left: 0px;
}

.ability-toggle-group {
	grid-column: 1 / -1;
	display: flex;
	flex-wrap: wrap;
	gap: 0.2em;
	align-items: center;
}

.ability-toggle-group textarea {
	width: 100%;
}

.ability-toggle-group input:not(:checked) ~ textarea,
.ability-toggle-group input:not(:checked) ~ div
 {
	display: none
}

/* Switches between Character and NPC Sheets */
.charsheet .npc-checkbox:not(:checked) ~ .npc-sheet-body,
.charsheet .npc-checkbox:checked ~ .sheet-body
{
  display: none;
}

label[for="npc-checkbox"] {
  color: black;
  font-weight: bold;
  font-size: 1em;
  padding-left: 0.5em;
}

.sheet-darkmode label[for="npc-checkbox"] {
  color: #e0e0e0;
}


/* NPC edit styling */
label.npc-edit-icon {
	font-family: "Pictos";
	font-size: 1.5em;
	position: absolute;
	left: calc(100% - 45px);
	top: 67px;
	color: #aaa;
	cursor: pointer;
}

.sheet-darkmode label.npc-edit-icon {
	color: #e0e0e0;
}

input.npc-edit-toggle {
	display: none;
}

input.npc-edit-toggle:not(:checked) ~ div.npc-edit {
    display: none;
} 

.npc-edit {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 1em;
	align-items: baseline;
	justify-items: start;
	font-size: 0.8em;
	width: 400px;
	margin-bottom: 10px;
}

.npc-edit-group {
	display: grid;
	gap: 3px;
}

.npc-edit-stats {
	grid-template-columns: 1fr 1fr;
}

.npc-edit-stats > input[type="text"],
.npc-edit-stats > input[type="number"] {
	width: 4.5em;
}

.npc-edit-text {
	grid-template-columns: auto 1fr;
	grid-column-gap: 1em;
}




/* Dark Mode */
.sheet-darkmode .characterviewer .charsheet label {
	color: #333;
}

/* Monster Ability Roll Template */
.sheet-rolltemplate-monsterability {
  background-color: #f5f5f5; /* eggshell */
  font-family: 'Georgia', serif;
  padding: 16px;
  border-radius: 10px;
  border: 1px solid #ccc;
  max-width: 264px;
  box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
}

.sheet-rolltemplate-monsterability.sheet-rolltemplate-darkmode {
	background-color: #333333;
	color: #ddd;
}

.sheet-rolltemplate-monsterability .sheet-header {
  font-size: 1.2em;
  font-weight: bold;
}

.sheet-rolltemplate-monsterability .sheet-character-name,
.sheet-rolltemplate-abilitypowerroll .sheet-character-name {
  font-size: 0.8em;
  font-style: italic;
}

.sheet-rolltemplate-monsterability .sheet-subtype {
  font-size: 0.9em;
  font-style: italic;
  margin-bottom: 10px;
  border-bottom: 2px solid #aaa;
  padding-bottom: 6px;
  font-weight: bold;
}

.sheet-rolltemplate-monsterability .sheet-meta-row {
  display: grid;
  grid-template-columns: 1fr auto;
  font-size: 0.8em;
  font-weight: bold;
}

.sheet-rolltemplate-monsterability .sheet-action-type, .sheet-rolltemplate-monsterability .sheet-target {
  justify-self: right;
  text-align: right;
}

.sheet-rolltemplate-monsterability .sheet-action-row {
  font-size: 0.8em;
  display: grid;
  grid-template-columns: 1fr auto;
}

.sheet-rolltemplate-monsterability .sheet-effect-block .sheet-effect-label {
  font-weight: bold;
  font-size: 0.8em;
}

.sheet-rolltemplate-monsterability .sheet-effect-block {
  margin-top: 14px;
  padding: 10px;
  background-color: #f0f0f0;
  border: 1px solid #aaa;
  border-radius: 6px;
}

.sheet-rolltemplate-monsterability.sheet-rolltemplate-darkmode .sheet-effect-block {
	background-color: #0f0f0f;
	color: #aaa
}

.sheet-rolltemplate-monsterability .sheet-effect-text {
  font-size: .9em;
}

.sheet-rolltemplate-monsterability .sheet-stat-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 0;
  margin-bottom: 10px;
  border-bottom: 1px solid #aaa;
}

.sheet-rolltemplate-monsterability .sheet-roll-label {
  font-weight: bold;
  font-size: 1em;
}

.sheet-rolltemplate-monsterability .sheet-roll-formula {
  padding: 4px 8px;
  border-radius: 4px;
  font-weight: bold;
  font-family: monospace;
  box-shadow: inset 0 0 2px #aaa;
}

.sheet-rolltemplate-monsterability .sheet-tiers {
	display: grid;
	grid-template-columns: auto 1fr;
	gap: 8px;
}

.sheet-rolltemplate-monsterability .sheet-range {
	background-color: #e0dbce;
	padding: 2px 6px;
	border-radius: 4px;
	font-weight: bold;
	font-size: .8em;
	height: 20px;
	text-align: center;
}
.sheet-rolltemplate-monsterability.sheet-rolltemplate-darkmode .sheet-range {
  background-color: #5f5d58;
}

.sheet-rolltemplate-monsterability .sheet-damage {
  font-size: 0.95em;
}

<!-- buttons to select desired tab -->
<div class="tab-buttons">
    <button type="action" name="act_character" >Character</button>
    <button type="action" name="act_inventory" >Inventory</button>
</div>

<input type='hidden' class='tabstoggle' name='attr_sheettab'  value='character'  />


<!-- CHARACTER TAB -->
<div class='character'>
<h1>HarnMaster Character Profile</h1>

<div class="row"> <!-- ATTRIBUTES AND PERSONAL DETAILS --> 
    <div class="col">
        <h4 class="section-head">Personal</h4>
        <div>
            <div class="info-label">Name</div>
            <input type="text" name="attr_name" class="info-input">
        </div>
        <div>
            <div class="info-label">Race</div>
            <input type="text" name="attr_species" class="info-input">
        </div>
        <div>
            <div class="info-label">Gender</div>
            <input type="text" name="attr_gender" class="info-input">
        </div>
        <div>
            <div class="info-label">Birthdate</div>
            <input type="text" name="attr_birthdate" class="info-input">
        </div>
        <div>
            <div class="info-label">Sunsign</div>
            <select name="attr_sunsign" class="info-input">
                <option value="ulandus">Ulandus</option>
                <option value="ulandus-aralius">Ulandus-Aralius</option>
                <option value="aralius">Aralius</option>
                <option value="aralius-feniri">Aralius-Feniri</option>
                <option value="feniri">Feniri</option>
                <option value="feniri-ahnu">Feniri-Ahnu</option>
                <option value="ahnu">Ahnu</option>
                <option value="ahnu-angberelius">Ahnu-Angberelius</option>
                <option value="angberelius">Angberelius</option>
                <option value="angberelius-nadai">Angberelius-Nadai</option>
                <option value="nadai">Nadai</option>
                <option value="nadai-hirin">Nadai-Hirin</option>
                <option value="hirin">Hirin</option>
                <option value="hirin-tarael">Hirin-Tarael</option>
                <option value="tarael">Tarael</option>
                <option value="tarael-tai">Tarael-Tai</option>
                <option value="tai">Tai</option>
                <option value="tai-skorus">Tai-Skorus</option>
                <option value="skorus">Skorus</option>
                <option value="skorus-masara">Skorus-Masara</option>
                <option value="masara">Masara</option>
                <option value="masara-lado">Masara-Lado</option>
                <option value="lado">Lado</option>
                <option value="lado-ulandus">Lado-Ulandus</option>
            </select>
        </div>
        <hr class="hr">
        <div>
            <div class="stat-label">Age</div>
            <input type="number" name="attr_age" class="stat-value">
            <div class="stat-label">Morality</div>
            <input type="number" name="attr_moral" class="stat-value">
            <div class="stat-label">Piety</div>
            <input type="number" name="attr_piety" class="stat-value">
        </div>
        <div>
            <div class="stat-label">Height</div>
            <input type="text" name="attr_height" class="stat-value">
            <div class="stat-label">Frame</div>
            <input type="text" name="attr_frame" class="stat-value">
            <div class="stat-label">Weight</div>
            <input type="text" name="attr_weight" class="stat-value">
        </div>
        <div>
            <div class="stat-label">Skin</div>
            <input type="text" name="attr_complexion" class="stat-value">
            <div class="stat-label">Hair</div>
            <input type="text" name="attr_hair_colors" class="stat-value">
            <div class="stat-label">Eyes</div>
            <input type="text" name="attr_eye_color" class="stat-value">
        </div>
    </div>

    <div class="col">
        <h4 class="section-head">Attributes</h4>
        <div>
            <div class="stat-label font-heavy">STR</div>
            <div class="stat-value"><input type="number" name="attr_str" class="stat-value" value="0"></div>
            <div class="stat-label">EYE</div>
            <div class="stat-value"><input type="number" name="attr_eye" class="stat-value" value="0"></div>
        </div>
        <div>
            <div class="stat-label font-heavy">STA</div>
            <div class="stat-value"><input type="number" name="attr_sta" class="stat-value" value="0"></div>
            <div class="stat-label">HRG</div>
            <div class="stat-value"><input type="number" name="attr_hrg" class="stat-value" value="0"></div>
        </div>
        <div>
            <div class="stat-label font-heavy">DEX</div>
            <div class="stat-value"><input type="number" name="attr_dex" class="stat-value" value="0"></div>
            <div class="stat-label">SML</div>
            <div class="stat-value"><input type="number" name="attr_sml" class="stat-value" value="0"></div>
        </div>
        <div>
            <div class="stat-label  font-heavy">AGL</div>
            <div class="stat-value"><input type="number" name="attr_agl" class="stat-value" value="0"></div>
            <div class="stat-label">VOI</div>
            <div class="stat-value"><input type="number" name="attr_voi" class="stat-value" value="0"></div>
        </div>
        <div>
            <div class="stat-label font-heavy">INT</div>
            <div class="stat-value"><input type="number" name="attr_int" class="stat-value" value="0"></div>
            <div class="stat-label">CML</div>
            <div class="stat-value"><input type="number" name="attr_cml" class="stat-value" value="0"></div>
        </div>
        <div>
            <div class="stat-label font-heavy">AUR</div>
            <div class="stat-value"><input type="number" name="attr_aur" class="stat-value" value="0"></div>
        </div>
        <div>
            <div class="stat-label font-heavy">WIL</div>
            <div class="stat-value"><input type="number" name="attr_wil" class="stat-value" value="0"></div>
        </div>
    </div>

    <div class="col">
        <h4 class="section-head">Family</h4>
        <div>
            <div class="info-label">Birthplace</div>
            <input type="text" name="attr_birthplace" class="profile-input">
        </div>
        <div>
            <div class="info-label">Culture</div>
            <input type="text" name="attr_culture" class="profile-input">
        </div>
        <div>
            <div class="info-label">Social Class</div>
            <input type="text" name="attr_social_class" class="profile-input">
        </div>
        <div>
            <div class="info-label">Sibling Rank</div>
            <input type="text" name="attr_sibling_rank" class="profile-input">
        </div>
        <div>
            <div class="info-label">Parent</div>
            <input type="text" name="attr_parent" class="profile-input">
        </div>
        <div>
            <div class="info-label">Estrangement</div>
            <input type="text" name="attr_estrangement" class="profile-input">
        </div>
        <div>
            <div class="info-label">Clanhead</div>
            <input type="text" name="attr_clanhead" class="profile-input">
        </div>
        <div>
            <div class="info-label">Mental</div>
            <input type="text" name="attr_mental" class="profile-input">
        </div>
        <div>
            <div class="info-label">Physical</div>
            <input type="text" name="attr_physical" class="profile-input">
        </div>
    </div>
</div>

<hr class="hr">

<div> <!-- SKILLS --> 
	<div class="3colrow row">
	
		<h2>Skills</h2>
		<div class="col">
			<h4 class="section-head">Combat</h4>
			<div>
				<div class="skill-header skill-label">Skill</div>
				<div class="skill-header skill-value-small center">&nbsp;</div>
				<div class="skill-header skill-value center">SB</div>
				<div class="skill-header skill-value center">ML</div>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_initiative_name" value="Initiative" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{initiative_name}}} {{rolltarget=[[@{initiative_ml}]]}} {{rollresult=[[1d100+@{initiative_sb}]]}}"
						name="roll_InitiativeDevelop" class="skilldev-button"></button> 
				<input type="number" name="attr_initiative_sb" class="skill-value" value="0">
				<input type="number" name="attr_initiative_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{initiative_name}}} {{rolltarget=[[{[[{[[@{initiative_ml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{initiative_ml}}}"
						name="roll_InitiativeCheck"></button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_unarmed_name" value="Unarmed" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{unarmed_name}}} {{rolltarget=[[@{unarmed_ml}]]}} {{rollresult=[[1d100+@{unarmed_sb}]]}}"
						name="roll_UnarmedDevelop" class="skilldev-button"></button>
				<input type="number" name="attr_unarmed_sb" class="skill-value" value="0">
				<input type="number" name="attr_unarmed_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{unarmed_name}}} {{rolltarget=[[{[[{[[@{unarmed_ml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{unarmed_ml}}}"
						name="roll_UnarmedCheck"></button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_dodge_name" value="Dodge" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{dodge_name}}} {{rolltarget=[[@{dodge_ml}]]}} {{rollresult=[[1d100+@{dodge_sb}]]}}"
						name="roll_DodgeDevelop" class="skilldev-button"></button>
				<input type="number" name="attr_dodge_sb" class="skill-value" value="0">
				<input type="number" name="attr_dodge_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{dodge_name}}} {{rolltarget=[[{[[{[[@{dodge_ml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{dodge_ml}}}"
						name="roll_DodgeCheck"></button>
			</div>
	
			<fieldset class="repeating_combatskill">
				<div>
					<input type="text" name="attr_combatskill_name" class="skill-label">
					<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{combatskill_name}}} {{rolltarget=[[@{combatskill_ml}]]}} {{rollresult=[[1d100+@{combatskill_sb}]]}}"
						name="roll_CombatSkillDevelop" class="skilldev-button"></button>
					<input type="number" name="attr_combatskill_sb" class="skill-value" value="0">
					<input type="number" name="attr_combatskill_ml" class="skill-value" value="0">
					<button type="roll"
							value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{combatskill_name}}} {{rolltarget=[[{[[{[[@{combatskill_ml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{combatskill_ml}}}"
							name="roll_CombatSkillCheck"></button>
				</div>
			</fieldset>
		</div>
		<div class="col">
			<h4 class="section-head">Physical</h4>
			<div>
				<div class="skill-header skill-label">Skill</div>
				<div class="skill-header skill-value-small center">&nbsp;</div>
				<div class="skill-header skill-value center">SB</div>
				<div class="skill-header skill-value center">ML</div>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_climbing_name" value="Climbing" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{climbing_name}}} {{rolltarget=[[@{climbing_ml}]]}} {{rollresult=[[1d100+@{climbing_sb}]]}}"
						name="roll_ClimbingDevelop" class="skilldev-button"></button>
				<input type="number" name="attr_climbing_sb" class="skill-value" value="0">
				<input type="number" name="attr_climbing_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{climbing_name}}} {{rolltarget=[[{[[{[[@{climbing_ml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{climbing_ml}}}"
						name="roll_ClimbingSkillCheck"></button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_condition_name" value="Condition" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{condition_name}}} {{rolltarget=[[@{condition_ml}]]}} {{rollresult=[[1d100+@{condition_sb}]]}}"
						name="roll_ConditionDevelop" class="skilldev-button"></button>				
				<input type="number" name="attr_condition_sb" class="skill-value" value="0">
				<input type="number" name="attr_condition_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{condition_name}}} {{rolltarget=[[{[[{[[@{condition_ml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{condition_ml}}}"
						name="roll_ConditionSkillCheck"></button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_jumping_name" value="Jumping" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{jumping_name}}} {{rolltarget=[[@{jumping_ml}]]}} {{rollresult=[[1d100+@{jumping_sb}]]}}"
						name="roll_JumpingDevelop" class="skilldev-button"></button>					
				<input type="number" name="attr_jumping_sb" class="skill-value" value="0">
				<input type="number" name="attr_jumping_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{jumping_name}}} {{rolltarget=[[{[[{[[@{jumping_ml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{jumping_ml}}}"
						name="roll_JumpingSkillCheck"></button>
			</div>
			<div>		    
				<input type="text" class="skill-label" name="attr_ridingpersonal_name" value="Riding (Personal)" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{ridingpersonal_name}}} {{rolltarget=[[@{ridingpersonal_ml}]]}} {{rollresult=[[1d100+@{ridingpersonal_sb}]]}}"
						name="roll_RidingDevelop" class="skilldev-button"></button>	
				<input type="number" name="attr_ridingpersonal_sb" class="skill-value" value="0">
				<input type="number" name="attr_ridingpersonal_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{ridingpersonal_name}}} {{rolltarget=[[{[[{[[@{ridingpersonal_ml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{ridingpersonal_ml}}}"
						name="roll_RidingPersonalCheck"></button>
			</div>		
			<div class="harntooltip">		    
				<input type="text" class="skill-label" name="attr_ridinghorse_name" value="Riding EML" disabled="true">
				<div class="skill-header skill-value-small center">&nbsp;</div>
				<input type="text" name="attr_ridinghorse_sb" class="skill-value" value="na" readonly>
				<input name="attr_ridinghorse_ml" class="skill-value" readonly><span class="tooltiptext">Your effective ML for your current horse,<br> calculated based on personal riding skill and horse initiative</span>
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls riding @{hname}}} {{rolltarget=[[{[[{[[@{ridinghorse_ml} + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{ridinghorse_ml}}}"
						name="roll_RidingHorseCheck"></button>
			</div>				
			<div>
				<input type="text" class="skill-label" name="attr_stealth_name" value="Stealth" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{stealth_name}}} {{rolltarget=[[@{stealth_ml}]]}} {{rollresult=[[1d100+@{stealth_sb}]]}}"
						name="roll_StealthDevelop" class="skilldev-button"></button>				
				<input type="number" name="attr_stealth_sb" class="skill-value" value="0">
				<input type="number" name="attr_stealth_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{stealth_name}}} {{rolltarget=[[{[[{[[@{stealth_ml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{stealth_ml}}}"
						name="roll_StealthSkillCheck"></button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_throwing_name" value="Throwing" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{throwing_name}}} {{rolltarget=[[@{throwing_ml}]]}} {{rollresult=[[1d100+@{throwing_sb}]]}}"
						name="roll_ThrowingDevelop" class="skilldev-button"></button>				
				<input type="number" name="attr_throwing_sb" class="skill-value" value="0">
				<input type="number" name="attr_throwing_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{throwing_name}}} {{rolltarget=[[{[[{[[@{throwing_ml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{throwing_ml}}}"
						name="roll_ThrowingSkillCheck"></button>
			</div>
			<fieldset class="repeating_physicalskill">
				<div>
					<input type="text" name="attr_physicalskill_name" class="skill-label">
					<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{physicalskill_name}}} {{rolltarget=[[@{physicalskill_ml}]]}} {{rollresult=[[1d100+@{physicalskill_sb}]]}}"
						name="roll_PhysSkillDevelop" class="skilldev-button"></button>					
					<input type="number" name="attr_physicalskill_sb" class="skill-value" value="0">
					<input type="number" name="attr_physicalskill_ml" class="skill-value" value="0">
					<button type="roll"
							value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{physicalskill_name}}} {{rolltarget=[[{[[{[[@{physicalskill_ml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{physicalskill_ml}}}"
							name="roll_PhysicalSkillCheck"></button>
				</div>
			</fieldset>
		</div>
		<div class="col">
			<h4 class="section-head">Communication</h4>
			<div>
				<div class="skill-header skill-label">Skill</div>
				<div class="skill-header skill-value-small center">&nbsp;</div>
				<div class="skill-header skill-value center">SB</div>
				<div class="skill-header skill-value center">ML</div>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_awareness_name" value="Awareness" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{awareness_name}}} {{rolltarget=[[@{awareness_ml}]]}} {{rollresult=[[1d100+@{awareness_sb}]]}}"
						name="roll_AwarenessDevelop" class="skilldev-button"></button>				
				<input type="number" name="attr_awareness_sb" class="skill-value" value="0">
				<input type="number" name="attr_awareness_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{awareness_name}}} {{rolltarget=[[{[[{[[@{awareness_ml} - [[(@{universal_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{universal_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{awareness_ml}}}"
						name="roll_AwarenessSkillCheck"></button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_intrigue_name" value="Intrigue" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{intrigue_name}}} {{rolltarget=[[@{intrigue_ml}]]}} {{rollresult=[[1d100+@{intrigue_sb}]]}}"
						name="roll_IntrigueDevelop" class="skilldev-button"></button>					
				<input type="number" name="attr_intrigue_sb" class="skill-value" value="0">
				<input type="number" name="attr_intrigue_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{intrigue_name}}} {{rolltarget=[[{[[{[[@{intrigue_ml} - [[(@{universal_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{universal_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{intrigue_ml}}}"
						name="roll_IntrigueSkillCheck"></button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_oratory_name" value="Oratory" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{oratory_name}}} {{rolltarget=[[@{oratory_ml}]]}} {{rollresult=[[1d100+@{oratory_sb}]]}}"
						name="roll_OratoryDevelop" class="skilldev-button"></button>				
				<input type="number" name="attr_oratory_sb" class="skill-value" value="0">
				<input type="number" name="attr_oratory_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{oratory_name}}} {{rolltarget=[[{[[{[[@{oratory_ml} - [[(@{universal_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{universal_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{oratory_ml}}}"
						name="roll_OratorySkillCheck"></button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_rhetoric_name" value="Rhetoric" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{rhetoric_name}}} {{rolltarget=[[@{rhetoric_ml}]]}} {{rollresult=[[1d100+@{rhetoric_sb}]]}}"
						name="roll_RhetoricDevelop" class="skilldev-button"></button>				
				<input type="number" name="attr_rhetoric_sb" class="skill-value" value="0">
				<input type="number" name="attr_rhetoric_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{rhetoric_name}}} {{rolltarget=[[{[[{[[@{rhetoric_ml} - [[(@{universal_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{universal_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{rhetoric_ml}}}"
						name="roll_RhetoricSkillCheck"></button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_singing_name" value="Singing" disabled="true">
				<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{singing_name}}} {{rolltarget=[[@{singing_ml}]]}} {{rollresult=[[1d100+@{singing_sb}]]}}"
						name="roll_SingingDevelop" class="skilldev-button"></button>					
				<input type="number" name="attr_singing_sb" class="skill-value" value="0">
				<input type="number" name="attr_singing_ml" class="skill-value" value="0">
				<button type="roll"
						value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{singing_name}}} {{rolltarget=[[{[[{[[@{singing_ml} - [[(@{universal_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{universal_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{singing_ml}}}"
						name="roll_SingingSkillCheck"></button>
			</div>
			<fieldset class="repeating_communicationskill">
				<div>
					<input type="text" name="attr_communicationskill_name" class="skill-label">
					<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{communicationskill_name}}} {{rolltarget=[[@{communicationskill_ml}]]}} {{rollresult=[[1d100+@{communicationskill_sb}]]}}"
						name="roll_CommSkillDevelop" class="skilldev-button"></button>					
					<input type="number" name="attr_communicationskill_sb" class="skill-value" value="0">
					<input type="number" name="attr_communicationskill_ml" class="skill-value" value="0">
					<button type="roll"
							value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{communicationskill_name}}} {{rolltarget=[[{[[{[[@{communicationskill_ml} - [[(@{universal_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{universal_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{communicationskill_ml}}}"
							name="roll_CommunicationSkillCheck"></button>
				</div>
			</fieldset>
	
		</div>
	</div>
	<div class="3colrow row">
		<div class="col">
			<h4 class="section-head">Craft/Lore</h4>
			<div>
				<div class="skill-header skill-label">Skill</div>
				<div class="skill-header skill-value-small center">&nbsp;</div>
				<div class="skill-header skill-value center">SB</div>
				<div class="skill-header skill-value center">ML</div>
			</div>
			<fieldset class="repeating_loreskill">
				<div>
					<input type="text" name="attr_loreskill_name" class="skill-label">
					<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{loreskill_name}}} {{rolltarget=[[@{loreskill_ml}]]}} {{rollresult=[[1d100+@{loreskill_sb}]]}}"
						name="roll_LoreSkillDevelop" class="skilldev-button"></button>						
					<input type="number" name="attr_loreskill_sb" class="skill-value" value="0">
					<input type="number" name="attr_loreskill_ml" class="skill-value" value="0">
					<button type="roll"
							value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{loreskill_name}}} {{rolltarget=[[{[[{[[@{loreskill_ml} - [[(@{universal_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{universal_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{loreskill_ml}}}"
							name="roll_LoreSkillCheck"></button>
				</div>
			</fieldset>
	
		</div>
		<div class="col">
			<h4 class="section-head">Ritual</h4>
			<div>
				<div class="skill-header skill-label">Skill</div>
				<div class="skill-header skill-value-small center">&nbsp;</div>
				<div class="skill-header skill-value center">SB</div>
				<div class="skill-header skill-value center">ML</div>
			</div>
			<fieldset class="repeating_ritualskill">
				<div>
					<input type="text" name="attr_ritualskill_name" class="skill-label">
					<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{ritualskill_name}}} {{rolltarget=[[@{ritualskill_ml}]]}} {{rollresult=[[1d100+@{ritualskill_sb}]]}}"
						name="roll_RitualSkillDevelop" class="skilldev-button"></button>					
					<input type="number" name="attr_ritualskill_sb" class="skill-value" value="0">
					<input type="number" name="attr_ritualskill_ml" class="skill-value" value="0">
					<button type="roll"
							value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{ritualskill_name}}} {{rolltarget=[[{[[{[[@{ritualskill_ml} - [[(@{universal_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{universal_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{ritualskill_ml}}}"
							name="roll_RitualSkillCheck"></button>
				</div>
			</fieldset>
		</div>
		<div class="col">
			<h4 class="section-head">Magic</h4>
			<div>
				<div class="skill-header skill-label">Skill</div>
				<div class="skill-header skill-value-small center">&nbsp;</div>
				<div class="skill-header skill-value center" value="0">SB</div>
				<div class="skill-header skill-value center" value="0">ML</div>
			</div>
			<fieldset class="repeating_magicskill">
				<div>
					<input type="text" name="attr_magicskill_name" class="skill-label">
					<button type="roll"
						value="&{template:skilldev} {{character_name=@{name}}} {{rolldesc=tries to improve @{magicskill_name}}} {{rolltarget=[[@{magicskill_ml}]]}} {{rollresult=[[1d100+@{magicskill_sb}]]}}"
						name="roll_MagicSkillDevelop" class="skilldev-button"></button>						
					<input type="number" name="attr_magicskill_sb" class="skill-value" value="0">
					<input type="number" name="attr_magicskill_ml" class="skill-value" value="0">
					<button type="roll" value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls @{magicskill_name}}} {{rolltarget=[[{[[{[[@{magicskill_ml} - [[(@{universal_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{universal_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{magicskill_ml}}}"
							name="roll_MagicSkillCheck"></button>
				</div>
			</fieldset>
	
		</div>
	</div>
</div>

<hr class="hr">

<div> <!-- COMBAT PROFILE --> 
	<div class="row">
		<h2>Combat Profile</h2>
		<div class="col7-sm"><!-- Combat stats, penalties, injuries and load carried -->
			<div class="row">
				<div class="col"><!-- Combat Stats-->
						<h4 class="section-head">Combat Stats</h4>
						<div>
							<div class="combat-label">Combat Init</div>
							<input type="number" name="attr_combat_initiative" class="stat-value" value="0" readonly>
								<button type="roll"
									value="&{template:custom} {{color=harn}} {{title=Turn Order}} {{Initiative=[[@{combat_initiative} &{tracker}]]}} {{desc=@{name} adds their Initiative (adjusted for penalties) to the Turn Order}}"
								name="roll_CombatInitiativeToTurn" class="turnorder-button harntooltip">
									<span class="tooltiptext">Add current initiative to Turn Order<br>Remember to select your token!</span>
								</button>
						</div>
						<div>
							<div class="combat-label">Endurance</div>
							<input type="number" name="attr_combat_endurance" class="stat-value" value="0" readonly>
						</div>
						<div>
							<div class="combat-label">ArmourCarry</div>
							<input type="number" name="attr_combat_armourcarry" class="stat-value" value="0" readonly>
						</div>
						<div>
							<div class="combat-label">Dexterity</div>
							<input type="number" name="attr_dex" readonly class="stat-value" readonly>
						</div>
						<div>
							<div class="combat-label">Agility</div>
							<input type="number" name="attr_agl" readonly class="stat-value" readonly>
						</div>
						<div>
							<div class="combat-label">Move(hex)</div>
							<input type="number" name="attr_combat_move" class="stat-value" value="0" readonly>
						</div>
						<div>
							<div class="combat-label">Dodge</div>
							<input type="number" name="attr_dodge_ml" class="stat-value" readonly>
							<button type="roll"
									value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls dodge}} {{rolltarget=[[{[[{[[@{dodge_ml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{dodge_ml}}}"
									name="roll_CombatDodgeCheck"></button>
					
						</div>
				</div>
				<div class="col"><!-- Load Carried -->
				<h4 class="section-head">Load Carried</h4>
					<div>
						<input type="text" name="attr_load_weapons" class="info-label" value="Weapons" readonly>
						<input type="number" name="attr_load_weapons_total" value="0" class="stat-value" readonly>
					</div>
					<div>
						<input type="text" name="attr_load_armor" class="info-label" value="Armor" readonly>
						<input type="number" name="attr_load_armor_total" class="stat-value" value="0" class="number-value" readonly>
					</div>
					<div>
						<input type="text" name="attr_load_inventory" class="info-label" value="Inventory" readonly>
						<input type="number" name="attr_load_inventory_total" class="stat-value" value="0" class="number-value" readonly>
					</div>
					<div>
						<div class="skill-header">Total Weight:</div>
						<input type="number" name="attr_load_total" class="stat-value" value="0" readonly>
					</div>
					<div>
						<div class="info-label right">Mounted? </div>
						<div class="stat-value center"><input type="checkbox" name="attr_is_mounted" value="1"><span></span></div>
					</div>
				</div>
				
				<div class="col"><!-- Character Penalties -->
					<h4 class="section-head">Penalties</h4>
					<div>
						<div class="combat-label font-light">Injury Lvls</div>
						<input type="number" name="attr_injury_total" value="0" class="stat-value" readonly>
					</div>
					<div>
						<div class="combat-label font-light">Fatigue</div>
						<input type="number" name="attr_fatigue_total" class="stat-value">
					</div>
					<div>
						<div class="combat-label font-heavy">Universal</div>
						<input type="number" class="stat-value" name="attr_universal_penalty" readonly>
					</div>
					<div>
						<div class="combat-label font-light">Encumb.</div>
						<input type="number" name="attr_encumbrance" class="stat-value" value="0" readonly>
					</div>
					<div>
						<div class="combat-label font-heavy">Physical</div>
						<input type="number" name="attr_physical_penalty" class="stat-value" value="0" readonly>
					</div>
				</div>
			</div>
		
			<div class="row"><!-- Injuries -->
				<h4 class="section-head">Injuries</h4>
				<div>
					<div class="skill-header skill-label">Location/Type</div>
					<div class="skill-header stat-value center">SV</div>
					<div class="skill-header skill-value center">LvL</div>
					<div class="skill-header skill-value center">HR</div>
					<div class="skill-header skill-value center">Day</div>			
					<div class="skill-value">&nbsp;</div>
					<div class="skill-header check-col center">Inf</div>
				</div>
				<fieldset class="repeating_injury">
					<div>
						<input type="text" name="attr_injury_location" class="skill-label">
						<select name="attr_injury_severity" class="stat-value">
							<option value="m">M</option>
							<option value="s">S</option>
							<option value="g">G</option>
							<option value="k">K</option>
						</select>
						<input type="number" name="attr_injury_level" class="skill-value" value="0">
						<input type="number" name="attr_injury_healingroll" class="skill-value" value="0">
						<input type="number" name="attr_injury_day" class="skill-value" value="0">				
						<div class="skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=rolls a healing check}} {{infected=[[@{injury_infected_feedback}]]}} {{rolltarget=[[{[[{[[(@{injury_healingroll} * [[@{combat_endurance}]]) + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[0]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=[[@{injury_healingroll} * [[@{combat_endurance}]]]]}} {{note=@{injury_location} @{injury_severity}@{injury_level} h@{injury_healingroll}}}" name="roll_healingcheck"></button></div>
						<div class="check-col center">
							<input type="checkbox" name="attr_injury_infected"><span></span>
							<input type="hidden" name="attr_injury_infected_feedback" value="0" readonly>
						</div>
					</div>
				</fieldset>
				<hr class="hr">
				<div class="row panel">
					<button type="roll" class="injuryroll"
							value="&{template:check-lt} {{character_name=@{name}}} {{rolldesc=rolls shock}} {{rolltarget=[[@{combat_endurance}]]}} {{rollresult=[[[[@{universal_penalty}]]d6]]}} {{base=@{combat_endurance}}} {{rolltype=[[@{universal_penalty}]]d6}} {{penalty=[[0]]}}"
							name="roll_ShockCheck">Shock
					</button>
					<button type="roll" class="injuryroll"
							value="&{template:check-lt} {{character_name=@{name}}} {{rolldesc=rolls stumble}} {{rolltarget=[[@{agl}]]}} {{rollresult=[[[[3d6]] + @{universal_penalty}]]}} {{base=@{agl}}} {{rolltype=3d6+[[@{universal_penalty}]]}} {{penalty=[[0]]}}"
							name="roll_StumbleCheck">Stumble
					</button>
					<button type="roll" class="injuryroll"
							value="&{template:check-lt} {{character_name=@{name}}} {{rolldesc=rolls fumble}} {{rolltarget=[[@{dex}]]}} {{rollresult=[[[[3d6]] + @{universal_penalty}]]}} {{base=@{dex}}} {{rolltype=3d6+[[@{universal_penalty}]]}} {{penalty=[[0]]}}"
							name="roll_FumbleCheck">Fumble
					</button>
				</div>
			</div>
	

		</div>
	
		<div class="col gutters"><!-- Armor Protection -->
			<h4 class="section-head">Armor Protection</h4>
			<div>
				<div class="info-label skill-header">Location</div>
				<div class="skill-label skill-header">Compound Layers</div>
				<div class="skill-value skill-header center">B</div>
				<div class="skill-value skill-header center">E</div>
				<div class="skill-value skill-header center">P</div>
				<div class="skill-value skill-header center">F</div>
			</div>
			<div>
				<div class="info-label">Skull</div>
				<input type="text" name="attr_skull_layers" class="skill-label">
				<input type="number" name="attr_skull_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_skull_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_skull_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_skull_f" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="info-label">Face</div>
				<input type="text" name="attr_face_layers" class="skill-label">
				<input type="number" name="attr_face_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_face_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_face_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_face_f" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="info-label">Neck</div>
				<input type="text" name="attr_neck_layers" class="skill-label">
				<input type="number" name="attr_neck_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_neck_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_neck_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_neck_f" class="skill-value" value="0" readonly>
			</div>
			<hr class="hr">
			<div>
				<div class="info-label">Shoulder</div>
				<input type="text" name="attr_shoulder_layers" class="skill-label">
				<input type="number" name="attr_shoulder_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_shoulder_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_shoulder_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_shoulder_f" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="info-label">Upper Arm</div>
				<input type="text" name="attr_upperarm_layers" class="skill-label">
				<input type="number" name="attr_upperarm_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_upperarm_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_upperarm_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_upperarm_f" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="info-label">Elbow</div>
				<input type="text" name="attr_elbow_layers" class="skill-label">
				<input type="number" name="attr_elbow_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_elbow_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_elbow_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_elbow_f" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="info-label">Forearm</div>
				<input type="text" name="attr_forearm_layers" class="skill-label">
				<input type="number" name="attr_forearm_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_forearm_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_forearm_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_forearm_f" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="info-label">Hand</div>
				<input type="text" name="attr_hand_layers" class="skill-label">
				<input type="number" name="attr_hand_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_hand_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_hand_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_hand_f" class="skill-value" value="0" readonly>
			</div>
			<hr class="hr">
			<div>
				<div class="info-label">Thorax</div>
				<input type="text" name="attr_thorax_layers" class="skill-label">
				<input type="number" name="attr_thorax_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_thorax_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_thorax_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_thorax_f" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="info-label">Abdomen</div>
				<input type="text" name="attr_abdomen_layers" class="skill-label">
				<input type="number" name="attr_abdomen_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_abdomen_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_abdomen_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_abdomen_f" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="info-label">Hip</div>
				<input type="text" name="attr_hip_layers" class="skill-label">
				<input type="number" name="attr_hip_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_hip_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_hip_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_hip_f" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="info-label">Groin</div>
				<input type="text" name="attr_groin_layers" class="skill-label">
				<input type="number" name="attr_groin_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_groin_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_groin_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_groin_f" class="skill-value" value="0" readonly>
			</div>
			<hr class="hr">
			<div>
				<div class="info-label">Thigh</div>
				<input type="text" name="attr_thigh_layers" class="skill-label">
				<input type="number" name="attr_thigh_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_thigh_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_thigh_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_thigh_f" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="info-label">Knee</div>
				<input type="text" name="attr_knee_layers" class="skill-label">
				<input type="number" name="attr_knee_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_knee_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_knee_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_knee_f" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="info-label">Calf</div>
				<input type="text" name="attr_calf_layers" class="skill-label">
				<input type="number" name="attr_calf_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_calf_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_calf_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_calf_f" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="info-label">Foot</div>
				<input type="text" name="attr_foot_layers" class="skill-label">
				<input type="number" name="attr_foot_b" class="skill-value" value="0" readonly>
				<input type="number" name="attr_foot_e" class="skill-value" value="0" readonly>
				<input type="number" name="attr_foot_p" class="skill-value" value="0" readonly>
				<input type="number" name="attr_foot_f" class="skill-value" value="0" readonly>
			</div>
		</div>
	
	</div>


	<div class="row"><!-- Carried Weapons -->
		<h4 class="section-head">Carried Weapons</h4>
		<div>
			<div class="skill-header weapon-label">Weapon</div>
			<div class="skill-header checkboxwidth">C</div>
			<div class="skill-header skill-value-small center">WGT</div>
			<div class="skill-header skill-value-small center">WQ</div>
			<div class="skill-header skill-value-small center">&nbsp;</div>
			<div class="skill-header skill-value-small center">ATK</div>
			<div class="skill-header skill-value-small center">DEF</div>
			<div class="skill-header skill-value center">HM</div>
			<div class="skill-header skill-value-small center">&nbsp;</div>
			<div class="skill-header skill-value-small center">B</div>
			<div class="skill-header skill-value-small center">E</div>
			<div class="skill-header skill-value-small center">P</div>
			<div class="skill-header skill-value-small center">F</div>
			<div class="skill-header skill-value center">ML</div>
			<div class="skill-header skill-value center">AML</div>
			<div class="skill-header skill-value-small center">&nbsp;</div>
			<div class="skill-header skill-value center">DML</div>
			<div class="skill-header skill-value-small center">&nbsp;</div>
			<div class="skill-header skill-label-large">Note</div>
		</div>
		<div>
			<input type="text" name="attr_punch_weapon_name" class="weapon-label" disabled="true" value="Punch">
			<div class="skill-header checkboxwidth">&nbsp;</div>
			<input type="number" name="attr_punch_weapon_wgt" class="skill-value-small" disabled="true" value="0">
			<input type="number" name="attr_punch_weapon_wq" class="skill-value-small" disabled="true" value="0">
			<div class="skill-value-small"><button type="roll"  value="&{template:check-lt} {{character_name=@{name}}} {{rolldesc=rolls weapon break: @{punch_weapon_name}}} {{rolltarget=[[@{punch_weapon_wq}]]}} {{rollresult=[[3d6]]}} {{base=@{punch_weapon_wq}}} {{rolltype=3d6}} {{penalty=[[0]]}}" name="roll_unarmedweaponbreakcheck"></button></div>
			<input type="number" name="attr_punch_weapon_atk" class="skill-value-small" disabled="true" value="0">
			<input type="number" name="attr_punch_weapon_def" class="skill-value-small" disabled="true" value="15">
			<input type="number" name="attr_punch_weapon_hm" class="skill-value" disabled="true" value="0">
			<div class="skill-header skill-value-small center">&nbsp;</div>
			<input type="number" name="attr_punch_weapon_b" class="skill-value-small" disabled="true" value="0">
			<input type="number" name="attr_punch_weapon_e" class="skill-value-small" disabled="true" value="0">
			<input type="number" name="attr_punch_weapon_p" class="skill-value-small" disabled="true" value="0">
			<input type="number" name="attr_punch_weapon_f" class="skill-value-small" disabled="true" value="0">
			<input type="number" name="attr_punch_weapon_ml" class="skill-value" readonly>
			<input type="number" name="attr_punch_weapon_aml" class="skill-value" readonly>
			<div class="skill-value-small"><button type="roll" value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=attacks with @{punch_weapon_name}}} {{rolltarget=[[{[[{[[@{punch_weapon_aml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{punch_weapon_aml}}} {{note=b(@{punch_weapon_b}) E(@{punch_weapon_e}) P(@{punch_weapon_p})}}"
												name="roll_UnarmedWeaponAMLSkillCheck"></button></div>
			<input type="number" name="attr_punch_weapon_dml" class="skill-value" readonly>
			<div class="skill-value-small"><button type="roll" value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=blocks with a @{punch_weapon_name}}} {{rolltarget=[[{[[{[[@{punch_weapon_dml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{punch_weapon_dml}}}" name="roll_unarmedweapondmlskillcheck"></button></div>
			
			<input type="text" name="attr_punch_weapon_note" class="skill-label-medium">
		</div>
		<div>
			<input type="text" name="attr_kick_weapon_name" class="weapon-label" disabled="true" value="Kick">
			<div class="skill-header checkboxwidth">&nbsp;</div>
			<input type="number" name="attr_kick_weapon_wgt" class="skill-value-small" disabled="true" value="0">
			<input type="number" name="attr_kick_weapon_wq" class="skill-value-small" disabled="true" value="0">
			<div class="skill-value-small"><button type="roll"  value="&{template:check-lt} {{character_name=@{name}}} {{rolldesc=rolls weapon break: @{kick_weapon_name}}} {{rolltarget=[[@{kick_weapon_wq}]]}} {{rollresult=[[3d6]]}} {{base=@{kick_weapon_wq}}} {{rolltype=3d6}} {{penalty=[[0]]}}" name="roll_unarmedweaponbreakcheck"></button></div>
			<input type="number" name="attr_kick_weapon_atk" class="skill-value-small" disabled="true" value="5">
			<input type="number" name="attr_kick_weapon_def" class="skill-value-small" disabled="true" value="5">
			<input type="number" name="attr_kick_weapon_hm" class="skill-value" disabled="true" value="0">
			<div class="skill-header skill-value-small center">&nbsp;</div>
			<input type="number" name="attr_kick_weapon_b" class="skill-value-small" disabled="true" value="1">
			<input type="number" name="attr_kick_weapon_e" class="skill-value-small" disabled="true" value="0">
			<input type="number" name="attr_kick_weapon_p" class="skill-value-small" disabled="true" value="0">
			<input type="number" name="attr_kick_weapon_f" class="skill-value-small" disabled="true" value="0">
			<input type="number" name="attr_kick_weapon_ml" class="skill-value" readonly>
			<input type="number" name="attr_kick_weapon_aml" class="skill-value" readonly>
			<div class="skill-value-small"><button type="roll" value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=attacks with a @{kick_weapon_name}}} {{rolltarget=[[{[[{[[@{kick_weapon_aml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{kick_weapon_aml}}} {{note=b(@{kick_weapon_b}) E(@{kick_weapon_e}) P(@{kick_weapon_p})}}"
												name="roll_UnarmedWeaponAMLSkillCheck"></button></div>
			<input type="number" name="attr_kick_weapon_dml" class="skill-value" readonly>
			<div class="skill-value-small"><button type="roll" value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=defends with a @{kick_weapon_name}}} {{rolltarget=[[{[[{[[@{kick_weapon_dml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{kick_weapon_dml}}}" name="roll_unarmedweapondmlskillcheck"></button></div>
			
			<input type="text" name="attr_kick_weapon_note" class="skill-label-medium">
		</div>	
		
		<fieldset class="repeating_weapon weapons-carried">
			<input type="hidden" name="attr_weapon_iscarried" class="display-carried-weapon"> <!-- this is filled with the value set by the is carried checkbox above-->
			<div class="weapon-display"> 
				<input type="text" name="attr_weapon_name" class="weapon-label" readonly>
				<input type="checkbox" name="attr_weapon_iscarried" value="1">
				<input type="number" name="attr_weapon_wgt" class="skill-value-small" readonly>
				<input type="number" name="attr_weapon_wq" class="skill-value-small" readonly>
				<div class="skill-value-small">
					<button type="roll"  
					value="&{template:check-lt} {{character_name=@{name}}} {{rolldesc=rolls weapon break: @{weapon_name}}} {{rolltarget=[[@{weapon_wq}]]}} {{rollresult=[[3d6]]}} {{base=@{weapon_wq}}} {{rolltype=3d6}} {{penalty=[[0]]}}" name="roll_WeaponBreakCheck">
					</button>
				</div>
				<input type="number" name="attr_weapon_atk" class="skill-value-small" readonly>
				<input type="number" name="attr_weapon_def" class="skill-value-small" readonly>
				<input type="number" name="attr_weapon_hm" class="skill-value" readonly>
				<div class="skill-value-small">
					<button type="roll"
					value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=attacks with a @{weapon_name}}} {{rolltarget=[[{[[{[[@{weapon_aml} + @{weapon_hm} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[[[(@{physical_penalty})*5]] + [[-1*@{weapon_hm}]]]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{weapon_aml}}} {{note=b(@{weapon_b}) E(@{weapon_e}) P(@{weapon_p}) F(@{weapon_f})}}" name="roll_WeaponHMAMLSkillCheck">
					</button>
				</div>			
				<input type="number" name="attr_weapon_b" class="skill-value-small" readonly>
				<input type="number" name="attr_weapon_e" class="skill-value-small" readonly>
				<input type="number" name="attr_weapon_p" class="skill-value-small" readonly>
				<input type="number" name="attr_weapon_f" class="skill-value-small" readonly>
				<input type="number" name="attr_weapon_ml" class="skill-value" readonly>
				<input type="number" name="attr_weapon_aml" class="skill-value" readonly>  
				<div class="skill-value-small">
					<button type="roll"
					value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=attacks with a @{weapon_name}}} {{rolltarget=[[{[[{[[@{weapon_aml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{weapon_aml}}} {{note=b(@{weapon_b}) E(@{weapon_e}) P(@{weapon_p}) F(@{weapon_f})}}" name="roll_WeaponAMLSkillCheck">
					</button>
				</div>
				<input type="number" name="attr_weapon_dml" class="skill-value" readonly>
				<div class="skill-value-small">
					<button type="roll" 
					value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=blocks with a @{weapon_name}}} {{rolltarget=[[{[[{[[@{weapon_dml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{weapon_dml}}} {{note=wq @{weapon_wq}}}" name="roll_WeaponDMLSkillCheck"></button>
				</div>
				
				<input type="text" name="attr_weapon_note" class="skill-label-medium" readonly>
			</div>
		</fieldset>
	
	</div> <!-- end carried weapons -->
	
	<div class="row"> <!-- carried missile weapons -->

	<h4 class="section-head">Carried Missile Weapons</h4>
	<div>
		<div class="skill-header profile-label">Missile Weapon</div>
		<div class="skill-header checkboxwidth">C</div>
		<div class="skill-header skill-value-small center">P</div>
		<div class="skill-header skill-value-small center">ML</div>
		<div class="skill-header stat-value center">Short</div>
		<div class="skill-header skill-value center">AML</div>
		<div class="skill-header skill-value-small center">Dmg</div>
		<div class="skill-header skill-value-small center">&nbsp;</div>
		<div class="skill-header stat-value center">Medium</div>
		<div class="skill-header skill-value center">AML</div>
		<div class="skill-header skill-value-small center">Dmg</div>
		<div class="skill-header skill-value-small center">&nbsp;</div>
		<div class="skill-header stat-value center">Long</div>
		<div class="skill-header skill-value center">AML</div>
		<div class="skill-header skill-value-small center">Dmg</div>
		<div class="skill-header skill-value-small center">&nbsp;</div>
		<div class="skill-header stat-value center">Extreme</div>
		<div class="skill-header skill-value center">AML</div>
		<div class="skill-header skill-value-small center">Dmg</div>
		<div class="skill-header skill-value-small center">&nbsp;</div>
		<div class="skill-header skill-value">Ammo</div>
	</div>

	<fieldset class="repeating_missileweapon weapons-carried">
	<input type="hidden" name="attr_missileweapon_iscarried" class="display-carried-missileweapon"> <!-- this is filled with the value set by the is carried checkbox above-->
		<div class="missileweapon-display">
			<input type="text" name="attr_missileweapon_name" class="profile-label" readonly>
			<input type="checkbox" name="attr_missileweapon_iscarried" value="1">
			<input type="number" name="attr_missileweapon_p" class="skill-value-small" value="0" readonly>
			<input type="number" name="attr_missileweapon_ml" class="skill-value-small" value="0" readonly>
			<input type="number" name="attr_missileweapon_short" class="stat-value" value="0" readonly>
			<input type="number" name="attr_missileweapon_short_aml" class="skill-value" value="0" readonly>
			<input type="number" name="attr_missileweapon_short_dmg" class="skill-value-small" value="0" readonly>
			<div class="skill-value-small">
				<button type="roll"
				value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=attacks with a @{missileweapon_name} at Short Range}} {{rolltarget=[[{[[{[[@{missileweapon_short_aml} - [[(@{physical_penalty})*5]] - [[(@{is_mounted})*10]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5 +(@{is_mounted})*10]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{missileweapon_short_aml}}} {{note=P(@{missileweapon_short_dmg}) }}" name="roll_MissileWeaponShortSkillCheck">
				</button>
			</div>				
			<input type="number" name="attr_missileweapon_medium" class="stat-value" value="0" readonly>
			<input type="number" name="attr_missileweapon_medium_aml" class="skill-value" value="0" readonly>
			<input type="number" name="attr_missileweapon_medium_dmg" class="skill-value-small" value="0" readonly"> 
			<div class="skill-value-small">
				<button type="roll"
				value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=attacks with a @{missileweapon_name} at Medium Range}} {{rolltarget=[[{[[{[[@{missileweapon_medium_aml} - [[(@{physical_penalty})*5]] - [[(@{is_mounted})*10]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5 +(@{is_mounted})*10]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{missileweapon_medium_aml}}} {{note=P(@{missileweapon_medium_dmg})}}" name="roll_MissileWeaponMediumSkillCheck">
				</button>
			</div>
			<input type="number" name="attr_missileweapon_long" class="stat-value" value="0" readonly>
			<input type="number" name="attr_missileweapon_long_aml" class="skill-value" value="0" readonly>
			<input type="number" name="attr_missileweapon_long_dmg" class="skill-value-small" value="0" readonly>
			<div class="skill-value-small">
				<button type="roll"
				value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=attacks with a @{missileweapon_name} at Long Range}} {{rolltarget=[[{[[{[[@{missileweapon_long_aml} - [[(@{physical_penalty})*5]] - [[(@{is_mounted})*10]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5 +(@{is_mounted})*10]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{missileweapon_long_aml}}} {{note=P(@{missileweapon_long_dmg})}}" name="roll_MissileWeaponLongSkillCheck">
				</button>
			</div>
			<input type="number" name="attr_missileweapon_extreme" class="stat-value" value="0" readonly>					
			<input type="number" name="attr_missileweapon_extreme_aml" class="skill-value" value="0" readonly>
			<input type="number" name="attr_missileweapon_extreme_dmg" class="skill-value-small" value="0" readonly>
			<div class="skill-value-small">
				<button type="roll"
				value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=attacks with a @{missileweapon_name} at Extreme Range}} {{rolltarget=[[{[[{[[@{missileweapon_extreme_aml} - [[(@{physical_penalty})*5]] - [[(@{is_mounted})*10]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5 +(@{is_mounted})*10]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{missileweapon_extreme_aml}}} {{note=P(@{missileweapon_extreme_dmg})}}" name="roll_MissileWeaponExtremeSkillCheck">
				</button>
			</div>
			<input type="number" name="attr_missileweapon_ammo" class="skill-value">
		</div>
	</fieldset>
	
   </div> <!-- end carried missile weapons -->
	
	
</div>

<hr class="hr">

<div class="row"> <!-- MAGIC & RELIGION --> 
	<div class="col-magic">
		<h2 class="header-with-options">Magic & Religon</h2>
			<span class="indent300">Show: </span>
			<input type="checkbox" name="attr_show_spells" class="toggle-show-spells" />
			<span>Spells</span>
			<input type="checkbox" name="attr_show_rituals" class="toggle-show-rituals" />
			<span>Rituals</span>	
			<input type="checkbox" name="attr_show_psionic" class="toggle-show-psionic" />
			<span>Psionic</span>
	
		<div class="row mr-spells">
			<h4 class="section-head">Spells</h4>
			<div>
				<div class="profile-label skill-header">Name</div>
				<div class="info-label skill-header">Convocation</div>
				<div class="skill-value-small skill-header center">Lvl</div>
				<div class="skill-value skill-header center">EML</div>
				<div class="skill-value skill-header">&nbsp;</div>
				<div class="spell-note skill-header">Notes</div>
			</div>
			<fieldset class="repeating_spells">
				<div>
					<input type="text" name="attr_spell_name" class="profile-label">
					<input type="text" name="attr_spell_convocation" class="info-label">
					<input type="number" name="attr_spell_level" class="skill-value-small" value="0">
					<input type="number" name="attr_spell_eml" class="skill-value" value="0">
					<div class="skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=casts @{spell_name}(@{spell_convocation})}} {{rolltarget=[[{[[{[[@{spell_eml} - [[(@{universal_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{universal_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{spell_eml}}} {{note=@{spell_note}}}" name="roll_spellcastcheck"></button></div>
					<input type="text" name="attr_spell_note" class="spell-note">
				</div>
			</fieldset>
		</div>
		<div class="row mr-rituals">
			<h4 class="section-head">Rituals</h4>
			<div>
				<div class="profile-label skill-header">Name</div>
				<div class="info-label skill-header">Diety</div>
				<div class="skill-value-small skill-header center">Lvl</div>
				<div class="skill-value-small skill-header center">EML</div>
				<div class="skill-value skill-header">&nbsp;</div>
				<div class="spell-note skill-header">Notes</div>
			</div>
			<fieldset class="repeating_rituals">
				<div>
					<input type="text" name="attr_ritual_name" class="profile-label">
					<input type="text" name="attr_ritual_religion" class="info-label">
					<input type="number" name="attr_ritual_level" class="skill-value-small" value="0">
					<input type="number" name="attr_ritual_eml" class="skill-value-small" value="0">
					<div class="skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=performs @{ritual_name}(@{ritual_religion})}} {{rolltarget=[[{[[{[[@{ritual_eml} - [[(@{universal_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{universal_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{ritual_eml}}} {{note=@{ritual_note}}}" name="roll_ritualcheck"></button></div>
					<input type="text" name="attr_ritual_note" class="spell-note">
				</div>
			</fieldset>
		</div>
		<div class="row mr-psionic">
			<h4 class="section-head">Psionic Talents</h4>
			<div>
				<div class="skill-label skill-header">Talent</div>
				<div class="stat-value skill-header">Fatigue</div>
				<div class="skill-value-small skill-header center">Time</div>
				<div class="skill-value-small skill-header center">EML</div>
				<div class="skill-value skill-header">&nbsp;</div>
				<div class="spell-note skill-header">Notes</div>
			</div>
			<fieldset class="repeating_psionics">
				<div>
					<input type="text" name="attr_talent_name" class="skill-label">
					<input type="number" name="attr_talent_fatigue" class="stat-value" value="0">
					<input type="number" name="attr_talent_time" class="skill-value-small" value="">
					<input type="number" name="attr_talent_eml" class="skill-value-small" value="0">
					<div class="skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=invokes @{talent_name}}} {{rolltarget=[[{[[{[[@{talent_eml} - [[(@{universal_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{universal_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{talent_eml}}} {{note=(@{talent_time}); @{talent_note}}}" name="roll_talentcheck"></button></div>
					<input type="text" name="attr_talent_note" class="spell-note">
				</div>
			</fieldset>
		</div>
	</div>
	<div class="col2-sm">
		<div class="row">
			<h2>&nbsp;</h2>
			<h4 class="section-head">Piety</h4>
			<div>
				<div class="info-label skill-header">God</div>
				<div class="skill-value skill-header center">Pts</div>
			</div>
			<fieldset class="repeating_piety">
				<div>
					<input type="text" name="attr_piety_name" class="info-label">
					<input type="number" name="attr_piety_points" class="skill-value" value="0">
				</div>
			</fieldset>
				
		</div>
	</div> 
</div>

<hr class="hr">
 
<div class="row"> <!-- HORSE -->
	<h2>Horse - <span name="attr_hname" value="@{hname}"></span></h2>
	<div class="row">
		<div class="col">
			<div>
				<div class="info-label">Horse Name</div>
				<input type="text" name="attr_hname" class="info-input">
			</div>
		</div>
		<div class="col">
			<div>
				<div class="info-label">Horse Breed</div>
				<select name="attr_hspecies" class="skill-label">
					<option value="asil">Asil</option>
					<option value="goklan">Goklan</option>
				</select>
				
			</div>
		</div>
		<div class="col">			
			<div>
				<div class="info-label">Gender</div>
				<select name="attr_hgender" class="skill-label">
					<option value="hengst">Hengst</option>
					<option value="merrie">Merrie</option>
				</select>
			</div>
		</div>
	</div>	
	<div class="row">
		<div class="col3-sm">
			<h4 class="section-head">Attributes</h4>
			<div>
				<div class="stat-label font-heavy">STR</div>
				<div class="skill-value-small"><input type="number" name="attr_hstr" class="skill-value" value="0"></div>
				<div class="stat-label font-heavy">INT</div>
				<div class="skill-value-small"><input type="number" name="attr_hint" class="skill-value" value="0"></div>
			</div>
			<div>
				<div class="stat-label font-heavy">STA</div>
				<div class="skill-value-small"><input type="number" name="attr_hsta" class="skill-value" value="0"></div>
				<div class="stat-label font-heavy">AURA</div>
				<div class="skill-value-small"><input type="number" name="attr_haura" class="skill-value" value="0"></div>
			</div>
			<div>
				<div class="stat-label font-heavy">AGL</div>
				<div class="skill-value-small"><input type="number" name="attr_hagl" class="skill-value" value="0"></div>
				<div class="stat-label font-heavy">WILL</div>
				<div class="skill-value-small"><input type="number" name="attr_hwill" class="skill-value" value="0"></div>
			</div>
			<div>
				<div class="stat-label  font-heavy">EYE</div>
				<div class="skill-value-small"><input type="number" name="attr_heye" class="skill-value" value="0"></div>
				<div class="stat-label font-heavy">Move</div>
				<div class="skill-value-small"><input type="number" name="attr_hmove" class="skill-value" value="0"></div>
			</div>
			<div>
				<div class="stat-label font-heavy">HRG</div>
				<div class="skill-value-small"><input type="number" name="attr_hhrg" class="skill-value" value="0"></div>
				<div class="stat-label font-heavy">SML</div>
				<div class="skill-value-small"><input type="number" name="attr_hsmell" class="skill-value" value="0"></div>
			</div>
			<div>
				&nbsp;
			</div>
			<div align="center">			
				<div class="info-label">Load Limit</div>
				<div class="stat-value"><input type="number" name="attr_hloadlimit" class="stat-value" readonly></div>
			</div>
		</div>
		<div class="col">
			<h4 class="section-head">Abilities</h4>
					<div>
				<div class="skill-header skill-label">Skill</div>
				<div class="skill-header skill-value center">SB</div>
				<div class="skill-header skill-value center">ML</div>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_hawareness_name" value="Awareness" disabled="true">
				<input type="number" name="attr_hawareness_sb" class="skill-value" value="0">
				<input type="number" name="attr_hawareness_ml" class="skill-value" value="0">
				<button type="roll"
				    value="&{template:rollcheck} {{character_name=@{hname}}} {{rolldesc=rolls @{hawareness_name}}} {{rolltarget=[[{[[{[[@{hawareness_ml} - [[(@{hphysical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{hphysical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{hawareness_ml}}}"
                    name="roll_HorseAwarenessCheck">
				
				</button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_hdodge_name" value="Dodge" disabled="true">
				<input type="number" name="attr_hdodge_sb" class="skill-value" value="0">
				<input type="number" name="attr_hdodge_ml" class="skill-value" value="0">
				<button type="roll"
				    value="&{template:rollcheck} {{character_name=@{hname}}} {{rolldesc=rolls @{hdodge_name}}} {{rolltarget=[[{[[{[[@{hdodge_ml} - [[(@{hphysical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{hphysical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{hdodge_ml}}}"
                    name="roll_HorseDodgeCheck">
				
				</button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_hinitiative_name" value="Horse Initiative" disabled="true">
				<input type="number" name="attr_hinitiative_sb" class="skill-value" value="0">
				<input type="number" name="attr_hinitiative_ml" class="skill-value" value="0">
				<button type="roll"
				    value="&{template:rollcheck} {{character_name=@{hname}}} {{rolldesc=rolls @{hinitiative_name}}} {{rolltarget=[[{[[{[[@{hinitiative_ml} - [[(@{hphysical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{hphysical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{hinitiative_ml}}}"
                    name="roll_HorseInitiativeCheck">
				
				</button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_hjumping_name" value="Jumping" disabled="true">
				<input type="number" name="attr_hjumping_sb" class="skill-value" value="0">
				<input type="number" name="attr_hjumping_ml" class="skill-value" value="0">
				<button type="roll"
				    value="&{template:rollcheck} {{character_name=@{hname}}} {{rolldesc=rolls @{hjumping_name}}} {{rolltarget=[[{[[{[[@{hjumping_ml} - [[(@{hphysical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{hphysical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{hjumping_ml}}}"
                    name="roll_HorseJumpCheck">
				
				</button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_hstealth_name" value="Stealth" disabled="true">
				<input type="number" name="attr_hstealth_sb" class="skill-value" value="0">
				<input type="number" name="attr_hstealth_ml" class="skill-value" value="0">
				<button type="roll"
				    value="&{template:rollcheck} {{character_name=@{hname}}} {{rolldesc=rolls @{hstealth_name}}} {{rolltarget=[[{[[{[[@{hstealth_ml} - [[(@{hphysical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{hphysical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{hstealth_ml}}}"
                    name="roll_HorseStealthCheck">
				
				</button>
			</div>
			<div>
				<input type="text" class="skill-label" name="attr_htrample_name" value="Trample" disabled="true">
				<input type="number" name="attr_htrample_sb" class="skill-value" value="0">
				<input type="number" name="attr_htrample_ml" class="skill-value" value="0">

			</div>
	
		</div>
		<div class="stat-col">
			<h4 class="section-head">Combat</h4>	
				<div>
					<div class="combat-label">Horse Init</div>
					<input type="number" name="attr_hcombat_initiative" value="0" class="skill-value" readonly>
				</div>
				<div>
					<div class="combat-label">Endurance</div>
					<input type="number" name="attr_hcombat_endurance" class="skill-value" value="0" readonly>
				</div>
				<div>
					<div class="combat-label">Agility</div>
					<input type="number" name="attr_hagl" readonly class="skill-value"> 
				</div>
				<div>
					<div class="combat-label">Move (hex)</div>
					<input type="number" name="attr_hcombat_move" class="skill-value" value="0" readonly>
					(Min <input type="number" name="attr_hcombat_min_move" class="skill-value" value="0" readonly>)
				</div>
				<div>
					<div class="combat-label">60&deg; turn (hex)</div>
					<input type="number" name="attr_hturn" readonly value="0" class="skill-value">
				</div>
				<div>
					<div class="combat-label">Dodge</div>
					<input type="number" name="attr_hdodge_ml" class="skill-value" readonly">
					<button type="roll"
							value="&{template:rollcheck} {{character_name=@{hname}}} {{rolldesc=rolls dodge}} {{rolltarget=[[{[[{[[@{hcombat_dodge} - [[(@{hphysical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{hphysical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{hcombat_dodge}}}"
							name="roll_HorseCombatDodgeCheck"></button>
		
				</div>	
				<div>
                    <select name="attr_horse_speed">
						<option value=0 selected="selected">Stop</option>
						<option value=0.5>Walk</option>
						<option value=1>Trot</option>
						<option value=2>Canter</option>
						<option value=3>Gallop</option>
                    </select>
				</div>
		</div>	
		<div class="col">
			<h4 class="section-head">Load Carried</h4>
			<div>
				<input type="text" name="attr_hload_rider" class="profile-label" value="Total Rider Load" readonly>
				<input type="number" name="attr_hload_rider_total" class="stat-value" value="0" readonly>
			</div>
			<div>
				<input type="text" name="attr_hload_armor" class="profile-label" value="Horse Armor" readonly>
				<input type="number" name="attr_hload_armor_total" class="stat-value" value="0" class="number-value" readonly>
			</div>
			<div>
				<input type="text" name="attr_hload_inventory" class="profile-label" value="Horse Inventory" readonly>
				<input type="number" name="attr_hload_inventory_total" class="stat-value" value="0" class="number-value" readonly>
			</div>
			<div>
				<div class="profile-label skill-header right">Total Weight:</div>
				<input type="number" name="attr_hload_total" class="stat-value" value="0" readonly>
			</div>
			<div>
				<div class="profile-label skill-header right">Adjusted Load:</div>
				<input type="number" name="attr_hadjusted_load" class="stat-value" value="0" readonly>
			</div>
		</div>
		
	</div>
	
	<div class="row"><!--Horse protection and attacks -->
		<div class="col gutters">
			<h4 class="section-head">Armor Protection</h4>
			<div>
				<div class="info-label skill-header">Location</div>
				<div class="profile-label skill-header">Compound Layers</div>
				<div class="skill-value skill-header center">AQ</div>
				<div class="skill-value-small skill-header center">B</div>
				<div class="skill-value-small skill-header center">E</div>
				<div class="skill-value-small skill-header center">P</div>
				<div class="skill-value-small skill-header center">F</div>
			</div>
			<div>
				<div class="info-label">All (-/- eyes)</div>
				<input type="text" name="attr_hnatural_layers" class="profile-label" disabled="true" value="Natural Armor">
				<input type="number" name="attr_hnatural_aq" class="skill-value" value="0">
				<input type="number" name="attr_hnatural_b" class="skill-value-small" value="0" readonly >
				<input type="number" name="attr_hnatural_e" class="skill-value-small" value="0" readonly >
				<input type="number" name="attr_hnatural_p" class="skill-value-small" value="0" readonly >
				<input type="number" name="attr_hnatural_f" class="skill-value-small" value="0" readonly >			
			</div>
			<div>
				<div class="info-label">All (-/- eyes)</div>
				<input type="text" name="attr_hall_layers" class="profile-label">
				<input type="number" name="attr_hall_aq" class="skill-value" value="0">
				<input type="number" name="attr_hall_b" class="skill-value-small" value="0">
				<input type="number" name="attr_hall_e" class="skill-value-small" value="0">
				<input type="number" name="attr_hall_p" class="skill-value-small" value="0">
				<input type="number" name="attr_hall_f" class="skill-value-small" value="0">
			</div>
			<div>
				<hr class="hr">
			</div>	
			<h4 class="section-head">Attacks</h4>
			<div>
				<div class="skill-header skill-label">Attack</div>
				<div class="skill-header skill-value-small center">B</div>
				<div class="skill-header skill-value-small center">E</div>
				<div class="skill-header skill-value-small center">P</div>
				<div class="skill-header skill-value-small center">ML</div>
				<div class="skill-header skill-value-small center">AML</div>
				<div class="skill-header skill-value center">&nbsp;</div>
			</div>
			<div>
				<input type="text" name="attr_trample_weapon_name" class="skill-label" disabled="true" value="Trample">
				<input type="number" name="attr_trample_weapon_b" class="skill-value-small" value="0">
				<input type="number" name="attr_trample_weapon_e" class="skill-value-small" disabled="true" value="0">
				<input type="number" name="attr_trample_weapon_p" class="skill-value-small" disabled="true" value="0">
				<input type="number" name="attr_htrample_ml" class="skill-value-small" readonly">
				<input type="number" name="attr_htrample_ml" class="skill-value-small" readonly">
				<div class="skill-value">
					<button type="roll" value="&{template:rollcheck} {{character_name=@{hname}}} {{rolldesc=tramples}} {{rolltarget=[[{[[{[[@{htrample_ml} - [[(@{hphysical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{hphysical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{htrample_ml}}} {{note=b(@{trample_weapon_b}) e(@{trample_weapon_e}) p(@{trample_weapon_p})}}" name="roll_trampleweaponamlskillcheck">
					</button>
				</div>
			</div>				

		</div>
		<div class="col"><!-- Horse injuries -->
			<h4 class="section-head">Injuries</h4>
				<div>
					<div class="skill-header profile-label">Location/Type</div>
					<div class="skill-header stat-value center">SV</div>
					<div class="skill-header skill-value center">LvL</div>
					<div class="skill-header skill-value center">HR</div>
					<div class="skill-header skill-value center">Day</div>					
					<div class="skill-value">&nbsp;</div>
					<div class="skill-header check-col center">Inf</div>
				</div>
				<fieldset class="repeating_hinjury">
					<div>
						<input type="text" name="attr_hinjury_location" class="profile-label">
						<select name="attr_hinjury_severity" class="stat-value">
							<option value="m">M</option>
							<option value="s">S</option>
							<option value="g">G</option>
							<option value="k">K</option>
						</select>
						<input type="number" name="attr_hinjury_level" class="skill-value" value="0">
						<input type="number" name="attr_hinjury_healingroll" class="skill-value" value="0">
						<input type="number" name="attr_hinjury_day" class="skill-value" value="0">
						<div class="skill-value">
							<button type="roll" value="&{template:rollcheck} {{character_name=@{hname}}} {{rolldesc=rolls a healing check}} {{infected=[[@{hinjury_infected_feedback}]]}} {{rolltarget=[[{[[{[[(@{hinjury_healingroll} * [[@{hcombat_endurance}]]) + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[0]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=[[@{hinjury_healingroll} * [[@{hcombat_endurance}]]]]}} {{note=@{hinjury_location} @{hinjury_severity}@{hinjury_level} h@{hinjury_healingroll}}}" name="roll_horsehealingcheck">
							</button>
						</div>
						<div class="check-col center">
							<input type="checkbox" name="attr_hinjury_infected"><span></span>
							<input type="hidden" name="attr_hinjury_infected_feedback" value="0" readonly>
						</div>
					</div>
				</fieldset>
		</div> 
		<div class="col">
			<h4 class="section-head">Penalties</h4>
			<div>
				<div class="combat-label font-light">Injury Levels</div>
				<input type="number" name="attr_hinjury_total" value="0" class="skill-value" readonly>
			</div>
			<div>
				<div class="combat-label font-light">Fatigue</div>
				<input type="number" name="attr_hfatigue_total" class="skill-value" value="0">
			</div>
			<div>
				<div class="combat-label font-heavy">Universal</div>
				<input type="number" value="0" class="skill-value" name="attr_huniversal_penalty" readonly>
			</div>
			<div>
				<div class="combat-label font-light">Encumb.</div>
				<input type="number" name="attr_hencumbrance" class="skill-value" value="0" readonly>
			</div>
			<div>
				<div class="combat-label font-heavy">Physical</div>
				<input type="number" name="attr_hphysical_penalty" class="skill-value" value="0" readonly>
			</div>
		</div>
	</div>

</div>

</div>  <!-- END CHARACHTER TAB --> 


<div class='inventory'> <!-- INVENTORY TAB -->

<h1>HarnMaster Character Inventory</h1>
	<div class="row"><!-- Weapons Owned -->

		<h4 class="section-head">Weapons</h4>
		<div>
			<div class="skill-header profile-label">Weapon</div>
			<div class="skill-header checkboxwidth">C</div>
			<div class="skill-header skill-value center">WGT</div>
			<div class="skill-header skill-value center">WQ</div>
			<div class="skill-header skill-value center">&nbsp;</div>
			<div class="skill-header skill-value center">ATK</div>
			<div class="skill-header skill-value center">DEF</div>
			<div class="skill-header skill-value center">HM</div>
			<div class="skill-header skill-value center">B</div>
			<div class="skill-header skill-value center">E</div>
			<div class="skill-header skill-value center">P</div>
			<div class="skill-header skill-value center">F</div>
			<div class="skill-header skill-value center">ML</div>
			<div class="skill-header skill-value center">AML</div>
			<div class="skill-header skill-value center">&nbsp;</div>
			<div class="skill-header skill-value center">DML</div>
			<div class="skill-header skill-value center">&nbsp;</div>
			<div class="skill-header skill-label">Note</div>
		</div>
	
		<fieldset class="repeating_weapon">
			<div>
				<input type="text" name="attr_weapon_name" class="profile-label">
				<input type="checkbox" name="attr_weapon_iscarried" value="1">
				<input type="number" name="attr_weapon_wgt" class="skill-value" value="0">
				<input type="number" name="attr_weapon_wq" class="skill-value" value="0">
				<div class="skill-value">
					<button type="roll"  
					value="&{template:check-lt} {{character_name=@{name}}} {{rolldesc=rolls weapon break: @{weapon_name}}} {{rolltarget=[[@{weapon_wq}]]}} {{rollresult=[[3d6]]}} {{base=@{weapon_wq}}} {{rolltype=3d6}} {{penalty=[[0]]}}" name="roll_WeaponBreakCheck">
					</button>
				</div>
				<input type="number" name="attr_weapon_atk" class="skill-value" value="0">
				<input type="number" name="attr_weapon_def" class="skill-value" value="0">
				<input type="number" name="attr_weapon_hm" class="skill-value" value="0">
				<input type="number" name="attr_weapon_b" class="skill-value" value="0">
				<input type="number" name="attr_weapon_e" class="skill-value" value="0">
				<input type="number" name="attr_weapon_p" class="skill-value" value="0">
				<input type="number" name="attr_weapon_f" class="skill-value" value="0">
				<input type="number" name="attr_weapon_ml" class="skill-value" value="0">
				<input type="number" name="attr_weapon_aml" class="skill-value" readonly">
				<div class="skill-value">
					<button type="roll"
					value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=attacks with a @{weapon_name}}} {{rolltarget=[[{[[{[[@{weapon_aml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{weapon_aml}}} {{note=b(@{weapon_b}) E(@{weapon_e}) P(@{weapon_p}) F(@{weapon_f})}}" name="roll_WeaponAMLSkillCheck">
					</button>
				</div>
				<input type="number" name="attr_weapon_dml" class="skill-value" readonly>
				<div class="skill-value">
					<button type="roll" 
					value="&{template:rollcheck} {{character_name=@{name}}} {{rolldesc=blocks with a @{weapon_name}}} {{rolltarget=[[{[[{[[@{weapon_dml} - [[(@{physical_penalty})*5]] + ?{Target Modifier??|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{physical_penalty})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier??|0}]]}} {{ml=@{weapon_dml}}} {{note=wq @{weapon_wq}}}" name="roll_WeaponDMLSkillCheck"></button>
				</div>
				
				<input type="text" name="attr_weapon_note" class="skill-label">
			</div>
		</fieldset>
		<div class="footnote"> Note: checking the "C"  checkbox denotes the weapon is carried, and the weight will count towards the characters encumbrance</div>
    </div>
	
	<div class="row"><!-- Missile Weapons owned -->

		<h4 class="section-head">Missile Weapons</h4>
		<div>
			<div class="skill-header profile-label">Missile Weapon</div>
			<div class="skill-header checkboxwidth">C</div>
			<div class="skill-header skill-value-small center">P</div>
			<div class="skill-header skill-value-small center">ML</div>
			<div class="skill-header stat-value center">Short</div>
			<div class="skill-header skill-value center">AML</div>
			<div class="skill-header skill-value-small center">Dmg</div>
			<div class="skill-header skill-value-small center">&nbsp;</div>
			<div class="skill-header stat-value center">Medium</div>
			<div class="skill-header skill-value center">AML</div>
			<div class="skill-header skill-value-small center">Dmg</div>
			<div class="skill-header skill-value-small center">&nbsp;</div>
			<div class="skill-header stat-value center">Long</div>
			<div class="skill-header skill-value center">AML</div>
			<div class="skill-header skill-value-small center">Dmg</div>
			<div class="skill-header skill-value-small center">&nbsp;</div>
			<div class="skill-header stat-value center">Extreme</div>
			<div class="skill-header skill-value center">AML</div>
			<div class="skill-header skill-value-small center">Dmg</div>
			<div class="skill-header skill-value-small center">&nbsp;</div>
			<div class="skill-header skill-value">Ammo</div>
		</div>
	
		<fieldset class="repeating_missileweapon">
			<div>
				<input type="text" name="attr_missileweapon_name" class="profile-label">
				<input type="checkbox" name="attr_missileweapon_iscarried" value="1">
				<input type="number" name="attr_missileweapon_p" class="skill-value-small" value="0">
				<input type="number" name="attr_missileweapon_ml" class="skill-value-small" value="0">
				<input type="number" name="attr_missileweapon_short" class="stat-value" value="0">
				<input type="number" name="attr_missileweapon_short_aml" class="skill-value" readonly value="0">
				<input type="number" name="attr_missileweapon_short_dmg" class="skill-value-small" readonly value="0">
				<div class="skill-header skill-value-small center">&nbsp;</div>				
				<input type="number" name="attr_missileweapon_medium" class="stat-value" value="0">
				<input type="number" name="attr_missileweapon_medium_aml" class="skill-value" readonly value="0">
				<input type="number" name="attr_missileweapon_medium_dmg" class="skill-value-small" readonly value="0"> 
				<div class="skill-header skill-value-small center">&nbsp;</div>
				<input type="number" name="attr_missileweapon_long" class="stat-value" value="0">
				<input type="number" name="attr_missileweapon_long_aml" class="skill-value" readonly value="0">
				<input type="number" name="attr_missileweapon_long_dmg" class="skill-value-small" readonly value="0">
				<div class="skill-header skill-value-small center">&nbsp;</div>
				<input type="number" name="attr_missileweapon_extreme" class="stat-value" value="0">					
				<input type="number" name="attr_missileweapon_extreme_aml" class="skill-value" readonly value="0">
				<input type="number" name="attr_missileweapon_extreme_dmg" class="skill-value-small" readonly value="0">
				<div class="skill-header skill-value-small center">&nbsp;</div>
				<input type="number" name="attr_missileweapon_ammo" class="skill-value">
			</div>
		</fieldset>
		<div class="footnote"> Note: If you are carrying a missile weapon, make sure to add it to the "Weapons" list above too, with weight and the carried checkbox ticked</div>
    </div>
	
	<div class="row"><!-- Armor owned -->

			<h4 class="section-head">Armor</h4>
			<div class="skill-header profile-label">Armor/Clothing</div>
			<div class="skill-header checkboxwidth">C</div>
			<div class="skill-header skill-value center">WGT</div>
			<div class="skill-header skill-value-small center">AQ</div>
			<div class="skill-header skill-value-small center">B</div>
			<div class="skill-header skill-value-small center">E</div>
			<div class="skill-header skill-value-small center">P</div>
			<div class="skill-header skill-value-small center">F</div>
			<div class="skill-header skill-value-small center">Sk</div>
			<div class="skill-header skill-value-small center">Fa</div>
			<div class="skill-header skill-value-small center">Nk</div>
			<div class="skill-header center">|</div>
			<div class="skill-header skill-value-small center">Sh</div>
			<div class="skill-header skill-value-small center">Ua</div>
			<div class="skill-header skill-value-small center">El</div>
			<div class="skill-header skill-value-small center">Fo</div>
			<div class="skill-header skill-value-small center">Ha</div>
			<div class="skill-header center">|</div>
			<div class="skill-header skill-value-small center">Tx</div>
			<div class="skill-header skill-value-small center">Ab</div>
			<div class="skill-header skill-value-small center">Hp</div>
			<div class="skill-header skill-value-small center">Gr</div>
			<div class="skill-header center">|</div>
			<div class="skill-header skill-value-small center">Th</div>
			<div class="skill-header skill-value-small center">Kn</div>
			<div class="skill-header skill-value-small center">Ca</div>
			<div class="skill-header skill-value-small center">Ft</div>			
			
			<fieldset class="repeating_armoritems">
				<input type="text" name="attr_armor_name" class="profile-label">
				<input type="checkbox" name="attr_armor_iscarried" value="1">
				<input type="number" name="attr_armor_wgt" class="skill-value" value="0">
				<input type="number" name="attr_armor_aq" class="skill-value-small" value="0">
				<input type="number" name="attr_armor_b" class="skill-value-small" value="0">
				<input type="number" name="attr_armor_e" class="skill-value-small" value="0">
				<input type="number" name="attr_armor_p" class="skill-value-small" value="0">
				<input type="number" name="attr_armor_f" class="skill-value-small" value="0">
				<input type="checkbox" name="attr_armor_loc_sk" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_sk_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_sk_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_sk_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_sk_fvalue" class="skill-value-small center" value="1">
				<input type="checkbox" name="attr_armor_loc_fa" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_fa_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_fa_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_fa_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_fa_fvalue" class="skill-value-small center" value="1">
				<input type="checkbox" name="attr_armor_loc_nk" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_nk_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_nk_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_nk_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_nk_fvalue" class="skill-value-small center" value="1">
				<div class="skill-header center">|</div>
				<input type="checkbox" name="attr_armor_loc_sh" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_sh_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_sh_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_sh_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_sh_fvalue" class="skill-value-small center" value="1">				
				<input type="checkbox" name="attr_armor_loc_ua" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ua_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ua_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ua_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ua_fvalue" class="skill-value-small center" value="1">
				<input type="checkbox" name="attr_armor_loc_el" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_el_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_el_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_el_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_el_fvalue" class="skill-value-small center" value="1">
				<input type="checkbox" name="attr_armor_loc_fo" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_fo_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_fo_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_fo_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_fo_fvalue" class="skill-value-small center" value="1">
				<input type="checkbox" name="attr_armor_loc_ha" class="skill-value-small center" value="1">				
				<input type="hidden" name="attr_armor_ha_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ha_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ha_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ha_fvalue" class="skill-value-small center" value="1">
				<div class="skill-header center">|</div>
				<input type="checkbox" name="attr_armor_loc_tx" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_tx_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_tx_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_tx_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_tx_fvalue" class="skill-value-small center" value="1">
				<input type="checkbox" name="attr_armor_loc_ab" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ab_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ab_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ab_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ab_fvalue" class="skill-value-small center" value="1">
				<input type="checkbox" name="attr_armor_loc_hp" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_hp_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_hp_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_hp_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_hp_fvalue" class="skill-value-small center" value="1">
				<input type="checkbox" name="attr_armor_loc_gr" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_gr_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_gr_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_gr_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_gr_fvalue" class="skill-value-small center" value="1">
				<div class="skill-header center">|</div>
				<input type="checkbox" name="attr_armor_loc_th" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_th_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_th_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_th_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_th_fvalue" class="skill-value-small center" value="1">
				<input type="checkbox" name="attr_armor_loc_kn" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_kn_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_kn_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_kn_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_kn_fvalue" class="skill-value-small center" value="1">
				<input type="checkbox" name="attr_armor_loc_ca" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ca_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ca_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ca_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ca_fvalue" class="skill-value-small center" value="1">
				<input type="checkbox" name="attr_armor_loc_ft" class="skill-value-small center" value="1">	
				<input type="hidden" name="attr_armor_ft_bvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ft_evalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ft_pvalue" class="skill-value-small center" value="1">
				<input type="hidden" name="attr_armor_ft_fvalue" class="skill-value-small center" value="1">
	
			</fieldset>
		<div class="footnote"> Note: Carried (C) armor will count towards encumbrance (weight) and armor protection (B/E/P/F values) on the character tab.</div>	
	</div>		
	<hr class="hr">
	<div class="row"><!-- Inventory -->
		<div class="col">
			<h4 class="section-head">Personal Inventory</h4>
			<div class="skill-header skill-note">Item</div>
			<div class="skill-header skill-value center">WGT</div>
			<div class="skill-header checkboxwidth">C</div>
			<fieldset class="repeating_inventoryitems">
				<input type="text" name="attr_inventory_name" class="skill-note">
				<input type="number" name="attr_inventory_wgt" class="skill-value" value="0">
				<input type="checkbox" name="attr_inventory_iscarried" value="1">
			</fieldset>
			<div class="footnote"> Note: checking the "C" checkbox denotes the item is carried, </div>
			<div class="footnote"> and the weight will count towards the characters encumbrance</div>
		</div>
		<div class="col">	
			<h4 class="section-head">Horse Inventory</h4>
			<div class="skill-header skill-note-small">Item</div>
			<div class="skill-header skill-value center">WGT</div>
			<fieldset class="repeating_hinventoryitems">
				<input type="text" name="attr_hinventory_name" class="skill-note-small">
				<input type="number" name="attr_hinventory_wgt" class="skill-value" value="0">
			</fieldset>
			<div class="footnote">Note: these items count towards horse's encumbrance</div>
			<div class="footnote">on the character tab</div>
			<hr class="hr">
			<h4 class="section-head">Horse Armor Worn</h4>
			<div class="skill-header skill-note-xsmall">Armor</div>
			<div class="skill-header skill-value center">AQ</div>
			<div class="skill-header skill-value center">WGT</div>

			<fieldset class="repeating_harmoritems">
				<input type="text" name="attr_harmor_name" class="skill-note-xsmall">
				<input type="number" name="attr_harmor_aq" class="skill-value" value="0">
				<input type="number" name="attr_harmor_wgt" class="skill-value" value="0">
			</fieldset>
			<div class="footnote">Note: this armor counts towards horse's encumbrance</div>
		</div>




		
	</div>
	<div class="row"><!-- Money -->
	    <div class="col">
			<h4 class="section-head">Money (person)</h4>
			<div>Comment: <input type="text" name="attr_money_comment" class="profile-label"></div>
			<div class="skill-header skill-label">Type</div>
			<div class="skill-header skill-value center">#</div>
			<div>
				<input type="text" name="attr_money_person_akce_name" value="ake" disabled="true" class="skill-label">
				<input type="number" name="attr_money_person_akce_amount" class="skill-value" value="0">
			</div>
			<div>
				<input type="text" name="attr_money_person_para_name" value="para" disabled="true" class="skill-label">
				<input type="number" name="attr_money_person_para_amount" class="skill-value" value="0">
			</div>
			<div>
				<input type="text" name="attr_money_person_kurus_name" value="kuru" disabled="true" class="skill-label">
				<input type="number" name="attr_money_person_kurus_amount" class="skill-value" value="0">
			</div>
		</div>	
		<div class="col">
			<h4 class="section-head">Money (bank)</h4>
			<div>
				Location: <input type="text" name="attr_money_bank_name" class="profile-label">
			</div>
			<div class="skill-header skill-label">Type</div>
			<div class="skill-header skill-value center">#</div>
			<div>
				<input type="text" name="attr_money_bank_akce_name" value="ake" disabled="true" class="skill-label">
				<input type="number" name="attr_money_bank_akce_amount" class="skill-value" value="0">
			</div>
			<div>
				<input type="text" name="attr_money_bank_para_name" value="para" disabled="true" class="skill-label">
				<input type="number" name="attr_money_bank_para_amount" class="skill-value" value="0">
			</div>
			<div>
				<input type="text" name="attr_money_bank_kurus_name" value="kuru" disabled="true" class="skill-label">
				<input type="number" name="attr_money_bank_kurus_amount" class="skill-value" value="0">
			</div>
		</div>	
		<div class="col">
			<h4 class="section-head">Money (group)</h4>
			<div>
				Group: <input type="text" name="attr_money_group_name" class="profile-label">
			</div>	
			<div class="skill-header skill-label">Type</div>
			<div class="skill-header skill-value center">#</div>
			<div>
				<input type="text" name="attr_money_group_akce_name" value="ake" disabled="true" class="skill-label">
				<input type="number" name="attr_money_group_akce_amount" class="skill-value" value="0">
			</div>
			<div>
				<input type="text" name="attr_money_group_para_name" value="para" disabled="true" class="skill-label">
				<input type="number" name="attr_money_group_para_amount" class="skill-value" value="0">
			</div>
			<div>
				<input type="text" name="attr_money_group_kurus_name" value="kuru" disabled="true" class="skill-label">
				<input type="number" name="attr_money_group_kurus_amount" class="skill-value" value="0">
			</div>
		</div>	
	</div>
	<div class="row"><!--General Notes -->
		<h4 class="section-head">Notes</h4>
		<textarea name="attr_various_notes" rows="5" cols="50"></textarea>
	</div>
</div> 

<!-- roll templates/-->

<!--
props:
* character_name: Name of chaaracter performing action.
* rolldesc: Text describing roll in header.
* penalty:  Autocalculated in value from Universal or Physical Penalty. Applied in rolltarget
* targetmod:  Dieroll query in each roll, defaults to 0.  Applied in rolltarget.
* ml:  Unmodified target of the roll.
* rolltarget:  Actual target of roll, derived from 'ml + (penalty * 5) + targetmod'
* rollresult: Die roll result.
* note: Optional property for any additional text at the end of table.
* infection:  sepcial row just for infected wounds, value either 0 or on or not present.

/-->
<rolltemplate class="sheet-rolltemplate-rollcheck">
    <table>
        <tr>
            <th><span class="tcat">{{character_name}} {{rolldesc}}</span></th>
        </tr>
        {{#infected}}
            {{#rollTotal() infected 1}}
                <tr>
                    <td class="sheet-infected">Infected</td>
                </tr>
            {{/rollTotal() infected 1}}
        {{/infected}}
        <tr>
            <td><span class="sheet-tcat">Target Mods:</span>
                ML({{ml}}),
                {{#penalty}}Penalty(-{{penalty}}), {{/penalty}}
                {{#targetmod}}Mod({{targetmod}}){{/targetmod}}
            </td>
        </tr>
        <tr><td><span class="sheet-tcat">Target EML:</span> {{rolltarget}}</td></tr>
        <tr><td><span class="sheet-tcat">Roll(1d100):</span> {{rollresult}}</td></tr>

        {{#^rollGreater() rollresult rolltarget}}
        {{#rollWasCrit() rollresult }}
        <tr>
            <td class="sheet-crit-success">Critical Success!!</td>
        </tr>
        {{/rollWasCrit() rollresult }}
        {{#^rollWasCrit() rollresult }}
        <tr>
            <td class="sheet-success">Marginal Success.</td>
        </tr>
        {{/^rollWasCrit() rollresult }}
        {{/^rollGreater() rollresult rolltarget}}

        {{#rollGreater() rollresult rolltarget}}
        {{#rollWasCrit() rollresult }}
        <tr>
            <td class="sheet-crit-failure">Critical Failure!!</td>
        </tr>
        {{/rollWasCrit() rollresult }}
        {{#^rollWasCrit() rollresult }}
        <tr>
            <td class="sheet-failure">Marginal Failure.</td>
        </tr>
        {{/^rollWasCrit() rollresult }}
        {{/rollGreater() rollresult rolltarget}}


        {{#note}}
        <tr>
            <td class="sheet-note">{{note}}</td>
        </tr>
        {{/note}}

    </table>
</rolltemplate>

<!-- template for skill development -->
<rolltemplate class="sheet-rolltemplate-skilldev">
    <table>
        <tr>
            <th><span class="sheet-tcat">{{character_name}} {{rolldesc}}</span></th>
        </tr>
        <tr><td><span class="sheet-tcat">Current ML:</span> {{rolltarget}}</td></tr>
        <tr><td><span class="sheet-tcat">Roll(1d100 + SB):</span> {{rollresult}}</td></tr>
        {{#^rollGreater() rollresult rolltarget}}
        <tr>
            <td class="sheet-failure">Failure.</td>
        </tr>
        {{/^rollGreater() rollresult rolltarget}}
		{{#rollGreater() rollresult rolltarget}}
        <tr>
            <td class="sheet-success">Success.</td>
        </tr>
        {{/rollGreater() rollresult rolltarget}}
    </table>
</rolltemplate>

<!-- template for shock, fumble, stumble -->
<rolltemplate class="sheet-rolltemplate-check-lt">
    <table>
        <tr>
            <th><span class="tcat">{{character_name}} {{rolldesc}}</span></th>
        </tr>


        {{#rollGreater() penalty 0}}
        <tr>
            <td><span class="tcat">Target EML: </span>({{base}}-{{penalty}}) = {{rolltarget}}</td>
        </tr>
        {{/rollGreater() penalty 0}}
        {{#^rollGreater() penalty 0}}
        <tr>
            <td><span class="tcat">Target EML: </span>{{rolltarget}}</td>
        </tr>
        {{/^rollGreater() penalty 0}}
        <tr>
            <td><span class="tcat">Roll({{rolltype}}): </span> {{rollresult}}</td>
        </tr>
        {{#^rollGreater() rollresult rolltarget}}
        <tr>
            <td class="sheet-success">Success.</td>
        </tr>
        {{/^rollGreater() rollresult rolltarget}}
        {{#rollGreater() rollresult rolltarget}}
        <tr>
            <td class="sheet-failure">Failure.</td>
        </tr>
        {{/rollGreater() rollresult rolltarget}}
    </table>
</rolltemplate>

<!-- inlcude Jakob's better default Rolltemplate -->
<rolltemplate class="sheet-rolltemplate-custom">
  <div class="sheet-container sheet-color-{{color}}">
    <div class="sheet-header">
      {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
      {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
    </div>
    <div class="sheet-content">
      {{#allprops() title subtitle desc color}}
      <div class="sheet-key">{{key}}</div>
      <div class="sheet-value">{{value}}</div>
      {{/allprops() title subtitle desc color}}
      {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
    </div>
  </div>
</rolltemplate>

<!-- sheetworkers -->
<script type="text/worker">

<!-- reusable repeatingsum code from https://wiki.roll20.net/repeatingsum --> 

const repeatingSum = (destinations, section, fields, ...extras) => {
    const isNumber = value => parseFloat(value).toString() === value.toString();
    const isOption = value => [...checks.valid, ...checks.roundtypes].includes(value);
    const isRounding = value => checks.roundtypes.includes(value);
    const isFraction = value => value.includes('/') && !(value.includes(',') || value.includes('|'));
    const getTrimmed = value => value.toLowerCase().replace(/\s/g, '');
    const getRounded = (type, value, pow) => (Math[type](value * Math.pow(10, pow)) / Math.pow(10, pow)).toFixed(Math.max(0, pow));
    const getFraction = (value) => /*{ console.log(`value: ${value}`); */
        parseInt(value.split('/')[0]) / parseInt(value.split('/')[1]);
    const getMultiplier = (value, rounding = 1) => 'undefined' === typeof value ? (rounding ? 0: 1) : (
        isNumber(value) ? parseFloat(value) : (isFraction(value) ? getFraction(value) : value));
    if (!Array.isArray(destinations)) destinations = [getTrimmed(destinations)];
    if (!Array.isArray(fields)) fields = [getTrimmed(fields)];
    const fields_trimmed = fields.map(field => getTrimmed(field).split(':')[0]);
    const subfields = fields_trimmed.slice(0,destinations.length);
    const checks = { valid: ['multiplier'], roundtypes: ['ceil', 'round', 'floor'] };
    let properties = {attributes: {}, options: {}};
    extras.forEach(extra => {
        const [prop, v] = getTrimmed(extra).split(':');
        const multiplier_maybe = getMultiplier(v, isRounding(prop));
        const obj = isNumber(multiplier_maybe) ? subfields.reduce((obj,field) => {
            obj[field] = multiplier_maybe;
            return obj;
        },{}) : multiplier_maybe.split(',').reduce((obj, item) => {
            const [stat, value] = item.split('|');
            const multiplier = getMultiplier(value, isRounding(prop));
            obj[stat] = multiplier;
            return obj;
        }, {});
        properties[isOption(prop) ? 'options' : 'attributes'][prop] = obj;
    });
    getSectionIDs(`repeating_${section}`, idArray => {
        const attrArray = idArray.reduce((m, id) => [...m, ...(fields_trimmed.map(field => `repeating_${section}_${id}_${field}`))], []);
        getAttrs([...attrArray, ...Object.keys(properties.attributes)], v => {
            const getValue = (section, id, field) => v[`repeating_${section}_${id}_${field}`] === 'on' ? 1 : parseFloat(v[`repeating_${section}_${id}_${field}`]) || 0;
            const commonMultipliers = (fields.length <= destinations.length) ? [] : fields.splice(destinations.length, fields.length - destinations.length);
            const output = destinations.reduce((obj, destination, index) => {
                let sumTotal = idArray.reduce((total, id) => total + getValue(section, id, fields_trimmed[index]) * commonMultipliers.reduce((subtotal, mult) => subtotal * ((!mult.includes(':') || mult.split(':')[1].split(',').includes(fields_trimmed[index])) ? getValue(section, id, mult.split(':')[0]) : 1), 1), 0);
                sumTotal *= (properties.options.hasOwnProperty('multiplier') && Object.keys(properties.options.multiplier).includes(fields_trimmed[index])) ? (parseFloat(properties.options.multiplier[fields_trimmed[index]]) || 0): 1;
                sumTotal += Object.entries(properties.attributes).reduce((total, [key, value]) => 
                    total += (value.hasOwnProperty(fields_trimmed[index]) ? parseFloat(v[key] || 0) * (parseFloat(value[fields_trimmed[index]]) || 1): 0) , 0);
                checks.roundtypes.forEach(type => {
                    if (properties.options.hasOwnProperty(type)) {
                        if (Object.keys(properties.options[type]).includes(fields_trimmed[index])) {
                            sumTotal = getRounded(type, sumTotal, (+properties.options[type][fields_trimmed[index]] || 0));
                        } else if (properties.options[type] == '0' || !isNaN(+properties.options[type] || 'x') ) {
                            sumTotal = getRounded(type, sumTotal, +properties.options[type]);
                        } 
                    } 
                });
                obj[destination] = sumTotal;
                return obj;
            }, {});
            setAttrs(output);
        }); 
    }); 
}; <!-- end repeatingsum code -->

<!-- sheet tab buttons -->
const buttonlist = ['character','inventory'];
buttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
        setAttrs({
            sheetTab: button
        });
    });
});

<!-- weapon load totals /-->

on('change:repeating_weapon remove:repeating_weapon', function() {
	repeatingSum('load_weapons_total', 'weapon',['weapon_wgt','weapon_iscarried']);

}); 

<!-- armor load totals /-->

on('change:repeating_armoritems remove:repeating_armoritems', function() {
	repeatingSum('load_armor_total', 'armoritems',['armor_wgt','armor_iscarried']);

}); 

<!-- horse armor load totals /-->

on('change:repeating_harmoritems remove:repeating_harmoritems', function() {
	repeatingSum('hload_armor_total', 'harmoritems', 'harmor_wgt');

}); 

<!-- item load totals /-->

on('change:repeating_inventoryitems remove:repeating_inventoryitems', function() {
	repeatingSum('load_inventory_total', 'inventoryitems', ['inventory_wgt','inventory_iscarried']);

}); 

<!-- horse item load totals /-->

on('change:repeating_hinventoryitems remove:repeating_hinventoryitems', function() {
	repeatingSum('hload_inventory_total', 'hinventoryitems', 'hinventory_wgt');

}); 

<!-- endurance /-->

on('change:str change:sta change:wil', 
function() {
    getAttrs(['str', 'sta', 'wil'], 
	function(values) {
        var stattotal = parseInt(values['str'])||0;
        stattotal += parseInt(values['sta'])||0;
        stattotal += parseInt(values['wil'])||0;
        var endurance = Math.round(stattotal / 3)||0;
        setAttrs({
            'combat_endurance': endurance
		});
    });
});

<!-- horse endurance /-->

on('change:hstr change:hsta change:hwil', 
function() {
    getAttrs(['hstr', 'hsta', 'hwil'], function(values) {
        var stattotal = parseInt(values['hstr'])||0;
        stattotal += parseInt(values['hsta'])||0;
        stattotal += parseInt(values['hwil'])||0;
        var hendurance = Math.round(stattotal / 3)||0;
         setAttrs({
            'hcombat_endurance': hendurance
		});
    });
});
	
<!-- armourcarry - based on condition skill /-->

on('change:condition_ml change:combat_endurance', 
function() {
    getAttrs(['condition_ml', 'combat_endurance'], 
	function(values) {
        var carryml = parseInt(values['condition_ml'])||0;
		var carryvalue = Math.round(carryml / 5)||0;
        var endurancevalue = parseInt(values['combat_endurance'])||0;
		var carrylimit = Math.round(endurancevalue*1.4)||0;
        var carry = Math.min(carryvalue,carrylimit)||0;
        setAttrs({
            'combat_armourcarry': carry
		});
    });
});

<!-- load and encumbrance /-->

on('change:load_weapons_total change:load_armor_total change:load_inventory_total change:combat_armourcarry change:is_mounted', function() {
    var total = 0.0;
    getAttrs(['load_armor_total', 'load_weapons_total', 'load_inventory_total', 'combat_armourcarry', 'is_mounted'], function(values) {
        total += parseFloat(values['load_armor_total'])||0.0;
        total += parseFloat(values['load_weapons_total'])||0.0;
        total += parseFloat(values['load_inventory_total'])||0.0;

        var encumbrance = Math.round(total/values['combat_armourcarry'])||0;
        if(values.is_mounted != 0) { encumbrance = Math.round(encumbrance/2)};
        setAttrs({
            'load_total': parseInt(total)||0,
            'encumbrance': encumbrance
        });
    });
});

<!-- horse load limit, load and encumbrance /-->

on('change:hstr change:weight change:load_total change:hload_armor_total change:hload_inventory_total', 
function() {
    var total = 0.0;
    getAttrs(['weight', 'load_total', 'hload_armor_total', 'hload_inventory_total', 'hcombat_endurance', 'hstr'], 
	function(values) {
        total += parseFloat(values['weight'])||0.0;
        total += parseFloat(values['load_total'])||0.0;			
        total += parseFloat(values['hload_armor_total'])||0.0;
        total += parseFloat(values['hload_inventory_total'])||0.0;
		var horsestrength = parseInt(values['hstr'])||0;
		hllimit = Math.round(horsestrength*8);
        var hadjustedloadtemp = Math.round(total-hllimit);
		var hadjustedload = Math.max(0, hadjustedloadtemp);
		var hcomend = parseInt(values['hcombat_endurance'])||0;			
        var hencumbrance = Math.round(hadjustedload/hcomend)||0;
		var riderload = parseFloat(values['weight']) + parseFloat(values['load_total'])||0.0;
        setAttrs({
            'hloadlimit': hllimit,
			'hadjusted_load': hadjustedload,
			'hload_total': parseInt(total)||0,
            'hencumbrance': hencumbrance,
			'hload_rider_total': riderload
        });
    });
});

<!-- injury totals /-->

on('change:repeating_injury:injury_level remove:repeating_injury', function() {
	repeatingSum('injury_total', 'injury', 'injury_level');

});

<!-- horse injury totals /-->

on('change:repeating_hinjury:hinjury_level remove:repeating_hinjury', function() {
	repeatingSum('hinjury_total', 'hinjury', 'hinjury_level');

});

<!-- injury infected feedback /-->

on('change:repeating_injury:injury_infected', function() {
   getAttrs([
      'repeating_injury_injury_infected',
      'repeating_spells_injury_infected_feedback'
    ], function(values) {
        var isinfected = (values.repeating_injury_injury_infected == 0 ? 0 : 1);
       setAttrs({
            repeating_injury_injury_infected_feedback: isinfected
       });
   });
});

<!-- horse injury infected feedback /-->

on('change:repeating_hinjury:hinjury_infected', function() {
   getAttrs([
      'repeating_injury_hinjury_infected',
      'repeating_spells_hinjury_infected_feedback'
    ], function(values) {
        var isinfected = (values.repeating_injury_hinjury_infected == 0 ? 0 : 1);
       setAttrs({
            repeating_injury_hinjury_infected_feedback: isinfected
       });
   });
});

<!-- universal and physical penalties /-->

on('change:is_mounted change:injury_total change:fatigue_total change:encumbrance', function() {
    getAttrs(['injury_total', 'fatigue_total', 'encumbrance', 'is_mounted'], function(values) {
        var inj = parseInt(values.injury_total)||0;
		var fat = parseInt(values.fatigue_total)||0;
		var enc = parseInt(values.encumbrance)||0;
        if (values.is_mounted == 1) { fat = Math.round(fat / 2) };
        var upenalty = inj + fat;
		var ppenalty = enc + upenalty;
        setAttrs({
            'universal_penalty': upenalty,
			'physical_penalty': ppenalty
        });
    });
});

<!-- horse universal and physical penalties  /-->

on('change:hinjury_total change:hfatigue_total change:hencumbrance', function() {
    getAttrs(['hinjury_total', 'hfatigue_total'], function(values) {
        var hfat = parseInt(values.hfatigue_total)||0;
		var hinj = parseInt(values.hinjury_total)||0;
		var henc = parseInt(values.hencumbrance)||0;
        var hupenalty =  hinj + hfat;
		var hppenalty = henc + hupenalty;
        setAttrs({
            'huniversal_penalty': hupenalty,
			'hphysical_penalty': hppenalty
        });
    });
});

<!-- Move speed in combat /-->
	
on('change:encumbrance change:universal_penalty change:agl change:is_mounted change:hcombat_move sheet:opened', function() {
    getAttrs(['agl', 'universal_penalty', 'encumbrance', 'is_mounted', 'hcombat_move'], function(values) {
        var cmove = parseInt(values.agl) - parseInt(values.universal_penalty) - parseInt(values.encumbrance);
		var currenthcmove = parseInt(values.hcombat_move);
		cmove = Math.max(cmove, 1); <!-- move is never less than 1 -->
		if (values.is_mounted == 1) { cmove = currenthcmove }; <!-- use horse move when mounted --> 
		console.log("combat move", cmove, "horse move", currenthcmove, "mounted?" , values.is_mounted);
		setAttrs({
            'combat_move': cmove
        });
    });
});


<!-- effective riding skill on horse /-->

on('change:ridingpersonal_ml change:hinitiative_ml change:hencumbrance change:huniversal_penalty change:encumbrance change:universal_penalty ', 
function() {
    getAttrs(['ridingpersonal_ml', 'hinitiative_ml', 'hencumbrance', 'huniversal_penalty', 'encumbrance', 'universal_penalty'], 
	function(values) {
        var charphyspen = parseInt(values.encumbrance);
		charphyspen += parseInt(values.universal_penalty);
		var horsephyspen = parseInt(values.hencumbrance);
		horsephyspen += parseInt(values.huniversal_penalty);
		var charridingml = parseInt(values.ridingpersonal_ml);
		var charridingeml = Math.round ( charridingml - 5*charphyspen);
		var horseinitml = parseInt(values.hinitiative_ml);
		var horseiniteml = Math.round ( horseinitml - 5*horsephyspen);
        var charhorseridingeml = Math.round ( (charridingeml+horseiniteml)/2 );
        setAttrs({
            'tempridinghorse_eml': charridingeml,			
            'temphorseinit_eml': horseiniteml,			
            'ridinghorse_ml': charhorseridingeml
        });
    });
});

<!-- combat initiative toggle between on and off horse /-->

on('change:is_mounted change:ridinghorse_ml change:initiative_ml change:encumbrance change:universal_penalty', 
function() {
    getAttrs(['initiative_ml', 'ridinghorse_ml', 'is_mounted', 'combat_initiative', 'encumbrance', 'universal_penalty'], 
	function(values) {
		var cinit = parseInt(values['initiative_ml'])||0;
		var physpen = parseInt(values['encumbrance'])||0;
		physpen += parseInt(values['universal_penalty'])||0;
		cinit = Math.round(cinit - physpen*5);
		if(values.is_mounted != 0) { cinit = parseInt(values['ridinghorse_ml'])};
		setAttrs({
			'combat_initiative': cinit
		});
	});
});

<!-- horse combat initiative /-->
on('change:hinitiative_ml change:hphysical_penalty sheet:opened', 
function() {
    getAttrs(['hinitiative_ml', 'hphysical_penalty'], 
	function(values) {
		var hcinit = parseInt(values['hinitiative_ml'])||0;
		var physpen = parseInt(values['hphysical_penalty'])||0;
		hcinit = Math.round(hcinit - physpen*5);
		setAttrs({
			'hcombat_initiative': hcinit
		});
	});
});

<!-- Horse Move speed in combat /-->

on('change:horse_speed change:hencumbrance change:huniversal_penalty change:hmove', function() {
    getAttrs(['hmove', 'huniversal_penalty', 'hencumbrance', 'horse_speed'], function(values) {
        var hcmove = parseInt(values.hmove) - parseInt(values.huniversal_penalty) - parseInt(values.hencumbrance);
		hcmove = Math.round( hcmove * parseFloat(values.horse_speed) ); // note: 0.5 speed for walk doesn't seem to work, goes down to 0. 
		var hcminmove = Math.round( hcmove/3 );
        setAttrs({
            'hcombat_move': hcmove,
			'hcombat_min_move': hcminmove
        });
    });
});

<!-- horse turning /-->

on('change:horse_speed', function() {
     getAttrs(['horse_speed'], function(values) {
		var maxturn = 0;
			if(values.horse_speed == 1) { maxturn = 3 };
			if(values.horse_speed == 2) { maxturn = 5 };
			if(values.horse_speed == 3) { maxturn = 10 };
            setAttrs({
                'hturn': maxturn			
            });
        });
});

<!-- WEAPON CALCULATIONS -->

<!-- Weapon AML and DML calculations -->

on('change:repeating_weapon', function() {
    getAttrs(['repeating_weapon_weapon_ml', 'repeating_weapon_weapon_atk', 'repeating_weapon_weapon_def'], function(values) {
		var wml = parseInt(values.repeating_weapon_weapon_ml);
		var watk = parseInt(values.repeating_weapon_weapon_atk);
		var wdef = parseInt(values.repeating_weapon_weapon_def);
		var waml = wml + watk;
		var wdml = wml + wdef;
		console.log("ML", wml, "ATK", watk, "DEF", wdef, "Weapon AML", waml, "Weapon DML", wdml);
        setAttrs({
            'repeating_weapon_weapon_aml': waml,
			'repeating_weapon_weapon_dml': wdml
        });
    });
});

<!-- Missile Weapon AML and DML calculations -->

on('change:repeating_missileweapon', function() {
    getAttrs(['repeating_missileweapon_missileweapon_ml', 'repeating_missileweapon_missileweapon_p'], function(values) {
		var mml = parseInt(values.repeating_missileweapon_missileweapon_ml);
		var mdmg = parseInt(values.repeating_missileweapon_missileweapon_p);
		var shortaml = mml;
		var mediumaml = mml - 20;
		var longaml = mml - 40;
		var extremeaml = mml - 80;
		var shortdmg = mdmg;
		var mediumdmg = mdmg - 1;
		var longdmg = Math.max(mdmg - 2, mdmg/2); <!-- dmg is never less than 50% weapon dmg --> 
		var extremedmg = Math.max(mdmg - 3, mdmg/2); <!-- dmg is never less than 50% weapon dmg --> 
		<!-- console.log("ML", wml, "ATK", watk, "DEF", wdef, "Weapon AML", waml, "Weapon DML", wdml); --> 
		<!-- note: mounted penalty calculated in roll button, don't add here -->
        setAttrs({
            'repeating_missileweapon_missileweapon_short_aml': shortaml,
			'repeating_missileweapon_missileweapon_medium_aml': mediumaml,
			'repeating_missileweapon_missileweapon_long_aml': longaml,
			'repeating_missileweapon_missileweapon_extreme_aml': extremeaml,
			'repeating_missileweapon_missileweapon_short_dmg': shortdmg,
			'repeating_missileweapon_missileweapon_medium_dmg': mediumdmg,
			'repeating_missileweapon_missileweapon_long_dmg': longdmg,
			'repeating_missileweapon_missileweapon_extreme_dmg': extremedmg
        });
    });
});

<!-- Unarmed AML and DML calculations -->

on('change:unarmed_ml sheet:opened', function() {
    getAttrs(['unarmed_ml', 'punch_weapon_atk', 'kick_weapon_atk', 'punch_weapon_def', 'kick_weapon_def'], function(values) {
		var uml = parseInt(values.unarmed_ml);
		var paml = uml + parseInt(values.punch_weapon_atk);
		var pdml = uml + parseInt(values.punch_weapon_def);
		var kaml = uml + parseInt(values.kick_weapon_atk);
		var kdml = uml + parseInt(values.kick_weapon_def);
        setAttrs({
            'punch_weapon_ml': uml,
			'punch_weapon_aml': paml,
			'punch_weapon_dml': pdml,
            'kick_weapon_ml': uml,			
            'kick_weapon_aml': kaml,
			'kick_weapon_dml': kdml
        });
    });
});

<!-- ARMOR PROTECTION -->

<!-- horse natural armour values based on aq /-->
on('change:hnatural_aq', function() {
    getAttrs(['hnatural_aq', 'hnatural_b', 'hnatural_e', 'hnatural_p', 'hnatural_f'], function(values) {
		var horsenatarmb = 4;
		var horsenatarme = 3;
		var horsenatarmp = 1;
		var horsenatarmf = 3;
		var horsenatarmaq = parseInt(values.hnatural_aq);
		var horsenatarmbaq = Math.min(horsenatarmb*2,horsenatarmb+horsenatarmaq);
		var horsenatarmeaq = Math.min(horsenatarme*2,horsenatarme+horsenatarmaq);
		var horsenatarmpaq = Math.min(horsenatarmp*2,horsenatarmp+horsenatarmaq);
		var horsenatarmfaq = Math.min(horsenatarmf*2,horsenatarmf+horsenatarmaq);
        setAttrs({
            'hnatural_b': horsenatarmbaq,			
            'hnatural_e': horsenatarmeaq,			
            'hnatural_p': horsenatarmpaq,
			'hnatural_f': horsenatarmfaq
        });
    });
});


<!-- loop through all locations and fill with B/E/P/F values if location covered --> 
const locations = ['sk','fa','nk','sh','ua','el','fo','ha','tx','ab','hp','gr','th','kn','ca','ft'];
locations.forEach(function (location) {
	on('change:repeating_armoritems', function() {
		const armorinfo = ['repeating_armoritems_armor_b', 'repeating_armoritems_armor_e', 'repeating_armoritems_armor_p', 'repeating_armoritems_armor_f'];
		const currentloc = 'repeating_armoritems_armor_loc_' + location;
		armorinfo.push(currentloc);
			getAttrs(armorinfo, function(values) {
			const locationarmorb = parseInt(values['repeating_armoritems_armor_b'])*parseInt(values[currentloc]);
			const locationarmore = parseInt(values['repeating_armoritems_armor_e'])*parseInt(values[currentloc]);
			const locationarmorp = parseInt(values['repeating_armoritems_armor_p'])*parseInt(values[currentloc]);
			const locationarmorf = parseInt(values['repeating_armoritems_armor_f'])*parseInt(values[currentloc]);
			setAttrs({
				['repeating_armoritems_armor_' + location + '_bvalue']: locationarmorb,
				['repeating_armoritems_armor_' + location + '_evalue']: locationarmore,
				['repeating_armoritems_armor_' + location + '_pvalue']: locationarmorp,
				['repeating_armoritems_armor_' + location + '_fvalue']: locationarmorf
			});
			<!-- debugger; works, no longer needed -->
		});
	}); 
}); <!-- end set armour values per location --> 


<!-- AP totals per location , could be more elegant with loop, but complicated due to skull vs sk naming . Clean up when everyone has updated their char sheets with armor on inventory tab /-->

on('change:repeating_armoritems remove:repeating_armoritems', function() {
	repeatingSum('skull_b', 'armoritems',['armor_sk_bvalue', 'armor_loc_sk','armor_iscarried']);
	repeatingSum('skull_e', 'armoritems',['armor_sk_evalue', 'armor_loc_sk','armor_iscarried']);
	repeatingSum('skull_p', 'armoritems',['armor_sk_pvalue', 'armor_loc_sk','armor_iscarried']);
	repeatingSum('skull_f', 'armoritems',['armor_sk_fvalue', 'armor_loc_sk','armor_iscarried']);
	repeatingSum('face_b', 'armoritems',['armor_fa_bvalue', 'armor_loc_fa','armor_iscarried']);
	repeatingSum('face_e', 'armoritems',['armor_fa_evalue', 'armor_loc_fa','armor_iscarried']);
	repeatingSum('face_p', 'armoritems',['armor_fa_pvalue', 'armor_loc_fa','armor_iscarried']);
	repeatingSum('face_f', 'armoritems',['armor_fa_fvalue', 'armor_loc_fa','armor_iscarried']);
	repeatingSum('neck_b', 'armoritems',['armor_nk_bvalue', 'armor_loc_nk','armor_iscarried']);
	repeatingSum('neck_e', 'armoritems',['armor_nk_evalue', 'armor_loc_nk','armor_iscarried']);
	repeatingSum('neck_p', 'armoritems',['armor_nk_pvalue', 'armor_loc_nk','armor_iscarried']);
	repeatingSum('neck_f', 'armoritems',['armor_nk_fvalue', 'armor_loc_nk','armor_iscarried']);
	repeatingSum('shoulder_b', 'armoritems',['armor_sh_bvalue', 'armor_loc_sh','armor_iscarried']);
	repeatingSum('shoulder_e', 'armoritems',['armor_sh_evalue', 'armor_loc_sh','armor_iscarried']);
	repeatingSum('shoulder_p', 'armoritems',['armor_sh_pvalue', 'armor_loc_sh','armor_iscarried']);
	repeatingSum('shoulder_f', 'armoritems',['armor_sh_fvalue', 'armor_loc_sh','armor_iscarried']);
	repeatingSum('upperarm_b', 'armoritems',['armor_ua_bvalue', 'armor_loc_ua','armor_iscarried']);
	repeatingSum('upperarm_e', 'armoritems',['armor_ua_evalue', 'armor_loc_ua','armor_iscarried']);
	repeatingSum('upperarm_p', 'armoritems',['armor_ua_pvalue', 'armor_loc_ua','armor_iscarried']);
	repeatingSum('upperarm_f', 'armoritems',['armor_ua_fvalue', 'armor_loc_ua','armor_iscarried']);
	repeatingSum('elbow_b', 'armoritems',['armor_el_bvalue', 'armor_loc_el','armor_iscarried']);
	repeatingSum('elbow_e', 'armoritems',['armor_el_evalue', 'armor_loc_el','armor_iscarried']);
	repeatingSum('elbow_p', 'armoritems',['armor_el_pvalue', 'armor_loc_el','armor_iscarried']);
	repeatingSum('elbow_f', 'armoritems',['armor_el_fvalue', 'armor_loc_el','armor_iscarried']);
	repeatingSum('forearm_b', 'armoritems',['armor_fo_bvalue', 'armor_loc_fo','armor_iscarried']);
	repeatingSum('forearm_e', 'armoritems',['armor_fo_evalue', 'armor_loc_fo','armor_iscarried']);
	repeatingSum('forearm_p', 'armoritems',['armor_fo_pvalue', 'armor_loc_fo','armor_iscarried']);
	repeatingSum('forearm_f', 'armoritems',['armor_fo_fvalue', 'armor_loc_fo','armor_iscarried']);
	repeatingSum('hand_b', 'armoritems',['armor_ha_bvalue', 'armor_loc_ha','armor_iscarried']);
	repeatingSum('hand_e', 'armoritems',['armor_ha_evalue', 'armor_loc_ha','armor_iscarried']);
	repeatingSum('hand_p', 'armoritems',['armor_ha_pvalue', 'armor_loc_ha','armor_iscarried']);
	repeatingSum('hand_f', 'armoritems',['armor_ha_fvalue', 'armor_loc_ha','armor_iscarried']);
	repeatingSum('thorax_b', 'armoritems',['armor_tx_bvalue', 'armor_loc_tx','armor_iscarried']);
	repeatingSum('thorax_e', 'armoritems',['armor_tx_evalue', 'armor_loc_tx','armor_iscarried']);
	repeatingSum('thorax_p', 'armoritems',['armor_tx_pvalue', 'armor_loc_tx','armor_iscarried']);
	repeatingSum('thorax_f', 'armoritems',['armor_tx_fvalue', 'armor_loc_tx','armor_iscarried']);	
	repeatingSum('abdomen_b', 'armoritems',['armor_ab_bvalue', 'armor_loc_ab','armor_iscarried']);
	repeatingSum('abdomen_e', 'armoritems',['armor_ab_evalue', 'armor_loc_ab','armor_iscarried']);
	repeatingSum('abdomen_p', 'armoritems',['armor_ab_pvalue', 'armor_loc_ab','armor_iscarried']);
	repeatingSum('abdomen_f', 'armoritems',['armor_ab_fvalue', 'armor_loc_ab','armor_iscarried']);		
	repeatingSum('hip_b', 'armoritems',['armor_hp_bvalue', 'armor_loc_hp','armor_iscarried']);
	repeatingSum('hip_e', 'armoritems',['armor_hp_evalue', 'armor_loc_hp','armor_iscarried']);
	repeatingSum('hip_p', 'armoritems',['armor_hp_pvalue', 'armor_loc_hp','armor_iscarried']);
	repeatingSum('hip_f', 'armoritems',['armor_hp_fvalue', 'armor_loc_hp','armor_iscarried']);	
	repeatingSum('groin_b', 'armoritems',['armor_gr_bvalue', 'armor_loc_gr','armor_iscarried']);
	repeatingSum('groin_e', 'armoritems',['armor_gr_evalue', 'armor_loc_gr','armor_iscarried']);
	repeatingSum('groin_p', 'armoritems',['armor_gr_pvalue', 'armor_loc_gr','armor_iscarried']);
	repeatingSum('groin_f', 'armoritems',['armor_gr_fvalue', 'armor_loc_gr','armor_iscarried']);		
	repeatingSum('thigh_b', 'armoritems',['armor_th_bvalue', 'armor_loc_th','armor_iscarried']);
	repeatingSum('thigh_e', 'armoritems',['armor_th_evalue', 'armor_loc_th','armor_iscarried']);
	repeatingSum('thigh_p', 'armoritems',['armor_th_pvalue', 'armor_loc_th','armor_iscarried']);
	repeatingSum('thigh_f', 'armoritems',['armor_th_fvalue', 'armor_loc_th','armor_iscarried']);	
	repeatingSum('knee_b', 'armoritems',['armor_kn_bvalue', 'armor_loc_kn','armor_iscarried']);
	repeatingSum('knee_e', 'armoritems',['armor_kn_evalue', 'armor_loc_kn','armor_iscarried']);
	repeatingSum('knee_p', 'armoritems',['armor_kn_pvalue', 'armor_loc_kn','armor_iscarried']);
	repeatingSum('knee_f', 'armoritems',['armor_kn_fvalue', 'armor_loc_kn','armor_iscarried']);
	repeatingSum('calf_b', 'armoritems',['armor_ca_bvalue', 'armor_loc_ca','armor_iscarried']);
	repeatingSum('calf_e', 'armoritems',['armor_ca_evalue', 'armor_loc_ca','armor_iscarried']);
	repeatingSum('calf_p', 'armoritems',['armor_ca_pvalue', 'armor_loc_ca','armor_iscarried']);
	repeatingSum('calf_f', 'armoritems',['armor_ca_fvalue', 'armor_loc_ca','armor_iscarried']);
	repeatingSum('foot_b', 'armoritems',['armor_ft_bvalue', 'armor_loc_ft','armor_iscarried']);
	repeatingSum('foot_e', 'armoritems',['armor_ft_evalue', 'armor_loc_ft','armor_iscarried']);
	repeatingSum('foot_p', 'armoritems',['armor_ft_pvalue', 'armor_loc_ft','armor_iscarried']);
	repeatingSum('foot_f', 'armoritems',['armor_ft_fvalue', 'armor_loc_ft','armor_iscarried']);

}); 

</script>
<div>
	<button type="action" name="act_pc" >Character</button>
	<button type="action" name="act_journal" >Journal</button>
	<button type="action" name="act_npcsheet" >NPC Sheet</button>
</div>
<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab"  value="pc"  />
<div class="sheet-npcsheet">

	<h2>Name</h2><input type="text" name="attr_character_name" style="width: 70%;">
	<h2>Stats</h2>

	<div class="sheet-flex-section">
		<span>
			<label>Attribute Level</label><input type="number" name="attr_attribute_level"  value="0">
		</span>
		<span>
			<label>Endurance</label>		
			<input type="number" name="attr_endurance" value="0">
			<label>/</label>
			<input type="number" name="attr_endurance_max" value="0">
	</div>

	<div class="sheet-flex-section">
		<span>	
			<label>Hate/Resolve</label>		
			<input type="number" name="attr_hate">
			<label>/</label>
			<input type="number" name="attr_hate_max">
		</span>
		<span>
			<label>Parry &amp; Shield</label>			
			<input type="number" name="attr_parry" value="0" type="number">
			<label>+</label>
			<input type="number" name="attr_shield" value="0" type="number">
		</span>
		<span>
			<label>Armour</label>
			<button type="roll" value="/me rolls for Protection against Injury TN.\n/roll @{favorill} + (@{armour}+@{head-gear}+?{Bonus Dice|0})t[@{wearytype}]" name="protectioncheck"></button>		
			<input type="checkbox" name="attr_armour_favoured" value="1">
			<input type="number" value="0" name="attr_armour" value="0">+</span>
			<input type="number" value="0" name="attr_head-gear" value="0">
		</span>
	</div>

	<div class=sheet-row>
		<h2>Roll Types</h2>
	</div>
	<div class=sheet-row>
		<input name="attr_favorill" type="radio" value="{1t[feat]}">
		<span class='label'>Normal</span>
	</div>
	<div class=sheet-row>
		<input name="attr_favorill" type="radio" value="{2t[feat]}kh1">
		<span class='label'>Favoured</span>
	</div>
	<div class=sheet-row>
		<input name="attr_favorill" type="radio" value="{2t[feat]}kl1">
		<span class='label'>Ill Favoured</span>
	</div>
	<div class=sheet-row>
	<input name="attr_weary" type="checkbox">
		<span class='label'>Weary</span>
	</div>

	
	
	<h2 data-i18n="weapon-skills">Weapon Skills</h2>
	<div class="sheet-npcsheet-weapons">
				<label data-i18n-title="weapon" title="weapon">
					<span class="label">Weapon</span>
				</label>
				<label data-i18n-title="rating" title="rating">
					<span class="label">Rating</span>
				</label>
				<label data-i18n-title="damage" title="damage">
					<span class="label">Damage</span>
				</label>
				<label data-i18n-title="injury" title="injury">
					<span class="label">Injury</span>
				</label>
				<label data-i18n-title="shot" title="shot">
					<span class="label">Called Shot</span>
				</label>
				
				
				<label data-i18n-title="weapon_1" title="weapon_1">				
				<button type="roll" value="/me Attack using @{weapon_skill_name_1} .\n/roll @{favorill} + (@{weapon_rating_1}+?{Bonus Dice|0})t[@{wearytype}]" name="weapon1check"></button>			
				<input type="checkbox" name="weapon_favoured_1">							
				<input name="attr_weapon_skill_name_1" type="text">
				</label>				
				<label data-i18n-title="rating_1" title="rating_1">					
					<input name="attr_weapon_rating_1" value="0" class="center number" type="number">
				</label>				
				<label data-i18n-title="damage_1" title="damage_1">				
					<input name="attr_weapon_damage_1" value="0" class="center number" type="number">
				</label>				
				<label data-i18n-title="edge_1" title="edge_1">				
					<input name="attr_weapon_edge_1" value="0" class="center number" type="number">
				</label>				
				<label data-i18n-title="injury_1" title="injury_1">
					<input name="attr_weapon_injury_1" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="shot_1" title="shot_1">
					<input name="attr_weapon_called_shot_1"  type="text">
				</label>

				<label data-i18n-title="weapon_2" title="weapon_2">
				<button type="roll" value="/me Attack using @{weapon_skill_name_2} .\n/roll @{favorill} + (@{weapon_rating_2}+?{Bonus Dice|0})t[@{wearytype}]" name="weapon2check"></button>
				<input type="checkbox" name="weapon_favoured_2">			
				<input name="attr_weapon_skill_name_2" type="text">
				</label>				
				<label data-i18n-title="rating_2" title="rating_2">
					<input name="attr_weapon_rating_2" value="0" class="center number" type="number">
				</label>				
				<label data-i18n-title="damage_2" title="damage_2">				
					<input name="attr_weapon_damage_2" value="0" class="center number" type="number">
				</label>				
				<label data-i18n-title="edge_2" title="edge_2">				
					<input name="attr_weapon_edge_2" value="0" class="center number" type="number">
				</label>				
				<label data-i18n-title="injury_2" title="injury_2">
					<input name="attr_weapon_injury_2" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="shot_2" title="shot_2">
					<input name="attr_weapon_called_shot_2"  type="text">
				</label>

				<label data-i18n-title="weapon_3" title="weapon_3">
				<button type="roll" value="/me Attack using @{weapon_skill_name_3} .\n/roll @{favorill} + (@{weapon_rating_3}+?{Bonus Dice|0})t[@{wearytype}]" name="weapon2check"></button>
				<input type="checkbox" name="weapon_favoured_3">				
				<input name="attr_weapon_skill_name_3" type="text">
				</label>
				
				<label data-i18n-title="rating_3" title="rating_3">
					<input name="attr_weapon_rating_3" value="0" class="center number" type="number">
				</label>				
				<label data-i18n-title="damage_3" title="damage_3">				
					<input name="attr_weapon_damage_3" value="0" class="center number" type="number">
				</label>				
				<label data-i18n-title="edge_3" title="edge_3">				
					<input name="attr_weapon_edge_3" value="0" class="center number" type="number">
				</label>				
				<label data-i18n-title="injury_3" title="injury_3">
					<input name="attr_weapon_injury_3" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="shot_3" title="shot_3">
					<input name="attr_weapon_called_shot_3" type="text">
				</label>
	</div>

	<table class="sheet-combat" >
            <tr>
                <td colspan="2">

                    <h2 data-i18n="mount">Mount</h2>

                    <table class="sheet-weapon-skills" style="width: 80%;">
                        <thead>
                            <tr>
								<td></td>
                                <td><span class="label" data-i18n="mount-name">Name</span></td>
                                <td><span class="label" data-i18n="mount-type">Type</span></td>
                                <td><span class="label" data-i18n="mount-size">Size</span></td>
                                <td style="width: 80px;"><span class="label" class="sheet-center" data-i18n="mount-riding-mod">Riding Mod.</span></td>
								<td style="width: 80px;"><span class="label" class="sheet-center" data-i18n="mount-charge-bonus">Charge Bonus</span></td>
								<td style="width: 80px;"><span class="label" class="sheet-center" data-i18n="mount-arm-red">Arm.Red.</span></td>
								<td><span class="label" data-i18n="mount-qualities">Qualities</span></td>
							</tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><button type="roll" value="/me @{translation_charges_with} @{mount_name_1} @{translation_an_attack} @{translation_against_tn} [[?{@{translation_target_number}|16} + @{mount_modifier_1}]].\n/roll 1t[lm-feat] + @{movement}t[@{weary}] + [[@{movement_favoured} * @{attribute_level}]] > [[?{@{translation_target_number}|16} + @{mount_modifier_1}]]" name="mount1check"></button></td>
								<td><input name="attr_mount_name_1" type="text" style="width: 80px;"></td>
								<td><input name="attr_mount_type_1" type="text" style="width: 70px;"></td>
								<td><input name="attr_mount_size_1" type="text" style="width: 40px;"></td>
								<td><input name="attr_mount_modifier_1" value="0" class="center number" type="number"></td>
                                <td><input name="attr_mount_damage_1" value="0" class="center number" type="number"></td>
                                <td><input name="attr_mount_reduction_1" value="0" class="center number" type="number"></td>
								<td><input name="attr_mount_qualities_1" type="text" style="width: 200px;"></td>
							</tr>
                            <tr>
                                <td><button type="roll" value="/me @{translation_charges_with} @{mount_name_2} @{translation_an_attack} @{translation_against_tn} [[?{@{translation_target_number}|16} + @{mount_modifier_2}]].\n/roll 1t[lm-feat] + @{movement}t[@{weary}] + [[@{movement_favoured} * @{attribute_level}]] > [[?{@{translation_target_number}|16} + @{mount_modifier_2}]]" name="mount2check"></button></td>
								<td><input name="attr_mount_name_2" type="text" style="width: 80px;"></td>
                                <td><input name="attr_mount_type_2" type="text" style="width: 70px;"></td>
								<td><input name="attr_mount_size_2" type="text" style="width: 40px;"></td>
								<td><input name="attr_mount_modifier_2" value="0" class="center number" type="number"></td>
                                <td><input name="attr_mount_damage_2" value="0" class="center number" type="number"></td>
                                <td><input name="attr_mount_reduction_2" value="0" class="center number" type="number"></td>
								<td><input name="attr_mount_qualities_2" type="text" style="width: 200px;"></td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
        <tr>
            <td colspan="2" class="sheet-center sheet-section-heading">
                <label data-i18n="special-abilities">Special Abilities</label>
            </td>
        </tr>
        <tr>
            <td colspan="2" style="padding-left: 10px;"><textarea name="attr_abilities"></textarea></td>
        </tr>
    </table>
</div>




<div class="sheet-journal">
	<div class="sheet-2colrow">
		<div class="sheet-col">
			<h2>Journal</h2>
			<textarea name="attr_pcjournal" style="width:400px; height:600px"></textarea>
		</div>	
		<div class="sheet-col">
			<h2>Notes</h2>
			<textarea name="attr_pcnotes" style="width:400px; height:600px"></textarea>
		</div>
	</div>
</div>


<div class="sheet-pc">
	<h2>Name</h2>



	<input type="text" name="attr_character_name" style="width: 100%;">
	<div class="sheet-3colrow">
		<div class="sheet-col">
			<span class='label'>Heroic Culture</span><input type="text" name="attr_culture" style="width: 100%;">
			<span class='label'>Cultural Blessing</span><input type="text" name="attr_cultural_blessing" style="width: 100%;">
			<span class='label'>Calling</span><input type="text" name="attr_calling" style="width: 100%;">
		</div>
		<div class="sheet-col">
			<span class='label'>Age</span><input type="text" name="attr_age" style="width: 100%;">
			<span class='label'>Shadow Path</span><input type="text" name="attr_shadow_weakness" style="width: 100%;">
			<span class='label'>Standard of Living</span><input type="text" name="attr_standard_of_living" style="width: 100%;">
		</div>
		<div class="sheet-col">
			<span class='label'>Distinctive Features</span><textarea name="attr_distinctive_features" style="width: 100%;"/>
		</div>
	</div>
	<div class="sheet-4colrow">
		<div class="sheet-col">
			<div class="sheet-row">
				<h2>Strength</h2>
				<div class="sheet-hover-info">A character with a high Strength score can be tough and fit, or tall and agile, or even attractive or imposing. Every aspect of a character that relies on vigour or physical well-being is represented in the game by Strength.</div>
			</div>
			<div class="sheet-main">
				<input name="attr_strength" type="number" value="0">
			</div>
			<div class="sheet-main">
				<span class='label'>TN</span><input name="attr_strengthtn" type="number" value="0">
			</div>
			<div class="sheet-main">
				<span class='label'>Endurance</span><input name="attr_endurance" type="number" value="0">
				<span class='label'>Current</span><input name="attr_currentendurance" value="0" type="number">
			</div>
		
			<div class=sheet-row>
				<button type="roll" value="/me rolls for Awe against Strength TN (@{strengthtn}) .\n/roll @{favorill} + (@{awe}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_awecheck"></button>			
				
				<input type="checkbox" name="attr_awe_favoured">
				<span class='label'>Awe</span>
				<div class="sheet-hover-info">This skill measures a hero’s capacity to provoke respect in onlookers, and determines the impression a hero makes on someone he meets for the first time. Depending on the circumstances and the hero’s intentions or disposition, it can be used to instil wonderment, admiration, or even fear. <span class='sheet-strong'>Awe</span> arises from a character’s native charisma, but can also be engineered with a dramatic entrance or impressive attire.<br><br>A successful use of the skill provokes the chosen effect. A failure fails to have any impact, or can even lead to the opposite result! Achieving a great success means that the hero has won the hearts of the onlookers, or cowed them into silent submission. An extraordinary success may produce open reverence, or panic.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_awe" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_awe" value="1" /><span></span>
					<input type="radio" name="attr_awe" value="2" /><span></span>
					<input type="radio" name="attr_awe" value="3" /><span></span>
					<input type="radio" name="attr_awe" value="4" /><span></span>
					<input type="radio" name="attr_awe" value="5" /><span></span>
					<input type="radio" name="attr_awe" value="6" /><span></span>
				</div>
			</div>
		
			<div class=sheet-row>
				<button type="roll" value="/me rolls for Athletics against Strength TN (@{strengthtn}) .\n/roll @{favorill} + (@{athletics}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_athleticscheck"></button>
				<input type="checkbox" name="attr_athletics_favoured">
				<span class='label'>Athletics</span>
				<div class="sheet-hover-info" data-i18n="athletics-description"><span class='sheet-strong'>Athletics</span> is a broad skill, covering most of the physical activities that a hero might undertake while adventuring, including r unning, leaping, climbing, swimming and throwing stones or other small objects. Heroes with high <span class='sheet-strong'>Athletics</span> skill scores exhibit a winning combination of physical prowess, grace and control, generally gained through continuous exercise and daily exertion.<br><br>A successful <span class='sheet-strong'>Athletics</span> roll produces a satisfactory outcome in the physical activity, while a failed roll might even lead to serious harm, depending on the circumstances. A great or extraordinary result suggests a spectacular achievement.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_athletics" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_athletics" value="1" /><span></span>
					<input type="radio" name="attr_athletics" value="2" /><span></span>
					<input type="radio" name="attr_athletics" value="3" /><span></span>
					<input type="radio" name="attr_athletics" value="4" /><span></span>
					<input type="radio" name="attr_athletics" value="5" /><span></span>
					<input type="radio" name="attr_athletics" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Awareness against Strength TN (@{strengthtn}) .\n/roll @{favorill} + (@{awareness}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_awarenesscheck"></button>
				<input type="checkbox" name="attr_awareness_favoured">
				<span class='label'>Awareness</span>
				<div class="sheet-hover-info" data-i18n="awareness-description">The <span class='sheet-strong'>Awareness</span> skill represents a hero's readiness to react and his ability to notice something unexpected, out of the ordinary, or difficult to detect. High skill reflects both keen senses and the experience to understand what you see and hear.<br><br>A high <span class='sheet-strong'>Awareness</span> rating expresses an extraordinar y watchfulness, and is extremely useful to a companion who ser ves as a look-out for the company.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_awareness" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_awareness" value="1" /><span></span>
					<input type="radio" name="attr_awareness" value="2" /><span></span>
					<input type="radio" name="attr_awareness" value="3" /><span></span>
					<input type="radio" name="attr_awareness" value="4" /><span></span>
					<input type="radio" name="attr_awareness" value="5" /><span></span>
					<input type="radio" name="attr_awareness" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Hunting against Strength TN (@{strengthtn}) .\n/roll @{favorill} + (@{hunting}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_huntingcheck"></button>
				<input type="checkbox" name="attr_hunting_favoured">
				<span class='label'>Hunting</span>
				<div class="sheet-hover-info" data-i18n="hunting-description">Knowing how to hunt is a fundamental skill common in much of Middle-earth. A <span class='sheet-strong'>Hunting</span> roll may be required when pursuing a creature through wild areas, or to locate tracks and follow them, or to identify a quarry by its spoor. The skill also covers preparing traps and the training and use of hunting dogs or birds. In wilder areas, hunters learn to apply their trade to more dangerous quarry, such as Orcs, Spiders or Wargs, or else risk becoming the prey.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_hunting" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_hunting" value="1" /><span></span>
					<input type="radio" name="attr_hunting" value="2" /><span></span>
					<input type="radio" name="attr_hunting" value="3" /><span></span>
					<input type="radio" name="attr_hunting" value="4" /><span></span>
					<input type="radio" name="attr_hunting" value="5" /><span></span>
					<input type="radio" name="attr_hunting" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Song against Strength TN (@{strengthtn}) .\n/roll @{favorill} + (@{song}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_songcheck"></button>
				<input type="checkbox" name="attr_song_favoured">
				<span class='label'>Song</span>
				<div class="sheet-hover-info" data-i18n="song-description">Hobbits and Men, Elves and Dwarves, even Goblins and maybe Orcs: all the creatures of Middle-earth celebrate by playing music and singing songs. Great deeds and grim misfortunes are remembered in verse, and pleasant or even comic stories are told to ease spirits and find comfort.<br><br><span class='sheet-strong'>Song</span> is used to recite poems, sing songs or play instruments suitable to the character's culture. It can also be used to learn new works or create original compositions.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_song" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_song" value="1" /><span></span>
					<input type="radio" name="attr_song" value="2" /><span></span>
					<input type="radio" name="attr_song" value="3" /><span></span>
					<input type="radio" name="attr_song" value="4" /><span></span>
					<input type="radio" name="attr_song" value="5" /><span></span>
					<input type="radio" name="attr_song" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Craft against Strength TN (@{strengthtn}) .\n/roll @{favorill} + (@{craft}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_craftcheck"></button>
				<input type="checkbox" name="attr_craft_favoured">
				<span class='label'>Craft</span>
				<div class="sheet-hover-info" data-i18n="craft-description">The <span class='sheet-strong'>Craft</span> skill doesn't really cover the whole range of abilities of smiths, wrights and other artisans, but reflects the talent of a character for making or mending things by hand, although Traits like Smithcraft or Woodwright can be used to reflect proficiency in a specific craft. Craft could be used to attempt to repair the wheel of a cart, or construct an improvised raft with wood found on a river shore, or even when trying to start a fire on a windy hill.<br><br>A high <span class='sheet-strong'>Craft</span> score may indicate that the hero was a craftsman before starting his life of adventure. Some races, such as the Dwar ves and Noldor Elves, revere crafts as the highest expression of creativity.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_craft" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_craft" value="1" /><span></span>
					<input type="radio" name="attr_craft" value="2" /><span></span>
					<input type="radio" name="attr_craft" value="3" /><span></span>
					<input type="radio" name="attr_craft" value="4" /><span></span>
					<input type="radio" name="attr_craft" value="5" /><span></span>
					<input type="radio" name="attr_craft" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<h3>Combat Proficencies</h3>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Axes against Strength TN (@{strengthtn}) .\n/roll @{favorill} + (@{axes}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_axescheck"></button>
				<span class='label'>Axes</span>
				<div class="sheet-hover-info" data-i18n="axes-description">Axes and other bashing weapons are often preferred to swords by warriors who favour a more brutal approach to fighting. Historically, the axe is the weapon of choice for most Dwarves, and for their folk it surpasses the sword in both nobility and respect. Dwarven weaponsmiths apply their cunning to making axes of many different shapes and uses, and from metals of various colours. The AXES Combat Proficiency allows a Player-hero to use an axe, a great axe, a long-hafted axe, but also bashing weapons like a club or a mattock.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_axes" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_axes" value="1" /><span></span>
					<input type="radio" name="attr_axes" value="2" /><span></span>
					<input type="radio" name="attr_axes" value="3" /><span></span>
					<input type="radio" name="attr_axes" value="4" /><span></span>
					<input type="radio" name="attr_axes" value="5" /><span></span>
					<input type="radio" name="attr_axes" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Bows against Strength TN (@{strengthtn}) .\n/roll @{favorill} + (@{bows}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_bowscheck"></button>
				<span class='label'>Bows</span>
				<div class="sheet-hover-info" data-i18n="bows-description">A traditional hunting weapon, the bow is also commonly used in warfare. Made from a single piece of wood, or from a composition  of wood, horn, or even metal, bows are a versatile weapon. They can be used during sieges, from horseback, in dense woodland, or in the open field. Archers usually carry another weapon to draw when the enemy gets closer; they seldom carry shields, as they can’t use them when shooting a bow. The BOWS Combat Proficiency enables a Player-hero to make ranged attacks using a bow or a great bow.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_bows" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_bows" value="1" /><span></span>
					<input type="radio" name="attr_bows" value="2" /><span></span>
					<input type="radio" name="attr_bows" value="3" /><span></span>
					<input type="radio" name="attr_bows" value="4" /><span></span>
					<input type="radio" name="attr_bows" value="5" /><span></span>
					<input type="radio" name="attr_bows" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Spears against Strength TN (@{strengthtn}) .\n/roll @{favorill} + (@{spears}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_spearscheck"></button>
				<span class='label'>Spears</span>
				<div class="sheet-hover-info" data-i18n="spears-description">The spear is arguably the most widespread weapon across Middle-earth, arming kings and soldiers, riders and infantry. It is often no more than a long wooden shaft, tipped by a leaf-shaped metal head, but some spears are works of majestic artisanship, valuable heirlooms of noble households. The length of a spear varies according to the use it is designed for. Spears can be wielded one or two-handed to thrust and lunge, cast to pierce from a distance, or used from horseback as lances. Warriors equipped with a spear typically use it in conjunction with a shield, and they usually carry an additional weapon, such as a sword or axe. The SPEARS Combat Proficiency allows a hero to make ranged and close combat attacks using a short spear or a spear, or to fight in close combat using a great spear.</div> 
				<div class="sheet-dots">
					<input type="radio" name="attr_spears" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_spears" value="1" /><span></span>
					<input type="radio" name="attr_spears" value="2" /><span></span>
					<input type="radio" name="attr_spears" value="3" /><span></span>
					<input type="radio" name="attr_spears" value="4" /><span></span>
					<input type="radio" name="attr_spears" value="5" /><span></span>
					<input type="radio" name="attr_spears" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Swords against Strength TN (@{strengthtn}) .\n/roll @{favorill} + (@{swords}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_swordscheck"></button>
				<span class='label'>Swords</span>
				<div class="sheet-hover-info" data-i18n="swords-description">The sword with a straight blade has always been the weapon of choice among free Men and Elves. A mark of nobility or rank, swords of superior make are passed down by generations of warriors, and arms of ancient lineage are often imbued with spells and curses, the bane of the servants of the Shadow. Swords vary in size, shape, and quality as diverse as the folks that craft them. Many malevolent creatures have devised swords after their own fashion, usually crude counterfeits of those made by Men and Elves. The SWORDS Combat Proficiency enables a Player-hero to attack in close combat using short swords, swords, and long swords.</div> 
				<div class="sheet-dots">
					<input type="radio" name="attr_swords" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_swords" value="1" /><span></span>
					<input type="radio" name="attr_swords" value="2" /><span></span>
					<input type="radio" name="attr_swords" value="3" /><span></span>
					<input type="radio" name="attr_swords" value="4" /><span></span>
					<input type="radio" name="attr_swords" value="5" /><span></span>
					<input type="radio" name="attr_swords" value="6" /><span></span>
				</div>
			</div>

		</div>
		<div class="sheet-col">
			<h2>Heart</h2>
			<div class="sheet-main">
				<div class="sheet-hover-info" data-i18n="heart-description">Measures a character's capacity for emotion, energy and enthusiasm. A hero with a high Heart score can be fiery, intense, and hard to demoralise. Activities that benefit from a passionate or energetic temper may be influenced by a character's Heart score.</div>
				<input name="attr_heart" type="number" value="0">
			</div>
			<div class="sheet-main">
				<span class='label'>TN</span><input name="attr_hearttn" type="number" value="0">
			</div>
			<div class="sheet-main">
				<span class='label'>Hope</span><input name="attr_hope" type="number" value="0">
				<span class='label'>Current</span><input name="attr_currenthope" value="0" type="number">
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Enhearten against Heart TN (@{hearttn}) .\n/roll @{favorill} + (@{enhearten}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_enheartencheck"></button>
				<input type="checkbox" name="attr_enhearten_favoured">
				<span class='label'>Enhearten</span>
				<div class="sheet-hover-info">Player-heroes can use the ENHEARTEN Skill to instil positive feelings in others, urging them to act on the matter at hand. They achieve this mainly through example, charisma, and personal conviction, rather than through the effective use of words (which falls under PERSUADE below). This Skill can be used on individuals, but is particularly effective in influencing crowds. Player-heroes with high ENHEARTEN ratings can be forceful orators, passionate agitators, and well-loved leaders. A successful ENHEARTEN roll awakens a chosen feeling in the subject, as long as it is not in opposition to their current mood. A superior success is enough to influence wholly disinterested individuals, or turn rivals into supporters.</div> 
				<div class="sheet-dots">
					<input type="radio" name="attr_enhearten" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_enhearten" value="1" /><span></span>
					<input type="radio" name="attr_enhearten" value="2" /><span></span>
					<input type="radio" name="attr_enhearten" value="3" /><span></span>
					<input type="radio" name="attr_enhearten" value="4" /><span></span>
					<input type="radio" name="attr_enhearten" value="5" /><span></span>
					<input type="radio" name="attr_enhearten" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Travel against Heart TN (@{hearttn}) .\n/roll @{favorill} + (@{travel}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_travelcheck"></button>
				<input type="checkbox" name="attr_travel_favoured">
				<span class='label'>Travel</span>
				<div class="sheet-hover-info">In the Third Age, the cities, villages and towns of Middle- earth are often separated by many leagues of wild or deserted areas. Roads that used to lead safely to distant realms now end in broken trails that go nowhere.<br><br>When the company needs to cover a distance across uncertain territory, including by boat, every companion is required to perform one or more tests using the <span class='sheet-strong'>Travel</span> skill to avoid becoming weary too soon. While certainly the product of exper ience, the use of Travel benef its mostly from a hero's strength of spirit.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_travel" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_travel" value="1" /><span></span>
					<input type="radio" name="attr_travel" value="2" /><span></span>
					<input type="radio" name="attr_travel" value="3" /><span></span>
					<input type="radio" name="attr_travel" value="4" /><span></span>
					<input type="radio" name="attr_travel" value="5" /><span></span>
					<input type="radio" name="attr_travel" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Insight against Heart TN (@{hearttn}) .\n/roll @{favorill} + (@{insight}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_insightcheck"></button>
				<input type="checkbox" name="attr_insight_favoured">
				<span class='label'>Insight</span>
				<div class="sheet-hover-info" data-i18n="insight-description"><span class='sheet-strong'>Insight</span> is the ability of a hero to see beyond appearances, recognising people's hidden thoughts and beliefs. Heroes with <span class='sheet-strong'>Insight</span> can recognise when someone is lying, and can draw useful conclusions about people's motives. A hero with a high <span class='sheet-strong'>Insight</span> score is often recognised as being a sensible and discerning individual, and many might seek his counsel. A successful <span class='sheet-strong'>Insight</span> roll provides the hero with a faithful, if partial, portrait of the character observed. A great or extraordinary success reveals truths about an individual of which he himself is ignorant. <span class='sheet-strong'>Insight</span> tests may be rolled in opposition to an adversary using <span class='sheet-strong'>Persuade</span> or another Personality skill.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_insight" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_insight" value="1" /><span></span>
					<input type="radio" name="attr_insight" value="2" /><span></span>
					<input type="radio" name="attr_insight" value="3" /><span></span>
					<input type="radio" name="attr_insight" value="4" /><span></span>
					<input type="radio" name="attr_insight" value="5" /><span></span>
					<input type="radio" name="attr_insight" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Healing against Heart TN (@{hearttn}) .\n/roll @{favorill} + (@{healing}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_healingcheck"></button>
				<input type="checkbox" name="attr_healing_favoured">
				<span class='label'>Healing</span>
				<div class="sheet-hover-info" data-i18n="healing-description">The knowledge of how to relieve pain and apply remedies to restore health to the suffering is an ancient one, and treatments differ from culture to culture. Almost all traditions, however, agree on the treatment of serious injuries, which must be immediately tended to keep from worsening.<br><br>The <span class='sheet-strong'>Healing</span> skill includes bone setting and the use of herbs or salves, but the outcome relies on the ability of the healer to understand what ails the sufferer and determine what should be done.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_healing" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_healing" value="1" /><span></span>
					<input type="radio" name="attr_healing" value="2" /><span></span>
					<input type="radio" name="attr_healing" value="3" /><span></span>
					<input type="radio" name="attr_healing" value="4" /><span></span>
					<input type="radio" name="attr_healing" value="5" /><span></span>
					<input type="radio" name="attr_healing" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Courtesy against Heart TN (@{hearttn}) .\n/roll @{favorill} + (@{courtesy}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_courtesycheck"></button>
				<input type="checkbox" name="attr_courtesy_favoured">
				<span class='label'>Courtesy</span>
				<div class="sheet-hover-info" data-i18n="courtesy-description">The Free Peoples recognise common norms of decency and ancient conventions of behaviour. Observing these traditions demonstrates respect and is a way of quickly establishing a friendly footing even with complete strangers.<br><br>A hero succeeding in a <span class='sheet-strong'>Courtesy</span> roll knows what to say at the right moment to make a good impression with their host, or is mindful of his manners when receiving guests.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_courtesy" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_courtesy" value="1" /><span></span>
					<input type="radio" name="attr_courtesy" value="2" /><span></span>
					<input type="radio" name="attr_courtesy" value="3" /><span></span>
					<input type="radio" name="attr_courtesy" value="4" /><span></span>
					<input type="radio" name="attr_courtesy" value="5" /><span></span>
					<input type="radio" name="attr_courtesy" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Battle against Heart TN (@{hearttn}) .\n/roll @{favorill} + (@{battle}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_battlecheck"></button>
				<input type="checkbox" name="attr_battle_favoured">
				<span class='label'>Battle</span>
				<div class="sheet-hover-info" data-i18n="battle-description">A hero's proficiency in this skill shows his grasp of the rules of battle, and his ability to keep his head when involved in a violent confrontation. The <span class='sheet-strong'>Battle</span> skill can be used to gain an advantage when involved in a fight with a group of foes, or to lead a company of men in open battle and maintain order in the midst of chaos (combat itself is covered by Weapon skills).</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_battle" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_battle" value="1" /><span></span>
					<input type="radio" name="attr_battle" value="2" /><span></span>
					<input type="radio" name="attr_battle" value="3" /><span></span>
					<input type="radio" name="attr_battle" value="4" /><span></span>
					<input type="radio" name="attr_battle" value="5" /><span></span>
					<input type="radio" name="attr_battle" value="6" /><span></span>
				</div>
			</div>
			
			<div class=sheet-row>
				<h3>Rewards</h3>
				<input type="checkbox" name="attr_valour_favoured">
				<span class='label'>Valour</span>
				<div class="sheet-hover-info" data-i18n="valour-description">Valour is a measure of a character’s courage, as tempered by dangerous deeds. A man of valour is willing to place himself in danger for the safety of others. In a time where new threats arise each day, courage is highly prized, and a valiant adventurer is often esteemed above all other individuals. For this reason, a hero’s rank in Valour also reflects the level of renown he attained as a doer of great deeds.<br><br>When a player decides to favour Valour over Wisdom, his hero’s actions, not his judgement, will tend to prove his status in the eyes of others. From the lowliest start as a wandering adventurer, a hero might one day equal the repute and respect earned by a famous champion or king.</div>
				<input id="valour-input" name="attr_valour" value="0" type="number" min=1 max=6>
				<button type="roll" value="/me rolls for Valour against Heart TN (@{hearttn}) .\n/roll @{favorill} + (@{valour}+?{Bonus Dice|0})t[@{wearytype}]" name="valourcheck"></button>
			</div>
			<div class=sheet-row>
				<textarea name="attr_rewards" style="width: 100%;"/>
			</div>
			
		</div>
		<div class="sheet-col">
			<h2>Wits</h2>
			<div class="sheet-main">
				<div class="sheet-hover-info" data-i18n="wits-description">A hero with a high Wits rating can be clever, attentive and strong-willed. A sharp-witted person is a quick thinker, and probably alert and vigilant, so any action that calls upon these qualities benefits from a hero's Wits score.</div>
				<input name="attr_wits" type="number" value="0"> 
			</div>
			<div class="sheet-main">
				<span class='label'>TN</span><input name="attr_witstn" type="number" value="0">
			</div>
			<div class="sheet-row">
				<span class='label'>Parry</span><input name="attr_parry" type="number" value="0">
			</div>
		
			<div class=sheet-row>
				<button type="roll" value="/me rolls for Persuade against Wits TN (@{witstn}) .\n/roll @{favorill} + (@{persuade}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_persuadecheck"></button>
				<input type="checkbox" name="attr_persuade_favoured">
				<span class='label'>Persuade</span>
				<div class="sheet-hover-info" data-i18n="persuade-description">This skill allows a hero to apply his or her reasoning to convince another individual of an idea or course of action. It can be used to influence small groups of listeners, but only if used in an appropriate context, such as a common hall. An attempt at persuasion requires more time than other Personality skills, but can have a more lasting impact on other characters' actions. A high <span class='sheet-strong'>Persuade</span> score denotes an uncommon eloquence, a love of speech and knowledge of its proper use and its effect on listeners. Wise men, advisors to chieftains and kings and their messengers all share this passion for the spoken word.<br><br>The successful use of the skill lets the hero convince his audience of the flaws in their current position. A great success convinces the subject of the quality of the hero's stance, while an extraordinary success may turn the subject into an ardent believer.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_persuade" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_persuade" value="1" /><span></span>
					<input type="radio" name="attr_persuade" value="2" /><span></span>
					<input type="radio" name="attr_persuade" value="3" /><span></span>
					<input type="radio" name="attr_persuade" value="4" /><span></span>
					<input type="radio" name="attr_persuade" value="5" /><span></span>
					<input type="radio" name="attr_persuade" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Stealth against Wits TN (@{witstn}) .\n/roll @{favorill} + (@{stealth}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_stealthcheck"></button>
				<input type="checkbox" name="attr_stealth_favoured">
				<span class='label'>Stealth</span>
				<div class="sheet-hover-info" data-i18n="stealth-description">A hero resorts to <span class='sheet-strong'>Stealth</span> whenever he needs, or is forced, to act in a furtive or secret way. The skill includes hiding, moving quietly and shadowing others. These activities often rely on quickness and precision, so a stealthy hero combines practiced caution with the ability to judge the right moment to take a chance. Hunters, burglars, and solitary fighters use <span class='sheet-strong'>Stealth</span> to prosper in their trade.<br><br>A successful <span class='sheet-strong'>Stealth</span> roll indicates that the character has gone unnoticed, while a failure has almost certainly attracts unwanted attention.<br><br>A great or extraordinary success produces an outcome so flawless that it even be impossible to trace the hero's actions after the fact.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_stealth" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_stealth" value="1" /><span></span>
					<input type="radio" name="attr_stealth" value="2" /><span></span>
					<input type="radio" name="attr_stealth" value="3" /><span></span>
					<input type="radio" name="attr_stealth" value="4" /><span></span>
					<input type="radio" name="attr_stealth" value="5" /><span></span>
					<input type="radio" name="attr_stealth" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Scan against Wits TN (@{witstn}) .\n/roll @{favorill} + (@{scan}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_scancheck"></button>
				<input type="checkbox" name="attr_scan_favoured">
				<span class='label'>Scan</span>
				<div class="sheet-hover-info">Player-heroes can use the SCAN Skill when examining something closely or attentively. This Skill allows a Player-hero to skim through a book to locate a piece of relevant information, look for concealed doors or hidden inscriptions, recognise a familiar face in a crowd, or locate a set of tracks on the ground. SCAN rolls are generally initiated by the players rather than the Loremaster. One roll is required for each inspection of a small area, such as a room. AWARENESS, rather than SCAN, is used to see if a hero passively notices something. A successful SCAN roll generally lets Player-heroes find what they are looking for — if it is to be found at all. A superior success usually means the object is found more quickly.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_scan" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_scan" value="1" /><span></span>
					<input type="radio" name="attr_scan" value="2" /><span></span>
					<input type="radio" name="attr_scan" value="3" /><span></span>
					<input type="radio" name="attr_scan" value="4" /><span></span>
					<input type="radio" name="attr_scan" value="5" /><span></span>
					<input type="radio" name="attr_scan" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Explore against Wits TN (@{witstn}) .\n/roll @{favorill} + (@{explore}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_explorecheck"></button>
				<input type="checkbox" name="attr_explore_favoured">
				<span class='label'>Explore</span>
				<div class="sheet-hover-info" data-i18n="explore-description">Adventurers rely on their <span class='sheet-strong'>Explore</span> skill when they move through an unfamiliar area of the Wild. An <span class='sheet-strong'>Explore</span> test may be required during a journey to find the company's heading, or to get back on track after a detour; to cope with adverse weather conditions or other natural hazards; to create paths through the wilderness suitable for others to follow; or to choose a suitable place to set up camp. A high <span class='sheet-strong'>Explore</span> rating is an invaluable resource for a companion acting as a scout for his group of adventurers.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_explore" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_explore" value="1" /><span></span>
					<input type="radio" name="attr_explore" value="2" /><span></span>
					<input type="radio" name="attr_explore" value="3" /><span></span>
					<input type="radio" name="attr_explore" value="4" /><span></span>
					<input type="radio" name="attr_explore" value="5" /><span></span>
					<input type="radio" name="attr_explore" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Riddle against Wits TN (@{witstn}) .\n/roll @{favorill} + (@{riddle}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_riddlecheck"></button>
				<input type="checkbox" name="attr_riddle_favoured">
				<span class='label'>Riddle</span>
				<div class="sheet-hover-info" data-i18n="riddle-description">Owing its name to the ancient Game, the <span class='sheet-strong'>Riddle</span> skill represents a hero's ability to draw conclusions from seemingly unconnected scraps of information, by deduction, reasoning and intuition.<br><br>An adventurer also relies on <span class='sheet-strong'>Riddle</span> whenever he is forced to talk about a subject but wants to conceal part of what he knows, for example to explain something about himself without revealing his true identity.<br><br>An accepted custom among many creatures, speaking in riddles is usually allowed among strangers meeting for the first time who want to speak guardedly. This skill is also used to gain helpful insight from a spoken or written riddle.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_riddle" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_riddle" value="1" /><span></span>
					<input type="radio" name="attr_riddle" value="2" /><span></span>
					<input type="radio" name="attr_riddle" value="3" /><span></span>
					<input type="radio" name="attr_riddle" value="4" /><span></span>
					<input type="radio" name="attr_riddle" value="5" /><span></span>
					<input type="radio" name="attr_riddle" value="6" /><span></span>
				</div>
			</div>

			<div class=sheet-row>
				<button type="roll" value="/me rolls for Lore against Wits TN (@{witstn}) .\n/roll @{favorill} + (@{lore}+?{Bonus Dice|0})t[@{wearytype}]" name="roll_lorecheck"></button>
				<input type="checkbox" name="attr_lore_favoured">
				<span class='label'>Lore</span>
				<div class="sheet-hover-info" data-i18n="lore-description"><span class='sheet-strong'>Lore</span> expresses a hero's love for learning, be it a fascination with descriptions of distant lands, or an interest in family genealogy. Whenever an action involves knowledge of some kind, a <span class='sheet-strong'>Lore</span> roll is required. Heroes are considered to be knowledgeable in the traditions of their own people, and so the Loremaster should rarely require a player to make a <span class='sheet-strong'>Lore</span> test for information regarding their character's culture, background or the area they originally come from.</div>
				<div class="sheet-dots">
					<input type="radio" name="attr_lore" value="0" checked="checked" /><span></span>
					<input type="radio" name="attr_lore" value="1" /><span></span>
					<input type="radio" name="attr_lore" value="2" /><span></span>
					<input type="radio" name="attr_lore" value="3" /><span></span>
					<input type="radio" name="attr_lore" value="4" /><span></span>
					<input type="radio" name="attr_lore" value="5" /><span></span>
					<input type="radio" name="attr_lore" value="6" /><span></span>
				</div>
			</div>
			<div class=sheet-row>
				<h3>Virtues</h3>
				<input type="checkbox" name="attr_wisdom_favoured">
				<span class='label'>Wisdom</span>
				<div class="sheet-hover-info" data-i18n="wisdom-description">A character’s knowledge of his own capabilities, his self- confidence and capacity for good judgement changes and improves with struggles and strife. A characteristic with deeply personal implications, a hero’s rank in Wisdom also determines the stature of the hero in the eyes of those that prize these qualities.<br><br>When Wisdom is chosen over Valour when spending Experience points, it suggests that the hero’s adventures are affecting him subtly but profoundly. Starting as a more or less ingenuous individual with an adventurous spirit, the hero can achieve the maturity and sagacity of the Wise.</div>
				<input id="wisdom-input" name="attr_wisdom" value="0" type="number">
				<button type="roll" value="/me rolls for Wisdom against Wits TN (@{witstn}) .\n/roll @{favorill} + (@{wisdom}+?{Bonus Dice|0})t[@{wearytype}]" name="wisdomcheck"></button>
			</div>
			<div class=sheet-row>
				<textarea name="attr_virtues" style="width: 100%;"/>
			</div>
		</div>
		<div class="sheet-col">
			<div class=sheet-row>
				<span class='label'>Skill Points</span>
				<input name="attr_skillpoints" value="0" type="number">
				<span class='label'>Total</span>
				<input name="attr_totalskillpoints" value="0" type="number">
			</div>
			<div class=sheet-row>
				<span class='label'>Adv Points</span>
				<input name="attr_adventurepoints" value="0" type="number">
				<span class='label'>Total</span>
				<input name="attr_totaladventurepoints" value="0" type="number">
			</div>
			<div class=sheet-row>
				<span class='label'>Load</span>
				<input name="attr_load" value="0" type="number">
				<span class='label'>Fatigue</span>
				<input name="attr_fatigue" value="0" type="number">
			</div>
			<div class=sheet-row>
				<span class='label'>Shadow</span>
				<input name="attr_shadow" value="0" type="number">
				<span class='label'>Scars</span>
				<input name="attr_shadowscar" value="0" type="number">
			</div>
			<div class=sheet-row>
				<input name="attr_weary" type="checkbox">
				<span class='label'>Weary</span>
				<input name="attr_miserable" type="checkbox">
				<span class='label'>Miserable</span>
				<input name="attr_wounded" type="checkbox">
				<span class='label'>Wounded</span>
			</div>
			<div class=sheet-row>
				<span class='label'>Injury</span>
				<input name="attr_injury" type="text">
			</div>
			<div class=sheet-row>
				<h2>Roll Types</h2>
			</div>
			<div class=sheet-row>
				<input name="attr_favorill" type="radio" value="{1t[feat]}">
				<span class='label'>Normal</span>
			</div>
			<div class=sheet-row>
				<input name="attr_favorill" type="radio" value="{2t[feat]}kh1">
				<span class='label'>Favoured</span>
			</div>
			<div class=sheet-row>
				<input name="attr_favorill" type="radio" value="{2t[feat]}kl1">
				<span class='label'>Ill Favoured</span>
			</div>
			<div class=sheet-row>
				<h2>Traveling Gear</h2>
			</div>
			<div class=sheet-row>
				<textarea name="attr_travellinggear" style="width:100%;"/>
			</div>
		</div>
	</div>
	<div class="sheet-2colrow">
		<div class="sheet-col">
			<div class="sheet-weapons">
				<label data-i18n-title="weapon" title="weapon">
					<span class="label">Weapon</span>
				</label>
				<label data-i18n-title="dmg" title="dmg">
					<span class="label">Dmg</span>
				</label>
				<label data-i18n-title="inj" title="inj">
					<span class="label">Inj.</span>
				</label>
				<label data-i18n-title="load" title="load">
					<span class="label">Load</span>
				</label>
				<label data-i18n-title="weapon1" title="weapon1">
					<input name="attr_weapon_skill_name_1" type="text">
				</label>
				<label data-i18n-title="dam1" title="dam1">
					<input name="attr_weapon_damage_1" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="inj1" title="inj1">
					<input name="attr_weapon_injury_1" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="load1" title="load1">
					<input name="attr_weapon_load_1" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="weapon2" title="weapon2">
					<input name="attr_weapon_skill_name_2" type="text">
				</label>
				<label data-i18n-title="dam2" title="dam2">
					<input name="attr_weapon_damage_2" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="inj2" title="inj2">
					<input name="attr_weapon_injury_2" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="load2" title="load2">
					<input name="attr_weapon_load_2" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="weapon3" title="weapon3">
					<input name="attr_weapon_skill_name_3" type="text">
				</label>
				<label data-i18n-title="dam3" title="dam3">
					<input name="attr_weapon_damage_3" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="inj3" title="inj3">
					<input name="attr_weapon_injury_3" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="load3" title="load3">
					<input name="attr_weapon_load_3" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="weapon4" title="weapon4">
					<input name="attr_weapon_skill_name_4" type="text">
				</label>
				<label data-i18n-title="dam4" title="dam4">
					<input name="attr_weapon_damage_4" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="inj4" title="inj4">
					<input name="attr_weapon_injury_4" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="load4" title="load4">
					<input name="attr_weapon_load_4" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="weapon5" title="weapon5">
					<input name="attr_weapon_skill_name_5" type="text">
				</label>
				<label data-i18n-title="dam5" title="dam5">
					<input name="attr_weapon_damage_5" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="inj5" title="inj5">
					<input name="attr_weapon_injury_5" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="load5" title="load5">
					<input name="attr_weapon_load_5" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="weapon6" title="weapon6">
					<input name="attr_weapon_skill_name_6" type="text">
				</label>
				<label data-i18n-title="dam6" title="dam6">
					<input name="attr_weapon_damage_6" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="inj6" title="inj6">
					<input name="attr_weapon_injury_6" value="0" class="center number" type="number">
				</label>
				<label data-i18n-title="load6" title="load6">
					<input name="attr_weapon_load_6" value="0" class="center number" type="number">
				</label>
			</div>
		</div>
		<div class="sheet-col">		
			<div class="sheet-armour">				
				<label data-i18n-title="armour" title="armour">
					<span class="label">Armour</span>
				</label>				
				<label data-i18n-title="prot" title="prot">
					<span class="label">Protection
					<button type="roll" value="/me rolls for Protection against Injury TN.\n/roll @{favorill} + (@{armourprot}+@{helmprot}+?{Bonus Dice|0})t[@{wearytype}]" name="protectioncheck"></button>
					</span>
				</label>		
				<label data-i18n-title="load" title="load">
					<span class="label">Load</span>
				</label>
				<label data-i18n-title="armour1" title="armour1">
					<input name="attr_armour" type="text">
				</label>				
				<label data-i18n-title="prot1" title="prot1">
					<input name="attr_armourprot" value="0" class="center number" type="number">
				</label>		
				<label data-i18n-title="load1" title="load1">
					<input name="attr_armourload" value="0" class="center number" type="number">
				</label>
				
				<label data-i18n-title="armour2" title="armour2">
					<span class="label">Helm</span>
				</label>				
				<label data-i18n-title="prot2" title="prot2">
					<span class="label">Protection</span>
				</label>		
				<label data-i18n-title="load2" title="load2">
					<span class="label">Load</span>
				</label>	
				<label data-i18n-title="armour3" title="armour3">
					<input name="attr_helm" type="text">
				</label>				
				<label data-i18n-title="prot3" title="prot3">
					<input name="attr_helmprot" value="0" class="center number" type="number">
				</label>		
				<label data-i18n-title="load3" title="load3">
					<input name="attr_helmload" value="0" class="center number" type="number">
				</label>				


				<label data-i18n-title="armour4" title="armour4">
					<span class="label">Sheild</span>
				</label>				
				<label data-i18n-title="prot4" title="prot4">
					<span class="label">Parry</span>
				</label>		
				<label data-i18n-title="load4" title="load4">
					<span class="label">Load</span>
				</label>	
				<label data-i18n-title="armour5" title="armour5">
					<input name="attr_shield" type="text">
				</label>				
				<label data-i18n-title="prot5" title="prot5">
					<input name="attr_shieldparry" value="0" class="center number" type="number">
				</label>		
				<label data-i18n-title="load5" title="load5">
					<input name="attr_shieldload" value="0" class="center number" type="number">
				</label>



				<label data-i18n-title="armour6" title="armour6">
					<span class="label">Mount</span>
				</label>				
				<label data-i18n-title="prot6" title="prot6">
					<span class="label">Quality</span>
				</label>		
				<label data-i18n-title="load6" title="load6">
					<span class="label">Vigour</span>
				</label>	
				<label data-i18n-title="armour7" title="armour7">
					<input name="attr_mount" type="text">
				</label>				
				<label data-i18n-title="prot7" title="prot7">
					<input name="attr_mountquality" value="0" class="center number" type="number">
				</label>		
				<label data-i18n-title="load7" title="load7">
					<input name="attr_mountvigour" value="0" class="center number" type="number">
				</label>


				<label data-i18n-title="armour8" title="armour8">
					<span class="label">Treasure Rating</span>
				</label>				
				<label data-i18n-title="prot8" title="prot8">				
					<input name="attr_treasure" value="0" class="center number" type="number">
				</label>
				<label>
				</label>
				
				<label data-i18n-title="armour9" title="armour9">				
					<span class="label">Treasure Carried</span>
				</label>				
				<label data-i18n-title="prot9" title="prot9">
					<input name="attr_treasureload" value="0" class="center number" type="number">
				</label>	


				
			</div>
			

		</div>
	</div>
	
<button type="action" name="act_test_alpha">Click me</button>
<rolltemplate class="sheet-rolltemplate-test_alpha">
    <div class="sheet-template-container">
        <h1>{{name}}</h1>
        <div class="sheet-results">
            <h4>Result = {{roll1}}</h4>
            <h4>Custom Result = {{computed::roll1}}</h4>
        </div>
    </div>
</rolltemplate>
	<div class="sheet-colrow">
			<div class=sheet-row>
				<h2>Notes</h2>
			</div>
			<div class=sheet-row>
				<textarea name="attr_notes" style="width:100%;"/>
			</div>
			
	</div>
	
	
	
	
	
</div>
<input type="hidden" name="attr_wearytype">
<input type="hidden" name="attr_awe_fav">
<input type="hidden" name="attr_athletics_fav">
<input type="hidden" name="attr_awareness_fav">
<input type="hidden" name="attr_hunting_fav">
<input type="hidden" name="attr_song_fav">
<input type="hidden" name="attr_craft_fav">
<input type="hidden" name="attr_enhearten_fav">
<input type="hidden" name="attr_travel_fav">
<input type="hidden" name="attr_insight_fav">
<input type="hidden" name="attr_healing_fav">
<input type="hidden" name="attr_courtesy_fav">
<input type="hidden" name="attr_battle_fav">
<input type="hidden" name="attr_persuade_fav">
<input type="hidden" name="attr_stealth_fav">
<input type="hidden" name="attr_scan_fav">
<input type="hidden" name="attr_explore_fav">
<input type="hidden" name="attr_riddle_fav">
<input type="hidden" name="attr_lore_fav">
<input type="hidden" name="attr_valour_fav">
<input type="hidden" name="attr_wisdom_fav">
<input type="hidden" name="attr_awe_favill">
<input type="hidden" name="attr_athletics_favill">
<input type="hidden" name="attr_awareness_favill">
<input type="hidden" name="attr_hunting_favill">
<input type="hidden" name="attr_song_favill">
<input type="hidden" name="attr_craft_favill">
<input type="hidden" name="attr_enhearten_favill">
<input type="hidden" name="attr_travel_favill">
<input type="hidden" name="attr_insight_favill">
<input type="hidden" name="attr_healing_favill">
<input type="hidden" name="attr_courtesy_favill">
<input type="hidden" name="attr_battle_favill">
<input type="hidden" name="attr_persuade_favill">
<input type="hidden" name="attr_stealth_favill">
<input type="hidden" name="attr_scan_favill">
<input type="hidden" name="attr_explore_favill">
<input type="hidden" name="attr_riddle_favill">
<input type="hidden" name="attr_lore_favill">
<input type="hidden" name="attr_valour_favill">
<input type="hidden" name="attr_wisdom_favill">
<input type="hidden" name="attr_wisdom_favill">
<input type="hidden" name="attr_attribute_level">





<script type="text/worker">
    on('clicked:test', (info) => {
        startRoll("&{template:test} {{name=Test}} {{roll1=[[1d20]]}}", (results) => {
            const total = results.results.roll1.result
            const computed = total % 4;

            finishRoll(
                results.rollId,
                {
                    roll1: computed,
                }
            );
        });
    });
</script>
<!-- Sheet Workers -->

<script type="text/worker">

    const buttonlist = ["pc","journal","npcsheet"];
	buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });


    on("change:weapon_load_1 change:weapon_load_2 change:weapon_load_3 change:weapon_load_4 change:weapon_load_5 change:weapon_load_6 change:armourload change:helmload change:shieldload sheet:opened change:treasureload change:fatigue", function() {
	getAttrs(["weapon_load_1","weapon_load_2","weapon_load_3","weapon_load_4","weapon_load_5","weapon_load_6","armourload","shieldload","helmload","fatigue","treasureload"], function(values) {
		let weaponload1 = parseInt(values.weapon_load_1,10)||0;
		let weaponload2 = parseInt(values.weapon_load_2,10)||0;
		let weaponload3 = parseInt(values.weapon_load_3,10)||0;
		let weaponload4 = parseInt(values.weapon_load_4,10)||0;
		let weaponload5 = parseInt(values.weapon_load_5,10)||0;
		let weaponload6 = parseInt(values.weapon_load_6,10)||0;
		let armourload = parseInt(values.armourload,10)||0;
		let shieldload = parseInt(values.shieldload,10)||0;
		let helmload = parseInt(values.helmload,10)||0;
		let fatigue = parseInt(values.fatigue,10)||0;
		let treasureload = parseInt(values.treasureload,10)||0;
		let loadfatigue = armourload + shieldload + helmload + weaponload1 + weaponload2 + weaponload3 + weaponload4 + weaponload5 + weaponload6 + treasureload + fatigue;
		setAttrs({
			load: loadfatigue,
		});
	});
});
    on("change:weary sheet:opened", function() {
	getAttrs(["weary"], function(values) {
		let weary = values.weary||0;
		if (weary == 0) {
			wearytype = "normal";
		}
		else {
			wearytype = "weary";
		}

		setAttrs({
			wearytype: wearytype,
		});
	});
});
    on("change:awe_favoured sheet:opened", function() {
	getAttrs(["awe_favoured"], function(values) {
		let faved = values.awe_favoured||0;
		if (faved == 0) {
			favtype = 0;
		}
		else {
			favtype = 1;
		}

		setAttrs({
			awe_fav: favtype,
		});
	});
});

    on("change:athletics_favoured sheet:opened", function() {
	getAttrs(["athletics_favoured"], function(values) {
		let faved = values.athletics_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			athletics_fav: favtype,
		});
	});
});

    on("change:awareness_favoured sheet:opened", function() {
	getAttrs(["awareness_favoured"], function(values) {
		let faved = values.awareness_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			awareness_fav: favtype,
		});
	});
});

    on("change:hunting_favoured sheet:opened", function() {
	getAttrs(["hunting_favoured"], function(values) {
		let faved = values.hunting_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			hunting_fav: favtype,
		});
	});
});

    on("change:song_favoured sheet:opened", function() {
	getAttrs(["song_favoured"], function(values) {
		let faved = values.song_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			song_fav: favtype,
		});
	});
});

    on("change:craft_favoured sheet:opened", function() {
	getAttrs(["craft_favoured"], function(values) {
		let faved = values.craft_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			craft_fav: favtype,
		});
	});
});

    on("change:enhearten_favoured sheet:opened", function() {
	getAttrs(["enhearten_favoured"], function(values) {
		let faved = values.enhearten_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			enhearten_fav: favtype,
		});
	});
});

    on("change:travel_favoured sheet:opened", function() {
	getAttrs(["travel_favoured"], function(values) {
		let faved = values.travel_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			travel_fav: favtype,
		});
	});
});

    on("change:insight_favoured sheet:opened", function() {
	getAttrs(["insight_favoured"], function(values) {
		let faved = values.insight_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			insight_fav: favtype,
		});
	});
});

    on("change:healing_favoured sheet:opened", function() {
	getAttrs(["healing_favoured"], function(values) {
		let faved = values.healing_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			healing_fav: favtype,
		});
	});
});

    on("change:courtesy_favoured sheet:opened", function() {
	getAttrs(["courtesy_favoured"], function(values) {
		let faved = values.courtesy_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			courtesy_fav: favtype,
		});
	});
});

    on("change:battle_favoured sheet:opened", function() {
	getAttrs(["battle_favoured"], function(values) {
		let faved = values.battle_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			battle_fav: favtype,
		});
	});
});

    on("change:persuade_favoured sheet:opened", function() {
	getAttrs(["persuade_favoured"], function(values) {
		let faved = values.persuade_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			persuade_fav: favtype,
		});
	});
});

    on("change:stealth_favoured sheet:opened", function() {
	getAttrs(["stealth_favoured"], function(values) {
		let faved = values.stealth_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			stealth_fav: favtype,
		});
	});
});

    on("change:scan_favoured sheet:opened", function() {
	getAttrs(["scan_favoured"], function(values) {
		let faved = values.scan_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			scan_fav: favtype,
		});
	});
});

    on("change:explore_favoured sheet:opened", function() {
	getAttrs(["explore_favoured"], function(values) {
		let faved = values.explore_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			explore_fav: favtype,
		});
	});
});

    on("change:riddle_favoured sheet:opened", function() {
	getAttrs(["riddle_favoured"], function(values) {
		let faved = values.riddle_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			riddle_fav: favtype,
		});
	});
});

    on("change:lore_favoured sheet:opened", function() {
	getAttrs(["lore_favoured"], function(values) {
		let faved = values.lore_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			lore_fav: favtype,
		});
	});
});

    on("change:valour_favoured sheet:opened", function() {
	getAttrs(["valour_favoured"], function(values) {
		let faved = values.valour_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			valour_fav: favtype,
		});
	});
});

    on("change:wisdom_favoured sheet:opened", function() {
	getAttrs(["wisdom_favoured"], function(values) {
		let faved = values.wisdom_favoured||0;
		if (faved == 0) {
			favtype = "normal";
		}
		else {
			favtype = "favoured";
		}

		setAttrs({
			wisdom_fav: favtype,
		});
	});
});

</script>


<rolltemplate class="sheet-rolltemplate-standard">
    <div class="sheet=pc">
        <div class="sheet-main">{{skill}}</div>
		{{#rollTotal() favorill 1}}
			<div class="sheet-main">stand {{standard}}</div>
		{{/rollTotal() favorill 1}}
		{{#rollTotal() favorill 2}}
			<div class="sheet-main">fav {{fav}}</div>
		{{/rollTotal() favorill 2}}
		{{#rollTotal() favorill 3}}
			<div class="sheet-main">ill {{ill}}</div>
		{{/rollTotal() favorill 3}}
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-custom">
  <div class="sheet-container sheet-color-{{color}}">
    <div class="sheet-header">
      {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
      {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
    </div>
    <div class="sheet-content">
      {{#allprops() title subtitle desc color}}
      <div class="sheet-key">{{key}}</div>
      <div class="sheet-value">{{value}}</div>
      {{/allprops() title subtitle desc color}}
      {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
    </div>
  </div>
</rolltemplate>

<!-- ROLL TEMPLATES -->
<div class="rolltemplates">
    <rolltemplate class="sheet-rolltemplate-simple">
        <div class="container">
            <div class="result">
                {{#always}}
                    <div class="adv">
                        <span>{{r1}}{{#global}} + {{global}}{{/global}}</span>
                    </div>
                    <div class="advspacer"></div>
                    <div class="adv">
                        <span>{{r2}}{{#global}} + {{global}}{{/global}}</span>
                    </div>
                {{/always}}
                {{#normal}}
                    <div class="solo">
                        <span>{{r1}}{{#global}} + {{global}}{{/global}}</span>
                    </div>
                {{/normal}}
                {{#advantage}}
				
				
                    {{#rollLess() r1 r2}}
                        <div class="adv">
                            <span class="grey">{{r1}}{{#global}} + {{global}}{{/global}}</span>
                        </div>
                        <div class="advspacer"></div>
                        <div class="adv">
                            <span>{{r2}}{{#global}} + {{global}}{{/global}}</span>
                        </div>
                    {{/rollLess() r1 r2}}
					
					
                    {{#rollTotal() r1 r2}}
                        <div class="adv">
                            <span>{{r1}}{{#global}} + {{global}}{{/global}}</span>
                        </div>
                        <div class="advspacer"></div>
                        <div class="adv">
                            <span>{{r2}}{{#global}} + {{global}}{{/global}}</span>
                        </div>
                    {{/rollTotal() r1 r2}}
					
					
					
                    {{#rollGreater() r1 r2}}
                        <div class="adv">
                            <span>{{r1}}{{#global}} + {{global}}{{/global}}</span>
                        </div>
                        <div class="advspacer"></div>
                        <div class="adv">
                            <span class="grey">{{r2}}{{#global}} + {{global}}{{/global}}</span>
                        </div>
                    {{/rollGreater() r1 r2}}
					
					
                {{/advantage}}
                {{#disadvantage}}
                    {{#rollLess() r1 r2}}
                        <div class="adv">
                            <span>{{r1}}{{#global}} + {{global}}{{/global}}</span>
                        </div>
                        <div class="advspacer"></div>
                        <div class="adv">
                            <span class="grey">{{r2}}{{#global}} + {{global}}{{/global}}</span>
                        </div>
                    {{/rollLess() r1 r2}}
                    {{#rollTotal() r1 r2}}
                        <div class="adv">
                            <span>{{r1}}{{#global}} + {{global}}{{/global}}</span>
                        </div>
                        <div class="advspacer"></div>
                        <div class="adv">
                            <span>{{r2}}{{#global}} + {{global}}{{/global}}</span>
                        </div>
                    {{/rollTotal() r1 r2}}
                    {{#rollGreater() r1 r2}}
                        <div class="adv">
                            <span class="grey">{{r1}}{{#global}} + {{global}}{{/global}}</span>
                        </div>
                        <div class="advspacer"></div>
                        <div class="adv">
                            <span>{{r2}}{{#global}} + {{global}}{{/global}}</span>
                        </div>
                    {{/rollGreater() r1 r2}}
                {{/disadvantage}}
            </div>
            <div class="label">
                <span>{{rname}}{{#mod}} <span>({{mod}})</span>{{/mod}}</span>
            </div>
            {{#charname}}
                <div class="charname">
                    <span>{{charname}}</span>
                </div>
            {{/charname}}
        </div>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-atk">
        <div class="container">
            <div class="result">
                {{#always}}
                    <div class="adv">
                        <span>{{r1}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                    </div>
                    <div class="advspacer"></div>
                    <div class="adv">
                        <span>{{r2}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                    </div>
                {{/always}}
                {{#normal}}
                    <div class="solo">
                        <span>{{r1}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                    </div>
                {{/normal}}
                {{#advantage}}
                    {{#rollLess() r1 r2}}
                        <div class="adv">
                            <span class="grey">{{r1}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                        </div>
                        <div class="advspacer"></div>
                        <div class="adv">
                            <span>{{r2}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                        </div>
                    {{/rollLess() r1 r2}}
                    {{#rollTotal() r1 r2}}
                        <div class="adv">
                            <span>{{r1}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                        </div>
                        <div class="advspacer"></div>
                        <div class="adv">
                            <span>{{r2}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                        </div>
                    {{/rollTotal() r1 r2}}
                    {{#rollGreater() r1 r2}}
                        <div class="adv">
                            <span>{{r1}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                        </div>
                        <div class="advspacer"></div>
                        <div class="adv">
                            <span class="grey">{{r2}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                        </div>
                    {{/rollGreater() r1 r2}}
                {{/advantage}}
                {{#disadvantage}}
                    {{#rollLess() r1 r2}}
                        <div class="adv">
                            <span>{{r1}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                        </div>
                        <div class="advspacer"></div>
                        <div class="adv">
                            <span class="grey">{{r2}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                        </div>
                    {{/rollLess() r1 r2}}
                    {{#rollTotal() r1 r2}}
                        <div class="adv">
                            <span>{{r1}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                        </div>
                        <div class="advspacer"></div>
                        <div class="adv">
                            <span>{{r2}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                        </div>
                    {{/rollTotal() r1 r2}}
                    {{#rollGreater() r1 r2}}
                        <div class="adv">
                            <span class="grey">{{r1}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                        </div>
                        <div class="advspacer"></div>
                        <div class="adv">
                            <span>{{r2}}{{#globalattack}} + {{globalattack}}{{/globalattack}}</span>
                        </div>
                    {{/rollGreater() r1 r2}}
                {{/disadvantage}}
            </div>
            {{#range}}
                <div class="sublabel">
                    <span>{{range}}</span>
                </div>
            {{/range}}
            <div class="label">
                {{#normal}}
                    {{#rollWasCrit() r1}}<span>{{rnamec}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/rollWasCrit() r1}}
                    {{#^rollWasCrit() r1}}<span>{{rname}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/^rollWasCrit() r1}}
                {{/normal}}
                {{#always}}
                    {{#rollLess() r1 r2}}{{#rollWasCrit() r2}}<span>{{rnamec}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                    {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}<span>{{rnamec}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                    {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}}<span>{{rnamec}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                    {{#^rollWasCrit() r1}}{{#^rollWasCrit() r2}}<span>{{rname}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/^rollWasCrit() r2}}{{/^rollWasCrit() r1}}
                {{/always}}
                {{#advantage}}
                    {{#rollLess() r1 r2}}{{#rollWasCrit() r2}}<span>{{rnamec}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                    {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}<span>{{rnamec}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                    {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}}<span>{{rnamec}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                    {{#^rollWasCrit() r1}}{{#^rollWasCrit() r2}}<span>{{rname}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/^rollWasCrit() r2}}{{/^rollWasCrit() r1}}
                {{/advantage}}
                {{#disadvantage}}
                    {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}}<span>{{rnamec}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                    {{#rollTotal() r1 r2}}{{#^rollWasCrit() r1}}<span>{{rname}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/^rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                    {{#rollLess() r1 r2}}<span>{{rname}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/rollLess() r1 r2}}
                    {{#rollGreater() r1 r2}}<span>{{rname}}{{#innate}}<span class="grey">, {{innate}}</span>{{/innate}} <span>({{mod}})</span></span>{{/rollGreater() r1 r2}}
                {{/disadvantage}}
            </div>
            {{#charname}}
                <div class="charname">
                    <span>{{charname}}</span>
                </div>
            {{/charname}}
        </div>
        {{#desc}}
            <div class="desc info">
                <span><span class="top"></span><span class="middle">{{desc}}</span><span class="bottom"></span>
            </div>
        {{/desc}}
    </rolltemplate>
    
     <rolltemplate class="sheet-rolltemplate-npcaction">
        <div class="container">
            <div class="row header">
                <span>{{rname}}</span>
            </div>
            {{#name}}
                <div class="row subheader">
                    <span class="italics">{{name}}</span>
                </div>
            {{/name}}
            <div class="arrow-right"></div>
            {{#attack}}
                <div class="row">
                    {{#normal}}
                        <span class="italics">Attack: </span><span>{{r1}}</span>
                    {{/normal}}
                    {{#always}}
                        <span class="italics">Attack: </span><span>{{r1}}</span><span> | </span><span>{{r2}}</span>
                    {{/always}}
                    {{#advantage}}
                        {{#rollLess() r1 r2}}
                            <span class="italics">Attack: </span><span class="grey">{{r1}}</span><span> | </span><span>{{r2}}</span>
                        {{/rollLess() r1 r2}}
                        {{#rollTotal() r1 r2}}
                            <span class="italics">Attack: </span><span>{{r1}}</span><span> | </span><span>{{r2}}</span>
                        {{/rollTotal() r1 r2}}
                        {{#rollGreater() r1 r2}}
                            <span class="italics">Attack: </span><span>{{r1}}</span><span> | </span><span class="grey">{{r2}}</span>
                        {{/rollGreater() r1 r2}}
                    {{/advantage}}
                    {{#disadvantage}}
                        {{#rollLess() r1 r2}}
                            <span class="italics">Attack: </span><span>{{r1}}</span><span> | </span><span class="grey">{{r2}}</span>
                        {{/rollLess() r1 r2}}
                        {{#rollTotal() r1 r2}}
                            <span class="italics">Attack: </span><span>{{r1}}</span><span> | </span><span>{{r2}}</span>
                        {{/rollTotal() r1 r2}}
                        {{#rollGreater() r1 r2}}
                            <span class="italics">Attack: </span><span class="grey">{{r1}}</span><span> | </span><span>{{r2}}</span>
                        {{/rollGreater() r1 r2}}
                    {{/disadvantage}}
                </div>
            {{/attack}}
            {{#description}}
                <span class="desc">{{description}}</span>
            {{/description}}
            </div>
            {{#damage}}
                <div class="container dmgcontainer damagetemplate">
                    <span class="italics">Damage: </span>
                    <span>
                        {{#dmg1flag}}
                            {{dmg1}} 
                            {{#normal}}
                                {{#rollWasCrit() r1}} + {{crit1}}{{/rollWasCrit() r1}}
                            {{/normal}}
                            {{#always}}
                                {{#rollLess() r1 r2}}{{#rollWasCrit() r2}} + {{crit1}}{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                                {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}} + {{crit1}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}} + {{crit1}}{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                            {{/always}}
                            {{#advantage}}
                                {{#rollLess() r1 r2}}{{#rollWasCrit() r2}} + {{crit1}}{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                                {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}} + {{crit1}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}} + {{crit1}}{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                            {{/advantage}}
                            {{#disadvantage}}
                                {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}} + {{crit1}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                            {{/disadvantage}}
                            {{dmg1type}}
                        {{/dmg1flag}}
                        {{#dmg1flag}}{{#dmg2flag}}+{{/dmg2flag}}{{/dmg1flag}}
                        {{#dmg2flag}}
                            {{dmg2}} 
                            {{#normal}}
                                {{#rollWasCrit() r1}} + {{crit2}}{{/rollWasCrit() r1}}
                            {{/normal}}
                            {{#always}}
                                {{#rollLess() r1 r2}}{{#rollWasCrit() r2}} + {{crit2}}{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                                {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}} + {{crit2}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}} + {{crit2}}{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                            {{/always}}
                            {{#advantage}}
                                {{#rollLess() r1 r2}}{{#rollWasCrit() r2}} + {{crit2}}{{/rollWasCrit() r2}}{{/rollLess() r1 r2}}
                                {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}} + {{crit2}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                                {{#rollGreater() r1 r2}}{{#rollWasCrit() r1}} + {{crit2}}{{/rollWasCrit() r1}}{{/rollGreater() r1 r2}}
                            {{/advantage}}
                            {{#disadvantage}}
                                {{#rollTotal() r1 r2}}{{#rollWasCrit() r1}} + {{crit2}}{{/rollWasCrit() r1}}{{/rollTotal() r1 r2}}
                            {{/disadvantage}}
                            {{dmg2type}}
                        {{/dmg2flag}}
                    </span>
                </div>
            {{/damage}}
    </rolltemplate>
	
	
<rolltemplate>
<!-- Hidden inputs for translations in rolls buttons -->
<input type="text" name="attr_translation_rolls_for"       value="rolls for" style="display: none;" />
<input type="text" name="attr_translation_against_tn"	   value="Target Number" style="display: none;" />
<input type="text" name="attr_translation_protection"      value="Protection" style="display: none;" />
<input type="text" name="attr_translation_injury"          value="Injury" style="display: none;" />
<input type="text" name="attr_translation_personality"     value="Personality" style="display: none;" />
<input type="text" name="attr_translation_survival"        value="Survival" style="display: none;" />
<input type="text" name="attr_translation_movement"        value="Movement" style="display: none;" />
<input type="text" name="attr_translation_custom"          value="Custom" style="display: none;" />
<input type="text" name="attr_translation_perception"      value="Perception" style="display: none;" />
<input type="text" name="attr_translation_vocation"        value="Vocation" style="display: none;" />
<input type="text" name="attr_translation_attacks_with"    value="attacks with" style="display: none;" />
<input type="text" name="attr_translation_valour"          value="Valour" style="display: none;" />
<input type="text" name="attr_translation_wisdom"          value="Wisdom" style="display: none;" />
<input type="text" name="attr_translation_awe"             value="Awe" style="display: none;" />
<input type="text" name="attr_translation_inspire"         value="Inspire" style="display: none;" />
<input type="text" name="attr_translation_persuade"        value="Persuade" style="display: none;" />
<input type="text" name="attr_translation_athletics"       value="Athletics" style="display: none;" />
<input type="text" name="attr_translation_travel"          value="Travel" style="display: none;" />
<input type="text" name="attr_translation_stealth"         value="Stealth" style="display: none;" />
<input type="text" name="attr_translation_awareness"       value="Awareness" style="display: none;" />
<input type="text" name="attr_translation_insight"         value="Insight" style="display: none;" />
<input type="text" name="attr_translation_search"          value="Search" style="display: none;" />
<input type="text" name="attr_translation_explore"         value="Explore" style="display: none;" />
<input type="text" name="attr_translation_healing"         value="Healing" style="display: none;" />
<input type="text" name="attr_translation_hunting"         value="Hunting" style="display: none;" />
<input type="text" name="attr_translation_song"            value="Song" style="display: none;" />
<input type="text" name="attr_translation_courtesy"        value="Courtesy" style="display: none;" />
<input type="text" name="attr_translation_riddle"          value="Riddle" style="display: none;" />
<input type="text" name="attr_translation_craft"           value="Craft" style="display: none;" />
<input type="text" name="attr_translation_battle"          value="Battle" style="display: none;" />
<input type="text" name="attr_translation_lore"            value="Lore" style="display: none;" />
<input type="text" name="attr_translation_attacks_with_a"  value="attacks with a" style="display: none;" />
<input type="text" name="attr_translation_armour"  		   value="armour" style="display: none;" />
<input type="text" name="attr_translation_charges_with"	   value="charges with" style="display: none;" />
<input type="text" name="attr_translation_an_attack"	   value="an attack" style="display: none;" />
<input type="text" name="attr_attribute_level"	   value="Attribute Level" style="display: none;" />
<!-- Hidden inputs for upgrading the sheet from old versions -->
<input type="text" name="attr_pursuade"	   style="display: none;" />

<!-- Sheet Workers -->
<script type="text/worker">
    // Loads some translations in translation inputs so they can be used in roll buttons
    on('sheet:opened',function(){
        setAttrs({
            translation_rolls_for:      getTranslationByKey('rolls-for'),
            translation_against_tn:		getTranslationByKey('against-tn'),
            translation_target_number:  getTranslationByKey('target-number'),
            translation_protection:     getTranslationByKey('protection'),
            translation_injury:         getTranslationByKey('injury'),
            translation_personality:    getTranslationByKey('personality'),
            translation_survival:       getTranslationByKey('survival'),
            translation_movement:       getTranslationByKey('movement'),
            translation_custom:         getTranslationByKey('custom'),
            translation_perception:     getTranslationByKey('perception'),
            translation_vocation:       getTranslationByKey('vocation'),
            translation_attacks_with:   getTranslationByKey('attacks-with'),
            translation_valour:         getTranslationByKey('valour'),
            translation_wisdom:         getTranslationByKey('wisdom'),
            translation_awe:            getTranslationByKey('awe'),
            translation_inspire:        getTranslationByKey('inspire'),
            translation_persuade:       getTranslationByKey('persuade'),
            translation_athletics:      getTranslationByKey('athletics'),
            translation_travel:         getTranslationByKey('travel'),
            translation_stealth:        getTranslationByKey('stealth'),
            translation_awareness:      getTranslationByKey('awareness'),
            translation_insight:        getTranslationByKey('insight'),
            translation_search:         getTranslationByKey('search'),
            translation_explore:        getTranslationByKey('explore'),
            translation_healing:        getTranslationByKey('healing'),
            translation_hunting:        getTranslationByKey('hunting'),
            translation_song:           getTranslationByKey('song'),
            translation_courtesy:       getTranslationByKey('courtesy'),
            translation_riddle:         getTranslationByKey('riddle'),
            translation_craft:          getTranslationByKey('craft'),
            translation_battle:         getTranslationByKey('battle'),
            translation_lore:           getTranslationByKey('lore'),
            translation_attacks_with_a: getTranslationByKey('attacks-with-a'),
            translation_armour: 		getTranslationByKey('armour'),
            translation_charges_with:	getTranslationByKey('charges-with'),
            translation_an_attack:		getTranslationByKey('an-attack')
        });

        console.log('Migration Script: Start');
        // Upgrade the sheet from old versions. Here it must migrate some input fields
        getAttrs(['pc', 'body', 'heart', 'wits'], function(pcValue) {
            console.log('Migration Script: pcValue: ', pcValue);
            // If pc is not defined (it's a problem from some sheets), try to guess the original sheet type:
            if (pcValue['pc'] == undefined || pcValue['pc'] == null) {
                if ((pcValue['body'] != undefined && pcValue['body'] != null && pcValue['body'] != '0') ||
                        (pcValue['heart'] != undefined && pcValue['heart'] != null && pcValue['heart'] != '0') ||
                        (pcValue['wits'] != undefined && pcValue['wits'] != null && pcValue['wits'] != '0')) {
                    // => If it seems a PC sheet, update the value to '1' (a problem from old english sheet version)
                    setAttrs({pc: '1'});
                    pcValue['pc'] = '1';
                    console.log('Migration Script: Changed type to PC (1)');
                } else {
                    // => Else, make it an Adversary (a problem from old french sheet version)
                    setAttrs({pc: '3'});
                    pcValue['pc'] = '3';
                    console.log('Migration Script: Changed type to Adversary (3)');
                }
            }
            // Upgrade the character sheet (This only affects PC sheet, but sometimes the PC hasn't the pc attribute informed )
            getAttrs(['pursuade', 'persuade'], function(values) {
                if (values.pursuade !== '')
                    setAttrs({persuade: values.pursuade});
                else
                    setAttrs({pursuade: values.persuade});
            });
            // Upgrade the skills in the NPC sheet
            if (pcValue['pc'] === '0') {
                getAttrs(['pc', 'lmc_skill_name_1', 'lmc_favoured_1', 'lmc_rating_1', 'lmc_skill_name_2', 'lmc_favoured_2', 'lmc_rating_2',
                        'lmc_skill_name_3', 'lmc_favoured_3', 'lmc_rating_3', 'lmc_skill_name_4', 'lmc_favoured_4', 'lmc_rating_4',
                        'lmc_skill_name_5', 'lmc_favoured_5', 'lmc_rating_5', 'lmc_skill_name_6', 'lmc_favoured_6', 'lmc_rating_6',
                        'personality', 'personality_favoured', 'movement', 'movement_favoured', 'perception', 'perception_favoured',
                        'survival', 'survival_favoured', 'custom', 'custom_favoured', 'vocation', 'vocation_favoured',
                        'translation_personality', 'translation_movement', 'translation_perception',
                        'translation_survival', 'translation_custom', 'translation_vocation'], function(values) {
                    console.log('Migration Script: LMC Skills values: ', values);
                    // If values in the new sheet are blank. So we can detect if it has been already migrated
                    if (values['lmc_skill_name_1'] == '' && values['lmc_skill_name_2'] == '' && values['lmc_skill_name_3'] == '' &&
                            values['lmc_skill_name_4'] == '' && values['lmc_skill_name_5'] == '' && values['lmc_skill_name_6'] == '' &&
                            values['lmc_favoured_1'] == '0' && values['lmc_favoured_2'] == '0' && values['lmc_favoured_3'] == '0' &&
                            values['lmc_favoured_4'] == '0' && values['lmc_favoured_5'] == '0' && values['lmc_favoured_6'] == '0' &&
                            values['lmc_rating_1'] == '0' && values['lmc_rating_2'] == '0' && values['lmc_rating_3'] == '0' &&
                            values['lmc_rating_4'] == '0' && values['lmc_rating_5'] == '0' && values['lmc_rating_6'] == '0') {
                        // Only will be migrated the fields with != 0 value
                        if (values['personality'] != '')
                            setAttrs({lmc_skill_name_1: values.translation_personality,
                                    lmc_rating_1: values.personality});
                        if (values['personality_favoured'] != '')
                            setAttrs({lmc_skill_name_1: values.translation_personality,
                                    lmc_favoured_1: values.personality_favoured});
                        if (values['movement'] != '')
                            setAttrs({lmc_skill_name_2: values.translation_movement,
                                    lmc_rating_2: values.movement});
                        if (values['movement_favoured'] != '')
                            setAttrs({lmc_skill_name_2: values.translation_movement,
                                    lmc_favoured_2: values.movement_favoured});
                        if (values['perception'] != '')
                            setAttrs({lmc_skill_name_3: values.translation_perception,
                                    lmc_rating_3: values.perception});
                        if (values['perception_favoured'] != '')
                            setAttrs({lmc_skill_name_3: values.translation_perception,
                                    lmc_favoured_3: values.perception_favoured});
                        if (values['survival'] != '')
                            setAttrs({lmc_skill_name_4: values.translation_survival,
                                    lmc_rating_4: values.survival});
                        if (values['survival_favoured'] != '')
                            setAttrs({lmc_skill_name_4: values.translation_survival,
                                    lmc_favoured_4: values.survival_favoured});
                        if (values['custom'] != '')
                            setAttrs({lmc_skill_name_5: values.translation_custom,
                                    lmc_rating_5: values.custom});
                        if (values['custom_favoured'] != '')
                            setAttrs({lmc_skill_name_5: values.translation_custom,
                                    lmc_favoured_5: values.custom_favoured});
                        if (values['vocation'] != '')
                            setAttrs({lmc_skill_name_6: values.translation_vocation,
                                    lmc_rating_6: values.vocation});
                        if (values['vocation_favoured'] != '')
                            setAttrs({lmc_skill_name_6: values.translation_vocation,
                                    lmc_favoured_6: values.vocation_favoured});
                    }
                });
            }

            // Upgrade the weapon skills in the NPC sheet and de Adversary sheet
            if (pcValue['pc'] === '0' || pcValue['pc'] === '3') {
                getSectionIDsOrdered('repeating_npc-weapon-skills', function(ids) {
                    console.log('Migration Script: Ids: ', ids);
                    let weaponsAttributesArray = ids.map(id => {
                        return ['repeating_npc-weapon-skills_' + id + '_npc_weapon_skill_favoured',
                                'repeating_npc-weapon-skills_' + id + '_npc_weapon_skill_name',
                                'repeating_npc-weapon-skills_' + id + '_npc_weapon_rating',
                                'repeating_npc-weapon-skills_' + id + '_npc_weapon_damage',
                                'repeating_npc-weapon-skills_' + id + '_npc_weapon_edge',
                                'repeating_npc-weapon-skills_' + id + '_npc_weapon_injury',
                                'repeating_npc-weapon-skills_' + id + '_npc_weapon_called_shot'];
                    });
                    console.log('Migration Script: Atributos: ', weaponsAttributesArray);
                    weaponsAttributesArray.forEach((weaponAttributes, index) => {
                        weaponAttributes = weaponAttributes.concat(['weapon_favoured_' + (index + 1),
                                'weapon_skill_name_' + (index + 1),
                                'weapon_rating_' + (index + 1),
                                'weapon_damage_' + (index + 1),
                                'weapon_edge_' + (index + 1),
                                'weapon_injury_' + (index + 1),
                                'weapon_called_shot_' + (index + 1)]);
                        console.log('Migration Script: Weapon atributos finales ' + index + ': ', weaponAttributes);
                        getAttrs(weaponAttributes, function(weaponAttributesValues) {
                            console.log('Migration Script: Weapon atributos values ' + index + ': ', weaponAttributesValues);
                            // If new values are empty, apply old ones
                            if (weaponAttributesValues['weapon_favoured_' + (index + 1)] == '0' &&
                                    weaponAttributesValues['weapon_skill_name_' + (index + 1)] == '' &&
                                    weaponAttributesValues['weapon_rating_' + (index + 1)] == '0' &&
                                    weaponAttributesValues['weapon_damage_' + (index + 1)] == '0' &&
                                    weaponAttributesValues['weapon_edge_' + (index + 1)] == '0' &&
                                    weaponAttributesValues['weapon_injury_' + (index + 1)] == '0' &&
                                    weaponAttributesValues['weapon_called_shot_' + (index + 1)] == '') {
                                let newWeaponValues = {};
                                newWeaponValues['weapon_favoured_' + (index + 1)] = weaponAttributesValues['repeating_npc-weapon-skills_' + ids[index] + '_npc_weapon_skill_favoured'] == '1' ? '1' : '0';
                                newWeaponValues['weapon_skill_name_' + (index + 1)] = weaponAttributesValues['repeating_npc-weapon-skills_' + ids[index] + '_npc_weapon_skill_name'];
                                newWeaponValues['weapon_rating_' + (index + 1)] = weaponAttributesValues['repeating_npc-weapon-skills_' + ids[index] + '_npc_weapon_rating'];
                                newWeaponValues['weapon_damage_' + (index + 1)] = weaponAttributesValues['repeating_npc-weapon-skills_' + ids[index] + '_npc_weapon_damage'];
                                newWeaponValues['weapon_edge_' + (index + 1)] = weaponAttributesValues['repeating_npc-weapon-skills_' + ids[index] + '_npc_weapon_edge'];
                                newWeaponValues['weapon_injury_' + (index + 1)] = weaponAttributesValues['repeating_npc-weapon-skills_' + ids[index] + '_npc_weapon_injury'];
                                newWeaponValues['weapon_called_shot_' + (index + 1)] = weaponAttributesValues['repeating_npc-weapon-skills_' + ids[index] + '_npc_weapon_called_shot'];
                                console.log('Migration Script: New Values: ', newWeaponValues);
                                setAttrs(newWeaponValues);
                            }
                        });
                    });
                });
            }
        });

    });

    // Update old pursuade attribute
    on("change:persuade", function(event) {
        console.log('Migration Script: Persuade attr updated: ', event);
        setAttrs({
            pursuade: event.newValue
        })
    });
    /*
     * Function to get all the Ids in the order they are displayed.
     * See https://wiki.roll20.net/Sheet_Worker_Scripts -> getSectionIDs
     */
    var getSectionIDsOrdered = function (sectionName, callback) {
        'use strict';
        getAttrs([`_reporder_${sectionName}`], function (v) {
            getSectionIDs(sectionName, function (idArray) {
                let reporderArray = v[`_reporder_${sectionName}`] ? v[`_reporder_${sectionName}`].toLowerCase().split(',') : [],
                ids = [...new Set(reporderArray.filter(x => idArray.includes(x)).concat(idArray))];
                callback(ids);
            });
        });
    };
    /* This removed total_shadow as an autocalc and allows the api to manipulate total_shadow
     * If a field has the readonly attribute (which total_shadow does), the user will be unable to modify its value, and its default styling will be the same as if it were disabled.
     * However, sheet worker scripts will be able to modify its value, and if its value is some kind of equation, it won't be automatically calculated.(but will be calculated when the sheet is
     * opened or one of the values are changed) Note: If for some reason a readonly field is an equation, sheetworker-autocalc will be able to resolve it to a value just fine.
    */

    on("change:temporary_shadow change:permanent_shadow sheet:opened", function() {
	    getAttrs(["temporary_shadow","permanent_shadow"], function(values) {
		    let ts = parseInt(values.temporary_shadow,10)||0;
		    let ps = parseInt(values.permanent_shadow,10)||0;
		    let tsp = ts + ps;
		    setAttrs({
			    total_shadow: tsp
		    });
	    });
    });
    /* This removed encumbrance_fatigue as an autocalc and allows the api to manipulate encumbrance_fatigue
     * If a field has the readonly attribute (which encumbrance_fatigue does), the user will be unable to modify its value, and its default styling will be the same as if it were disabled.
     * However, sheet worker scripts will be able to modify its value, and if its value is some kind of equation, it won't be automatically calculated.(but will be calculated when the sheet is
     * opened or one of the values are changed) Note: If for some reason a readonly field is an equation, sheetworker-autocalc will be able to resolve it to a value just fine.
    */
    on("change:gear_encumbrance_1 change:gear_encumbrance_2 change:gear_encumbrance_3 change:gear_encumbrance_4 change:gear_encumbrance_5 change:gear_encumbrance_6 change:gear_encumbrance_7 change:gear_encumbrance_8 change:gear_encumbrance_9 change:gear_encumbrance_10 change:weapon_encumbrance_1 change:weapon_encumbrance_2 change:weapon_encumbrance_3 change:weapon_encumbrance_4 change:weapon_encumbrance_5 change:weapon_encumbrance_6 sheet:opened", function() {
	getAttrs(["gear_encumbrance_1","gear_encumbrance_2","gear_encumbrance_3","gear_encumbrance_4","gear_encumbrance_5","gear_encumbrance_6","gear_encumbrance_7","gear_encumbrance_8","gear_encumbrance_9","gear_encumbrance_10","weapon_encumbrance_1","weapon_encumbrance_2","weapon_encumbrance_3","weapon_encumbrance_4","weapon_encumbrance_5","weapon_encumbrance_6"], function(values) {
		let gearencumbrance1 = parseInt(values.gear_encumbrance_1,10)||0;
		let gearencumbrance2 = parseInt(values.gear_encumbrance_2,10)||0;
		let gearencumbrance3 = parseInt(values.gear_encumbrance_3,10)||0;
		let gearencumbrance4 = parseInt(values.gear_encumbrance_4,10)||0;
		let gearencumbrance5 = parseInt(values.gear_encumbrance_5,10)||0;
		let gearencumbrance6 = parseInt(values.gear_encumbrance_6,10)||0;
		let gearencumbrance7 = parseInt(values.gear_encumbrance_7,10)||0;
		let gearencumbrance8 = parseInt(values.gear_encumbrance_8,10)||0;
		let gearencumbrance9 = parseInt(values.gear_encumbrance_9,10)||0;
		let gearencumbrance10 = parseInt(values.gear_encumbrance_10,10)||0;
		let weaponencumbrance1 = parseInt(values.weapon_encumbrance_1,10)||0;
		let weaponencumbrance2 = parseInt(values.weapon_encumbrance_2,10)||0;
		let weaponencumbrance3 = parseInt(values.weapon_encumbrance_3,10)||0;
		let weaponencumbrance4 = parseInt(values.weapon_encumbrance_4,10)||0;
		let weaponencumbrance5 = parseInt(values.weapon_encumbrance_5,10)||0;
		let weaponencumbrance6 = parseInt(values.weapon_encumbrance_6,10)||0;
		let encumbrancefatigue = gearencumbrance1 + gearencumbrance2 + gearencumbrance3 + gearencumbrance4 + gearencumbrance5 + gearencumbrance6 + gearencumbrance7 + gearencumbrance8 + gearencumbrance9 + gearencumbrance10 + weaponencumbrance1 + weaponencumbrance2 + weaponencumbrance3 + weaponencumbrance4 + weaponencumbrance5 + weaponencumbrance6;
		setAttrs({
			encumbrance_fatigue: encumbrancefatigue
		});
	});
});
    /* This removed total_fatigue as an autocalc and allows the api to manipulate total_fatigue
     * If a field has the readonly attribute (which total_fatigue does), the user will be unable to modify its value, and its default styling will be the same as if it were disabled.
     * However, sheet worker scripts will be able to modify its value, and if its value is some kind of equation, it won't be automatically calculated.(but will be calculated when the sheet is
     * opened or one of the values are changed) Note: If for some reason a readonly field is an equation, sheetworker-autocalc will be able to resolve it to a value just fine.
    */
    on("change:encumbrance_fatigue change:travel_fatigue sheet:opened", function() {
	getAttrs(["encumbrance_fatigue","travel_fatigue"], function(values) {
		let encumbrancefatigue = parseInt(values.encumbrance_fatigue,10)||0;
		let travelfatigue = parseInt(values.travel_fatigue,10)||0;
		let totalfatigue = encumbrancefatigue + travelfatigue;
		setAttrs({
			total_fatigue: totalfatigue
		});
	});
});
    /* This adds total_experience_points and allows the api to manipulate total_experience_points
     * If a field has the readonly attribute (which total_experience_points does), the user will be unable to modify its value, and its default styling will be the same as if it were disabled.
     * However, sheet worker scripts will be able to modify its value, and if its value is some kind of equation, it won't be automatically calculated.(but will be calculated when the sheet is
     * opened or one of the values are changed) Note: If for some reason a readonly field is an equation, sheetworker-autocalc will be able to resolve it to a value just fine.
    */
    on("change:unused_experience_points change:used_experience_points sheet:opened", function() {
	getAttrs(["unused_experience_points","used_experience_points"], function(values) {
		let unusedexperiencepoints = parseInt(values.unused_experience_points,10)||0;
		let usedexperiencepoints = parseInt(values.used_experience_points,10)||0;
		let totalexperiencepoints = unusedexperiencepoints + usedexperiencepoints;
		setAttrs({
			total_experience_points: totalexperiencepoints
		});
	});
});
    /* This adds Jakob's Better Default Rolltemplate
     * Documentation can be found at https://wiki.roll20.net/Building_Character_Sheets/Roll_Templates Jakob's Better Default Rolltemplate
     * added all 66 Character/ping Colors to the rolltemplate use roll20 hexcode.
     * Example &{template:custom} {{color=434343}} {{title=Energy Claws(Attack)}} {{subtitle=Razor Claw(Hero)}} {{Fighting = [[{1d8!, 1d6!}k1]] }} {{Damage = [[3d6!]] }} {{desc=Energy Claws is an Innate Attack, Superpower. Requires conscious activation.}}
    */
</script>





	
	





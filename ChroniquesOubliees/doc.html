<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Documentation de la fiche de personnage Chroniques Oubliées Fantasy sous Roll20">
    <meta name="author" content="Ulti">
    <title>Fiche pour Chroniques Oubliées Fantasy sous Roll20</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

  </head>
  <body data-target="#list" data-spy="scroll" data-offset="10">
    <style>
body{position: relative;}
img{margin: 0 auto; display: block; border-radius: 3px; -webkit-box-shadow: 0px 3px 8px 1px rgba(61, 61, 61,0.40); -moz-box-shadow: 0px 3px 8px 1px rgba(61, 61, 61,0.40); box-shadow: 0px 3px 8px 1px rgba(61, 61, 61,0.4);}
.card, img:hover{-webkit-box-shadow: 0px 3px 8px 1px rgba(61, 61, 61,0.60); -moz-box-shadow: 0px 3px 8px 1px rgba(61, 61, 61,0.60); box-shadow: 0px 3px 8px 1px rgba(61, 61, 61,0.60);}
.card {margin-bottom: 20px;}
.card > img {-webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none;}
.card.added > img {-webkit-filter: grayscale(100%); -moz-filter: grayscale(100%); -o-filter: grayscale(100%); -ms-filter: grayscale(100%); filter: grayscale(100%); }
.card .card-title {height: 52px; overflow: hidden}
figcaption {font-size: 0.7em; text-align: center; margin-top: -0.7rem; margin-bottom: 0.7rem;}
div.decalage {margin-left: 10px;}
h3.text-info {margin-top: 30px;}
h4.text-secondary {margin-top: 30px;}
.content li {margin-top: 10px}
div.decalage > h3.text-info:first-child, div.decalage > h4.text-secondary:first-child, .content li:first-child {margin-top: 0px;}
div.alert > p:last-child {margin-bottom: 0}
#json_data textarea {margin-bottom: 10px;}
#json_data button {margin-bottom: 10px; margin-right: 5px; float: right;}
#json_data button::after {clear: both;}
table {border-collapse: collapse;}
th, td {padding: 5px;}
tr {line-height: 25px;}
    </style>
    <script>
      $('document').ready(function() {      
        $(document).on('click', '[data-href]', function(){
          window.open($(this).data('href'));
        });

        $('a[href^="http://"], a[href^="https://"]').attr('target','_blank');

        $('div.sticky-top ul.collapse').on('show.bs.collapse', function () {
          $('div.sticky-top ul.collapse').collapse('hide');
        });
      });
    </script>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-3 col-sm-4 d-none d-sm-block d-md-block d-lg-block d-xl-block">
          <div class="sticky-top">
            <h1>Sommaire</h1>
            <ol>
              <li data-toggle="collapse" data-target="#vue_generale_sommaire"><a href="#vue_generale">Vue générale</a></li>
              <ul id="vue_generale_sommaire" class="collapse">
                <li><a class="text-info" href="#identite">Identité du personnage</a></li>
                <li><a class="text-info" href="#choix_pj_pnj">Fiches joueurs et PNJ</a></li>
              </ul>
              <li data-toggle="collapse" data-target="#fiche_pj_sommaire"><a href="#fiche_pj">Fiches pour les joueurs</a></li>
              <ul id="fiche_pj_sommaire" class="collapse">
                <li><a class="text-info" href="#carac_pj">Caractéristique des fiches joueurs</a></li>
                <li><a class="text-info" href="#capacites">Capacités et compétences</a></li>
                <li><a class="text-info" href="#equipement">Équipement</a></li>
                <li><a class="text-info" href="#configuration">Configuration</a></li>
              </ul>
              <li data-toggle="collapse" data-target="#fiche_pnj_sommaire"><a href="#fiche_pnj">Fiches pour les PNJs</a></li>
              <ul id="fiche_pnj_sommaire" class="collapse">
                <li><a class="text-info" href="#statblocks">Importations de statblocks</a></li>
                <li><a class="text-info" href="#carac_pnj">Caractéristique des fiches PNJ</a></li>
              </ul>
              <li><a href="#terre_arran">Les Terres d'Arran</a></li>
              <li><a href="#script">Script</a></li>
            </ol>
          </div>
        </div>
        <div class="col-md-9 col-sm-8 content">
          <h1>Documentation pour la fiche COF pour Roll20</h1>
          <p><i>Cette feuille de personnage utilise des marques déposées et des droits d’auteurs qui sont la propriété de Black Book Editions comme l’y autorisent les conditions d’utilisation de Black Book Editions. Cette feuille de personnage n’est pas publiée par Black Book Editions et n’a pas reçu son aval ni une quelconque approbation de sa part. Pour de plus amples informations sur Black Book Editions, consultez <a href="www.black-book-editions.fr">www.black-book-editions.fr</a>.</i></p>
            <p><img class="img-fluid" src="Images/co_v4.webp"></p>
          <h2 class="text-primary" id="vue_generale">1. Vue générale </h2>
          <div class="decalage">
            <img src="co_v1.png" align="right" style="width:40%; max-width:1332px; margin-left:10px; margin-bottom:10px;" />
            <p>Cette fiche a été originellement conçue par Natha. Elle a été reprise par Ulti en 2018, et le design a peu changé. Vous pouvez voir ci-contre la fiche de Natha. Le développement de la fiche est entièrement libre et n'est en aucun cas un produit officiel de Black Book Édition. Il est nécessaire d'acheter <a href="http://www.black-book-editions.fr/catalogue.php?id=13">le jeu Chroniques Oubliées</a> pour profiter pleinement de cette fiche.</p>
            <p>La première partie de la fiche concerne l'identité du personnage (nom, race, profil, niveau, etc.) et reste toujours visible. La partie située en dessous de l'identité comporte plusieurs onglets qui regroupent différents aspects de la fiche.</p>
            <p>D'une manière générale, cliquer sur les symboles de dés permet de lancer les dés dans le chat pour l'action liée aux dés. Les symboles de triangle pleins indiquent qu'il est possible d'afficher plus d'informations en cliquant sur le triangle. Mettre la souris à la fin de certaines lignes permet de faire apparaître un symbole d'engrenage. Cliquer sur ce symbole d'engrenage dévoile des lignes supplémentaires, généralement utiles uniquement pour le MJ.</p>
            <p>La fiche est conçue à la fois pour être utilisable seule et avec un compte gratuit, et pour faciliter l'utilisation du <a href="https://raw.githack.com/Roll20/roll20-api-scripts/master/COFantasy/doc.html">script COFantasy</a> pour ceux qui ont un compte pro.</p>
            <h3 class="text-info" id="identite">1.1 Identité du personnage</h3>
            <div class="decalage">
              <p>Cette partie affiche le token du personnage et les informations de base sur le personnage. La seule subtilité concerne le nom : on peut cliquer sur le triangle devant le nom, pour faire apparaître un alias. En face du nom, on voit alors apparaître la façon dont les joueurs connaissent le personnage : soit par son nom, soit par son alias. Ces informations sont en particulier utilisées par le <a href="https://raw.githack.com/Roll20/roll20-api-scripts/master/COFantasy/doc.html">script associé à la fiche</a>.</p>
            </div>
            <h3 class="text-info" id="choix_pj_pnj">1.2 Fiche pour joueur et fiche pour PNJ</h3>
            <div class="decalage">
              <p>Le jeu fait une distinction nette entre personnages joueurs et PNJ : la construction est différente, les caractéristiques sont simplifiées pour les PNJs. Le choix du type de fiche se fait dans l'identité, depuis le menu déroulant <code>Type</code>.
            <img align=right src="Images/passer_en_pnj.webp" style="width:16%; max-width:150px; margin-left:6px; margin-top:6px" /> 
            Si vous avez commencé à remplir la fiche en mode joueur et que vous décidez de passer en mode PNJ, la fiche essaie de convertir automatiquement tout ce qui a été rentré en mode joueur. De même, vous pouvez repasser en mode joueur, et la conversion sera faite automatiquement. Si vous passez par erreur de PJ à PNJ, rien ne devrait être perdu, vous pouvez repasser à PJ.
              </p>
              <p>Il existe une différence entre PNJ et PJ qui n'est pas directement visible sur la fiche : les personnages joueurs on un niveau et les PNJ ont un niveau de créature (NC). Les règles précisent que partout où le niveau est mentionné dans une capacité, on doit utiliser le NC pour un PNJ. On utilise donc le niveau tout court pour noter le NC d'un PNJ, et ce malgré le fait qu'un personnage joueur est considéré comme ayant un niveau de monstre égal à la moitié de son niveau. Le passage de PJ à PNJ ne fait pas cette conversion.</p>
            </div>
          </div>
          <h2 class="text-primary" id="fiche_pj">2. Fiche pour les personnages joueurs</h2>
          <div class="decalage">
            <h3 class="text-info" id="carac_pj">2.1 Caractéristiques et attaques</h3>
            <div class="decalage">
              <p>La fiche est découpée et zones de couleur regroupant les caractéristiques de base, le combat, la vitalité, la défense et les parties de règles optionnelles.</p>
              <p>Pour chaque caractéristique de base, la fiche calcule le modificateur de caractéristique et propose un bouton pour lancer un dé auquel on ajoute ce modificateur. Par défaut, ce jet est un dé à 20 faces, mais si l'état <code>affaibli</code> est coché, ce sera un d12. Entre le bouton de lancer de dé et la valeur de la caractéristique, un menu déroulant permet de choisir entre caractéristique ordinaire, caractéristique supérieure (dans ce cas, le bouton fait lancer 2 dés et garde le meilleur) et caractéristique héroïque supérieure (où le résultat du dé est toujours au moins 10).<p>
              <p>Les lignes d'attaque sont précédées d'un symbole de dé à 20 faces. Cliquer sur ce dé permet de lancer le jet d'attaque, ainsi que les dégâts de l'arme. 
            <img src="Images/champ_special.webp" align="right" style="width:36%; max-width:378; margin-left:10px; margin-bottom:5px; margin-top:5px;"/>
              Tout ce qui est dans le champ <code>SPÉCIAL</code> sera interprété avant affichage (comme un message dans le chat). Par exemple, on peut y mettre <code>affaibli pendant [[1d4]] tours</code>, ou bien <code>+[[2d6]] DM de feu</code>.
              En mettant la souris vers la fin de la ligne, on fait apparaître une roue crantée. Cliquer sur cette roue fait apparaître plus d'informations pour l'attaque. La plupart ne sont utiles qu'avec le script associé, mais le champ <code>Liste de modificateurs</code> permet de modifier les attaques, par exemple pour faire relancer les 1 des dés de dégâts. Passer la souris sur ce champ indique la liste des modificateurs reconnus par la fiche (le script en reconnaît beaucoup plus). Certaines armes sont reconnues par la fiche quand on rentre leur nom, ce qui permet d'avoir automatiquement certains modificateurs, comme <code>choc</code> pour le bâton, qui permet de faire des dégâts non létaux sans pénalité.</p>
            <img src="Images/options_attaque.webp" align="right" style="width:50%; max-width:523px; margin-left:10px; margin-bottom:5px;"/>
            <p>Au dessus de la liste des attaques, un onglet permet d'afficher des options d'attaques qui s'appliquent à toutes les attaques. L'effet de chaque case à cocher est expliqué sur la fiche. Pour l'attaque en puissance, on peut modifier le nombre de d6 de DM supplémentaires, comme prévu dans la règle page 161.</p>
            </div>
            <h3 class="text-info" id="capacites">2.2 Capacités et compétences</h3>
            <div class="decalage">
            <img src="Images/capacites.webp" align="right" style="width:50%; max-width:521px; margin-left:10px; margin-bottom:5px;"/>
            <p>Cet onglet affiche par défaut 5 voies normales et une voie de prestige pour le personnage. On peut remplir directement les noms de voies et les titres des capacités. Les triangles à côté de ces noms permettent d'afficher la description des capacités, ou, pour les voies, des effets valides pour l'ensemble de la voie (comme le bonus de +2/rang en connaissance pour la Voie de la magie universelle). Pour éditer ces descriptions, il faut cocher la case <code>Éditer</code> en haut à droite des capacités. Pour retrouver un affichage plus compact, il faut décocher la case. Il est possible d'afficher 3 voies supplémentaires en cochant la case <code>Plus de voies</code> en dessous des capacités.
            Il est possible d'envoyer dans le tchat le texte descriptif d'une capacité en cliquant sur la bulle de dialogue qui se trouve à droite du nom de la capacité.
              </p>
            <img src="Images/competences.webp" align="right" style="width:50%; max-width:521px; margin-left:10px; margin-bottom:5px;"/>
              <p>Cet onglet propose aussi une liste de compétences à remplir (cliquer sur <code>Add</code>). Chaque capacité a par défaut une caractéristique associée (mais on peut la changer le temps d'un test), ainsi qu'un malus possible à appliquer&nbsp;: malus d'armure ou malus de casque (pour les jets de perception ou de vigilance).</p>
              <p>Enfin, la dernière liste est une liste de jets de capacité, pour noter les jets utiles pour certaines capacités. Le format est assez libre, pour qu'on puisse faire des jets de dégâts, des jets de caractéristiques, avec ou sans avantage. On peut par exemple y noter le jet d'esquive de la magie d'un voleur.</p>
            </div>
            <img src="Images/equipement.webp" align="right" style="width:50%; max-width:521px; margin-left:10px; margin-bottom:5px;"/>
            <h3 class="text-info" id="equipement">2.3 Équipement</h3>
            <div class="decalage">
              <p>L'onglet équipement permet à la fois de noter la richesse, des consommables et des notes de jeu. Pour les consommables, il est possible d'afficher une ligne supplémentaire pour décrire l'effet (utilisé par le script).
              </p>
            </div>
            <br clear="right" />
            <h3 class="text-info" id="configuration">2.4 Configuration</h3>
            <div class="decalage">
            <img src="Images/configuration.webp" align="right" style="width:29%; max-width:300; margin-left:10px; margin-bottom:5px;"/>
              <p>L'onglet de configuration devrait être peu touché. D'ailleurs, la valeur par défaut de ces options peut être changée dans chaque partie Roll20, dans les réglages de la partie (accessibles avant de lancer la partie). Le setting (soit générique, soit Terres d'Arran) permet de définir de grandes options de jeu. Le type de jet permet, pour cette fiche, de faire lancer les dés publiquement (Jets Normaux) ou bien seulement visibles par le MJ (Jets Cachés).</p>
            <br clear="right" />
            </div>
          </div>
          <h2 class="text-primary" id="fiche_pnj">3. Fiche pour les PNJ</h2>
          <div class="decalage">
            <p>Le fiche de PNJ comporte un onglet de caractéristiques simplifié, et des onglets équipement et script similaires aux <a href=#equipement>onglet équipement</a>  et <a href=#script>onglet script</a> en mode joueur. Un onglet particuler, l'onglet <code>Statblock</code> permet de créer facilement des fiches de PNJ depuis les livres ou ressources sur COF&nbsp;:
            <h3 class="text-info" id="statblocks">3.1 Importation de statblocks</h3>
            <div class="decalage">
              <p>Il existe 2 moyens d'importer directement un PNJ, sans qu'il soit besoin de compte pro. Les 2 méthodes utilisent l'onglet <code>Statblock</code> de la fiche en mode PNJ. Enfin, il existe un troisième moyen plus complet, mais celui-ci utilise un script et demande un compte pro.</p>
              <h4>Importation depuis un PDF</h4>
            <img src="Images/servantes.webp" align="left" style="width:40%; max-width:88px; margin-right:10px;"/>
            <p>C'est l'importation la plus facile depuis les livres des règles ou les campagnes du commerce&nbsp;: il suffit de copier le stat block et de le coller dans l'onglet <code>Statblock</code>. Attention, cet onglet n'est visible que quand la fiche est en mode PNJ. Les étapes sont donc&nbsp;: 
            <img align=right src="Images/ajouter_personnage.webp"  style="width:10%; max-width:85px; margin-left:5px;" /> créer un personnage dans Roll20, ouvrir la fiche, 
            <img align=right src="Images/passer_en_pnj.webp" style="width:15%; max-width:150px;" /> 
            passer la fiche en mode PNJ, puis cliquer sur l'onglet <code>Statblock</code>, puis coller dans cet onglet le texte de la statblock. 
            <img src="Images/statblocks_1.webp" align="right" style="width:50%; max-width:523px; margin-left:10px; margin-bottom:5px; margin-top:5px;"/>
            En changeant à nouveau d'onglet, la fiche va se remplir automatiquement. 
            <img src="Images/statblocks_1_resultats.webp" align="right" style="width:50%; max-width:523px; margin-left:10px; margin-bottom:5px; margin-top:5px;"/>
            À noter que la fiche ne lit le statblock qu'après une modification du texte. Donc, une fois que vous avez rentrez votre statblock, si vous n'y touchez plus, vous pouvez modifier la fiche à votre guise.
            Il ne reste ensuite plus qu'à ajouter une image et un token, et le personnage peut être utilisé.</p>
            <p>Cette méthode permet de remplir le nom du personnage, la description, le niveau, les caractéristiques et les attaques. Il peut y avoir des ratés au niveau des points de vie ou de la RD, selon la façon dont elles sont notées dans le statblock, voire parfois au niveau des attaques.</p>
            <p>L'importation n'est pas capable de tenir compte des voies ou autres capacités particulières.</p>
            <br clear="right" />
            <h4 id="importation_co_drs">Importation depuis <a href="https://www.co-drs.org/">CO-DRS</a></h4>
            <img src="Images/selection_co_drs.webp" align="left" style="width:40%; max-width:198px; margin-right:10px;"/>
            <img src="Images/export_co_drs.webp" align="left" style="width:30%; max-width:308px; margin-right:10px; margin-top:10px"/>
            <p>L'importation par cette méthode est limitée au DRS de COF, mais est plus fiable et permet de tenir compte des voies de PNJs. Comme pour la méthode précédente, il faut commencer pour créer un personnage dans votre partie Roll20, puis passer la ficher en mode PNJ et ouvrir l'onglet <code>Statblock</code>.</p>
            <p>Sur le site <a href="https://www.co-drs.org/bestiaire/creatures">CO-DRS</a>, recherchez votre créature et cliquez sur les trois petits points en haut à droite de l'image de la créature, et sélectionnez <code>Export pour table virtuelle</code>.
            Dans ce menu, cliquez simplement sur <code>Copier dans le presse-papier</code> et vous pouvez ensuite coller dans l'onglet <code>Statblock</code> de la fiche dans Roll20. 
            <img src="Images/statblocks_depuis_drs.webp" align="right" style="width:50%; max-width:523px; margin-left:10px; margin-bottom:5px; margin-top:5px;"/>
            Ce texte sera difficilement lisible, mais il permet plus de précision dans la fiche, et en particulier de remplir certains prédicats pour le script associé à la fiche.
            <img src="Images/statblocks_depuis_drs_resultat.webp" align="right" style="width:50%; max-width:523px; margin-left:10px; margin-bottom:5px; margin-top:5px;"/>
            </p>
            <p>
            Le&nbsp;site CO-DRS propose aussi de télécharger un token pour chaque créature. Il ne vous reste plus qu'à l'uploader sur la fiche de votre PNJ, puis lier le token à la fiche et rentrer les PVs sur le token, et vous êtes prêts à jouer.
            </p>
            <br clear="right" />
            <h4>Importation en utilisant le <a href="https://github.com/coAtlas/Script-COIE/blob/main/scriptCOIE.js">script d'import/export de fiches</a></h4>
            <p>Tout est expliqué dans la <a href="https://raw.githack.com/coAtlas/Script-COIE/main/startCOIE.html">documentation de COIE</a>. L'import de fiches permet de tout importer, et vous n'avez ensuite plus qu'à jouer. La limite étant que cela demande un compte pro.</p>
            </div>
            <h3 class="text-info" id="carac_pj">3.2 Caractéristiques</h3>
            <div class="decalage">
              <p>Comme pour les personnages, il est possible de lancer des jets de caractéristiques, et en cochant la case devant le nom de la caractéristique, on peut lancer des jets de caractéristique supérieure (on garde le meilleur de 2 d20). Le type de jets peut être normal (visible par tous) ou caché (visible seulement par le MJ). Comme dans la fiche de joueur, vous trouverez des options d'attaque (attaque en puissance, etc.). La fiche PNJ présente une option d'attaque supplémentaire, l'attaque de groupe, qui permet de simuler l'attaque simultanée de plusieurs PNJs de même caractéristiques en un seul jet (voir la règle dans le compagnon de règles COF). Par exemple, pour simuler l'attaque de 3 loups, ouvrir la fiche des loups, mettre 3 dans la valeur de l'attaque de groupe, puis lancer l'attaque.
              </p>
            </div>
          </div>
          <h2 class="text-primary" id="terre_arran">4. Version pour les Terres d'Arran</h2>
          <div class="decalage">
            <img src="Images/sheet_settings.webp" align="left" style="width:40%; max-width:400px; margin-right:10px; margin-top:10px; margin-bottom:10px;"/>
            <p>Pour jouer dans le setting des Terres d'Arran, le mieux est de mettre ce setting par défaut dans les réglages de la partie. La fiche permet alors de noter le peuple et la culture des personnages, ainsi que la famille de profil utilisée. Cela influence les scores d'attaque, le dé de vie ainsi que les points de chance.</p>
            <p>Dans les capacités, vous verrez apparaître un talent magique pour les mystique et des traits de peuple pour tous. Parmis les voies, vous trouverez une voie de peuple et une voie culturelle. Enfin, vous pourrez noter les formations martiales du personnage à cet endroit.</p>
            <br clear="left" />
          </div>
          <h2 class="text-primary" id="script">5. Intégration avec le script</h2>
          <div class="decalage">
            <p>Lorsque la fiche est utilisée avec le <a href="https://raw.githack.com/Roll20/roll20-api-scripts/master/COFantasy/doc.html">script COFantasy</a> (réservée aux comptes pro), il est conseillé de ne pas utiliser les boutons de la fiche, mais les fonctions dédiées fournies par le script. Par exemple la macro <code>Jets</code> sera plus précise et tendra compte de plus d'options et effets que les boutons des caractéristiques ou même des compétences.</p>
            <p>Un certain nombre de réglages de la fiche ne sont utilisés que pour le script. Ils sont en général cachés par défaut, sauf quand la fiche peut détecter que le script est présent. Attention, pour cela, il faut au moins une fois sauvegarder et fermer la fiche. Cela se voit en particulier pour l'onglet <code>Script</code> qui restera vide tant que la fiche n'aura pas au moins été fermée une fois.</p>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

<div class="preload"></div>
<div>
  <input type="hidden" name="attr_advantage_bond_support_translated" value="Advantage/Bond/Support"/>
  <input type="hidden" name="attr_arts_oration_extra_domain_query" value="?{Add another Domain (spend Pressure)|No, |Determination, + @{blood_valor_die}[Determination]|Subtlety, + @{craft_reason_die}[Subtlety]|Warmth, + @{resolve_spirit_die}[Warmth]}"/>
  <input type="hidden" name="attr_arts_oration_translated" value="Curiosity"/>
  <input type="hidden" name="attr_blood_valor_extra_domain_query" value="?{Add another Domain (spend Pressure)|No, |Curiosity, + @{arts_oration_die}[Curiosity]|Subtlety, + @{craft_reason_die}[Subtlety]|Warmth, + @{resolve_spirit_die}[Warmth]}"/>
  <input type="hidden" name="attr_blood_valor_translated" value="Determination"/>
  <input type="hidden" name="attr_bonusdice_query" value="?{Other dice (Advantage, Bond Dice, or Support), e.g. 1d8 + 1d8 + 1d6|0}"/>
  <input type="hidden" name="attr_craft_reason_extra_domain_query" value="?{Add another Domain (spend Pressure)|No, |Curiosity, + @{arts_oration_die}[Curiosity]|Determination, + @{blood_valor_die}[Determination]|Warmth, + @{resolve_spirit_die}[Warmth]}"/>
  <input type="hidden" name="attr_craft_reason_translated" value="Subtlety"/>
  <input type="hidden" name="attr_specialist_training_query" value="?{Spend Specialist Training and Gear|0}"/>
  <input type="hidden" name="attr_research_and_name_query" value="?{Research|None,roll=[[{@{name_die}[@{name_label}]|@{research},research=@{research}&amp;#125;&amp;#125; {{roll=[[{@{name_die}[@{name_label}] + @{research_die}[@{research_label}]}"/>
  <input type="hidden" name="attr_resolve_spirit_extra_domain_query" value="?{Add another Domain (spend Pressure)|No, |Curiosity, + @{arts_oration_die}[Curiosity]|Determination, + @{blood_valor_die}[Determination]|Subtlety, + @{craft_reason_die}[Subtlety]}"/>
  <input type="hidden" name="attr_resolve_spirit_translated" value="Warmth"/>
  <input type="hidden" name="attr_target_query" value="?{Target Number|0}"/>
  <input type="hidden" name="attr_domain_query" value="?{Domain|@{arts_oration_label},arts_oration|@{blood_valor_label},blood_valor|@{craft_reason_label},craft_reason|@{resolve_spirit_label},resolve_spirit|Any domain,any}"/>
</div>
<div class="container compendium-drop-target expeditions">
  <input class="sheet-type" type="hidden" name="attr_sheet_type" value=""/>
  <div class="sheet-type-selector">
    <div class="title" data-i18n="choose_sheet_type"></div>
    <div class="content">
      <button type="action" name="act_choose_character" data-i18n="character"></button>
      <button type="action" name="act_choose_strife" data-i18n="strife"></button>
      <button type="action" name="act_choose_expedition" data-i18n="expedition"></button>
    </div>
  </div>
  <div class="sheet-type-character">
    <div class="logo"></div>
        <div class="title-vertical glory">
          <input class="title" type="text" spellcheck="false" name="attr_glory_label" value="Glory"/>
          <div class="content">
            <div class="box">
              <input class="hidden fakeradio" type="checkbox" name="attr_glory_0" value="0" checked="checked"/>
              <input class="squarebox squareboxfirst fakeradio" type="checkbox" name="attr_glory_0" value="1"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_0" value="2"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_0" value="3"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_0" value="4"/><span></span>
              <input class="squarebox squareboxlast fakeradio" type="checkbox" name="attr_glory_0" value="5"/><span></span>
            </div>
            <div class="box">
              <input class="hidden fakeradio" type="checkbox" name="attr_glory_1" value="0" checked="checked"/>
              <input class="squarebox squareboxfirst fakeradio" type="checkbox" name="attr_glory_1" value="1"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_1" value="2"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_1" value="3"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_1" value="4"/><span></span>
              <input class="squarebox squareboxlast fakeradio" type="checkbox" name="attr_glory_1" value="5"/><span></span>
            </div>
            <div class="box">
              <input class="hidden fakeradio" type="checkbox" name="attr_glory_2" value="0" checked="checked"/>
              <input class="squarebox squareboxfirst fakeradio" type="checkbox" name="attr_glory_2" value="1"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_2" value="2"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_2" value="3"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_2" value="4"/><span></span>
              <input class="squarebox squareboxlast fakeradio" type="checkbox" name="attr_glory_2" value="5"/><span></span>
            </div>
            <div class="box">
              <input class="hidden fakeradio" type="checkbox" name="attr_glory_3" value="0" checked="checked"/>
              <input class="squarebox squareboxfirst fakeradio" type="checkbox" name="attr_glory_3" value="1"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_3" value="2"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_3" value="3"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_3" value="4"/><span></span>
              <input class="squarebox squareboxlast fakeradio" type="checkbox" name="attr_glory_3" value="5"/><span></span>
            </div>
            <div class="box">
              <input class="hidden fakeradio" type="checkbox" name="attr_glory_4" value="0" checked="checked"/>
              <input class="squarebox squareboxfirst fakeradio" type="checkbox" name="attr_glory_4" value="1"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_4" value="2"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_4" value="3"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_4" value="4"/><span></span>
              <input class="squarebox squareboxlast fakeradio" type="checkbox" name="attr_glory_4" value="5"/><span></span>
            </div>
            <div class="box">
              <input class="hidden fakeradio" type="checkbox" name="attr_glory_5" value="0" checked="checked"/>
              <input class="squarebox squareboxfirst fakeradio" type="checkbox" name="attr_glory_5" value="1"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_5" value="2"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_5" value="3"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_5" value="4"/><span></span>
              <input class="squarebox squareboxlast fakeradio" type="checkbox" name="attr_glory_5" value="5"/><span></span>
            </div>
            <div class="box">
              <input class="hidden fakeradio" type="checkbox" name="attr_glory_6" value="0" checked="checked"/>
              <input class="squarebox squareboxfirst fakeradio" type="checkbox" name="attr_glory_6" value="1"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_6" value="2"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_6" value="3"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_6" value="4"/><span></span>
              <input class="squarebox squareboxlast fakeradio" type="checkbox" name="attr_glory_6" value="5"/><span></span>
            </div>
            <div class="box">
              <input class="hidden fakeradio" type="checkbox" name="attr_glory_7" value="0" checked="checked"/>
              <input class="squarebox squareboxfirst fakeradio" type="checkbox" name="attr_glory_7" value="1"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_7" value="2"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_7" value="3"/><span></span>
              <input class="squarebox fakeradio" type="checkbox" name="attr_glory_7" value="4"/><span></span>
              <input class="squarebox squareboxlast fakeradio" type="checkbox" name="attr_glory_7" value="5"/><span></span>
            </div>
          </div>
        </div>
        <div class="title-vertical namebox">
          <input class="title" type="text" spellcheck="false" name="attr_name_label" value="Name"/>
          <div class="content">
            <label>
              <input class="squarebox" type="checkbox" name="attr_namebox_40" value="1"/><span></span><span>40</span>
            </label>
            <label>
              <input class="squarebox" type="checkbox" name="attr_namebox_80" value="1"/><span></span><span>80 (D8)</span>
            </label>
            <label>
              <input class="squarebox" type="checkbox" name="attr_namebox_120" value="1"/><span></span><span>120 (D10)</span>
            </label>
            <label>
              <input class="squarebox" type="checkbox" name="attr_namebox_160" value="1"/><span></span><span>160</span>
            </label>
            <label>
              <input class="squarebox" type="checkbox" name="attr_namebox_200" value="1"/><span></span><span>200</span>
            </label>
            <label>
              <input class="squarebox" type="checkbox" name="attr_namebox_240" value="1"/><span></span><span>240 (D12)</span>
            </label>
          </div>
        </div>
    <div class="info">
          <div class="infobox">
            <div class="title">
              <div class="auto-expand"><span name="attr_name_label">Name</span>
                <textarea spellcheck="false" name="attr_name_label">Name</textarea>
              </div>
            </div>
            <div class="content character-name">
              <input type="text" spellcheck="false" name="attr_character_name"/>
              <select name="attr_name_die">
                <option value="d6">d6</option>
                <option value="d8">d8</option>
                <option value="d10">d10</option>
                <option value="d12">d12</option>
              </select>
            </div>
          </div>
          <div class="infobox">
            <div class="title">
              <div class="auto-expand"><span name="attr_research_label">Research</span>
                <textarea spellcheck="false" name="attr_research_label">Research</textarea>
              </div>
            </div>
            <div class="content research">
              <div class="auto-expand"><span name="attr_research"></span>
                <textarea spellcheck="false" name="attr_research"></textarea>
              </div>
              <select name="attr_research_die">
                <option value="d6">d6</option>
                <option value="d8">d8</option>
                <option value="d10">d10</option>
              </select>
            </div>
          </div>
      <input class="hider" type="hidden" name="attr_boons_4_check_1" value="0"/>
          <div class="infobox">
            <div class="title">
              <div class="auto-expand"><span name="attr_research_label">Research</span>
                <textarea spellcheck="false" name="attr_research_label">Research</textarea>
              </div>
            </div>
            <div class="content research">
              <div class="auto-expand"><span name="attr_research_2"></span>
                <textarea spellcheck="false" name="attr_research_2"></textarea>
              </div>
            </div>
          </div>
          <div class="infobox">
            <div class="title">
              <div class="auto-expand"><span name="attr_lineage_pronouns_label">Motif / Pronouns</span>
                <textarea spellcheck="false" name="attr_lineage_pronouns_label">Motif / Pronouns</textarea>
              </div>
            </div>
            <div class="content lineage-pronouns">
              <div class="auto-expand"><span name="attr_lineage_pronouns"></span>
                <textarea spellcheck="false" name="attr_lineage_pronouns"></textarea>
              </div>
            </div>
          </div>
    </div>
    <div class="domains">
      <input class="title" type="text" spellcheck="false" name="attr_domains_label" value="Domains"/>
      <div class="domain">
        <button class="domain-button-arts_oration" name="roll_arts_oration" type="roll" value="&amp;{template:agon-hero} {{name=@{character_name}}} {{type=arts_oration}} {{obstacle=[[@{target_query}]]}} {{@{research_and_name_query} + @{arts_oration_die}[@{arts_oration_translated}] @{arts_oration_extra_domain_query} + @{bonusdice_query}[@{advantage_bond_support_translated}]}k2 + @{specialist_training_query}d4k1[@{specialist_training_label}] ]]}}"><span name="attr_arts_oration_label"></span></button>
        <select name="attr_arts_oration_die">
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
        </select>
      </div>
      <div class="domain">
        <button class="domain-button-blood_valor" name="roll_blood_valor" type="roll" value="&amp;{template:agon-hero} {{name=@{character_name}}} {{type=blood_valor}} {{obstacle=[[@{target_query}]]}} {{@{research_and_name_query} + @{blood_valor_die}[@{blood_valor_translated}] @{blood_valor_extra_domain_query} + @{bonusdice_query}[@{advantage_bond_support_translated}]}k2 + @{specialist_training_query}d4k1[@{specialist_training_label}] ]]}}"><span name="attr_blood_valor_label"></span></button>
        <select name="attr_blood_valor_die">
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
        </select>
      </div>
      <div class="domain">
        <button class="domain-button-craft_reason" name="roll_craft_reason" type="roll" value="&amp;{template:agon-hero} {{name=@{character_name}}} {{type=craft_reason}} {{obstacle=[[@{target_query}]]}} {{@{research_and_name_query} + @{craft_reason_die}[@{craft_reason_translated}] @{craft_reason_extra_domain_query} + @{bonusdice_query}[@{advantage_bond_support_translated}]}k2 + @{specialist_training_query}d4k1[@{specialist_training_label}] ]]}}"><span name="attr_craft_reason_label"></span></button>
        <select name="attr_craft_reason_die">
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
        </select>
      </div>
      <div class="domain">
        <button class="domain-button-resolve_spirit" name="roll_resolve_spirit" type="roll" value="&amp;{template:agon-hero} {{name=@{character_name}}} {{type=resolve_spirit}} {{obstacle=[[@{target_query}]]}} {{@{research_and_name_query} + @{resolve_spirit_die}[@{resolve_spirit_translated}] @{resolve_spirit_extra_domain_query} + @{bonusdice_query}[@{advantage_bond_support_translated}]}k2 + @{specialist_training_query}d4k1[@{specialist_training_label}] ]]}}"><span name="attr_resolve_spirit_label"></span></button>
        <select name="attr_resolve_spirit_die">
          <option value="d6">d6</option>
          <option value="d8">d8</option>
          <option value="d10">d10</option>
        </select>
      </div>
    </div>
        <div class="title-vertical favors">
          <input class="title" type="text" spellcheck="false" name="attr_specialist_training_label" value="Training/Gear"/>
          <div class="content">
            <div class="favorbox exploration">
              <input class="label" type="text" spellcheck="false" name="attr_authority_label" value="Exploration"/>
              <input type="text" spellcheck="false" name="attr_zeus_label" value="Extra Vehicle"/>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_authority_1" value="1"/><span></span>
              </label>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_authority_2" value="1"/><span></span>
              </label>
            </div>
            <div class="favorbox documentation">
              <input class="label" type="text" spellcheck="false" name="attr_beauty_label" value="Documentation"/>
              <input type="text" spellcheck="false" name="attr_aphrodite_label" value="Camera Gear"/>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_beauty_1" value="1"/><span></span>
              </label>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_beauty_2" value="1"/><span></span>
              </label>
            </div>
            <div class="favorbox security">
              <input class="label" type="text" spellcheck="false" name="attr_conviction_label" value="Security"/>
              <input type="text" spellcheck="false" name="attr_demeter_label" value="Firearms"/>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_conviction_1" value="1"/><span></span>
              </label>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_conviction_2" value="1"/><span></span>
              </label>
            </div>
            <div class="favorbox planning">
              <input class="label" type="text" spellcheck="false" name="attr_cunning_label" value="Planning"/>
              <input type="text" spellcheck="false" name="attr_hera_label" value="Emergency Gear"/>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_cunning_1" value="1"/><span></span>
              </label>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_cunning_2" value="1"/><span></span>
              </label>
            </div>
            <div class="favorbox intuition">
              <input class="label" type="text" spellcheck="false" name="attr_daring_label" value="Intuition"/>
              <input type="text" spellcheck="false" name="attr_hermes_label" value="Marine Friend"/>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_daring_1" value="1"/><span></span>
              </label>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_daring_2" value="1"/><span></span>
              </label>
            </div>
            <div class="favorbox coordination">
              <input class="label" type="text" spellcheck="false" name="attr_ferocity_label" value="Coordination"/>
              <input type="text" spellcheck="false" name="attr_ares_label" value="Radio Tech"/>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_ferocity_1" value="1"/><span></span>
              </label>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_ferocity_2" value="1"/><span></span>
              </label>
            </div>
            <div class="favorbox awareness">
              <input class="label" type="text" spellcheck="false" name="attr_fortitude_label" value="Awareness"/>
              <input type="text" spellcheck="false" name="attr_poseidon_label" value="Sensors"/>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_fortitude_1" value="1"/><span></span>
              </label>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_fortitude_2" value="1"/><span></span>
              </label>
            </div>
            <div class="favorbox precision">
              <input class="label" type="text" spellcheck="false" name="attr_ingenuity_label" value="Precision"/>
              <input type="text" spellcheck="false" name="attr_hephaistos_label" value="Maps and Charts"/>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_ingenuity_1" value="1"/><span></span>
              </label>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_ingenuity_2" value="1"/><span></span>
              </label>
            </div>
            <div class="favorbox science">
              <input class="label" type="text" spellcheck="false" name="attr_insight_label" value="Research"/>
              <input type="text" spellcheck="false" name="attr_hekate_label" value="Laboratory Tech"/>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_insight_1" value="1"/><span></span>
              </label>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_insight_2" value="1"/><span></span>
              </label>
            </div>
            <div class="favorbox bravado">
              <input class="label" type="text" spellcheck="false" name="attr_knowledge_label" value="Bravado"/>
              <input type="text" spellcheck="false" name="attr_apollo_label" value="Explosives"/>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_knowledge_1" value="1"/><span></span>
              </label>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_knowledge_2" value="1"/><span></span>
              </label>
            </div>
            <!-- <div class="favorbox">
              <input class="label" type="text" spellcheck="false" name="attr_precision_label" value="Precision"/>
              <input type="text" spellcheck="false" name="attr_artemis_label" value="Artemis"/>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_precision_1" value="1"/><span></span>
              </label>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_precision_2" value="1"/><span></span>
              </label>
            </div>
            <div class="favorbox">
              <input class="label" type="text" spellcheck="false" name="attr_wisdom_label" value="Wisdom"/>
              <input type="text" spellcheck="false" name="attr_athena_label" value="Athena"/>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_wisdom_1" value="1"/><span></span>
              </label>
              <label>
                <input class="diamondbox" type="checkbox" name="attr_favor_wisdom_2" value="1"/><span></span>
              </label>
            </div> -->
          </div>
        </div>
        <div class="title-vertical style-notes">
          <input class="title" type="text" spellcheck="false" name="attr_style_notes_label" value="Style &amp; Notes"/>
          <div class="content">
            <div class="auto-expand notes"><span name="attr_style_notes"></span>
              <textarea spellcheck="false" name="attr_style_notes"></textarea>
            </div>
          </div>
        </div>
        <div class="title-vertical recite">
          <input class="title" type="text" spellcheck="false" name="attr_recite_your_deeds_label" value="Dictation"/>
          <div class="content">
            <div class="auto-expand"><span name="attr_recite_top_label">How does your RESEARCH, PRESSURE (an added Domain), or SPECIALIST TRAINING AND GEAR manifest in the contest?</span>
              <textarea spellcheck="false" name="attr_recite_top_label">How does your RESEARCH, PRESSURE (an added Domain), or SPECIALIST TRAINING AND GEAR manifest in the contest?</textarea>
            </div>
            <div class="recite-box">
              <input class="title" type="text" spellcheck="false" name="attr_arts_oration_label" value="Curiosity"/>
              <div class="auto-expand"><span name="attr_recite_arts_oration_label">How was your knowledge or creativity shown?&#10;How did beauty manifest?</span>
                <textarea spellcheck="false" name="attr_recite_arts_oration_label">How was your knowledge or creativity shown?&#10;How did beauty manifest?</textarea>
              </div>
            </div>
            <div class="recite-box">
              <input class="title" type="text" spellcheck="false" name="attr_blood_valor_label" value="Determination"/>
              <div class="auto-expand"><span name="attr_recite_blood_valor_label">How was your tenacity and courage shown?&#10;What exploded?</span>
                <textarea spellcheck="false" name="attr_recite_blood_valor_label">How was your tenacity and courage shown?&#10;What exploded?</textarea>
              </div>
            </div>
            <div class="recite-box">
              <input class="title" type="text" spellcheck="false" name="attr_craft_reason_label" value="Subtlety"/>
              <div class="auto-expand"><span name="attr_recite_craft_reason_label">How was cleverness or intrigue displayed?&#10;How on earth did you do that?</span>
                <textarea spellcheck="false" name="attr_recite_craft_reason_label">How was cleverness or intrigue displayed?&#10;How on earth did you do that?</textarea>
              </div>
            </div>
            <div class="recite-box">
              <input class="title" type="text" spellcheck="false" name="attr_resolve_spirit_label" value="Warmth"/>
              <div class="auto-expand"><span name="attr_recite_resolve_spirit_label">What persuasive words did you use?&#10;How did you make an honest connection?</span>
                <textarea spellcheck="false" name="attr_recite_resolve_spirit_label">What persuasive words did you use?&#10;How did you make an honest connection?</textarea>
              </div>
            </div>
            <div class="auto-expand"><span name="attr_recite_bottom_label">SUFFER — How did you fall short? Did you overreach yourself? Was the obstacle too great? Was it bad luck?</span>
              <textarea spellcheck="false" name="attr_recite_bottom_label">SUFFER — How did you fall short? Did you overreach yourself? Was the obstacle too great? Was it bad luck?</textarea>
            </div>
          </div>
        </div>
    <div class="pressure-bonds">
      <div class="pressure-barotrauma">
        <input class="title" type="text" spellcheck="false" name="attr_pressure_label" value="Pressure"/>
        <input class="hidden fakeradio" type="checkbox" name="attr_pressure" value="0" checked="checked"/>
        <input class="circlebox fakeradio" type="checkbox" name="attr_pressure" value="1"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="circlebox fakeradio" type="checkbox" name="attr_pressure" value="2"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="circlebox fakeradio" type="checkbox" name="attr_pressure" value="3"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="circlebox fakeradio" type="checkbox" name="attr_pressure" value="4"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="circlebox fakeradio" type="checkbox" name="attr_pressure" value="5"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="alert" type="text" spellcheck="false" name="attr_alert_label" value="Alert"/>
        <div class="floating-vert-bar"></div>
        <input class="circlebox fakeradio" type="checkbox" name="attr_pressure" value="6"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="barotrauma" type="text" spellcheck="false" name="attr_barotrauma_label" value="Barotrauma"/>
        <div class="floating-vert-bar"></div>
        <input class="hidden fakeradio2" type="checkbox" name="attr_barotrauma" value="0" checked="checked"/>
        <input class="squarebox fakeradio2 dot" type="checkbox" name="attr_barotrauma" value="1"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="squarebox fakeradio2" type="checkbox" name="attr_barotrauma" value="2"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="squarebox fakeradio2" type="checkbox" name="attr_barotrauma" value="3"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="squarebox fakeradio2 dot" type="checkbox" name="attr_barotrauma" value="4"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="squarebox fakeradio2" type="checkbox" name="attr_barotrauma" value="5"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="squarebox fakeradio2" type="checkbox" name="attr_barotrauma" value="6"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="squarebox fakeradio2" type="checkbox" name="attr_barotrauma" value="7"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="squarebox fakeradio2 dot" type="checkbox" name="attr_barotrauma" value="8"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="squarebox fakeradio2" type="checkbox" name="attr_barotrauma" value="9"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="squarebox fakeradio2" type="checkbox" name="attr_barotrauma" value="10"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="squarebox fakeradio2" type="checkbox" name="attr_barotrauma" value="11"/><span></span>
        <div class="floating-vert-bar"></div>
        <input class="squarebox fakeradio2" type="checkbox" name="attr_barotrauma" value="12"/><span></span>
      </div>
      <div class="bonds">
        <input class="title" type="text" spellcheck="false" name="attr_bonds_label" value="Bonds"/>
        <fieldset class="repeating_bonds">
          <input class="bond-number" type="number" name="attr_bond_number" value="0"/>
          <input class="bond-name" type="text" spellcheck="false" name="attr_bond_name"/>
        </fieldset>
        <div class="bond-uses">
          <div class="auto-expand top"><span name="attr_bond_use_top_label">When you use a Bond, ask them to:</span>
            <textarea spellcheck="false" name="attr_bond_use_top_label">When you use a Bond, ask them to:</textarea>
          </div>
          <div class="auto-expand bond-use"><span name="attr_bond_use_1_label">Bolster you</span>
            <textarea spellcheck="false" name="attr_bond_use_1_label">Bolster you</textarea>
          </div>
          <div class="auto-expand bond-use"><span name="attr_bond_use_2_label">Block Harm or Barotrauma for you</span>
            <textarea spellcheck="false" name="attr_bond_use_2_label">Block Harm or Barotrauma for you</textarea>
          </div>
          <div class="auto-expand bond-use"><span name="attr_bond_use_3_label">Follow your lead</span>
            <textarea spellcheck="false" name="attr_bond_use_3_label">Follow your lead</textarea>
          </div>
        </div>
      </div>
    </div>
    <div class="great-deeds-boons">
      <div class="boons">
        <input class="title" type="text" spellcheck="false" name="attr_boons_label" value="Boons"/>
            <div class="boon">
              <input class="squarebox" type="checkbox" name="attr_boons_1_check_1" value="1"/><span></span>
              <div class="auto-expand"><span name="attr_boons_1_label">Advance a d8 Domain die to d10</span>
                <textarea spellcheck="false" name="attr_boons_1_label">Advance a d8 Domain die to d10</textarea>
              </div>
            </div>
            <div class="boon">
              <input class="squarebox" type="checkbox" name="attr_boons_2_check_1" value="1"/><span></span>
              <input class="squarebox" type="checkbox" name="attr_boons_2_check_2" value="1"/><span></span>
              <div class="auto-expand"><span name="attr_boons_2_label">Advance a d6 Domain die to d8</span>
                <textarea spellcheck="false" name="attr_boons_2_label">Advance a d6 Domain die to d8</textarea>
              </div>
            </div>
            <div class="boon">
              <input class="squarebox" type="checkbox" name="attr_boons_3_check_1" value="1"/><span></span>
              <div class="auto-expand"><span name="attr_boons_3_label">Advance your Research die to d8</span>
                <textarea spellcheck="false" name="attr_boons_3_label">Advance your Research die to d8</textarea>
              </div>
            </div>
            <div class="boon">
              <input class="squarebox" type="checkbox" name="attr_boons_4_check_1" value="1"/><span></span>
              <div class="auto-expand"><span name="attr_boons_4_label">Add another Research</span>
                <textarea spellcheck="false" name="attr_boons_4_label">Add another Research</textarea>
              </div>
            </div>
        <div class="divider"></div>
            <div class="boon">
              <input class="squarebox" type="checkbox" name="attr_boons_5_check_1" value="1"/><span></span>
              <div class="auto-expand"><span name="attr_boons_5_label">When you support or bolster,  the die you give counts as one size larger.</span>
                <textarea spellcheck="false" name="attr_boons_5_label">When you support or bolster,  the die you give counts as one size larger.</textarea>
              </div>
            </div>
            <div class="boon">
              <input class="squarebox" type="checkbox" name="attr_boons_6_check_1" value="1"/><span></span>
              <div class="auto-expand"><span name="attr_boons_6_label">When you mark Pressure for an extra domain, take two extra dice instead of one.</span>
                <textarea spellcheck="false" name="attr_boons_6_label">When you mark Pressure for an extra domain, take two extra dice instead of one.</textarea>
              </div>
            </div>
            <div class="boon">
              <input class="squarebox" type="checkbox" name="attr_boons_7_check_1" value="1"/><span></span>
              <div class="auto-expand"><span name="attr_boons_7_label">When you spend Specialist Training and Gear, roll +2d4 and keep the highest.</span>
                <textarea spellcheck="false" name="attr_boons_7_label">When you spend Specialist Training and Gear, roll +2d4 and keep the highest.</textarea>
              </div>
            </div>
      </div>
    </div>
    <div class="virtues">
      <input class="title" type="text" spellcheck="false" name="attr_virtues_label" value="Virtues"/>
      <div class="virtue">
        <input class="value" type="number" name="attr_acumen" value="0"/>
        <input class="title" type="text" spellcheck="false" name="attr_acumen_label" value="Learning&#47;Discovery"/>
      </div>
      <div class="virtue">
        <input class="value" type="number" name="attr_courage" value="0"/>
        <input class="title" type="text" spellcheck="false" name="attr_courage_label" value="Skill&#47;Finesse"/>
      </div>
      <div class="virtue">
        <input class="value" type="number" name="attr_grace" value="0"/>
        <input class="title" type="text" spellcheck="false" name="attr_grace_label" value="Cooperation&#47;Empathy"/>
      </div>
      <div class="virtue">
        <input class="value" type="number" name="attr_passion" value="0"/>
        <input class="title" type="text" spellcheck="false" name="attr_passion_label" value="Bravery&#47;Perserverance"/>
      </div>
    </div>
    <div class="great-deeds-boons great-deeds-boons2">
    <div class="great-deeds">
      <input class="title" type="text" spellcheck="false" name="attr_published_works_and_memoirs_label" value="Published Works &amp; Memoirs"/>
      <fieldset class="repeating_deeds">
        <input class="squarebox" type="checkbox" name="attr_deed_check" value="1"/><span></span>
        <div class="auto-expand deed-name"><span name="attr_deed_name"></span>
          <textarea spellcheck="false" name="attr_deed_name" data-i18n-placeholder="published_work"></textarea>
        </div>
      </fieldset>
    </div>
  </div>
  </div>
  <div class="sheet-type-strife">
    <!--
    .roller
      .harm
        each harm in ["red_alert", "gruelling", "amber_alert", "challenging"]
          .harmbox
            +text-input(`${harm}_label`)(value=locals.translation[harm]).title
            +checkbox(harm).squarebox
      .divine-wrath
        +text-input("divine_wrath_label")(value=locals.translation["divine_wrath"]).title
        .checks
          each die in ["d8", "d10", "d12"]
            label
              +checkbox("divine_wrath")(value=die).trianglebox
              span=die
      .strife-level
        +text-input("plus_strife_level_label")(value=locals.translation["plus_strife_level"]).title
        .checks
          each level in ["0", "4", "5", "6"]
            label
              input(name="attr_strife_level", type="radio", value=level, checked=(level=="5"))
              span=`+${level}`
      button(
        class="strife-button"
        name="roll_strife",
        type="roll",
        data-i18n="roll_strife"
        value="&{template:agon-strife} @{strife_formula} {{type=@{domain_query}}}"
      )
      .dice
        fieldset.repeating_strifedie
          +text-input("strifedie_name")(data-i18n-placeholder="die_placeholder")
          +die-select("strifedie_size", ["d6", "d8", "d10", "d12"], "d8")
    
    -->
    <div class="destinies">
      <input class="title" type="text" spellcheck="false" name="attr_expedition_destinies_label" value="Expedition Consequences"/>
      <fieldset class="repeating_destiny">
        <input class="name" type="text" spellcheck="false" name="attr_destiny_name" data-i18n-placeholder="name"/>
        <div class="auto-expand notes"><span name="attr_destiny_notes"></span>
          <textarea spellcheck="false" name="attr_destiny_notes"></textarea>
        </div>
      </fieldset>
    </div>
    <div class="rivals">
      <input class="title rivaltitle" type="text" spellcheck="false" name="attr_rivals_label" value="Rivals"/>
    <fieldset class="repeating_characters">
      <input type="hidden" name="attr_strife_formula" value="{{roll=[[{d8[Name] + d8[Research]}k1 + @{strife_level}[Strife Level]]]}} {{harm=}}"/>
      <!--+text-input("published_works_and_memoirs_label")(value=locals.translation["published_works_and_memoirs"]).title-->
      <div class="roller">
        <div class="dice">
          <div class="strife-dice">
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_1"/>
            <div class="strifedie default">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_1" value="1" checked="checked"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_1" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_1" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_1" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_1" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_1" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_1" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_1" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_1" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_1" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_1">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_2"/>
            <div class="strifedie default">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_2" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_2" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_2" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_2" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_2" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_2" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_2" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_2" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_2" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_2" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_2">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_3"/>
            <div class="strifedie default">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_3" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_3" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_3" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_3" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_3" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_3" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_3" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_3" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_3" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_3" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_3">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_4"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_4" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_4" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_4" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_4" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_4" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_4" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_4" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_4" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_4" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_4" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_4">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_5"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_5" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_5" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_5" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_5" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_5" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_5" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_5" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_5" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_5" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_5" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_5">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_6"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_6" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_6" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_6" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_6" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_6" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_6" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_6" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_6" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_6" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_6" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_6">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_7"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_7" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_7" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_7" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_7" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_7" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_7" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_7" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_7" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_7" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_7" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_7">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_8"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_8" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_8" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_8" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_8" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_8" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_8" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_8" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_8" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_8" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_8" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_8">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_9"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_9" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_9" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_9" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_9" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_9" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_9" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_9" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_9" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_9" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_9" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_9">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_10"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_10" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_10" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_10" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_10" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_10" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_10" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_10" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_10" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_10" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_10" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_10">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_11"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_11" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_11" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_11" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_11" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_11" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_11" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_11" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_11" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_11" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_11" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_11">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_12"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_12" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_12" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_12" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_12" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_12" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_12" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_12" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_12" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_12" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_12" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_12">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
          </div>
        </div>
        <div class="roll">
          <button class="strife-button" name="roll_strife" type="roll" data-i18n="roll_strife" value="&amp;{template:agon-strife} @{strife_formula} {{type=@{domain_query}}}"></button>
        </div>
      </div>
      <div class="cnotes">
        <!--+text-input("published_works_and_memoirs_label")(value=locals.translation["published_works_and_memoirs"]).title-->
        <div class="auto-expand notes"><span name="attr_style_notes"></span>
          <textarea spellcheck="false" name="attr_style_notes" data-i18n-placeholder="notes"></textarea>
        </div>
      </div>
    </fieldset></div>
  </div>
  <div class="sheet-type-expedition">
    <div class="stats">
      <div class="expedition-name">
        <input type="text" spellcheck="false" name="attr_character_name" data-i18n-placeholder="expedition_name"/>
      </div>
      <div class="divine-wrath">
        <input class="title" type="text" spellcheck="false" name="attr_divine_wrath_label" value="Divine Wrath"/>
        <div class="checks">
          <label>
            <input class="trianglebox" type="checkbox" name="attr_divine_wrath" value="d8"/><span></span><span>d8</span>
          </label>
          <label>
            <input class="trianglebox" type="checkbox" name="attr_divine_wrath" value="d10"/><span></span><span>d10</span>
          </label>
          <label>
            <input class="trianglebox" type="checkbox" name="attr_divine_wrath" value="d12"/><span></span><span>d12</span>
          </label>
        </div>
      </div>
      <div class="strife-level">
        <input class="title" type="text" spellcheck="false" name="attr_plus_strife_level_label" value="Strife Level"/>
        <div class="checks">
          <label>
            <input name="attr_strife_level" type="radio" value="0"/><span>+0</span>
          </label>
          <label>
            <input name="attr_strife_level" type="radio" value="4"/><span>+4</span>
          </label>
          <label>
            <input name="attr_strife_level" type="radio" value="5" checked="checked"/><span>+5</span>
          </label>
          <label>
            <input name="attr_strife_level" type="radio" value="6"/><span>+6</span>
          </label>
        </div>
      </div>
    </div>
    <fieldset class="repeating_characters">
      <input type="hidden" name="attr_strife_formula" value="{{roll=[[{d8[Name] + d8[Research]}k1 + @{strife_level}[Strife Level]]]}} {{harm=}}"/>
      <!--+text-input("published_works_and_memoirs_label")(value=locals.translation["published_works_and_memoirs"]).title-->
      <div class="roller">
        <div class="dice">
          <div class="strife-dice">
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_1"/>
            <div class="strifedie default">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_1" value="1" checked="checked"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_1" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_1" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_1" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_1" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_1" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_1" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_1" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_1" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_1" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_1">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_2"/>
            <div class="strifedie default">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_2" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_2" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_2" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_2" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_2" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_2" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_2" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_2" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_2" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_2" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_2">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_3"/>
            <div class="strifedie default">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_3" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_3" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_3" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_3" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_3" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_3" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_3" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_3" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_3" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_3" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_3">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_4"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_4" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_4" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_4" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_4" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_4" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_4" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_4" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_4" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_4" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_4" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_4">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_5"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_5" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_5" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_5" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_5" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_5" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_5" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_5" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_5" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_5" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_5" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_5">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_6"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_6" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_6" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_6" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_6" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_6" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_6" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_6" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_6" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_6" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_6" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_6">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_7"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_7" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_7" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_7" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_7" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_7" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_7" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_7" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_7" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_7" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_7" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_7">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_8"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_8" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_8" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_8" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_8" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_8" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_8" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_8" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_8" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_8" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_8" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_8">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_9"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_9" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_9" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_9" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_9" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_9" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_9" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_9" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_9" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_9" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_9" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_9">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_10"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_10" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_10" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_10" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_10" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_10" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_10" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_10" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_10" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_10" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_10" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_10">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_11"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_11" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_11" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_11" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_11" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_11" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_11" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_11" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_11" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_11" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_11" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_11">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
            <input class="strifedie-name" type="hidden" name="attr_strifedie_name_12"/>
            <div class="strifedie">
                  <div class="enabled">
                    <input class="squarebox" type="checkbox" name="attr_strifedie_enabled_12" value="1"/><span></span>
                  </div>
                  <input type="text" spellcheck="false" name="attr_strifedie_name_12" data-i18n-placeholder="die_placeholder"/>
                  <div class="harm">
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_red_alert_label_12" value="Red Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_red_alert_12" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_gruelling_label_12" value="Gruelling"/>
                      <input class="squarebox" type="checkbox" name="attr_gruelling_12" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_amber_alert_label_12" value="Amber Alert"/>
                      <input class="squarebox" type="checkbox" name="attr_amber_alert_12" value="1"/><span></span>
                    </div>
                    <div class="harmbox">
                      <input class="title" type="text" spellcheck="false" name="attr_challenging_label_12" value="Challenging"/>
                      <input class="squarebox" type="checkbox" name="attr_challenging_12" value="1"/><span></span>
                    </div>
                  </div>
                  <select name="attr_strifedie_size_12">
                    <option value="d6">d6</option>
                    <option value="d8" selected="selected">d8</option>
                    <option value="d10">d10</option>
                    <option value="d12">d12</option>
                    <option value="2d6">2d6</option>
                    <option value="2d8">2d8</option>
                    <option value="2d10">2d10</option>
                    <option value="2d12">2d12</option>
                  </select>
            </div>
          </div>
        </div>
        <div class="roll">
          <button class="strife-button" name="roll_strife" type="roll" data-i18n="roll_strife" value="&amp;{template:agon-strife} @{strife_formula} {{type=@{domain_query}}}"></button>
        </div>
      </div>
      <div class="cnotes">
        <!--+text-input("published_works_and_memoirs_label")(value=locals.translation["published_works_and_memoirs"]).title-->
        <div class="auto-expand notes"><span name="attr_style_notes"></span>
          <textarea spellcheck="false" name="attr_style_notes" data-i18n-placeholder="notes"></textarea>
        </div>
      </div>
    </fieldset>
  </div>
  <input accept="Category" name="attr_drop_category" type="hidden"/>
  <input accept="Name" name="attr_drop_name" type="hidden"/>
  <input accept="data" name="attr_drop_data" type="hidden"/>
  <input accept="Content" name="attr_drop_content" type="hidden"/>
  <input name="attr_token_src" type="hidden"/>
  <input name="attr_token_size" type="hidden" value="1"/>
</div>
<rolltemplate class="sheet-rolltemplate-agon-hero">{{#rollGreater() obstacle roll}}
  <div class="suffers"></div>{{/rollGreater() obstacle roll}} {{#^rollGreater() obstacle roll}}
  <div class="prevails"></div>{{/^rollGreater() obstacle roll}}
  <div class="holder">
    <div class="type type-{{type}}"></div>
    <div class="target">{{obstacle}}</div>
    <div class="result">{{roll}}</div>
    <div class="name">{{name}}</div>{{#rollGreater() obstacle roll}}
    <div class="description" data-i18n="roll_suffers"></div>{{/rollGreater() obstacle roll}} {{#^rollGreater() obstacle roll}}
    <div class="description" data-i18n="roll_prevails"></div>{{/^rollGreater() obstacle roll}}
  </div>
</rolltemplate>
<rolltemplate class="sheet-rolltemplate-agon-strife">
  <div class="holder">
    <div class="type type-{{type}}"></div>
    <div class="harm">{{harm}}</div>
    <div class="roll">{{roll}}</div>
  </div>
</rolltemplate>
<script type="text/worker">(function () {
/* global on, setAttrs, getAttrs, getSectionIDs, getTranslationByKey,
   generateRowID, removeRepeatingRow, _ */
"use strict";
function getTranslation(key) {
  return getTranslationByKey(key) || `TRANSLATION_KEY_UNDEFINED: ${key}`;
}
function query(question, options) {
  return `?{${getTranslation(question)}|${options.join("|")}}`;
}
function fillRepeatingSectionFromData(sectionName, dataList, setter) {
  const createdIDs = [];
  for (const entry of dataList) {
    let rowID;
    while (!rowID) {
      const newID = generateRowID();
      if (!createdIDs.includes(newID)) {
        rowID = newID;
        createdIDs.push(rowID);
      }
    }
    const row = setter.addRepeatingRow(sectionName, rowID);
    for (const [key, value] of Object.entries(entry)) {
      row[key] = value;
    }
  }
}
function fillEmptyRows(sectionName, n, setter) {
  const data = [...Array(n).keys()].map(() => ({ autogen: "1" }));
  fillRepeatingSectionFromData(sectionName, data, setter);
}
const attributeHandler = {
  get: function (target, name) {
    return target.getAttr(name);
  },
  set: function (target, name, value) {
    target.setAttr(name, value);
    return true;
  },
};
class RepeatingRow {
  constructor(setter, sectionName, id) {
    this._setter = setter;
    if (id) this._prefix = `repeating_${sectionName}_${id}`;
    else this._prefix = `repeating_${sectionName}`;
    this._id = id;
  }
  fullName(attrName) {
    return `${this._prefix}_${attrName}`;
  }
  setAttr(name, value) {
    return this._setter.setAttr(this.fullName(name), value);
  }
  getAttr(name) {
    if (name == "id") return this._id;
    return this._setter.getAttr(this.fullName(name));
  }
  proxy() {
    return new Proxy(this, attributeHandler);
  }
}
class AttributeSetter {
  constructor(attrs, sectionToIds = {}) {
    this._sourceAttrs = attrs;
    this._targetAttrs = {};
    
    this._repeating = new Proxy({}, {
      get: function (target, name) {
        if (!target[name]) target[name] = [];
        return target[name];
      },
    });
    for (const [sectionName, sectionIds] of Object.entries(sectionToIds)) {
      this._repeating[sectionName] = sectionIds.map((id) =>
        new RepeatingRow(this, sectionName, id).proxy()
      );
    }
  }
  setAttr(name, value) {
    if (name == "repeating") {
      throw new Error("Tried to modify the 'repeating' attribute.");
    }
    this._sourceAttrs[name] = value;
    this._targetAttrs[name] = value;
  }
  setAttrs(values) {
    for (const [key, value] of Object.entries(values)) {
      this.setAttr(key, value);
    }
  }
  getAttr(name) {
    if (name == "repeating") return this._repeating;
    return this._sourceAttrs[name];
  }
  proxy() {
    return new Proxy(this, attributeHandler);
  }
  addRepeatingRow(sectionName, id) {
    id = id || generateRowID();
    const row = new RepeatingRow(this, sectionName, id).proxy();
    this._repeating[sectionName].push(row);
    return row;
  }
  finalize(callback) {
    getAttrs(Object.keys(this._targetAttrs), (values) => {
      const finalAttrs = {};
      for (const [key, value] of Object.entries(this._targetAttrs)) {
        if (String(value) !== values[key]) finalAttrs[key] = String(value);
      }
      setAttrs(finalAttrs, { silent: true }, callback);
    });
  }
}
function getSetAttrs(attrs, callback, { repeating = {}, finalCallback } = {}) {
  attrs = [...attrs];
  const sectionToIds = {};
  const finished = _.after(Object.keys(repeating).length + 1, () => {
    getAttrs(attrs, (values) => {
      const setter = new AttributeSetter(values, sectionToIds);
      callback(setter.proxy(), setter);
      setter.finalize(finalCallback);
    });
  });
  for (const [sectionName, sectionAttrs] of Object.entries(repeating)) {
    getSectionIDs(`repeating_${sectionName}`, (idArray) => {
      sectionToIds[sectionName] = idArray;
      for (const id of idArray) {
        for (const attr of sectionAttrs) {
          attrs.push(`repeating_${sectionName}_${id}_${attr}`);
        }
      }
      finished();
    });
  }
  finished();
}
// We define our own wrappers for Roll20 event handlers to provide
// a bit more useful feedback and reduce boilerplate.
function register(attrs, callback, handlerName = "handler") {
  console.log(`Registering ${handlerName} for attributes: ${attrs.join(", ")}`);
  on(attrs.map((x) => `change:${x}`).join(" "), (event) => {
    console.log(
      `Triggering ${handlerName} for attribute: ${event.sourceAttribute}.`
    );
    callback(event);
  });
}
function registerOpened(callback, handlerName = "handler") {
  console.log(`Registering ${handlerName} for sheet opening.`);
  on("sheet:opened", () => {
    console.log(`Triggering ${handlerName} for sheet opening.`);
    callback();
  });
}
function registerSingle(attr, handler, handlerName = "handler") {
  register([attr], () => getSetAttrs([attr], handler), handlerName);
  registerOpened(() => getSetAttrs([attr], handler), handlerName);
}
function registerButton(buttonName, callback, handlerName = "handler") {
  console.log(`Registering ${handlerName} for button: ${buttonName}.`);
  const throttledFunction = _.throttle(
    (event) => {
      console.log(`Triggering ${handlerName} for button: ${buttonName}.`);
      callback(event);
    },
    50,
    { trailing: false }
  );
  on(`clicked:${buttonName}`, throttledFunction);
}
function registerCompediumDrop(callback, handlerName = "handler") {
  console.log(`Registering ${handlerName} for compedium drop.`);
  on("sheet:compendium-drop", () => {
    console.log(`Triggering ${handlerName} for compedium drop.`);
    callback();
  });
}
/* Constants */
const kSheetVersion = "2";
const kBrace = "&" + "#125" + ";";
const kDoubleBrace = kBrace + kBrace;
const kExtraResearchField = "boons_4_check_1";
const kPressureGivesTwoDiceField = "boons_6_check_1";
const kSpendDivineFavorBoon = "boons_7_check_1";
const kHarms = ["red_alert", "gruelling", "amber_alert", "challenging"];
const kSrifeDiceLength = 12;
const kRepeatingCharacters = "repeating_characters";
const kDropCategory = "drop_category";
const kDomains = [
  "arts_oration",
  "blood_valor",
  "craft_reason",
  "resolve_spirit",
];
const kInitialStrifeDice = [
  {
    strifedie_name: getTranslation("name"),
  },
  {
    strifedie_name: getTranslation("research"),
  },
];
const kLabelAttributes = [
  "glory",
  "research",
  "research_die",
  "name",
  "lineage_pronouns",
  "lineage_pronouns",
  "honored_god",
  "honored_god",
  "domains",
  "arts_oration",
  "blood_valor",
  "craft_reason",
  "resolve_spirit",
  "specialist_training",
  "authority",
  "zeus",
  "beauty",
  "aphrodite",
  "conviction",
  "demeter",
  "cunning",
  "hera",
  "daring",
  "hermes",
  "ferocity",
  "ares",
  "fortitude",
  "poseidon",
  "ingenuity",
  "hephaistos",
  "insight",
  "hekate",
  "knowledge",
  "apollo",
  "precision",
  "artemis",
  "wisdom",
  "athena",
  "style_notes",
  "recite_your_deeds",
  "recite_top",
  "recite_top",
  "arts_oration",
  "recite_arts_oration",
  "recite_arts_oration",
  "blood_valor",
  "recite_blood_valor",
  "recite_blood_valor",
  "craft_reason",
  "recite_craft_reason",
  "recite_craft_reason",
  "resolve_spirit",
  "recite_resolve_spirit",
  "recite_resolve_spirit",
  "recite_bottom",
  "recite_bottom",
  "pressure",
  "alert",
  "barotrauma",
  "bonds",
  "bond_use_top",
  "bond_use_top",
  "bond_use_1",
  "bond_use_1",
  "bond_use_2",
  "bond_use_2",
  "bond_use_3",
  "bond_use_3",
  "published_works_and_memoirs",
  "boons",
  "boons_1",
  "boons_1",
  "boons_2",
  "boons_2",
  "boons_3",
  "boons_3",
  "boons_4",
  "boons_4",
  "boons_5",
  "boons_5",
  "boons_6",
  "boons_6",
  "boons_7",
  "boons_7",
  "virtues",
  "learning_discovery",
  "skill_finesse",
  "cooperation_empathy",
  "bravery_perserverance",
  "the_vault_of_heaven",
  "divine_wrath",
  "plus_strife_level",
  "expedition_destinies",
  "red_alert",
  "gruelling",
  "amber_alert",
  "challenging",
];
function performFirstTimeSetup(attrs, setter) {
  fillEmptyRows("bonds", 8, setter);
  fillEmptyRows("deeds", 4, setter);
  fillEmptyRows("destiny", 6, setter);
  fillRepeatingSectionFromData("strifedie", kInitialStrifeDice, setter);
  for (const name of kLabelAttributes) {
    attrs[`${name}_label`] = getTranslation(name);
  }
}
function setupResearchQuery(attrs) {
  const kNameDice = "roll=[[{@{name_die}[@{name_label}]";
  const research_options = [
    `${getTranslation("none")},${kNameDice}`,
    `@{research},research=@{research}${kDoubleBrace} {{${kNameDice} + @{research_die}[@{research_label}]`,
  ];
  if (attrs[kExtraResearchField] === "1") {
    const and = getTranslation("and");
    research_options.push(
      ...[
        `@{research_2},research=@{research_2}${kDoubleBrace} {{${kNameDice} + @{research_die}[@{research_label}]`,
        `@{research} ${and} @{research_2},research=@{research} ${and} @{research_2}${kDoubleBrace} {{${kNameDice} + 2@{research_die}[@{research_label}]`,
      ]
    );
  }
  attrs["research_and_name_query"] = query("research", research_options);
}
function setupDomainQueries(attrs) {
  const multiplier = attrs[kPressureGivesTwoDiceField] === "1" ? "2" : "";
  for (const domain of kDomains) {
    const query_entries = [
      `${getTranslation("no")}, `,
      ...kDomains
        .filter((other) => other != domain)
        .map(
          (other) =>
            `${getTranslation(
              other
            )}, + ${multiplier}@{${other}_die}[${getTranslation(other)}]`
        ),
    ];
    attrs[`${domain}_extra_domain_query`] = query(
      "add_domain_spend_pathos",
      query_entries
    );
    attrs[`${domain}_translated`] = getTranslation(domain);
  }
  attrs["domain_query"] = query("domain", [
    ...kDomains.map((d) => `@{${d}_label},${d}`),
    `${getTranslation("any_domain")},any`,
  ]);
}
function setupDivineFavorQuery(attrs) {
  const base_query = query("spend_divine_favor", [0]);
  if (attrs[kSpendDivineFavorBoon] === "1") {
    attrs["specialist_training_query"] = `[[${base_query} + 2*{${base_query},1}kl1]]`;
  } else {
    attrs["specialist_training_query"] = base_query;
  }
}
function getStrifeDiceAttributes(pre = "") {
  let attributes = [];
  for(let i=1; i<= kSrifeDiceLength; i++) {
    attributes.push(`${pre}strifedie_enabled_${i}`);
    attributes.push(`${pre}strifedie_name_${i}`);
    attributes.push(`${pre}strifedie_size_${i}`);
    kHarms.forEach(harm => {
      attributes.push(`${pre}${harm}_${i}`);
    });
  }
  return attributes;
}
function handleStrifeRoll() {
  calcStrifeRoll();
}
function calcStrifeRoll() {
  getSetAttrs(["divine_wrath"], (attrs) => {
    attrs.repeating.characters.forEach(character => {
      const dieSources = [];
      const harms = [];
      for(let i=1; i<= kSrifeDiceLength; i++) {
        if(character[`strifedie_enabled_${i}`] && character[`strifedie_enabled_${i}`] == 1 && character[`strifedie_name_${i}`]) {
          kHarms.forEach(harm => {
            if(character[`${harm}_${i}`] && character[`${harm}_${i}`] == 1) {
              harms.push(harm);
            }
          });
          dieSources.push([character[`strifedie_name_${i}`], character[`strifedie_size_${i}`]]);
        }
      }
      if (attrs["divine_wrath"] !== "0") dieSources.push(["@{divine_wrath_label}", "@{divine_wrath}"]);
      const dieFormula = dieSources
        .map(([name, die]) => `${die}[${name}]`)
        .join(" + ");
      const harmType = Array.from(new Set(harms)).sort();
      const formula = `{{roll=[[{${dieFormula}}k1 + @{strife_level}[${getTranslation("strife_level")}]]]}} {{harm=${harmType}}}`;
      character[`strife_formula`] = formula;
    });
  },{repeating: {characters: ["strife_formula", ...getStrifeDiceAttributes()]}});
}
function safeGuardDiceSize(roll) {
  return roll.toLowerCase().replace(/\b[^2]?d/g, 'd');
}
function joinNameAndTags(characters) {
  let joined = [];
  characters.forEach(character => {
    let joinedChar = {};
    if(character.tags) {
      joinedChar.rolls = JSON.parse(character.tags);
      joinedChar.rolls.forEach(roll => {
        if(roll.dice) roll.dice = safeGuardDiceSize(roll.dice);
        if(roll.harm) roll.harm = Object.keys(roll.harm);
      });
    }
    let firstTag = {};
    firstTag.name = character.name;
    firstTag.dice = safeGuardDiceSize(character.dice);
    if(character.harm) firstTag.harm = Object.keys(JSON.parse(character.harm));
    joinedChar.rolls = [firstTag, ...joinedChar.rolls];
    if(character.notes) joinedChar.notes = character.notes;
    joined.push(joinedChar);
  });
  return joined;
}
function handleIsland() {
  console.log("Handling Island Drop.");
  getSetAttrs(["drop_name", "drop_data", "drop_content", "character_id", "token_src", "token_size", "sheet_type"], (attrs, setter) => {
    let pagedata = {};
    try {
      pagedata = JSON.parse(attrs.drop_data);
    } catch(e) {
      console.log("Invalid drop-Data attribute");
      pagedata = attrs.drop_data;
    }
    let category = pagedata["Category"];
    let characters = [];
    try {
      characters = joinNameAndTags(JSON.parse(pagedata["data-characters"]));
    } catch(e) {
      console.log("Invalid data-Character page attribute");
      characters = [];
    }
    attrs.sheet_type = "expedition";
    if(pagedata["Token"]) attrs.token_src = pagedata["Token"];
    if(pagedata["Token Size"]) attrs.token_size = pagedata["Token Size"];
    let charactersData = [];
    characters.forEach(character => {
      let newCharacter = {};
      let harmType = [];
      for(let i=0; i<character.rolls.length; i++) {
        newCharacter[`strifedie_name_${i+1}`] = character.rolls[i].name;
        newCharacter[`strifedie_size_${i+1}`] = character.rolls[i].dice;
        if(character.rolls[i].harm && Array.isArray(character.rolls[i].harm)) {
          character.rolls[i].harm.forEach(type => {
            const lType = type.toLowerCase();
            if(kHarms.indexOf(lType) > -1) {
              newCharacter[`${lType}_${i+1}`] = 1
              if(i == 0) harmType.push(type);
            }
          });
        }
      }
      if(character.notes) newCharacter["style_notes"] = character.notes;
      const formula = `{{roll=[[{${character.rolls[0].dice}[${character.rolls[0].name}]}k1 + 5[${getTranslation("strife_level")}]]]}} {{harm=${harmType}}}`;
      newCharacter.strife_formula = formula;
      charactersData.push(newCharacter);
    });
    fillRepeatingSectionFromData("characters", charactersData, setter);
  });
}
function handleCompediumDrop() {
  getSetAttrs(["token_size", "token_src"], (attrs) => {
    if(attrs.token_size) {
      let tokenUpdate = {};
      if(attrs.token_src) tokenUpdate.imgsrc = attrs['token_src'];
      tokenUpdate.width = 70 * parseInt(attrs.token_size);
      tokenUpdate.height = 70 * parseInt(attrs.token_size);
      setDefaultToken(tokenUpdate);
    }
  });
}
registerSingle(
  kPressureGivesTwoDiceField,
  setupDomainQueries,
  "Handle giving two dice for extra domain"
);
registerSingle(
  kExtraResearchField,
  setupResearchQuery,
  "Handle adding or removing an extra research"
);
registerSingle(
  kSpendDivineFavorBoon,
  setupDivineFavorQuery,
  "Handle boon for getting +2d4 on spending specialist training and gear"
);
register(
  [kRepeatingCharacters],
  handleStrifeRoll,
  "Handle generating strife roll query"
);
register(
  [kDropCategory],
  handleIsland,
  "Handle generating strife roll query"
);
registerCompediumDrop(
  handleCompediumDrop
);
  
registerOpened(function () {
  getSetAttrs(["version"], function (attrs, setter) {
    if (!attrs["version"]) performFirstTimeSetup(attrs, setter);
    if (attrs["version"] == "1.0") {
      attrs["sheet_type"] = "character";
    }
    setter.setAttrs({
      advantage_bond_support_translated: getTranslation(
        "advantage_bond_support"
      ),
      bonusdice_query: query("bonusdice_query", [0]),
      target_query: query("target_number", [0]),
      version: kSheetVersion,
    });
  });
}, "Handle setting default attributes when opening the sheet");
registerButton("choose_character", () =>
  getSetAttrs([], (attrs) => {
    attrs["sheet_type"] = "character";
  })
);
registerButton("choose_strife", () =>
  getSetAttrs([], (attrs) => {
    attrs["sheet_type"] = "strife";
  })
);
registerButton("choose_expedition", () =>
  getSetAttrs([], (attrs) => {
    attrs["sheet_type"] = "expedition";
  })
);}
)();
//# sourceURL=agon.js
</script>

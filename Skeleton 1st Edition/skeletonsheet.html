<!--Tabs for switching between parts of the sheet-->
<div class = "sheet-switchtabs sheet-container-box">
    <button type="action" name="act_character">Character</button>
    <button type="action" name="act_journal">Journal</button>
    <button type="action" name="act_configuration">Configuration</button>
</div>

<!--Button for toggling tabs-->
<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab"  value="character" />    

<!--Character sheet-->
<div class="sheet-thecharacter sheet-container-box">
    <!--Grid for weapons-->
    <div class="sheet-weapons sheet-block">
        <div class:"sheet-weapon-header">
            <label>Weapons</label>
        </div>
        
        <!--Title for table-->
        <div class="sheet-weapon-content">
            <span>Name</span>
            <span>Damage</span>
            <span>Ability</span>
            <div style="visibility: hidden;">Roll</div>
            <span>Range</span>
            <span>Ammo</span>
            <span>Size</span>
            <span>Notes</span>
        </div>
        
        <div class="sheet-weapon-content">
            <input class="sheet-input-center-aligned" type="text" name="attr_unarmed_weapon" title="@{unarmed}" value="Unarmed" disabled="true" style="width: 200px; height: 28px;"/>
            <input class="sheet-input-center-aligned" type="text" name="attr_unarmed_damage" title="@{unarmed_damage}" value="1d6" placeholder="1d6" style="width: 50px; height: 28px;"/>
            <!--There is no way (yet) to allow the options to be variable, so the custom skills are put as generic names, this could be changed to a "select-like" thing using radio inputs and labels at some point-->
            <select name="attr_unarmed_damage_ability" title="@{unarmed_damage_ability}" class="sheet-weapon-damagedie" style="width: 100px;" value="None">
                <option value="1d0">None</option>
    		    <option value="1d@{agility}!">Agility</option>
    		    <option value="1d@{charisma}!">Charisma</option>
    		    <option value="1d@{cunning}!">Cunning</option>
    		    <option value="1d@{dexterity}!">Dexterity</option>
    		    <option value="1d@{constitution}!">Constitution</option>
    		    <option value="1d@{willpower}!">Will</option>
    		    <option value="1d@{strength}!">Strength</option>
			    <option value="1d@{luck}!">Luck</option>
    		    <option value="1d@{acrobat}!">Acrobat</option>
    		    <option value="1d@{climb}!">Climb</option>
    		    <option value="1d@{coerce}!">Coerce</option>
    		    <option value="1d@{engineer}!">Engineer</option>
    		    <option value="1d@{insight}!">Insight</option>
    		    <option value="1d@{marksman}!">Marksman</option>
    		    <option value="1d@{martial_arts}!">Martial Arts</option>
    		    <option value="1d@{performance}!">Performance</option>
    		    <option value="1d@{pilot}!">Pilot</option>
    		    <option value="1d@{ranger}!">Ranger</option>
    		    <option value="1d@{sleight_of_hand}!">Sleight of Hand</option>
    		    <option value="1d@{stealth}!">Stealth</option>
    		    <option value="1d@{swim}!">Swim</option>
    		    <option value="1d@{treat_injury}!">Treat Injury</option>
    		    <option value="1d@{throwing}!">Throwing</option>
    		    <option value="1d@{custom_skill_1}!">Custom Skill 1</option>
    		    <option value="1d@{custom_skill_2}!">Custom Skill 2</option>
    		    <option value="1d@{custom_skill_3}!">Custom Skill 3</option>
    		    <option value="1d@{custom_skill_4}!">Custom Skill 4</option>
    		    <option value="1d@{custom_skill_5}!">Custom Skill 5</option>
            </select>
            <button type="roll" class="txt-btn" value="@{whisper_toggle}&{template:skeleton} {{color=black}} {{title=Unarmed Damage}} {{subtitle=@{character_name}}} {{Result=[[@{unarmed_damage}! + @{unarmed_damage_ability} + @{advantagecheck} + @{extra_advantagecheck} - @{disadvantagecheck} - @{extra_disadvantagecheck}]]}}" style="width: 42px; height: 18px;" name="roll_UnarmedDamage">Damage</button>
            <input class="sheet-input-center-aligned" type="text" value="Melee" name="attr_unarmed_range" disabled="true" style="width: 85px; height: 28px;"/>
            <input class="sheet-input-center-aligned" type="text" value="N/A" name="attr_unarmed_ammo" disabled="true" style="width: 45px; height: 28px;"/>
            <input class="sheet-input-center-aligned" type="text" value="N/A" name="attr_unarmed_size" disabled="true" style="width: 46px; height: 28px;"/>
            <input class="sheet-input-center-aligned" type="text" value="" name="attr_unarmed_notes" style="width: 210px; height: 28px;"/>
        </div>
        
        <!--Repeating fieldset for adding weapons to sheet, ensure this and the above titles match number of elements-->
            <fieldset class="repeating_weapons">
                <div class="sheet-weapon-content">
                    <input class="sheet-input-center-aligned" type="text" value="" name="attr_weapon_name" title="@{weapon_name}" placeholder="Weapon Name" style="width: 200px; height: 28px;"/>
                    <input class="sheet-input-center-aligned" type="text" value="" name="attr_weapon_damage" title="@{weapon_damage}" placeholder="1d4" style="width: 50px; height: 28px;"/>
                    <!--Same as above, there is no way (yet) to allow the options to be variable, so the custom skills are put as generic names, this could be changed to a "select-like" thing using radio inputs and labels at some point-->
                    <select name="attr_weapon_damage_ability" title="@{weapon_damage_ability}" class="sheet-weapon-damagedie" style="width: 100px;" value="None">
                        <option value="1d0">None</option>
    				    <option value="1d@{agility}!">Agility</option>
    				    <option value="1d@{charisma}!">Charisma</option>
    				    <option value="1d@{cunning}!">Cunning</option>
    				    <option value="1d@{dexterity}!">Dexterity</option>
    				    <option value="1d@{constitution}!">Constitution</option>
    				    <option value="1d@{willpower}!">Will</option>
    				    <option value="1d@{strength}!">Strength</option>
    				    <option value="1d@{luck}!">Luck</option>
    				    <option value="1d@{acrobat}!">Acrobat</option>
    				    <option value="1d@{climb}!">Climb</option>
    				    <option value="1d@{coerce}!">Coerce</option>
    				    <option value="1d@{engineer}!">Engineer</option>
    				    <option value="1d@{insight}!">Insight</option>
    				    <option value="1d@{marksman}!">Marksman</option>
    				    <option value="1d@{martial_arts}!">Martial Arts</option>
    				    <option value="1d@{performance}!">Performance</option>
    				    <option value="1d@{pilot}!">Pilot</option>
    				    <option value="1d@{ranger}!">Ranger</option>
    				    <option value="1d@{sleight_of_hand}!">Sleight of Hand</option>
    				    <option value="1d@{stealth}!">Stealth</option>
    				    <option value="1d@{swim}!">Swim</option>
    				    <option value="1d@{treat_injury}!">Treat Injury</option>
    				    <option value="1d@{throwing}!">Throwing</option>
    				    <option value="1d@{custom_skill_1}!">Custom Skill 1</option>
    				    <option value="1d@{custom_skill_2}!">Custom Skill 2</option>
    				    <option value="1d@{custom_skill_3}!">Custom Skill 3</option>
    				    <option value="1d@{custom_skill_4}!">Custom Skill 4</option>
    				    <option value="1d@{custom_skill_5}!">Custom Skill 5</option>
    			    </select>
    			    <button type="roll" class="txt-btn" value="@{whisper_toggle}&{template:skeleton} {{color=black}} {{title=@{weapon_name} Damage}} {{subtitle= @{character_name}}} {{Result=[[@{weapon_damage}! + @{weapon_damage_ability} + @{advantagecheck} + @{extra_advantagecheck} - @{disadvantagecheck} - @{extra_disadvantagecheck}]]}}" style="width: 42px; height: 18px;" name="roll_DefaultDamage">Damage</button>
                    <input class="sheet-input-center-aligned" type="text" value="" name="attr_weapon_range" placeholder="15/30/45" style="width: 85px; height: 28px;"/>
                    <input class="sheet-input-center-aligned" type="text" value="" name="attr_weapon_ammo" style="width: 45px; height: 28px;"/>
                    <select name="attr_weapon_size" title="@{weapon_size}" class="sheet-weaponsize" style="width: 46px;" value="1">
                        <option value="0">S</option>
    				    <option value="1">M</option>
    				    <option value="2">L</option>
    			    </select>
                    <input class="sheet-input-center-aligned" type="text" value="" name="attr_weapon_notes" style="width: 210px; height: 28px;"/>
                </div>
            </fieldset>
    </div>
    
    <!--Picture used next to character information-->
    <div class="sheet-skeleton-face">
        <img style="justify-content: center; " src="https://raw.githubusercontent.com/DrgnRanger/skeleton-char-sheet/main/skeleton-1st-edition/skeletonsheetskull.svg" style="max-height: 130px;"/>
    </div>
    
    <div class="sheet-cha-info">
        <div class="sheet-class-info-section sheet-block" style="width: 320px; height: 170px;" >
            <h3>Character</h3>
            <div class="sheet-cha-name">
                <div><span>Name:</span></div>
                
                <!--Can change @{character_name} to ensure name not automatically pulled/changed in roll20-->
                <div><span>
                    <input type="text" name="attr_character_name" title="@{character_name}" style="width: 250px;"/>
                </span></div>
            </div>
        
            <div class="sheet-player-name">
                <div><span>Player:</span></div>
                
                <div><span>
                    <input type="text" name="attr_player_name" title="@{player_name}" style="width: 250px;"/>
                </span></div>
            </div>
            
            <div class="sheet-cha-resilience">
                <div><span>Resilience:</span></div>
                
                <div><span>
                    <input type="text" name="attr_character_resilience" title="@{character_resilience}" style="width: 150px;"/>
                </span></div>
            </div>
        </div>
    </div>
    
    <!--Boons and curses section, quite simple-->
    <div class="sheet-curses-boons sheet-block">
        <div class="sheet-boons sheet-subblock">
            <label>Boons</label>
            <div class="sheet-repeating-boons">
                <fieldset class="repeating_boons">
                    <div class="sheet-substat">
                        <input class="sheet-input-center-aligned" type="text" value="" name="attr_boon_name" title="@{boon_name}" placeholder="Boon Name" style="width: 200px; height: 28px;"/>
                        <span>Resource:</span>
                        <input type="checkbox" class="sheet-toggle-show-resource"/>
                        <span>Desc:</span>
                        <input type="checkbox" class="sheet-toggle-show-desc"/>
                        <div class="sheet-bocu-resource"><span>Current:</span><input type="number" name="attr-boon-current-resource" style="width: 40px;" min = "0" step="1"><span>Total:</span><input type="number" name="attr-boon-total-resource" style="width: 40px;" min = "0" step="1"></div>
                        <div class="sheet-description"><textarea name="attr_boon_description" placeholder="Boon description" style="min-height: 200px; height: 200px; margin-top: 0px; margin-bottom: 0px; width: 390px; max-width: 390px;"></textarea></div>
                    </div>
                </fieldset>
            </div>
        </div>
    
        <div class="sheet-curses sheet-subblock">
            <label>Curses</label>
            <div class="sheet-repeating-curses">
                <fieldset class="repeating_curses">
                    <div class="sheet-substat">
                        <input class="sheet-input-center-aligned" type="text" value="" name="attr_curse_name" title="@{curse_name}" placeholder="Curse Name" style="width: 200px; height: 28px;"/>
                        <span>Resource:</span>
                        <input type="checkbox" class="sheet-toggle-show-resource"/>
                        <span>Desc:</span>
                        <input type="checkbox" class="sheet-toggle-show-desc"/>
                        <div class="sheet-bocu-resource"><span>Current:</span><input type="number" name="attr-curse-current-resource" style="width: 40px;" min = "0" step="1"><span>Total:</span><input type="number" name="attr-curse-total-resource" style="width: 40px;" min = "0" step="1"></div>
                        <div class="sheet-description"><textarea name="attr_curse_description" placeholder="Curse description" style="min-height: 200px; height: 200px; margin-top: 0px; margin-bottom: 0px; width: 390px; max-width: 390px;"></textarea></div>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
    
    <!--All rolling things, uses the hidden checkboxes to put rolls in, which could be altered to not include them in the future (see above repeating sections)-->
    <div class="sheet-all-rolls sheet-block">
        <!--Main rolls that one can do in skeleton, select two attributes/skills to roll-->
        <div class="sheet-atribute-rolls sheet-subblock">
            <label>Skill and Ability Rolls</label>
            <div class="sheet-rolls-row">
                <div class="sheet-rolls-col"><button type="roll" class="txt-btn" name="act_roll_ability" value="@{whisper_toggle}&{template:skeleton} {{color=black}} {{title=Ability Check}} {{subtitle= @{character_name}}} {{Result=[[@{ability_roll_1} + @{ability_roll_2} + @{advantagecheck} + @{extra_advantagecheck} - @{disadvantagecheck} - @{extra_disadvantagecheck} - @{exhaustion_check}]]}}" name="roll_AbilityCheck" style="height: 18px;">Ability Check</button></div>
                <select name="attr_ability_roll_1" title="@{ability_roll_1}" class="sheet-weapon-attackdie" style="width: 100px;" value="None">
                    <option value="1d0">None</option>
    				<option value="@{agilitycheck}">Agility</option>
    				<option value="@{charismacheck}">Charisma</option>
    				<option value="@{cunningcheck}">Cunning</option>
    				<option value="@{dexteritycheck}">Dexterity</option>
    				<option value="@{constitutioncheck}">Constitution</option>
    				<option value="@{willcheck}">Will</option>
    				<option value="@{strengthcheck}">Strength</option>
    				<option value="@{luckcheck}">Luck</option>
    			</select>
    			<select name="attr_ability_roll_2" title="@{ability_roll_2}" class="sheet-weapon-attackdie" style="width: 100px;" value="None">
                    <option value="1d0">None</option>
    				<option value="@{agilitycheck}">Agility</option>
    				<option value="@{charismacheck}">Charisma</option>
    				<option value="@{cunningcheck}">Cunning</option>
    				<option value="@{dexteritycheck}">Dexterity</option>
    				<option value="@{constitutioncheck}">Constitution</option>
    				<option value="@{willcheck}">Will</option>
    				<option value="@{strengthcheck}">Strength</option>
    				<option value="@{luckcheck}">Luck</option>
    		    </select>
            </div> 
                
                <div class="sheet-rolls-row">    
                    <div class="sheet-rolls-col"><button type="roll" class="txt-btn" name="act_roll_skill" value="@{whisper_toggle}&{template:skeleton} {{color=black}} {{title=Skill Check}} {{subtitle=@{character_name}}} {{Result=[[@{skill_roll_1} + @{skill_roll_2} + @{advantagecheck} + @{extra_advantagecheck} - @{disadvantagecheck} - @{extra_disadvantagecheck} - @{exhaustion_check}]]}}" name="roll_SkillCheck" style="height: 18px;">Skill Check</button></div>
                    <select name="attr_skill_roll_1" title="@{skill_roll_1}" class="sheet-weapon-attackdie" style="width: 100px;" value="None">
                    <option value="1d0">None</option>
    				<option value="@{agilitycheck}">Agility</option>
    				<option value="@{charismacheck}">Charisma</option>
    				<option value="@{cunningcheck}">Cunning</option>
    				<option value="@{dexteritycheck}">Dexterity</option>
    				<option value="@{constitutioncheck}">Constitution</option>
    				<option value="@{willcheck}">Will</option>
    				<option value="@{strengthcheck}">Strength</option>
    				<option value="@{luckcheck}">Luck</option>
    				<option value="@{acrobatcheck}">Acrobat</option>
    				<option value="@{climbcheck}">Climb</option>
    				<option value="@{coercecheck}">Coerce</option>
    				<option value="@{engineercheck}">Engineer</option>
    				<option value="@{insightcheck}">Insight</option>
    				<option value="1d@{marksman}!">Marksman</option>
    				<option value="@{martial_artscheck}">Martial Arts</option>
    				<option value="@{performancecheck}">Performance</option>
    				<option value="@{pilotcheck}">Pilot</option>
    				<option value="@{rangercheck}">Ranger</option>
    				<option value="@{sleight_of_handcheck}">Sleight of Hand</option>
    				<option value="@{stealthcheck}">Stealth</option>
    				<option value="@{swimcheck}">Swim</option>
    				<option value="@{treat_injurycheck}">Treat Injury</option>
    				<option value="@{throwingcheck}">Throwing</option>
    				<option value="@{custom_skill_1check}">Custom Skill 1</option>
    				<option value="@{custom_skill_2check}">Custom Skill 2</option>
    				<option value="@{custom_skill_3check}">Custom Skill 3</option>
    				<option value="@{custom_skill_4check}">Custom Skill 4</option>
    				<option value="@{custom_skill_5check}">Custom Skill 5</option>
    			</select>
    		    <select name="attr_skill_roll_2" title="@{skill_roll_2}" class="sheet-weapon-attackdie" style="width: 100px;" value="None">
                    <option value="1d0">None</option>
    				<option value="@{agilitycheck}">Agility</option>
    				<option value="@{charismacheck}">Charisma</option>
    				<option value="@{cunningcheck}">Cunning</option>
    				<option value="@{dexteritycheck}">Dexterity</option>
    				<option value="@{constitutioncheck}">Constitution</option>
    				<option value="@{willcheck}">Will</option>
    				<option value="@{strengthcheck}">Strength</option>
    				<option value="@{luckcheck}">Luck</option>
    				<option value="@{acrobatcheck}">Acrobat</option>
    				<option value="@{climbcheck}">Climb</option>
    				<option value="@{coercecheck}">Coerce</option>
    				<option value="@{engineercheck}">Engineer</option>
    				<option value="@{insightcheck}">Insight</option>
    				<option value="1d@{marksman}!">Marksman</option>
    				<option value="@{martial_artscheck}">Martial Arts</option>
    				<option value="@{performancecheck}">Performance</option>
    				<option value="@{pilotcheck}">Pilot</option>
    				<option value="@{rangercheck}">Ranger</option>
    				<option value="@{sleight_of_handcheck}">Sleight of Hand</option>
    				<option value="@{stealthcheck}">Stealth</option>
    				<option value="@{swimcheck}">Swim</option>
    				<option value="@{treat_injurycheck}">Treat Injury</option>
    				<option value="@{throwingcheck}">Throwing</option>
    				<option value="@{custom_skill_1check}">Custom Skill 1</option>
    				<option value="@{custom_skill_2check}">Custom Skill 2</option>
    				<option value="@{custom_skill_3check}">Custom Skill 3</option>
    				<option value="@{custom_skill_4check}">Custom Skill 4</option>
    				<option value="@{custom_skill_5check}">Custom Skill 5</option>
    	        </select>
            </div>
            
            <div class="sheet-rolls-row">
                <div class="sheet-rolls-col"><button type="roll" class="txt-btn" value="@{whisper_toggle}&{template:skeleton} {{color=black}} {{title=Default Initiative}} {{subtitle= @{character_name}}} {{Initiative=[[1d@{agility}! + 1d@{cunning}! + @{advantagecheck} + @{extra_advantagecheck} - @{disadvantagecheck} - @{extra_disadvantagecheck} - @{exhaustion_check}]]}}" name="roll_DefaultInitiative" style="height: 18px;">Default Initiative</button></div>
            </div>
            
            <div class="sheet-luck-tokens">
                <span>Luck Token(s):</span>
                <input type="number" name="attr_luck_tokens" title="@{luck_token}" style="width: 40px;" min = "0" max = "3" step="1">
            </div>
        </div>
        
        <div class="sheet-biom-rolls">
            <!--These are the usual rolls for soak, and armor value can be customized from the sheet using specific dice and an ability if necessary-->
            <div class="sheet-biometric-rolls sheet-subblock">
                <label>Biometric Rolls</label>
                <div class="sheet-rolls-row">
                    <div class="sheet-rolls-col"><button type="roll" class="txt-btn" value="@{whisper_toggle}&{template:skeleton} {{color=black}} {{title=Default Physical Soak}} {{subtitle=@{character_name}}} {{Soak=[[1d@{constitution}! + 1d@{willpower}! + @{advantagecheck} + @{extra_advantagecheck} - @{disadvantagecheck} - @{extra_disadvantagecheck}]]}}" name="roll_DefaultPhysicalSoak" style="height: 18px;">Default Phys. Soak</button></div>
                </div>
            
                <div class="sheet-rolls-row">
                    <div class="sheet-rolls-col"><button type="roll" class="txt-btn" value="@{whisper_toggle}&{template:skeleton} {{color=black}} {{title=Default Mental Soak}} {{subtitle=@{character_name}}} {{Soak=[[1d@{cunning}! + 1d@{willpower}! + @{advantagecheck} + @{extra_advantagecheck} - @{disadvantagecheck} - @{extra_disadvantagecheck}]]}}" name="roll_DefaultMentalSoak" style="height: 18px;">Default Ment. Soak</button></div>
                </div>
            
                <div class="sheet-rolls-row">
                    <div class="sheet-rolls-col"><button type="roll" class="txt-btn" value="@{whisper_toggle}&{template:skeleton} {{color=black}} {{title=Armor Soak}} {{subtitle=@{character_name}}} {{Soak=[[@{armor}! + @{armor_soak_ability} + @{advantagecheck} + @{extra_advantagecheck} - @{disadvantagecheck} - @{extra_disadvantagecheck}]]}}" name="roll_DefaultMentalSoak" style="height: 18px;">Armor Soak</button></div>
                </div>
                <!--Buttons for toggling GM whispering-->
                <div class="sheet-wh-toggle sheet-rolls-row sheet-subblock" style="width: 96%;">
                    <span>All Rolls:</span>
                    <div><input class="sheet-w-toggle" name="attr_whisper_toggle" type="radio" value="" checked="checked"/><span>Public</span></div>
                    <div><input class="sheet-w-toggle" name="attr_whisper_toggle" type="radio" value="/w gm "/><span>To GM</span></div>
                </div>
            </div>
        </div>
        
    <!--Avantage or disadvantage, with an extra dice in case there is a need for more generic dice to be rolled and tracked on the sheet (usually these don't go above a d12, but they could go up to a d12 + d4, or they could be used to add to a skill with a d12 + d4 modifier)-->
    <div class="sheet-advantage-disadvantage sheet-subblock">
        <!--Note that these use the old checkbox system with rolls to keep advantage and disaddvantae seperated-->
        <label>Advantage and Disadvantage</label>
        <div class="sheet-rolls-row">
        <div class="sheet-rolls-col sheet-substat">
            <span>Advantage</span>
                <div>
                    <select name="attr_advantage" title="@{advantage}" class="sheet-advdisdie" value="4">
                        <option value="4">d4</option>
    				    <option value="6">d6</option>
    				    <option value="8">d8</option>
    				    <option value="10">d10</option>
    				    <option value="12">d12</option>
    		        </select>
    		        <span>
    			        <input type="checkbox" name="attr_advantagecheck" value="1d@{advantage}!"/>
    			    </span>
    			</div>
    	    <span>Disadvantage</span>
                <div>
                    <select name="attr_disadvantage" title="@{disadvantage}" class="sheet-advdisdie" value="4">
                        <option value="4">d4</option>
    			    	<option value="6">d6</option>
    			    	<option value="8">d8</option>
    				    <option value="10">d10</option>
    			    	<option value="12">d12</option>
    			    </select>
    			    <span>
    			        <input type="checkbox" name="attr_disadvantagecheck" value="1d@{disadvantage}!"/>
    			    </span>
    			</div>
    	</div>
    	<div class="sheet-rolls-col sheet-substat">
    	    <span>Extra Adv. Die</span>
                <div>
                    <select name="attr_extra_adv_die" title="@{extra_adv_die}" class="sheet-advdisdie" value="4">
                        <option value="4">d4</option>
    				    <option value="6">d6</option>
    				    <option value="8">d8</option>
    				    <option value="10">d10</option>
    				    <option value="12">d12</option>
    			    </select>
    			    <span>
    			        <input type="checkbox" name="attr_extra_advantagecheck" value="1d@{extra_adv_die}!"/>
    			    </span>
    			</div>
    	    <span>Extra Dis. Die</span>
                <div>
                    <select name="attr_extra_dis_die" title="@{extra_dis_die}" class="sheet-advdisdie" value="4">
                        <option value="4">d4</option>
    				    <option value="6">d6</option>
    				    <option value="8">d8</option>
    				    <option value="10">d10</option>
    				    <option value="12">d12</option>
    			    </select>
    			    <span>
    			        <input type="checkbox" name="attr_extra_disadvantagecheck" value="1d@{extra_dis_die}!"/>
    			    </span>
    			</div>
    	</div>
    	</div>
    </div>
    </div>
    
    <!--Note that these role templates are very long due to the nature of selecting what to roll, so more than the usual two dice (without advantage) can be selected and can make for a dud roll-->
    <div class="sheet-stats sheet-block">
        <div class="sheet-smstatistics">
            <h3>Abilities</h3>
        </div>
        
        <div class="sheet-agi sheet-subblock">
            <label>Agi</label>
                <span><select name="attr_agility" title="@{agility}" class="sheet-traitdie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select></span>
    			<span>
    			    <input type="checkbox" name="attr_agilitycheck" value="1d@{agility}!" checked="checked" style="display: none;"/>
    			</span>
        </div>
        
        <div class="sheet-cha sheet-subblock">
            <label>Cha</label>
                <span class="sheet-statmenu"><select name="attr_charisma" title="@{charisma}" class="sheet-traitdie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select></span>
    			<span>
    			    <input type="checkbox" name="attr_charismacheck" value="1d@{charisma}!" checked="checked" style="display: none;"/>
    			</span>
        </div>
        
        <div class="sheet-dex sheet-subblock">
            <label>Dex</label>
                <span class="sheet-statmenu"><select name="attr_dexterity" title="@{dexterity}" class="sheet-traitdie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select></span>
    			<span>
    			    <input type="checkbox" name="attr_dexteritycheck" value="1d@{dexterity}!" checked="checked" style="display: none;"/>
    			</span>
        </div>
        
        <div class="sheet-cun sheet-subblock">
            <label>Cun</label>
                <span class="sheet-statmenu"><select name="attr_cunning" title="@{cunning}" class="sheet-traitdie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select></span>
    			<span>
    			    <input type="checkbox" name="attr_cunningcheck" value="1d@{cunning}!" checked="checked" style="display: none;"/>
    			</span>
        </div>
        
        <div class="sheet-con sheet-subblock">
            <label>Con</label>
                <span class="sheet-statmenu"><select name="attr_constitution" title="@{constitution}" class="sheet-traitdie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select></span>
    			<span>
    			    <input type="checkbox" name="attr_constitutioncheck" value="1d@{constitution}!"checked="checked" style="display: none;"/>
    			</span>
        </div>
        
        <div class="sheet-will sheet-subblock">
            <label>Will</label>
                <span class="sheet-statmenu"><select name="attr_willpower" title="@{willpower}" class="sheet-traitdie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select></span>
    			<span>
    			    <input type="checkbox" name="attr_willcheck" value="1d@{willpower}!" checked="checked" style="display: none;"/>
    			</span>
        </div>
        
        <div class="sheet-str sheet-subblock">
            <label>Str</label>
                <span class="sheet-statmenu"><select name="attr_strength" title="@{strength}" class="sheet-traitdie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select></span>
    			<span>
    			    <input type="checkbox" name="attr_strengthcheck" value="1d@{strength}!" checked="checked" style="display: none;"/>
    			</span>
        </div>
        
        <div class="sheet-luck sheet-subblock">
            <label>Luck</label>
                <span class="sheet-statmenu"><select name="attr_luck" title="@{luck}" class="sheet-traitdie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select></span>
    			<span>
    			    <input type="checkbox" name="attr_luckcheck" value="1d@{luck}!" checked="checked" style="display: none;"/>
    			</span>
        </div>
        
            <!--Exhaustion tracking, can be toggled on or off for certian abilities-->
            <div class="sheet-exhaustion-disadvantage sheet-subblock">
                <label>Exhaustion Effects</label>
                <div class="sheet-exhaustion-effects sheet-substat">
                    <div>Dis. Level:<input name="attr_exhaustion_tracking" title="@{exhaustion_tracking}" class="sheet-disadvantage-level" readonly="readonly" style="width: 60px;">
                </div>
            </div>
        </div>
    </div>
    
    
    <div class="sheet-biometrics sheet-block">
        <div class="sheet-biom">
            <h3>Biometrics</h3>
        </div>
        
        <!--These totals for each value are automatically calculated from the attributes input in selection tables-->
        <div class="sheet-inj sheet-subblock">
            <label>Injuries</label>
            <div class="sheet-ment sheet-substat">
                <p style="font-weight: bold;">Mental</p>
                    <div class="subcontainer" style="height: min-content; width: 70px;">
                        <div class="top">
                            <span style="font-size: 12px;">Current</span>
                            <input type="number" name="attr_mental_injuries" title="@{mental_injuries}" class="sheet-biomenu" min="0" max="@{mental_injuries_max}" step="1">
                        </div>
                            <span style="font-size: 12px;">Total</span>
                            <input type="number" name="attr_mental_injuries_max" title="@{mental_injuries_max}" class="sheet-biomenu" readonly="readonly" value="">
                    </div>
            </div>
            
            <div class="sheet-phys sheet-substat">
                <p style="font-weight: bold;">Physical</p>
                    <div class="subcontainer" style="height: min-content; width: 70px;">
                        <div class="top">
                            <span style="font-size: 12px;">Current</span>
                            <input type="number" name="attr_physical_injuries" title="@{physical_injuries}" class="sheet-biomenu"  min="0" max="@{physical_injuries_max}" step="1">
                        </div>
                            <span style="font-size: 12px;">Total</span>
                            <input type="number" name="attr_physical_injuries_max" title="@{physical_injuries_max}" class="sheet-biomenu" readonly="readonly" value="">
                    </div>
            </div>
        </div>
        
        <!--Uses the same select box as the weapon table above-->
        <div class="sheet-arm sheet-subblock">
            <label>Armor</label>
            <span style="font-size: 12px;">Soak</span>
            <input type="text" name="attr_armor" title="@{armor}" class="sheet-biomenu" placeholder="1d6" value="1d6">
            <select name="attr_armor_soak_ability" title="@{armor_soak_ability}" class="sheet-armor-soakdie" style="width: 74px;" value="None">
                <option value="1d0">None</option>
    			<option value="1d@{agility}!">Agility</option>
    			<option value="1d@{charisma}!">Charisma</option>
    			<option value="1d@{cunning}!">Cunning</option>
    			<option value="1d@{dexterity}!">Dexterity</option>
    			<option value="1d@{constitution}!">Constitution</option>
    			<option value="1d@{will}!">Will</option>
    		    <option value="1d@{strength}!">Strength</option>
    			<option value="1d@{luck}!">Luck</option>
    			<option value="1d@{acrobat}!">Acrobat</option>
    			<option value="1d@{climb}!">Climb</option>
    			<option value="1d@{coerce}!">Coerce</option>
    			<option value="1d@{engineer}!">Engineer</option>
    			<option value="1d@{insight}!">Insight</option>
    			<option value="1d@{marksman}!">Marksman</option>
    			<option value="1d@{martial_arts}!">Martial Arts</option>
    			<option value="1d@{performance}!">Performance</option>
    			<option value="1d@{pilot}!">Pilot</option>
    			<option value="1d@{ranger}!">Ranger</option>
    			<option value="1d@{sleight_of_hand}!">Sleight of Hand</option>
    			<option value="1d@{stealth}!">Stealth</option>
    			<option value="1d@{swim}!">Swim</option>
    			<option value="1d@{treat_injury}!">Treat Injury</option>
    			<option value="1d@{throwing}!">Throwing</option>
    			<option value="1d@{custom_skill_1}!">Custom Skill 1</option>
    			<option value="1d@{custom_skill_2}!">Custom Skill 2</option>
    			<option value="1d@{custom_skill_3}!">Custom Skill 3</option>
    			<option value="1d@{custom_skill_4}!">Custom Skill 4</option>
    			<option value="1d@{custom_skill_5}!">Custom Skill 5</option>
    		</select>
        </div>
        
        <div class="sheet-cond sheet-subblock">
            <label>Condition</label>
            
            <div class="sheet-exh sheet-substat">
                <p  style="font-weight: bold;">Exhaustion</p>
                    <div class="subcontainer" style="height: min-content; width: 70px;">
                        <div class="top">
                            <span style="font-size: 12px;">Current</span>
                            <input type="number" name="attr_exhaustion_lvl" title="@{exhaustion_lvl}" class="sheet-biomenu" min = "0" max="@{exhaustion_max}" step="1">
                        </div>
                            <span style="font-size: 12px;">Total</span>
                            <input type="number" name="attr_exhaustion_max" title="@{exhaustion_max}" class="sheet-biomenu" readonly = "readonly" value = "">
                    </div>
            </div>
            
            <div class="sheet-blood sheet-substat">
                <p  style="font-weight: bold;">Blood Points</p>
                    <div class="subcontainer" style="height: min-content; width: 70px;">
                        <div class="top">
                            <span style="font-size: 12px;">Current</span>
                            <input type="number" name="attr_blood_points" title="@{blood_points}" class="sheet-biomenu" min = "0" max="@{blood_points_max}" step="1">
                        </div>
                            <span style="font-size: 12px;">Total</span>
                            <input type="number" name="attr_blood_points_max" title="@{blood_points_max}" class="sheet-biomenu" readonly = "readonly" value="">
                    </div>
            </div>
        </div>
        
        <!--These are not automatically calculated as the number is variable due to boons and curses that one can recieve-->
        <div class="sheet-movement sheet-subblock">
            <label>Movement</label>
                <div class="subcontainer" style="height: min-content; width: 70px;">
                    <div class="top">
                        <span style="font-size: 12px;">Walk</span>
                        <input type="number" name="attr_running_movement" title="@{running_movement}" class="sheet-biomenu" min = "0">
                    </div>
                    
                    <div class = "bottom">
                        <span style="font-size: 12px;">Swim</span>
                        <input type="number" name="attr_walking_movement" title="@{walking_movement}" class="sheet-biomenu" min = "0">
                    </div>
                </div>
        </div>
    </div>
   
    <!--Items and equipment paragraphs, the equipment block could be improved through customization of the input boxes, the other large slot is greyed out due to needing a boon to equip something there-->
    <div class="sheet-items-equipment sheet-block">
        <div class = sheet-equiphead>
            <h3>Equipment</h3>
        </div>
            
        <div class="sheet-equipment sheet-subblock">
                <label>L</label>
                <input type="text" name="attr_large_equipment_one" title="@{large_equipment_one}"/>
            
                <label>L</label>
                <input type="text" name="attr_large_equipment_two" title="@{large_equipment_two}" style="background-color: #c0c0c0;"/>
            
                <label>M</label>
                <input type="text" name="attr_medium_equipment_one" title="@{medium_equipment_one}"/>
            
                <label>M</label>
                <input type="text" name="attr_medium_equipment_two" title="@{medium_equipment_two}"/>
            
                <label>S</label>
                <input type="text" name="attr_small_equipment_one" title="@{small_equipment_one}"/>
            
                <label>S</label>
                <input type="text" name="attr_small_equipment_two" title="@{small_equipment_two}"/>
        </div>
        
        <div class="sheet-addit sheet-subblock">
            <label>Additional Items</label>
            <div class="sheet-repeating-boons">
                <fieldset class="repeating_quipment">
                    <input class="sheet-input-center-aligned" type="text" value="" name="attr_equipment_name" title="@{equipment_name}" placeholder="Equipment Name" style="width: 150px;"/>
                    <span>Desc:</span>
                    <input type="checkbox" class="sheet-toggle-show-desc"/>
                    <div class="sheet-description"><textarea name="attr_equipment_description" placeholder="Equipment description" style="min-height: 200px; height: 200px; margin-top: 0px; margin-bottom: 0px; max-width: 210px; width : 210; min-width: 210px;"></textarea></div>
                </fieldset>
            </div>
        </div>
        
        <div class="sheet-wealprop sheet-subblock">
            <label>Wealth and Property</label>
            <div class="textbox">
                <div class="options">
                    <textarea name="attr_wealth_property" style="min-height: 186px; height: 186px; max-height: 274px; max-width: 210px; min-width: 210px;"></textarea>
                </div>
            </div>
        </div>
    </div>
    
    <!--Large skill section, the next step would be to add the ability to expand these skills for more customization, although five custom skills is usally enough-->
    <div class="sheet-skills sheet-block">
        <div class="sheet-skills-head">
            <label>Skills</label>
        </div>
        
        <div class="sheet-skills-label-1">
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Acrobat</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_acrobat" title="@{acrobat}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_acrobatcheck" value="1d@{acrobat}!" checked="checked" style="display: none;"/>
    			</span></div>
    			
            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Climb</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_climb" title="@{climb}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_climbcheck" value="1d@{climb}!" checked="checked" style="display: none;"/>
    			</span></div>
    			
            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Coerce</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_coerce" title="@{coerce}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_coercecheck" value="1d@{coerce}!" checked="checked" style="display: none;"/>
    			</span></div>

            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Engineer</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_engineer" title="@{engineer}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_engineercheck" value="1d@{engineer}!" checked="checked" style="display: none;"/>
    			</span></div>

            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Insight</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_insight" title="@{insight}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_insightcheck" value="1d@{insight}!" checked="checked" style="display: none;"/>
    			</span></div>
    			
            </div>
        </div>
        
        <div class="sheet-skills-label-2">
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span><span>Marksman</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_marksman" title="@{marksman}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_marksmancheck" value="1d@{marksman}!" checked="checked" style="display: none;"/>
    			</span></div>

            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Martial Arts</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_martial_arts" title="@{martial_arts}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_martial_artscheck" value="1d@{martial_arts}!" checked="checked" style="display: none;"/>
    			</span></div>

            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Performance</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_performance" title="@{performance}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_performancecheck" value="1d@{performance}!" checked="checked" style="display: none;"/>
    			</span></div>
    			
            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Pilot</span></div>
            
                <div class="sheet-skills-column"><span><select name="attr_pilot" title="@{pilot}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_pilotcheck" value="1d@{pilot}!" checked="checked" style="display: none;"/>
    			</span></div>

            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Ranger</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_ranger" title="@{ranger}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_rangercheck" value="1d@{ranger}!" checked="checked" style="display: none;"/>
    			</span></div>
    			
            </div>
        </div>
        
        <div class="sheet-skills-label-3">
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Sleight of Hand</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_sleight_of_hand" title="@{sleight_of_hand}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_sleight_of_handcheck" value="1d@{sleight_of_hand}!" checked="checked" style="display: none;"/>
    			</span></div>

            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Stealth</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_stealth" title="@{stealth}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_stealthcheck" value="1d@{stealth}!" checked="checked" style="display: none;"/>
    			</span></div>
    			
            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Swim</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_swim" title="@{swim}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_swimcheck" value="1d@{swim}!" checked="checked" style="display: none;"/>
    			</span></div>
   
            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Treat Injury</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_treat_injury" title="@{treat_injury}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_treat_injurycheck" value="1d@{treat_injury}!" checked="checked" style="display: none;"/>
    			</span></div>
    			
            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"><span>Throwing</span></div>
                
                <div class="sheet-skills-column"><span><select name="attr_throwing" title="@{throwing}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_throwingcheck" value="1d@{throwing}!" checked="checked" style="display: none;"/>
    			</span></div>

            </div>
        </div>
        
        <div class="sheet-skills-label-4">
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"> 
                    <input class="sheet-input-center-aligned" type="text" name="attr_custom_skill_1_name" style="width: 100px; " name="@{custom_skill_1_name}" placeholder="Custom Skill 1"/>
                </div>
                
                <div class="sheet-skills-column"><span><select name="attr_custom_skill_1" title="@{custom_skill_1}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_custom_skill_1check" value="1d@{custom_skill_1}!" checked="checked" style="display: none;"/>
    			</span></div>

            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"> 
                    <input class="sheet-input-center-aligned" type="text" name="attr_custom_skill_2_name" style="width: 100px;" name="@{custom_skill_2_name}" placeholder="Custom Skill 2"/>
                </div>
                
                <div class="sheet-skills-column"><span><select name="attr_custom_skill_2" title="@{custom_skill_2}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_custom_skill_2check" value="1d@{custom_skill_2}!" checked="checked" style="display: none;"/>
    			</span></div>

            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"> 
                    <input class="sheet-input-center-aligned" type="text" name="attr_custom_skill_3_name" style="width: 100px;" name="@{custom_skill_3_name}" placeholder="Custom Skill 3"/>
                </div>
                
                <div class="sheet-skills-column"><span><select name="attr_custom_skill_3" title="@{custom_skill_3}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_custom_skill_3check" value="1d@{custom_skill_3}!" checked="checked" style="display: none;"/>
    			</span></div>

            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"> 
                    <input class="sheet-input-center-aligned" type="text" name="attr_custom_skill_4_name" style="width: 100px;" name="@{custom_skill_4_name}" placeholder="Custom Skill 4"/>
                </div>
                
                <div class="sheet-skills-column"><span><select name="attr_custom_skill_4" title="@{custom_skill_4}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_custom_skill_4check" value="1d@{custom_skill_4}!" checked="checked" style="display: none;"/>
    			</span></div>

            </div>
            
            <div class="sheet-skill sheet-skill-row">
                <div class="sheet-skills-column"> 
                    <input class="sheet-input-center-aligned" type="text" name="attr_custom_skill_5_name" style="width: 100px;" name="@{custom_skill_5_name}" placeholder="Custom Skill 5"/>
                </div>
                
                <div class="sheet-skills-column"><span><select name="attr_custom_skill_5" title="@{custom_skill_5}" class="sheet-skilldie" value="4">
                    <option value="4">d4</option>
    				<option value="6">d6</option>
    				<option value="8">d8</option>
    				<option value="10">d10</option>
    				<option value="12">d12</option>
    			</select>
    			    <input type="checkbox" name="attr_custom_skill_5check" value="1d@{custom_skill_5}!" checked="checked" style="display: none;"/>
    			</span></div>
    			
            </div>
        </div>
    </div>
</div>

<!--Next tab of the character sheet, the journal and other misc. boxes for writing things down-->
<div class="sheet-journal">
    <div class="sheet-backstory sheet-block">
        <label>Backstory</label>
            <div class="textbox">
                <div class="options">
                    <textarea name="" style="min-height: 50px; height: 50px; width: 406px; max-width: 406px; min-width: 406px;"></textarea>
                </div>
            </div>
    </div>
   
    <div class="sheet-character-traits sheet-block">
        <label>Character Traits</label>
            <div class="textbox">
                <div class="options">
                    <textarea name="" style="min-height: 50px; height: 50px; width: 406px; max-width: 406px; min-width: 406px;"></textarea>
                </div>
            </div>
    </div>
    
    <div class="sheet-misc sheet-block">
        <label>Misc. Stuff</label>
            <div class="textbox">
                <div class="options">
                    <textarea name="" style="min-height: 50px; height: 50px; width: 830px; max-width: 830px; min-width: 830px;"></textarea>
                </div>
            </div>
    </div>
</div>

<!--A few more complex settings, more can be added later-->
<div class="sheet-config">
    <h2>Config/Settings</h2>
    <div>
        <span>Toggle Exh. Tracking:</span>
        <input  type="checkbox" name="attr_exhaustion_check" title="@{exhaustion_check}" value="@{exhaustion_tracking}"/>
    </div>
    
    <div>
        <span>Toggle Heroic Character:</span>
        <input  type="checkbox" name="attr_heroic_character" title="@{heroic_character}"  value="1"/>
    </div>
    
    <div>
        <span>Add Max Physical Injuries:</span>
        <input type="number" name="attr_extra_physical_injuries" title="@{extra_physical_injuries}" class="sheet-biomenu" min = "0" step="1">
    </div>
    
    <div>
        <span>Add Max Mental Injuries:</span>
        <input type="number" name="attr_extra_mental_injuries" title="@{extra_mental_injuries}" class="sheet-biomenu" min = "0" step="1">
    </div>
    
    <div>
        <span>Add Max Exhaustion:</span>
        <input type="number" name="attr_extra_exhaustion" title="@{extra_exhaustion}" class="sheet-biomenu" min = "0" step="1">
    </div>
	
    <div>
        <span>Add Max Blood Points:</span>
        <input type="number" name="attr_extra_blood_points" title="@{extra_blood_points}" class="sheet-biomenu" min = "0" step="1">
    </div>
</div>

<!--Custom roll table for this sheet, uses Jakob's Better Default Rolltemplate with some customization-->
<rolltemplate class="sheet-rolltemplate-skeleton">
    <div class="sheet-container sheet-color-{{color}}">
        <div class="sheet-header">
            {{#title}}<div class="sheet-title">{{title}}</div>{{/title}}
            {{#subtitle}}<div class="sheet-subtitle">{{subtitle}}</div>{{/subtitle}}
        </div>
        
        <div class="sheet-content">
            {{#allprops() title subtitle desc color}}
        <div class="sheet-key">{{key}}</div>
        <div class="sheet-value">{{value}}</div>
            {{/allprops() title subtitle desc color}}
            {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
        </div>
    </div>
</rolltemplate>

<!--Text workers for changing tabs on the sheet and updating exhaustion-->
<script type="text/worker">
    const buttonlist = ["character","journal","configuration"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });
    
    //Changing max injuries, blood points, and max exhaustion
    on("change:willpower change:constitution change:heroic_character change:extra_physical_injuries change:extra_mental_injuries change:extra_exhaustion change:extra_blood_points change:sheet:opened", function() {
        getAttrs(["willpower", "constitution", "extra_physical_injuries", "extra_mental_injuries", "extra_exhaustion", "extra_blood_points", "heroic_character"], function(values) {
            let will = parseInt(values["willpower"]) || 0;
            let con = parseInt(values["constitution"]) || 0;
            let heroic = parseInt(values["heroic_character"]) || 0;
            let extraphys = parseInt(values["extra_physical_injuries"]) || 0;
            let extrament = parseInt(values["extra_mental_injuries"]) || 0;
            let extraexh = parseInt(values["extra_exhaustion"]) || 0;
            let extrabp = parseInt(values["extra_blood_points"]) || 0;
	    console.log(heroic);
            
            let mentInjMax = extrament + (will / 2);
            let physInjMax = extraphys + (con / 2);
            let maxInj = Math.max(mentInjMax, physInjMax);
            let minInj = Math.min(mentInjMax, physInjMax)

            if (heroic == 1) {
                var exhMax = (2 * maxInj) + minInj + extraexh;
            }
            else {
                var exhMax = mentInjMax + physInjMax + extraexh;
            }
            
            setAttrs({                            
                mental_injuries_max: mentInjMax,
                physical_injuries_max: physInjMax,
                blood_points_max: con + extrabp,
                exhaustion_max: exhMax
            });
            
        });
    });
    
    //Changes effects based on exhaustion level and max exhaustion
    on("change:exhaustion_lvl change:exhaustion_max change:heroic_character sheet:opened", function() {
    getAttrs(["exhaustion_lvl", "exhaustion_max"], function(values) {
        const output = {};
        
        const exhaust = parseInt(values["exhaustion_lvl"]) || 0;
        const maxExhaust = parseInt(values["exhaustion_max"]) || 0;
        
        const exhDivision = Math.round(maxExhaust / 2);
        
        if (exhaust == 0 || exhaust < exhDivision) {
            output["exhaustion_tracking"] = 0;
        }
        else if ((exhaust >= exhDivision) && (exhaust < (exhDivision + 2)) && !(exhaust >= maxExhaust)) {
            output["exhaustion_tracking"] = "1d4!";
        }
        else if ((exhaust >= (exhDivision + 2)) && (exhaust < (exhDivision + 4)) && !(exhaust >= maxExhaust)) {
            output["exhaustion_tracking"] = "1d6!";
        }
        else if ((exhaust >= (exhDivision + 4))  && (exhaust < (exhDivision + 2)) && !(exhaust >= maxExhaust)) {
            output["exhaustion_tracking"] = "1d8!";
        }
        else if ((exhaust >= (exhDivision + 6))  && (exhaust < maxExhaust)) {
            output["exhaustion_tracking"] = "1d10!";
        }
        else {
            output["exhaustion_tracking"] = "Incap.";
        } 
        setAttrs(output);
        }); 
    });
</script>




